=head1 NAME

Convos::Guides::Running - How to run Convos

=head1 GUIDE

This guide will give an introduction on how to run L<Convos>. It is very
easy to get started, but you can also tweak many settings.

=head2 Get started

You can start convos by running the command below:

  $ convos daemon

You can then visit Convos in your browser, by going to the default
address L<http://localhost:3000>.

=head2 Basics

  $ convos daemon --help

The command above will provide more information about command line
arguments. One useful switch is how to specify a listen port:

  $ /convos daemon --listen http://127.0.0.1:5000

=head2 Configuration

L<Convos> can be configured with eithe a config file or environment variables.

=over 2

=item * CONVOS_BACKEND

Can be set to any class name that "is a" L<Convos::Core::Backend>.

Defaults: "L<Convos::Core::Backend::File>".

=item * CONVOS_CONNECT_TIMER

This variable decides how many seconds to wait between each user to connect
to a chat server. The reason for this setting is that some servers will set
a permanent ban if you "flood connect".

Default: 3.

=item * CONVOS_CONTACT

Used when rendering "Contact" links in the frontend.

Default: "mailto:root@localhost".

=item * CONVOS_DEBUG

Setting this variable to a true value will print extra debug information to
STDERR. Other useful debug variable is L<MOJO_IRC_DEBUG>.

=item * CONVOS_DEFAULT_SERVER

Used to declare which server should be pre-filled when a user creates a new
connection.

Default: "localhost".

=item * CONVOS_HOME

This variable is used by L<Convos::Core::Backend::File> to figure out where
to store settings and log files.

Default: "$HOME/.local/share/convos/".

=item * CONVOS_ORGANIZATION_NAME

Should be set to the name of the organization running this instance of
L<Convos>.

Default: "Nordaaker".

=item * CONVOS_PLUGINS

A list of perl modules that can be loaded into the
L<Convos::Core::Backend> for optional functionality.

Default: No plugins.

=item * CONVOS_SECRETS

Should be set to list (colon separated) of random strings. This value is used
to secure the Cookies written to the client.

Default: A single generated unsafe value.

=item * CONVOS_SECURE_COOKIES

Should be set to true if L<Convos> is served over HTTPS.

Default: "0".

=item * MOJO_CONFIG

Can hold the path to a config file, which is read by L<Convos> instead of
using the environment variables. Example config:

  {
    backend        => $ENV{CONVOS_BACKEND},
    name           => $ENV{CONVOS_ORGANIZATION_NAME},
    secrets        => $ENV{CONVOS_SECRETS},
    secure_cookies => $ENV{CONVOS_SECURE_COOKIES},
    plugins        => {
      "Plugin::Name" => {plugin => "settings"},
    },
    settings       => {
      contact        => $ENV{CONVOS_CONTACT},
      default_server => $ENV{CONVOS_DEFAULT_SERVER},
    },
  }

=back

=head2 Optional modules

There are some optiona modules that can be installed to enhance the
experience. The command below will show if the modules are installed
or not:

  $ convos version

One very useful addition is L<EV>, which makes L<Convos> faster. It
can be installed with the command below:

  $ cpanm EV

=head2 Hypnotoad and Prefork

It is not possible to run L<Convos> with L<hypnotoad|Mojo::Server::Hypntoad>,
nor the L<prefork|Mojo::Server::Prefork> server. The reason for this is that
L<Convos::Core> require shared memory, which a forked environment contradicts.

You need to run L<Convos> in single process, using L<Mojo::Server::Daemon>.

=head1 AUTHOR

Jan Henning Thorsen - C<jhthorsen@cpan.org>

=cut
