(function(){Vue.component("convos-notifications",{props:["user"],methods:{gotoMessage:function(msg){this.settings.main="#chat/"+msg.connection_id+"/"+msg.dialog_id;},markAsRead:function(){var self=this;Convos.api.readNotifications({},function(err,xhr){if(!err)self.user.unread=0;});},markAsReadClass:function(){return this.user.unread?'':'disabled';},unreadTooltip:function(){return this.user.unread?'Mark '+this.user.unread+' notifications as read.':'All notifications are read.';}},template:"<div class=\"convos-notifications is-sidebar\">\n    <header><convos-header-links :user=\"user\"></convos-header-links></header>\n    <div class=\"content\">\n      <div class=\"row\">\n        <div class=\"col s12\">\n          <h5>\n            <a :class=\"markAsReadClass()\" @click.prevent=\"markAsRead()\" class=\"btn-floating waves-effect waves-light\" href=\"#mark-as-read\" v-tooltip=\"unreadTooltip()\"><i class=\"material-icons\">check</i></a>\n            Notifications\n          </h5>\n        </div>\n      </div>\n      <div class=\"row notification read\" v-if=\"!user.notifications.length\">\n        <div class=\"col s12\">\n          <h5>convosbot</h5>\n          <div class=\"message\">No notifications.</div>\n        </div>\n      </div>\n      <div :class=\"$index &gt;= user.unread ? &#39;read&#39; : &#39;&#39;\" @click=\"gotoMessage(msg)\" class=\"row notification\" v-for=\"msg in user.notifications\">\n        <div class=\"col s12\">\n          <span class=\"secondary-content ts\" v-tooltip=\"msg.ts.toLocaleString()\">{{msg.ts | timestring}}</span>\n          <h5>{{msg.from}} in {{msg.dialog_id}}</h5>\n          <div class=\"message\">{{msg.message}}</div>\n        </div>\n      </div>\n    </div>\n  </div>\n"})})();