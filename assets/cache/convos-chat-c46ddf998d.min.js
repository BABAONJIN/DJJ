(function(){Vue.component("convos-chat",{props:["user"],data:function(){return{searchQuery:"",show:"",error:{}};},watch:{"settings.main":function(v,o){this.calculateMainArea();}},methods:{calculateMainArea:function(){var main=Convos.settings.main;var i;this.show="settings";this.error={message:"Could not find dialog "+main+"."};for(i=0;i<this.user.dialogs.length;i++){var dialog=this.user.dialogs[i];if(dialog.href()==main||(i==0&&!main)){Convos.settings.main=dialog.href();dialog.update({active:true});this.show="dialog";this.error={};}
else if(dialog.active!==undefined){dialog.update({active:false});}}},header:function(){var dialog=this.user.activeDialog();return dialog&&dialog.name?dialog.name:"Convos";},search:function(e){if(!this.searchQuery.length||e.shiftKey)return;this.$refs.mainmenu.$emit("gotoDialog");this.searchQuery="";},toggleMainMenu:function(){this.settings.sidebar="";this.settings.mainMenuVisible=!this.settings.mainMenuVisible;}},ready:function(){this.calculateMainArea();},template:"<div class=\"convos-chat\">\n    <header>\n      <a :class=\"settings.mainMenuVisible ? &#39;active&#39; : &#39;&#39;\" @click.prevent=\"toggleMainMenu\" class=\"toggle-main-menu\" href=\"#main-menu\"><i class=\"material-icons\">dehaze</i></a>\n      <div class=\"input-field\">\n        <input @keydown.enter=\"search\" autocomplete=\"off\" id=\"goto_anything\" placeholder=\"Search...\" type=\"search\" v-model=\"searchQuery\">\n        <label for=\"goto_anything\"><i class=\"material-icons\">search</i></label>\n      </div>\n      <h2>{{header()}}</h2>\n    <div class=\"convos-header-links\">\n      <a :class=\"activeClass(&#39;sidebar-info&#39;)\" v-sidebar.literal=\"#sidebar-info\" v-tooltip.literal=\"Dialog settings\">\n        <i class=\"material-icons\">info</i>\n      </a>\n      <a :class=\"activeClass(&#39;notifications&#39;)\" class=\"notifications\" v-sidebar.literal=\"#notifications\" v-tooltip.literal=\"Show notifications\">\n        <i :class=\"user.unread ? &#39;active&#39; : &#39;&#39;\" class=\"material-icons\">{{user.unread ? &quot;notifications_active&quot; : &quot;notifications_none&quot;}}</i>\n        <b class=\"n-notifications\" v-if=\"user.unread\">{{user.unread &lt; 100 ? user.unread : &quot;99+&quot;}}</b>\n      </a>\n    </div>\n    </header>\n    <convos-dialog-container :dialog=\"d\" :user=\"user\" v-for=\"d in user.dialogs\" v-show=\"d.active\"></convos-dialog-container>\n    <convos-settings :error=\"error\" :user=\"user\" v-if=\"show == &#39;settings&#39;\"></convos-settings>\n    <component :is=\"&#39;convos-&#39; + settings.sidebar\" :user=\"user\" v-if=\"settings.sidebar\"></component>\n    <convos-main-menu :dialog-filter.sync=\"searchQuery\" :user=\"user\" v-ref:mainmenu></convos-main-menu>\n  </div>\n"})})();