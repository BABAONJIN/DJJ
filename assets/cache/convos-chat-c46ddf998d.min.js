(function(){Vue.component("convos-chat",{props:["user"],data:function(){return{show:"",error:{}};},watch:{"settings.main":function(v,o){this.calculateMainArea();}},methods:{calculateMainArea:function(){var main=Convos.settings.main;var i;this.show="settings";this.error={message:"Could not find dialog "+main+"."};for(i=0;i<this.user.dialogs.length;i++){var dialog=this.user.dialogs[i];if(dialog.href()==main||(i==0&&!main)){Convos.settings.main=dialog.href();dialog.update({active:true});this.show="dialog";this.error={};}
else if(dialog.active!==undefined){dialog.update({active:false});}}}},ready:function(){this.calculateMainArea();},template:"<div class=\"convos-chat\">\n    <convos-main-menu :user=\"user\"></convos-main-menu>\n    <convos-dialog-container :dialog=\"d\" :user=\"user\" v-for=\"d in user.dialogs\" v-show=\"d.active\"></convos-dialog-container>\n    <convos-settings :error=\"error\" :user=\"user\" v-if=\"show == &#39;settings&#39;\"></convos-settings>\n    <component :is=\"&#39;convos-&#39; + settings.sidebar\" :user=\"user\" v-if=\"settings.sidebar\"></component>\n  </div>\n"})})();