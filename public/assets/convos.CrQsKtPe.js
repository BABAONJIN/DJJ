var Kc=Object.defineProperty;var Yc=(t,e,n)=>e in t?Kc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var pn=(t,e,n)=>(Yc(t,typeof e!="symbol"?e+"":e,n),n);const si={add(t){document.body.classList.remove("no-"+t),document.body.classList.add("has-"+t)},has(t){return document.body.classList.contains("has-"+t)},remove(t){document.body.classList.add("no-"+t),document.body.classList.remove("has-"+t)}};lu("mousemove","mouse");lu("touchstart","touch");si.add("js");function lu(t,e){const n=()=>{t!=="mousemove"&&si.add(e),t==="mousemove"&&!si.has("touch")&&si.add(e),document.removeEventListener(t,n)};document.addEventListener(t,n)}function Oe(){}const au=t=>t;function Vc(t,e){for(const n in e)t[n]=e[n];return t}function Zc(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function uu(t){return t()}function bs(){return Object.create(null)}function ht(t){t.forEach(uu)}function Un(t){return typeof t=="function"}function Ze(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Jc(t){return Object.keys(t).length===0}function _t(t,...e){if(t==null){for(const i of e)i(void 0);return Oe}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Qc(t){let e;return _t(t,n=>e=n)(),e}function ve(t,e,n){t.$$.on_destroy.push(_t(e,n))}function Gt(t,e,n,i){if(t){const o=cu(t,e,n,i);return t[0](o)}}function cu(t,e,n,i){return t[1]&&i?Vc(n.ctx.slice(),t[1](i(e))):n.ctx}function Kt(t,e,n,i){if(t[2]&&i){const o=t[2](i(n));if(e.dirty===void 0)return o;if(typeof o=="object"){const r=[],s=Math.max(e.dirty.length,o.length);for(let l=0;l<s;l+=1)r[l]=e.dirty[l]|o[l];return r}return e.dirty|o}return e.dirty}function Yt(t,e,n,i,o,r){if(o){const s=cu(e,n,i,r);t.p(s,o)}}function Vt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function _o(t){return t??""}function fu(t,e,n){return t.set(n),e}function Lr(t){return t&&Un(t.destroy)?t.destroy:Oe}function vs(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const pu=typeof window<"u";let Xc=pu?()=>window.performance.now():()=>Date.now(),Pr=pu?t=>requestAnimationFrame(t):Oe;const li=new Set;function du(t){li.forEach(e=>{e.c(t)||(li.delete(e),e.f())}),li.size!==0&&Pr(du)}function xc(t){let e;return li.size===0&&Pr(du),{promise:new Promise(n=>{li.add(e={c:t,f:n})}),abort(){li.delete(e)}}}const ef=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function f(t,e){t.appendChild(e)}function hu(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function tf(t){const e=_("style");return e.textContent="/* empty */",nf(hu(t),e),e.sheet}function nf(t,e){return f(t.head||t,e),e.sheet}function w(t,e,n){t.insertBefore(e,n||null)}function v(t){t.parentNode&&t.parentNode.removeChild(t)}function kt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function _(t){return document.createElement(t)}function of(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function O(t){return document.createTextNode(t)}function C(){return O(" ")}function ft(){return O("")}function Ce(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function st(t){return function(e){return e.preventDefault(),t.call(this,e)}}function k(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function rf(t){return Array.from(t.childNodes)}function M(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ot(t,e){t.value=e??""}function Ut(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}let oo;function sf(){if(oo===void 0){oo=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{oo=!0}}return oo}function lf(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const i=_("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const o=sf();let r;return o?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=Ce(window,"message",s=>{s.source===i.contentWindow&&e()})):(i.src="about:blank",i.onload=()=>{r=Ce(i.contentWindow,"resize",e),e()}),f(t,i),()=>{(o||r&&i.contentWindow)&&r(),v(i)}}function He(t,e,n){t.classList.toggle(e,!!n)}function mu(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}class At{constructor(e=!1){pn(this,"is_svg",!1);pn(this,"e");pn(this,"n");pn(this,"t");pn(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,i=null){this.e||(this.is_svg?this.e=of(n.nodeName):this.e=_(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)w(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(v)}}const go=new Map;let bo=0;function af(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function uf(t,e){const n={stylesheet:tf(e),rules:{}};return go.set(t,n),n}function $s(t,e,n,i,o,r,s,l=0){const a=16.666/i;let u=`{
`;for(let y=0;y<=1;y+=a){const $=e+(n-e)*r(y);u+=y*100+`%{${s($,1-$)}}
`}const c=u+`100% {${s(n,1-n)}}
}`,p=`__svelte_${af(c)}_${l}`,d=hu(t),{stylesheet:h,rules:m}=go.get(d)||uf(d,t);m[p]||(m[p]=!0,h.insertRule(`@keyframes ${p} ${c}`,h.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${p} ${i}ms linear ${o}ms 1 both`,bo+=1,p}function cf(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?r=>r.indexOf(e)<0:r=>r.indexOf("__svelte")===-1),o=n.length-i.length;o&&(t.style.animation=i.join(", "),bo-=o,bo||ff())}function ff(){Pr(()=>{bo||(go.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&v(e)}),go.clear())})}let Bi;function xt(t){Bi=t}function mi(){if(!Bi)throw new Error("Function called outside component initialization");return Bi}function tn(t){mi().$$.on_mount.push(t)}function Dr(t){mi().$$.on_destroy.push(t)}function pf(){const t=mi();return(e,n,{cancelable:i=!1}={})=>{const o=t.$$.callbacks[e];if(o){const r=mu(e,n,{cancelable:i});return o.slice().forEach(s=>{s.call(t,r)}),!r.defaultPrevented}return!0}}function Zo(t,e){return mi().$$.context.set(t,e),e}function gt(t){return mi().$$.context.get(t)}function _i(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const ei=[],fe=[];let ai=[];const dr=[],_u=Promise.resolve();let hr=!1;function gu(){hr||(hr=!0,_u.then(Ur))}function vo(){return gu(),_u}function at(t){ai.push(t)}function he(t){dr.push(t)}const Jo=new Set;let Yn=0;function Ur(){if(Yn!==0)return;const t=Bi;do{try{for(;Yn<ei.length;){const e=ei[Yn];Yn++,xt(e),df(e.$$)}}catch(e){throw ei.length=0,Yn=0,e}for(xt(null),ei.length=0,Yn=0;fe.length;)fe.pop()();for(let e=0;e<ai.length;e+=1){const n=ai[e];Jo.has(n)||(Jo.add(n),n())}ai.length=0}while(ei.length);for(;dr.length;)dr.pop()();hr=!1,Jo.clear(),xt(t)}function df(t){if(t.fragment!==null){t.update(),ht(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(at)}}function hf(t){const e=[],n=[];ai.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),ai=e}let Ti;function mf(){return Ti||(Ti=Promise.resolve(),Ti.then(()=>{Ti=null})),Ti}function Qo(t,e,n){t.dispatchEvent(mu(`${e?"intro":"outro"}${n}`))}const co=new Set;let en;function ke(){en={r:0,c:[],p:en}}function ye(){en.r||ht(en.c),en=en.p}function b(t,e){t&&t.i&&(co.delete(t),t.i(e))}function S(t,e,n,i){if(t&&t.o){if(co.has(t))return;co.add(t),en.c.push(()=>{co.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const _f={duration:0};function et(t,e,n,i){let r=e(t,n,{direction:"both"}),s=i?0:1,l=null,a=null,u=null,c;function p(){u&&cf(t,u)}function d(m,g){const y=m.b-s;return g*=Math.abs(y),{a:s,b:m.b,d:y,duration:g,start:m.start,end:m.start+g,group:m.group}}function h(m){const{delay:g=0,duration:y=300,easing:$=au,tick:E=Oe,css:T}=r||_f,K={start:Xc()+g,b:m};m||(K.group=en,en.r+=1),"inert"in t&&(m?c!==void 0&&(t.inert=c):(c=t.inert,t.inert=!0)),l||a?a=K:(T&&(p(),u=$s(t,s,m,y,g,$,T)),m&&E(0,1),l=d(K,y),at(()=>Qo(t,m,"start")),xc(L=>{if(a&&L>a.start&&(l=d(a,y),a=null,Qo(t,l.b,"start"),T&&(p(),u=$s(t,s,l.b,l.duration,0,$,r.css))),l){if(L>=l.end)E(s=l.b,1-s),Qo(t,l.b,"end"),a||(l.b?p():--l.group.r||ht(l.group.c)),l=null;else if(L>=l.start){const A=L-l.start;s=l.a+l.d*$(A/l.duration),E(s,1-s)}}return!!(l||a)}))}return{run(m){Un(r)?mf().then(()=>{r=r({direction:m?"in":"out"}),h(m)}):h(m)},end(){p(),l=a=null}}}function mr(t,e){const n=e.token={};function i(o,r,s,l){if(e.token!==n)return;e.resolved=l;let a=e.ctx;s!==void 0&&(a=a.slice(),a[s]=l);const u=o&&(e.current=o)(a);let c=!1;e.block&&(e.blocks?e.blocks.forEach((p,d)=>{d!==r&&p&&(ke(),S(p,1,1,()=>{e.blocks[d]===p&&(e.blocks[d]=null)}),ye())}):e.block.d(1),u.c(),b(u,1),u.m(e.mount(),e.anchor),c=!0),e.block=u,e.blocks&&(e.blocks[r]=u),c&&Ur()}if(Zc(t)){const o=mi();if(t.then(r=>{xt(o),i(e.then,1,e.value,r),xt(null)},r=>{if(xt(o),i(e.catch,2,e.error,r),xt(null),!e.hasCatch)throw r}),e.current!==e.pending)return i(e.pending,0),!0}else{if(e.current!==e.then)return i(e.then,1,e.value,t),!0;e.resolved=t}}function bu(t,e,n){const i=e.slice(),{resolved:o}=t;t.current===t.then&&(i[t.value]=o),t.current===t.catch&&(i[t.error]=o),t.block.p(i,n)}function xe(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function me(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function G(t){t&&t.c()}function q(t,e,n){const{fragment:i,after_update:o}=t.$$;i&&i.m(e,n),at(()=>{const r=t.$$.on_mount.map(uu).filter(Un);t.$$.on_destroy?t.$$.on_destroy.push(...r):ht(r),t.$$.on_mount=[]}),o.forEach(at)}function W(t,e){const n=t.$$;n.fragment!==null&&(hf(n.after_update),ht(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function gf(t,e){t.$$.dirty[0]===-1&&(ei.push(t),gu(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Qe(t,e,n,i,o,r,s=null,l=[-1]){const a=Bi;xt(t);const u=t.$$={fragment:null,ctx:[],props:r,update:Oe,not_equal:o,bound:bs(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:bs(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};s&&s(u.root);let c=!1;if(u.ctx=n?n(t,e.props||{},(p,d,...h)=>{const m=h.length?h[0]:d;return u.ctx&&o(u.ctx[p],u.ctx[p]=m)&&(!u.skip_bound&&u.bound[p]&&u.bound[p](m),c&&gf(t,p)),d}):[],u.update(),c=!0,ht(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const p=rf(e.target);u.fragment&&u.fragment.l(p),p.forEach(v)}else u.fragment&&u.fragment.c();e.intro&&b(t.$$.fragment),q(t,e.target,e.anchor),Ur()}xt(a)}class Xe{constructor(){pn(this,"$$");pn(this,"$$set")}$destroy(){W(this,1),this.$destroy=Oe}$on(e,n){if(!Un(n))return Oe;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(e){this.$$set&&!Jc(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const bf="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(bf);function vf(t){let e,n,i,o;return{c(){e=_("i"),k(e,"class",n=t[4](t[3],t[2],t[0])),k(e,"style",i=ks(t[3],t[1])),e.hidden=o=!t[3]},m(r,s){w(r,e,s)},p(r,[s]){s&13&&n!==(n=r[4](r[3],r[2],r[0]))&&k(e,"class",n),s&10&&i!==(i=ks(r[3],r[1]))&&k(e,"style",i),s&8&&o!==(o=!r[3])&&(e.hidden=o)},i:Oe,o:Oe,d(r){r&&v(e)}}}const $f={brand:"fab",regular:"far",solid:"fas"},_r={batman:"https://www.gravatar.com/avatar/ab1839667863f31e359d98364cfdef61",marcusr:"https://www.gravatar.com/avatar/6c056546d802b1a9ac186ab63f9fb632"},ws=["fas fa-anchor","fas fa-atom","fas fa-award","fas fa-balance-scale","fas fa-baseball-ball","fas fa-basketball-ball","fas fa-bicycle","fas fa-bolt","fas fa-book-reader","fas fa-candy-cane","fas fa-carrot","fas fa-cat","fas fa-chess-knight","fas fa-child","fas fa-coffee","fas fa-cookie-bite","fas fa-crow","fas fa-dice","fas fa-dog","fas fa-dove","fas fa-feather","fas fa-fish","fas fa-gem","fas fa-ghost","fas fa-hard-hat","fas fa-hat-cowboy","fas fa-hat-wizard","fas fa-hiking","fas fa-horse-head","fas fa-horse","fas fa-id-badge","fas fa-igloo","fas fa-mask","fas fa-meteor","fas fa-paint-brush","fas fa-paw","fas fa-pepper-hot","fas fa-pizza-slice","fas fa-portrait","fas fa-puzzle-piece","fas fa-rainbow","fas fa-robot","fas fa-rocket","fas fa-running","fas fa-seedling","fas fa-skating","fas fa-skiing","fas fa-smile","fas fa-snowboarding","fas fa-snowflake","fas fa-snowman","fas fa-swimmer","fas fa-umbrella","fas fa-user-astronaut","fas fa-user-graduate","fas fa-user-ninja","fas fa-user-secret","fas fa-walking","fas fa-yin-yang"];function ks(t,e){const n=[];let i="color:";const o=t.match(/^pick:(.+)$/);return o&&_r[o[1]]&&(i="background-color:",n.push('background-image:url("'+_r[o[1]]+'")')),e&&n.push(i+e),n.join(";")}function wf(t){let e=0;for(let n=0;n<t.length;n++)e=t.charCodeAt(n)+((e<<5)-e),e=e&e;return e=Math.abs(e),ws[e%ws.length]}function kf(t,e,n){let{class:i=""}=e,{animation:o=""}=e,{color:r=""}=e,{family:s=""}=e,{name:l}=e;function a(u,c,p){const d=[],h=u.match(/^pick:(.+)$/);if(h){if(h[1]==="Convos")return"fas fa-info-circle";if(_r[h[1]])return"fas fa-contributor for-"+h[1].toLowerCase();d.push(wf(h[1]))}else d.push($f[c]||"fas"),d.push("fa-"+u);return p&&d.push(p.split(" ").map(m=>"fa-"+m)),i&&d.push(i.split(" ")),d.join(" ")}return t.$$set=u=>{"class"in u&&n(5,i=u.class),"animation"in u&&n(0,o=u.animation),"color"in u&&n(1,r=u.color),"family"in u&&n(2,s=u.family),"name"in u&&n(3,l=u.name)},[o,r,s,l,a,i]}class de extends Xe{constructor(e){super(),Qe(this,e,kf,vf,Ze,{class:5,animation:0,color:1,family:2,name:3})}}const Vn=[];function yf(t,e){return{subscribe:vu(t,e).subscribe}}function vu(t,e=Oe){let n;const i=new Set;function o(l){if(Ze(t,l)&&(t=l,n)){const a=!Vn.length;for(const u of i)u[1](),Vn.push(u,t);if(a){for(let u=0;u<Vn.length;u+=2)Vn[u][0](Vn[u+1]);Vn.length=0}}}function r(l){o(l(t))}function s(l,a=Oe){const u=[l,a];return i.add(u),i.size===1&&(n=e(o,r)||Oe),l(t),()=>{i.delete(u),i.size===0&&n&&(n(),n=null)}}return{set:o,update:r,subscribe:s}}function $u(t,e,n){const i=!Array.isArray(t),o=i?[t]:t;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=e.length<2;return yf(n,(s,l)=>{let a=!1;const u=[];let c=0,p=Oe;const d=()=>{if(c)return;p();const m=e(i?u[0]:u,s,l);r?s(m):p=Un(m)?m:Oe},h=o.map((m,g)=>_t(m,y=>{u[g]=y,c&=~(1<<g),a&&d()},()=>{c|=1<<g}));return a=!0,d(),function(){ht(h),p(),a=!1}})}function No(t,e){const n=vu(t);n.get=()=>Qc(n);for(let i in e)Object.hasOwn(e,i)&&(n[i]=e[i].bind(n));return n}const Nt=No("",{toggle(t){t.preventDefault();const e=t.target.closest("a"),n=e&&e.href.replace(/.*#/,"");this.set(this.get()===n?"":n)}}),bn=No({hasLeftColumn:!1,hasRightColumn:!1,isSingleColumn:!0,sidebarTransition:{},width:0},{setWidth(t){const e=t>=800,n=t>=1200,i=!(e||n),o={duration:250,x:i?t:0};this.set({hasLeftColumn:e,hasRightColumn:n,isSingleColumn:i,sidebarTransition:o,width:t})}});function ys(t){let e,n,i,o,r,s=t[2].notifications+"",l,a,u,c,p;return n=new de({props:{name:"bars"}}),i=new de({props:{name:"times"}}),{c(){e=_("a"),G(n.$$.fragment),G(i.$$.fragment),o=C(),r=_("small"),l=O(s),k(r,"class","badge is-important"),r.hidden=a=!t[2].notifications,k(e,"href","#nav"),k(e,"class","btn-hallow can-toggle"),He(e,"is-active",t[1]==="nav")},m(d,h){w(d,e,h),q(n,e,null),q(i,e,null),f(e,o),f(e,r),f(r,l),u=!0,c||(p=Ce(e,"click",Nt.toggle),c=!0)},p(d,h){(!u||h&4)&&s!==(s=d[2].notifications+"")&&M(l,s),(!u||h&4&&a!==(a=!d[2].notifications))&&(r.hidden=a),(!u||h&2)&&He(e,"is-active",d[1]==="nav")},i(d){u||(b(n.$$.fragment,d),b(i.$$.fragment,d),u=!0)},o(d){S(n.$$.fragment,d),S(i.$$.fragment,d),u=!1},d(d){d&&v(e),W(n),W(i),c=!1,p()}}}function Sf(t){let e,n,i;const o=t[5].default,r=Gt(o,t,t[4],null);let s=!t[0].hasLeftColumn&&ys(t);return{c(){e=_("header"),r&&r.c(),n=C(),s&&s.c(),k(e,"class","chat-header")},m(l,a){w(l,e,a),r&&r.m(e,null),f(e,n),s&&s.m(e,null),i=!0},p(l,[a]){r&&r.p&&(!i||a&16)&&Yt(r,o,l,l[4],i?Kt(o,l[4],a,null):Vt(l[4]),null),l[0].hasLeftColumn?s&&(ke(),S(s,1,1,()=>{s=null}),ye()):s?(s.p(l,a),a&1&&b(s,1)):(s=ys(l),s.c(),b(s,1),s.m(e,null))},i(l){i||(b(r,l),b(s),i=!0)},o(l){S(r,l),S(s),i=!1},d(l){l&&v(e),r&&r.d(l),s&&s.d()}}}function Ef(t,e,n){let i,o,r;ve(t,bn,u=>n(0,i=u)),ve(t,Nt,u=>n(1,o=u));let{$$slots:s={},$$scope:l}=e;const a=gt("user").notifications;return ve(t,a,u=>n(2,r=u)),t.$$set=u=>{"$$scope"in u&&n(4,l=u.$$scope)},[i,o,r,a,l,s]}class Ft extends Xe{constructor(e){super(),Qe(this,e,Ef,Sf,Ze,{})}}/*! js-cookie v3.0.5 | MIT */function ro(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}var Cf={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function gr(t,e){function n(o,r,s){if(!(typeof document>"u")){s=ro({},e,s),typeof s.expires=="number"&&(s.expires=new Date(Date.now()+s.expires*864e5)),s.expires&&(s.expires=s.expires.toUTCString()),o=encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var a in s)s[a]&&(l+="; "+a,s[a]!==!0&&(l+="="+s[a].split(";")[0]));return document.cookie=o+"="+t.write(r,o)+l}}function i(o){if(!(typeof document>"u"||arguments.length&&!o)){for(var r=document.cookie?document.cookie.split("; "):[],s={},l=0;l<r.length;l++){var a=r[l].split("="),u=a.slice(1).join("=");try{var c=decodeURIComponent(a[0]);if(s[c]=t.read(u,c),o===c)break}catch{}}return o?s[o]:s}}return Object.create({set:n,get:i,remove:function(o,r){n(o,"",ro({},r,{expires:-1}))},withAttributes:function(o){return gr(this.converter,ro({},this.attributes,o))},withConverter:function(o){return gr(ro({},this.converter,o),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var Ss=gr(Cf,{path:"/"}),Es={};const Af=typeof process>"u"||typeof Es!="object"?"info":Es.LOG_LEVEL||"quiet",Xo=["trace","debug","info","warn","error","quiet"],br={},Zn={},Cs=()=>{};br.root=new wu({name:"root"});function Of(t){return Zn.root===void 0&&(Object.entries(JSON.parse(localStorage.getItem("logger:nameToLevel")||"{}")).forEach(([e,n])=>{Zn[e]=n||"debug"}),((location.href.match(/_debug=([a-z,:]+)/)||[]).pop()||"").split(",").forEach(e=>{const[n,i]=e.split(":");Zn[n]=i||"debug"}),localStorage.setItem("logger:nameToLevel",JSON.stringify(Zn))),Zn[t]||Zn.root||Af}function wu({name:t}){this.name=t,this.isLevel=e=>{const n=Xo.indexOf(e)||e||e.length;return this.numLevel>=n},this.setLevel=e=>{let n=Xo.indexOf(e);return n===-1&&(n=2),this.numLevel=n,Xo.forEach((i,o)=>{const r=i==="trace"||i==="debug"?"log":i,s=!console||o<n?Cs:console[r]||console.log||Cs;this[i]=s.bind(this,"["+this.name+"]")}),this},this.setLevel(Of(t))}function gi(t="root"){return br[t]||(br[t]=new wu({name:t}))}const Nf=gi("util"),Tf=.618033988749,vr=1e3,$r=vr*1e3,As=$r*1e3;function wr(t,e){if(e&&!e.match(/^[+-]\w/)&&(e="+"+e),!e)return{};const n={};let i=!0;for(const o of e)o==="+"?i=!0:o==="-"?i=!1:n[t[o]||o]=i;return n}function kr(t,e){for(;t;){if(e.tagName?t===e:t.matches&&t.matches(e))return t;t=t.parentNode}return null}function ku(t){const n=yu("textarea",{style:{opacity:0,position:"absolute"},value:t.textContent||t.value});document.body.appendChild(n);try{n.focus(),n.select(),document.execCommand("copy")}catch(i){n.value="",Nf.error("copyToClipboard() failed:",i)}return document.body.removeChild(n),n.value}function yu(t,e){const n=document.createElement(t);for(let i in e)Object.hasOwn(e,i)&&(n[i]=e[i]);return n}function Rf(t,e,n){let i=t&&t.querySelector("."+e.split(" ").join("."));return i||(i=document.createElement("div"),i.className=e,t&&t.appendChild(i),n&&n(i),i)}function Br(t,e="message"){const n=t.errors||t;return n&&n[0]?n[0][e]||"Unknown error.":""}function Mf(t,e=document){const n=[...t.childNodes],i=[];let o=0;for(;o<n.length;)n[o].nodeType===Node.ELEMENT_NODE?(i.push([o,n[o]]),o++):n.splice(o,1);if(!n.length)return[];const r=e.scrollTop;for(;i.length>1;){const u=Math.floor(i.length/2);i[u][1].offsetTop<=r?i.splice(0,u):i.splice(u)}i.length||i.push([0,n[0]]);const s=e.offsetHeight,l=i[0][0];let a=l;for(;a<n.length&&!(n[a].offsetTop>r+s);)a++;return n.slice(l,a).filter(u=>!u.getAttribute("aria-hidden"))}function If(t=0,e=.5,n=.95){var i=Math.floor(t*6),o=t*6-i,r=n*(1-e),s=n*(1-o*e),l=n*(1-(1-o)*e),a=255,u=255,c=255;switch(i){case 0:a=n,u=l,c=r;break;case 1:a=s,u=n,c=r;break;case 2:a=r,u=n,c=l;break;case 3:a=r,u=s,c=n;break;case 4:a=l,u=r,c=n;break;case 5:a=n,u=r,c=s;break}return[Math.floor(a*255),Math.floor(u*255),Math.floor(c*255)]}function ii(t,e){const n=t<vr?[t,""]:t<$r?[t/vr,"k"]:t<As?[t/$r,"M"]:[t/As,"G"],i=String(Math.round(n[0]*10)/10);return(i.match(/\./)?i:i+".0")+n[1]+(e||"")}const Pe={array:t=>Array.isArray(t),defined:t=>!Pe.undefined(t),false:t=>!Pe.true(t),function:t=>typeof t=="function",number:t=>typeof t=="number",object:t=>typeof t=="object"&&t!==null,string:t=>typeof t=="string",stringable:t=>typeof t=="number"||typeof t=="string",true:t=>Pe.string(t)?!!t.length&&t!=="0":!!t,undefined:t=>t===null||typeof t>"u"};function Lf(t){const e=document,n=t.replace(/\W/g,"_");if(e.getElementById(n))return;const i=e.createElement("script");return[i.id,i.src]=[n,t],e.getElementsByTagName("head")[0].appendChild(i),new Promise((o,r)=>{i.addEventListener("error",r),i.addEventListener("load",o)})}function Tt(t,e=" "){return t.replace(/\s/g,e)}function wt(t,e,n){const i=e===":children"?t.children:t.querySelectorAll(e);if(!n)return[].slice.call(i,0);if(Array.isArray(n))return[].forEach.call(i,r=>r.addEventListener(n[0],n[1]));const o=[];for(let r=0;r<i.length;r++)o.push(n(i[r],r));return o}function Pf(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Ve(t,e){const n=i=>document.querySelector('meta[name="convos:'+i+'"]')||document.querySelector('meta[name="'+i+'"]');if(arguments.length===1){t==="organization_name"&&(t="contactorganization"),t==="organization_url"&&(t="contactnetworkaddress");const i=n(t);if(!i)throw'Cannot get settings for "'+t+'".';const o={no:!1,yes:!0};return t==="contact"?atob(i.content||""):Object.hasOwn(o,i.content)?o[i.content]:i.content}t==="organization_name"&&(t="contactorganization"),t==="organization_url"&&(t="contactnetworkaddress"),t==="contact"&&(e=btoa(e)),typeof e=="boolean"&&(e=e?"yes":"no"),n(t).content=e}function Df(t,e){t&&t.preventDefault&&t.preventDefault();const n=Rf(document.body,"fullscreen",i=>{i.addEventListener("click",o=>o.target===i&&i.hide()),i.hide=()=>n.classList.add("hidden")});return Pf(n),e?(n.classList.remove("hidden"),n.appendChild(e.cloneNode(!0)),n):n.hide()}function Fr(t){return(Pe.string(t)?t:"").split(/[.,\s]+/).map(e=>e.trim()).filter(e=>e.length)}function $o(t,e=100){if(t.length===0)return"#000";let n=0;for(let i=0;i<t.length;i++)n=t.charCodeAt(i)+((n<<5)-n),n=n&n;return n=Math.abs(n%e/e),"#"+If((n+Tf)%1,.4,.7).map(i=>i.toString(16)).join("")}function jr(t,e){return Pe.array(e)?e.find(n=>jr(t,n))||!1:t&&t.tagName&&t.tagName.toLowerCase()===e||!1}function Uf(t,e=!0){return new Promise((n,i)=>{setTimeout(()=>{typeof e=="function"?n(e()):typeof e=="string"?i(e):n(e)},t)})}function To(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){let e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}const xo=gi("reactive");class Lt{constructor(){this.cookieName="convos_js",this._on={},this._props={}}emit(e,...n){const i=this._on[e];for(let o=0;o<(i||[]).length;o++)i[o][0](...n);return this}on(e,n){const i=n?null:new Promise(l=>{n=l}),o=this._on[e]||(this._on[e]=[]),r=[n];o.push(r);const s=()=>{const l=o.indexOf(r);l!==-1&&o.splice(l,1)};return i?i.finally(s):s}prop(e,n,i,o={}){const r={...o,defaultValue:i,name:n,type:e,value:i};switch(this._props[n]=r,r.updateable=["cookie","persist","rw"].indexOf(e)!==-1,e){case"cookie":return this._cookieProp(r);case"persist":return this._localStorageProp(r);case"ro":return this._readOnlyProp(r);case"rw":return this._updateableProp(r)}throw"["+this.constructor.name+'] Unknown prop type "'+e+'" for prop "'+n+'".'}subscribe(e){return e(this),this.on("update",e)}update(e){return Object.keys(e).forEach(n=>{const i=this._props[n];if(!i)return xo.trace("["+this.constructor.name+'] Unknown prop "'+n+'".');Object.hasOwn(i,"prev")||(i.prev=i.type==="ro"?void 0:i.value),i.updateable&&(i.value=e[n])}),this._updatedTid||(this._updatedTid=setTimeout(this._delayedUpdate.bind(this),1)),this}_cookie(e,n){const i=e.key||e.name,o=document.decodedB64JSONCookies||(document.decodedB64JSONCookies={});if(!o[this.cookieName])try{const l=Ss.get(this.cookieName);o[this.cookieName]=JSON.parse(l?atob(l):"{}")}catch(l){xo.error({[i]:l})}const r=o[this.cookieName]||{};if(arguments.length===1)return r[i];n===e.defaultValue?delete r[i]:r[i]=n;const s=location.href.indexOf("https:")===0;Ss.set(this.cookieName,btoa(JSON.stringify(r)),{expires:365,SameSite:"Lax",secure:s})}_cookieProp(e){const n=this._cookie(e);Pe.defined(n)&&(e.value=n),Pe.undefined(n)&&this._cookie(e,e.value),this._updateableProp(e)}_delayedUpdate(){const e={};return Object.keys(this._props).forEach(n=>{const i=this._props[n];if(!Object.hasOwn(i,"prev"))return;const o=i.prev;delete i.prev,i.value!==o&&(i.type==="cookie"&&this._cookie(i,i.value),i.type==="persist"&&this._localStorage(i,i.value),e[n]=i.type!=="ro")}),delete this._updatedTid,Object.keys(e).length&&this.emit("update",this,e),e}_localStorage(e,n){const i="convos:"+(e.key||e.name);if(arguments.length===2)return n===e.defaultValue?localStorage.removeItem(i):localStorage.setItem(i,JSON.stringify(n));try{return Object.hasOwn(localStorage,i)?JSON.parse(localStorage.getItem(i)):void 0}catch(o){xo.error({[i]:localStorage.getItem(i)},o);return}}_localStorageProp(e){const n=this._localStorage(e);Pe.defined(n)&&(e.value=n),Pe.undefined(n)&&this._localStorage(e,e.value),this._updateableProp(e)}_readOnlyProp(e){if(e.value===void 0)throw"["+this.constructor.name+'] Read-only attribute "'+e.name+'" cannot be undefined';const n=Pe.function(e.value)?e.value:()=>e.value;Object.defineProperty(this,e.name,{get:n})}_updateableProp(e){const n=e.name;Object.defineProperty(this,n,{get(){return e.value},set(i){e.value===i||this.update({[n]:i})}})}}class Bf extends Lt{constructor(){super(),this.prop("persist","history",[],{key:"command_history"}),this.prop("rw","conversation",null),this.prop("rw","index",-1)}add(e){if(!e.length)return this;const n=this.history.slice(0,19);return n.unshift(e),this.update({history:n,index:-1})}attach(e){this.inputEl=e}render(e,n){n=this.index+n,n<-1&&(n=-1),n>=this.history.length&&(n=this.history.length-1);const i=this.inputEl.value;return this.inputEl.selectionStart!==i.length||i.length&&i!==this.history[this.index]?!1:(e.preventDefault(),this.update({index:n}),this.inputEl.value=n===-1?"":this.history[n],!0)}update(e){return e.conversation&&e.conversation!==this.conversation&&this.update({index:-1}),super.update(e)}}var Li=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ff(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var o=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:function(){return t[i]}})}),n}var jf=typeof Li=="object"&&Li&&Li.Object===Object&&Li,zf=jf,Hf=zf,qf=typeof self=="object"&&self&&self.Object===Object&&self,Wf=Hf||qf||Function("return this")(),Su=Wf,Gf=Su,Kf=function(){return Gf.Date.now()},Eu=Kf;const fo=bi(Eu);var Yf=Su,Vf=Yf.Symbol,zr=Vf;function Zf(t,e){for(var n=-1,i=t==null?0:t.length,o=Array(i);++n<i;)o[n]=e(t[n],n,t);return o}var Jf=Zf,Qf=Array.isArray,Xf=Qf,Os=zr,Cu=Object.prototype,xf=Cu.hasOwnProperty,ep=Cu.toString,Ri=Os?Os.toStringTag:void 0;function tp(t){var e=xf.call(t,Ri),n=t[Ri];try{t[Ri]=void 0;var i=!0}catch{}var o=ep.call(t);return i&&(e?t[Ri]=n:delete t[Ri]),o}var np=tp,ip=Object.prototype,op=ip.toString;function rp(t){return op.call(t)}var sp=rp,Ns=zr,lp=np,ap=sp,up="[object Null]",cp="[object Undefined]",Ts=Ns?Ns.toStringTag:void 0;function fp(t){return t==null?t===void 0?cp:up:Ts&&Ts in Object(t)?lp(t):ap(t)}var pp=fp;function dp(t){return t!=null&&typeof t=="object"}var hp=dp,mp=pp,_p=hp,gp="[object Symbol]";function bp(t){return typeof t=="symbol"||_p(t)&&mp(t)==gp}var Au=bp,Rs=zr,vp=Jf,$p=Xf,wp=Au,kp=1/0,Ms=Rs?Rs.prototype:void 0,Is=Ms?Ms.toString:void 0;function Ou(t){if(typeof t=="string")return t;if($p(t))return vp(t,Ou)+"";if(wp(t))return Is?Is.call(t):"";var e=t+"";return e=="0"&&1/t==-kp?"-0":e}var yp=Ou,Sp=yp;function Ep(t){return t==null?"":Sp(t)}var Hi=Ep,Cp=Hi,Nu=/[\\^$.*+?()[\]{}|]/g,Ap=RegExp(Nu.source);function Op(t){return t=Cp(t),t&&Ap.test(t)?t.replace(Nu,"\\$&"):t}var Np=Op;const vi=bi(Np),Tp=gi("api");class Ro extends Lt{constructor(e){super(),this.prop("ro","api",e.api),this.prop("ro","defaultParams",e.defaultParams||{}),this.prop("ro","id",e.id),this.prop("rw","err",null),this.prop("rw","req",{body:null,headers:{}}),this.prop("rw","res",{body:{},headers:[]}),this.prop("rw","status","pending")}error(e){if(e)return this.update({err:Array.isArray(e)?e:[{message:e}],status:"error"});if(!this.err||!this.err.length)return"";const n=this.err[0],i=n.path&&n.path.match(/\w$/)&&n.path.split("/").pop();return i?i+": "+n.message:n.message}perform(e){let n;return this._promise||(this._promise=this.api.spec(this.id).then(i=>{if(!i)throw'Unknown operationId "'+this.id+'".';const o=this._paramsToRequest(i,e||this.defaultParams);return n=new XMLHttpRequest,this.update({req:o,status:"loading"}),this._send(n,o)}).then(()=>{const i={};i.body=n.response?JSON.parse(n.response):{},i.headers=(n.getAllResponseHeaders()||"").trim().split(/[\r\n]+/).filter(r=>r.length).map(r=>r.split(/:\s*/,2)),i.status=String(n.status||"201");let o=null;return String(i.status).match(/^[23]/)||(o=i.body&&i.body.errors?i.body.errors:[{message:n.statusText||"Unknown error."}]),this.update({err:o,res:i,status:o?"error":"success"})}).catch(i=>(i.type&&(i=i.type),Tp.error(this.req.url+" FAILED "+i),this.update({res:{body:{errors:[{message:String(i)}]},headers:[],status:"599"},status:"error"}),this.error(Array.isArray(i)?i:'Failed fetching operationId "'+this.id+'": '+i))).finally(()=>{delete this._promise}))}is(e){return this.status===e}reset(){return this.res.body={},this.res.headers={},this.res.status=0,this.update({err:null,status:"pending"})}_extractValue(e,n){return n.schema?Object.keys(n.schema.properties).reduce((i,o)=>(i[o]=e[o],i),{}):e[n.name]}_hasProperty(e,n){return n.in==="body"?!0:n.in==="formData"?e.formData.has(n.name):Object.hasOwn(e,n.name)}_paramsToRequest(e,n){const i=new URL(e.url),o={headers:this.req.headers,method:e.method.toLowerCase(),url:i},r=[];if((e.parameters||[]).forEach(s=>{if(!this._hasProperty(n,s)&&s.required)r.push({message:"Missing property.",path:"/"+s.name});else{if(!this._hasProperty(n,s)&&!s.required)return;if(s.in==="path"){const l=new RegExp("(%7B|\\{)"+vi(s.name)+"(%7D|\\})","i");i.pathname=i.pathname.replace(l,encodeURIComponent(this._extractValue(n,s)))}else if(s.in==="query")i.searchParams.set(s.name,this._extractValue(n,s));else if(s.in==="formData")delete o.headers["Content-Type"],o.body=n.formData;else if(s.in==="body")o.body=this._extractValue(n,s);else if(s.in==="header")o.header[s.name]=this._extractValue(n,s.name);else throw"[Api] Parameter in:"+s.in+" is not supported."}}),r.length)throw r;return o}_send(e,n){return e.timeout=15e3,e.open(n.method.toUpperCase(),n.url),Object.keys(n.headers).forEach(i=>e.setRequestHeader(i,n.headers[i])),n.method==="post"?(e.upload.addEventListener("progress",i=>this.emit("progress",i)),e.send(Pe.object(n.body)&&!Pe.function(n.body.has)?JSON.stringify(n.body):n.body)):e.send(),new Promise(i=>{e.addEventListener("abort",i),e.addEventListener("error",i),e.addEventListener("load",i)})}}class Rp{constructor(){this.protocol=location.protocol||"http",this._url="/api"}op(e,n){const i=new Ro({api:this,id:e,defaultParams:n});return i.req.headers={"Content-Type":"application/json"},i}async spec(e){if(this._ops&&e)return this._ops[e];if(this._spec)return this._spec;const i=await(await fetch(this._url)).json();if(this._ops={},this._spec=i,Object.keys(i.paths).forEach(o=>{Object.keys(i.paths[o]).forEach(r=>{const s=i.paths[o][r],l=s.operationId;l&&(s.method=r.toUpperCase(),s.url=this.protocol+"//"+i.host+i.basePath+o+".json",s.parameters=(s.parameters||[]).map(a=>this._resolveRef(a)),this._ops[l]=s)})}),this._ops&&e)return this._ops[e];if(this._spec)return this._spec}url(e){return this._url=e,this}_resolveRef(e){let n=e;if(e.$ref){const i=e.$ref.replace(/^#\//,"").split("/");for(n=this._spec;i.length;)n=n[i.shift()]}return Pe.object(n)&&Object.keys(n).forEach(i=>{n[i]=this._resolveRef(n[i])}),n}}const nt=new Rp;var Mp=Error,Ip=EvalError,Lp=RangeError,Pp=ReferenceError,Tu=SyntaxError,qi=TypeError,Dp=URIError,Up=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),i=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var o=42;e[n]=o;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var r=Object.getOwnPropertySymbols(e);if(r.length!==1||r[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(e,n);if(s.value!==o||s.enumerable!==!0)return!1}return!0},Ls=typeof Symbol<"u"&&Symbol,Bp=Up,Fp=function(){return typeof Ls!="function"||typeof Symbol!="function"||typeof Ls("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Bp()},er={__proto__:null,foo:{}},jp=Object,zp=function(){return{__proto__:er}.foo===er.foo&&!(er instanceof jp)},Hp="Function.prototype.bind called on incompatible ",qp=Object.prototype.toString,Wp=Math.max,Gp="[object Function]",Ps=function(e,n){for(var i=[],o=0;o<e.length;o+=1)i[o]=e[o];for(var r=0;r<n.length;r+=1)i[r+e.length]=n[r];return i},Kp=function(e,n){for(var i=[],o=n||0,r=0;o<e.length;o+=1,r+=1)i[r]=e[o];return i},Yp=function(t,e){for(var n="",i=0;i<t.length;i+=1)n+=t[i],i+1<t.length&&(n+=e);return n},Vp=function(e){var n=this;if(typeof n!="function"||qp.apply(n)!==Gp)throw new TypeError(Hp+n);for(var i=Kp(arguments,1),o,r=function(){if(this instanceof o){var c=n.apply(this,Ps(i,arguments));return Object(c)===c?c:this}return n.apply(e,Ps(i,arguments))},s=Wp(0,n.length-i.length),l=[],a=0;a<s;a++)l[a]="$"+a;if(o=Function("binder","return function ("+Yp(l,",")+"){ return binder.apply(this,arguments); }")(r),n.prototype){var u=function(){};u.prototype=n.prototype,o.prototype=new u,u.prototype=null}return o},Zp=Vp,Hr=Function.prototype.bind||Zp,Jp=Function.prototype.call,Qp=Object.prototype.hasOwnProperty,Xp=Hr,xp=Xp.call(Jp,Qp),Ye,ed=Mp,td=Ip,nd=Lp,id=Pp,ci=Tu,ui=qi,od=Dp,Ru=Function,tr=function(t){try{return Ru('"use strict"; return ('+t+").constructor;")()}catch{}},In=Object.getOwnPropertyDescriptor;if(In)try{In({},"")}catch{In=null}var nr=function(){throw new ui},rd=In?function(){try{return arguments.callee,nr}catch{try{return In(arguments,"callee").get}catch{return nr}}}():nr,Jn=Fp(),sd=zp(),mt=Object.getPrototypeOf||(sd?function(t){return t.__proto__}:null),ti={},ld=typeof Uint8Array>"u"||!mt?Ye:mt(Uint8Array),Ln={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Ye:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ye:ArrayBuffer,"%ArrayIteratorPrototype%":Jn&&mt?mt([][Symbol.iterator]()):Ye,"%AsyncFromSyncIteratorPrototype%":Ye,"%AsyncFunction%":ti,"%AsyncGenerator%":ti,"%AsyncGeneratorFunction%":ti,"%AsyncIteratorPrototype%":ti,"%Atomics%":typeof Atomics>"u"?Ye:Atomics,"%BigInt%":typeof BigInt>"u"?Ye:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ye:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ye:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ye:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":ed,"%eval%":eval,"%EvalError%":td,"%Float32Array%":typeof Float32Array>"u"?Ye:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ye:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ye:FinalizationRegistry,"%Function%":Ru,"%GeneratorFunction%":ti,"%Int8Array%":typeof Int8Array>"u"?Ye:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ye:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ye:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Jn&&mt?mt(mt([][Symbol.iterator]())):Ye,"%JSON%":typeof JSON=="object"?JSON:Ye,"%Map%":typeof Map>"u"?Ye:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Jn||!mt?Ye:mt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ye:Promise,"%Proxy%":typeof Proxy>"u"?Ye:Proxy,"%RangeError%":nd,"%ReferenceError%":id,"%Reflect%":typeof Reflect>"u"?Ye:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ye:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Jn||!mt?Ye:mt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ye:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Jn&&mt?mt(""[Symbol.iterator]()):Ye,"%Symbol%":Jn?Symbol:Ye,"%SyntaxError%":ci,"%ThrowTypeError%":rd,"%TypedArray%":ld,"%TypeError%":ui,"%Uint8Array%":typeof Uint8Array>"u"?Ye:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ye:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ye:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ye:Uint32Array,"%URIError%":od,"%WeakMap%":typeof WeakMap>"u"?Ye:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ye:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ye:WeakSet};if(mt)try{null.error}catch(t){var ad=mt(mt(t));Ln["%Error.prototype%"]=ad}var ud=function t(e){var n;if(e==="%AsyncFunction%")n=tr("async function () {}");else if(e==="%GeneratorFunction%")n=tr("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=tr("async function* () {}");else if(e==="%AsyncGenerator%"){var i=t("%AsyncGeneratorFunction%");i&&(n=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&mt&&(n=mt(o.prototype))}return Ln[e]=n,n},Ds={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Wi=Hr,wo=xp,cd=Wi.call(Function.call,Array.prototype.concat),fd=Wi.call(Function.apply,Array.prototype.splice),Us=Wi.call(Function.call,String.prototype.replace),ko=Wi.call(Function.call,String.prototype.slice),pd=Wi.call(Function.call,RegExp.prototype.exec),dd=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,hd=/\\(\\)?/g,md=function(e){var n=ko(e,0,1),i=ko(e,-1);if(n==="%"&&i!=="%")throw new ci("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&n!=="%")throw new ci("invalid intrinsic syntax, expected opening `%`");var o=[];return Us(e,dd,function(r,s,l,a){o[o.length]=l?Us(a,hd,"$1"):s||r}),o},_d=function(e,n){var i=e,o;if(wo(Ds,i)&&(o=Ds[i],i="%"+o[0]+"%"),wo(Ln,i)){var r=Ln[i];if(r===ti&&(r=ud(i)),typeof r>"u"&&!n)throw new ui("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:i,value:r}}throw new ci("intrinsic "+e+" does not exist!")},$i=function(e,n){if(typeof e!="string"||e.length===0)throw new ui("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new ui('"allowMissing" argument must be a boolean');if(pd(/^%?[^%]*%?$/,e)===null)throw new ci("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=md(e),o=i.length>0?i[0]:"",r=_d("%"+o+"%",n),s=r.name,l=r.value,a=!1,u=r.alias;u&&(o=u[0],fd(i,cd([0,1],u)));for(var c=1,p=!0;c<i.length;c+=1){var d=i[c],h=ko(d,0,1),m=ko(d,-1);if((h==='"'||h==="'"||h==="`"||m==='"'||m==="'"||m==="`")&&h!==m)throw new ci("property names with quotes must have matching quotes");if((d==="constructor"||!p)&&(a=!0),o+="."+d,s="%"+o+"%",wo(Ln,s))l=Ln[s];else if(l!=null){if(!(d in l)){if(!n)throw new ui("base intrinsic for "+e+" exists, but the property is not available.");return}if(In&&c+1>=i.length){var g=In(l,d);p=!!g,p&&"get"in g&&!("originalValue"in g.get)?l=g.get:l=l[d]}else p=wo(l,d),l=l[d];p&&!a&&(Ln[s]=l)}}return l},Mu={exports:{}},ir,Bs;function qr(){if(Bs)return ir;Bs=1;var t=$i,e=t("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return ir=e,ir}var gd=$i,po=gd("%Object.getOwnPropertyDescriptor%",!0);if(po)try{po([],"length")}catch{po=null}var Iu=po,Fs=qr(),bd=Tu,Qn=qi,js=Iu,vd=function(e,n,i){if(!e||typeof e!="object"&&typeof e!="function")throw new Qn("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new Qn("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Qn("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Qn("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Qn("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Qn("`loose`, if provided, must be a boolean");var o=arguments.length>3?arguments[3]:null,r=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,l=arguments.length>6?arguments[6]:!1,a=!!js&&js(e,n);if(Fs)Fs(e,n,{configurable:s===null&&a?a.configurable:!s,enumerable:o===null&&a?a.enumerable:!o,value:i,writable:r===null&&a?a.writable:!r});else if(l||!o&&!r&&!s)e[n]=i;else throw new bd("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},yr=qr(),Lu=function(){return!!yr};Lu.hasArrayLengthDefineBug=function(){if(!yr)return null;try{return yr([],"length",{value:1}).length!==1}catch{return!0}};var $d=Lu,wd=$i,zs=vd,kd=$d(),Hs=Iu,qs=qi,yd=wd("%Math.floor%"),Sd=function(e,n){if(typeof e!="function")throw new qs("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||yd(n)!==n)throw new qs("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],o=!0,r=!0;if("length"in e&&Hs){var s=Hs(e,"length");s&&!s.configurable&&(o=!1),s&&!s.writable&&(r=!1)}return(o||r||!i)&&(kd?zs(e,"length",n,!0,!0):zs(e,"length",n)),e};(function(t){var e=Hr,n=$i,i=Sd,o=qi,r=n("%Function.prototype.apply%"),s=n("%Function.prototype.call%"),l=n("%Reflect.apply%",!0)||e.call(s,r),a=qr(),u=n("%Math.max%");t.exports=function(d){if(typeof d!="function")throw new o("a function is required");var h=l(e,s,arguments);return i(h,1+u(0,d.length-(arguments.length-1)),!0)};var c=function(){return l(e,r,arguments)};a?a(t.exports,"apply",{value:c}):t.exports.apply=c})(Mu);var Ed=Mu.exports,Pu=$i,Du=Ed,Cd=Du(Pu("String.prototype.indexOf")),Ad=function(e,n){var i=Pu(e,!!n);return typeof i=="function"&&Cd(e,".prototype.")>-1?Du(i):i};const Od={},Nd=Object.freeze(Object.defineProperty({__proto__:null,default:Od},Symbol.toStringTag,{value:"Module"})),Td=Ff(Nd);var Wr=typeof Map=="function"&&Map.prototype,or=Object.getOwnPropertyDescriptor&&Wr?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,yo=Wr&&or&&typeof or.get=="function"?or.get:null,Ws=Wr&&Map.prototype.forEach,Gr=typeof Set=="function"&&Set.prototype,rr=Object.getOwnPropertyDescriptor&&Gr?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,So=Gr&&rr&&typeof rr.get=="function"?rr.get:null,Gs=Gr&&Set.prototype.forEach,Rd=typeof WeakMap=="function"&&WeakMap.prototype,Pi=Rd?WeakMap.prototype.has:null,Md=typeof WeakSet=="function"&&WeakSet.prototype,Di=Md?WeakSet.prototype.has:null,Id=typeof WeakRef=="function"&&WeakRef.prototype,Ks=Id?WeakRef.prototype.deref:null,Ld=Boolean.prototype.valueOf,Pd=Object.prototype.toString,Dd=Function.prototype.toString,Ud=String.prototype.match,Kr=String.prototype.slice,mn=String.prototype.replace,Bd=String.prototype.toUpperCase,Ys=String.prototype.toLowerCase,Uu=RegExp.prototype.test,Vs=Array.prototype.concat,Wt=Array.prototype.join,Fd=Array.prototype.slice,Zs=Math.floor,Sr=typeof BigInt=="function"?BigInt.prototype.valueOf:null,sr=Object.getOwnPropertySymbols,Er=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,fi=typeof Symbol=="function"&&typeof Symbol.iterator=="object",yt=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===fi||!0)?Symbol.toStringTag:null,Bu=Object.prototype.propertyIsEnumerable,Js=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function Qs(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||Uu.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var i=t<0?-Zs(-t):Zs(t);if(i!==t){var o=String(i),r=Kr.call(e,o.length+1);return mn.call(o,n,"$&_")+"."+mn.call(mn.call(r,/([0-9]{3})/g,"$&_"),/_$/,"")}}return mn.call(e,n,"$&_")}var Cr=Td,Xs=Cr.custom,xs=ju(Xs)?Xs:null,jd=function t(e,n,i,o){var r=n||{};if(dn(r,"quoteStyle")&&r.quoteStyle!=="single"&&r.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(dn(r,"maxStringLength")&&(typeof r.maxStringLength=="number"?r.maxStringLength<0&&r.maxStringLength!==1/0:r.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=dn(r,"customInspect")?r.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(dn(r,"indent")&&r.indent!==null&&r.indent!=="	"&&!(parseInt(r.indent,10)===r.indent&&r.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(dn(r,"numericSeparator")&&typeof r.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var l=r.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Hu(e,r);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var a=String(e);return l?Qs(e,a):a}if(typeof e=="bigint"){var u=String(e)+"n";return l?Qs(e,u):u}var c=typeof r.depth>"u"?5:r.depth;if(typeof i>"u"&&(i=0),i>=c&&c>0&&typeof e=="object")return Ar(e)?"[Array]":"[Object]";var p=oh(r,i);if(typeof o>"u")o=[];else if(zu(o,e)>=0)return"[Circular]";function d(H,J,D){if(J&&(o=Fd.call(o),o.push(J)),D){var P={depth:r.depth};return dn(r,"quoteStyle")&&(P.quoteStyle=r.quoteStyle),t(H,P,i+1,o)}return t(H,r,i+1,o)}if(typeof e=="function"&&!el(e)){var h=Zd(e),m=so(e,d);return"[Function"+(h?": "+h:" (anonymous)")+"]"+(m.length>0?" { "+Wt.call(m,", ")+" }":"")}if(ju(e)){var g=fi?mn.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Er.call(e);return typeof e=="object"&&!fi?Mi(g):g}if(th(e)){for(var y="<"+Ys.call(String(e.nodeName)),$=e.attributes||[],E=0;E<$.length;E++)y+=" "+$[E].name+"="+Fu(zd($[E].value),"double",r);return y+=">",e.childNodes&&e.childNodes.length&&(y+="..."),y+="</"+Ys.call(String(e.nodeName))+">",y}if(Ar(e)){if(e.length===0)return"[]";var T=so(e,d);return p&&!ih(T)?"["+Or(T,p)+"]":"[ "+Wt.call(T,", ")+" ]"}if(qd(e)){var K=so(e,d);return!("cause"in Error.prototype)&&"cause"in e&&!Bu.call(e,"cause")?"{ ["+String(e)+"] "+Wt.call(Vs.call("[cause]: "+d(e.cause),K),", ")+" }":K.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Wt.call(K,", ")+" }"}if(typeof e=="object"&&s){if(xs&&typeof e[xs]=="function"&&Cr)return Cr(e,{depth:c-i});if(s!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(Jd(e)){var L=[];return Ws&&Ws.call(e,function(H,J){L.push(d(J,e,!0)+" => "+d(H,e))}),tl("Map",yo.call(e),L,p)}if(xd(e)){var A=[];return Gs&&Gs.call(e,function(H){A.push(d(H,e))}),tl("Set",So.call(e),A,p)}if(Qd(e))return lr("WeakMap");if(eh(e))return lr("WeakSet");if(Xd(e))return lr("WeakRef");if(Gd(e))return Mi(d(Number(e)));if(Yd(e))return Mi(d(Sr.call(e)));if(Kd(e))return Mi(Ld.call(e));if(Wd(e))return Mi(d(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===Li)return"{ [object globalThis] }";if(!Hd(e)&&!el(e)){var I=so(e,d),z=Js?Js(e)===Object.prototype:e instanceof Object||e.constructor===Object,F=e instanceof Object?"":"null prototype",V=!z&&yt&&Object(e)===e&&yt in e?Kr.call($n(e),8,-1):F?"Object":"",j=z||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",B=j+(V||F?"["+Wt.call(Vs.call([],V||[],F||[]),": ")+"] ":"");return I.length===0?B+"{}":p?B+"{"+Or(I,p)+"}":B+"{ "+Wt.call(I,", ")+" }"}return String(e)};function Fu(t,e,n){var i=(n.quoteStyle||e)==="double"?'"':"'";return i+t+i}function zd(t){return mn.call(String(t),/"/g,"&quot;")}function Ar(t){return $n(t)==="[object Array]"&&(!yt||!(typeof t=="object"&&yt in t))}function Hd(t){return $n(t)==="[object Date]"&&(!yt||!(typeof t=="object"&&yt in t))}function el(t){return $n(t)==="[object RegExp]"&&(!yt||!(typeof t=="object"&&yt in t))}function qd(t){return $n(t)==="[object Error]"&&(!yt||!(typeof t=="object"&&yt in t))}function Wd(t){return $n(t)==="[object String]"&&(!yt||!(typeof t=="object"&&yt in t))}function Gd(t){return $n(t)==="[object Number]"&&(!yt||!(typeof t=="object"&&yt in t))}function Kd(t){return $n(t)==="[object Boolean]"&&(!yt||!(typeof t=="object"&&yt in t))}function ju(t){if(fi)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!Er)return!1;try{return Er.call(t),!0}catch{}return!1}function Yd(t){if(!t||typeof t!="object"||!Sr)return!1;try{return Sr.call(t),!0}catch{}return!1}var Vd=Object.prototype.hasOwnProperty||function(t){return t in this};function dn(t,e){return Vd.call(t,e)}function $n(t){return Pd.call(t)}function Zd(t){if(t.name)return t.name;var e=Ud.call(Dd.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function zu(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}function Jd(t){if(!yo||!t||typeof t!="object")return!1;try{yo.call(t);try{So.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function Qd(t){if(!Pi||!t||typeof t!="object")return!1;try{Pi.call(t,Pi);try{Di.call(t,Di)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function Xd(t){if(!Ks||!t||typeof t!="object")return!1;try{return Ks.call(t),!0}catch{}return!1}function xd(t){if(!So||!t||typeof t!="object")return!1;try{So.call(t);try{yo.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function eh(t){if(!Di||!t||typeof t!="object")return!1;try{Di.call(t,Di);try{Pi.call(t,Pi)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function th(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function Hu(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,i="... "+n+" more character"+(n>1?"s":"");return Hu(Kr.call(t,0,e.maxStringLength),e)+i}var o=mn.call(mn.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,nh);return Fu(o,"single",e)}function nh(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+Bd.call(e.toString(16))}function Mi(t){return"Object("+t+")"}function lr(t){return t+" { ? }"}function tl(t,e,n,i){var o=i?Or(n,i):Wt.call(n,", ");return t+" ("+e+") {"+o+"}"}function ih(t){for(var e=0;e<t.length;e++)if(zu(t[e],`
`)>=0)return!1;return!0}function oh(t,e){var n;if(t.indent==="	")n="	";else if(typeof t.indent=="number"&&t.indent>0)n=Wt.call(Array(t.indent+1)," ");else return null;return{base:n,prev:Wt.call(Array(e+1),n)}}function Or(t,e){if(t.length===0)return"";var n=`
`+e.prev+e.base;return n+Wt.call(t,","+n)+`
`+e.prev}function so(t,e){var n=Ar(t),i=[];if(n){i.length=t.length;for(var o=0;o<t.length;o++)i[o]=dn(t,o)?e(t[o],t):""}var r=typeof sr=="function"?sr(t):[],s;if(fi){s={};for(var l=0;l<r.length;l++)s["$"+r[l]]=r[l]}for(var a in t)dn(t,a)&&(n&&String(Number(a))===a&&a<t.length||fi&&s["$"+a]instanceof Symbol||(Uu.call(/[^\w$]/,a)?i.push(e(a,t)+": "+e(t[a],t)):i.push(a+": "+e(t[a],t))));if(typeof sr=="function")for(var u=0;u<r.length;u++)Bu.call(t,r[u])&&i.push("["+e(r[u])+"]: "+e(t[r[u]],t));return i}var qu=$i,wi=Ad,rh=jd,sh=qi,lo=qu("%WeakMap%",!0),ao=qu("%Map%",!0),lh=wi("WeakMap.prototype.get",!0),ah=wi("WeakMap.prototype.set",!0),uh=wi("WeakMap.prototype.has",!0),ch=wi("Map.prototype.get",!0),fh=wi("Map.prototype.set",!0),ph=wi("Map.prototype.has",!0),Yr=function(t,e){for(var n=t,i;(i=n.next)!==null;n=i)if(i.key===e)return n.next=i.next,i.next=t.next,t.next=i,i},dh=function(t,e){var n=Yr(t,e);return n&&n.value},hh=function(t,e,n){var i=Yr(t,e);i?i.value=n:t.next={key:e,next:t.next,value:n}},mh=function(t,e){return!!Yr(t,e)},_h=function(){var e,n,i,o={assert:function(r){if(!o.has(r))throw new sh("Side channel does not contain "+rh(r))},get:function(r){if(lo&&r&&(typeof r=="object"||typeof r=="function")){if(e)return lh(e,r)}else if(ao){if(n)return ch(n,r)}else if(i)return dh(i,r)},has:function(r){if(lo&&r&&(typeof r=="object"||typeof r=="function")){if(e)return uh(e,r)}else if(ao){if(n)return ph(n,r)}else if(i)return mh(i,r);return!1},set:function(r,s){lo&&r&&(typeof r=="object"||typeof r=="function")?(e||(e=new lo),ah(e,r,s)):ao?(n||(n=new ao),fh(n,r,s)):(i||(i={key:{},next:null}),hh(i,r,s))}};return o},gh=String.prototype.replace,bh=/%20/g,ar={RFC1738:"RFC1738",RFC3986:"RFC3986"},Vr={default:ar.RFC3986,formatters:{RFC1738:function(t){return gh.call(t,bh,"+")},RFC3986:function(t){return String(t)}},RFC1738:ar.RFC1738,RFC3986:ar.RFC3986},vh=Vr,ur=Object.prototype.hasOwnProperty,Mn=Array.isArray,Ht=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),$h=function(e){for(;e.length>1;){var n=e.pop(),i=n.obj[n.prop];if(Mn(i)){for(var o=[],r=0;r<i.length;++r)typeof i[r]<"u"&&o.push(i[r]);n.obj[n.prop]=o}}},Wu=function(e,n){for(var i=n&&n.plainObjects?Object.create(null):{},o=0;o<e.length;++o)typeof e[o]<"u"&&(i[o]=e[o]);return i},wh=function t(e,n,i){if(!n)return e;if(typeof n!="object"){if(Mn(e))e.push(n);else if(e&&typeof e=="object")(i&&(i.plainObjects||i.allowPrototypes)||!ur.call(Object.prototype,n))&&(e[n]=!0);else return[e,n];return e}if(!e||typeof e!="object")return[e].concat(n);var o=e;return Mn(e)&&!Mn(n)&&(o=Wu(e,i)),Mn(e)&&Mn(n)?(n.forEach(function(r,s){if(ur.call(e,s)){var l=e[s];l&&typeof l=="object"&&r&&typeof r=="object"?e[s]=t(l,r,i):e.push(r)}else e[s]=r}),e):Object.keys(n).reduce(function(r,s){var l=n[s];return ur.call(r,s)?r[s]=t(r[s],l,i):r[s]=l,r},o)},kh=function(e,n){return Object.keys(n).reduce(function(i,o){return i[o]=n[o],i},e)},yh=function(t,e,n){var i=t.replace(/\+/g," ");if(n==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},Sh=function(e,n,i,o,r){if(e.length===0)return e;var s=e;if(typeof e=="symbol"?s=Symbol.prototype.toString.call(e):typeof e!="string"&&(s=String(e)),i==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});for(var l="",a=0;a<s.length;++a){var u=s.charCodeAt(a);if(u===45||u===46||u===95||u===126||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||r===vh.RFC1738&&(u===40||u===41)){l+=s.charAt(a);continue}if(u<128){l=l+Ht[u];continue}if(u<2048){l=l+(Ht[192|u>>6]+Ht[128|u&63]);continue}if(u<55296||u>=57344){l=l+(Ht[224|u>>12]+Ht[128|u>>6&63]+Ht[128|u&63]);continue}a+=1,u=65536+((u&1023)<<10|s.charCodeAt(a)&1023),l+=Ht[240|u>>18]+Ht[128|u>>12&63]+Ht[128|u>>6&63]+Ht[128|u&63]}return l},Eh=function(e){for(var n=[{obj:{o:e},prop:"o"}],i=[],o=0;o<n.length;++o)for(var r=n[o],s=r.obj[r.prop],l=Object.keys(s),a=0;a<l.length;++a){var u=l[a],c=s[u];typeof c=="object"&&c!==null&&i.indexOf(c)===-1&&(n.push({obj:s,prop:u}),i.push(c))}return $h(n),e},Ch=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Ah=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},Oh=function(e,n){return[].concat(e,n)},Nh=function(e,n){if(Mn(e)){for(var i=[],o=0;o<e.length;o+=1)i.push(n(e[o]));return i}return n(e)},Gu={arrayToObject:Wu,assign:kh,combine:Oh,compact:Eh,decode:yh,encode:Sh,isBuffer:Ah,isRegExp:Ch,maybeMap:Nh,merge:wh},Ku=_h,ho=Gu,Ui=Vr,Th=Object.prototype.hasOwnProperty,Yu={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,n){return e+"["+n+"]"},repeat:function(e){return e}},qt=Array.isArray,Rh=Array.prototype.push,Vu=function(t,e){Rh.apply(t,qt(e)?e:[e])},Mh=Date.prototype.toISOString,nl=Ui.default,dt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:ho.encode,encodeValuesOnly:!1,format:nl,formatter:Ui.formatters[nl],indices:!1,serializeDate:function(e){return Mh.call(e)},skipNulls:!1,strictNullHandling:!1},Ih=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},cr={},Lh=function t(e,n,i,o,r,s,l,a,u,c,p,d,h,m,g,y,$,E){for(var T=e,K=E,L=0,A=!1;(K=K.get(cr))!==void 0&&!A;){var I=K.get(e);if(L+=1,typeof I<"u"){if(I===L)throw new RangeError("Cyclic object value");A=!0}typeof K.get(cr)>"u"&&(L=0)}if(typeof c=="function"?T=c(n,T):T instanceof Date?T=h(T):i==="comma"&&qt(T)&&(T=ho.maybeMap(T,function(U){return U instanceof Date?h(U):U})),T===null){if(s)return u&&!y?u(n,dt.encoder,$,"key",m):n;T=""}if(Ih(T)||ho.isBuffer(T)){if(u){var z=y?n:u(n,dt.encoder,$,"key",m);return[g(z)+"="+g(u(T,dt.encoder,$,"value",m))]}return[g(n)+"="+g(String(T))]}var F=[];if(typeof T>"u")return F;var V;if(i==="comma"&&qt(T))y&&u&&(T=ho.maybeMap(T,u)),V=[{value:T.length>0?T.join(",")||null:void 0}];else if(qt(c))V=c;else{var j=Object.keys(T);V=p?j.sort(p):j}var B=a?n.replace(/\./g,"%2E"):n,H=o&&qt(T)&&T.length===1?B+"[]":B;if(r&&qt(T)&&T.length===0)return H+"[]";for(var J=0;J<V.length;++J){var D=V[J],P=typeof D=="object"&&typeof D.value<"u"?D.value:T[D];if(!(l&&P===null)){var N=d&&a?D.replace(/\./g,"%2E"):D,Z=qt(T)?typeof i=="function"?i(H,N):H:H+(d?"."+N:"["+N+"]");E.set(e,L);var Y=Ku();Y.set(cr,E),Vu(F,t(P,Z,i,o,r,s,l,a,i==="comma"&&y&&qt(T)?null:u,c,p,d,h,m,g,y,$,Y))}}return F},Ph=function(e){if(!e)return dt;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=e.charset||dt.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=Ui.default;if(typeof e.format<"u"){if(!Th.call(Ui.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var o=Ui.formatters[i],r=dt.filter;(typeof e.filter=="function"||qt(e.filter))&&(r=e.filter);var s;if(e.arrayFormat in Yu?s=e.arrayFormat:"indices"in e?s=e.indices?"indices":"repeat":s=dt.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var l=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:dt.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:dt.addQueryPrefix,allowDots:l,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:dt.allowEmptyArrays,arrayFormat:s,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:dt.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?dt.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:dt.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:dt.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:dt.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:dt.encodeValuesOnly,filter:r,format:i,formatter:o,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:dt.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:dt.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:dt.strictNullHandling}},Dh=function(t,e){var n=t,i=Ph(e),o,r;typeof i.filter=="function"?(r=i.filter,n=r("",n)):qt(i.filter)&&(r=i.filter,o=r);var s=[];if(typeof n!="object"||n===null)return"";var l=Yu[i.arrayFormat],a=l==="comma"&&i.commaRoundTrip;o||(o=Object.keys(n)),i.sort&&o.sort(i.sort);for(var u=Ku(),c=0;c<o.length;++c){var p=o[c];i.skipNulls&&n[p]===null||Vu(s,Lh(n[p],p,l,a,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,u))}var d=s.join(i.delimiter),h=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),d.length>0?h+d:""},pi=Gu,Nr=Object.prototype.hasOwnProperty,Uh=Array.isArray,ct={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!0,decoder:pi.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Bh=function(t){return t.replace(/&#(\d+);/g,function(e,n){return String.fromCharCode(parseInt(n,10))})},Zu=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},Fh="utf8=%26%2310003%3B",jh="utf8=%E2%9C%93",zh=function(e,n){var i={__proto__:null},o=n.ignoreQueryPrefix?e.replace(/^\?/,""):e,r=n.parameterLimit===1/0?void 0:n.parameterLimit,s=o.split(n.delimiter,r),l=-1,a,u=n.charset;if(n.charsetSentinel)for(a=0;a<s.length;++a)s[a].indexOf("utf8=")===0&&(s[a]===jh?u="utf-8":s[a]===Fh&&(u="iso-8859-1"),l=a,a=s.length);for(a=0;a<s.length;++a)if(a!==l){var c=s[a],p=c.indexOf("]="),d=p===-1?c.indexOf("="):p+1,h,m;d===-1?(h=n.decoder(c,ct.decoder,u,"key"),m=n.strictNullHandling?null:""):(h=n.decoder(c.slice(0,d),ct.decoder,u,"key"),m=pi.maybeMap(Zu(c.slice(d+1),n),function(y){return n.decoder(y,ct.decoder,u,"value")})),m&&n.interpretNumericEntities&&u==="iso-8859-1"&&(m=Bh(m)),c.indexOf("[]=")>-1&&(m=Uh(m)?[m]:m);var g=Nr.call(i,h);g&&n.duplicates==="combine"?i[h]=pi.combine(i[h],m):(!g||n.duplicates==="last")&&(i[h]=m)}return i},Hh=function(t,e,n,i){for(var o=i?e:Zu(e,n),r=t.length-1;r>=0;--r){var s,l=t[r];if(l==="[]"&&n.parseArrays)s=n.allowEmptyArrays&&o===""?[]:[].concat(o);else{s=n.plainObjects?Object.create(null):{};var a=l.charAt(0)==="["&&l.charAt(l.length-1)==="]"?l.slice(1,-1):l,u=n.decodeDotInKeys?a.replace(/%2E/g,"."):a,c=parseInt(u,10);!n.parseArrays&&u===""?s={0:o}:!isNaN(c)&&l!==u&&String(c)===u&&c>=0&&n.parseArrays&&c<=n.arrayLimit?(s=[],s[c]=o):u!=="__proto__"&&(s[u]=o)}o=s}return o},qh=function(e,n,i,o){if(e){var r=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/,l=/(\[[^[\]]*])/g,a=i.depth>0&&s.exec(r),u=a?r.slice(0,a.index):r,c=[];if(u){if(!i.plainObjects&&Nr.call(Object.prototype,u)&&!i.allowPrototypes)return;c.push(u)}for(var p=0;i.depth>0&&(a=l.exec(r))!==null&&p<i.depth;){if(p+=1,!i.plainObjects&&Nr.call(Object.prototype,a[1].slice(1,-1))&&!i.allowPrototypes)return;c.push(a[1])}return a&&c.push("["+r.slice(a.index)+"]"),Hh(c,n,i,o)}},Wh=function(e){if(!e)return ct;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=typeof e.charset>"u"?ct.charset:e.charset,i=typeof e.duplicates>"u"?ct.duplicates:e.duplicates;if(i!=="combine"&&i!=="first"&&i!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var o=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:ct.allowDots:!!e.allowDots;return{allowDots:o,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:ct.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:ct.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:ct.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:ct.arrayLimit,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:ct.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:ct.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:ct.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:ct.decoder,delimiter:typeof e.delimiter=="string"||pi.isRegExp(e.delimiter)?e.delimiter:ct.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:ct.depth,duplicates:i,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:ct.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:ct.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:ct.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:ct.strictNullHandling}},Gh=function(t,e){var n=Wh(e);if(t===""||t===null||typeof t>"u")return n.plainObjects?Object.create(null):{};for(var i=typeof t=="string"?zh(t,n):t,o=n.plainObjects?Object.create(null):{},r=Object.keys(i),s=0;s<r.length;++s){var l=r[s],a=qh(l,i[l],n,typeof t=="string");o=pi.merge(o,a,n)}return n.allowSparse===!0?o:pi.compact(o)},Kh=Dh,Yh=Gh,Vh=Vr,Zh={formats:Vh,parse:Yh,stringify:Kh};const Jh=bi(Zh),Qh=gi("route");class Xh extends Lt{constructor(){super(),this.prop("ro","basePath",()=>this._basePath),this.prop("ro","hash",()=>(this._location.hash||"").replace(/^#/,"")),this.prop("ro","path",()=>this._path),this.prop("ro","pathParts",()=>this._pathParts),this.prop("ro","query",()=>this._query),this.prop("rw","baseUrl",""),this.prop("rw","enabled",!1),this.prop("persist","history",[]),this._onClick=this._onClick.bind(this),this._onLocationChange=this._onLocationChange.bind(this),window.addEventListener("click",this._onClick),window.addEventListener("popstate",this._onLocationChange),this._history=window.history,this._location=window.location,this._basePath="",this._path="/",this._pathParts=[],this._query={}}conversationPath(e){const n=["","chat"];return e.connection_id&&n.push(e.connection_id),e.conversation_id&&n.push(e.conversation_id),n.map(i=>encodeURIComponent(i)).join("/")}go(e,n={}){e.indexOf(this.baseUrl)===0&&(e=e.substring(this.baseUrl.length));const i=this.baseUrl+e;if(i===this._location.href)return this;this._addToHistory(this._location.href),this._addToHistory(i),this._history[n.replace?"replaceState":"pushState"]({},document.title,i),this.update({path:!0})._onLocationChange({})}param(e,n=""){const i=this.query;return Object.hasOwn(i,e)?i[e]:n}removeFromHistory(e){e.indexOf(this.baseUrl)===0&&(e=e.substring(this.baseUrl.length));const n=this.history.filter(i=>i!==e);this.update({history:n})}subscribe(e){return e(this),this.on("update",e)}update(e){return e.baseUrl&&(e.baseUrl=e.baseUrl.replace(/\/+$/,""),this._basePath=new URL(e.baseUrl).pathname.replace(/\/+$/,"")),super.update(e),e.baseUrl&&this._onLocationChange(),this}urlFor(e,n={}){const i=e.match(/^\w+:/)||e.match(/^#/)?e:this.basePath+e,o=Object.keys(n).sort().filter(r=>Pe.defined(n[r])).map(r=>r+"="+encodeURIComponent(n[r])).join("&");return i+(o?"?"+o:"")}wsUrlFor(e){return(e.match(/^\w+:/)?e:this.baseUrl+e).replace(/^http/,"ws")}_addToHistory(e){e=e.indexOf(this.baseUrl)===0?e.substring(this.baseUrl.length):e;const n=this.history.filter(i=>i!==e);for(n.push(e);n.length>10;)n.shift();this.update({history:n})}_onClick(e){if(this.emit("click",e),!this.enabled||e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)return;const n=e.target&&e.target.closest("a");if(!n||!n.href)return;if(n.target==="_self"&&(n.href.indexOf("/")===0?this.baseUrl+n.href:n.href)===location.href)return location.reload();if(n.hasAttribute("download")||n.hasAttribute("target"))return;let i=n.getAttribute("href")||"";i.indexOf("#")===0&&(i=this.path+i),i.indexOf("./")===0&&(i="/"+this._pathParts.slice(0,-1).join("/")+i.replace(/^\./,"")),i.indexOf(this.baseUrl)===0&&(i=i.substr(this.baseUrl.length)),i.indexOf(this.basePath)===0&&(i=i.substr(this.basePath.length)),i.indexOf("/")===0&&(this.go(i,{},n.hasAttribute("replace")),e.preventDefault())}_onLocationChange(){if(!this.enabled)return;const e=this._location.href,i=e.substring(this.baseUrl.length).split("#")[0].split("?");this._addToHistory(e),this._query=i.length===2?Jh.parse(i.pop()):{},this._path=i[0],this._pathParts=i[0].length<=1?[]:i[0].replace(/^\//,"").split("/").map(decodeURIComponent),Qh.info('path="'+this._path+'" '+JSON.stringify(this._pathParts)+", query="+JSON.stringify(this._query)),this.update({path:!0})}}const Ie=new Xh;class xh{constructor(){this.aliases=this._buildAliases(),this.re=this._buildRe(),this.byShortName={},this.grouped={},this.status="pending"}async load(){if(["loading","success"].indexOf(this.status)!==-1)return this;this.status="loading";const e=await fetch(Ie.urlFor("/emojis/0bf11a9aff0d6da7b46f1490f86a71eb.json"));return this._load((await e.json()).emojis),this.status="success",this}markup(e){return e.replace(this.re,(n,i,o)=>{const r=this.aliases[o]||o,s=this.byShortName[r];return i+(s&&s.emoji||o)})}search(e){e=e.toLowerCase();const n=this.grouped[e]||this.grouped[e.substring(0,2)]||{};return Object.keys(n).sort((i,o)=>n[i]-n[o]).map(i=>this.byShortName[i]).filter(i=>(i.shortname+i.name).toLowerCase().indexOf(e)!==-1)}_buildAliases(){return{"&lt;3":":heart:","(Y)":":thumbsup:",":(":":disappointed:",":)":":slight_smile:",":-*":":kissing:",":/":":confused:",":D":":smiley:",":O":":open_mouth:",":P":":stuck_out_tongue:",";)":":wink:",";D":":grin:"}}_buildRe(){const e=Object.keys(this.aliases).sort().map(vi).join("|");return new RegExp("(^|\\s)(:\\w+:|"+e+")(?=&|\\s|\\,|\\.|$)","gi")}_load(e){this.grouped={};for(const n of e)n.emoji&&n.shortname&&(n.name||(n.name=n.shortname),delete n.category,delete n.order,delete n.unicode,this.byShortName[n.shortname]=n,this._toGrouped(n))}_toGrouped(e){const n=this.grouped;([e.shortname,e.name].join("-").replace(/\W+/," ").match(/\W(\w{2})/g)||[]).forEach((o,r)=>{o=o.substring(1).toLowerCase(),n[o]||(n[o]={}),n[o][e.shortname]=r,o=o[0],n[o]||(n[o]={}),n[o][e.shortname]=r})}}const em={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"},Ii=(t,e=/[&<>'"]/g)=>t.replace(e,n=>em[n]),il=t=>t.replace(/\s$/,"&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s{2}/g," &nbsp;"),Ct=t=>[t.map(e=>`<${e}>`).join(""),t.reverse().map(e=>`</${e}>`).join("")];class tm extends Lt{constructor(){super(),this.prop("cookie","lang",""),this.prop("ro","dictionaries",{}),this.prop("ro","emojis",new xh),this.prop("ro","languages",()=>this._languages),this.prop("ro","languageOptions",()=>this._languageOptions),this._languages=[],this._languageOptions=[],this._rules=this._makeRules()}l(e,...n){const i=this.dictionaries[this.lang]||{};return String(i[e]||e).replace(/%(\d)(\D|$)/g,(r,s,l)=>typeof n[s-1]>"u"?r:n[s-1]+l)}async load(e){if(e||(e=this.lang||document.documentElement.getAttribute("lang")),this.dictionaries[e])return this.update({lang:e});const n=await nt.op("getDictionary",{lang:e}).perform();return this.dictionaries[e]=n.res.body.dictionary,this._languages=n.res.body.available_languages||{},this._languageOptions=Object.keys(this._languages).sort().map(i=>[i,this._languages[i].language_team.replace(/\s*<.*/,"")]),this.update({lang:e})}lmd(e,...n){return this.md(this.l(e,...n))}md(e){return e.length?this.emojis.markup(il(this._tagToHTML(this._makeTag(e)))):"&nbsp;"}raw(e){return e.length?il(Ii(e)):"&nbsp;"}_makeRules(){const e=[];return e.push({tag:Ct(["code"]),re:/`(?=[^`\s])/,rules:[],handler:"_mdTag"}),e.push({tag:Ct(["em","strong"]),re:/\*\*\*(?=\S)/,rules:e,handler:"_mdTag"}),e.push({tag:Ct(["strong"]),re:/\*\*(?=\S)/,rules:e,handler:"_mdTag"}),e.push({tag:Ct(["em"]),re:/\*(?=\S)/,rules:e,handler:"_mdTag"}),e.push({tag:Ct(["span"]),re:/\x03\d{1,2}(?:,\d{1,2})?/,rules:e,handler:"_mdIrcColorFormatting"}),e.push({tag:Ct(["span"]),re:/[\x02\x1d\x1e\x1f\x11]/,rules:e,handler:"_mdIrcTextFormatting"}),e.push({tag:Ct(["a"]),re:/\[([a-zA-Z][^\]]+)\]\(([^)]+)\)/,rules:[],handler:"_mdLink"}),e.push({tag:Ct(["a"]),re:/\b(https?|mailto):\S+/,rules:[],handler:"_mdURL"}),e.push({tag:Ct(["a"]),re:/(\s|^)#[a-zA-Z][\w.-]+(?=\W|$)/,rules:[],handler:"_mdChannelname"}),e}_makeTag(e,n=this._rules,i=0){if(i===0&&e.indexOf("> ")===0)return[Ct(["blockquote"]),{},[this._makeTag(e.replace(/^>\s/,""),n,i+1)]];const o=[];for(const r of n){const s=e.match(r.re);if(!s)continue;const l={attrs:{},after:e.substring(s.index+s[0].length),before:e.substring(0,s.index),captured:s[0],index:s.index,match:s,tag:r.tag};if(this[r.handler](l),typeof l.content!="string"){e=l.before+l.captured+l.after;continue}l.before.length&&o.push(this._makeTag(l.before,n,i+1)),o.push([l.tag,l.attrs,[this._makeTag(l.content,r.rules,i+1)]]),l.after.length&&o.push(this._makeTag(l.after,n,i+1));break}return[null,{},o.length?o:[Ii(e)]]}_mdChannelname(e){e.captured=e.captured.replace(/^\s/,n=>(e.before+=n,"")),e.content=e.captured,e.attrs.href="./"+encodeURIComponent(e.captured)}_mdIrcColorFormatting(e){const n=e.after.indexOf("");if(n===-1)return;e.content=e.after.substring(0,n),e.after=e.after.substring(n+1);const i=[];e.captured.replace(/\x030?(\d{1,2}),?(\d{1,2})?/,(o,r,s)=>{s&&i.push("bg-"+s),r&&i.push("text-"+r)}),i.length&&(e.attrs.class=i.join(" "))}_mdIrcTextFormatting(e){const n=e.after.indexOf(e.captured);n!==-1&&(e.content=e.after.substring(0,n),e.after=e.after.substring(n+e.captured.length),e.tag=e.captured===""?Ct(["strong"]):e.captured===""?Ct(["em"]):e.captured===""?Ct(["u"]):e.captured===""?Ct(["code"]):Ct(["span"]))}_mdLink(e){e.content=e.match[1],e.attrs.href=Ii(e.match[2]),e.match[2].match(/^\w+:/)&&(e.attrs.target="_blank")}_mdTag(e){if(e.before.match(/\\$/)){e.before=e.before.replace(/\\$/,"");return}const n=e.after.indexOf(e.captured);n!==-1&&(e.content=e.after.substring(0,n),e.after=e.after.substring(n+e.captured.length))}_mdURL(e){e.captured=e.captured.replace(/[,.:;!"')]$/,n=>(e.after=n[0]+e.after,"")),e.content=e.captured.replace(/^(https|mailto):(\/\/)?/,""),e.attrs.href=Ii(e.captured),e.attrs.target="_blank"}_tagToHTML(e){if(typeof e=="string")return e;const n=typeof e[2]=="string"?Ii(e[2]):e[2].map(r=>this._tagToHTML(r)).join("");if(!e[0])return n;const i=Object.keys(e[1]).sort().map(r=>`${r}="${e[1][r]}"`).join(" ");return(i?e[0][0].replace(/>/," "+i+">"):e[0][0])+n+e[0][1]}}const tt=new tm,lt=$u(tt,t=>(...e)=>t.l(...e)),jt=$u(tt,t=>(...e)=>t.lmd(...e)),hn=[],Ju={};function nm({query:t}){const e=[];for(let n=0;n<hn.length;n++){if(hn[n].cmd.indexOf(t)!==0)continue;const i=hn[n].alias||hn[n].cmd;e.push({val:i,text:tt.md(hn[n].example)})}return e}function im(t){const e=t.split(/\s/),n=Ju[e[0].toLowerCase()];return Pe.function(n)?n(e.slice(1)):n?[n].concat(e.slice(1)).filter(i=>Pe.defined(i)&&i.length).join(" "):t}const ot=(t,e,n)=>hn.push({cmd:t,description:n,example:e});ot("/me","/me <msg>","Send message as an action.");ot("/say","/say <msg>",'Used when you want to send a message starting with "/".');ot("/whois","/whois <nick>","Show information about a user.");ot("/query","/query <nick>","Open up a new chat window with nick.");ot("/msg","/msg <nick> <msg>","Send a direct message to nick.");ot("/shrug","/shrug <msg>","Add a shrug to end of message. Message is optional.");ot("/join","/join <#channel>","Join channel and open up a chat window.");ot("/close","/close [nick|#channel]","Close conversation.");ot("/nick","/nick <nick>","Change your wanted nick.");ot("/away","/away <message>","Add or remove an away message");ot("/kick","/kick <nick>","Kick a user from the current channel.");ot("/mode","/mode [+|-][b|o|v] <user>","Change mode of yourself or a user");ot("/topic","/topic or /topic <new topic>","Show current topic, or set a new one.");ot("/names","/names","Show participants in the channel.");ot("/invite","/invite <nick> [#channel]","Invite a user to a channel.");ot("/reconnect","/reconnect","Restart the current connection.");ot("/clear","/clear history <#channel> or /clear history <nick>","Delete all history for the given conversation.");ot("/oper","/oper <nick> <password>","Gain operator status on a network.");ot("/cs","/cs <msg>","Send a message to chanserv.");ot("/ns","/ns <msg>","Send a message to nickserv.");ot("/ms","/ms <msg>","Send a message to memoserv.");ot("/hs","/hs <msg>","Send a message to hostserv.");ot("/bs","/bs <msg>","Send a message to botserv.");ot("/os","/os <msg>","Send a message to operserv.");ot("/quote","/quote <irc-command>","Allow you to send any raw IRC message.");const Qt=(t,e)=>Ju[t]=e;Qt("/close","/part");Qt("/shrug",t=>"/say "+t.concat("¯\\_(ツ)_/¯").join(" "));Qt("/cs","/quote chanserv");Qt("/ns","/quote nickserv");Qt("/ms","/quote memoserv");Qt("/hs","/quote hotserv");Qt("/bs","/quote botserv");Qt("/os","/quote operserv");Qt("/j","/join");Qt("/raw","/quote");function Dn(t,e){return Dn[t]?Dn[t](e):[]}function om(t,e){t&&Object.hasOwn(t,"val")&&(t=t.val);const n=e.append?e.value.length:e.cursorPos;let[i,o]=[e.value.substring(0,n),e.value.substring(n)];return Pe.undefined(t)?{before:i,middle:"",after:o}:(e.append&&(i=i.replace(/[ ]$/,""),i.length&&(t=" "+t)),e.padBefore&&(i=i.replace(/[ ]$/,""),i.length&&(t=" "+t)),e.padAfter&&(o=o.replace(/^[ ]/,""),t=t+" "),e.replace&&(i=i.replace(/\S*\s?$/,"")),{before:i,middle:t,after:o})}function rm(t,e,{conversation:n,user:i}){let o="",r="";const s=t.substring(0,e).replace(/(\S)(\S*)$/,(u,c,p)=>(o=c,r=p,"")),l=o===":"&&r.length?"emojis":o==="/"&&!s.length?"commands":o==="@"&&r.length?"nicks":o==="#"||o==="&"?"conversations":"none",a=Dn(l,{conversation:n,query:o+r,user:i});return a.length&&a.unshift({autocompleteCategory:l,val:o+r}),a}Dn.commands=({query:t})=>nm({query:t});Dn.conversations=({conversation:t,query:e,user:n})=>{const i=n.findConversation({connection_id:t.connection_id}),o=i?i.conversations.toArray():n.conversations(),r=[];for(let s=0;s<o.length&&!(o[s].name.toLowerCase().indexOf(e)!==-1&&(r.push({text:o[s].name,val:o[s].conversation_id}),r.length>=20));s++);return r};Dn.emojis=({query:t})=>{const e=tt.emojis,n=[];for(let i of e.search(t.substring(1)))if(n.push({val:i.emoji,text:e.markup(i.emoji)}),n.length>=30)break;return n};Dn.nicks=({conversation:t,query:e})=>{const n=new RegExp("^"+vi(e.slice(1)),"i"),i=[];for(let o of t.participants.toArray()){if(i.length>=20)break;o.nick.match(n)&&i.push({val:o.nick})}return i};function Qu(t){const e=t-1;return e*e*e+1}function Bt(t,{delay:e=0,duration:n=400,easing:i=au}={}){const o=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:i,css:r=>`opacity: ${r*o}`}}function Zt(t,{delay:e=0,duration:n=400,easing:i=Qu,x:o=0,y:r=0,opacity:s=0}={}){const l=getComputedStyle(t),a=+l.opacity,u=l.transform==="none"?"":l.transform,c=a*(1-s),[p,d]=vs(o),[h,m]=vs(r);return{delay:e,duration:n,easing:i,css:(g,y)=>`
			transform: ${u} translate(${(1-g)*p}${d}, ${(1-g)*h}${m});
			opacity: ${a-c*y}`}}function Jt(t,{delay:e=0,duration:n=400,easing:i=Qu,axis:o="y"}={}){const r=getComputedStyle(t),s=+r.opacity,l=o==="y"?"height":"width",a=parseFloat(r[l]),u=o==="y"?["top","bottom"]:["left","right"],c=u.map($=>`${$[0].toUpperCase()}${$.slice(1)}`),p=parseFloat(r[`padding${c[0]}`]),d=parseFloat(r[`padding${c[1]}`]),h=parseFloat(r[`margin${c[0]}`]),m=parseFloat(r[`margin${c[1]}`]),g=parseFloat(r[`border${c[0]}Width`]),y=parseFloat(r[`border${c[1]}Width`]);return{delay:e,duration:n,easing:i,css:$=>`overflow: hidden;opacity: ${Math.min($*20,1)*s};${l}: ${$*a}px;padding-${u[0]}: ${$*p}px;padding-${u[1]}: ${$*d}px;margin-${u[0]}: ${$*h}px;margin-${u[1]}: ${$*m}px;border-${u[0]}-width: ${$*g}px;border-${u[1]}-width: ${$*y}px;`}}function ol(t){const e=t.is("private")?t.participants.nicks().sort().join("-and-"):t.title;return encodeURIComponent(e).toLowerCase()}const Eo=No(null,{conversationToInternalUrl(t){const e=this.get();if(!e)return null;const n=Ie.urlFor("/video/"+e.hostname+"/"+ol(t));return new URL(n,location.href).href},conversationToExternalUrl(t){const e=this.get();return e?new URL("/"+ol(t),e).href:null},fromString(t){this.set(t?new URL(t):null)}}),sm=No(null,{close(){const t=this.get();return t?[!0,t.close(),this.set(null)][0]:!1},open(t,e={}){this.window||(this.window=window),t=t.toString(),e.nick&&(t+="?nick="+encodeURIComponent(e.nick));const n=this.window.open(t,"convos_video");["beforeunload","close"].forEach(i=>n.addEventListener(i,()=>this.set(null))),this.set(n)}});function rl(t,e,n){const i=t.slice();return i[39]=e[n],i[41]=n,i}function sl(t){let e,n,i,o,r,s;return n=new de({props:{name:"plus-circle"}}),i=new de({props:{name:"times"}}),{c(){e=_("a"),G(n.$$.fragment),G(i.$$.fragment),k(e,"href","#actions"),k(e,"class","btn-hallow can-toggle"),He(e,"is-active",t[2]==="actions")},m(l,a){w(l,e,a),q(n,e,null),q(i,e,null),o=!0,r||(s=Ce(e,"click",st(t[13])),r=!0)},p(l,a){(!o||a[0]&4)&&He(e,"is-active",l[2]==="actions")},i(l){o||(b(n.$$.fragment,l),b(i.$$.fragment,l),o=!0)},o(l){S(n.$$.fragment,l),S(i.$$.fragment,l),o=!1},d(l){l&&v(e),W(n),W(i),r=!1,s()}}}function lm(t){let e,n,i,o,r=xe(t[4]),s=[];for(let l=0;l<r.length;l+=1)s[l]=ll(rl(t,r,l));return{c(){e=_("div");for(let l=0;l<s.length;l+=1)s[l].c();k(e,"class",n="chat-input_menu for-"+t[5])},m(l,a){w(l,e,a);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null);o=!0},p(l,a){if(t=l,a[0]&65560){r=xe(t[4]);let u;for(u=0;u<r.length;u+=1){const c=rl(t,r,u);s[u]?s[u].p(c,a):(s[u]=ll(c),s[u].c(),s[u].m(e,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=r.length}(!o||a[0]&32&&n!==(n="chat-input_menu for-"+t[5]))&&k(e,"class",n)},i(l){o||(l&&at(()=>{o&&(i||(i=et(e,Zt,t[12],!0)),i.run(1))}),o=!0)},o(l){l&&(i||(i=et(e,Zt,t[12],!1)),i.run(0)),o=!1},d(l){l&&v(e),kt(s,l),l&&i&&i.end()}}}function am(t){let e,n,i,o,r,s=t[1]("Attach a file")+"",l,a,u,c=t[8]&&al(t);return o=new de({props:{name:"cloud-upload-alt"}}),{c(){e=_("div"),c&&c.c(),n=C(),i=_("label"),G(o.$$.fragment),r=C(),l=O(s),k(i,"for","upload_files"),k(e,"class","chat-input_menu for-actions")},m(p,d){w(p,e,d),c&&c.m(e,null),f(e,n),f(e,i),q(o,i,null),f(i,r),f(i,l),u=!0},p(p,d){t=p,t[8]?c?(c.p(t,d),d[0]&256&&b(c,1)):(c=al(t),c.c(),b(c,1),c.m(e,n)):c&&(ke(),S(c,1,1,()=>{c=null}),ye()),(!u||d[0]&2)&&s!==(s=t[1]("Attach a file")+"")&&M(l,s)},i(p){u||(b(c),b(o.$$.fragment,p),p&&at(()=>{u&&(a||(a=et(e,Zt,t[12],!0)),a.run(1))}),u=!0)},o(p){S(c),S(o.$$.fragment,p),p&&(a||(a=et(e,Zt,t[12],!1)),a.run(0)),u=!1},d(p){p&&v(e),c&&c.d(),W(o),p&&a&&a.end()}}}function ll(t){let e,n=(t[39].text||t[39].val)+"",i,o;return{c(){e=_("a"),k(e,"href","#index:"+t[41]),k(e,"tabindex","-1"),He(e,"has-focus",t[41]===t[3])},m(r,s){w(r,e,s),e.innerHTML=n,i||(o=Ce(e,"click",st(t[16])),i=!0)},p(r,s){s[0]&16&&n!==(n=(r[39].text||r[39].val)+"")&&(e.innerHTML=n),s[0]&8&&He(e,"has-focus",r[41]===r[3])},d(r){r&&v(e),i=!1,o()}}}function al(t){let e,n,i,o=t[1]("Start a video conference")+"",r,s,l,a;return n=new de({props:{name:"video"}}),{c(){e=_("a"),G(n.$$.fragment),i=C(),r=O(o),k(e,"href",t[8])},m(u,c){w(u,e,c),q(n,e,null),f(e,i),f(e,r),s=!0,l||(a=Ce(e,"click",t[15]),l=!0)},p(u,c){(!s||c[0]&2)&&o!==(o=u[1]("Start a video conference")+"")&&M(r,o),(!s||c[0]&256)&&k(e,"href",u[8])},i(u){s||(b(n.$$.fragment,u),s=!0)},o(u){S(n.$$.fragment,u),s=!1},d(u){u&&v(e),W(n),l=!1,a()}}}function um(t){let e,n,i,o,r,s,l,a=t[0].is("conversation"),u,c,p,d,h,m=Tt(t[1](t[9]))+"",g,y,$,E,T,K,L,A,I=a&&sl(t);p=new de({props:{name:t[10]}});const z=[am,lm],F=[];function V(j,B){return B[0]&5&&($=null),$==null&&($=!!(j[2]==="actions"&&j[0].is("conversation"))),$?0:j[4].length?1:-1}return~(E=V(t,[-1,-1]))&&(T=F[E]=z[E](t)),{c(){e=_("form"),n=_("input"),i=C(),o=_("textarea"),r=C(),s=_("textarea"),l=C(),I&&I.c(),u=C(),c=_("button"),G(p.$$.fragment),d=C(),h=_("span"),g=O(m),y=C(),T&&T.c(),k(n,"type","file"),k(n,"id","upload_files"),k(n,"name","upload_files"),k(n,"class","non-interactive"),k(o,"class","non-interactive"),k(o,"placeholder",t[11]),k(s,"class","is-primary-input"),k(s,"placeholder",t[11]),k(h,"class","tooltip is-above is-left"),k(c,"type","buttton"),k(c,"class","btn-hallow has-tooltip chat-input__send"),k(e,"class","chat-input")},m(j,B){w(j,e,B),f(e,n),f(e,i),f(e,o),t[29](o),f(e,r),f(e,s),f(e,l),I&&I.m(e,null),f(e,u),f(e,c),q(p,c,null),f(c,d),f(c,h),f(h,g),f(e,y),~E&&F[E].m(e,null),K=!0,L||(A=[Ce(window,"click",t[28]),Ce(n,"change",function(){Un(t[7])&&t[7].apply(this,arguments)}),Lr(t[14].call(null,s)),Ce(c,"click",t[17]),Ce(e,"submit",st(t[27]))],L=!0)},p(j,B){t=j,(!K||B[0]&2048)&&k(o,"placeholder",t[11]),(!K||B[0]&2048)&&k(s,"placeholder",t[11]),B[0]&1&&(a=t[0].is("conversation")),a?I?(I.p(t,B),B[0]&1&&b(I,1)):(I=sl(t),I.c(),b(I,1),I.m(e,u)):I&&(ke(),S(I,1,1,()=>{I=null}),ye());const H={};B[0]&1024&&(H.name=t[10]),p.$set(H),(!K||B[0]&514)&&m!==(m=Tt(t[1](t[9]))+"")&&M(g,m);let J=E;E=V(t,B),E===J?~E&&F[E].p(t,B):(T&&(ke(),S(F[J],1,1,()=>{F[J]=null}),ye()),~E?(T=F[E],T?T.p(t,B):(T=F[E]=z[E](t),T.c()),b(T,1),T.m(e,null)):T=null)},i(j){K||(b(I),b(p.$$.fragment,j),b(T),K=!0)},o(j){S(I),S(p.$$.fragment,j),S(T),K=!1},d(j){j&&v(e),t[29](null),I&&I.d(),W(p),~E&&F[E].d(),L=!1,ht(A)}}}function cm(t,e,n){let i,o,r,s,l,a,u,c,p=Oe,d=()=>(p(),p=_t(g,ae=>n(26,c=ae)),g);ve(t,lt,ae=>n(1,u=ae)),t.$$.on_destroy.push(()=>p());const h=ge;let{uploadProgress:m=0}=e,{conversation:g}=e;d();let y="",$=0,E=[],T="none",K={y:-10,duration:200},L,A,I=0;const z=gt("user"),F=new Bf;function V(ae){const we=ae.target.closest("a"),Ue=!we||y?"":we.href.replace(/.*#/,"");setTimeout(()=>{n(2,y=Ue)},1)}function j(ae,we){const{before:Ue,middle:je,after:De}=om(ae,{...we,cursorPos:L.selectionStart,value:L.value});R(Ue+je+De),L.selectionStart=L.selectionEnd=(Ue+je).length}function B(){L&&L.focus()}function H(ae,we){E.length&&(ae.preventDefault(),n(3,$+=we),$<0&&n(3,$=E.length-1),$>=E.length&&n(3,$=0),j(E[$],{replace:!0}))}function J(ae){!ae.conversation_id&&g.conversation_id&&(ae.conversation_id=g.conversation_id)}function D(ae){n(3,$=0),n(22,I=ae.selectionStart),g.update({userInput:ae.value}),ae.value.length||F.update({index:-1})}function P(ae){L=ae,L.addEventListener("focus",()=>n(22,I=L.value.length+1)),L.addEventListener("change",()=>D(L)),L.addEventListener("input",Z),L.addEventListener("keyup",we=>{(we.key.length===1||["ArrowLeft","ArrowRight","Backspace"].indexOf(we.key)!==-1)&&D(L)}),L.addEventListener("keydown",we=>{if(!(we.key==="ArrowDown"&&F.render(we,-1))&&!(we.key==="ArrowUp"&&F.render(we,1))){if(we.key==="ArrowDown")return H(we,we.shiftKey?4:1);if(we.key==="ArrowUp")return H(we,we.shiftKey?-4:-1);if(we.key==="Enter")return U(we);if(we.key==="Tab")return H(we,we.shiftKey?-1:1)}}),F.attach(L),R(Pe.undefined(g.userInput)?"":g.userInput)}function N(ae){ae.preventDefault(),sm.open(a,{nick:g.participants.me().nick});const we=g.messages.toArray().slice(-20).find(Ue=>Ue.message.indexOf(a)!==-1);we&&we.ts.toEpoch()>fo()-600||g.send({method:"send",message:Eo.conversationToExternalUrl(g)})}function Z(){A.maxHeight||n(6,A.maxHeight=A.parentNode.offsetHeight,A),n(6,A.value=L.value,A),n(6,A.style.width=L.offsetWidth+"px",A),L.style.height=(A.maxHeight>A.scrollHeight?A.scrollHeight:A.maxHeight)+"px"}function Y(ae){n(3,$=parseInt(ae.target.closest("a").href.replace(/.*index:/,""),10)),j(E[$],{padAfter:!0,replace:!0}),setTimeout(()=>{D(L),L.focus()},1)}function U(ae){if(E[$])ae.preventDefault(),j(E[$],{replace:!0}),n(22,I=L.selectionStart+1);else if(!ae.altKey&&!ae.ctrlKey&&!ae.metaKey&&!ae.shiftKey){ae.preventDefault();const Ue={method:"send"};Ue.message=im(L.value),Ue.message.length&&g.send(Ue,J),F.add(Ue.message),g.is("search")||R(""),setTimeout(Z,10)}}function R(ae){L&&(L.value=ae),g.update({userInput:ae})}function x(ae){L&&(n(4,E=ae>L.value.length?[]:rm(L.value,ae,{conversation:g,user:z})),n(5,T=E.length&&E[0].autocompleteCategory||"none"))}function le(ae){le.lock!==ae.path&&(n(23,le.lock=ae.path,le),R(Pe.undefined(ae.userInput)?"":ae.userInput))}function ge(ae){const we=ae.target&&ae.target.files||ae.dataTransfer&&ae.dataTransfer.files;if(!we||!we.length)return;if(we.length>1)return g.addMessages({message:"Cannot upload more than one file.",type:"error"});const Ue=new FormData;Ue.append("file",we[0]),n(7,ge.file=we[0],ge);const je=nt.op("uploadFile");je.on("progress",De=>{m<100&&n(18,m=parseInt(100*(De.total?De.loaded/De.total:.02),10)),m>=100&&n(18,m=0)}),n(18,m=1),je.perform({formData:Ue}).then(De=>{const Ne=De.res.body;if(n(18,m=0),Ne.files&&Ne.files.length)return j(Ne.files[0].url,{append:!0});Ne.errors&&g.addMessages({message:"Could not upload file: %1",vars:[u(Br(Ne.errors))],type:"error"})})}function oe(ae){_i.call(this,t,ae)}const Se=()=>{n(2,y="")};function Re(ae){fe[ae?"unshift":"push"](()=>{A=ae,n(6,A)})}return t.$$set=ae=>{"uploadProgress"in ae&&n(18,m=ae.uploadProgress),"conversation"in ae&&d(n(0,g=ae.conversation))},t.$$.update=()=>{t.$$.dirty[0]&1&&g&&n(2,y=""),t.$$.dirty[0]&1&&n(25,i=z.findConversation({connection_id:g.connection_id})),t.$$.dirty[0]&33554432&&n(24,o=i&&i.nick),t.$$.dirty[0]&50331651&&n(11,r=g.is("search")?u("What are you looking for?"):i&&i.is("unreachable")?u("Connecting..."):u("What is on your mind %1?",o)),t.$$.dirty[0]&1&&n(10,s=g.is("search")?"search":"paper-plane"),t.$$.dirty[0]&3&&n(9,l=g.is("search")?u("Search"):u("Send")),t.$$.dirty[0]&1&&n(8,a=Eo.conversationToInternalUrl(g)),t.$$.dirty[0]&67108864&&F.update({conversation:c}),t.$$.dirty[0]&4194304&&x(I),t.$$.dirty[0]&8388609&&le(g)},[g,u,y,$,E,T,A,ge,a,l,s,r,K,V,P,N,Y,U,m,h,j,B,I,le,o,i,c,oe,Se,Re]}class Xu extends Xe{constructor(e){super(),Qe(this,e,cm,um,Ze,{uploader:19,uploadProgress:18,conversation:0,fillIn:20,focus:21},null,[-1,-1])}get uploader(){return this.$$.ctx[19]}get fillIn(){return this.$$.ctx[20]}get focus(){return this.$$.ctx[21]}}function fm(t){let e,n,i,o,r=t[3](t[2].topic?"Topic for %1 is: %2":"No topic is set for %1.",t[2].name,t[2].topic)+"",s,l,a,u,c;n=new de({props:{name:"info-circle"}}),a=new de({props:{name:"info-circle"}});function p(m,g){return m[4].length===1?hm:dm}let d=p(t),h=d(t);return{c(){e=_("p"),G(n.$$.fragment),i=C(),o=new At(!1),s=C(),l=_("p"),G(a.$$.fragment),u=C(),h.c(),o.a=null},m(m,g){w(m,e,g),q(n,e,null),f(e,i),o.m(r,e),w(m,s,g),w(m,l,g),q(a,l,null),f(l,u),h.m(l,null),c=!0},p(m,g){(!c||g&12)&&r!==(r=m[3](m[2].topic?"Topic for %1 is: %2":"No topic is set for %1.",m[2].name,m[2].topic)+"")&&o.p(r),d===(d=p(m))&&h?h.p(m,g):(h.d(1),h=d(m),h&&(h.c(),h.m(l,null)))},i(m){c||(b(n.$$.fragment,m),b(a.$$.fragment,m),c=!0)},o(m){S(n.$$.fragment,m),S(a.$$.fragment,m),c=!1},d(m){m&&(v(e),v(s),v(l)),W(n),W(a),h.d()}}}function pm(t){let e,n,i,o,r=t[3]('This is a private conversation with "%1".',t[2].name)+"",s;return n=new de({props:{name:"info-circle"}}),{c(){e=_("p"),G(n.$$.fragment),i=C(),o=new At(!1),o.a=null},m(l,a){w(l,e,a),q(n,e,null),f(e,i),o.m(r,e),s=!0},p(l,a){(!s||a&12)&&r!==(r=l[3]('This is a private conversation with "%1".',l[2].name)+"")&&o.p(r)},i(l){s||(b(n.$$.fragment,l),s=!0)},o(l){S(n.$$.fragment,l),s=!1},d(l){l&&v(e),W(n)}}}function dm(t){let e,n=t[3]("There are %1 participants in this conversation.",t[4].length)+"",i;return{c(){e=new At(!1),i=ft(),e.a=i},m(o,r){e.m(n,o,r),w(o,i,r)},p(o,r){r&24&&n!==(n=o[3]("There are %1 participants in this conversation.",o[4].length)+"")&&e.p(n)},d(o){o&&(v(i),e.d())}}}function hm(t){let e=t[5]("You are the only participant in this conversation.")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&32&&e!==(e=i[5]("You are the only participant in this conversation.")+"")&&M(n,e)},d(i){i&&v(n)}}}function mm(t){let e,n,i,o,r;const s=[pm,fm],l=[];function a(u,c){return c&4&&(e=null),e==null&&(e=!!u[2].is("private")),e?0:u[2].frozen?-1:1}return~(n=a(t,-1))&&(i=l[n]=s[n](t)),{c(){i&&i.c(),o=ft()},m(u,c){~n&&l[n].m(u,c),w(u,o,c),r=!0},p(u,[c]){let p=n;n=a(u,c),n===p?~n&&l[n].p(u,c):(i&&(ke(),S(l[p],1,1,()=>{l[p]=null}),ye()),~n?(i=l[n],i?i.p(u,c):(i=l[n]=s[n](u),i.c()),b(i,1),i.m(o.parentNode,o)):i=null)},i(u){r||(b(i),r=!0)},o(u){S(i),r=!1},d(u){u&&v(o),~n&&l[n].d(u)}}}function _m(t,e,n){let i,o,r=Oe,s=()=>(r(),r=_t(d,h=>n(2,o=h)),d),l,a,u=Oe,c=()=>(u(),u=_t(i,h=>n(4,a=h)),i),p;ve(t,jt,h=>n(3,l=h)),ve(t,lt,h=>n(5,p=h)),t.$$.on_destroy.push(()=>r()),t.$$.on_destroy.push(()=>u());let{conversation:d}=e;return s(),t.$$set=h=>{"conversation"in h&&s(n(0,d=h.conversation))},t.$$.update=()=>{t.$$.dirty&1&&c(n(1,i=d.participants))},[d,i,o,l,a,p]}class gm extends Xe{constructor(e){super(),Qe(this,e,_m,mm,Ze,{conversation:0})}}const bm={0:"Jan",1:"Feb",2:"March",3:"Apr",4:"May",5:"Jun",6:"July",7:"Aug",8:"Sept",9:"Oct",10:"Nov",11:"Dec"},ul={H:"_getPaddedHours",M:"_getPaddedMinutes",S:"_getPaddedSeconds",b:"_getMonthAbbr",e:"getDate",Y:"getFullYear"},vm=t=>!!String(t||"").match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/);class $t extends Date{constructor(e){typeof e=="string"&&!e.match(/Z$/)&&(e+="Z"),super(e||new Date)}format(e){return e.replace(/%(\w)/g,(n,i)=>ul[i]?this[ul[i]]():i)}getHumanDate(e={}){let n=this.format("%b %e");const i=new $t;return(!(this.getYear()===i.getYear())||e.year)&&(n+=", "+this.getFullYear()),n}setDate(e,n){return[n?super.setUTCDate(e):super.setDate(e),this][1]}setFullYear(e,n){return[n?super.setUTCFullYear(e):super.setFullYear(e),this][1]}setHours(e,n){return[n?super.setUTCHours(e):super.setHours(e),this][1]}setMilliseconds(e,n){return[n?super.setUTCMilliseconds(e):super.setMilliseconds(e),this][1]}setMinutes(e,n){return[n?super.setUTCMinutes(e):super.setMinutes(e),this][1]}setMonth(e,n){return[n?super.setUTCMonth(e):super.setMonth(e),this][1]}setSeconds(e,n){return[n?super.setUTCSeconds(e):super.setSeconds(e),this][1]}setTime(e){return[super.setTime(e),this][1]}setYear(e){return[this.setYear(e),this][1]}toEpoch(){return this.getTime()/1e3}_getMonthAbbr(){return bm[this.getMonth()]||""}_getPaddedHours(){return String(this.getHours()).padStart(2,"0")}_getPaddedMinutes(){return String(this.getMinutes()).padStart(2,"0")}_getPaddedSeconds(){return String(this.getSeconds()).padStart(2,"0")}}function $m(t){let e,n,i,o,r,s,l;n=new de({props:{animation:t[2],name:t[4]}});const a=t[13].default,u=Gt(a,t,t[12],null);return{c(){e=_("button"),G(n.$$.fragment),i=C(),u&&u.c(),k(e,"class",o=t[3].join(" ")),e.disabled=t[5],k(e,"type",t[1])},m(c,p){w(c,e,p),q(n,e,null),f(e,i),u&&u.m(e,null),r=!0,s||(l=Ce(e,"click",t[14]),s=!0)},p(c,[p]){const d={};p&4&&(d.animation=c[2]),p&16&&(d.name=c[4]),n.$set(d),u&&u.p&&(!r||p&4096)&&Yt(u,a,c,c[12],r?Kt(a,c[12],p,null):Vt(c[12]),null),(!r||p&8&&o!==(o=c[3].join(" ")))&&k(e,"class",o),(!r||p&32)&&(e.disabled=c[5]),(!r||p&2)&&k(e,"type",c[1])},i(c){r||(b(n.$$.fragment,c),b(u,c),r=!0)},o(c){S(n.$$.fragment,c),S(u,c),r=!1},d(c){c&&v(e),W(n),u&&u.d(c),s=!1,l()}}}const wm=500;function km(t,e,n){let i,o,r=Oe,s=()=>(r(),r=_t(y,L=>n(11,o=L)),y);t.$$.on_destroy.push(()=>r());let{$$slots:l={},$$scope:a}=e,u="",{class:c=""}=e,p=[],d=!1,h=0,{disabled:m=!1}=e,{icon:g=""}=e,{op:y=new Ro({api:!1,id:""})}=e;s();let{type:$=""}=e,E=g;function T(L){L&&n(10,h=new $t().toEpoch()),n(2,u=L?"spin":""),n(4,E=L?"spinner":g),n(9,d=L)}function K(L){_i.call(this,t,L)}return t.$$set=L=>{"class"in L&&n(6,c=L.class),"disabled"in L&&n(7,m=L.disabled),"icon"in L&&n(8,g=L.icon),"op"in L&&s(n(0,y=L.op)),"type"in L&&n(1,$=L.type),"$$scope"in L&&n(12,a=L.$$scope)},t.$$.update=()=>{t.$$.dirty&2048&&o.is("loading")&&T(!0),t.$$.dirty&3072&&(o.is("loading")||setTimeout(()=>T(!1),wm-(new $t().toEpoch()-h))),t.$$.dirty&320&&n(3,p=["btn","for-"+(g||"default")].concat(c)),t.$$.dirty&640&&n(5,i=m||d)},[y,$,u,p,E,i,c,m,g,d,h,o,a,l,K]}class pt extends Xe{constructor(e){super(),Qe(this,e,km,$m,Ze,{class:6,disabled:7,icon:8,op:0,type:1})}}const ym=t=>({}),cl=t=>({});function Sm(t){let e,n,i,o,r,s,l,a,u;r=new de({props:{family:"regular",name:t[7]}});const c=t[11].label,p=Gt(c,t,t[10],cl);return{c(){e=_("label"),n=_("input"),o=C(),G(r.$$.fragment),s=C(),p&&p.c(),k(n,"type","checkbox"),k(n,"id",t[5]),k(n,"name",t[4]),n.checked=i=!!t[0],n.disabled=t[2],k(e,"class","checkbox svelte-1qrm2b5"),e.hidden=t[3],He(e,"has-badge",t[1]),He(e,"has-focus",t[6]),He(e,"is-disabled",t[2])},m(d,h){w(d,e,h),f(e,n),f(e,o),q(r,e,null),f(e,s),p&&p.m(e,null),l=!0,a||(u=[Ce(n,"blur",t[12]),Ce(n,"change",t[13]),Ce(n,"focus",t[14])],a=!0)},p(d,[h]){(!l||h&32)&&k(n,"id",d[5]),(!l||h&16)&&k(n,"name",d[4]),(!l||h&1&&i!==(i=!!d[0]))&&(n.checked=i),(!l||h&4)&&(n.disabled=d[2]);const m={};h&128&&(m.name=d[7]),r.$set(m),p&&p.p&&(!l||h&1024)&&Yt(p,c,d,d[10],l?Kt(c,d[10],h,ym):Vt(d[10]),cl),(!l||h&8)&&(e.hidden=d[3]),(!l||h&2)&&He(e,"has-badge",d[1]),(!l||h&64)&&He(e,"has-focus",d[6]),(!l||h&4)&&He(e,"is-disabled",d[2])},i(d){l||(b(r.$$.fragment,d),b(p,d),l=!0)},o(d){S(r.$$.fragment,d),S(p,d),l=!1},d(d){d&&v(e),W(r),p&&p.d(d),a=!1,ht(u)}}}function Em(t,e,n){let i,o,{$$slots:r={},$$scope:s}=e,{badge:l=!1}=e,{disabled:a=!1}=e,{hidden:u=!1}=e,{icon:c="square"}=e,{name:p=""}=e,{id:d=p?"form_"+p:To()}=e,{value:h}=e,m=!1;const g=()=>{n(6,m=!1)},y=E=>{n(0,h=E.target.checked)},$=()=>{n(6,m=!0)};return t.$$set=E=>{"badge"in E&&n(1,l=E.badge),"disabled"in E&&n(2,a=E.disabled),"hidden"in E&&n(3,u=E.hidden),"icon"in E&&n(8,c=E.icon),"name"in E&&n(4,p=E.name),"id"in E&&n(5,d=E.id),"value"in E&&n(0,h=E.value),"$$scope"in E&&n(10,s=E.$$scope)},t.$$.update=()=>{t.$$.dirty&256&&n(9,i=c==="caret"?["caret-square-down","caret-square-up"]:["square","check-square"]),t.$$.dirty&513&&n(7,o=i[h?1:0])},[h,l,a,u,p,d,m,o,c,i,s,r,g,y,$]}class it extends Xe{constructor(e){super(),Qe(this,e,Em,Sm,Ze,{badge:1,disabled:2,hidden:3,icon:8,name:4,id:5,value:0})}}class gn{constructor(e="http://localhost"){this._url=new URL("http://localhost"),Object.defineProperty(this,"href",{get:()=>this._url.href.replace(/^http:/,this.protocol),set:n=>{this._url.href=n.replace(/^\w+:/,"http:"),this.protocol=n.match(/^\w+:/)[0]}}),["host","pathname","password","searchParams","username"].forEach(n=>{Object.defineProperty(this,n,{get:()=>this._url[n],set:i=>{this._url[n]=i}})}),this.href=e}fromFields(e){Pe.string(e.protocol)&&(this.protocol=e.protocol.replace(/:?$/,":")),Pe.string(e.host)&&(this.host=e.host),Pe.string(e.password)&&(this.password=encodeURIComponent(e.password)),Pe.string(e.username)&&(this.username=encodeURIComponent(e.username)),Pe.string(e.conversation_id)&&(this.pathname=encodeURIComponent(e.conversation_id));const n=this.searchParams;return Pe.string(e.local_address)&&n.append("local_address",e.local_address||""),Pe.string(e.nick)&&n.append("nick",e.nick.trim()),Pe.string(e.realname)&&e.realname.length&&n.append("realname",e.realname.trim()),Pe.string(e.sasl)&&n.append("sasl",e.sasl||"none"),n.append("tls",Pe.true(e.tls)?"1":"0"),n.append("tls_verify",Pe.true(e.tls)&&Pe.true(e.tls_verify)?"1":"0"),this}toFields(e={}){e.protocol=this.protocol.replace(/:$/,""),e.host=this.host,e.password=Pe.string(this.password)?decodeURIComponent(this.password):"",e.username=Pe.string(this.username)?decodeURIComponent(this.username):"",e.conversation_id=decodeURIComponent(this.pathname.split("/").filter(i=>i.length)[0]||"");const n=this.searchParams;return e.local_address=n.get("local_address")||e.local_address||"",e.nick=n.get("nick")||e.nick||"",e.realname=n.get("realname")||e.realname||"",e.sasl=n.get("sasl")||e.sasl||"none",e.realname=n.get("realname")||e.realname||"",e.tls=Pe.true(n.get("tls")),e.tls_verify=Pe.true(n.get("tls_verify")),e}toString(){return this.href.replace(/^http:/,this.protocol)}}function Cm(t){let e,n=t[4](t[1])+"",i,o,r;return{c(){e=_("div"),i=O(n),k(e,"class","success")},m(s,l){w(s,e,l),f(e,i),r=!0},p(s,l){(!r||l&18)&&n!==(n=s[4](s[1])+"")&&M(i,n)},i(s){r||(s&&at(()=>{r&&(o||(o=et(e,Bt,{},!0)),o.run(1))}),r=!0)},o(s){s&&(o||(o=et(e,Bt,{},!1)),o.run(0)),r=!1},d(s){s&&v(e),s&&o&&o.end()}}}function Am(t){let e,n=t[4](t[2].error())+"",i,o,r;return{c(){e=_("div"),i=O(n),k(e,"class","error")},m(s,l){w(s,e,l),f(e,i),r=!0},p(s,l){(!r||l&20)&&n!==(n=s[4](s[2].error())+"")&&M(i,n)},i(s){r||(s&&at(()=>{r&&(o||(o=et(e,Bt,{},!0)),o.run(1))}),r=!0)},o(s){s&&(o||(o=et(e,Bt,{},!1)),o.run(0)),r=!1},d(s){s&&v(e),s&&o&&o.end()}}}function Om(t){let e,n,i,o,r;const s=[Am,Cm],l=[];function a(u,c){return c&4&&(e=null),c&12&&(n=null),e==null&&(e=!!u[2].is("error")),e?0:(n==null&&(n=!!(u[2].is("success")&&u[3])),n?1:-1)}return~(i=a(t,-1))&&(o=l[i]=s[i](t)),{c(){o&&o.c(),r=ft()},m(u,c){~i&&l[i].m(u,c),w(u,r,c)},p(u,[c]){let p=i;i=a(u,c),i===p?~i&&l[i].p(u,c):(o&&(ke(),S(l[p],1,1,()=>{l[p]=null}),ye()),~i?(o=l[i],o?o.p(u,c):(o=l[i]=s[i](u),o.c()),b(o,1),o.m(r.parentNode,r)):o=null)},i(u){b(o)},o(u){S(o)},d(u){u&&v(r),~i&&l[i].d(u)}}}function Nm(t,e,n){let i,o=Oe,r=()=>(o(),o=_t(l,d=>n(2,i=d)),l),s;ve(t,lt,d=>n(4,s=d)),t.$$.on_destroy.push(()=>o());let{op:l=new Ro({})}=e;r();let{success:a="Saved."}=e,u=!1,c;Dr(()=>c&&clearTimeout(c));function p(d){if(!d.is("success"))return n(3,u=!1);u||(n(3,u=!0),c=setTimeout(()=>n(3,u=!1),2e3))}return t.$$set=d=>{"op"in d&&r(n(0,l=d.op)),"success"in d&&n(1,a=d.success)},t.$$.update=()=>{t.$$.dirty&4&&p(i)},[l,a,i,u,s]}class It extends Xe{constructor(e){super(),Qe(this,e,Nm,Om,Ze,{op:0,success:1})}}function fl(t,e,n){const i=t.slice();return i[26]=e[n],i[28]=n,i}const Tm=t=>({}),pl=t=>({});function Rm(t){let e;return{c(){e=O("Label")},m(n,i){w(n,e,i)},d(n){n&&v(e)}}}function dl(t){let e,n=(t[26].length>1?t[26][1]:t[26][0])+"",i,o,r,s;function l(){return t[20](t[28])}function a(){return t[21](t[28])}return{c(){e=_("a"),i=O(n),k(e,"href",o="#"+t[28]+":"+t[26][0]),k(e,"class","select-field__option"),k(e,"tabindex","-1"),He(e,"is-active",t[28]===t[8])},m(u,c){w(u,e,c),f(e,i),r||(s=[Ce(e,"click",st(t[13])),Ce(e,"focus",l),Ce(e,"mouseover",a)],r=!0)},p(u,c){t=u,c&512&&n!==(n=(t[26].length>1?t[26][1]:t[26][0])+"")&&M(i,n),c&512&&o!==(o="#"+t[28]+":"+t[26][0])&&k(e,"href",o),c&256&&He(e,"is-active",t[28]===t[8])},d(u){u&&v(e),r=!1,ht(s)}}}function Mm(t){let e,n,i,o,r,s,l,a,u,c,p;const d=t[17].label,h=Gt(d,t,t[16],pl),m=h||Rm();let g=xe(t[9]),y=[];for(let $=0;$<g.length;$+=1)y[$]=dl(fl(t,g,$));return{c(){e=_("div"),n=_("label"),m&&m.c(),i=C(),o=_("input"),r=C(),s=_("input"),l=C(),a=_("div");for(let $=0;$<y.length;$+=1)y[$].c();k(n,"for",t[3]),k(o,"type","hidden"),k(o,"name",t[2]),k(s,"type","text"),k(s,"id",t[3]),k(s,"autocomplete","off"),k(s,"placeholder",t[4]),s.readOnly=t[5],k(a,"class","select-field__options"),k(e,"class","select-field text-field"),e.hidden=t[1],He(e,"is-open",t[7]),He(e,"is-readonly",t[5])},m($,E){w($,e,E),f(e,n),m&&m.m(n,null),f(e,i),f(e,o),Ot(o,t[0]),f(e,r),f(e,s),t[19](s),f(e,l),f(e,a);for(let T=0;T<y.length;T+=1)y[T]&&y[T].m(a,null);u=!0,c||(p=[Ce(o,"input",t[18]),Ce(o,"keydown",t[11]),Ce(s,"blur",t[10]),Ce(s,"keydown",t[11]),Ce(s,"keyup",t[12]),Ce(s,"click",st(t[13]))],c=!0)},p($,[E]){if(h&&h.p&&(!u||E&65536)&&Yt(h,d,$,$[16],u?Kt(d,$[16],E,Tm):Vt($[16]),pl),(!u||E&8)&&k(n,"for",$[3]),(!u||E&4)&&k(o,"name",$[2]),E&1&&Ot(o,$[0]),(!u||E&8)&&k(s,"id",$[3]),(!u||E&16)&&k(s,"placeholder",$[4]),(!u||E&32)&&(s.readOnly=$[5]),E&8960){g=xe($[9]);let T;for(T=0;T<g.length;T+=1){const K=fl($,g,T);y[T]?y[T].p(K,E):(y[T]=dl(K),y[T].c(),y[T].m(a,null))}for(;T<y.length;T+=1)y[T].d(1);y.length=g.length}(!u||E&2)&&(e.hidden=$[1]),(!u||E&128)&&He(e,"is-open",$[7]),(!u||E&32)&&He(e,"is-readonly",$[5])},i($){u||(b(m,$),u=!0)},o($){S(m,$),u=!1},d($){$&&v(e),m&&m.d($),t[19](null),kt(y,$),c=!1,ht(p)}}}function Im(t,e,n){let{$$slots:i={},$$scope:o}=e,r=0,s,l=!1,a="",u=[],{hidden:c=!1}=e,{name:p=""}=e,{id:d=p?"form_"+p:To()}=e,{options:h}=e,{placeholder:m=""}=e,{readonly:g=!1}=e,{value:y}=e;const $=["ArrowDown","ArrowUp","Enter"];function E(){setTimeout(()=>document.activeElement.closest(".select-field__option")||n(7,l=!1),100),I(y)}function T(H,J){let D=new RegExp("(?:^|\\s|-)"+vi(J),"i"),P=H.filter(N=>String(N[0])===J);P.length||(P=H.filter(N=>N[0].match(D)));for(let N=0;N<H.length;N++){const Z=H[N];Z.length>1&&P.indexOf(Z)===-1&&Z[1].match(D)&&P.push(Z)}n(8,r=0),n(9,u=P)}function K(H){if($.indexOf(H.key)!==-1&&H.preventDefault(),H.key==="Tab"){l&&A(H);return}if(!l)return z(H);H.key==="ArrowDown"&&n(8,r++,r),H.key==="ArrowUp"&&n(8,r--,r),H.key==="Enter"&&A(H),r>=h.length&&n(8,r=0),r<0&&n(8,r=h.length-1)}function L(H){(H.key.length===1||H.key==="Backspace")&&n(15,a=s.value)}function A(H){let J;if(H.type==="keydown")J=u.length&&u[r]||h.filter(D=>D[0]===y)[0];else{const D=kr(H.target,".select-field__option").href.replace(/^.*?#\d+:/,"");J=u.filter(P=>String(P[0])===D)[0]||[]}(!J||!J.length)&&(J=[""]),n(0,y=J[0]),n(7,l=!1)}function I(H){const J=u.filter(D=>String(D[0])===H)[0]||[];n(6,s.value=J.length>1?J[1]:J.length?J[0]:H,s)}function z(H){if(g)return;const J=H&&H.target&&kr(H.target,".select-field__option");return l||(n(8,r=u.map(D=>D[0]).indexOf(y)),s.setSelectionRange(0,9999)),J?A(H):n(7,l=!l)}function F(){y=this.value,n(0,y)}function V(H){fe[H?"unshift":"push"](()=>{s=H,n(6,s),n(14,h),n(0,y)})}const j=H=>{n(8,r=H)},B=H=>{n(8,r=H)};return t.$$set=H=>{"hidden"in H&&n(1,c=H.hidden),"name"in H&&n(2,p=H.name),"id"in H&&n(3,d=H.id),"options"in H&&n(14,h=H.options),"placeholder"in H&&n(4,m=H.placeholder),"readonly"in H&&n(5,g=H.readonly),"value"in H&&n(0,y=H.value),"$$scope"in H&&n(16,o=H.$$scope)},t.$$.update=()=>{if(t.$$.dirty&128&&l===!1&&n(15,a=""),t.$$.dirty&49152&&T(h,a),t.$$.dirty&16449&&s&&!s.value&&s!==document.activeElement){const H=h.find(J=>J[0]===y);H&&n(6,s.value=H[1]||H[0],s)}t.$$.dirty&65&&s&&I(y)},[y,c,p,d,m,g,s,l,r,u,E,K,L,z,h,a,o,i,F,V,j,B]}class oi extends Xe{constructor(e){super(),Qe(this,e,Im,Mm,Ze,{hidden:1,name:2,id:3,options:14,placeholder:4,readonly:5,value:0})}}const Lm=t=>({}),hl=t=>({});function Pm(t){let e;return{c(){e=O("Label")},m(n,i){w(n,e,i)},d(n){n&&v(e)}}}function Dm(t){let e,n,i,o,r,s,l;const a=t[7].label,u=Gt(a,t,t[6],hl),c=u||Pm();return{c(){e=_("div"),n=_("label"),c&&c.c(),i=C(),o=_("textarea"),k(n,"for",t[3]),k(o,"id",t[3]),k(o,"name",t[2]),k(o,"placeholder",t[4]),o.readOnly=t[5],k(e,"class","text-area"),e.hidden=t[1]},m(p,d){w(p,e,d),f(e,n),c&&c.m(n,null),f(e,i),f(e,o),Ot(o,t[0]),r=!0,s||(l=Ce(o,"input",t[8]),s=!0)},p(p,[d]){u&&u.p&&(!r||d&64)&&Yt(u,a,p,p[6],r?Kt(a,p[6],d,Lm):Vt(p[6]),hl),(!r||d&8)&&k(n,"for",p[3]),(!r||d&8)&&k(o,"id",p[3]),(!r||d&4)&&k(o,"name",p[2]),(!r||d&16)&&k(o,"placeholder",p[4]),(!r||d&32)&&(o.readOnly=p[5]),d&1&&Ot(o,p[0]),(!r||d&2)&&(e.hidden=p[1])},i(p){r||(b(c,p),r=!0)},o(p){S(c,p),r=!1},d(p){p&&v(e),c&&c.d(p),s=!1,l()}}}function Um(t,e,n){let{$$slots:i={},$$scope:o}=e,{hidden:r=!1}=e,{name:s=""}=e,{id:l=s?"form_"+s:To()}=e,{placeholder:a=""}=e,{readonly:u=!1}=e,{value:c}=e;function p(){c=this.value,n(0,c)}return t.$$set=d=>{"hidden"in d&&n(1,r=d.hidden),"name"in d&&n(2,s=d.name),"id"in d&&n(3,l=d.id),"placeholder"in d&&n(4,a=d.placeholder),"readonly"in d&&n(5,u=d.readonly),"value"in d&&n(0,c=d.value),"$$scope"in d&&n(6,o=d.$$scope)},[c,r,s,l,a,u,o,i,p]}class xu extends Xe{constructor(e){super(),Qe(this,e,Um,Dm,Ze,{hidden:1,name:2,id:3,placeholder:4,readonly:5,value:0})}}const Bm=t=>({}),ml=t=>({}),Fm=t=>({}),_l=t=>({});function jm(t){let e;return{c(){e=O("Label")},m(n,i){w(n,e,i)},d(n){n&&v(e)}}}function gl(t){let e,n,i,o,r;return n=new de({props:{name:t[8]?"eye-slash":"eye"}}),{c(){e=_("a"),G(n.$$.fragment),k(e,"href","#toggle"),k(e,"class","text-field__toggle")},m(s,l){w(s,e,l),q(n,e,null),i=!0,o||(r=Ce(e,"click",st(t[13])),o=!0)},p(s,l){const a={};l&256&&(a.name=s[8]?"eye-slash":"eye"),n.$set(a)},i(s){i||(b(n.$$.fragment,s),i=!0)},o(s){S(n.$$.fragment,s),i=!1},d(s){s&&v(e),W(n),o=!1,r()}}}function zm(t){let e,n,i,o,r,s,l,a,u,c;const p=t[11].label,d=Gt(p,t,t[10],_l),h=d||jm();let m=t[7]==="password"&&!t[6]&&gl(t);const g=t[11].help,y=Gt(g,t,t[10],ml);return{c(){e=_("div"),n=_("label"),h&&h.c(),i=C(),o=_("input"),s=C(),m&&m.c(),l=C(),y&&y.c(),k(n,"for",t[4]),k(o,"type",r=t[8]?"text":t[7]),k(o,"id",t[4]),k(o,"name",t[3]),k(o,"autocomplete",t[1]),k(o,"placeholder",t[5]),o.readOnly=t[6],o.value=t[0],k(e,"class","text-field"),e.hidden=t[2],He(e,"has-password",t[7]==="password")},m($,E){w($,e,E),f(e,n),h&&h.m(n,null),f(e,i),f(e,o),f(e,s),m&&m.m(e,null),w($,l,E),y&&y.m($,E),a=!0,u||(c=[Ce(o,"input",t[9]),Ce(o,"keyup",t[12])],u=!0)},p($,[E]){d&&d.p&&(!a||E&1024)&&Yt(d,p,$,$[10],a?Kt(p,$[10],E,Fm):Vt($[10]),_l),(!a||E&16)&&k(n,"for",$[4]),(!a||E&384&&r!==(r=$[8]?"text":$[7]))&&k(o,"type",r),(!a||E&16)&&k(o,"id",$[4]),(!a||E&8)&&k(o,"name",$[3]),(!a||E&2)&&k(o,"autocomplete",$[1]),(!a||E&32)&&k(o,"placeholder",$[5]),(!a||E&64)&&(o.readOnly=$[6]),(!a||E&1&&o.value!==$[0])&&(o.value=$[0]),$[7]==="password"&&!$[6]?m?(m.p($,E),E&192&&b(m,1)):(m=gl($),m.c(),b(m,1),m.m(e,null)):m&&(ke(),S(m,1,1,()=>{m=null}),ye()),(!a||E&4)&&(e.hidden=$[2]),(!a||E&128)&&He(e,"has-password",$[7]==="password"),y&&y.p&&(!a||E&1024)&&Yt(y,g,$,$[10],a?Kt(g,$[10],E,Bm):Vt($[10]),ml)},i($){a||(b(h,$),b(m),b(y,$),a=!0)},o($){S(h,$),S(m),S(y,$),a=!1},d($){$&&(v(e),v(l)),h&&h.d($),m&&m.d(),y&&y.d($),u=!1,ht(c)}}}function Hm(t,e,n){let{$$slots:i={},$$scope:o}=e,r=!1,{autocomplete:s=null}=e,{hidden:l=!1}=e,{name:a=""}=e,{id:u=a?"form_"+a:To()}=e,{placeholder:c=""}=e,{readonly:p=!1}=e,{type:d="text"}=e,{value:h}=e;function m($){n(0,h=d.match(/^(number|range)$/)?parseInt($.target.value,10):$.target.value)}function g($){_i.call(this,t,$)}const y=()=>{n(8,r=!r)};return t.$$set=$=>{"autocomplete"in $&&n(1,s=$.autocomplete),"hidden"in $&&n(2,l=$.hidden),"name"in $&&n(3,a=$.name),"id"in $&&n(4,u=$.id),"placeholder"in $&&n(5,c=$.placeholder),"readonly"in $&&n(6,p=$.readonly),"type"in $&&n(7,d=$.type),"value"in $&&n(0,h=$.value),"$$scope"in $&&n(10,o=$.$$scope)},[h,s,l,a,u,c,p,d,r,m,o,i,g,y]}class Je extends Xe{constructor(e){super(),Qe(this,e,Hm,zm,Ze,{autocomplete:1,hidden:2,name:3,id:4,placeholder:5,readonly:6,type:7,value:0})}}function qm(t){let e,n=t[5]("Host and port")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Host and port")+"")&&M(i,n)},d(o){o&&v(e)}}}function Wm(t){let e,n=t[5]("You cannot create custom connections.")+"",i;return{c(){e=_("p"),i=O(n),k(e,"class","help"),k(e,"slot","help"),e.hidden=!t[7].forced_connection},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("You cannot create custom connections.")+"")&&M(i,n)},d(o){o&&v(e)}}}function Gm(t){let e,n=t[5]("Nickname")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Nickname")+"")&&M(i,n)},d(o){o&&v(e)}}}function Km(t){let e,n=t[5]("Your name")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Your name")+"")&&M(i,n)},d(o){o&&v(e)}}}function Ym(t){let e,n,i;function o(s){t[19](s)}let r={name:"conversation_id",placeholder:t[5]("Ex: #convos"),$$slots:{label:[Zm]},$$scope:{ctx:t}};return t[2].conversation_id!==void 0&&(r.value=t[2].conversation_id),e=new Je({props:r}),fe.push(()=>me(e,"value",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};l[0]&32&&(a.placeholder=s[5]("Ex: #convos")),l[0]&32|l[1]&4&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&4&&(n=!0,a.value=s[2].conversation_id,he(()=>n=!1)),e.$set(a)},i(s){i||(b(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function Vm(t){let e,n,i;function o(s){t[18](s)}let r={name:"want_to_be_connected",$$slots:{label:[Jm]},$$scope:{ctx:t}};return t[2].want_to_be_connected!==void 0&&(r.value=t[2].want_to_be_connected),e=new it({props:r}),fe.push(()=>me(e,"value",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};l[0]&32|l[1]&4&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&4&&(n=!0,a.value=s[2].want_to_be_connected,he(()=>n=!1)),e.$set(a)},i(s){i||(b(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function Zm(t){let e,n=t[5]("Conversation name")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Conversation name")+"")&&M(i,n)},d(o){o&&v(e)}}}function Jm(t){let e,n=t[5]("Want to be connected")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Want to be connected")+"")&&M(i,n)},d(o){o&&v(e)}}}function Qm(t){let e,n=t[5]("Secure connection (TLS)")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Secure connection (TLS)")+"")&&M(i,n)},d(o){o&&v(e)}}}function Xm(t){let e,n=t[5]("Verify certificate (TLS)")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Verify certificate (TLS)")+"")&&M(i,n)},d(o){o&&v(e)}}}function xm(t){let e,n=t[5]("Advanced settings")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Advanced settings")+"")&&M(i,n)},d(o){o&&v(e)}}}function bl(t){let e,n,i,o,r,s;function l(c){t[23](c)}let a={name:"on_connect_commands",placeholder:t[5]("Put each command on a new line."),$$slots:{label:[e_]},$$scope:{ctx:t}};t[2].on_connect_commands!==void 0&&(a.value=t[2].on_connect_commands),n=new xu({props:a}),fe.push(()=>me(n,"value",l));let u=!t[7].forced_connection&&t_(t);return{c(){e=_("div"),G(n.$$.fragment),o=C(),u&&u.c(),k(e,"class","form-group")},m(c,p){w(c,e,p),q(n,e,null),f(e,o),u&&u.m(e,null),s=!0},p(c,p){const d={};p[0]&32&&(d.placeholder=c[5]("Put each command on a new line.")),p[0]&32|p[1]&4&&(d.$$scope={dirty:p,ctx:c}),!i&&p[0]&4&&(i=!0,d.value=c[2].on_connect_commands,he(()=>i=!1)),n.$set(d),c[7].forced_connection||u.p(c,p)},i(c){s||(b(n.$$.fragment,c),b(u),c&&at(()=>{s&&(r||(r=et(e,Jt,{duration:150},!0)),r.run(1))}),s=!0)},o(c){S(n.$$.fragment,c),S(u),c&&(r||(r=et(e,Jt,{duration:150},!1)),r.run(0)),s=!1},d(c){c&&v(e),W(n),u&&u.d(),c&&r&&r.end()}}}function e_(t){let e,n=t[5]("On-connect commands")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("On-connect commands")+"")&&M(i,n)},d(o){o&&v(e)}}}function t_(t){let e,n,i;function o(s){t[24](s)}let r={name:"local_address",$$slots:{help:[i_],label:[n_]},$$scope:{ctx:t}};return t[2].local_address!==void 0&&(r.value=t[2].local_address),e=new Je({props:r}),fe.push(()=>me(e,"value",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};l[0]&32|l[1]&4&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&4&&(n=!0,a.value=s[2].local_address,he(()=>n=!1)),e.$set(a)},i(s){i||(b(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function n_(t){let e,n=t[5]("Source IP")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Source IP")+"")&&M(i,n)},d(o){o&&v(e)}}}function i_(t){let e,n=t[5]("Leave this blank, unless you know what you are doing.")+"",i;return{c(){e=_("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Leave this blank, unless you know what you are doing.")+"")&&M(i,n)},d(o){o&&v(e)}}}function o_(t){let e,n,i,o,r;function s(u){t[25](u)}let l={icon:"caret",name:"show_auth_settings",$$slots:{label:[r_]},$$scope:{ctx:t}};t[4]!==void 0&&(l.value=t[4]),e=new it({props:l}),fe.push(()=>me(e,"value",s));let a=t[4]&&vl(t);return{c(){G(e.$$.fragment),i=C(),a&&a.c(),o=ft()},m(u,c){q(e,u,c),w(u,i,c),a&&a.m(u,c),w(u,o,c),r=!0},p(u,c){const p={};c[0]&32|c[1]&4&&(p.$$scope={dirty:c,ctx:u}),!n&&c[0]&16&&(n=!0,p.value=u[4],he(()=>n=!1)),e.$set(p),u[4]?a?(a.p(u,c),c[0]&16&&b(a,1)):(a=vl(u),a.c(),b(a,1),a.m(o.parentNode,o)):a&&(ke(),S(a,1,1,()=>{a=null}),ye())},i(u){r||(b(e.$$.fragment,u),b(a),r=!0)},o(u){S(e.$$.fragment,u),S(a),r=!1},d(u){u&&(v(i),v(o)),W(e,u),a&&a.d(u)}}}function r_(t){let e,n=t[5]("Authentication settings")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Authentication settings")+"")&&M(i,n)},d(o){o&&v(e)}}}function vl(t){let e,n,i,o,r,s,l,a,u,c,p;function d(T){t[26](T)}let h={name:"username",placeholder:t[2].nick,$$slots:{help:[l_],label:[s_]},$$scope:{ctx:t}};t[2].username!==void 0&&(h.value=t[2].username),n=new Je({props:h}),fe.push(()=>me(n,"value",d));const m=[u_,a_],g=[];function y(T,K){return T[2].sasl==="external"?0:1}r=y(t),s=g[r]=m[r](t);function $(T){t[29](T)}let E={name:"sasl",options:t[8],$$slots:{label:[h_]},$$scope:{ctx:t}};return t[2].sasl!==void 0&&(E.value=t[2].sasl),a=new oi({props:E}),fe.push(()=>me(a,"value",$)),{c(){e=_("div"),G(n.$$.fragment),o=C(),s.c(),l=C(),G(a.$$.fragment),k(e,"class","form-group")},m(T,K){w(T,e,K),q(n,e,null),f(e,o),g[r].m(e,null),f(e,l),q(a,e,null),p=!0},p(T,K){const L={};K[0]&4&&(L.placeholder=T[2].nick),K[0]&32|K[1]&4&&(L.$$scope={dirty:K,ctx:T}),!i&&K[0]&4&&(i=!0,L.value=T[2].username,he(()=>i=!1)),n.$set(L);let A=r;r=y(T),r===A?g[r].p(T,K):(ke(),S(g[A],1,1,()=>{g[A]=null}),ye(),s=g[r],s?s.p(T,K):(s=g[r]=m[r](T),s.c()),b(s,1),s.m(e,l));const I={};K[0]&32|K[1]&4&&(I.$$scope={dirty:K,ctx:T}),!u&&K[0]&4&&(u=!0,I.value=T[2].sasl,he(()=>u=!1)),a.$set(I)},i(T){p||(b(n.$$.fragment,T),b(s),b(a.$$.fragment,T),T&&at(()=>{p&&(c||(c=et(e,Jt,{duration:150},!0)),c.run(1))}),p=!0)},o(T){S(n.$$.fragment,T),S(s),S(a.$$.fragment,T),T&&(c||(c=et(e,Jt,{duration:150},!1)),c.run(0)),p=!1},d(T){T&&v(e),W(n),g[r].d(),W(a),T&&c&&c.end()}}}function s_(t){let e,n=t[5]("Username")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Username")+"")&&M(i,n)},d(o){o&&v(e)}}}function l_(t){let e,n=t[5]("SASL and IRC server username.")+"",i;return{c(){e=_("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("SASL and IRC server username.")+"")&&M(i,n)},d(o){o&&v(e)}}}function a_(t){let e,n,i;function o(s){t[28](s)}let r={type:"password",name:"password",$$slots:{help:[f_],label:[c_]},$$scope:{ctx:t}};return t[2].password!==void 0&&(r.value=t[2].password),e=new Je({props:r}),fe.push(()=>me(e,"value",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};l[0]&32|l[1]&4&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&4&&(n=!0,a.value=s[2].password,he(()=>n=!1)),e.$set(a)},i(s){i||(b(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function u_(t){let e,n,i;function o(s){t[27](s)}let r={type:"text",name:"fingerprint",readonly:!0,$$slots:{help:[d_],label:[p_]},$$scope:{ctx:t}};return t[2].fingerprint!==void 0&&(r.value=t[2].fingerprint),e=new Je({props:r}),fe.push(()=>me(e,"value",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};l[0]&32|l[1]&4&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&4&&(n=!0,a.value=s[2].fingerprint,he(()=>n=!1)),e.$set(a)},i(s){i||(b(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function c_(t){let e,n=t[5]("Password")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Password")+"")&&M(i,n)},d(o){o&&v(e)}}}function f_(t){let e,n=t[5]("SASL plain or IRC server password.")+"",i;return{c(){e=_("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("SASL plain or IRC server password.")+"")&&M(i,n)},d(o){o&&v(e)}}}function p_(t){let e,n=t[5]("Fingerprint")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Fingerprint")+"")&&M(i,n)},d(o){o&&v(e)}}}function d_(t){let e,n=t[5]("The certificate fingerprint is used for SASL external authentication.")+"",i;return{c(){e=_("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("The certificate fingerprint is used for SASL external authentication.")+"")&&M(i,n)},d(o){o&&v(e)}}}function h_(t){let e,n=t[5]("SASL authentication mechanism")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("SASL authentication mechanism")+"")&&M(i,n)},d(o){o&&v(e)}}}function m_(t){let e,n;return e=new pt({props:{icon:"plus-circle",op:t[9],$$slots:{default:[g_]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o[0]&32|o[1]&4&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(b(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function __(t){let e,n;return e=new pt({props:{icon:"save",op:t[11],$$slots:{default:[b_]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o[0]&32|o[1]&4&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(b(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function g_(t){let e,n=t[5]("Add")+"",i;return{c(){e=_("span"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Add")+"")&&M(i,n)},d(o){o&&v(e)}}}function b_(t){let e,n=t[5]("Update")+"",i;return{c(){e=_("span"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Update")+"")&&M(i,n)},d(o){o&&v(e)}}}function $l(t){let e,n=t[5]("Delete")+"",i,o,r,s=t[5]("This will permanently remove chat logs and other connection related data.")+"",l,a,u,c=t[6]('Please confirm by entering "**%1**" before hitting **%2**.',t[0].connection_id,t[5]("Delete"))+"",p,d,h,m,g,y,$,E,T;function K(A){t[30](A)}let L={name:"confirm_connection_id",$$slots:{label:[v_]},$$scope:{ctx:t}};return t[1]!==void 0&&(L.value=t[1]),d=new Je({props:L}),fe.push(()=>me(d,"value",K)),y=new pt({props:{icon:"trash",op:t[10],disabled:t[1]!==t[0].connection_id,$$slots:{default:[$_]},$$scope:{ctx:t}}}),y.$on("click",t[12]),E=new It({props:{op:t[10],success:"Deleted."}}),{c(){e=_("h3"),i=O(n),o=C(),r=_("p"),l=O(s),a=C(),u=new At(!1),p=C(),G(d.$$.fragment),m=C(),g=_("div"),G(y.$$.fragment),$=C(),G(E.$$.fragment),u.a=null,k(g,"class","form-actions")},m(A,I){w(A,e,I),f(e,i),w(A,o,I),w(A,r,I),f(r,l),f(r,a),u.m(c,r),w(A,p,I),q(d,A,I),w(A,m,I),w(A,g,I),q(y,g,null),w(A,$,I),q(E,A,I),T=!0},p(A,I){(!T||I[0]&32)&&n!==(n=A[5]("Delete")+"")&&M(i,n),(!T||I[0]&32)&&s!==(s=A[5]("This will permanently remove chat logs and other connection related data.")+"")&&M(l,s),(!T||I[0]&97)&&c!==(c=A[6]('Please confirm by entering "**%1**" before hitting **%2**.',A[0].connection_id,A[5]("Delete"))+"")&&u.p(c);const z={};I[0]&32|I[1]&4&&(z.$$scope={dirty:I,ctx:A}),!h&&I[0]&2&&(h=!0,z.value=A[1],he(()=>h=!1)),d.$set(z);const F={};I[0]&3&&(F.disabled=A[1]!==A[0].connection_id),I[0]&32|I[1]&4&&(F.$$scope={dirty:I,ctx:A}),y.$set(F)},i(A){T||(b(d.$$.fragment,A),b(y.$$.fragment,A),b(E.$$.fragment,A),T=!0)},o(A){S(d.$$.fragment,A),S(y.$$.fragment,A),S(E.$$.fragment,A),T=!1},d(A){A&&(v(e),v(o),v(r),v(p),v(m),v(g),v($)),W(d,A),W(y),W(E,A)}}}function v_(t){let e,n=t[5]("Confirm connection ID")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Confirm connection ID")+"")&&M(i,n)},d(o){o&&v(e)}}}function $_(t){let e,n=t[5]("Delete")+"",i;return{c(){e=_("span"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Delete")+"")&&M(i,n)},d(o){o&&v(e)}}}function w_(t){let e,n,i,o,r,s,l,a,u,c,p,d,h,m,g,y,$,E,T,K,L,A,I,z,F,V,j,B,H,J,D,P,N,Z,Y;function U(te){t[15](te)}let R={name:"host",placeholder:t[5]("Ex: irc.libera.chat:6697"),readonly:t[7].forced_connection,$$slots:{help:[Wm],label:[qm]},$$scope:{ctx:t}};t[2].host!==void 0&&(R.value=t[2].host),n=new Je({props:R}),fe.push(()=>me(n,"value",U));function x(te){t[16](te)}let le={name:"nick",placeholder:t[5]("Ex: superman"),$$slots:{label:[Gm]},$$scope:{ctx:t}};t[2].nick!==void 0&&(le.value=t[2].nick),r=new Je({props:le}),fe.push(()=>me(r,"value",x));function ge(te){t[17](te)}let oe={name:"realname",placeholder:t[5]("Ex: Clark Kent"),$$slots:{label:[Km]},$$scope:{ctx:t}};t[2].realname!==void 0&&(oe.value=t[2].realname),a=new Je({props:oe}),fe.push(()=>me(a,"value",ge));const Se=[Vm,Ym],Re=[];function ae(te,ce){return te[0].connection_id?0:1}p=ae(t),d=Re[p]=Se[p](t);function we(te){t[20](te)}let Ue={name:"tls",$$slots:{label:[Qm]},$$scope:{ctx:t}};t[2].tls!==void 0&&(Ue.value=t[2].tls),m=new it({props:Ue}),fe.push(()=>me(m,"value",we));function je(te){t[21](te)}let De={name:"tls_verify",disabled:!t[2].tls,hidden:!t[2].tls,$$slots:{label:[Xm]},$$scope:{ctx:t}};t[2].tls_verify!==void 0&&(De.value=t[2].tls_verify),$=new it({props:De}),fe.push(()=>me($,"value",je));function Ne(te){t[22](te)}let ze={icon:"caret",name:"show_advanced_settings",$$slots:{label:[xm]},$$scope:{ctx:t}};t[3]!==void 0&&(ze.value=t[3]),K=new it({props:ze}),fe.push(()=>me(K,"value",Ne));let ee=t[3]&&bl(t),ue=!t[7].forced_connection&&o_(t);const qe=[__,m_],Te=[];function be(te,ce){return te[0].connection_id?0:1}V=be(t),j=Te[V]=qe[V](t),H=new It({props:{op:t[9]}}),D=new It({props:{op:t[11]}});let Ae=t[0].connection_id&&$l(t);return{c(){e=_("form"),G(n.$$.fragment),o=C(),G(r.$$.fragment),l=C(),G(a.$$.fragment),c=C(),d.c(),h=C(),G(m.$$.fragment),y=C(),G($.$$.fragment),T=C(),G(K.$$.fragment),A=C(),ee&&ee.c(),I=C(),ue&&ue.c(),z=C(),F=_("div"),j.c(),B=C(),G(H.$$.fragment),J=C(),G(D.$$.fragment),P=C(),Ae&&Ae.c(),k(F,"class","form-actions"),k(e,"method","post")},m(te,ce){w(te,e,ce),q(n,e,null),f(e,o),q(r,e,null),f(e,l),q(a,e,null),f(e,c),Re[p].m(e,null),f(e,h),q(m,e,null),f(e,y),q($,e,null),f(e,T),q(K,e,null),f(e,A),ee&&ee.m(e,null),f(e,I),ue&&ue.m(e,null),f(e,z),f(e,F),Te[V].m(F,null),f(e,B),q(H,e,null),f(e,J),q(D,e,null),f(e,P),Ae&&Ae.m(e,null),N=!0,Z||(Y=Ce(e,"submit",st(t[13])),Z=!0)},p(te,ce){const $e={};ce[0]&32&&($e.placeholder=te[5]("Ex: irc.libera.chat:6697")),ce[0]&32|ce[1]&4&&($e.$$scope={dirty:ce,ctx:te}),!i&&ce[0]&4&&(i=!0,$e.value=te[2].host,he(()=>i=!1)),n.$set($e);const re={};ce[0]&32&&(re.placeholder=te[5]("Ex: superman")),ce[0]&32|ce[1]&4&&(re.$$scope={dirty:ce,ctx:te}),!s&&ce[0]&4&&(s=!0,re.value=te[2].nick,he(()=>s=!1)),r.$set(re);const _e={};ce[0]&32&&(_e.placeholder=te[5]("Ex: Clark Kent")),ce[0]&32|ce[1]&4&&(_e.$$scope={dirty:ce,ctx:te}),!u&&ce[0]&4&&(u=!0,_e.value=te[2].realname,he(()=>u=!1)),a.$set(_e);let Le=p;p=ae(te),p===Le?Re[p].p(te,ce):(ke(),S(Re[Le],1,1,()=>{Re[Le]=null}),ye(),d=Re[p],d?d.p(te,ce):(d=Re[p]=Se[p](te),d.c()),b(d,1),d.m(e,h));const X={};ce[0]&32|ce[1]&4&&(X.$$scope={dirty:ce,ctx:te}),!g&&ce[0]&4&&(g=!0,X.value=te[2].tls,he(()=>g=!1)),m.$set(X);const Q={};ce[0]&4&&(Q.disabled=!te[2].tls),ce[0]&4&&(Q.hidden=!te[2].tls),ce[0]&32|ce[1]&4&&(Q.$$scope={dirty:ce,ctx:te}),!E&&ce[0]&4&&(E=!0,Q.value=te[2].tls_verify,he(()=>E=!1)),$.$set(Q);const ne={};ce[0]&32|ce[1]&4&&(ne.$$scope={dirty:ce,ctx:te}),!L&&ce[0]&8&&(L=!0,ne.value=te[3],he(()=>L=!1)),K.$set(ne),te[3]?ee?(ee.p(te,ce),ce[0]&8&&b(ee,1)):(ee=bl(te),ee.c(),b(ee,1),ee.m(e,I)):ee&&(ke(),S(ee,1,1,()=>{ee=null}),ye()),te[7].forced_connection||ue.p(te,ce);let ie=V;V=be(te),V===ie?Te[V].p(te,ce):(ke(),S(Te[ie],1,1,()=>{Te[ie]=null}),ye(),j=Te[V],j?j.p(te,ce):(j=Te[V]=qe[V](te),j.c()),b(j,1),j.m(F,null)),te[0].connection_id?Ae?(Ae.p(te,ce),ce[0]&1&&b(Ae,1)):(Ae=$l(te),Ae.c(),b(Ae,1),Ae.m(e,null)):Ae&&(ke(),S(Ae,1,1,()=>{Ae=null}),ye())},i(te){N||(b(n.$$.fragment,te),b(r.$$.fragment,te),b(a.$$.fragment,te),b(d),b(m.$$.fragment,te),b($.$$.fragment,te),b(K.$$.fragment,te),b(ee),b(ue),b(j),b(H.$$.fragment,te),b(D.$$.fragment,te),b(Ae),N=!0)},o(te){S(n.$$.fragment,te),S(r.$$.fragment,te),S(a.$$.fragment,te),S(d),S(m.$$.fragment,te),S($.$$.fragment,te),S(K.$$.fragment,te),S(ee),S(ue),S(j),S(H.$$.fragment,te),S(D.$$.fragment,te),S(Ae),N=!1},d(te){te&&v(e),W(n),W(r),W(a),Re[p].d(),W(m),W($),W(K),ee&&ee.d(),ue&&ue.d(),Te[V].d(),W(H),W(D),Ae&&Ae.d(),Z=!1,Y()}}}function k_(t,e,n){let i,o;ve(t,lt,U=>n(5,i=U)),ve(t,jt,U=>n(6,o=U));let{connection:r={}}=e,{is_page:s=!1}=e;const l=gt("user"),a=[["none","None"],["plain","Plain"],["external","External"]],u=nt.op("createConnection"),c=nt.op("removeConnection"),p=nt.op("updateConnection");let d="",h={},m=!1,g=!1;function y(U){const R=U.url?U.url.toFields():{};Pe.array(U.on_connect_commands)&&(R.on_connect_commands=U.on_connect_commands.join(`
`)),R.nick||(R.nick=l.email.replace(/@.*/,"").replace(/\W/g,"_")),R.want_to_be_connected=U.wanted_state!=="disconnected",n(2,h={...h,...R,fingerprint:U.certificate.fingerprint||""})}function $(){const U=new gn(Ie.query.uri||l.default_connection||"irc://localhost").toFields();l.connections.size&&!Ie.query.uri&&(U.host=""),U.nick||(U.nick=l.email.replace(/@.*/,"").replace(/\W/g,"_")),n(2,h={...h,...U,want_to_be_connected:!0})}async function E(){await c.perform(r),l.removeConversation(r),Ie.go("/settings/connections")}async function T(){if(n(2,h.on_connect_commands=(h.on_connect_commands||"").split(/\n\r?/).filter(U=>U.length),h),n(2,h.url=new gn("irc://localhost").fromFields(h).toString(),h),r.connection_id)n(2,h.connection_id=r.connection_id,h),n(2,h.wanted_state=h.want_to_be_connected?"connected":"disconnected",h),await p.perform(h),n(0,r=l.ensureConversation(p.res.body)),y(r);else{await u.perform(h);const U=u.res.body;U.connection_id&&Ie.go(l.ensureConversation(U).path)}s&&Ie.go("/settings/connections")}function K(U){t.$$.not_equal(h.host,U)&&(h.host=U,n(2,h))}function L(U){t.$$.not_equal(h.nick,U)&&(h.nick=U,n(2,h))}function A(U){t.$$.not_equal(h.realname,U)&&(h.realname=U,n(2,h))}function I(U){t.$$.not_equal(h.want_to_be_connected,U)&&(h.want_to_be_connected=U,n(2,h))}function z(U){t.$$.not_equal(h.conversation_id,U)&&(h.conversation_id=U,n(2,h))}function F(U){t.$$.not_equal(h.tls,U)&&(h.tls=U,n(2,h))}function V(U){t.$$.not_equal(h.tls_verify,U)&&(h.tls_verify=U,n(2,h))}function j(U){m=U,n(3,m)}function B(U){t.$$.not_equal(h.on_connect_commands,U)&&(h.on_connect_commands=U,n(2,h))}function H(U){t.$$.not_equal(h.local_address,U)&&(h.local_address=U,n(2,h))}function J(U){g=U,n(4,g)}function D(U){t.$$.not_equal(h.username,U)&&(h.username=U,n(2,h))}function P(U){t.$$.not_equal(h.fingerprint,U)&&(h.fingerprint=U,n(2,h))}function N(U){t.$$.not_equal(h.password,U)&&(h.password=U,n(2,h))}function Z(U){t.$$.not_equal(h.sasl,U)&&(h.sasl=U,n(2,h))}function Y(U){d=U,n(1,d)}return t.$$set=U=>{"connection"in U&&n(0,r=U.connection),"is_page"in U&&n(14,s=U.is_page)},t.$$.update=()=>{t.$$.dirty[0]&1&&(r.connection_id?y(r):$())},[r,d,h,m,g,i,o,l,a,u,c,p,E,T,s,K,L,A,I,z,F,V,j,B,H,J,D,P,N,Z,Y]}class ec extends Xe{constructor(e){super(),Qe(this,e,k_,w_,Ze,{connection:0,is_page:14},null,[-1,-1])}}function wl(t){let e,n,i=t[4]("Settings")+"",o,r,s,l,a,u;function c(h,m){return h[0].url?h[0].state==="disconnected"?E_:h[0].state==="connected"?S_:y_:C_}let p=c(t),d=p(t);return l=new ec({props:{connection:t[0]}}),{c(){e=_("div"),n=_("h3"),o=O(i),r=C(),d.c(),s=C(),G(l.$$.fragment),He(e,"sidebar-left",!t[2].hasRightColumn),He(e,"sidebar-right",t[2].hasRightColumn)},m(h,m){w(h,e,m),f(e,n),f(n,o),f(e,r),d.m(e,null),f(e,s),q(l,e,null),u=!0},p(h,m){t=h,(!u||m&16)&&i!==(i=t[4]("Settings")+"")&&M(o,i),p===(p=c(t))&&d?d.p(t,m):(d.d(1),d=p(t),d&&(d.c(),d.m(e,s)));const g={};m&1&&(g.connection=t[0]),l.$set(g),(!u||m&4)&&He(e,"sidebar-left",!t[2].hasRightColumn),(!u||m&4)&&He(e,"sidebar-right",t[2].hasRightColumn)},i(h){u||(b(l.$$.fragment,h),h&&at(()=>{u&&(a||(a=et(e,Zt,t[2].sidebarTransition,!0)),a.run(1))}),u=!0)},o(h){S(l.$$.fragment,h),h&&(a||(a=et(e,Zt,t[2].sidebarTransition,!1)),a.run(0)),u=!1},d(h){h&&v(e),d.d(),W(l),h&&a&&a.end()}}}function y_(t){let e,n=t[4]("Currently connecting to %1.",t[1])+"",i;return{c(){e=_("p"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&18&&n!==(n=o[4]("Currently connecting to %1.",o[1])+"")&&M(i,n)},d(o){o&&v(e)}}}function S_(t){let e,n=t[4]("Currently connected to %1.",t[1])+"",i;return{c(){e=_("p"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&18&&n!==(n=o[4]("Currently connected to %1.",o[1])+"")&&M(i,n)},d(o){o&&v(e)}}}function E_(t){let e,n=t[4]("Currently disconnected from %1.",t[1])+"",i;return{c(){e=_("p"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&18&&n!==(n=o[4]("Currently disconnected from %1.",o[1])+"")&&M(i,n)},d(o){o&&v(e)}}}function C_(t){let e,n=t[4]("Connection not found.")+"",i;return{c(){e=_("p"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Connection not found.")+"")&&M(i,n)},d(o){o&&v(e)}}}function A_(t){let e,n,i=(t[2].hasRightColumn||t[3]==="settings")&&wl(t);return{c(){i&&i.c(),e=ft()},m(o,r){i&&i.m(o,r),w(o,e,r),n=!0},p(o,[r]){o[2].hasRightColumn||o[3]==="settings"?i?(i.p(o,r),r&12&&b(i,1)):(i=wl(o),i.c(),b(i,1),i.m(e.parentNode,e)):i&&(ke(),S(i,1,1,()=>{i=null}),ye())},i(o){n||(b(i),n=!0)},o(o){S(i),n=!1},d(o){o&&v(e),i&&i.d(o)}}}function O_(t,e,n){let i,o,r,s;ve(t,bn,a=>n(2,o=a)),ve(t,Nt,a=>n(3,r=a)),ve(t,lt,a=>n(4,s=a));let{connection:l}=e;return t.$$set=a=>{"connection"in a&&n(0,l=a.connection)},t.$$.update=()=>{t.$$.dirty&1&&n(1,i=l.real_host||l.url&&l.url.host)},[l,i,o,r,s]}let N_=class extends Xe{constructor(e){super(),Qe(this,e,O_,A_,Ze,{connection:0})}};const ri={b:"channel_ban",C:"ctcp_block",c:"colour_filter",e:"ban_exemption",F:"enable_forwarding",f:"forward",g:"free_invite",i:"invite_only",I:"invite_exemption",j:"join_throttle",k:"password",l:"join_limit",L:"large_ban_list",m:"moderated",M:"login_to_talk",n:"prevent_external_send",P:"permanent",p:"privat",Q:"block_forwarded_users",q:"quiet",r:"block_unidentified",R:"login_to_join",s:"secret",S:"secure_connection_only",t:"topic_protection"};function ki(t){return ri[t]?ri[t]:Object.keys(ri).filter(e=>t===ri[e])[0]||""}const kl=["Members","Bots","Bots","Voiced","Half operators","Operators","Administrators","Founders"],T_={a:"admin",B:"bot",h:"half_operator",i:"invisible",I:"whois_hide_online",o:"operator",p:"whois_hide_channels",R:"privmsg_from_registered_only",q:"founder",r:"registered",S:"service_bot",T:"ctcp_block",t:"vhost",v:"voice",W:"whois_notifications",x:"cloaked_hostname",z:"secure_connection",Z:"secure_connection_only"};function yl(t,e,n){const i=t.slice();return i[5]=e[n],i}function R_(t){let e,n,i,o=t[2]("Settings")+"",r,s,l,a;return n=new de({props:{name:"users-cog"}}),{c(){e=_("a"),G(n.$$.fragment),i=C(),r=O(o),k(e,"href","#settings")},m(u,c){w(u,e,c),q(n,e,null),f(e,i),f(e,r),s=!0,l||(a=Ce(e,"click",Nt.toggle),l=!0)},p(u,c){(!s||c&4)&&o!==(o=u[2]("Settings")+"")&&M(r,o)},i(u){s||(b(n.$$.fragment,u),s=!0)},o(u){S(n.$$.fragment,u),s=!1},d(u){u&&v(e),W(n),l=!1,a()}}}function M_(t){let e,n,i=xe(t[3](t[1].toArray())),o=[];for(let s=0;s<i.length;s+=1)o[s]=Sl(yl(t,i,s));const r=s=>S(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=ft()},m(s,l){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,l);w(s,e,l),n=!0},p(s,l){if(l&14){i=xe(s[3](s[1].toArray()));let a;for(a=0;a<i.length;a+=1){const u=yl(s,i,a);o[a]?(o[a].p(u,l),b(o[a],1)):(o[a]=Sl(u),o[a].c(),b(o[a],1),o[a].m(e.parentNode,e))}for(ke(),a=i.length;a<o.length;a+=1)r(a);ye()}},i(s){if(!n){for(let l=0;l<i.length;l+=1)b(o[l]);n=!0}},o(s){o=o.filter(Boolean);for(let l=0;l<o.length;l+=1)S(o[l]);n=!1},d(s){s&&v(e),kt(o,s)}}}function I_(t){let e,n,i,o,r=t[5].nick+"",s,l,a,u;return n=new de({props:{name:"pick:"+t[5].nick,family:"solid",color:t[5].color}}),{c(){e=_("a"),G(n.$$.fragment),i=C(),o=_("span"),s=O(r),l=C(),k(e,"href",a="#action:join:"+t[5].nick),k(e,"class","participant prevent-default")},m(c,p){w(c,e,p),q(n,e,null),f(e,i),f(e,o),f(o,s),f(e,l),u=!0},p(c,p){const d={};p&2&&(d.name="pick:"+c[5].nick),p&2&&(d.color=c[5].color),n.$set(d),(!u||p&2)&&r!==(r=c[5].nick+"")&&M(s,r),(!u||p&2&&a!==(a="#action:join:"+c[5].nick))&&k(e,"href",a)},i(c){u||(b(n.$$.fragment,c),u=!0)},o(c){S(n.$$.fragment,c),u=!1},d(c){c&&v(e),W(n)}}}function L_(t){let e,n=t[2](t[5].heading)+"",i;return{c(){e=_("h3"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&6&&n!==(n=o[2](o[5].heading)+"")&&M(i,n)},i:Oe,o:Oe,d(o){o&&v(e)}}}function Sl(t){let e,n,i,o;const r=[L_,I_],s=[];function l(a,u){return a[5].heading?0:1}return e=l(t),n=s[e]=r[e](t),{c(){n.c(),i=ft()},m(a,u){s[e].m(a,u),w(a,i,u),o=!0},p(a,u){let c=e;e=l(a),e===c?s[e].p(a,u):(ke(),S(s[c],1,1,()=>{s[c]=null}),ye(),n=s[e],n?n.p(a,u):(n=s[e]=r[e](a),n.c()),b(n,1),n.m(i.parentNode,i))},i(a){o||(b(n),o=!0)},o(a){S(n),o=!1},d(a){a&&v(i),s[e].d(a)}}}function P_(t){let e,n,i,o;const r=[M_,R_],s=[];function l(a,u){return a[1].length?0:1}return n=l(t),i=s[n]=r[n](t),{c(){e=_("nav"),i.c(),k(e,"class","participants")},m(a,u){w(a,e,u),s[n].m(e,null),o=!0},p(a,[u]){let c=n;n=l(a),n===c?s[n].p(a,u):(ke(),S(s[c],1,1,()=>{s[c]=null}),ye(),i=s[n],i?i.p(a,u):(i=s[n]=r[n](a),i.c()),b(i,1),i.m(e,null))},i(a){o||(b(i),o=!0)},o(a){S(i),o=!1},d(a){a&&v(e),s[n].d()}}}function D_(t,e,n){let i,o,r=Oe,s=()=>(r(),r=_t(i,c=>n(1,o=c)),i),l;ve(t,lt,c=>n(2,l=c)),t.$$.on_destroy.push(()=>r());let{conversation:a}=e;function u(c){const p=[];let d=-1;for(const h of c)d!=h.group&&p.push({heading:kl[h.group]||kl[0]}),d=h.group,p.push(h);return p}return t.$$set=c=>{"conversation"in c&&n(4,a=c.conversation)},t.$$.update=()=>{t.$$.dirty&16&&s(n(0,i=a.participants))},[i,o,l,u,a]}class U_ extends Xe{constructor(e){super(),Qe(this,e,D_,P_,Ze,{conversation:4})}}function Tr(t){if(!t.nick)return["Loading..."];const e=Object.keys(t.channels||{}).sort(),n=[t.nick,t.name||t.user];let i="%1 (%2)";return t.away&&(i+=" is away (%3) and",n.push(t.away)),t.idle_for&&e.length?(i+=" has been idle for %4s in %5.",n.push(t.idle_for),n.push(e.sort().join(", "))):t.idle_for&&!e.length?(i+=" has been idle for %4s, and is not in any channels.",n.push(t.idle_for)):e.length?(i+=" is active in %4.",n.push(e.join(", "))):i+=" is not in any channels.",t.away||(i=i.replace(/%(4|5)/g,(o,r)=>"%"+(r-1))),[i,...n]}function Co(t){const e=["","chat",t.connection_id];return t.conversation_id&&e.push(t.conversation_id),Ie.urlFor(e.map(encodeURIComponent).join("/")+"#"+t.ts.toISOString())}function B_(t,{conversation:e}){const n=t.detail.visibleEls.filter(r=>r.dataset.ts);if(!n.length)return;const i=r=>Ie.go(e.path+(r.length?"#"+r:""),{replace:!0}),o=t.detail.pos;if(o==="top"){const r=n[0].dataset.ts;e.historyStartAt||e.load({before:r}),i(r)}else if(o==="bottom"){const r=n.slice(-1)[0].dataset.ts;e.historyStopAt||e.load({after:r}),i(e.historyStopAt?"":r)}else i(n[0].dataset.ts)}function F_(t,{conversation:e,timestampFromUrl:n}){const{infinityEl:i,scrollHeightChanged:o,scrollTo:r,visibleEls:s,visibleElsChanged:l}=t.detail,a=e.messages;!(i.scrollHeight>i.offsetHeight)&&a.length&&e.load({before:a.get(0).ts.toISOString()}),o&&(r(Ie.hash?'.message[data-ts="'+Ie.hash+'"]':-1),j_(i,n===Ie.hash)),l&&s.forEach(c=>a.render(c.dataset.index))}function j_(t,e){const n=e&&Ie.hash&&t.querySelector('.message[data-ts="'+Ie.hash+'"]');wt(t,".has-focus",i=>i.classList.remove("has-focus")),n&&n.classList.add("has-focus")}function El(t,e){return e.is("not_found")?"":t.frozen?t.frozen:t===e?"Connection messages.":e.info.away?e.info.away:e.info.idle_for?tt.l("User has been idle for %1s.",e.info.idle_for):(e.frozen?e.frozen:e.topic)||(e.is("private")?"Private conversation.":"No topic is set.")}function Cl(t){let e,n,i,o=t[10]("Settings")+"",r,s,l=Object.hasOwn(t[1],"wantNotifications"),a,u,c,p,d,h,m,g,y,$,E,T,K,L,A,I,z,F,V,j=l&&Al(t);function B(U){t[19](U)}let H={name:"raw_messages",$$slots:{label:[H_]},$$scope:{ctx:t}};t[0].messages.raw!==void 0&&(H.value=t[0].messages.raw),u=new it({props:H}),fe.push(()=>me(u,"value",B));let J=!t[5]&&Ol(t);function D(U,R){if(U[1].frozen)return G_;if(U[5])return W_}let P=D(t),N=P&&P(t),Z=!t[5]&&Nl(t),Y=!t[5]&&Ml(t);return E=new pt({props:{type:"button",icon:"sign-out-alt",$$slots:{default:[x_]},$$scope:{ctx:t}}}),E.$on("click",t[13]),K=new It({props:{op:t[12]}}),A=new U_({props:{conversation:t[0]}}),{c(){e=_("div"),n=_("form"),i=_("h3"),r=O(o),s=C(),j&&j.c(),a=C(),G(u.$$.fragment),p=C(),J&&J.c(),d=C(),h=_("p"),N&&N.c(),m=C(),Z&&Z.c(),g=C(),y=_("div"),Y&&Y.c(),$=C(),G(E.$$.fragment),T=C(),G(K.$$.fragment),L=C(),G(A.$$.fragment),k(y,"class","form-actions"),k(n,"method","post"),He(e,"sidebar-left",!t[9].hasRightColumn),He(e,"sidebar-right",t[9].hasRightColumn)},m(U,R){w(U,e,R),f(e,n),f(n,i),f(i,r),f(n,s),j&&j.m(n,null),f(n,a),q(u,n,null),f(n,p),J&&J.m(n,null),f(n,d),f(n,h),N&&N.m(h,null),f(n,m),Z&&Z.m(n,null),f(n,g),f(n,y),Y&&Y.m(y,null),f(y,$),q(E,y,null),f(n,T),q(K,n,null),f(e,L),q(A,e,null),z=!0,F||(V=Ce(n,"submit",st(t[14])),F=!0)},p(U,R){t=U,(!z||R&1024)&&o!==(o=t[10]("Settings")+"")&&M(r,o),R&2&&(l=Object.hasOwn(t[1],"wantNotifications")),l?j?(j.p(t,R),R&2&&b(j,1)):(j=Al(t),j.c(),b(j,1),j.m(n,a)):j&&(ke(),S(j,1,1,()=>{j=null}),ye());const x={};R&1073742848&&(x.$$scope={dirty:R,ctx:t}),!c&&R&1&&(c=!0,x.value=t[0].messages.raw,he(()=>c=!1)),u.$set(x),t[5]?J&&(ke(),S(J,1,1,()=>{J=null}),ye()):J?(J.p(t,R),R&32&&b(J,1)):(J=Ol(t),J.c(),b(J,1),J.m(n,d)),P===(P=D(t))&&N?N.p(t,R):(N&&N.d(1),N=P&&P(t),N&&(N.c(),N.m(h,null))),t[5]?Z&&(ke(),S(Z,1,1,()=>{Z=null}),ye()):Z?(Z.p(t,R),R&32&&b(Z,1)):(Z=Nl(t),Z.c(),b(Z,1),Z.m(n,g)),t[5]?Y&&(ke(),S(Y,1,1,()=>{Y=null}),ye()):Y?(Y.p(t,R),R&32&&b(Y,1)):(Y=Ml(t),Y.c(),b(Y,1),Y.m(y,$));const le={};R&1073742848&&(le.$$scope={dirty:R,ctx:t}),E.$set(le);const ge={};R&1&&(ge.conversation=t[0]),A.$set(ge),(!z||R&512)&&He(e,"sidebar-left",!t[9].hasRightColumn),(!z||R&512)&&He(e,"sidebar-right",t[9].hasRightColumn)},i(U){z||(b(j),b(u.$$.fragment,U),b(J),b(Z),b(Y),b(E.$$.fragment,U),b(K.$$.fragment,U),b(A.$$.fragment,U),U&&at(()=>{z&&(I||(I=et(e,Zt,t[9].sidebarTransition,!0)),I.run(1))}),z=!0)},o(U){S(j),S(u.$$.fragment,U),S(J),S(Z),S(Y),S(E.$$.fragment,U),S(K.$$.fragment,U),S(A.$$.fragment,U),U&&(I||(I=et(e,Zt,t[9].sidebarTransition,!1)),I.run(0)),z=!1},d(U){U&&v(e),j&&j.d(),W(u),J&&J.d(),N&&N.d(),Z&&Z.d(),Y&&Y.d(),W(E),W(K),W(A),U&&I&&I.end(),F=!1,V()}}}function Al(t){let e,n,i;function o(s){t[18](s)}let r={name:"want_notifications",$$slots:{label:[z_]},$$scope:{ctx:t}};return t[0].wantNotifications!==void 0&&(r.value=t[0].wantNotifications),e=new it({props:r}),fe.push(()=>me(e,"value",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};l&1073742848&&(a.$$scope={dirty:l,ctx:s}),!n&&l&1&&(n=!0,a.value=s[0].wantNotifications,he(()=>n=!1)),e.$set(a)},i(s){i||(b(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function z_(t){let e,n=t[10]("Notify me on new messages")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&1024&&n!==(n=o[10]("Notify me on new messages")+"")&&M(i,n)},d(o){o&&v(e)}}}function H_(t){let e,n=t[10]("Show raw messages")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&1024&&n!==(n=o[10]("Show raw messages")+"")&&M(i,n)},d(o){o&&v(e)}}}function Ol(t){let e,n,i;function o(s){t[20](s)}let r={name:"topic",placeholder:t[10]("No topic is set."),readonly:!t[6]||!t[1].modes.topic_protection,$$slots:{label:[q_]},$$scope:{ctx:t}};return t[4]!==void 0&&(r.value=t[4]),e=new xu({props:r}),fe.push(()=>me(e,"value",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};l&1024&&(a.placeholder=s[10]("No topic is set.")),l&66&&(a.readonly=!s[6]||!s[1].modes.topic_protection),l&1073742848&&(a.$$scope={dirty:l,ctx:s}),!n&&l&16&&(n=!0,a.value=s[4],he(()=>n=!1)),e.$set(a)},i(s){i||(b(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function q_(t){let e,n=t[10]("Topic")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&1024&&n!==(n=o[10]("Topic")+"")&&M(i,n)},d(o){o&&v(e)}}}function W_(t){let e,n=t[11](...Tr(t[1].info))+"",i,o,r,s,l=t[10]("Update information")+"",a,u,c;return{c(){e=_("span"),i=C(),o=_("br"),r=_("small"),s=_("a"),a=O(l),k(s,"href","#update")},m(p,d){w(p,e,d),e.innerHTML=n,w(p,i,d),w(p,o,d),w(p,r,d),f(r,s),f(s,a),u||(c=Ce(s,"click",st(t[15])),u=!0)},p(p,d){d&2050&&n!==(n=p[11](...Tr(p[1].info))+"")&&(e.innerHTML=n),d&1024&&l!==(l=p[10]("Update information")+"")&&M(a,l)},d(p){p&&(v(e),v(i),v(o),v(r)),u=!1,c()}}}function G_(t){let e=t[10]("Conversation with %1 is frozen. Reason: %2",t[0].name,t[10](t[0].frozen))+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&1025&&e!==(e=i[10]("Conversation with %1 is frozen. Reason: %2",i[0].name,i[10](i[0].frozen))+"")&&M(n,e)},d(i){i&&v(n)}}}function Nl(t){let e,n,i,o,r,s,l,a,u,c,p,d,h,m,g,y,$,E;function T(D){t[21](D)}let K={badge:!0,name:"invite_only",disabled:!t[6],$$slots:{label:[K_]},$$scope:{ctx:t}};t[2].invite_only!==void 0&&(K.value=t[2].invite_only),e=new it({props:K}),fe.push(()=>me(e,"value",T));function L(D){t[22](D)}let A={badge:!0,name:"moderated",disabled:!t[6],$$slots:{label:[Y_]},$$scope:{ctx:t}};t[2].moderated!==void 0&&(A.value=t[2].moderated),o=new it({props:A}),fe.push(()=>me(o,"value",L));function I(D){t[23](D)}let z={badge:!0,name:"prevent_external_send",disabled:!t[6],$$slots:{label:[V_]},$$scope:{ctx:t}};t[2].prevent_external_send!==void 0&&(z.value=t[2].prevent_external_send),l=new it({props:z}),fe.push(()=>me(l,"value",I));function F(D){t[24](D)}let V={badge:!0,name:"topic_protection",disabled:!t[6],$$slots:{label:[Z_]},$$scope:{ctx:t}};t[2].topic_protection!==void 0&&(V.value=t[2].topic_protection),c=new it({props:V}),fe.push(()=>me(c,"value",F));function j(D){t[25](D)}let B={badge:!0,name:"password",disabled:!t[6],$$slots:{label:[J_]},$$scope:{ctx:t}};t[2].password!==void 0&&(B.value=t[2].password),h=new it({props:B}),fe.push(()=>me(h,"value",j));let H=t[2].password&&Tl(t),J=!t[6]&&Rl(t);return{c(){G(e.$$.fragment),i=C(),G(o.$$.fragment),s=C(),G(l.$$.fragment),u=C(),G(c.$$.fragment),d=C(),G(h.$$.fragment),g=C(),H&&H.c(),y=C(),J&&J.c(),$=ft()},m(D,P){q(e,D,P),w(D,i,P),q(o,D,P),w(D,s,P),q(l,D,P),w(D,u,P),q(c,D,P),w(D,d,P),q(h,D,P),w(D,g,P),H&&H.m(D,P),w(D,y,P),J&&J.m(D,P),w(D,$,P),E=!0},p(D,P){const N={};P&64&&(N.disabled=!D[6]),P&1073742852&&(N.$$scope={dirty:P,ctx:D}),!n&&P&4&&(n=!0,N.value=D[2].invite_only,he(()=>n=!1)),e.$set(N);const Z={};P&64&&(Z.disabled=!D[6]),P&1073742852&&(Z.$$scope={dirty:P,ctx:D}),!r&&P&4&&(r=!0,Z.value=D[2].moderated,he(()=>r=!1)),o.$set(Z);const Y={};P&64&&(Y.disabled=!D[6]),P&1073742852&&(Y.$$scope={dirty:P,ctx:D}),!a&&P&4&&(a=!0,Y.value=D[2].prevent_external_send,he(()=>a=!1)),l.$set(Y);const U={};P&64&&(U.disabled=!D[6]),P&1073742852&&(U.$$scope={dirty:P,ctx:D}),!p&&P&4&&(p=!0,U.value=D[2].topic_protection,he(()=>p=!1)),c.$set(U);const R={};P&64&&(R.disabled=!D[6]),P&1073742852&&(R.$$scope={dirty:P,ctx:D}),!m&&P&4&&(m=!0,R.value=D[2].password,he(()=>m=!1)),h.$set(R),D[2].password?H?(H.p(D,P),P&4&&b(H,1)):(H=Tl(D),H.c(),b(H,1),H.m(y.parentNode,y)):H&&(ke(),S(H,1,1,()=>{H=null}),ye()),D[6]?J&&(J.d(1),J=null):J?J.p(D,P):(J=Rl(D),J.c(),J.m($.parentNode,$))},i(D){E||(b(e.$$.fragment,D),b(o.$$.fragment,D),b(l.$$.fragment,D),b(c.$$.fragment,D),b(h.$$.fragment,D),b(H),E=!0)},o(D){S(e.$$.fragment,D),S(o.$$.fragment,D),S(l.$$.fragment,D),S(c.$$.fragment,D),S(h.$$.fragment,D),S(H),E=!1},d(D){D&&(v(i),v(s),v(u),v(d),v(g),v(y),v($)),W(e,D),W(o,D),W(l,D),W(c,D),W(h,D),H&&H.d(D),J&&J.d(D)}}}function K_(t){let e,n=t[10]("Invite only")+"",i,o,r,s=t[2].invite_only?"+":"-",l,a=ki("invite_only")+"",u;return{c(){e=_("span"),i=O(n),o=C(),r=_("b"),l=O(s),u=O(a),k(r,"class","badge"),k(e,"slot","label")},m(c,p){w(c,e,p),f(e,i),f(e,o),f(e,r),f(r,l),f(r,u)},p(c,p){p&1024&&n!==(n=c[10]("Invite only")+"")&&M(i,n),p&4&&s!==(s=c[2].invite_only?"+":"-")&&M(l,s)},d(c){c&&v(e)}}}function Y_(t){let e,n=t[10]("Moderated")+"",i,o,r,s=t[2].moderated?"+":"-",l,a=ki("moderated")+"",u;return{c(){e=_("span"),i=O(n),o=C(),r=_("b"),l=O(s),u=O(a),k(r,"class","badge"),k(e,"slot","label")},m(c,p){w(c,e,p),f(e,i),f(e,o),f(e,r),f(r,l),f(r,u)},p(c,p){p&1024&&n!==(n=c[10]("Moderated")+"")&&M(i,n),p&4&&s!==(s=c[2].moderated?"+":"-")&&M(l,s)},d(c){c&&v(e)}}}function V_(t){let e,n=t[10]("Prevent external send")+"",i,o,r,s=t[2].prevent_external_send?"+":"-",l,a=ki("prevent_external_send")+"",u;return{c(){e=_("span"),i=O(n),o=C(),r=_("b"),l=O(s),u=O(a),k(r,"class","badge"),k(e,"slot","label")},m(c,p){w(c,e,p),f(e,i),f(e,o),f(e,r),f(r,l),f(r,u)},p(c,p){p&1024&&n!==(n=c[10]("Prevent external send")+"")&&M(i,n),p&4&&s!==(s=c[2].prevent_external_send?"+":"-")&&M(l,s)},d(c){c&&v(e)}}}function Z_(t){let e,n=t[10]("Protected topic")+"",i,o,r,s=t[2].topic_protection?"+":"-",l,a=ki("topic_protection")+"",u;return{c(){e=_("span"),i=O(n),o=C(),r=_("b"),l=O(s),u=O(a),k(r,"class","badge"),k(e,"slot","label")},m(c,p){w(c,e,p),f(e,i),f(e,o),f(e,r),f(r,l),f(r,u)},p(c,p){p&1024&&n!==(n=c[10]("Protected topic")+"")&&M(i,n),p&4&&s!==(s=c[2].topic_protection?"+":"-")&&M(l,s)},d(c){c&&v(e)}}}function J_(t){let e,n=t[10]("Password")+"",i,o,r,s=t[2].password?"+":"-",l,a=ki("password")+"",u;return{c(){e=_("span"),i=O(n),o=C(),r=_("b"),l=O(s),u=O(a),k(r,"class","badge"),k(e,"slot","label")},m(c,p){w(c,e,p),f(e,i),f(e,o),f(e,r),f(r,l),f(r,u)},p(c,p){p&1024&&n!==(n=c[10]("Password")+"")&&M(i,n),p&4&&s!==(s=c[2].password?"+":"-")&&M(l,s)},d(c){c&&v(e)}}}function Tl(t){let e,n,i;function o(s){t[26](s)}let r={type:"password",name:"password",$$slots:{label:[Q_]},$$scope:{ctx:t}};return t[3]!==void 0&&(r.value=t[3]),e=new Je({props:r}),fe.push(()=>me(e,"value",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};l&1073742848&&(a.$$scope={dirty:l,ctx:s}),!n&&l&8&&(n=!0,a.value=s[3],he(()=>n=!1)),e.$set(a)},i(s){i||(b(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function Q_(t){let e,n=t[10]("Password")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&1024&&n!==(n=o[10]("Password")+"")&&M(i,n)},d(o){o&&v(e)}}}function Rl(t){let e,n,i=t[10]("Only operators can change modes.")+"",o;return{c(){e=_("p"),n=_("i"),o=O(i)},m(r,s){w(r,e,s),f(e,n),f(n,o)},p(r,s){s&1024&&i!==(i=r[10]("Only operators can change modes.")+"")&&M(o,i)},d(r){r&&v(e)}}}function Ml(t){let e,n;return e=new pt({props:{icon:"save",op:t[12],$$slots:{default:[X_]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o&1073742848&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(b(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function X_(t){let e,n=t[10]("Save")+"",i;return{c(){e=_("span"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&1024&&n!==(n=o[10]("Save")+"")&&M(i,n)},d(o){o&&v(e)}}}function x_(t){let e,n=t[10]("Leave")+"",i;return{c(){e=_("span"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&1024&&n!==(n=o[10]("Leave")+"")&&M(i,n)},d(o){o&&v(e)}}}function eg(t){let e,n,i=(t[9].hasRightColumn||t[8]==="settings")&&Cl(t);return{c(){i&&i.c(),e=ft()},m(o,r){i&&i.m(o,r),w(o,e,r),n=!0},p(o,[r]){o[9].hasRightColumn||o[8]==="settings"?i?(i.p(o,r),r&768&&b(i,1)):(i=Cl(o),i.c(),b(i,1),i.m(e.parentNode,e)):i&&(ke(),S(i,1,1,()=>{i=null}),ye())},i(o){n||(b(i),n=!0)},o(o){S(i),n=!1},d(o){o&&v(e),i&&i.d(o)}}}function tg(t,e,n){let i,o,r,s,l,a=Oe,u=()=>(a(),a=_t(i,R=>n(17,l=R)),i),c,p=Oe,d=()=>(p(),p=_t(y,R=>n(1,c=R)),y),h,m,g;ve(t,Nt,R=>n(8,s=R)),ve(t,bn,R=>n(9,h=R)),ve(t,lt,R=>n(10,m=R)),ve(t,jt,R=>n(11,g=R)),t.$$.on_destroy.push(()=>a()),t.$$.on_destroy.push(()=>p());let{conversation:y}=e;d();const $=new Ro({api:!1,id:"saveConversationSettings"});let E={invite_only:!1,moderated:!1,password:!1,prevent_external_send:!1,topic_protection:!1},T="",K="",L="";function A(){y.send("/part",R=>{R.errrors||(fu(Nt,s="",s),Ie.removeFromHistory(location.href),Ie.go(Ie.history.slice(-1)[0]||"/settings/conversation?connection_id="+(y.connection_id||"")))})}function I(){const R=[];for(const x in E)x==="password"&&E[x]?(K&&y.send(r?"/mode +k "+K:"/join "+y.name+" "+K),n(3,K="")):E[x]!==(y.modes[x]||!1)&&R.push((E[x]?"+":"-")+ki(x));return r&&R.length&&y.send("/mode "+R.join(""))}function z(){return!r&&y.modes.topic_protection?!1:L!==y.topic&&y.send("/topic "+L)}async function F(){$.update({status:"loading"}),await $.on("update"),I(),z(),await vo(),$.update({status:"success"})}function V(){Object.keys(y.modes).length===0&&!o&&!y.frozen&&y.send("/mode",R=>{R.bubbles=!1,n(2,E=Object.assign({},E,y.modes)),n(4,L=y.topic)})}function j(){y.send("/whois "+y.name,R=>R.stopPropagation())}function B(R){t.$$.not_equal(y.wantNotifications,R)&&(y.wantNotifications=R,d(n(0,y)))}function H(R){t.$$.not_equal(y.messages.raw,R)&&(y.messages.raw=R,d(n(0,y)))}function J(R){L=R,n(4,L)}function D(R){t.$$.not_equal(E.invite_only,R)&&(E.invite_only=R,n(2,E))}function P(R){t.$$.not_equal(E.moderated,R)&&(E.moderated=R,n(2,E))}function N(R){t.$$.not_equal(E.prevent_external_send,R)&&(E.prevent_external_send=R,n(2,E))}function Z(R){t.$$.not_equal(E.topic_protection,R)&&(E.topic_protection=R,n(2,E))}function Y(R){t.$$.not_equal(E.password,R)&&(E.password=R,n(2,E))}function U(R){K=R,n(3,K)}return t.$$set=R=>{"conversation"in R&&d(n(0,y=R.conversation))},t.$$.update=()=>{t.$$.dirty&2&&u(n(7,i=c.participants)),t.$$.dirty&2&&n(5,o=c.is("private")),t.$$.dirty&131072&&n(6,r=l.me().modes.operator),t.$$.dirty&65537&&y.path!=T&&(n(16,T=y.path),V())},[y,c,E,K,L,o,r,i,s,h,m,g,$,A,F,j,T,l,B,H,J,D,P,N,Z,Y,U]}class ng extends Xe{constructor(e){super(),Qe(this,e,tg,eg,Ze,{conversation:0})}}function ig(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var tc=ig,og=/\s/;function rg(t){for(var e=t.length;e--&&og.test(t.charAt(e)););return e}var sg=rg,lg=sg,ag=/^\s+/;function ug(t){return t&&t.slice(0,lg(t)+1).replace(ag,"")}var cg=ug,fg=cg,Il=tc,pg=Au,Ll=NaN,dg=/^[-+]0x[0-9a-f]+$/i,hg=/^0b[01]+$/i,mg=/^0o[0-7]+$/i,_g=parseInt;function gg(t){if(typeof t=="number")return t;if(pg(t))return Ll;if(Il(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Il(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=fg(t);var n=hg.test(t);return n||mg.test(t)?_g(t.slice(2),n?2:8):dg.test(t)?Ll:+t}var bg=gg,vg=tc,fr=Eu,Pl=bg,$g="Expected a function",wg=Math.max,kg=Math.min;function yg(t,e,n){var i,o,r,s,l,a,u=0,c=!1,p=!1,d=!0;if(typeof t!="function")throw new TypeError($g);e=Pl(e)||0,vg(n)&&(c=!!n.leading,p="maxWait"in n,r=p?wg(Pl(n.maxWait)||0,e):r,d="trailing"in n?!!n.trailing:d);function h(A){var I=i,z=o;return i=o=void 0,u=A,s=t.apply(z,I),s}function m(A){return u=A,l=setTimeout($,e),c?h(A):s}function g(A){var I=A-a,z=A-u,F=e-I;return p?kg(F,r-z):F}function y(A){var I=A-a,z=A-u;return a===void 0||I>=e||I<0||p&&z>=r}function $(){var A=fr();if(y(A))return E(A);l=setTimeout($,g(A))}function E(A){return l=void 0,d&&i?h(A):(i=o=void 0,s)}function T(){l!==void 0&&clearTimeout(l),u=0,i=a=o=l=void 0}function K(){return l===void 0?s:E(fr())}function L(){var A=fr(),I=y(A);if(i=arguments,o=this,a=A,I){if(l===void 0)return m(a);if(p)return clearTimeout(l),l=setTimeout($,e),h(a)}return l===void 0&&(l=setTimeout($,e)),s}return L.cancel=T,L.flush=K,L}var Sg=yg;const Zr=bi(Sg);class Eg{constructor(){this.dragAndDropEvents={drag:this._preventDefault.bind(this),dragend:this.stop.bind(this),dragenter:this.start.bind(this),dragleave:this.stop.bind(this),dragover:this.start.bind(this),dragstart:this._preventDefault.bind(this),drop:this.drop.bind(this)},this.pasteEvents={paste:this.paste.bind(this)},this.dropIndicatorEl=document.createElement("div"),this.dropIndicatorEl.className="drop-area hidden",this.removeDragOverDebounced=Zr(()=>this._removeDragOver(),100)}attach(e,n,i=document){this.dropEl=e,this.uploader=n,this.targetEl=i,Object.keys(this.dragAndDropEvents).forEach(o=>{i.addEventListener(o,this.dragAndDropEvents[o])}),Object.keys(this.pasteEvents).forEach(o=>{document.addEventListener(o,this.pasteEvents[o])})}detach(){Object.keys(this.dragAndDropEvents).forEach(e=>{this.targetEl.removeEventListener(e,this.dragAndDropEvents[e])}),Object.keys(this.pasteEvents).forEach(e=>{document.removeEventListener(e,this.pasteEvents[e])})}drop(e){this.stop(e),this.uploader&&this.uploader(e)}paste(e){const n=(e.clipboardData||e.originalEvent.clipboardData).items;if(this.uploader){for(let i=0;i<n.length;i++)if(n[i].kind==="file")return this.uploader({dataTransfer:{files:[n[i].getAsFile()]}})}}stop(e){this._preventDefault(e),this.removeDragOverDebounced()}start(e){if(!this.dropEl)return;this._preventDefault(e);const n=this.dropIndicatorEl.style;n.height=this.dropEl.offsetHeight+"px",n.width=this.dropEl.offsetWidth+"px",n.top=this.dropEl.offsetTop+"px",n.left=this.dropEl.offsetLeft+"px",this.dropIndicatorEl.classList.remove("hidden"),this.dropEl.parentNode.appendChild(this.dropIndicatorEl)}_preventDefault(e){e.preventDefault(),e.stopPropagation()}_removeDragOver(){this.dropIndicatorEl.classList.add("hidden")}}function Cg(t){let e,n,i,o,r,s,l;const a=t[6].default,u=Gt(a,t,t[5],null);return{c(){e=_("main"),n=_("div"),u&&u.c(),at(()=>t[7].call(n)),k(e,"class",o=t[1].join(" "))},m(c,p){w(c,e,p),f(e,n),u&&u.m(n,null),i=lf(n,t[7].bind(n)),r=!0,s||(l=Lr(t[2].call(null,e)),s=!0)},p(c,[p]){u&&u.p&&(!r||p&32)&&Yt(u,a,c,c[5],r?Kt(a,c[5],p,null):Vt(c[5]),null),(!r||p&2&&o!==(o=c[1].join(" ")))&&k(e,"class",o)},i(c){r||(b(u,c),r=!0)},o(c){S(u,c),r=!1},d(c){c&&v(e),u&&u.d(c),i(),s=!1,l()}}}function Ag(t,e,n){let i,{$$slots:o={},$$scope:r}=e;const s=pf(),l={scrollDelay:80,scrollOffset:80,scrollTop:0,visibleEls:[]};let{class:a=""}=e,u=fo(),c=0,{pos:p="top"}=e;function d(){const E=l.infinityEl;if(!E)return;n(3,p=E.scrollTop>c-E.offsetHeight-l.scrollOffset?"bottom":E.scrollTop<l.scrollOffset?"top":"middle"),l.pos=p,l.scrollHeightChanged=l.scrollHeight!==c,l.scrollHeight=c,l.visibleElsChanged=!1;const T=Mf(E.firstElementChild,E);(T.length!==l.visibleEls.length||T[0]!==l.visibleEls[0])&&(l.visibleEls=T,l.visibleElsChanged=!0),(l.scrollHeightChanged||l.visibleElsChanged)&&s("visibility",l),l.scrollHeightChanged&&s("rendered",l)}function h(E){l.infinityEl=E,l.scrollTo=y,E.addEventListener("scroll",()=>m(E)),d()}function m(E){l.scrollTid&&clearTimeout(l.scrollTid),l.scrollTid=setTimeout(()=>g(E),l.scrollDelay)}function g(E){u+500>fo()?(Math.abs(E.scrollTop-l.scrollTop)>40&&(E.scrollTop=l.scrollTop),l.scrollTid&&clearTimeout(l.scrollTid),d()):(l.scrollTop=E.scrollTop,d(),s("scrolled",l))}function y(E){return Pe.undefined(E)||(E===-1&&(E=c),Pe.string(E)&&(E=l.infinityEl.querySelector(E)),E&&E.tagName&&(E=E.offsetTop),Pe.undefined(E))||E<0?!1:(u=fo(),l.infinityEl.scrollTop=E,l.scrollTop=l.infinityEl.scrollTop,!0)}function $(){c=this.offsetHeight,n(0,c)}return t.$$set=E=>{"class"in E&&n(4,a=E.class),"pos"in E&&n(3,p=E.pos),"$$scope"in E&&n(5,r=E.$$scope)},t.$$.update=()=>{t.$$.dirty&24&&n(1,i=[a||"infinity-scroll"].concat(["has-pos-"+p])),t.$$.dirty&1&&c&&d()},[c,i,h,p,a,r,o,$]}class Jr extends Xe{constructor(e){super(),Qe(this,e,Ag,Cg,Ze,{class:4,pos:3})}}function Og(t){let e,n,i,o;const r=t[9].default,s=Gt(r,t,t[8],null);return{c(){e=_("a"),s&&s.c(),k(e,"href",t[2]),k(e,"class",t[0]),k(e,"style",t[1]),He(e,"has-path",t[4])},m(l,a){w(l,e,a),s&&s.m(e,null),t[11](e),n=!0,i||(o=Ce(e,"click",t[10]),i=!0)},p(l,[a]){s&&s.p&&(!n||a&256)&&Yt(s,r,l,l[8],n?Kt(r,l[8],a,null):Vt(l[8]),null),(!n||a&4)&&k(e,"href",l[2]),(!n||a&1)&&k(e,"class",l[0]),(!n||a&2)&&k(e,"style",l[1]),(!n||a&17)&&He(e,"has-path",l[4])},i(l){n||(b(s,l),n=!0)},o(l){S(s,l),n=!1},d(l){l&&v(e),s&&s.d(l),t[11](null),i=!1,o()}}}function Ng(t,e,n){let i,o,r;ve(t,Ie,g=>n(7,r=g));let{$$slots:s={},$$scope:l}=e,{class:a=""}=e,u,{href:c="/"}=e,{style:p=""}=e;const d=()=>u.focus();function h(g){_i.call(this,t,g)}function m(g){fe[g?"unshift":"push"](()=>{u=g,n(3,u)})}return t.$$set=g=>{"class"in g&&n(0,a=g.class),"href"in g&&n(5,c=g.href),"style"in g&&n(1,p=g.style),"$$scope"in g&&n(8,l=g.$$scope)},t.$$.update=()=>{t.$$.dirty&160&&n(2,i=c.indexOf("/")===0?r.basePath+c:c),t.$$.dirty&132&&n(4,o=r.basePath+r.path===i.replace(/(#|\?).*/,""))},[a,p,i,u,o,c,d,r,l,s,h,m]}class Ke extends Xe{constructor(e){super(),Qe(this,e,Ng,Og,Ze,{class:0,href:5,style:1,focus:6})}get focus(){return this.$$.ctx[6]}}const Tg=gi("notify");class Rg extends Lt{constructor(){super(),this.Notification=window.Notification||{permission:"denied"},this.prop("persist","volume",0),this.prop("persist","notificationCloseDelay",5e3),this.prop("persist","wantNotifications",this.Notification.requestPermission?null:!1),this.prop("ro","appHasFocus",()=>document.hasFocus()),this.prop("ro","volumeOptions",[["0","Muted"],["25","Low"],["50","Medium"],["100","Max"]]),this.prop("rw","desktopAccess",this.Notification.permission)}play(e=this){const n=document.getElementById("audio_notification");n&&(n.muted=!1,n.volume=parseInt(e.volume,10)/100,n.play())}requestDesktopAccess(){return this.Notification.requestPermission?(this.Notification.requestPermission(e=>this.update({desktopAccess:e})),this):this.update({desktopAccess:this.Notification.permission})}show(e,n={}){if(n.title||(n.title=document.title),!this.wantNotifications)return this._showInConsole(e,n);if(this.volume&&this.play(),this.desktopAccess!=="granted")return this.showInApp(e,n);const i=new Notification(n.title,{...n,body:e});return i.onclick=o=>this._onClick(o,i,n),setTimeout(()=>i.close(),this.notificationCloseDelay),i}showInApp(e,n={}){n.title||(n.title=document.title);const i=document.createElement("div"),o={...n,body:e,close:()=>{i.remove(),o.closed=!0},target:"app"};return i.className="notify-notification fade-in",i.innerHTML='<a href="#close" class="notify-notification__close"></a><h6 class="notify-notification__title"></h6><div class="notify-notification__content"></div>',i.querySelector("a").addEventListener("click",r=>{r.preventDefault(),o.close()}),i.querySelector("h6").textContent=n.title,i.querySelector("div").textContent=e,n.closeAfter===-1?i.querySelector("a").remove():setTimeout(()=>o.close(),n.closeAfter||this.notificationCloseDelay),setTimeout(()=>i.classList.add("is-visible"),1),document.body.appendChild(i),o}_onClick(e,n,i){n.close(),window.focus(),this.emit("click",{...i,sourceEvent:e})}_showInConsole(e,n){return Tg.info("[Notify]",e,n),{...n,body:e,close:()=>{},target:"console"}}}const vt=new Rg;function Dl(t,e,n){const i=t.slice();return i[40]=e[n],i[42]=n,i}function Ul(t,e,n){const i=t.slice();return i[43]=e[n],i}function Bl(t){let e,n,i,o,r,s;return n=new de({props:{name:"users-cog"}}),i=new de({props:{name:"times"}}),{c(){e=_("a"),G(n.$$.fragment),G(i.$$.fragment),k(e,"href","#settings"),k(e,"class","btn-hallow can-toggle"),He(e,"is-active",t[16]==="settings")},m(l,a){w(l,e,a),q(n,e,null),q(i,e,null),o=!0,r||(s=Ce(e,"click",Nt.toggle),r=!0)},p(l,a){(!o||a[0]&65536)&&He(e,"is-active",l[16]==="settings")},i(l){o||(b(n.$$.fragment,l),b(i.$$.fragment,l),o=!0)},o(l){S(n.$$.fragment,l),S(i.$$.fragment,l),o=!1},d(l){l&&v(e),W(n),W(i),r=!1,s()}}}function Mg(t){let e,n,i=t[14](t[1].name)+"",o,r,s=!t[15].hasRightColumn&&!t[3].is("not_found"),l,a,u,c,p=s&&Bl(t);return{c(){e=_("h1"),n=_("a"),o=O(i),r=C(),p&&p.c(),l=ft(),k(n,"href","#settings"),k(e,"class","ellipsis")},m(d,h){w(d,e,h),f(e,n),f(n,o),w(d,r,h),p&&p.m(d,h),w(d,l,h),a=!0,u||(c=Ce(n,"click",Nt.toggle),u=!0)},p(d,h){(!a||h[0]&16386)&&i!==(i=d[14](d[1].name)+"")&&M(o,i),h[0]&32776&&(s=!d[15].hasRightColumn&&!d[3].is("not_found")),s?p?(p.p(d,h),h[0]&32776&&b(p,1)):(p=Bl(d),p.c(),b(p,1),p.m(l.parentNode,l)):p&&(ke(),S(p,1,1,()=>{p=null}),ye())},i(d){a||(b(p),a=!0)},o(d){S(p),a=!1},d(d){d&&(v(e),v(r),v(l)),p&&p.d(d),u=!1,c()}}}function Fl(t){let e,n;return e=new gm({props:{conversation:t[3]}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o[0]&8&&(r.conversation=i[3]),e.$set(r)},i(i){n||(b(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function jl(t){let e,n,i,o,r,s=t[14]("Loading...")+"",l,a;return i=new de({props:{name:"spinner",animation:"spin"}}),{c(){e=_("div"),n=_("span"),G(i.$$.fragment),o=C(),r=_("i"),l=O(s),k(e,"class","message__status-line for-loading has-pos-top")},m(u,c){w(u,e,c),f(e,n),q(i,n,null),f(n,o),f(n,r),f(r,l),a=!0},p(u,c){(!a||c[0]&16384)&&s!==(s=u[14]("Loading...")+"")&&M(l,s)},i(u){a||(b(i.$$.fragment,u),a=!0)},o(u){S(i.$$.fragment,u),a=!1},d(u){u&&v(e),W(i)}}}function zl(t){let e,n,i,o,r,s=t[14]("Started chatting on %1",t[3].historyStartAt.getHumanDate())+"",l,a;return i=new de({props:{name:"calendar-alt"}}),{c(){e=_("div"),n=_("span"),G(i.$$.fragment),o=C(),r=_("i"),l=O(s),k(e,"class","message__status-line for-start-of-history")},m(u,c){w(u,e,c),f(e,n),q(i,n,null),f(n,o),f(n,r),f(r,l),a=!0},p(u,c){(!a||c[0]&16392)&&s!==(s=u[14]("Started chatting on %1",u[3].historyStartAt.getHumanDate())+"")&&M(l,s)},i(u){a||(b(i.$$.fragment,u),a=!0)},o(u){S(i.$$.fragment,u),a=!1},d(u){u&&v(e),W(i)}}}function Hl(t){let e,n,i,o,r,s=t[40].ts.getHumanDate()+"",l,a;return i=new de({props:{name:"calendar-alt"}}),{c(){e=_("div"),n=_("span"),G(i.$$.fragment),o=C(),r=_("i"),l=O(s),k(e,"class","message__status-line for-day-changed")},m(u,c){w(u,e,c),f(e,n),q(i,n,null),f(n,o),f(n,r),f(r,l),a=!0},p(u,c){(!a||c[0]&131072)&&s!==(s=u[40].ts.getHumanDate()+"")&&M(l,s)},i(u){a||(b(i.$$.fragment,u),a=!0)},o(u){S(i.$$.fragment,u),a=!1},d(u){u&&v(e),W(i)}}}function ql(t){let e,n,i,o,r=t[14]("New messages")+"",s,l;return i=new de({props:{name:"comments"}}),{c(){e=_("div"),n=_("span"),G(i.$$.fragment),o=C(),s=O(r),k(e,"class","message__status-line for-last-read")},m(a,u){w(a,e,u),f(e,n),q(i,n,null),f(n,o),f(n,s),l=!0},p(a,u){(!l||u[0]&16384)&&r!==(r=a[14]("New messages")+"")&&M(s,r)},i(a){l||(b(i.$$.fragment,a),l=!0)},o(a){S(i.$$.fragment,a),l=!1},d(a){a&&v(e),W(i)}}}function Wl(t){let e,n,i,o;return n=new de({props:{name:t[40].expanded?"caret-square-up":"caret-square-down"}}),{c(){e=_("a"),G(n.$$.fragment),k(e,"href",i="#action:expand:"+t[40].index)},m(r,s){w(r,e,s),q(n,e,null),o=!0},p(r,s){const l={};s[0]&131072&&(l.name=r[40].expanded?"caret-square-up":"caret-square-down"),n.$set(l),(!o||s[0]&131072&&i!==(i="#action:expand:"+r[40].index))&&k(e,"href",i)},i(r){o||(b(n.$$.fragment,r),o=!0)},o(r){S(n.$$.fragment,r),o=!1},d(r){r&&v(e),W(n)}}}function Ig(t){return{c:Oe,m:Oe,p:Oe,d:Oe}}function Lg(t){let e,n,i,o,r,s;return{c(){e=_("div"),o=C(),k(e,"class",n="embed "+t[46].className)},m(l,a){w(l,e,a),w(l,o,a),r||(s=Lr(i=Xg.call(null,e,t[46])),r=!0)},p(l,a){t=l,a[0]&131072&&n!==(n="embed "+t[46].className)&&k(e,"class",n),i&&Un(i.update)&&a[0]&131072&&i.update.call(null,t[46])},d(l){l&&(v(e),v(o)),r=!1,s()}}}function Pg(t){return{c:Oe,m:Oe,p:Oe,d:Oe}}function Gl(t){let e,n,i={ctx:t,current:null,token:null,hasCatch:!1,pending:Pg,then:Lg,catch:Ig,value:46};return mr(n=t[43],i),{c(){e=ft(),i.block.c()},m(o,r){w(o,e,r),i.block.m(o,i.anchor=r),i.mount=()=>e.parentNode,i.anchor=e},p(o,r){t=o,i.ctx=t,r[0]&131072&&n!==(n=t[43])&&mr(n,i)||bu(i,t,r)},d(o){o&&v(e),i.block.d(o),i.token=null,i=null}}}function Kl(t){let e,n,i,o,r=t[40].from+"",s,l,a,u,c,p,d=t[14]("Mention")+"",h,m,g,y,$,E,T=t[14]("Chat")+"",K,L,A,I,z,F,V=t[14]("Whois")+"",j,B,H,J;return i=new de({props:{name:"pick:"+t[40].from,color:t[40].color}}),c=new de({props:{name:"quote-left"}}),$=new de({props:{name:"comments"}}),z=new de({props:{name:"address-card"}}),{c(){e=_("div"),n=_("a"),G(i.$$.fragment),o=C(),s=O(r),a=C(),u=_("a"),G(c.$$.fragment),p=C(),h=O(d),g=C(),y=_("a"),G($.$$.fragment),E=C(),K=O(T),A=C(),I=_("a"),G(z.$$.fragment),F=C(),j=O(V),k(n,"href",l="#action:popover:"+t[40].index),k(u,"href",m="#action:mention:"+encodeURIComponent(t[40].from)),k(u,"class","on-hover"),k(y,"href",L="#action:join:"+encodeURIComponent(t[40].from)),k(y,"class","on-hover"),k(I,"href",B="#action:whois:"+encodeURIComponent(t[40].from)),k(I,"class","on-hover"),k(e,"class","popover")},m(D,P){w(D,e,P),f(e,n),q(i,n,null),f(n,o),f(n,s),f(e,a),f(e,u),q(c,u,null),f(u,p),f(u,h),f(e,g),f(e,y),q($,y,null),f(y,E),f(y,K),f(e,A),f(e,I),q(z,I,null),f(I,F),f(I,j),J=!0},p(D,P){const N={};P[0]&131072&&(N.name="pick:"+D[40].from),P[0]&131072&&(N.color=D[40].color),i.$set(N),(!J||P[0]&131072)&&r!==(r=D[40].from+"")&&M(s,r),(!J||P[0]&131072&&l!==(l="#action:popover:"+D[40].index))&&k(n,"href",l),(!J||P[0]&16384)&&d!==(d=D[14]("Mention")+"")&&M(h,d),(!J||P[0]&131072&&m!==(m="#action:mention:"+encodeURIComponent(D[40].from)))&&k(u,"href",m),(!J||P[0]&16384)&&T!==(T=D[14]("Chat")+"")&&M(K,T),(!J||P[0]&131072&&L!==(L="#action:join:"+encodeURIComponent(D[40].from)))&&k(y,"href",L),(!J||P[0]&16384)&&V!==(V=D[14]("Whois")+"")&&M(j,V),(!J||P[0]&131072&&B!==(B="#action:whois:"+encodeURIComponent(D[40].from)))&&k(I,"href",B)},i(D){J||(b(i.$$.fragment,D),b(c.$$.fragment,D),b($.$$.fragment,D),b(z.$$.fragment,D),D&&at(()=>{J&&(H||(H=et(e,Bt,{duration:200},!0)),H.run(1))}),J=!0)},o(D){S(i.$$.fragment,D),S(c.$$.fragment,D),S($.$$.fragment,D),S(z.$$.fragment,D),D&&(H||(H=et(e,Bt,{duration:200},!1)),H.run(0)),J=!1},d(D){D&&v(e),W(i),W(c),W($),W(z),D&&H&&H.end()}}}function Yl(t){let e,n,i,o,r,s=t[40].ts.format("%H:%M")+"",l,a,u,c=Tt(t[40].ts.toLocaleString())+"",p,d,h,m,g,y=t[40].from+"",$,E,T,K,L,A,I=t[40].html+"",z,F,V,j,B,H,J,D=t[40].dayChanged&&Hl(t),P=t[42]&&t[42]===t[17].length-t[3].unread&&ql(t);h=new de({props:{name:"pick:"+t[40].from,color:t[40].color}});let N=t[40].details&&Wl(t),Z=xe(t[40].embeds),Y=[];for(let R=0;R<Z.length;R+=1)Y[R]=Gl(Ul(t,Z,R));let U=t[7]===t[40].index&&Kl(t);return{c(){D&&D.c(),e=C(),P&&P.c(),n=C(),i=_("div"),o=_("div"),r=_("span"),l=O(s),a=C(),u=_("span"),p=O(c),d=C(),G(h.$$.fragment),m=C(),g=_("a"),$=O(y),T=C(),K=_("div"),N&&N.c(),L=C(),A=new At(!1),z=C();for(let R=0;R<Y.length;R+=1)Y[R].c();F=C(),U&&U.c(),V=C(),k(u,"class","tooltip"),k(o,"class","message__ts has-tooltip"),k(g,"href",E="#action:popover:"+t[40].index),k(g,"class","message__from"),Ut(g,"color",t[40].color),k(g,"tabindex","-1"),A.a=null,k(K,"class","message__text"),k(i,"class",j=t[40].className),k(i,"data-index",B=t[40].index),k(i,"data-ts",H=t[40].ts.toISOString()),He(i,"is-not-present",!t[18].get(t[40].from)),He(i,"is-expanded",!!t[40].expanded)},m(R,x){D&&D.m(R,x),w(R,e,x),P&&P.m(R,x),w(R,n,x),w(R,i,x),f(i,o),f(o,r),f(r,l),f(o,a),f(o,u),f(u,p),f(i,d),q(h,i,null),f(i,m),f(i,g),f(g,$),f(i,T),f(i,K),N&&N.m(K,null),f(K,L),A.m(I,K),f(i,z);for(let le=0;le<Y.length;le+=1)Y[le]&&Y[le].m(i,null);f(i,F),U&&U.m(i,null),f(i,V),J=!0},p(R,x){R[40].dayChanged?D?(D.p(R,x),x[0]&131072&&b(D,1)):(D=Hl(R),D.c(),b(D,1),D.m(e.parentNode,e)):D&&(ke(),S(D,1,1,()=>{D=null}),ye()),R[42]&&R[42]===R[17].length-R[3].unread?P?(P.p(R,x),x[0]&131080&&b(P,1)):(P=ql(R),P.c(),b(P,1),P.m(n.parentNode,n)):P&&(ke(),S(P,1,1,()=>{P=null}),ye()),(!J||x[0]&131072)&&s!==(s=R[40].ts.format("%H:%M")+"")&&M(l,s),(!J||x[0]&131072)&&c!==(c=Tt(R[40].ts.toLocaleString())+"")&&M(p,c);const le={};if(x[0]&131072&&(le.name="pick:"+R[40].from),x[0]&131072&&(le.color=R[40].color),h.$set(le),(!J||x[0]&131072)&&y!==(y=R[40].from+"")&&M($,y),(!J||x[0]&131072&&E!==(E="#action:popover:"+R[40].index))&&k(g,"href",E),(!J||x[0]&131072)&&Ut(g,"color",R[40].color),R[40].details?N?(N.p(R,x),x[0]&131072&&b(N,1)):(N=Wl(R),N.c(),b(N,1),N.m(K,L)):N&&(ke(),S(N,1,1,()=>{N=null}),ye()),(!J||x[0]&131072)&&I!==(I=R[40].html+"")&&A.p(I),x[0]&131072){Z=xe(R[40].embeds);let ge;for(ge=0;ge<Z.length;ge+=1){const oe=Ul(R,Z,ge);Y[ge]?Y[ge].p(oe,x):(Y[ge]=Gl(oe),Y[ge].c(),Y[ge].m(i,F))}for(;ge<Y.length;ge+=1)Y[ge].d(1);Y.length=Z.length}R[7]===R[40].index?U?(U.p(R,x),x[0]&131200&&b(U,1)):(U=Kl(R),U.c(),b(U,1),U.m(i,V)):U&&(ke(),S(U,1,1,()=>{U=null}),ye()),(!J||x[0]&131072&&j!==(j=R[40].className))&&k(i,"class",j),(!J||x[0]&131072&&B!==(B=R[40].index))&&k(i,"data-index",B),(!J||x[0]&131072&&H!==(H=R[40].ts.toISOString()))&&k(i,"data-ts",H),(!J||x[0]&393216)&&He(i,"is-not-present",!R[18].get(R[40].from)),(!J||x[0]&131072)&&He(i,"is-expanded",!!R[40].expanded)},i(R){J||(b(D),b(P),b(h.$$.fragment,R),b(N),b(U),J=!0)},o(R){S(D),S(P),S(h.$$.fragment,R),S(N),S(U),J=!1},d(R){R&&(v(e),v(n),v(i)),D&&D.d(R),P&&P.d(R),W(h),N&&N.d(),kt(Y,R),U&&U.d()}}}function Dg(t){let e,n,i,o,r=El(t[19],t[3])+"",s,l;return i=new de({props:{name:"exclamation-triangle"}}),{c(){e=_("div"),n=_("div"),G(i.$$.fragment),o=C(),s=O(r),k(n,"class","message__text"),k(e,"class","message is-highlighted")},m(a,u){w(a,e,u),f(e,n),q(i,n,null),f(n,o),f(n,s),l=!0},p(a,u){(!l||u[0]&524296)&&r!==(r=El(a[19],a[3])+"")&&M(s,r)},i(a){l||(b(i.$$.fragment,a),l=!0)},o(a){S(i.$$.fragment,a),l=!1},d(a){a&&v(e),W(i)}}}function Ug(t){let e,n=t[14]("You are invited to join %1.",t[1].name)+"",i,o,r,s=t[14]("Do you want to join?")+"",l,a,u,c,p,d,h;return c=new Ke({props:{href:"#action:join:"+t[13],class:"btn",$$slots:{default:[zg]},$$scope:{ctx:t}}}),d=new Ke({props:{href:"/settings/conversation",class:"btn is-secondary",$$slots:{default:[Hg]},$$scope:{ctx:t}}}),{c(){e=_("h2"),i=O(n),o=C(),r=_("p"),l=O(s),a=C(),u=_("p"),G(c.$$.fragment),p=C(),G(d.$$.fragment)},m(m,g){w(m,e,g),f(e,i),w(m,o,g),w(m,r,g),f(r,l),w(m,a,g),w(m,u,g),q(c,u,null),f(u,p),q(d,u,null),h=!0},p(m,g){(!h||g[0]&16386)&&n!==(n=m[14]("You are invited to join %1.",m[1].name)+"")&&M(i,n),(!h||g[0]&16384)&&s!==(s=m[14]("Do you want to join?")+"")&&M(l,s);const y={};g[0]&8192&&(y.href="#action:join:"+m[13]),g[0]&16384|g[1]&65536&&(y.$$scope={dirty:g,ctx:m}),c.$set(y);const $={};g[0]&16384|g[1]&65536&&($.$$scope={dirty:g,ctx:m}),d.$set($)},i(m){h||(b(c.$$.fragment,m),b(d.$$.fragment,m),h=!0)},o(m){S(c.$$.fragment,m),S(d.$$.fragment,m),h=!1},d(m){m&&(v(e),v(o),v(r),v(a),v(u)),W(c),W(d)}}}function Bg(t){let e,n,i,o,r,s=t[20]("Disconnected. Your connection %1 can be edited in [settings](%2).",t[19].name,"/chat/"+t[19].connection_id+"#settings")+"",l,a,u;return i=new de({props:{name:"exclamation-triangle"}}),{c(){e=_("a"),n=_("div"),G(i.$$.fragment),o=C(),r=new At(!1),r.a=null,k(n,"class","message__text"),k(e,"href","#toggle"),k(e,"class","message is-highlighted")},m(c,p){w(c,e,p),f(e,n),q(i,n,null),f(n,o),r.m(s,n),l=!0,a||(u=Ce(e,"click",Nt.toggle),a=!0)},p(c,p){(!l||p[0]&1572864)&&s!==(s=c[20]("Disconnected. Your connection %1 can be edited in [settings](%2).",c[19].name,"/chat/"+c[19].connection_id+"#settings")+"")&&r.p(s)},i(c){l||(b(i.$$.fragment,c),l=!0)},o(c){S(i.$$.fragment,c),l=!1},d(c){c&&v(e),W(i),a=!1,u()}}}function Fg(t){let e,n=t[14]("You are not part of this conversation.")+"",i,o,r,s=t[14]('Do you want to chat with "%1"?',t[3].name)+"",l,a,u,c,p,d,h;return c=new Ke({props:{href:"#action:join:"+t[13],class:"btn",$$slots:{default:[qg]},$$scope:{ctx:t}}}),d=new Ke({props:{href:"/settings/conversation",class:"btn is-secondary",$$slots:{default:[Wg]},$$scope:{ctx:t}}}),{c(){e=_("h2"),i=O(n),o=C(),r=_("p"),l=O(s),a=C(),u=_("p"),G(c.$$.fragment),p=C(),G(d.$$.fragment)},m(m,g){w(m,e,g),f(e,i),w(m,o,g),w(m,r,g),f(r,l),w(m,a,g),w(m,u,g),q(c,u,null),f(u,p),q(d,u,null),h=!0},p(m,g){(!h||g[0]&16384)&&n!==(n=m[14]("You are not part of this conversation.")+"")&&M(i,n),(!h||g[0]&16392)&&s!==(s=m[14]('Do you want to chat with "%1"?',m[3].name)+"")&&M(l,s);const y={};g[0]&8192&&(y.href="#action:join:"+m[13]),g[0]&16384|g[1]&65536&&(y.$$scope={dirty:g,ctx:m}),c.$set(y);const $={};g[0]&16384|g[1]&65536&&($.$$scope={dirty:g,ctx:m}),d.$set($)},i(m){h||(b(c.$$.fragment,m),b(d.$$.fragment,m),h=!0)},o(m){S(c.$$.fragment,m),S(d.$$.fragment,m),h=!1},d(m){m&&(v(e),v(o),v(r),v(a),v(u)),W(c),W(d)}}}function jg(t){let e,n=t[14]("Connection does not exist.")+"",i,o,r,s=t[14]('Do you want to create the connection "%1"?',t[19].connection_id)+"",l,a,u,c,p,d,h;return c=new Ke({props:{href:"/settings/connections?uri="+encodeURIComponent(t[22](t[3])),class:"btn",$$slots:{default:[Gg]},$$scope:{ctx:t}}}),d=new Ke({props:{href:"/settings/connections",class:"btn is-secondary",$$slots:{default:[Kg]},$$scope:{ctx:t}}}),{c(){e=_("h2"),i=O(n),o=C(),r=_("p"),l=O(s),a=C(),u=_("p"),G(c.$$.fragment),p=C(),G(d.$$.fragment)},m(m,g){w(m,e,g),f(e,i),w(m,o,g),w(m,r,g),f(r,l),w(m,a,g),w(m,u,g),q(c,u,null),f(u,p),q(d,u,null),h=!0},p(m,g){(!h||g[0]&16384)&&n!==(n=m[14]("Connection does not exist.")+"")&&M(i,n),(!h||g[0]&540672)&&s!==(s=m[14]('Do you want to create the connection "%1"?',m[19].connection_id)+"")&&M(l,s);const y={};g[0]&8&&(y.href="/settings/connections?uri="+encodeURIComponent(m[22](m[3]))),g[0]&16384|g[1]&65536&&(y.$$scope={dirty:g,ctx:m}),c.$set(y);const $={};g[0]&16384|g[1]&65536&&($.$$scope={dirty:g,ctx:m}),d.$set($)},i(m){h||(b(c.$$.fragment,m),b(d.$$.fragment,m),h=!0)},o(m){S(c.$$.fragment,m),S(d.$$.fragment,m),h=!1},d(m){m&&(v(e),v(o),v(r),v(a),v(u)),W(c),W(d)}}}function zg(t){let e,n,i,o=t[14]("Yes")+"",r,s;return e=new de({props:{name:"thumbs-up"}}),{c(){G(e.$$.fragment),n=C(),i=_("span"),r=O(o)},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a[0]&16384)&&o!==(o=l[14]("Yes")+"")&&M(r,o)},i(l){s||(b(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){l&&(v(n),v(i)),W(e,l)}}}function Hg(t){let e,n,i,o=t[14]("No")+"",r,s;return e=new de({props:{name:"thumbs-down"}}),{c(){G(e.$$.fragment),n=C(),i=_("span"),r=O(o)},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a[0]&16384)&&o!==(o=l[14]("No")+"")&&M(r,o)},i(l){s||(b(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){l&&(v(n),v(i)),W(e,l)}}}function qg(t){let e,n,i,o=t[14]("Yes")+"",r,s;return e=new de({props:{name:"thumbs-up"}}),{c(){G(e.$$.fragment),n=C(),i=_("span"),r=O(o)},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a[0]&16384)&&o!==(o=l[14]("Yes")+"")&&M(r,o)},i(l){s||(b(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){l&&(v(n),v(i)),W(e,l)}}}function Wg(t){let e,n,i,o=t[14]("No")+"",r,s;return e=new de({props:{name:"thumbs-down"}}),{c(){G(e.$$.fragment),n=C(),i=_("span"),r=O(o)},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a[0]&16384)&&o!==(o=l[14]("No")+"")&&M(r,o)},i(l){s||(b(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){l&&(v(n),v(i)),W(e,l)}}}function Gg(t){let e,n,i=t[14]("Yes")+"",o,r;return e=new de({props:{name:"thumbs-up"}}),{c(){G(e.$$.fragment),n=C(),o=O(i)},m(s,l){q(e,s,l),w(s,n,l),w(s,o,l),r=!0},p(s,l){(!r||l[0]&16384)&&i!==(i=s[14]("Yes")+"")&&M(o,i)},i(s){r||(b(e.$$.fragment,s),r=!0)},o(s){S(e.$$.fragment,s),r=!1},d(s){s&&(v(n),v(o)),W(e,s)}}}function Kg(t){let e,n,i=t[14]("No")+"",o,r;return e=new de({props:{name:"thumbs-down"}}),{c(){G(e.$$.fragment),n=C(),o=O(i)},m(s,l){q(e,s,l),w(s,n,l),w(s,o,l),r=!0},p(s,l){(!r||l[0]&16384)&&i!==(i=s[14]("No")+"")&&M(o,i)},i(s){r||(b(e.$$.fragment,s),r=!0)},o(s){S(e.$$.fragment,s),r=!1},d(s){s&&(v(n),v(o)),W(e,s)}}}function Vl(t){let e,n,i=t[14]("Uploading %1...",t[10].file.name)+"",o,r,s,l,a,u,c,p;return{c(){e=_("div"),n=_("div"),o=O(i),r=C(),s=_("div"),l=_("div"),a=O(t[11]),u=O("%"),k(l,"class","progress__bar"),Ut(l,"width",t[11]+"%"),k(s,"class","progress"),k(e,"class","message")},m(d,h){w(d,e,h),f(e,n),f(n,o),f(e,r),f(e,s),f(s,l),f(l,a),f(l,u),p=!0},p(d,h){(!p||h[0]&17408)&&i!==(i=d[14]("Uploading %1...",d[10].file.name)+"")&&M(o,i),(!p||h[0]&2048)&&M(a,d[11]),(!p||h[0]&2048)&&Ut(l,"width",d[11]+"%")},i(d){p||(d&&at(()=>{p&&(c||(c=et(e,Bt,{duration:200},!0)),c.run(1))}),p=!0)},o(d){d&&(c||(c=et(e,Bt,{duration:200},!1)),c.run(0)),p=!1},d(d){d&&v(e),d&&c&&c.end()}}}function Yg(t){let e,n,i,o,r,s=t[20]('Go to "[account settings](%1)" to enable or disable notifications.',"/settings/account")+"",l;return i=new de({props:{name:"info-circle"}}),{c(){e=_("div"),n=_("div"),G(i.$$.fragment),o=C(),r=new At(!1),r.a=null,k(n,"class","message__text"),k(e,"class","message is-highlighted")},m(a,u){w(a,e,u),f(e,n),q(i,n,null),f(n,o),r.m(s,n),l=!0},p(a,u){(!l||u[0]&1048576)&&s!==(s=a[20]('Go to "[account settings](%1)" to enable or disable notifications.',"/settings/account")+"")&&r.p(s)},i(a){l||(b(i.$$.fragment,a),l=!0)},o(a){S(i.$$.fragment,a),l=!1},d(a){a&&v(e),W(i)}}}function Zl(t){let e,n,i,o,r,s=t[14]("Loading...")+"",l,a;return i=new de({props:{name:"spinner",animation:"spin"}}),{c(){e=_("div"),n=_("span"),G(i.$$.fragment),o=C(),r=_("i"),l=O(s),k(e,"class","message__status-line for-loading has-pos-bottom")},m(u,c){w(u,e,c),f(e,n),q(i,n,null),f(n,o),f(n,r),f(r,l),a=!0},p(u,c){(!a||c[0]&16384)&&s!==(s=u[14]("Loading...")+"")&&M(l,s)},i(u){a||(b(i.$$.fragment,u),a=!0)},o(u){S(i.$$.fragment,u),a=!1},d(u){u&&v(e),W(i)}}}function Jl(t){let e,n,i,o,r=t[14]("Jump to %1",t[6].format("%b %e %H:%M"))+"",s,l,a;return i=new de({props:{name:"external-link-alt"}}),{c(){e=_("div"),n=_("a"),G(i.$$.fragment),o=C(),s=O(r),k(n,"href",l=t[1].path),k(e,"class","message__status-line for-jump-to-now")},m(u,c){w(u,e,c),f(e,n),q(i,n,null),f(n,o),f(n,s),a=!0},p(u,c){(!a||c[0]&16448)&&r!==(r=u[14]("Jump to %1",u[6].format("%b %e %H:%M"))+"")&&M(s,r),(!a||c[0]&2&&l!==(l=u[1].path))&&k(n,"href",l)},i(u){a||(b(i.$$.fragment,u),a=!0)},o(u){S(i.$$.fragment,u),a=!1},d(u){u&&v(e),W(i)}}}function Vg(t){let e=t[17].length<10&&!t[3].is("not_found"),n,i=t[3].is("loading")&&t[17].length>10,o,r=t[3].historyStartAt&&!t[3].is("not_found")&&t[17].length,s,l,a,u,c,p,d,h,m,g,y,$,E=t[3].is("loading"),T,K,L,A=e&&Fl(t),I=i&&jl(t),z=r&&zl(t),F=xe(t[17].render()),V=[];for(let Y=0;Y<F.length;Y+=1)V[Y]=Yl(Dl(t,F,Y));const j=Y=>S(V[Y],1,1,()=>{V[Y]=null}),B=[jg,Fg,Bg,Ug,Dg],H=[];function J(Y,U){return U[0]&524288&&(a=null),U[0]&8&&(u=null),U[0]&524288&&(c=null),U[0]&8&&(p=null),U[0]&8&&(d=null),a==null&&(a=!!Y[19].is("not_found")),a?0:(u==null&&(u=!!Y[3].is("not_found")),u?1:(c==null&&(c=!!(!Y[19].is("unreachable")&&Y[19].frozen)),c?2:(p==null&&(p=!!(Y[3].frozen&&Y[3].is("pending"))),p?3:(d==null&&(d=!!(Y[3].frozen&&!Y[3].is("locked"))),d?4:-1))))}~(h=J(t,[-1,-1]))&&(m=H[h]=B[h](t));let D=t[11]&&Vl(t),P=vt.wantNotifications===null&&Yg(t),N=E&&Zl(t),Z=!t[3].historyStopAt&&t[17].length&&Jl(t);return{c(){A&&A.c(),n=C(),I&&I.c(),o=C(),z&&z.c(),s=C();for(let Y=0;Y<V.length;Y+=1)V[Y].c();l=C(),m&&m.c(),g=C(),D&&D.c(),y=C(),P&&P.c(),$=C(),N&&N.c(),T=C(),Z&&Z.c(),K=ft()},m(Y,U){A&&A.m(Y,U),w(Y,n,U),I&&I.m(Y,U),w(Y,o,U),z&&z.m(Y,U),w(Y,s,U);for(let R=0;R<V.length;R+=1)V[R]&&V[R].m(Y,U);w(Y,l,U),~h&&H[h].m(Y,U),w(Y,g,U),D&&D.m(Y,U),w(Y,y,U),P&&P.m(Y,U),w(Y,$,U),N&&N.m(Y,U),w(Y,T,U),Z&&Z.m(Y,U),w(Y,K,U),L=!0},p(Y,U){if(U[0]&131080&&(e=Y[17].length<10&&!Y[3].is("not_found")),e?A?(A.p(Y,U),U[0]&131080&&b(A,1)):(A=Fl(Y),A.c(),b(A,1),A.m(n.parentNode,n)):A&&(ke(),S(A,1,1,()=>{A=null}),ye()),U[0]&131080&&(i=Y[3].is("loading")&&Y[17].length>10),i?I?(I.p(Y,U),U[0]&131080&&b(I,1)):(I=jl(Y),I.c(),b(I,1),I.m(o.parentNode,o)):I&&(ke(),S(I,1,1,()=>{I=null}),ye()),U[0]&131080&&(r=Y[3].historyStartAt&&!Y[3].is("not_found")&&Y[17].length),r?z?(z.p(Y,U),U[0]&131080&&b(z,1)):(z=zl(Y),z.c(),b(z,1),z.m(s.parentNode,s)):z&&(ke(),S(z,1,1,()=>{z=null}),ye()),U[0]&409736){F=xe(Y[17].render());let x;for(x=0;x<F.length;x+=1){const le=Dl(Y,F,x);V[x]?(V[x].p(le,U),b(V[x],1)):(V[x]=Yl(le),V[x].c(),b(V[x],1),V[x].m(l.parentNode,l))}for(ke(),x=F.length;x<V.length;x+=1)j(x);ye()}let R=h;h=J(Y,U),h===R?~h&&H[h].p(Y,U):(m&&(ke(),S(H[R],1,1,()=>{H[R]=null}),ye()),~h?(m=H[h],m?m.p(Y,U):(m=H[h]=B[h](Y),m.c()),b(m,1),m.m(g.parentNode,g)):m=null),Y[11]?D?(D.p(Y,U),U[0]&2048&&b(D,1)):(D=Vl(Y),D.c(),b(D,1),D.m(y.parentNode,y)):D&&(ke(),S(D,1,1,()=>{D=null}),ye()),vt.wantNotifications===null&&P.p(Y,U),U[0]&8&&(E=Y[3].is("loading")),E?N?(N.p(Y,U),U[0]&8&&b(N,1)):(N=Zl(Y),N.c(),b(N,1),N.m(T.parentNode,T)):N&&(ke(),S(N,1,1,()=>{N=null}),ye()),!Y[3].historyStopAt&&Y[17].length?Z?(Z.p(Y,U),U[0]&131080&&b(Z,1)):(Z=Jl(Y),Z.c(),b(Z,1),Z.m(K.parentNode,K)):Z&&(ke(),S(Z,1,1,()=>{Z=null}),ye())},i(Y){if(!L){b(A),b(I),b(z);for(let U=0;U<F.length;U+=1)b(V[U]);b(m),b(D),b(P),b(N),b(Z),L=!0}},o(Y){S(A),S(I),S(z),V=V.filter(Boolean);for(let U=0;U<V.length;U+=1)S(V[U]);S(m),S(D),S(P),S(N),S(Z),L=!1},d(Y){Y&&(v(n),v(o),v(s),v(l),v(g),v(y),v($),v(T),v(K)),A&&A.d(Y),I&&I.d(Y),z&&z.d(Y),kt(V,Y),~h&&H[h].d(Y),D&&D.d(Y),P&&P.d(Y),N&&N.d(Y),Z&&Z.d(Y)}}}function Ql(t){let e,n,i,o;const r=[Jg,Zg],s=[];function l(a,u){return a[0]?0:1}return e=l(t),n=s[e]=r[e](t),{c(){n.c(),i=ft()},m(a,u){s[e].m(a,u),w(a,i,u),o=!0},p(a,u){let c=e;e=l(a),e===c?s[e].p(a,u):(ke(),S(s[c],1,1,()=>{s[c]=null}),ye(),n=s[e],n?n.p(a,u):(n=s[e]=r[e](a),n.c()),b(n,1),n.m(i.parentNode,i))},i(a){o||(b(n),o=!0)},o(a){S(n),o=!1},d(a){a&&v(i),s[e].d(a)}}}function Zg(t){let e,n;return e=new N_({props:{connection:t[4],conversation:t[1]}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o[0]&16&&(r.connection=i[4]),o[0]&2&&(r.conversation=i[1]),e.$set(r)},i(i){n||(b(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function Jg(t){let e,n;return e=new ng({props:{conversation:t[1]}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o[0]&2&&(r.conversation=i[1]),e.$set(r)},i(i){n||(b(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function Qg(t){let e,n,i,o,r,s,l,a,u,c,p=!t[3].is("not_found"),d,h,m,g;e=new Ft({props:{$$slots:{default:[Mg]},$$scope:{ctx:t}}}),i=new Jr({props:{class:"main is-above-chat-input",$$slots:{default:[Vg]},$$scope:{ctx:t}}}),i.$on("scrolled",t[28]),i.$on("visibility",t[29]);function y(A){t[30](A)}function $(A){t[31](A)}function E(A){t[32](A)}function T(A){t[33](A)}let K={conversation:t[1]};t[9]!==void 0&&(K.fillIn=t[9]),t[8]!==void 0&&(K.focus=t[8]),t[10]!==void 0&&(K.uploader=t[10]),t[11]!==void 0&&(K.uploadProgress=t[11]),r=new Xu({props:K}),fe.push(()=>me(r,"fillIn",y)),fe.push(()=>me(r,"focus",$)),fe.push(()=>me(r,"uploader",E)),fe.push(()=>me(r,"uploadProgress",T));let L=p&&Ql(t);return{c(){G(e.$$.fragment),n=C(),G(i.$$.fragment),o=C(),G(r.$$.fragment),c=C(),L&&L.c(),d=ft()},m(A,I){q(e,A,I),w(A,n,I),q(i,A,I),w(A,o,I),q(r,A,I),w(A,c,I),L&&L.m(A,I),w(A,d,I),h=!0,m||(g=Ce(window,"focus",t[23]),m=!0)},p(A,I){const z={};I[0]&114698|I[1]&65536&&(z.$$scope={dirty:I,ctx:A}),e.$set(z);const F={};I[0]&1993930|I[1]&65536&&(F.$$scope={dirty:I,ctx:A}),i.$set(F);const V={};I[0]&2&&(V.conversation=A[1]),!s&&I[0]&512&&(s=!0,V.fillIn=A[9],he(()=>s=!1)),!l&&I[0]&256&&(l=!0,V.focus=A[8],he(()=>l=!1)),!a&&I[0]&1024&&(a=!0,V.uploader=A[10],he(()=>a=!1)),!u&&I[0]&2048&&(u=!0,V.uploadProgress=A[11],he(()=>u=!1)),r.$set(V),I[0]&8&&(p=!A[3].is("not_found")),p?L?(L.p(A,I),I[0]&8&&b(L,1)):(L=Ql(A),L.c(),b(L,1),L.m(d.parentNode,d)):L&&(ke(),S(L,1,1,()=>{L=null}),ye())},i(A){h||(b(e.$$.fragment,A),b(i.$$.fragment,A),b(r.$$.fragment,A),b(L),h=!0)},o(A){S(e.$$.fragment,A),S(i.$$.fragment,A),S(r.$$.fragment,A),S(L),h=!1},d(A){A&&(v(n),v(o),v(c),v(d)),W(e,A),W(i,A),W(r,A),L&&L.d(A),m=!1,g()}}}function Xg(t,e){const n=e.nodes[0]&&e.nodes[0].parentNode;if(n&&n.classList){const i=n.classList.contains("embed")?"add":"remove";n.classList[i]("hidden")}e.nodes.forEach(i=>t.appendChild(i))}function xg(t,e,n){let i,o,r=Oe,s=()=>(r(),r=_t(B,ee=>n(3,o=ee)),B),l,a,u,c,p,d,h=Oe,m=()=>(h(),h=_t(H,ee=>n(17,d=ee)),H),g,y=Oe,$=()=>(y(),y=_t(J,ee=>n(18,g=ee)),J),E,T=Oe,K=()=>(T(),T=_t(j,ee=>n(19,E=ee)),j),L;ve(t,Ie,ee=>n(26,l=ee)),ve(t,lt,ee=>n(14,u=ee)),ve(t,bn,ee=>n(15,c=ee)),ve(t,Nt,ee=>n(16,p=ee)),ve(t,jt,ee=>n(20,L=ee)),t.$$.on_destroy.push(()=>r()),t.$$.on_destroy.push(()=>h()),t.$$.on_destroy.push(()=>y()),t.$$.on_destroy.push(()=>T());let{connection_id:A=""}=e,{conversation_id:I=""}=e,{title:z="Chat"}=e;const F=new Eg,V=gt("user");ve(t,V,ee=>n(27,a=ee));let j=V.notifications;K();let B=V.notifications;s();let H=B.messages;m();let J=B.participants;$();let D=new $t,P=-1,N={},Z,Y,U,R,x="",le;tn(()=>{F.attach(document.querySelector(".main"),U),le=Ie.on("click",Se)}),Dr(()=>{le(),Object.keys(N).forEach(ee=>N[ee]()),F.detach()});function ge(){const[ee,ue]=o.connection_id.split("-");return ee+"://"+ue+"/"+i+"?tls=1"}function oe(){(B.notifications||B.unread)&&B.markAsRead()}function Se(ee){const ue=ee.target.closest("a[href]");if((!ue||ue.href.indexOf("popover:")===-1)&&n(7,P=-1),!ue)return;if(ue.classList.contains("le-thumbnail"))return Df(ee,ue.querySelector("img"));const Te=ue.hash.match(/action:([a-z]+):(.*)$/)||["all","unknown","value"];if(Te[1]!=="unknown"&&ee.preventDefault(),Te[2]=decodeURIComponent(Te[2]),["join","whois"].indexOf(Te[1])!==-1)B.send("/"+Te[1]+" "+Te[2]);else if(Te[1]==="expand"){const be=B.messages.get(Te[2]);be.expanded=!be.expanded,B.messages.update({messages:!0})}else if(Te[1]==="mention")Y(Te[2]);else if(Te[1]==="popover"){const be=parseInt(Te[2],10);n(7,P=P!==be?be:-1)}else!ue.target&&ue.getAttribute("href").indexOf("/")!==0&&(ue.target="_blank")}function Re(ee,ue){B.connection_id===ee&&B.conversation_id===ue||V.setActiveConversation({connection_id:ee,conversation_id:ue})}function ae(ee){if(ee.activeConversation!==B){if(N.conversation&&N.conversation(),N.unread&&N.unread(),popoverMessage=null,s(n(1,B=ee.activeConversation)),m(n(2,H=B.messages)),$(n(5,J=B.participants)),K(n(4,j=ee.findConversation({connection_id:B.connection_id})||B)),n(6,D=new $t),N.conversation=B.subscribe(ue=>{s(n(1,B=ue))}),N.unread=()=>B.update({unread:0}),B.markAsRead(),n(12,x=vm(Ie.hash)&&Ie.hash||""),x)return B.load({around:x});if(!B.historyStopAt)return B.load({around:D.toISOString()})}}const we=ee=>B_(ee,{conversation:B}),Ue=ee=>F_(ee,{conversation:B,timestampFromUrl:x});function je(ee){Y=ee,n(9,Y)}function De(ee){Z=ee,n(8,Z)}function Ne(ee){U=ee,n(10,U)}function ze(ee){R=ee,n(11,R)}return t.$$set=ee=>{"connection_id"in ee&&n(25,A=ee.connection_id),"conversation_id"in ee&&n(0,I=ee.conversation_id),"title"in ee&&n(24,z=ee.title)},t.$$.update=()=>{t.$$.dirty[0]&33554433&&Re(A,I),t.$$.dirty[0]&134217728&&ae(a),t.$$.dirty[0]&134217732&&H.update({expandUrlToMedia:a.expandUrlToMedia}),t.$$.dirty[0]&8&&n(13,i=encodeURIComponent(o.name)),t.$$.dirty[0]&8&&n(24,z=o.title),t.$$.dirty[0]&67108874&&!l.hash&&!o.historyStopAt&&B.load({})},[I,B,H,o,j,J,D,P,Z,Y,U,R,x,i,u,c,p,d,g,E,L,V,ge,oe,z,A,l,a,we,Ue,je,De,Ne,ze]}class eb extends Xe{constructor(e){super(),Qe(this,e,xg,Qg,Ze,{connection_id:25,conversation_id:0,title:24},null,[-1,-1])}}function tb(t){let e;const n=t[5].default,i=Gt(n,t,t[4],null);return{c(){i&&i.c()},m(o,r){i&&i.m(o,r),e=!0},p(o,r){i&&i.p&&(!e||r&16)&&Yt(i,n,o,o[4],e?Kt(n,o[4],r,null):Vt(o[4]),null)},i(o){e||(b(i,o),e=!0)},o(o){S(i,o),e=!1},d(o){i&&i.d(o)}}}function nb(t){let e=t[3]("Loading...")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&8&&e!==(e=i[3]("Loading...")+"")&&M(n,e)},i:Oe,o:Oe,d(i){i&&v(n)}}}function ib(t){let e,n=t[3](t[2].error())+"",i;return{c(){e=_("div"),i=O(n),k(e,"class","error")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&12&&n!==(n=o[3](o[2].error())+"")&&M(i,n)},i:Oe,o:Oe,d(o){o&&v(e)}}}function ob(t){let e,n,i,o,r,s,l;const a=[ib,nb,tb],u=[];function c(p,d){return d&4&&(i=null),d&4&&(o=null),i==null&&(i=!!p[2].is("error")),i?0:(o==null&&(o=!!p[2].is("loading")),o?1:2)}return r=c(t,-1),s=u[r]=a[r](t),{c(){e=_("tr"),n=_("td"),s.c(),k(n,"colspan",t[0])},m(p,d){w(p,e,d),f(e,n),u[r].m(n,null),l=!0},p(p,[d]){let h=r;r=c(p,d),r===h?u[r].p(p,d):(ke(),S(u[h],1,1,()=>{u[h]=null}),ye(),s=u[r],s?s.p(p,d):(s=u[r]=a[r](p),s.c()),b(s,1),s.m(n,null)),(!l||d&1)&&k(n,"colspan",p[0])},i(p){l||(b(s),l=!0)},o(p){S(s),l=!1},d(p){p&&v(e),u[r].d()}}}function rb(t,e,n){let i,o=Oe,r=()=>(o(),o=_t(c,p=>n(2,i=p)),c),s;ve(t,lt,p=>n(3,s=p)),t.$$.on_destroy.push(()=>o());let{$$slots:l={},$$scope:a}=e,{colspan:u=1}=e,{op:c}=e;return r(),t.$$set=p=>{"colspan"in p&&n(0,u=p.colspan),"op"in p&&r(n(1,c=p.op)),"$$scope"in p&&n(4,a=p.$$scope)},[u,c,i,s,a,l]}class Mo extends Xe{constructor(e){super(),Qe(this,e,rb,ob,Ze,{colspan:0,op:1})}}function Xl(t,e,n){const i=t.slice();return i[9]=e[n],i}function xl(t,e,n){const i=t.slice();return i[12]=e[n],i}function sb(t){let e,n=t[2]("Connections")+"",i;return{c(){e=_("h1"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Connections")+"")&&M(i,n)},d(o){o&&v(e)}}}function lb(t){let e=t[12].host.replace(/:\d+$/,"")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&1&&e!==(e=i[12].host.replace(/:\d+$/,"")+"")&&M(n,e)},d(i){i&&v(n)}}}function ea(t){let e,n,i,o,r,s=(Pe.true(t[12].tls_verify)?t[2]("Strict"):Pe.true(t[12].tls)?t[2]("Yes"):t[2]("No"))+"",l,a,u,c=t[12].nick+"",p,d,h;return i=new Ke({props:{href:"/settings/connection/"+t[12].connection_id,$$slots:{default:[lb]},$$scope:{ctx:t}}}),{c(){e=_("tr"),n=_("td"),G(i.$$.fragment),o=C(),r=_("td"),l=O(s),a=C(),u=_("td"),p=O(c),d=C()},m(m,g){w(m,e,g),f(e,n),q(i,n,null),f(e,o),f(e,r),f(r,l),f(e,a),f(e,u),f(u,p),f(e,d),h=!0},p(m,g){const y={};g&1&&(y.href="/settings/connection/"+m[12].connection_id),g&32769&&(y.$$scope={dirty:g,ctx:m}),i.$set(y),(!h||g&5)&&s!==(s=(Pe.true(m[12].tls_verify)?m[2]("Strict"):Pe.true(m[12].tls)?m[2]("Yes"):m[2]("No"))+"")&&M(l,s),(!h||g&1)&&c!==(c=m[12].nick+"")&&M(p,c)},i(m){h||(b(i.$$.fragment,m),h=!0)},o(m){S(i.$$.fragment,m),h=!1},d(m){m&&v(e),W(i)}}}function ta(t){let e,n,i;return n=new Ke({props:{href:"/settings/connection/add",class:"btn",$$slots:{default:[ab]},$$scope:{ctx:t}}}),{c(){e=_("div"),G(n.$$.fragment),k(e,"class","form-actions")},m(o,r){w(o,e,r),q(n,e,null),i=!0},p(o,r){const s={};r&32772&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){i||(b(n.$$.fragment,o),i=!0)},o(o){S(n.$$.fragment,o),i=!1},d(o){o&&v(e),W(n)}}}function ab(t){let e,n,i,o=t[2]("Add")+"",r,s;return e=new de({props:{name:"plus-circle"}}),{c(){G(e.$$.fragment),n=C(),i=_("span"),r=O(o)},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a&4)&&o!==(o=l[2]("Add")+"")&&M(r,o)},i(l){s||(b(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){l&&(v(n),v(i)),W(e,l)}}}function ub(t){let e=t[9].url.host.replace(/:\d+$/,"")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&8&&e!==(e=i[9].url.host.replace(/:\d+$/,"")+"")&&M(n,e)},d(i){i&&v(n)}}}function na(t){let e,n,i,o,r,s=(Pe.true(t[9].tls_verify)?t[2]("Strict"):Pe.true(t[9].tls)?t[2]("Yes"):t[2]("No"))+"",l,a,u,c=(t[9].is_default?t[2]("Yes"):t[2]("No"))+"",p,d,h,m=(t[9].is_forced?t[2]("Yes"):t[2]("No"))+"",g,y,$;return i=new Ke({props:{href:"/settings/connection-profile/"+t[9].id,$$slots:{default:[ub]},$$scope:{ctx:t}}}),{c(){e=_("tr"),n=_("td"),G(i.$$.fragment),o=C(),r=_("td"),l=O(s),a=C(),u=_("td"),p=O(c),d=C(),h=_("td"),g=O(m),y=C()},m(E,T){w(E,e,T),f(e,n),q(i,n,null),f(e,o),f(e,r),f(r,l),f(e,a),f(e,u),f(u,p),f(e,d),f(e,h),f(h,g),f(e,y),$=!0},p(E,T){const K={};T&8&&(K.href="/settings/connection-profile/"+E[9].id),T&32776&&(K.$$scope={dirty:T,ctx:E}),i.$set(K),(!$||T&12)&&s!==(s=(Pe.true(E[9].tls_verify)?E[2]("Strict"):Pe.true(E[9].tls)?E[2]("Yes"):E[2]("No"))+"")&&M(l,s),(!$||T&12)&&c!==(c=(E[9].is_default?E[2]("Yes"):E[2]("No"))+"")&&M(p,c),(!$||T&12)&&m!==(m=(E[9].is_forced?E[2]("Yes"):E[2]("No"))+"")&&M(g,m)},i(E){$||(b(i.$$.fragment,E),$=!0)},o(E){S(i.$$.fragment,E),$=!1},d(E){E&&v(e),W(i)}}}function ia(t){let e,n,i;return n=new Ke({props:{href:"/settings/connection-profile/add",class:"btn",$$slots:{default:[cb]},$$scope:{ctx:t}}}),{c(){e=_("div"),G(n.$$.fragment),k(e,"class","form-actions")},m(o,r){w(o,e,r),q(n,e,null),i=!0},p(o,r){const s={};r&32772&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){i||(b(n.$$.fragment,o),i=!0)},o(o){S(n.$$.fragment,o),i=!1},d(o){o&&v(e),W(n)}}}function cb(t){let e,n,i,o=t[2]("Add")+"",r,s;return e=new de({props:{name:"plus-circle"}}),{c(){G(e.$$.fragment),n=C(),i=_("span"),r=O(o)},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a&4)&&o!==(o=l[2]("Add")+"")&&M(r,o)},i(l){s||(b(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){l&&(v(n),v(i)),W(e,l)}}}function fb(t){let e,n,i,o,r=t[2]("Connections")+"",s,l,a,u,c,p,d=t[2]("Host")+"",h,m,g,y=t[2]("Secure")+"",$,E,T,K=t[2]("Nick")+"",L,A,I,z,F,V,j=t[2]("Connection profiles")+"",B,H,J,D=t[2]("Connection profiles are used to set up global values for every connection that connect to the same host.")+"",P,N,Z,Y,U,R,x=t[2]("Host")+"",le,ge,oe,Se=t[2]("Secure")+"",Re,ae,we,Ue=t[2]("Default")+"",je,De,Ne,ze=t[2]("Forced")+"",ee,ue,qe,Te,be,Ae,te;e=new Ft({props:{$$slots:{default:[sb]},$$scope:{ctx:t}}});let ce=xe(t[0]),$e=[];for(let ie=0;ie<ce.length;ie+=1)$e[ie]=ea(xl(t,ce,ie));const re=ie=>S($e[ie],1,1,()=>{$e[ie]=null});let _e=(t[1]||!t[4].forced_connection)&&ta(t);Te=new Mo({props:{op:t[5].op}});let Le=xe(t[3].search()),X=[];for(let ie=0;ie<Le.length;ie+=1)X[ie]=na(Xl(t,Le,ie));const Q=ie=>S(X[ie],1,1,()=>{X[ie]=null});let ne=t[1]&&ia(t);return{c(){G(e.$$.fragment),n=C(),i=_("main"),o=_("h2"),s=O(r),l=C(),a=_("table"),u=_("thead"),c=_("tr"),p=_("th"),h=O(d),m=C(),g=_("th"),$=O(y),E=C(),T=_("th"),L=O(K),A=C(),I=_("tbody");for(let ie=0;ie<$e.length;ie+=1)$e[ie].c();z=C(),_e&&_e.c(),F=C(),V=_("h2"),B=O(j),H=C(),J=_("p"),P=O(D),N=C(),Z=_("table"),Y=_("thead"),U=_("tr"),R=_("th"),le=O(x),ge=C(),oe=_("th"),Re=O(Se),ae=C(),we=_("th"),je=O(Ue),De=C(),Ne=_("th"),ee=O(ze),ue=C(),qe=_("tbody"),G(Te.$$.fragment),be=C();for(let ie=0;ie<X.length;ie+=1)X[ie].c();Ae=C(),ne&&ne.c(),k(i,"class","main")},m(ie,pe){q(e,ie,pe),w(ie,n,pe),w(ie,i,pe),f(i,o),f(o,s),f(i,l),f(i,a),f(a,u),f(u,c),f(c,p),f(p,h),f(c,m),f(c,g),f(g,$),f(c,E),f(c,T),f(T,L),f(a,A),f(a,I);for(let We=0;We<$e.length;We+=1)$e[We]&&$e[We].m(I,null);f(i,z),_e&&_e.m(i,null),f(i,F),f(i,V),f(V,B),f(i,H),f(i,J),f(J,P),f(i,N),f(i,Z),f(Z,Y),f(Y,U),f(U,R),f(R,le),f(U,ge),f(U,oe),f(oe,Re),f(U,ae),f(U,we),f(we,je),f(U,De),f(U,Ne),f(Ne,ee),f(Z,ue),f(Z,qe),q(Te,qe,null),f(qe,be);for(let We=0;We<X.length;We+=1)X[We]&&X[We].m(qe,null);f(i,Ae),ne&&ne.m(i,null),te=!0},p(ie,[pe]){const We={};if(pe&32772&&(We.$$scope={dirty:pe,ctx:ie}),e.$set(We),(!te||pe&4)&&r!==(r=ie[2]("Connections")+"")&&M(s,r),(!te||pe&4)&&d!==(d=ie[2]("Host")+"")&&M(h,d),(!te||pe&4)&&y!==(y=ie[2]("Secure")+"")&&M($,y),(!te||pe&4)&&K!==(K=ie[2]("Nick")+"")&&M(L,K),pe&5){ce=xe(ie[0]);let Be;for(Be=0;Be<ce.length;Be+=1){const rt=xl(ie,ce,Be);$e[Be]?($e[Be].p(rt,pe),b($e[Be],1)):($e[Be]=ea(rt),$e[Be].c(),b($e[Be],1),$e[Be].m(I,null))}for(ke(),Be=ce.length;Be<$e.length;Be+=1)re(Be);ye()}if(ie[1]||!ie[4].forced_connection?_e?(_e.p(ie,pe),pe&2&&b(_e,1)):(_e=ta(ie),_e.c(),b(_e,1),_e.m(i,F)):_e&&(ke(),S(_e,1,1,()=>{_e=null}),ye()),(!te||pe&4)&&j!==(j=ie[2]("Connection profiles")+"")&&M(B,j),(!te||pe&4)&&D!==(D=ie[2]("Connection profiles are used to set up global values for every connection that connect to the same host.")+"")&&M(P,D),(!te||pe&4)&&x!==(x=ie[2]("Host")+"")&&M(le,x),(!te||pe&4)&&Se!==(Se=ie[2]("Secure")+"")&&M(Re,Se),(!te||pe&4)&&Ue!==(Ue=ie[2]("Default")+"")&&M(je,Ue),(!te||pe&4)&&ze!==(ze=ie[2]("Forced")+"")&&M(ee,ze),pe&12){Le=xe(ie[3].search());let Be;for(Be=0;Be<Le.length;Be+=1){const rt=Xl(ie,Le,Be);X[Be]?(X[Be].p(rt,pe),b(X[Be],1)):(X[Be]=na(rt),X[Be].c(),b(X[Be],1),X[Be].m(qe,null))}for(ke(),Be=Le.length;Be<X.length;Be+=1)Q(Be);ye()}ie[1]?ne?(ne.p(ie,pe),pe&2&&b(ne,1)):(ne=ia(ie),ne.c(),b(ne,1),ne.m(i,null)):ne&&(ke(),S(ne,1,1,()=>{ne=null}),ye())},i(ie){if(!te){b(e.$$.fragment,ie);for(let pe=0;pe<ce.length;pe+=1)b($e[pe]);b(_e),b(Te.$$.fragment,ie);for(let pe=0;pe<Le.length;pe+=1)b(X[pe]);b(ne),te=!0}},o(ie){S(e.$$.fragment,ie),$e=$e.filter(Boolean);for(let pe=0;pe<$e.length;pe+=1)S($e[pe]);S(_e),S(Te.$$.fragment,ie),X=X.filter(Boolean);for(let pe=0;pe<X.length;pe+=1)S(X[pe]);S(ne),te=!1},d(ie){ie&&(v(n),v(i)),W(e,ie),kt($e,ie),_e&&_e.d(),W(Te),kt(X,ie),ne&&ne.d()}}}function pb(t,e,n){let i,o,r,s;ve(t,lt,d=>n(2,r=d));const l="Connections",a=gt("user");ve(t,a,d=>n(7,o=d));const u=a.connectionProfiles;ve(t,u,d=>n(3,s=d));const c=d=>d.url.toFields({connection_id:d.connection_id});let p=[];return tn(()=>u.load()),t.$$.update=()=>{t.$$.dirty&129&&o.is("success")&&!p.length&&n(0,p=a.connections.toArray().map(c))},n(1,i=a.roles.has("admin")),[p,i,r,s,a,u,l,o]}class db extends Xe{constructor(e){super(),Qe(this,e,pb,fb,Ze,{title:6})}get title(){return this.$$.ctx[6]}}function hb(t){let e,n,i,o,r=Tt(t[4]("See all connection profiles"))+"",s,l;return e=new de({props:{name:"list"}}),n=new de({props:{name:"times"}}),{c(){G(e.$$.fragment),G(n.$$.fragment),i=C(),o=_("span"),s=O(r),k(o,"class","tooltip is-left")},m(a,u){q(e,a,u),q(n,a,u),w(a,i,u),w(a,o,u),f(o,s),l=!0},p(a,u){(!l||u&16)&&r!==(r=Tt(a[4]("See all connection profiles"))+"")&&M(s,r)},i(a){l||(b(e.$$.fragment,a),b(n.$$.fragment,a),l=!0)},o(a){S(e.$$.fragment,a),S(n.$$.fragment,a),l=!1},d(a){a&&(v(i),v(o)),W(e,a),W(n,a)}}}function mb(t){let e,n=(t[0]==="add"?t[4]("Add connection profile"):t[4]("Edit connection profile"))+"",i,o,r,s;return r=new Ke({props:{href:"/settings/connections",class:"btn-hallow can-toggle is-active has-tooltip",$$slots:{default:[hb]},$$scope:{ctx:t}}}),{c(){e=_("h1"),i=O(n),o=C(),G(r.$$.fragment)},m(l,a){w(l,e,a),f(e,i),w(l,o,a),q(r,l,a),s=!0},p(l,a){(!s||a&17)&&n!==(n=(l[0]==="add"?l[4]("Add connection profile"):l[4]("Edit connection profile"))+"")&&M(i,n);const u={};a&33554448&&(u.$$scope={dirty:a,ctx:l}),r.$set(u)},i(l){s||(b(r.$$.fragment,l),s=!0)},o(l){S(r.$$.fragment,l),s=!1},d(l){l&&(v(e),v(o)),W(r,l)}}}function _b(t){let e,n=t[4]("Host and port")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Host and port")+"")&&M(i,n)},d(o){o&&v(e)}}}function gb(t){let e,n=t[4]("Will match connections on hostname.")+"",i;return{c(){e=_("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Will match connections on hostname.")+"")&&M(i,n)},d(o){o&&v(e)}}}function bb(t){let e,n=t[4]("Secure connection (TLS)")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Secure connection (TLS)")+"")&&M(i,n)},d(o){o&&v(e)}}}function vb(t){let e,n=t[4]("Verify certificate (TLS)")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Verify certificate (TLS)")+"")&&M(i,n)},d(o){o&&v(e)}}}function $b(t){let e,n=t[4]("Conversation name")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Conversation name")+"")&&M(i,n)},d(o){o&&v(e)}}}function wb(t){let e,n=t[4]("Service accounts")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Service accounts")+"")&&M(i,n)},d(o){o&&v(e)}}}function kb(t){let e,n=t[4]("Messages from these nicks will be shown in the connection conversation.")+"",i;return{c(){e=_("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Messages from these nicks will be shown in the connection conversation.")+"")&&M(i,n)},d(o){o&&v(e)}}}function yb(t){let e,n=t[4]("Default connection")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Default connection")+"")&&M(i,n)},d(o){o&&v(e)}}}function Sb(t){let e,n=t[4]("Force default connection")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Force default connection")+"")&&M(i,n)},d(o){o&&v(e)}}}function oa(t){let e,n=t[4]("Tick this box if you want to prevent users from creating custom connections.")+"",i,o;return{c(){e=_("p"),i=O(n),k(e,"class","help"),e.hidden=o=!t[1].is_default},m(r,s){w(r,e,s),f(e,i)},p(r,s){s&16&&n!==(n=r[4]("Tick this box if you want to prevent users from creating custom connections.")+"")&&M(i,n),s&2&&o!==(o=!r[1].is_default)&&(e.hidden=o)},d(r){r&&v(e)}}}function Eb(t){let e,n=t[4]("Advanced settings")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Advanced settings")+"")&&M(i,n)},d(o){o&&v(e)}}}function ra(t){let e,n,i,o,r,s,l,a,u,c,p,d,h,m,g=t[4]("This might result in flood ban.")+"",y,$,E;function T(j){t[19](j)}let K={name:"max_bulk_message_size",type:"number",readonly:!t[3],$$slots:{help:[Ab],label:[Cb]},$$scope:{ctx:t}};t[1].max_bulk_message_size!==void 0&&(K.value=t[1].max_bulk_message_size),n=new Je({props:K}),fe.push(()=>me(n,"value",T));function L(j){t[20](j)}let A={name:"max_message_length",type:"number",readonly:!t[3],$$slots:{help:[Nb],label:[Ob]},$$scope:{ctx:t}};t[1].max_message_length!==void 0&&(A.value=t[1].max_message_length),r=new Je({props:A}),fe.push(()=>me(r,"value",L));function I(j){t[21](j)}let z={name:"webirc_password",type:"password",readonly:!t[3],$$slots:{label:[Tb]},$$scope:{ctx:t}};t[1].webirc_password!==void 0&&(z.value=t[1].webirc_password),a=new Je({props:z}),fe.push(()=>me(a,"value",I));function F(j){t[22](j)}let V={name:"skip_queue",disabled:!t[3],$$slots:{label:[Rb]},$$scope:{ctx:t}};return t[1].skip_queue!==void 0&&(V.value=t[1].skip_queue),p=new it({props:V}),fe.push(()=>me(p,"value",F)),{c(){e=_("div"),G(n.$$.fragment),o=C(),G(r.$$.fragment),l=C(),G(a.$$.fragment),c=C(),G(p.$$.fragment),h=C(),m=_("p"),y=O(g),k(m,"class","help"),k(e,"class","form-group")},m(j,B){w(j,e,B),q(n,e,null),f(e,o),q(r,e,null),f(e,l),q(a,e,null),f(e,c),q(p,e,null),f(e,h),f(e,m),f(m,y),E=!0},p(j,B){const H={};B&8&&(H.readonly=!j[3]),B&33554448&&(H.$$scope={dirty:B,ctx:j}),!i&&B&2&&(i=!0,H.value=j[1].max_bulk_message_size,he(()=>i=!1)),n.$set(H);const J={};B&8&&(J.readonly=!j[3]),B&33554448&&(J.$$scope={dirty:B,ctx:j}),!s&&B&2&&(s=!0,J.value=j[1].max_message_length,he(()=>s=!1)),r.$set(J);const D={};B&8&&(D.readonly=!j[3]),B&33554448&&(D.$$scope={dirty:B,ctx:j}),!u&&B&2&&(u=!0,D.value=j[1].webirc_password,he(()=>u=!1)),a.$set(D);const P={};B&8&&(P.disabled=!j[3]),B&33554448&&(P.$$scope={dirty:B,ctx:j}),!d&&B&2&&(d=!0,P.value=j[1].skip_queue,he(()=>d=!1)),p.$set(P),(!E||B&16)&&g!==(g=j[4]("This might result in flood ban.")+"")&&M(y,g)},i(j){E||(b(n.$$.fragment,j),b(r.$$.fragment,j),b(a.$$.fragment,j),b(p.$$.fragment,j),j&&at(()=>{E&&($||($=et(e,Jt,{duration:150},!0)),$.run(1))}),E=!0)},o(j){S(n.$$.fragment,j),S(r.$$.fragment,j),S(a.$$.fragment,j),S(p.$$.fragment,j),j&&($||($=et(e,Jt,{duration:150},!1)),$.run(0)),E=!1},d(j){j&&v(e),W(n),W(r),W(a),W(p),j&&$&&$.end()}}}function Cb(t){let e,n=t[4]("Max number of pasted lines")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Max number of pasted lines")+"")&&M(i,n)},d(o){o&&v(e)}}}function Ab(t){let e,n=t[4]("Setting this value too high might get you banned from the server.")+"",i;return{c(){e=_("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Setting this value too high might get you banned from the server.")+"")&&M(i,n)},d(o){o&&v(e)}}}function Ob(t){let e,n=t[4]("Max message length")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Max message length")+"")&&M(i,n)},d(o){o&&v(e)}}}function Nb(t){let e,n=t[4]("Messages longer than this will be split into multiple messages.")+"",i;return{c(){e=_("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Messages longer than this will be split into multiple messages.")+"")&&M(i,n)},d(o){o&&v(e)}}}function Tb(t){let e,n=t[4]("WEBIRC password")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("WEBIRC password")+"")&&M(i,n)},d(o){o&&v(e)}}}function Rb(t){let e,n=t[4]("Skip connection queue")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Skip connection queue")+"")&&M(i,n)},d(o){o&&v(e)}}}function sa(t){let e,n=t[4]("Only administrators can edit this section.")+"",i;return{c(){e=_("p"),i=O(n),k(e,"class","error")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Only administrators can edit this section.")+"")&&M(i,n)},d(o){o&&v(e)}}}function Mb(t){let e,n;return e=new pt({props:{icon:"plus-circle",op:t[7],$$slots:{default:[Lb]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o&33554448&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(b(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function Ib(t){let e,n,i,o;return e=new pt({props:{icon:"save",op:t[7],disabled:!t[3],$$slots:{default:[Pb]},$$scope:{ctx:t}}}),i=new pt({props:{icon:"trash",type:"button",op:t[6],disabled:!t[3],$$slots:{default:[Db]},$$scope:{ctx:t}}}),i.$on("click",t[8]),{c(){G(e.$$.fragment),n=C(),G(i.$$.fragment)},m(r,s){q(e,r,s),w(r,n,s),q(i,r,s),o=!0},p(r,s){const l={};s&8&&(l.disabled=!r[3]),s&33554448&&(l.$$scope={dirty:s,ctx:r}),e.$set(l);const a={};s&8&&(a.disabled=!r[3]),s&33554448&&(a.$$scope={dirty:s,ctx:r}),i.$set(a)},i(r){o||(b(e.$$.fragment,r),b(i.$$.fragment,r),o=!0)},o(r){S(e.$$.fragment,r),S(i.$$.fragment,r),o=!1},d(r){r&&v(n),W(e,r),W(i,r)}}}function Lb(t){let e,n=t[4]("Add")+"",i;return{c(){e=_("span"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Add")+"")&&M(i,n)},d(o){o&&v(e)}}}function Pb(t){let e,n=t[4]("Update")+"",i;return{c(){e=_("span"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Update")+"")&&M(i,n)},d(o){o&&v(e)}}}function Db(t){let e,n=t[4]("Delete")+"",i;return{c(){e=_("span"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Delete")+"")&&M(i,n)},d(o){o&&v(e)}}}function Ub(t){let e,n,i,o,r,s,l,a,u,c,p,d,h,m,g,y,$,E,T,K,L,A,I,z,F,V,j,B,H,J,D,P,N,Z,Y,U,R,x,le,ge,oe;e=new Ft({props:{$$slots:{default:[mb]},$$scope:{ctx:t}}});function Se(Q){t[11](Q)}let Re={name:"host",placeholder:t[4]("Ex: irc.libera.chat:6697"),readonly:!t[3],$$slots:{help:[gb],label:[_b]},$$scope:{ctx:t}};t[1].host!==void 0&&(Re.value=t[1].host),r=new Je({props:Re}),fe.push(()=>me(r,"value",Se));function ae(Q){t[12](Q)}let we={name:"tls",disabled:!t[3],$$slots:{label:[bb]},$$scope:{ctx:t}};t[1].tls!==void 0&&(we.value=t[1].tls),a=new it({props:we}),fe.push(()=>me(a,"value",ae));function Ue(Q){t[13](Q)}let je={name:"tls_verify",disabled:!t[1].tls||!t[3],hidden:!t[1].tls,$$slots:{label:[vb]},$$scope:{ctx:t}};t[1].tls_verify!==void 0&&(je.value=t[1].tls_verify),p=new it({props:je}),fe.push(()=>me(p,"value",Ue));function De(Q){t[14](Q)}let Ne={name:"conversation_id",placeholder:t[4]("Ex: #convos"),readonly:!t[3],$$slots:{label:[$b]},$$scope:{ctx:t}};t[1].conversation_id!==void 0&&(Ne.value=t[1].conversation_id),m=new Je({props:Ne}),fe.push(()=>me(m,"value",De));function ze(Q){t[15](Q)}let ee={name:"service_accounts",placeholder:t[4]("chanserv, nickserv, ..."),readonly:!t[3],$$slots:{help:[kb],label:[wb]},$$scope:{ctx:t}};t[1].service_accounts!==void 0&&(ee.value=t[1].service_accounts),$=new Je({props:ee}),fe.push(()=>me($,"value",ze));function ue(Q){t[16](Q)}let qe={name:"is_default",disabled:!t[3],$$slots:{label:[yb]},$$scope:{ctx:t}};t[1].is_default!==void 0&&(qe.value=t[1].is_default),K=new it({props:qe}),fe.push(()=>me(K,"value",ue));function Te(Q){t[17](Q)}let be={name:"is_forced",disabled:!t[3],hidden:!t[1].is_default,$$slots:{label:[Sb]},$$scope:{ctx:t}};t[1].is_forced!==void 0&&(be.value=t[1].is_forced),I=new it({props:be}),fe.push(()=>me(I,"value",Te));let Ae=t[3]&&oa(t);function te(Q){t[18](Q)}let ce={icon:"caret",name:"show_advanced_settings",$$slots:{label:[Eb]},$$scope:{ctx:t}};t[2]!==void 0&&(ce.value=t[2]),j=new it({props:ce}),fe.push(()=>me(j,"value",te));let $e=t[2]&&ra(t),re=!t[3]&&sa(t);const _e=[Ib,Mb],Le=[];function X(Q,ne){return Q[0]!=="add"?0:1}return N=X(t),Z=Le[N]=_e[N](t),U=new It({props:{op:t[6],success:"Deleted."}}),x=new It({props:{op:t[7]}}),{c(){G(e.$$.fragment),n=C(),i=_("main"),o=_("form"),G(r.$$.fragment),l=C(),G(a.$$.fragment),c=C(),G(p.$$.fragment),h=C(),G(m.$$.fragment),y=C(),G($.$$.fragment),T=C(),G(K.$$.fragment),A=C(),G(I.$$.fragment),F=C(),Ae&&Ae.c(),V=C(),G(j.$$.fragment),H=C(),$e&&$e.c(),J=C(),re&&re.c(),D=C(),P=_("div"),Z.c(),Y=C(),G(U.$$.fragment),R=C(),G(x.$$.fragment),k(P,"class","form-actions"),k(o,"method","post"),k(i,"class","main")},m(Q,ne){q(e,Q,ne),w(Q,n,ne),w(Q,i,ne),f(i,o),q(r,o,null),f(o,l),q(a,o,null),f(o,c),q(p,o,null),f(o,h),q(m,o,null),f(o,y),q($,o,null),f(o,T),q(K,o,null),f(o,A),q(I,o,null),f(o,F),Ae&&Ae.m(o,null),f(o,V),q(j,o,null),f(o,H),$e&&$e.m(o,null),f(o,J),re&&re.m(o,null),f(o,D),f(o,P),Le[N].m(P,null),f(o,Y),q(U,o,null),f(o,R),q(x,o,null),le=!0,ge||(oe=Ce(o,"submit",st(t[9])),ge=!0)},p(Q,[ne]){const ie={};ne&33554449&&(ie.$$scope={dirty:ne,ctx:Q}),e.$set(ie);const pe={};ne&16&&(pe.placeholder=Q[4]("Ex: irc.libera.chat:6697")),ne&8&&(pe.readonly=!Q[3]),ne&33554448&&(pe.$$scope={dirty:ne,ctx:Q}),!s&&ne&2&&(s=!0,pe.value=Q[1].host,he(()=>s=!1)),r.$set(pe);const We={};ne&8&&(We.disabled=!Q[3]),ne&33554448&&(We.$$scope={dirty:ne,ctx:Q}),!u&&ne&2&&(u=!0,We.value=Q[1].tls,he(()=>u=!1)),a.$set(We);const Be={};ne&10&&(Be.disabled=!Q[1].tls||!Q[3]),ne&2&&(Be.hidden=!Q[1].tls),ne&33554448&&(Be.$$scope={dirty:ne,ctx:Q}),!d&&ne&2&&(d=!0,Be.value=Q[1].tls_verify,he(()=>d=!1)),p.$set(Be);const rt={};ne&16&&(rt.placeholder=Q[4]("Ex: #convos")),ne&8&&(rt.readonly=!Q[3]),ne&33554448&&(rt.$$scope={dirty:ne,ctx:Q}),!g&&ne&2&&(g=!0,rt.value=Q[1].conversation_id,he(()=>g=!1)),m.$set(rt);const St={};ne&16&&(St.placeholder=Q[4]("chanserv, nickserv, ...")),ne&8&&(St.readonly=!Q[3]),ne&33554448&&(St.$$scope={dirty:ne,ctx:Q}),!E&&ne&2&&(E=!0,St.value=Q[1].service_accounts,he(()=>E=!1)),$.$set(St);const Pt={};ne&8&&(Pt.disabled=!Q[3]),ne&33554448&&(Pt.$$scope={dirty:ne,ctx:Q}),!L&&ne&2&&(L=!0,Pt.value=Q[1].is_default,he(()=>L=!1)),K.$set(Pt);const ut={};ne&8&&(ut.disabled=!Q[3]),ne&2&&(ut.hidden=!Q[1].is_default),ne&33554448&&(ut.$$scope={dirty:ne,ctx:Q}),!z&&ne&2&&(z=!0,ut.value=Q[1].is_forced,he(()=>z=!1)),I.$set(ut),Q[3]?Ae?Ae.p(Q,ne):(Ae=oa(Q),Ae.c(),Ae.m(o,V)):Ae&&(Ae.d(1),Ae=null);const Xt={};ne&33554448&&(Xt.$$scope={dirty:ne,ctx:Q}),!B&&ne&4&&(B=!0,Xt.value=Q[2],he(()=>B=!1)),j.$set(Xt),Q[2]?$e?($e.p(Q,ne),ne&4&&b($e,1)):($e=ra(Q),$e.c(),b($e,1),$e.m(o,J)):$e&&(ke(),S($e,1,1,()=>{$e=null}),ye()),Q[3]?re&&(re.d(1),re=null):re?re.p(Q,ne):(re=sa(Q),re.c(),re.m(o,D));let zt=N;N=X(Q),N===zt?Le[N].p(Q,ne):(ke(),S(Le[zt],1,1,()=>{Le[zt]=null}),ye(),Z=Le[N],Z?Z.p(Q,ne):(Z=Le[N]=_e[N](Q),Z.c()),b(Z,1),Z.m(P,null))},i(Q){le||(b(e.$$.fragment,Q),b(r.$$.fragment,Q),b(a.$$.fragment,Q),b(p.$$.fragment,Q),b(m.$$.fragment,Q),b($.$$.fragment,Q),b(K.$$.fragment,Q),b(I.$$.fragment,Q),b(j.$$.fragment,Q),b($e),b(Z),b(U.$$.fragment,Q),b(x.$$.fragment,Q),le=!0)},o(Q){S(e.$$.fragment,Q),S(r.$$.fragment,Q),S(a.$$.fragment,Q),S(p.$$.fragment,Q),S(m.$$.fragment,Q),S($.$$.fragment,Q),S(K.$$.fragment,Q),S(I.$$.fragment,Q),S(j.$$.fragment,Q),S($e),S(Z),S(U.$$.fragment,Q),S(x.$$.fragment,Q),le=!1},d(Q){Q&&(v(n),v(i)),W(e,Q),W(r),W(a),W(p),W(m),W($),W(K),W(I),Ae&&Ae.d(),W(j),$e&&$e.d(),re&&re.d(),Le[N].d(),W(U),W(x),ge=!1,oe()}}}function Bb(t,e,n){let i,o,r;ve(t,lt,B=>n(4,r=B));let{profile_id:s="add"}=e;const l=s==="add"?"Add connection profile":"Edit connection profile",a=gt("user"),u=a.connectionProfiles;ve(t,u,B=>n(23,o=B));const c=nt.op("removeConnectionProfile"),p=nt.op("saveConnectionProfile");let d=u.defaultProfile(),h=!1;tn(async()=>{await u.load(),Object.assign(d,u.defaultProfile(),o.find(s)||{})});async function m(){await c.perform({id:s}),await u.load({force:!0}),await vo(),Ie.go("/settings/connections")}async function g(){["is_default","is_forced","skip_queue"].forEach(B=>n(1,d[B]=!!d[B],d)),n(1,d.service_accounts=Fr(d.service_accounts),d),n(1,d.url=new gn("irc://localhost").fromFields(d).toString(),d),await p.perform(d),!p.is("error")&&(d.is_default&&a.update({default_connection:d.url,forced_connection:d.is_forced}),await u.load({force:!0}),await vo(),Ie.go("/settings/connections"))}function y(B){t.$$.not_equal(d.host,B)&&(d.host=B,n(1,d))}function $(B){t.$$.not_equal(d.tls,B)&&(d.tls=B,n(1,d))}function E(B){t.$$.not_equal(d.tls_verify,B)&&(d.tls_verify=B,n(1,d))}function T(B){t.$$.not_equal(d.conversation_id,B)&&(d.conversation_id=B,n(1,d))}function K(B){t.$$.not_equal(d.service_accounts,B)&&(d.service_accounts=B,n(1,d))}function L(B){t.$$.not_equal(d.is_default,B)&&(d.is_default=B,n(1,d))}function A(B){t.$$.not_equal(d.is_forced,B)&&(d.is_forced=B,n(1,d))}function I(B){h=B,n(2,h)}function z(B){t.$$.not_equal(d.max_bulk_message_size,B)&&(d.max_bulk_message_size=B,n(1,d))}function F(B){t.$$.not_equal(d.max_message_length,B)&&(d.max_message_length=B,n(1,d))}function V(B){t.$$.not_equal(d.webirc_password,B)&&(d.webirc_password=B,n(1,d))}function j(B){t.$$.not_equal(d.skip_queue,B)&&(d.skip_queue=B,n(1,d))}return t.$$set=B=>{"profile_id"in B&&n(0,s=B.profile_id)},n(3,i=a.roles.has("admin")),[s,d,h,i,r,u,c,p,m,g,l,y,$,E,T,K,L,A,I,z,F,V,j]}class Fb extends Xe{constructor(e){super(),Qe(this,e,Bb,Ub,Ze,{profile_id:0,title:10})}get title(){return this.$$.ctx[10]}}function jb(t){let e,n,i,o,r=Tt(t[2]("See all connections"))+"",s,l;return e=new de({props:{name:"list"}}),n=new de({props:{name:"times"}}),{c(){G(e.$$.fragment),G(n.$$.fragment),i=C(),o=_("span"),s=O(r),k(o,"class","tooltip is-left")},m(a,u){q(e,a,u),q(n,a,u),w(a,i,u),w(a,o,u),f(o,s),l=!0},p(a,u){(!l||u&4)&&r!==(r=Tt(a[2]("See all connections"))+"")&&M(s,r)},i(a){l||(b(e.$$.fragment,a),b(n.$$.fragment,a),l=!0)},o(a){S(e.$$.fragment,a),S(n.$$.fragment,a),l=!1},d(a){a&&(v(i),v(o)),W(e,a),W(n,a)}}}function zb(t){let e,n=(t[0]==="add"?t[2]("Add connection"):t[2]("Edit connection"))+"",i,o,r,s;return r=new Ke({props:{href:"/settings/connections",class:"btn-hallow can-toggle is-active has-tooltip",$$slots:{default:[jb]},$$scope:{ctx:t}}}),{c(){e=_("h1"),i=O(n),o=C(),G(r.$$.fragment)},m(l,a){w(l,e,a),f(e,i),w(l,o,a),q(r,l,a),s=!0},p(l,a){(!s||a&5)&&n!==(n=(l[0]==="add"?l[2]("Add connection"):l[2]("Edit connection"))+"")&&M(i,n);const u={};a&36&&(u.$$scope={dirty:a,ctx:l}),r.$set(u)},i(l){s||(b(r.$$.fragment,l),s=!0)},o(l){S(r.$$.fragment,l),s=!1},d(l){l&&(v(e),v(o)),W(r,l)}}}function Hb(t){let e,n,i,o,r;return e=new Ft({props:{$$slots:{default:[zb]},$$scope:{ctx:t}}}),o=new ec({props:{connection:t[1],is_page:!0}}),{c(){G(e.$$.fragment),n=C(),i=_("main"),G(o.$$.fragment),k(i,"class","main")},m(s,l){q(e,s,l),w(s,n,l),w(s,i,l),q(o,i,null),r=!0},p(s,[l]){const a={};l&37&&(a.$$scope={dirty:l,ctx:s}),e.$set(a);const u={};l&2&&(u.connection=s[1]),o.$set(u)},i(s){r||(b(e.$$.fragment,s),b(o.$$.fragment,s),r=!0)},o(s){S(e.$$.fragment,s),S(o.$$.fragment,s),r=!1},d(s){s&&(v(n),v(i)),W(e,s),W(o)}}}function qb(t,e,n){let i,o;ve(t,lt,a=>n(2,o=a));let{connection_id:r="add"}=e;const s=r==="add"?"Add connection":"Edit connection",l=gt("user");return t.$$set=a=>{"connection_id"in a&&n(0,r=a.connection_id)},t.$$.update=()=>{t.$$.dirty&1&&n(1,i=r==="add"?{}:l.findConversation({connection_id:r}))},[r,i,o,s]}class Wb extends Xe{constructor(e){super(),Qe(this,e,qb,Hb,Ze,{connection_id:0,title:3})}get title(){return this.$$.ctx[3]}}function la(t,e,n){const i=t.slice();return i[16]=e[n],i}function Gb(t){let e,n=t[4]("Add conversation")+"",i;return{c(){e=_("h1"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Add conversation")+"")&&M(i,n)},d(o){o&&v(e)}}}function Kb(t){let e,n=t[4]("Connection")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Connection")+"")&&M(i,n)},d(o){o&&v(e)}}}function Yb(t){let e,n=t[4](t[1].conversations.length?"Refresh":"Load")+"",i;return{c(){e=_("span"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&18&&n!==(n=o[4](o[1].conversations.length?"Refresh":"Load")+"")&&M(i,n)},d(o){o&&v(e)}}}function Vb(t){let e,n=t[4]("Conversation name")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Conversation name")+"")&&M(i,n)},d(o){o&&v(e)}}}function Zb(t){let e,n=t[4]("Add")+"",i;return{c(){e=_("span"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Add")+"")&&M(i,n)},d(o){o&&v(e)}}}function aa(t){let e,n,i,o=t[1].error+"",r;return{c(){e=_("p"),n=O(t[0]),i=O(": "),r=O(o),k(e,"class","error")},m(s,l){w(s,e,l),f(e,n),f(e,i),f(e,r)},p(s,l){l&1&&M(n,s[0]),l&2&&o!==(o=s[1].error+"")&&M(r,o)},d(s){s&&v(e)}}}function ua(t){let e,n,i;function o(u,c){return u[1].done?Qb:Jb}let r=o(t),s=r(t),l=xe(t[1].conversations),a=[];for(let u=0;u<l.length;u+=1)a[u]=ca(la(t,l,u));return{c(){e=_("p"),s.c(),n=C(),i=_("div");for(let u=0;u<a.length;u+=1)a[u].c();k(i,"class","conversation-add-list")},m(u,c){w(u,e,c),s.m(e,null),w(u,n,c),w(u,i,c);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(i,null)},p(u,c){if(r===(r=o(u))&&s?s.p(u,c):(s.d(1),s=r(u),s&&(s.c(),s.m(e,null))),c&66){l=xe(u[1].conversations);let p;for(p=0;p<l.length;p+=1){const d=la(u,l,p);a[p]?a[p].p(d,c):(a[p]=ca(d),a[p].c(),a[p].m(i,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=l.length}},d(u){u&&(v(e),v(n),v(i)),s.d(),kt(a,u)}}}function Jb(t){let e=t[4]("Showing %1 of %2 conversations, but the list is still loading.",t[1].conversations.length,t[1].n_conversations)+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&18&&e!==(e=i[4]("Showing %1 of %2 conversations, but the list is still loading.",i[1].conversations.length,i[1].n_conversations)+"")&&M(n,e)},d(i){i&&v(n)}}}function Qb(t){let e=t[4]("Showing %1 of %2 conversations.",t[1].conversations.length,t[1].n_conversations)+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&18&&e!==(e=i[4]("Showing %1 of %2 conversations.",i[1].conversations.length,i[1].n_conversations)+"")&&M(n,e)},d(i){i&&v(n)}}}function ca(t){let e,n,i=t[16].n_users+"",o,r,s,l=t[16].name+"",a,u,c,p=(t[16].topic||"No topic.")+"",d,h,m,g,y;return{c(){e=_("a"),n=_("span"),o=O(i),r=C(),s=_("b"),a=O(l),u=C(),c=_("i"),d=O(p),h=C(),k(n,"class","conversation-add-list__n-users"),k(s,"class","conversation-add-list__name"),k(c,"class","conversation-add-list__title"),k(e,"href",m="#add:"+t[16].name)},m($,E){w($,e,E),f(e,n),f(n,o),f(e,r),f(e,s),f(s,a),f(e,u),f(e,c),f(c,d),f(e,h),g||(y=Ce(e,"click",st(t[6])),g=!0)},p($,E){E&2&&i!==(i=$[16].n_users+"")&&M(o,i),E&2&&l!==(l=$[16].name+"")&&M(a,l),E&2&&p!==(p=($[16].topic||"No topic.")+"")&&M(d,p),E&2&&m!==(m="#add:"+$[16].name)&&k(e,"href",m)},d($){$&&v(e),g=!1,y()}}}function Xb(t){let e,n,i,o,r=t[4]("Enter the name of an exising conversation, or create a new conversation.")+"",s,l,a,u,c,p,d,h,m,g,y,$,E,T,K,L,A,I,z,F,V;e=new Ft({props:{$$slots:{default:[Gb]},$$scope:{ctx:t}}});function j(N){t[11](N)}let B={name:"connection_id",options:t[3],placeholder:t[4]("Select..."),$$slots:{label:[Kb]},$$scope:{ctx:t}};t[0]!==void 0&&(B.value=t[0]),c=new oi({props:B}),fe.push(()=>me(c,"value",j)),m=new pt({props:{type:"button",icon:"sync-alt",disabled:!t[0]||t[1].done===!1,$$slots:{default:[Yb]},$$scope:{ctx:t}}}),m.$on("click",t[7]);function H(N){t[12](N)}let J={name:"conversation_id",placeholder:t[4]("#room or nick"),autocomplete:"off",$$slots:{label:[Vb]},$$scope:{ctx:t}};t[2]!==void 0&&(J.value=t[2]),$=new Je({props:J}),fe.push(()=>me($,"value",H)),$.$on("keyup",t[8]),L=new pt({props:{icon:"comment",disabled:!t[0]||!t[2],$$slots:{default:[Zb]},$$scope:{ctx:t}}});let D=t[1].error&&aa(t),P=t[1].done!==null&&ua(t);return{c(){G(e.$$.fragment),n=C(),i=_("main"),o=_("p"),s=O(r),l=C(),a=_("form"),u=_("div"),G(c.$$.fragment),d=C(),h=_("div"),G(m.$$.fragment),g=C(),y=_("div"),G($.$$.fragment),T=C(),K=_("div"),G(L.$$.fragment),A=C(),D&&D.c(),I=C(),P&&P.c(),k(h,"class","flex-basis-30"),k(u,"class","inputs-side-by-side"),k(K,"class","flex-basis-30"),k(y,"class","inputs-side-by-side"),k(a,"method","post"),k(i,"class","main")},m(N,Z){q(e,N,Z),w(N,n,Z),w(N,i,Z),f(i,o),f(o,s),f(i,l),f(i,a),f(a,u),q(c,u,null),f(u,d),f(u,h),q(m,h,null),f(a,g),f(a,y),q($,y,null),f(y,T),f(y,K),q(L,K,null),f(a,A),D&&D.m(a,null),f(a,I),P&&P.m(a,null),z=!0,F||(V=Ce(a,"submit",st(t[6])),F=!0)},p(N,[Z]){const Y={};Z&524304&&(Y.$$scope={dirty:Z,ctx:N}),e.$set(Y),(!z||Z&16)&&r!==(r=N[4]("Enter the name of an exising conversation, or create a new conversation.")+"")&&M(s,r);const U={};Z&8&&(U.options=N[3]),Z&16&&(U.placeholder=N[4]("Select...")),Z&524304&&(U.$$scope={dirty:Z,ctx:N}),!p&&Z&1&&(p=!0,U.value=N[0],he(()=>p=!1)),c.$set(U);const R={};Z&3&&(R.disabled=!N[0]||N[1].done===!1),Z&524306&&(R.$$scope={dirty:Z,ctx:N}),m.$set(R);const x={};Z&16&&(x.placeholder=N[4]("#room or nick")),Z&524304&&(x.$$scope={dirty:Z,ctx:N}),!E&&Z&4&&(E=!0,x.value=N[2],he(()=>E=!1)),$.$set(x);const le={};Z&5&&(le.disabled=!N[0]||!N[2]),Z&524304&&(le.$$scope={dirty:Z,ctx:N}),L.$set(le),N[1].error?D?D.p(N,Z):(D=aa(N),D.c(),D.m(a,I)):D&&(D.d(1),D=null),N[1].done!==null?P?P.p(N,Z):(P=ua(N),P.c(),P.m(a,null)):P&&(P.d(1),P=null)},i(N){z||(b(e.$$.fragment,N),b(c.$$.fragment,N),b(m.$$.fragment,N),b($.$$.fragment,N),b(L.$$.fragment,N),z=!0)},o(N){S(e.$$.fragment,N),S(c.$$.fragment,N),S(m.$$.fragment,N),S($.$$.fragment,N),S(L.$$.fragment,N),z=!1},d(N){N&&(v(n),v(i)),W(e,N),W(c),W(m),W($),W(L),D&&D.d(),P&&P.d(),F=!1,V()}}}function xb(t,e,n){let i,o,r;ve(t,lt,T=>n(4,r=T));const s="Add conversation",l=gt("socket"),a=gt("user");ve(t,a,T=>n(10,o=T));let u={conversations:[],done:null,n_conversations:0},c="",p="",d;function h(T){const K=T&&T.target&&T.target.closest("a");K&&K.href&&n(2,p=K.href.replace(/.*#add:/,""));const L=a.findConversation({connection_id:c});L&&p&&L.send("/join "+p)}async function m(T){let K="/list"+(p.length?" /"+p+"/":"");T.type==="click"&&u.done&&(K+=" refresh"),d&&clearTimeout(d),l.send({connection_id:c,message:K,method:"send"},L=>{const A=Br(L);n(1,u=A?{conversations:[],done:!0,n_conversations:0,error:A}:L);let I=T.interval?T.interval+500:500;I>2e3&&(I=2e3),!A&&!L.done&&(d=setTimeout(()=>m({interval:I}),I))})}function g(){n(0,c=Ie.param("connection_id")||i[0][0]||""),n(2,p=Ie.param("conversation_id")||"")}const y=Zr(m,250);function $(T){c=T,n(0,c)}function E(T){p=T,n(2,p)}return t.$$.update=()=>{t.$$.dirty&1024&&n(3,i=Array.from(o.connections.keys()).map(T=>[T])),t.$$.dirty&1&&(c||g())},[c,u,p,i,r,a,h,m,y,s,o,$,E]}class e1 extends Xe{constructor(e){super(),Qe(this,e,xb,Xb,Ze,{title:9})}get title(){return this.$$.ctx[9]}}function t1(t){let e,n=t[4]("Yikes! we are so sorry for the inconvenience. Please submit an [issue](%1), if the problem does not go away.","https://github.com/convos-chat/convos/issues")+"",i,o,r,s,l,a=t[2]("Go to start page")+"",u,c;return s=new de({props:{name:"play"}}),{c(){e=_("p"),i=C(),o=_("p"),r=_("a"),G(s.$$.fragment),l=C(),u=O(a),k(r,"href",t[1]),k(r,"target","_self"),k(r,"class","btn")},m(p,d){w(p,e,d),e.innerHTML=n,w(p,i,d),w(p,o,d),f(o,r),q(s,r,null),f(r,l),f(r,u),c=!0},p(p,d){(!c||d&16)&&n!==(n=p[4]("Yikes! we are so sorry for the inconvenience. Please submit an [issue](%1), if the problem does not go away.","https://github.com/convos-chat/convos/issues")+"")&&(e.innerHTML=n),(!c||d&4)&&a!==(a=p[2]("Go to start page")+"")&&M(u,a),(!c||d&2)&&k(r,"href",p[1])},i(p){c||(b(s.$$.fragment,p),c=!0)},o(p){S(s.$$.fragment,p),c=!1},d(p){p&&(v(e),v(i),v(o)),W(s)}}}function n1(t){let e,n=t[2]("The Convos Team have been searching and searching, but the requested page could not be found.")+"",i,o,r,s,l,a,u=t[2]("Go to start page")+"",c,p;return l=new de({props:{name:"play"}}),{c(){e=_("p"),i=O(n),o=C(),r=_("p"),s=_("a"),G(l.$$.fragment),a=C(),c=O(u),k(s,"href",t[1]),k(s,"target","_self"),k(s,"class","btn")},m(d,h){w(d,e,h),f(e,i),w(d,o,h),w(d,r,h),f(r,s),q(l,s,null),f(s,a),f(s,c),p=!0},p(d,h){(!p||h&4)&&n!==(n=d[2]("The Convos Team have been searching and searching, but the requested page could not be found.")+"")&&M(i,n),(!p||h&4)&&u!==(u=d[2]("Go to start page")+"")&&M(c,u),(!p||h&2)&&k(s,"href",d[1])},i(d){p||(b(l.$$.fragment,d),p=!0)},o(d){S(l.$$.fragment,d),p=!1},d(d){d&&(v(e),v(o),v(r)),W(l)}}}function i1(t){let e,n,i,o=t[2]("Downloaded Convos.")+"",r,s,l,a,u,c=t[2]("Started Convos.")+"",p,d,h,m,g,y,$,E,T,K=t[2]("Contact admin")+"",L,A,I;n=new de({props:{name:"download"}}),a=new de({props:{name:"rocket"}});const z=[r1,o1],F=[];function V(B,H){return B[3].error?0:1}h=V(t),m=F[h]=z[h](t),E=new de({props:{name:"paper-plane"}});let j={ctx:t,current:null,token:null,hasCatch:!1,pending:a1,then:l1,catch:s1,blocks:[,,,]};return mr(t[8],j),{c(){e=_("p"),G(n.$$.fragment),i=C(),r=O(o),s=C(),l=_("p"),G(a.$$.fragment),u=C(),p=O(c),d=C(),m.c(),g=C(),y=_("p"),$=_("a"),G(E.$$.fragment),T=C(),L=O(K),A=C(),j.block.c(),k($,"class","btn"),k($,"href",Ve("contact"))},m(B,H){w(B,e,H),q(n,e,null),f(e,i),f(e,r),w(B,s,H),w(B,l,H),q(a,l,null),f(l,u),f(l,p),w(B,d,H),F[h].m(B,H),w(B,g,H),w(B,y,H),f(y,$),q(E,$,null),f($,T),f($,L),f(y,A),j.block.m(y,j.anchor=null),j.mount=()=>y,j.anchor=null,I=!0},p(B,H){t=B,(!I||H&4)&&o!==(o=t[2]("Downloaded Convos.")+"")&&M(r,o),(!I||H&4)&&c!==(c=t[2]("Started Convos.")+"")&&M(p,c);let J=h;h=V(t),h===J?F[h].p(t,H):(ke(),S(F[J],1,1,()=>{F[J]=null}),ye(),m=F[h],m?m.p(t,H):(m=F[h]=z[h](t),m.c()),b(m,1),m.m(g.parentNode,g)),(!I||H&4)&&K!==(K=t[2]("Contact admin")+"")&&M(L,K),bu(j,t,H)},i(B){I||(b(n.$$.fragment,B),b(a.$$.fragment,B),b(m),b(E.$$.fragment,B),b(j.block),I=!0)},o(B){S(n.$$.fragment,B),S(a.$$.fragment,B),S(m),S(E.$$.fragment,B);for(let H=0;H<3;H+=1){const J=j.blocks[H];S(J)}I=!1},d(B){B&&(v(e),v(s),v(l),v(d),v(g),v(y)),W(n),W(a),F[h].d(B),W(E),j.block.d(),j.token=null,j=null}}}function o1(t){let e,n,i,o=t[2]("Loading user data...")+"",r,s;return n=new de({props:{name:"spinner fa-spin"}}),{c(){e=_("p"),G(n.$$.fragment),i=C(),r=O(o)},m(l,a){w(l,e,a),q(n,e,null),f(e,i),f(e,r),s=!0},p(l,a){(!s||a&4)&&o!==(o=l[2]("Loading user data...")+"")&&M(r,o)},i(l){s||(b(n.$$.fragment,l),s=!0)},o(l){S(n.$$.fragment,l),s=!1},d(l){l&&v(e),W(n)}}}function r1(t){let e,n,i,o=t[2]("Loading user data failed: %1",t[2](t[3].error))+"",r,s;return n=new de({props:{name:"exclamation-triangle"}}),{c(){e=_("p"),G(n.$$.fragment),i=C(),r=O(o)},m(l,a){w(l,e,a),q(n,e,null),f(e,i),f(e,r),s=!0},p(l,a){(!s||a&12)&&o!==(o=l[2]("Loading user data failed: %1",l[2](l[3].error))+"")&&M(r,o)},i(l){s||(b(n.$$.fragment,l),s=!0)},o(l){S(n.$$.fragment,l),s=!1},d(l){l&&v(e),W(n)}}}function s1(t){return{c:Oe,m:Oe,p:Oe,i:Oe,o:Oe,d:Oe}}function l1(t){let e,n,i,o=t[2]("Retry")+"",r,s,l;return n=new de({props:{name:"redo"}}),{c(){e=_("a"),G(n.$$.fragment),i=C(),r=O(o),k(e,"href",t[1]),k(e,"target","_self"),k(e,"class","btn is-secondary")},m(a,u){w(a,e,u),q(n,e,null),f(e,i),f(e,r),l=!0},p(a,u){(!l||u&4)&&o!==(o=a[2]("Retry")+"")&&M(r,o),(!l||u&2)&&k(e,"href",a[1])},i(a){l||(b(n.$$.fragment,a),a&&at(()=>{l&&(s||(s=et(e,Bt,{},!0)),s.run(1))}),l=!0)},o(a){S(n.$$.fragment,a),a&&(s||(s=et(e,Bt,{},!1)),s.run(0)),l=!1},d(a){a&&v(e),W(n),a&&s&&s.end()}}}function a1(t){return{c:Oe,m:Oe,p:Oe,i:Oe,o:Oe,d:Oe}}function u1(t){let e,n,i=t[2](t[5][t[0]])+"",o,r,s,l,a;const u=[i1,n1,t1],c=[];function p(d,h){return d[0]==="loading"?0:d[0]==="not_found"?1:2}return s=p(t),l=c[s]=u[s](t),{c(){e=_("main"),n=_("h2"),o=O(i),r=C(),l.c(),k(e,"class","cms-main")},m(d,h){w(d,e,h),f(e,n),f(n,o),f(e,r),c[s].m(e,null),a=!0},p(d,[h]){(!a||h&5)&&i!==(i=d[2](d[5][d[0]])+"")&&M(o,i);let m=s;s=p(d),s===m?c[s].p(d,h):(ke(),S(c[m],1,1,()=>{c[m]=null}),ye(),l=c[s],l?l.p(d,h):(l=c[s]=u[s](d),l.c()),b(l,1),l.m(e,null))},i(d){a||(b(l),a=!0)},o(d){S(l),a=!1},d(d){d&&v(e),c[s].d()}}}function c1(t,e){const n=t.path.match(/\/err\/(\w+)/);return n?n[1]:e.is("pending")||e.is("loading")?"loading":"not_found"}function f1(t,e,n){let i,o,r,s,l,a,u;ve(t,Ie,g=>n(11,s=g)),ve(t,lt,g=>n(2,l=g)),ve(t,jt,g=>n(4,u=g));let{title:c="Loading..."}=e;const p={loading:"Loading...",not_found:"Not Found"},d=gt("socket");ve(t,d,g=>n(3,a=g));const h=gt("user");ve(t,h,g=>n(10,r=g));const m=Uf(5e3);return t.$$set=g=>{"title"in g&&n(9,c=g.title)},t.$$.update=()=>{t.$$.dirty&3072&&n(0,i=c1(s,r)),t.$$.dirty&1&&n(9,c=p[i])},n(1,o=Ie.urlFor(h.email?"/chat":"/login")),[i,o,l,a,u,p,d,h,m,c,r,s]}class nc extends Xe{constructor(e){super(),Qe(this,e,f1,u1,Ze,{title:9})}}function fa(t,e,n){const i=t.slice();return i[5]=e[n],i}function p1(t){let e,n=t[0]("Help")+"",i,o,r,s,l,a=Ve("version")+"",u;return{c(){e=_("h1"),i=O(n),o=C(),r=_("small"),s=_("a"),l=O("v"),u=O(a),k(s,"href",t[2]),k(s,"target","_blank")},m(c,p){w(c,e,p),f(e,i),f(e,o),f(e,r),f(r,s),f(s,l),f(s,u)},p(c,p){p&1&&n!==(n=c[0]("Help")+"")&&M(i,n)},d(c){c&&v(e)}}}function pa(t){let e,n,i=t[0](t[5].description)+"",o;return{c(){e=_("dt"),e.textContent=`${t[5].example}`,n=_("dd"),o=O(i)},m(r,s){w(r,e,s),w(r,n,s),f(n,o)},p(r,s){s&1&&i!==(i=r[0](r[5].description)+"")&&M(o,i)},d(r){r&&(v(e),v(n))}}}function d1(t){let e,n;return{c(){e=_("li"),n=_("a"),n.textContent=`${Ve("organization_name")}`,k(n,"href",Ve("organization_url")),k(n,"target","_blank")},m(i,o){w(i,e,o),f(e,n)},d(i){i&&v(e)}}}function h1(t){let e;return{c(){e=O("Loading")},m(n,i){w(n,e,i)},d(n){n&&v(e)}}}function m1(t){let e;return{c(){e=O("Not found")},m(n,i){w(n,e,i)},d(n){n&&v(e)}}}function _1(t){let e;return{c(){e=O("Unknown")},m(n,i){w(n,e,i)},d(n){n&&v(e)}}}function g1(t){let e,n,i,o,r,s=t[1]('Got any questions? Come and talk to us in the "#convos" channel on https://libera.chat.')+"",l,a,u=t[1]("More information can also be found on https://convos.chat.")+"",c,p,d=t[0]("Quick search")+"",h,m,g,y=t[0]("Pressing `shift+enter` will shift focus between chat input and search in sidebar.")+"",$,E,T,K,L,A=t[0]("Filter conversations with unread messages.")+"",I,z,F,V=t[0]("Filter private conversations with unread messages.")+"",j,B,H,J=t[0]("Filter channels with unread messages.")+"",D,P,N=t[0]("Any other combination")+"",Z,Y,U=t[0]("Filter channels, private conversations or search for a string.")+"",R,x,le,ge=t[0]("Autocomplete")+"",oe,Se,Re,ae=t[0]("The following rules apply when typing a message:")+"",we,Ue,je,De,Ne,ze=t[0]('"@" followed by a character will show matching nicks in the current conversation.')+"",ee,ue,qe,Te=t[0]('":" followed by a character will show matching emojis.')+"",be,Ae,te,ce=t[0]('"/" will show the available commands.')+"",$e,re,_e,Le=t[0]('"#" will show the matching conversation names.')+"",X,Q,ne,ie=t[0]("Text formatting")+"",pe,We,Be,rt=t[0]("Convos supports some special way of formatting text:")+"",St,Pt,ut,Xt,zt,Fn=t[0]("Will be automatically converted into emojis.")+"",jn,yi,wn=t[0]("> some text")+"",Si,zn,Hn=t[0]('A line starting with ">" will be converted into a quote.')+"",qn,Rt,se=t[0]("*some text*, **some text**, ***some text***")+"",Me,kn,nn=t[1]('Using "*" around some text, will convert it into *italic*, **bold** or ***italic bold***.')+"",on,rn=t[0]("`some fragment`")+"",yn,sn,ln=t[1]("Using backticks around some text, will format it as a `code fragment`.")+"",Sn,En,an=t[0]("URLs will be converted to links, and might be embedded in the chat.")+"",un,Cn,cn,fn=t[0]("Available commands")+"",Wn,ts,Ki,Yi=t[1]('Any message starting with a-z is prefixed with "`/quote`", when sending from a connection conversation.')+"",ns,Vi,is,Zi,Ji=t[0]("Other resources")+"",Lo,os,Mt,Po,Ei,Qi=t[0]("Changelog for v%1",Ve("version"))+"",Do,rs,Uo,Ci,Xi=t[0]("Project homepage")+"",Bo,ss,Fo,Ai,xi=t[0]("Bug/issue tracker")+"",jo,ls,zo,Oi,eo=t[0]("Source code")+"",Ho,as,Gc=Ve("organization_name")!=="Convos"&&Ve("organization_url")!=="https://convos.chat",us,qo,Ni,to=t[0]("Contact admin")+"",Wo,cs,no,io=t[0]("Demo error pages")+"",Go,fs,An,Ko,On,ps,Yo,Nn,ds,Vo,Tn,Ge;e=new Ft({props:{$$slots:{default:[p1]},$$scope:{ctx:t}}});let Gn=xe(hn),Et=[];for(let Ee=0;Ee<Gn.length;Ee+=1)Et[Ee]=pa(fa(t,Gn,Ee));let Kn=Gc&&d1();return On=new Ke({props:{href:"/err/loading",$$slots:{default:[h1]},$$scope:{ctx:t}}}),Nn=new Ke({props:{href:"/err/not_found",$$slots:{default:[m1]},$$scope:{ctx:t}}}),Tn=new Ke({props:{href:"/err/unknown",$$slots:{default:[_1]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment),n=C(),i=_("main"),o=_("p"),r=new At(!1),l=C(),a=new At(!1),c=C(),p=_("h2"),h=O(d),m=C(),g=_("p"),$=O(y),E=C(),T=_("dl"),K=_("dt"),K.textContent="+",L=_("dd"),I=O(A),z=_("dt"),z.textContent="+@",F=_("dd"),j=O(V),B=_("dt"),B.textContent="+#",H=_("dd"),D=O(J),P=_("dt"),Z=O(N),Y=_("dd"),R=O(U),x=C(),le=_("h2"),oe=O(ge),Se=C(),Re=_("p"),we=O(ae),Ue=C(),je=_("dl"),De=_("dt"),De.textContent="@nick",Ne=_("dd"),ee=O(ze),ue=_("dt"),ue.textContent=":emoji_name",qe=_("dd"),be=O(Te),Ae=_("dt"),Ae.textContent="/command",te=_("dd"),$e=O(ce),re=_("dt"),re.textContent="#conversation",_e=_("dd"),X=O(Le),Q=C(),ne=_("h2"),pe=O(ie),We=C(),Be=_("p"),St=O(rt),Pt=C(),ut=_("dl"),Xt=_("dt"),zt=_("dd"),jn=O(Fn),yi=_("dt"),Si=O(wn),zn=_("dd"),qn=O(Hn),Rt=_("dt"),Me=O(se),kn=_("dd"),on=_("dt"),yn=O(rn),sn=_("dd"),Sn=_("dt"),Sn.textContent="https://...",En=_("dd"),un=O(an),Cn=C(),cn=_("h2"),Wn=O(fn),ts=C(),Ki=_("p"),ns=C(),Vi=_("dl");for(let Ee=0;Ee<Et.length;Ee+=1)Et[Ee].c();is=C(),Zi=_("h2"),Lo=O(Ji),os=C(),Mt=_("ul"),Po=_("li"),Ei=_("a"),Do=O(Qi),rs=C(),Uo=_("li"),Ci=_("a"),Bo=O(Xi),ss=C(),Fo=_("li"),Ai=_("a"),jo=O(xi),ls=C(),zo=_("li"),Oi=_("a"),Ho=O(eo),as=C(),Kn&&Kn.c(),us=C(),qo=_("li"),Ni=_("a"),Wo=O(to),cs=C(),no=_("h2"),Go=O(io),fs=C(),An=_("ul"),Ko=_("li"),G(On.$$.fragment),ps=C(),Yo=_("li"),G(Nn.$$.fragment),ds=C(),Vo=_("li"),G(Tn.$$.fragment),r.a=l,a.a=null,k(p,"id","quick-search"),k(le,"id","autocomplete"),k(ne,"id","formatting"),k(cn,"id","commands"),k(Zi,"id","resources"),k(Ei,"href",t[2]),k(Ei,"target","_blank"),k(Ci,"href","https://convos.chat"),k(Ci,"target","_blank"),k(Ai,"href","https://github.com/convos-chat/convos/issues"),k(Ai,"target","_blank"),k(Oi,"href","https://github.com/convos-chat/convos"),k(Oi,"target","_blank"),k(Ni,"href",Ve("contact")),k(Ni,"target","_blank"),k(no,"id","fallback"),k(i,"class","main")},m(Ee,Fe){q(e,Ee,Fe),w(Ee,n,Fe),w(Ee,i,Fe),f(i,o),r.m(s,o),f(o,l),a.m(u,o),f(i,c),f(i,p),f(p,h),f(i,m),f(i,g),f(g,$),f(i,E),f(i,T),f(T,K),f(T,L),f(L,I),f(T,z),f(T,F),f(F,j),f(T,B),f(T,H),f(H,D),f(T,P),f(P,Z),f(T,Y),f(Y,R),f(i,x),f(i,le),f(le,oe),f(i,Se),f(i,Re),f(Re,we),f(i,Ue),f(i,je),f(je,De),f(je,Ne),f(Ne,ee),f(je,ue),f(je,qe),f(qe,be),f(je,Ae),f(je,te),f(te,$e),f(je,re),f(je,_e),f(_e,X),f(i,Q),f(i,ne),f(ne,pe),f(i,We),f(i,Be),f(Be,St),f(i,Pt),f(i,ut),f(ut,Xt),Xt.innerHTML=t[3],f(ut,zt),f(zt,jn),f(ut,yi),f(yi,Si),f(ut,zn),f(zn,qn),f(ut,Rt),f(Rt,Me),f(ut,kn),kn.innerHTML=nn,f(ut,on),f(on,yn),f(ut,sn),sn.innerHTML=ln,f(ut,Sn),f(ut,En),f(En,un),f(i,Cn),f(i,cn),f(cn,Wn),f(i,ts),f(i,Ki),Ki.innerHTML=Yi,f(i,ns),f(i,Vi);for(let Rn=0;Rn<Et.length;Rn+=1)Et[Rn]&&Et[Rn].m(Vi,null);f(i,is),f(i,Zi),f(Zi,Lo),f(i,os),f(i,Mt),f(Mt,Po),f(Po,Ei),f(Ei,Do),f(Mt,rs),f(Mt,Uo),f(Uo,Ci),f(Ci,Bo),f(Mt,ss),f(Mt,Fo),f(Fo,Ai),f(Ai,jo),f(Mt,ls),f(Mt,zo),f(zo,Oi),f(Oi,Ho),f(Mt,as),Kn&&Kn.m(Mt,null),f(Mt,us),f(Mt,qo),f(qo,Ni),f(Ni,Wo),f(i,cs),f(i,no),f(no,Go),f(i,fs),f(i,An),f(An,Ko),q(On,Ko,null),f(An,ps),f(An,Yo),q(Nn,Yo,null),f(An,ds),f(An,Vo),q(Tn,Vo,null),Ge=!0},p(Ee,[Fe]){const Rn={};if(Fe&257&&(Rn.$$scope={dirty:Fe,ctx:Ee}),e.$set(Rn),(!Ge||Fe&2)&&s!==(s=Ee[1]('Got any questions? Come and talk to us in the "#convos" channel on https://libera.chat.')+"")&&r.p(s),(!Ge||Fe&2)&&u!==(u=Ee[1]("More information can also be found on https://convos.chat.")+"")&&a.p(u),(!Ge||Fe&1)&&d!==(d=Ee[0]("Quick search")+"")&&M(h,d),(!Ge||Fe&1)&&y!==(y=Ee[0]("Pressing `shift+enter` will shift focus between chat input and search in sidebar.")+"")&&M($,y),(!Ge||Fe&1)&&A!==(A=Ee[0]("Filter conversations with unread messages.")+"")&&M(I,A),(!Ge||Fe&1)&&V!==(V=Ee[0]("Filter private conversations with unread messages.")+"")&&M(j,V),(!Ge||Fe&1)&&J!==(J=Ee[0]("Filter channels with unread messages.")+"")&&M(D,J),(!Ge||Fe&1)&&N!==(N=Ee[0]("Any other combination")+"")&&M(Z,N),(!Ge||Fe&1)&&U!==(U=Ee[0]("Filter channels, private conversations or search for a string.")+"")&&M(R,U),(!Ge||Fe&1)&&ge!==(ge=Ee[0]("Autocomplete")+"")&&M(oe,ge),(!Ge||Fe&1)&&ae!==(ae=Ee[0]("The following rules apply when typing a message:")+"")&&M(we,ae),(!Ge||Fe&1)&&ze!==(ze=Ee[0]('"@" followed by a character will show matching nicks in the current conversation.')+"")&&M(ee,ze),(!Ge||Fe&1)&&Te!==(Te=Ee[0]('":" followed by a character will show matching emojis.')+"")&&M(be,Te),(!Ge||Fe&1)&&ce!==(ce=Ee[0]('"/" will show the available commands.')+"")&&M($e,ce),(!Ge||Fe&1)&&Le!==(Le=Ee[0]('"#" will show the matching conversation names.')+"")&&M(X,Le),(!Ge||Fe&1)&&ie!==(ie=Ee[0]("Text formatting")+"")&&M(pe,ie),(!Ge||Fe&1)&&rt!==(rt=Ee[0]("Convos supports some special way of formatting text:")+"")&&M(St,rt),(!Ge||Fe&1)&&Fn!==(Fn=Ee[0]("Will be automatically converted into emojis.")+"")&&M(jn,Fn),(!Ge||Fe&1)&&wn!==(wn=Ee[0]("> some text")+"")&&M(Si,wn),(!Ge||Fe&1)&&Hn!==(Hn=Ee[0]('A line starting with ">" will be converted into a quote.')+"")&&M(qn,Hn),(!Ge||Fe&1)&&se!==(se=Ee[0]("*some text*, **some text**, ***some text***")+"")&&M(Me,se),(!Ge||Fe&2)&&nn!==(nn=Ee[1]('Using "*" around some text, will convert it into *italic*, **bold** or ***italic bold***.')+"")&&(kn.innerHTML=nn),(!Ge||Fe&1)&&rn!==(rn=Ee[0]("`some fragment`")+"")&&M(yn,rn),(!Ge||Fe&2)&&ln!==(ln=Ee[1]("Using backticks around some text, will format it as a `code fragment`.")+"")&&(sn.innerHTML=ln),(!Ge||Fe&1)&&an!==(an=Ee[0]("URLs will be converted to links, and might be embedded in the chat.")+"")&&M(un,an),(!Ge||Fe&1)&&fn!==(fn=Ee[0]("Available commands")+"")&&M(Wn,fn),(!Ge||Fe&2)&&Yi!==(Yi=Ee[1]('Any message starting with a-z is prefixed with "`/quote`", when sending from a connection conversation.')+"")&&(Ki.innerHTML=Yi),Fe&1){Gn=xe(hn);let Dt;for(Dt=0;Dt<Gn.length;Dt+=1){const gs=fa(Ee,Gn,Dt);Et[Dt]?Et[Dt].p(gs,Fe):(Et[Dt]=pa(gs),Et[Dt].c(),Et[Dt].m(Vi,null))}for(;Dt<Et.length;Dt+=1)Et[Dt].d(1);Et.length=Gn.length}(!Ge||Fe&1)&&Ji!==(Ji=Ee[0]("Other resources")+"")&&M(Lo,Ji),(!Ge||Fe&1)&&Qi!==(Qi=Ee[0]("Changelog for v%1",Ve("version"))+"")&&M(Do,Qi),(!Ge||Fe&1)&&Xi!==(Xi=Ee[0]("Project homepage")+"")&&M(Bo,Xi),(!Ge||Fe&1)&&xi!==(xi=Ee[0]("Bug/issue tracker")+"")&&M(jo,xi),(!Ge||Fe&1)&&eo!==(eo=Ee[0]("Source code")+"")&&M(Ho,eo),(!Ge||Fe&1)&&to!==(to=Ee[0]("Contact admin")+"")&&M(Wo,to),(!Ge||Fe&1)&&io!==(io=Ee[0]("Demo error pages")+"")&&M(Go,io);const hs={};Fe&256&&(hs.$$scope={dirty:Fe,ctx:Ee}),On.$set(hs);const ms={};Fe&256&&(ms.$$scope={dirty:Fe,ctx:Ee}),Nn.$set(ms);const _s={};Fe&256&&(_s.$$scope={dirty:Fe,ctx:Ee}),Tn.$set(_s)},i(Ee){Ge||(b(e.$$.fragment,Ee),b(On.$$.fragment,Ee),b(Nn.$$.fragment,Ee),b(Tn.$$.fragment,Ee),Ge=!0)},o(Ee){S(e.$$.fragment,Ee),S(On.$$.fragment,Ee),S(Nn.$$.fragment,Ee),S(Tn.$$.fragment,Ee),Ge=!1},d(Ee){Ee&&(v(n),v(i)),W(e,Ee),kt(Et,Ee),Kn&&Kn.d(),W(On),W(Nn),W(Tn)}}}function b1(t,e,n){let i,o;ve(t,lt,a=>n(0,i=a)),ve(t,jt,a=>n(1,o=a));const r="Help",s="https://github.com/convos-chat/convos/blob/v"+Ve("version")+"/Changes#L3",l=Object.keys(tt.emojis.aliases).sort().join(", ");return[i,o,s,l,r]}class v1 extends Xe{constructor(e){super(),Qe(this,e,b1,g1,Ze,{title:4})}get title(){return this.$$.ctx[4]}}function da(t,e,n){const i=t.slice();return i[22]=e[n],i}function $1(t){let e,n=t[2]("Sign up")+"",i,o,r,s=t[2]("Please ask your Convos admin for an invite link to sign up, or sign in if you already have an account.")+"",l,a,u,c,p,d,h=t[2]("Contact admin")+"",m,g,y,$;return p=new de({props:{name:"paper-plane"}}),y=new Ke({props:{href:"/login",$$slots:{default:[S1]},$$scope:{ctx:t}}}),{c(){e=_("h2"),i=O(n),o=C(),r=_("p"),l=O(s),a=C(),u=_("div"),c=_("a"),G(p.$$.fragment),d=C(),m=O(h),g=C(),G(y.$$.fragment),k(c,"class","btn"),k(c,"href",Ve("contact")),k(u,"class","form-actions")},m(E,T){w(E,e,T),f(e,i),w(E,o,T),w(E,r,T),f(r,l),w(E,a,T),w(E,u,T),f(u,c),q(p,c,null),f(c,d),f(c,m),f(u,g),q(y,u,null),$=!0},p(E,T){(!$||T&4)&&n!==(n=E[2]("Sign up")+"")&&M(i,n),(!$||T&4)&&s!==(s=E[2]("Please ask your Convos admin for an invite link to sign up, or sign in if you already have an account.")+"")&&M(l,s),(!$||T&4)&&h!==(h=E[2]("Contact admin")+"")&&M(m,h);const K={};T&33554436&&(K.$$scope={dirty:T,ctx:E}),y.$set(K)},i(E){$||(b(p.$$.fragment,E),b(y.$$.fragment,E),$=!0)},o(E){S(p.$$.fragment,E),S(y.$$.fragment,E),$=!1},d(E){E&&(v(e),v(o),v(r),v(a),v(u)),W(p),W(y)}}}function w1(t){let e,n=t[2]("Sign in")+"",i,o,r,s,l,a,u,c,p,d,h,m,g,y,$;function E(A){t[17](A)}let T={type:"email",name:"email",placeholder:t[2]("Ex: john@doe.com"),$$slots:{label:[E1]},$$scope:{ctx:t}};t[0].email!==void 0&&(T.value=t[0].email),r=new Je({props:T}),fe.push(()=>me(r,"value",E));function K(A){t[18](A)}let L={type:"password",name:"password",autocomplete:"current-password",$$slots:{help:[A1],label:[C1]},$$scope:{ctx:t}};return t[0].password!==void 0&&(L.value=t[0].password),a=new Je({props:L}),fe.push(()=>me(a,"value",K)),d=new pt({props:{icon:"sign-in-alt",op:t[6],$$slots:{default:[O1]},$$scope:{ctx:t}}}),m=new Ke({props:{href:"/register",$$slots:{default:[N1]},$$scope:{ctx:t}}}),y=new It({props:{op:t[6],success:"Loading Convos..."}}),{c(){e=_("h2"),i=O(n),o=C(),G(r.$$.fragment),l=C(),G(a.$$.fragment),c=C(),p=_("div"),G(d.$$.fragment),h=C(),G(m.$$.fragment),g=C(),G(y.$$.fragment),k(p,"class","form-actions")},m(A,I){w(A,e,I),f(e,i),w(A,o,I),q(r,A,I),w(A,l,I),q(a,A,I),w(A,c,I),w(A,p,I),q(d,p,null),f(p,h),q(m,p,null),w(A,g,I),q(y,A,I),$=!0},p(A,I){(!$||I&4)&&n!==(n=A[2]("Sign in")+"")&&M(i,n);const z={};I&4&&(z.placeholder=A[2]("Ex: john@doe.com")),I&33554436&&(z.$$scope={dirty:I,ctx:A}),!s&&I&1&&(s=!0,z.value=A[0].email,he(()=>s=!1)),r.$set(z);const F={};I&33554444&&(F.$$scope={dirty:I,ctx:A}),!u&&I&1&&(u=!0,F.value=A[0].password,he(()=>u=!1)),a.$set(F);const V={};I&33554436&&(V.$$scope={dirty:I,ctx:A}),d.$set(V);const j={};I&33554436&&(j.$$scope={dirty:I,ctx:A}),m.$set(j)},i(A){$||(b(r.$$.fragment,A),b(a.$$.fragment,A),b(d.$$.fragment,A),b(m.$$.fragment,A),b(y.$$.fragment,A),$=!0)},o(A){S(r.$$.fragment,A),S(a.$$.fragment,A),S(d.$$.fragment,A),S(m.$$.fragment,A),S(y.$$.fragment,A),$=!1},d(A){A&&(v(e),v(o),v(l),v(c),v(p),v(g)),W(r,A),W(a,A),W(d),W(m),W(y,A)}}}function k1(t){let e,n=(t[1]==="recover"?t[2]("Recover account"):t[2]("Sign up"))+"",i,o,r=Ve("first_user"),s,l,a,u,c,p,d,h,m,g,y,$,E,T,K=!Ve("first_user"),L,A,I,z,F,V=r&&T1(t);function j(P){t[15](P)}let B={type:"email",name:"email",placeholder:t[2]("Ex: john@doe.com"),readonly:t[1]!=="register",$$slots:{help:[M1],label:[R1]},$$scope:{ctx:t}};t[0].email!==void 0&&(B.value=t[0].email),p=new Je({props:B}),fe.push(()=>me(p,"value",j));function H(P){t[16](P)}let J={type:"password",name:"password",$$slots:{help:[L1],label:[I1]},$$scope:{ctx:t}};t[0].password!==void 0&&(J.value=t[0].password),m=new Je({props:J}),fe.push(()=>me(m,"value",H)),E=new pt({props:{icon:"save",op:t[7],$$slots:{default:[P1]},$$scope:{ctx:t}}});let D=K&&D1(t);return A=new It({props:{op:t[7],success:"Loading Convos..."}}),{c(){e=_("h2"),i=O(n),o=C(),V&&V.c(),s=C(),l=_("input"),a=C(),u=_("input"),c=C(),G(p.$$.fragment),h=C(),G(m.$$.fragment),y=C(),$=_("div"),G(E.$$.fragment),T=C(),D&&D.c(),L=C(),G(A.$$.fragment),k(l,"type","hidden"),k(l,"name","exp"),k(u,"type","hidden"),k(u,"name","token"),k($,"class","form-actions")},m(P,N){w(P,e,N),f(e,i),w(P,o,N),V&&V.m(P,N),w(P,s,N),w(P,l,N),Ot(l,t[0].exp),w(P,a,N),w(P,u,N),Ot(u,t[0].token),w(P,c,N),q(p,P,N),w(P,h,N),q(m,P,N),w(P,y,N),w(P,$,N),q(E,$,null),f($,T),D&&D.m($,null),w(P,L,N),q(A,P,N),I=!0,z||(F=[Ce(l,"input",t[13]),Ce(u,"input",t[14])],z=!0)},p(P,N){(!I||N&6)&&n!==(n=(P[1]==="recover"?P[2]("Recover account"):P[2]("Sign up"))+"")&&M(i,n),r&&V.p(P,N),N&1&&Ot(l,P[0].exp),N&1&&Ot(u,P[0].token);const Z={};N&4&&(Z.placeholder=P[2]("Ex: john@doe.com")),N&2&&(Z.readonly=P[1]!=="register"),N&33554438&&(Z.$$scope={dirty:N,ctx:P}),!d&&N&1&&(d=!0,Z.value=P[0].email,he(()=>d=!1)),p.$set(Z);const Y={};N&33554436&&(Y.$$scope={dirty:N,ctx:P}),!g&&N&1&&(g=!0,Y.value=P[0].password,he(()=>g=!1)),m.$set(Y);const U={};N&33554438&&(U.$$scope={dirty:N,ctx:P}),E.$set(U),K&&D.p(P,N)},i(P){I||(b(p.$$.fragment,P),b(m.$$.fragment,P),b(E.$$.fragment,P),b(D),b(A.$$.fragment,P),I=!0)},o(P){S(p.$$.fragment,P),S(m.$$.fragment,P),S(E.$$.fragment,P),S(D),S(A.$$.fragment,P),I=!1},d(P){P&&(v(e),v(o),v(s),v(l),v(a),v(u),v(c),v(h),v(y),v($),v(L)),V&&V.d(P),W(p,P),W(m,P),W(E),D&&D.d(),W(A,P),z=!1,ht(F)}}}function y1(t){let e,n=t[2]("Invalid invite/recover URL")+"",i,o,r,s=t[2](Ve("status")==410?"The link has expired.":"The link is invalid.")+"",l,a,u,c=t[2]("Please ask your Convos admin for a new link.")+"",p,d,h,m,g=t[2]("Contact admin")+"",y,$,E,T;return E=new Ke({props:{href:"/login",$$slots:{default:[B1]},$$scope:{ctx:t}}}),{c(){e=_("h2"),i=O(n),o=C(),r=_("p"),l=O(s),a=C(),u=_("p"),p=O(c),d=C(),h=_("p"),m=_("a"),y=O(g),$=C(),G(E.$$.fragment),k(m,"class","btn"),k(m,"href",Ve("contact"))},m(K,L){w(K,e,L),f(e,i),w(K,o,L),w(K,r,L),f(r,l),w(K,a,L),w(K,u,L),f(u,p),w(K,d,L),w(K,h,L),f(h,m),f(m,y),f(h,$),q(E,h,null),T=!0},p(K,L){(!T||L&4)&&n!==(n=K[2]("Invalid invite/recover URL")+"")&&M(i,n),(!T||L&4)&&s!==(s=K[2](Ve("status")==410?"The link has expired.":"The link is invalid.")+"")&&M(l,s),(!T||L&4)&&c!==(c=K[2]("Please ask your Convos admin for a new link.")+"")&&M(p,c),(!T||L&4)&&g!==(g=K[2]("Contact admin")+"")&&M(y,g);const A={};L&33554436&&(A.$$scope={dirty:L,ctx:K}),E.$set(A)},i(K){T||(b(E.$$.fragment,K),T=!0)},o(K){S(E.$$.fragment,K),T=!1},d(K){K&&(v(e),v(o),v(r),v(a),v(u),v(d),v(h)),W(E)}}}function S1(t){let e=t[2]("Sign in")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&4&&e!==(e=i[2]("Sign in")+"")&&M(n,e)},d(i){i&&v(n)}}}function E1(t){let e,n=t[2]("Email")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Email")+"")&&M(i,n)},d(o){o&&v(e)}}}function C1(t){let e,n=t[2]("Password")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Password")+"")&&M(i,n)},d(o){o&&v(e)}}}function A1(t){let e,n=t[3]("Contact your [Convos admin](%1) if you have forgotten your password.",Ve("contact"))+"";return{c(){e=_("p"),k(e,"class","help"),k(e,"slot","help")},m(i,o){w(i,e,o),e.innerHTML=n},p(i,o){o&8&&n!==(n=i[3]("Contact your [Convos admin](%1) if you have forgotten your password.",Ve("contact"))+"")&&(e.innerHTML=n)},d(i){i&&v(e)}}}function O1(t){let e,n=t[2]("Sign in")+"",i;return{c(){e=_("span"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Sign in")+"")&&M(i,n)},d(o){o&&v(e)}}}function N1(t){let e=t[2]("Sign up")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&4&&e!==(e=i[2]("Sign up")+"")&&M(n,e)},d(i){i&&v(n)}}}function T1(t){let e,n=t[2]('As you are the first user, you do not need any invitation link. Just fill in the form below, hit "Sign up" to start chatting.')+"",i;return{c(){e=_("p"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]('As you are the first user, you do not need any invitation link. Just fill in the form below, hit "Sign up" to start chatting.')+"")&&M(i,n)},d(o){o&&v(e)}}}function R1(t){let e,n=t[2]("Email")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Email")+"")&&M(i,n)},d(o){o&&v(e)}}}function M1(t){let e,n=(t[1]==="invitation"?t[2]("Your email is from the invite link."):t[2]("Your email will be used if you forget your password."))+"",i;return{c(){e=_("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&6&&n!==(n=(o[1]==="invitation"?o[2]("Your email is from the invite link."):o[2]("Your email will be used if you forget your password."))+"")&&M(i,n)},d(o){o&&v(e)}}}function I1(t){let e,n=t[2]("Password")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Password")+"")&&M(i,n)},d(o){o&&v(e)}}}function L1(t){let e,n=t[2]("Hint: Use a phrase from a book.")+"",i;return{c(){e=_("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Hint: Use a phrase from a book.")+"")&&M(i,n)},d(o){o&&v(e)}}}function P1(t){let e,n=(t[1]==="recover"?t[2]("Set new password"):t[2]("Sign up"))+"",i;return{c(){e=_("span"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&6&&n!==(n=(o[1]==="recover"?o[2]("Set new password"):o[2]("Sign up"))+"")&&M(i,n)},d(o){o&&v(e)}}}function D1(t){let e,n;return e=new Ke({props:{href:"/login",$$slots:{default:[U1]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o&33554436&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(b(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function U1(t){let e=t[2]("Sign in")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&4&&e!==(e=i[2]("Sign in")+"")&&M(n,e)},d(i){i&&v(n)}}}function B1(t){let e=t[2]("Sign in")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&4&&e!==(e=i[2]("Sign in")+"")&&M(n,e)},d(i){i&&v(n)}}}function ha(t){let e,n=t[22][1]+"",i,o,r,s;function l(){return t[19](t[22])}return{c(){e=_("a"),i=O(n),k(e,"href",o="#"+t[22][0])},m(a,u){w(a,e,u),f(e,i),r||(s=Ce(e,"click",l),r=!0)},p(a,u){t=a,u&16&&n!==(n=t[22][1]+"")&&M(i,n),u&16&&o!==(o="#"+t[22][0])&&k(e,"href",o)},d(a){a&&v(e),r=!1,s()}}}function F1(t){let e,n,i,o,r,s,l,a,u,c,p,d,h,m,g;const y=[y1,k1,w1,$1],$=[];function E(L,A){return A&2&&(r=null),L[1]==="invalid_invitation"?0:(r==null&&(r=["recover","invitation","register"].indexOf(L[1])!==-1),r?1:L[1]==="login"?2:3)}s=E(t,-1),l=$[s]=y[s](t),p=new de({props:{name:"globe"}});let T=xe(t[4].languageOptions),K=[];for(let L=0;L<T.length;L+=1)K[L]=ha(da(t,T,L));return{c(){e=_("main"),n=_("form"),i=_("input"),o=C(),l.c(),a=C(),u=_("div"),c=_("footer"),G(p.$$.fragment),d=C();for(let L=0;L<K.length;L+=1)K[L].c();k(i,"type","hidden"),k(i,"name","mode"),k(n,"method","post"),k(e,"class","cms-main"),k(c,"class","footer language-selector"),k(u,"class","footer--wrapper is-small")},m(L,A){w(L,e,A),f(e,n),f(n,i),Ot(i,t[0].mode),f(n,o),$[s].m(n,null),w(L,a,A),w(L,u,A),f(u,c),q(p,c,null),f(c,d);for(let I=0;I<K.length;I+=1)K[I]&&K[I].m(c,null);h=!0,m||(g=[Ce(i,"input",t[12]),Ce(n,"submit",st(t[8]))],m=!0)},p(L,[A]){A&1&&Ot(i,L[0].mode);let I=s;if(s=E(L,A),s===I?$[s].p(L,A):(ke(),S($[I],1,1,()=>{$[I]=null}),ye(),l=$[s],l?l.p(L,A):(l=$[s]=y[s](L),l.c()),b(l,1),l.m(n,null)),A&16){T=xe(L[4].languageOptions);let z;for(z=0;z<T.length;z+=1){const F=da(L,T,z);K[z]?K[z].p(F,A):(K[z]=ha(F),K[z].c(),K[z].m(c,null))}for(;z<K.length;z+=1)K[z].d(1);K.length=T.length}},i(L){h||(b(l),b(p.$$.fragment,L),h=!0)},o(L){S(l),S(p.$$.fragment,L),h=!1},d(L){L&&(v(e),v(a),v(u)),$[s].d(),W(p),kt(K,L),m=!1,ht(g)}}}function j1(t,e,n){let i,o,r,s,l,a;ve(t,Ie,F=>n(10,o=F)),ve(t,lt,F=>n(2,s=F)),ve(t,jt,F=>n(3,l=F)),ve(t,tt,F=>n(4,a=F));let{title:u="Sign in"}=e;const c=gt("user");ve(t,c,F=>n(11,r=F));const p=nt.op("loginUser"),d=nt.op("registerUser");let h={};function m(F){if(F.is("loading")||!F.email)return;const V=F.conversations()[0],j=F.lastUrl?F.lastUrl:V?V.path:"/settings/connections";Ie.go(j,{replace:!0})}function g(F){const V=F.path.indexOf("register")!==-1,j=!h.mode&&Ve("status")>=400?"invalid_invitation":F.param("email")&&Ve("existing_user")?"recover":F.param("email")?"invitation":Ve("first_user")||V&&Ve("open_to_public")?"register":V?"invalid":"login";return n(0,h={email:F.param("email")||h.email||"",exp:F.param("exp")||"",mode:j,password:"",token:F.param("token")||""}),n(9,u=j==="login"?"Sign in":"Sign up"),"ontouchstart"in window||setTimeout(()=>wt(document,".text-field input").reverse().map(B=>B.readOnly||B.focus()),1),j}async function y(F){const V=i==="login"?p:d,j=F.target.closest("form");n(0,h.email=j.email.value,h),n(0,h.password=j.password.value,h),await V.perform(h),i!=="login"&&Ie.update({lastUrl:""}),V.error()||await c.load()}function $(){h.mode=this.value,n(0,h)}function E(){h.exp=this.value,n(0,h)}function T(){h.token=this.value,n(0,h)}function K(F){t.$$.not_equal(h.email,F)&&(h.email=F,n(0,h))}function L(F){t.$$.not_equal(h.password,F)&&(h.password=F,n(0,h))}function A(F){t.$$.not_equal(h.email,F)&&(h.email=F,n(0,h))}function I(F){t.$$.not_equal(h.password,F)&&(h.password=F,n(0,h))}const z=F=>a.load(F[0]);return t.$$set=F=>{"title"in F&&n(9,u=F.title)},t.$$.update=()=>{t.$$.dirty&2048&&m(r),t.$$.dirty&1024&&n(1,i=g(o))},[h,i,s,l,a,c,p,d,y,u,o,r,$,E,T,K,L,A,I,z]}class ic extends Xe{constructor(e){super(),Qe(this,e,j1,F1,Ze,{title:9})}}function ma(t,e,n){const i=t.slice();return i[8]=e[n],i[10]=n,i}function z1(t){let e,n;return e=new de({props:{name:"user-cog"}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p:Oe,i(i){n||(b(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function H1(t){let e,n=t[3]("Notifications")+"",i,o,r,s;return r=new Ke({props:{href:"/settings/account",class:"btn-hallow",$$slots:{default:[z1]},$$scope:{ctx:t}}}),{c(){e=_("h1"),i=O(n),o=C(),G(r.$$.fragment)},m(l,a){w(l,e,a),f(e,i),w(l,o,a),q(r,l,a),s=!0},p(l,a){(!s||a&8)&&n!==(n=l[3]("Notifications")+"")&&M(i,n);const u={};a&2048&&(u.$$scope={dirty:a,ctx:l}),r.$set(u)},i(l){s||(b(r.$$.fragment,l),s=!0)},o(l){S(r.$$.fragment,l),s=!1},d(l){l&&(v(e),v(o)),W(r,l)}}}function _a(t){let e,n=t[3]("No notifications.")+"",i;return{c(){e=_("h2"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&8&&n!==(n=o[3]("No notifications.")+"")&&M(i,n)},d(o){o&&v(e)}}}function ga(t){let e,n,i,o,r,s=t[8].ts.getHumanDate()+"",l,a;return i=new de({props:{name:"calendar-alt"}}),{c(){e=_("div"),n=_("span"),G(i.$$.fragment),o=C(),r=_("i"),l=O(s),k(e,"class","message__status-line for-day-changed")},m(u,c){w(u,e,c),f(e,n),q(i,n,null),f(n,o),f(n,r),f(r,l),a=!0},p(u,c){(!a||c&16)&&s!==(s=u[8].ts.getHumanDate()+"")&&M(l,s)},i(u){a||(b(i.$$.fragment,u),a=!0)},o(u){S(i.$$.fragment,u),a=!1},d(u){u&&v(e),W(i)}}}function ba(t){let e,n,i,o,r,s=t[8].from+"",l,a,u,c,p,d=t[8].ts.format("%H:%M")+"",h,m,g,y=Tt(t[8].ts.toLocaleString())+"",$,E,T,K=t[8].html+"",L,A,I,z=(!t[10]||t[8].dayChanged)&&ga(t);return i=new de({props:{name:"pick:"+t[8].from,color:t[8].color}}),{c(){z&&z.c(),e=C(),n=_("div"),G(i.$$.fragment),o=C(),r=_("span"),l=O(s),a=C(),u=_("a"),c=_("div"),p=_("span"),h=O(d),m=C(),g=_("span"),$=O(y),E=C(),T=new At(!1),k(r,"class","message__from"),Ut(r,"color",t[8].color),k(r,"tabindex","-1"),k(g,"class","tooltip"),k(c,"class","message__ts has-tooltip"),T.a=null,k(u,"href",L=Co(t[8])),k(u,"class","svelte-160wt3k"),k(n,"class",A=_o(t[8].className)+" svelte-160wt3k")},m(F,V){z&&z.m(F,V),w(F,e,V),w(F,n,V),q(i,n,null),f(n,o),f(n,r),f(r,l),f(n,a),f(n,u),f(u,c),f(c,p),f(p,h),f(c,m),f(c,g),f(g,$),f(u,E),T.m(K,u),I=!0},p(F,V){!F[10]||F[8].dayChanged?z?(z.p(F,V),V&16&&b(z,1)):(z=ga(F),z.c(),b(z,1),z.m(e.parentNode,e)):z&&(ke(),S(z,1,1,()=>{z=null}),ye());const j={};V&16&&(j.name="pick:"+F[8].from),V&16&&(j.color=F[8].color),i.$set(j),(!I||V&16)&&s!==(s=F[8].from+"")&&M(l,s),(!I||V&16)&&Ut(r,"color",F[8].color),(!I||V&16)&&d!==(d=F[8].ts.format("%H:%M")+"")&&M(h,d),(!I||V&16)&&y!==(y=Tt(F[8].ts.toLocaleString())+"")&&M($,y),(!I||V&16)&&K!==(K=F[8].html+"")&&T.p(K),(!I||V&16&&L!==(L=Co(F[8])))&&k(u,"href",L),(!I||V&16&&A!==(A=_o(F[8].className)+" svelte-160wt3k"))&&k(n,"class",A)},i(F){I||(b(z),b(i.$$.fragment,F),I=!0)},o(F){S(z),S(i.$$.fragment,F),I=!1},d(F){F&&(v(e),v(n)),z&&z.d(F),W(i)}}}function va(t){let e,n,i,o,r,s=t[3]("Loading...")+"",l,a;return i=new de({props:{name:"spinner",animation:"spin"}}),{c(){e=_("div"),n=_("span"),G(i.$$.fragment),o=C(),r=_("i"),l=O(s),k(e,"class","message__status-line for-loading")},m(u,c){w(u,e,c),f(e,n),q(i,n,null),f(n,o),f(n,r),f(r,l),a=!0},p(u,c){(!a||c&8)&&s!==(s=u[3]("Loading...")+"")&&M(l,s)},i(u){a||(b(i.$$.fragment,u),a=!0)},o(u){S(i.$$.fragment,u),a=!1},d(u){u&&v(e),W(i)}}}function q1(t){let e=t[4].length===0&&!t[5].is("loading"),n,i,o=t[1].is("loading"),r,s,l=e&&_a(t),a=xe(t[4].render()),u=[];for(let d=0;d<a.length;d+=1)u[d]=ba(ma(t,a,d));const c=d=>S(u[d],1,1,()=>{u[d]=null});let p=o&&va(t);return{c(){l&&l.c(),n=C();for(let d=0;d<u.length;d+=1)u[d].c();i=C(),p&&p.c(),r=ft()},m(d,h){l&&l.m(d,h),w(d,n,h);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(d,h);w(d,i,h),p&&p.m(d,h),w(d,r,h),s=!0},p(d,h){if(h&16&&(e=d[4].length===0&&!d[5].is("loading")),e?l?l.p(d,h):(l=_a(d),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null),h&16){a=xe(d[4].render());let m;for(m=0;m<a.length;m+=1){const g=ma(d,a,m);u[m]?(u[m].p(g,h),b(u[m],1)):(u[m]=ba(g),u[m].c(),b(u[m],1),u[m].m(i.parentNode,i))}for(ke(),m=a.length;m<u.length;m+=1)c(m);ye()}h&2&&(o=d[1].is("loading")),o?p?(p.p(d,h),h&2&&b(p,1)):(p=va(d),p.c(),b(p,1),p.m(r.parentNode,r)):p&&(ke(),S(p,1,1,()=>{p=null}),ye())},i(d){if(!s){for(let h=0;h<a.length;h+=1)b(u[h]);b(p),s=!0}},o(d){u=u.filter(Boolean);for(let h=0;h<u.length;h+=1)S(u[h]);S(p),s=!1},d(d){d&&(v(n),v(i),v(r)),l&&l.d(d),kt(u,d),p&&p.d(d)}}}function W1(t){let e,n,i,o;return e=new Ft({props:{$$slots:{default:[H1]},$$scope:{ctx:t}}}),i=new Jr({props:{class:t[2].join(" "),$$slots:{default:[q1]},$$scope:{ctx:t}}}),i.$on("rendered",G1),{c(){G(e.$$.fragment),n=C(),G(i.$$.fragment)},m(r,s){q(e,r,s),w(r,n,s),q(i,r,s),o=!0},p(r,[s]){const l={};s&2056&&(l.$$scope={dirty:s,ctx:r}),e.$set(l);const a={};s&4&&(a.class=r[2].join(" ")),s&2074&&(a.$$scope={dirty:s,ctx:r}),i.$set(a)},i(r){o||(b(e.$$.fragment,r),b(i.$$.fragment,r),o=!0)},o(r){S(e.$$.fragment,r),S(i.$$.fragment,r),o=!1},d(r){r&&v(n),W(e,r),W(i,r)}}}const G1=t=>t.detail.scrollTo(-1);function K1(t,e,n){let i,o,r,s,l,a=Oe,u=()=>(a(),a=_t(o,h=>n(4,l=h)),o);ve(t,lt,h=>n(3,s=h)),t.$$.on_destroy.push(()=>a());const c="Notifications",d=gt("user").notifications;return ve(t,d,h=>n(1,r=h)),tn(async()=>{await d.load(),await d.markAsRead()}),t.$$.update=()=>{t.$$.dirty&2&&u(n(0,o=r.messages)),t.$$.dirty&1&&n(2,i=["main",o.length&&"has-results"].filter(h=>h))},[o,r,i,s,l,d,c]}let Y1=class extends Xe{constructor(e){super(),Qe(this,e,K1,W1,Ze,{title:6})}get title(){return this.$$.ctx[6]}};function $a(t,e,n){const i=t.slice();return i[13]=e[n],i[15]=n,i}function V1(t){let e,n,i,o,r=t[6]("Clear")+"",s,l;return e=new de({props:{name:"search"}}),n=new de({props:{name:"times"}}),{c(){G(e.$$.fragment),G(n.$$.fragment),i=C(),o=_("span"),s=O(r),k(o,"class","tooltip is-left")},m(a,u){q(e,a,u),q(n,a,u),w(a,i,u),w(a,o,u),f(o,s),l=!0},p(a,u){(!l||u&64)&&r!==(r=a[6]("Clear")+"")&&M(s,r)},i(a){l||(b(e.$$.fragment,a),b(n.$$.fragment,a),l=!0)},o(a){S(e.$$.fragment,a),S(n.$$.fragment,a),l=!1},d(a){a&&(v(i),v(o)),W(e,a),W(n,a)}}}function Z1(t){let e,n=t[6](t[8].name)+"",i,o,r,s;return r=new Ke({props:{href:"/search",class:"btn-hallow can-toggle "+(t[4]?"has-tooltip is-active":""),$$slots:{default:[V1]},$$scope:{ctx:t}}}),r.$on("click",t[9]),{c(){e=_("h1"),i=O(n),o=C(),G(r.$$.fragment)},m(l,a){w(l,e,a),f(e,i),w(l,o,a),q(r,l,a),s=!0},p(l,a){(!s||a&64)&&n!==(n=l[6](l[8].name)+"")&&M(i,n);const u={};a&16&&(u.class="btn-hallow can-toggle "+(l[4]?"has-tooltip is-active":"")),a&65600&&(u.$$scope={dirty:a,ctx:l}),r.$set(u)},i(l){s||(b(r.$$.fragment,l),s=!0)},o(l){S(r.$$.fragment,l),s=!1},d(l){l&&(v(e),v(o)),W(r,l)}}}function wa(t){let e,n,i,o,r;const s=[Q1,J1],l=[];function a(u,c){return c&4&&(e=null),e==null&&(e=!!u[2].param("q")),e?0:1}return n=a(t,-1),i=l[n]=s[n](t),{c(){i.c(),o=ft()},m(u,c){l[n].m(u,c),w(u,o,c),r=!0},p(u,c){let p=n;n=a(u,c),n===p?l[n].p(u,c):(ke(),S(l[p],1,1,()=>{l[p]=null}),ye(),i=l[n],i?i.p(u,c):(i=l[n]=s[n](u),i.c()),b(i,1),i.m(o.parentNode,o))},i(u){r||(b(i),r=!0)},o(u){S(i),r=!1},d(u){u&&v(o),l[n].d(u)}}}function J1(t){let e,n,i,o,r=t[7]("You can enter a channel name like #cool_beans to narrow down the search, or enter @some_nick to filter messages sent by a given user.")+"",s;return n=new de({props:{name:"info-circle"}}),{c(){e=_("p"),G(n.$$.fragment),i=C(),o=new At(!1),o.a=null},m(l,a){w(l,e,a),q(n,e,null),f(e,i),o.m(r,e),s=!0},p(l,a){(!s||a&128)&&r!==(r=l[7]("You can enter a channel name like #cool_beans to narrow down the search, or enter @some_nick to filter messages sent by a given user.")+"")&&o.p(r)},i(l){s||(b(n.$$.fragment,l),s=!0)},o(l){S(n.$$.fragment,l),s=!1},d(l){l&&v(e),W(n)}}}function Q1(t){let e,n,i,o=t[6]('No search results for "%1".',t[2].param("q"))+"",r,s;return n=new de({props:{name:"info-circle"}}),{c(){e=_("p"),G(n.$$.fragment),i=C(),r=O(o)},m(l,a){w(l,e,a),q(n,e,null),f(e,i),f(e,r),s=!0},p(l,a){(!s||a&68)&&o!==(o=l[6]('No search results for "%1".',l[2].param("q"))+"")&&M(r,o)},i(l){s||(b(n.$$.fragment,l),s=!0)},o(l){S(n.$$.fragment,l),s=!1},d(l){l&&v(e),W(n)}}}function ka(t){let e,n,i,o,r,s=t[13].ts.getHumanDate()+"",l,a;return i=new de({props:{name:"calendar-alt"}}),{c(){e=_("div"),n=_("span"),G(i.$$.fragment),o=C(),r=_("i"),l=O(s),k(e,"class","message__status-line for-day-changed")},m(u,c){w(u,e,c),f(e,n),q(i,n,null),f(n,o),f(n,r),f(r,l),a=!0},p(u,c){(!a||c&2)&&s!==(s=u[13].ts.getHumanDate()+"")&&M(l,s)},i(u){a||(b(i.$$.fragment,u),a=!0)},o(u){S(i.$$.fragment,u),a=!1},d(u){u&&v(e),W(i)}}}function ya(t){let e,n,i,o,r,s=t[13].from+"",l,a,u,c,p,d=t[13].ts.format("%H:%M")+"",h,m,g,y=Tt(t[13].ts.toLocaleString())+"",$,E,T,K=t[13].html+"",L,A,I,z,F=(!t[15]||t[13].dayChanged)&&ka(t);return i=new de({props:{name:"pick:"+t[13].from,color:t[13].color}}),{c(){F&&F.c(),e=C(),n=_("div"),G(i.$$.fragment),o=C(),r=_("span"),l=O(s),a=C(),u=_("a"),c=_("div"),p=_("span"),h=O(d),m=C(),g=_("span"),$=O(y),E=C(),T=new At(!1),A=C(),k(r,"class","message__from"),Ut(r,"color",t[13].color),k(r,"tabindex","-1"),k(g,"class","tooltip"),k(c,"class","message__ts has-tooltip"),T.a=null,k(u,"href",L=Co(t[13])),k(u,"class","svelte-160wt3k"),k(n,"class",I=_o(t[13].className)+" svelte-160wt3k")},m(V,j){F&&F.m(V,j),w(V,e,j),w(V,n,j),q(i,n,null),f(n,o),f(n,r),f(r,l),f(n,a),f(n,u),f(u,c),f(c,p),f(p,h),f(c,m),f(c,g),f(g,$),f(u,E),T.m(K,u),f(n,A),z=!0},p(V,j){!V[15]||V[13].dayChanged?F?(F.p(V,j),j&2&&b(F,1)):(F=ka(V),F.c(),b(F,1),F.m(e.parentNode,e)):F&&(ke(),S(F,1,1,()=>{F=null}),ye());const B={};j&2&&(B.name="pick:"+V[13].from),j&2&&(B.color=V[13].color),i.$set(B),(!z||j&2)&&s!==(s=V[13].from+"")&&M(l,s),(!z||j&2)&&Ut(r,"color",V[13].color),(!z||j&2)&&d!==(d=V[13].ts.format("%H:%M")+"")&&M(h,d),(!z||j&2)&&y!==(y=Tt(V[13].ts.toLocaleString())+"")&&M($,y),(!z||j&2)&&K!==(K=V[13].html+"")&&T.p(K),(!z||j&2&&L!==(L=Co(V[13])))&&k(u,"href",L),(!z||j&2&&I!==(I=_o(V[13].className)+" svelte-160wt3k"))&&k(n,"class",I)},i(V){z||(b(F),b(i.$$.fragment,V),z=!0)},o(V){S(F),S(i.$$.fragment,V),z=!1},d(V){V&&(v(e),v(n)),F&&F.d(V),W(i)}}}function Sa(t){let e,n,i,o,r,s=t[6]("Loading...")+"",l,a;return i=new de({props:{name:"spinner",animation:"spin"}}),{c(){e=_("div"),n=_("span"),G(i.$$.fragment),o=C(),r=_("i"),l=O(s),k(e,"class","message__status-line for-loading")},m(u,c){w(u,e,c),f(e,n),q(i,n,null),f(n,o),f(n,r),f(r,l),a=!0},p(u,c){(!a||c&64)&&s!==(s=u[6]("Loading...")+"")&&M(l,s)},i(u){a||(b(i.$$.fragment,u),a=!0)},o(u){S(i.$$.fragment,u),a=!1},d(u){u&&v(e),W(i)}}}function X1(t){let e=t[1].length===0&&!t[8].is("loading"),n,i,o=t[3].is("loading"),r,s,l=e&&wa(t),a=xe(t[1].render()),u=[];for(let d=0;d<a.length;d+=1)u[d]=ya($a(t,a,d));const c=d=>S(u[d],1,1,()=>{u[d]=null});let p=o&&Sa(t);return{c(){l&&l.c(),n=C();for(let d=0;d<u.length;d+=1)u[d].c();i=C(),p&&p.c(),r=ft()},m(d,h){l&&l.m(d,h),w(d,n,h);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(d,h);w(d,i,h),p&&p.m(d,h),w(d,r,h),s=!0},p(d,h){if(h&2&&(e=d[1].length===0&&!d[8].is("loading")),e?l?(l.p(d,h),h&2&&b(l,1)):(l=wa(d),l.c(),b(l,1),l.m(n.parentNode,n)):l&&(ke(),S(l,1,1,()=>{l=null}),ye()),h&2){a=xe(d[1].render());let m;for(m=0;m<a.length;m+=1){const g=$a(d,a,m);u[m]?(u[m].p(g,h),b(u[m],1)):(u[m]=ya(g),u[m].c(),b(u[m],1),u[m].m(i.parentNode,i))}for(ke(),m=a.length;m<u.length;m+=1)c(m);ye()}h&8&&(o=d[3].is("loading")),o?p?(p.p(d,h),h&8&&b(p,1)):(p=Sa(d),p.c(),b(p,1),p.m(r.parentNode,r)):p&&(ke(),S(p,1,1,()=>{p=null}),ye())},i(d){if(!s){b(l);for(let h=0;h<a.length;h+=1)b(u[h]);b(p),s=!0}},o(d){S(l),u=u.filter(Boolean);for(let h=0;h<u.length;h+=1)S(u[h]);S(p),s=!1},d(d){d&&(v(n),v(i),v(r)),l&&l.d(d),kt(u,d),p&&p.d(d)}}}function x1(t){let e,n;return e=new Xu({props:{conversation:t[8]}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p:Oe,i(i){n||(b(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function ev(t){let e,n,i,o,r=t[8].is("search"),s,l;e=new Ft({props:{$$slots:{default:[Z1]},$$scope:{ctx:t}}}),i=new Jr({props:{class:t[5].join(" "),$$slots:{default:[X1]},$$scope:{ctx:t}}}),i.$on("rendered",tv);let a=r&&x1(t);return{c(){G(e.$$.fragment),n=C(),G(i.$$.fragment),o=C(),a&&a.c(),s=ft()},m(u,c){q(e,u,c),w(u,n,c),q(i,u,c),w(u,o,c),a&&a.m(u,c),w(u,s,c),l=!0},p(u,[c]){const p={};c&65616&&(p.$$scope={dirty:c,ctx:u}),e.$set(p);const d={};c&32&&(d.class=u[5].join(" ")),c&65742&&(d.$$scope={dirty:c,ctx:u}),i.$set(d),r&&a.p(u,c)},i(u){l||(b(e.$$.fragment,u),b(i.$$.fragment,u),b(a),l=!0)},o(u){S(e.$$.fragment,u),S(i.$$.fragment,u),S(a),l=!1},d(u){u&&(v(n),v(o),v(s)),W(e,u),W(i,u),a&&a.d(u)}}}const tv=t=>t.detail.scrollTo(-1);function nv(t,e,n){let i,o,r,s,l=Oe,a=()=>(l(),l=_t(i,E=>n(1,s=E)),i),u,c,p,d;ve(t,Ie,E=>n(2,u=E)),ve(t,lt,E=>n(6,p=E)),ve(t,jt,E=>n(7,d=E)),t.$$.on_destroy.push(()=>l());const h="Search",m=gt("user"),g=m.search;ve(t,g,E=>n(3,c=E)),tn(()=>{m.search.on("send",$),Ie.param("q")&&$({message:Ie.param("q")})});function y(E){if(r)return s.clear();E.preventDefault(),document.querySelector(".is-primary-input").focus()}function $(E){const T=E.message;return g.update({userInput:T}),Ie.go("/search?q="+encodeURIComponent(T),{replace:!0}),T?g.load({match:T}):i.clear()}return t.$$.update=()=>{t.$$.dirty&8&&a(n(0,i=c.messages)),t.$$.dirty&9&&n(5,o=["main",i.length&&"has-results",c.is("search")&&"is-above-chat-input"].filter(E=>E)),t.$$.dirty&6&&n(4,r=u.param("q")||s.length)},[i,s,u,c,r,o,p,d,g,y,h]}let iv=class extends Xe{constructor(e){super(),Qe(this,e,nv,ev,Ze,{title:10})}get title(){return this.$$.ctx[10]}};function ov(t){let e,n=t[2]("Account")+"",i;return{c(){e=_("h1"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Account")+"")&&M(i,n)},d(o){o&&v(e)}}}function rv(t){let e,n=t[2]("Email")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Email")+"")&&M(i,n)},d(o){o&&v(e)}}}function sv(t){let e,n=t[2]("Notification keywords")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Notification keywords")+"")&&M(i,n)},d(o){o&&v(e)}}}function lv(t){let e,n=t[2]("Enable notifications")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Enable notifications")+"")&&M(i,n)},d(o){o&&v(e)}}}function av(t){let e,n=t[2]("Notification sound volume")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Notification sound volume")+"")&&M(i,n)},d(o){o&&v(e)}}}function uv(t){let e,n=t[2]("Test")+"",i;return{c(){e=_("span"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Test")+"")&&M(i,n)},d(o){o&&v(e)}}}function cv(t){let e,n=t[2]("Ignore join/part messages")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Ignore join/part messages")+"")&&M(i,n)},d(o){o&&v(e)}}}function fv(t){let e,n=t[2]("Expand URL to media")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Expand URL to media")+"")&&M(i,n)},d(o){o&&v(e)}}}function pv(t){let e,n=t[2]("Enable compact message display")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Enable compact message display")+"")&&M(i,n)},d(o){o&&v(e)}}}function dv(t){let e,n=t[2]("Theme")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Theme")+"")&&M(i,n)},d(o){o&&v(e)}}}function hv(t){let e,n=t[2]("Color scheme")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Color scheme")+"")&&M(i,n)},d(o){o&&v(e)}}}function mv(t){let e,n=t[2]("Language")+"",i,o,r,s;return r=new de({props:{name:"globe"}}),{c(){e=_("span"),i=O(n),o=C(),G(r.$$.fragment),k(e,"slot","label")},m(l,a){w(l,e,a),f(e,i),f(e,o),q(r,e,null),s=!0},p(l,a){(!s||a&4)&&n!==(n=l[2]("Language")+"")&&M(i,n)},i(l){s||(b(r.$$.fragment,l),s=!0)},o(l){S(r.$$.fragment,l),s=!1},d(l){l&&v(e),W(r)}}}function _v(t){let e,n=t[2]("Password")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Password")+"")&&M(i,n)},d(o){o&&v(e)}}}function gv(t){let e,n=t[2]("Repeat password")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Repeat password")+"")&&M(i,n)},d(o){o&&v(e)}}}function bv(t){let e,n=t[2]("Save settings")+"",i;return{c(){e=_("span"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Save settings")+"")&&M(i,n)},d(o){o&&v(e)}}}function vv(t){let e,n,i=t[2]("Protocol handlers")+"",o,r,s,l=t[2]("Mark the protocols below that you want %1 to handle, and a popup should ask you for confirmation.",t[2]("Convos"))+"",a,u,c=t[2]("If you do not see any popup, then it probably means %1 already handles the protocol.",t[2]("Convos"))+"",p,d,h,m,g,y,$=t[3]("Test it by clicking on %1.","irc://localhost:6667")+"",E,T,K,L,A,I=t[3]("Test it by clicking on %1.","ircs://irc.libera.chat:6697/%23convos")+"",z,F,V;function j(D){t[25](D)}let B={name:"handle_protocol_irc",$$slots:{label:[$v]},$$scope:{ctx:t}};t[0].handle_protocol_irc!==void 0&&(B.value=t[0].handle_protocol_irc),h=new it({props:B}),fe.push(()=>me(h,"value",j));function H(D){t[26](D)}let J={name:"handle_protocol_ircs",$$slots:{label:[wv]},$$scope:{ctx:t}};return t[0].handle_protocol_ircs!==void 0&&(J.value=t[0].handle_protocol_ircs),T=new it({props:J}),fe.push(()=>me(T,"value",H)),{c(){e=_("form"),n=_("h2"),o=O(i),r=C(),s=_("p"),a=O(l),u=C(),p=O(c),d=C(),G(h.$$.fragment),g=C(),y=_("p"),E=C(),G(T.$$.fragment),L=C(),A=_("p"),k(y,"class","help"),k(A,"class","help")},m(D,P){w(D,e,P),f(e,n),f(n,o),f(e,r),f(e,s),f(s,a),f(s,u),f(s,p),f(e,d),q(h,e,null),f(e,g),f(e,y),y.innerHTML=$,f(e,E),q(T,e,null),f(e,L),f(e,A),A.innerHTML=I,z=!0,F||(V=Ce(e,"submit",st(t[11])),F=!0)},p(D,P){(!z||P&4)&&i!==(i=D[2]("Protocol handlers")+"")&&M(o,i),(!z||P&4)&&l!==(l=D[2]("Mark the protocols below that you want %1 to handle, and a popup should ask you for confirmation.",D[2]("Convos"))+"")&&M(a,l),(!z||P&4)&&c!==(c=D[2]("If you do not see any popup, then it probably means %1 already handles the protocol.",D[2]("Convos"))+"")&&M(p,c);const N={};P&536870916&&(N.$$scope={dirty:P,ctx:D}),!m&&P&1&&(m=!0,N.value=D[0].handle_protocol_irc,he(()=>m=!1)),h.$set(N),(!z||P&8)&&$!==($=D[3]("Test it by clicking on %1.","irc://localhost:6667")+"")&&(y.innerHTML=$);const Z={};P&536870916&&(Z.$$scope={dirty:P,ctx:D}),!K&&P&1&&(K=!0,Z.value=D[0].handle_protocol_ircs,he(()=>K=!1)),T.$set(Z),(!z||P&8)&&I!==(I=D[3]("Test it by clicking on %1.","ircs://irc.libera.chat:6697/%23convos")+"")&&(A.innerHTML=I)},i(D){z||(b(h.$$.fragment,D),b(T.$$.fragment,D),z=!0)},o(D){S(h.$$.fragment,D),S(T.$$.fragment,D),z=!1},d(D){D&&v(e),W(h),W(T),F=!1,V()}}}function $v(t){let e,n=t[2]("irc://")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("irc://")+"")&&M(i,n)},d(o){o&&v(e)}}}function wv(t){let e,n=t[2]("ircs://")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("ircs://")+"")&&M(i,n)},d(o){o&&v(e)}}}function kv(t){let e,n,i,o,r,s,l,a,u,c,p,d,h,m,g=t[3]('Leave this unchecked, and hit "Save" to disable notifications.')+"",y,$,E,T,K,L,A,I,z,F,V,j,B,H,J,D,P,N,Z,Y,U,R,x,le,ge,oe,Se,Re,ae,we,Ue,je,De,Ne=t[2]("Leave the password fields empty to keep the current password.")+"",ze,ee,ue,qe,Te,be,Ae,te,ce,$e;e=new Ft({props:{$$slots:{default:[ov]},$$scope:{ctx:t}}});function re(se){t[12](se)}let _e={type:"email",name:"email",readonly:!0,$$slots:{label:[rv]},$$scope:{ctx:t}};t[0].email!==void 0&&(_e.value=t[0].email),r=new Je({props:_e}),fe.push(()=>me(r,"value",re));function Le(se){t[13](se)}let X={name:"highlightKeywords",placeholder:t[2]("whatever, keywords"),$$slots:{label:[sv]},$$scope:{ctx:t}};t[0].highlightKeywords!==void 0&&(X.value=t[0].highlightKeywords),a=new Je({props:X}),fe.push(()=>me(a,"value",Le));function Q(se){t[14](se)}let ne={name:"wantNotifications",$$slots:{label:[lv]},$$scope:{ctx:t}};t[0].wantNotifications!==void 0&&(ne.value=t[0].wantNotifications),p=new it({props:ne}),fe.push(()=>me(p,"value",Q));function ie(se){t[15](se)}let pe={name:"volume",options:vt.volumeOptions,$$slots:{label:[av]},$$scope:{ctx:t}};t[0].volume!==void 0&&(pe.value=t[0].volume),E=new oi({props:pe}),fe.push(()=>me(E,"value",ie)),A=new pt({props:{icon:"play",disabled:!parseInt(t[0].volume,10),type:"button",$$slots:{default:[uv]},$$scope:{ctx:t}}}),A.$on("click",t[16]);function We(se){t[17](se)}let Be={name:"ignoreStatuses",$$slots:{label:[cv]},$$scope:{ctx:t}};t[0].ignoreStatuses!==void 0&&(Be.value=t[0].ignoreStatuses),z=new it({props:Be}),fe.push(()=>me(z,"value",We));function rt(se){t[18](se)}let St={name:"expandUrlToMedia",$$slots:{label:[fv]},$$scope:{ctx:t}};t[0].expandUrlToMedia!==void 0&&(St.value=t[0].expandUrlToMedia),j=new it({props:St}),fe.push(()=>me(j,"value",rt));function Pt(se){t[19](se)}let ut={name:"compactDisplay",$$slots:{label:[pv]},$$scope:{ctx:t}};t[0].compactDisplay!==void 0&&(ut.value=t[0].compactDisplay),J=new it({props:ut}),fe.push(()=>me(J,"value",Pt));function Xt(se){t[20](se)}let zt={name:"activeTheme",options:t[6].themeOptions,$$slots:{label:[dv]},$$scope:{ctx:t}};t[0].activeTheme!==void 0&&(zt.value=t[0].activeTheme),N=new oi({props:zt}),fe.push(()=>me(N,"value",Xt));function Fn(se){t[21](se)}let jn={name:"colorScheme",readonly:t[1],options:t[6].colorSchemeOptions,$$slots:{label:[hv]},$$scope:{ctx:t}};t[0].colorScheme!==void 0&&(jn.value=t[0].colorScheme),U=new oi({props:jn}),fe.push(()=>me(U,"value",Fn));function yi(se){t[22](se)}let wn={name:"lang",options:t[4].languageOptions,$$slots:{label:[mv]},$$scope:{ctx:t}};t[0].lang!==void 0&&(wn.value=t[0].lang),le=new oi({props:wn}),fe.push(()=>me(le,"value",yi));function Si(se){t[23](se)}let zn={type:"password",name:"password",autocomplete:"new-password",$$slots:{label:[_v]},$$scope:{ctx:t}};t[0].password!==void 0&&(zn.value=t[0].password),Se=new Je({props:zn}),fe.push(()=>me(Se,"value",Si));function Hn(se){t[24](se)}let qn={type:"password",name:"password_again",autocomplete:"new-password",$$slots:{label:[gv]},$$scope:{ctx:t}};t[0].password_again!==void 0&&(qn.value=t[0].password_again),we=new Je({props:qn}),fe.push(()=>me(we,"value",Hn)),qe=new pt({props:{icon:"save",op:t[7],$$slots:{default:[bv]},$$scope:{ctx:t}}}),be=new It({props:{op:t[7]}});let Rt=t[5]&&vv(t);return{c(){G(e.$$.fragment),n=C(),i=_("main"),o=_("form"),G(r.$$.fragment),l=C(),G(a.$$.fragment),c=C(),G(p.$$.fragment),h=C(),m=_("p"),y=C(),$=_("div"),G(E.$$.fragment),K=C(),L=_("div"),G(A.$$.fragment),I=C(),G(z.$$.fragment),V=C(),G(j.$$.fragment),H=C(),G(J.$$.fragment),P=C(),G(N.$$.fragment),Y=C(),G(U.$$.fragment),x=C(),G(le.$$.fragment),oe=C(),G(Se.$$.fragment),ae=C(),G(we.$$.fragment),je=C(),De=_("p"),ze=O(Ne),ee=C(),ue=_("div"),G(qe.$$.fragment),Te=C(),G(be.$$.fragment),Ae=C(),Rt&&Rt.c(),k(m,"class","help"),k(L,"class","flex-basis-30"),k($,"class","inputs-side-by-side"),k(ue,"class","form-actions"),k(o,"method","post"),k(i,"class","main")},m(se,Me){q(e,se,Me),w(se,n,Me),w(se,i,Me),f(i,o),q(r,o,null),f(o,l),q(a,o,null),f(o,c),q(p,o,null),f(o,h),f(o,m),m.innerHTML=g,f(o,y),f(o,$),q(E,$,null),f($,K),f($,L),q(A,L,null),f(o,I),q(z,o,null),f(o,V),q(j,o,null),f(o,H),q(J,o,null),f(o,P),q(N,o,null),f(o,Y),q(U,o,null),f(o,x),q(le,o,null),f(o,oe),q(Se,o,null),f(o,ae),q(we,o,null),f(o,je),f(o,De),f(De,ze),f(o,ee),f(o,ue),q(qe,ue,null),f(o,Te),q(be,o,null),f(i,Ae),Rt&&Rt.m(i,null),te=!0,ce||($e=Ce(o,"submit",st(t[8])),ce=!0)},p(se,[Me]){const kn={};Me&536870916&&(kn.$$scope={dirty:Me,ctx:se}),e.$set(kn);const nn={};Me&536870916&&(nn.$$scope={dirty:Me,ctx:se}),!s&&Me&1&&(s=!0,nn.value=se[0].email,he(()=>s=!1)),r.$set(nn);const on={};Me&4&&(on.placeholder=se[2]("whatever, keywords")),Me&536870916&&(on.$$scope={dirty:Me,ctx:se}),!u&&Me&1&&(u=!0,on.value=se[0].highlightKeywords,he(()=>u=!1)),a.$set(on);const rn={};Me&536870916&&(rn.$$scope={dirty:Me,ctx:se}),!d&&Me&1&&(d=!0,rn.value=se[0].wantNotifications,he(()=>d=!1)),p.$set(rn),(!te||Me&8)&&g!==(g=se[3]('Leave this unchecked, and hit "Save" to disable notifications.')+"")&&(m.innerHTML=g);const yn={};Me&536870916&&(yn.$$scope={dirty:Me,ctx:se}),!T&&Me&1&&(T=!0,yn.value=se[0].volume,he(()=>T=!1)),E.$set(yn);const sn={};Me&1&&(sn.disabled=!parseInt(se[0].volume,10)),Me&536870916&&(sn.$$scope={dirty:Me,ctx:se}),A.$set(sn);const ln={};Me&536870916&&(ln.$$scope={dirty:Me,ctx:se}),!F&&Me&1&&(F=!0,ln.value=se[0].ignoreStatuses,he(()=>F=!1)),z.$set(ln);const Sn={};Me&536870916&&(Sn.$$scope={dirty:Me,ctx:se}),!B&&Me&1&&(B=!0,Sn.value=se[0].expandUrlToMedia,he(()=>B=!1)),j.$set(Sn);const En={};Me&536870916&&(En.$$scope={dirty:Me,ctx:se}),!D&&Me&1&&(D=!0,En.value=se[0].compactDisplay,he(()=>D=!1)),J.$set(En);const an={};Me&536870916&&(an.$$scope={dirty:Me,ctx:se}),!Z&&Me&1&&(Z=!0,an.value=se[0].activeTheme,he(()=>Z=!1)),N.$set(an);const un={};Me&2&&(un.readonly=se[1]),Me&536870916&&(un.$$scope={dirty:Me,ctx:se}),!R&&Me&1&&(R=!0,un.value=se[0].colorScheme,he(()=>R=!1)),U.$set(un);const Cn={};Me&16&&(Cn.options=se[4].languageOptions),Me&536870916&&(Cn.$$scope={dirty:Me,ctx:se}),!ge&&Me&1&&(ge=!0,Cn.value=se[0].lang,he(()=>ge=!1)),le.$set(Cn);const cn={};Me&536870916&&(cn.$$scope={dirty:Me,ctx:se}),!Re&&Me&1&&(Re=!0,cn.value=se[0].password,he(()=>Re=!1)),Se.$set(cn);const fn={};Me&536870916&&(fn.$$scope={dirty:Me,ctx:se}),!Ue&&Me&1&&(Ue=!0,fn.value=se[0].password_again,he(()=>Ue=!1)),we.$set(fn),(!te||Me&4)&&Ne!==(Ne=se[2]("Leave the password fields empty to keep the current password.")+"")&&M(ze,Ne);const Wn={};Me&536870916&&(Wn.$$scope={dirty:Me,ctx:se}),qe.$set(Wn),se[5]&&Rt.p(se,Me)},i(se){te||(b(e.$$.fragment,se),b(r.$$.fragment,se),b(a.$$.fragment,se),b(p.$$.fragment,se),b(E.$$.fragment,se),b(A.$$.fragment,se),b(z.$$.fragment,se),b(j.$$.fragment,se),b(J.$$.fragment,se),b(N.$$.fragment,se),b(U.$$.fragment,se),b(le.$$.fragment,se),b(Se.$$.fragment,se),b(we.$$.fragment,se),b(qe.$$.fragment,se),b(be.$$.fragment,se),b(Rt),te=!0)},o(se){S(e.$$.fragment,se),S(r.$$.fragment,se),S(a.$$.fragment,se),S(p.$$.fragment,se),S(E.$$.fragment,se),S(A.$$.fragment,se),S(z.$$.fragment,se),S(j.$$.fragment,se),S(J.$$.fragment,se),S(N.$$.fragment,se),S(U.$$.fragment,se),S(le.$$.fragment,se),S(Se.$$.fragment,se),S(we.$$.fragment,se),S(qe.$$.fragment,se),S(be.$$.fragment,se),S(Rt),te=!1},d(se){se&&(v(n),v(i)),W(e,se),W(r),W(a),W(p),W(E),W(A),W(z),W(j),W(J),W(N),W(U),W(le),W(Se),W(we),W(qe),W(be),Rt&&Rt.d(),ce=!1,$e()}}}function yv(t,e,n){let i,o,r,s,l;ve(t,lt,P=>n(2,o=P)),ve(t,jt,P=>n(3,s=P)),ve(t,tt,P=>n(4,l=P));const a="Account",u="registerProtocolHandler"in navigator,c=gt("themeManager");ve(t,c,P=>n(10,r=P));const p=gt("user"),d=nt.op("updateUser");let h={};tn(()=>{n(0,h={activeTheme:c.activeTheme,colorScheme:c.colorScheme,compactDisplay:c.compactDisplay,email:p.email,expandUrlToMedia:p.expandUrlToMedia,highlightKeywords:p.highlightKeywords.join(", "),ignoreStatuses:p.ignoreStatuses,lang:tt.lang,password:"",password_again:"",volume:vt.volume,wantNotifications:vt.wantNotifications})}),Dr(vt.on("update",(P,N)=>{!N.wantNotifications&&!N.desktopAccess||P.wantNotifications&&P.show(o("You have enabled notifications."))}));function m(P){navigator.registerProtocolHandler(P,Ie.urlFor("/register?uri=%s"),o("Convos %1 handler",P))}function g(){const P=[h.password,h.password_again];if(P.join("").length&&P[0]!==P[1])return d.error("Passwords does not match.");h.wantNotifications||n(0,h.wantNotifications=!1,h),h.wantNotifications&&vt.requestDesktopAccess(),vt.update(h),i&&n(0,h.colorScheme="auto",h),c.update(h);const N=Fr(h.highlightKeywords),Z={email:p.email,highlight_keywords:N};P[0]&&(Z.password=P[0]),p.update(h).update({highlightKeywords:N}),d.perform(Z)}function y(P){_i.call(this,t,P)}function $(P){t.$$.not_equal(h.email,P)&&(h.email=P,n(0,h))}function E(P){t.$$.not_equal(h.highlightKeywords,P)&&(h.highlightKeywords=P,n(0,h))}function T(P){t.$$.not_equal(h.wantNotifications,P)&&(h.wantNotifications=P,n(0,h))}function K(P){t.$$.not_equal(h.volume,P)&&(h.volume=P,n(0,h))}const L=()=>vt.play({volume:h.volume});function A(P){t.$$.not_equal(h.ignoreStatuses,P)&&(h.ignoreStatuses=P,n(0,h))}function I(P){t.$$.not_equal(h.expandUrlToMedia,P)&&(h.expandUrlToMedia=P,n(0,h))}function z(P){t.$$.not_equal(h.compactDisplay,P)&&(h.compactDisplay=P,n(0,h))}function F(P){t.$$.not_equal(h.activeTheme,P)&&(h.activeTheme=P,n(0,h))}function V(P){t.$$.not_equal(h.colorScheme,P)&&(h.colorScheme=P,n(0,h))}function j(P){t.$$.not_equal(h.lang,P)&&(h.lang=P,n(0,h))}function B(P){t.$$.not_equal(h.password,P)&&(h.password=P,n(0,h))}function H(P){t.$$.not_equal(h.password_again,P)&&(h.password_again=P,n(0,h))}function J(P){t.$$.not_equal(h.handle_protocol_irc,P)&&(h.handle_protocol_irc=P,n(0,h))}function D(P){t.$$.not_equal(h.handle_protocol_ircs,P)&&(h.handle_protocol_ircs=P,n(0,h))}return t.$$.update=()=>{t.$$.dirty&1025&&n(1,i=!r.hasColorScheme(h.activeTheme)),t.$$.dirty&1&&tt.load(h.lang),t.$$.dirty&1&&h.handle_protocol_irc&&m("irc"),t.$$.dirty&1&&h.handle_protocol_ircs&&m("ircs")},[h,i,o,s,l,u,c,d,g,a,r,y,$,E,T,K,L,A,I,z,F,V,j,B,H,J,D]}class Sv extends Xe{constructor(e){super(),Qe(this,e,yv,kv,Ze,{title:9})}get title(){return this.$$.ctx[9]}}function Ev(t){let e,n=t[5]("Global settings")+"",i;return{c(){e=_("h1"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&32&&n!==(n=o[5]("Global settings")+"")&&M(i,n)},d(o){o&&v(e)}}}function Cv(t){let e,n=t[5]("Organization name")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&32&&n!==(n=o[5]("Organization name")+"")&&M(i,n)},d(o){o&&v(e)}}}function Av(t){let e,n=t[5]("Can be changed if you want to add a touch of your organization.")+"",i;return{c(){e=_("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&32&&n!==(n=o[5]("Can be changed if you want to add a touch of your organization.")+"")&&M(i,n)},d(o){o&&v(e)}}}function Ov(t){let e,n=t[5]("Organization URL")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&32&&n!==(n=o[5]("Organization URL")+"")&&M(i,n)},d(o){o&&v(e)}}}function Nv(t){let e,n=t[5]('Used together with "Organization name" to add a link to your organization on the login screen.')+"",i;return{c(){e=_("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&32&&n!==(n=o[5]('Used together with "Organization name" to add a link to your organization on the login screen.')+"")&&M(i,n)},d(o){o&&v(e)}}}function Tv(t){let e,n=t[5]("Admin email")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&32&&n!==(n=o[5]("Admin email")+"")&&M(i,n)},d(o){o&&v(e)}}}function Rv(t){let e,n=t[5]("This email can be used by users to get in touch with the Convos admin.")+"",i;return{c(){e=_("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&32&&n!==(n=o[5]("This email can be used by users to get in touch with the Convos admin.")+"")&&M(i,n)},d(o){o&&v(e)}}}function Mv(t){let e,n=t[5]("Video service")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&32&&n!==(n=o[5]("Video service")+"")&&M(i,n)},d(o){o&&v(e)}}}function Iv(t){let e,n=t[6]("This should point to a [%1](%2) instance.","https://meet.jit.si/","https://github.com/jitsi/jitsi-meet")+"";return{c(){e=_("p"),k(e,"class","help"),k(e,"slot","help")},m(i,o){w(i,e,o),e.innerHTML=n},p(i,o){o&64&&n!==(n=i[6]("This should point to a [%1](%2) instance.","https://meet.jit.si/","https://github.com/jitsi/jitsi-meet")+"")&&(e.innerHTML=n)},d(i){i&&v(e)}}}function Lv(t){let e,n=t[5]("Registration is open to public")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&32&&n!==(n=o[5]("Registration is open to public")+"")&&M(i,n)},d(o){o&&v(e)}}}function Pv(t){let e,n=t[5]("Save settings")+"",i;return{c(){e=_("span"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&32&&n!==(n=o[5]("Save settings")+"")&&M(i,n)},d(o){o&&v(e)}}}function Dv(t){let e,n=t[6]("You currently have Convos v%1 installed.",Ve("version"))+"",i;return{c(){e=_("p"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&64&&n!==(n=o[6]("You currently have Convos v%1 installed.",Ve("version"))+"")&&M(i,n)},d(o){o&&v(e)}}}function Uv(t){let e,n=t[6](t[4]?"You have Convos v%1, which is the latest version.":"Convos v%1 is available.",t[0])+"",i;return{c(){e=_("p"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&81&&n!==(n=o[6](o[4]?"You have Convos v%1, which is the latest version.":"Convos v%1 is available.",o[0])+"")&&M(i,n)},d(o){o&&v(e)}}}function Bv(t){let e,n=t[5](t[1].error())+"",i;return{c(){e=_("div"),i=O(n),k(e,"class","error")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&34&&n!==(n=o[5](o[1].error())+"")&&M(i,n)},d(o){o&&v(e)}}}function Fv(t){let e,n=t[5]("Check for updates")+"",i;return{c(){e=_("span"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&32&&n!==(n=o[5]("Check for updates")+"")&&M(i,n)},d(o){o&&v(e)}}}function Ea(t){let e,n,i=t[5]("Disk usage")+"",o,r,s,l,a=t[2].blocks_pct+"",u,c,p,d,h=t[5]("Disk usage")+"",m,g,y=t[2].blocks_used+"",$,E,T=t[2].blocks_total+"",K,L,A,I,z=t[2].inodes_pct+"",F,V,j,B,H=t[5]("Inode usage")+"",J,D,P=t[2].inodes_used+"",N,Z,Y=t[2].inodes_total+"",U;return{c(){e=_("div"),n=_("h2"),o=O(i),r=C(),s=_("div"),l=_("div"),u=O(a),c=O("%"),p=C(),d=_("p"),m=O(h),g=O(": "),$=O(y),E=O(" / "),K=O(T),L=C(),A=_("div"),I=_("div"),F=O(z),V=O("%"),j=C(),B=_("p"),J=O(H),D=O(": "),N=O(P),Z=O(" / "),U=O(Y),k(l,"class","progress__bar"),Ut(l,"width",t[2].blocks_pct+"%"),k(s,"class","progress"),k(d,"class","help"),k(I,"class","progress__bar"),Ut(I,"width",t[2].inodes_pct+"%"),k(A,"class","progress"),k(B,"class","help"),k(e,"id","disk-usage")},m(R,x){w(R,e,x),f(e,n),f(n,o),f(e,r),f(e,s),f(s,l),f(l,u),f(l,c),f(e,p),f(e,d),f(d,m),f(d,g),f(d,$),f(d,E),f(d,K),f(e,L),f(e,A),f(A,I),f(I,F),f(I,V),f(e,j),f(e,B),f(B,J),f(B,D),f(B,N),f(B,Z),f(B,U)},p(R,x){x&32&&i!==(i=R[5]("Disk usage")+"")&&M(o,i),x&4&&a!==(a=R[2].blocks_pct+"")&&M(u,a),x&4&&Ut(l,"width",R[2].blocks_pct+"%"),x&32&&h!==(h=R[5]("Disk usage")+"")&&M(m,h),x&4&&y!==(y=R[2].blocks_used+"")&&M($,y),x&4&&T!==(T=R[2].blocks_total+"")&&M(K,T),x&4&&z!==(z=R[2].inodes_pct+"")&&M(F,z),x&4&&Ut(I,"width",R[2].inodes_pct+"%"),x&32&&H!==(H=R[5]("Inode usage")+"")&&M(J,H),x&4&&P!==(P=R[2].inodes_used+"")&&M(N,P),x&4&&Y!==(Y=R[2].inodes_total+"")&&M(U,Y)},d(R){R&&v(e)}}}function jv(t){let e,n,i,o,r,s=t[5]("Convos settings")+"",l,a,u,c=t[6]("These settings control what users experience when they visit [%1](%1).",Ve("base_url"))+"",p,d,h,m,g,y,$,E,T,K,L,A,I,z,F,V,j,B=t[5]("Tick this box if you want users to be able to register without an invite URL.")+"",H,J,D,P,N,Z,Y,U,R=t[5]("Check for updates")+"",x,le,ge,oe,Se,Re,ae,we,Ue,je,De;e=new Ft({props:{$$slots:{default:[Ev]},$$scope:{ctx:t}}});function Ne(X){t[11](X)}let ze={name:"organization_name",$$slots:{help:[Av],label:[Cv]},$$scope:{ctx:t}};t[3].organization_name!==void 0&&(ze.value=t[3].organization_name),d=new Je({props:ze}),fe.push(()=>me(d,"value",Ne));function ee(X){t[12](X)}let ue={name:"organization_url",placeholder:t[5]("https://convos.chat"),$$slots:{help:[Nv],label:[Ov]},$$scope:{ctx:t}};t[3].organization_url!==void 0&&(ue.value=t[3].organization_url),g=new Je({props:ue}),fe.push(()=>me(g,"value",ee));function qe(X){t[13](X)}let Te={name:"contact",placeholder:t[5]("Ex: jhthorsen@cpan.org"),$$slots:{help:[Rv],label:[Tv]},$$scope:{ctx:t}};t[3].contact!==void 0&&(Te.value=t[3].contact),E=new Je({props:Te}),fe.push(()=>me(E,"value",qe));function be(X){t[14](X)}let Ae={name:"video_service",placeholder:t[5]("Ex: https://meet.jit.si/"),$$slots:{help:[Iv],label:[Mv]},$$scope:{ctx:t}};t[3].video_service!==void 0&&(Ae.value=t[3].video_service),L=new Je({props:Ae}),fe.push(()=>me(L,"value",be));function te(X){t[15](X)}let ce={name:"open_to_public",$$slots:{label:[Lv]},$$scope:{ctx:t}};t[3].open_to_public!==void 0&&(ce.value=t[3].open_to_public),z=new it({props:ce}),fe.push(()=>me(z,"value",te)),P=new pt({props:{icon:"save",op:t[8],$$slots:{default:[Pv]},$$scope:{ctx:t}}}),Z=new It({props:{op:t[8]}});function $e(X,Q){return Q&2&&(oe=null),Q&2&&(Se=null),oe==null&&(oe=!!X[1].is("error")),oe?Bv:(Se==null&&(Se=!!X[1].is("success")),Se?Uv:Dv)}let re=$e(t,-1),_e=re(t);ae=new pt({props:{icon:"sync-alt",op:t[7],$$slots:{default:[Fv]},$$scope:{ctx:t}}});let Le=t[2]&&Ea(t);return{c(){G(e.$$.fragment),n=C(),i=_("main"),o=_("form"),r=_("h2"),l=O(s),a=C(),u=_("p"),p=C(),G(d.$$.fragment),m=C(),G(g.$$.fragment),$=C(),G(E.$$.fragment),K=C(),G(L.$$.fragment),I=C(),G(z.$$.fragment),V=C(),j=_("p"),H=O(B),J=C(),D=_("div"),G(P.$$.fragment),N=C(),G(Z.$$.fragment),Y=C(),U=_("h2"),x=O(R),le=C(),ge=_("form"),_e.c(),Re=C(),G(ae.$$.fragment),we=C(),Le&&Le.c(),k(j,"class","help"),k(D,"class","form-actions"),k(o,"id","convos-settings"),k(o,"method","post"),k(ge,"id","convos-updates"),k(ge,"method","post"),k(i,"class","main")},m(X,Q){q(e,X,Q),w(X,n,Q),w(X,i,Q),f(i,o),f(o,r),f(r,l),f(o,a),f(o,u),u.innerHTML=c,f(o,p),q(d,o,null),f(o,m),q(g,o,null),f(o,$),q(E,o,null),f(o,K),q(L,o,null),f(o,I),q(z,o,null),f(o,V),f(o,j),f(j,H),f(o,J),f(o,D),q(P,D,null),f(o,N),q(Z,o,null),f(i,Y),f(i,U),f(U,x),f(i,le),f(i,ge),_e.m(ge,null),f(ge,Re),q(ae,ge,null),f(i,we),Le&&Le.m(i,null),Ue=!0,je||(De=[Ce(o,"submit",st(t[9])),Ce(ge,"submit",st(t[16]))],je=!0)},p(X,[Q]){const ne={};Q&524320&&(ne.$$scope={dirty:Q,ctx:X}),e.$set(ne),(!Ue||Q&32)&&s!==(s=X[5]("Convos settings")+"")&&M(l,s),(!Ue||Q&64)&&c!==(c=X[6]("These settings control what users experience when they visit [%1](%1).",Ve("base_url"))+"")&&(u.innerHTML=c);const ie={};Q&524320&&(ie.$$scope={dirty:Q,ctx:X}),!h&&Q&8&&(h=!0,ie.value=X[3].organization_name,he(()=>h=!1)),d.$set(ie);const pe={};Q&32&&(pe.placeholder=X[5]("https://convos.chat")),Q&524320&&(pe.$$scope={dirty:Q,ctx:X}),!y&&Q&8&&(y=!0,pe.value=X[3].organization_url,he(()=>y=!1)),g.$set(pe);const We={};Q&32&&(We.placeholder=X[5]("Ex: jhthorsen@cpan.org")),Q&524320&&(We.$$scope={dirty:Q,ctx:X}),!T&&Q&8&&(T=!0,We.value=X[3].contact,he(()=>T=!1)),E.$set(We);const Be={};Q&32&&(Be.placeholder=X[5]("Ex: https://meet.jit.si/")),Q&524384&&(Be.$$scope={dirty:Q,ctx:X}),!A&&Q&8&&(A=!0,Be.value=X[3].video_service,he(()=>A=!1)),L.$set(Be);const rt={};Q&524320&&(rt.$$scope={dirty:Q,ctx:X}),!F&&Q&8&&(F=!0,rt.value=X[3].open_to_public,he(()=>F=!1)),z.$set(rt),(!Ue||Q&32)&&B!==(B=X[5]("Tick this box if you want users to be able to register without an invite URL.")+"")&&M(H,B);const St={};Q&524320&&(St.$$scope={dirty:Q,ctx:X}),P.$set(St),(!Ue||Q&32)&&R!==(R=X[5]("Check for updates")+"")&&M(x,R),re===(re=$e(X,Q))&&_e?_e.p(X,Q):(_e.d(1),_e=re(X),_e&&(_e.c(),_e.m(ge,Re)));const Pt={};Q&524320&&(Pt.$$scope={dirty:Q,ctx:X}),ae.$set(Pt),X[2]?Le?Le.p(X,Q):(Le=Ea(X),Le.c(),Le.m(i,null)):Le&&(Le.d(1),Le=null)},i(X){Ue||(b(e.$$.fragment,X),b(d.$$.fragment,X),b(g.$$.fragment,X),b(E.$$.fragment,X),b(L.$$.fragment,X),b(z.$$.fragment,X),b(P.$$.fragment,X),b(Z.$$.fragment,X),b(ae.$$.fragment,X),Ue=!0)},o(X){S(e.$$.fragment,X),S(d.$$.fragment,X),S(g.$$.fragment,X),S(E.$$.fragment,X),S(L.$$.fragment,X),S(z.$$.fragment,X),S(P.$$.fragment,X),S(Z.$$.fragment,X),S(ae.$$.fragment,X),Ue=!1},d(X){X&&(v(n),v(i)),W(e,X),W(d),W(g),W(E),W(L),W(z),W(P),W(Z),_e.d(),W(ae),Le&&Le.d(),je=!1,ht(De)}}}function zv(t,e,n){let i,o,r,s,l;ve(t,lt,A=>n(5,s=A)),ve(t,jt,A=>n(6,l=A));const a="Global settings",u=nt.op("checkForUpdates");ve(t,u,A=>n(1,r=A));const c=nt.op("getSettings"),p=nt.op("updateSettings");let d=null,h={};tn(async()=>{await c.perform();const A=c.res.body;n(2,d=m(A.disk_usage)),delete A.disk_usage,A.contact=A.contact.replace(/mailto:/,""),n(3,h={...h,...A})});function m(A){if(!A)return null;const I=A.block_size||1024;return{blocks_pct:Math.ceil(A.blocks_used/A.blocks_total*100),blocks_total:ii(I*A.blocks_total,"B"),blocks_used:ii(I*A.blocks_used,"B"),inodes_pct:Math.ceil(A.inodes_used/A.inodes_total*100),inodes_total:ii(A.inodes_total),inodes_used:ii(A.inodes_used)}}function g(){h.contact&&h.contact.indexOf("@")>0&&n(3,h.contact="mailto:"+h.contact,h),Ve("contact",h.contact),Ve("open_to_public",h.open_to_public),Ve("organization_name",h.organization_name),Ve("organization_url",h.organization_url),Eo.fromString(h.video_service),p.perform(h),n(3,h.contact=h.contact.replace(/mailto:/,""),h)}function y(A){t.$$.not_equal(h.organization_name,A)&&(h.organization_name=A,n(3,h))}function $(A){t.$$.not_equal(h.organization_url,A)&&(h.organization_url=A,n(3,h))}function E(A){t.$$.not_equal(h.contact,A)&&(h.contact=A,n(3,h))}function T(A){t.$$.not_equal(h.video_service,A)&&(h.video_service=A,n(3,h))}function K(A){t.$$.not_equal(h.open_to_public,A)&&(h.open_to_public=A,n(3,h))}const L=()=>u.perform();return t.$$.update=()=>{t.$$.dirty&2&&n(0,i=r.res.body.available),t.$$.dirty&1&&n(4,o=i==Ve("version"))},[i,r,d,h,o,s,l,u,p,g,a,y,$,E,T,K,L]}class Hv extends Xe{constructor(e){super(),Qe(this,e,zv,jv,Ze,{title:10})}get title(){return this.$$.ctx[10]}}function Ca(t,e,n){const i=t.slice();return i[25]=e[n],i}function qv(t){let e,n,i,o,r=Tt(t[4]("See all users"))+"",s,l;return e=new de({props:{name:"list"}}),n=new de({props:{name:"times"}}),{c(){G(e.$$.fragment),G(n.$$.fragment),i=C(),o=_("span"),s=O(r),k(o,"class","tooltip is-left")},m(a,u){q(e,a,u),q(n,a,u),w(a,i,u),w(a,o,u),f(o,s),l=!0},p(a,u){(!l||u&16)&&r!==(r=Tt(a[4]("See all users"))+"")&&M(s,r)},i(a){l||(b(e.$$.fragment,a),b(n.$$.fragment,a),l=!0)},o(a){S(e.$$.fragment,a),S(n.$$.fragment,a),l=!1},d(a){a&&(v(i),v(o)),W(e,a),W(n,a)}}}function Wv(t){let e,n=t[4](t[0].uid?"Account":"Users")+"",i,o,r,s;return r=new Ke({props:{href:"/settings/users",class:"btn-hallow can-toggle has-tooltip "+(t[0].uid?"is-active":""),$$slots:{default:[qv]},$$scope:{ctx:t}}}),{c(){e=_("h1"),i=O(n),o=C(),G(r.$$.fragment)},m(l,a){w(l,e,a),f(e,i),w(l,o,a),q(r,l,a),s=!0},p(l,a){(!s||a&17)&&n!==(n=l[4](l[0].uid?"Account":"Users")+"")&&M(i,n);const u={};a&1&&(u.class="btn-hallow can-toggle has-tooltip "+(l[0].uid?"is-active":"")),a&268435472&&(u.$$scope={dirty:a,ctx:l}),r.$set(u)},i(l){s||(b(r.$$.fragment,l),s=!0)},o(l){S(r.$$.fragment,l),s=!1},d(l){l&&(v(e),v(o)),W(r,l)}}}function Gv(t){let e,n,i=t[4]("Invite or recover password")+"",o,r,s,l,a,u,c,p,d,h,m,g,y=t[4]("Users")+"",$,E,T,K,L=t[1].length+"",A,I,z,F,V,j,B,H=t[4]("Email")+"",J,D,P,N=t[4]("Roles")+"",Z,Y,U,R=t[4]("Registered")+"",x,le,ge,oe,Se,Re,ae,we;function Ue(ee){t[22](ee)}let je={type:"email",name:"email",placeholder:t[4]("user@example.com"),$$slots:{help:[Vv],label:[Yv]},$$scope:{ctx:t}};t[0].email!==void 0&&(je.value=t[0].email),s=new Je({props:je}),fe.push(()=>me(s,"value",Ue));let De=t[3].url&&Aa(t);p=new pt({props:{icon:"save",op:t[9],disabled:!t[0].email,$$slots:{default:[Zv]},$$scope:{ctx:t}}}),h=new It({props:{op:t[9],success:"Link generated."}}),oe=new Mo({props:{colspan:"3",op:t[6]}});let Ne=xe(t[1]),ze=[];for(let ee=0;ee<Ne.length;ee+=1)ze[ee]=Oa(Ca(t,Ne,ee));return{c(){e=_("form"),n=_("h2"),o=O(i),r=C(),G(s.$$.fragment),a=C(),De&&De.c(),u=C(),c=_("div"),G(p.$$.fragment),d=C(),G(h.$$.fragment),m=C(),g=_("h2"),$=O(y),E=C(),T=_("small"),K=O("("),A=O(L),I=O(")"),z=C(),F=_("table"),V=_("thead"),j=_("tr"),B=_("th"),J=O(H),D=C(),P=_("th"),Z=O(N),Y=C(),U=_("th"),x=O(R),le=C(),ge=_("tbody"),G(oe.$$.fragment),Se=C();for(let ee=0;ee<ze.length;ee+=1)ze[ee].c();k(c,"class","form-actions"),k(e,"id","invite"),k(e,"method","post")},m(ee,ue){w(ee,e,ue),f(e,n),f(n,o),f(e,r),q(s,e,null),f(e,a),De&&De.m(e,null),f(e,u),f(e,c),q(p,c,null),f(e,d),q(h,e,null),w(ee,m,ue),w(ee,g,ue),f(g,$),f(g,E),f(g,T),f(T,K),f(T,A),f(T,I),w(ee,z,ue),w(ee,F,ue),f(F,V),f(V,j),f(j,B),f(B,J),f(j,D),f(j,P),f(P,Z),f(j,Y),f(j,U),f(U,x),f(F,le),f(F,ge),q(oe,ge,null),f(ge,Se);for(let qe=0;qe<ze.length;qe+=1)ze[qe]&&ze[qe].m(ge,null);Re=!0,ae||(we=Ce(e,"submit",st(t[13])),ae=!0)},p(ee,ue){(!Re||ue&16)&&i!==(i=ee[4]("Invite or recover password")+"")&&M(o,i);const qe={};ue&16&&(qe.placeholder=ee[4]("user@example.com")),ue&268435472&&(qe.$$scope={dirty:ue,ctx:ee}),!l&&ue&1&&(l=!0,qe.value=ee[0].email,he(()=>l=!1)),s.$set(qe),ee[3].url?De?De.p(ee,ue):(De=Aa(ee),De.c(),De.m(e,u)):De&&(De.d(1),De=null);const Te={};ue&1&&(Te.disabled=!ee[0].email),ue&268435472&&(Te.$$scope={dirty:ue,ctx:ee}),p.$set(Te),(!Re||ue&16)&&y!==(y=ee[4]("Users")+"")&&M($,y),(!Re||ue&2)&&L!==(L=ee[1].length+"")&&M(A,L),(!Re||ue&16)&&H!==(H=ee[4]("Email")+"")&&M(J,H),(!Re||ue&16)&&N!==(N=ee[4]("Roles")+"")&&M(Z,N),(!Re||ue&16)&&R!==(R=ee[4]("Registered")+"")&&M(x,R);const be={};if(ue&64&&(be.op=ee[6]),oe.$set(be),ue&2){Ne=xe(ee[1]);let Ae;for(Ae=0;Ae<Ne.length;Ae+=1){const te=Ca(ee,Ne,Ae);ze[Ae]?ze[Ae].p(te,ue):(ze[Ae]=Oa(te),ze[Ae].c(),ze[Ae].m(ge,null))}for(;Ae<ze.length;Ae+=1)ze[Ae].d(1);ze.length=Ne.length}},i(ee){Re||(b(s.$$.fragment,ee),b(p.$$.fragment,ee),b(h.$$.fragment,ee),b(oe.$$.fragment,ee),Re=!0)},o(ee){S(s.$$.fragment,ee),S(p.$$.fragment,ee),S(h.$$.fragment,ee),S(oe.$$.fragment,ee),Re=!1},d(ee){ee&&(v(e),v(m),v(g),v(z),v(F)),W(s),De&&De.d(),W(p),W(h),W(oe),kt(ze,ee),ae=!1,we()}}}function Kv(t){let e,n,i,o,r,s,l,a,u,c,p,d,h,m,g,y,$,E,T=t[4]("This will permanently remove user settings, chat logs, uploaded files and other user related data.")+"",K,L,A,I=t[5]('Please confirm by entering "**%1**" before hitting **%2**.',t[0].email,t[4]("Delete user"))+"",z,F,V,j,B,H,J,D,P,N,Z;function Y(oe){t[19](oe)}let U={name:"email",readonly:!0,$$slots:{label:[Jv]},$$scope:{ctx:t}};t[0].email!==void 0&&(U.value=t[0].email),o=new Je({props:U}),fe.push(()=>me(o,"value",Y));function R(oe){t[20](oe)}let x={name:"roles",placeholder:t[4]("admin, bot, ..."),$$slots:{help:[Xv],label:[Qv]},$$scope:{ctx:t}};t[0].roles!==void 0&&(x.value=t[0].roles),l=new Je({props:x}),fe.push(()=>me(l,"value",R)),p=new pt({props:{icon:"save",op:t[10],$$slots:{default:[xv]},$$scope:{ctx:t}}}),h=new It({props:{op:t[10]}});function le(oe){t[21](oe)}let ge={name:"confirm_email",$$slots:{label:[e0]},$$scope:{ctx:t}};return t[2]!==void 0&&(ge.value=t[2]),F=new Je({props:ge}),fe.push(()=>me(F,"value",le)),H=new pt({props:{icon:"trash",op:t[7],disabled:t[2]!==t[0].email,$$slots:{default:[t0]},$$scope:{ctx:t}}}),D=new It({props:{op:t[7],success:"Deleted."}}),{c(){e=_("form"),n=_("input"),i=C(),G(o.$$.fragment),s=C(),G(l.$$.fragment),u=C(),c=_("div"),G(p.$$.fragment),d=C(),G(h.$$.fragment),m=C(),g=_("h2"),g.textContent="Delete account",y=C(),$=_("form"),E=_("p"),K=O(T),L=C(),A=new At(!1),z=C(),G(F.$$.fragment),j=C(),B=_("div"),G(H.$$.fragment),J=C(),G(D.$$.fragment),k(n,"type","hidden"),k(n,"name","uid"),k(c,"class","form-actions"),k(e,"id","edit"),k(e,"method","post"),A.a=null,k(B,"class","form-actions"),k($,"id","delete"),k($,"method","post")},m(oe,Se){w(oe,e,Se),f(e,n),Ot(n,t[0].uid),f(e,i),q(o,e,null),f(e,s),q(l,e,null),f(e,u),f(e,c),q(p,c,null),f(e,d),q(h,e,null),w(oe,m,Se),w(oe,g,Se),w(oe,y,Se),w(oe,$,Se),f($,E),f(E,K),f(E,L),A.m(I,E),f($,z),q(F,$,null),f($,j),f($,B),q(H,B,null),f($,J),q(D,$,null),P=!0,N||(Z=[Ce(n,"input",t[18]),Ce(e,"submit",st(t[14])),Ce($,"submit",st(t[12]))],N=!0)},p(oe,Se){Se&1&&Ot(n,oe[0].uid);const Re={};Se&268435472&&(Re.$$scope={dirty:Se,ctx:oe}),!r&&Se&1&&(r=!0,Re.value=oe[0].email,he(()=>r=!1)),o.$set(Re);const ae={};Se&16&&(ae.placeholder=oe[4]("admin, bot, ...")),Se&268435472&&(ae.$$scope={dirty:Se,ctx:oe}),!a&&Se&1&&(a=!0,ae.value=oe[0].roles,he(()=>a=!1)),l.$set(ae);const we={};Se&268435472&&(we.$$scope={dirty:Se,ctx:oe}),p.$set(we),(!P||Se&16)&&T!==(T=oe[4]("This will permanently remove user settings, chat logs, uploaded files and other user related data.")+"")&&M(K,T),(!P||Se&49)&&I!==(I=oe[5]('Please confirm by entering "**%1**" before hitting **%2**.',oe[0].email,oe[4]("Delete user"))+"")&&A.p(I);const Ue={};Se&268435472&&(Ue.$$scope={dirty:Se,ctx:oe}),!V&&Se&4&&(V=!0,Ue.value=oe[2],he(()=>V=!1)),F.$set(Ue);const je={};Se&5&&(je.disabled=oe[2]!==oe[0].email),Se&268435472&&(je.$$scope={dirty:Se,ctx:oe}),H.$set(je)},i(oe){P||(b(o.$$.fragment,oe),b(l.$$.fragment,oe),b(p.$$.fragment,oe),b(h.$$.fragment,oe),b(F.$$.fragment,oe),b(H.$$.fragment,oe),b(D.$$.fragment,oe),P=!0)},o(oe){S(o.$$.fragment,oe),S(l.$$.fragment,oe),S(p.$$.fragment,oe),S(h.$$.fragment,oe),S(F.$$.fragment,oe),S(H.$$.fragment,oe),S(D.$$.fragment,oe),P=!1},d(oe){oe&&(v(e),v(m),v(g),v(y),v($)),W(o),W(l),W(p),W(h),W(F),W(H),W(D),N=!1,ht(Z)}}}function Yv(t){let e,n=t[4]("User email")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("User email")+"")&&M(i,n)},d(o){o&&v(e)}}}function Vv(t){let e,n=t[4]("Using this form, you can generate a forgotten password or invite link for a user.")+"",i;return{c(){e=_("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Using this form, you can generate a forgotten password or invite link for a user.")+"")&&M(i,n)},d(o){o&&v(e)}}}function Aa(t){let e,n=t[4]("A link was generated")+"",i,o,r,s,l=t[5](t[3].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"",a,u,c=t[5]("The link is valid until **%1**.",new Date(t[3].expires).toLocaleString())+"",p,d,h=t[3].url+"",m,g,y,$,E,T=t[4]("Tip: Clicking on the link will copy it to your clipboard.")+"",K,L,A;return{c(){e=_("h3"),i=O(n),o=C(),r=_("p"),s=new At(!1),a=C(),u=new At(!1),p=C(),d=_("a"),m=O(h),y=C(),$=_("p"),E=_("small"),K=O(T),s.a=a,u.a=null,k(d,"href",g=t[3].url)},m(I,z){w(I,e,z),f(e,i),w(I,o,z),w(I,r,z),s.m(l,r),f(r,a),u.m(c,r),w(I,p,z),w(I,d,z),f(d,m),w(I,y,z),w(I,$,z),f($,E),f(E,K),L||(A=Ce(d,"click",st(t[11])),L=!0)},p(I,z){z&16&&n!==(n=I[4]("A link was generated")+"")&&M(i,n),z&40&&l!==(l=I[5](I[3].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"")&&s.p(l),z&40&&c!==(c=I[5]("The link is valid until **%1**.",new Date(I[3].expires).toLocaleString())+"")&&u.p(c),z&8&&h!==(h=I[3].url+"")&&M(m,h),z&8&&g!==(g=I[3].url)&&k(d,"href",g),z&16&&T!==(T=I[4]("Tip: Clicking on the link will copy it to your clipboard.")+"")&&M(K,T)},d(I){I&&(v(e),v(o),v(r),v(p),v(d),v(y),v($)),L=!1,A()}}}function Zv(t){let e,n=t[4]("Generate link")+"",i;return{c(){e=_("span"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Generate link")+"")&&M(i,n)},d(o){o&&v(e)}}}function Oa(t){let e,n,i,o=t[25].email+"",r,s,l,a,u=t[25].roles.join(", ")+"",c,p,d,h=new $t(t[25].registered).getHumanDate({year:!0})+"",m,g;return{c(){e=_("tr"),n=_("td"),i=_("a"),r=O(o),l=C(),a=_("td"),c=O(u),p=C(),d=_("td"),m=O(h),g=C(),k(i,"href",s="#"+t[25].uid)},m(y,$){w(y,e,$),f(e,n),f(n,i),f(i,r),f(e,l),f(e,a),f(a,c),f(e,p),f(e,d),f(d,m),f(e,g)},p(y,$){$&2&&o!==(o=y[25].email+"")&&M(r,o),$&2&&s!==(s="#"+y[25].uid)&&k(i,"href",s),$&2&&u!==(u=y[25].roles.join(", ")+"")&&M(c,u),$&2&&h!==(h=new $t(y[25].registered).getHumanDate({year:!0})+"")&&M(m,h)},d(y){y&&v(e)}}}function Jv(t){let e,n=t[4]("Email")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Email")+"")&&M(i,n)},d(o){o&&v(e)}}}function Qv(t){let e,n=t[4]("Roles")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Roles")+"")&&M(i,n)},d(o){o&&v(e)}}}function Xv(t){let e,n=t[4]("Roles must be separated by comma.")+"",i;return{c(){e=_("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Roles must be separated by comma.")+"")&&M(i,n)},d(o){o&&v(e)}}}function xv(t){let e,n=t[4]("Save user")+"",i;return{c(){e=_("span"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Save user")+"")&&M(i,n)},d(o){o&&v(e)}}}function e0(t){let e,n=t[4]("Confirm email")+"",i;return{c(){e=_("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Confirm email")+"")&&M(i,n)},d(o){o&&v(e)}}}function t0(t){let e,n=t[4]("Delete user")+"",i;return{c(){e=_("span"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Delete user")+"")&&M(i,n)},d(o){o&&v(e)}}}function n0(t){let e,n,i,o,r,s;e=new Ft({props:{$$slots:{default:[Wv]},$$scope:{ctx:t}}});const l=[Kv,Gv],a=[];function u(c,p){return c[0].uid?0:1}return o=u(t),r=a[o]=l[o](t),{c(){G(e.$$.fragment),n=C(),i=_("main"),r.c(),k(i,"class","main")},m(c,p){q(e,c,p),w(c,n,p),w(c,i,p),a[o].m(i,null),s=!0},p(c,[p]){const d={};p&268435473&&(d.$$scope={dirty:p,ctx:c}),e.$set(d);let h=o;o=u(c),o===h?a[o].p(c,p):(ke(),S(a[h],1,1,()=>{a[h]=null}),ye(),r=a[o],r?r.p(c,p):(r=a[o]=l[o](c),r.c()),b(r,1),r.m(i,null))},i(c){s||(b(e.$$.fragment,c),b(r),s=!0)},o(c){S(e.$$.fragment,c),S(r),s=!1},d(c){c&&(v(n),v(i)),W(e,c),a[o].d()}}}function i0(t,e,n){let i,o,r,s,l,a;ve(t,lt,B=>n(4,o=B)),ve(t,Ie,B=>n(17,s=B)),ve(t,jt,B=>n(5,l=B));let{title:u="Users"}=e;const c=nt.op("deleteUser"),p=nt.op("getUsers");ve(t,p,B=>n(6,a=B));const d=nt.op("inviteUser");ve(t,d,B=>n(16,r=B));const h=nt.op("updateUser");let m="",g={email:""},y=[];tn(L);function $(B){const H=ku(B.target);H&&vt.showInApp(H,{title:o("Invite link copied")})}async function E(){c.reset(),h.reset(),m===g.email&&(await c.perform(g),c.is("success")&&(L(),Ie.go("/settings/users",{replace:!0})))}function T(B,H){const J=B.hash,D=J&&H.filter(P=>P.uid===J)[0];n(0,g=D?{...g,confirm_email:"",...D}:{...g,confirm_email:"",uid:""})}function K(){d.perform({email:g.email})}async function L(){await p.perform(),n(1,y=p.res.body.users||[]),p.reset()}function A(){c.reset(),h.perform({email:g.email,roles:Fr(g.roles)})}function I(){g.uid=this.value,n(0,g)}function z(B){t.$$.not_equal(g.email,B)&&(g.email=B,n(0,g))}function F(B){t.$$.not_equal(g.roles,B)&&(g.roles=B,n(0,g))}function V(B){m=B,n(2,m)}function j(B){t.$$.not_equal(g.email,B)&&(g.email=B,n(0,g))}return t.$$set=B=>{"title"in B&&n(15,u=B.title)},t.$$.update=()=>{t.$$.dirty&131074&&T(s,y),t.$$.dirty&65536&&n(3,i=r.res.body||{}),t.$$.dirty&1&&n(15,u=g.uid?g.email:"Users")},[g,y,m,i,o,l,a,c,p,d,h,$,E,K,A,u,r,s,I,z,F,V,j]}class o0 extends Xe{constructor(e){super(),Qe(this,e,i0,n0,Ze,{title:15})}}function Na(t,e,n){const i=t.slice();return i[21]=e[n],i[22]=e,i[23]=n,i}function r0(t){let e,n=t[6]("Files")+"",i;return{c(){e=_("h1"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&64&&n!==(n=o[6]("Files")+"")&&M(i,n)},d(o){o&&v(e)}}}function Ta(t){let e,n,i=new $t(t[21].saved).getHumanDate({year:!0})+"",o,r,s,l,a,u,c,p,d=t[21].name+"",h,m,g,y,$=ii(t[21].size,"B")+"",E,T,K,L,A,I,z,F;a=new de({props:{name:"copy"}});function V(B){t[17](B,t[21])}let j={name:t[21].id};return t[21].selected!==void 0&&(j.value=t[21].selected),L=new it({props:j}),fe.push(()=>me(L,"value",V)),{c(){e=_("tr"),n=_("td"),o=O(i),r=C(),s=_("td"),l=_("a"),G(a.$$.fragment),u=C(),c=_("td"),p=_("a"),h=O(d),g=C(),y=_("td"),E=O($),T=C(),K=_("td"),G(L.$$.fragment),k(l,"href","#copy"),k(p,"href",m=Ie.urlFor("/file/"+t[11].id+"/"+t[21].id)),k(p,"target","convos_files_file"),k(y,"class","text-right"),k(K,"class","text-right")},m(B,H){w(B,e,H),f(e,n),f(n,o),f(e,r),f(e,s),f(s,l),q(a,l,null),f(e,u),f(e,c),f(c,p),f(p,h),f(e,g),f(e,y),f(y,E),f(e,T),f(e,K),q(L,K,null),I=!0,z||(F=Ce(l,"click",t[12]),z=!0)},p(B,H){t=B,(!I||H&8)&&i!==(i=new $t(t[21].saved).getHumanDate({year:!0})+"")&&M(o,i),(!I||H&8)&&d!==(d=t[21].name+"")&&M(h,d),(!I||H&8&&m!==(m=Ie.urlFor("/file/"+t[11].id+"/"+t[21].id)))&&k(p,"href",m),(!I||H&8)&&$!==($=ii(t[21].size,"B")+"")&&M(E,$);const J={};H&8&&(J.name=t[21].id),!A&&H&8&&(A=!0,J.value=t[21].selected,he(()=>A=!1)),L.$set(J)},i(B){I||(b(a.$$.fragment,B),b(L.$$.fragment,B),I=!0)},o(B){S(a.$$.fragment,B),S(L.$$.fragment,B),I=!1},d(B){B&&v(e),W(a),W(L),z=!1,F()}}}function Ra(t){let e,n,i=t[6]("No files.")+"",o;return{c(){e=_("tr"),n=_("td"),o=O(i),k(n,"colspan","5")},m(r,s){w(r,e,s),f(e,n),f(n,o)},p(r,s){s&64&&i!==(i=r[6]("No files.")+"")&&M(o,i)},d(r){r&&v(e)}}}function Ma(t){let e,n;return e=new Mo({props:{colspan:"5",op:t[10],$$slots:{default:[s0]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o&16777216&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(b(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function s0(t){let e;return{c(){e=_("div"),e.textContent=" "},m(n,i){w(n,e,i)},p:Oe,d(n){n&&v(e)}}}function l0(t){let e,n=t[6]("Previous")+"",i;return{c(){e=_("span"),i=O(n),k(e,"class","disabled")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&64&&n!==(n=o[6]("Previous")+"")&&M(i,n)},i:Oe,o:Oe,d(o){o&&v(e)}}}function a0(t){let e,n;return e=new Ke({props:{href:"/settings/files?after="+t[5],$$slots:{default:[u0]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o&32&&(r.href="/settings/files?after="+i[5]),o&16777280&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(b(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function u0(t){let e=t[6]("Previous")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&64&&e!==(e=i[6]("Previous")+"")&&M(n,e)},d(i){i&&v(n)}}}function c0(t){let e,n=t[6]("Next")+"",i;return{c(){e=_("span"),i=O(n),k(e,"class","disabled")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&64&&n!==(n=o[6]("Next")+"")&&M(i,n)},i:Oe,o:Oe,d(o){o&&v(e)}}}function f0(t){let e,n;return e=new Ke({props:{href:"/settings/files?after="+t[4],$$slots:{default:[p0]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o&16&&(r.href="/settings/files?after="+i[4]),o&16777280&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(b(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function p0(t){let e=t[6]("Next")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&64&&e!==(e=i[6]("Next")+"")&&M(n,e)},d(i){i&&v(n)}}}function d0(t){let e,n=t[6]("Delete selected files")+"",i;return{c(){e=_("span"),i=O(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&64&&n!==(n=o[6]("Delete selected files")+"")&&M(i,n)},d(o){o&&v(e)}}}function Ia(t){let e,n=t[8]("By deleting the files, you and everyone with the link *should* lose access to the file: Aggressive caching in browsers or proxies between Convos and other users might keep the file around for some time.")+"";return{c(){e=_("p")},m(i,o){w(i,e,o),e.innerHTML=n},p(i,o){o&256&&n!==(n=i[8]("By deleting the files, you and everyone with the link *should* lose access to the file: Aggressive caching in browsers or proxies between Convos and other users might keep the file around for some time.")+"")&&(e.innerHTML=n)},d(i){i&&v(e)}}}function h0(t){let e,n,i,o,r,s,l,a,u=t[6]("Uploaded")+"",c,p,d,h,m,g=t[6]("Name")+"",y,$,E,T=t[6]("Size")+"",K,L,A,I,z,F,V,j,B,H,J,D=!t[7].is("loading"),P,N,Z,Y,U,R,x,le,ge,oe,Se,Re,ae,we;e=new Ft({props:{$$slots:{default:[r0]},$$scope:{ctx:t}}});function Ue(re){t[16](re)}let je={};t[0]!==void 0&&(je.value=t[0]),I=new it({props:je}),fe.push(()=>me(I,"value",Ue));let De=xe(t[3]),Ne=[];for(let re=0;re<De.length;re+=1)Ne[re]=Ta(Na(t,De,re));const ze=re=>S(Ne[re],1,1,()=>{Ne[re]=null});let ee=t[3].length===0&&Ra(t);H=new Mo({props:{colspan:"5",op:t[9]}});let ue=D&&Ma(t);const qe=[a0,l0],Te=[];function be(re,_e){return re[5]||re[1].query.after?0:1}Z=be(t),Y=Te[Z]=qe[Z](t);const Ae=[f0,c0],te=[];function ce(re,_e){return re[4]?0:1}R=ce(t),x=te[R]=Ae[R](t),oe=new pt({props:{icon:"trash",op:t[9],disabled:t[2],$$slots:{default:[d0]},$$scope:{ctx:t}}}),oe.$on("click",t[13]);let $e=(t[3].length||t[1].query.after)&&Ia(t);return{c(){G(e.$$.fragment),n=C(),i=_("main"),o=_("form"),r=_("table"),s=_("thead"),l=_("tr"),a=_("th"),c=O(u),p=C(),d=_("th"),d.textContent=" ",h=C(),m=_("th"),y=O(g),$=C(),E=_("th"),K=O(T),L=C(),A=_("th"),G(I.$$.fragment),F=C(),V=_("tbody");for(let re=0;re<Ne.length;re+=1)Ne[re].c();j=C(),ee&&ee.c(),B=C(),G(H.$$.fragment),J=C(),ue&&ue.c(),P=C(),N=_("div"),Y.c(),U=C(),x.c(),le=C(),ge=_("div"),G(oe.$$.fragment),Se=C(),$e&&$e.c(),k(E,"class","text-right"),k(A,"class","text-right"),k(N,"class","pagination"),k(ge,"class","form-actions"),k(o,"method","post"),k(i,"class","main")},m(re,_e){q(e,re,_e),w(re,n,_e),w(re,i,_e),f(i,o),f(o,r),f(r,s),f(s,l),f(l,a),f(a,c),f(l,p),f(l,d),f(l,h),f(l,m),f(m,y),f(l,$),f(l,E),f(E,K),f(l,L),f(l,A),q(I,A,null),f(r,F),f(r,V);for(let Le=0;Le<Ne.length;Le+=1)Ne[Le]&&Ne[Le].m(V,null);f(V,j),ee&&ee.m(V,null),f(V,B),q(H,V,null),f(V,J),ue&&ue.m(V,null),f(o,P),f(o,N),Te[Z].m(N,null),f(N,U),te[R].m(N,null),f(o,le),f(o,ge),q(oe,ge,null),f(o,Se),$e&&$e.m(o,null),Re=!0,ae||(we=[Ce(o,"change",t[14]),Ce(o,"submit",st(t[15]))],ae=!0)},p(re,[_e]){const Le={};_e&16777280&&(Le.$$scope={dirty:_e,ctx:re}),e.$set(Le),(!Re||_e&64)&&u!==(u=re[6]("Uploaded")+"")&&M(c,u),(!Re||_e&64)&&g!==(g=re[6]("Name")+"")&&M(y,g),(!Re||_e&64)&&T!==(T=re[6]("Size")+"")&&M(K,T);const X={};if(!z&&_e&1&&(z=!0,X.value=re[0],he(()=>z=!1)),I.$set(X),_e&6152){De=xe(re[3]);let pe;for(pe=0;pe<De.length;pe+=1){const We=Na(re,De,pe);Ne[pe]?(Ne[pe].p(We,_e),b(Ne[pe],1)):(Ne[pe]=Ta(We),Ne[pe].c(),b(Ne[pe],1),Ne[pe].m(V,j))}for(ke(),pe=De.length;pe<Ne.length;pe+=1)ze(pe);ye()}re[3].length===0?ee?ee.p(re,_e):(ee=Ra(re),ee.c(),ee.m(V,B)):ee&&(ee.d(1),ee=null),_e&128&&(D=!re[7].is("loading")),D?ue?(ue.p(re,_e),_e&128&&b(ue,1)):(ue=Ma(re),ue.c(),b(ue,1),ue.m(V,null)):ue&&(ke(),S(ue,1,1,()=>{ue=null}),ye());let Q=Z;Z=be(re),Z===Q?Te[Z].p(re,_e):(ke(),S(Te[Q],1,1,()=>{Te[Q]=null}),ye(),Y=Te[Z],Y?Y.p(re,_e):(Y=Te[Z]=qe[Z](re),Y.c()),b(Y,1),Y.m(N,U));let ne=R;R=ce(re),R===ne?te[R].p(re,_e):(ke(),S(te[ne],1,1,()=>{te[ne]=null}),ye(),x=te[R],x?x.p(re,_e):(x=te[R]=Ae[R](re),x.c()),b(x,1),x.m(N,null));const ie={};_e&4&&(ie.disabled=re[2]),_e&16777280&&(ie.$$scope={dirty:_e,ctx:re}),oe.$set(ie),re[3].length||re[1].query.after?$e?$e.p(re,_e):($e=Ia(re),$e.c(),$e.m(o,null)):$e&&($e.d(1),$e=null)},i(re){if(!Re){b(e.$$.fragment,re),b(I.$$.fragment,re);for(let _e=0;_e<De.length;_e+=1)b(Ne[_e]);b(H.$$.fragment,re),b(ue),b(Y),b(x),b(oe.$$.fragment,re),Re=!0}},o(re){S(e.$$.fragment,re),S(I.$$.fragment,re),Ne=Ne.filter(Boolean);for(let _e=0;_e<Ne.length;_e+=1)S(Ne[_e]);S(H.$$.fragment,re),S(ue),S(Y),S(x),S(oe.$$.fragment,re),Re=!1},d(re){re&&(v(n),v(i)),W(e,re),W(I),kt(Ne,re),ee&&ee.d(),W(H),ue&&ue.d(),Te[Z].d(),te[R].d(),W(oe),$e&&$e.d(),ae=!1,ht(we)}}}function m0(t,e,n){let i,o,r,s,l;ve(t,lt,z=>n(6,o=z)),ve(t,Ie,z=>n(1,r=z)),ve(t,jt,z=>n(8,l=z));const a=nt.op("deleteFiles");ve(t,a,z=>n(7,s=z));const u=nt.op("getFiles");ve(t,u,z=>n(18,i=z));const c=gt("user");let p=!1,d=!0,h=[],m="",g="";function y(z){const F=z.target.closest("tr").querySelector('[target="convos_files_file"]'),V=ku({value:F.href});V&&vt.showInApp(V,{closeAfter:3e3,title:o("File URL copied")})}async function $(){const z=h.filter(F=>F.selected);await a.perform({fid:z.map(F=>F.id).join(","),uid:c.id}),n(3,h=h.filter(F=>!F.selected)),n(0,p=!1),T(),h.length===0&&E(Ie)}async function E(z){const F=z.query.after||"";await u.perform({after:F,limit:20}),n(3,h=u.res.body.files||[]),n(0,p=!1),T(),(h.length||!F)&&(n(4,m=i.res.body.next&&h.slice(-1)[0].id||""),n(5,g=i.res.body.prev||""))}function T(){n(2,d=!h.find(z=>z.selected))}function K(z){n(3,h=h.map(F=>(F.selected=z,F)))}function L(z){_i.call(this,t,z)}function A(z){p=z,n(0,p)}function I(z,F){t.$$.not_equal(F.selected,z)&&(F.selected=z,n(3,h))}return t.$$.update=()=>{t.$$.dirty&2&&E(r),t.$$.dirty&1&&K(p)},[p,r,d,h,m,g,o,s,l,a,u,c,y,$,T,L,A,I]}class _0 extends Xe{constructor(e){super(),Qe(this,e,m0,h0,Ze,{})}}function La(t,e,n){const i=t.slice();return i[26]=e[n],i}function Pa(t,e,n){const i=t.slice();return i[29]=e[n],i}function g0(t){let e,n,i,o,r,s,l,a,u,c,p,d;return l=new de({props:{name:"search"}}),u=new Ke({props:{href:"/chat",class:"btn-hallow for-notifications",$$slots:{default:[b0]},$$scope:{ctx:t}}}),{c(){e=_("div"),n=_("form"),i=_("input"),r=C(),s=_("label"),G(l.$$.fragment),a=C(),G(u.$$.fragment),k(i,"type","text"),k(i,"id","search_input"),k(i,"class","is-primary-menu-item"),k(i,"placeholder",o=t[3]?t[9]("Search..."):t[9]("Convos")),k(s,"for","search_input"),k(s,"class","btn-hallow"),k(n,"class","sidebar-header"),He(n,"has-focus",t[3]),k(e,"class","header-wrapper svelte-sb93e8")},m(h,m){w(h,e,m),f(e,n),f(n,i),Ot(i,t[1]),f(n,r),f(n,s),q(l,s,null),f(n,a),q(u,n,null),c=!0,p||(d=[Ce(i,"input",t[20]),Ce(i,"blur",t[13]),Ce(i,"focus",t[14]),Ce(i,"keydown",t[15]),Ce(n,"submit",P0)],p=!0)},p(h,m){(!c||m[0]&520&&o!==(o=h[3]?h[9]("Search..."):h[9]("Convos")))&&k(i,"placeholder",o),m[0]&2&&i.value!==h[1]&&Ot(i,h[1]);const g={};m[0]&1024|m[1]&2&&(g.$$scope={dirty:m,ctx:h}),u.$set(g),(!c||m[0]&8)&&He(n,"has-focus",h[3])},i(h){c||(b(l.$$.fragment,h),b(u.$$.fragment,h),c=!0)},o(h){S(l.$$.fragment,h),S(u.$$.fragment,h),c=!1},d(h){h&&v(e),W(l),W(u),p=!1,ht(d)}}}function b0(t){let e,n,i,o=vn(t[10])+"",r,s,l;return e=new de({props:{family:"regular",name:"bell"}}),{c(){G(e.$$.fragment),n=C(),i=_("small"),r=O(o),k(i,"class","badge is-important"),i.hidden=s=!t[10].unread},m(a,u){q(e,a,u),w(a,n,u),w(a,i,u),f(i,r),l=!0},p(a,u){(!l||u[0]&1024)&&o!==(o=vn(a[10])+"")&&M(r,o),(!l||u[0]&1024&&s!==(s=!a[10].unread))&&(i.hidden=s)},i(a){l||(b(e.$$.fragment,a),l=!0)},o(a){S(e.$$.fragment,a),l=!1},d(a){a&&(v(n),v(i)),W(e,a)}}}function Da(t){let e,n;return e=new Ke({props:{href:"/settings/connections",$$slots:{default:[v0]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o[0]&512|o[1]&2&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(b(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function v0(t){let e,n,i,o=t[9]("No conversations")+"",r,s;return e=new de({props:{name:"exclamation-circle"}}),{c(){G(e.$$.fragment),n=C(),i=_("span"),r=O(o)},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a[0]&512)&&o!==(o=l[9]("No conversations")+"")&&M(r,o)},i(l){s||(b(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){l&&(v(n),v(i)),W(e,l)}}}function Ua(t){let e,n,i,o,r;n=new Ke({props:{href:t[26].path,class:Ao(t[26],t[26]),$$slots:{default:[$0]},$$scope:{ctx:t}}});let s=xe(t[26].conversations.toArray()),l=[];for(let u=0;u<s.length;u+=1)l[u]=Ba(Pa(t,s,u));const a=u=>S(l[u],1,1,()=>{l[u]=null});return{c(){e=_("div"),G(n.$$.fragment),i=C();for(let u=0;u<l.length;u+=1)l[u].c();k(e,"class","collapsible svelte-sb93e8")},m(u,c){w(u,e,c),q(n,e,null),f(e,i);for(let p=0;p<l.length;p+=1)l[p]&&l[p].m(e,null);r=!0},p(u,c){t=u;const p={};if(c[0]&16&&(p.href=t[26].path),c[0]&16&&(p.class=Ao(t[26],t[26])),c[0]&530|c[1]&2&&(p.$$scope={dirty:c,ctx:t}),n.$set(p),c[0]&528){s=xe(t[26].conversations.toArray());let d;for(d=0;d<s.length;d+=1){const h=Pa(t,s,d);l[d]?(l[d].p(h,c),b(l[d],1)):(l[d]=Ba(h),l[d].c(),b(l[d],1),l[d].m(e,null))}for(ke(),d=s.length;d<l.length;d+=1)a(d);ye()}},i(u){if(!r){b(n.$$.fragment,u);for(let c=0;c<s.length;c+=1)b(l[c]);u&&at(()=>{r&&(o||(o=et(e,Jt,{duration:t[7]},!0)),o.run(1))}),r=!0}},o(u){S(n.$$.fragment,u),l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)S(l[c]);u&&(o||(o=et(e,Jt,{duration:t[7]},!1)),o.run(0)),r=!1},d(u){u&&v(e),W(n),kt(l,u),u&&o&&o.end()}}}function $0(t){let e,n,i,o=(t[1].length>0?t[26].name:t[9]("Server"))+"",r,s,l,a=t[9](t[26].frozen)+"",u,c,p,d=vn(t[26])+"",h,m,g;return e=new de({props:{name:"network-wired"}}),{c(){G(e.$$.fragment),n=C(),i=_("span"),r=O(o),s=C(),l=_("span"),u=O(a),c=C(),p=_("span"),h=O(d),k(i,"class","name"),k(l,"class","tooltip svelte-sb93e8"),k(p,"class","badge"),p.hidden=m=!t[26].unread},m(y,$){q(e,y,$),w(y,n,$),w(y,i,$),f(i,r),w(y,s,$),w(y,l,$),f(l,u),w(y,c,$),w(y,p,$),f(p,h),g=!0},p(y,$){(!g||$[0]&530)&&o!==(o=(y[1].length>0?y[26].name:y[9]("Server"))+"")&&M(r,o),(!g||$[0]&528)&&a!==(a=y[9](y[26].frozen)+"")&&M(u,a),(!g||$[0]&16)&&d!==(d=vn(y[26])+"")&&M(h,d),(!g||$[0]&16&&m!==(m=!y[26].unread))&&(p.hidden=m)},i(y){g||(b(e.$$.fragment,y),g=!0)},o(y){S(e.$$.fragment,y),g=!1},d(y){y&&(v(n),v(i),v(s),v(l),v(c),v(p)),W(e,y)}}}function w0(t){let e,n;return e=new de({props:{name:t[29].is("private")?"user":"user-friends"}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o[0]&16&&(r.name=i[29].is("private")?"user":"user-friends"),e.$set(r)},i(i){n||(b(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function k0(t){let e,n;return e=new de({props:{name:"exclamation-triangle"}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p:Oe,i(i){n||(b(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function y0(t){let e,n,i,o,r,s=t[29].name+"",l,a,u,c=t[9](t[29].frozen)+"",p,d,h,m=vn(t[29])+"",g,y,$;const E=[k0,w0],T=[];function K(L,A){return A[0]&16&&(e=null),e==null&&(e=!!(L[29].frozen&&!L[29].is("private"))),e?0:1}return n=K(t,[-1,-1]),i=T[n]=E[n](t),{c(){i.c(),o=C(),r=_("span"),l=O(s),a=C(),u=_("span"),p=O(c),d=C(),h=_("span"),g=O(m),k(r,"class","name"),k(u,"class","tooltip svelte-sb93e8"),k(h,"class","badge"),h.hidden=y=!t[29].unread,He(h,"is-important",!!t[29].notifications)},m(L,A){T[n].m(L,A),w(L,o,A),w(L,r,A),f(r,l),w(L,a,A),w(L,u,A),f(u,p),w(L,d,A),w(L,h,A),f(h,g),$=!0},p(L,A){let I=n;n=K(L,A),n===I?T[n].p(L,A):(ke(),S(T[I],1,1,()=>{T[I]=null}),ye(),i=T[n],i?i.p(L,A):(i=T[n]=E[n](L),i.c()),b(i,1),i.m(o.parentNode,o)),(!$||A[0]&16)&&s!==(s=L[29].name+"")&&M(l,s),(!$||A[0]&528)&&c!==(c=L[9](L[29].frozen)+"")&&M(p,c),(!$||A[0]&16)&&m!==(m=vn(L[29])+"")&&M(g,m),(!$||A[0]&16&&y!==(y=!L[29].unread))&&(h.hidden=y),(!$||A[0]&16)&&He(h,"is-important",!!L[29].notifications)},i(L){$||(b(i),$=!0)},o(L){S(i),$=!1},d(L){L&&(v(o),v(r),v(a),v(u),v(d),v(h)),T[n].d(L)}}}function Ba(t){let e,n;return e=new Ke({props:{href:t[29].path,class:Ao(t[26],t[29]),$$slots:{default:[y0]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o[0]&16&&(r.href=i[29].path),o[0]&16&&(r.class=Ao(i[26],i[29])),o[0]&528|o[1]&2&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(b(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function Fa(t){let e,n,i,o,r=(t[26].name||t[26].connection_id)+"",s,l,a,u,c,p,d;n=new de({props:{name:"chevron-up"}});function h(){return t[21](t[26])}let m=(!t[5][t[26].connection_id]||t[1].length)&&Ua(t);return{c(){e=_("a"),G(n.$$.fragment),i=C(),o=_("span"),s=O(r),a=C(),m&&m.c(),u=ft(),k(e,"href","#toggle"),e.hidden=l=t[1].length>0,k(e,"class","svelte-sb93e8"),He(e,"collapsed",t[5][t[26].connection_id])},m(g,y){w(g,e,y),q(n,e,null),f(e,i),f(e,o),f(o,s),w(g,a,y),m&&m.m(g,y),w(g,u,y),c=!0,p||(d=Ce(e,"click",st(h)),p=!0)},p(g,y){t=g,(!c||y[0]&16)&&r!==(r=(t[26].name||t[26].connection_id)+"")&&M(s,r),(!c||y[0]&2&&l!==(l=t[1].length>0))&&(e.hidden=l),(!c||y[0]&48)&&He(e,"collapsed",t[5][t[26].connection_id]),!t[5][t[26].connection_id]||t[1].length?m?(m.p(t,y),y[0]&50&&b(m,1)):(m=Ua(t),m.c(),b(m,1),m.m(u.parentNode,u)):m&&(ke(),S(m,1,1,()=>{m=null}),ye())},i(g){c||(b(n.$$.fragment,g),b(m),c=!0)},o(g){S(n.$$.fragment,g),S(m),c=!1},d(g){g&&(v(e),v(a),v(u)),W(n),m&&m.d(g),p=!1,d()}}}function ja(t){let e,n,i,o,r,s,l,a,u,c,p,d,h,m=t[4].is("admin"),g,y,$,E,T,K,L,A=t[9]("Log out")+"",I,z,F;n=new Ke({props:{href:"/chat",$$slots:{default:[S0]},$$scope:{ctx:t}}}),o=new Ke({props:{href:"/search",$$slots:{default:[E0]},$$scope:{ctx:t}}}),s=new Ke({props:{href:t[8],$$slots:{default:[C0]},$$scope:{ctx:t}}}),a=new Ke({props:{href:"/settings/connections",$$slots:{default:[A0]},$$scope:{ctx:t}}}),c=new Ke({props:{href:"/settings/account",$$slots:{default:[O0]},$$scope:{ctx:t}}}),d=new Ke({props:{href:"/settings/files",$$slots:{default:[N0]},$$scope:{ctx:t}}});let V=m&&za(t);return y=new Ke({props:{href:"/help",$$slots:{default:[M0]},$$scope:{ctx:t}}}),T=new de({props:{name:"power-off"}}),{c(){e=_("div"),G(n.$$.fragment),i=C(),G(o.$$.fragment),r=C(),G(s.$$.fragment),l=C(),G(a.$$.fragment),u=C(),G(c.$$.fragment),p=C(),G(d.$$.fragment),h=C(),V&&V.c(),g=C(),G(y.$$.fragment),$=C(),E=_("a"),G(T.$$.fragment),K=C(),L=_("span"),I=O(A),k(L,"class","name"),k(E,"href",Ie.urlFor("/logout")+"?csrf="+Ve("csrf")),k(E,"target","_self"),k(E,"class","svelte-sb93e8"),k(e,"class","collapsible svelte-sb93e8")},m(j,B){w(j,e,B),q(n,e,null),f(e,i),q(o,e,null),f(e,r),q(s,e,null),f(e,l),q(a,e,null),f(e,u),q(c,e,null),f(e,p),q(d,e,null),f(e,h),V&&V.m(e,null),f(e,g),q(y,e,null),f(e,$),f(e,E),q(T,E,null),f(E,K),f(E,L),f(L,I),F=!0},p(j,B){t=j;const H={};B[0]&1536|B[1]&2&&(H.$$scope={dirty:B,ctx:t}),n.$set(H);const J={};B[0]&512|B[1]&2&&(J.$$scope={dirty:B,ctx:t}),o.$set(J);const D={};B[0]&256&&(D.href=t[8]),B[0]&512|B[1]&2&&(D.$$scope={dirty:B,ctx:t}),s.$set(D);const P={};B[0]&512|B[1]&2&&(P.$$scope={dirty:B,ctx:t}),a.$set(P);const N={};B[0]&512|B[1]&2&&(N.$$scope={dirty:B,ctx:t}),c.$set(N);const Z={};B[0]&512|B[1]&2&&(Z.$$scope={dirty:B,ctx:t}),d.$set(Z),B[0]&16&&(m=t[4].is("admin")),m?V?(V.p(t,B),B[0]&16&&b(V,1)):(V=za(t),V.c(),b(V,1),V.m(e,g)):V&&(ke(),S(V,1,1,()=>{V=null}),ye());const Y={};B[0]&512|B[1]&2&&(Y.$$scope={dirty:B,ctx:t}),y.$set(Y),(!F||B[0]&512)&&A!==(A=t[9]("Log out")+"")&&M(I,A)},i(j){F||(b(n.$$.fragment,j),b(o.$$.fragment,j),b(s.$$.fragment,j),b(a.$$.fragment,j),b(c.$$.fragment,j),b(d.$$.fragment,j),b(V),b(y.$$.fragment,j),b(T.$$.fragment,j),j&&at(()=>{F&&(z||(z=et(e,Jt,{duration:t[7]},!0)),z.run(1))}),F=!0)},o(j){S(n.$$.fragment,j),S(o.$$.fragment,j),S(s.$$.fragment,j),S(a.$$.fragment,j),S(c.$$.fragment,j),S(d.$$.fragment,j),S(V),S(y.$$.fragment,j),S(T.$$.fragment,j),j&&(z||(z=et(e,Jt,{duration:t[7]},!1)),z.run(0)),F=!1},d(j){j&&v(e),W(n),W(o),W(s),W(a),W(c),W(d),V&&V.d(),W(y),W(T),j&&z&&z.end()}}}function S0(t){let e,n,i,o=t[9]("Notifications")+"",r,s,l,a=vn(t[10])+"",u,c,p;return e=new de({props:{name:"bell"}}),{c(){G(e.$$.fragment),n=C(),i=_("span"),r=O(o),s=C(),l=_("span"),u=O(a),k(i,"class","name"),k(l,"class","badge"),l.hidden=c=!t[10].unread},m(d,h){q(e,d,h),w(d,n,h),w(d,i,h),f(i,r),w(d,s,h),w(d,l,h),f(l,u),p=!0},p(d,h){(!p||h[0]&512)&&o!==(o=d[9]("Notifications")+"")&&M(r,o),(!p||h[0]&1024)&&a!==(a=vn(d[10])+"")&&M(u,a),(!p||h[0]&1024&&c!==(c=!d[10].unread))&&(l.hidden=c)},i(d){p||(b(e.$$.fragment,d),p=!0)},o(d){S(e.$$.fragment,d),p=!1},d(d){d&&(v(n),v(i),v(s),v(l)),W(e,d)}}}function E0(t){let e,n,i,o=t[9]("Search")+"",r,s;return e=new de({props:{name:"search"}}),{c(){G(e.$$.fragment),n=C(),i=_("span"),r=O(o),k(i,"class","name")},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a[0]&512)&&o!==(o=l[9]("Search")+"")&&M(r,o)},i(l){s||(b(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){l&&(v(n),v(i)),W(e,l)}}}function C0(t){let e,n,i,o=t[9]("Add conversation")+"",r,s;return e=new de({props:{name:"comment"}}),{c(){G(e.$$.fragment),n=C(),i=_("span"),r=O(o),k(i,"class","name")},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a[0]&512)&&o!==(o=l[9]("Add conversation")+"")&&M(r,o)},i(l){s||(b(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){l&&(v(n),v(i)),W(e,l)}}}function A0(t){let e,n,i,o=t[9]("Connections")+"",r,s;return e=new de({props:{name:"network-wired"}}),{c(){G(e.$$.fragment),n=C(),i=_("span"),r=O(o),k(i,"class","name")},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a[0]&512)&&o!==(o=l[9]("Connections")+"")&&M(r,o)},i(l){s||(b(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){l&&(v(n),v(i)),W(e,l)}}}function O0(t){let e,n,i,o=t[9]("Account")+"",r,s;return e=new de({props:{name:"user-cog"}}),{c(){G(e.$$.fragment),n=C(),i=_("span"),r=O(o),k(i,"class","name")},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a[0]&512)&&o!==(o=l[9]("Account")+"")&&M(r,o)},i(l){s||(b(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){l&&(v(n),v(i)),W(e,l)}}}function N0(t){let e,n,i,o=t[9]("Files")+"",r,s;return e=new de({props:{name:"folder-open"}}),{c(){G(e.$$.fragment),n=C(),i=_("span"),r=O(o),k(i,"class","name")},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a[0]&512)&&o!==(o=l[9]("Files")+"")&&M(r,o)},i(l){s||(b(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){l&&(v(n),v(i)),W(e,l)}}}function za(t){let e,n,i,o;return e=new Ke({props:{href:"/settings",$$slots:{default:[T0]},$$scope:{ctx:t}}}),i=new Ke({props:{href:"/settings/users",$$slots:{default:[R0]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment),n=C(),G(i.$$.fragment)},m(r,s){q(e,r,s),w(r,n,s),q(i,r,s),o=!0},p(r,s){const l={};s[0]&512|s[1]&2&&(l.$$scope={dirty:s,ctx:r}),e.$set(l);const a={};s[0]&512|s[1]&2&&(a.$$scope={dirty:s,ctx:r}),i.$set(a)},i(r){o||(b(e.$$.fragment,r),b(i.$$.fragment,r),o=!0)},o(r){S(e.$$.fragment,r),S(i.$$.fragment,r),o=!1},d(r){r&&v(n),W(e,r),W(i,r)}}}function T0(t){let e,n,i,o=t[9]("Settings")+"",r,s;return e=new de({props:{name:"tools"}}),{c(){G(e.$$.fragment),n=C(),i=_("span"),r=O(o),k(i,"class","name")},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a[0]&512)&&o!==(o=l[9]("Settings")+"")&&M(r,o)},i(l){s||(b(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){l&&(v(n),v(i)),W(e,l)}}}function R0(t){let e,n,i,o=t[9]("Users")+"",r,s;return e=new de({props:{name:"users"}}),{c(){G(e.$$.fragment),n=C(),i=_("span"),r=O(o),k(i,"class","name")},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a[0]&512)&&o!==(o=l[9]("Users")+"")&&M(r,o)},i(l){s||(b(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){l&&(v(n),v(i)),W(e,l)}}}function M0(t){let e,n,i,o=t[9]("Help")+"",r,s;return e=new de({props:{name:"question-circle"}}),{c(){G(e.$$.fragment),n=C(),i=_("span"),r=O(o),k(i,"class","name")},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a[0]&512)&&o!==(o=l[9]("Help")+"")&&M(r,o)},i(l){s||(b(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){l&&(v(n),v(i)),W(e,l)}}}function I0(t){let e,n,i,o=t[9]('Search for "%1"',t[6])+"",r,s;return e=new de({props:{name:"search"}}),{c(){G(e.$$.fragment),n=C(),i=_("span"),r=O(o),k(i,"class","name")},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a[0]&576)&&o!==(o=l[9]('Search for "%1"',l[6])+"")&&M(r,o)},i(l){s||(b(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){l&&(v(n),v(i)),W(e,l)}}}function L0(t){let e,n,i,o,r=t[9]("Conversations")+"",s,l,a,u,c,p,d=t[9]("Settings")+"",h,m,g,y,$,E,T,K=t[4].email+"",L,A,I,z,F,V,j,B,H,J=!bn.isSingleColumn&&g0(t),D=!t[4].connections.size&&Da(t),P=xe(t[4].connections.toArray()),N=[];for(let U=0;U<P.length;U+=1)N[U]=Fa(La(t,P,U));const Z=U=>S(N[U],1,1,()=>{N[U]=null});$=new de({props:{name:"chevron-up"}});let Y=!t[5].settings&&!t[1].length&&ja(t);return F=new Ke({props:{href:"/search?q="+encodeURIComponent(t[6]),class:"for-search hidden",$$slots:{default:[I0]},$$scope:{ctx:t}}}),{c(){e=_("div"),J&&J.c(),n=C(),i=_("nav"),o=_("h3"),s=O(r),a=C(),D&&D.c(),u=C();for(let U=0;U<N.length;U+=1)N[U].c();c=C(),p=_("h3"),h=O(d),g=C(),y=_("a"),G($.$$.fragment),E=C(),T=_("span"),L=O(K),I=C(),Y&&Y.c(),z=C(),G(F.$$.fragment),o.hidden=l=t[1].length>0,p.hidden=m=t[1].length>0,k(y,"href","#toggle"),y.hidden=A=t[1].length>0,k(y,"class","svelte-sb93e8"),He(y,"collapsed",t[5].settings),k(i,"class","sidebar-left__nav svelte-sb93e8"),He(i,"is-filtering",t[1].length>0),k(e,"class","sidebar-left")},m(U,R){w(U,e,R),J&&J.m(e,null),f(e,n),f(e,i),f(i,o),f(o,s),f(i,a),D&&D.m(i,null),f(i,u);for(let x=0;x<N.length;x+=1)N[x]&&N[x].m(i,null);f(i,c),f(i,p),f(p,h),f(i,g),f(i,y),q($,y,null),f(y,E),f(y,T),f(T,L),f(i,I),Y&&Y.m(i,null),f(i,z),q(F,i,null),t[23](i),j=!0,B||(H=Ce(y,"click",st(t[22])),B=!0)},p(U,R){if(t=U,bn.isSingleColumn||J.p(t,R),(!j||R[0]&512)&&r!==(r=t[9]("Conversations")+"")&&M(s,r),(!j||R[0]&2&&l!==(l=t[1].length>0))&&(o.hidden=l),t[4].connections.size?D&&(ke(),S(D,1,1,()=>{D=null}),ye()):D?(D.p(t,R),R[0]&16&&b(D,1)):(D=Da(t),D.c(),b(D,1),D.m(i,u)),R[0]&66226){P=xe(t[4].connections.toArray());let le;for(le=0;le<P.length;le+=1){const ge=La(t,P,le);N[le]?(N[le].p(ge,R),b(N[le],1)):(N[le]=Fa(ge),N[le].c(),b(N[le],1),N[le].m(i,c))}for(ke(),le=P.length;le<N.length;le+=1)Z(le);ye()}(!j||R[0]&512)&&d!==(d=t[9]("Settings")+"")&&M(h,d),(!j||R[0]&2&&m!==(m=t[1].length>0))&&(p.hidden=m),(!j||R[0]&16)&&K!==(K=t[4].email+"")&&M(L,K),(!j||R[0]&2&&A!==(A=t[1].length>0))&&(y.hidden=A),(!j||R[0]&32)&&He(y,"collapsed",t[5].settings),!t[5].settings&&!t[1].length?Y?(Y.p(t,R),R[0]&34&&b(Y,1)):(Y=ja(t),Y.c(),b(Y,1),Y.m(i,z)):Y&&(ke(),S(Y,1,1,()=>{Y=null}),ye());const x={};R[0]&64&&(x.href="/search?q="+encodeURIComponent(t[6])),R[0]&576|R[1]&2&&(x.$$scope={dirty:R,ctx:t}),F.$set(x),(!j||R[0]&2)&&He(i,"is-filtering",t[1].length>0)},i(U){if(!j){b(J),b(D);for(let R=0;R<P.length;R+=1)b(N[R]);b($.$$.fragment,U),b(Y),b(F.$$.fragment,U),U&&at(()=>{j&&(V||(V=et(e,Zt,t[0],!0)),V.run(1))}),j=!0}},o(U){S(J),S(D),N=N.filter(Boolean);for(let R=0;R<N.length;R+=1)S(N[R]);S($.$$.fragment,U),S(Y),S(F.$$.fragment,U),U&&(V||(V=et(e,Zt,t[0],!1)),V.run(0)),j=!1},d(U){U&&v(e),J&&J.d(),D&&D.d(),kt(N,U),W($),Y&&Y.d(),W(F),t[23](null),U&&V&&V.end(),B=!1,H()}}}function Ao(t,e){const n=[e.conversation_id?"for-conversation":"for-connection"];return(e.frozen||t.state!=="connected")&&n.push("is-frozen"),e.frozen&&n.push("has-tooltip"),n.join(" ")}function vn(t,e=60){return t.unread>e?e+"+":t.unread||0}const P0=t=>t.preventDefault();function D0(t,e,n){let i,o,r,s,l,a,u;ve(t,Ie,H=>n(19,s=H)),ve(t,lt,H=>n(9,a=H));let{transition:c}=e;const p=gt("user");ve(t,p,H=>n(4,l=H));const d=p.notifications;ve(t,d,H=>n(10,u=H));let h=0,m="",g,y=!1,$=[],E=JSON.parse(localStorage.getItem("convos:collapsedStates")||localStorage.getItem("collapsedStates")||"{}");tn(()=>Ie.on("update",H=>H.path&&Nt.set("")));function T(){wt(g,"a",H=>H.classList.remove("has-focus")),setTimeout(()=>{if(!g)return;n(1,m="");const H=document.activeElement;H&&kr(H,g)&&wt(g,"a.has-path",J=>J.focus())},100)}function K(){if(!g)return;n(17,h=0),n(18,$=[]);const H=[m.match(/^\W+/)?"":"\\b\\W*"];H[0]&&H.push("");for(let D=0;D<H.length;D++){const P=m==="+"?new RegExp(/[1-9]\d*\+?\s*$/):m==="+@"?new RegExp(/^\s*\w.*[1-9]\d*\+?\s*$/):m==="+#"?new RegExp(/^\s*#.*[1-9]\d*\+?\s*$/):new RegExp(H[D]+vi(m),"i"),N={};if(wt(g,"a",(Z,Y)=>{const U=Z.classList;!m.length&&U.contains("has-path")&&n(17,h=Y),U.remove("has-focus");const R=!m.length||!Z.href.match(/\/search$/)&&!N[Z.href]&&Z.textContent.match(P);R&&$.push(Z),Z.classList[R?"remove":"add"]("hidden"),N[Z.href]=!0}),$.length)break}const J=g.querySelector(".for-search");J.classList[m?"remove":"add"]("hidden"),J.classList.contains("hidden")||$.push(J),wt(g,"h3",D=>{let P=D;for(;(P=P.nextElementSibling)&&!jr(P,"h3");)if(!P.classList.contains("hidden"))return D.classList.remove("hidden");D.classList.add("hidden")})}function L(){n(3,y=!1),m.indexOf("+")!==0&&T()}function A(){n(3,y=!0)}function I(H){if(H.key=="Enter"){H.preventDefault(),T(),$[h]&&Ie.go($[h].href);return}const J=H.key=="ArrowUp"?-1:H.key=="ArrowDown"?1:0;J&&(H.preventDefault(),$[h]&&$[h].classList.remove("has-focus"),n(17,h+=H.ctrlKey?J*4:J)),h<0&&n(17,h=$.length-1),h>=$.length&&n(17,h=0)}function z(H){n(5,E[H]=!E[H],E),localStorage.setItem("convos:collapsedStates",JSON.stringify(E)),localStorage.removeItem("collapsedStates")}function F(){m=this.value,n(1,m)}const V=H=>z(H.connection_id),j=()=>z("settings");function B(H){fe[H?"unshift":"push"](()=>{g=H,n(2,g)})}return t.$$set=H=>{"transition"in H&&n(0,c=H.transition)},t.$$.update=()=>{t.$$.dirty[0]&2&&K(),t.$$.dirty[0]&16&&n(8,i="/settings/conversation?connection_id="+(l.activeConversation.connection_id||"")),t.$$.dirty[0]&8&&n(7,o=y?0:250),t.$$.dirty[0]&2&&n(6,r=m.replace(/^\//,"")),t.$$.dirty[0]&524292&&g&&T(),t.$$.dirty[0]&393216&&$[h]&&$[h].classList.add("has-focus")},[c,m,g,y,l,E,r,o,i,a,u,p,d,L,A,I,z,h,$,s,F,V,j,B]}class U0 extends Xe{constructor(e){super(),Qe(this,e,D0,L0,Ze,{transition:0},null,[-1,-1])}}class B0 extends Lt{constructor(){super(),this.prop("cookie","activeTheme","convos",{key:"theme"}),this.prop("cookie","colorScheme","auto"),this.prop("cookie","compactDisplay",!1),this.prop("ro","colorSchemeOptions",["Auto","Light","Dark"].map(e=>[e.toLowerCase(),e])),this.prop("ro","themeOptions",()=>Array.from(this._stylesheets.entries())),this.prop("rw","osColorScheme",""),this._stylesheets=new Map([])}hasColorScheme(e){return wt(document,'link[id$="-'+e+'"]').length>1}start(){wt(document,'link[rel="alternate stylesheet"][title]',n=>{const i=n.title.replace(/\s\([a-z]+\)$/,"");this._stylesheets.set(n.id.replace(/^theme_alt__[a-z]+-/,""),i)});let e=this.osColorScheme;return this._matchMedia||(this._matchMedia=window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):{addListener:()=>{}},this._matchMedia.addListener(n=>this.update({osColorScheme:n.matches?"dark":"light"})),e=this._matchMedia.matches?"dark":"light"),this.update({compactDisplay:this.compactDisplay,osColorScheme:e})}update(e){return(e.activeTheme||e.colorScheme||e.osColorScheme)&&this._activateTheme(e),super.update(e)}_activateTheme(e){const n=e.activeTheme||this.activeTheme,i=e.colorScheme||this.colorScheme,o=e.osColorScheme||this.osColorScheme,r=[i==="auto"?o:i,"normal","light"];let s;for(let l=0;l<r.length&&(s=document.getElementById("theme_alt__"+r[l]+"-"+n),!s);l++);wt(document,'link[rel*="style"][title]',l=>{s||(s=l),l.disabled=!0,l.disabled=l.href!==s.href,l.setAttribute("media",l===s?"":"none"),l.setAttribute("rel",l===s?"stylesheet":"alternate stylesheet")})}}function oc(t){return t instanceof Map?t.clear=t.delete=t.set=function(){throw new Error("map is read-only")}:t instanceof Set&&(t.add=t.clear=t.delete=function(){throw new Error("set is read-only")}),Object.freeze(t),Object.getOwnPropertyNames(t).forEach(e=>{const n=t[e],i=typeof n;(i==="object"||i==="function")&&!Object.isFrozen(n)&&oc(n)}),t}class Ha{constructor(e){e.data===void 0&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function rc(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function _n(t,...e){const n=Object.create(null);for(const i in t)n[i]=t[i];return e.forEach(function(i){for(const o in i)n[o]=i[o]}),n}const F0="</span>",qa=t=>!!t.scope,j0=(t,{prefix:e})=>{if(t.startsWith("language:"))return t.replace("language:","language-");if(t.includes(".")){const n=t.split(".");return[`${e}${n.shift()}`,...n.map((i,o)=>`${i}${"_".repeat(o+1)}`)].join(" ")}return`${e}${t}`};class z0{constructor(e,n){this.buffer="",this.classPrefix=n.classPrefix,e.walk(this)}addText(e){this.buffer+=rc(e)}openNode(e){if(!qa(e))return;const n=j0(e.scope,{prefix:this.classPrefix});this.span(n)}closeNode(e){qa(e)&&(this.buffer+=F0)}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}const Wa=(t={})=>{const e={children:[]};return Object.assign(e,t),e};class Qr{constructor(){this.rootNode=Wa(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const n=Wa({scope:e});this.add(n),this.stack.push(n)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,n){return typeof n=="string"?e.addText(n):n.children&&(e.openNode(n),n.children.forEach(i=>this._walk(e,i)),e.closeNode(n)),e}static _collapse(e){typeof e!="string"&&e.children&&(e.children.every(n=>typeof n=="string")?e.children=[e.children.join("")]:e.children.forEach(n=>{Qr._collapse(n)}))}}class H0 extends Qr{constructor(e){super(),this.options=e}addText(e){e!==""&&this.add(e)}startScope(e){this.openNode(e)}endScope(){this.closeNode()}__addSublanguage(e,n){const i=e.root;n&&(i.scope=`language:${n}`),this.add(i)}toHTML(){return new z0(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function Fi(t){return t?typeof t=="string"?t:t.source:null}function sc(t){return Bn("(?=",t,")")}function q0(t){return Bn("(?:",t,")*")}function W0(t){return Bn("(?:",t,")?")}function Bn(...t){return t.map(n=>Fi(n)).join("")}function G0(t){const e=t[t.length-1];return typeof e=="object"&&e.constructor===Object?(t.splice(t.length-1,1),e):{}}function Xr(...t){return"("+(G0(t).capture?"":"?:")+t.map(i=>Fi(i)).join("|")+")"}function lc(t){return new RegExp(t.toString()+"|").exec("").length-1}function K0(t,e){const n=t&&t.exec(e);return n&&n.index===0}const Y0=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function xr(t,{joinWith:e}){let n=0;return t.map(i=>{n+=1;const o=n;let r=Fi(i),s="";for(;r.length>0;){const l=Y0.exec(r);if(!l){s+=r;break}s+=r.substring(0,l.index),r=r.substring(l.index+l[0].length),l[0][0]==="\\"&&l[1]?s+="\\"+String(Number(l[1])+o):(s+=l[0],l[0]==="("&&n++)}return s}).map(i=>`(${i})`).join(e)}const V0=/\b\B/,ac="[a-zA-Z]\\w*",es="[a-zA-Z_]\\w*",uc="\\b\\d+(\\.\\d+)?",cc="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",fc="\\b(0b[01]+)",Z0="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",J0=(t={})=>{const e=/^#![ ]*\//;return t.binary&&(t.begin=Bn(e,/.*\b/,t.binary,/\b.*/)),_n({scope:"meta",begin:e,end:/$/,relevance:0,"on:begin":(n,i)=>{n.index!==0&&i.ignoreMatch()}},t)},ji={begin:"\\\\[\\s\\S]",relevance:0},Q0={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[ji]},X0={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[ji]},x0={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},Io=function(t,e,n={}){const i=_n({scope:"comment",begin:t,end:e,contains:[]},n);i.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const o=Xr("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return i.contains.push({begin:Bn(/[ ]+/,"(",o,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),i},e$=Io("//","$"),t$=Io("/\\*","\\*/"),n$=Io("#","$"),i$={scope:"number",begin:uc,relevance:0},o$={scope:"number",begin:cc,relevance:0},r$={scope:"number",begin:fc,relevance:0},s$={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[ji,{begin:/\[/,end:/\]/,relevance:0,contains:[ji]}]},l$={scope:"title",begin:ac,relevance:0},a$={scope:"title",begin:es,relevance:0},u$={begin:"\\.\\s*"+es,relevance:0},c$=function(t){return Object.assign(t,{"on:begin":(e,n)=>{n.data._beginMatch=e[1]},"on:end":(e,n)=>{n.data._beginMatch!==e[1]&&n.ignoreMatch()}})};var uo=Object.freeze({__proto__:null,APOS_STRING_MODE:Q0,BACKSLASH_ESCAPE:ji,BINARY_NUMBER_MODE:r$,BINARY_NUMBER_RE:fc,COMMENT:Io,C_BLOCK_COMMENT_MODE:t$,C_LINE_COMMENT_MODE:e$,C_NUMBER_MODE:o$,C_NUMBER_RE:cc,END_SAME_AS_BEGIN:c$,HASH_COMMENT_MODE:n$,IDENT_RE:ac,MATCH_NOTHING_RE:V0,METHOD_GUARD:u$,NUMBER_MODE:i$,NUMBER_RE:uc,PHRASAL_WORDS_MODE:x0,QUOTE_STRING_MODE:X0,REGEXP_MODE:s$,RE_STARTERS_RE:Z0,SHEBANG:J0,TITLE_MODE:l$,UNDERSCORE_IDENT_RE:es,UNDERSCORE_TITLE_MODE:a$});function f$(t,e){t.input[t.index-1]==="."&&e.ignoreMatch()}function p$(t,e){t.className!==void 0&&(t.scope=t.className,delete t.className)}function d$(t,e){e&&t.beginKeywords&&(t.begin="\\b("+t.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",t.__beforeBegin=f$,t.keywords=t.keywords||t.beginKeywords,delete t.beginKeywords,t.relevance===void 0&&(t.relevance=0))}function h$(t,e){Array.isArray(t.illegal)&&(t.illegal=Xr(...t.illegal))}function m$(t,e){if(t.match){if(t.begin||t.end)throw new Error("begin & end are not supported with match");t.begin=t.match,delete t.match}}function _$(t,e){t.relevance===void 0&&(t.relevance=1)}const g$=(t,e)=>{if(!t.beforeMatch)return;if(t.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},t);Object.keys(t).forEach(i=>{delete t[i]}),t.keywords=n.keywords,t.begin=Bn(n.beforeMatch,sc(n.begin)),t.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},t.relevance=0,delete n.beforeMatch},b$=["of","and","for","in","not","or","if","then","parent","list","value"],v$="keyword";function pc(t,e,n=v$){const i=Object.create(null);return typeof t=="string"?o(n,t.split(" ")):Array.isArray(t)?o(n,t):Object.keys(t).forEach(function(r){Object.assign(i,pc(t[r],e,r))}),i;function o(r,s){e&&(s=s.map(l=>l.toLowerCase())),s.forEach(function(l){const a=l.split("|");i[a[0]]=[r,$$(a[0],a[1])]})}}function $$(t,e){return e?Number(e):w$(t)?0:1}function w$(t){return b$.includes(t.toLowerCase())}const Ga={},Pn=t=>{console.error(t)},Ka=(t,...e)=>{console.log(`WARN: ${t}`,...e)},Xn=(t,e)=>{Ga[`${t}/${e}`]||(console.log(`Deprecated as of ${t}. ${e}`),Ga[`${t}/${e}`]=!0)},Oo=new Error;function dc(t,e,{key:n}){let i=0;const o=t[n],r={},s={};for(let l=1;l<=e.length;l++)s[l+i]=o[l],r[l+i]=!0,i+=lc(e[l-1]);t[n]=s,t[n]._emit=r,t[n]._multi=!0}function k$(t){if(Array.isArray(t.begin)){if(t.skip||t.excludeBegin||t.returnBegin)throw Pn("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),Oo;if(typeof t.beginScope!="object"||t.beginScope===null)throw Pn("beginScope must be object"),Oo;dc(t,t.begin,{key:"beginScope"}),t.begin=xr(t.begin,{joinWith:""})}}function y$(t){if(Array.isArray(t.end)){if(t.skip||t.excludeEnd||t.returnEnd)throw Pn("skip, excludeEnd, returnEnd not compatible with endScope: {}"),Oo;if(typeof t.endScope!="object"||t.endScope===null)throw Pn("endScope must be object"),Oo;dc(t,t.end,{key:"endScope"}),t.end=xr(t.end,{joinWith:""})}}function S$(t){t.scope&&typeof t.scope=="object"&&t.scope!==null&&(t.beginScope=t.scope,delete t.scope)}function E$(t){S$(t),typeof t.beginScope=="string"&&(t.beginScope={_wrap:t.beginScope}),typeof t.endScope=="string"&&(t.endScope={_wrap:t.endScope}),k$(t),y$(t)}function C$(t){function e(s,l){return new RegExp(Fi(s),"m"+(t.case_insensitive?"i":"")+(t.unicodeRegex?"u":"")+(l?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(l,a){a.position=this.position++,this.matchIndexes[this.matchAt]=a,this.regexes.push([a,l]),this.matchAt+=lc(l)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const l=this.regexes.map(a=>a[1]);this.matcherRe=e(xr(l,{joinWith:"|"}),!0),this.lastIndex=0}exec(l){this.matcherRe.lastIndex=this.lastIndex;const a=this.matcherRe.exec(l);if(!a)return null;const u=a.findIndex((p,d)=>d>0&&p!==void 0),c=this.matchIndexes[u];return a.splice(0,u),Object.assign(a,c)}}class i{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(l){if(this.multiRegexes[l])return this.multiRegexes[l];const a=new n;return this.rules.slice(l).forEach(([u,c])=>a.addRule(u,c)),a.compile(),this.multiRegexes[l]=a,a}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(l,a){this.rules.push([l,a]),a.type==="begin"&&this.count++}exec(l){const a=this.getMatcher(this.regexIndex);a.lastIndex=this.lastIndex;let u=a.exec(l);if(this.resumingScanAtSamePosition()&&!(u&&u.index===this.lastIndex)){const c=this.getMatcher(0);c.lastIndex=this.lastIndex+1,u=c.exec(l)}return u&&(this.regexIndex+=u.position+1,this.regexIndex===this.count&&this.considerAll()),u}}function o(s){const l=new i;return s.contains.forEach(a=>l.addRule(a.begin,{rule:a,type:"begin"})),s.terminatorEnd&&l.addRule(s.terminatorEnd,{type:"end"}),s.illegal&&l.addRule(s.illegal,{type:"illegal"}),l}function r(s,l){const a=s;if(s.isCompiled)return a;[p$,m$,E$,g$].forEach(c=>c(s,l)),t.compilerExtensions.forEach(c=>c(s,l)),s.__beforeBegin=null,[d$,h$,_$].forEach(c=>c(s,l)),s.isCompiled=!0;let u=null;return typeof s.keywords=="object"&&s.keywords.$pattern&&(s.keywords=Object.assign({},s.keywords),u=s.keywords.$pattern,delete s.keywords.$pattern),u=u||/\w+/,s.keywords&&(s.keywords=pc(s.keywords,t.case_insensitive)),a.keywordPatternRe=e(u,!0),l&&(s.begin||(s.begin=/\B|\b/),a.beginRe=e(a.begin),!s.end&&!s.endsWithParent&&(s.end=/\B|\b/),s.end&&(a.endRe=e(a.end)),a.terminatorEnd=Fi(a.end)||"",s.endsWithParent&&l.terminatorEnd&&(a.terminatorEnd+=(s.end?"|":"")+l.terminatorEnd)),s.illegal&&(a.illegalRe=e(s.illegal)),s.contains||(s.contains=[]),s.contains=[].concat(...s.contains.map(function(c){return A$(c==="self"?s:c)})),s.contains.forEach(function(c){r(c,a)}),s.starts&&r(s.starts,l),a.matcher=o(a),a}if(t.compilerExtensions||(t.compilerExtensions=[]),t.contains&&t.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return t.classNameAliases=_n(t.classNameAliases||{}),r(t)}function hc(t){return t?t.endsWithParent||hc(t.starts):!1}function A$(t){return t.variants&&!t.cachedVariants&&(t.cachedVariants=t.variants.map(function(e){return _n(t,{variants:null},e)})),t.cachedVariants?t.cachedVariants:hc(t)?_n(t,{starts:t.starts?_n(t.starts):null}):Object.isFrozen(t)?_n(t):t}var O$="11.9.0";class N$ extends Error{constructor(e,n){super(e),this.name="HTMLInjectionError",this.html=n}}const pr=rc,Ya=_n,Va=Symbol("nomatch"),T$=7,mc=function(t){const e=Object.create(null),n=Object.create(null),i=[];let o=!0;const r="Could not find the language '{}', did you forget to load/include a language module?",s={disableAutodetect:!0,name:"Plain text",contains:[]};let l={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:H0};function a(N){return l.noHighlightRe.test(N)}function u(N){let Z=N.className+" ";Z+=N.parentNode?N.parentNode.className:"";const Y=l.languageDetectRe.exec(Z);if(Y){const U=F(Y[1]);return U||(Ka(r.replace("{}",Y[1])),Ka("Falling back to no-highlight mode for this block.",N)),U?Y[1]:"no-highlight"}return Z.split(/\s+/).find(U=>a(U)||F(U))}function c(N,Z,Y){let U="",R="";typeof Z=="object"?(U=N,Y=Z.ignoreIllegals,R=Z.language):(Xn("10.7.0","highlight(lang, code, ...args) has been deprecated."),Xn("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),R=N,U=Z),Y===void 0&&(Y=!0);const x={code:U,language:R};D("before:highlight",x);const le=x.result?x.result:p(x.language,x.code,Y);return le.code=x.code,D("after:highlight",le),le}function p(N,Z,Y,U){const R=Object.create(null);function x(X,Q){return X.keywords[Q]}function le(){if(!be.keywords){te.addText(ce);return}let X=0;be.keywordPatternRe.lastIndex=0;let Q=be.keywordPatternRe.exec(ce),ne="";for(;Q;){ne+=ce.substring(X,Q.index);const ie=ue.case_insensitive?Q[0].toLowerCase():Q[0],pe=x(be,ie);if(pe){const[We,Be]=pe;if(te.addText(ne),ne="",R[ie]=(R[ie]||0)+1,R[ie]<=T$&&($e+=Be),We.startsWith("_"))ne+=Q[0];else{const rt=ue.classNameAliases[We]||We;Se(Q[0],rt)}}else ne+=Q[0];X=be.keywordPatternRe.lastIndex,Q=be.keywordPatternRe.exec(ce)}ne+=ce.substring(X),te.addText(ne)}function ge(){if(ce==="")return;let X=null;if(typeof be.subLanguage=="string"){if(!e[be.subLanguage]){te.addText(ce);return}X=p(be.subLanguage,ce,!0,Ae[be.subLanguage]),Ae[be.subLanguage]=X._top}else X=h(ce,be.subLanguage.length?be.subLanguage:null);be.relevance>0&&($e+=X.relevance),te.__addSublanguage(X._emitter,X.language)}function oe(){be.subLanguage!=null?ge():le(),ce=""}function Se(X,Q){X!==""&&(te.startScope(Q),te.addText(X),te.endScope())}function Re(X,Q){let ne=1;const ie=Q.length-1;for(;ne<=ie;){if(!X._emit[ne]){ne++;continue}const pe=ue.classNameAliases[X[ne]]||X[ne],We=Q[ne];pe?Se(We,pe):(ce=We,le(),ce=""),ne++}}function ae(X,Q){return X.scope&&typeof X.scope=="string"&&te.openNode(ue.classNameAliases[X.scope]||X.scope),X.beginScope&&(X.beginScope._wrap?(Se(ce,ue.classNameAliases[X.beginScope._wrap]||X.beginScope._wrap),ce=""):X.beginScope._multi&&(Re(X.beginScope,Q),ce="")),be=Object.create(X,{parent:{value:be}}),be}function we(X,Q,ne){let ie=K0(X.endRe,ne);if(ie){if(X["on:end"]){const pe=new Ha(X);X["on:end"](Q,pe),pe.isMatchIgnored&&(ie=!1)}if(ie){for(;X.endsParent&&X.parent;)X=X.parent;return X}}if(X.endsWithParent)return we(X.parent,Q,ne)}function Ue(X){return be.matcher.regexIndex===0?(ce+=X[0],1):(Le=!0,0)}function je(X){const Q=X[0],ne=X.rule,ie=new Ha(ne),pe=[ne.__beforeBegin,ne["on:begin"]];for(const We of pe)if(We&&(We(X,ie),ie.isMatchIgnored))return Ue(Q);return ne.skip?ce+=Q:(ne.excludeBegin&&(ce+=Q),oe(),!ne.returnBegin&&!ne.excludeBegin&&(ce=Q)),ae(ne,X),ne.returnBegin?0:Q.length}function De(X){const Q=X[0],ne=Z.substring(X.index),ie=we(be,X,ne);if(!ie)return Va;const pe=be;be.endScope&&be.endScope._wrap?(oe(),Se(Q,be.endScope._wrap)):be.endScope&&be.endScope._multi?(oe(),Re(be.endScope,X)):pe.skip?ce+=Q:(pe.returnEnd||pe.excludeEnd||(ce+=Q),oe(),pe.excludeEnd&&(ce=Q));do be.scope&&te.closeNode(),!be.skip&&!be.subLanguage&&($e+=be.relevance),be=be.parent;while(be!==ie.parent);return ie.starts&&ae(ie.starts,X),pe.returnEnd?0:Q.length}function Ne(){const X=[];for(let Q=be;Q!==ue;Q=Q.parent)Q.scope&&X.unshift(Q.scope);X.forEach(Q=>te.openNode(Q))}let ze={};function ee(X,Q){const ne=Q&&Q[0];if(ce+=X,ne==null)return oe(),0;if(ze.type==="begin"&&Q.type==="end"&&ze.index===Q.index&&ne===""){if(ce+=Z.slice(Q.index,Q.index+1),!o){const ie=new Error(`0 width match regex (${N})`);throw ie.languageName=N,ie.badRule=ze.rule,ie}return 1}if(ze=Q,Q.type==="begin")return je(Q);if(Q.type==="illegal"&&!Y){const ie=new Error('Illegal lexeme "'+ne+'" for mode "'+(be.scope||"<unnamed>")+'"');throw ie.mode=be,ie}else if(Q.type==="end"){const ie=De(Q);if(ie!==Va)return ie}if(Q.type==="illegal"&&ne==="")return 1;if(_e>1e5&&_e>Q.index*3)throw new Error("potential infinite loop, way more iterations than matches");return ce+=ne,ne.length}const ue=F(N);if(!ue)throw Pn(r.replace("{}",N)),new Error('Unknown language: "'+N+'"');const qe=C$(ue);let Te="",be=U||qe;const Ae={},te=new l.__emitter(l);Ne();let ce="",$e=0,re=0,_e=0,Le=!1;try{if(ue.__emitTokens)ue.__emitTokens(Z,te);else{for(be.matcher.considerAll();;){_e++,Le?Le=!1:be.matcher.considerAll(),be.matcher.lastIndex=re;const X=be.matcher.exec(Z);if(!X)break;const Q=Z.substring(re,X.index),ne=ee(Q,X);re=X.index+ne}ee(Z.substring(re))}return te.finalize(),Te=te.toHTML(),{language:N,value:Te,relevance:$e,illegal:!1,_emitter:te,_top:be}}catch(X){if(X.message&&X.message.includes("Illegal"))return{language:N,value:pr(Z),illegal:!0,relevance:0,_illegalBy:{message:X.message,index:re,context:Z.slice(re-100,re+100),mode:X.mode,resultSoFar:Te},_emitter:te};if(o)return{language:N,value:pr(Z),illegal:!1,relevance:0,errorRaised:X,_emitter:te,_top:be};throw X}}function d(N){const Z={value:pr(N),illegal:!1,relevance:0,_top:s,_emitter:new l.__emitter(l)};return Z._emitter.addText(N),Z}function h(N,Z){Z=Z||l.languages||Object.keys(e);const Y=d(N),U=Z.filter(F).filter(j).map(oe=>p(oe,N,!1));U.unshift(Y);const R=U.sort((oe,Se)=>{if(oe.relevance!==Se.relevance)return Se.relevance-oe.relevance;if(oe.language&&Se.language){if(F(oe.language).supersetOf===Se.language)return 1;if(F(Se.language).supersetOf===oe.language)return-1}return 0}),[x,le]=R,ge=x;return ge.secondBest=le,ge}function m(N,Z,Y){const U=Z&&n[Z]||Y;N.classList.add("hljs"),N.classList.add(`language-${U}`)}function g(N){let Z=null;const Y=u(N);if(a(Y))return;if(D("before:highlightElement",{el:N,language:Y}),N.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",N);return}if(N.children.length>0&&(l.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(N)),l.throwUnescapedHTML))throw new N$("One of your code blocks includes unescaped HTML.",N.innerHTML);Z=N;const U=Z.textContent,R=Y?c(U,{language:Y,ignoreIllegals:!0}):h(U);N.innerHTML=R.value,N.dataset.highlighted="yes",m(N,Y,R.language),N.result={language:R.language,re:R.relevance,relevance:R.relevance},R.secondBest&&(N.secondBest={language:R.secondBest.language,relevance:R.secondBest.relevance}),D("after:highlightElement",{el:N,result:R,text:U})}function y(N){l=Ya(l,N)}const $=()=>{K(),Xn("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function E(){K(),Xn("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let T=!1;function K(){if(document.readyState==="loading"){T=!0;return}document.querySelectorAll(l.cssSelector).forEach(g)}function L(){T&&K()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",L,!1);function A(N,Z){let Y=null;try{Y=Z(t)}catch(U){if(Pn("Language definition for '{}' could not be registered.".replace("{}",N)),o)Pn(U);else throw U;Y=s}Y.name||(Y.name=N),e[N]=Y,Y.rawDefinition=Z.bind(null,t),Y.aliases&&V(Y.aliases,{languageName:N})}function I(N){delete e[N];for(const Z of Object.keys(n))n[Z]===N&&delete n[Z]}function z(){return Object.keys(e)}function F(N){return N=(N||"").toLowerCase(),e[N]||e[n[N]]}function V(N,{languageName:Z}){typeof N=="string"&&(N=[N]),N.forEach(Y=>{n[Y.toLowerCase()]=Z})}function j(N){const Z=F(N);return Z&&!Z.disableAutodetect}function B(N){N["before:highlightBlock"]&&!N["before:highlightElement"]&&(N["before:highlightElement"]=Z=>{N["before:highlightBlock"](Object.assign({block:Z.el},Z))}),N["after:highlightBlock"]&&!N["after:highlightElement"]&&(N["after:highlightElement"]=Z=>{N["after:highlightBlock"](Object.assign({block:Z.el},Z))})}function H(N){B(N),i.push(N)}function J(N){const Z=i.indexOf(N);Z!==-1&&i.splice(Z,1)}function D(N,Z){const Y=N;i.forEach(function(U){U[Y]&&U[Y](Z)})}function P(N){return Xn("10.7.0","highlightBlock will be removed entirely in v12.0"),Xn("10.7.0","Please use highlightElement now."),g(N)}Object.assign(t,{highlight:c,highlightAuto:h,highlightAll:K,highlightElement:g,highlightBlock:P,configure:y,initHighlighting:$,initHighlightingOnLoad:E,registerLanguage:A,unregisterLanguage:I,listLanguages:z,getLanguage:F,registerAliases:V,autoDetection:j,inherit:Ya,addPlugin:H,removePlugin:J}),t.debugMode=function(){o=!1},t.safeMode=function(){o=!0},t.versionString=O$,t.regex={concat:Bn,lookahead:sc,either:Xr,optional:W0,anyNumberOfTimes:q0};for(const N in uo)typeof uo[N]=="object"&&oc(uo[N]);return Object.assign(t,uo),t},di=mc({});di.newInstance=()=>mc({});var R$=di;di.HighlightJS=di;di.default=di;const bt=bi(R$);function M$(t){t.lineNumbersBlock=function(e,n){t.highlightBlock(e,n),e.innerHTML=F$(e,n)}}var I$="hljs-ln",Za="hljs-ln-line",_c="hljs-ln-code",L$="hljs-ln-numbers",P$="hljs-ln-n",mo="data-line-number",gc=/\r\n|\r|\n/g;function D$(t){for(var e=t;e;){if(e.className&&e.className.indexOf("hljs-ln-code")!==-1)return!0;e=e.parentNode}return!1}function U$(t){for(var e=t;e.nodeName!=="TABLE";)e=e.parentNode;return e}function B$(t){for(var e=t.toString(),n=t.anchorNode;n.nodeName!=="TD";)n=n.parentNode;for(var i=t.focusNode;i.nodeName!=="TD";)i=i.parentNode;var o=parseInt(n.dataset.lineNumber,10),r=parseInt(i.dataset.lineNumber,10);if(o!==r){var s=n.textContent,l=i.textContent;if(o>r){var a=o;o=r,r=a,a=s,s=l,l=a}for(;e.indexOf(s)!==0;)s=s.slice(1);for(;e.lastIndexOf(l)===-1;)l=l.slice(0,-1);for(var u=s,c=U$(n),p=o+1;p<r;++p){var d=`.${_c}[${mo}="${p}"]`,h=c.querySelector(d);u+=`
`+h.textContent}return u+=`
`+l,u}else return e}document.addEventListener("copy",function(t){var e=window.getSelection();if(D$(e.anchorNode)){var n;window.navigator.userAgent.indexOf("Edge")!==-1?n=B$(e):n=e.toString(),t.clipboardData.setData("text/plain",n),t.preventDefault()}});function F$(t,e){e=e||{singleLine:!1};var n=e.singleLine?0:1;return bc(t),j$(t.innerHTML,n)}function j$(t,e){var n=vc(t);if(n[n.length-1].trim()===""&&n.pop(),n.length>e){for(var i="",o=0,r=n.length;o<r;o++){let s=o+1;i+=`<tr><td class="${Za} ${L$}" ${mo}="${s}"><div class="${P$}" ${mo}="${s}"></div></td><td class="${Za} ${_c}" ${mo}="${s}">`+(n[o].length>0?n[o]:" ")+"</td></tr>"}return`<table class="${I$}">${i}</table>`}return t}function bc(t){var e=t.childNodes;for(var n in e)if(Object.hasOwn(e,n)){var i=e[n];H$(i.textContent)>0&&(i.childNodes.length>0?bc(i):z$(i.parentNode))}}function z$(t){var e=t.className;if(/hljs-/.test(e)){for(var n=vc(t.innerHTML),i=0,o="";i<n.length;i++){var r=n[i].length>0?n[i]:" ";o+=`<span class="${e}">${r}</span>
`}t.innerHTML=o.trim()}}function vc(t){return t.length===0?[]:t.split(gc)}function H$(t){return(t.trim().match(gc)||[]).length}function q$(t){return{name:"Dockerfile",aliases:["docker"],case_insensitive:!0,keywords:["from","maintainer","expose","env","arg","user","onbuild","stopsignal"],contains:[t.HASH_COMMENT_MODE,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,t.NUMBER_MODE,{beginKeywords:"run cmd entrypoint volume add copy workdir label healthcheck shell",starts:{end:/[^\\]$/,subLanguage:"bash"}}],illegal:"</"}}const Ja="[A-Za-z$_][0-9A-Za-z$_]*",W$=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],G$=["true","false","null","undefined","NaN","Infinity"],$c=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],wc=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],kc=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],K$=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],Y$=[].concat(kc,$c,wc);function V$(t){const e=t.regex,n=(Z,{after:Y})=>{const U="</"+Z[0].slice(1);return Z.input.indexOf(U,Y)!==-1},i=Ja,o={begin:"<>",end:"</>"},r=/<[A-Za-z0-9\\._:-]+\s*\/>/,s={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(Z,Y)=>{const U=Z[0].length+Z.index,R=Z.input[U];if(R==="<"||R===","){Y.ignoreMatch();return}R===">"&&(n(Z,{after:U})||Y.ignoreMatch());let x;const le=Z.input.substring(U);if(x=le.match(/^\s*=/)){Y.ignoreMatch();return}if((x=le.match(/^\s+extends\s+/))&&x.index===0){Y.ignoreMatch();return}}},l={$pattern:Ja,keyword:W$,literal:G$,built_in:Y$,"variable.language":K$},a="[0-9](_?[0-9])*",u=`\\.(${a})`,c="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",p={className:"number",variants:[{begin:`(\\b(${c})((${u})|\\.)?|(${u}))[eE][+-]?(${a})\\b`},{begin:`\\b(${c})\\b((${u})\\b|\\.)?|(${u})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},d={className:"subst",begin:"\\$\\{",end:"\\}",keywords:l,contains:[]},h={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,d],subLanguage:"xml"}},m={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,d],subLanguage:"css"}},g={begin:"gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,d],subLanguage:"graphql"}},y={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,d]},E={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:i+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},T=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,h,m,g,y,{match:/\$\d+/},p];d.contains=T.concat({begin:/\{/,end:/\}/,keywords:l,contains:["self"].concat(T)});const K=[].concat(E,d.contains),L=K.concat([{begin:/\(/,end:/\)/,keywords:l,contains:["self"].concat(K)}]),A={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:L},I={variants:[{match:[/class/,/\s+/,i,/\s+/,/extends/,/\s+/,e.concat(i,"(",e.concat(/\./,i),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,i],scope:{1:"keyword",3:"title.class"}}]},z={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...$c,...wc]}},F={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},V={variants:[{match:[/function/,/\s+/,i,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[A],illegal:/%/},j={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function B(Z){return e.concat("(?!",Z.join("|"),")")}const H={match:e.concat(/\b/,B([...kc,"super","import"]),i,e.lookahead(/\(/)),className:"title.function",relevance:0},J={begin:e.concat(/\./,e.lookahead(e.concat(i,/(?![0-9A-Za-z$_(])/))),end:i,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},D={match:[/get|set/,/\s+/,i,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},A]},P="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",N={match:[/const|var|let/,/\s+/,i,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(P)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[A]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:l,exports:{PARAMS_CONTAINS:L,CLASS_REFERENCE:z},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),F,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,h,m,g,y,E,{match:/\$\d+/},p,z,{className:"attr",begin:i+e.lookahead(":"),relevance:0},N,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[E,t.REGEXP_MODE,{className:"function",begin:P,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:L}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:o.begin,end:o.end},{match:r},{begin:s.begin,"on:begin":s.isTrulyOpeningTag,end:s.end}],subLanguage:"xml",contains:[{begin:s.begin,end:s.end,skip:!0,contains:["self"]}]}]},V,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[A,t.inherit(t.TITLE_MODE,{begin:i,className:"title.function"})]},{match:/\.\.\./,relevance:0},J,{match:"\\$"+i,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[A]},H,j,I,D,{match:/\$[(.]/}]}}function Z$(t){const e=t.regex,n={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},i={begin:"^[-\\*]{3,}",end:"$"},o={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},r={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},s={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},l=/[A-Za-z][A-Za-z0-9+.-]*/,a={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:e.concat(/\[.+?\]\(/,l,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},u={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},c={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},p=t.inherit(u,{contains:[]}),d=t.inherit(c,{contains:[]});u.contains.push(d),c.contains.push(p);let h=[n,a];return[u,c,p,d].forEach(y=>{y.contains=y.contains.concat(h)}),h=h.concat(u,c),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:h},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:h}]}]},n,r,u,c,{className:"quote",begin:"^>\\s+",contains:h,end:"$"},o,i,a,s]}}function J$(t){return{name:"Mojolicious",subLanguage:"xml",contains:[{className:"meta",begin:"^__(END|DATA)__$"},{begin:"^\\s*%{1,2}={0,2}",end:"$",subLanguage:"perl"},{begin:"<%{1,2}={0,2}",end:"={0,1}%>",subLanguage:"perl",excludeBegin:!0,excludeEnd:!0}]}}function Q$(t){const e=t.regex,n=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],i=/[dualxmsipngr]{0,12}/,o={$pattern:/[\w.]+/,keyword:n.join(" ")},r={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:o},s={begin:/->\{/,end:/\}/},l={variants:[{begin:/\$\d/},{begin:e.concat(/[$%@](\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@][^\s\w{]/,relevance:0}]},a=[t.BACKSLASH_ESCAPE,r,l],u=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],c=(h,m,g="\\1")=>{const y=g==="\\1"?g:e.concat(g,m);return e.concat(e.concat("(?:",h,")"),m,/(?:\\.|[^\\\/])*?/,y,/(?:\\.|[^\\\/])*?/,g,i)},p=(h,m,g)=>e.concat(e.concat("(?:",h,")"),m,/(?:\\.|[^\\\/])*?/,g,i),d=[l,t.HASH_COMMENT_MODE,t.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),s,{className:"string",contains:a,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},{className:"number",begin:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",relevance:0},{begin:"(\\/\\/|"+t.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[t.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:c("s|tr|y",e.either(...u,{capture:!0}))},{begin:c("s|tr|y","\\(","\\)")},{begin:c("s|tr|y","\\[","\\]")},{begin:c("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:p("(?:m|qr)?",/\//,/\//)},{begin:p("m|qr",e.either(...u,{capture:!0}),/\1/)},{begin:p("m|qr",/\(/,/\)/)},{begin:p("m|qr",/\[/,/\]/)},{begin:p("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return r.contains=d,s.contains=d,{name:"Perl",aliases:["pl","pm"],keywords:o,contains:d}}const X$=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),x$=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],ew=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],tw=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],nw=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],iw=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function ow(t){const e=X$(t),n=nw,i=tw,o="@[a-z-]+",r="and or not only",l={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,e.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+x$.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+i.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n.join("|")+")"},l,{begin:/\(/,end:/\)/,contains:[e.CSS_NUMBER_MODE]},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+iw.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[e.BLOCK_COMMENT,l,e.HEXCOLOR,e.CSS_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,e.IMPORTANT,e.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:o,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:r,attribute:ew.join(" ")},contains:[{begin:o,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},l,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,e.HEXCOLOR,e.CSS_NUMBER_MODE]},e.FUNCTION_DISPATCH]}}function rw(t){const e=t.regex,n=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),i=/[\p{L}0-9._:-]+/u,o={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},r={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},s=t.inherit(r,{begin:/\(/,end:/\)/}),l=t.inherit(t.APOS_STRING_MODE,{className:"string"}),a=t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),u={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:i,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[o]},{begin:/'/,end:/'/,contains:[o]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[r,a,l,s,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[r,s,a,l]}]}]},t.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},o,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[a]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[u],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[u],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(n,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:u}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function sw(t){const r={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:r,illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"string",variants:[t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{begin:t.C_NUMBER_RE+"[i]",relevance:1},t.C_NUMBER_MODE]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[t.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:r,illegal:/["']/}]}]}}function lw(t){const e=t.regex,n={className:"variable",variants:[{begin:/\$\d+/},{begin:/\$\{\w+\}/},{begin:e.concat(/[$@]/,t.UNDERSCORE_IDENT_RE)}]},o={endsWithParent:!0,keywords:{$pattern:/[a-z_]{2,}|\/dev\/poll/,literal:["on","off","yes","no","true","false","none","blocked","debug","info","notice","warn","error","crit","select","break","last","permanent","redirect","kqueue","rtsig","epoll","poll","/dev/poll"]},relevance:0,illegal:"=>",contains:[t.HASH_COMMENT_MODE,{className:"string",contains:[t.BACKSLASH_ESCAPE,n],variants:[{begin:/"/,end:/"/},{begin:/'/,end:/'/}]},{begin:"([a-z]+):/",end:"\\s",endsWithParent:!0,excludeEnd:!0,contains:[n]},{className:"regexp",contains:[t.BACKSLASH_ESCAPE,n],variants:[{begin:"\\s\\^",end:"\\s|\\{|;",returnEnd:!0},{begin:"~\\*?\\s+",end:"\\s|\\{|;",returnEnd:!0},{begin:"\\*(\\.[a-z\\-]+)+"},{begin:"([a-z\\-]+\\.)+\\*"}]},{className:"number",begin:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{className:"number",begin:"\\b\\d+[kKmMgGdshdwy]?\\b",relevance:0},n]};return{name:"Nginx config",aliases:["nginxconf"],contains:[t.HASH_COMMENT_MODE,{beginKeywords:"upstream location",end:/;|\{/,contains:o.contains,keywords:{section:"upstream location"}},{className:"section",begin:e.concat(t.UNDERSCORE_IDENT_RE+e.lookahead(/\s+\{/)),relevance:0},{begin:e.lookahead(t.UNDERSCORE_IDENT_RE+"\\s"),end:";|\\{",contains:[{className:"attribute",begin:t.UNDERSCORE_IDENT_RE,starts:o}],relevance:0}],illegal:"[^\\s\\}\\{]"}}function aw(t){const e=t.regex,n=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),i=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],l={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:i,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},a={className:"meta",begin:/^(>>>|\.\.\.) /},u={className:"subst",begin:/\{/,end:/\}/,keywords:l,illegal:/#/},c={begin:/\{\{/,relevance:0},p={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,a],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,a],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,a,c,u]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,a,c,u]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[t.BACKSLASH_ESCAPE,c,u]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,c,u]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},d="[0-9](_?[0-9])*",h=`(\\b(${d}))?\\.(${d})|\\b(${d})\\.`,m=`\\b|${i.join("|")}`,g={className:"number",relevance:0,variants:[{begin:`(\\b(${d})|(${h}))[eE][+-]?(${d})[jJ]?(?=${m})`},{begin:`(${h})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${m})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${m})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${m})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${m})`},{begin:`\\b(${d})[jJ](?=${m})`}]},y={className:"comment",begin:e.lookahead(/# type:/),end:/$/,keywords:l,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},$={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:["self",a,g,p,t.HASH_COMMENT_MODE]}]};return u.contains=[p,g,a],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:l,illegal:/(<\/|\?)|=>/,contains:[a,g,{begin:/\bself\b/},{beginKeywords:"if",relevance:0},p,y,t.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[$]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[g,$,p]}]}}function uw(t){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}const cw=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),fw=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],pw=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],dw=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],hw=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],mw=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function _w(t){const e=t.regex,n=cw(t),i={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},o="and or not only",r=/@-?\w[\w]*(-\w+)*/,s="[a-zA-Z-][a-zA-Z0-9_-]*",l=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,i,n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+s,relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+dw.join("|")+")"},{begin:":(:)?("+hw.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+mw.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...l,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...l,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:r},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:o,attribute:pw.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...l,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+fw.join("|")+")\\b"}]}}function gw(t){const e=t.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:e.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:e.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function bw(t){const e=t.regex,n="HTTP/([32]|1\\.[01])",i=/[A-Za-z][A-Za-z0-9-]*/,o={className:"attribute",begin:e.concat("^",i,"(?=\\:\\s)"),starts:{contains:[{className:"punctuation",begin:/: /,relevance:0,starts:{end:"$",relevance:0}}]}},r=[o,{begin:"\\n\\n",starts:{subLanguage:[],endsWithParent:!0}}];return{name:"HTTP",aliases:["https"],illegal:/\S/,contains:[{begin:"^(?="+n+" \\d{3})",end:/$/,contains:[{className:"meta",begin:n},{className:"number",begin:"\\b\\d{3}\\b"}],starts:{end:/\b\B/,illegal:/\S/,contains:r}},{begin:"(?=^[A-Z]+ (.*?) "+n+"$)",end:/$/,contains:[{className:"string",begin:" ",end:" ",excludeBegin:!0,excludeEnd:!0},{className:"meta",begin:n},{className:"keyword",begin:"[A-Z]+"}],starts:{end:/\b\B/,illegal:/\S/,contains:r}},t.inherit(o,{relevance:0})]}}function vw(t){const e="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",i={className:"attr",variants:[{begin:"\\w[\\w :\\/.-]*:(?=[ 	]|$)"},{begin:'"\\w[\\w :\\/.-]*":(?=[ 	]|$)'},{begin:"'\\w[\\w :\\/.-]*':(?=[ 	]|$)"}]},o={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},r={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[t.BACKSLASH_ESCAPE,o]},s=t.inherit(r,{variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),p={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},d={end:",",endsWithParent:!0,excludeEnd:!0,keywords:e,relevance:0},h={begin:/\{/,end:/\}/,contains:[d],illegal:"\\n",relevance:0},m={begin:"\\[",end:"\\]",contains:[d],illegal:"\\n",relevance:0},g=[i,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+t.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+t.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},t.HASH_COMMENT_MODE,{beginKeywords:e,keywords:{literal:e}},p,{className:"number",begin:t.C_NUMBER_RE+"\\b",relevance:0},h,m,r],y=[...g];return y.pop(),y.push(s),d.contains=y,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:g}}bt.registerLanguage("css",_w);bt.registerLanguage("diff",gw);bt.registerLanguage("dockerfile",q$);bt.registerLanguage("go",sw);bt.registerLanguage("http",bw);bt.registerLanguage("javascript",V$);bt.registerLanguage("markdown",Z$);bt.registerLanguage("mojolicious",J$);bt.registerLanguage("nginx",lw);bt.registerLanguage("perl",Q$);bt.registerLanguage("python",aw);bt.registerLanguage("scss",ow);bt.registerLanguage("shell",uw);bt.registerLanguage("xml",rw);bt.registerLanguage("yaml",vw);M$(bt);var yc={exports:{}};function Qa(t){let e=document.createElement("div");const n=[[t,e]],i=[];for(;n.length;){const[o,r]=n.shift();let s,l,a=typeof o;if(o===null||a=="undefined"?a="null":Array.isArray(o)&&(a="array"),a=="array")l=u=>u,l.len=o.length,s=document.createElement("div"),s.className="json-array "+(l.len?"has-items":"is-empty");else if(a=="object"){const u=Object.keys(o).sort();l=c=>u[c],l.len=u.length,s=document.createElement("div"),s.className="json-object "+(l.len?"has-items":"is-empty")}else s=document.createElement("span"),s.className="json-"+a,s.textContent=a=="null"?"null":a!="boolean"?o:o?"true":"false";if(l){const u=document.createElement("span");if(u.className="json-type",u.textContent=l.len?a+"["+l.len+"]":"{}",r.appendChild(u),i.indexOf(o)!=-1)e.classList.add("has-recursive-items"),s.classList.add("is-seen");else{for(let c=0;c<l.len;c++){const p=l(c),d=document.createElement("div"),h=document.createElement("span");h.className="json-key",h.textContent=p,d.appendChild(h),s.appendChild(d),n.push([o[p],d])}i.push(o)}}r.className="json-item "+s.className.replace(/^json-/,"contains-"),r.appendChild(s)}return e}try{yc.exports={jsonhtmlify:Qa}}catch{window.jsonhtmlify=Qa}var $w=yc.exports;function Xa(t,e){const n=e.vars?tt.l(e.message,...e.vars):e.message;return t?tt.raw(n):tt.md(n)}const ww={};let kw=0;class yw extends Lt{constructor(e){super();let n=e.connection_id;e.conversation_id&&(n+=":"+e.conversation_id),this.prop("ro","length",()=>this.messages.length),this.prop("ro","messages",[]),this.prop("rw","expandUrlToMedia",!0),this.prop("persist","raw",!1,{key:n+":raw"}),this.embedCache=ww}clear(){return this.messages.length=0,this.update({messages:!0})}get(e){return e<0?this.messages.slice(e)[0]:this.messages[e]}push(e){return[].push.apply(this.messages,this._fill(e)),this.update({messages:!0})}render(e=-1){if(e!==-1){const i=this.get(e);return i&&!i.hasBeenSeen&&(i.embeds=this._embeds(i),i.hasBeenSeen=!0,this.update({messages:!0})),this.messages}let n={};return this.messages.map((i,o)=>(i.index=o,i.embeds||(i.dayChanged=this._dayChanged(i,n),i.className=this._className(i,n),i.embeds=[],i.html=Xa(this.raw,i)),n=i))}toArray(){return this.messages}update(e){const n=this._changed(e,"expandUrlToMedia")||this._changed(e,"raw");if(super.update(e),n)for(let i of this.messages)i.embeds=i.hasBeenSeen?this._embeds(i):[],i.html=Xa(this.raw,i);return this}unshift(e){return[].unshift.apply(this.messages,this._fill(e)),this.update({messages:!0})}_changed(e,n){return Object.hasOwn(e,n)&&e[n]!==this[n]}_className(e,n){const i=["message"];e.type&&i.push("is-type-"+e.type),e.highlight&&i.push("is-highlighted");const o=e.from===n.from&&e.conversation_id===n.conversation_id&&e.connection_id===n.connection_id;return i.push(!e.dayChanged&&o?"has-same-from":"has-not-same-from"),i.join(" ")}_dayChanged(e,n){return!!(n.ts&&e.ts.getDate()!==n.ts.getDate())}_embeds(e){const n=[];return this._msgDetails(e)&&n.push(Promise.resolve({className:"le-details",details:!0,nodes:[$w.jsonhtmlify(e.details).lastChild]})),!this.expandUrlToMedia||this.raw||e.type==="notice"?this._embedsPromises(n):((e.message.match(/https?:\/\/(\S+)/g)||[]).forEach(i=>{i=i.replace(/(\W)?$/,""),this.embedCache[i]||(this.embedCache[i]=this._loadEmbed(e,i)),n.push(this.embedCache[i])}),this._embedsPromises(n))}_embedsPromises(e){return e.map(n=>(n.finally(()=>this.update({messages:!0})),n.catch(i=>console.error("[Messages:embed]",i))))}_fill(e){for(let n=0;n<e.length;n++){const i=e[n];i.from||([i.internal,i.from]=[!0,"Convos"]),i.type||(i.type="notice"),i.color=i.from==="Convos"?"inherit":$o(i.from.toLowerCase()),i.ts=new $t(i.ts),i.id=++kw}return e}_isProbablyConvosVideoLink(e){return!!e.match(/\/video\/[^/]+\/[^/]+($|\?)/)}async _loadEmbed(e,n){const o=(await nt.op("embed",{url:n}).perform()).res.body;if(o.nodes=[],o.provider=(o.provider_name||"").toLowerCase(),!o.html)return o;let r=document.createRange().createContextualFragment(o.html).firstChild;return r&&(r=this._renderVideoChat(e,o,r)||this._renderPaste(e,o,r)||r,wt(r,"img",["error",s=>s.target.style.display="none"]),wt(r,".le-goto-link",s=>s.parentNode.children.length===1&&s.parentNode.remove()),delete o.html,o.className=r.className,o.nodes=r.tagName.toLowerCase()==="iframe"?[r]:[].slice.call(r.childNodes,0)),o}_msgDetails(e){if(Object.hasOwn(e,"details"))return e.details;if(e.type!=="error"&&e.type!=="notice")return e.details=null;const n={...e.sent||e};return["bubbles","className","command","connection_id","dispatchTo","color","dayChanged","hasBeenSeen","embeds","event","fresh","highlight","html","id","index","internal","method","silent","stopPropagation","ts"].forEach(i=>delete n[i]),Object.keys(n).sort().join(":")==="from:message:type"?e.details=null:e.details=n}_renderPaste(e,n,i){const o=i.querySelector("pre");if(!o)return;const r=i.querySelector(".le-meta");return r&&r.appendChild(yu("a",{className:"prevent-default",href:"#action:expand:"+e.index,innerHTML:'<i class="fas fa-angle-down"/>'})),bt.lineNumbersBlock(o),i}_renderVideoChat(e,n,i){const o=new URL(n.url).pathname.replace(/\/+$/,"").split("/");if(!(o.length&&(i.classList.contains("le-video-chat")||this._isProbablyConvosVideoLink(n.url))))return;const l=decodeURIComponent(o.slice(-1)[0]).replace(/\s-\s[\w-]+$/,"").replace(/[_.-]+/g," ").replace(/([a-z ])([A-Z])/g,(u,c,p)=>c+" "+p.toUpperCase()).replace(/((?:^|[ ])\w)/g,u=>u.toUpperCase()),a=tt.l('Do you want to join the %1 video chat with "%2"?',n.provider_name,l);return i=document.createElement("div"),i.className="le-card le-rich le-join-request le-provider-"+n.provider,i.innerHTML='<a class="le-thumbnail" href="'+n.url+'" target="convos_video"><i class="fas fa-video"></i></a><h3>'+a+'</h3><p class="le-description"><a href="'+n.url+'" target="convos_video">'+tt.l("Yes, I want to join.")+"</a></p>",e.fresh&&this.emit("notify",{...e,message:a}),i}}class Sw extends Lt{constructor(){super(),this.prop("ro","length",()=>this._map.size),this.prop("ro","_map",new Map)}clear(){const e=this.me();return this._map.clear(),this.add(e),this}delete(e){return this._map.delete(this._id(e)),this.update({})}get(e){return this._map.get(this._id(e))}has(e){return this._map.has(this._id(e))}me(){return Array.from(this._map.values()).filter(e=>e.me)[0]||this._defaultParticipant()}nicks(){return Array.from(this._map.values()).map(e=>e.nick)}rename(e,n){const i=this.get(e)||{};return delete i.id,i.nick=n,this.delete(e),this.add(i)}add(e){if(Array.isArray(e))return e.forEach(i=>this.add(i)),this;e.id=this._id(e.nick),e.color=$o(e.id),e.group=$o(e.id),Pe.string(e.mode)?(e.modes=wr(T_,e.mode),e.group=e.modes.founder?7:e.modes.admin?6:e.modes.operator?5:e.modes.half_operator?4:e.modes.voice?3:e.modes.bot?2:e.modes.service_bot?1:0):(e.modes={},e.group=0);const n=this._map.get(e.id);return n&&Object.keys(n).forEach(i=>e[i]||(e[i]=n[i])),e.nick||(e.nick=e.name),this._map.set(e.id,e),this.update({length:!0})}toArray(){return Array.from(this._map.values()).sort((e,n)=>n.group-e.group||e.nick.localeCompare(n.nick))}_defaultParticipant(){return{color:"#000000",id:"",modes:{},nick:""}}_id(e){return e.toLowerCase()}}const xn=gi("socket"),hi=t=>hi.singletons[t]||(hi.singletons[t]=new Ew);hi.singletons={};const Gi=[];Gi[WebSocket.CONNECTING]="connecting";Gi[WebSocket.OPEN]="open";Gi[WebSocket.CLOSING]="closing";Gi[WebSocket.CLOSED]="closed";class Ew extends Lt{constructor(){super(),this.prop("ro","readyState",()=>this.ws.readyState),this.prop("ro","readyStateHuman",()=>Gi[this.ws.readyState]),this.prop("ro","waiting",new Map),this.prop("rw","closed",0),this.prop("rw","error",""),this.prop("rw","keepaliveInterval",1e4),this.prop("rw","url",""),this.id=0,this.queue=[],this.keepClosed=!0,this._resetWebSocket()}close(e,n){return typeof e!="number"&&([e,n]=[1e3,e]),this.ws.close&&this.ws.close(e,n),this.keepClosed=!0,this._keepAliveStop(),this._reconnectStop(),this._resetWebSocket(),this}deflateMessage(e){return JSON.stringify(e)}deleteWaitingMessage(e){this.waiting.delete(e),this.update({waiting:!0})}getWaitingMessages(e){return arguments.length===0?Array.from(this.waiting.values()):e.map(n=>this.waiting.get(n))}inflateMessage(e){return JSON.parse(e)}is(e){return this.ws.readyState===WebSocket[e.toUpperCase()]}open(){if(this.ws.close)return this;try{if(!this.url)throw"Can't open WebSocket connection without URL.";this.ws=new WebSocket(this.url),this.ws.onclose=e=>this._onClose(e),this.ws.onerror=e=>this._onError(e),this.ws.onmessage=e=>this._onMessage(e),this.ws.onopen=e=>this._onOpen(e),this.keepClosed=!1,this._keepAliveStart(),this._reconnectStop(),this.update({error:"",readyState:!0})}catch(e){this._onError(e.message?e:{message:String(e)})}return this}reconnectIn(e){return e.code===1008||e.code===1011?!1:this.closed<=1?1e3:this.closed>5?1e4:1e3*(this.closed*2)}send(e,n){const i=e.id||String(++this.id);return this.queue.push({...e,id:i}),this.open(),this._dequeue(),n&&this.on("message_"+i,n),this}_dequeue(){const e=this.queue;for(e.length&&this.update({waiting:!0});e.length;){if(this.ws.readyState!==WebSocket.OPEN)return;const n=e.shift();xn.trace("<<<",n),this.ws.send(this.deflateMessage(n)),n.waitingForResponse=!0,n.ts||(n.ts=new $t),this.waiting.set(n.id,n)}}_keepAliveStart(){this._keepAliveStop(),this.keepaliveTid=setInterval(()=>this.ws.readyState===WebSocket.OPEN&&this.ws.send("{}"),this.keepaliveInterval)}_keepAliveStop(){this.keepaliveTid&&clearTimeout(this.keepaliveTid),delete this.keepaliveTid}_onClose(e){xn.debug("close",e);for(let[n,i]of this.waiting)Object.keys(i).length<=1&&this.waiting.delete(n),i.waitingForResponse=!1;this._keepAliveStop(),this._resetWebSocket(),this.update({closed:this.closed+1,readyState:!0,waiting:!0}),this._reconnectStart(this.reconnectIn(e))}_onError(e){let n=String(e.message||e);(!n||n.indexOf("[")===0)&&(n="Could not connect."),xn.error("error",n,e),this.update({error:n})}_onMessage(e){const n=this.inflateMessage(e.data);if(xn.trace(">>>",n),n.bubbles=!0,n.stopPropagation=()=>{n.bubbles=!1},n.id&&(this.emit("message_"+n.id,n),this.waiting.delete(n.id)),n.bubbles&&this.emit("message",n),this.update({waiting:!0}),!(!n.errors||n.id)){for(let i of this.waiting.keys())this.emit("message_"+i,n);this.waiting.clear()}}_onOpen(e){xn.info("open",e),this.update({closed:0,error:"",readyState:!0}),this._dequeue()}_reconnectStart(e){if(this._reconnectStop(),xn.info("reconnect in",e),e===!0)return this.open();if(typeof e!="number")return this.keepClosed=!0;this.reconnectTid=setTimeout(()=>this.open(),e)}_reconnectStop(){this.reconnectTid&&clearTimeout(this.reconnectTid),delete this.reconnectTid}_resetWebSocket(){this.ws={readyState:WebSocket.CLOSED}}}const Cw=new RegExp("^[#&]");class zi extends Lt{constructor(e){super();const n=[e.connection_id,e.conversation_id,""].filter(Pe.defined).join(":");this.prop("persist","userInput","",{key:n+"userInput"}),this.prop("ro","color",$o(e.conversation_id||e.connection_id||"")),this.prop("ro","connection_id",e.connection_id||""),this.prop("ro","messages",new yw(e)),this.prop("ro","participants",new Sw),this.prop("ro","path",Ie.conversationPath(e)),this.prop("rw","historyStartAt",null),this.prop("rw","historyStopAt",null),this.prop("rw","info",e.info||{}),this.prop("rw","modes",{}),this.prop("rw","name",e.name||e.conversation_id||e.connection_id||"ERR"),this.prop("rw","notifications",e.notifications||0),this.prop("rw","status","pending"),this.prop("rw","topic",e.topic||""),this.prop("rw","unread",e.unread||0),Object.hasOwn(e,"conversation_id")?(this.prop("ro","conversation_id",e.conversation_id),this.prop("ro","title",()=>[this.name,this.connection_id.replace(/^\w+-/,"")].join(" - ")),this.prop("rw","frozen",e.frozen||"")):(this.prop("ro","frozen",()=>this._calculateFrozen()),this.prop("ro","title",()=>this.name)),e.conversation_id&&this.prop("persist","wantNotifications",this.is("private"),{key:e.conversation_id+":wantNotifications"}),this.socket=e.socket||hi("/events"),this.messages.on("notify",i=>this.notify(i)),this._addOperations()}addMessages(e,n){if(!Array.isArray(e)){if(this._maybeIncreaseUnread(e),this._maybeNotify(e),!this.historyStopAt&&["action","private"].indexOf(e.type)!==-1)return;e.fresh=!0,e=[e]}return this.messages[n||"push"](e),this}is(e){return e==="connection"?!this.conversation_id:e==="conversation"?this.conversation_id&&!this.is("notifications"):e==="frozen"?this.frozen&&!0:e==="locked"?this.frozen==="Invalid password.":e==="not_found"?this.frozen==="Not found.":e==="notifications"?!1:e==="pending"?this.frozen.match(/pending invitation/i):e==="private"?this.conversation_id&&!Cw.test(this.conversation_id)||!1:e==="search"?!1:e==="unread"?this.unread&&!0:this.status===e}async load(e={}){if(this._skipLoad(e))return this;this.update({status:"loading"}),e.limit||(e.limit=40);const n={...e,connection_id:this.connection_id,conversation_id:this.conversation_id};await this.messagesOp.perform(n),this.update({status:this.messagesOp.status});const i=this.messagesOp.res.body;i.messages||(i.messages=[]);const o=[];return(e.around||!e.after&&!e.before)&&(o.push.apply(o,this.messages.toArray().filter(r=>r.internal)),this.messages.clear()),this.addMessages(i.messages,e.before?"unshift":"push"),this.addMessages(o,"push"),this._setEndOfStream(e,i),this}notify(e){if(vt.appHasFocus)return;const n=e.from===this.name?e.from:tt.l("%1 in %2",e.from,this.name);this.lastNotification=vt.show(e.message,{path:this.path,title:n})}send(e,n){return Pe.string(e)&&(e={message:e}),this.socket.send({method:"send",connection_id:this.connection_id,conversation_id:this.conversation_id||"",...e},n)}async markAsRead(){if(this.markAsReadOp)return this.update({notifications:0}),await this.markAsReadOp.perform({connection_id:this.connection_id,conversation_id:this.conversation_id}),this}update(e){return this._loadInformation(),super.update(e),(Object.hasOwn(e,"notifications")||Object.hasOwn(e,"unread"))&&this.emit("unread",e),this}wsEventMode(e){const n=["banlist","exceptlist","invitelist","quietlist"].filter(i=>e[i])[0];if(n){const i=e[n].length,o=i===1?"entry":"entries";this.addMessages({...e,message:"%1 has %2 "+o+" in %3.",vars:[this.name,i,tt.l(n)]})}else e.nick?(this.participants.add({nick:e.nick,mode:e.mode}),this.addMessages({...e,message:"%1 got mode %2 from %3.",vars:[e.nick,e.mode,e.from]})):e.mode_changed?(this.addMessages({...e,message:"%1 received mode %2.",vars:[this.name,e.mode]}),this.update({modes:Object.assign({},this.modes,wr(ri,e.mode))})):(this.addMessages({...e,message:"%1 got mode %2.",vars:[this.name,e.mode]}),this.update({modes:Object.assign({},this.modes,wr(ri,e.mode))}))}wsEventNickChange(e){if(!this.participants.has(e.old_nick)||e.old_nick===e.new_nick)return;this.participants.rename(e.old_nick,e.new_nick);const n=e.type==="me"?"You (%1) changed nick to %2.":"%1 changed nick to %2.";this.addMessages({message:n,vars:[e.old_nick,e.new_nick]})}wsEventPart(e){const n=this.participants.get(e.nick);!n||n.me||(this.participants.delete(e.nick),this.update({participants:!0}),e.silent||this.addMessages(this._partMessage(e)))}wsEventSentClear(e){e.errors||(this.messages.clear(),this.addMessages({message:"History was cleared for %1.",vars:[this.name]}))}wsEventSentNames(e){this.participants.add(e.participants);const n={...e,message:"Participants (%1): %2",vars:[]},i=this.participants.nicks();i.length>1&&(n.message+=" and %3.",n.vars[2]=i.pop()),n.vars[0]=i.length,n.vars[1]=i.join(", "),this.addMessages(n)}wsEventSentTopic(e){const n=e.topic?"Topic for %1 is: %2":"No topic is set for %1.";this.addMessages({message:n,vars:[this.name,e.topic]}),this.update({topic:e.topic})}_addOperations(){this.prop("ro","messagesOp",nt.op("conversationMessages")),this.prop("ro","markAsReadOp",nt.op("markConversationAsRead"))}_calculateFrozen(){return""}_loadInformation(){if(!(this.participantsLoaded||!this.conversation_id||!this.messagesOp)&&!(this.is("frozen")||!this.messagesOp.is("success")))if(this.participantsLoaded=!0,this.is("private")){if(this.info.ts&&this.info.ts>new $t().toEpoch()-300)return;this.send("/whois "+this.conversation_id,e=>{e.stopPropagation(),this.update({frozen:e.errors&&e.errors.length?e.errors[0].message:""})})}else this.send("/names "+this.conversation_id,e=>{e.stopPropagation(),this.participants.clear(),e.participants&&this.participants.add(e.participants)})}_maybeIncreaseUnread(e){if(!e.from||e.yourself)return this;if(["action","error","private"].indexOf(e.type)===-1)return this;this.update({unread:this.unread+1})}_maybeNotify(e){!e.from||e.yourself||["action","error","private"].indexOf(e.type)!==-1&&(!e.highlight&&!this.wantNotifications||this.notify(e))}_noop(){}_partMessage(e){const n={message:"%1 parted.",vars:[e.nick]};return e.kicker?(n.message="%1 was kicked by %2"+(e.message?": %3":""),n.vars.push(e.kicker),n.vars.push(e.message)):e.message&&(n.message+=" Reason: %2",n.vars.push(e.message)),n}_setEndOfStream(e,n){if(!e.before&&!n.after){const i=n.messages.slice(-1)[0];this.update({historyStopAt:new $t(i&&i.ts)})}if(!e.after&&!n.before){const i=n.messages[0];this.update({historyStartAt:new $t(i&&i.ts)})}n.after&&this.update({historyStopAt:null}),n.before&&this.update({historyStartAt:null}),n.messages&&n.messages.length<=1&&this.update({historyStartAt:new $t,historyStopAt:new $t})}_skipLoad(e){return!this.messagesOp||this.is("loading")?!0:this.messages.length?e.around?!!this.messages.toArray().find(n=>n.ts.toISOString()===e.around):!!(e.before&&this.historyStartAt||e.after&&this.historyStopAt):this.is("success")}}const Aw=(t,e)=>t.name.localeCompare(e.name);class Sc extends Map{constructor(e=[],n={}){super(e),this.sorter=n.sorter||Aw,this._sort()}filter(e){return Array.from(this.values()).filter(e)}set(e,n){super.set.call(this,e,n),this._sort()}toArray(){return Array.from(this.values())}_sort(){const e=Array.from(this.entries()),n=this.sorter;return this.clear(),e.sort((i,o)=>n(i[1],o[1])).forEach(([i,o])=>super.set.call(this,i,o)),e}}const Ow=(t,e)=>t.is("private")-e.is("private")||t.name.localeCompare(e.name);class xa extends zi{constructor(e){super(e),this.prop("rw","certificate",{}),this.prop("ro","conversations",new Sc([],{sorter:Ow})),this.prop("rw","on_connect_commands",e.on_connect_commands||[]),this.prop("rw","state",e.state||"disconnected"),this.prop("rw","wanted_state",e.wanted_state||"connected"),this.prop("rw","url",Pe.string(e.url)?new gn(e.url):e.url||new gn("irc://localhost"));const n=this.url.searchParams.get("nick")||"guest";this.prop("rw","nick",n),this.prop("rw","real_host",this.url.hostname),this.prop("rw","server_op",!1),e.info&&this.wsEventInfo(e.info)}ensureConversation(e){let n=this.conversations.get(e.conversation_id);return n?n.update(e):(!e.frozen&&this.frozen&&(e.frozen=this.frozen),n=new zi({...e,connection_id:this.connection_id}),n.on("message",i=>this.emit("message",i)),n.on("update",()=>this.update({conversations:!0})),n.on("unread",()=>this.emit("unread")),e.frozen||this._addDefaultParticipants(n),this.conversations.set(n.conversation_id,n),this.update({conversations:!0}),this.emit("conversationadd",n),n)}findConversation(e){return this.conversations.get(e.conversation_id)||null}is(e){return this.state===e||super.is(e)}removeConversation(e){const n=this.findConversation(e)||e;return this.conversations.delete(n.conversation_id),this.emit("conversationremove",n),this.update({conversations:!0})}send(e){Pe.string(e)&&(e={message:e});const n=new RegExp("^"+this.participants.toArray().map(i=>vi(i.id)).join("|")+":","i");return e.message.indexOf("/")!==0&&!e.message.match(n)&&(e.message="/quote "+e.message),super.send(e)}update(e){return e.url&&Pe.string(e.url)&&(e.url=new gn(e.url)),super.update(e)}wsEventSentAway(e){(this.findConversation(e)||this).addMessages({message:e.reason,sent:e,type:"notice"})}wsEventConnection(e){this.update({state:e.state})}wsEventFrozen(e){const n=this.findConversation(e),i=n&&n.frozen,o=this.ensureConversation(e);!e.frozen&&i&&n.addMessages({message:"Connected.",vars:[]}),e.frozen||o.participants.add({nick:this.nick,me:!0}),e.frozen&&o.is("pending")&&vt.show(e.frozen,{title:e.name})}wsEventInfo(e){e.nick&&this.wsEventNickChange(e),e.server_op&&this.addMessages({message:"You are an IRC operator.",vars:[],highlight:!0}),e.real_host&&this.participants.add({nick:e.real_host}),this.update(e)}wsEventMessage(e){return e.yourself=e.from===this.nick,e.conversation_id?this.ensureConversation(e).addMessages(e):this.addMessages(e)}wsEventNickChange(e){const n={old_nick:e.old_nick||this.nick,new_nick:e.new_nick||e.nick,type:e.type};e.old_nick===this.nick&&(n.me=!0),super.wsEventNickChange(n),this.conversations.forEach(i=>i.wsEventNickChange(n))}wsEventError(e){const n={message:Br(e)||e.frozen||"Unknown error from %1.",sent:e,type:"error",vars:e.command||[e.message]},i=(e.message||"").match(/^\/j(oin)? (\S+)/);if(i)return this.ensureConversation({...e,conversation_id:i[2]});const o=e.conversation_id&&e.frozen?this.ensureConversation(e):this.findConversation(e)||this;console.error(o.conversation_id,n),o.addMessages(n)}wsEventJoin(e){const n=this.ensureConversation({connection_id:e.connection_id,conversation_id:e.conversation_id}),i=e.nick||this.nick;i!==this.nick&&!e.silent&&n.addMessages({message:"%1 joined.",vars:[i]}),n.participants.add({nick:i})}wsEventPart(e){if(e.nick===this.nick)return this.removeConversation(e);e.conversation_id||this.conversations.forEach(n=>n.wsEventPart(e))}wsEventQuit(e){this.wsEventPart(e)}wsEventSentJoin(e){this.wsEventJoin(e)}wsEventSentList(e){const n=e.args||"/*/";this.addMessages(e.done?{message:"Found %1 of %2 conversations from %3.",vars:[e.conversations.length,e.n_conversations,n]}:{message:"Found %1 of %2 conversations from %3, but conversations are still loading.",vars:[e.conversations.length,e.n_conversations,n]})}wsEventSentMode(e){const n=this.findConversation(e);return n?n.wsEventMode(e):this.addMessages({message:"%1 received mode %2.",vars:[e.target,e.mode]})}wsEventSentQuery(e){this.ensureConversation(e)}wsEventSentWhois(e){const[n,...i]=Tr(e);(this.findConversation(e)||this).addMessages({message:n,vars:i,sent:e})}wsEventSentNames(){}_addDefaultParticipants(e){const n=[{nick:this.nick,me:!0}];e.is("private")&&n.push({nick:e.name}),e.participants.add(n)}_addOperations(){this.prop("ro","markAsReadOp",nt.op("markConnectionAsRead")),this.prop("ro","messagesOp",nt.op("connectionMessages"))}_calculateFrozen(){switch(this.state){case"connected":return"";case"connecting":return"Connecting...";case"disconnected":return"Disconnected.";case"disconnecting":return"Disconnecting...";case"unreachable":return"Unreachable.";default:return"Connecting..."}}}class Nw extends Lt{constructor(e){super(e),this.prop("ro","op",nt.op("listConnectionProfiles")),this.prop("rw","profiles",[]),this.prop("rw","status","pending")}find(e){return this.search(n=>n.id===e)[0]}defaultProfile(){return{conversation_id:"",host:"",is_default:!1,is_forced:!0,max_bulk_message_size:3,max_message_length:512,service_accounts:"chanserv, nickserv",skip_queue:!1,tls:!0,tls_verify:!0,webirc_password:"",url:new gn("irc://0.0.0.0")}}is(e){return this.status===e}async load(e={}){return this.is("loading")?this:!e.force&&this.profiles.length?this:(this.update({status:"loading"}),await this.op.perform(),this.update({status:this.op.status}),this.is("success")&&this.update({profiles:this.op.res.body.profiles.map(n=>this._expand(n))}),this)}search(e=()=>!0){return this.profiles.filter(e)}_expand(e){e.url=new gn(e.url),e.service_accounts=e.service_accounts.join(", "),e.url.toFields(e);const n=this.defaultProfile();return Object.keys(n).forEach(i=>Object.hasOwn(e,i)||(e[i]=n[i])),e}}class Tw extends zi{constructor(e){super({...e,connection_id:"",conversation_id:"notifications",name:"Notifications"})}addMessages(e){return Array.isArray(e)||(e=[e]),this.messages.push(e),this}async markAsRead(){return await super.markAsRead(),this.emit("cleared"),this}is(e){return e==="notifications"?!0:super.is(e)}send(e={}){return Promise.resolve(e)}_addOperations(){this.prop("ro","markAsReadOp",nt.op("markNotificationsAsRead")),this.prop("ro","messagesOp",nt.op("notificationMessages"))}_skipLoad(){return!1}}class Rw extends zi{constructor(e){super({...e,connection_id:"",conversation_id:"search",name:"Search"}),this.prop("rw","query",""),this.update({status:"success"})}is(e){return e==="conversation"?!1:e==="search"?!0:super.is(e)}async load(e={}){if(this.is("loading"))return this;const n={...e};if(n.match=e.match||e.message,!(n.match||"").match(/\S/))return this.messages.clear().push([{message:'Search query "%1" does not contain anything to search for.',vars:[e.message]}]);this.update({query:n.match,status:"loading"}),this.messages.clear(),await this.messagesOp.perform(n);const i=this.messagesOp.res.body;return this.messages[n.before?"unshift":"push"](i.messages||[]),this.update({status:this.messagesOp.status})}send(e){return Pe.string(e)&&(e={message:e}),this.emit("send",e),Promise.resolve(e)}_addOperations(){this.prop("ro","messagesOp",nt.op("searchMessages")),this.prop("ro","markAsReadOp",null)}_loadInformation(){}}function Mw(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),n=n>o?o:n,n<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var r=Array(o);++i<o;)r[i]=t[i+e];return r}var Iw=Mw,Lw=Iw;function Pw(t,e,n){var i=t.length;return n=n===void 0?i:n,!e&&n>=i?t:Lw(t,e,n)}var Dw=Pw,Uw="\\ud800-\\udfff",Bw="\\u0300-\\u036f",Fw="\\ufe20-\\ufe2f",jw="\\u20d0-\\u20ff",zw=Bw+Fw+jw,Hw="\\ufe0e\\ufe0f",qw="\\u200d",Ww=RegExp("["+qw+Uw+zw+Hw+"]");function Gw(t){return Ww.test(t)}var Ec=Gw;function Kw(t){return t.split("")}var Yw=Kw,Cc="\\ud800-\\udfff",Vw="\\u0300-\\u036f",Zw="\\ufe20-\\ufe2f",Jw="\\u20d0-\\u20ff",Qw=Vw+Zw+Jw,Xw="\\ufe0e\\ufe0f",xw="["+Cc+"]",Rr="["+Qw+"]",Mr="\\ud83c[\\udffb-\\udfff]",e2="(?:"+Rr+"|"+Mr+")",Ac="[^"+Cc+"]",Oc="(?:\\ud83c[\\udde6-\\uddff]){2}",Nc="[\\ud800-\\udbff][\\udc00-\\udfff]",t2="\\u200d",Tc=e2+"?",Rc="["+Xw+"]?",n2="(?:"+t2+"(?:"+[Ac,Oc,Nc].join("|")+")"+Rc+Tc+")*",i2=Rc+Tc+n2,o2="(?:"+[Ac+Rr+"?",Rr,Oc,Nc,xw].join("|")+")",r2=RegExp(Mr+"(?="+Mr+")|"+o2+i2,"g");function s2(t){return t.match(r2)||[]}var l2=s2,a2=Yw,u2=Ec,c2=l2;function f2(t){return u2(t)?c2(t):a2(t)}var p2=f2,d2=Dw,h2=Ec,m2=p2,_2=Hi;function g2(t){return function(e){e=_2(e);var n=h2(e)?m2(e):void 0,i=n?n[0]:e.charAt(0),o=n?d2(n,1).join(""):e.slice(1);return i[t]()+o}}var b2=g2,v2=b2,$2=v2("toUpperCase"),w2=$2,k2=Hi,y2=w2;function S2(t){return y2(k2(t).toLowerCase())}var E2=S2;function C2(t,e,n,i){var o=-1,r=t==null?0:t.length;for(i&&r&&(n=t[++o]);++o<r;)n=e(n,t[o],o,t);return n}var A2=C2;function O2(t){return function(e){return t==null?void 0:t[e]}}var N2=O2,T2=N2,R2={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},M2=T2(R2),I2=M2,L2=I2,P2=Hi,D2=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,U2="\\u0300-\\u036f",B2="\\ufe20-\\ufe2f",F2="\\u20d0-\\u20ff",j2=U2+B2+F2,z2="["+j2+"]",H2=RegExp(z2,"g");function q2(t){return t=P2(t),t&&t.replace(D2,L2).replace(H2,"")}var W2=q2,G2=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function K2(t){return t.match(G2)||[]}var Y2=K2,V2=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Z2(t){return V2.test(t)}var J2=Z2,Mc="\\ud800-\\udfff",Q2="\\u0300-\\u036f",X2="\\ufe20-\\ufe2f",x2="\\u20d0-\\u20ff",ek=Q2+X2+x2,Ic="\\u2700-\\u27bf",Lc="a-z\\xdf-\\xf6\\xf8-\\xff",tk="\\xac\\xb1\\xd7\\xf7",nk="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ik="\\u2000-\\u206f",ok=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pc="A-Z\\xc0-\\xd6\\xd8-\\xde",rk="\\ufe0e\\ufe0f",Dc=tk+nk+ik+ok,Uc="['’]",eu="["+Dc+"]",sk="["+ek+"]",Bc="\\d+",lk="["+Ic+"]",Fc="["+Lc+"]",jc="[^"+Mc+Dc+Bc+Ic+Lc+Pc+"]",ak="\\ud83c[\\udffb-\\udfff]",uk="(?:"+sk+"|"+ak+")",ck="[^"+Mc+"]",zc="(?:\\ud83c[\\udde6-\\uddff]){2}",Hc="[\\ud800-\\udbff][\\udc00-\\udfff]",ni="["+Pc+"]",fk="\\u200d",tu="(?:"+Fc+"|"+jc+")",pk="(?:"+ni+"|"+jc+")",nu="(?:"+Uc+"(?:d|ll|m|re|s|t|ve))?",iu="(?:"+Uc+"(?:D|LL|M|RE|S|T|VE))?",qc=uk+"?",Wc="["+rk+"]?",dk="(?:"+fk+"(?:"+[ck,zc,Hc].join("|")+")"+Wc+qc+")*",hk="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",mk="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",_k=Wc+qc+dk,gk="(?:"+[lk,zc,Hc].join("|")+")"+_k,bk=RegExp([ni+"?"+Fc+"+"+nu+"(?="+[eu,ni,"$"].join("|")+")",pk+"+"+iu+"(?="+[eu,ni+tu,"$"].join("|")+")",ni+"?"+tu+"+"+nu,ni+"+"+iu,mk,hk,Bc,gk].join("|"),"g");function vk(t){return t.match(bk)||[]}var $k=vk,wk=Y2,kk=J2,yk=Hi,Sk=$k;function Ek(t,e,n){return t=yk(t),e=n?void 0:e,e===void 0?kk(t)?Sk(t):wk(t):t.match(e)||[]}var Ck=Ek,Ak=A2,Ok=W2,Nk=Ck,Tk="['’]",Rk=RegExp(Tk,"g");function Mk(t){return function(e){return Ak(Nk(Ok(e).replace(Rk,"")),t,"")}}var Ik=Mk,Lk=E2,Pk=Ik,Dk=Pk(function(t,e,n){return e=e.toLowerCase(),t+(n?Lk(e):e)}),Uk=Dk;const Bk=bi(Uk);class Fk extends Lt{constructor(e){super(),this.prop("ro","connections",new Sc),this.prop("ro","connectionProfiles",new Nw),this.prop("ro","notifications",new Tw({})),this.prop("ro","search",new Rw({})),this.prop("ro","roles",new Set),this.prop("persist","expandUrlToMedia",!0),this.prop("persist","ignoreStatuses",!1),this.prop("persist","lastUrl",""),this.prop("rw","activeConversation",this.notifications),this.prop("rw","email",""),this.prop("rw","forced_connection",!1),this.prop("rw","default_connection","irc://irc.libera.chat:6697/%23convos"),this.prop("rw","highlightKeywords",[]),this.prop("rw","id",""),this.prop("rw","status","pending"),this.prop("rw","unreadIncludePrivateMessages",!1),this.socket=e.socket||hi("/events"),this.socket.on("message",n=>this._dispatchMessage(n)),this.socket.on("update",n=>this._onConnectionChange(n)),this.notifications.on("cleared",()=>this._calculateUnread("clear")),this._calculateUnreadDebounced=Zr(this._calculateUnread,25)}conversations(e){const n=[];return this.connections.toArray().forEach(i=>{i.conversations.toArray().forEach(o=>{(!e||e(o))&&n.push(o)})}),n}ensureConversation(e,n){if(e.conversation_id){const o=this.ensureConversation({connection_id:e.connection_id},!0);return this._maybeUpgradeActiveConversation(o.ensureConversation(e))}let i=this.findConversation(e);return i?i.update(e):(i=new xa({...e}),i.on("conversationadd",o=>this._maybeUpgradeActiveConversation(o)),i.on("conversationremove",o=>o===this.activeConversation&&this.setActiveConversation(o)),i.on("update",()=>this.update({connections:!0})),i.on("unread",()=>this._calculateUnreadDebounced()),this.connections.set(i.connection_id,i),this.update({connections:!0}),n?i:this._maybeUpgradeActiveConversation(i))}findConversation(e){const n=this.connections.get(e.connection_id);return e.conversation_id?n&&n.findConversation(e)||null:n}is(e){return Array.isArray(e)?!!e.filter(n=>this.is(n)).length:this.roles.has(e)?!0:this.status===e}async load(){if(this.is("loading"))return this;this.roles.clear(),this.update({status:"loading"});const n=await new Promise(o=>this.socket.send({method:"load",object:"user",params:{connections:!0,conversations:!0}},o));if(n.errors)return this.update({email:"",roles:!0,status:n.errors?"error":"success"});const i=n.user||{};return this.connections.clear(),(i.connections||[]).forEach(o=>this.ensureConversation({...o,status:"pending"})),(i.conversations||[]).forEach(o=>this.ensureConversation({...o,status:"pending"})),(i.roles||[]).forEach(o=>this.roles.add(o)),this.notifications.update({unread:i.unread||0}),Eo.fromString(i.video_service||""),this.update({email:i.email||"",default_connection:i.default_connection||"",forced_connection:i.forced_connection||!1,highlightKeywords:i.highlight_keywords||[],roles:!0,status:n.errors?"error":"success",id:i.uid||""})}removeConversation(e){const n=this.findConversation({connection_id:e.connection_id});if(e.conversation_id)return n&&n.removeConversation(e);this.connections.delete(e.connection_id),n===this.activeConversation&&this.setActiveConversation(n),this.update({connections:!0})}setActiveConversation(e){let n=!e.connection_id&&!e.conversation_id&&this.notifications;if(n)return this.update({activeConversation:n});if(n=this.findConversation(e),n)return this.update({activeConversation:n});const i={...e,connection_id:e.connection_id||"",frozen:"Not found."};return["conversation_id","name"].forEach(o=>Object.hasOwn(e,o)&&(i[o]=e[o])),this.update({activeConversation:i.conversation_id?new zi(i):new xa(i)})}update(e){return super.update(e),Object.hasOwn(e,"unreadIncludePrivateMessages")&&this._calculateUnreadDebounced(),this}_calculateUnread(e){let[n,i]=[0,0];for(const o of this.connections.toArray())for(const r of o.conversations.toArray())e&&r.update({notifications:0}),n+=r.is("private")?this.unreadIncludePrivateMessages?r.unread:0:r.notifications,i+=r.is("private")?0:r.notifications;e||(this.notifications.update({notifications:n,unread:i}),this.update({notifications:!0}))}_dispatchMessage(e){e.dispatchTo=Bk("wsEvent_"+this._getEventNameFromMessage(e)),e.silent=this.ignoreStatuses,this.emit(e.dispatchTo,e);const n=this.findConversation({connection_id:e.connection_id});if(!n||(n[e.dispatchTo]&&n[e.dispatchTo](e),!e.bubbles))return;const i=n.findConversation(e);i&&i[e.dispatchTo]&&i[e.dispatchTo](e),e.highlight&&!i.is("private")&&(this.notifications.addMessages(e),i===this.activeConversation&&vt.appHasFocus?i.markAsRead():i.update({notifications:i.notifications+1}))}_getEventNameFromMessage(e){return e.errors?"error":e.event==="state"?e.type:e.event==="sent"&&e.message.match(/\/\S+/)?(e.command=e.message.split(/\s+/).filter(n=>n.length),e.command[0]=e.command[0].substring(1),"sent_"+e.command[0].toLowerCase()):e.event}_maybeUpgradeActiveConversation(e){const n=this.activeConversation;return!e.conversation_id||e.connection_id&&e.connection_id!==n.connection_id||e.conversation_id&&e.conversation_id!==n.conversation_id||this.update({activeConversation:e}),e}_onConnectionChange(e){if(e.is("open")&&this.is("pending"))return this.load();e.is("closed")&&(this.connections.forEach(n=>n.update({state:"unreachable"})),this.is(["error","loading"])||this.update({status:"pending"}))}}const{window:Ir}=ef;function jk(t){let e,n,i;function o(s){t[27](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new ic({props:r}),fe.push(()=>me(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],he(()=>n=!1)),e.$set(a)},i(s){i||(b(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function zk(t){let e,n,i,o,r,s,l,a,u,c,p=(t[5]==="nav"||!t[2].isSingleColumn)&&ou(t);const d=[ny,ty,ey,xk,Xk,Qk,Jk,Zk,Vk,Yk,Kk,Gk,Wk,qk],h=[];function m(y,$){return $[0]&16&&(n=null),$[0]&16&&(i=null),$[0]&16&&(o=null),$[0]&16&&(r=null),n==null&&(n=!!y[4].path.match(/\/chat\/./)),n?0:(i==null&&(i=y[4].path.indexOf("/chat")===0),i?1:y[4].path==="/help"?2:y[4].path==="/search"?3:y[4].path==="/settings"?4:y[4].path==="/settings/account"?5:y[4].path==="/settings/connections"?6:y[4].path==="/settings/files"?7:(o==null&&(o=y[4].path.indexOf("/settings/connection/")===0),o?8:(r==null&&(r=y[4].path.indexOf("/settings/connection-profile/")===0),r?9:y[4].path==="/settings/conversation"?10:y[4].path==="/settings/users"?11:y[4].path==="/login"||y[4].path==="/register"?12:13)))}s=m(t,[-1,-1]),l=h[s]=d[s](t);let g=t[5]&&t[2].haSingleColumn&&ru(t);return{c(){p&&p.c(),e=C(),l.c(),a=C(),g&&g.c(),u=ft()},m(y,$){p&&p.m(y,$),w(y,e,$),h[s].m(y,$),w(y,a,$),g&&g.m(y,$),w(y,u,$),c=!0},p(y,$){y[5]==="nav"||!y[2].isSingleColumn?p?(p.p(y,$),$[0]&36&&b(p,1)):(p=ou(y),p.c(),b(p,1),p.m(e.parentNode,e)):p&&(ke(),S(p,1,1,()=>{p=null}),ye());let E=s;s=m(y,$),s===E?h[s].p(y,$):(ke(),S(h[E],1,1,()=>{h[E]=null}),ye(),l=h[s],l?l.p(y,$):(l=h[s]=d[s](y),l.c()),b(l,1),l.m(a.parentNode,a)),y[5]&&y[2].haSingleColumn?g?$[0]&36&&b(g,1):(g=ru(y),g.c(),b(g,1),g.m(u.parentNode,u)):g&&(ke(),S(g,1,1,()=>{g=null}),ye())},i(y){c||(b(p),b(l),b(g),c=!0)},o(y){S(p),S(l),S(g),c=!1},d(y){y&&(v(e),v(a),v(u)),p&&p.d(y),h[s].d(y),g&&g.d(y)}}}function Hk(t){let e,n;return e=new nc({}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p:Oe,i(i){n||(b(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function ou(t){let e,n;return e=new U0({props:{transition:{duration:t[2].isSingleColumn?250:0,x:t[0]}}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o[0]&5&&(r.transition={duration:i[2].isSingleColumn?250:0,x:i[0]}),e.$set(r)},i(i){n||(b(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function qk(t){let e,n,i;function o(s){t[25](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new nc({props:r}),fe.push(()=>me(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],he(()=>n=!1)),e.$set(a)},i(s){i||(b(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function Wk(t){let e,n,i;function o(s){t[24](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new ic({props:r}),fe.push(()=>me(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],he(()=>n=!1)),e.$set(a)},i(s){i||(b(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function Gk(t){let e,n,i;function o(s){t[23](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new o0({props:r}),fe.push(()=>me(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],he(()=>n=!1)),e.$set(a)},i(s){i||(b(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function Kk(t){let e,n,i;function o(s){t[22](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new e1({props:r}),fe.push(()=>me(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],he(()=>n=!1)),e.$set(a)},i(s){i||(b(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function Yk(t){let e,n,i;function o(s){t[21](s)}let r={profile_id:t[4].pathParts[2]};return t[1]!==void 0&&(r.title=t[1]),e=new Fb({props:r}),fe.push(()=>me(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};l[0]&16&&(a.profile_id=s[4].pathParts[2]),!n&&l[0]&2&&(n=!0,a.title=s[1],he(()=>n=!1)),e.$set(a)},i(s){i||(b(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function Vk(t){let e,n,i;function o(s){t[20](s)}let r={connection_id:t[4].pathParts[2]};return t[1]!==void 0&&(r.title=t[1]),e=new Wb({props:r}),fe.push(()=>me(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};l[0]&16&&(a.connection_id=s[4].pathParts[2]),!n&&l[0]&2&&(n=!0,a.title=s[1],he(()=>n=!1)),e.$set(a)},i(s){i||(b(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function Zk(t){let e,n,i;function o(s){t[19](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new _0({props:r}),fe.push(()=>me(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],he(()=>n=!1)),e.$set(a)},i(s){i||(b(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function Jk(t){let e,n,i;function o(s){t[18](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new db({props:r}),fe.push(()=>me(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],he(()=>n=!1)),e.$set(a)},i(s){i||(b(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function Qk(t){let e,n,i;function o(s){t[17](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new Sv({props:r}),fe.push(()=>me(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],he(()=>n=!1)),e.$set(a)},i(s){i||(b(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function Xk(t){let e,n,i;function o(s){t[16](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new Hv({props:r}),fe.push(()=>me(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],he(()=>n=!1)),e.$set(a)},i(s){i||(b(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function xk(t){let e,n,i;function o(s){t[15](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new iv({props:r}),fe.push(()=>me(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],he(()=>n=!1)),e.$set(a)},i(s){i||(b(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function ey(t){let e,n,i;function o(s){t[14](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new v1({props:r}),fe.push(()=>me(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],he(()=>n=!1)),e.$set(a)},i(s){i||(b(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function ty(t){let e,n,i;function o(s){t[13](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new Y1({props:r}),fe.push(()=>me(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],he(()=>n=!1)),e.$set(a)},i(s){i||(b(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function ny(t){let e,n,i;function o(s){t[12](s)}let r={connection_id:t[4].pathParts[1],conversation_id:t[4].pathParts[2]};return t[1]!==void 0&&(r.title=t[1]),e=new eb({props:r}),fe.push(()=>me(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};l[0]&16&&(a.connection_id=s[4].pathParts[1]),l[0]&16&&(a.conversation_id=s[4].pathParts[2]),!n&&l[0]&2&&(n=!0,a.title=s[1],he(()=>n=!1)),e.$set(a)},i(s){i||(b(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function ru(t){let e,n,i,o,r;return{c(){e=_("a"),e.textContent=" ",k(e,"href","#hide"),k(e,"class","overlay")},m(s,l){w(s,e,l),i=!0,o||(r=Ce(e,"click",t[26]),o=!0)},i(s){i||(s&&at(()=>{i&&(n||(n=et(e,Bt,{duration:200},!0)),n.run(1))}),i=!0)},o(s){s&&(n||(n=et(e,Bt,{duration:200},!1)),n.run(0)),i=!1},d(s){s&&v(e),s&&n&&n.end(),o=!1,r()}}}function iy(t){let e,n,i,o,r,s,l;at(t[11]);const a=[Hk,zk,jk],u=[];function c(p,d){return d[0]&8&&(e=null),e==null&&(e=!!p[3].is(["loading","pending"])),e?0:p[3].email?1:2}return n=c(t,[-1,-1]),i=u[n]=a[n](t),{c(){i.c(),o=ft()},m(p,d){u[n].m(p,d),w(p,o,d),r=!0,s||(l=[Ce(Ir,"focus",t[10]),Ce(Ir,"resize",t[11])],s=!0)},p(p,d){let h=n;n=c(p,d),n===h?u[n].p(p,d):(ke(),S(u[h],1,1,()=>{u[h]=null}),ye(),i=u[n],i?i.p(p,d):(i=u[n]=a[n](p),i.c()),b(i,1),i.m(o.parentNode,o))},i(p){r||(b(i),r=!0)},o(p){S(i),r=!1},d(p){p&&v(o),u[n].d(p),s=!1,ht(l)}}}function oy(t,e,n){let i,o,r,s,l;ve(t,Nt,R=>n(5,i=R)),ve(t,bn,R=>n(2,o=R)),ve(t,Ie,R=>n(4,s=R));const a=hi("/events"),u=new B0().start();ve(t,u,R=>n(9,l=R));const c=new Fk({});ve(t,c,R=>n(3,r=R));let p=Ie.path,d=0,h={closed:!0},m=tt.l("Chat");a.update({debug:"WebSocket"}),window.convosWebSockeet=a,nt.url(Ie.urlFor("/api")),Ie.update({baseUrl:Ve("base_url"),enabled:!0}),a.update({url:Ie.wsUrlFor("/events")}),c.on("wsEventSentJoin",R=>Ie.go(Ie.conversationPath(R))),y().catch(R=>console.error("[serviceWorker]",R)),Zo("socket",a),Zo("themeManager",u),Zo("user",c),vt.on("click",R=>R.path&&Ie.go(R.path)),a.on("update",E),tt.load().then(()=>c.load());function g(R,x){if(!document)return;const le=Ve("organization_name"),ge=x.notifications.notifications?"("+x.notifications.notifications+") ":"";document.title=le==="Convos"?tt.l("%1 - Convos",ge+tt.l(R)):tt.l("%1 - Convos for %2",ge+tt.l(R),le)}async function y(){if(!navigator.serviceWorker)return{};const R=await navigator.serviceWorker.register(Ie.urlFor("/sw.js")),x=await fetch(Ie.urlFor("/sw/info")),le=x.status==200&&await x.json()||{mode:"",version:"0.00"};if(le.version==Ve("version"))return{};console.info("[serviceWorker.update]",Ve("version"),le),R.update()}async function $(R,x){x.email&&tt.emojis.load(),si[x.email?"add":"remove"]("notify"),await vo();const le=x.is(["loading","pending"])||document.querySelector(".cms-main")?"cms":"app";if(document.body.className=document.body.className.replace(/for-\w+/,"for-"+le),p!==R.path&&(p=R.path,fu(Nt,i="",i)),R.pathParts.length===0){const ge=x.email?x.lastUrl||"/chat":"/login";R.go(ge,{replace:!0})}else x.email&&x.update({lastUrl:location.href})}function E(R){if(R.is("open"))return h.close&&h.close();const x=navigator.onLine===!1?tt.l("You seem to be offline."):R.error?tt.l(R.error):R.is("connecting")?tt.l("Connecting to Convos..."):tt.l("Connection to Convos is %1.",tt.l(R.readyStateHuman));h.body!==x&&(h.close&&h.close(),h=vt.showInApp(x,{closeAfter:-1,title:tt.l("Status")}))}const T=()=>c.email&&a.open();function K(){n(0,d=Ir.innerWidth)}function L(R){m=R,n(1,m)}function A(R){m=R,n(1,m)}function I(R){m=R,n(1,m)}function z(R){m=R,n(1,m)}function F(R){m=R,n(1,m)}function V(R){m=R,n(1,m)}function j(R){m=R,n(1,m)}function B(R){m=R,n(1,m)}function H(R){m=R,n(1,m)}function J(R){m=R,n(1,m)}function D(R){m=R,n(1,m)}function P(R){m=R,n(1,m)}function N(R){m=R,n(1,m)}function Z(R){m=R,n(1,m)}const Y=()=>Nt.set("");function U(R){m=R,n(1,m)}return t.$$.update=()=>{t.$$.dirty[0]&512&&si[l.compactDisplay?"add":"remove"]("compact-display"),t.$$.dirty[0]&24&&$(s,r),t.$$.dirty[0]&10&&g(m,r),t.$$.dirty[0]&1&&bn.setWidth(d),t.$$.dirty[0]&4&&c.update({unreadIncludePrivateMessages:o.isSingleColumn})},[d,m,o,r,s,i,a,u,c,l,T,K,L,A,I,z,F,V,j,B,H,J,D,P,N,Z,Y,U]}class ry extends Xe{constructor(e){super(),Qe(this,e,oy,iy,Ze,{},null,[-1,-1])}}class sy extends Lt{constructor(e){super(),this.prop("ro","domain",e.domain||"meet.jit.si"),this.prop("ro","email",e.email||""),this.prop("rw","nick",e.nick||""),this.prop("rw","roomName",e.roomName||"convos-default"),this.prop("persist","disableAudioLevels",!0,{key:"video:disableAudioLevels"}),this.prop("persist","disableH264",!0,{key:"video:disableH264"}),this.prop("persist","resolution",720,{key:"video:resolution"})}async render(e){try{const n=[].slice.call(e.children,0);this.targetEl=e,this.jitsi=await this._load(),n.forEach(i=>i.remove()),e.className=e.className.replace(/cms-main/,"video-chat--wrapper"),document.querySelector(".cms-navbar").classList.add("is-full-width")}catch(n){console.error("[Jitsi]",{err:n});const i=document.querySelector(".video-error");i.querySelector("span").textContent=String(n).substring(0,350),i.classList.remove("hidden"),wt(document,".cms-main .fa-spin",o=>o.parentNode.classList.add("hidden"))}return this.jitsi?(document.addEventListener("keydown",n=>{n.code==="KeyC"&&this.jitsi.executeCommand("toggleChat"),n.code==="KeyD"&&this.jitsi.executeCommand("toggleShareScreen"),n.code==="KeyF"&&this.jitsi.executeCommand("toggleFilmStrip"),n.code==="KeyM"&&this.jitsi.executeCommand("toggleAudio"),n.code==="KeyR"&&this.jitsi.executeCommand("toggleRaiseHand"),n.code==="KeyV"&&this.jitsi.executeCommand("toggleVideo"),n.code==="KeyW"&&this.jitsi.executeCommand("toggleTileView"),n.code==="Space"&&this.jitsi.isAudioMuted().then(i=>i&&this.jitsi.executeCommand("toggleAudio"))}),document.addEventListener("keyup",n=>{n.code==="Space"&&this.jitsi.isAudioMuted().then(i=>i||this.jitsi.executeCommand("toggleAudio"))}),this):this}_configOverwrite(){return{disableAudioLevels:this.disableAudioLevels,disableH264:this.disableH264,enableWelcomePage:!this.nick,prejoinPageEnabled:!this.nick,minParticipants:1,resolution:this.resolution,analytics:{googleAnalyticsTrackingId:"",scriptURLs:[]},e2eping:{analyticsInterval:-1,pingInterval:-1}}}_interfaceConfigOverwrite(){return{DEFAULT_BACKGROUND:window.getComputedStyle(document.querySelector(".cms-navbar--wrapper")).backgroundColor||"#222222",DISABLE_FOCUS_INDICATOR:!0,DISABLE_DOMINANT_SPEAKER_INDICATOR:!0,DISABLE_VIDEO_BACKGROUND:!0,INITIAL_TOOLBAR_TIMEOUT:1e3,SHOW_CHROME_EXTENSION_BANNER:!0,TOOLBAR_ALWAYS_VISIBLE:!1,TOOLBAR_BUTTONS:["camera","chat","closedcaptions","desktop","etherpad","fodeviceselection","fullscreen","hangup","help","microphone","mute-everyone","profile","raisehand","security","settings","sharedvideo","shortcuts","stats","tileview"],TOOLBAR_TIMEOUT:2e3,VERTICAL_FILMSTRIP:!1,VIDEO_QUALITY_LABEL_DISABLED:!0}}async _load(){return await Lf("https://"+this.domain+"/external_api.js"),new JitsiMeetExternalAPI(this.domain,this._options())}_options(){const e={};return this.email&&(e.email=this.email),this.nick&&(e.displayName=this.nick),{configOverwrite:this._configOverwrite(),interfaceConfigOverwrite:this._interfaceConfigOverwrite(),parentNode:this.targetEl,roomName:this.roomName,userInfo:e,height:"100%",width:"100%"}}}wt(document,"#hamburger_checkbox_toggle",t=>{t.checked=!1});wt(document,".js-close-window",t=>{t.addEventListener("click",e=>{window.opener&&(e.preventDefault(),setTimeout(()=>window.close(),1),window.opener.focus())})});if(document.querySelector('meta[name="convos:start_app"][content="chat"]'))document.querySelector(".footer--wrapper").remove(),document.querySelector(".cms-main").remove(),new ry({target:document.body});else if(document.querySelector('meta[name="convos:start_app"][content="jitsi"]')){document.querySelector(".footer--wrapper").remove();const t=document.querySelector(".cms-main");new sy(t.dataset).render(t)}else document.addEventListener("DOMContentLoaded",function(){wt(document,"pre",t=>bt.lineNumbersBlock(t))});document.addEventListener("keydown",function(t){t.keyCode==27&&(wt(document,".fullscreen",e=>e.click()),su()),t.keyCode==13&&t.shiftKey&&(t.preventDefault(),su("toggle"))});function su(t){if("ontouchstart"in window)return;const e=r=>{for(let s=0;s<r.length;s++){const l=document.querySelector(r[s]);if(l&&l.tabIndex!==-1)return l}return null},n=t&&e(["input.is-primary-menu-item","a.is-primary-menu-item"]),i=document.activeElement;if(jr(i,["a","input","textarea"])&&n&&i!==n)return n.focus();const o=e([".is-primary-input",'main input[type="text"], article input[type="text"]',"main a, article a"]);if(o)return o.focus();if(n)return n.focus()}
