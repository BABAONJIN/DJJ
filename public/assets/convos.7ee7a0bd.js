var Lu=Object.defineProperty;var Iu=(t,e,n)=>e in t?Lu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var pn=(t,e,n)=>(Iu(t,typeof e!="symbol"?e+"":e,n),n);const ri={add(t){document.body.classList.remove("no-"+t),document.body.classList.add("has-"+t)},has(t){return document.body.classList.contains("has-"+t)},remove(t){document.body.classList.add("no-"+t),document.body.classList.remove("has-"+t)}};Xa("mousemove","mouse");Xa("touchstart","touch");ri.add("js");function Xa(t,e){const n=()=>{t!=="mousemove"&&ri.add(e),t==="mousemove"&&!ri.has("touch")&&ri.add(e),document.removeEventListener(t,n)};document.addEventListener(t,n)}function Oe(){}const xa=t=>t;function Pu(t,e){for(const n in e)t[n]=e[n];return t}function Du(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function ec(t){return t()}function _s(){return Object.create(null)}function ut(t){t.forEach(ec)}function Un(t){return typeof t=="function"}function Ze(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Uu(t){return Object.keys(t).length===0}function _t(t,...e){if(t==null){for(const i of e)i(void 0);return Oe}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Bu(t){let e;return _t(t,n=>e=n)(),e}function we(t,e,n){t.$$.on_destroy.push(_t(e,n))}function Gt(t,e,n,i){if(t){const o=tc(t,e,n,i);return t[0](o)}}function tc(t,e,n,i){return t[1]&&i?Pu(n.ctx.slice(),t[1](i(e))):n.ctx}function Kt(t,e,n,i){if(t[2]&&i){const o=t[2](i(n));if(e.dirty===void 0)return o;if(typeof o=="object"){const r=[],s=Math.max(e.dirty.length,o.length);for(let l=0;l<s;l+=1)r[l]=e.dirty[l]|o[l];return r}return e.dirty|o}return e.dirty}function Yt(t,e,n,i,o,r){if(o){const s=tc(e,n,i,r);t.p(s,o)}}function Vt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function ho(t,e,n){return t.set(n),e}function Tr(t){return t&&Un(t.destroy)?t.destroy:Oe}function ms(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const nc=typeof window<"u";let Fu=nc?()=>window.performance.now():()=>Date.now(),Mr=nc?t=>requestAnimationFrame(t):Oe;const si=new Set;function ic(t){si.forEach(e=>{e.c(t)||(si.delete(e),e.f())}),si.size!==0&&Mr(ic)}function ju(t){let e;return si.size===0&&Mr(ic),{promise:new Promise(n=>{si.add(e={c:t,f:n})}),abort(){si.delete(e)}}}const zu=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function u(t,e){t.appendChild(e)}function oc(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Hu(t){const e=g("style");return e.textContent="/* empty */",qu(oc(t),e),e.sheet}function qu(t,e){return u(t.head||t,e),e.sheet}function w(t,e,n){t.insertBefore(e,n||null)}function $(t){t.parentNode&&t.parentNode.removeChild(t)}function yt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function g(t){return document.createElement(t)}function Wu(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function O(t){return document.createTextNode(t)}function C(){return O(" ")}function pt(){return O("")}function Ce(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function st(t){return function(e){return e.preventDefault(),t.call(this,e)}}function k(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Gu(t){return Array.from(t.childNodes)}function R(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ot(t,e){t.value=e??""}function Ut(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}let no;function Ku(){if(no===void 0){no=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{no=!0}}return no}function Yu(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const i=g("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const o=Ku();let r;return o?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=Ce(window,"message",s=>{s.source===i.contentWindow&&e()})):(i.src="about:blank",i.onload=()=>{r=Ce(i.contentWindow,"resize",e),e()}),u(t,i),()=>{(o||r&&i.contentWindow)&&r(),$(i)}}function Ye(t,e,n){t.classList.toggle(e,!!n)}function rc(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}class Rt{constructor(e=!1){pn(this,"is_svg",!1);pn(this,"e");pn(this,"n");pn(this,"t");pn(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,i=null){this.e||(this.is_svg?this.e=Wu(n.nodeName):this.e=g(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)w(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach($)}}const _o=new Map;let mo=0;function Vu(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Zu(t,e){const n={stylesheet:Hu(e),rules:{}};return _o.set(t,n),n}function gs(t,e,n,i,o,r,s,l=0){const a=16.666/i;let c=`{
`;for(let S=0;S<=1;S+=a){const b=e+(n-e)*r(S);c+=S*100+`%{${s(b,1-b)}}
`}const f=c+`100% {${s(n,1-n)}}
}`,d=`__svelte_${Vu(f)}_${l}`,p=oc(t),{stylesheet:h,rules:_}=_o.get(p)||Zu(p,t);_[d]||(_[d]=!0,h.insertRule(`@keyframes ${d} ${f}`,h.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${d} ${i}ms linear ${o}ms 1 both`,mo+=1,d}function Ju(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?r=>r.indexOf(e)<0:r=>r.indexOf("__svelte")===-1),o=n.length-i.length;o&&(t.style.animation=i.join(", "),mo-=o,mo||Qu())}function Qu(){Mr(()=>{mo||(_o.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&$(e)}),_o.clear())})}let Pi;function en(t){Pi=t}function hi(){if(!Pi)throw new Error("Function called outside component initialization");return Pi}function zt(t){hi().$$.on_mount.push(t)}function Rr(t){hi().$$.on_destroy.push(t)}function Xu(){const t=hi();return(e,n,{cancelable:i=!1}={})=>{const o=t.$$.callbacks[e];if(o){const r=rc(e,n,{cancelable:i});return o.slice().forEach(s=>{s.call(t,r)}),!r.defaultPrevented}return!0}}function Vo(t,e){return hi().$$.context.set(t,e),e}function mt(t){return hi().$$.context.get(t)}function _i(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const xn=[],de=[];let li=[];const fr=[],sc=Promise.resolve();let pr=!1;function lc(){pr||(pr=!0,sc.then(Lr))}function Di(){return lc(),sc}function at(t){li.push(t)}function me(t){fr.push(t)}const Zo=new Set;let Yn=0;function Lr(){if(Yn!==0)return;const t=Pi;do{try{for(;Yn<xn.length;){const e=xn[Yn];Yn++,en(e),xu(e.$$)}}catch(e){throw xn.length=0,Yn=0,e}for(en(null),xn.length=0,Yn=0;de.length;)de.pop()();for(let e=0;e<li.length;e+=1){const n=li[e];Zo.has(n)||(Zo.add(n),n())}li.length=0}while(xn.length);for(;fr.length;)fr.pop()();pr=!1,Zo.clear(),en(t)}function xu(t){if(t.fragment!==null){t.update(),ut(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(at)}}function ef(t){const e=[],n=[];li.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),li=e}let Oi;function tf(){return Oi||(Oi=Promise.resolve(),Oi.then(()=>{Oi=null})),Oi}function Jo(t,e,n){t.dispatchEvent(rc(`${e?"intro":"outro"}${n}`))}const co=new Set;let tn;function ye(){tn={r:0,c:[],p:tn}}function Se(){tn.r||ut(tn.c),tn=tn.p}function v(t,e){t&&t.i&&(co.delete(t),t.i(e))}function y(t,e,n,i){if(t&&t.o){if(co.has(t))return;co.add(t),tn.c.push(()=>{co.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const nf={duration:0};function et(t,e,n,i){let r=e(t,n,{direction:"both"}),s=i?0:1,l=null,a=null,c=null,f;function d(){c&&Ju(t,c)}function p(_,m){const S=_.b-s;return m*=Math.abs(S),{a:s,b:_.b,d:S,duration:m,start:_.start,end:_.start+m,group:_.group}}function h(_){const{delay:m=0,duration:S=300,easing:b=xa,tick:E=Oe,css:N}=r||nf,j={start:Fu()+m,b:_};_||(j.group=tn,tn.r+=1),"inert"in t&&(_?f!==void 0&&(t.inert=f):(f=t.inert,t.inert=!0)),l||a?a=j:(N&&(d(),c=gs(t,s,_,S,m,b,N)),_&&E(0,1),l=p(j,S),at(()=>Jo(t,_,"start")),ju(I=>{if(a&&I>a.start&&(l=p(a,S),a=null,Jo(t,l.b,"start"),N&&(d(),c=gs(t,s,l.b,l.duration,0,b,r.css))),l){if(I>=l.end)E(s=l.b,1-s),Jo(t,l.b,"end"),a||(l.b?d():--l.group.r||ut(l.group.c)),l=null;else if(I>=l.start){const A=I-l.start;s=l.a+l.d*b(A/l.duration),E(s,1-s)}}return!!(l||a)}))}return{run(_){Un(r)?tf().then(()=>{r=r({direction:_?"in":"out"}),h(_)}):h(_)},end(){d(),l=a=null}}}function dr(t,e){const n=e.token={};function i(o,r,s,l){if(e.token!==n)return;e.resolved=l;let a=e.ctx;s!==void 0&&(a=a.slice(),a[s]=l);const c=o&&(e.current=o)(a);let f=!1;e.block&&(e.blocks?e.blocks.forEach((d,p)=>{p!==r&&d&&(ye(),y(d,1,1,()=>{e.blocks[p]===d&&(e.blocks[p]=null)}),Se())}):e.block.d(1),c.c(),v(c,1),c.m(e.mount(),e.anchor),f=!0),e.block=c,e.blocks&&(e.blocks[r]=c),f&&Lr()}if(Du(t)){const o=hi();if(t.then(r=>{en(o),i(e.then,1,e.value,r),en(null)},r=>{if(en(o),i(e.catch,2,e.error,r),en(null),!e.hasCatch)throw r}),e.current!==e.pending)return i(e.pending,0),!0}else{if(e.current!==e.then)return i(e.then,1,e.value,t),!0;e.resolved=t}}function ac(t,e,n){const i=e.slice(),{resolved:o}=t;t.current===t.then&&(i[t.value]=o),t.current===t.catch&&(i[t.error]=o),t.block.p(i,n)}function xe(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ge(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function q(t){t&&t.c()}function z(t,e,n){const{fragment:i,after_update:o}=t.$$;i&&i.m(e,n),at(()=>{const r=t.$$.on_mount.map(ec).filter(Un);t.$$.on_destroy?t.$$.on_destroy.push(...r):ut(r),t.$$.on_mount=[]}),o.forEach(at)}function H(t,e){const n=t.$$;n.fragment!==null&&(ef(n.after_update),ut(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function of(t,e){t.$$.dirty[0]===-1&&(xn.push(t),lc(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Qe(t,e,n,i,o,r,s=null,l=[-1]){const a=Pi;en(t);const c=t.$$={fragment:null,ctx:[],props:r,update:Oe,not_equal:o,bound:_s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:_s(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};s&&s(c.root);let f=!1;if(c.ctx=n?n(t,e.props||{},(d,p,...h)=>{const _=h.length?h[0]:p;return c.ctx&&o(c.ctx[d],c.ctx[d]=_)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](_),f&&of(t,d)),p}):[],c.update(),f=!0,ut(c.before_update),c.fragment=i?i(c.ctx):!1,e.target){if(e.hydrate){const d=Gu(e.target);c.fragment&&c.fragment.l(d),d.forEach($)}else c.fragment&&c.fragment.c();e.intro&&v(t.$$.fragment),z(t,e.target,e.anchor),Lr()}en(a)}class Xe{constructor(){pn(this,"$$");pn(this,"$$set")}$destroy(){H(this,1),this.$destroy=Oe}$on(e,n){if(!Un(n))return Oe;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(e){this.$$set&&!Uu(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const rf="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(rf);function sf(t){let e,n,i,o;return{c(){e=g("i"),k(e,"class",n=t[4](t[3],t[2],t[0])),k(e,"style",i=vs(t[3],t[1])),e.hidden=o=!t[3]},m(r,s){w(r,e,s)},p(r,[s]){s&13&&n!==(n=r[4](r[3],r[2],r[0]))&&k(e,"class",n),s&10&&i!==(i=vs(r[3],r[1]))&&k(e,"style",i),s&8&&o!==(o=!r[3])&&(e.hidden=o)},i:Oe,o:Oe,d(r){r&&$(e)}}}const lf={brand:"fab",regular:"far",solid:"fas"},hr={batman:"https://www.gravatar.com/avatar/ab1839667863f31e359d98364cfdef61",marcusr:"https://www.gravatar.com/avatar/6c056546d802b1a9ac186ab63f9fb632"},bs=["fas fa-anchor","fas fa-atom","fas fa-award","fas fa-balance-scale","fas fa-baseball-ball","fas fa-basketball-ball","fas fa-bicycle","fas fa-bolt","fas fa-book-reader","fas fa-candy-cane","fas fa-carrot","fas fa-cat","fas fa-chess-knight","fas fa-child","fas fa-coffee","fas fa-cookie-bite","fas fa-crow","fas fa-dice","fas fa-dog","fas fa-dove","fas fa-feather","fas fa-fish","fas fa-gem","fas fa-ghost","fas fa-hard-hat","fas fa-hat-cowboy","fas fa-hat-wizard","fas fa-hiking","fas fa-horse-head","fas fa-horse","fas fa-id-badge","fas fa-igloo","fas fa-mask","fas fa-meteor","fas fa-paint-brush","fas fa-paw","fas fa-pepper-hot","fas fa-pizza-slice","fas fa-portrait","fas fa-puzzle-piece","fas fa-rainbow","fas fa-robot","fas fa-rocket","fas fa-running","fas fa-seedling","fas fa-skating","fas fa-skiing","fas fa-smile","fas fa-snowboarding","fas fa-snowflake","fas fa-snowman","fas fa-swimmer","fas fa-umbrella","fas fa-user-astronaut","fas fa-user-graduate","fas fa-user-ninja","fas fa-user-secret","fas fa-walking","fas fa-yin-yang"];function vs(t,e){const n=[];let i="color:";const o=t.match(/^pick:(.+)$/);return o&&hr[o[1]]&&(i="background-color:",n.push('background-image:url("'+hr[o[1]]+'")')),e&&n.push(i+e),n.join(";")}function af(t){let e=0;for(let n=0;n<t.length;n++)e=t.charCodeAt(n)+((e<<5)-e),e=e&e;return e=Math.abs(e),bs[e%bs.length]}function cf(t,e,n){let{class:i=""}=e,{animation:o=""}=e,{color:r=""}=e,{family:s=""}=e,{name:l}=e;function a(c,f,d){const p=[],h=c.match(/^pick:(.+)$/);if(h){if(h[1]==="Convos")return"fas fa-info-circle";if(hr[h[1]])return"fas fa-contributor for-"+h[1].toLowerCase();p.push(af(h[1]))}else p.push(lf[f]||"fas"),p.push("fa-"+c);return d&&p.push(d.split(" ").map(_=>"fa-"+_)),i&&p.push(i.split(" ")),p.join(" ")}return t.$$set=c=>{"class"in c&&n(5,i=c.class),"animation"in c&&n(0,o=c.animation),"color"in c&&n(1,r=c.color),"family"in c&&n(2,s=c.family),"name"in c&&n(3,l=c.name)},[o,r,s,l,a,i]}class he extends Xe{constructor(e){super(),Qe(this,e,cf,sf,Ze,{class:5,animation:0,color:1,family:2,name:3})}}const Vn=[];function uf(t,e){return{subscribe:cc(t,e).subscribe}}function cc(t,e=Oe){let n;const i=new Set;function o(l){if(Ze(t,l)&&(t=l,n)){const a=!Vn.length;for(const c of i)c[1](),Vn.push(c,t);if(a){for(let c=0;c<Vn.length;c+=2)Vn[c][0](Vn[c+1]);Vn.length=0}}}function r(l){o(l(t))}function s(l,a=Oe){const c=[l,a];return i.add(c),i.size===1&&(n=e(o,r)||Oe),l(t),()=>{i.delete(c),i.size===0&&n&&(n(),n=null)}}return{set:o,update:r,subscribe:s}}function uc(t,e,n){const i=!Array.isArray(t),o=i?[t]:t;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=e.length<2;return uf(n,(s,l)=>{let a=!1;const c=[];let f=0,d=Oe;const p=()=>{if(f)return;d();const _=e(i?c[0]:c,s,l);r?s(_):d=Un(_)?_:Oe},h=o.map((_,m)=>_t(_,S=>{c[m]=S,f&=~(1<<m),a&&p()},()=>{f|=1<<m}));return a=!0,p(),function(){ut(h),d(),a=!1}})}function Oo(t,e){const n=cc(t);n.get=()=>Bu(n);for(let i in e)Object.hasOwn(e,i)&&(n[i]=e[i].bind(n));return n}const wt=Oo("",{toggle(t){t.preventDefault();const e=t.target.closest("a"),n=e&&e.href.replace(/.*#/,"");this.set(this.get()===n?"":n)}}),Pn=Oo({hasLeftColumn:!1,hasRightColumn:!1,isSingleColumn:!0,width:0},{setWidth(t){const e=t>=800,n=t>=1200,i=!(e||n);this.set({hasLeftColumn:e,hasRightColumn:n,isSingleColumn:i,width:t})}});function $s(t){let e,n,i,o,r,s=t[2].notifications+"",l,a,c,f,d;return n=new he({props:{name:"bars"}}),i=new he({props:{name:"times"}}),{c(){e=g("a"),q(n.$$.fragment),q(i.$$.fragment),o=C(),r=g("small"),l=O(s),k(r,"class","badge is-important"),r.hidden=a=!t[2].notifications,k(e,"href","#nav"),k(e,"class","btn-hallow can-toggle"),Ye(e,"is-active",t[1]==="nav")},m(p,h){w(p,e,h),z(n,e,null),z(i,e,null),u(e,o),u(e,r),u(r,l),c=!0,f||(d=Ce(e,"click",wt.toggle),f=!0)},p(p,h){(!c||h&4)&&s!==(s=p[2].notifications+"")&&R(l,s),(!c||h&4&&a!==(a=!p[2].notifications))&&(r.hidden=a),(!c||h&2)&&Ye(e,"is-active",p[1]==="nav")},i(p){c||(v(n.$$.fragment,p),v(i.$$.fragment,p),c=!0)},o(p){y(n.$$.fragment,p),y(i.$$.fragment,p),c=!1},d(p){p&&$(e),H(n),H(i),f=!1,d()}}}function ff(t){let e,n,i;const o=t[5].default,r=Gt(o,t,t[4],null);let s=!t[0].hasLeftColumn&&$s(t);return{c(){e=g("header"),r&&r.c(),n=C(),s&&s.c(),k(e,"class","chat-header")},m(l,a){w(l,e,a),r&&r.m(e,null),u(e,n),s&&s.m(e,null),i=!0},p(l,[a]){r&&r.p&&(!i||a&16)&&Yt(r,o,l,l[4],i?Kt(o,l[4],a,null):Vt(l[4]),null),l[0].hasLeftColumn?s&&(ye(),y(s,1,1,()=>{s=null}),Se()):s?(s.p(l,a),a&1&&v(s,1)):(s=$s(l),s.c(),v(s,1),s.m(e,null))},i(l){i||(v(r,l),v(s),i=!0)},o(l){y(r,l),y(s),i=!1},d(l){l&&$(e),r&&r.d(l),s&&s.d()}}}function pf(t,e,n){let i,o,r;we(t,Pn,c=>n(0,i=c)),we(t,wt,c=>n(1,o=c));let{$$slots:s={},$$scope:l}=e;const a=mt("user").notifications;return we(t,a,c=>n(2,r=c)),t.$$set=c=>{"$$scope"in c&&n(4,l=c.$$scope)},[i,o,r,a,l,s]}class Ft extends Xe{constructor(e){super(),Qe(this,e,pf,ff,Ze,{})}}/*! js-cookie v3.0.5 | MIT */function io(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}var df={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function _r(t,e){function n(o,r,s){if(!(typeof document>"u")){s=io({},e,s),typeof s.expires=="number"&&(s.expires=new Date(Date.now()+s.expires*864e5)),s.expires&&(s.expires=s.expires.toUTCString()),o=encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var a in s)s[a]&&(l+="; "+a,s[a]!==!0&&(l+="="+s[a].split(";")[0]));return document.cookie=o+"="+t.write(r,o)+l}}function i(o){if(!(typeof document>"u"||arguments.length&&!o)){for(var r=document.cookie?document.cookie.split("; "):[],s={},l=0;l<r.length;l++){var a=r[l].split("="),c=a.slice(1).join("=");try{var f=decodeURIComponent(a[0]);if(s[f]=t.read(c,f),o===f)break}catch{}}return o?s[o]:s}}return Object.create({set:n,get:i,remove:function(o,r){n(o,"",io({},r,{expires:-1}))},withAttributes:function(o){return _r(this.converter,io({},this.attributes,o))},withConverter:function(o){return _r(io({},this.converter,o),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var ws=_r(df,{path:"/"});const hf=typeof process>"u"||typeof process.env!="object"?"info":{}.LOG_LEVEL||"quiet",Qo=["trace","debug","info","warn","error","quiet"],mr={},Zn={},ks=()=>{};mr.root=new fc({name:"root"});function _f(t){return Zn.root===void 0&&(Object.entries(JSON.parse(localStorage.getItem("logger:nameToLevel")||"{}")).forEach(([e,n])=>{Zn[e]=n||"debug"}),((location.href.match(/_debug=([a-z,:]+)/)||[]).pop()||"").split(",").forEach(e=>{const[n,i]=e.split(":");Zn[n]=i||"debug"}),localStorage.setItem("logger:nameToLevel",JSON.stringify(Zn))),Zn[t]||Zn.root||hf}function fc({name:t}){this.name=t,this.isLevel=e=>{const n=Qo.indexOf(e)||e||e.length;return this.numLevel>=n},this.setLevel=e=>{let n=Qo.indexOf(e);return n===-1&&(n=2),this.numLevel=n,Qo.forEach((i,o)=>{const r=i==="trace"||i==="debug"?"log":i,s=!console||o<n?ks:console[r]||console.log||ks;this[i]=s.bind(this,"["+this.name+"]")}),this},this.setLevel(_f(t))}function mi(t="root"){return mr[t]||(mr[t]=new fc({name:t}))}const mf=mi("util"),gf=.618033988749,gr=1e3,br=gr*1e3,ys=br*1e3;function vr(t,e){if(e&&!e.match(/^[+-]\w/)&&(e="+"+e),!e)return{};const n={};let i=!0;for(const o of e)o==="+"?i=!0:o==="-"?i=!1:n[t[o]||o]=i;return n}function $r(t,e){for(;t;){if(e.tagName?t===e:t.matches&&t.matches(e))return t;t=t.parentNode}return null}function pc(t){const n=dc("textarea",{style:{opacity:0,position:"absolute"},value:t.textContent||t.value});document.body.appendChild(n);try{n.focus(),n.select(),document.execCommand("copy")}catch(i){n.value="",mf.error("copyToClipboard() failed:",i)}return document.body.removeChild(n),n.value}function dc(t,e){const n=document.createElement(t);for(let i in e)Object.hasOwn(e,i)&&(n[i]=e[i]);return n}function bf(t,e,n){let i=t&&t.querySelector("."+e.split(" ").join("."));return i||(i=document.createElement("div"),i.className=e,t&&t.appendChild(i),n&&n(i),i)}function Ir(t,e="message"){const n=t.errors||t;return n&&n[0]?n[0][e]||"Unknown error.":""}function vf(t,e=document){const n=[...t.childNodes],i=[];let o=0;for(;o<n.length;)n[o].nodeType===Node.ELEMENT_NODE?(i.push([o,n[o]]),o++):n.splice(o,1);if(!n.length)return[];const r=e.scrollTop;for(;i.length>1;){const c=Math.floor(i.length/2);i[c][1].offsetTop<=r?i.splice(0,c):i.splice(c)}i.length||i.push([0,n[0]]);const s=e.offsetHeight,l=i[0][0];let a=l;for(;a<n.length&&!(n[a].offsetTop>r+s);)a++;return n.slice(l,a).filter(c=>!c.getAttribute("aria-hidden"))}function $f(t=0,e=.5,n=.95){var i=Math.floor(t*6),o=t*6-i,r=n*(1-e),s=n*(1-o*e),l=n*(1-(1-o)*e),a=255,c=255,f=255;switch(i){case 0:a=n,c=l,f=r;break;case 1:a=s,c=n,f=r;break;case 2:a=r,c=n,f=l;break;case 3:a=r,c=s,f=n;break;case 4:a=l,c=r,f=n;break;case 5:a=n,c=r,f=s;break}return[Math.floor(a*255),Math.floor(c*255),Math.floor(f*255)]}function ni(t,e){const n=t<gr?[t,""]:t<br?[t/gr,"k"]:t<ys?[t/br,"M"]:[t/ys,"G"],i=String(Math.round(n[0]*10)/10);return(i.match(/\./)?i:i+".0")+n[1]+(e||"")}const Ie={array:t=>Array.isArray(t),defined:t=>!Ie.undefined(t),false:t=>!Ie.true(t),function:t=>typeof t=="function",number:t=>typeof t=="number",object:t=>typeof t=="object"&&t!==null,string:t=>typeof t=="string",stringable:t=>typeof t=="number"||typeof t=="string",true:t=>Ie.string(t)?!!t.length&&t!=="0":!!t,undefined:t=>t===null||typeof t>"u"};function wf(t){const e=document,n=t.replace(/\W/g,"_");if(e.getElementById(n))return;const i=e.createElement("script");return[i.id,i.src]=[n,t],e.getElementsByTagName("head")[0].appendChild(i),new Promise((o,r)=>{i.addEventListener("error",r),i.addEventListener("load",o)})}function Nt(t,e=" "){return t.replace(/\s/g,e)}function vt(t,e,n){const i=e===":children"?t.children:t.querySelectorAll(e);if(!n)return[].slice.call(i,0);if(Array.isArray(n))return[].forEach.call(i,r=>r.addEventListener(n[0],n[1]));const o=[];for(let r=0;r<i.length;r++)o.push(n(i[r],r));return o}function kf(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Ve(t,e){const n=i=>document.querySelector('meta[name="convos:'+i+'"]')||document.querySelector('meta[name="'+i+'"]');if(arguments.length===1){t==="organization_name"&&(t="contactorganization"),t==="organization_url"&&(t="contactnetworkaddress");const i=n(t);if(!i)throw'Cannot get settings for "'+t+'".';const o={no:!1,yes:!0};return t==="contact"?atob(i.content||""):Object.hasOwn(o,i.content)?o[i.content]:i.content}t==="organization_name"&&(t="contactorganization"),t==="organization_url"&&(t="contactnetworkaddress"),t==="contact"&&(e=btoa(e)),typeof e=="boolean"&&(e=e?"yes":"no"),n(t).content=e}function yf(t,e){t&&t.preventDefault&&t.preventDefault();const n=bf(document.body,"fullscreen",i=>{i.addEventListener("click",o=>o.target===i&&i.hide()),i.hide=()=>n.classList.add("hidden")});return kf(n),e?(n.classList.remove("hidden"),n.appendChild(e.cloneNode(!0)),n):n.hide()}function Pr(t){return(Ie.string(t)?t:"").split(/[.,\s]+/).map(e=>e.trim()).filter(e=>e.length)}function go(t,e=100){if(t.length===0)return"#000";let n=0;for(let i=0;i<t.length;i++)n=t.charCodeAt(i)+((n<<5)-n),n=n&n;return n=Math.abs(n%e/e),"#"+$f((n+gf)%1,.4,.7).map(i=>i.toString(16)).join("")}function Dr(t,e){return Ie.array(e)?e.find(n=>Dr(t,n))||!1:t&&t.tagName&&t.tagName.toLowerCase()===e||!1}function Sf(t,e=!0){return new Promise((n,i)=>{setTimeout(()=>{typeof e=="function"?n(e()):typeof e=="string"?i(e):n(e)},t)})}function No(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){let e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}const Xo=mi("reactive");class It{constructor(){this.cookieName="convos_js",this._on={},this._props={}}emit(e,...n){const i=this._on[e];for(let o=0;o<(i||[]).length;o++)i[o][0](...n);return this}on(e,n){const i=n?null:new Promise(l=>{n=l}),o=this._on[e]||(this._on[e]=[]),r=[n];o.push(r);const s=()=>{const l=o.indexOf(r);l!==-1&&o.splice(l,1)};return i?i.finally(s):s}prop(e,n,i,o={}){const r={...o,defaultValue:i,name:n,type:e,value:i};switch(this._props[n]=r,r.updateable=["cookie","persist","rw"].indexOf(e)!==-1,e){case"cookie":return this._cookieProp(r);case"persist":return this._localStorageProp(r);case"ro":return this._readOnlyProp(r);case"rw":return this._updateableProp(r)}throw"["+this.constructor.name+'] Unknown prop type "'+e+'" for prop "'+n+'".'}subscribe(e){return e(this),this.on("update",e)}update(e){return Object.keys(e).forEach(n=>{const i=this._props[n];if(!i)return Xo.trace("["+this.constructor.name+'] Unknown prop "'+n+'".');Object.hasOwn(i,"prev")||(i.prev=i.type==="ro"?void 0:i.value),i.updateable&&(i.value=e[n])}),this._updatedTid||(this._updatedTid=setTimeout(this._delayedUpdate.bind(this),1)),this}_cookie(e,n){const i=e.key||e.name,o=document.decodedB64JSONCookies||(document.decodedB64JSONCookies={});if(!o[this.cookieName])try{const l=ws.get(this.cookieName);o[this.cookieName]=JSON.parse(l?atob(l):"{}")}catch(l){Xo.error({[i]:l})}const r=o[this.cookieName]||{};if(arguments.length===1)return r[i];n===e.defaultValue?delete r[i]:r[i]=n;const s=location.href.indexOf("https:")===0;ws.set(this.cookieName,btoa(JSON.stringify(r)),{expires:365,SameSite:"Lax",secure:s})}_cookieProp(e){const n=this._cookie(e);Ie.defined(n)&&(e.value=n),Ie.undefined(n)&&this._cookie(e,e.value),this._updateableProp(e)}_delayedUpdate(){const e={};return Object.keys(this._props).forEach(n=>{const i=this._props[n];if(!Object.hasOwn(i,"prev"))return;const o=i.prev;delete i.prev,i.value!==o&&(i.type==="cookie"&&this._cookie(i,i.value),i.type==="persist"&&this._localStorage(i,i.value),e[n]=i.type!=="ro")}),delete this._updatedTid,Object.keys(e).length&&this.emit("update",this,e),e}_localStorage(e,n){const i="convos:"+(e.key||e.name);if(arguments.length===2)return n===e.defaultValue?localStorage.removeItem(i):localStorage.setItem(i,JSON.stringify(n));try{return Object.hasOwn(localStorage,i)?JSON.parse(localStorage.getItem(i)):void 0}catch(o){Xo.error({[i]:localStorage.getItem(i)},o);return}}_localStorageProp(e){const n=this._localStorage(e);Ie.defined(n)&&(e.value=n),Ie.undefined(n)&&this._localStorage(e,e.value),this._updateableProp(e)}_readOnlyProp(e){if(e.value===void 0)throw"["+this.constructor.name+'] Read-only attribute "'+e.name+'" cannot be undefined';const n=Ie.function(e.value)?e.value:()=>e.value;Object.defineProperty(this,e.name,{get:n})}_updateableProp(e){Object.defineProperty(this,e.name,{get:()=>e.value})}}class Ef extends It{constructor(){super(),this.prop("persist","history",[],{key:"command_history"}),this.prop("rw","conversation",null),this.prop("rw","index",-1)}add(e){if(!e.length)return this;const n=this.history.slice(0,19);return n.unshift(e),this.update({history:n,index:-1})}attach(e){this.inputEl=e}render(e,n){n=this.index+n,n<-1&&(n=-1),n>=this.history.length&&(n=this.history.length-1);const i=this.inputEl.value;return this.inputEl.selectionStart!==i.length||i.length&&i!==this.history[this.index]?!1:(e.preventDefault(),this.update({index:n}),this.inputEl.value=n===-1?"":this.history[n],!0)}update(e){return e.conversation&&e.conversation!==this.conversation&&this.update({index:-1}),super.update(e)}}var oo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Cf(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var o=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:function(){return t[i]}})}),n}var Af=typeof oo=="object"&&oo&&oo.Object===Object&&oo,Of=Af,Nf=Of,Tf=typeof self=="object"&&self&&self.Object===Object&&self,Mf=Nf||Tf||Function("return this")(),hc=Mf,Rf=hc,Lf=function(){return Rf.Date.now()},_c=Lf;const uo=gi(_c);var If=hc,Pf=If.Symbol,Ur=Pf;function Df(t,e){for(var n=-1,i=t==null?0:t.length,o=Array(i);++n<i;)o[n]=e(t[n],n,t);return o}var Uf=Df,Bf=Array.isArray,Ff=Bf,Ss=Ur,mc=Object.prototype,jf=mc.hasOwnProperty,zf=mc.toString,Ni=Ss?Ss.toStringTag:void 0;function Hf(t){var e=jf.call(t,Ni),n=t[Ni];try{t[Ni]=void 0;var i=!0}catch{}var o=zf.call(t);return i&&(e?t[Ni]=n:delete t[Ni]),o}var qf=Hf,Wf=Object.prototype,Gf=Wf.toString;function Kf(t){return Gf.call(t)}var Yf=Kf,Es=Ur,Vf=qf,Zf=Yf,Jf="[object Null]",Qf="[object Undefined]",Cs=Es?Es.toStringTag:void 0;function Xf(t){return t==null?t===void 0?Qf:Jf:Cs&&Cs in Object(t)?Vf(t):Zf(t)}var xf=Xf;function ep(t){return t!=null&&typeof t=="object"}var tp=ep,np=xf,ip=tp,op="[object Symbol]";function rp(t){return typeof t=="symbol"||ip(t)&&np(t)==op}var gc=rp,As=Ur,sp=Uf,lp=Ff,ap=gc,cp=1/0,Os=As?As.prototype:void 0,Ns=Os?Os.toString:void 0;function bc(t){if(typeof t=="string")return t;if(lp(t))return sp(t,bc)+"";if(ap(t))return Ns?Ns.call(t):"";var e=t+"";return e=="0"&&1/t==-cp?"-0":e}var up=bc,fp=up;function pp(t){return t==null?"":fp(t)}var zi=pp,dp=zi,vc=/[\\^$.*+?()[\]{}|]/g,hp=RegExp(vc.source);function _p(t){return t=dp(t),t&&hp.test(t)?t.replace(vc,"\\$&"):t}var mp=_p;const bi=gi(mp),gp=mi("api");class To extends It{constructor(e){super(),this.prop("ro","api",e.api),this.prop("ro","defaultParams",e.defaultParams||{}),this.prop("ro","id",e.id),this.prop("rw","err",null),this.prop("rw","req",{body:null,headers:{}}),this.prop("rw","res",{body:{},headers:[]}),this.prop("rw","status","pending")}error(e){if(e)return this.update({err:Array.isArray(e)?e:[{message:e}],status:"error"});if(!this.err||!this.err.length)return"";const n=this.err[0],i=n.path&&n.path.match(/\w$/)&&n.path.split("/").pop();return i?i+": "+n.message:n.message}perform(e){let n;return this._promise||(this._promise=this.api.spec(this.id).then(i=>{if(!i)throw'Unknown operationId "'+this.id+'".';const o=this._paramsToRequest(i,e||this.defaultParams);return n=new XMLHttpRequest,this.update({req:o,status:"loading"}),this._send(n,o)}).then(()=>{const i={};i.body=n.response?JSON.parse(n.response):{},i.headers=(n.getAllResponseHeaders()||"").trim().split(/[\r\n]+/).filter(r=>r.length).map(r=>r.split(/:\s*/,2)),i.status=String(n.status||"201");let o=null;return String(i.status).match(/^[23]/)||(o=i.body&&i.body.errors?i.body.errors:[{message:n.statusText||"Unknown error."}]),this.update({err:o,res:i,status:o?"error":"success"})}).catch(i=>(i.type&&(i=i.type),gp.error(this.req.url+" FAILED "+i),this.update({res:{body:{errors:[{message:String(i)}]},headers:[],status:"599"},status:"error"}),this.error(Array.isArray(i)?i:'Failed fetching operationId "'+this.id+'": '+i))).finally(()=>{delete this._promise}))}is(e){return this.status===e}reset(){return this.res.body={},this.res.headers={},this.res.status=0,this.update({err:null,status:"pending"})}_extractValue(e,n){return n.schema?Object.keys(n.schema.properties).reduce((i,o)=>(i[o]=e[o],i),{}):e[n.name]}_hasProperty(e,n){return n.in==="body"?!0:n.in==="formData"?e.formData.has(n.name):Object.hasOwn(e,n.name)}_paramsToRequest(e,n){const i=new URL(e.url),o={headers:this.req.headers,method:e.method.toLowerCase(),url:i},r=[];if((e.parameters||[]).forEach(s=>{if(!this._hasProperty(n,s)&&s.required)r.push({message:"Missing property.",path:"/"+s.name});else{if(!this._hasProperty(n,s)&&!s.required)return;if(s.in==="path"){const l=new RegExp("(%7B|\\{)"+bi(s.name)+"(%7D|\\})","i");i.pathname=i.pathname.replace(l,encodeURIComponent(this._extractValue(n,s)))}else if(s.in==="query")i.searchParams.set(s.name,this._extractValue(n,s));else if(s.in==="formData")delete o.headers["Content-Type"],o.body=n.formData;else if(s.in==="body")o.body=this._extractValue(n,s);else if(s.in==="header")o.header[s.name]=this._extractValue(n,s.name);else throw"[Api] Parameter in:"+s.in+" is not supported."}}),r.length)throw r;return o}_send(e,n){return e.timeout=15e3,e.open(n.method.toUpperCase(),n.url),Object.keys(n.headers).forEach(i=>e.setRequestHeader(i,n.headers[i])),n.method==="post"?(e.upload.addEventListener("progress",i=>this.emit("progress",i)),e.send(Ie.object(n.body)&&!Ie.function(n.body.has)?JSON.stringify(n.body):n.body)):e.send(),new Promise(i=>{e.addEventListener("abort",i),e.addEventListener("error",i),e.addEventListener("load",i)})}}class bp{constructor(){this.protocol=location.protocol||"http",this._url="/api"}op(e,n){const i=new To({api:this,id:e,defaultParams:n});return i.req.headers={"Content-Type":"application/json"},i}async spec(e){if(this._ops&&e)return this._ops[e];if(this._spec)return this._spec;const i=await(await fetch(this._url)).json();if(this._ops={},this._spec=i,Object.keys(i.paths).forEach(o=>{Object.keys(i.paths[o]).forEach(r=>{const s=i.paths[o][r],l=s.operationId;l&&(s.method=r.toUpperCase(),s.url=this.protocol+"//"+i.host+i.basePath+o+".json",s.parameters=(s.parameters||[]).map(a=>this._resolveRef(a)),this._ops[l]=s)})}),this._ops&&e)return this._ops[e];if(this._spec)return this._spec}url(e){return this._url=e,this}_resolveRef(e){let n=e;if(e.$ref){const i=e.$ref.replace(/^#\//,"").split("/");for(n=this._spec;i.length;)n=n[i.shift()]}return Ie.object(n)&&Object.keys(n).forEach(i=>{n[i]=this._resolveRef(n[i])}),n}}const nt=new bp;var vp=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),i=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var o=42;e[n]=o;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var r=Object.getOwnPropertySymbols(e);if(r.length!==1||r[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(e,n);if(s.value!==o||s.enumerable!==!0)return!1}return!0},Ts=typeof Symbol<"u"&&Symbol,$p=vp,wp=function(){return typeof Ts!="function"||typeof Symbol!="function"||typeof Ts("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:$p()},Ms={foo:{}},kp=Object,yp=function(){return{__proto__:Ms}.foo===Ms.foo&&!({__proto__:null}instanceof kp)},Sp="Function.prototype.bind called on incompatible ",xo=Array.prototype.slice,Ep=Object.prototype.toString,Cp="[object Function]",Ap=function(e){var n=this;if(typeof n!="function"||Ep.call(n)!==Cp)throw new TypeError(Sp+n);for(var i=xo.call(arguments,1),o,r=function(){if(this instanceof o){var f=n.apply(this,i.concat(xo.call(arguments)));return Object(f)===f?f:this}else return n.apply(e,i.concat(xo.call(arguments)))},s=Math.max(0,n.length-i.length),l=[],a=0;a<s;a++)l.push("$"+a);if(o=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(r),n.prototype){var c=function(){};c.prototype=n.prototype,o.prototype=new c,c.prototype=null}return o},Op=Ap,Br=Function.prototype.bind||Op,Np=Br,Tp=Np.call(Function.call,Object.prototype.hasOwnProperty),Ke,ci=SyntaxError,$c=Function,ai=TypeError,er=function(t){try{return $c('"use strict"; return ('+t+").constructor;")()}catch{}},Rn=Object.getOwnPropertyDescriptor;if(Rn)try{Rn({},"")}catch{Rn=null}var tr=function(){throw new ai},Mp=Rn?function(){try{return arguments.callee,tr}catch{try{return Rn(arguments,"callee").get}catch{return tr}}}():tr,Jn=wp(),Rp=yp(),ht=Object.getPrototypeOf||(Rp?function(t){return t.__proto__}:null),ei={},Lp=typeof Uint8Array>"u"||!ht?Ke:ht(Uint8Array),Ln={"%AggregateError%":typeof AggregateError>"u"?Ke:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ke:ArrayBuffer,"%ArrayIteratorPrototype%":Jn&&ht?ht([][Symbol.iterator]()):Ke,"%AsyncFromSyncIteratorPrototype%":Ke,"%AsyncFunction%":ei,"%AsyncGenerator%":ei,"%AsyncGeneratorFunction%":ei,"%AsyncIteratorPrototype%":ei,"%Atomics%":typeof Atomics>"u"?Ke:Atomics,"%BigInt%":typeof BigInt>"u"?Ke:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ke:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ke:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ke:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Ke:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ke:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ke:FinalizationRegistry,"%Function%":$c,"%GeneratorFunction%":ei,"%Int8Array%":typeof Int8Array>"u"?Ke:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ke:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ke:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Jn&&ht?ht(ht([][Symbol.iterator]())):Ke,"%JSON%":typeof JSON=="object"?JSON:Ke,"%Map%":typeof Map>"u"?Ke:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Jn||!ht?Ke:ht(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ke:Promise,"%Proxy%":typeof Proxy>"u"?Ke:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Ke:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ke:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Jn||!ht?Ke:ht(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ke:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Jn&&ht?ht(""[Symbol.iterator]()):Ke,"%Symbol%":Jn?Symbol:Ke,"%SyntaxError%":ci,"%ThrowTypeError%":Mp,"%TypedArray%":Lp,"%TypeError%":ai,"%Uint8Array%":typeof Uint8Array>"u"?Ke:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ke:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ke:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ke:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Ke:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ke:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ke:WeakSet};if(ht)try{null.error}catch(t){var Ip=ht(ht(t));Ln["%Error.prototype%"]=Ip}var Pp=function t(e){var n;if(e==="%AsyncFunction%")n=er("async function () {}");else if(e==="%GeneratorFunction%")n=er("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=er("async function* () {}");else if(e==="%AsyncGenerator%"){var i=t("%AsyncGeneratorFunction%");i&&(n=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&ht&&(n=ht(o.prototype))}return Ln[e]=n,n},Rs={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Hi=Br,bo=Tp,Dp=Hi.call(Function.call,Array.prototype.concat),Up=Hi.call(Function.apply,Array.prototype.splice),Ls=Hi.call(Function.call,String.prototype.replace),vo=Hi.call(Function.call,String.prototype.slice),Bp=Hi.call(Function.call,RegExp.prototype.exec),Fp=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,jp=/\\(\\)?/g,zp=function(e){var n=vo(e,0,1),i=vo(e,-1);if(n==="%"&&i!=="%")throw new ci("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&n!=="%")throw new ci("invalid intrinsic syntax, expected opening `%`");var o=[];return Ls(e,Fp,function(r,s,l,a){o[o.length]=l?Ls(a,jp,"$1"):s||r}),o},Hp=function(e,n){var i=e,o;if(bo(Rs,i)&&(o=Rs[i],i="%"+o[0]+"%"),bo(Ln,i)){var r=Ln[i];if(r===ei&&(r=Pp(i)),typeof r>"u"&&!n)throw new ai("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:i,value:r}}throw new ci("intrinsic "+e+" does not exist!")},Fr=function(e,n){if(typeof e!="string"||e.length===0)throw new ai("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new ai('"allowMissing" argument must be a boolean');if(Bp(/^%?[^%]*%?$/,e)===null)throw new ci("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=zp(e),o=i.length>0?i[0]:"",r=Hp("%"+o+"%",n),s=r.name,l=r.value,a=!1,c=r.alias;c&&(o=c[0],Up(i,Dp([0,1],c)));for(var f=1,d=!0;f<i.length;f+=1){var p=i[f],h=vo(p,0,1),_=vo(p,-1);if((h==='"'||h==="'"||h==="`"||_==='"'||_==="'"||_==="`")&&h!==_)throw new ci("property names with quotes must have matching quotes");if((p==="constructor"||!d)&&(a=!0),o+="."+p,s="%"+o+"%",bo(Ln,s))l=Ln[s];else if(l!=null){if(!(p in l)){if(!n)throw new ai("base intrinsic for "+e+" exists, but the property is not available.");return}if(Rn&&f+1>=i.length){var m=Rn(l,p);d=!!m,d&&"get"in m&&!("originalValue"in m.get)?l=m.get:l=l[p]}else d=bo(l,p),l=l[p];d&&!a&&(Ln[s]=l)}}return l},wc={exports:{}};(function(t){var e=Br,n=Fr,i=n("%Function.prototype.apply%"),o=n("%Function.prototype.call%"),r=n("%Reflect.apply%",!0)||e.call(o,i),s=n("%Object.getOwnPropertyDescriptor%",!0),l=n("%Object.defineProperty%",!0),a=n("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}t.exports=function(d){var p=r(e,o,arguments);if(s&&l){var h=s(p,"length");h.configurable&&l(p,"length",{value:1+a(0,d.length-(arguments.length-1))})}return p};var c=function(){return r(e,i,arguments)};l?l(t.exports,"apply",{value:c}):t.exports.apply=c})(wc);var qp=wc.exports,kc=Fr,yc=qp,Wp=yc(kc("String.prototype.indexOf")),Gp=function(e,n){var i=kc(e,!!n);return typeof i=="function"&&Wp(e,".prototype.")>-1?yc(i):i};const Kp={},Yp=Object.freeze(Object.defineProperty({__proto__:null,default:Kp},Symbol.toStringTag,{value:"Module"})),Vp=Cf(Yp);var jr=typeof Map=="function"&&Map.prototype,nr=Object.getOwnPropertyDescriptor&&jr?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,$o=jr&&nr&&typeof nr.get=="function"?nr.get:null,Is=jr&&Map.prototype.forEach,zr=typeof Set=="function"&&Set.prototype,ir=Object.getOwnPropertyDescriptor&&zr?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,wo=zr&&ir&&typeof ir.get=="function"?ir.get:null,Ps=zr&&Set.prototype.forEach,Zp=typeof WeakMap=="function"&&WeakMap.prototype,Ri=Zp?WeakMap.prototype.has:null,Jp=typeof WeakSet=="function"&&WeakSet.prototype,Li=Jp?WeakSet.prototype.has:null,Qp=typeof WeakRef=="function"&&WeakRef.prototype,Ds=Qp?WeakRef.prototype.deref:null,Xp=Boolean.prototype.valueOf,xp=Object.prototype.toString,ed=Function.prototype.toString,td=String.prototype.match,Hr=String.prototype.slice,_n=String.prototype.replace,nd=String.prototype.toUpperCase,Us=String.prototype.toLowerCase,Sc=RegExp.prototype.test,Bs=Array.prototype.concat,Wt=Array.prototype.join,id=Array.prototype.slice,Fs=Math.floor,wr=typeof BigInt=="function"?BigInt.prototype.valueOf:null,or=Object.getOwnPropertySymbols,kr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,ui=typeof Symbol=="function"&&typeof Symbol.iterator=="object",St=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===ui||"symbol")?Symbol.toStringTag:null,Ec=Object.prototype.propertyIsEnumerable,js=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function zs(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||Sc.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var i=t<0?-Fs(-t):Fs(t);if(i!==t){var o=String(i),r=Hr.call(e,o.length+1);return _n.call(o,n,"$&_")+"."+_n.call(_n.call(r,/([0-9]{3})/g,"$&_"),/_$/,"")}}return _n.call(e,n,"$&_")}var yr=Vp,Hs=yr.custom,qs=Ac(Hs)?Hs:null,od=function t(e,n,i,o){var r=n||{};if(dn(r,"quoteStyle")&&r.quoteStyle!=="single"&&r.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(dn(r,"maxStringLength")&&(typeof r.maxStringLength=="number"?r.maxStringLength<0&&r.maxStringLength!==1/0:r.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=dn(r,"customInspect")?r.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(dn(r,"indent")&&r.indent!==null&&r.indent!=="	"&&!(parseInt(r.indent,10)===r.indent&&r.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(dn(r,"numericSeparator")&&typeof r.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var l=r.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Nc(e,r);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var a=String(e);return l?zs(e,a):a}if(typeof e=="bigint"){var c=String(e)+"n";return l?zs(e,c):c}var f=typeof r.depth>"u"?5:r.depth;if(typeof i>"u"&&(i=0),i>=f&&f>0&&typeof e=="object")return Sr(e)?"[Array]":"[Object]";var d=kd(r,i);if(typeof o>"u")o=[];else if(Oc(o,e)>=0)return"[Circular]";function p(G,K,Q){if(K&&(o=id.call(o),o.push(K)),Q){var U={depth:r.depth};return dn(r,"quoteStyle")&&(U.quoteStyle=r.quoteStyle),t(G,U,i+1,o)}return t(G,r,i+1,o)}if(typeof e=="function"&&!Ws(e)){var h=dd(e),_=ro(e,p);return"[Function"+(h?": "+h:" (anonymous)")+"]"+(_.length>0?" { "+Wt.call(_,", ")+" }":"")}if(Ac(e)){var m=ui?_n.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):kr.call(e);return typeof e=="object"&&!ui?Ti(m):m}if(vd(e)){for(var S="<"+Us.call(String(e.nodeName)),b=e.attributes||[],E=0;E<b.length;E++)S+=" "+b[E].name+"="+Cc(rd(b[E].value),"double",r);return S+=">",e.childNodes&&e.childNodes.length&&(S+="..."),S+="</"+Us.call(String(e.nodeName))+">",S}if(Sr(e)){if(e.length===0)return"[]";var N=ro(e,p);return d&&!wd(N)?"["+Er(N,d)+"]":"[ "+Wt.call(N,", ")+" ]"}if(ld(e)){var j=ro(e,p);return!("cause"in Error.prototype)&&"cause"in e&&!Ec.call(e,"cause")?"{ ["+String(e)+"] "+Wt.call(Bs.call("[cause]: "+p(e.cause),j),", ")+" }":j.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Wt.call(j,", ")+" }"}if(typeof e=="object"&&s){if(qs&&typeof e[qs]=="function"&&yr)return yr(e,{depth:f-i});if(s!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(hd(e)){var I=[];return Is&&Is.call(e,function(G,K){I.push(p(K,e,!0)+" => "+p(G,e))}),Gs("Map",$o.call(e),I,d)}if(gd(e)){var A=[];return Ps&&Ps.call(e,function(G){A.push(p(G,e))}),Gs("Set",wo.call(e),A,d)}if(_d(e))return rr("WeakMap");if(bd(e))return rr("WeakSet");if(md(e))return rr("WeakRef");if(cd(e))return Ti(p(Number(e)));if(fd(e))return Ti(p(wr.call(e)));if(ud(e))return Ti(Xp.call(e));if(ad(e))return Ti(p(String(e)));if(!sd(e)&&!Ws(e)){var M=ro(e,p),D=js?js(e)===Object.prototype:e instanceof Object||e.constructor===Object,P=e instanceof Object?"":"null prototype",J=!D&&St&&Object(e)===e&&St in e?Hr.call(vn(e),8,-1):P?"Object":"",W=D||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",T=W+(J||P?"["+Wt.call(Bs.call([],J||[],P||[]),": ")+"] ":"");return M.length===0?T+"{}":d?T+"{"+Er(M,d)+"}":T+"{ "+Wt.call(M,", ")+" }"}return String(e)};function Cc(t,e,n){var i=(n.quoteStyle||e)==="double"?'"':"'";return i+t+i}function rd(t){return _n.call(String(t),/"/g,"&quot;")}function Sr(t){return vn(t)==="[object Array]"&&(!St||!(typeof t=="object"&&St in t))}function sd(t){return vn(t)==="[object Date]"&&(!St||!(typeof t=="object"&&St in t))}function Ws(t){return vn(t)==="[object RegExp]"&&(!St||!(typeof t=="object"&&St in t))}function ld(t){return vn(t)==="[object Error]"&&(!St||!(typeof t=="object"&&St in t))}function ad(t){return vn(t)==="[object String]"&&(!St||!(typeof t=="object"&&St in t))}function cd(t){return vn(t)==="[object Number]"&&(!St||!(typeof t=="object"&&St in t))}function ud(t){return vn(t)==="[object Boolean]"&&(!St||!(typeof t=="object"&&St in t))}function Ac(t){if(ui)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!kr)return!1;try{return kr.call(t),!0}catch{}return!1}function fd(t){if(!t||typeof t!="object"||!wr)return!1;try{return wr.call(t),!0}catch{}return!1}var pd=Object.prototype.hasOwnProperty||function(t){return t in this};function dn(t,e){return pd.call(t,e)}function vn(t){return xp.call(t)}function dd(t){if(t.name)return t.name;var e=td.call(ed.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function Oc(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}function hd(t){if(!$o||!t||typeof t!="object")return!1;try{$o.call(t);try{wo.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function _d(t){if(!Ri||!t||typeof t!="object")return!1;try{Ri.call(t,Ri);try{Li.call(t,Li)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function md(t){if(!Ds||!t||typeof t!="object")return!1;try{return Ds.call(t),!0}catch{}return!1}function gd(t){if(!wo||!t||typeof t!="object")return!1;try{wo.call(t);try{$o.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function bd(t){if(!Li||!t||typeof t!="object")return!1;try{Li.call(t,Li);try{Ri.call(t,Ri)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function vd(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function Nc(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,i="... "+n+" more character"+(n>1?"s":"");return Nc(Hr.call(t,0,e.maxStringLength),e)+i}var o=_n.call(_n.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,$d);return Cc(o,"single",e)}function $d(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+nd.call(e.toString(16))}function Ti(t){return"Object("+t+")"}function rr(t){return t+" { ? }"}function Gs(t,e,n,i){var o=i?Er(n,i):Wt.call(n,", ");return t+" ("+e+") {"+o+"}"}function wd(t){for(var e=0;e<t.length;e++)if(Oc(t[e],`
`)>=0)return!1;return!0}function kd(t,e){var n;if(t.indent==="	")n="	";else if(typeof t.indent=="number"&&t.indent>0)n=Wt.call(Array(t.indent+1)," ");else return null;return{base:n,prev:Wt.call(Array(e+1),n)}}function Er(t,e){if(t.length===0)return"";var n=`
`+e.prev+e.base;return n+Wt.call(t,","+n)+`
`+e.prev}function ro(t,e){var n=Sr(t),i=[];if(n){i.length=t.length;for(var o=0;o<t.length;o++)i[o]=dn(t,o)?e(t[o],t):""}var r=typeof or=="function"?or(t):[],s;if(ui){s={};for(var l=0;l<r.length;l++)s["$"+r[l]]=r[l]}for(var a in t)dn(t,a)&&(n&&String(Number(a))===a&&a<t.length||ui&&s["$"+a]instanceof Symbol||(Sc.call(/[^\w$]/,a)?i.push(e(a,t)+": "+e(t[a],t)):i.push(a+": "+e(t[a],t))));if(typeof or=="function")for(var c=0;c<r.length;c++)Ec.call(t,r[c])&&i.push("["+e(r[c])+"]: "+e(t[r[c]],t));return i}var qr=Fr,vi=Gp,yd=od,Sd=qr("%TypeError%"),so=qr("%WeakMap%",!0),lo=qr("%Map%",!0),Ed=vi("WeakMap.prototype.get",!0),Cd=vi("WeakMap.prototype.set",!0),Ad=vi("WeakMap.prototype.has",!0),Od=vi("Map.prototype.get",!0),Nd=vi("Map.prototype.set",!0),Td=vi("Map.prototype.has",!0),Wr=function(t,e){for(var n=t,i;(i=n.next)!==null;n=i)if(i.key===e)return n.next=i.next,i.next=t.next,t.next=i,i},Md=function(t,e){var n=Wr(t,e);return n&&n.value},Rd=function(t,e,n){var i=Wr(t,e);i?i.value=n:t.next={key:e,next:t.next,value:n}},Ld=function(t,e){return!!Wr(t,e)},Id=function(){var e,n,i,o={assert:function(r){if(!o.has(r))throw new Sd("Side channel does not contain "+yd(r))},get:function(r){if(so&&r&&(typeof r=="object"||typeof r=="function")){if(e)return Ed(e,r)}else if(lo){if(n)return Od(n,r)}else if(i)return Md(i,r)},has:function(r){if(so&&r&&(typeof r=="object"||typeof r=="function")){if(e)return Ad(e,r)}else if(lo){if(n)return Td(n,r)}else if(i)return Ld(i,r);return!1},set:function(r,s){so&&r&&(typeof r=="object"||typeof r=="function")?(e||(e=new so),Cd(e,r,s)):lo?(n||(n=new lo),Nd(n,r,s)):(i||(i={key:{},next:null}),Rd(i,r,s))}};return o},Pd=String.prototype.replace,Dd=/%20/g,sr={RFC1738:"RFC1738",RFC3986:"RFC3986"},Gr={default:sr.RFC3986,formatters:{RFC1738:function(t){return Pd.call(t,Dd,"+")},RFC3986:function(t){return String(t)}},RFC1738:sr.RFC1738,RFC3986:sr.RFC3986},Ud=Gr,lr=Object.prototype.hasOwnProperty,Mn=Array.isArray,qt=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),Bd=function(e){for(;e.length>1;){var n=e.pop(),i=n.obj[n.prop];if(Mn(i)){for(var o=[],r=0;r<i.length;++r)typeof i[r]<"u"&&o.push(i[r]);n.obj[n.prop]=o}}},Tc=function(e,n){for(var i=n&&n.plainObjects?Object.create(null):{},o=0;o<e.length;++o)typeof e[o]<"u"&&(i[o]=e[o]);return i},Fd=function t(e,n,i){if(!n)return e;if(typeof n!="object"){if(Mn(e))e.push(n);else if(e&&typeof e=="object")(i&&(i.plainObjects||i.allowPrototypes)||!lr.call(Object.prototype,n))&&(e[n]=!0);else return[e,n];return e}if(!e||typeof e!="object")return[e].concat(n);var o=e;return Mn(e)&&!Mn(n)&&(o=Tc(e,i)),Mn(e)&&Mn(n)?(n.forEach(function(r,s){if(lr.call(e,s)){var l=e[s];l&&typeof l=="object"&&r&&typeof r=="object"?e[s]=t(l,r,i):e.push(r)}else e[s]=r}),e):Object.keys(n).reduce(function(r,s){var l=n[s];return lr.call(r,s)?r[s]=t(r[s],l,i):r[s]=l,r},o)},jd=function(e,n){return Object.keys(n).reduce(function(i,o){return i[o]=n[o],i},e)},zd=function(t,e,n){var i=t.replace(/\+/g," ");if(n==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},Hd=function(e,n,i,o,r){if(e.length===0)return e;var s=e;if(typeof e=="symbol"?s=Symbol.prototype.toString.call(e):typeof e!="string"&&(s=String(e)),i==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var l="",a=0;a<s.length;++a){var c=s.charCodeAt(a);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||r===Ud.RFC1738&&(c===40||c===41)){l+=s.charAt(a);continue}if(c<128){l=l+qt[c];continue}if(c<2048){l=l+(qt[192|c>>6]+qt[128|c&63]);continue}if(c<55296||c>=57344){l=l+(qt[224|c>>12]+qt[128|c>>6&63]+qt[128|c&63]);continue}a+=1,c=65536+((c&1023)<<10|s.charCodeAt(a)&1023),l+=qt[240|c>>18]+qt[128|c>>12&63]+qt[128|c>>6&63]+qt[128|c&63]}return l},qd=function(e){for(var n=[{obj:{o:e},prop:"o"}],i=[],o=0;o<n.length;++o)for(var r=n[o],s=r.obj[r.prop],l=Object.keys(s),a=0;a<l.length;++a){var c=l[a],f=s[c];typeof f=="object"&&f!==null&&i.indexOf(f)===-1&&(n.push({obj:s,prop:c}),i.push(f))}return Bd(n),e},Wd=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Gd=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},Kd=function(e,n){return[].concat(e,n)},Yd=function(e,n){if(Mn(e)){for(var i=[],o=0;o<e.length;o+=1)i.push(n(e[o]));return i}return n(e)},Mc={arrayToObject:Tc,assign:jd,combine:Kd,compact:qd,decode:zd,encode:Hd,isBuffer:Gd,isRegExp:Wd,maybeMap:Yd,merge:Fd},Rc=Id,fo=Mc,Ii=Gr,Vd=Object.prototype.hasOwnProperty,Ks={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,n){return e+"["+n+"]"},repeat:function(e){return e}},xt=Array.isArray,Zd=Array.prototype.push,Lc=function(t,e){Zd.apply(t,xt(e)?e:[e])},Jd=Date.prototype.toISOString,Ys=Ii.default,kt={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:fo.encode,encodeValuesOnly:!1,format:Ys,formatter:Ii.formatters[Ys],indices:!1,serializeDate:function(e){return Jd.call(e)},skipNulls:!1,strictNullHandling:!1},Qd=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},ar={},Xd=function t(e,n,i,o,r,s,l,a,c,f,d,p,h,_,m,S){for(var b=e,E=S,N=0,j=!1;(E=E.get(ar))!==void 0&&!j;){var I=E.get(e);if(N+=1,typeof I<"u"){if(I===N)throw new RangeError("Cyclic object value");j=!0}typeof E.get(ar)>"u"&&(N=0)}if(typeof a=="function"?b=a(n,b):b instanceof Date?b=d(b):i==="comma"&&xt(b)&&(b=fo.maybeMap(b,function(U){return U instanceof Date?d(U):U})),b===null){if(r)return l&&!_?l(n,kt.encoder,m,"key",p):n;b=""}if(Qd(b)||fo.isBuffer(b)){if(l){var A=_?n:l(n,kt.encoder,m,"key",p);return[h(A)+"="+h(l(b,kt.encoder,m,"value",p))]}return[h(n)+"="+h(String(b))]}var M=[];if(typeof b>"u")return M;var D;if(i==="comma"&&xt(b))_&&l&&(b=fo.maybeMap(b,l)),D=[{value:b.length>0?b.join(",")||null:void 0}];else if(xt(a))D=a;else{var P=Object.keys(b);D=c?P.sort(c):P}for(var J=o&&xt(b)&&b.length===1?n+"[]":n,W=0;W<D.length;++W){var T=D[W],G=typeof T=="object"&&typeof T.value<"u"?T.value:b[T];if(!(s&&G===null)){var K=xt(b)?typeof i=="function"?i(J,T):J:J+(f?"."+T:"["+T+"]");S.set(e,N);var Q=Rc();Q.set(ar,S),Lc(M,t(G,K,i,o,r,s,i==="comma"&&_&&xt(b)?null:l,a,c,f,d,p,h,_,m,Q))}}return M},xd=function(e){if(!e)return kt;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=e.charset||kt.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=Ii.default;if(typeof e.format<"u"){if(!Vd.call(Ii.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var o=Ii.formatters[i],r=kt.filter;return(typeof e.filter=="function"||xt(e.filter))&&(r=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:kt.addQueryPrefix,allowDots:typeof e.allowDots>"u"?kt.allowDots:!!e.allowDots,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:kt.charsetSentinel,delimiter:typeof e.delimiter>"u"?kt.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:kt.encode,encoder:typeof e.encoder=="function"?e.encoder:kt.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:kt.encodeValuesOnly,filter:r,format:i,formatter:o,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:kt.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:kt.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:kt.strictNullHandling}},eh=function(t,e){var n=t,i=xd(e),o,r;typeof i.filter=="function"?(r=i.filter,n=r("",n)):xt(i.filter)&&(r=i.filter,o=r);var s=[];if(typeof n!="object"||n===null)return"";var l;e&&e.arrayFormat in Ks?l=e.arrayFormat:e&&"indices"in e?l=e.indices?"indices":"repeat":l="indices";var a=Ks[l];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var c=a==="comma"&&e&&e.commaRoundTrip;o||(o=Object.keys(n)),i.sort&&o.sort(i.sort);for(var f=Rc(),d=0;d<o.length;++d){var p=o[d];i.skipNulls&&n[p]===null||Lc(s,Xd(n[p],p,a,c,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,f))}var h=s.join(i.delimiter),_=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?_+="utf8=%26%2310003%3B&":_+="utf8=%E2%9C%93&"),h.length>0?_+h:""},fi=Mc,Cr=Object.prototype.hasOwnProperty,th=Array.isArray,dt={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:fi.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},nh=function(t){return t.replace(/&#(\d+);/g,function(e,n){return String.fromCharCode(parseInt(n,10))})},Ic=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},ih="utf8=%26%2310003%3B",oh="utf8=%E2%9C%93",rh=function(e,n){var i={__proto__:null},o=n.ignoreQueryPrefix?e.replace(/^\?/,""):e,r=n.parameterLimit===1/0?void 0:n.parameterLimit,s=o.split(n.delimiter,r),l=-1,a,c=n.charset;if(n.charsetSentinel)for(a=0;a<s.length;++a)s[a].indexOf("utf8=")===0&&(s[a]===oh?c="utf-8":s[a]===ih&&(c="iso-8859-1"),l=a,a=s.length);for(a=0;a<s.length;++a)if(a!==l){var f=s[a],d=f.indexOf("]="),p=d===-1?f.indexOf("="):d+1,h,_;p===-1?(h=n.decoder(f,dt.decoder,c,"key"),_=n.strictNullHandling?null:""):(h=n.decoder(f.slice(0,p),dt.decoder,c,"key"),_=fi.maybeMap(Ic(f.slice(p+1),n),function(m){return n.decoder(m,dt.decoder,c,"value")})),_&&n.interpretNumericEntities&&c==="iso-8859-1"&&(_=nh(_)),f.indexOf("[]=")>-1&&(_=th(_)?[_]:_),Cr.call(i,h)?i[h]=fi.combine(i[h],_):i[h]=_}return i},sh=function(t,e,n,i){for(var o=i?e:Ic(e,n),r=t.length-1;r>=0;--r){var s,l=t[r];if(l==="[]"&&n.parseArrays)s=[].concat(o);else{s=n.plainObjects?Object.create(null):{};var a=l.charAt(0)==="["&&l.charAt(l.length-1)==="]"?l.slice(1,-1):l,c=parseInt(a,10);!n.parseArrays&&a===""?s={0:o}:!isNaN(c)&&l!==a&&String(c)===a&&c>=0&&n.parseArrays&&c<=n.arrayLimit?(s=[],s[c]=o):a!=="__proto__"&&(s[a]=o)}o=s}return o},lh=function(e,n,i,o){if(e){var r=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/,l=/(\[[^[\]]*])/g,a=i.depth>0&&s.exec(r),c=a?r.slice(0,a.index):r,f=[];if(c){if(!i.plainObjects&&Cr.call(Object.prototype,c)&&!i.allowPrototypes)return;f.push(c)}for(var d=0;i.depth>0&&(a=l.exec(r))!==null&&d<i.depth;){if(d+=1,!i.plainObjects&&Cr.call(Object.prototype,a[1].slice(1,-1))&&!i.allowPrototypes)return;f.push(a[1])}return a&&f.push("["+r.slice(a.index)+"]"),sh(f,n,i,o)}},ah=function(e){if(!e)return dt;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=typeof e.charset>"u"?dt.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?dt.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:dt.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:dt.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:dt.arrayLimit,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:dt.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:dt.comma,decoder:typeof e.decoder=="function"?e.decoder:dt.decoder,delimiter:typeof e.delimiter=="string"||fi.isRegExp(e.delimiter)?e.delimiter:dt.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:dt.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:dt.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:dt.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:dt.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:dt.strictNullHandling}},ch=function(t,e){var n=ah(e);if(t===""||t===null||typeof t>"u")return n.plainObjects?Object.create(null):{};for(var i=typeof t=="string"?rh(t,n):t,o=n.plainObjects?Object.create(null):{},r=Object.keys(i),s=0;s<r.length;++s){var l=r[s],a=lh(l,i[l],n,typeof t=="string");o=fi.merge(o,a,n)}return n.allowSparse===!0?o:fi.compact(o)},uh=eh,fh=ch,ph=Gr,dh={formats:ph,parse:fh,stringify:uh};const hh=gi(dh),_h=mi("route");class mh extends It{constructor(){super(),this.prop("ro","basePath",()=>this._basePath),this.prop("ro","hash",()=>(this._location.hash||"").replace(/^#/,"")),this.prop("ro","path",()=>this._path),this.prop("ro","pathParts",()=>this._pathParts),this.prop("ro","query",()=>this._query),this.prop("rw","baseUrl",""),this.prop("rw","enabled",!1),this._onClick=this._onClick.bind(this),this._onLocationChange=this._onLocationChange.bind(this),window.addEventListener("click",this._onClick),window.addEventListener("popstate",this._onLocationChange),this._history=window.history,this._location=window.location,this._basePath="",this._path="/",this._pathParts=[],this._query={}}conversationPath(e){const n=["","chat"];return e.connection_id&&n.push(e.connection_id),e.conversation_id&&n.push(e.conversation_id),n.map(i=>encodeURIComponent(i)).join("/")}go(e,n={}){e.indexOf(this.baseUrl)===0&&(e=e.substr(this.baseUrl.length));const i=this.baseUrl+e;if(i===this._location.href)return this;this._history[n.replace?"replaceState":"pushState"]({},document.title,i),this.update({path:!0})._onLocationChange({})}param(e,n=""){const i=this.query;return Object.hasOwn(i,e)?i[e]:n}subscribe(e){return e(this),this.on("update",e)}update(e){return e.baseUrl&&(e.baseUrl=e.baseUrl.replace(/\/+$/,""),this._basePath=new URL(e.baseUrl).pathname.replace(/\/+$/,"")),super.update(e),e.baseUrl&&this._onLocationChange(),this}urlFor(e,n={}){const i=e.match(/^\w+:/)||e.match(/^#/)?e:this.basePath+e,o=Object.keys(n).sort().filter(r=>Ie.defined(n[r])).map(r=>r+"="+encodeURIComponent(n[r])).join("&");return i+(o?"?"+o:"")}wsUrlFor(e){return(e.match(/^\w+:/)?e:this.baseUrl+e).replace(/^http/,"ws")}_onClick(e){if(this.emit("click",e),!this.enabled||e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)return;const n=e.target&&e.target.closest("a");if(!n||!n.href)return;if(n.target==="_self"&&(n.href.indexOf("/")===0?this.baseUrl+n.href:n.href)===location.href)return location.reload();if(n.hasAttribute("download")||n.hasAttribute("target"))return;let i=n.getAttribute("href")||"";i.indexOf("#")===0&&(i=this.path+i),i.indexOf("./")===0&&(i="/"+this._pathParts.slice(0,-1).join("/")+i.replace(/^\./,"")),i.indexOf(this.baseUrl)===0&&(i=i.substr(this.baseUrl.length)),i.indexOf(this.basePath)===0&&(i=i.substr(this.basePath.length)),i.indexOf("/")===0&&(this.go(i,{},n.hasAttribute("replace")),e.preventDefault())}_onLocationChange(){if(!this.enabled)return;const i=this._location.href.substr(this.baseUrl.length).split("#")[0].split("?");this._query=i.length===2?hh.parse(i.pop()):{},this._path=i[0],this._pathParts=i[0].length<=1?[]:i[0].replace(/^\//,"").split("/").map(decodeURIComponent),_h.info('path="'+this._path+'" '+JSON.stringify(this._pathParts)+", query="+JSON.stringify(this._query)),this.update({path:!0})}}const Re=new mh;class gh{constructor(){this.aliases=this._buildAliases(),this.re=this._buildRe(),this.byShortName={},this.grouped={},this.status="pending"}async load(){if(["loading","success"].indexOf(this.status)!==-1)return this;this.status="loading";const e=await fetch(Re.urlFor("/emojis/0bf11a9aff0d6da7b46f1490f86a71eb.json"));return this._load((await e.json()).emojis),this.status="success",this}markup(e){return e.replace(this.re,(n,i,o)=>{const r=this.aliases[o]||o,s=this.byShortName[r];return i+(s&&s.emoji||o)})}search(e){e=e.toLowerCase();const n=this.grouped[e]||this.grouped[e.substring(0,2)]||{};return Object.keys(n).sort((i,o)=>n[i]-n[o]).map(i=>this.byShortName[i]).filter(i=>(i.shortname+i.name).toLowerCase().indexOf(e)!==-1)}_buildAliases(){return{"&lt;3":":heart:","(Y)":":thumbsup:",":(":":disappointed:",":)":":slight_smile:",":-*":":kissing:",":/":":confused:",":D":":smiley:",":O":":open_mouth:",":P":":stuck_out_tongue:",";)":":wink:",";D":":grin:"}}_buildRe(){const e=Object.keys(this.aliases).sort().map(bi).join("|");return new RegExp("(^|\\s)(:\\w+:|"+e+")(?=&|\\s|\\,|\\.|$)","gi")}_load(e){this.grouped={};for(const n of e)n.emoji&&n.shortname&&(n.name||(n.name=n.shortname),delete n.category,delete n.order,delete n.unicode,this.byShortName[n.shortname]=n,this._toGrouped(n))}_toGrouped(e){const n=this.grouped;([e.shortname,e.name].join("-").replace(/\W+/," ").match(/\W(\w{2})/g)||[]).forEach((o,r)=>{o=o.substring(1).toLowerCase(),n[o]||(n[o]={}),n[o][e.shortname]=r,o=o[0],n[o]||(n[o]={}),n[o][e.shortname]=r})}}const bh={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"},Mi=(t,e=/[&<>'"]/g)=>t.replace(e,n=>bh[n]),Vs=t=>t.replace(/\s$/,"&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s{2}/g," &nbsp;"),At=t=>[t.map(e=>`<${e}>`).join(""),t.reverse().map(e=>`</${e}>`).join("")];class vh extends It{constructor(){super(),this.prop("cookie","lang",""),this.prop("ro","dictionaries",{}),this.prop("ro","emojis",new gh),this.prop("ro","languages",()=>this._languages),this.prop("ro","languageOptions",()=>this._languageOptions),this._languages=[],this._languageOptions=[],this._rules=this._makeRules()}l(e,...n){const i=this.dictionaries[this.lang]||{};return String(i[e]||e).replace(/%(\d)(\D|$)/g,(r,s,l)=>typeof n[s-1]>"u"?r:n[s-1]+l)}async load(e){if(e||(e=this.lang||document.documentElement.getAttribute("lang")),this.dictionaries[e])return this.update({lang:e});const n=await nt.op("getDictionary",{lang:e}).perform();return this.dictionaries[e]=n.res.body.dictionary,this._languages=n.res.body.available_languages||{},this._languageOptions=Object.keys(this._languages).sort().map(i=>[i,this._languages[i].language_team.replace(/\s*<.*/,"")]),this.update({lang:e})}lmd(e,...n){return this.md(this.l(e,...n))}md(e){return e.length?this.emojis.markup(Vs(this._tagToHTML(this._makeTag(e)))):"&nbsp;"}raw(e){return e.length?Vs(Mi(e)):"&nbsp;"}_makeRules(){const e=[];return e.push({tag:At(["code"]),re:/`(?=[^`\s])/,rules:[],handler:"_mdTag"}),e.push({tag:At(["em","strong"]),re:/\*\*\*(?=\S)/,rules:e,handler:"_mdTag"}),e.push({tag:At(["strong"]),re:/\*\*(?=\S)/,rules:e,handler:"_mdTag"}),e.push({tag:At(["em"]),re:/\*(?=\S)/,rules:e,handler:"_mdTag"}),e.push({tag:At(["span"]),re:/\x03\d{1,2}(?:,\d{1,2})?/,rules:e,handler:"_mdIrcColorFormatting"}),e.push({tag:At(["span"]),re:/[\x02\x1d\x1e\x1f\x11]/,rules:e,handler:"_mdIrcTextFormatting"}),e.push({tag:At(["a"]),re:/\[([a-zA-Z][^\]]+)\]\(([^)]+)\)/,rules:[],handler:"_mdLink"}),e.push({tag:At(["a"]),re:/\b(https?|mailto):\S+/,rules:[],handler:"_mdURL"}),e.push({tag:At(["a"]),re:/(\s|^)#[a-zA-Z][\w.-]+(?=\W|$)/,rules:[],handler:"_mdChannelname"}),e}_makeTag(e,n=this._rules,i=0){if(i===0&&e.indexOf("> ")===0)return[At(["blockquote"]),{},[this._makeTag(e.replace(/^>\s/,""),n,i+1)]];const o=[];for(const r of n){const s=e.match(r.re);if(!s)continue;const l={attrs:{},after:e.substring(s.index+s[0].length),before:e.substring(0,s.index),captured:s[0],index:s.index,match:s,tag:r.tag};if(this[r.handler](l),typeof l.content!="string"){e=l.before+l.captured+l.after;continue}l.before.length&&o.push(this._makeTag(l.before,n,i+1)),o.push([l.tag,l.attrs,[this._makeTag(l.content,r.rules,i+1)]]),l.after.length&&o.push(this._makeTag(l.after,n,i+1));break}return[null,{},o.length?o:[Mi(e)]]}_mdChannelname(e){e.captured=e.captured.replace(/^\s/,n=>(e.before+=n,"")),e.content=e.captured,e.attrs.href="./"+encodeURIComponent(e.captured)}_mdIrcColorFormatting(e){const n=e.after.indexOf("");if(n===-1)return;e.content=e.after.substring(0,n),e.after=e.after.substring(n+1);const i=[];e.captured.replace(/\x030?(\d{1,2}),?(\d{1,2})?/,(o,r,s)=>{s&&i.push("bg-"+s),r&&i.push("text-"+r)}),i.length&&(e.attrs.class=i.join(" "))}_mdIrcTextFormatting(e){const n=e.after.indexOf(e.captured);n!==-1&&(e.content=e.after.substring(0,n),e.after=e.after.substring(n+e.captured.length),e.tag=e.captured===""?At(["strong"]):e.captured===""?At(["em"]):e.captured===""?At(["u"]):e.captured===""?At(["code"]):At(["span"]))}_mdLink(e){e.content=e.match[1],e.attrs.href=Mi(e.match[2]),e.match[2].match(/^\w+:/)&&(e.attrs.target="_blank")}_mdTag(e){if(e.before.match(/\\$/)){e.before=e.before.replace(/\\$/,"");return}const n=e.after.indexOf(e.captured);n!==-1&&(e.content=e.after.substring(0,n),e.after=e.after.substring(n+e.captured.length))}_mdURL(e){e.captured=e.captured.replace(/[,.:;!"')]$/,n=>(e.after=n[0]+e.after,"")),e.content=e.captured.replace(/^(https|mailto):(\/\/)?/,""),e.attrs.href=Mi(e.captured),e.attrs.target="_blank"}_tagToHTML(e){if(typeof e=="string")return e;const n=typeof e[2]=="string"?Mi(e[2]):e[2].map(r=>this._tagToHTML(r)).join("");if(!e[0])return n;const i=Object.keys(e[1]).sort().map(r=>`${r}="${e[1][r]}"`).join(" ");return(i?e[0][0].replace(/>/," "+i+">"):e[0][0])+n+e[0][1]}}const tt=new vh,lt=uc(tt,t=>(...e)=>t.l(...e)),jt=uc(tt,t=>(...e)=>t.lmd(...e)),hn=[],Pc={};function $h({query:t}){const e=[];for(let n=0;n<hn.length;n++){if(hn[n].cmd.indexOf(t)!==0)continue;const i=hn[n].alias||hn[n].cmd;e.push({val:i,text:tt.md(hn[n].example)})}return e}function wh(t){const e=t.split(/\s/),n=Pc[e[0].toLowerCase()];return Ie.function(n)?n(e.slice(1)):n?[n].concat(e.slice(1)).filter(i=>Ie.defined(i)&&i.length).join(" "):t}const ot=(t,e,n)=>hn.push({cmd:t,description:n,example:e});ot("/me","/me <msg>","Send message as an action.");ot("/say","/say <msg>",'Used when you want to send a message starting with "/".');ot("/whois","/whois <nick>","Show information about a user.");ot("/query","/query <nick>","Open up a new chat window with nick.");ot("/msg","/msg <nick> <msg>","Send a direct message to nick.");ot("/shrug","/shrug <msg>","Add a shrug to end of message. Message is optional.");ot("/join","/join <#channel>","Join channel and open up a chat window.");ot("/close","/close [nick|#channel]","Close conversation.");ot("/nick","/nick <nick>","Change your wanted nick.");ot("/away","/away <message>","Add or remove an away message");ot("/kick","/kick <nick>","Kick a user from the current channel.");ot("/mode","/mode [+|-][b|o|v] <user>","Change mode of yourself or a user");ot("/topic","/topic or /topic <new topic>","Show current topic, or set a new one.");ot("/names","/names","Show participants in the channel.");ot("/invite","/invite <nick> [#channel]","Invite a user to a channel.");ot("/reconnect","/reconnect","Restart the current connection.");ot("/clear","/clear history <#channel> or /clear history <nick>","Delete all history for the given conversation.");ot("/oper","/oper <nick> <password>","Gain operator status on a network.");ot("/cs","/cs <msg>","Send a message to chanserv.");ot("/ns","/ns <msg>","Send a message to nickserv.");ot("/ms","/ms <msg>","Send a message to memoserv.");ot("/hs","/hs <msg>","Send a message to hostserv.");ot("/bs","/bs <msg>","Send a message to botserv.");ot("/os","/os <msg>","Send a message to operserv.");ot("/quote","/quote <irc-command>","Allow you to send any raw IRC message.");const Qt=(t,e)=>Pc[t]=e;Qt("/close","/part");Qt("/shrug",t=>"/say "+t.concat("¯\\_(ツ)_/¯").join(" "));Qt("/cs","/quote chanserv");Qt("/ns","/quote nickserv");Qt("/ms","/quote memoserv");Qt("/hs","/quote hotserv");Qt("/bs","/quote botserv");Qt("/os","/quote operserv");Qt("/j","/join");Qt("/raw","/quote");function Dn(t,e){return Dn[t]?Dn[t](e):[]}function kh(t,e){t&&Object.hasOwn(t,"val")&&(t=t.val);const n=e.append?e.value.length:e.cursorPos;let[i,o]=[e.value.substring(0,n),e.value.substring(n)];return Ie.undefined(t)?{before:i,middle:"",after:o}:(e.append&&(i=i.replace(/[ ]$/,""),i.length&&(t=" "+t)),e.padBefore&&(i=i.replace(/[ ]$/,""),i.length&&(t=" "+t)),e.padAfter&&(o=o.replace(/^[ ]/,""),t=t+" "),e.replace&&(i=i.replace(/\S*\s?$/,"")),{before:i,middle:t,after:o})}function yh(t,e,{conversation:n,user:i}){let o="",r="";const s=t.substring(0,e).replace(/(\S)(\S*)$/,(c,f,d)=>(o=f,r=d,"")),l=o===":"&&r.length?"emojis":o==="/"&&!s.length?"commands":o==="@"&&r.length?"nicks":o==="#"||o==="&"?"conversations":"none",a=Dn(l,{conversation:n,query:o+r,user:i});return a.length&&a.unshift({autocompleteCategory:l,val:o+r}),a}Dn.commands=({query:t})=>$h({query:t});Dn.conversations=({conversation:t,query:e,user:n})=>{const i=n.findConversation({connection_id:t.connection_id}),o=i?i.conversations.toArray():n.conversations(),r=[];for(let s=0;s<o.length&&!(o[s].name.toLowerCase().indexOf(e)!==-1&&(r.push({text:o[s].name,val:o[s].conversation_id}),r.length>=20));s++);return r};Dn.emojis=({query:t})=>{const e=tt.emojis,n=[];for(let i of e.search(t.substring(1)))if(n.push({val:i.emoji,text:e.markup(i.emoji)}),n.length>=30)break;return n};Dn.nicks=({conversation:t,query:e})=>{const n=new RegExp("^"+bi(e.slice(1)),"i"),i=[];for(let o of t.participants.toArray()){if(i.length>=20)break;o.nick.match(n)&&i.push({val:o.nick})}return i};function Dc(t){const e=t-1;return e*e*e+1}function Bt(t,{delay:e=0,duration:n=400,easing:i=xa}={}){const o=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:i,css:r=>`opacity: ${r*o}`}}function Zt(t,{delay:e=0,duration:n=400,easing:i=Dc,x:o=0,y:r=0,opacity:s=0}={}){const l=getComputedStyle(t),a=+l.opacity,c=l.transform==="none"?"":l.transform,f=a*(1-s),[d,p]=ms(o),[h,_]=ms(r);return{delay:e,duration:n,easing:i,css:(m,S)=>`
			transform: ${c} translate(${(1-m)*d}${p}, ${(1-m)*h}${_});
			opacity: ${a-f*S}`}}function Jt(t,{delay:e=0,duration:n=400,easing:i=Dc,axis:o="y"}={}){const r=getComputedStyle(t),s=+r.opacity,l=o==="y"?"height":"width",a=parseFloat(r[l]),c=o==="y"?["top","bottom"]:["left","right"],f=c.map(b=>`${b[0].toUpperCase()}${b.slice(1)}`),d=parseFloat(r[`padding${f[0]}`]),p=parseFloat(r[`padding${f[1]}`]),h=parseFloat(r[`margin${f[0]}`]),_=parseFloat(r[`margin${f[1]}`]),m=parseFloat(r[`border${f[0]}Width`]),S=parseFloat(r[`border${f[1]}Width`]);return{delay:e,duration:n,easing:i,css:b=>`overflow: hidden;opacity: ${Math.min(b*20,1)*s};${l}: ${b*a}px;padding-${c[0]}: ${b*d}px;padding-${c[1]}: ${b*p}px;margin-${c[0]}: ${b*h}px;margin-${c[1]}: ${b*_}px;border-${c[0]}-width: ${b*m}px;border-${c[1]}-width: ${b*S}px;`}}function Zs(t){const e=t.is("private")?t.participants.nicks().sort().join("-and-"):t.title;return encodeURIComponent(e).toLowerCase()}const ko=Oo(null,{conversationToInternalUrl(t){const e=this.get();if(!e)return null;const n=Re.urlFor("/video/"+e.hostname+"/"+Zs(t));return new URL(n,location.href).href},conversationToExternalUrl(t){const e=this.get();return e?new URL("/"+Zs(t),e).href:null},fromString(t){this.set(t?new URL(t):null)}}),Sh=Oo(null,{close(){const t=this.get();return t?[!0,t.close(),this.set(null)][0]:!1},open(t,e={}){this.window||(this.window=window),t=t.toString(),e.nick&&(t+="?nick="+encodeURIComponent(e.nick));const n=this.window.open(t,"convos_video");["beforeunload","close"].forEach(i=>n.addEventListener(i,()=>this.set(null))),this.set(n)}});function Js(t,e,n){const i=t.slice();return i[39]=e[n],i[41]=n,i}function Qs(t){let e,n,i,o,r,s;return n=new he({props:{name:"plus-circle"}}),i=new he({props:{name:"times"}}),{c(){e=g("a"),q(n.$$.fragment),q(i.$$.fragment),k(e,"href","#actions"),k(e,"class","btn-hallow can-toggle"),Ye(e,"is-active",t[2]==="actions")},m(l,a){w(l,e,a),z(n,e,null),z(i,e,null),o=!0,r||(s=Ce(e,"click",st(t[13])),r=!0)},p(l,a){(!o||a[0]&4)&&Ye(e,"is-active",l[2]==="actions")},i(l){o||(v(n.$$.fragment,l),v(i.$$.fragment,l),o=!0)},o(l){y(n.$$.fragment,l),y(i.$$.fragment,l),o=!1},d(l){l&&$(e),H(n),H(i),r=!1,s()}}}function Eh(t){let e,n,i,o,r=xe(t[4]),s=[];for(let l=0;l<r.length;l+=1)s[l]=Xs(Js(t,r,l));return{c(){e=g("div");for(let l=0;l<s.length;l+=1)s[l].c();k(e,"class",n="chat-input_menu for-"+t[5])},m(l,a){w(l,e,a);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);o=!0},p(l,a){if(t=l,a[0]&65560){r=xe(t[4]);let c;for(c=0;c<r.length;c+=1){const f=Js(t,r,c);s[c]?s[c].p(f,a):(s[c]=Xs(f),s[c].c(),s[c].m(e,null))}for(;c<s.length;c+=1)s[c].d(1);s.length=r.length}(!o||a[0]&32&&n!==(n="chat-input_menu for-"+t[5]))&&k(e,"class",n)},i(l){o||(l&&at(()=>{o&&(i||(i=et(e,Zt,t[12],!0)),i.run(1))}),o=!0)},o(l){l&&(i||(i=et(e,Zt,t[12],!1)),i.run(0)),o=!1},d(l){l&&$(e),yt(s,l),l&&i&&i.end()}}}function Ch(t){let e,n,i,o,r,s=t[1]("Attach a file")+"",l,a,c,f=t[8]&&xs(t);return o=new he({props:{name:"cloud-upload-alt"}}),{c(){e=g("div"),f&&f.c(),n=C(),i=g("label"),q(o.$$.fragment),r=C(),l=O(s),k(i,"for","upload_files"),k(e,"class","chat-input_menu for-actions")},m(d,p){w(d,e,p),f&&f.m(e,null),u(e,n),u(e,i),z(o,i,null),u(i,r),u(i,l),c=!0},p(d,p){t=d,t[8]?f?(f.p(t,p),p[0]&256&&v(f,1)):(f=xs(t),f.c(),v(f,1),f.m(e,n)):f&&(ye(),y(f,1,1,()=>{f=null}),Se()),(!c||p[0]&2)&&s!==(s=t[1]("Attach a file")+"")&&R(l,s)},i(d){c||(v(f),v(o.$$.fragment,d),d&&at(()=>{c&&(a||(a=et(e,Zt,t[12],!0)),a.run(1))}),c=!0)},o(d){y(f),y(o.$$.fragment,d),d&&(a||(a=et(e,Zt,t[12],!1)),a.run(0)),c=!1},d(d){d&&$(e),f&&f.d(),H(o),d&&a&&a.end()}}}function Xs(t){let e,n=(t[39].text||t[39].val)+"",i,o;return{c(){e=g("a"),k(e,"href","#index:"+t[41]),k(e,"tabindex","-1"),Ye(e,"has-focus",t[41]===t[3])},m(r,s){w(r,e,s),e.innerHTML=n,i||(o=Ce(e,"click",st(t[16])),i=!0)},p(r,s){s[0]&16&&n!==(n=(r[39].text||r[39].val)+"")&&(e.innerHTML=n),s[0]&8&&Ye(e,"has-focus",r[41]===r[3])},d(r){r&&$(e),i=!1,o()}}}function xs(t){let e,n,i,o=t[1]("Start a video conference")+"",r,s,l,a;return n=new he({props:{name:"video"}}),{c(){e=g("a"),q(n.$$.fragment),i=C(),r=O(o),k(e,"href",t[8])},m(c,f){w(c,e,f),z(n,e,null),u(e,i),u(e,r),s=!0,l||(a=Ce(e,"click",t[15]),l=!0)},p(c,f){(!s||f[0]&2)&&o!==(o=c[1]("Start a video conference")+"")&&R(r,o),(!s||f[0]&256)&&k(e,"href",c[8])},i(c){s||(v(n.$$.fragment,c),s=!0)},o(c){y(n.$$.fragment,c),s=!1},d(c){c&&$(e),H(n),l=!1,a()}}}function Ah(t){let e,n,i,o,r,s,l,a=t[0].is("conversation"),c,f,d,p,h,_=Nt(t[1](t[9]))+"",m,S,b,E,N,j,I,A,M=a&&Qs(t);d=new he({props:{name:t[10]}});const D=[Ch,Eh],P=[];function J(W,T){return T[0]&5&&(b=null),b==null&&(b=!!(W[2]==="actions"&&W[0].is("conversation"))),b?0:W[4].length?1:-1}return~(E=J(t,[-1,-1]))&&(N=P[E]=D[E](t)),{c(){e=g("form"),n=g("input"),i=C(),o=g("textarea"),r=C(),s=g("textarea"),l=C(),M&&M.c(),c=C(),f=g("button"),q(d.$$.fragment),p=C(),h=g("span"),m=O(_),S=C(),N&&N.c(),k(n,"type","file"),k(n,"id","upload_files"),k(n,"name","upload_files"),k(n,"class","non-interactive"),k(o,"class","non-interactive"),k(o,"placeholder",t[11]),k(s,"class","is-primary-input"),k(s,"placeholder",t[11]),k(h,"class","tooltip is-above is-left"),k(f,"type","buttton"),k(f,"class","btn-hallow has-tooltip chat-input__send"),k(e,"class","chat-input")},m(W,T){w(W,e,T),u(e,n),u(e,i),u(e,o),t[29](o),u(e,r),u(e,s),u(e,l),M&&M.m(e,null),u(e,c),u(e,f),z(d,f,null),u(f,p),u(f,h),u(h,m),u(e,S),~E&&P[E].m(e,null),j=!0,I||(A=[Ce(window,"click",t[28]),Ce(n,"change",function(){Un(t[7])&&t[7].apply(this,arguments)}),Tr(t[14].call(null,s)),Ce(f,"click",t[17]),Ce(e,"submit",st(t[27]))],I=!0)},p(W,T){t=W,(!j||T[0]&2048)&&k(o,"placeholder",t[11]),(!j||T[0]&2048)&&k(s,"placeholder",t[11]),T[0]&1&&(a=t[0].is("conversation")),a?M?(M.p(t,T),T[0]&1&&v(M,1)):(M=Qs(t),M.c(),v(M,1),M.m(e,c)):M&&(ye(),y(M,1,1,()=>{M=null}),Se());const G={};T[0]&1024&&(G.name=t[10]),d.$set(G),(!j||T[0]&514)&&_!==(_=Nt(t[1](t[9]))+"")&&R(m,_);let K=E;E=J(t,T),E===K?~E&&P[E].p(t,T):(N&&(ye(),y(P[K],1,1,()=>{P[K]=null}),Se()),~E?(N=P[E],N?N.p(t,T):(N=P[E]=D[E](t),N.c()),v(N,1),N.m(e,null)):N=null)},i(W){j||(v(M),v(d.$$.fragment,W),v(N),j=!0)},o(W){y(M),y(d.$$.fragment,W),y(N),j=!1},d(W){W&&$(e),t[29](null),M&&M.d(),H(d),~E&&P[E].d(),I=!1,ut(A)}}}function Oh(t,e,n){let i,o,r,s,l,a,c,f,d=Oe,p=()=>(d(),d=_t(m,ae=>n(26,f=ae)),m);we(t,lt,ae=>n(1,c=ae)),t.$$.on_destroy.push(()=>d());const h=fe;let{uploadProgress:_=0}=e,{conversation:m}=e;p();let S="",b=0,E=[],N="none",j={y:-10,duration:200},I,A,M=0;const D=mt("user"),P=new Ef;function J(ae){const $e=ae.target.closest("a"),De=!$e||S?"":$e.href.replace(/.*#/,"");setTimeout(()=>{n(2,S=De)},1)}function W(ae,$e){const{before:De,middle:je,after:Pe}=kh(ae,{...$e,cursorPos:I.selectionStart,value:I.value});Y(De+je+Pe),I.selectionStart=I.selectionEnd=(De+je).length}function T(){I&&I.focus()}function G(ae,$e){E.length&&(ae.preventDefault(),n(3,b+=$e),b<0&&n(3,b=E.length-1),b>=E.length&&n(3,b=0),W(E[b],{replace:!0}))}function K(ae){!ae.conversation_id&&m.conversation_id&&(ae.conversation_id=m.conversation_id)}function Q(ae){n(3,b=0),n(22,M=ae.selectionStart),m.update({userInput:ae.value}),ae.value.length||P.update({index:-1})}function U(ae){I=ae,I.addEventListener("focus",()=>n(22,M=I.value.length+1)),I.addEventListener("change",()=>Q(I)),I.addEventListener("input",V),I.addEventListener("keyup",$e=>{($e.key.length===1||["ArrowLeft","ArrowRight","Backspace"].indexOf($e.key)!==-1)&&Q(I)}),I.addEventListener("keydown",$e=>{if(!($e.key==="ArrowDown"&&P.render($e,-1))&&!($e.key==="ArrowUp"&&P.render($e,1))){if($e.key==="ArrowDown")return G($e,$e.shiftKey?4:1);if($e.key==="ArrowUp")return G($e,$e.shiftKey?-4:-1);if($e.key==="Enter")return Z($e);if($e.key==="Tab")return G($e,$e.shiftKey?-1:1)}}),P.attach(I),Y(Ie.undefined(m.userInput)?"":m.userInput)}function L(ae){ae.preventDefault(),Sh.open(a,{nick:m.participants.me().nick});const $e=m.messages.toArray().slice(-20).find(De=>De.message.indexOf(a)!==-1);$e&&$e.ts.toEpoch()>uo()-600||m.send({method:"send",message:ko.conversationToExternalUrl(m)})}function V(){A.maxHeight||n(6,A.maxHeight=A.parentNode.offsetHeight,A),n(6,A.value=I.value,A),n(6,A.style.width=I.offsetWidth+"px",A),I.style.height=(A.maxHeight>A.scrollHeight?A.scrollHeight:A.maxHeight)+"px"}function F(ae){n(3,b=parseInt(ae.target.closest("a").href.replace(/.*index:/,""),10)),W(E[b],{padAfter:!0,replace:!0}),setTimeout(()=>{Q(I),I.focus()},1)}function Z(ae){if(E[b])ae.preventDefault(),W(E[b],{replace:!0}),n(22,M=I.selectionStart+1);else if(!ae.altKey&&!ae.ctrlKey&&!ae.metaKey&&!ae.shiftKey){ae.preventDefault();const De={method:"send"};De.message=wh(I.value),De.message.length&&m.send(De,K),P.add(De.message),m.is("search")||Y(""),setTimeout(V,10)}}function Y(ae){I&&(I.value=ae),m.update({userInput:ae})}function B(ae){I&&(n(4,E=ae>I.value.length?[]:yh(I.value,ae,{conversation:m,user:D})),n(5,N=E.length&&E[0].autocompleteCategory||"none"))}function oe(ae){oe.lock!==ae.path&&(n(23,oe.lock=ae.path,oe),Y(Ie.undefined(ae.userInput)?"":ae.userInput))}function fe(ae){const $e=ae.target&&ae.target.files||ae.dataTransfer&&ae.dataTransfer.files;if(!$e||!$e.length)return;if($e.length>1)return m.addMessages({message:"Cannot upload more than one file.",type:"error"});const De=new FormData;De.append("file",$e[0]),n(7,fe.file=$e[0],fe);const je=nt.op("uploadFile");je.on("progress",Pe=>{_<100&&n(18,_=parseInt(100*(Pe.total?Pe.loaded/Pe.total:.02),10)),_>=100&&n(18,_=0)}),n(18,_=1),je.perform({formData:De}).then(Pe=>{const Te=Pe.res.body;if(n(18,_=0),Te.files&&Te.files.length)return W(Te.files[0].url,{append:!0});Te.errors&&m.addMessages({message:"Could not upload file: %1",vars:[c(Ir(Te.errors))],type:"error"})})}function te(ae){_i.call(this,t,ae)}const ue=()=>{n(2,S="")};function Ne(ae){de[ae?"unshift":"push"](()=>{A=ae,n(6,A)})}return t.$$set=ae=>{"uploadProgress"in ae&&n(18,_=ae.uploadProgress),"conversation"in ae&&p(n(0,m=ae.conversation))},t.$$.update=()=>{t.$$.dirty[0]&1&&m&&n(2,S=""),t.$$.dirty[0]&1&&n(25,i=D.findConversation({connection_id:m.connection_id})),t.$$.dirty[0]&33554432&&n(24,o=i&&i.nick),t.$$.dirty[0]&50331651&&n(11,r=m.is("search")?c("What are you looking for?"):i&&i.is("unreachable")?c("Connecting..."):c("What is on your mind %1?",o)),t.$$.dirty[0]&1&&n(10,s=m.is("search")?"search":"paper-plane"),t.$$.dirty[0]&3&&n(9,l=m.is("search")?c("Search"):c("Send")),t.$$.dirty[0]&1&&n(8,a=ko.conversationToInternalUrl(m)),t.$$.dirty[0]&67108864&&P.update({conversation:f}),t.$$.dirty[0]&4194304&&B(M),t.$$.dirty[0]&8388609&&oe(m)},[m,c,S,b,E,N,A,fe,a,l,s,r,j,J,U,L,F,Z,_,h,W,T,M,oe,o,i,f,te,ue,Ne]}class Uc extends Xe{constructor(e){super(),Qe(this,e,Oh,Ah,Ze,{uploader:19,uploadProgress:18,conversation:0,fillIn:20,focus:21},null,[-1,-1])}get uploader(){return this.$$.ctx[19]}get fillIn(){return this.$$.ctx[20]}get focus(){return this.$$.ctx[21]}}const ii={b:"channel_ban",C:"ctcp_block",c:"colour_filter",e:"ban_exemption",F:"enable_forwarding",f:"forward",g:"free_invite",i:"invite_only",I:"invite_exemption",j:"join_throttle",k:"password",l:"join_limit",L:"large_ban_list",m:"moderated",M:"login_to_talk",n:"prevent_external_send",P:"permanent",p:"privat",Q:"block_forwarded_users",q:"quiet",r:"block_unidentified",R:"login_to_join",s:"secret",S:"secure_connection_only",t:"topic_protection"};function $i(t){return ii[t]?ii[t]:Object.keys(ii).filter(e=>t===ii[e])[0]||""}const el=["Members","Bots","Bots","Voiced","Half operators","Operators","Administrators","Founders"],Nh={a:"admin",B:"bot",h:"half_operator",i:"invisible",I:"whois_hide_online",o:"operator",p:"whois_hide_channels",R:"privmsg_from_registered_only",q:"founder",r:"registered",S:"service_bot",T:"ctcp_block",t:"vhost",v:"voice",W:"whois_notifications",x:"cloaked_hostname",z:"secure_connection",Z:"secure_connection_only"};function tl(t,e,n){const i=t.slice();return i[5]=e[n],i}function Th(t){let e,n,i,o=t[1]("Settings")+"",r,s,l,a;return n=new he({props:{name:"users-cog"}}),{c(){e=g("a"),q(n.$$.fragment),i=C(),r=O(o),k(e,"href","#settings")},m(c,f){w(c,e,f),z(n,e,null),u(e,i),u(e,r),s=!0,l||(a=Ce(e,"click",wt.toggle),l=!0)},p(c,f){(!s||f&2)&&o!==(o=c[1]("Settings")+"")&&R(r,o)},i(c){s||(v(n.$$.fragment,c),s=!0)},o(c){y(n.$$.fragment,c),s=!1},d(c){c&&$(e),H(n),l=!1,a()}}}function Mh(t){let e,n,i=xe(t[3](t[2].toArray())),o=[];for(let s=0;s<i.length;s+=1)o[s]=nl(tl(t,i,s));const r=s=>y(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=pt()},m(s,l){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,l);w(s,e,l),n=!0},p(s,l){if(l&14){i=xe(s[3](s[2].toArray()));let a;for(a=0;a<i.length;a+=1){const c=tl(s,i,a);o[a]?(o[a].p(c,l),v(o[a],1)):(o[a]=nl(c),o[a].c(),v(o[a],1),o[a].m(e.parentNode,e))}for(ye(),a=i.length;a<o.length;a+=1)r(a);Se()}},i(s){if(!n){for(let l=0;l<i.length;l+=1)v(o[l]);n=!0}},o(s){o=o.filter(Boolean);for(let l=0;l<o.length;l+=1)y(o[l]);n=!1},d(s){s&&$(e),yt(o,s)}}}function Rh(t){let e,n,i,o,r=t[5].nick+"",s,l,a,c;return n=new he({props:{name:"pick:"+t[5].nick,family:"solid",color:t[5].color}}),{c(){e=g("a"),q(n.$$.fragment),i=C(),o=g("span"),s=O(r),l=C(),k(e,"href",a="#action:join:"+t[5].nick),k(e,"class","participant prevent-default")},m(f,d){w(f,e,d),z(n,e,null),u(e,i),u(e,o),u(o,s),u(e,l),c=!0},p(f,d){const p={};d&4&&(p.name="pick:"+f[5].nick),d&4&&(p.color=f[5].color),n.$set(p),(!c||d&4)&&r!==(r=f[5].nick+"")&&R(s,r),(!c||d&4&&a!==(a="#action:join:"+f[5].nick))&&k(e,"href",a)},i(f){c||(v(n.$$.fragment,f),c=!0)},o(f){y(n.$$.fragment,f),c=!1},d(f){f&&$(e),H(n)}}}function Lh(t){let e,n=t[1](t[5].heading)+"",i;return{c(){e=g("h3"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&6&&n!==(n=o[1](o[5].heading)+"")&&R(i,n)},i:Oe,o:Oe,d(o){o&&$(e)}}}function nl(t){let e,n,i,o;const r=[Lh,Rh],s=[];function l(a,c){return a[5].heading?0:1}return e=l(t),n=s[e]=r[e](t),{c(){n.c(),i=pt()},m(a,c){s[e].m(a,c),w(a,i,c),o=!0},p(a,c){let f=e;e=l(a),e===f?s[e].p(a,c):(ye(),y(s[f],1,1,()=>{s[f]=null}),Se(),n=s[e],n?n.p(a,c):(n=s[e]=r[e](a),n.c()),v(n,1),n.m(i.parentNode,i))},i(a){o||(v(n),o=!0)},o(a){y(n),o=!1},d(a){a&&$(i),s[e].d(a)}}}function Ih(t){let e,n=t[1]("Participants (%1)",t[2].length)+"",i,o,r,s,l,a;const c=[Mh,Th],f=[];function d(p,h){return p[2].length?0:1}return s=d(t),l=f[s]=c[s](t),{c(){e=g("h2"),i=O(n),o=C(),r=g("nav"),l.c(),k(e,"class","participants-heading"),k(r,"class","participants")},m(p,h){w(p,e,h),u(e,i),w(p,o,h),w(p,r,h),f[s].m(r,null),a=!0},p(p,[h]){(!a||h&6)&&n!==(n=p[1]("Participants (%1)",p[2].length)+"")&&R(i,n);let _=s;s=d(p),s===_?f[s].p(p,h):(ye(),y(f[_],1,1,()=>{f[_]=null}),Se(),l=f[s],l?l.p(p,h):(l=f[s]=c[s](p),l.c()),v(l,1),l.m(r,null))},i(p){a||(v(l),a=!0)},o(p){y(l),a=!1},d(p){p&&($(e),$(o),$(r)),f[s].d()}}}function Ph(t,e,n){let i,o,r,s=Oe,l=()=>(s(),s=_t(i,f=>n(2,r=f)),i);we(t,lt,f=>n(1,o=f)),t.$$.on_destroy.push(()=>s());let{conversation:a}=e;function c(f){const d=[];let p=-1;for(const h of f)p!=h.group&&d.push({heading:el[h.group]||el[0]}),p=h.group,d.push(h);return d}return t.$$set=f=>{"conversation"in f&&n(4,a=f.conversation)},t.$$.update=()=>{t.$$.dirty&16&&l(n(0,i=a.participants))},[i,o,r,c,a]}class Bc extends Xe{constructor(e){super(),Qe(this,e,Ph,Ih,Ze,{conversation:4})}}function Dh(t){let e,n,i,o,r=t[3](t[2].topic?"Topic for %1 is: %2":"No topic is set for %1.",t[2].name,t[2].topic)+"",s,l,a,c,f;n=new he({props:{name:"info-circle"}}),a=new he({props:{name:"info-circle"}});function d(_,m){return _[4].length===1?Fh:Bh}let p=d(t),h=p(t);return{c(){e=g("p"),q(n.$$.fragment),i=C(),o=new Rt(!1),s=C(),l=g("p"),q(a.$$.fragment),c=C(),h.c(),o.a=null},m(_,m){w(_,e,m),z(n,e,null),u(e,i),o.m(r,e),w(_,s,m),w(_,l,m),z(a,l,null),u(l,c),h.m(l,null),f=!0},p(_,m){(!f||m&12)&&r!==(r=_[3](_[2].topic?"Topic for %1 is: %2":"No topic is set for %1.",_[2].name,_[2].topic)+"")&&o.p(r),p===(p=d(_))&&h?h.p(_,m):(h.d(1),h=p(_),h&&(h.c(),h.m(l,null)))},i(_){f||(v(n.$$.fragment,_),v(a.$$.fragment,_),f=!0)},o(_){y(n.$$.fragment,_),y(a.$$.fragment,_),f=!1},d(_){_&&($(e),$(s),$(l)),H(n),H(a),h.d()}}}function Uh(t){let e,n,i,o,r=t[3]('This is a private conversation with "%1".',t[2].name)+"",s;return n=new he({props:{name:"info-circle"}}),{c(){e=g("p"),q(n.$$.fragment),i=C(),o=new Rt(!1),o.a=null},m(l,a){w(l,e,a),z(n,e,null),u(e,i),o.m(r,e),s=!0},p(l,a){(!s||a&12)&&r!==(r=l[3]('This is a private conversation with "%1".',l[2].name)+"")&&o.p(r)},i(l){s||(v(n.$$.fragment,l),s=!0)},o(l){y(n.$$.fragment,l),s=!1},d(l){l&&$(e),H(n)}}}function Bh(t){let e,n=t[3]("There are %1 participants in this conversation.",t[4].length)+"",i;return{c(){e=new Rt(!1),i=pt(),e.a=i},m(o,r){e.m(n,o,r),w(o,i,r)},p(o,r){r&24&&n!==(n=o[3]("There are %1 participants in this conversation.",o[4].length)+"")&&e.p(n)},d(o){o&&($(i),e.d())}}}function Fh(t){let e=t[5]("You are the only participant in this conversation.")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&32&&e!==(e=i[5]("You are the only participant in this conversation.")+"")&&R(n,e)},d(i){i&&$(n)}}}function jh(t){let e,n,i,o,r;const s=[Uh,Dh],l=[];function a(c,f){return f&4&&(e=null),e==null&&(e=!!c[2].is("private")),e?0:c[2].frozen?-1:1}return~(n=a(t,-1))&&(i=l[n]=s[n](t)),{c(){i&&i.c(),o=pt()},m(c,f){~n&&l[n].m(c,f),w(c,o,f),r=!0},p(c,[f]){let d=n;n=a(c,f),n===d?~n&&l[n].p(c,f):(i&&(ye(),y(l[d],1,1,()=>{l[d]=null}),Se()),~n?(i=l[n],i?i.p(c,f):(i=l[n]=s[n](c),i.c()),v(i,1),i.m(o.parentNode,o)):i=null)},i(c){r||(v(i),r=!0)},o(c){y(i),r=!1},d(c){c&&$(o),~n&&l[n].d(c)}}}function zh(t,e,n){let i,o,r=Oe,s=()=>(r(),r=_t(p,h=>n(2,o=h)),p),l,a,c=Oe,f=()=>(c(),c=_t(i,h=>n(4,a=h)),i),d;we(t,jt,h=>n(3,l=h)),we(t,lt,h=>n(5,d=h)),t.$$.on_destroy.push(()=>r()),t.$$.on_destroy.push(()=>c());let{conversation:p}=e;return s(),t.$$set=h=>{"conversation"in h&&s(n(0,p=h.conversation))},t.$$.update=()=>{t.$$.dirty&1&&f(n(1,i=p.participants))},[p,i,o,l,a,d]}class Hh extends Xe{constructor(e){super(),Qe(this,e,zh,jh,Ze,{conversation:0})}}const qh={0:"Jan",1:"Feb",2:"March",3:"Apr",4:"May",5:"Jun",6:"July",7:"Aug",8:"Sept",9:"Oct",10:"Nov",11:"Dec"},il={H:"_getPaddedHours",M:"_getPaddedMinutes",S:"_getPaddedSeconds",b:"_getMonthAbbr",e:"getDate",Y:"getFullYear"},Wh=t=>!!String(t||"").match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/);class $t extends Date{constructor(e){typeof e=="string"&&!e.match(/Z$/)&&(e+="Z"),super(e||new Date)}format(e){return e.replace(/%(\w)/g,(n,i)=>il[i]?this[il[i]]():i)}getHumanDate(e={}){let n=this.format("%b %e");const i=new $t;return(!(this.getYear()===i.getYear())||e.year)&&(n+=", "+this.getFullYear()),n}setDate(e,n){return[n?super.setUTCDate(e):super.setDate(e),this][1]}setFullYear(e,n){return[n?super.setUTCFullYear(e):super.setFullYear(e),this][1]}setHours(e,n){return[n?super.setUTCHours(e):super.setHours(e),this][1]}setMilliseconds(e,n){return[n?super.setUTCMilliseconds(e):super.setMilliseconds(e),this][1]}setMinutes(e,n){return[n?super.setUTCMinutes(e):super.setMinutes(e),this][1]}setMonth(e,n){return[n?super.setUTCMonth(e):super.setMonth(e),this][1]}setSeconds(e,n){return[n?super.setUTCSeconds(e):super.setSeconds(e),this][1]}setTime(e){return[super.setTime(e),this][1]}setYear(e){return[this.setYear(e),this][1]}toEpoch(){return this.getTime()/1e3}_getMonthAbbr(){return qh[this.getMonth()]||""}_getPaddedHours(){return String(this.getHours()).padStart(2,"0")}_getPaddedMinutes(){return String(this.getMinutes()).padStart(2,"0")}_getPaddedSeconds(){return String(this.getSeconds()).padStart(2,"0")}}function Gh(t){let e,n,i,o,r,s,l;n=new he({props:{animation:t[2],name:t[4]}});const a=t[13].default,c=Gt(a,t,t[12],null);return{c(){e=g("button"),q(n.$$.fragment),i=C(),c&&c.c(),k(e,"class",o=t[3].join(" ")),e.disabled=t[5],k(e,"type",t[1])},m(f,d){w(f,e,d),z(n,e,null),u(e,i),c&&c.m(e,null),r=!0,s||(l=Ce(e,"click",t[14]),s=!0)},p(f,[d]){const p={};d&4&&(p.animation=f[2]),d&16&&(p.name=f[4]),n.$set(p),c&&c.p&&(!r||d&4096)&&Yt(c,a,f,f[12],r?Kt(a,f[12],d,null):Vt(f[12]),null),(!r||d&8&&o!==(o=f[3].join(" ")))&&k(e,"class",o),(!r||d&32)&&(e.disabled=f[5]),(!r||d&2)&&k(e,"type",f[1])},i(f){r||(v(n.$$.fragment,f),v(c,f),r=!0)},o(f){y(n.$$.fragment,f),y(c,f),r=!1},d(f){f&&$(e),H(n),c&&c.d(f),s=!1,l()}}}const Kh=500;function Yh(t,e,n){let i,o,r=Oe,s=()=>(r(),r=_t(S,I=>n(11,o=I)),S);t.$$.on_destroy.push(()=>r());let{$$slots:l={},$$scope:a}=e,c="",{class:f=""}=e,d=[],p=!1,h=0,{disabled:_=!1}=e,{icon:m=""}=e,{op:S=new To({api:!1,id:""})}=e;s();let{type:b=""}=e,E=m;function N(I){I&&n(10,h=new $t().toEpoch()),n(2,c=I?"spin":""),n(4,E=I?"spinner":m),n(9,p=I)}function j(I){_i.call(this,t,I)}return t.$$set=I=>{"class"in I&&n(6,f=I.class),"disabled"in I&&n(7,_=I.disabled),"icon"in I&&n(8,m=I.icon),"op"in I&&s(n(0,S=I.op)),"type"in I&&n(1,b=I.type),"$$scope"in I&&n(12,a=I.$$scope)},t.$$.update=()=>{t.$$.dirty&2048&&o.is("loading")&&N(!0),t.$$.dirty&3072&&(o.is("loading")||setTimeout(()=>N(!1),Kh-(new $t().toEpoch()-h))),t.$$.dirty&320&&n(3,d=["btn","for-"+(m||"default")].concat(f)),t.$$.dirty&640&&n(5,i=_||p)},[S,b,c,d,E,i,f,_,m,p,h,o,a,l,j]}class ft extends Xe{constructor(e){super(),Qe(this,e,Yh,Gh,Ze,{class:6,disabled:7,icon:8,op:0,type:1})}}const Vh=t=>({}),ol=t=>({});function Zh(t){let e,n,i,o,r,s,l,a,c;r=new he({props:{family:"regular",name:t[7]}});const f=t[11].label,d=Gt(f,t,t[10],ol);return{c(){e=g("label"),n=g("input"),o=C(),q(r.$$.fragment),s=C(),d&&d.c(),k(n,"type","checkbox"),k(n,"id",t[5]),k(n,"name",t[4]),n.checked=i=!!t[0],n.disabled=t[2],k(e,"class","checkbox"),e.hidden=t[3],Ye(e,"has-badge",t[1]),Ye(e,"has-focus",t[6]),Ye(e,"is-disabled",t[2])},m(p,h){w(p,e,h),u(e,n),u(e,o),z(r,e,null),u(e,s),d&&d.m(e,null),l=!0,a||(c=[Ce(n,"blur",t[12]),Ce(n,"change",t[13]),Ce(n,"focus",t[14])],a=!0)},p(p,[h]){(!l||h&32)&&k(n,"id",p[5]),(!l||h&16)&&k(n,"name",p[4]),(!l||h&1&&i!==(i=!!p[0]))&&(n.checked=i),(!l||h&4)&&(n.disabled=p[2]);const _={};h&128&&(_.name=p[7]),r.$set(_),d&&d.p&&(!l||h&1024)&&Yt(d,f,p,p[10],l?Kt(f,p[10],h,Vh):Vt(p[10]),ol),(!l||h&8)&&(e.hidden=p[3]),(!l||h&2)&&Ye(e,"has-badge",p[1]),(!l||h&64)&&Ye(e,"has-focus",p[6]),(!l||h&4)&&Ye(e,"is-disabled",p[2])},i(p){l||(v(r.$$.fragment,p),v(d,p),l=!0)},o(p){y(r.$$.fragment,p),y(d,p),l=!1},d(p){p&&$(e),H(r),d&&d.d(p),a=!1,ut(c)}}}function Jh(t,e,n){let i,o,{$$slots:r={},$$scope:s}=e,{badge:l=!1}=e,{disabled:a=!1}=e,{hidden:c=!1}=e,{icon:f="square"}=e,{name:d=""}=e,{id:p=d?"form_"+d:No()}=e,{value:h}=e,_=!1;const m=()=>{n(6,_=!1)},S=E=>{n(0,h=E.target.checked)},b=()=>{n(6,_=!0)};return t.$$set=E=>{"badge"in E&&n(1,l=E.badge),"disabled"in E&&n(2,a=E.disabled),"hidden"in E&&n(3,c=E.hidden),"icon"in E&&n(8,f=E.icon),"name"in E&&n(4,d=E.name),"id"in E&&n(5,p=E.id),"value"in E&&n(0,h=E.value),"$$scope"in E&&n(10,s=E.$$scope)},t.$$.update=()=>{t.$$.dirty&256&&n(9,i=f==="caret"?["caret-square-down","caret-square-up"]:["square","check-square"]),t.$$.dirty&513&&n(7,o=i[h?1:0])},[h,l,a,c,d,p,_,o,f,i,s,r,m,S,b]}class it extends Xe{constructor(e){super(),Qe(this,e,Jh,Zh,Ze,{badge:1,disabled:2,hidden:3,icon:8,name:4,id:5,value:0})}}class gn{constructor(e="http://localhost"){this._url=new URL("http://localhost"),Object.defineProperty(this,"href",{get:()=>this._url.href.replace(/^http:/,this.protocol),set:n=>{this._url.href=n.replace(/^\w+:/,"http:"),this.protocol=n.match(/^\w+:/)[0]}}),["host","pathname","password","searchParams","username"].forEach(n=>{Object.defineProperty(this,n,{get:()=>this._url[n],set:i=>{this._url[n]=i}})}),this.href=e}fromFields(e){Ie.string(e.protocol)&&(this.protocol=e.protocol.replace(/:?$/,":")),Ie.string(e.host)&&(this.host=e.host),Ie.string(e.password)&&(this.password=encodeURIComponent(e.password)),Ie.string(e.username)&&(this.username=encodeURIComponent(e.username)),Ie.string(e.conversation_id)&&(this.pathname=encodeURIComponent(e.conversation_id));const n=this.searchParams;return Ie.string(e.local_address)&&n.append("local_address",e.local_address||""),Ie.string(e.nick)&&n.append("nick",e.nick.trim()),Ie.string(e.realname)&&e.realname.length&&n.append("realname",e.realname.trim()),Ie.string(e.sasl)&&n.append("sasl",e.sasl||"none"),n.append("tls",Ie.true(e.tls)?"1":"0"),n.append("tls_verify",Ie.true(e.tls)&&Ie.true(e.tls_verify)?"1":"0"),this}toFields(e={}){e.protocol=this.protocol.replace(/:$/,""),e.host=this.host,e.password=Ie.string(this.password)?decodeURIComponent(this.password):"",e.username=Ie.string(this.username)?decodeURIComponent(this.username):"",e.conversation_id=decodeURIComponent(this.pathname.split("/").filter(i=>i.length)[0]||"");const n=this.searchParams;return e.local_address=n.get("local_address")||e.local_address||"",e.nick=n.get("nick")||e.nick||"",e.realname=n.get("realname")||e.realname||"",e.sasl=n.get("sasl")||e.sasl||"none",e.realname=n.get("realname")||e.realname||"",e.tls=Ie.true(n.get("tls")),e.tls_verify=Ie.true(n.get("tls_verify")),e}toString(){return this.href.replace(/^http:/,this.protocol)}}function Qh(t){let e,n=t[4](t[1])+"",i,o,r;return{c(){e=g("div"),i=O(n),k(e,"class","success")},m(s,l){w(s,e,l),u(e,i),r=!0},p(s,l){(!r||l&18)&&n!==(n=s[4](s[1])+"")&&R(i,n)},i(s){r||(s&&at(()=>{r&&(o||(o=et(e,Bt,{},!0)),o.run(1))}),r=!0)},o(s){s&&(o||(o=et(e,Bt,{},!1)),o.run(0)),r=!1},d(s){s&&$(e),s&&o&&o.end()}}}function Xh(t){let e,n=t[4](t[2].error())+"",i,o,r;return{c(){e=g("div"),i=O(n),k(e,"class","error")},m(s,l){w(s,e,l),u(e,i),r=!0},p(s,l){(!r||l&20)&&n!==(n=s[4](s[2].error())+"")&&R(i,n)},i(s){r||(s&&at(()=>{r&&(o||(o=et(e,Bt,{},!0)),o.run(1))}),r=!0)},o(s){s&&(o||(o=et(e,Bt,{},!1)),o.run(0)),r=!1},d(s){s&&$(e),s&&o&&o.end()}}}function xh(t){let e,n,i,o,r;const s=[Xh,Qh],l=[];function a(c,f){return f&4&&(e=null),f&12&&(n=null),e==null&&(e=!!c[2].is("error")),e?0:(n==null&&(n=!!(c[2].is("success")&&c[3])),n?1:-1)}return~(i=a(t,-1))&&(o=l[i]=s[i](t)),{c(){o&&o.c(),r=pt()},m(c,f){~i&&l[i].m(c,f),w(c,r,f)},p(c,[f]){let d=i;i=a(c,f),i===d?~i&&l[i].p(c,f):(o&&(ye(),y(l[d],1,1,()=>{l[d]=null}),Se()),~i?(o=l[i],o?o.p(c,f):(o=l[i]=s[i](c),o.c()),v(o,1),o.m(r.parentNode,r)):o=null)},i(c){v(o)},o(c){y(o)},d(c){c&&$(r),~i&&l[i].d(c)}}}function e_(t,e,n){let i,o=Oe,r=()=>(o(),o=_t(l,p=>n(2,i=p)),l),s;we(t,lt,p=>n(4,s=p)),t.$$.on_destroy.push(()=>o());let{op:l=new To({})}=e;r();let{success:a="Saved."}=e,c=!1,f;Rr(()=>f&&clearTimeout(f));function d(p){if(!p.is("success"))return n(3,c=!1);c||(n(3,c=!0),f=setTimeout(()=>n(3,c=!1),2e3))}return t.$$set=p=>{"op"in p&&r(n(0,l=p.op)),"success"in p&&n(1,a=p.success)},t.$$.update=()=>{t.$$.dirty&4&&d(i)},[l,a,i,c,s]}class Lt extends Xe{constructor(e){super(),Qe(this,e,e_,xh,Ze,{op:0,success:1})}}function rl(t,e,n){const i=t.slice();return i[26]=e[n],i[28]=n,i}const t_=t=>({}),sl=t=>({});function n_(t){let e;return{c(){e=O("Label")},m(n,i){w(n,e,i)},d(n){n&&$(e)}}}function ll(t){let e,n=(t[26].length>1?t[26][1]:t[26][0])+"",i,o,r,s;function l(){return t[20](t[28])}function a(){return t[21](t[28])}return{c(){e=g("a"),i=O(n),k(e,"href",o="#"+t[28]+":"+t[26][0]),k(e,"class","select-field__option"),k(e,"tabindex","-1"),Ye(e,"is-active",t[28]===t[8])},m(c,f){w(c,e,f),u(e,i),r||(s=[Ce(e,"click",st(t[13])),Ce(e,"focus",l),Ce(e,"mouseover",a)],r=!0)},p(c,f){t=c,f&512&&n!==(n=(t[26].length>1?t[26][1]:t[26][0])+"")&&R(i,n),f&512&&o!==(o="#"+t[28]+":"+t[26][0])&&k(e,"href",o),f&256&&Ye(e,"is-active",t[28]===t[8])},d(c){c&&$(e),r=!1,ut(s)}}}function i_(t){let e,n,i,o,r,s,l,a,c,f,d;const p=t[17].label,h=Gt(p,t,t[16],sl),_=h||n_();let m=xe(t[9]),S=[];for(let b=0;b<m.length;b+=1)S[b]=ll(rl(t,m,b));return{c(){e=g("div"),n=g("label"),_&&_.c(),i=C(),o=g("input"),r=C(),s=g("input"),l=C(),a=g("div");for(let b=0;b<S.length;b+=1)S[b].c();k(n,"for",t[3]),k(o,"type","hidden"),k(o,"name",t[2]),k(s,"type","text"),k(s,"id",t[3]),k(s,"autocomplete","off"),k(s,"placeholder",t[4]),s.readOnly=t[5],k(a,"class","select-field__options"),k(e,"class","select-field text-field"),e.hidden=t[1],Ye(e,"is-open",t[7]),Ye(e,"is-readonly",t[5])},m(b,E){w(b,e,E),u(e,n),_&&_.m(n,null),u(e,i),u(e,o),Ot(o,t[0]),u(e,r),u(e,s),t[19](s),u(e,l),u(e,a);for(let N=0;N<S.length;N+=1)S[N]&&S[N].m(a,null);c=!0,f||(d=[Ce(o,"input",t[18]),Ce(o,"keydown",t[11]),Ce(s,"blur",t[10]),Ce(s,"keydown",t[11]),Ce(s,"keyup",t[12]),Ce(s,"click",st(t[13]))],f=!0)},p(b,[E]){if(h&&h.p&&(!c||E&65536)&&Yt(h,p,b,b[16],c?Kt(p,b[16],E,t_):Vt(b[16]),sl),(!c||E&8)&&k(n,"for",b[3]),(!c||E&4)&&k(o,"name",b[2]),E&1&&Ot(o,b[0]),(!c||E&8)&&k(s,"id",b[3]),(!c||E&16)&&k(s,"placeholder",b[4]),(!c||E&32)&&(s.readOnly=b[5]),E&8960){m=xe(b[9]);let N;for(N=0;N<m.length;N+=1){const j=rl(b,m,N);S[N]?S[N].p(j,E):(S[N]=ll(j),S[N].c(),S[N].m(a,null))}for(;N<S.length;N+=1)S[N].d(1);S.length=m.length}(!c||E&2)&&(e.hidden=b[1]),(!c||E&128)&&Ye(e,"is-open",b[7]),(!c||E&32)&&Ye(e,"is-readonly",b[5])},i(b){c||(v(_,b),c=!0)},o(b){y(_,b),c=!1},d(b){b&&$(e),_&&_.d(b),t[19](null),yt(S,b),f=!1,ut(d)}}}function o_(t,e,n){let{$$slots:i={},$$scope:o}=e,r=0,s,l=!1,a="",c=[],{hidden:f=!1}=e,{name:d=""}=e,{id:p=d?"form_"+d:No()}=e,{options:h}=e,{placeholder:_=""}=e,{readonly:m=!1}=e,{value:S}=e;const b=["ArrowDown","ArrowUp","Enter"];function E(){setTimeout(()=>document.activeElement.closest(".select-field__option")||n(7,l=!1),100),M(S)}function N(G,K){let Q=new RegExp("(?:^|\\s|-)"+bi(K),"i"),U=G.filter(L=>String(L[0])===K);U.length||(U=G.filter(L=>L[0].match(Q)));for(let L=0;L<G.length;L++){const V=G[L];V.length>1&&U.indexOf(V)===-1&&V[1].match(Q)&&U.push(V)}n(8,r=0),n(9,c=U)}function j(G){if(b.indexOf(G.key)!==-1&&G.preventDefault(),G.key==="Tab"){l&&A(G);return}if(!l)return D(G);G.key==="ArrowDown"&&n(8,r++,r),G.key==="ArrowUp"&&n(8,r--,r),G.key==="Enter"&&A(G),r>=h.length&&n(8,r=0),r<0&&n(8,r=h.length-1)}function I(G){(G.key.length===1||G.key==="Backspace")&&n(15,a=s.value)}function A(G){let K;if(G.type==="keydown")K=c.length&&c[r]||h.filter(Q=>Q[0]===S)[0];else{const Q=$r(G.target,".select-field__option").href.replace(/^.*?#\d+:/,"");K=c.filter(U=>String(U[0])===Q)[0]||[]}(!K||!K.length)&&(K=[""]),n(0,S=K[0]),n(7,l=!1)}function M(G){const K=c.filter(Q=>String(Q[0])===G)[0]||[];n(6,s.value=K.length>1?K[1]:K.length?K[0]:G,s)}function D(G){if(m)return;const K=G&&G.target&&$r(G.target,".select-field__option");return l||(n(8,r=c.map(Q=>Q[0]).indexOf(S)),s.setSelectionRange(0,9999)),K?A(G):n(7,l=!l)}function P(){S=this.value,n(0,S)}function J(G){de[G?"unshift":"push"](()=>{s=G,n(6,s),n(14,h),n(0,S)})}const W=G=>{n(8,r=G)},T=G=>{n(8,r=G)};return t.$$set=G=>{"hidden"in G&&n(1,f=G.hidden),"name"in G&&n(2,d=G.name),"id"in G&&n(3,p=G.id),"options"in G&&n(14,h=G.options),"placeholder"in G&&n(4,_=G.placeholder),"readonly"in G&&n(5,m=G.readonly),"value"in G&&n(0,S=G.value),"$$scope"in G&&n(16,o=G.$$scope)},t.$$.update=()=>{if(t.$$.dirty&128&&l===!1&&n(15,a=""),t.$$.dirty&49152&&N(h,a),t.$$.dirty&16449&&s&&!s.value&&s!==document.activeElement){const G=h.find(K=>K[0]===S);G&&n(6,s.value=G[1]||G[0],s)}t.$$.dirty&65&&s&&M(S)},[S,f,d,p,_,m,s,l,r,c,E,j,I,D,h,a,o,i,P,J,W,T]}class oi extends Xe{constructor(e){super(),Qe(this,e,o_,i_,Ze,{hidden:1,name:2,id:3,options:14,placeholder:4,readonly:5,value:0})}}const r_=t=>({}),al=t=>({});function s_(t){let e;return{c(){e=O("Label")},m(n,i){w(n,e,i)},d(n){n&&$(e)}}}function l_(t){let e,n,i,o,r,s,l;const a=t[7].label,c=Gt(a,t,t[6],al),f=c||s_();return{c(){e=g("div"),n=g("label"),f&&f.c(),i=C(),o=g("textarea"),k(n,"for",t[3]),k(o,"id",t[3]),k(o,"name",t[2]),k(o,"placeholder",t[4]),o.readOnly=t[5],k(e,"class","text-area"),e.hidden=t[1]},m(d,p){w(d,e,p),u(e,n),f&&f.m(n,null),u(e,i),u(e,o),Ot(o,t[0]),r=!0,s||(l=Ce(o,"input",t[8]),s=!0)},p(d,[p]){c&&c.p&&(!r||p&64)&&Yt(c,a,d,d[6],r?Kt(a,d[6],p,r_):Vt(d[6]),al),(!r||p&8)&&k(n,"for",d[3]),(!r||p&8)&&k(o,"id",d[3]),(!r||p&4)&&k(o,"name",d[2]),(!r||p&16)&&k(o,"placeholder",d[4]),(!r||p&32)&&(o.readOnly=d[5]),p&1&&Ot(o,d[0]),(!r||p&2)&&(e.hidden=d[1])},i(d){r||(v(f,d),r=!0)},o(d){y(f,d),r=!1},d(d){d&&$(e),f&&f.d(d),s=!1,l()}}}function a_(t,e,n){let{$$slots:i={},$$scope:o}=e,{hidden:r=!1}=e,{name:s=""}=e,{id:l=s?"form_"+s:No()}=e,{placeholder:a=""}=e,{readonly:c=!1}=e,{value:f}=e;function d(){f=this.value,n(0,f)}return t.$$set=p=>{"hidden"in p&&n(1,r=p.hidden),"name"in p&&n(2,s=p.name),"id"in p&&n(3,l=p.id),"placeholder"in p&&n(4,a=p.placeholder),"readonly"in p&&n(5,c=p.readonly),"value"in p&&n(0,f=p.value),"$$scope"in p&&n(6,o=p.$$scope)},[f,r,s,l,a,c,o,i,d]}class Fc extends Xe{constructor(e){super(),Qe(this,e,a_,l_,Ze,{hidden:1,name:2,id:3,placeholder:4,readonly:5,value:0})}}const c_=t=>({}),cl=t=>({}),u_=t=>({}),ul=t=>({});function f_(t){let e;return{c(){e=O("Label")},m(n,i){w(n,e,i)},d(n){n&&$(e)}}}function fl(t){let e,n,i,o,r;return n=new he({props:{name:t[8]?"eye-slash":"eye"}}),{c(){e=g("a"),q(n.$$.fragment),k(e,"href","#toggle"),k(e,"class","text-field__toggle")},m(s,l){w(s,e,l),z(n,e,null),i=!0,o||(r=Ce(e,"click",st(t[13])),o=!0)},p(s,l){const a={};l&256&&(a.name=s[8]?"eye-slash":"eye"),n.$set(a)},i(s){i||(v(n.$$.fragment,s),i=!0)},o(s){y(n.$$.fragment,s),i=!1},d(s){s&&$(e),H(n),o=!1,r()}}}function p_(t){let e,n,i,o,r,s,l,a,c,f;const d=t[11].label,p=Gt(d,t,t[10],ul),h=p||f_();let _=t[7]==="password"&&!t[6]&&fl(t);const m=t[11].help,S=Gt(m,t,t[10],cl);return{c(){e=g("div"),n=g("label"),h&&h.c(),i=C(),o=g("input"),s=C(),_&&_.c(),l=C(),S&&S.c(),k(n,"for",t[4]),k(o,"type",r=t[8]?"text":t[7]),k(o,"id",t[4]),k(o,"name",t[3]),k(o,"autocomplete",t[1]),k(o,"placeholder",t[5]),o.readOnly=t[6],o.value=t[0],k(e,"class","text-field"),e.hidden=t[2],Ye(e,"has-password",t[7]==="password")},m(b,E){w(b,e,E),u(e,n),h&&h.m(n,null),u(e,i),u(e,o),u(e,s),_&&_.m(e,null),w(b,l,E),S&&S.m(b,E),a=!0,c||(f=[Ce(o,"input",t[9]),Ce(o,"keyup",t[12])],c=!0)},p(b,[E]){p&&p.p&&(!a||E&1024)&&Yt(p,d,b,b[10],a?Kt(d,b[10],E,u_):Vt(b[10]),ul),(!a||E&16)&&k(n,"for",b[4]),(!a||E&384&&r!==(r=b[8]?"text":b[7]))&&k(o,"type",r),(!a||E&16)&&k(o,"id",b[4]),(!a||E&8)&&k(o,"name",b[3]),(!a||E&2)&&k(o,"autocomplete",b[1]),(!a||E&32)&&k(o,"placeholder",b[5]),(!a||E&64)&&(o.readOnly=b[6]),(!a||E&1&&o.value!==b[0])&&(o.value=b[0]),b[7]==="password"&&!b[6]?_?(_.p(b,E),E&192&&v(_,1)):(_=fl(b),_.c(),v(_,1),_.m(e,null)):_&&(ye(),y(_,1,1,()=>{_=null}),Se()),(!a||E&4)&&(e.hidden=b[2]),(!a||E&128)&&Ye(e,"has-password",b[7]==="password"),S&&S.p&&(!a||E&1024)&&Yt(S,m,b,b[10],a?Kt(m,b[10],E,c_):Vt(b[10]),cl)},i(b){a||(v(h,b),v(_),v(S,b),a=!0)},o(b){y(h,b),y(_),y(S,b),a=!1},d(b){b&&($(e),$(l)),h&&h.d(b),_&&_.d(),S&&S.d(b),c=!1,ut(f)}}}function d_(t,e,n){let{$$slots:i={},$$scope:o}=e,r=!1,{autocomplete:s=null}=e,{hidden:l=!1}=e,{name:a=""}=e,{id:c=a?"form_"+a:No()}=e,{placeholder:f=""}=e,{readonly:d=!1}=e,{type:p="text"}=e,{value:h}=e;function _(b){n(0,h=p.match(/^(number|range)$/)?parseInt(b.target.value,10):b.target.value)}function m(b){_i.call(this,t,b)}const S=()=>{n(8,r=!r)};return t.$$set=b=>{"autocomplete"in b&&n(1,s=b.autocomplete),"hidden"in b&&n(2,l=b.hidden),"name"in b&&n(3,a=b.name),"id"in b&&n(4,c=b.id),"placeholder"in b&&n(5,f=b.placeholder),"readonly"in b&&n(6,d=b.readonly),"type"in b&&n(7,p=b.type),"value"in b&&n(0,h=b.value),"$$scope"in b&&n(10,o=b.$$scope)},[h,s,l,a,c,f,d,p,r,_,o,i,m,S]}class Je extends Xe{constructor(e){super(),Qe(this,e,d_,p_,Ze,{autocomplete:1,hidden:2,name:3,id:4,placeholder:5,readonly:6,type:7,value:0})}}function h_(t){let e,n=t[5]("Host and port")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Host and port")+"")&&R(i,n)},d(o){o&&$(e)}}}function __(t){let e,n=t[5]("You cannot create custom connections.")+"",i;return{c(){e=g("p"),i=O(n),k(e,"class","help"),k(e,"slot","help"),e.hidden=!t[7].forced_connection},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("You cannot create custom connections.")+"")&&R(i,n)},d(o){o&&$(e)}}}function m_(t){let e,n=t[5]("Nickname")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Nickname")+"")&&R(i,n)},d(o){o&&$(e)}}}function g_(t){let e,n=t[5]("Your name")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Your name")+"")&&R(i,n)},d(o){o&&$(e)}}}function b_(t){let e,n,i;function o(s){t[19](s)}let r={name:"conversation_id",placeholder:t[5]("Ex: #convos"),$$slots:{label:[$_]},$$scope:{ctx:t}};return t[2].conversation_id!==void 0&&(r.value=t[2].conversation_id),e=new Je({props:r}),de.push(()=>ge(e,"value",o)),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};l[0]&32&&(a.placeholder=s[5]("Ex: #convos")),l[0]&32|l[1]&16&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&4&&(n=!0,a.value=s[2].conversation_id,me(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function v_(t){let e,n,i;function o(s){t[18](s)}let r={name:"want_to_be_connected",$$slots:{label:[w_]},$$scope:{ctx:t}};return t[2].want_to_be_connected!==void 0&&(r.value=t[2].want_to_be_connected),e=new it({props:r}),de.push(()=>ge(e,"value",o)),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};l[0]&32|l[1]&16&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&4&&(n=!0,a.value=s[2].want_to_be_connected,me(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function $_(t){let e,n=t[5]("Conversation name")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Conversation name")+"")&&R(i,n)},d(o){o&&$(e)}}}function w_(t){let e,n=t[5]("Want to be connected")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Want to be connected")+"")&&R(i,n)},d(o){o&&$(e)}}}function k_(t){let e,n=t[5]("Secure connection (TLS)")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Secure connection (TLS)")+"")&&R(i,n)},d(o){o&&$(e)}}}function y_(t){let e,n=t[5]("Verify certificate (TLS)")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Verify certificate (TLS)")+"")&&R(i,n)},d(o){o&&$(e)}}}function S_(t){let e,n=t[5]("Advanced settings")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Advanced settings")+"")&&R(i,n)},d(o){o&&$(e)}}}function pl(t){let e,n,i,o,r,s;function l(f){t[23](f)}let a={name:"on_connect_commands",placeholder:t[5]("Put each command on a new line."),$$slots:{label:[E_]},$$scope:{ctx:t}};t[2].on_connect_commands!==void 0&&(a.value=t[2].on_connect_commands),n=new Fc({props:a}),de.push(()=>ge(n,"value",l));let c=!t[7].forced_connection&&C_(t);return{c(){e=g("div"),q(n.$$.fragment),o=C(),c&&c.c(),k(e,"class","form-group")},m(f,d){w(f,e,d),z(n,e,null),u(e,o),c&&c.m(e,null),s=!0},p(f,d){const p={};d[0]&32&&(p.placeholder=f[5]("Put each command on a new line.")),d[0]&32|d[1]&16&&(p.$$scope={dirty:d,ctx:f}),!i&&d[0]&4&&(i=!0,p.value=f[2].on_connect_commands,me(()=>i=!1)),n.$set(p),f[7].forced_connection||c.p(f,d)},i(f){s||(v(n.$$.fragment,f),v(c),f&&at(()=>{s&&(r||(r=et(e,Jt,{duration:150},!0)),r.run(1))}),s=!0)},o(f){y(n.$$.fragment,f),y(c),f&&(r||(r=et(e,Jt,{duration:150},!1)),r.run(0)),s=!1},d(f){f&&$(e),H(n),c&&c.d(),f&&r&&r.end()}}}function E_(t){let e,n=t[5]("On-connect commands")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("On-connect commands")+"")&&R(i,n)},d(o){o&&$(e)}}}function C_(t){let e,n,i;function o(s){t[24](s)}let r={name:"local_address",$$slots:{help:[O_],label:[A_]},$$scope:{ctx:t}};return t[2].local_address!==void 0&&(r.value=t[2].local_address),e=new Je({props:r}),de.push(()=>ge(e,"value",o)),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};l[0]&32|l[1]&16&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&4&&(n=!0,a.value=s[2].local_address,me(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function A_(t){let e,n=t[5]("Source IP")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Source IP")+"")&&R(i,n)},d(o){o&&$(e)}}}function O_(t){let e,n=t[5]("Leave this blank, unless you know what you are doing.")+"",i;return{c(){e=g("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Leave this blank, unless you know what you are doing.")+"")&&R(i,n)},d(o){o&&$(e)}}}function N_(t){let e,n,i,o,r;function s(c){t[25](c)}let l={icon:"caret",name:"show_auth_settings",$$slots:{label:[T_]},$$scope:{ctx:t}};t[4]!==void 0&&(l.value=t[4]),e=new it({props:l}),de.push(()=>ge(e,"value",s));let a=t[4]&&dl(t);return{c(){q(e.$$.fragment),i=C(),a&&a.c(),o=pt()},m(c,f){z(e,c,f),w(c,i,f),a&&a.m(c,f),w(c,o,f),r=!0},p(c,f){const d={};f[0]&32|f[1]&16&&(d.$$scope={dirty:f,ctx:c}),!n&&f[0]&16&&(n=!0,d.value=c[4],me(()=>n=!1)),e.$set(d),c[4]?a?(a.p(c,f),f[0]&16&&v(a,1)):(a=dl(c),a.c(),v(a,1),a.m(o.parentNode,o)):a&&(ye(),y(a,1,1,()=>{a=null}),Se())},i(c){r||(v(e.$$.fragment,c),v(a),r=!0)},o(c){y(e.$$.fragment,c),y(a),r=!1},d(c){c&&($(i),$(o)),H(e,c),a&&a.d(c)}}}function T_(t){let e,n=t[5]("Authentication settings")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Authentication settings")+"")&&R(i,n)},d(o){o&&$(e)}}}function dl(t){let e,n,i,o,r,s,l,a,c,f,d;function p(N){t[26](N)}let h={name:"username",placeholder:t[2].nick,$$slots:{help:[R_],label:[M_]},$$scope:{ctx:t}};t[2].username!==void 0&&(h.value=t[2].username),n=new Je({props:h}),de.push(()=>ge(n,"value",p));const _=[I_,L_],m=[];function S(N,j){return N[2].sasl==="external"?0:1}r=S(t),s=m[r]=_[r](t);function b(N){t[29](N)}let E={name:"sasl",options:t[8],$$slots:{label:[F_]},$$scope:{ctx:t}};return t[2].sasl!==void 0&&(E.value=t[2].sasl),a=new oi({props:E}),de.push(()=>ge(a,"value",b)),{c(){e=g("div"),q(n.$$.fragment),o=C(),s.c(),l=C(),q(a.$$.fragment),k(e,"class","form-group")},m(N,j){w(N,e,j),z(n,e,null),u(e,o),m[r].m(e,null),u(e,l),z(a,e,null),d=!0},p(N,j){const I={};j[0]&4&&(I.placeholder=N[2].nick),j[0]&32|j[1]&16&&(I.$$scope={dirty:j,ctx:N}),!i&&j[0]&4&&(i=!0,I.value=N[2].username,me(()=>i=!1)),n.$set(I);let A=r;r=S(N),r===A?m[r].p(N,j):(ye(),y(m[A],1,1,()=>{m[A]=null}),Se(),s=m[r],s?s.p(N,j):(s=m[r]=_[r](N),s.c()),v(s,1),s.m(e,l));const M={};j[0]&32|j[1]&16&&(M.$$scope={dirty:j,ctx:N}),!c&&j[0]&4&&(c=!0,M.value=N[2].sasl,me(()=>c=!1)),a.$set(M)},i(N){d||(v(n.$$.fragment,N),v(s),v(a.$$.fragment,N),N&&at(()=>{d&&(f||(f=et(e,Jt,{duration:150},!0)),f.run(1))}),d=!0)},o(N){y(n.$$.fragment,N),y(s),y(a.$$.fragment,N),N&&(f||(f=et(e,Jt,{duration:150},!1)),f.run(0)),d=!1},d(N){N&&$(e),H(n),m[r].d(),H(a),N&&f&&f.end()}}}function M_(t){let e,n=t[5]("Username")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Username")+"")&&R(i,n)},d(o){o&&$(e)}}}function R_(t){let e,n=t[5]("SASL and IRC server username.")+"",i;return{c(){e=g("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("SASL and IRC server username.")+"")&&R(i,n)},d(o){o&&$(e)}}}function L_(t){let e,n,i;function o(s){t[28](s)}let r={type:"password",name:"password",$$slots:{help:[D_],label:[P_]},$$scope:{ctx:t}};return t[2].password!==void 0&&(r.value=t[2].password),e=new Je({props:r}),de.push(()=>ge(e,"value",o)),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};l[0]&32|l[1]&16&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&4&&(n=!0,a.value=s[2].password,me(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function I_(t){let e,n,i;function o(s){t[27](s)}let r={type:"text",name:"fingerprint",readonly:!0,$$slots:{help:[B_],label:[U_]},$$scope:{ctx:t}};return t[2].fingerprint!==void 0&&(r.value=t[2].fingerprint),e=new Je({props:r}),de.push(()=>ge(e,"value",o)),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};l[0]&32|l[1]&16&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&4&&(n=!0,a.value=s[2].fingerprint,me(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function P_(t){let e,n=t[5]("Password")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Password")+"")&&R(i,n)},d(o){o&&$(e)}}}function D_(t){let e,n=t[5]("SASL plain or IRC server password.")+"",i;return{c(){e=g("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("SASL plain or IRC server password.")+"")&&R(i,n)},d(o){o&&$(e)}}}function U_(t){let e,n=t[5]("Fingerprint")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Fingerprint")+"")&&R(i,n)},d(o){o&&$(e)}}}function B_(t){let e,n=t[5]("The certificate fingerprint is used for SASL external authentication.")+"",i;return{c(){e=g("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("The certificate fingerprint is used for SASL external authentication.")+"")&&R(i,n)},d(o){o&&$(e)}}}function F_(t){let e,n=t[5]("SASL authentication mechanism")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("SASL authentication mechanism")+"")&&R(i,n)},d(o){o&&$(e)}}}function j_(t){let e,n;return e=new ft({props:{icon:"plus-circle",op:t[9],$$slots:{default:[H_]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o[0]&32|o[1]&16&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function z_(t){let e,n;return e=new ft({props:{icon:"save",op:t[11],$$slots:{default:[q_]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o[0]&32|o[1]&16&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function H_(t){let e,n=t[5]("Add")+"",i;return{c(){e=g("span"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Add")+"")&&R(i,n)},d(o){o&&$(e)}}}function q_(t){let e,n=t[5]("Update")+"",i;return{c(){e=g("span"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Update")+"")&&R(i,n)},d(o){o&&$(e)}}}function hl(t){let e,n=t[5]("Delete")+"",i,o,r,s=t[5]("This will permanently remove chat logs and other connection related data.")+"",l,a,c,f=t[6]('Please confirm by entering "**%1**" before hitting **%2**.',t[0],t[5]("Delete"))+"",d,p,h,_,m,S,b,E,N;function j(A){t[30](A)}let I={name:"confirm_connection_id",$$slots:{label:[W_]},$$scope:{ctx:t}};return t[1]!==void 0&&(I.value=t[1]),p=new Je({props:I}),de.push(()=>ge(p,"value",j)),S=new ft({props:{icon:"trash",op:t[10],disabled:t[1]!==t[0],$$slots:{default:[G_]},$$scope:{ctx:t}}}),S.$on("click",t[12]),E=new Lt({props:{op:t[10],success:"Deleted."}}),{c(){e=g("h3"),i=O(n),o=C(),r=g("p"),l=O(s),a=C(),c=new Rt(!1),d=C(),q(p.$$.fragment),_=C(),m=g("div"),q(S.$$.fragment),b=C(),q(E.$$.fragment),c.a=null,k(m,"class","form-actions")},m(A,M){w(A,e,M),u(e,i),w(A,o,M),w(A,r,M),u(r,l),u(r,a),c.m(f,r),w(A,d,M),z(p,A,M),w(A,_,M),w(A,m,M),z(S,m,null),w(A,b,M),z(E,A,M),N=!0},p(A,M){(!N||M[0]&32)&&n!==(n=A[5]("Delete")+"")&&R(i,n),(!N||M[0]&32)&&s!==(s=A[5]("This will permanently remove chat logs and other connection related data.")+"")&&R(l,s),(!N||M[0]&97)&&f!==(f=A[6]('Please confirm by entering "**%1**" before hitting **%2**.',A[0],A[5]("Delete"))+"")&&c.p(f);const D={};M[0]&32|M[1]&16&&(D.$$scope={dirty:M,ctx:A}),!h&&M[0]&2&&(h=!0,D.value=A[1],me(()=>h=!1)),p.$set(D);const P={};M[0]&3&&(P.disabled=A[1]!==A[0]),M[0]&32|M[1]&16&&(P.$$scope={dirty:M,ctx:A}),S.$set(P)},i(A){N||(v(p.$$.fragment,A),v(S.$$.fragment,A),v(E.$$.fragment,A),N=!0)},o(A){y(p.$$.fragment,A),y(S.$$.fragment,A),y(E.$$.fragment,A),N=!1},d(A){A&&($(e),$(o),$(r),$(d),$(_),$(m),$(b)),H(p,A),H(S),H(E,A)}}}function W_(t){let e,n=t[5]("Confirm connection ID")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Confirm connection ID")+"")&&R(i,n)},d(o){o&&$(e)}}}function G_(t){let e,n=t[5]("Delete")+"",i;return{c(){e=g("span"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Delete")+"")&&R(i,n)},d(o){o&&$(e)}}}function K_(t){let e,n,i,o,r,s,l,a,c,f,d,p,h,_,m,S,b,E,N,j,I,A,M,D,P,J,W,T,G,K,Q,U,L,V,F;function Z(ne){t[15](ne)}let Y={name:"host",placeholder:t[5]("Ex: irc.libera.chat:6697"),readonly:t[7].forced_connection,$$slots:{help:[__],label:[h_]},$$scope:{ctx:t}};t[2].host!==void 0&&(Y.value=t[2].host),n=new Je({props:Y}),de.push(()=>ge(n,"value",Z));function B(ne){t[16](ne)}let oe={name:"nick",placeholder:t[5]("Ex: superman"),$$slots:{label:[m_]},$$scope:{ctx:t}};t[2].nick!==void 0&&(oe.value=t[2].nick),r=new Je({props:oe}),de.push(()=>ge(r,"value",B));function fe(ne){t[17](ne)}let te={name:"realname",placeholder:t[5]("Ex: Clark Kent"),$$slots:{label:[g_]},$$scope:{ctx:t}};t[2].realname!==void 0&&(te.value=t[2].realname),a=new Je({props:te}),de.push(()=>ge(a,"value",fe));const ue=[v_,b_],Ne=[];function ae(ne,pe){return ne[0]!=="add"?0:1}d=ae(t),p=Ne[d]=ue[d](t);function $e(ne){t[20](ne)}let De={name:"tls",$$slots:{label:[k_]},$$scope:{ctx:t}};t[2].tls!==void 0&&(De.value=t[2].tls),_=new it({props:De}),de.push(()=>ge(_,"value",$e));function je(ne){t[21](ne)}let Pe={name:"tls_verify",disabled:!t[2].tls,hidden:!t[2].tls,$$slots:{label:[y_]},$$scope:{ctx:t}};t[2].tls_verify!==void 0&&(Pe.value=t[2].tls_verify),b=new it({props:Pe}),de.push(()=>ge(b,"value",je));function Te(ne){t[22](ne)}let ze={icon:"caret",name:"show_advanced_settings",$$slots:{label:[S_]},$$scope:{ctx:t}};t[3]!==void 0&&(ze.value=t[3]),j=new it({props:ze}),de.push(()=>ge(j,"value",Te));let ee=t[3]&&pl(t),ce=!t[7].forced_connection&&N_(t);const He=[z_,j_],Be=[];function Ee(ne,pe){return ne[0]!=="add"?0:1}J=Ee(t),W=Be[J]=He[J](t),G=new Lt({props:{op:t[9]}}),Q=new Lt({props:{op:t[11]}});let ve=t[0]!=="add"&&hl(t);return{c(){e=g("form"),q(n.$$.fragment),o=C(),q(r.$$.fragment),l=C(),q(a.$$.fragment),f=C(),p.c(),h=C(),q(_.$$.fragment),S=C(),q(b.$$.fragment),N=C(),q(j.$$.fragment),A=C(),ee&&ee.c(),M=C(),ce&&ce.c(),D=C(),P=g("div"),W.c(),T=C(),q(G.$$.fragment),K=C(),q(Q.$$.fragment),U=C(),ve&&ve.c(),k(P,"class","form-actions"),k(e,"method","post")},m(ne,pe){w(ne,e,pe),z(n,e,null),u(e,o),z(r,e,null),u(e,l),z(a,e,null),u(e,f),Ne[d].m(e,null),u(e,h),z(_,e,null),u(e,S),z(b,e,null),u(e,N),z(j,e,null),u(e,A),ee&&ee.m(e,null),u(e,M),ce&&ce.m(e,null),u(e,D),u(e,P),Be[J].m(P,null),u(e,T),z(G,e,null),u(e,K),z(Q,e,null),u(e,U),ve&&ve.m(e,null),L=!0,V||(F=Ce(e,"submit",st(t[13])),V=!0)},p(ne,pe){const ke={};pe[0]&32&&(ke.placeholder=ne[5]("Ex: irc.libera.chat:6697")),pe[0]&32|pe[1]&16&&(ke.$$scope={dirty:pe,ctx:ne}),!i&&pe[0]&4&&(i=!0,ke.value=ne[2].host,me(()=>i=!1)),n.$set(ke);const se={};pe[0]&32&&(se.placeholder=ne[5]("Ex: superman")),pe[0]&32|pe[1]&16&&(se.$$scope={dirty:pe,ctx:ne}),!s&&pe[0]&4&&(s=!0,se.value=ne[2].nick,me(()=>s=!1)),r.$set(se);const be={};pe[0]&32&&(be.placeholder=ne[5]("Ex: Clark Kent")),pe[0]&32|pe[1]&16&&(be.$$scope={dirty:pe,ctx:ne}),!c&&pe[0]&4&&(c=!0,be.value=ne[2].realname,me(()=>c=!1)),a.$set(be);let Le=d;d=ae(ne),d===Le?Ne[d].p(ne,pe):(ye(),y(Ne[Le],1,1,()=>{Ne[Le]=null}),Se(),p=Ne[d],p?p.p(ne,pe):(p=Ne[d]=ue[d](ne),p.c()),v(p,1),p.m(e,h));const x={};pe[0]&32|pe[1]&16&&(x.$$scope={dirty:pe,ctx:ne}),!m&&pe[0]&4&&(m=!0,x.value=ne[2].tls,me(()=>m=!1)),_.$set(x);const X={};pe[0]&4&&(X.disabled=!ne[2].tls),pe[0]&4&&(X.hidden=!ne[2].tls),pe[0]&32|pe[1]&16&&(X.$$scope={dirty:pe,ctx:ne}),!E&&pe[0]&4&&(E=!0,X.value=ne[2].tls_verify,me(()=>E=!1)),b.$set(X);const ie={};pe[0]&32|pe[1]&16&&(ie.$$scope={dirty:pe,ctx:ne}),!I&&pe[0]&8&&(I=!0,ie.value=ne[3],me(()=>I=!1)),j.$set(ie),ne[3]?ee?(ee.p(ne,pe),pe[0]&8&&v(ee,1)):(ee=pl(ne),ee.c(),v(ee,1),ee.m(e,M)):ee&&(ye(),y(ee,1,1,()=>{ee=null}),Se()),ne[7].forced_connection||ce.p(ne,pe);let re=J;J=Ee(ne),J===re?Be[J].p(ne,pe):(ye(),y(Be[re],1,1,()=>{Be[re]=null}),Se(),W=Be[J],W?W.p(ne,pe):(W=Be[J]=He[J](ne),W.c()),v(W,1),W.m(P,null)),ne[0]!=="add"?ve?(ve.p(ne,pe),pe[0]&1&&v(ve,1)):(ve=hl(ne),ve.c(),v(ve,1),ve.m(e,null)):ve&&(ye(),y(ve,1,1,()=>{ve=null}),Se())},i(ne){L||(v(n.$$.fragment,ne),v(r.$$.fragment,ne),v(a.$$.fragment,ne),v(p),v(_.$$.fragment,ne),v(b.$$.fragment,ne),v(j.$$.fragment,ne),v(ee),v(ce),v(W),v(G.$$.fragment,ne),v(Q.$$.fragment,ne),v(ve),L=!0)},o(ne){y(n.$$.fragment,ne),y(r.$$.fragment,ne),y(a.$$.fragment,ne),y(p),y(_.$$.fragment,ne),y(b.$$.fragment,ne),y(j.$$.fragment,ne),y(ee),y(ce),y(W),y(G.$$.fragment,ne),y(Q.$$.fragment,ne),y(ve),L=!1},d(ne){ne&&$(e),H(n),H(r),H(a),Ne[d].d(),H(_),H(b),H(j),ee&&ee.d(),ce&&ce.d(),Be[J].d(),H(G),H(Q),ve&&ve.d(),V=!1,F()}}}function Y_(t,e,n){let i,o,r;we(t,lt,B=>n(5,o=B)),we(t,jt,B=>n(6,r=B));let{id:s="add"}=e,{is_page:l=!1}=e;const a=mt("user");we(t,a,B=>n(32,i=B));const c=[["none","None"],["plain","Plain"],["external","External"]],f=nt.op("createConnection"),d=nt.op("removeConnection"),p=nt.op("updateConnection");let h="",_={},m={},S=!1,b=!1;zt(()=>{_=s==="add"?{}:i.findConversation({connection_id:s})||{},_.connection_id?E(_):N()});function E(B){const oe=B.url?B.url.toFields():{};Ie.array(B.on_connect_commands)&&(oe.on_connect_commands=B.on_connect_commands.join(`
`)),oe.nick||(oe.nick=a.email.replace(/@.*/,"").replace(/\W/g,"_")),oe.want_to_be_connected=B.wanted_state!=="disconnected",n(2,m={...m,...oe,fingerprint:B.certificate.fingerprint||""})}function N(){const B=new gn(Re.query.uri||a.default_connection||"irc://localhost").toFields();a.connections.size&&!Re.query.uri&&(B.host=""),B.nick||(B.nick=a.email.replace(/@.*/,"").replace(/\W/g,"_")),n(2,m={...m,...B,want_to_be_connected:!0})}async function j(){await d.perform(_),a.removeConversation(_),Re.go("/settings/connections")}async function I(){if(n(2,m.on_connect_commands=(m.on_connect_commands||"").split(/\n\r?/).filter(B=>B.length),m),n(2,m.url=new gn("irc://localhost").fromFields(m).toString(),m),_.connection_id)n(2,m.connection_id=_.connection_id,m),n(2,m.wanted_state=m.want_to_be_connected?"connected":"disconnected",m),await p.perform(m),_=a.ensureConversation(p.res.body),E(_);else{await f.perform(m);const B=f.res.body;B.connection_id&&Re.go(a.ensureConversation(B).path)}l&&Re.go("/settings/connections")}function A(B){t.$$.not_equal(m.host,B)&&(m.host=B,n(2,m))}function M(B){t.$$.not_equal(m.nick,B)&&(m.nick=B,n(2,m))}function D(B){t.$$.not_equal(m.realname,B)&&(m.realname=B,n(2,m))}function P(B){t.$$.not_equal(m.want_to_be_connected,B)&&(m.want_to_be_connected=B,n(2,m))}function J(B){t.$$.not_equal(m.conversation_id,B)&&(m.conversation_id=B,n(2,m))}function W(B){t.$$.not_equal(m.tls,B)&&(m.tls=B,n(2,m))}function T(B){t.$$.not_equal(m.tls_verify,B)&&(m.tls_verify=B,n(2,m))}function G(B){S=B,n(3,S)}function K(B){t.$$.not_equal(m.on_connect_commands,B)&&(m.on_connect_commands=B,n(2,m))}function Q(B){t.$$.not_equal(m.local_address,B)&&(m.local_address=B,n(2,m))}function U(B){b=B,n(4,b)}function L(B){t.$$.not_equal(m.username,B)&&(m.username=B,n(2,m))}function V(B){t.$$.not_equal(m.fingerprint,B)&&(m.fingerprint=B,n(2,m))}function F(B){t.$$.not_equal(m.password,B)&&(m.password=B,n(2,m))}function Z(B){t.$$.not_equal(m.sasl,B)&&(m.sasl=B,n(2,m))}function Y(B){h=B,n(1,h)}return t.$$set=B=>{"id"in B&&n(0,s=B.id),"is_page"in B&&n(14,l=B.is_page)},[s,h,m,S,b,o,r,a,c,f,d,p,j,I,l,A,M,D,P,J,W,T,G,K,Q,U,L,V,F,Z,Y]}class jc extends Xe{constructor(e){super(),Qe(this,e,Y_,K_,Ze,{id:0,is_page:14},null,[-1,-1])}}function V_(t){let e,n=t[4]("Currently connecting to %1.",t[3])+"",i;return{c(){e=g("p"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&24&&n!==(n=o[4]("Currently connecting to %1.",o[3])+"")&&R(i,n)},d(o){o&&$(e)}}}function Z_(t){let e,n=t[4]("Currently connected to %1.",t[3])+"",i;return{c(){e=g("p"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&24&&n!==(n=o[4]("Currently connected to %1.",o[3])+"")&&R(i,n)},d(o){o&&$(e)}}}function J_(t){let e,n=t[4]("Currently disconnected from %1.",t[3])+"",i;return{c(){e=g("p"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&24&&n!==(n=o[4]("Currently disconnected from %1.",o[3])+"")&&R(i,n)},d(o){o&&$(e)}}}function Q_(t){let e,n=t[4]("Connection not found.")+"",i;return{c(){e=g("p"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Connection not found.")+"")&&R(i,n)},d(o){o&&$(e)}}}function X_(t){let e,n,i,o=t[4]("Connection")+"",r,s,l,a,c,f,d,p,h,_,m,S;a=new he({props:{name:"bars"}}),c=new he({props:{name:"times"}});function b(j,I){return j[2].url?j[2].state==="disconnected"?J_:j[2].state==="connected"?Z_:V_:Q_}let E=b(t),N=E(t);return p=new jc({props:{id:t[0].connection_id}}),{c(){e=g("div"),n=g("div"),i=g("h2"),r=O(o),s=C(),l=g("a"),q(a.$$.fragment),q(c.$$.fragment),f=C(),N.c(),d=C(),q(p.$$.fragment),k(l,"href","#settings"),k(l,"class","btn-hallow can-toggle is-active"),k(n,"class","sidebar-header"),k(e,"class","sidebar-left")},m(j,I){w(j,e,I),u(e,n),u(n,i),u(i,r),u(n,s),u(n,l),z(a,l,null),z(c,l,null),u(e,f),N.m(e,null),u(e,d),z(p,e,null),_=!0,m||(S=Ce(l,"click",wt.toggle),m=!0)},p(j,[I]){t=j,(!_||I&16)&&o!==(o=t[4]("Connection")+"")&&R(r,o),E===(E=b(t))&&N?N.p(t,I):(N.d(1),N=E(t),N&&(N.c(),N.m(e,d)));const A={};I&1&&(A.id=t[0].connection_id),p.$set(A)},i(j){_||(v(a.$$.fragment,j),v(c.$$.fragment,j),v(p.$$.fragment,j),j&&at(()=>{_&&(h||(h=et(e,Zt,t[1],!0)),h.run(1))}),_=!0)},o(j){y(a.$$.fragment,j),y(c.$$.fragment,j),y(p.$$.fragment,j),j&&(h||(h=et(e,Zt,t[1],!1)),h.run(0)),_=!1},d(j){j&&$(e),H(a),H(c),N.d(),H(p),j&&h&&h.end(),m=!1,S()}}}function x_(t,e,n){let i,o;we(t,lt,c=>n(4,o=c));let{conversation:r={}}=e,{transition:s}=e;const l=mt("user");let a={};return zt(async()=>{n(2,a=l.findConversation({connection_id:r.connection_id})||{})}),t.$$set=c=>{"conversation"in c&&n(0,r=c.conversation),"transition"in c&&n(1,s=c.transition)},t.$$.update=()=>{t.$$.dirty&4&&n(3,i=a.real_host||a.url&&a.url.host)},[r,s,a,i,o]}let em=class extends Xe{constructor(e){super(),Qe(this,e,x_,X_,Ze,{conversation:0,transition:1})}};function Ui(t){if(!t.nick)return["Loading..."];const e=Object.keys(t.channels||{}).sort(),n=[t.nick,t.name||t.user];let i="%1 (%2)";return t.away&&(i+=" is away (%3) and",n.push(t.away)),t.idle_for&&e.length?(i+=" has been idle for %4s in %5.",n.push(t.idle_for),n.push(e.sort().join(", "))):t.idle_for&&!e.length?(i+=" has been idle for %4s, and is not in any channels.",n.push(t.idle_for)):e.length?(i+=" is active in %4.",n.push(e.join(", "))):i+=" is not in any channels.",t.away||(i=i.replace(/%(4|5)/g,(o,r)=>"%"+(r-1))),[i,...n]}function yo(t){const e=["","chat",t.connection_id];return t.conversation_id&&e.push(t.conversation_id),Re.urlFor(e.map(encodeURIComponent).join("/")+"#"+t.ts.toISOString())}function zc(t){t.target.closest("a")||(t.preventDefault(),Re.go(t.target.closest(".message").querySelector("a").href))}function tm(t,{conversation:e}){const n=t.detail.visibleEls.filter(r=>r.dataset.ts);if(!n.length)return;const i=r=>Re.go(e.path+(r.length?"#"+r:""),{replace:!0}),o=t.detail.pos;if(o==="top"){const r=n[0].dataset.ts;e.historyStartAt||e.load({before:r}),i(r)}else if(o==="bottom"){const r=n.slice(-1)[0].dataset.ts;e.historyStopAt||e.load({after:r}),i(e.historyStopAt?"":r)}else i(n[0].dataset.ts)}function nm(t,{conversation:e,timestampFromUrl:n}){const{infinityEl:i,scrollHeightChanged:o,scrollTo:r,visibleEls:s,visibleElsChanged:l}=t.detail,a=e.messages;!(i.scrollHeight>i.offsetHeight)&&a.length&&e.load({before:a.get(0).ts.toISOString()}),o&&(r(Re.hash?'.message[data-ts="'+Re.hash+'"]':-1),im(i,n===Re.hash)),l&&s.forEach(f=>a.render(f.dataset.index))}function im(t,e){const n=e&&Re.hash&&t.querySelector('.message[data-ts="'+Re.hash+'"]');vt(t,".has-focus",i=>i.classList.remove("has-focus")),n&&n.classList.add("has-focus")}function So(t,e){return e.is("not_found")?"":t.frozen?t.frozen:t===e?"Connection messages.":e.info.away?e.info.away:e.info.idle_for?tt.l("User has been idle for %1s.",e.info.idle_for):(e.frozen?e.frozen:e.topic)||(e.is("private")?"Private conversation.":"No topic is set.")}function om(t){let e=t[11]("You are not a channel operator in %1.",t[0].name)+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o[0]&2049&&e!==(e=i[11]("You are not a channel operator in %1.",i[0].name)+"")&&R(n,e)},d(i){i&&$(n)}}}function rm(t){let e=t[11]("You are channel operator in %1.",t[0].name)+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o[0]&2049&&e!==(e=i[11]("You are channel operator in %1.",i[0].name)+"")&&R(n,e)},d(i){i&&$(n)}}}function sm(t){let e,n=t[12](...Ui(t[2].info))+"",i,o,r,s,l=t[11]("Update information")+"",a,c,f;return{c(){e=g("span"),i=C(),o=g("br"),r=g("small"),s=g("a"),a=O(l),k(s,"href","#update")},m(d,p){w(d,e,p),e.innerHTML=n,w(d,i,p),w(d,o,p),w(d,r,p),u(r,s),u(s,a),c||(f=Ce(s,"click",st(t[17])),c=!0)},p(d,p){p[0]&4100&&n!==(n=d[12](...Ui(d[2].info))+"")&&(e.innerHTML=n),p[0]&2048&&l!==(l=d[11]("Update information")+"")&&R(a,l)},d(d){d&&($(e),$(i),$(o),$(r)),c=!1,f()}}}function lm(t){let e=t[11]("Conversation with %1 is frozen. Reason: %2",t[0].name,t[11](t[0].frozen))+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o[0]&2049&&e!==(e=i[11]("Conversation with %1 is frozen. Reason: %2",i[0].name,i[11](i[0].frozen))+"")&&R(n,e)},d(i){i&&$(n)}}}function _l(t){let e,n,i,o;const r=[cm,am],s=[];function l(a,c){return a[8]||!a[2].modes.topic_protection?0:1}return e=l(t),n=s[e]=r[e](t),{c(){n.c(),i=pt()},m(a,c){s[e].m(a,c),w(a,i,c),o=!0},p(a,c){let f=e;e=l(a),e===f?s[e].p(a,c):(ye(),y(s[f],1,1,()=>{s[f]=null}),Se(),n=s[e],n?n.p(a,c):(n=s[e]=r[e](a),n.c()),v(n,1),n.m(i.parentNode,i))},i(a){o||(v(n),o=!0)},o(a){y(n),o=!1},d(a){a&&$(i),s[e].d(a)}}}function am(t){let e,n,i=t[11]("Topic")+"",o,r,s,l=t[12](t[0].topic||"No topic is set.")+"";return{c(){e=g("div"),n=g("label"),o=O(i),r=C(),s=g("div"),k(n,"for","nothing"),k(s,"class","input"),k(e,"class","text-field")},m(a,c){w(a,e,c),u(e,n),u(n,o),u(e,r),u(e,s),s.innerHTML=l},p(a,c){c[0]&2048&&i!==(i=a[11]("Topic")+"")&&R(o,i),c[0]&4097&&l!==(l=a[12](a[0].topic||"No topic is set.")+"")&&(s.innerHTML=l)},i:Oe,o:Oe,d(a){a&&$(e)}}}function cm(t){let e,n,i;function o(s){t[19](s)}let r={name:"topic",placeholder:t[11]("No topic is set."),$$slots:{label:[um]},$$scope:{ctx:t}};return t[6]!==void 0&&(r.value=t[6]),e=new Fc({props:r}),de.push(()=>ge(e,"value",o)),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};l[0]&2048&&(a.placeholder=s[11]("No topic is set.")),l[0]&2048|l[1]&1&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&64&&(n=!0,a.value=s[6],me(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function um(t){let e,n=t[11]("Topic")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&2048&&n!==(n=o[11]("Topic")+"")&&R(i,n)},d(o){o&&$(e)}}}function ml(t){let e,n,i;function o(s){t[20](s)}let r={name:"want_notifications",$$slots:{label:[fm]},$$scope:{ctx:t}};return t[7]!==void 0&&(r.value=t[7]),e=new it({props:r}),de.push(()=>ge(e,"value",o)),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};l[0]&2048|l[1]&1&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&128&&(n=!0,a.value=s[7],me(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function fm(t){let e,n=t[11]("Notify me on new messages")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&2048&&n!==(n=o[11]("Notify me on new messages")+"")&&R(i,n)},d(o){o&&$(e)}}}function pm(t){let e,n=t[11]("Show raw messages")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&2048&&n!==(n=o[11]("Show raw messages")+"")&&R(i,n)},d(o){o&&$(e)}}}function gl(t){let e,n,i=t[11]("Conversation modes")+"",o,r,s,l,a,c,f,d,p,h,_,m,S,b,E,N,j,I,A;function M(F){t[22](F)}let D={badge:!0,name:"invite_only",disabled:!t[8],$$slots:{label:[dm]},$$scope:{ctx:t}};t[3].invite_only!==void 0&&(D.value=t[3].invite_only),s=new it({props:D}),de.push(()=>ge(s,"value",M));function P(F){t[23](F)}let J={badge:!0,name:"moderated",disabled:!t[8],$$slots:{label:[hm]},$$scope:{ctx:t}};t[3].moderated!==void 0&&(J.value=t[3].moderated),c=new it({props:J}),de.push(()=>ge(c,"value",P));function W(F){t[24](F)}let T={badge:!0,name:"prevent_external_send",disabled:!t[8],$$slots:{label:[_m]},$$scope:{ctx:t}};t[3].prevent_external_send!==void 0&&(T.value=t[3].prevent_external_send),p=new it({props:T}),de.push(()=>ge(p,"value",W));function G(F){t[25](F)}let K={badge:!0,name:"topic_protection",disabled:!t[8],$$slots:{label:[mm]},$$scope:{ctx:t}};t[3].topic_protection!==void 0&&(K.value=t[3].topic_protection),m=new it({props:K}),de.push(()=>ge(m,"value",G));function Q(F){t[26](F)}let U={badge:!0,name:"password",disabled:!t[8],$$slots:{label:[gm]},$$scope:{ctx:t}};t[3].password!==void 0&&(U.value=t[3].password),E=new it({props:U}),de.push(()=>ge(E,"value",Q));let L=t[3].password&&bl(t),V=!t[8]&&vl(t);return{c(){e=g("nav"),n=g("h3"),o=O(i),r=C(),q(s.$$.fragment),a=C(),q(c.$$.fragment),d=C(),q(p.$$.fragment),_=C(),q(m.$$.fragment),b=C(),q(E.$$.fragment),j=C(),L&&L.c(),I=C(),V&&V.c(),k(e,"class","sidebar-left__nav")},m(F,Z){w(F,e,Z),u(e,n),u(n,o),u(e,r),z(s,e,null),u(e,a),z(c,e,null),u(e,d),z(p,e,null),u(e,_),z(m,e,null),u(e,b),z(E,e,null),u(e,j),L&&L.m(e,null),u(e,I),V&&V.m(e,null),A=!0},p(F,Z){(!A||Z[0]&2048)&&i!==(i=F[11]("Conversation modes")+"")&&R(o,i);const Y={};Z[0]&256&&(Y.disabled=!F[8]),Z[0]&2056|Z[1]&1&&(Y.$$scope={dirty:Z,ctx:F}),!l&&Z[0]&8&&(l=!0,Y.value=F[3].invite_only,me(()=>l=!1)),s.$set(Y);const B={};Z[0]&256&&(B.disabled=!F[8]),Z[0]&2056|Z[1]&1&&(B.$$scope={dirty:Z,ctx:F}),!f&&Z[0]&8&&(f=!0,B.value=F[3].moderated,me(()=>f=!1)),c.$set(B);const oe={};Z[0]&256&&(oe.disabled=!F[8]),Z[0]&2056|Z[1]&1&&(oe.$$scope={dirty:Z,ctx:F}),!h&&Z[0]&8&&(h=!0,oe.value=F[3].prevent_external_send,me(()=>h=!1)),p.$set(oe);const fe={};Z[0]&256&&(fe.disabled=!F[8]),Z[0]&2056|Z[1]&1&&(fe.$$scope={dirty:Z,ctx:F}),!S&&Z[0]&8&&(S=!0,fe.value=F[3].topic_protection,me(()=>S=!1)),m.$set(fe);const te={};Z[0]&256&&(te.disabled=!F[8]),Z[0]&2056|Z[1]&1&&(te.$$scope={dirty:Z,ctx:F}),!N&&Z[0]&8&&(N=!0,te.value=F[3].password,me(()=>N=!1)),E.$set(te),F[3].password?L?(L.p(F,Z),Z[0]&8&&v(L,1)):(L=bl(F),L.c(),v(L,1),L.m(e,I)):L&&(ye(),y(L,1,1,()=>{L=null}),Se()),F[8]?V&&(V.d(1),V=null):V?V.p(F,Z):(V=vl(F),V.c(),V.m(e,null))},i(F){A||(v(s.$$.fragment,F),v(c.$$.fragment,F),v(p.$$.fragment,F),v(m.$$.fragment,F),v(E.$$.fragment,F),v(L),A=!0)},o(F){y(s.$$.fragment,F),y(c.$$.fragment,F),y(p.$$.fragment,F),y(m.$$.fragment,F),y(E.$$.fragment,F),y(L),A=!1},d(F){F&&$(e),H(s),H(c),H(p),H(m),H(E),L&&L.d(),V&&V.d()}}}function dm(t){let e,n=t[11]("Invite only")+"",i,o,r,s=t[3].invite_only?"+":"-",l,a=$i("invite_only")+"",c;return{c(){e=g("span"),i=O(n),o=C(),r=g("b"),l=O(s),c=O(a),k(r,"class","badge"),k(e,"slot","label")},m(f,d){w(f,e,d),u(e,i),u(e,o),u(e,r),u(r,l),u(r,c)},p(f,d){d[0]&2048&&n!==(n=f[11]("Invite only")+"")&&R(i,n),d[0]&8&&s!==(s=f[3].invite_only?"+":"-")&&R(l,s)},d(f){f&&$(e)}}}function hm(t){let e,n=t[11]("Moderated")+"",i,o,r,s=t[3].moderated?"+":"-",l,a=$i("moderated")+"",c;return{c(){e=g("span"),i=O(n),o=C(),r=g("b"),l=O(s),c=O(a),k(r,"class","badge"),k(e,"slot","label")},m(f,d){w(f,e,d),u(e,i),u(e,o),u(e,r),u(r,l),u(r,c)},p(f,d){d[0]&2048&&n!==(n=f[11]("Moderated")+"")&&R(i,n),d[0]&8&&s!==(s=f[3].moderated?"+":"-")&&R(l,s)},d(f){f&&$(e)}}}function _m(t){let e,n=t[11]("Prevent external send")+"",i,o,r,s=t[3].prevent_external_send?"+":"-",l,a=$i("prevent_external_send")+"",c;return{c(){e=g("span"),i=O(n),o=C(),r=g("b"),l=O(s),c=O(a),k(r,"class","badge"),k(e,"slot","label")},m(f,d){w(f,e,d),u(e,i),u(e,o),u(e,r),u(r,l),u(r,c)},p(f,d){d[0]&2048&&n!==(n=f[11]("Prevent external send")+"")&&R(i,n),d[0]&8&&s!==(s=f[3].prevent_external_send?"+":"-")&&R(l,s)},d(f){f&&$(e)}}}function mm(t){let e,n=t[11]("Protected topic")+"",i,o,r,s=t[3].topic_protection?"+":"-",l,a=$i("topic_protection")+"",c;return{c(){e=g("span"),i=O(n),o=C(),r=g("b"),l=O(s),c=O(a),k(r,"class","badge"),k(e,"slot","label")},m(f,d){w(f,e,d),u(e,i),u(e,o),u(e,r),u(r,l),u(r,c)},p(f,d){d[0]&2048&&n!==(n=f[11]("Protected topic")+"")&&R(i,n),d[0]&8&&s!==(s=f[3].topic_protection?"+":"-")&&R(l,s)},d(f){f&&$(e)}}}function gm(t){let e,n=t[11]("Password")+"",i,o,r,s=t[3].password?"+":"-",l,a=$i("password")+"",c;return{c(){e=g("span"),i=O(n),o=C(),r=g("b"),l=O(s),c=O(a),k(r,"class","badge"),k(e,"slot","label")},m(f,d){w(f,e,d),u(e,i),u(e,o),u(e,r),u(r,l),u(r,c)},p(f,d){d[0]&2048&&n!==(n=f[11]("Password")+"")&&R(i,n),d[0]&8&&s!==(s=f[3].password?"+":"-")&&R(l,s)},d(f){f&&$(e)}}}function bl(t){let e,n,i;function o(s){t[27](s)}let r={type:"password",name:"password",$$slots:{label:[bm]},$$scope:{ctx:t}};return t[4]!==void 0&&(r.value=t[4]),e=new Je({props:r}),de.push(()=>ge(e,"value",o)),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};l[0]&2048|l[1]&1&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&16&&(n=!0,a.value=s[4],me(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function bm(t){let e,n=t[11]("Password")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&2048&&n!==(n=o[11]("Password")+"")&&R(i,n)},d(o){o&&$(e)}}}function vl(t){let e,n,i=t[11]("Only operators can change modes.")+"",o;return{c(){e=g("p"),n=g("i"),o=O(i)},m(r,s){w(r,e,s),u(e,n),u(n,o)},p(r,s){s[0]&2048&&i!==(i=r[11]("Only operators can change modes.")+"")&&R(o,i)},d(r){r&&$(e)}}}function vm(t){let e,n=t[11]("Save")+"",i;return{c(){e=g("span"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&2048&&n!==(n=o[11]("Save")+"")&&R(i,n)},d(o){o&&$(e)}}}function $m(t){let e,n=t[11]("Leave")+"",i;return{c(){e=g("span"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&2048&&n!==(n=o[11]("Leave")+"")&&R(i,n)},d(o){o&&$(e)}}}function $l(t){let e,n;return e=new Bc({props:{conversation:t[0]}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o[0]&1&&(r.conversation=i[0]),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function wm(t){let e,n,i,o=t[11]("Conversation")+"",r,s,l,a,c,f,d,p,h,_,m=Object.hasOwn(t[2],"wantNotifications"),S,b,E,N,j,I,A,M,D,P,J,W,T,G,K,Q;a=new he({props:{name:"bars"}}),c=new he({props:{name:"times"}});function U(te,ue){return te[2].frozen?lm:te[9]?sm:te[8]?rm:om}let L=U(t),V=L(t),F=!t[9]&&_l(t),Z=m&&ml(t);function Y(te){t[21](te)}let B={name:"raw_messages",$$slots:{label:[pm]},$$scope:{ctx:t}};t[5]!==void 0&&(B.value=t[5]),b=new it({props:B}),de.push(()=>ge(b,"value",Y));let oe=!t[9]&&gl(t);A=new ft({props:{icon:"save",op:t[14],$$slots:{default:[vm]},$$scope:{ctx:t}}}),D=new ft({props:{type:"button",icon:"sign-out-alt",$$slots:{default:[$m]},$$scope:{ctx:t}}}),D.$on("click",t[15]),J=new Lt({props:{op:t[14]}});let fe=!t[0].frozen&&!t[13].hasRightColumn&&$l(t);return{c(){e=g("div"),n=g("div"),i=g("h2"),r=O(o),s=C(),l=g("a"),q(a.$$.fragment),q(c.$$.fragment),f=C(),d=g("p"),V.c(),p=C(),h=g("form"),F&&F.c(),_=C(),Z&&Z.c(),S=C(),q(b.$$.fragment),N=C(),oe&&oe.c(),j=C(),I=g("div"),q(A.$$.fragment),M=C(),q(D.$$.fragment),P=C(),q(J.$$.fragment),W=C(),fe&&fe.c(),k(l,"href","#settings"),k(l,"class","btn-hallow can-toggle is-active"),k(n,"class","sidebar-header"),k(I,"class","form-actions"),k(h,"method","post"),k(e,"class","sidebar-left")},m(te,ue){w(te,e,ue),u(e,n),u(n,i),u(i,r),u(n,s),u(n,l),z(a,l,null),z(c,l,null),u(e,f),u(e,d),V.m(d,null),u(e,p),u(e,h),F&&F.m(h,null),u(h,_),Z&&Z.m(h,null),u(h,S),z(b,h,null),u(h,N),oe&&oe.m(h,null),u(h,j),u(h,I),z(A,I,null),u(I,M),z(D,I,null),u(h,P),z(J,h,null),u(e,W),fe&&fe.m(e,null),G=!0,K||(Q=[Ce(l,"click",wt.toggle),Ce(h,"submit",st(t[16]))],K=!0)},p(te,ue){t=te,(!G||ue[0]&2048)&&o!==(o=t[11]("Conversation")+"")&&R(r,o),L===(L=U(t))&&V?V.p(t,ue):(V.d(1),V=L(t),V&&(V.c(),V.m(d,null))),t[9]?F&&(ye(),y(F,1,1,()=>{F=null}),Se()):F?(F.p(t,ue),ue[0]&512&&v(F,1)):(F=_l(t),F.c(),v(F,1),F.m(h,_)),ue[0]&4&&(m=Object.hasOwn(t[2],"wantNotifications")),m?Z?(Z.p(t,ue),ue[0]&4&&v(Z,1)):(Z=ml(t),Z.c(),v(Z,1),Z.m(h,S)):Z&&(ye(),y(Z,1,1,()=>{Z=null}),Se());const Ne={};ue[0]&2048|ue[1]&1&&(Ne.$$scope={dirty:ue,ctx:t}),!E&&ue[0]&32&&(E=!0,Ne.value=t[5],me(()=>E=!1)),b.$set(Ne),t[9]?oe&&(ye(),y(oe,1,1,()=>{oe=null}),Se()):oe?(oe.p(t,ue),ue[0]&512&&v(oe,1)):(oe=gl(t),oe.c(),v(oe,1),oe.m(h,j));const ae={};ue[0]&2048|ue[1]&1&&(ae.$$scope={dirty:ue,ctx:t}),A.$set(ae);const $e={};ue[0]&2048|ue[1]&1&&($e.$$scope={dirty:ue,ctx:t}),D.$set($e),!t[0].frozen&&!t[13].hasRightColumn?fe?(fe.p(t,ue),ue[0]&8193&&v(fe,1)):(fe=$l(t),fe.c(),v(fe,1),fe.m(e,null)):fe&&(ye(),y(fe,1,1,()=>{fe=null}),Se())},i(te){G||(v(a.$$.fragment,te),v(c.$$.fragment,te),v(F),v(Z),v(b.$$.fragment,te),v(oe),v(A.$$.fragment,te),v(D.$$.fragment,te),v(J.$$.fragment,te),v(fe),te&&at(()=>{G&&(T||(T=et(e,Zt,t[1],!0)),T.run(1))}),G=!0)},o(te){y(a.$$.fragment,te),y(c.$$.fragment,te),y(F),y(Z),y(b.$$.fragment,te),y(oe),y(A.$$.fragment,te),y(D.$$.fragment,te),y(J.$$.fragment,te),y(fe),te&&(T||(T=et(e,Zt,t[1],!1)),T.run(0)),G=!1},d(te){te&&$(e),H(a),H(c),V.d(),F&&F.d(),Z&&Z.d(),H(b),oe&&oe.d(),H(A),H(D),H(J),fe&&fe.d(),te&&T&&T.end(),K=!1,ut(Q)}}}function km(t,e,n){let i,o,r,s,l,a=Oe,c=()=>(a(),a=_t(i,B=>n(18,l=B)),i),f,d=Oe,p=()=>(d(),d=_t(S,B=>n(2,f=B)),S),h,_,m;we(t,wt,B=>n(28,s=B)),we(t,lt,B=>n(11,h=B)),we(t,jt,B=>n(12,_=B)),we(t,Pn,B=>n(13,m=B)),t.$$.on_destroy.push(()=>a()),t.$$.on_destroy.push(()=>d());let{conversation:S}=e;p();let{transition:b}=e;const E=new To({api:!1,id:"saveConversationSettings"});let N={invite_only:!1,moderated:!1,password:!1,prevent_external_send:!1,topic_protection:!1},j="",I=!1,A="",M=!1;zt(async()=>{Object.keys(S.modes).length===0&&!o&&await new Promise(B=>S.send("/mode",B)),await Di(),n(3,N=Object.assign({},N,S.modes)),n(5,I=S.messages.raw),n(6,A=S.topic),n(7,M=S.wantNotifications)});function D(){S.send("/part",B=>!B.errrors&&ho(wt,s="",s))}function P(){const B=[];for(const oe in N)oe==="password"&&N[oe]?(j&&S.send(r?"/mode +k "+j:"/join "+S.name+" "+j),n(4,j="")):N[oe]!==(S.modes[oe]||!1)&&B.push((N[oe]?"+":"-")+$i(oe));return r&&B.length&&S.send("/mode "+B.join(""))}function J(){return!r&&S.modes.topic_protection?!1:A!==S.topic&&S.send("/topic "+A)}async function W(){E.update({status:"loading"}),await E.on("update"),S.update({wantNotifications:M}),S.messages.update({raw:I}),P(),J(),await Di(),E.update({status:"success"})}function T(){S.send("/whois "+S.name,B=>B.stopPropagation())}function G(B){A=B,n(6,A)}function K(B){M=B,n(7,M)}function Q(B){I=B,n(5,I)}function U(B){t.$$.not_equal(N.invite_only,B)&&(N.invite_only=B,n(3,N))}function L(B){t.$$.not_equal(N.moderated,B)&&(N.moderated=B,n(3,N))}function V(B){t.$$.not_equal(N.prevent_external_send,B)&&(N.prevent_external_send=B,n(3,N))}function F(B){t.$$.not_equal(N.topic_protection,B)&&(N.topic_protection=B,n(3,N))}function Z(B){t.$$.not_equal(N.password,B)&&(N.password=B,n(3,N))}function Y(B){j=B,n(4,j)}return t.$$set=B=>{"conversation"in B&&p(n(0,S=B.conversation)),"transition"in B&&n(1,b=B.transition)},t.$$.update=()=>{t.$$.dirty[0]&4&&c(n(10,i=f.participants)),t.$$.dirty[0]&4&&n(9,o=f.is("private")),t.$$.dirty[0]&262144&&n(8,r=l.me().modes.operator)},[S,b,f,N,j,I,A,M,r,o,i,h,_,m,E,D,W,T,l,G,K,Q,U,L,V,F,Z,Y]}class ym extends Xe{constructor(e){super(),Qe(this,e,km,wm,Ze,{conversation:0,transition:1},null,[-1,-1])}}function Sm(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Hc=Sm,Em=/\s/;function Cm(t){for(var e=t.length;e--&&Em.test(t.charAt(e)););return e}var Am=Cm,Om=Am,Nm=/^\s+/;function Tm(t){return t&&t.slice(0,Om(t)+1).replace(Nm,"")}var Mm=Tm,Rm=Mm,wl=Hc,Lm=gc,kl=0/0,Im=/^[-+]0x[0-9a-f]+$/i,Pm=/^0b[01]+$/i,Dm=/^0o[0-7]+$/i,Um=parseInt;function Bm(t){if(typeof t=="number")return t;if(Lm(t))return kl;if(wl(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=wl(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Rm(t);var n=Pm.test(t);return n||Dm.test(t)?Um(t.slice(2),n?2:8):Im.test(t)?kl:+t}var Fm=Bm,jm=Hc,cr=_c,yl=Fm,zm="Expected a function",Hm=Math.max,qm=Math.min;function Wm(t,e,n){var i,o,r,s,l,a,c=0,f=!1,d=!1,p=!0;if(typeof t!="function")throw new TypeError(zm);e=yl(e)||0,jm(n)&&(f=!!n.leading,d="maxWait"in n,r=d?Hm(yl(n.maxWait)||0,e):r,p="trailing"in n?!!n.trailing:p);function h(A){var M=i,D=o;return i=o=void 0,c=A,s=t.apply(D,M),s}function _(A){return c=A,l=setTimeout(b,e),f?h(A):s}function m(A){var M=A-a,D=A-c,P=e-M;return d?qm(P,r-D):P}function S(A){var M=A-a,D=A-c;return a===void 0||M>=e||M<0||d&&D>=r}function b(){var A=cr();if(S(A))return E(A);l=setTimeout(b,m(A))}function E(A){return l=void 0,p&&i?h(A):(i=o=void 0,s)}function N(){l!==void 0&&clearTimeout(l),c=0,i=a=o=l=void 0}function j(){return l===void 0?s:E(cr())}function I(){var A=cr(),M=S(A);if(i=arguments,o=this,a=A,M){if(l===void 0)return _(a);if(d)return clearTimeout(l),l=setTimeout(b,e),h(a)}return l===void 0&&(l=setTimeout(b,e)),s}return I.cancel=N,I.flush=j,I}var Gm=Wm;const Kr=gi(Gm);class Km{constructor(){this.dragAndDropEvents={drag:this._preventDefault.bind(this),dragend:this.stop.bind(this),dragenter:this.start.bind(this),dragleave:this.stop.bind(this),dragover:this.start.bind(this),dragstart:this._preventDefault.bind(this),drop:this.drop.bind(this)},this.pasteEvents={paste:this.paste.bind(this)},this.dropIndicatorEl=document.createElement("div"),this.dropIndicatorEl.className="drop-area hidden",this.removeDragOverDebounced=Kr(()=>this._removeDragOver(),100)}attach(e,n,i=document){this.dropEl=e,this.uploader=n,this.targetEl=i,Object.keys(this.dragAndDropEvents).forEach(o=>{i.addEventListener(o,this.dragAndDropEvents[o])}),Object.keys(this.pasteEvents).forEach(o=>{document.addEventListener(o,this.pasteEvents[o])})}detach(){Object.keys(this.dragAndDropEvents).forEach(e=>{this.targetEl.removeEventListener(e,this.dragAndDropEvents[e])}),Object.keys(this.pasteEvents).forEach(e=>{document.removeEventListener(e,this.pasteEvents[e])})}drop(e){this.stop(e),this.uploader&&this.uploader(e)}paste(e){const n=(e.clipboardData||e.originalEvent.clipboardData).items;if(this.uploader){for(let i=0;i<n.length;i++)if(n[i].kind==="file")return this.uploader({dataTransfer:{files:[n[i].getAsFile()]}})}}stop(e){this._preventDefault(e),this.removeDragOverDebounced()}start(e){if(!this.dropEl)return;this._preventDefault(e);const n=this.dropIndicatorEl.style;n.height=this.dropEl.offsetHeight+"px",n.width=this.dropEl.offsetWidth+"px",n.top=this.dropEl.offsetTop+"px",n.left=this.dropEl.offsetLeft+"px",this.dropIndicatorEl.classList.remove("hidden"),this.dropEl.parentNode.appendChild(this.dropIndicatorEl)}_preventDefault(e){e.preventDefault(),e.stopPropagation()}_removeDragOver(){this.dropIndicatorEl.classList.add("hidden")}}function Ym(t){let e,n,i,o,r,s,l;const a=t[6].default,c=Gt(a,t,t[5],null);return{c(){e=g("main"),n=g("div"),c&&c.c(),at(()=>t[7].call(n)),k(e,"class",o=t[1].join(" "))},m(f,d){w(f,e,d),u(e,n),c&&c.m(n,null),i=Yu(n,t[7].bind(n)),r=!0,s||(l=Tr(t[2].call(null,e)),s=!0)},p(f,[d]){c&&c.p&&(!r||d&32)&&Yt(c,a,f,f[5],r?Kt(a,f[5],d,null):Vt(f[5]),null),(!r||d&2&&o!==(o=f[1].join(" ")))&&k(e,"class",o)},i(f){r||(v(c,f),r=!0)},o(f){y(c,f),r=!1},d(f){f&&$(e),c&&c.d(f),i(),s=!1,l()}}}function Vm(t,e,n){let i,{$$slots:o={},$$scope:r}=e;const s=Xu(),l={scrollDelay:80,scrollOffset:80,scrollTop:0,visibleEls:[]};let{class:a=""}=e,c=uo(),f=0,{pos:d="top"}=e;function p(){const E=l.infinityEl;if(!E)return;n(3,d=E.scrollTop>f-E.offsetHeight-l.scrollOffset?"bottom":E.scrollTop<l.scrollOffset?"top":"middle"),l.pos=d,l.scrollHeightChanged=l.scrollHeight!==f,l.scrollHeight=f,l.visibleElsChanged=!1;const N=vf(E.firstElementChild,E);(N.length!==l.visibleEls.length||N[0]!==l.visibleEls[0])&&(l.visibleEls=N,l.visibleElsChanged=!0),(l.scrollHeightChanged||l.visibleElsChanged)&&s("visibility",l),l.scrollHeightChanged&&s("rendered",l)}function h(E){l.infinityEl=E,l.scrollTo=S,E.addEventListener("scroll",()=>_(E)),p()}function _(E){l.scrollTid&&clearTimeout(l.scrollTid),l.scrollTid=setTimeout(()=>m(E),l.scrollDelay)}function m(E){c+500>uo()?(Math.abs(E.scrollTop-l.scrollTop)>40&&(E.scrollTop=l.scrollTop),l.scrollTid&&clearTimeout(l.scrollTid),p()):(l.scrollTop=E.scrollTop,p(),s("scrolled",l))}function S(E){return Ie.undefined(E)||(E===-1&&(E=f),Ie.string(E)&&(E=l.infinityEl.querySelector(E)),E&&E.tagName&&(E=E.offsetTop),Ie.undefined(E))||E<0?!1:(c=uo(),l.infinityEl.scrollTop=E,l.scrollTop=l.infinityEl.scrollTop,!0)}function b(){f=this.offsetHeight,n(0,f)}return t.$$set=E=>{"class"in E&&n(4,a=E.class),"pos"in E&&n(3,d=E.pos),"$$scope"in E&&n(5,r=E.$$scope)},t.$$.update=()=>{t.$$.dirty&24&&n(1,i=[a||"infinity-scroll"].concat(["has-pos-"+d])),t.$$.dirty&1&&f&&p()},[f,i,h,d,a,r,o,b]}class Yr extends Xe{constructor(e){super(),Qe(this,e,Vm,Ym,Ze,{class:4,pos:3})}}function Zm(t){let e,n,i,o;const r=t[9].default,s=Gt(r,t,t[8],null);return{c(){e=g("a"),s&&s.c(),k(e,"href",t[2]),k(e,"class",t[0]),k(e,"style",t[1]),Ye(e,"has-path",t[4])},m(l,a){w(l,e,a),s&&s.m(e,null),t[11](e),n=!0,i||(o=Ce(e,"click",t[10]),i=!0)},p(l,[a]){s&&s.p&&(!n||a&256)&&Yt(s,r,l,l[8],n?Kt(r,l[8],a,null):Vt(l[8]),null),(!n||a&4)&&k(e,"href",l[2]),(!n||a&1)&&k(e,"class",l[0]),(!n||a&2)&&k(e,"style",l[1]),(!n||a&17)&&Ye(e,"has-path",l[4])},i(l){n||(v(s,l),n=!0)},o(l){y(s,l),n=!1},d(l){l&&$(e),s&&s.d(l),t[11](null),i=!1,o()}}}function Jm(t,e,n){let i,o,r;we(t,Re,m=>n(7,r=m));let{$$slots:s={},$$scope:l}=e,{class:a=""}=e,c,{href:f="/"}=e,{style:d=""}=e;const p=()=>c.focus();function h(m){_i.call(this,t,m)}function _(m){de[m?"unshift":"push"](()=>{c=m,n(3,c)})}return t.$$set=m=>{"class"in m&&n(0,a=m.class),"href"in m&&n(5,f=m.href),"style"in m&&n(1,d=m.style),"$$scope"in m&&n(8,l=m.$$scope)},t.$$.update=()=>{t.$$.dirty&160&&n(2,i=f.indexOf("/")===0?r.basePath+f:f),t.$$.dirty&132&&n(4,o=r.basePath+r.path===i.replace(/(#|\?).*/,""))},[a,d,i,c,o,f,p,r,l,s,h,_]}class Ge extends Xe{constructor(e){super(),Qe(this,e,Jm,Zm,Ze,{class:0,href:5,style:1,focus:6})}get focus(){return this.$$.ctx[6]}}const Qm=mi("notify");class Xm extends It{constructor(){super(),this.Notification=window.Notification||{permission:"denied"},this.prop("persist","volume",0),this.prop("persist","notificationCloseDelay",5e3),this.prop("persist","wantNotifications",this.Notification.requestPermission?null:!1),this.prop("ro","appHasFocus",()=>document.hasFocus()),this.prop("ro","volumeOptions",[["0","Muted"],["25","Low"],["50","Medium"],["100","Max"]]),this.prop("rw","desktopAccess",this.Notification.permission)}play(e=this){const n=document.getElementById("audio_notification");n&&(n.muted=!1,n.volume=parseInt(e.volume,10)/100,n.play())}requestDesktopAccess(){return this.Notification.requestPermission?(this.Notification.requestPermission(e=>this.update({desktopAccess:e})),this):this.update({desktopAccess:this.Notification.permission})}show(e,n={}){if(n.title||(n.title=document.title),!this.wantNotifications)return this._showInConsole(e,n);if(this.volume&&this.play(),this.desktopAccess!=="granted")return this.showInApp(e,n);const i=new Notification(n.title,{...n,body:e});return i.onclick=o=>this._onClick(o,i,n),setTimeout(()=>i.close(),this.notificationCloseDelay),i}showInApp(e,n={}){n.title||(n.title=document.title);const i=document.createElement("div"),o={...n,body:e,close:()=>{i.remove(),o.closed=!0},target:"app"};return i.className="notify-notification fade-in",i.innerHTML='<a href="#close" class="notify-notification__close"></a><h6 class="notify-notification__title"></h6><div class="notify-notification__content"></div>',i.querySelector("a").addEventListener("click",r=>{r.preventDefault(),o.close()}),i.querySelector("h6").textContent=n.title,i.querySelector("div").textContent=e,n.closeAfter===-1?i.querySelector("a").remove():setTimeout(()=>o.close(),n.closeAfter||this.notificationCloseDelay),setTimeout(()=>i.classList.add("is-visible"),1),document.body.appendChild(i),o}_onClick(e,n,i){n.close(),window.focus(),this.emit("click",{...i,sourceEvent:e})}_showInConsole(e,n){return Qm.info("[Notify]",e,n),{...n,body:e,close:()=>{},target:"console"}}}const bt=new Xm;function Sl(t,e,n){const i=t.slice();return i[40]=e[n],i[42]=n,i}function El(t,e,n){const i=t.slice();return i[43]=e[n],i}function Cl(t){let e,n=So(t[16],t[3])+"",i;return{c(){e=g("span"),i=O(n),k(e,"class","chat-header__topic ellipsis")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r[0]&65544&&n!==(n=So(o[16],o[3])+"")&&R(i,n)},d(o){o&&$(e)}}}function Al(t){let e,n,i,o,r,s;return n=new he({props:{name:"users-cog"}}),i=new he({props:{name:"times"}}),{c(){e=g("a"),q(n.$$.fragment),q(i.$$.fragment),k(e,"href","#settings"),k(e,"class","btn-hallow can-toggle"),Ye(e,"is-active",t[17]==="settings")},m(l,a){w(l,e,a),z(n,e,null),z(i,e,null),o=!0,r||(s=Ce(e,"click",wt.toggle),r=!0)},p(l,a){(!o||a[0]&131072)&&Ye(e,"is-active",l[17]==="settings")},i(l){o||(v(n.$$.fragment,l),v(i.$$.fragment,l),o=!0)},o(l){y(n.$$.fragment,l),y(i.$$.fragment,l),o=!1},d(l){l&&$(e),H(n),H(i),r=!1,s()}}}function xm(t){let e,n,i=t[14](t[1].name)+"",o,r,s,l=!t[3].is("not_found"),a,c,f,d,p=!t[15].isSingleColumn&&Cl(t),h=l&&Al(t);return{c(){e=g("h1"),n=g("a"),o=O(i),r=C(),p&&p.c(),s=C(),h&&h.c(),a=pt(),k(n,"href","#settings"),k(e,"class","ellipsis")},m(_,m){w(_,e,m),u(e,n),u(n,o),w(_,r,m),p&&p.m(_,m),w(_,s,m),h&&h.m(_,m),w(_,a,m),c=!0,f||(d=Ce(n,"click",wt.toggle),f=!0)},p(_,m){(!c||m[0]&16386)&&i!==(i=_[14](_[1].name)+"")&&R(o,i),_[15].isSingleColumn?p&&(p.d(1),p=null):p?p.p(_,m):(p=Cl(_),p.c(),p.m(s.parentNode,s)),m[0]&8&&(l=!_[3].is("not_found")),l?h?(h.p(_,m),m[0]&8&&v(h,1)):(h=Al(_),h.c(),v(h,1),h.m(a.parentNode,a)):h&&(ye(),y(h,1,1,()=>{h=null}),Se())},i(_){c||(v(h),c=!0)},o(_){y(h),c=!1},d(_){_&&($(e),$(r),$(s),$(a)),p&&p.d(_),h&&h.d(_),f=!1,d()}}}function Ol(t){let e,n,i,o;const r=[tg,eg],s=[];function l(a,c){return a[0]?0:1}return e=l(t),n=s[e]=r[e](t),{c(){n.c(),i=pt()},m(a,c){s[e].m(a,c),w(a,i,c),o=!0},p(a,c){let f=e;e=l(a),e===f?s[e].p(a,c):(ye(),y(s[f],1,1,()=>{s[f]=null}),Se(),n=s[e],n?n.p(a,c):(n=s[e]=r[e](a),n.c()),v(n,1),n.m(i.parentNode,i))},i(a){o||(v(n),o=!0)},o(a){y(n),o=!1},d(a){a&&$(i),s[e].d(a)}}}function eg(t){let e,n;return e=new em({props:{conversation:t[1],transition:{duration:250,x:t[15].isSingleColumn?t[15].width:0}}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o[0]&2&&(r.conversation=i[1]),o[0]&32768&&(r.transition={duration:250,x:i[15].isSingleColumn?i[15].width:0}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function tg(t){let e,n;return e=new ym({props:{conversation:t[1],transition:{duration:250,x:t[15].isSingleColumn?t[15].width:0}}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o[0]&2&&(r.conversation=i[1]),o[0]&32768&&(r.transition={duration:250,x:i[15].isSingleColumn?i[15].width:0}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function Nl(t){let e,n;return e=new Hh({props:{conversation:t[3]}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o[0]&8&&(r.conversation=i[3]),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function Tl(t){let e,n,i,o,r,s=t[14]("Loading...")+"",l,a;return i=new he({props:{name:"spinner",animation:"spin"}}),{c(){e=g("div"),n=g("span"),q(i.$$.fragment),o=C(),r=g("i"),l=O(s),k(e,"class","message__status-line for-loading has-pos-top")},m(c,f){w(c,e,f),u(e,n),z(i,n,null),u(n,o),u(n,r),u(r,l),a=!0},p(c,f){(!a||f[0]&16384)&&s!==(s=c[14]("Loading...")+"")&&R(l,s)},i(c){a||(v(i.$$.fragment,c),a=!0)},o(c){y(i.$$.fragment,c),a=!1},d(c){c&&$(e),H(i)}}}function Ml(t){let e,n,i,o,r,s=t[14]("Started chatting on %1",t[3].historyStartAt.getHumanDate())+"",l,a;return i=new he({props:{name:"calendar-alt"}}),{c(){e=g("div"),n=g("span"),q(i.$$.fragment),o=C(),r=g("i"),l=O(s),k(e,"class","message__status-line for-start-of-history")},m(c,f){w(c,e,f),u(e,n),z(i,n,null),u(n,o),u(n,r),u(r,l),a=!0},p(c,f){(!a||f[0]&16392)&&s!==(s=c[14]("Started chatting on %1",c[3].historyStartAt.getHumanDate())+"")&&R(l,s)},i(c){a||(v(i.$$.fragment,c),a=!0)},o(c){y(i.$$.fragment,c),a=!1},d(c){c&&$(e),H(i)}}}function Rl(t){let e,n,i,o,r,s=t[40].ts.getHumanDate()+"",l,a;return i=new he({props:{name:"calendar-alt"}}),{c(){e=g("div"),n=g("span"),q(i.$$.fragment),o=C(),r=g("i"),l=O(s),k(e,"class","message__status-line for-day-changed")},m(c,f){w(c,e,f),u(e,n),z(i,n,null),u(n,o),u(n,r),u(r,l),a=!0},p(c,f){(!a||f[0]&262144)&&s!==(s=c[40].ts.getHumanDate()+"")&&R(l,s)},i(c){a||(v(i.$$.fragment,c),a=!0)},o(c){y(i.$$.fragment,c),a=!1},d(c){c&&$(e),H(i)}}}function Ll(t){let e,n,i,o,r=t[14]("New messages")+"",s,l;return i=new he({props:{name:"comments"}}),{c(){e=g("div"),n=g("span"),q(i.$$.fragment),o=C(),s=O(r),k(e,"class","message__status-line for-last-read")},m(a,c){w(a,e,c),u(e,n),z(i,n,null),u(n,o),u(n,s),l=!0},p(a,c){(!l||c[0]&16384)&&r!==(r=a[14]("New messages")+"")&&R(s,r)},i(a){l||(v(i.$$.fragment,a),l=!0)},o(a){y(i.$$.fragment,a),l=!1},d(a){a&&$(e),H(i)}}}function Il(t){let e,n,i,o;return n=new he({props:{name:t[40].expanded?"caret-square-up":"caret-square-down"}}),{c(){e=g("a"),q(n.$$.fragment),k(e,"href",i="#action:expand:"+t[40].index),k(e,"class","prevent-default")},m(r,s){w(r,e,s),z(n,e,null),o=!0},p(r,s){const l={};s[0]&262144&&(l.name=r[40].expanded?"caret-square-up":"caret-square-down"),n.$set(l),(!o||s[0]&262144&&i!==(i="#action:expand:"+r[40].index))&&k(e,"href",i)},i(r){o||(v(n.$$.fragment,r),o=!0)},o(r){y(n.$$.fragment,r),o=!1},d(r){r&&$(e),H(n)}}}function ng(t){return{c:Oe,m:Oe,p:Oe,d:Oe}}function ig(t){let e,n,i,o,r,s;return{c(){e=g("div"),o=C(),k(e,"class",n="embed "+t[46].className)},m(l,a){w(l,e,a),w(l,o,a),r||(s=Tr(i=vg.call(null,e,t[46])),r=!0)},p(l,a){t=l,a[0]&262144&&n!==(n="embed "+t[46].className)&&k(e,"class",n),i&&Un(i.update)&&a[0]&262144&&i.update.call(null,t[46])},d(l){l&&($(e),$(o)),r=!1,s()}}}function og(t){return{c:Oe,m:Oe,p:Oe,d:Oe}}function Pl(t){let e,n,i={ctx:t,current:null,token:null,hasCatch:!1,pending:og,then:ig,catch:ng,value:46};return dr(n=t[43],i),{c(){e=pt(),i.block.c()},m(o,r){w(o,e,r),i.block.m(o,i.anchor=r),i.mount=()=>e.parentNode,i.anchor=e},p(o,r){t=o,i.ctx=t,r[0]&262144&&n!==(n=t[43])&&dr(n,i)||ac(i,t,r)},d(o){o&&$(e),i.block.d(o),i.token=null,i=null}}}function Dl(t){let e,n,i,o,r=t[40].from+"",s,l,a,c,f,d,p=t[14]("Mention")+"",h,_,m,S,b,E,N=t[14]("Chat")+"",j,I,A,M,D,P,J=t[14]("Whois")+"",W,T,G,K;return i=new he({props:{name:"pick:"+t[40].from,color:t[40].color}}),f=new he({props:{name:"quote-left"}}),b=new he({props:{name:"comments"}}),D=new he({props:{name:"address-card"}}),{c(){e=g("div"),n=g("a"),q(i.$$.fragment),o=C(),s=O(r),a=C(),c=g("a"),q(f.$$.fragment),d=C(),h=O(p),m=C(),S=g("a"),q(b.$$.fragment),E=C(),j=O(N),A=C(),M=g("a"),q(D.$$.fragment),P=C(),W=O(J),k(n,"href",l="#action:popover:"+t[40].index),k(n,"class","prevent-default"),k(c,"href",_="#action:mention:"+encodeURIComponent(t[40].from)),k(c,"class","on-hover prevent-default"),k(S,"href",I="#action:join:"+encodeURIComponent(t[40].from)),k(S,"class","on-hover prevent-default"),k(M,"href",T="#action:whois:"+encodeURIComponent(t[40].from)),k(M,"class","on-hover prevent-default"),k(e,"class","popover")},m(Q,U){w(Q,e,U),u(e,n),z(i,n,null),u(n,o),u(n,s),u(e,a),u(e,c),z(f,c,null),u(c,d),u(c,h),u(e,m),u(e,S),z(b,S,null),u(S,E),u(S,j),u(e,A),u(e,M),z(D,M,null),u(M,P),u(M,W),K=!0},p(Q,U){const L={};U[0]&262144&&(L.name="pick:"+Q[40].from),U[0]&262144&&(L.color=Q[40].color),i.$set(L),(!K||U[0]&262144)&&r!==(r=Q[40].from+"")&&R(s,r),(!K||U[0]&262144&&l!==(l="#action:popover:"+Q[40].index))&&k(n,"href",l),(!K||U[0]&16384)&&p!==(p=Q[14]("Mention")+"")&&R(h,p),(!K||U[0]&262144&&_!==(_="#action:mention:"+encodeURIComponent(Q[40].from)))&&k(c,"href",_),(!K||U[0]&16384)&&N!==(N=Q[14]("Chat")+"")&&R(j,N),(!K||U[0]&262144&&I!==(I="#action:join:"+encodeURIComponent(Q[40].from)))&&k(S,"href",I),(!K||U[0]&16384)&&J!==(J=Q[14]("Whois")+"")&&R(W,J),(!K||U[0]&262144&&T!==(T="#action:whois:"+encodeURIComponent(Q[40].from)))&&k(M,"href",T)},i(Q){K||(v(i.$$.fragment,Q),v(f.$$.fragment,Q),v(b.$$.fragment,Q),v(D.$$.fragment,Q),Q&&at(()=>{K&&(G||(G=et(e,Bt,{duration:200},!0)),G.run(1))}),K=!0)},o(Q){y(i.$$.fragment,Q),y(f.$$.fragment,Q),y(b.$$.fragment,Q),y(D.$$.fragment,Q),Q&&(G||(G=et(e,Bt,{duration:200},!1)),G.run(0)),K=!1},d(Q){Q&&$(e),H(i),H(f),H(b),H(D),Q&&G&&G.end()}}}function Ul(t){let e,n,i,o,r,s=t[40].ts.format("%H:%M")+"",l,a,c,f=Nt(t[40].ts.toLocaleString())+"",d,p,h,_,m,S=t[40].from+"",b,E,N,j,I,A,M=t[40].html+"",D,P,J,W,T,G,K,Q=t[40].dayChanged&&Rl(t),U=t[42]&&t[42]===t[18].length-t[3].unread&&Ll(t);h=new he({props:{name:"pick:"+t[40].from,color:t[40].color}});let L=t[40].details&&Il(t),V=xe(t[40].embeds),F=[];for(let Y=0;Y<V.length;Y+=1)F[Y]=Pl(El(t,V,Y));let Z=t[7]===t[40].index&&Dl(t);return{c(){Q&&Q.c(),e=C(),U&&U.c(),n=C(),i=g("div"),o=g("div"),r=g("span"),l=O(s),a=C(),c=g("span"),d=O(f),p=C(),q(h.$$.fragment),_=C(),m=g("a"),b=O(S),N=C(),j=g("div"),L&&L.c(),I=C(),A=new Rt(!1),D=C();for(let Y=0;Y<F.length;Y+=1)F[Y].c();P=C(),Z&&Z.c(),J=C(),k(c,"class","tooltip"),k(o,"class","message__ts has-tooltip"),k(m,"href",E="#action:popover:"+t[40].index),k(m,"class","message__from prevent-default"),Ut(m,"color",t[40].color),k(m,"tabindex","-1"),A.a=null,k(j,"class","message__text"),k(i,"class",W=t[40].className),k(i,"data-index",T=t[40].index),k(i,"data-ts",G=t[40].ts.toISOString()),Ye(i,"is-not-present",!t[19].get(t[40].from)),Ye(i,"is-expanded",!!t[40].expanded)},m(Y,B){Q&&Q.m(Y,B),w(Y,e,B),U&&U.m(Y,B),w(Y,n,B),w(Y,i,B),u(i,o),u(o,r),u(r,l),u(o,a),u(o,c),u(c,d),u(i,p),z(h,i,null),u(i,_),u(i,m),u(m,b),u(i,N),u(i,j),L&&L.m(j,null),u(j,I),A.m(M,j),u(i,D);for(let oe=0;oe<F.length;oe+=1)F[oe]&&F[oe].m(i,null);u(i,P),Z&&Z.m(i,null),u(i,J),K=!0},p(Y,B){Y[40].dayChanged?Q?(Q.p(Y,B),B[0]&262144&&v(Q,1)):(Q=Rl(Y),Q.c(),v(Q,1),Q.m(e.parentNode,e)):Q&&(ye(),y(Q,1,1,()=>{Q=null}),Se()),Y[42]&&Y[42]===Y[18].length-Y[3].unread?U?(U.p(Y,B),B[0]&262152&&v(U,1)):(U=Ll(Y),U.c(),v(U,1),U.m(n.parentNode,n)):U&&(ye(),y(U,1,1,()=>{U=null}),Se()),(!K||B[0]&262144)&&s!==(s=Y[40].ts.format("%H:%M")+"")&&R(l,s),(!K||B[0]&262144)&&f!==(f=Nt(Y[40].ts.toLocaleString())+"")&&R(d,f);const oe={};if(B[0]&262144&&(oe.name="pick:"+Y[40].from),B[0]&262144&&(oe.color=Y[40].color),h.$set(oe),(!K||B[0]&262144)&&S!==(S=Y[40].from+"")&&R(b,S),(!K||B[0]&262144&&E!==(E="#action:popover:"+Y[40].index))&&k(m,"href",E),(!K||B[0]&262144)&&Ut(m,"color",Y[40].color),Y[40].details?L?(L.p(Y,B),B[0]&262144&&v(L,1)):(L=Il(Y),L.c(),v(L,1),L.m(j,I)):L&&(ye(),y(L,1,1,()=>{L=null}),Se()),(!K||B[0]&262144)&&M!==(M=Y[40].html+"")&&A.p(M),B[0]&262144){V=xe(Y[40].embeds);let fe;for(fe=0;fe<V.length;fe+=1){const te=El(Y,V,fe);F[fe]?F[fe].p(te,B):(F[fe]=Pl(te),F[fe].c(),F[fe].m(i,P))}for(;fe<F.length;fe+=1)F[fe].d(1);F.length=V.length}Y[7]===Y[40].index?Z?(Z.p(Y,B),B[0]&262272&&v(Z,1)):(Z=Dl(Y),Z.c(),v(Z,1),Z.m(i,J)):Z&&(ye(),y(Z,1,1,()=>{Z=null}),Se()),(!K||B[0]&262144&&W!==(W=Y[40].className))&&k(i,"class",W),(!K||B[0]&262144&&T!==(T=Y[40].index))&&k(i,"data-index",T),(!K||B[0]&262144&&G!==(G=Y[40].ts.toISOString()))&&k(i,"data-ts",G),(!K||B[0]&786432)&&Ye(i,"is-not-present",!Y[19].get(Y[40].from)),(!K||B[0]&262144)&&Ye(i,"is-expanded",!!Y[40].expanded)},i(Y){K||(v(Q),v(U),v(h.$$.fragment,Y),v(L),v(Z),K=!0)},o(Y){y(Q),y(U),y(h.$$.fragment,Y),y(L),y(Z),K=!1},d(Y){Y&&($(e),$(n),$(i)),Q&&Q.d(Y),U&&U.d(Y),H(h),L&&L.d(),yt(F,Y),Z&&Z.d()}}}function rg(t){let e,n,i,o,r=So(t[16],t[3])+"",s,l;return i=new he({props:{name:"exclamation-triangle"}}),{c(){e=g("div"),n=g("div"),q(i.$$.fragment),o=C(),s=O(r),k(n,"class","message__text"),k(e,"class","message is-highlighted")},m(a,c){w(a,e,c),u(e,n),z(i,n,null),u(n,o),u(n,s),l=!0},p(a,c){(!l||c[0]&65544)&&r!==(r=So(a[16],a[3])+"")&&R(s,r)},i(a){l||(v(i.$$.fragment,a),l=!0)},o(a){y(i.$$.fragment,a),l=!1},d(a){a&&$(e),H(i)}}}function sg(t){let e,n=t[14]("You are invited to join %1.",t[1].name)+"",i,o,r,s=t[14]("Do you want to join?")+"",l,a,c,f,d,p,h;return f=new Ge({props:{href:"#action:join:"+t[13],class:"btn prevent-default",$$slots:{default:[ug]},$$scope:{ctx:t}}}),p=new Ge({props:{href:"#action:close:"+t[13],class:"btn is-secondary prevent-default",$$slots:{default:[fg]},$$scope:{ctx:t}}}),{c(){e=g("h2"),i=O(n),o=C(),r=g("p"),l=O(s),a=C(),c=g("p"),q(f.$$.fragment),d=C(),q(p.$$.fragment)},m(_,m){w(_,e,m),u(e,i),w(_,o,m),w(_,r,m),u(r,l),w(_,a,m),w(_,c,m),z(f,c,null),u(c,d),z(p,c,null),h=!0},p(_,m){(!h||m[0]&16386)&&n!==(n=_[14]("You are invited to join %1.",_[1].name)+"")&&R(i,n),(!h||m[0]&16384)&&s!==(s=_[14]("Do you want to join?")+"")&&R(l,s);const S={};m[0]&8192&&(S.href="#action:join:"+_[13]),m[0]&16384|m[1]&65536&&(S.$$scope={dirty:m,ctx:_}),f.$set(S);const b={};m[0]&8192&&(b.href="#action:close:"+_[13]),m[0]&16384|m[1]&65536&&(b.$$scope={dirty:m,ctx:_}),p.$set(b)},i(_){h||(v(f.$$.fragment,_),v(p.$$.fragment,_),h=!0)},o(_){y(f.$$.fragment,_),y(p.$$.fragment,_),h=!1},d(_){_&&($(e),$(o),$(r),$(a),$(c)),H(f),H(p)}}}function lg(t){let e,n,i,o,r,s=t[20]("Disconnected. Your connection %1 can be edited in [settings](%2).",t[16].name,"/chat/"+t[16].connection_id+"#settings")+"",l,a,c;return i=new he({props:{name:"exclamation-triangle"}}),{c(){e=g("a"),n=g("div"),q(i.$$.fragment),o=C(),r=new Rt(!1),r.a=null,k(n,"class","message__text"),k(e,"href","#toggle"),k(e,"class","message is-highlighted")},m(f,d){w(f,e,d),u(e,n),z(i,n,null),u(n,o),r.m(s,n),l=!0,a||(c=Ce(e,"click",wt.toggle),a=!0)},p(f,d){(!l||d[0]&1114112)&&s!==(s=f[20]("Disconnected. Your connection %1 can be edited in [settings](%2).",f[16].name,"/chat/"+f[16].connection_id+"#settings")+"")&&r.p(s)},i(f){l||(v(i.$$.fragment,f),l=!0)},o(f){y(i.$$.fragment,f),l=!1},d(f){f&&$(e),H(i),a=!1,c()}}}function ag(t){let e,n=t[14]("You are not part of this conversation.")+"",i,o,r,s=t[14]('Do you want to chat with "%1"?',t[3].name)+"",l,a,c,f,d,p,h;return f=new Ge({props:{href:"#action:join:"+t[13],class:"btn prevent-default",$$slots:{default:[pg]},$$scope:{ctx:t}}}),p=new Ge({props:{href:"/settings/conversation",class:"btn is-secondary prevent-default",$$slots:{default:[dg]},$$scope:{ctx:t}}}),{c(){e=g("h2"),i=O(n),o=C(),r=g("p"),l=O(s),a=C(),c=g("p"),q(f.$$.fragment),d=C(),q(p.$$.fragment)},m(_,m){w(_,e,m),u(e,i),w(_,o,m),w(_,r,m),u(r,l),w(_,a,m),w(_,c,m),z(f,c,null),u(c,d),z(p,c,null),h=!0},p(_,m){(!h||m[0]&16384)&&n!==(n=_[14]("You are not part of this conversation.")+"")&&R(i,n),(!h||m[0]&16392)&&s!==(s=_[14]('Do you want to chat with "%1"?',_[3].name)+"")&&R(l,s);const S={};m[0]&8192&&(S.href="#action:join:"+_[13]),m[0]&16384|m[1]&65536&&(S.$$scope={dirty:m,ctx:_}),f.$set(S);const b={};m[0]&16384|m[1]&65536&&(b.$$scope={dirty:m,ctx:_}),p.$set(b)},i(_){h||(v(f.$$.fragment,_),v(p.$$.fragment,_),h=!0)},o(_){y(f.$$.fragment,_),y(p.$$.fragment,_),h=!1},d(_){_&&($(e),$(o),$(r),$(a),$(c)),H(f),H(p)}}}function cg(t){let e,n=t[14]("Connection does not exist.")+"",i,o,r,s=t[14]('Do you want to create the connection "%1"?',t[16].connection_id)+"",l,a,c,f,d,p,h;return f=new Ge({props:{href:"/settings/connections?uri="+encodeURIComponent(t[22](t[3])),class:"btn",$$slots:{default:[hg]},$$scope:{ctx:t}}}),p=new Ge({props:{href:"/settings/connections",class:"btn is-secondary",$$slots:{default:[_g]},$$scope:{ctx:t}}}),{c(){e=g("h2"),i=O(n),o=C(),r=g("p"),l=O(s),a=C(),c=g("p"),q(f.$$.fragment),d=C(),q(p.$$.fragment)},m(_,m){w(_,e,m),u(e,i),w(_,o,m),w(_,r,m),u(r,l),w(_,a,m),w(_,c,m),z(f,c,null),u(c,d),z(p,c,null),h=!0},p(_,m){(!h||m[0]&16384)&&n!==(n=_[14]("Connection does not exist.")+"")&&R(i,n),(!h||m[0]&81920)&&s!==(s=_[14]('Do you want to create the connection "%1"?',_[16].connection_id)+"")&&R(l,s);const S={};m[0]&8&&(S.href="/settings/connections?uri="+encodeURIComponent(_[22](_[3]))),m[0]&16384|m[1]&65536&&(S.$$scope={dirty:m,ctx:_}),f.$set(S);const b={};m[0]&16384|m[1]&65536&&(b.$$scope={dirty:m,ctx:_}),p.$set(b)},i(_){h||(v(f.$$.fragment,_),v(p.$$.fragment,_),h=!0)},o(_){y(f.$$.fragment,_),y(p.$$.fragment,_),h=!1},d(_){_&&($(e),$(o),$(r),$(a),$(c)),H(f),H(p)}}}function ug(t){let e,n,i,o=t[14]("Yes")+"",r,s;return e=new he({props:{name:"thumbs-up"}}),{c(){q(e.$$.fragment),n=C(),i=g("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),u(i,r),s=!0},p(l,a){(!s||a[0]&16384)&&o!==(o=l[14]("Yes")+"")&&R(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){l&&($(n),$(i)),H(e,l)}}}function fg(t){let e,n,i,o=t[14]("No")+"",r,s;return e=new he({props:{name:"thumbs-down"}}),{c(){q(e.$$.fragment),n=C(),i=g("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),u(i,r),s=!0},p(l,a){(!s||a[0]&16384)&&o!==(o=l[14]("No")+"")&&R(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){l&&($(n),$(i)),H(e,l)}}}function pg(t){let e,n,i,o=t[14]("Yes")+"",r,s;return e=new he({props:{name:"thumbs-up"}}),{c(){q(e.$$.fragment),n=C(),i=g("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),u(i,r),s=!0},p(l,a){(!s||a[0]&16384)&&o!==(o=l[14]("Yes")+"")&&R(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){l&&($(n),$(i)),H(e,l)}}}function dg(t){let e,n,i,o=t[14]("No")+"",r,s;return e=new he({props:{name:"thumbs-down"}}),{c(){q(e.$$.fragment),n=C(),i=g("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),u(i,r),s=!0},p(l,a){(!s||a[0]&16384)&&o!==(o=l[14]("No")+"")&&R(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){l&&($(n),$(i)),H(e,l)}}}function hg(t){let e,n,i=t[14]("Yes")+"",o,r;return e=new he({props:{name:"thumbs-up"}}),{c(){q(e.$$.fragment),n=C(),o=O(i)},m(s,l){z(e,s,l),w(s,n,l),w(s,o,l),r=!0},p(s,l){(!r||l[0]&16384)&&i!==(i=s[14]("Yes")+"")&&R(o,i)},i(s){r||(v(e.$$.fragment,s),r=!0)},o(s){y(e.$$.fragment,s),r=!1},d(s){s&&($(n),$(o)),H(e,s)}}}function _g(t){let e,n,i=t[14]("No")+"",o,r;return e=new he({props:{name:"thumbs-down"}}),{c(){q(e.$$.fragment),n=C(),o=O(i)},m(s,l){z(e,s,l),w(s,n,l),w(s,o,l),r=!0},p(s,l){(!r||l[0]&16384)&&i!==(i=s[14]("No")+"")&&R(o,i)},i(s){r||(v(e.$$.fragment,s),r=!0)},o(s){y(e.$$.fragment,s),r=!1},d(s){s&&($(n),$(o)),H(e,s)}}}function Bl(t){let e,n,i=t[14]("Uploading %1...",t[10].file.name)+"",o,r,s,l,a,c,f,d;return{c(){e=g("div"),n=g("div"),o=O(i),r=C(),s=g("div"),l=g("div"),a=O(t[11]),c=O("%"),k(l,"class","progress__bar"),Ut(l,"width",t[11]+"%"),k(s,"class","progress"),k(e,"class","message")},m(p,h){w(p,e,h),u(e,n),u(n,o),u(e,r),u(e,s),u(s,l),u(l,a),u(l,c),d=!0},p(p,h){(!d||h[0]&17408)&&i!==(i=p[14]("Uploading %1...",p[10].file.name)+"")&&R(o,i),(!d||h[0]&2048)&&R(a,p[11]),(!d||h[0]&2048)&&Ut(l,"width",p[11]+"%")},i(p){d||(p&&at(()=>{d&&(f||(f=et(e,Bt,{duration:200},!0)),f.run(1))}),d=!0)},o(p){p&&(f||(f=et(e,Bt,{duration:200},!1)),f.run(0)),d=!1},d(p){p&&$(e),p&&f&&f.end()}}}function mg(t){let e,n,i,o,r,s=t[20]('Go to "[account settings](%1)" to enable or disable notifications.',"/settings/account")+"",l;return i=new he({props:{name:"info-circle"}}),{c(){e=g("div"),n=g("div"),q(i.$$.fragment),o=C(),r=new Rt(!1),r.a=null,k(n,"class","message__text"),k(e,"class","message is-highlighted")},m(a,c){w(a,e,c),u(e,n),z(i,n,null),u(n,o),r.m(s,n),l=!0},p(a,c){(!l||c[0]&1048576)&&s!==(s=a[20]('Go to "[account settings](%1)" to enable or disable notifications.',"/settings/account")+"")&&r.p(s)},i(a){l||(v(i.$$.fragment,a),l=!0)},o(a){y(i.$$.fragment,a),l=!1},d(a){a&&$(e),H(i)}}}function Fl(t){let e,n,i,o,r,s=t[14]("Loading...")+"",l,a;return i=new he({props:{name:"spinner",animation:"spin"}}),{c(){e=g("div"),n=g("span"),q(i.$$.fragment),o=C(),r=g("i"),l=O(s),k(e,"class","message__status-line for-loading has-pos-bottom")},m(c,f){w(c,e,f),u(e,n),z(i,n,null),u(n,o),u(n,r),u(r,l),a=!0},p(c,f){(!a||f[0]&16384)&&s!==(s=c[14]("Loading...")+"")&&R(l,s)},i(c){a||(v(i.$$.fragment,c),a=!0)},o(c){y(i.$$.fragment,c),a=!1},d(c){c&&$(e),H(i)}}}function jl(t){let e,n,i,o,r=t[14]("Jump to %1",t[6].format("%b %e %H:%M"))+"",s,l,a;return i=new he({props:{name:"external-link-alt"}}),{c(){e=g("div"),n=g("a"),q(i.$$.fragment),o=C(),s=O(r),k(n,"href",l=t[1].path),k(e,"class","message__status-line for-jump-to-now")},m(c,f){w(c,e,f),u(e,n),z(i,n,null),u(n,o),u(n,s),a=!0},p(c,f){(!a||f[0]&16448)&&r!==(r=c[14]("Jump to %1",c[6].format("%b %e %H:%M"))+"")&&R(s,r),(!a||f[0]&2&&l!==(l=c[1].path))&&k(n,"href",l)},i(c){a||(v(i.$$.fragment,c),a=!0)},o(c){y(i.$$.fragment,c),a=!1},d(c){c&&$(e),H(i)}}}function gg(t){let e=t[18].length<10&&!t[3].is("not_found"),n,i=t[3].is("loading")&&t[18].length>10,o,r=t[3].historyStartAt&&!t[3].is("not_found")&&t[18].length,s,l,a,c,f,d,p,h,_,m,S,b,E=t[3].is("loading"),N,j,I,A=e&&Nl(t),M=i&&Tl(t),D=r&&Ml(t),P=xe(t[18].render()),J=[];for(let F=0;F<P.length;F+=1)J[F]=Ul(Sl(t,P,F));const W=F=>y(J[F],1,1,()=>{J[F]=null}),T=[cg,ag,lg,sg,rg],G=[];function K(F,Z){return Z[0]&65536&&(a=null),Z[0]&8&&(c=null),Z[0]&65536&&(f=null),Z[0]&8&&(d=null),Z[0]&8&&(p=null),a==null&&(a=!!F[16].is("not_found")),a?0:(c==null&&(c=!!F[3].is("not_found")),c?1:(f==null&&(f=!!(!F[16].is("unreachable")&&F[16].frozen)),f?2:(d==null&&(d=!!(F[3].frozen&&F[3].is("pending"))),d?3:(p==null&&(p=!!(F[3].frozen&&!F[3].is("locked"))),p?4:-1))))}~(h=K(t,[-1,-1]))&&(_=G[h]=T[h](t));let Q=t[11]&&Bl(t),U=bt.wantNotifications===null&&mg(t),L=E&&Fl(t),V=!t[3].historyStopAt&&t[18].length&&jl(t);return{c(){A&&A.c(),n=C(),M&&M.c(),o=C(),D&&D.c(),s=C();for(let F=0;F<J.length;F+=1)J[F].c();l=C(),_&&_.c(),m=C(),Q&&Q.c(),S=C(),U&&U.c(),b=C(),L&&L.c(),N=C(),V&&V.c(),j=pt()},m(F,Z){A&&A.m(F,Z),w(F,n,Z),M&&M.m(F,Z),w(F,o,Z),D&&D.m(F,Z),w(F,s,Z);for(let Y=0;Y<J.length;Y+=1)J[Y]&&J[Y].m(F,Z);w(F,l,Z),~h&&G[h].m(F,Z),w(F,m,Z),Q&&Q.m(F,Z),w(F,S,Z),U&&U.m(F,Z),w(F,b,Z),L&&L.m(F,Z),w(F,N,Z),V&&V.m(F,Z),w(F,j,Z),I=!0},p(F,Z){if(Z[0]&262152&&(e=F[18].length<10&&!F[3].is("not_found")),e?A?(A.p(F,Z),Z[0]&262152&&v(A,1)):(A=Nl(F),A.c(),v(A,1),A.m(n.parentNode,n)):A&&(ye(),y(A,1,1,()=>{A=null}),Se()),Z[0]&262152&&(i=F[3].is("loading")&&F[18].length>10),i?M?(M.p(F,Z),Z[0]&262152&&v(M,1)):(M=Tl(F),M.c(),v(M,1),M.m(o.parentNode,o)):M&&(ye(),y(M,1,1,()=>{M=null}),Se()),Z[0]&262152&&(r=F[3].historyStartAt&&!F[3].is("not_found")&&F[18].length),r?D?(D.p(F,Z),Z[0]&262152&&v(D,1)):(D=Ml(F),D.c(),v(D,1),D.m(s.parentNode,s)):D&&(ye(),y(D,1,1,()=>{D=null}),Se()),Z[0]&802952){P=xe(F[18].render());let B;for(B=0;B<P.length;B+=1){const oe=Sl(F,P,B);J[B]?(J[B].p(oe,Z),v(J[B],1)):(J[B]=Ul(oe),J[B].c(),v(J[B],1),J[B].m(l.parentNode,l))}for(ye(),B=P.length;B<J.length;B+=1)W(B);Se()}let Y=h;h=K(F,Z),h===Y?~h&&G[h].p(F,Z):(_&&(ye(),y(G[Y],1,1,()=>{G[Y]=null}),Se()),~h?(_=G[h],_?_.p(F,Z):(_=G[h]=T[h](F),_.c()),v(_,1),_.m(m.parentNode,m)):_=null),F[11]?Q?(Q.p(F,Z),Z[0]&2048&&v(Q,1)):(Q=Bl(F),Q.c(),v(Q,1),Q.m(S.parentNode,S)):Q&&(ye(),y(Q,1,1,()=>{Q=null}),Se()),bt.wantNotifications===null&&U.p(F,Z),Z[0]&8&&(E=F[3].is("loading")),E?L?(L.p(F,Z),Z[0]&8&&v(L,1)):(L=Fl(F),L.c(),v(L,1),L.m(N.parentNode,N)):L&&(ye(),y(L,1,1,()=>{L=null}),Se()),!F[3].historyStopAt&&F[18].length?V?(V.p(F,Z),Z[0]&262152&&v(V,1)):(V=jl(F),V.c(),v(V,1),V.m(j.parentNode,j)):V&&(ye(),y(V,1,1,()=>{V=null}),Se())},i(F){if(!I){v(A),v(M),v(D);for(let Z=0;Z<P.length;Z+=1)v(J[Z]);v(_),v(Q),v(U),v(L),v(V),I=!0}},o(F){y(A),y(M),y(D),J=J.filter(Boolean);for(let Z=0;Z<J.length;Z+=1)y(J[Z]);y(_),y(Q),y(U),y(L),y(V),I=!1},d(F){F&&($(n),$(o),$(s),$(l),$(m),$(S),$(b),$(N),$(j)),A&&A.d(F),M&&M.d(F),D&&D.d(F),yt(J,F),~h&&G[h].d(F),Q&&Q.d(F),U&&U.d(F),L&&L.d(F),V&&V.d(F)}}}function zl(t){let e,n,i,o=t[3].is("private")&&t[3].info.nick,r;n=new Bc({props:{conversation:t[1]}});let s=o&&Hl(t);return{c(){e=g("div"),q(n.$$.fragment),i=C(),s&&s.c(),k(e,"class","sidebar-right")},m(l,a){w(l,e,a),z(n,e,null),u(e,i),s&&s.m(e,null),r=!0},p(l,a){const c={};a[0]&2&&(c.conversation=l[1]),n.$set(c),a[0]&8&&(o=l[3].is("private")&&l[3].info.nick),o?s?s.p(l,a):(s=Hl(l),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i(l){r||(v(n.$$.fragment,l),r=!0)},o(l){y(n.$$.fragment,l),r=!1},d(l){l&&$(e),H(n),s&&s.d()}}}function Hl(t){let e,n=t[14]("Information")+"",i,o,r,s=t[20](...Ui(t[3].info))+"";return{c(){e=g("h3"),i=O(n),o=C(),r=g("p")},m(l,a){w(l,e,a),u(e,i),w(l,o,a),w(l,r,a),r.innerHTML=s},p(l,a){a[0]&16384&&n!==(n=l[14]("Information")+"")&&R(i,n),a[0]&1048584&&s!==(s=l[20](...Ui(l[3].info))+"")&&(r.innerHTML=s)},d(l){l&&($(e),$(o),$(r))}}}function bg(t){let e,n,i,o,r,s,l,a,c,f,d,p=t[15].hasRightColumn&&!t[3].is("not_found"),h,_,m,S;e=new Ft({props:{$$slots:{default:[xm]},$$scope:{ctx:t}}});let b=t[17]==="settings"&&Ol(t);o=new Yr({props:{class:"main is-above-chat-input",$$slots:{default:[gg]},$$scope:{ctx:t}}}),o.$on("scrolled",t[28]),o.$on("visibility",t[29]);function E(D){t[30](D)}function N(D){t[31](D)}function j(D){t[32](D)}function I(D){t[33](D)}let A={conversation:t[1]};t[9]!==void 0&&(A.fillIn=t[9]),t[8]!==void 0&&(A.focus=t[8]),t[10]!==void 0&&(A.uploader=t[10]),t[11]!==void 0&&(A.uploadProgress=t[11]),s=new Uc({props:A}),de.push(()=>ge(s,"fillIn",E)),de.push(()=>ge(s,"focus",N)),de.push(()=>ge(s,"uploader",j)),de.push(()=>ge(s,"uploadProgress",I));let M=p&&zl(t);return{c(){q(e.$$.fragment),n=C(),b&&b.c(),i=C(),q(o.$$.fragment),r=C(),q(s.$$.fragment),d=C(),M&&M.c(),h=pt()},m(D,P){z(e,D,P),w(D,n,P),b&&b.m(D,P),w(D,i,P),z(o,D,P),w(D,r,P),z(s,D,P),w(D,d,P),M&&M.m(D,P),w(D,h,P),_=!0,m||(S=Ce(window,"focus",t[23]),m=!0)},p(D,P){const J={};P[0]&245770|P[1]&65536&&(J.$$scope={dirty:P,ctx:D}),e.$set(J),D[17]==="settings"?b?(b.p(D,P),P[0]&131072&&v(b,1)):(b=Ol(D),b.c(),v(b,1),b.m(i.parentNode,i)):b&&(ye(),y(b,1,1,()=>{b=null}),Se());const W={};P[0]&1928394|P[1]&65536&&(W.$$scope={dirty:P,ctx:D}),o.$set(W);const T={};P[0]&2&&(T.conversation=D[1]),!l&&P[0]&512&&(l=!0,T.fillIn=D[9],me(()=>l=!1)),!a&&P[0]&256&&(a=!0,T.focus=D[8],me(()=>a=!1)),!c&&P[0]&1024&&(c=!0,T.uploader=D[10],me(()=>c=!1)),!f&&P[0]&2048&&(f=!0,T.uploadProgress=D[11],me(()=>f=!1)),s.$set(T),P[0]&32776&&(p=D[15].hasRightColumn&&!D[3].is("not_found")),p?M?(M.p(D,P),P[0]&32776&&v(M,1)):(M=zl(D),M.c(),v(M,1),M.m(h.parentNode,h)):M&&(ye(),y(M,1,1,()=>{M=null}),Se())},i(D){_||(v(e.$$.fragment,D),v(b),v(o.$$.fragment,D),v(s.$$.fragment,D),v(M),_=!0)},o(D){y(e.$$.fragment,D),y(b),y(o.$$.fragment,D),y(s.$$.fragment,D),y(M),_=!1},d(D){D&&($(n),$(i),$(r),$(d),$(h)),H(e,D),b&&b.d(D),H(o,D),H(s,D),M&&M.d(D),m=!1,S()}}}function vg(t,e){const n=e.nodes[0]&&e.nodes[0].parentNode;if(n&&n.classList){const i=n.classList.contains("embed")?"add":"remove";n.classList[i]("hidden")}e.nodes.forEach(i=>t.appendChild(i))}function $g(t,e,n){let i,o,r=Oe,s=()=>(r(),r=_t(T,ee=>n(3,o=ee)),T),l,a,c,f,d,p=Oe,h=()=>(p(),p=_t(W,ee=>n(16,d=ee)),W),_,m,S=Oe,b=()=>(S(),S=_t(G,ee=>n(18,m=ee)),G),E,N=Oe,j=()=>(N(),N=_t(K,ee=>n(19,E=ee)),K),I;we(t,Re,ee=>n(26,l=ee)),we(t,lt,ee=>n(14,c=ee)),we(t,Pn,ee=>n(15,f=ee)),we(t,wt,ee=>n(17,_=ee)),we(t,jt,ee=>n(20,I=ee)),t.$$.on_destroy.push(()=>r()),t.$$.on_destroy.push(()=>p()),t.$$.on_destroy.push(()=>S()),t.$$.on_destroy.push(()=>N());let{connection_id:A=""}=e,{conversation_id:M=""}=e,{title:D="Chat"}=e;const P=new Km,J=mt("user");we(t,J,ee=>n(27,a=ee));let W=J.notifications;h();let T=J.notifications;s();let G=T.messages;b();let K=T.participants;j();let Q=new $t,U=-1,L={},V,F,Z,Y,B="",oe;zt(()=>{P.attach(document.querySelector(".main"),Z),oe=Re.on("click",ue)}),Rr(()=>{oe(),Object.keys(L).forEach(ee=>L[ee]()),P.detach()});function fe(){const[ee,ce]=o.connection_id.split("-");return ee+"://"+ce+"/"+i+"?tls=1"}function te(){(T.notifications||T.unread)&&T.markAsRead()}function ue(ee){const ce=ee.target.closest("a[href]");if((!ce||ce.href.indexOf("popover:")===-1)&&n(7,U=-1),!ce)return;const He=ce.classList.contains("le-thumbnail"),Be=ce.classList.contains("prevent-default");if((He||Be)&&ee.preventDefault(),He)return yf(ee,ce.querySelector("img"));const ve=(Be||ce.closest(".embed"))&&ce.hash.match(/action:([a-z]+):(.*)$/)||["all","unknown","value"];if(ve[2]=decodeURIComponent(ve[2]),["close","join","whois"].indexOf(ve[1])!==-1)T.send("/"+ve[1]+" "+ve[2]),ve[1]==="close"&&Re.go("/settings/conversation");else if(ve[1]==="expand"){const ne=T.messages.get(ve[2]);ne.expanded=!ne.expanded,T.messages.update({messages:!0})}else if(ve[1]==="mention")F(ve[2]);else if(ve[1]==="popover"){const ne=parseInt(ve[2],10);n(7,U=U!==ne?ne:-1)}else!ce.target&&ce.getAttribute("href").indexOf("/")!==0&&(ce.target="_blank")}function Ne(ee,ce){T.connection_id===ee&&T.conversation_id===ce||J.setActiveConversation({connection_id:ee,conversation_id:ce})}function ae(ee){if(ee.activeConversation!==T){if(L.conversation&&L.conversation(),L.unread&&L.unread(),popoverMessage=null,s(n(1,T=ee.activeConversation)),b(n(2,G=T.messages)),j(n(5,K=T.participants)),h(n(4,W=ee.findConversation({connection_id:T.connection_id})||T)),n(6,Q=new $t),L.conversation=T.subscribe(ce=>{s(n(1,T=ce))}),L.unread=()=>T.update({unread:0}),T.markAsRead(),n(12,B=Wh(Re.hash)&&Re.hash||""),B)return T.load({around:B});if(!T.historyStopAt)return T.load({around:Q.toISOString()})}}const $e=ee=>tm(ee,{conversation:T}),De=ee=>nm(ee,{conversation:T,timestampFromUrl:B});function je(ee){F=ee,n(9,F)}function Pe(ee){V=ee,n(8,V)}function Te(ee){Z=ee,n(10,Z)}function ze(ee){Y=ee,n(11,Y)}return t.$$set=ee=>{"connection_id"in ee&&n(25,A=ee.connection_id),"conversation_id"in ee&&n(0,M=ee.conversation_id),"title"in ee&&n(24,D=ee.title)},t.$$.update=()=>{t.$$.dirty[0]&33554433&&Ne(A,M),t.$$.dirty[0]&134217728&&ae(a),t.$$.dirty[0]&134217732&&G.update({expandUrlToMedia:a.expandUrlToMedia}),t.$$.dirty[0]&8&&n(13,i=encodeURIComponent(o.name)),t.$$.dirty[0]&8&&n(24,D=o.title),t.$$.dirty[0]&67108874&&!l.hash&&!o.historyStopAt&&T.load({})},[M,T,G,o,W,K,Q,U,V,F,Z,Y,B,i,c,f,d,_,m,E,I,J,fe,te,D,A,l,a,$e,De,je,Pe,Te,ze]}class wg extends Xe{constructor(e){super(),Qe(this,e,$g,bg,Ze,{connection_id:25,conversation_id:0,title:24},null,[-1,-1])}}function kg(t){let e;const n=t[5].default,i=Gt(n,t,t[4],null);return{c(){i&&i.c()},m(o,r){i&&i.m(o,r),e=!0},p(o,r){i&&i.p&&(!e||r&16)&&Yt(i,n,o,o[4],e?Kt(n,o[4],r,null):Vt(o[4]),null)},i(o){e||(v(i,o),e=!0)},o(o){y(i,o),e=!1},d(o){i&&i.d(o)}}}function yg(t){let e=t[3]("Loading...")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&8&&e!==(e=i[3]("Loading...")+"")&&R(n,e)},i:Oe,o:Oe,d(i){i&&$(n)}}}function Sg(t){let e,n=t[3](t[2].error())+"",i;return{c(){e=g("div"),i=O(n),k(e,"class","error")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&12&&n!==(n=o[3](o[2].error())+"")&&R(i,n)},i:Oe,o:Oe,d(o){o&&$(e)}}}function Eg(t){let e,n,i,o,r,s,l;const a=[Sg,yg,kg],c=[];function f(d,p){return p&4&&(i=null),p&4&&(o=null),i==null&&(i=!!d[2].is("error")),i?0:(o==null&&(o=!!d[2].is("loading")),o?1:2)}return r=f(t,-1),s=c[r]=a[r](t),{c(){e=g("tr"),n=g("td"),s.c(),k(n,"colspan",t[0])},m(d,p){w(d,e,p),u(e,n),c[r].m(n,null),l=!0},p(d,[p]){let h=r;r=f(d,p),r===h?c[r].p(d,p):(ye(),y(c[h],1,1,()=>{c[h]=null}),Se(),s=c[r],s?s.p(d,p):(s=c[r]=a[r](d),s.c()),v(s,1),s.m(n,null)),(!l||p&1)&&k(n,"colspan",d[0])},i(d){l||(v(s),l=!0)},o(d){y(s),l=!1},d(d){d&&$(e),c[r].d()}}}function Cg(t,e,n){let i,o=Oe,r=()=>(o(),o=_t(f,d=>n(2,i=d)),f),s;we(t,lt,d=>n(3,s=d)),t.$$.on_destroy.push(()=>o());let{$$slots:l={},$$scope:a}=e,{colspan:c=1}=e,{op:f}=e;return r(),t.$$set=d=>{"colspan"in d&&n(0,c=d.colspan),"op"in d&&r(n(1,f=d.op)),"$$scope"in d&&n(4,a=d.$$scope)},[c,f,i,s,a,l]}class Mo extends Xe{constructor(e){super(),Qe(this,e,Cg,Eg,Ze,{colspan:0,op:1})}}function ql(t,e,n){const i=t.slice();return i[9]=e[n],i}function Wl(t,e,n){const i=t.slice();return i[12]=e[n],i}function Ag(t){let e,n=t[2]("Connections")+"",i;return{c(){e=g("h1"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&4&&n!==(n=o[2]("Connections")+"")&&R(i,n)},d(o){o&&$(e)}}}function Og(t){let e=t[12].host.replace(/:\d+$/,"")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&1&&e!==(e=i[12].host.replace(/:\d+$/,"")+"")&&R(n,e)},d(i){i&&$(n)}}}function Gl(t){let e,n,i,o,r,s=(Ie.true(t[12].tls_verify)?t[2]("Strict"):Ie.true(t[12].tls)?t[2]("Yes"):t[2]("No"))+"",l,a,c,f=t[12].nick+"",d,p,h;return i=new Ge({props:{href:"/settings/connection/"+t[12].connection_id,$$slots:{default:[Og]},$$scope:{ctx:t}}}),{c(){e=g("tr"),n=g("td"),q(i.$$.fragment),o=C(),r=g("td"),l=O(s),a=C(),c=g("td"),d=O(f),p=C()},m(_,m){w(_,e,m),u(e,n),z(i,n,null),u(e,o),u(e,r),u(r,l),u(e,a),u(e,c),u(c,d),u(e,p),h=!0},p(_,m){const S={};m&1&&(S.href="/settings/connection/"+_[12].connection_id),m&32769&&(S.$$scope={dirty:m,ctx:_}),i.$set(S),(!h||m&5)&&s!==(s=(Ie.true(_[12].tls_verify)?_[2]("Strict"):Ie.true(_[12].tls)?_[2]("Yes"):_[2]("No"))+"")&&R(l,s),(!h||m&1)&&f!==(f=_[12].nick+"")&&R(d,f)},i(_){h||(v(i.$$.fragment,_),h=!0)},o(_){y(i.$$.fragment,_),h=!1},d(_){_&&$(e),H(i)}}}function Kl(t){let e,n,i;return n=new Ge({props:{href:"/settings/connection/add",class:"btn",$$slots:{default:[Ng]},$$scope:{ctx:t}}}),{c(){e=g("div"),q(n.$$.fragment),k(e,"class","form-actions")},m(o,r){w(o,e,r),z(n,e,null),i=!0},p(o,r){const s={};r&32772&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){i||(v(n.$$.fragment,o),i=!0)},o(o){y(n.$$.fragment,o),i=!1},d(o){o&&$(e),H(n)}}}function Ng(t){let e,n,i,o=t[2]("Add")+"",r,s;return e=new he({props:{name:"plus-circle"}}),{c(){q(e.$$.fragment),n=C(),i=g("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),u(i,r),s=!0},p(l,a){(!s||a&4)&&o!==(o=l[2]("Add")+"")&&R(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){l&&($(n),$(i)),H(e,l)}}}function Tg(t){let e=t[9].url.host.replace(/:\d+$/,"")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&8&&e!==(e=i[9].url.host.replace(/:\d+$/,"")+"")&&R(n,e)},d(i){i&&$(n)}}}function Yl(t){let e,n,i,o,r,s=(Ie.true(t[9].tls_verify)?t[2]("Strict"):Ie.true(t[9].tls)?t[2]("Yes"):t[2]("No"))+"",l,a,c,f=(t[9].is_default?t[2]("Yes"):t[2]("No"))+"",d,p,h,_=(t[9].is_forced?t[2]("Yes"):t[2]("No"))+"",m,S,b;return i=new Ge({props:{href:"/settings/connection-profile/"+t[9].id,$$slots:{default:[Tg]},$$scope:{ctx:t}}}),{c(){e=g("tr"),n=g("td"),q(i.$$.fragment),o=C(),r=g("td"),l=O(s),a=C(),c=g("td"),d=O(f),p=C(),h=g("td"),m=O(_),S=C()},m(E,N){w(E,e,N),u(e,n),z(i,n,null),u(e,o),u(e,r),u(r,l),u(e,a),u(e,c),u(c,d),u(e,p),u(e,h),u(h,m),u(e,S),b=!0},p(E,N){const j={};N&8&&(j.href="/settings/connection-profile/"+E[9].id),N&32776&&(j.$$scope={dirty:N,ctx:E}),i.$set(j),(!b||N&12)&&s!==(s=(Ie.true(E[9].tls_verify)?E[2]("Strict"):Ie.true(E[9].tls)?E[2]("Yes"):E[2]("No"))+"")&&R(l,s),(!b||N&12)&&f!==(f=(E[9].is_default?E[2]("Yes"):E[2]("No"))+"")&&R(d,f),(!b||N&12)&&_!==(_=(E[9].is_forced?E[2]("Yes"):E[2]("No"))+"")&&R(m,_)},i(E){b||(v(i.$$.fragment,E),b=!0)},o(E){y(i.$$.fragment,E),b=!1},d(E){E&&$(e),H(i)}}}function Vl(t){let e,n,i;return n=new Ge({props:{href:"/settings/connection-profile/add",class:"btn",$$slots:{default:[Mg]},$$scope:{ctx:t}}}),{c(){e=g("div"),q(n.$$.fragment),k(e,"class","form-actions")},m(o,r){w(o,e,r),z(n,e,null),i=!0},p(o,r){const s={};r&32772&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){i||(v(n.$$.fragment,o),i=!0)},o(o){y(n.$$.fragment,o),i=!1},d(o){o&&$(e),H(n)}}}function Mg(t){let e,n,i,o=t[2]("Add")+"",r,s;return e=new he({props:{name:"plus-circle"}}),{c(){q(e.$$.fragment),n=C(),i=g("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),u(i,r),s=!0},p(l,a){(!s||a&4)&&o!==(o=l[2]("Add")+"")&&R(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){l&&($(n),$(i)),H(e,l)}}}function Rg(t){let e,n,i,o,r=t[2]("Connections")+"",s,l,a,c,f,d,p=t[2]("Host")+"",h,_,m,S=t[2]("Secure")+"",b,E,N,j=t[2]("Nick")+"",I,A,M,D,P,J,W=t[2]("Connection profiles")+"",T,G,K,Q=t[2]("Connection profiles are used to set up global values for every connection that connect to the same host.")+"",U,L,V,F,Z,Y,B=t[2]("Host")+"",oe,fe,te,ue=t[2]("Secure")+"",Ne,ae,$e,De=t[2]("Default")+"",je,Pe,Te,ze=t[2]("Forced")+"",ee,ce,He,Be,Ee,ve,ne;e=new Ft({props:{$$slots:{default:[Ag]},$$scope:{ctx:t}}});let pe=xe(t[0]),ke=[];for(let re=0;re<pe.length;re+=1)ke[re]=Gl(Wl(t,pe,re));const se=re=>y(ke[re],1,1,()=>{ke[re]=null});let be=(t[1]||!t[4].forced_connection)&&Kl(t);Be=new Mo({props:{op:t[5].op}});let Le=xe(t[3].search()),x=[];for(let re=0;re<Le.length;re+=1)x[re]=Yl(ql(t,Le,re));const X=re=>y(x[re],1,1,()=>{x[re]=null});let ie=t[1]&&Vl(t);return{c(){q(e.$$.fragment),n=C(),i=g("main"),o=g("h2"),s=O(r),l=C(),a=g("table"),c=g("thead"),f=g("tr"),d=g("th"),h=O(p),_=C(),m=g("th"),b=O(S),E=C(),N=g("th"),I=O(j),A=C(),M=g("tbody");for(let re=0;re<ke.length;re+=1)ke[re].c();D=C(),be&&be.c(),P=C(),J=g("h2"),T=O(W),G=C(),K=g("p"),U=O(Q),L=C(),V=g("table"),F=g("thead"),Z=g("tr"),Y=g("th"),oe=O(B),fe=C(),te=g("th"),Ne=O(ue),ae=C(),$e=g("th"),je=O(De),Pe=C(),Te=g("th"),ee=O(ze),ce=C(),He=g("tbody"),q(Be.$$.fragment),Ee=C();for(let re=0;re<x.length;re+=1)x[re].c();ve=C(),ie&&ie.c(),k(i,"class","main")},m(re,_e){z(e,re,_e),w(re,n,_e),w(re,i,_e),u(i,o),u(o,s),u(i,l),u(i,a),u(a,c),u(c,f),u(f,d),u(d,h),u(f,_),u(f,m),u(m,b),u(f,E),u(f,N),u(N,I),u(a,A),u(a,M);for(let qe=0;qe<ke.length;qe+=1)ke[qe]&&ke[qe].m(M,null);u(i,D),be&&be.m(i,null),u(i,P),u(i,J),u(J,T),u(i,G),u(i,K),u(K,U),u(i,L),u(i,V),u(V,F),u(F,Z),u(Z,Y),u(Y,oe),u(Z,fe),u(Z,te),u(te,Ne),u(Z,ae),u(Z,$e),u($e,je),u(Z,Pe),u(Z,Te),u(Te,ee),u(V,ce),u(V,He),z(Be,He,null),u(He,Ee);for(let qe=0;qe<x.length;qe+=1)x[qe]&&x[qe].m(He,null);u(i,ve),ie&&ie.m(i,null),ne=!0},p(re,[_e]){const qe={};if(_e&32772&&(qe.$$scope={dirty:_e,ctx:re}),e.$set(qe),(!ne||_e&4)&&r!==(r=re[2]("Connections")+"")&&R(s,r),(!ne||_e&4)&&p!==(p=re[2]("Host")+"")&&R(h,p),(!ne||_e&4)&&S!==(S=re[2]("Secure")+"")&&R(b,S),(!ne||_e&4)&&j!==(j=re[2]("Nick")+"")&&R(I,j),_e&5){pe=xe(re[0]);let Ue;for(Ue=0;Ue<pe.length;Ue+=1){const rt=Wl(re,pe,Ue);ke[Ue]?(ke[Ue].p(rt,_e),v(ke[Ue],1)):(ke[Ue]=Gl(rt),ke[Ue].c(),v(ke[Ue],1),ke[Ue].m(M,null))}for(ye(),Ue=pe.length;Ue<ke.length;Ue+=1)se(Ue);Se()}if(re[1]||!re[4].forced_connection?be?(be.p(re,_e),_e&2&&v(be,1)):(be=Kl(re),be.c(),v(be,1),be.m(i,P)):be&&(ye(),y(be,1,1,()=>{be=null}),Se()),(!ne||_e&4)&&W!==(W=re[2]("Connection profiles")+"")&&R(T,W),(!ne||_e&4)&&Q!==(Q=re[2]("Connection profiles are used to set up global values for every connection that connect to the same host.")+"")&&R(U,Q),(!ne||_e&4)&&B!==(B=re[2]("Host")+"")&&R(oe,B),(!ne||_e&4)&&ue!==(ue=re[2]("Secure")+"")&&R(Ne,ue),(!ne||_e&4)&&De!==(De=re[2]("Default")+"")&&R(je,De),(!ne||_e&4)&&ze!==(ze=re[2]("Forced")+"")&&R(ee,ze),_e&12){Le=xe(re[3].search());let Ue;for(Ue=0;Ue<Le.length;Ue+=1){const rt=ql(re,Le,Ue);x[Ue]?(x[Ue].p(rt,_e),v(x[Ue],1)):(x[Ue]=Yl(rt),x[Ue].c(),v(x[Ue],1),x[Ue].m(He,null))}for(ye(),Ue=Le.length;Ue<x.length;Ue+=1)X(Ue);Se()}re[1]?ie?(ie.p(re,_e),_e&2&&v(ie,1)):(ie=Vl(re),ie.c(),v(ie,1),ie.m(i,null)):ie&&(ye(),y(ie,1,1,()=>{ie=null}),Se())},i(re){if(!ne){v(e.$$.fragment,re);for(let _e=0;_e<pe.length;_e+=1)v(ke[_e]);v(be),v(Be.$$.fragment,re);for(let _e=0;_e<Le.length;_e+=1)v(x[_e]);v(ie),ne=!0}},o(re){y(e.$$.fragment,re),ke=ke.filter(Boolean);for(let _e=0;_e<ke.length;_e+=1)y(ke[_e]);y(be),y(Be.$$.fragment,re),x=x.filter(Boolean);for(let _e=0;_e<x.length;_e+=1)y(x[_e]);y(ie),ne=!1},d(re){re&&($(n),$(i)),H(e,re),yt(ke,re),be&&be.d(),H(Be),yt(x,re),ie&&ie.d()}}}function Lg(t,e,n){let i,o,r,s;we(t,lt,p=>n(2,r=p));const l="Connections",a=mt("user");we(t,a,p=>n(7,o=p));const c=a.connectionProfiles;we(t,c,p=>n(3,s=p));const f=p=>p.url.toFields({connection_id:p.connection_id});let d=[];return zt(()=>c.load()),t.$$.update=()=>{t.$$.dirty&129&&o.is("success")&&!d.length&&n(0,d=a.connections.toArray().map(f))},n(1,i=a.roles.has("admin")),[d,i,r,s,a,c,l,o]}class Ig extends Xe{constructor(e){super(),Qe(this,e,Lg,Rg,Ze,{title:6})}get title(){return this.$$.ctx[6]}}function Pg(t){let e,n,i,o,r=Nt(t[4]("See all connection profiles"))+"",s,l;return e=new he({props:{name:"list"}}),n=new he({props:{name:"times"}}),{c(){q(e.$$.fragment),q(n.$$.fragment),i=C(),o=g("span"),s=O(r),k(o,"class","tooltip is-left")},m(a,c){z(e,a,c),z(n,a,c),w(a,i,c),w(a,o,c),u(o,s),l=!0},p(a,c){(!l||c&16)&&r!==(r=Nt(a[4]("See all connection profiles"))+"")&&R(s,r)},i(a){l||(v(e.$$.fragment,a),v(n.$$.fragment,a),l=!0)},o(a){y(e.$$.fragment,a),y(n.$$.fragment,a),l=!1},d(a){a&&($(i),$(o)),H(e,a),H(n,a)}}}function Dg(t){let e,n=(t[0]==="add"?t[4]("Add connection profile"):t[4]("Edit connection profile"))+"",i,o,r,s;return r=new Ge({props:{href:"/settings/connections",class:"btn-hallow can-toggle is-active has-tooltip",$$slots:{default:[Pg]},$$scope:{ctx:t}}}),{c(){e=g("h1"),i=O(n),o=C(),q(r.$$.fragment)},m(l,a){w(l,e,a),u(e,i),w(l,o,a),z(r,l,a),s=!0},p(l,a){(!s||a&17)&&n!==(n=(l[0]==="add"?l[4]("Add connection profile"):l[4]("Edit connection profile"))+"")&&R(i,n);const c={};a&33554448&&(c.$$scope={dirty:a,ctx:l}),r.$set(c)},i(l){s||(v(r.$$.fragment,l),s=!0)},o(l){y(r.$$.fragment,l),s=!1},d(l){l&&($(e),$(o)),H(r,l)}}}function Ug(t){let e,n=t[4]("Host and port")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Host and port")+"")&&R(i,n)},d(o){o&&$(e)}}}function Bg(t){let e,n=t[4]("Will match connections on hostname.")+"",i;return{c(){e=g("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Will match connections on hostname.")+"")&&R(i,n)},d(o){o&&$(e)}}}function Fg(t){let e,n=t[4]("Secure connection (TLS)")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Secure connection (TLS)")+"")&&R(i,n)},d(o){o&&$(e)}}}function jg(t){let e,n=t[4]("Verify certificate (TLS)")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Verify certificate (TLS)")+"")&&R(i,n)},d(o){o&&$(e)}}}function zg(t){let e,n=t[4]("Conversation name")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Conversation name")+"")&&R(i,n)},d(o){o&&$(e)}}}function Hg(t){let e,n=t[4]("Service accounts")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Service accounts")+"")&&R(i,n)},d(o){o&&$(e)}}}function qg(t){let e,n=t[4]("Messages from these nicks will be shown in the connection conversation.")+"",i;return{c(){e=g("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Messages from these nicks will be shown in the connection conversation.")+"")&&R(i,n)},d(o){o&&$(e)}}}function Wg(t){let e,n=t[4]("Default connection")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Default connection")+"")&&R(i,n)},d(o){o&&$(e)}}}function Gg(t){let e,n=t[4]("Force default connection")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Force default connection")+"")&&R(i,n)},d(o){o&&$(e)}}}function Zl(t){let e,n=t[4]("Tick this box if you want to prevent users from creating custom connections.")+"",i,o;return{c(){e=g("p"),i=O(n),k(e,"class","help"),e.hidden=o=!t[1].is_default},m(r,s){w(r,e,s),u(e,i)},p(r,s){s&16&&n!==(n=r[4]("Tick this box if you want to prevent users from creating custom connections.")+"")&&R(i,n),s&2&&o!==(o=!r[1].is_default)&&(e.hidden=o)},d(r){r&&$(e)}}}function Kg(t){let e,n=t[4]("Advanced settings")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Advanced settings")+"")&&R(i,n)},d(o){o&&$(e)}}}function Jl(t){let e,n,i,o,r,s,l,a,c,f,d,p,h,_,m=t[4]("This might result in flood ban.")+"",S,b,E;function N(W){t[19](W)}let j={name:"max_bulk_message_size",type:"number",readonly:!t[3],$$slots:{help:[Vg],label:[Yg]},$$scope:{ctx:t}};t[1].max_bulk_message_size!==void 0&&(j.value=t[1].max_bulk_message_size),n=new Je({props:j}),de.push(()=>ge(n,"value",N));function I(W){t[20](W)}let A={name:"max_message_length",type:"number",readonly:!t[3],$$slots:{help:[Jg],label:[Zg]},$$scope:{ctx:t}};t[1].max_message_length!==void 0&&(A.value=t[1].max_message_length),r=new Je({props:A}),de.push(()=>ge(r,"value",I));function M(W){t[21](W)}let D={name:"webirc_password",type:"password",readonly:!t[3],$$slots:{label:[Qg]},$$scope:{ctx:t}};t[1].webirc_password!==void 0&&(D.value=t[1].webirc_password),a=new Je({props:D}),de.push(()=>ge(a,"value",M));function P(W){t[22](W)}let J={name:"skip_queue",disabled:!t[3],$$slots:{label:[Xg]},$$scope:{ctx:t}};return t[1].skip_queue!==void 0&&(J.value=t[1].skip_queue),d=new it({props:J}),de.push(()=>ge(d,"value",P)),{c(){e=g("div"),q(n.$$.fragment),o=C(),q(r.$$.fragment),l=C(),q(a.$$.fragment),f=C(),q(d.$$.fragment),h=C(),_=g("p"),S=O(m),k(_,"class","help"),k(e,"class","form-group")},m(W,T){w(W,e,T),z(n,e,null),u(e,o),z(r,e,null),u(e,l),z(a,e,null),u(e,f),z(d,e,null),u(e,h),u(e,_),u(_,S),E=!0},p(W,T){const G={};T&8&&(G.readonly=!W[3]),T&33554448&&(G.$$scope={dirty:T,ctx:W}),!i&&T&2&&(i=!0,G.value=W[1].max_bulk_message_size,me(()=>i=!1)),n.$set(G);const K={};T&8&&(K.readonly=!W[3]),T&33554448&&(K.$$scope={dirty:T,ctx:W}),!s&&T&2&&(s=!0,K.value=W[1].max_message_length,me(()=>s=!1)),r.$set(K);const Q={};T&8&&(Q.readonly=!W[3]),T&33554448&&(Q.$$scope={dirty:T,ctx:W}),!c&&T&2&&(c=!0,Q.value=W[1].webirc_password,me(()=>c=!1)),a.$set(Q);const U={};T&8&&(U.disabled=!W[3]),T&33554448&&(U.$$scope={dirty:T,ctx:W}),!p&&T&2&&(p=!0,U.value=W[1].skip_queue,me(()=>p=!1)),d.$set(U),(!E||T&16)&&m!==(m=W[4]("This might result in flood ban.")+"")&&R(S,m)},i(W){E||(v(n.$$.fragment,W),v(r.$$.fragment,W),v(a.$$.fragment,W),v(d.$$.fragment,W),W&&at(()=>{E&&(b||(b=et(e,Jt,{duration:150},!0)),b.run(1))}),E=!0)},o(W){y(n.$$.fragment,W),y(r.$$.fragment,W),y(a.$$.fragment,W),y(d.$$.fragment,W),W&&(b||(b=et(e,Jt,{duration:150},!1)),b.run(0)),E=!1},d(W){W&&$(e),H(n),H(r),H(a),H(d),W&&b&&b.end()}}}function Yg(t){let e,n=t[4]("Max number of pasted lines")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Max number of pasted lines")+"")&&R(i,n)},d(o){o&&$(e)}}}function Vg(t){let e,n=t[4]("Setting this value too high might get you banned from the server.")+"",i;return{c(){e=g("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Setting this value too high might get you banned from the server.")+"")&&R(i,n)},d(o){o&&$(e)}}}function Zg(t){let e,n=t[4]("Max message length")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Max message length")+"")&&R(i,n)},d(o){o&&$(e)}}}function Jg(t){let e,n=t[4]("Messages longer than this will be split into multiple messages.")+"",i;return{c(){e=g("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Messages longer than this will be split into multiple messages.")+"")&&R(i,n)},d(o){o&&$(e)}}}function Qg(t){let e,n=t[4]("WEBIRC password")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("WEBIRC password")+"")&&R(i,n)},d(o){o&&$(e)}}}function Xg(t){let e,n=t[4]("Skip connection queue")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Skip connection queue")+"")&&R(i,n)},d(o){o&&$(e)}}}function Ql(t){let e,n=t[4]("Only administrators can edit this section.")+"",i;return{c(){e=g("p"),i=O(n),k(e,"class","error")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Only administrators can edit this section.")+"")&&R(i,n)},d(o){o&&$(e)}}}function xg(t){let e,n;return e=new ft({props:{icon:"plus-circle",op:t[7],$$slots:{default:[t1]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o&33554448&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function e1(t){let e,n,i,o;return e=new ft({props:{icon:"save",op:t[7],disabled:!t[3],$$slots:{default:[n1]},$$scope:{ctx:t}}}),i=new ft({props:{icon:"trash",type:"button",op:t[6],disabled:!t[3],$$slots:{default:[i1]},$$scope:{ctx:t}}}),i.$on("click",t[8]),{c(){q(e.$$.fragment),n=C(),q(i.$$.fragment)},m(r,s){z(e,r,s),w(r,n,s),z(i,r,s),o=!0},p(r,s){const l={};s&8&&(l.disabled=!r[3]),s&33554448&&(l.$$scope={dirty:s,ctx:r}),e.$set(l);const a={};s&8&&(a.disabled=!r[3]),s&33554448&&(a.$$scope={dirty:s,ctx:r}),i.$set(a)},i(r){o||(v(e.$$.fragment,r),v(i.$$.fragment,r),o=!0)},o(r){y(e.$$.fragment,r),y(i.$$.fragment,r),o=!1},d(r){r&&$(n),H(e,r),H(i,r)}}}function t1(t){let e,n=t[4]("Add")+"",i;return{c(){e=g("span"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Add")+"")&&R(i,n)},d(o){o&&$(e)}}}function n1(t){let e,n=t[4]("Update")+"",i;return{c(){e=g("span"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Update")+"")&&R(i,n)},d(o){o&&$(e)}}}function i1(t){let e,n=t[4]("Delete")+"",i;return{c(){e=g("span"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Delete")+"")&&R(i,n)},d(o){o&&$(e)}}}function o1(t){let e,n,i,o,r,s,l,a,c,f,d,p,h,_,m,S,b,E,N,j,I,A,M,D,P,J,W,T,G,K,Q,U,L,V,F,Z,Y,B,oe,fe,te;e=new Ft({props:{$$slots:{default:[Dg]},$$scope:{ctx:t}}});function ue(X){t[11](X)}let Ne={name:"host",placeholder:t[4]("Ex: irc.libera.chat:6697"),readonly:!t[3],$$slots:{help:[Bg],label:[Ug]},$$scope:{ctx:t}};t[1].host!==void 0&&(Ne.value=t[1].host),r=new Je({props:Ne}),de.push(()=>ge(r,"value",ue));function ae(X){t[12](X)}let $e={name:"tls",disabled:!t[3],$$slots:{label:[Fg]},$$scope:{ctx:t}};t[1].tls!==void 0&&($e.value=t[1].tls),a=new it({props:$e}),de.push(()=>ge(a,"value",ae));function De(X){t[13](X)}let je={name:"tls_verify",disabled:!t[1].tls||!t[3],hidden:!t[1].tls,$$slots:{label:[jg]},$$scope:{ctx:t}};t[1].tls_verify!==void 0&&(je.value=t[1].tls_verify),d=new it({props:je}),de.push(()=>ge(d,"value",De));function Pe(X){t[14](X)}let Te={name:"conversation_id",placeholder:t[4]("Ex: #convos"),readonly:!t[3],$$slots:{label:[zg]},$$scope:{ctx:t}};t[1].conversation_id!==void 0&&(Te.value=t[1].conversation_id),_=new Je({props:Te}),de.push(()=>ge(_,"value",Pe));function ze(X){t[15](X)}let ee={name:"service_accounts",placeholder:t[4]("chanserv, nickserv, ..."),readonly:!t[3],$$slots:{help:[qg],label:[Hg]},$$scope:{ctx:t}};t[1].service_accounts!==void 0&&(ee.value=t[1].service_accounts),b=new Je({props:ee}),de.push(()=>ge(b,"value",ze));function ce(X){t[16](X)}let He={name:"is_default",disabled:!t[3],$$slots:{label:[Wg]},$$scope:{ctx:t}};t[1].is_default!==void 0&&(He.value=t[1].is_default),j=new it({props:He}),de.push(()=>ge(j,"value",ce));function Be(X){t[17](X)}let Ee={name:"is_forced",disabled:!t[3],hidden:!t[1].is_default,$$slots:{label:[Gg]},$$scope:{ctx:t}};t[1].is_forced!==void 0&&(Ee.value=t[1].is_forced),M=new it({props:Ee}),de.push(()=>ge(M,"value",Be));let ve=t[3]&&Zl(t);function ne(X){t[18](X)}let pe={icon:"caret",name:"show_advanced_settings",$$slots:{label:[Kg]},$$scope:{ctx:t}};t[2]!==void 0&&(pe.value=t[2]),W=new it({props:pe}),de.push(()=>ge(W,"value",ne));let ke=t[2]&&Jl(t),se=!t[3]&&Ql(t);const be=[e1,xg],Le=[];function x(X,ie){return X[0]!=="add"?0:1}return L=x(t),V=Le[L]=be[L](t),Z=new Lt({props:{op:t[6],success:"Deleted."}}),B=new Lt({props:{op:t[7]}}),{c(){q(e.$$.fragment),n=C(),i=g("main"),o=g("form"),q(r.$$.fragment),l=C(),q(a.$$.fragment),f=C(),q(d.$$.fragment),h=C(),q(_.$$.fragment),S=C(),q(b.$$.fragment),N=C(),q(j.$$.fragment),A=C(),q(M.$$.fragment),P=C(),ve&&ve.c(),J=C(),q(W.$$.fragment),G=C(),ke&&ke.c(),K=C(),se&&se.c(),Q=C(),U=g("div"),V.c(),F=C(),q(Z.$$.fragment),Y=C(),q(B.$$.fragment),k(U,"class","form-actions"),k(o,"method","post"),k(i,"class","main")},m(X,ie){z(e,X,ie),w(X,n,ie),w(X,i,ie),u(i,o),z(r,o,null),u(o,l),z(a,o,null),u(o,f),z(d,o,null),u(o,h),z(_,o,null),u(o,S),z(b,o,null),u(o,N),z(j,o,null),u(o,A),z(M,o,null),u(o,P),ve&&ve.m(o,null),u(o,J),z(W,o,null),u(o,G),ke&&ke.m(o,null),u(o,K),se&&se.m(o,null),u(o,Q),u(o,U),Le[L].m(U,null),u(o,F),z(Z,o,null),u(o,Y),z(B,o,null),oe=!0,fe||(te=Ce(o,"submit",st(t[9])),fe=!0)},p(X,[ie]){const re={};ie&33554449&&(re.$$scope={dirty:ie,ctx:X}),e.$set(re);const _e={};ie&16&&(_e.placeholder=X[4]("Ex: irc.libera.chat:6697")),ie&8&&(_e.readonly=!X[3]),ie&33554448&&(_e.$$scope={dirty:ie,ctx:X}),!s&&ie&2&&(s=!0,_e.value=X[1].host,me(()=>s=!1)),r.$set(_e);const qe={};ie&8&&(qe.disabled=!X[3]),ie&33554448&&(qe.$$scope={dirty:ie,ctx:X}),!c&&ie&2&&(c=!0,qe.value=X[1].tls,me(()=>c=!1)),a.$set(qe);const Ue={};ie&10&&(Ue.disabled=!X[1].tls||!X[3]),ie&2&&(Ue.hidden=!X[1].tls),ie&33554448&&(Ue.$$scope={dirty:ie,ctx:X}),!p&&ie&2&&(p=!0,Ue.value=X[1].tls_verify,me(()=>p=!1)),d.$set(Ue);const rt={};ie&16&&(rt.placeholder=X[4]("Ex: #convos")),ie&8&&(rt.readonly=!X[3]),ie&33554448&&(rt.$$scope={dirty:ie,ctx:X}),!m&&ie&2&&(m=!0,rt.value=X[1].conversation_id,me(()=>m=!1)),_.$set(rt);const Et={};ie&16&&(Et.placeholder=X[4]("chanserv, nickserv, ...")),ie&8&&(Et.readonly=!X[3]),ie&33554448&&(Et.$$scope={dirty:ie,ctx:X}),!E&&ie&2&&(E=!0,Et.value=X[1].service_accounts,me(()=>E=!1)),b.$set(Et);const Pt={};ie&8&&(Pt.disabled=!X[3]),ie&33554448&&(Pt.$$scope={dirty:ie,ctx:X}),!I&&ie&2&&(I=!0,Pt.value=X[1].is_default,me(()=>I=!1)),j.$set(Pt);const ct={};ie&8&&(ct.disabled=!X[3]),ie&2&&(ct.hidden=!X[1].is_default),ie&33554448&&(ct.$$scope={dirty:ie,ctx:X}),!D&&ie&2&&(D=!0,ct.value=X[1].is_forced,me(()=>D=!1)),M.$set(ct),X[3]?ve?ve.p(X,ie):(ve=Zl(X),ve.c(),ve.m(o,J)):ve&&(ve.d(1),ve=null);const Xt={};ie&33554448&&(Xt.$$scope={dirty:ie,ctx:X}),!T&&ie&4&&(T=!0,Xt.value=X[2],me(()=>T=!1)),W.$set(Xt),X[2]?ke?(ke.p(X,ie),ie&4&&v(ke,1)):(ke=Jl(X),ke.c(),v(ke,1),ke.m(o,K)):ke&&(ye(),y(ke,1,1,()=>{ke=null}),Se()),X[3]?se&&(se.d(1),se=null):se?se.p(X,ie):(se=Ql(X),se.c(),se.m(o,Q));let Ht=L;L=x(X),L===Ht?Le[L].p(X,ie):(ye(),y(Le[Ht],1,1,()=>{Le[Ht]=null}),Se(),V=Le[L],V?V.p(X,ie):(V=Le[L]=be[L](X),V.c()),v(V,1),V.m(U,null))},i(X){oe||(v(e.$$.fragment,X),v(r.$$.fragment,X),v(a.$$.fragment,X),v(d.$$.fragment,X),v(_.$$.fragment,X),v(b.$$.fragment,X),v(j.$$.fragment,X),v(M.$$.fragment,X),v(W.$$.fragment,X),v(ke),v(V),v(Z.$$.fragment,X),v(B.$$.fragment,X),oe=!0)},o(X){y(e.$$.fragment,X),y(r.$$.fragment,X),y(a.$$.fragment,X),y(d.$$.fragment,X),y(_.$$.fragment,X),y(b.$$.fragment,X),y(j.$$.fragment,X),y(M.$$.fragment,X),y(W.$$.fragment,X),y(ke),y(V),y(Z.$$.fragment,X),y(B.$$.fragment,X),oe=!1},d(X){X&&($(n),$(i)),H(e,X),H(r),H(a),H(d),H(_),H(b),H(j),H(M),ve&&ve.d(),H(W),ke&&ke.d(),se&&se.d(),Le[L].d(),H(Z),H(B),fe=!1,te()}}}function r1(t,e,n){let i,o,r;we(t,lt,T=>n(4,r=T));let{profile_id:s="add"}=e;const l=s==="add"?"Add connection profile":"Edit connection profile",a=mt("user"),c=a.connectionProfiles;we(t,c,T=>n(23,o=T));const f=nt.op("removeConnectionProfile"),d=nt.op("saveConnectionProfile");let p={},h=!1;zt(async()=>{await c.load(),n(1,p={...o.find(s)||o.defaultProfile()})});async function _(){await f.perform({id:s}),await c.load({force:!0}),await Di(),Re.go("/settings/connections")}async function m(){["is_default","is_forced","skip_queue"].forEach(T=>n(1,p[T]=!!p[T],p)),n(1,p.service_accounts=Pr(p.service_accounts),p),n(1,p.url=new gn("irc://localhost").fromFields(p).toString(),p),await d.perform(p),!d.is("error")&&(p.is_default&&a.update({default_connection:p.url,forced_connection:p.is_forced}),await c.load({force:!0}),await Di(),Re.go("/settings/connections"))}function S(T){t.$$.not_equal(p.host,T)&&(p.host=T,n(1,p))}function b(T){t.$$.not_equal(p.tls,T)&&(p.tls=T,n(1,p))}function E(T){t.$$.not_equal(p.tls_verify,T)&&(p.tls_verify=T,n(1,p))}function N(T){t.$$.not_equal(p.conversation_id,T)&&(p.conversation_id=T,n(1,p))}function j(T){t.$$.not_equal(p.service_accounts,T)&&(p.service_accounts=T,n(1,p))}function I(T){t.$$.not_equal(p.is_default,T)&&(p.is_default=T,n(1,p))}function A(T){t.$$.not_equal(p.is_forced,T)&&(p.is_forced=T,n(1,p))}function M(T){h=T,n(2,h)}function D(T){t.$$.not_equal(p.max_bulk_message_size,T)&&(p.max_bulk_message_size=T,n(1,p))}function P(T){t.$$.not_equal(p.max_message_length,T)&&(p.max_message_length=T,n(1,p))}function J(T){t.$$.not_equal(p.webirc_password,T)&&(p.webirc_password=T,n(1,p))}function W(T){t.$$.not_equal(p.skip_queue,T)&&(p.skip_queue=T,n(1,p))}return t.$$set=T=>{"profile_id"in T&&n(0,s=T.profile_id)},n(3,i=a.roles.has("admin")),[s,p,h,i,r,c,f,d,_,m,l,S,b,E,N,j,I,A,M,D,P,J,W]}class s1 extends Xe{constructor(e){super(),Qe(this,e,r1,o1,Ze,{profile_id:0,title:10})}get title(){return this.$$.ctx[10]}}function l1(t){let e,n,i,o,r=Nt(t[1]("See all connections"))+"",s,l;return e=new he({props:{name:"list"}}),n=new he({props:{name:"times"}}),{c(){q(e.$$.fragment),q(n.$$.fragment),i=C(),o=g("span"),s=O(r),k(o,"class","tooltip is-left")},m(a,c){z(e,a,c),z(n,a,c),w(a,i,c),w(a,o,c),u(o,s),l=!0},p(a,c){(!l||c&2)&&r!==(r=Nt(a[1]("See all connections"))+"")&&R(s,r)},i(a){l||(v(e.$$.fragment,a),v(n.$$.fragment,a),l=!0)},o(a){y(e.$$.fragment,a),y(n.$$.fragment,a),l=!1},d(a){a&&($(i),$(o)),H(e,a),H(n,a)}}}function a1(t){let e,n=(t[0]==="add"?t[1]("Add connection"):t[1]("Edit connection"))+"",i,o,r,s;return r=new Ge({props:{href:"/settings/connections",class:"btn-hallow can-toggle is-active has-tooltip",$$slots:{default:[l1]},$$scope:{ctx:t}}}),{c(){e=g("h1"),i=O(n),o=C(),q(r.$$.fragment)},m(l,a){w(l,e,a),u(e,i),w(l,o,a),z(r,l,a),s=!0},p(l,a){(!s||a&3)&&n!==(n=(l[0]==="add"?l[1]("Add connection"):l[1]("Edit connection"))+"")&&R(i,n);const c={};a&10&&(c.$$scope={dirty:a,ctx:l}),r.$set(c)},i(l){s||(v(r.$$.fragment,l),s=!0)},o(l){y(r.$$.fragment,l),s=!1},d(l){l&&($(e),$(o)),H(r,l)}}}function c1(t){let e,n,i,o,r;return e=new Ft({props:{$$slots:{default:[a1]},$$scope:{ctx:t}}}),o=new jc({props:{id:t[0],is_page:!0}}),{c(){q(e.$$.fragment),n=C(),i=g("main"),q(o.$$.fragment),k(i,"class","main")},m(s,l){z(e,s,l),w(s,n,l),w(s,i,l),z(o,i,null),r=!0},p(s,[l]){const a={};l&11&&(a.$$scope={dirty:l,ctx:s}),e.$set(a);const c={};l&1&&(c.id=s[0]),o.$set(c)},i(s){r||(v(e.$$.fragment,s),v(o.$$.fragment,s),r=!0)},o(s){y(e.$$.fragment,s),y(o.$$.fragment,s),r=!1},d(s){s&&($(n),$(i)),H(e,s),H(o)}}}function u1(t,e,n){let i;we(t,lt,s=>n(1,i=s));let{connection_id:o="add"}=e;const r=o==="add"?"Add connection":"Edit connection";return t.$$set=s=>{"connection_id"in s&&n(0,o=s.connection_id)},[o,i,r]}class f1 extends Xe{constructor(e){super(),Qe(this,e,u1,c1,Ze,{connection_id:0,title:2})}get title(){return this.$$.ctx[2]}}function Xl(t,e,n){const i=t.slice();return i[16]=e[n],i}function p1(t){let e,n=t[4]("Add conversation")+"",i;return{c(){e=g("h1"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Add conversation")+"")&&R(i,n)},d(o){o&&$(e)}}}function d1(t){let e,n=t[4]("Connection")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Connection")+"")&&R(i,n)},d(o){o&&$(e)}}}function h1(t){let e,n=t[4](t[1].conversations.length?"Refresh":"Load")+"",i;return{c(){e=g("span"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&18&&n!==(n=o[4](o[1].conversations.length?"Refresh":"Load")+"")&&R(i,n)},d(o){o&&$(e)}}}function _1(t){let e,n=t[4]("Conversation name")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Conversation name")+"")&&R(i,n)},d(o){o&&$(e)}}}function m1(t){let e,n=t[4]("Add")+"",i;return{c(){e=g("span"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Add")+"")&&R(i,n)},d(o){o&&$(e)}}}function xl(t){let e,n,i,o=t[1].error+"",r;return{c(){e=g("p"),n=O(t[0]),i=O(": "),r=O(o),k(e,"class","error")},m(s,l){w(s,e,l),u(e,n),u(e,i),u(e,r)},p(s,l){l&1&&R(n,s[0]),l&2&&o!==(o=s[1].error+"")&&R(r,o)},d(s){s&&$(e)}}}function ea(t){let e,n,i;function o(c,f){return c[1].done?b1:g1}let r=o(t),s=r(t),l=xe(t[1].conversations),a=[];for(let c=0;c<l.length;c+=1)a[c]=ta(Xl(t,l,c));return{c(){e=g("p"),s.c(),n=C(),i=g("div");for(let c=0;c<a.length;c+=1)a[c].c();k(i,"class","conversation-add-list")},m(c,f){w(c,e,f),s.m(e,null),w(c,n,f),w(c,i,f);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(i,null)},p(c,f){if(r===(r=o(c))&&s?s.p(c,f):(s.d(1),s=r(c),s&&(s.c(),s.m(e,null))),f&66){l=xe(c[1].conversations);let d;for(d=0;d<l.length;d+=1){const p=Xl(c,l,d);a[d]?a[d].p(p,f):(a[d]=ta(p),a[d].c(),a[d].m(i,null))}for(;d<a.length;d+=1)a[d].d(1);a.length=l.length}},d(c){c&&($(e),$(n),$(i)),s.d(),yt(a,c)}}}function g1(t){let e=t[4]("Showing %1 of %2 conversations, but the list is still loading.",t[1].conversations.length,t[1].n_conversations)+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&18&&e!==(e=i[4]("Showing %1 of %2 conversations, but the list is still loading.",i[1].conversations.length,i[1].n_conversations)+"")&&R(n,e)},d(i){i&&$(n)}}}function b1(t){let e=t[4]("Showing %1 of %2 conversations.",t[1].conversations.length,t[1].n_conversations)+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&18&&e!==(e=i[4]("Showing %1 of %2 conversations.",i[1].conversations.length,i[1].n_conversations)+"")&&R(n,e)},d(i){i&&$(n)}}}function ta(t){let e,n,i=t[16].n_users+"",o,r,s,l=t[16].name+"",a,c,f,d=(t[16].topic||"No topic.")+"",p,h,_,m,S;return{c(){e=g("a"),n=g("span"),o=O(i),r=C(),s=g("b"),a=O(l),c=C(),f=g("i"),p=O(d),h=C(),k(n,"class","conversation-add-list__n-users"),k(s,"class","conversation-add-list__name"),k(f,"class","conversation-add-list__title"),k(e,"href",_="#add:"+t[16].name)},m(b,E){w(b,e,E),u(e,n),u(n,o),u(e,r),u(e,s),u(s,a),u(e,c),u(e,f),u(f,p),u(e,h),m||(S=Ce(e,"click",st(t[6])),m=!0)},p(b,E){E&2&&i!==(i=b[16].n_users+"")&&R(o,i),E&2&&l!==(l=b[16].name+"")&&R(a,l),E&2&&d!==(d=(b[16].topic||"No topic.")+"")&&R(p,d),E&2&&_!==(_="#add:"+b[16].name)&&k(e,"href",_)},d(b){b&&$(e),m=!1,S()}}}function v1(t){let e,n,i,o,r=t[4]("Enter the name of an exising conversation, or create a new conversation.")+"",s,l,a,c,f,d,p,h,_,m,S,b,E,N,j,I,A,M,D,P,J;e=new Ft({props:{$$slots:{default:[p1]},$$scope:{ctx:t}}});function W(L){t[11](L)}let T={name:"connection_id",options:t[3],placeholder:t[4]("Select..."),$$slots:{label:[d1]},$$scope:{ctx:t}};t[0]!==void 0&&(T.value=t[0]),f=new oi({props:T}),de.push(()=>ge(f,"value",W)),_=new ft({props:{type:"button",icon:"sync-alt",disabled:!t[0]||t[1].done===!1,$$slots:{default:[h1]},$$scope:{ctx:t}}}),_.$on("click",t[7]);function G(L){t[12](L)}let K={name:"conversation_id",placeholder:t[4]("#room or nick"),autocomplete:"off",$$slots:{label:[_1]},$$scope:{ctx:t}};t[2]!==void 0&&(K.value=t[2]),b=new Je({props:K}),de.push(()=>ge(b,"value",G)),b.$on("keyup",t[8]),I=new ft({props:{icon:"comment",disabled:!t[0]||!t[2],$$slots:{default:[m1]},$$scope:{ctx:t}}});let Q=t[1].error&&xl(t),U=t[1].done!==null&&ea(t);return{c(){q(e.$$.fragment),n=C(),i=g("main"),o=g("p"),s=O(r),l=C(),a=g("form"),c=g("div"),q(f.$$.fragment),p=C(),h=g("div"),q(_.$$.fragment),m=C(),S=g("div"),q(b.$$.fragment),N=C(),j=g("div"),q(I.$$.fragment),A=C(),Q&&Q.c(),M=C(),U&&U.c(),k(h,"class","flex-basis-30"),k(c,"class","inputs-side-by-side"),k(j,"class","flex-basis-30"),k(S,"class","inputs-side-by-side"),k(a,"method","post"),k(i,"class","main")},m(L,V){z(e,L,V),w(L,n,V),w(L,i,V),u(i,o),u(o,s),u(i,l),u(i,a),u(a,c),z(f,c,null),u(c,p),u(c,h),z(_,h,null),u(a,m),u(a,S),z(b,S,null),u(S,N),u(S,j),z(I,j,null),u(a,A),Q&&Q.m(a,null),u(a,M),U&&U.m(a,null),D=!0,P||(J=Ce(a,"submit",st(t[6])),P=!0)},p(L,[V]){const F={};V&524304&&(F.$$scope={dirty:V,ctx:L}),e.$set(F),(!D||V&16)&&r!==(r=L[4]("Enter the name of an exising conversation, or create a new conversation.")+"")&&R(s,r);const Z={};V&8&&(Z.options=L[3]),V&16&&(Z.placeholder=L[4]("Select...")),V&524304&&(Z.$$scope={dirty:V,ctx:L}),!d&&V&1&&(d=!0,Z.value=L[0],me(()=>d=!1)),f.$set(Z);const Y={};V&3&&(Y.disabled=!L[0]||L[1].done===!1),V&524306&&(Y.$$scope={dirty:V,ctx:L}),_.$set(Y);const B={};V&16&&(B.placeholder=L[4]("#room or nick")),V&524304&&(B.$$scope={dirty:V,ctx:L}),!E&&V&4&&(E=!0,B.value=L[2],me(()=>E=!1)),b.$set(B);const oe={};V&5&&(oe.disabled=!L[0]||!L[2]),V&524304&&(oe.$$scope={dirty:V,ctx:L}),I.$set(oe),L[1].error?Q?Q.p(L,V):(Q=xl(L),Q.c(),Q.m(a,M)):Q&&(Q.d(1),Q=null),L[1].done!==null?U?U.p(L,V):(U=ea(L),U.c(),U.m(a,null)):U&&(U.d(1),U=null)},i(L){D||(v(e.$$.fragment,L),v(f.$$.fragment,L),v(_.$$.fragment,L),v(b.$$.fragment,L),v(I.$$.fragment,L),D=!0)},o(L){y(e.$$.fragment,L),y(f.$$.fragment,L),y(_.$$.fragment,L),y(b.$$.fragment,L),y(I.$$.fragment,L),D=!1},d(L){L&&($(n),$(i)),H(e,L),H(f),H(_),H(b),H(I),Q&&Q.d(),U&&U.d(),P=!1,J()}}}function $1(t,e,n){let i,o,r;we(t,lt,N=>n(4,r=N));const s="Add conversation",l=mt("socket"),a=mt("user");we(t,a,N=>n(10,o=N));let c={conversations:[],done:null,n_conversations:0},f="",d="",p;function h(N){const j=N&&N.target&&N.target.closest("a");j&&j.href&&n(2,d=j.href.replace(/.*#add:/,""));const I=a.findConversation({connection_id:f});I&&d&&I.send("/join "+d)}async function _(N){let j="/list"+(d.length?" /"+d+"/":"");N.type==="click"&&c.done&&(j+=" refresh"),p&&clearTimeout(p),l.send({connection_id:f,message:j,method:"send"},I=>{const A=Ir(I);n(1,c=A?{conversations:[],done:!0,n_conversations:0,error:A}:I);let M=N.interval?N.interval+500:500;M>2e3&&(M=2e3),!A&&!I.done&&(p=setTimeout(()=>_({interval:M}),M))})}function m(){n(0,f=Re.param("connection_id")||i[0][0]||""),n(2,d=Re.param("conversation_id")||"")}const S=Kr(_,250);function b(N){f=N,n(0,f)}function E(N){d=N,n(2,d)}return t.$$.update=()=>{t.$$.dirty&1024&&n(3,i=Array.from(o.connections.keys()).map(N=>[N])),t.$$.dirty&1&&(f||m())},[f,c,d,i,r,a,h,_,S,s,o,b,E]}class w1 extends Xe{constructor(e){super(),Qe(this,e,$1,v1,Ze,{title:9})}get title(){return this.$$.ctx[9]}}function k1(t){let e,n=t[4]("Yikes! we are so sorry for the inconvenience. Please submit an [issue](%1), if the problem does not go away.","https://github.com/convos-chat/convos/issues")+"",i,o,r,s,l,a=t[2]("Go to start page")+"",c,f;return s=new he({props:{name:"play"}}),{c(){e=g("p"),i=C(),o=g("p"),r=g("a"),q(s.$$.fragment),l=C(),c=O(a),k(r,"href",t[1]),k(r,"target","_self"),k(r,"class","btn")},m(d,p){w(d,e,p),e.innerHTML=n,w(d,i,p),w(d,o,p),u(o,r),z(s,r,null),u(r,l),u(r,c),f=!0},p(d,p){(!f||p&16)&&n!==(n=d[4]("Yikes! we are so sorry for the inconvenience. Please submit an [issue](%1), if the problem does not go away.","https://github.com/convos-chat/convos/issues")+"")&&(e.innerHTML=n),(!f||p&4)&&a!==(a=d[2]("Go to start page")+"")&&R(c,a),(!f||p&2)&&k(r,"href",d[1])},i(d){f||(v(s.$$.fragment,d),f=!0)},o(d){y(s.$$.fragment,d),f=!1},d(d){d&&($(e),$(i),$(o)),H(s)}}}function y1(t){let e,n=t[2]("The Convos Team have been searching and searching, but the requested page could not be found.")+"",i,o,r,s,l,a,c=t[2]("Go to start page")+"",f,d;return l=new he({props:{name:"play"}}),{c(){e=g("p"),i=O(n),o=C(),r=g("p"),s=g("a"),q(l.$$.fragment),a=C(),f=O(c),k(s,"href",t[1]),k(s,"target","_self"),k(s,"class","btn")},m(p,h){w(p,e,h),u(e,i),w(p,o,h),w(p,r,h),u(r,s),z(l,s,null),u(s,a),u(s,f),d=!0},p(p,h){(!d||h&4)&&n!==(n=p[2]("The Convos Team have been searching and searching, but the requested page could not be found.")+"")&&R(i,n),(!d||h&4)&&c!==(c=p[2]("Go to start page")+"")&&R(f,c),(!d||h&2)&&k(s,"href",p[1])},i(p){d||(v(l.$$.fragment,p),d=!0)},o(p){y(l.$$.fragment,p),d=!1},d(p){p&&($(e),$(o),$(r)),H(l)}}}function S1(t){let e,n,i,o=t[2]("Downloaded Convos.")+"",r,s,l,a,c,f=t[2]("Started Convos.")+"",d,p,h,_,m,S,b,E,N,j=t[2]("Contact admin")+"",I,A,M;n=new he({props:{name:"download"}}),a=new he({props:{name:"rocket"}});const D=[C1,E1],P=[];function J(T,G){return T[3].error?0:1}h=J(t),_=P[h]=D[h](t),E=new he({props:{name:"paper-plane"}});let W={ctx:t,current:null,token:null,hasCatch:!1,pending:N1,then:O1,catch:A1,blocks:[,,,]};return dr(t[8],W),{c(){e=g("p"),q(n.$$.fragment),i=C(),r=O(o),s=C(),l=g("p"),q(a.$$.fragment),c=C(),d=O(f),p=C(),_.c(),m=C(),S=g("p"),b=g("a"),q(E.$$.fragment),N=C(),I=O(j),A=C(),W.block.c(),k(b,"class","btn"),k(b,"href",Ve("contact"))},m(T,G){w(T,e,G),z(n,e,null),u(e,i),u(e,r),w(T,s,G),w(T,l,G),z(a,l,null),u(l,c),u(l,d),w(T,p,G),P[h].m(T,G),w(T,m,G),w(T,S,G),u(S,b),z(E,b,null),u(b,N),u(b,I),u(S,A),W.block.m(S,W.anchor=null),W.mount=()=>S,W.anchor=null,M=!0},p(T,G){t=T,(!M||G&4)&&o!==(o=t[2]("Downloaded Convos.")+"")&&R(r,o),(!M||G&4)&&f!==(f=t[2]("Started Convos.")+"")&&R(d,f);let K=h;h=J(t),h===K?P[h].p(t,G):(ye(),y(P[K],1,1,()=>{P[K]=null}),Se(),_=P[h],_?_.p(t,G):(_=P[h]=D[h](t),_.c()),v(_,1),_.m(m.parentNode,m)),(!M||G&4)&&j!==(j=t[2]("Contact admin")+"")&&R(I,j),ac(W,t,G)},i(T){M||(v(n.$$.fragment,T),v(a.$$.fragment,T),v(_),v(E.$$.fragment,T),v(W.block),M=!0)},o(T){y(n.$$.fragment,T),y(a.$$.fragment,T),y(_),y(E.$$.fragment,T);for(let G=0;G<3;G+=1){const K=W.blocks[G];y(K)}M=!1},d(T){T&&($(e),$(s),$(l),$(p),$(m),$(S)),H(n),H(a),P[h].d(T),H(E),W.block.d(),W.token=null,W=null}}}function E1(t){let e,n,i,o=t[2]("Loading user data...")+"",r,s;return n=new he({props:{name:"spinner fa-spin"}}),{c(){e=g("p"),q(n.$$.fragment),i=C(),r=O(o)},m(l,a){w(l,e,a),z(n,e,null),u(e,i),u(e,r),s=!0},p(l,a){(!s||a&4)&&o!==(o=l[2]("Loading user data...")+"")&&R(r,o)},i(l){s||(v(n.$$.fragment,l),s=!0)},o(l){y(n.$$.fragment,l),s=!1},d(l){l&&$(e),H(n)}}}function C1(t){let e,n,i,o=t[2]("Loading user data failed: %1",t[2](t[3].error))+"",r,s;return n=new he({props:{name:"exclamation-triangle"}}),{c(){e=g("p"),q(n.$$.fragment),i=C(),r=O(o)},m(l,a){w(l,e,a),z(n,e,null),u(e,i),u(e,r),s=!0},p(l,a){(!s||a&12)&&o!==(o=l[2]("Loading user data failed: %1",l[2](l[3].error))+"")&&R(r,o)},i(l){s||(v(n.$$.fragment,l),s=!0)},o(l){y(n.$$.fragment,l),s=!1},d(l){l&&$(e),H(n)}}}function A1(t){return{c:Oe,m:Oe,p:Oe,i:Oe,o:Oe,d:Oe}}function O1(t){let e,n,i,o=t[2]("Retry")+"",r,s,l;return n=new he({props:{name:"redo"}}),{c(){e=g("a"),q(n.$$.fragment),i=C(),r=O(o),k(e,"href",t[1]),k(e,"target","_self"),k(e,"class","btn is-secondary")},m(a,c){w(a,e,c),z(n,e,null),u(e,i),u(e,r),l=!0},p(a,c){(!l||c&4)&&o!==(o=a[2]("Retry")+"")&&R(r,o),(!l||c&2)&&k(e,"href",a[1])},i(a){l||(v(n.$$.fragment,a),a&&at(()=>{l&&(s||(s=et(e,Bt,{},!0)),s.run(1))}),l=!0)},o(a){y(n.$$.fragment,a),a&&(s||(s=et(e,Bt,{},!1)),s.run(0)),l=!1},d(a){a&&$(e),H(n),a&&s&&s.end()}}}function N1(t){return{c:Oe,m:Oe,p:Oe,i:Oe,o:Oe,d:Oe}}function T1(t){let e,n,i=t[2](t[5][t[0]])+"",o,r,s,l,a;const c=[S1,y1,k1],f=[];function d(p,h){return p[0]==="loading"?0:p[0]==="not_found"?1:2}return s=d(t),l=f[s]=c[s](t),{c(){e=g("main"),n=g("h2"),o=O(i),r=C(),l.c(),k(e,"class","cms-main")},m(p,h){w(p,e,h),u(e,n),u(n,o),u(e,r),f[s].m(e,null),a=!0},p(p,[h]){(!a||h&5)&&i!==(i=p[2](p[5][p[0]])+"")&&R(o,i);let _=s;s=d(p),s===_?f[s].p(p,h):(ye(),y(f[_],1,1,()=>{f[_]=null}),Se(),l=f[s],l?l.p(p,h):(l=f[s]=c[s](p),l.c()),v(l,1),l.m(e,null))},i(p){a||(v(l),a=!0)},o(p){y(l),a=!1},d(p){p&&$(e),f[s].d()}}}function M1(t,e){const n=t.path.match(/\/err\/(\w+)/);return n?n[1]:e.is("pending")||e.is("loading")?"loading":"not_found"}function R1(t,e,n){let i,o,r,s,l,a,c;we(t,Re,m=>n(11,s=m)),we(t,lt,m=>n(2,l=m)),we(t,jt,m=>n(4,c=m));let{title:f="Loading..."}=e;const d={loading:"Loading...",not_found:"Not Found"},p=mt("socket");we(t,p,m=>n(3,a=m));const h=mt("user");we(t,h,m=>n(10,r=m));const _=Sf(5e3);return t.$$set=m=>{"title"in m&&n(9,f=m.title)},t.$$.update=()=>{t.$$.dirty&3072&&n(0,i=M1(s,r)),t.$$.dirty&1&&n(9,f=d[i])},n(1,o=Re.urlFor(h.email?"/chat":"/login")),[i,o,l,a,c,d,p,h,_,f,r,s]}class qc extends Xe{constructor(e){super(),Qe(this,e,R1,T1,Ze,{title:9})}}function na(t,e,n){const i=t.slice();return i[5]=e[n],i}function L1(t){let e,n=t[0]("Help")+"",i,o,r,s,l,a=Ve("version")+"",c;return{c(){e=g("h1"),i=O(n),o=C(),r=g("small"),s=g("a"),l=O("v"),c=O(a),k(s,"href",t[2]),k(s,"target","_blank")},m(f,d){w(f,e,d),u(e,i),u(e,o),u(e,r),u(r,s),u(s,l),u(s,c)},p(f,d){d&1&&n!==(n=f[0]("Help")+"")&&R(i,n)},d(f){f&&$(e)}}}function ia(t){let e,n,i=t[0](t[5].description)+"",o;return{c(){e=g("dt"),e.textContent=`${t[5].example}`,n=g("dd"),o=O(i)},m(r,s){w(r,e,s),w(r,n,s),u(n,o)},p(r,s){s&1&&i!==(i=r[0](r[5].description)+"")&&R(o,i)},d(r){r&&($(e),$(n))}}}function I1(t){let e,n;return{c(){e=g("li"),n=g("a"),n.textContent=`${Ve("organization_name")}`,k(n,"href",Ve("organization_url")),k(n,"target","_blank")},m(i,o){w(i,e,o),u(e,n)},d(i){i&&$(e)}}}function P1(t){let e;return{c(){e=O("Loading")},m(n,i){w(n,e,i)},d(n){n&&$(e)}}}function D1(t){let e;return{c(){e=O("Not found")},m(n,i){w(n,e,i)},d(n){n&&$(e)}}}function U1(t){let e;return{c(){e=O("Unknown")},m(n,i){w(n,e,i)},d(n){n&&$(e)}}}function B1(t){let e,n,i,o,r,s=t[1]('Got any questions? Come and talk to us in the "#convos" channel on https://libera.chat.')+"",l,a,c=t[1]("More information can also be found on https://convos.chat.")+"",f,d,p=t[0]("Quick search")+"",h,_,m,S=t[0]("Pressing `shift+enter` will shift focus between chat input and search in sidebar.")+"",b,E,N,j,I,A=t[0]("Filter conversations with unread messages.")+"",M,D,P,J=t[0]("Filter private conversations with unread messages.")+"",W,T,G,K=t[0]("Filter channels with unread messages.")+"",Q,U,L=t[0]("Any other combination")+"",V,F,Z=t[0]("Filter channels, private conversations or search for a string.")+"",Y,B,oe,fe=t[0]("Autocomplete")+"",te,ue,Ne,ae=t[0]("The following rules apply when typing a message:")+"",$e,De,je,Pe,Te,ze=t[0]('"@" followed by a character will show matching nicks in the current conversation.')+"",ee,ce,He,Be=t[0]('":" followed by a character will show matching emojis.')+"",Ee,ve,ne,pe=t[0]('"/" will show the available commands.')+"",ke,se,be,Le=t[0]('"#" will show the matching conversation names.')+"",x,X,ie,re=t[0]("Text formatting")+"",_e,qe,Ue,rt=t[0]("Convos supports some special way of formatting text:")+"",Et,Pt,ct,Xt,Ht,Fn=t[0]("Will be automatically converted into emojis.")+"",jn,wi,$n=t[0]("> some text")+"",ki,zn,Hn=t[0]('A line starting with ">" will be converted into a quote.')+"",qn,Tt,le=t[0]("*some text*, **some text**, ***some text***")+"",Me,wn,nn=t[1]('Using "*" around some text, will convert it into *italic*, **bold** or ***italic bold***.')+"",on,rn=t[0]("`some fragment`")+"",kn,sn,ln=t[1]("Using backticks around some text, will format it as a `code fragment`.")+"",yn,Sn,an=t[0]("URLs will be converted to links, and might be embedded in the chat.")+"",cn,En,un,fn=t[0]("Available commands")+"",Wn,Xr,Wi,Gi=t[1]('Any message starting with a-z is prefixed with "`/quote`", when sending from a connection conversation.')+"",xr,Ki,es,Yi,Vi=t[0]("Other resources")+"",Lo,ts,Mt,Io,yi,Zi=t[0]("Changelog for v%1",Ve("version"))+"",Po,ns,Do,Si,Ji=t[0]("Project homepage")+"",Uo,is,Bo,Ei,Qi=t[0]("Bug/issue tracker")+"",Fo,os,jo,Ci,Xi=t[0]("Source code")+"",zo,rs,Ru=Ve("organization_name")!=="Convos"&&Ve("organization_url")!=="https://convos.chat",ss,Ho,Ai,xi=t[0]("Contact admin")+"",qo,ls,eo,to=t[0]("Demo error pages")+"",Wo,as,Cn,Go,An,cs,Ko,On,us,Yo,Nn,We;e=new Ft({props:{$$slots:{default:[L1]},$$scope:{ctx:t}}});let Gn=xe(hn),Ct=[];for(let Ae=0;Ae<Gn.length;Ae+=1)Ct[Ae]=ia(na(t,Gn,Ae));let Kn=Ru&&I1();return An=new Ge({props:{href:"/err/loading",$$slots:{default:[P1]},$$scope:{ctx:t}}}),On=new Ge({props:{href:"/err/not_found",$$slots:{default:[D1]},$$scope:{ctx:t}}}),Nn=new Ge({props:{href:"/err/unknown",$$slots:{default:[U1]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment),n=C(),i=g("main"),o=g("p"),r=new Rt(!1),l=C(),a=new Rt(!1),f=C(),d=g("h2"),h=O(p),_=C(),m=g("p"),b=O(S),E=C(),N=g("dl"),j=g("dt"),j.textContent="+",I=g("dd"),M=O(A),D=g("dt"),D.textContent="+@",P=g("dd"),W=O(J),T=g("dt"),T.textContent="+#",G=g("dd"),Q=O(K),U=g("dt"),V=O(L),F=g("dd"),Y=O(Z),B=C(),oe=g("h2"),te=O(fe),ue=C(),Ne=g("p"),$e=O(ae),De=C(),je=g("dl"),Pe=g("dt"),Pe.textContent="@nick",Te=g("dd"),ee=O(ze),ce=g("dt"),ce.textContent=":emoji_name",He=g("dd"),Ee=O(Be),ve=g("dt"),ve.textContent="/command",ne=g("dd"),ke=O(pe),se=g("dt"),se.textContent="#conversation",be=g("dd"),x=O(Le),X=C(),ie=g("h2"),_e=O(re),qe=C(),Ue=g("p"),Et=O(rt),Pt=C(),ct=g("dl"),Xt=g("dt"),Ht=g("dd"),jn=O(Fn),wi=g("dt"),ki=O($n),zn=g("dd"),qn=O(Hn),Tt=g("dt"),Me=O(le),wn=g("dd"),on=g("dt"),kn=O(rn),sn=g("dd"),yn=g("dt"),yn.textContent="https://...",Sn=g("dd"),cn=O(an),En=C(),un=g("h2"),Wn=O(fn),Xr=C(),Wi=g("p"),xr=C(),Ki=g("dl");for(let Ae=0;Ae<Ct.length;Ae+=1)Ct[Ae].c();es=C(),Yi=g("h2"),Lo=O(Vi),ts=C(),Mt=g("ul"),Io=g("li"),yi=g("a"),Po=O(Zi),ns=C(),Do=g("li"),Si=g("a"),Uo=O(Ji),is=C(),Bo=g("li"),Ei=g("a"),Fo=O(Qi),os=C(),jo=g("li"),Ci=g("a"),zo=O(Xi),rs=C(),Kn&&Kn.c(),ss=C(),Ho=g("li"),Ai=g("a"),qo=O(xi),ls=C(),eo=g("h2"),Wo=O(to),as=C(),Cn=g("ul"),Go=g("li"),q(An.$$.fragment),cs=C(),Ko=g("li"),q(On.$$.fragment),us=C(),Yo=g("li"),q(Nn.$$.fragment),r.a=l,a.a=null,k(d,"id","quick-search"),k(oe,"id","autocomplete"),k(ie,"id","formatting"),k(un,"id","commands"),k(Yi,"id","resources"),k(yi,"href",t[2]),k(yi,"target","_blank"),k(Si,"href","https://convos.chat"),k(Si,"target","_blank"),k(Ei,"href","https://github.com/convos-chat/convos/issues"),k(Ei,"target","_blank"),k(Ci,"href","https://github.com/convos-chat/convos"),k(Ci,"target","_blank"),k(Ai,"href",Ve("contact")),k(Ai,"target","_blank"),k(eo,"id","fallback"),k(i,"class","main")},m(Ae,Fe){z(e,Ae,Fe),w(Ae,n,Fe),w(Ae,i,Fe),u(i,o),r.m(s,o),u(o,l),a.m(c,o),u(i,f),u(i,d),u(d,h),u(i,_),u(i,m),u(m,b),u(i,E),u(i,N),u(N,j),u(N,I),u(I,M),u(N,D),u(N,P),u(P,W),u(N,T),u(N,G),u(G,Q),u(N,U),u(U,V),u(N,F),u(F,Y),u(i,B),u(i,oe),u(oe,te),u(i,ue),u(i,Ne),u(Ne,$e),u(i,De),u(i,je),u(je,Pe),u(je,Te),u(Te,ee),u(je,ce),u(je,He),u(He,Ee),u(je,ve),u(je,ne),u(ne,ke),u(je,se),u(je,be),u(be,x),u(i,X),u(i,ie),u(ie,_e),u(i,qe),u(i,Ue),u(Ue,Et),u(i,Pt),u(i,ct),u(ct,Xt),Xt.innerHTML=t[3],u(ct,Ht),u(Ht,jn),u(ct,wi),u(wi,ki),u(ct,zn),u(zn,qn),u(ct,Tt),u(Tt,Me),u(ct,wn),wn.innerHTML=nn,u(ct,on),u(on,kn),u(ct,sn),sn.innerHTML=ln,u(ct,yn),u(ct,Sn),u(Sn,cn),u(i,En),u(i,un),u(un,Wn),u(i,Xr),u(i,Wi),Wi.innerHTML=Gi,u(i,xr),u(i,Ki);for(let Tn=0;Tn<Ct.length;Tn+=1)Ct[Tn]&&Ct[Tn].m(Ki,null);u(i,es),u(i,Yi),u(Yi,Lo),u(i,ts),u(i,Mt),u(Mt,Io),u(Io,yi),u(yi,Po),u(Mt,ns),u(Mt,Do),u(Do,Si),u(Si,Uo),u(Mt,is),u(Mt,Bo),u(Bo,Ei),u(Ei,Fo),u(Mt,os),u(Mt,jo),u(jo,Ci),u(Ci,zo),u(Mt,rs),Kn&&Kn.m(Mt,null),u(Mt,ss),u(Mt,Ho),u(Ho,Ai),u(Ai,qo),u(i,ls),u(i,eo),u(eo,Wo),u(i,as),u(i,Cn),u(Cn,Go),z(An,Go,null),u(Cn,cs),u(Cn,Ko),z(On,Ko,null),u(Cn,us),u(Cn,Yo),z(Nn,Yo,null),We=!0},p(Ae,[Fe]){const Tn={};if(Fe&257&&(Tn.$$scope={dirty:Fe,ctx:Ae}),e.$set(Tn),(!We||Fe&2)&&s!==(s=Ae[1]('Got any questions? Come and talk to us in the "#convos" channel on https://libera.chat.')+"")&&r.p(s),(!We||Fe&2)&&c!==(c=Ae[1]("More information can also be found on https://convos.chat.")+"")&&a.p(c),(!We||Fe&1)&&p!==(p=Ae[0]("Quick search")+"")&&R(h,p),(!We||Fe&1)&&S!==(S=Ae[0]("Pressing `shift+enter` will shift focus between chat input and search in sidebar.")+"")&&R(b,S),(!We||Fe&1)&&A!==(A=Ae[0]("Filter conversations with unread messages.")+"")&&R(M,A),(!We||Fe&1)&&J!==(J=Ae[0]("Filter private conversations with unread messages.")+"")&&R(W,J),(!We||Fe&1)&&K!==(K=Ae[0]("Filter channels with unread messages.")+"")&&R(Q,K),(!We||Fe&1)&&L!==(L=Ae[0]("Any other combination")+"")&&R(V,L),(!We||Fe&1)&&Z!==(Z=Ae[0]("Filter channels, private conversations or search for a string.")+"")&&R(Y,Z),(!We||Fe&1)&&fe!==(fe=Ae[0]("Autocomplete")+"")&&R(te,fe),(!We||Fe&1)&&ae!==(ae=Ae[0]("The following rules apply when typing a message:")+"")&&R($e,ae),(!We||Fe&1)&&ze!==(ze=Ae[0]('"@" followed by a character will show matching nicks in the current conversation.')+"")&&R(ee,ze),(!We||Fe&1)&&Be!==(Be=Ae[0]('":" followed by a character will show matching emojis.')+"")&&R(Ee,Be),(!We||Fe&1)&&pe!==(pe=Ae[0]('"/" will show the available commands.')+"")&&R(ke,pe),(!We||Fe&1)&&Le!==(Le=Ae[0]('"#" will show the matching conversation names.')+"")&&R(x,Le),(!We||Fe&1)&&re!==(re=Ae[0]("Text formatting")+"")&&R(_e,re),(!We||Fe&1)&&rt!==(rt=Ae[0]("Convos supports some special way of formatting text:")+"")&&R(Et,rt),(!We||Fe&1)&&Fn!==(Fn=Ae[0]("Will be automatically converted into emojis.")+"")&&R(jn,Fn),(!We||Fe&1)&&$n!==($n=Ae[0]("> some text")+"")&&R(ki,$n),(!We||Fe&1)&&Hn!==(Hn=Ae[0]('A line starting with ">" will be converted into a quote.')+"")&&R(qn,Hn),(!We||Fe&1)&&le!==(le=Ae[0]("*some text*, **some text**, ***some text***")+"")&&R(Me,le),(!We||Fe&2)&&nn!==(nn=Ae[1]('Using "*" around some text, will convert it into *italic*, **bold** or ***italic bold***.')+"")&&(wn.innerHTML=nn),(!We||Fe&1)&&rn!==(rn=Ae[0]("`some fragment`")+"")&&R(kn,rn),(!We||Fe&2)&&ln!==(ln=Ae[1]("Using backticks around some text, will format it as a `code fragment`.")+"")&&(sn.innerHTML=ln),(!We||Fe&1)&&an!==(an=Ae[0]("URLs will be converted to links, and might be embedded in the chat.")+"")&&R(cn,an),(!We||Fe&1)&&fn!==(fn=Ae[0]("Available commands")+"")&&R(Wn,fn),(!We||Fe&2)&&Gi!==(Gi=Ae[1]('Any message starting with a-z is prefixed with "`/quote`", when sending from a connection conversation.')+"")&&(Wi.innerHTML=Gi),Fe&1){Gn=xe(hn);let Dt;for(Dt=0;Dt<Gn.length;Dt+=1){const hs=na(Ae,Gn,Dt);Ct[Dt]?Ct[Dt].p(hs,Fe):(Ct[Dt]=ia(hs),Ct[Dt].c(),Ct[Dt].m(Ki,null))}for(;Dt<Ct.length;Dt+=1)Ct[Dt].d(1);Ct.length=Gn.length}(!We||Fe&1)&&Vi!==(Vi=Ae[0]("Other resources")+"")&&R(Lo,Vi),(!We||Fe&1)&&Zi!==(Zi=Ae[0]("Changelog for v%1",Ve("version"))+"")&&R(Po,Zi),(!We||Fe&1)&&Ji!==(Ji=Ae[0]("Project homepage")+"")&&R(Uo,Ji),(!We||Fe&1)&&Qi!==(Qi=Ae[0]("Bug/issue tracker")+"")&&R(Fo,Qi),(!We||Fe&1)&&Xi!==(Xi=Ae[0]("Source code")+"")&&R(zo,Xi),(!We||Fe&1)&&xi!==(xi=Ae[0]("Contact admin")+"")&&R(qo,xi),(!We||Fe&1)&&to!==(to=Ae[0]("Demo error pages")+"")&&R(Wo,to);const fs={};Fe&256&&(fs.$$scope={dirty:Fe,ctx:Ae}),An.$set(fs);const ps={};Fe&256&&(ps.$$scope={dirty:Fe,ctx:Ae}),On.$set(ps);const ds={};Fe&256&&(ds.$$scope={dirty:Fe,ctx:Ae}),Nn.$set(ds)},i(Ae){We||(v(e.$$.fragment,Ae),v(An.$$.fragment,Ae),v(On.$$.fragment,Ae),v(Nn.$$.fragment,Ae),We=!0)},o(Ae){y(e.$$.fragment,Ae),y(An.$$.fragment,Ae),y(On.$$.fragment,Ae),y(Nn.$$.fragment,Ae),We=!1},d(Ae){Ae&&($(n),$(i)),H(e,Ae),yt(Ct,Ae),Kn&&Kn.d(),H(An),H(On),H(Nn)}}}function F1(t,e,n){let i,o;we(t,lt,a=>n(0,i=a)),we(t,jt,a=>n(1,o=a));const r="Help",s="https://github.com/convos-chat/convos/blob/v"+Ve("version")+"/Changes#L3",l=Object.keys(tt.emojis.aliases).sort().join(", ");return[i,o,s,l,r]}class j1 extends Xe{constructor(e){super(),Qe(this,e,F1,B1,Ze,{title:4})}get title(){return this.$$.ctx[4]}}function oa(t,e,n){const i=t.slice();return i[22]=e[n],i}function z1(t){let e,n=t[2]("Sign up")+"",i,o,r,s=t[2]("Please ask your Convos admin for an invite link to sign up, or sign in if you already have an account.")+"",l,a,c,f,d,p,h=t[2]("Contact admin")+"",_,m,S,b;return d=new he({props:{name:"paper-plane"}}),S=new Ge({props:{href:"/login",$$slots:{default:[G1]},$$scope:{ctx:t}}}),{c(){e=g("h2"),i=O(n),o=C(),r=g("p"),l=O(s),a=C(),c=g("div"),f=g("a"),q(d.$$.fragment),p=C(),_=O(h),m=C(),q(S.$$.fragment),k(f,"class","btn"),k(f,"href",Ve("contact")),k(c,"class","form-actions")},m(E,N){w(E,e,N),u(e,i),w(E,o,N),w(E,r,N),u(r,l),w(E,a,N),w(E,c,N),u(c,f),z(d,f,null),u(f,p),u(f,_),u(c,m),z(S,c,null),b=!0},p(E,N){(!b||N&4)&&n!==(n=E[2]("Sign up")+"")&&R(i,n),(!b||N&4)&&s!==(s=E[2]("Please ask your Convos admin for an invite link to sign up, or sign in if you already have an account.")+"")&&R(l,s),(!b||N&4)&&h!==(h=E[2]("Contact admin")+"")&&R(_,h);const j={};N&33554436&&(j.$$scope={dirty:N,ctx:E}),S.$set(j)},i(E){b||(v(d.$$.fragment,E),v(S.$$.fragment,E),b=!0)},o(E){y(d.$$.fragment,E),y(S.$$.fragment,E),b=!1},d(E){E&&($(e),$(o),$(r),$(a),$(c)),H(d),H(S)}}}function H1(t){let e,n=t[2]("Sign in")+"",i,o,r,s,l,a,c,f,d,p,h,_,m,S,b;function E(A){t[17](A)}let N={type:"email",name:"email",placeholder:t[2]("Ex: john@doe.com"),$$slots:{label:[K1]},$$scope:{ctx:t}};t[0].email!==void 0&&(N.value=t[0].email),r=new Je({props:N}),de.push(()=>ge(r,"value",E));function j(A){t[18](A)}let I={type:"password",name:"password",autocomplete:"current-password",$$slots:{help:[V1],label:[Y1]},$$scope:{ctx:t}};return t[0].password!==void 0&&(I.value=t[0].password),a=new Je({props:I}),de.push(()=>ge(a,"value",j)),p=new ft({props:{icon:"sign-in-alt",op:t[6],$$slots:{default:[Z1]},$$scope:{ctx:t}}}),_=new Ge({props:{href:"/register",$$slots:{default:[J1]},$$scope:{ctx:t}}}),S=new Lt({props:{op:t[6],success:"Loading Convos..."}}),{c(){e=g("h2"),i=O(n),o=C(),q(r.$$.fragment),l=C(),q(a.$$.fragment),f=C(),d=g("div"),q(p.$$.fragment),h=C(),q(_.$$.fragment),m=C(),q(S.$$.fragment),k(d,"class","form-actions")},m(A,M){w(A,e,M),u(e,i),w(A,o,M),z(r,A,M),w(A,l,M),z(a,A,M),w(A,f,M),w(A,d,M),z(p,d,null),u(d,h),z(_,d,null),w(A,m,M),z(S,A,M),b=!0},p(A,M){(!b||M&4)&&n!==(n=A[2]("Sign in")+"")&&R(i,n);const D={};M&4&&(D.placeholder=A[2]("Ex: john@doe.com")),M&33554436&&(D.$$scope={dirty:M,ctx:A}),!s&&M&1&&(s=!0,D.value=A[0].email,me(()=>s=!1)),r.$set(D);const P={};M&33554444&&(P.$$scope={dirty:M,ctx:A}),!c&&M&1&&(c=!0,P.value=A[0].password,me(()=>c=!1)),a.$set(P);const J={};M&33554436&&(J.$$scope={dirty:M,ctx:A}),p.$set(J);const W={};M&33554436&&(W.$$scope={dirty:M,ctx:A}),_.$set(W)},i(A){b||(v(r.$$.fragment,A),v(a.$$.fragment,A),v(p.$$.fragment,A),v(_.$$.fragment,A),v(S.$$.fragment,A),b=!0)},o(A){y(r.$$.fragment,A),y(a.$$.fragment,A),y(p.$$.fragment,A),y(_.$$.fragment,A),y(S.$$.fragment,A),b=!1},d(A){A&&($(e),$(o),$(l),$(f),$(d),$(m)),H(r,A),H(a,A),H(p),H(_),H(S,A)}}}function q1(t){let e,n=(t[1]==="recover"?t[2]("Recover account"):t[2]("Sign up"))+"",i,o,r=Ve("first_user"),s,l,a,c,f,d,p,h,_,m,S,b,E,N,j=!Ve("first_user"),I,A,M,D,P,J=r&&Q1(t);function W(U){t[15](U)}let T={type:"email",name:"email",placeholder:t[2]("Ex: john@doe.com"),readonly:t[1]!=="register",$$slots:{help:[x1],label:[X1]},$$scope:{ctx:t}};t[0].email!==void 0&&(T.value=t[0].email),d=new Je({props:T}),de.push(()=>ge(d,"value",W));function G(U){t[16](U)}let K={type:"password",name:"password",$$slots:{help:[tb],label:[eb]},$$scope:{ctx:t}};t[0].password!==void 0&&(K.value=t[0].password),_=new Je({props:K}),de.push(()=>ge(_,"value",G)),E=new ft({props:{icon:"save",op:t[7],$$slots:{default:[nb]},$$scope:{ctx:t}}});let Q=j&&ib(t);return A=new Lt({props:{op:t[7],success:"Loading Convos..."}}),{c(){e=g("h2"),i=O(n),o=C(),J&&J.c(),s=C(),l=g("input"),a=C(),c=g("input"),f=C(),q(d.$$.fragment),h=C(),q(_.$$.fragment),S=C(),b=g("div"),q(E.$$.fragment),N=C(),Q&&Q.c(),I=C(),q(A.$$.fragment),k(l,"type","hidden"),k(l,"name","exp"),k(c,"type","hidden"),k(c,"name","token"),k(b,"class","form-actions")},m(U,L){w(U,e,L),u(e,i),w(U,o,L),J&&J.m(U,L),w(U,s,L),w(U,l,L),Ot(l,t[0].exp),w(U,a,L),w(U,c,L),Ot(c,t[0].token),w(U,f,L),z(d,U,L),w(U,h,L),z(_,U,L),w(U,S,L),w(U,b,L),z(E,b,null),u(b,N),Q&&Q.m(b,null),w(U,I,L),z(A,U,L),M=!0,D||(P=[Ce(l,"input",t[13]),Ce(c,"input",t[14])],D=!0)},p(U,L){(!M||L&6)&&n!==(n=(U[1]==="recover"?U[2]("Recover account"):U[2]("Sign up"))+"")&&R(i,n),r&&J.p(U,L),L&1&&Ot(l,U[0].exp),L&1&&Ot(c,U[0].token);const V={};L&4&&(V.placeholder=U[2]("Ex: john@doe.com")),L&2&&(V.readonly=U[1]!=="register"),L&33554438&&(V.$$scope={dirty:L,ctx:U}),!p&&L&1&&(p=!0,V.value=U[0].email,me(()=>p=!1)),d.$set(V);const F={};L&33554436&&(F.$$scope={dirty:L,ctx:U}),!m&&L&1&&(m=!0,F.value=U[0].password,me(()=>m=!1)),_.$set(F);const Z={};L&33554438&&(Z.$$scope={dirty:L,ctx:U}),E.$set(Z),j&&Q.p(U,L)},i(U){M||(v(d.$$.fragment,U),v(_.$$.fragment,U),v(E.$$.fragment,U),v(Q),v(A.$$.fragment,U),M=!0)},o(U){y(d.$$.fragment,U),y(_.$$.fragment,U),y(E.$$.fragment,U),y(Q),y(A.$$.fragment,U),M=!1},d(U){U&&($(e),$(o),$(s),$(l),$(a),$(c),$(f),$(h),$(S),$(b),$(I)),J&&J.d(U),H(d,U),H(_,U),H(E),Q&&Q.d(),H(A,U),D=!1,ut(P)}}}function W1(t){let e,n=t[2]("Invalid invite/recover URL")+"",i,o,r,s=t[2](Ve("status")==410?"The link has expired.":"The link is invalid.")+"",l,a,c,f=t[2]("Please ask your Convos admin for a new link.")+"",d,p,h,_,m=t[2]("Contact admin")+"",S,b,E,N;return E=new Ge({props:{href:"/login",$$slots:{default:[rb]},$$scope:{ctx:t}}}),{c(){e=g("h2"),i=O(n),o=C(),r=g("p"),l=O(s),a=C(),c=g("p"),d=O(f),p=C(),h=g("p"),_=g("a"),S=O(m),b=C(),q(E.$$.fragment),k(_,"class","btn"),k(_,"href",Ve("contact"))},m(j,I){w(j,e,I),u(e,i),w(j,o,I),w(j,r,I),u(r,l),w(j,a,I),w(j,c,I),u(c,d),w(j,p,I),w(j,h,I),u(h,_),u(_,S),u(h,b),z(E,h,null),N=!0},p(j,I){(!N||I&4)&&n!==(n=j[2]("Invalid invite/recover URL")+"")&&R(i,n),(!N||I&4)&&s!==(s=j[2](Ve("status")==410?"The link has expired.":"The link is invalid.")+"")&&R(l,s),(!N||I&4)&&f!==(f=j[2]("Please ask your Convos admin for a new link.")+"")&&R(d,f),(!N||I&4)&&m!==(m=j[2]("Contact admin")+"")&&R(S,m);const A={};I&33554436&&(A.$$scope={dirty:I,ctx:j}),E.$set(A)},i(j){N||(v(E.$$.fragment,j),N=!0)},o(j){y(E.$$.fragment,j),N=!1},d(j){j&&($(e),$(o),$(r),$(a),$(c),$(p),$(h)),H(E)}}}function G1(t){let e=t[2]("Sign in")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&4&&e!==(e=i[2]("Sign in")+"")&&R(n,e)},d(i){i&&$(n)}}}function K1(t){let e,n=t[2]("Email")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&4&&n!==(n=o[2]("Email")+"")&&R(i,n)},d(o){o&&$(e)}}}function Y1(t){let e,n=t[2]("Password")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&4&&n!==(n=o[2]("Password")+"")&&R(i,n)},d(o){o&&$(e)}}}function V1(t){let e,n=t[3]("Contact your [Convos admin](%1) if you have forgotten your password.",Ve("contact"))+"";return{c(){e=g("p"),k(e,"class","help"),k(e,"slot","help")},m(i,o){w(i,e,o),e.innerHTML=n},p(i,o){o&8&&n!==(n=i[3]("Contact your [Convos admin](%1) if you have forgotten your password.",Ve("contact"))+"")&&(e.innerHTML=n)},d(i){i&&$(e)}}}function Z1(t){let e,n=t[2]("Sign in")+"",i;return{c(){e=g("span"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&4&&n!==(n=o[2]("Sign in")+"")&&R(i,n)},d(o){o&&$(e)}}}function J1(t){let e=t[2]("Sign up")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&4&&e!==(e=i[2]("Sign up")+"")&&R(n,e)},d(i){i&&$(n)}}}function Q1(t){let e,n=t[2]('As you are the first user, you do not need any invitation link. Just fill in the form below, hit "Sign up" to start chatting.')+"",i;return{c(){e=g("p"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&4&&n!==(n=o[2]('As you are the first user, you do not need any invitation link. Just fill in the form below, hit "Sign up" to start chatting.')+"")&&R(i,n)},d(o){o&&$(e)}}}function X1(t){let e,n=t[2]("Email")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&4&&n!==(n=o[2]("Email")+"")&&R(i,n)},d(o){o&&$(e)}}}function x1(t){let e,n=(t[1]==="invitation"?t[2]("Your email is from the invite link."):t[2]("Your email will be used if you forget your password."))+"",i;return{c(){e=g("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&6&&n!==(n=(o[1]==="invitation"?o[2]("Your email is from the invite link."):o[2]("Your email will be used if you forget your password."))+"")&&R(i,n)},d(o){o&&$(e)}}}function eb(t){let e,n=t[2]("Password")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&4&&n!==(n=o[2]("Password")+"")&&R(i,n)},d(o){o&&$(e)}}}function tb(t){let e,n=t[2]("Hint: Use a phrase from a book.")+"",i;return{c(){e=g("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&4&&n!==(n=o[2]("Hint: Use a phrase from a book.")+"")&&R(i,n)},d(o){o&&$(e)}}}function nb(t){let e,n=(t[1]==="recover"?t[2]("Set new password"):t[2]("Sign up"))+"",i;return{c(){e=g("span"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&6&&n!==(n=(o[1]==="recover"?o[2]("Set new password"):o[2]("Sign up"))+"")&&R(i,n)},d(o){o&&$(e)}}}function ib(t){let e,n;return e=new Ge({props:{href:"/login",$$slots:{default:[ob]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o&33554436&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function ob(t){let e=t[2]("Sign in")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&4&&e!==(e=i[2]("Sign in")+"")&&R(n,e)},d(i){i&&$(n)}}}function rb(t){let e=t[2]("Sign in")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&4&&e!==(e=i[2]("Sign in")+"")&&R(n,e)},d(i){i&&$(n)}}}function ra(t){let e,n=t[22][1]+"",i,o,r,s;function l(){return t[19](t[22])}return{c(){e=g("a"),i=O(n),k(e,"href",o="#"+t[22][0])},m(a,c){w(a,e,c),u(e,i),r||(s=Ce(e,"click",l),r=!0)},p(a,c){t=a,c&16&&n!==(n=t[22][1]+"")&&R(i,n),c&16&&o!==(o="#"+t[22][0])&&k(e,"href",o)},d(a){a&&$(e),r=!1,s()}}}function sb(t){let e,n,i,o,r,s,l,a,c,f,d,p,h,_,m;const S=[W1,q1,H1,z1],b=[];function E(I,A){return A&2&&(r=null),I[1]==="invalid_invitation"?0:(r==null&&(r=["recover","invitation","register"].indexOf(I[1])!==-1),r?1:I[1]==="login"?2:3)}s=E(t,-1),l=b[s]=S[s](t),d=new he({props:{name:"globe"}});let N=xe(t[4].languageOptions),j=[];for(let I=0;I<N.length;I+=1)j[I]=ra(oa(t,N,I));return{c(){e=g("main"),n=g("form"),i=g("input"),o=C(),l.c(),a=C(),c=g("div"),f=g("footer"),q(d.$$.fragment),p=C();for(let I=0;I<j.length;I+=1)j[I].c();k(i,"type","hidden"),k(i,"name","mode"),k(n,"method","post"),k(e,"class","cms-main"),k(f,"class","footer language-selector"),k(c,"class","footer--wrapper is-small")},m(I,A){w(I,e,A),u(e,n),u(n,i),Ot(i,t[0].mode),u(n,o),b[s].m(n,null),w(I,a,A),w(I,c,A),u(c,f),z(d,f,null),u(f,p);for(let M=0;M<j.length;M+=1)j[M]&&j[M].m(f,null);h=!0,_||(m=[Ce(i,"input",t[12]),Ce(n,"submit",st(t[8]))],_=!0)},p(I,[A]){A&1&&Ot(i,I[0].mode);let M=s;if(s=E(I,A),s===M?b[s].p(I,A):(ye(),y(b[M],1,1,()=>{b[M]=null}),Se(),l=b[s],l?l.p(I,A):(l=b[s]=S[s](I),l.c()),v(l,1),l.m(n,null)),A&16){N=xe(I[4].languageOptions);let D;for(D=0;D<N.length;D+=1){const P=oa(I,N,D);j[D]?j[D].p(P,A):(j[D]=ra(P),j[D].c(),j[D].m(f,null))}for(;D<j.length;D+=1)j[D].d(1);j.length=N.length}},i(I){h||(v(l),v(d.$$.fragment,I),h=!0)},o(I){y(l),y(d.$$.fragment,I),h=!1},d(I){I&&($(e),$(a),$(c)),b[s].d(),H(d),yt(j,I),_=!1,ut(m)}}}function lb(t,e,n){let i,o,r,s,l,a;we(t,Re,P=>n(10,o=P)),we(t,lt,P=>n(2,s=P)),we(t,jt,P=>n(3,l=P)),we(t,tt,P=>n(4,a=P));let{title:c="Sign in"}=e;const f=mt("user");we(t,f,P=>n(11,r=P));const d=nt.op("loginUser"),p=nt.op("registerUser");let h={};function _(P){if(P.is("loading")||!P.email)return;const J=P.conversations()[0],W=P.lastUrl?P.lastUrl:J?J.path:"/settings/connections";Re.go(W,{replace:!0})}function m(P){const J=P.path.indexOf("register")!==-1,W=!h.mode&&Ve("status")>=400?"invalid_invitation":P.param("email")&&Ve("existing_user")?"recover":P.param("email")?"invitation":Ve("first_user")||J&&Ve("open_to_public")?"register":J?"invalid":"login";return n(0,h={email:P.param("email")||h.email||"",exp:P.param("exp")||"",mode:W,password:"",token:P.param("token")||""}),n(9,c=W==="login"?"Sign in":"Sign up"),"ontouchstart"in window||setTimeout(()=>vt(document,".text-field input").reverse().map(T=>T.readOnly||T.focus()),1),W}async function S(P){const J=i==="login"?d:p,W=P.target.closest("form");n(0,h.email=W.email.value,h),n(0,h.password=W.password.value,h),await J.perform(h),i!=="login"&&Re.update({lastUrl:""}),J.error()||await f.load()}function b(){h.mode=this.value,n(0,h)}function E(){h.exp=this.value,n(0,h)}function N(){h.token=this.value,n(0,h)}function j(P){t.$$.not_equal(h.email,P)&&(h.email=P,n(0,h))}function I(P){t.$$.not_equal(h.password,P)&&(h.password=P,n(0,h))}function A(P){t.$$.not_equal(h.email,P)&&(h.email=P,n(0,h))}function M(P){t.$$.not_equal(h.password,P)&&(h.password=P,n(0,h))}const D=P=>a.load(P[0]);return t.$$set=P=>{"title"in P&&n(9,c=P.title)},t.$$.update=()=>{t.$$.dirty&2048&&_(r),t.$$.dirty&1024&&n(1,i=m(o))},[h,i,s,l,a,f,d,p,S,c,o,r,b,E,N,j,I,A,M,D]}class Wc extends Xe{constructor(e){super(),Qe(this,e,lb,sb,Ze,{title:9})}}function sa(t,e,n){const i=t.slice();return i[8]=e[n],i[10]=n,i}function ab(t){let e,n;return e=new he({props:{name:"user-cog"}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p:Oe,i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function cb(t){let e,n=t[3]("Notifications")+"",i,o,r,s;return r=new Ge({props:{href:"/settings/account",class:"btn-hallow",$$slots:{default:[ab]},$$scope:{ctx:t}}}),{c(){e=g("h1"),i=O(n),o=C(),q(r.$$.fragment)},m(l,a){w(l,e,a),u(e,i),w(l,o,a),z(r,l,a),s=!0},p(l,a){(!s||a&8)&&n!==(n=l[3]("Notifications")+"")&&R(i,n);const c={};a&2048&&(c.$$scope={dirty:a,ctx:l}),r.$set(c)},i(l){s||(v(r.$$.fragment,l),s=!0)},o(l){y(r.$$.fragment,l),s=!1},d(l){l&&($(e),$(o)),H(r,l)}}}function la(t){let e,n=t[3]("No notifications.")+"",i;return{c(){e=g("h2"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&8&&n!==(n=o[3]("No notifications.")+"")&&R(i,n)},d(o){o&&$(e)}}}function aa(t){let e,n,i,o,r,s=t[8].ts.getHumanDate()+"",l,a;return i=new he({props:{name:"calendar-alt"}}),{c(){e=g("div"),n=g("span"),q(i.$$.fragment),o=C(),r=g("i"),l=O(s),k(e,"class","message__status-line for-day-changed")},m(c,f){w(c,e,f),u(e,n),z(i,n,null),u(n,o),u(n,r),u(r,l),a=!0},p(c,f){(!a||f&16)&&s!==(s=c[8].ts.getHumanDate()+"")&&R(l,s)},i(c){a||(v(i.$$.fragment,c),a=!0)},o(c){y(i.$$.fragment,c),a=!1},d(c){c&&$(e),H(i)}}}function ca(t){let e,n,i,o,r,s,l=t[8].ts.format("%H:%M")+"",a,c,f,d=Nt(t[8].ts.toLocaleString())+"",p,h,_,m=t[3]("%1 in %2",t[8].from,t[8].conversation_id)+"",S,b,E,N=t[8].html+"",j,I,A,M,D,P=(!t[10]||t[8].dayChanged)&&aa(t);return i=new he({props:{name:"pick:"+t[8].from,color:t[8].color}}),{c(){P&&P.c(),e=C(),n=g("a"),q(i.$$.fragment),o=C(),r=g("div"),s=g("span"),a=O(l),c=C(),f=g("span"),p=O(d),h=C(),_=g("span"),S=O(m),b=C(),E=g("div"),k(f,"class","tooltip"),k(r,"class","message__ts has-tooltip"),k(_,"class","message__from"),Ut(_,"color",t[8].color),k(E,"class","message__text"),k(n,"href",j=yo(t[8])),k(n,"class",I=t[8].className)},m(J,W){P&&P.m(J,W),w(J,e,W),w(J,n,W),z(i,n,null),u(n,o),u(n,r),u(r,s),u(s,a),u(r,c),u(r,f),u(f,p),u(n,h),u(n,_),u(_,S),u(n,b),u(n,E),E.innerHTML=N,A=!0,M||(D=Ce(n,"click",zc),M=!0)},p(J,W){!J[10]||J[8].dayChanged?P?(P.p(J,W),W&16&&v(P,1)):(P=aa(J),P.c(),v(P,1),P.m(e.parentNode,e)):P&&(ye(),y(P,1,1,()=>{P=null}),Se());const T={};W&16&&(T.name="pick:"+J[8].from),W&16&&(T.color=J[8].color),i.$set(T),(!A||W&16)&&l!==(l=J[8].ts.format("%H:%M")+"")&&R(a,l),(!A||W&16)&&d!==(d=Nt(J[8].ts.toLocaleString())+"")&&R(p,d),(!A||W&24)&&m!==(m=J[3]("%1 in %2",J[8].from,J[8].conversation_id)+"")&&R(S,m),(!A||W&16)&&Ut(_,"color",J[8].color),(!A||W&16)&&N!==(N=J[8].html+"")&&(E.innerHTML=N),(!A||W&16&&j!==(j=yo(J[8])))&&k(n,"href",j),(!A||W&16&&I!==(I=J[8].className))&&k(n,"class",I)},i(J){A||(v(P),v(i.$$.fragment,J),A=!0)},o(J){y(P),y(i.$$.fragment,J),A=!1},d(J){J&&($(e),$(n)),P&&P.d(J),H(i),M=!1,D()}}}function ua(t){let e,n,i,o,r,s=t[3]("Loading...")+"",l,a;return i=new he({props:{name:"spinner",animation:"spin"}}),{c(){e=g("div"),n=g("span"),q(i.$$.fragment),o=C(),r=g("i"),l=O(s),k(e,"class","message__status-line for-loading")},m(c,f){w(c,e,f),u(e,n),z(i,n,null),u(n,o),u(n,r),u(r,l),a=!0},p(c,f){(!a||f&8)&&s!==(s=c[3]("Loading...")+"")&&R(l,s)},i(c){a||(v(i.$$.fragment,c),a=!0)},o(c){y(i.$$.fragment,c),a=!1},d(c){c&&$(e),H(i)}}}function ub(t){let e=t[4].length===0&&!t[5].is("loading"),n,i,o=t[1].is("loading"),r,s,l=e&&la(t),a=xe(t[4].render()),c=[];for(let p=0;p<a.length;p+=1)c[p]=ca(sa(t,a,p));const f=p=>y(c[p],1,1,()=>{c[p]=null});let d=o&&ua(t);return{c(){l&&l.c(),n=C();for(let p=0;p<c.length;p+=1)c[p].c();i=C(),d&&d.c(),r=pt()},m(p,h){l&&l.m(p,h),w(p,n,h);for(let _=0;_<c.length;_+=1)c[_]&&c[_].m(p,h);w(p,i,h),d&&d.m(p,h),w(p,r,h),s=!0},p(p,h){if(h&16&&(e=p[4].length===0&&!p[5].is("loading")),e?l?l.p(p,h):(l=la(p),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null),h&24){a=xe(p[4].render());let _;for(_=0;_<a.length;_+=1){const m=sa(p,a,_);c[_]?(c[_].p(m,h),v(c[_],1)):(c[_]=ca(m),c[_].c(),v(c[_],1),c[_].m(i.parentNode,i))}for(ye(),_=a.length;_<c.length;_+=1)f(_);Se()}h&2&&(o=p[1].is("loading")),o?d?(d.p(p,h),h&2&&v(d,1)):(d=ua(p),d.c(),v(d,1),d.m(r.parentNode,r)):d&&(ye(),y(d,1,1,()=>{d=null}),Se())},i(p){if(!s){for(let h=0;h<a.length;h+=1)v(c[h]);v(d),s=!0}},o(p){c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)y(c[h]);y(d),s=!1},d(p){p&&($(n),$(i),$(r)),l&&l.d(p),yt(c,p),d&&d.d(p)}}}function fb(t){let e,n,i,o;return e=new Ft({props:{$$slots:{default:[cb]},$$scope:{ctx:t}}}),i=new Yr({props:{class:t[2].join(" "),$$slots:{default:[ub]},$$scope:{ctx:t}}}),i.$on("rendered",pb),{c(){q(e.$$.fragment),n=C(),q(i.$$.fragment)},m(r,s){z(e,r,s),w(r,n,s),z(i,r,s),o=!0},p(r,[s]){const l={};s&2056&&(l.$$scope={dirty:s,ctx:r}),e.$set(l);const a={};s&4&&(a.class=r[2].join(" ")),s&2074&&(a.$$scope={dirty:s,ctx:r}),i.$set(a)},i(r){o||(v(e.$$.fragment,r),v(i.$$.fragment,r),o=!0)},o(r){y(e.$$.fragment,r),y(i.$$.fragment,r),o=!1},d(r){r&&$(n),H(e,r),H(i,r)}}}const pb=t=>t.detail.scrollTo(-1);function db(t,e,n){let i,o,r,s,l,a=Oe,c=()=>(a(),a=_t(o,h=>n(4,l=h)),o);we(t,lt,h=>n(3,s=h)),t.$$.on_destroy.push(()=>a());const f="Notifications",p=mt("user").notifications;return we(t,p,h=>n(1,r=h)),zt(async()=>{await p.load(),await p.markAsRead()}),t.$$.update=()=>{t.$$.dirty&2&&c(n(0,o=r.messages)),t.$$.dirty&1&&n(2,i=["main",o.length&&"has-results"].filter(h=>h))},[o,r,i,s,l,p,f]}let hb=class extends Xe{constructor(e){super(),Qe(this,e,db,fb,Ze,{title:6})}get title(){return this.$$.ctx[6]}};function fa(t,e,n){const i=t.slice();return i[13]=e[n],i[15]=n,i}function _b(t){let e,n,i,o,r=t[6]("Clear")+"",s,l;return e=new he({props:{name:"search"}}),n=new he({props:{name:"times"}}),{c(){q(e.$$.fragment),q(n.$$.fragment),i=C(),o=g("span"),s=O(r),k(o,"class","tooltip is-left")},m(a,c){z(e,a,c),z(n,a,c),w(a,i,c),w(a,o,c),u(o,s),l=!0},p(a,c){(!l||c&64)&&r!==(r=a[6]("Clear")+"")&&R(s,r)},i(a){l||(v(e.$$.fragment,a),v(n.$$.fragment,a),l=!0)},o(a){y(e.$$.fragment,a),y(n.$$.fragment,a),l=!1},d(a){a&&($(i),$(o)),H(e,a),H(n,a)}}}function mb(t){let e,n=t[6](t[8].name)+"",i,o,r,s;return r=new Ge({props:{href:"/search",class:"btn-hallow can-toggle "+(t[4]?"has-tooltip is-active":""),$$slots:{default:[_b]},$$scope:{ctx:t}}}),r.$on("click",t[9]),{c(){e=g("h1"),i=O(n),o=C(),q(r.$$.fragment)},m(l,a){w(l,e,a),u(e,i),w(l,o,a),z(r,l,a),s=!0},p(l,a){(!s||a&64)&&n!==(n=l[6](l[8].name)+"")&&R(i,n);const c={};a&16&&(c.class="btn-hallow can-toggle "+(l[4]?"has-tooltip is-active":"")),a&65600&&(c.$$scope={dirty:a,ctx:l}),r.$set(c)},i(l){s||(v(r.$$.fragment,l),s=!0)},o(l){y(r.$$.fragment,l),s=!1},d(l){l&&($(e),$(o)),H(r,l)}}}function pa(t){let e,n,i,o,r;const s=[bb,gb],l=[];function a(c,f){return f&4&&(e=null),e==null&&(e=!!c[2].param("q")),e?0:1}return n=a(t,-1),i=l[n]=s[n](t),{c(){i.c(),o=pt()},m(c,f){l[n].m(c,f),w(c,o,f),r=!0},p(c,f){let d=n;n=a(c,f),n===d?l[n].p(c,f):(ye(),y(l[d],1,1,()=>{l[d]=null}),Se(),i=l[n],i?i.p(c,f):(i=l[n]=s[n](c),i.c()),v(i,1),i.m(o.parentNode,o))},i(c){r||(v(i),r=!0)},o(c){y(i),r=!1},d(c){c&&$(o),l[n].d(c)}}}function gb(t){let e,n,i,o,r=t[7]("You can enter a channel name like #cool_beans to narrow down the search, or enter @some_nick to filter messages sent by a given user.")+"",s;return n=new he({props:{name:"info-circle"}}),{c(){e=g("p"),q(n.$$.fragment),i=C(),o=new Rt(!1),o.a=null},m(l,a){w(l,e,a),z(n,e,null),u(e,i),o.m(r,e),s=!0},p(l,a){(!s||a&128)&&r!==(r=l[7]("You can enter a channel name like #cool_beans to narrow down the search, or enter @some_nick to filter messages sent by a given user.")+"")&&o.p(r)},i(l){s||(v(n.$$.fragment,l),s=!0)},o(l){y(n.$$.fragment,l),s=!1},d(l){l&&$(e),H(n)}}}function bb(t){let e,n,i,o=t[6]('No search results for "%1".',t[2].param("q"))+"",r,s;return n=new he({props:{name:"info-circle"}}),{c(){e=g("p"),q(n.$$.fragment),i=C(),r=O(o)},m(l,a){w(l,e,a),z(n,e,null),u(e,i),u(e,r),s=!0},p(l,a){(!s||a&68)&&o!==(o=l[6]('No search results for "%1".',l[2].param("q"))+"")&&R(r,o)},i(l){s||(v(n.$$.fragment,l),s=!0)},o(l){y(n.$$.fragment,l),s=!1},d(l){l&&$(e),H(n)}}}function da(t){let e,n,i,o,r,s=t[13].ts.getHumanDate()+"",l,a;return i=new he({props:{name:"calendar-alt"}}),{c(){e=g("div"),n=g("span"),q(i.$$.fragment),o=C(),r=g("i"),l=O(s),k(e,"class","message__status-line for-day-changed")},m(c,f){w(c,e,f),u(e,n),z(i,n,null),u(n,o),u(n,r),u(r,l),a=!0},p(c,f){(!a||f&2)&&s!==(s=c[13].ts.getHumanDate()+"")&&R(l,s)},i(c){a||(v(i.$$.fragment,c),a=!0)},o(c){y(i.$$.fragment,c),a=!1},d(c){c&&$(e),H(i)}}}function ha(t){let e,n,i,o,r,s,l=t[13].ts.format("%H:%M")+"",a,c,f,d=Nt(t[13].ts.toLocaleString())+"",p,h,_,m=t[6]("%1 in %2",t[13].from,t[13].conversation_id)+"",S,b,E,N=t[13].html+"",j,I,A,M,D,P,J=(!t[15]||t[13].dayChanged)&&da(t);return i=new he({props:{name:"pick:"+t[13].from,color:t[13].color}}),{c(){J&&J.c(),e=C(),n=g("a"),q(i.$$.fragment),o=C(),r=g("div"),s=g("span"),a=O(l),c=C(),f=g("span"),p=O(d),h=C(),_=g("span"),S=O(m),b=C(),E=g("div"),j=C(),k(f,"class","tooltip"),k(r,"class","message__ts has-tooltip"),k(_,"class","message__from"),Ut(_,"color",t[13].color),k(E,"class","message__text"),k(n,"href",I=yo(t[13])),k(n,"class",A=t[13].className)},m(W,T){J&&J.m(W,T),w(W,e,T),w(W,n,T),z(i,n,null),u(n,o),u(n,r),u(r,s),u(s,a),u(r,c),u(r,f),u(f,p),u(n,h),u(n,_),u(_,S),u(n,b),u(n,E),E.innerHTML=N,u(n,j),M=!0,D||(P=Ce(n,"click",zc),D=!0)},p(W,T){!W[15]||W[13].dayChanged?J?(J.p(W,T),T&2&&v(J,1)):(J=da(W),J.c(),v(J,1),J.m(e.parentNode,e)):J&&(ye(),y(J,1,1,()=>{J=null}),Se());const G={};T&2&&(G.name="pick:"+W[13].from),T&2&&(G.color=W[13].color),i.$set(G),(!M||T&2)&&l!==(l=W[13].ts.format("%H:%M")+"")&&R(a,l),(!M||T&2)&&d!==(d=Nt(W[13].ts.toLocaleString())+"")&&R(p,d),(!M||T&66)&&m!==(m=W[6]("%1 in %2",W[13].from,W[13].conversation_id)+"")&&R(S,m),(!M||T&2)&&Ut(_,"color",W[13].color),(!M||T&2)&&N!==(N=W[13].html+"")&&(E.innerHTML=N),(!M||T&2&&I!==(I=yo(W[13])))&&k(n,"href",I),(!M||T&2&&A!==(A=W[13].className))&&k(n,"class",A)},i(W){M||(v(J),v(i.$$.fragment,W),M=!0)},o(W){y(J),y(i.$$.fragment,W),M=!1},d(W){W&&($(e),$(n)),J&&J.d(W),H(i),D=!1,P()}}}function _a(t){let e,n,i,o,r,s=t[6]("Loading...")+"",l,a;return i=new he({props:{name:"spinner",animation:"spin"}}),{c(){e=g("div"),n=g("span"),q(i.$$.fragment),o=C(),r=g("i"),l=O(s),k(e,"class","message__status-line for-loading")},m(c,f){w(c,e,f),u(e,n),z(i,n,null),u(n,o),u(n,r),u(r,l),a=!0},p(c,f){(!a||f&64)&&s!==(s=c[6]("Loading...")+"")&&R(l,s)},i(c){a||(v(i.$$.fragment,c),a=!0)},o(c){y(i.$$.fragment,c),a=!1},d(c){c&&$(e),H(i)}}}function vb(t){let e=t[1].length===0&&!t[8].is("loading"),n,i,o=t[3].is("loading"),r,s,l=e&&pa(t),a=xe(t[1].render()),c=[];for(let p=0;p<a.length;p+=1)c[p]=ha(fa(t,a,p));const f=p=>y(c[p],1,1,()=>{c[p]=null});let d=o&&_a(t);return{c(){l&&l.c(),n=C();for(let p=0;p<c.length;p+=1)c[p].c();i=C(),d&&d.c(),r=pt()},m(p,h){l&&l.m(p,h),w(p,n,h);for(let _=0;_<c.length;_+=1)c[_]&&c[_].m(p,h);w(p,i,h),d&&d.m(p,h),w(p,r,h),s=!0},p(p,h){if(h&2&&(e=p[1].length===0&&!p[8].is("loading")),e?l?(l.p(p,h),h&2&&v(l,1)):(l=pa(p),l.c(),v(l,1),l.m(n.parentNode,n)):l&&(ye(),y(l,1,1,()=>{l=null}),Se()),h&66){a=xe(p[1].render());let _;for(_=0;_<a.length;_+=1){const m=fa(p,a,_);c[_]?(c[_].p(m,h),v(c[_],1)):(c[_]=ha(m),c[_].c(),v(c[_],1),c[_].m(i.parentNode,i))}for(ye(),_=a.length;_<c.length;_+=1)f(_);Se()}h&8&&(o=p[3].is("loading")),o?d?(d.p(p,h),h&8&&v(d,1)):(d=_a(p),d.c(),v(d,1),d.m(r.parentNode,r)):d&&(ye(),y(d,1,1,()=>{d=null}),Se())},i(p){if(!s){v(l);for(let h=0;h<a.length;h+=1)v(c[h]);v(d),s=!0}},o(p){y(l),c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)y(c[h]);y(d),s=!1},d(p){p&&($(n),$(i),$(r)),l&&l.d(p),yt(c,p),d&&d.d(p)}}}function $b(t){let e,n;return e=new Uc({props:{conversation:t[8]}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p:Oe,i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function wb(t){let e,n,i,o,r=t[8].is("search"),s,l;e=new Ft({props:{$$slots:{default:[mb]},$$scope:{ctx:t}}}),i=new Yr({props:{class:t[5].join(" "),$$slots:{default:[vb]},$$scope:{ctx:t}}}),i.$on("rendered",kb);let a=r&&$b(t);return{c(){q(e.$$.fragment),n=C(),q(i.$$.fragment),o=C(),a&&a.c(),s=pt()},m(c,f){z(e,c,f),w(c,n,f),z(i,c,f),w(c,o,f),a&&a.m(c,f),w(c,s,f),l=!0},p(c,[f]){const d={};f&65616&&(d.$$scope={dirty:f,ctx:c}),e.$set(d);const p={};f&32&&(p.class=c[5].join(" ")),f&65742&&(p.$$scope={dirty:f,ctx:c}),i.$set(p),r&&a.p(c,f)},i(c){l||(v(e.$$.fragment,c),v(i.$$.fragment,c),v(a),l=!0)},o(c){y(e.$$.fragment,c),y(i.$$.fragment,c),y(a),l=!1},d(c){c&&($(n),$(o),$(s)),H(e,c),H(i,c),a&&a.d(c)}}}const kb=t=>t.detail.scrollTo(-1);function yb(t,e,n){let i,o,r,s,l=Oe,a=()=>(l(),l=_t(i,E=>n(1,s=E)),i),c,f,d,p;we(t,Re,E=>n(2,c=E)),we(t,lt,E=>n(6,d=E)),we(t,jt,E=>n(7,p=E)),t.$$.on_destroy.push(()=>l());const h="Search",_=mt("user"),m=_.search;we(t,m,E=>n(3,f=E)),zt(()=>{_.search.on("send",b),Re.param("q")&&b({message:Re.param("q")})});function S(E){if(r)return s.clear();E.preventDefault(),document.querySelector(".is-primary-input").focus()}function b(E){const N=E.message;return m.update({userInput:N}),Re.go("/search?q="+encodeURIComponent(N),{replace:!0}),N?m.load({match:N}):i.clear()}return t.$$.update=()=>{t.$$.dirty&8&&a(n(0,i=f.messages)),t.$$.dirty&9&&n(5,o=["main",i.length&&"has-results",f.is("search")&&"is-above-chat-input"].filter(E=>E)),t.$$.dirty&6&&n(4,r=c.param("q")||s.length)},[i,s,c,f,r,o,d,p,m,S,h]}let Sb=class extends Xe{constructor(e){super(),Qe(this,e,yb,wb,Ze,{title:10})}get title(){return this.$$.ctx[10]}};function Eb(t){let e,n=t[2]("Account")+"",i;return{c(){e=g("h1"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&4&&n!==(n=o[2]("Account")+"")&&R(i,n)},d(o){o&&$(e)}}}function Cb(t){let e,n=t[2]("Email")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&4&&n!==(n=o[2]("Email")+"")&&R(i,n)},d(o){o&&$(e)}}}function Ab(t){let e,n=t[2]("Notification keywords")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&4&&n!==(n=o[2]("Notification keywords")+"")&&R(i,n)},d(o){o&&$(e)}}}function Ob(t){let e,n=t[2]("Enable notifications")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&4&&n!==(n=o[2]("Enable notifications")+"")&&R(i,n)},d(o){o&&$(e)}}}function Nb(t){let e,n=t[2]("Notification sound volume")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&4&&n!==(n=o[2]("Notification sound volume")+"")&&R(i,n)},d(o){o&&$(e)}}}function Tb(t){let e,n=t[2]("Test")+"",i;return{c(){e=g("span"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&4&&n!==(n=o[2]("Test")+"")&&R(i,n)},d(o){o&&$(e)}}}function Mb(t){let e,n=t[2]("Ignore join/part messages")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&4&&n!==(n=o[2]("Ignore join/part messages")+"")&&R(i,n)},d(o){o&&$(e)}}}function Rb(t){let e,n=t[2]("Expand URL to media")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&4&&n!==(n=o[2]("Expand URL to media")+"")&&R(i,n)},d(o){o&&$(e)}}}function Lb(t){let e,n=t[2]("Enable compact message display")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&4&&n!==(n=o[2]("Enable compact message display")+"")&&R(i,n)},d(o){o&&$(e)}}}function Ib(t){let e,n=t[2]("Theme")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&4&&n!==(n=o[2]("Theme")+"")&&R(i,n)},d(o){o&&$(e)}}}function Pb(t){let e,n=t[2]("Color scheme")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&4&&n!==(n=o[2]("Color scheme")+"")&&R(i,n)},d(o){o&&$(e)}}}function Db(t){let e,n=t[2]("Language")+"",i,o,r,s;return r=new he({props:{name:"globe"}}),{c(){e=g("span"),i=O(n),o=C(),q(r.$$.fragment),k(e,"slot","label")},m(l,a){w(l,e,a),u(e,i),u(e,o),z(r,e,null),s=!0},p(l,a){(!s||a&4)&&n!==(n=l[2]("Language")+"")&&R(i,n)},i(l){s||(v(r.$$.fragment,l),s=!0)},o(l){y(r.$$.fragment,l),s=!1},d(l){l&&$(e),H(r)}}}function Ub(t){let e,n=t[2]("Password")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&4&&n!==(n=o[2]("Password")+"")&&R(i,n)},d(o){o&&$(e)}}}function Bb(t){let e,n=t[2]("Repeat password")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&4&&n!==(n=o[2]("Repeat password")+"")&&R(i,n)},d(o){o&&$(e)}}}function Fb(t){let e,n=t[2]("Save settings")+"",i;return{c(){e=g("span"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&4&&n!==(n=o[2]("Save settings")+"")&&R(i,n)},d(o){o&&$(e)}}}function jb(t){let e,n,i=t[2]("Protocol handlers")+"",o,r,s,l=t[2]("Mark the protocols below that you want %1 to handle, and a popup should ask you for confirmation.",t[2]("Convos"))+"",a,c,f=t[2]("If you do not see any popup, then it probably means %1 already handles the protocol.",t[2]("Convos"))+"",d,p,h,_,m,S,b=t[3]("Test it by clicking on %1.","irc://localhost:6667")+"",E,N,j,I,A,M=t[3]("Test it by clicking on %1.","ircs://irc.libera.chat:6697/%23convos")+"",D,P,J;function W(Q){t[25](Q)}let T={name:"handle_protocol_irc",$$slots:{label:[zb]},$$scope:{ctx:t}};t[0].handle_protocol_irc!==void 0&&(T.value=t[0].handle_protocol_irc),h=new it({props:T}),de.push(()=>ge(h,"value",W));function G(Q){t[26](Q)}let K={name:"handle_protocol_ircs",$$slots:{label:[Hb]},$$scope:{ctx:t}};return t[0].handle_protocol_ircs!==void 0&&(K.value=t[0].handle_protocol_ircs),N=new it({props:K}),de.push(()=>ge(N,"value",G)),{c(){e=g("form"),n=g("h2"),o=O(i),r=C(),s=g("p"),a=O(l),c=C(),d=O(f),p=C(),q(h.$$.fragment),m=C(),S=g("p"),E=C(),q(N.$$.fragment),I=C(),A=g("p"),k(S,"class","help"),k(A,"class","help")},m(Q,U){w(Q,e,U),u(e,n),u(n,o),u(e,r),u(e,s),u(s,a),u(s,c),u(s,d),u(e,p),z(h,e,null),u(e,m),u(e,S),S.innerHTML=b,u(e,E),z(N,e,null),u(e,I),u(e,A),A.innerHTML=M,D=!0,P||(J=Ce(e,"submit",st(t[11])),P=!0)},p(Q,U){(!D||U&4)&&i!==(i=Q[2]("Protocol handlers")+"")&&R(o,i),(!D||U&4)&&l!==(l=Q[2]("Mark the protocols below that you want %1 to handle, and a popup should ask you for confirmation.",Q[2]("Convos"))+"")&&R(a,l),(!D||U&4)&&f!==(f=Q[2]("If you do not see any popup, then it probably means %1 already handles the protocol.",Q[2]("Convos"))+"")&&R(d,f);const L={};U&536870916&&(L.$$scope={dirty:U,ctx:Q}),!_&&U&1&&(_=!0,L.value=Q[0].handle_protocol_irc,me(()=>_=!1)),h.$set(L),(!D||U&8)&&b!==(b=Q[3]("Test it by clicking on %1.","irc://localhost:6667")+"")&&(S.innerHTML=b);const V={};U&536870916&&(V.$$scope={dirty:U,ctx:Q}),!j&&U&1&&(j=!0,V.value=Q[0].handle_protocol_ircs,me(()=>j=!1)),N.$set(V),(!D||U&8)&&M!==(M=Q[3]("Test it by clicking on %1.","ircs://irc.libera.chat:6697/%23convos")+"")&&(A.innerHTML=M)},i(Q){D||(v(h.$$.fragment,Q),v(N.$$.fragment,Q),D=!0)},o(Q){y(h.$$.fragment,Q),y(N.$$.fragment,Q),D=!1},d(Q){Q&&$(e),H(h),H(N),P=!1,J()}}}function zb(t){let e,n=t[2]("irc://")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&4&&n!==(n=o[2]("irc://")+"")&&R(i,n)},d(o){o&&$(e)}}}function Hb(t){let e,n=t[2]("ircs://")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&4&&n!==(n=o[2]("ircs://")+"")&&R(i,n)},d(o){o&&$(e)}}}function qb(t){let e,n,i,o,r,s,l,a,c,f,d,p,h,_,m=t[3]('Leave this unchecked, and hit "Save" to disable notifications.')+"",S,b,E,N,j,I,A,M,D,P,J,W,T,G,K,Q,U,L,V,F,Z,Y,B,oe,fe,te,ue,Ne,ae,$e,De,je,Pe,Te=t[2]("Leave the password fields empty to keep the current password.")+"",ze,ee,ce,He,Be,Ee,ve,ne,pe,ke;e=new Ft({props:{$$slots:{default:[Eb]},$$scope:{ctx:t}}});function se(le){t[12](le)}let be={type:"email",name:"email",readonly:!0,$$slots:{label:[Cb]},$$scope:{ctx:t}};t[0].email!==void 0&&(be.value=t[0].email),r=new Je({props:be}),de.push(()=>ge(r,"value",se));function Le(le){t[13](le)}let x={name:"highlightKeywords",placeholder:t[2]("whatever, keywords"),$$slots:{label:[Ab]},$$scope:{ctx:t}};t[0].highlightKeywords!==void 0&&(x.value=t[0].highlightKeywords),a=new Je({props:x}),de.push(()=>ge(a,"value",Le));function X(le){t[14](le)}let ie={name:"wantNotifications",$$slots:{label:[Ob]},$$scope:{ctx:t}};t[0].wantNotifications!==void 0&&(ie.value=t[0].wantNotifications),d=new it({props:ie}),de.push(()=>ge(d,"value",X));function re(le){t[15](le)}let _e={name:"volume",options:bt.volumeOptions,$$slots:{label:[Nb]},$$scope:{ctx:t}};t[0].volume!==void 0&&(_e.value=t[0].volume),E=new oi({props:_e}),de.push(()=>ge(E,"value",re)),A=new ft({props:{icon:"play",disabled:!parseInt(t[0].volume,10),type:"button",$$slots:{default:[Tb]},$$scope:{ctx:t}}}),A.$on("click",t[16]);function qe(le){t[17](le)}let Ue={name:"ignoreStatuses",$$slots:{label:[Mb]},$$scope:{ctx:t}};t[0].ignoreStatuses!==void 0&&(Ue.value=t[0].ignoreStatuses),D=new it({props:Ue}),de.push(()=>ge(D,"value",qe));function rt(le){t[18](le)}let Et={name:"expandUrlToMedia",$$slots:{label:[Rb]},$$scope:{ctx:t}};t[0].expandUrlToMedia!==void 0&&(Et.value=t[0].expandUrlToMedia),W=new it({props:Et}),de.push(()=>ge(W,"value",rt));function Pt(le){t[19](le)}let ct={name:"compactDisplay",$$slots:{label:[Lb]},$$scope:{ctx:t}};t[0].compactDisplay!==void 0&&(ct.value=t[0].compactDisplay),K=new it({props:ct}),de.push(()=>ge(K,"value",Pt));function Xt(le){t[20](le)}let Ht={name:"activeTheme",options:t[6].themeOptions,$$slots:{label:[Ib]},$$scope:{ctx:t}};t[0].activeTheme!==void 0&&(Ht.value=t[0].activeTheme),L=new oi({props:Ht}),de.push(()=>ge(L,"value",Xt));function Fn(le){t[21](le)}let jn={name:"colorScheme",readonly:t[1],options:t[6].colorSchemeOptions,$$slots:{label:[Pb]},$$scope:{ctx:t}};t[0].colorScheme!==void 0&&(jn.value=t[0].colorScheme),Z=new oi({props:jn}),de.push(()=>ge(Z,"value",Fn));function wi(le){t[22](le)}let $n={name:"lang",options:t[4].languageOptions,$$slots:{label:[Db]},$$scope:{ctx:t}};t[0].lang!==void 0&&($n.value=t[0].lang),oe=new oi({props:$n}),de.push(()=>ge(oe,"value",wi));function ki(le){t[23](le)}let zn={type:"password",name:"password",autocomplete:"new-password",$$slots:{label:[Ub]},$$scope:{ctx:t}};t[0].password!==void 0&&(zn.value=t[0].password),ue=new Je({props:zn}),de.push(()=>ge(ue,"value",ki));function Hn(le){t[24](le)}let qn={type:"password",name:"password_again",autocomplete:"new-password",$$slots:{label:[Bb]},$$scope:{ctx:t}};t[0].password_again!==void 0&&(qn.value=t[0].password_again),$e=new Je({props:qn}),de.push(()=>ge($e,"value",Hn)),He=new ft({props:{icon:"save",op:t[7],$$slots:{default:[Fb]},$$scope:{ctx:t}}}),Ee=new Lt({props:{op:t[7]}});let Tt=t[5]&&jb(t);return{c(){q(e.$$.fragment),n=C(),i=g("main"),o=g("form"),q(r.$$.fragment),l=C(),q(a.$$.fragment),f=C(),q(d.$$.fragment),h=C(),_=g("p"),S=C(),b=g("div"),q(E.$$.fragment),j=C(),I=g("div"),q(A.$$.fragment),M=C(),q(D.$$.fragment),J=C(),q(W.$$.fragment),G=C(),q(K.$$.fragment),U=C(),q(L.$$.fragment),F=C(),q(Z.$$.fragment),B=C(),q(oe.$$.fragment),te=C(),q(ue.$$.fragment),ae=C(),q($e.$$.fragment),je=C(),Pe=g("p"),ze=O(Te),ee=C(),ce=g("div"),q(He.$$.fragment),Be=C(),q(Ee.$$.fragment),ve=C(),Tt&&Tt.c(),k(_,"class","help"),k(I,"class","flex-basis-30"),k(b,"class","inputs-side-by-side"),k(ce,"class","form-actions"),k(o,"method","post"),k(i,"class","main")},m(le,Me){z(e,le,Me),w(le,n,Me),w(le,i,Me),u(i,o),z(r,o,null),u(o,l),z(a,o,null),u(o,f),z(d,o,null),u(o,h),u(o,_),_.innerHTML=m,u(o,S),u(o,b),z(E,b,null),u(b,j),u(b,I),z(A,I,null),u(o,M),z(D,o,null),u(o,J),z(W,o,null),u(o,G),z(K,o,null),u(o,U),z(L,o,null),u(o,F),z(Z,o,null),u(o,B),z(oe,o,null),u(o,te),z(ue,o,null),u(o,ae),z($e,o,null),u(o,je),u(o,Pe),u(Pe,ze),u(o,ee),u(o,ce),z(He,ce,null),u(o,Be),z(Ee,o,null),u(i,ve),Tt&&Tt.m(i,null),ne=!0,pe||(ke=Ce(o,"submit",st(t[8])),pe=!0)},p(le,[Me]){const wn={};Me&536870916&&(wn.$$scope={dirty:Me,ctx:le}),e.$set(wn);const nn={};Me&536870916&&(nn.$$scope={dirty:Me,ctx:le}),!s&&Me&1&&(s=!0,nn.value=le[0].email,me(()=>s=!1)),r.$set(nn);const on={};Me&4&&(on.placeholder=le[2]("whatever, keywords")),Me&536870916&&(on.$$scope={dirty:Me,ctx:le}),!c&&Me&1&&(c=!0,on.value=le[0].highlightKeywords,me(()=>c=!1)),a.$set(on);const rn={};Me&536870916&&(rn.$$scope={dirty:Me,ctx:le}),!p&&Me&1&&(p=!0,rn.value=le[0].wantNotifications,me(()=>p=!1)),d.$set(rn),(!ne||Me&8)&&m!==(m=le[3]('Leave this unchecked, and hit "Save" to disable notifications.')+"")&&(_.innerHTML=m);const kn={};Me&536870916&&(kn.$$scope={dirty:Me,ctx:le}),!N&&Me&1&&(N=!0,kn.value=le[0].volume,me(()=>N=!1)),E.$set(kn);const sn={};Me&1&&(sn.disabled=!parseInt(le[0].volume,10)),Me&536870916&&(sn.$$scope={dirty:Me,ctx:le}),A.$set(sn);const ln={};Me&536870916&&(ln.$$scope={dirty:Me,ctx:le}),!P&&Me&1&&(P=!0,ln.value=le[0].ignoreStatuses,me(()=>P=!1)),D.$set(ln);const yn={};Me&536870916&&(yn.$$scope={dirty:Me,ctx:le}),!T&&Me&1&&(T=!0,yn.value=le[0].expandUrlToMedia,me(()=>T=!1)),W.$set(yn);const Sn={};Me&536870916&&(Sn.$$scope={dirty:Me,ctx:le}),!Q&&Me&1&&(Q=!0,Sn.value=le[0].compactDisplay,me(()=>Q=!1)),K.$set(Sn);const an={};Me&536870916&&(an.$$scope={dirty:Me,ctx:le}),!V&&Me&1&&(V=!0,an.value=le[0].activeTheme,me(()=>V=!1)),L.$set(an);const cn={};Me&2&&(cn.readonly=le[1]),Me&536870916&&(cn.$$scope={dirty:Me,ctx:le}),!Y&&Me&1&&(Y=!0,cn.value=le[0].colorScheme,me(()=>Y=!1)),Z.$set(cn);const En={};Me&16&&(En.options=le[4].languageOptions),Me&536870916&&(En.$$scope={dirty:Me,ctx:le}),!fe&&Me&1&&(fe=!0,En.value=le[0].lang,me(()=>fe=!1)),oe.$set(En);const un={};Me&536870916&&(un.$$scope={dirty:Me,ctx:le}),!Ne&&Me&1&&(Ne=!0,un.value=le[0].password,me(()=>Ne=!1)),ue.$set(un);const fn={};Me&536870916&&(fn.$$scope={dirty:Me,ctx:le}),!De&&Me&1&&(De=!0,fn.value=le[0].password_again,me(()=>De=!1)),$e.$set(fn),(!ne||Me&4)&&Te!==(Te=le[2]("Leave the password fields empty to keep the current password.")+"")&&R(ze,Te);const Wn={};Me&536870916&&(Wn.$$scope={dirty:Me,ctx:le}),He.$set(Wn),le[5]&&Tt.p(le,Me)},i(le){ne||(v(e.$$.fragment,le),v(r.$$.fragment,le),v(a.$$.fragment,le),v(d.$$.fragment,le),v(E.$$.fragment,le),v(A.$$.fragment,le),v(D.$$.fragment,le),v(W.$$.fragment,le),v(K.$$.fragment,le),v(L.$$.fragment,le),v(Z.$$.fragment,le),v(oe.$$.fragment,le),v(ue.$$.fragment,le),v($e.$$.fragment,le),v(He.$$.fragment,le),v(Ee.$$.fragment,le),v(Tt),ne=!0)},o(le){y(e.$$.fragment,le),y(r.$$.fragment,le),y(a.$$.fragment,le),y(d.$$.fragment,le),y(E.$$.fragment,le),y(A.$$.fragment,le),y(D.$$.fragment,le),y(W.$$.fragment,le),y(K.$$.fragment,le),y(L.$$.fragment,le),y(Z.$$.fragment,le),y(oe.$$.fragment,le),y(ue.$$.fragment,le),y($e.$$.fragment,le),y(He.$$.fragment,le),y(Ee.$$.fragment,le),y(Tt),ne=!1},d(le){le&&($(n),$(i)),H(e,le),H(r),H(a),H(d),H(E),H(A),H(D),H(W),H(K),H(L),H(Z),H(oe),H(ue),H($e),H(He),H(Ee),Tt&&Tt.d(),pe=!1,ke()}}}function Wb(t,e,n){let i,o,r,s,l;we(t,lt,U=>n(2,o=U)),we(t,jt,U=>n(3,s=U)),we(t,tt,U=>n(4,l=U));const a="Account",c="registerProtocolHandler"in navigator,f=mt("themeManager");we(t,f,U=>n(10,r=U));const d=mt("user"),p=nt.op("updateUser");let h={};zt(()=>{n(0,h={activeTheme:f.activeTheme,colorScheme:f.colorScheme,compactDisplay:f.compactDisplay,email:d.email,expandUrlToMedia:d.expandUrlToMedia,highlightKeywords:d.highlightKeywords.join(", "),ignoreStatuses:d.ignoreStatuses,lang:tt.lang,password:"",password_again:"",volume:bt.volume,wantNotifications:bt.wantNotifications})}),Rr(bt.on("update",(U,L)=>{!L.wantNotifications&&!L.desktopAccess||U.wantNotifications&&U.show(o("You have enabled notifications."))}));function _(U){navigator.registerProtocolHandler(U,Re.urlFor("/register?uri=%s"),o("Convos %1 handler",U))}function m(){const U=[h.password,h.password_again];if(U.join("").length&&U[0]!==U[1])return p.error("Passwords does not match.");h.wantNotifications||n(0,h.wantNotifications=!1,h),h.wantNotifications&&bt.requestDesktopAccess(),bt.update(h),i&&n(0,h.colorScheme="auto",h),f.update(h);const L=Pr(h.highlightKeywords),V={email:d.email,highlight_keywords:L};U[0]&&(V.password=U[0]),d.update(h).update({highlightKeywords:L}),p.perform(V)}function S(U){_i.call(this,t,U)}function b(U){t.$$.not_equal(h.email,U)&&(h.email=U,n(0,h))}function E(U){t.$$.not_equal(h.highlightKeywords,U)&&(h.highlightKeywords=U,n(0,h))}function N(U){t.$$.not_equal(h.wantNotifications,U)&&(h.wantNotifications=U,n(0,h))}function j(U){t.$$.not_equal(h.volume,U)&&(h.volume=U,n(0,h))}const I=()=>bt.play({volume:h.volume});function A(U){t.$$.not_equal(h.ignoreStatuses,U)&&(h.ignoreStatuses=U,n(0,h))}function M(U){t.$$.not_equal(h.expandUrlToMedia,U)&&(h.expandUrlToMedia=U,n(0,h))}function D(U){t.$$.not_equal(h.compactDisplay,U)&&(h.compactDisplay=U,n(0,h))}function P(U){t.$$.not_equal(h.activeTheme,U)&&(h.activeTheme=U,n(0,h))}function J(U){t.$$.not_equal(h.colorScheme,U)&&(h.colorScheme=U,n(0,h))}function W(U){t.$$.not_equal(h.lang,U)&&(h.lang=U,n(0,h))}function T(U){t.$$.not_equal(h.password,U)&&(h.password=U,n(0,h))}function G(U){t.$$.not_equal(h.password_again,U)&&(h.password_again=U,n(0,h))}function K(U){t.$$.not_equal(h.handle_protocol_irc,U)&&(h.handle_protocol_irc=U,n(0,h))}function Q(U){t.$$.not_equal(h.handle_protocol_ircs,U)&&(h.handle_protocol_ircs=U,n(0,h))}return t.$$.update=()=>{t.$$.dirty&1025&&n(1,i=!r.hasColorScheme(h.activeTheme)),t.$$.dirty&1&&tt.load(h.lang),t.$$.dirty&1&&h.handle_protocol_irc&&_("irc"),t.$$.dirty&1&&h.handle_protocol_ircs&&_("ircs")},[h,i,o,s,l,c,f,p,m,a,r,S,b,E,N,j,I,A,M,D,P,J,W,T,G,K,Q]}class Gb extends Xe{constructor(e){super(),Qe(this,e,Wb,qb,Ze,{title:9})}get title(){return this.$$.ctx[9]}}function Kb(t){let e,n=t[5]("Global settings")+"",i;return{c(){e=g("h1"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&32&&n!==(n=o[5]("Global settings")+"")&&R(i,n)},d(o){o&&$(e)}}}function Yb(t){let e,n=t[5]("Organization name")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&32&&n!==(n=o[5]("Organization name")+"")&&R(i,n)},d(o){o&&$(e)}}}function Vb(t){let e,n=t[5]("Can be changed if you want to add a touch of your organization.")+"",i;return{c(){e=g("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&32&&n!==(n=o[5]("Can be changed if you want to add a touch of your organization.")+"")&&R(i,n)},d(o){o&&$(e)}}}function Zb(t){let e,n=t[5]("Organization URL")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&32&&n!==(n=o[5]("Organization URL")+"")&&R(i,n)},d(o){o&&$(e)}}}function Jb(t){let e,n=t[5]('Used together with "Organization name" to add a link to your organization on the login screen.')+"",i;return{c(){e=g("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&32&&n!==(n=o[5]('Used together with "Organization name" to add a link to your organization on the login screen.')+"")&&R(i,n)},d(o){o&&$(e)}}}function Qb(t){let e,n=t[5]("Admin email")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&32&&n!==(n=o[5]("Admin email")+"")&&R(i,n)},d(o){o&&$(e)}}}function Xb(t){let e,n=t[5]("This email can be used by users to get in touch with the Convos admin.")+"",i;return{c(){e=g("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&32&&n!==(n=o[5]("This email can be used by users to get in touch with the Convos admin.")+"")&&R(i,n)},d(o){o&&$(e)}}}function xb(t){let e,n=t[5]("Video service")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&32&&n!==(n=o[5]("Video service")+"")&&R(i,n)},d(o){o&&$(e)}}}function ev(t){let e,n=t[6]("This should point to a [%1](%2) instance.","https://meet.jit.si/","https://github.com/jitsi/jitsi-meet")+"";return{c(){e=g("p"),k(e,"class","help"),k(e,"slot","help")},m(i,o){w(i,e,o),e.innerHTML=n},p(i,o){o&64&&n!==(n=i[6]("This should point to a [%1](%2) instance.","https://meet.jit.si/","https://github.com/jitsi/jitsi-meet")+"")&&(e.innerHTML=n)},d(i){i&&$(e)}}}function tv(t){let e,n=t[5]("Registration is open to public")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&32&&n!==(n=o[5]("Registration is open to public")+"")&&R(i,n)},d(o){o&&$(e)}}}function nv(t){let e,n=t[5]("Save settings")+"",i;return{c(){e=g("span"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&32&&n!==(n=o[5]("Save settings")+"")&&R(i,n)},d(o){o&&$(e)}}}function iv(t){let e,n=t[6]("You currently have Convos v%1 installed.",Ve("version"))+"",i;return{c(){e=g("p"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&64&&n!==(n=o[6]("You currently have Convos v%1 installed.",Ve("version"))+"")&&R(i,n)},d(o){o&&$(e)}}}function ov(t){let e,n=t[6](t[4]?"You have Convos v%1, which is the latest version.":"Convos v%1 is available.",t[0])+"",i;return{c(){e=g("p"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&81&&n!==(n=o[6](o[4]?"You have Convos v%1, which is the latest version.":"Convos v%1 is available.",o[0])+"")&&R(i,n)},d(o){o&&$(e)}}}function rv(t){let e,n=t[5](t[1].error())+"",i;return{c(){e=g("div"),i=O(n),k(e,"class","error")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&34&&n!==(n=o[5](o[1].error())+"")&&R(i,n)},d(o){o&&$(e)}}}function sv(t){let e,n=t[5]("Check for updates")+"",i;return{c(){e=g("span"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&32&&n!==(n=o[5]("Check for updates")+"")&&R(i,n)},d(o){o&&$(e)}}}function ma(t){let e,n,i=t[5]("Disk usage")+"",o,r,s,l,a=t[2].blocks_pct+"",c,f,d,p,h=t[5]("Disk usage")+"",_,m,S=t[2].blocks_used+"",b,E,N=t[2].blocks_total+"",j,I,A,M,D=t[2].inodes_pct+"",P,J,W,T,G=t[5]("Inode usage")+"",K,Q,U=t[2].inodes_used+"",L,V,F=t[2].inodes_total+"",Z;return{c(){e=g("div"),n=g("h2"),o=O(i),r=C(),s=g("div"),l=g("div"),c=O(a),f=O("%"),d=C(),p=g("p"),_=O(h),m=O(": "),b=O(S),E=O(" / "),j=O(N),I=C(),A=g("div"),M=g("div"),P=O(D),J=O("%"),W=C(),T=g("p"),K=O(G),Q=O(": "),L=O(U),V=O(" / "),Z=O(F),k(l,"class","progress__bar"),Ut(l,"width",t[2].blocks_pct+"%"),k(s,"class","progress"),k(p,"class","help"),k(M,"class","progress__bar"),Ut(M,"width",t[2].inodes_pct+"%"),k(A,"class","progress"),k(T,"class","help"),k(e,"id","disk-usage")},m(Y,B){w(Y,e,B),u(e,n),u(n,o),u(e,r),u(e,s),u(s,l),u(l,c),u(l,f),u(e,d),u(e,p),u(p,_),u(p,m),u(p,b),u(p,E),u(p,j),u(e,I),u(e,A),u(A,M),u(M,P),u(M,J),u(e,W),u(e,T),u(T,K),u(T,Q),u(T,L),u(T,V),u(T,Z)},p(Y,B){B&32&&i!==(i=Y[5]("Disk usage")+"")&&R(o,i),B&4&&a!==(a=Y[2].blocks_pct+"")&&R(c,a),B&4&&Ut(l,"width",Y[2].blocks_pct+"%"),B&32&&h!==(h=Y[5]("Disk usage")+"")&&R(_,h),B&4&&S!==(S=Y[2].blocks_used+"")&&R(b,S),B&4&&N!==(N=Y[2].blocks_total+"")&&R(j,N),B&4&&D!==(D=Y[2].inodes_pct+"")&&R(P,D),B&4&&Ut(M,"width",Y[2].inodes_pct+"%"),B&32&&G!==(G=Y[5]("Inode usage")+"")&&R(K,G),B&4&&U!==(U=Y[2].inodes_used+"")&&R(L,U),B&4&&F!==(F=Y[2].inodes_total+"")&&R(Z,F)},d(Y){Y&&$(e)}}}function lv(t){let e,n,i,o,r,s=t[5]("Convos settings")+"",l,a,c,f=t[6]("These settings control what users experience when they visit [%1](%1).",Ve("base_url"))+"",d,p,h,_,m,S,b,E,N,j,I,A,M,D,P,J,W,T=t[5]("Tick this box if you want users to be able to register without an invite URL.")+"",G,K,Q,U,L,V,F,Z,Y=t[5]("Check for updates")+"",B,oe,fe,te,ue,Ne,ae,$e,De,je,Pe;e=new Ft({props:{$$slots:{default:[Kb]},$$scope:{ctx:t}}});function Te(x){t[11](x)}let ze={name:"organization_name",$$slots:{help:[Vb],label:[Yb]},$$scope:{ctx:t}};t[3].organization_name!==void 0&&(ze.value=t[3].organization_name),p=new Je({props:ze}),de.push(()=>ge(p,"value",Te));function ee(x){t[12](x)}let ce={name:"organization_url",placeholder:t[5]("https://convos.chat"),$$slots:{help:[Jb],label:[Zb]},$$scope:{ctx:t}};t[3].organization_url!==void 0&&(ce.value=t[3].organization_url),m=new Je({props:ce}),de.push(()=>ge(m,"value",ee));function He(x){t[13](x)}let Be={name:"contact",placeholder:t[5]("Ex: jhthorsen@cpan.org"),$$slots:{help:[Xb],label:[Qb]},$$scope:{ctx:t}};t[3].contact!==void 0&&(Be.value=t[3].contact),E=new Je({props:Be}),de.push(()=>ge(E,"value",He));function Ee(x){t[14](x)}let ve={name:"video_service",placeholder:t[5]("Ex: https://meet.jit.si/"),$$slots:{help:[ev],label:[xb]},$$scope:{ctx:t}};t[3].video_service!==void 0&&(ve.value=t[3].video_service),I=new Je({props:ve}),de.push(()=>ge(I,"value",Ee));function ne(x){t[15](x)}let pe={name:"open_to_public",$$slots:{label:[tv]},$$scope:{ctx:t}};t[3].open_to_public!==void 0&&(pe.value=t[3].open_to_public),D=new it({props:pe}),de.push(()=>ge(D,"value",ne)),U=new ft({props:{icon:"save",op:t[8],$$slots:{default:[nv]},$$scope:{ctx:t}}}),V=new Lt({props:{op:t[8]}});function ke(x,X){return X&2&&(te=null),X&2&&(ue=null),te==null&&(te=!!x[1].is("error")),te?rv:(ue==null&&(ue=!!x[1].is("success")),ue?ov:iv)}let se=ke(t,-1),be=se(t);ae=new ft({props:{icon:"sync-alt",op:t[7],$$slots:{default:[sv]},$$scope:{ctx:t}}});let Le=t[2]&&ma(t);return{c(){q(e.$$.fragment),n=C(),i=g("main"),o=g("form"),r=g("h2"),l=O(s),a=C(),c=g("p"),d=C(),q(p.$$.fragment),_=C(),q(m.$$.fragment),b=C(),q(E.$$.fragment),j=C(),q(I.$$.fragment),M=C(),q(D.$$.fragment),J=C(),W=g("p"),G=O(T),K=C(),Q=g("div"),q(U.$$.fragment),L=C(),q(V.$$.fragment),F=C(),Z=g("h2"),B=O(Y),oe=C(),fe=g("form"),be.c(),Ne=C(),q(ae.$$.fragment),$e=C(),Le&&Le.c(),k(W,"class","help"),k(Q,"class","form-actions"),k(o,"id","convos-settings"),k(o,"method","post"),k(fe,"id","convos-updates"),k(fe,"method","post"),k(i,"class","main")},m(x,X){z(e,x,X),w(x,n,X),w(x,i,X),u(i,o),u(o,r),u(r,l),u(o,a),u(o,c),c.innerHTML=f,u(o,d),z(p,o,null),u(o,_),z(m,o,null),u(o,b),z(E,o,null),u(o,j),z(I,o,null),u(o,M),z(D,o,null),u(o,J),u(o,W),u(W,G),u(o,K),u(o,Q),z(U,Q,null),u(o,L),z(V,o,null),u(i,F),u(i,Z),u(Z,B),u(i,oe),u(i,fe),be.m(fe,null),u(fe,Ne),z(ae,fe,null),u(i,$e),Le&&Le.m(i,null),De=!0,je||(Pe=[Ce(o,"submit",st(t[9])),Ce(fe,"submit",st(t[16]))],je=!0)},p(x,[X]){const ie={};X&524320&&(ie.$$scope={dirty:X,ctx:x}),e.$set(ie),(!De||X&32)&&s!==(s=x[5]("Convos settings")+"")&&R(l,s),(!De||X&64)&&f!==(f=x[6]("These settings control what users experience when they visit [%1](%1).",Ve("base_url"))+"")&&(c.innerHTML=f);const re={};X&524320&&(re.$$scope={dirty:X,ctx:x}),!h&&X&8&&(h=!0,re.value=x[3].organization_name,me(()=>h=!1)),p.$set(re);const _e={};X&32&&(_e.placeholder=x[5]("https://convos.chat")),X&524320&&(_e.$$scope={dirty:X,ctx:x}),!S&&X&8&&(S=!0,_e.value=x[3].organization_url,me(()=>S=!1)),m.$set(_e);const qe={};X&32&&(qe.placeholder=x[5]("Ex: jhthorsen@cpan.org")),X&524320&&(qe.$$scope={dirty:X,ctx:x}),!N&&X&8&&(N=!0,qe.value=x[3].contact,me(()=>N=!1)),E.$set(qe);const Ue={};X&32&&(Ue.placeholder=x[5]("Ex: https://meet.jit.si/")),X&524384&&(Ue.$$scope={dirty:X,ctx:x}),!A&&X&8&&(A=!0,Ue.value=x[3].video_service,me(()=>A=!1)),I.$set(Ue);const rt={};X&524320&&(rt.$$scope={dirty:X,ctx:x}),!P&&X&8&&(P=!0,rt.value=x[3].open_to_public,me(()=>P=!1)),D.$set(rt),(!De||X&32)&&T!==(T=x[5]("Tick this box if you want users to be able to register without an invite URL.")+"")&&R(G,T);const Et={};X&524320&&(Et.$$scope={dirty:X,ctx:x}),U.$set(Et),(!De||X&32)&&Y!==(Y=x[5]("Check for updates")+"")&&R(B,Y),se===(se=ke(x,X))&&be?be.p(x,X):(be.d(1),be=se(x),be&&(be.c(),be.m(fe,Ne)));const Pt={};X&524320&&(Pt.$$scope={dirty:X,ctx:x}),ae.$set(Pt),x[2]?Le?Le.p(x,X):(Le=ma(x),Le.c(),Le.m(i,null)):Le&&(Le.d(1),Le=null)},i(x){De||(v(e.$$.fragment,x),v(p.$$.fragment,x),v(m.$$.fragment,x),v(E.$$.fragment,x),v(I.$$.fragment,x),v(D.$$.fragment,x),v(U.$$.fragment,x),v(V.$$.fragment,x),v(ae.$$.fragment,x),De=!0)},o(x){y(e.$$.fragment,x),y(p.$$.fragment,x),y(m.$$.fragment,x),y(E.$$.fragment,x),y(I.$$.fragment,x),y(D.$$.fragment,x),y(U.$$.fragment,x),y(V.$$.fragment,x),y(ae.$$.fragment,x),De=!1},d(x){x&&($(n),$(i)),H(e,x),H(p),H(m),H(E),H(I),H(D),H(U),H(V),be.d(),H(ae),Le&&Le.d(),je=!1,ut(Pe)}}}function av(t,e,n){let i,o,r,s,l;we(t,lt,A=>n(5,s=A)),we(t,jt,A=>n(6,l=A));const a="Global settings",c=nt.op("checkForUpdates");we(t,c,A=>n(1,r=A));const f=nt.op("getSettings"),d=nt.op("updateSettings");let p=null,h={};zt(async()=>{await f.perform();const A=f.res.body;n(2,p=_(A.disk_usage)),delete A.disk_usage,A.contact=A.contact.replace(/mailto:/,""),n(3,h={...h,...A})});function _(A){if(!A)return null;const M=A.block_size||1024;return{blocks_pct:Math.ceil(A.blocks_used/A.blocks_total*100),blocks_total:ni(M*A.blocks_total,"B"),blocks_used:ni(M*A.blocks_used,"B"),inodes_pct:Math.ceil(A.inodes_used/A.inodes_total*100),inodes_total:ni(A.inodes_total),inodes_used:ni(A.inodes_used)}}function m(){h.contact&&h.contact.indexOf("@")>0&&n(3,h.contact="mailto:"+h.contact,h),Ve("contact",h.contact),Ve("open_to_public",h.open_to_public),Ve("organization_name",h.organization_name),Ve("organization_url",h.organization_url),ko.fromString(h.video_service),d.perform(h),n(3,h.contact=h.contact.replace(/mailto:/,""),h)}function S(A){t.$$.not_equal(h.organization_name,A)&&(h.organization_name=A,n(3,h))}function b(A){t.$$.not_equal(h.organization_url,A)&&(h.organization_url=A,n(3,h))}function E(A){t.$$.not_equal(h.contact,A)&&(h.contact=A,n(3,h))}function N(A){t.$$.not_equal(h.video_service,A)&&(h.video_service=A,n(3,h))}function j(A){t.$$.not_equal(h.open_to_public,A)&&(h.open_to_public=A,n(3,h))}const I=()=>c.perform();return t.$$.update=()=>{t.$$.dirty&2&&n(0,i=r.res.body.available),t.$$.dirty&1&&n(4,o=i===Ve("version"))},[i,r,p,h,o,s,l,c,d,m,a,S,b,E,N,j,I]}class cv extends Xe{constructor(e){super(),Qe(this,e,av,lv,Ze,{title:10})}get title(){return this.$$.ctx[10]}}function ga(t,e,n){const i=t.slice();return i[25]=e[n],i}function uv(t){let e,n,i,o,r=Nt(t[4]("See all users"))+"",s,l;return e=new he({props:{name:"list"}}),n=new he({props:{name:"times"}}),{c(){q(e.$$.fragment),q(n.$$.fragment),i=C(),o=g("span"),s=O(r),k(o,"class","tooltip is-left")},m(a,c){z(e,a,c),z(n,a,c),w(a,i,c),w(a,o,c),u(o,s),l=!0},p(a,c){(!l||c&16)&&r!==(r=Nt(a[4]("See all users"))+"")&&R(s,r)},i(a){l||(v(e.$$.fragment,a),v(n.$$.fragment,a),l=!0)},o(a){y(e.$$.fragment,a),y(n.$$.fragment,a),l=!1},d(a){a&&($(i),$(o)),H(e,a),H(n,a)}}}function fv(t){let e,n=t[4](t[0].uid?"Account":"Users")+"",i,o,r,s;return r=new Ge({props:{href:"/settings/users",class:"btn-hallow can-toggle has-tooltip "+(t[0].uid?"is-active":""),$$slots:{default:[uv]},$$scope:{ctx:t}}}),{c(){e=g("h1"),i=O(n),o=C(),q(r.$$.fragment)},m(l,a){w(l,e,a),u(e,i),w(l,o,a),z(r,l,a),s=!0},p(l,a){(!s||a&17)&&n!==(n=l[4](l[0].uid?"Account":"Users")+"")&&R(i,n);const c={};a&1&&(c.class="btn-hallow can-toggle has-tooltip "+(l[0].uid?"is-active":"")),a&268435472&&(c.$$scope={dirty:a,ctx:l}),r.$set(c)},i(l){s||(v(r.$$.fragment,l),s=!0)},o(l){y(r.$$.fragment,l),s=!1},d(l){l&&($(e),$(o)),H(r,l)}}}function pv(t){let e,n,i=t[4]("Invite or recover password")+"",o,r,s,l,a,c,f,d,p,h,_,m,S=t[4]("Users")+"",b,E,N,j,I=t[1].length+"",A,M,D,P,J,W,T,G=t[4]("Email")+"",K,Q,U,L=t[4]("Roles")+"",V,F,Z,Y=t[4]("Registered")+"",B,oe,fe,te,ue,Ne,ae,$e;function De(ee){t[22](ee)}let je={type:"email",name:"email",placeholder:t[4]("user@example.com"),$$slots:{help:[_v],label:[hv]},$$scope:{ctx:t}};t[0].email!==void 0&&(je.value=t[0].email),s=new Je({props:je}),de.push(()=>ge(s,"value",De));let Pe=t[3].url&&ba(t);d=new ft({props:{icon:"save",op:t[9],disabled:!t[0].email,$$slots:{default:[mv]},$$scope:{ctx:t}}}),h=new Lt({props:{op:t[9],success:"Link generated."}}),te=new Mo({props:{colspan:"3",op:t[6]}});let Te=xe(t[1]),ze=[];for(let ee=0;ee<Te.length;ee+=1)ze[ee]=va(ga(t,Te,ee));return{c(){e=g("form"),n=g("h2"),o=O(i),r=C(),q(s.$$.fragment),a=C(),Pe&&Pe.c(),c=C(),f=g("div"),q(d.$$.fragment),p=C(),q(h.$$.fragment),_=C(),m=g("h2"),b=O(S),E=C(),N=g("small"),j=O("("),A=O(I),M=O(")"),D=C(),P=g("table"),J=g("thead"),W=g("tr"),T=g("th"),K=O(G),Q=C(),U=g("th"),V=O(L),F=C(),Z=g("th"),B=O(Y),oe=C(),fe=g("tbody"),q(te.$$.fragment),ue=C();for(let ee=0;ee<ze.length;ee+=1)ze[ee].c();k(f,"class","form-actions"),k(e,"id","invite"),k(e,"method","post")},m(ee,ce){w(ee,e,ce),u(e,n),u(n,o),u(e,r),z(s,e,null),u(e,a),Pe&&Pe.m(e,null),u(e,c),u(e,f),z(d,f,null),u(e,p),z(h,e,null),w(ee,_,ce),w(ee,m,ce),u(m,b),u(m,E),u(m,N),u(N,j),u(N,A),u(N,M),w(ee,D,ce),w(ee,P,ce),u(P,J),u(J,W),u(W,T),u(T,K),u(W,Q),u(W,U),u(U,V),u(W,F),u(W,Z),u(Z,B),u(P,oe),u(P,fe),z(te,fe,null),u(fe,ue);for(let He=0;He<ze.length;He+=1)ze[He]&&ze[He].m(fe,null);Ne=!0,ae||($e=Ce(e,"submit",st(t[13])),ae=!0)},p(ee,ce){(!Ne||ce&16)&&i!==(i=ee[4]("Invite or recover password")+"")&&R(o,i);const He={};ce&16&&(He.placeholder=ee[4]("user@example.com")),ce&268435472&&(He.$$scope={dirty:ce,ctx:ee}),!l&&ce&1&&(l=!0,He.value=ee[0].email,me(()=>l=!1)),s.$set(He),ee[3].url?Pe?Pe.p(ee,ce):(Pe=ba(ee),Pe.c(),Pe.m(e,c)):Pe&&(Pe.d(1),Pe=null);const Be={};ce&1&&(Be.disabled=!ee[0].email),ce&268435472&&(Be.$$scope={dirty:ce,ctx:ee}),d.$set(Be),(!Ne||ce&16)&&S!==(S=ee[4]("Users")+"")&&R(b,S),(!Ne||ce&2)&&I!==(I=ee[1].length+"")&&R(A,I),(!Ne||ce&16)&&G!==(G=ee[4]("Email")+"")&&R(K,G),(!Ne||ce&16)&&L!==(L=ee[4]("Roles")+"")&&R(V,L),(!Ne||ce&16)&&Y!==(Y=ee[4]("Registered")+"")&&R(B,Y);const Ee={};if(ce&64&&(Ee.op=ee[6]),te.$set(Ee),ce&2){Te=xe(ee[1]);let ve;for(ve=0;ve<Te.length;ve+=1){const ne=ga(ee,Te,ve);ze[ve]?ze[ve].p(ne,ce):(ze[ve]=va(ne),ze[ve].c(),ze[ve].m(fe,null))}for(;ve<ze.length;ve+=1)ze[ve].d(1);ze.length=Te.length}},i(ee){Ne||(v(s.$$.fragment,ee),v(d.$$.fragment,ee),v(h.$$.fragment,ee),v(te.$$.fragment,ee),Ne=!0)},o(ee){y(s.$$.fragment,ee),y(d.$$.fragment,ee),y(h.$$.fragment,ee),y(te.$$.fragment,ee),Ne=!1},d(ee){ee&&($(e),$(_),$(m),$(D),$(P)),H(s),Pe&&Pe.d(),H(d),H(h),H(te),yt(ze,ee),ae=!1,$e()}}}function dv(t){let e,n,i,o,r,s,l,a,c,f,d,p,h,_,m,S,b,E,N=t[4]("This will permanently remove user settings, chat logs, uploaded files and other user related data.")+"",j,I,A,M=t[5]('Please confirm by entering "**%1**" before hitting **%2**.',t[0].email,t[4]("Delete user"))+"",D,P,J,W,T,G,K,Q,U,L,V;function F(te){t[19](te)}let Z={name:"email",readonly:!0,$$slots:{label:[gv]},$$scope:{ctx:t}};t[0].email!==void 0&&(Z.value=t[0].email),o=new Je({props:Z}),de.push(()=>ge(o,"value",F));function Y(te){t[20](te)}let B={name:"roles",placeholder:t[4]("admin, bot, ..."),$$slots:{help:[vv],label:[bv]},$$scope:{ctx:t}};t[0].roles!==void 0&&(B.value=t[0].roles),l=new Je({props:B}),de.push(()=>ge(l,"value",Y)),d=new ft({props:{icon:"save",op:t[10],$$slots:{default:[$v]},$$scope:{ctx:t}}}),h=new Lt({props:{op:t[10]}});function oe(te){t[21](te)}let fe={name:"confirm_email",$$slots:{label:[wv]},$$scope:{ctx:t}};return t[2]!==void 0&&(fe.value=t[2]),P=new Je({props:fe}),de.push(()=>ge(P,"value",oe)),G=new ft({props:{icon:"trash",op:t[7],disabled:t[2]!==t[0].email,$$slots:{default:[kv]},$$scope:{ctx:t}}}),Q=new Lt({props:{op:t[7],success:"Deleted."}}),{c(){e=g("form"),n=g("input"),i=C(),q(o.$$.fragment),s=C(),q(l.$$.fragment),c=C(),f=g("div"),q(d.$$.fragment),p=C(),q(h.$$.fragment),_=C(),m=g("h2"),m.textContent="Delete account",S=C(),b=g("form"),E=g("p"),j=O(N),I=C(),A=new Rt(!1),D=C(),q(P.$$.fragment),W=C(),T=g("div"),q(G.$$.fragment),K=C(),q(Q.$$.fragment),k(n,"type","hidden"),k(n,"name","uid"),k(f,"class","form-actions"),k(e,"id","edit"),k(e,"method","post"),A.a=null,k(T,"class","form-actions"),k(b,"id","delete"),k(b,"method","post")},m(te,ue){w(te,e,ue),u(e,n),Ot(n,t[0].uid),u(e,i),z(o,e,null),u(e,s),z(l,e,null),u(e,c),u(e,f),z(d,f,null),u(e,p),z(h,e,null),w(te,_,ue),w(te,m,ue),w(te,S,ue),w(te,b,ue),u(b,E),u(E,j),u(E,I),A.m(M,E),u(b,D),z(P,b,null),u(b,W),u(b,T),z(G,T,null),u(b,K),z(Q,b,null),U=!0,L||(V=[Ce(n,"input",t[18]),Ce(e,"submit",st(t[14])),Ce(b,"submit",st(t[12]))],L=!0)},p(te,ue){ue&1&&Ot(n,te[0].uid);const Ne={};ue&268435472&&(Ne.$$scope={dirty:ue,ctx:te}),!r&&ue&1&&(r=!0,Ne.value=te[0].email,me(()=>r=!1)),o.$set(Ne);const ae={};ue&16&&(ae.placeholder=te[4]("admin, bot, ...")),ue&268435472&&(ae.$$scope={dirty:ue,ctx:te}),!a&&ue&1&&(a=!0,ae.value=te[0].roles,me(()=>a=!1)),l.$set(ae);const $e={};ue&268435472&&($e.$$scope={dirty:ue,ctx:te}),d.$set($e),(!U||ue&16)&&N!==(N=te[4]("This will permanently remove user settings, chat logs, uploaded files and other user related data.")+"")&&R(j,N),(!U||ue&49)&&M!==(M=te[5]('Please confirm by entering "**%1**" before hitting **%2**.',te[0].email,te[4]("Delete user"))+"")&&A.p(M);const De={};ue&268435472&&(De.$$scope={dirty:ue,ctx:te}),!J&&ue&4&&(J=!0,De.value=te[2],me(()=>J=!1)),P.$set(De);const je={};ue&5&&(je.disabled=te[2]!==te[0].email),ue&268435472&&(je.$$scope={dirty:ue,ctx:te}),G.$set(je)},i(te){U||(v(o.$$.fragment,te),v(l.$$.fragment,te),v(d.$$.fragment,te),v(h.$$.fragment,te),v(P.$$.fragment,te),v(G.$$.fragment,te),v(Q.$$.fragment,te),U=!0)},o(te){y(o.$$.fragment,te),y(l.$$.fragment,te),y(d.$$.fragment,te),y(h.$$.fragment,te),y(P.$$.fragment,te),y(G.$$.fragment,te),y(Q.$$.fragment,te),U=!1},d(te){te&&($(e),$(_),$(m),$(S),$(b)),H(o),H(l),H(d),H(h),H(P),H(G),H(Q),L=!1,ut(V)}}}function hv(t){let e,n=t[4]("User email")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("User email")+"")&&R(i,n)},d(o){o&&$(e)}}}function _v(t){let e,n=t[4]("Using this form, you can generate a forgotten password or invite link for a user.")+"",i;return{c(){e=g("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Using this form, you can generate a forgotten password or invite link for a user.")+"")&&R(i,n)},d(o){o&&$(e)}}}function ba(t){let e,n=t[4]("A link was generated")+"",i,o,r,s,l=t[5](t[3].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"",a,c,f=t[5]("The link is valid until **%1**.",new Date(t[3].expires).toLocaleString())+"",d,p,h=t[3].url+"",_,m,S,b,E,N=t[4]("Tip: Clicking on the link will copy it to your clipboard.")+"",j,I,A;return{c(){e=g("h3"),i=O(n),o=C(),r=g("p"),s=new Rt(!1),a=C(),c=new Rt(!1),d=C(),p=g("a"),_=O(h),S=C(),b=g("p"),E=g("small"),j=O(N),s.a=a,c.a=null,k(p,"href",m=t[3].url)},m(M,D){w(M,e,D),u(e,i),w(M,o,D),w(M,r,D),s.m(l,r),u(r,a),c.m(f,r),w(M,d,D),w(M,p,D),u(p,_),w(M,S,D),w(M,b,D),u(b,E),u(E,j),I||(A=Ce(p,"click",st(t[11])),I=!0)},p(M,D){D&16&&n!==(n=M[4]("A link was generated")+"")&&R(i,n),D&40&&l!==(l=M[5](M[3].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"")&&s.p(l),D&40&&f!==(f=M[5]("The link is valid until **%1**.",new Date(M[3].expires).toLocaleString())+"")&&c.p(f),D&8&&h!==(h=M[3].url+"")&&R(_,h),D&8&&m!==(m=M[3].url)&&k(p,"href",m),D&16&&N!==(N=M[4]("Tip: Clicking on the link will copy it to your clipboard.")+"")&&R(j,N)},d(M){M&&($(e),$(o),$(r),$(d),$(p),$(S),$(b)),I=!1,A()}}}function mv(t){let e,n=t[4]("Generate link")+"",i;return{c(){e=g("span"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Generate link")+"")&&R(i,n)},d(o){o&&$(e)}}}function va(t){let e,n,i,o=t[25].email+"",r,s,l,a,c=t[25].roles.join(", ")+"",f,d,p,h=new $t(t[25].registered).getHumanDate({year:!0})+"",_,m;return{c(){e=g("tr"),n=g("td"),i=g("a"),r=O(o),l=C(),a=g("td"),f=O(c),d=C(),p=g("td"),_=O(h),m=C(),k(i,"href",s="#"+t[25].uid)},m(S,b){w(S,e,b),u(e,n),u(n,i),u(i,r),u(e,l),u(e,a),u(a,f),u(e,d),u(e,p),u(p,_),u(e,m)},p(S,b){b&2&&o!==(o=S[25].email+"")&&R(r,o),b&2&&s!==(s="#"+S[25].uid)&&k(i,"href",s),b&2&&c!==(c=S[25].roles.join(", ")+"")&&R(f,c),b&2&&h!==(h=new $t(S[25].registered).getHumanDate({year:!0})+"")&&R(_,h)},d(S){S&&$(e)}}}function gv(t){let e,n=t[4]("Email")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Email")+"")&&R(i,n)},d(o){o&&$(e)}}}function bv(t){let e,n=t[4]("Roles")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Roles")+"")&&R(i,n)},d(o){o&&$(e)}}}function vv(t){let e,n=t[4]("Roles must be separated by comma.")+"",i;return{c(){e=g("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Roles must be separated by comma.")+"")&&R(i,n)},d(o){o&&$(e)}}}function $v(t){let e,n=t[4]("Save user")+"",i;return{c(){e=g("span"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Save user")+"")&&R(i,n)},d(o){o&&$(e)}}}function wv(t){let e,n=t[4]("Confirm email")+"",i;return{c(){e=g("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Confirm email")+"")&&R(i,n)},d(o){o&&$(e)}}}function kv(t){let e,n=t[4]("Delete user")+"",i;return{c(){e=g("span"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&16&&n!==(n=o[4]("Delete user")+"")&&R(i,n)},d(o){o&&$(e)}}}function yv(t){let e,n,i,o,r,s;e=new Ft({props:{$$slots:{default:[fv]},$$scope:{ctx:t}}});const l=[dv,pv],a=[];function c(f,d){return f[0].uid?0:1}return o=c(t),r=a[o]=l[o](t),{c(){q(e.$$.fragment),n=C(),i=g("main"),r.c(),k(i,"class","main")},m(f,d){z(e,f,d),w(f,n,d),w(f,i,d),a[o].m(i,null),s=!0},p(f,[d]){const p={};d&268435473&&(p.$$scope={dirty:d,ctx:f}),e.$set(p);let h=o;o=c(f),o===h?a[o].p(f,d):(ye(),y(a[h],1,1,()=>{a[h]=null}),Se(),r=a[o],r?r.p(f,d):(r=a[o]=l[o](f),r.c()),v(r,1),r.m(i,null))},i(f){s||(v(e.$$.fragment,f),v(r),s=!0)},o(f){y(e.$$.fragment,f),y(r),s=!1},d(f){f&&($(n),$(i)),H(e,f),a[o].d()}}}function Sv(t,e,n){let i,o,r,s,l,a;we(t,lt,T=>n(4,o=T)),we(t,Re,T=>n(17,s=T)),we(t,jt,T=>n(5,l=T));let{title:c="Users"}=e;const f=nt.op("deleteUser"),d=nt.op("getUsers");we(t,d,T=>n(6,a=T));const p=nt.op("inviteUser");we(t,p,T=>n(16,r=T));const h=nt.op("updateUser");let _="",m={email:""},S=[];zt(I);function b(T){const G=pc(T.target);G&&bt.showInApp(G,{title:o("Invite link copied")})}async function E(){f.reset(),h.reset(),_===m.email&&(await f.perform(m),f.is("success")&&(I(),Re.go("/settings/users",{replace:!0})))}function N(T,G){const K=T.hash,Q=K&&G.filter(U=>U.uid===K)[0];n(0,m=Q?{...m,confirm_email:"",...Q}:{...m,confirm_email:"",uid:""})}function j(){p.perform({email:m.email})}async function I(){await d.perform(),n(1,S=d.res.body.users||[]),d.reset()}function A(){f.reset(),h.perform({email:m.email,roles:Pr(m.roles)})}function M(){m.uid=this.value,n(0,m)}function D(T){t.$$.not_equal(m.email,T)&&(m.email=T,n(0,m))}function P(T){t.$$.not_equal(m.roles,T)&&(m.roles=T,n(0,m))}function J(T){_=T,n(2,_)}function W(T){t.$$.not_equal(m.email,T)&&(m.email=T,n(0,m))}return t.$$set=T=>{"title"in T&&n(15,c=T.title)},t.$$.update=()=>{t.$$.dirty&131074&&N(s,S),t.$$.dirty&65536&&n(3,i=r.res.body||{}),t.$$.dirty&1&&n(15,c=m.uid?m.email:"Users")},[m,S,_,i,o,l,a,f,d,p,h,b,E,j,A,c,r,s,M,D,P,J,W]}class Ev extends Xe{constructor(e){super(),Qe(this,e,Sv,yv,Ze,{title:15})}}function $a(t,e,n){const i=t.slice();return i[21]=e[n],i[22]=e,i[23]=n,i}function Cv(t){let e,n=t[6]("Files")+"",i;return{c(){e=g("h1"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&64&&n!==(n=o[6]("Files")+"")&&R(i,n)},d(o){o&&$(e)}}}function wa(t){let e,n,i=new $t(t[21].saved).getHumanDate({year:!0})+"",o,r,s,l,a,c,f,d,p=t[21].name+"",h,_,m,S,b=ni(t[21].size,"B")+"",E,N,j,I,A,M,D,P;a=new he({props:{name:"copy"}});function J(T){t[17](T,t[21])}let W={name:t[21].id};return t[21].selected!==void 0&&(W.value=t[21].selected),I=new it({props:W}),de.push(()=>ge(I,"value",J)),{c(){e=g("tr"),n=g("td"),o=O(i),r=C(),s=g("td"),l=g("a"),q(a.$$.fragment),c=C(),f=g("td"),d=g("a"),h=O(p),m=C(),S=g("td"),E=O(b),N=C(),j=g("td"),q(I.$$.fragment),k(l,"href","#copy"),k(d,"href",_=Re.urlFor("/file/"+t[11].id+"/"+t[21].id)),k(d,"target","convos_files_file"),k(S,"class","text-right"),k(j,"class","text-right")},m(T,G){w(T,e,G),u(e,n),u(n,o),u(e,r),u(e,s),u(s,l),z(a,l,null),u(e,c),u(e,f),u(f,d),u(d,h),u(e,m),u(e,S),u(S,E),u(e,N),u(e,j),z(I,j,null),M=!0,D||(P=Ce(l,"click",t[12]),D=!0)},p(T,G){t=T,(!M||G&8)&&i!==(i=new $t(t[21].saved).getHumanDate({year:!0})+"")&&R(o,i),(!M||G&8)&&p!==(p=t[21].name+"")&&R(h,p),(!M||G&8&&_!==(_=Re.urlFor("/file/"+t[11].id+"/"+t[21].id)))&&k(d,"href",_),(!M||G&8)&&b!==(b=ni(t[21].size,"B")+"")&&R(E,b);const K={};G&8&&(K.name=t[21].id),!A&&G&8&&(A=!0,K.value=t[21].selected,me(()=>A=!1)),I.$set(K)},i(T){M||(v(a.$$.fragment,T),v(I.$$.fragment,T),M=!0)},o(T){y(a.$$.fragment,T),y(I.$$.fragment,T),M=!1},d(T){T&&$(e),H(a),H(I),D=!1,P()}}}function ka(t){let e,n,i=t[6]("No files.")+"",o;return{c(){e=g("tr"),n=g("td"),o=O(i),k(n,"colspan","5")},m(r,s){w(r,e,s),u(e,n),u(n,o)},p(r,s){s&64&&i!==(i=r[6]("No files.")+"")&&R(o,i)},d(r){r&&$(e)}}}function ya(t){let e,n;return e=new Mo({props:{colspan:"5",op:t[10],$$slots:{default:[Av]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o&16777216&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function Av(t){let e;return{c(){e=g("div"),e.textContent=" "},m(n,i){w(n,e,i)},p:Oe,d(n){n&&$(e)}}}function Ov(t){let e,n=t[6]("Previous")+"",i;return{c(){e=g("span"),i=O(n),k(e,"class","disabled")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&64&&n!==(n=o[6]("Previous")+"")&&R(i,n)},i:Oe,o:Oe,d(o){o&&$(e)}}}function Nv(t){let e,n;return e=new Ge({props:{href:"/settings/files?after="+t[5],$$slots:{default:[Tv]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o&32&&(r.href="/settings/files?after="+i[5]),o&16777280&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function Tv(t){let e=t[6]("Previous")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&64&&e!==(e=i[6]("Previous")+"")&&R(n,e)},d(i){i&&$(n)}}}function Mv(t){let e,n=t[6]("Next")+"",i;return{c(){e=g("span"),i=O(n),k(e,"class","disabled")},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&64&&n!==(n=o[6]("Next")+"")&&R(i,n)},i:Oe,o:Oe,d(o){o&&$(e)}}}function Rv(t){let e,n;return e=new Ge({props:{href:"/settings/files?after="+t[4],$$slots:{default:[Lv]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o&16&&(r.href="/settings/files?after="+i[4]),o&16777280&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function Lv(t){let e=t[6]("Next")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&64&&e!==(e=i[6]("Next")+"")&&R(n,e)},d(i){i&&$(n)}}}function Iv(t){let e,n=t[6]("Delete selected files")+"",i;return{c(){e=g("span"),i=O(n)},m(o,r){w(o,e,r),u(e,i)},p(o,r){r&64&&n!==(n=o[6]("Delete selected files")+"")&&R(i,n)},d(o){o&&$(e)}}}function Sa(t){let e,n=t[8]("By deleting the files, you and everyone with the link *should* lose access to the file: Aggressive caching in browsers or proxies between Convos and other users might keep the file around for some time.")+"";return{c(){e=g("p")},m(i,o){w(i,e,o),e.innerHTML=n},p(i,o){o&256&&n!==(n=i[8]("By deleting the files, you and everyone with the link *should* lose access to the file: Aggressive caching in browsers or proxies between Convos and other users might keep the file around for some time.")+"")&&(e.innerHTML=n)},d(i){i&&$(e)}}}function Pv(t){let e,n,i,o,r,s,l,a,c=t[6]("Uploaded")+"",f,d,p,h,_,m=t[6]("Name")+"",S,b,E,N=t[6]("Size")+"",j,I,A,M,D,P,J,W,T,G,K,Q=!t[7].is("loading"),U,L,V,F,Z,Y,B,oe,fe,te,ue,Ne,ae,$e;e=new Ft({props:{$$slots:{default:[Cv]},$$scope:{ctx:t}}});function De(se){t[16](se)}let je={};t[0]!==void 0&&(je.value=t[0]),M=new it({props:je}),de.push(()=>ge(M,"value",De));let Pe=xe(t[3]),Te=[];for(let se=0;se<Pe.length;se+=1)Te[se]=wa($a(t,Pe,se));const ze=se=>y(Te[se],1,1,()=>{Te[se]=null});let ee=t[3].length===0&&ka(t);G=new Mo({props:{colspan:"5",op:t[9]}});let ce=Q&&ya(t);const He=[Nv,Ov],Be=[];function Ee(se,be){return se[5]||se[1].query.after?0:1}V=Ee(t),F=Be[V]=He[V](t);const ve=[Rv,Mv],ne=[];function pe(se,be){return se[4]?0:1}Y=pe(t),B=ne[Y]=ve[Y](t),te=new ft({props:{icon:"trash",op:t[9],disabled:t[2],$$slots:{default:[Iv]},$$scope:{ctx:t}}}),te.$on("click",t[13]);let ke=(t[3].length||t[1].query.after)&&Sa(t);return{c(){q(e.$$.fragment),n=C(),i=g("main"),o=g("form"),r=g("table"),s=g("thead"),l=g("tr"),a=g("th"),f=O(c),d=C(),p=g("th"),p.textContent=" ",h=C(),_=g("th"),S=O(m),b=C(),E=g("th"),j=O(N),I=C(),A=g("th"),q(M.$$.fragment),P=C(),J=g("tbody");for(let se=0;se<Te.length;se+=1)Te[se].c();W=C(),ee&&ee.c(),T=C(),q(G.$$.fragment),K=C(),ce&&ce.c(),U=C(),L=g("div"),F.c(),Z=C(),B.c(),oe=C(),fe=g("div"),q(te.$$.fragment),ue=C(),ke&&ke.c(),k(E,"class","text-right"),k(A,"class","text-right"),k(L,"class","pagination"),k(fe,"class","form-actions"),k(o,"method","post"),k(i,"class","main")},m(se,be){z(e,se,be),w(se,n,be),w(se,i,be),u(i,o),u(o,r),u(r,s),u(s,l),u(l,a),u(a,f),u(l,d),u(l,p),u(l,h),u(l,_),u(_,S),u(l,b),u(l,E),u(E,j),u(l,I),u(l,A),z(M,A,null),u(r,P),u(r,J);for(let Le=0;Le<Te.length;Le+=1)Te[Le]&&Te[Le].m(J,null);u(J,W),ee&&ee.m(J,null),u(J,T),z(G,J,null),u(J,K),ce&&ce.m(J,null),u(o,U),u(o,L),Be[V].m(L,null),u(L,Z),ne[Y].m(L,null),u(o,oe),u(o,fe),z(te,fe,null),u(o,ue),ke&&ke.m(o,null),Ne=!0,ae||($e=[Ce(o,"change",t[14]),Ce(o,"submit",st(t[15]))],ae=!0)},p(se,[be]){const Le={};be&16777280&&(Le.$$scope={dirty:be,ctx:se}),e.$set(Le),(!Ne||be&64)&&c!==(c=se[6]("Uploaded")+"")&&R(f,c),(!Ne||be&64)&&m!==(m=se[6]("Name")+"")&&R(S,m),(!Ne||be&64)&&N!==(N=se[6]("Size")+"")&&R(j,N);const x={};if(!D&&be&1&&(D=!0,x.value=se[0],me(()=>D=!1)),M.$set(x),be&6152){Pe=xe(se[3]);let _e;for(_e=0;_e<Pe.length;_e+=1){const qe=$a(se,Pe,_e);Te[_e]?(Te[_e].p(qe,be),v(Te[_e],1)):(Te[_e]=wa(qe),Te[_e].c(),v(Te[_e],1),Te[_e].m(J,W))}for(ye(),_e=Pe.length;_e<Te.length;_e+=1)ze(_e);Se()}se[3].length===0?ee?ee.p(se,be):(ee=ka(se),ee.c(),ee.m(J,T)):ee&&(ee.d(1),ee=null),be&128&&(Q=!se[7].is("loading")),Q?ce?(ce.p(se,be),be&128&&v(ce,1)):(ce=ya(se),ce.c(),v(ce,1),ce.m(J,null)):ce&&(ye(),y(ce,1,1,()=>{ce=null}),Se());let X=V;V=Ee(se),V===X?Be[V].p(se,be):(ye(),y(Be[X],1,1,()=>{Be[X]=null}),Se(),F=Be[V],F?F.p(se,be):(F=Be[V]=He[V](se),F.c()),v(F,1),F.m(L,Z));let ie=Y;Y=pe(se),Y===ie?ne[Y].p(se,be):(ye(),y(ne[ie],1,1,()=>{ne[ie]=null}),Se(),B=ne[Y],B?B.p(se,be):(B=ne[Y]=ve[Y](se),B.c()),v(B,1),B.m(L,null));const re={};be&4&&(re.disabled=se[2]),be&16777280&&(re.$$scope={dirty:be,ctx:se}),te.$set(re),se[3].length||se[1].query.after?ke?ke.p(se,be):(ke=Sa(se),ke.c(),ke.m(o,null)):ke&&(ke.d(1),ke=null)},i(se){if(!Ne){v(e.$$.fragment,se),v(M.$$.fragment,se);for(let be=0;be<Pe.length;be+=1)v(Te[be]);v(G.$$.fragment,se),v(ce),v(F),v(B),v(te.$$.fragment,se),Ne=!0}},o(se){y(e.$$.fragment,se),y(M.$$.fragment,se),Te=Te.filter(Boolean);for(let be=0;be<Te.length;be+=1)y(Te[be]);y(G.$$.fragment,se),y(ce),y(F),y(B),y(te.$$.fragment,se),Ne=!1},d(se){se&&($(n),$(i)),H(e,se),H(M),yt(Te,se),ee&&ee.d(),H(G),ce&&ce.d(),Be[V].d(),ne[Y].d(),H(te),ke&&ke.d(),ae=!1,ut($e)}}}function Dv(t,e,n){let i,o,r,s,l;we(t,lt,D=>n(6,o=D)),we(t,Re,D=>n(1,r=D)),we(t,jt,D=>n(8,l=D));const a=nt.op("deleteFiles");we(t,a,D=>n(7,s=D));const c=nt.op("getFiles");we(t,c,D=>n(18,i=D));const f=mt("user");let d=!1,p=!0,h=[],_="",m="";function S(D){const P=D.target.closest("tr").querySelector('[target="convos_files_file"]'),J=pc({value:P.href});J&&bt.showInApp(J,{closeAfter:3e3,title:o("File URL copied")})}async function b(){const D=h.filter(P=>P.selected);await a.perform({fid:D.map(P=>P.id).join(","),uid:f.id}),n(3,h=h.filter(P=>!P.selected)),n(0,d=!1),N(),h.length===0&&E(Re)}async function E(D){const P=D.query.after||"";await c.perform({after:P,limit:20}),n(3,h=c.res.body.files||[]),n(0,d=!1),N(),(h.length||!P)&&(n(4,_=i.res.body.next&&h.slice(-1)[0].id||""),n(5,m=i.res.body.prev||""))}function N(){n(2,p=!h.find(D=>D.selected))}function j(D){n(3,h=h.map(P=>(P.selected=D,P)))}function I(D){_i.call(this,t,D)}function A(D){d=D,n(0,d)}function M(D,P){t.$$.not_equal(P.selected,D)&&(P.selected=D,n(3,h))}return t.$$.update=()=>{t.$$.dirty&2&&E(r),t.$$.dirty&1&&j(d)},[d,r,p,h,_,m,o,s,l,a,c,f,S,b,N,I,A,M]}class Uv extends Xe{constructor(e){super(),Qe(this,e,Dv,Pv,Ze,{})}}function Ea(t,e,n){const i=t.slice();return i[27]=e[n],i}function Ca(t,e,n){const i=t.slice();return i[30]=e[n],i}function Bv(t){let e,n,i,o,r,s,l,a,c,f,d,p;return l=new he({props:{name:"search"}}),c=new Ge({props:{href:"/chat",class:"btn-hallow for-notifications",$$slots:{default:[Fv]},$$scope:{ctx:t}}}),{c(){e=g("div"),n=g("form"),i=g("input"),r=C(),s=g("label"),q(l.$$.fragment),a=C(),q(c.$$.fragment),k(i,"type","text"),k(i,"id","search_input"),k(i,"class","is-primary-menu-item"),k(i,"placeholder",o=t[4]?t[8]("Search..."):t[8]("Convos")),k(s,"for","search_input"),k(s,"class","btn-hallow"),k(n,"class","sidebar-header"),Ye(n,"has-focus",t[4]),k(e,"class","header-wrapper svelte-ezrkxr")},m(h,_){w(h,e,_),u(e,n),u(n,i),Ot(i,t[1]),u(n,r),u(n,s),z(l,s,null),u(n,a),z(c,n,null),f=!0,d||(p=[Ce(i,"input",t[20]),Ce(i,"blur",t[12]),Ce(i,"focus",t[13]),Ce(i,"keydown",t[15]),Ce(n,"submit",n0)],d=!0)},p(h,_){(!f||_[0]&272&&o!==(o=h[4]?h[8]("Search..."):h[8]("Convos")))&&k(i,"placeholder",o),_[0]&2&&i.value!==h[1]&&Ot(i,h[1]);const m={};_[0]&512|_[1]&4&&(m.$$scope={dirty:_,ctx:h}),c.$set(m),(!f||_[0]&16)&&Ye(n,"has-focus",h[4])},i(h){f||(v(l.$$.fragment,h),v(c.$$.fragment,h),f=!0)},o(h){y(l.$$.fragment,h),y(c.$$.fragment,h),f=!1},d(h){h&&$(e),H(l),H(c),d=!1,ut(p)}}}function Fv(t){let e,n,i,o=bn(t[9])+"",r,s,l;return e=new he({props:{family:"regular",name:"bell"}}),{c(){q(e.$$.fragment),n=C(),i=g("small"),r=O(o),k(i,"class","badge is-important"),i.hidden=s=!t[9].unread},m(a,c){z(e,a,c),w(a,n,c),w(a,i,c),u(i,r),l=!0},p(a,c){(!l||c[0]&512)&&o!==(o=bn(a[9])+"")&&R(r,o),(!l||c[0]&512&&s!==(s=!a[9].unread))&&(i.hidden=s)},i(a){l||(v(e.$$.fragment,a),l=!0)},o(a){y(e.$$.fragment,a),l=!1},d(a){a&&($(n),$(i)),H(e,a)}}}function Aa(t){let e,n;return e=new Ge({props:{href:"/settings/connections",$$slots:{default:[jv]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o[0]&256|o[1]&4&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function jv(t){let e,n,i,o=t[8]("No conversations")+"",r,s;return e=new he({props:{name:"exclamation-circle"}}),{c(){q(e.$$.fragment),n=C(),i=g("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),u(i,r),s=!0},p(l,a){(!s||a[0]&256)&&o!==(o=l[8]("No conversations")+"")&&R(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){l&&($(n),$(i)),H(e,l)}}}function zv(t){let e,n,i,o=(t[27].name||t[27].connection_id)+"",r,s,l,a=t[8](t[27].frozen)+"",c,f,d,p=bn(t[27])+"",h,_,m;return e=new he({props:{name:"network-wired"}}),{c(){q(e.$$.fragment),n=C(),i=g("span"),r=O(o),s=C(),l=g("span"),c=O(a),f=C(),d=g("b"),h=O(p),k(l,"class","tooltip svelte-ezrkxr"),k(d,"class","badge"),d.hidden=_=t[27].unread},m(S,b){z(e,S,b),w(S,n,b),w(S,i,b),u(i,r),w(S,s,b),w(S,l,b),u(l,c),w(S,f,b),w(S,d,b),u(d,h),m=!0},p(S,b){(!m||b[0]&8)&&o!==(o=(S[27].name||S[27].connection_id)+"")&&R(r,o),(!m||b[0]&264)&&a!==(a=S[8](S[27].frozen)+"")&&R(c,a),(!m||b[0]&8)&&p!==(p=bn(S[27])+"")&&R(h,p),(!m||b[0]&8&&_!==(_=S[27].unread))&&(d.hidden=_)},i(S){m||(v(e.$$.fragment,S),m=!0)},o(S){y(e.$$.fragment,S),m=!1},d(S){S&&($(n),$(i),$(s),$(l),$(f),$(d)),H(e,S)}}}function Oa(t){let e,n,i,o=xe(t[27].conversations.toArray()),r=[];for(let l=0;l<o.length;l+=1)r[l]=Na(Ca(t,o,l));const s=l=>y(r[l],1,1,()=>{r[l]=null});return{c(){e=g("div");for(let l=0;l<r.length;l+=1)r[l].c();k(e,"class","l2 svelte-ezrkxr")},m(l,a){w(l,e,a);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(e,null);i=!0},p(l,a){if(t=l,a[0]&264){o=xe(t[27].conversations.toArray());let c;for(c=0;c<o.length;c+=1){const f=Ca(t,o,c);r[c]?(r[c].p(f,a),v(r[c],1)):(r[c]=Na(f),r[c].c(),v(r[c],1),r[c].m(e,null))}for(ye(),c=o.length;c<r.length;c+=1)s(c);Se()}},i(l){if(!i){for(let a=0;a<o.length;a+=1)v(r[a]);l&&at(()=>{i&&(n||(n=et(e,Jt,{duration:Eo},!0)),n.run(1))}),i=!0}},o(l){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)y(r[a]);l&&(n||(n=et(e,Jt,{duration:Eo},!1)),n.run(0)),i=!1},d(l){l&&$(e),yt(r,l),l&&n&&n.end()}}}function Hv(t){let e,n;return e=new he({props:{name:t[30].is("private")?"user":"user-friends"}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o[0]&8&&(r.name=i[30].is("private")?"user":"user-friends"),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function qv(t){let e,n;return e=new he({props:{name:"exclamation-triangle"}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p:Oe,i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function Wv(t){let e,n,i,o,r,s=t[30].name+"",l,a,c,f=t[8](t[30].frozen)+"",d,p,h,_=bn(t[30])+"",m,S,b;const E=[qv,Hv],N=[];function j(I,A){return A[0]&8&&(e=null),e==null&&(e=!!(I[30].frozen&&!I[30].is("private"))),e?0:1}return n=j(t,[-1,-1]),i=N[n]=E[n](t),{c(){i.c(),o=C(),r=g("span"),l=O(s),a=C(),c=g("span"),d=O(f),p=C(),h=g("b"),m=O(_),k(c,"class","tooltip svelte-ezrkxr"),k(h,"class","badge"),h.hidden=S=!t[30].unread},m(I,A){N[n].m(I,A),w(I,o,A),w(I,r,A),u(r,l),w(I,a,A),w(I,c,A),u(c,d),w(I,p,A),w(I,h,A),u(h,m),b=!0},p(I,A){let M=n;n=j(I,A),n===M?N[n].p(I,A):(ye(),y(N[M],1,1,()=>{N[M]=null}),Se(),i=N[n],i?i.p(I,A):(i=N[n]=E[n](I),i.c()),v(i,1),i.m(o.parentNode,o)),(!b||A[0]&8)&&s!==(s=I[30].name+"")&&R(l,s),(!b||A[0]&264)&&f!==(f=I[8](I[30].frozen)+"")&&R(d,f),(!b||A[0]&8)&&_!==(_=bn(I[30])+"")&&R(m,_),(!b||A[0]&8&&S!==(S=!I[30].unread))&&(h.hidden=S)},i(I){b||(v(i),b=!0)},o(I){y(i),b=!1},d(I){I&&($(o),$(r),$(a),$(c),$(p),$(h)),N[n].d(I)}}}function Na(t){let e,n;return e=new Ge({props:{href:t[30].path,class:Co(t[27],t[30]),$$slots:{default:[Wv]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o[0]&8&&(r.href=i[30].path),o[0]&8&&(r.class=Co(i[27],i[30])),o[0]&264|o[1]&4&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function Ta(t){let e,n,i,o,r,s,l,a,c,f;n=new Ge({props:{href:t[27].path,class:Co(t[27],t[27]),$$slots:{default:[zv]},$$scope:{ctx:t}}}),r=new he({props:{name:"chevron-up"}});function d(){return t[21](t[27])}let p=(!t[5][t[27].connection_id]||t[1].length)&&Oa(t);return{c(){e=g("div"),q(n.$$.fragment),i=C(),o=g("a"),q(r.$$.fragment),s=C(),p&&p.c(),l=pt(),k(o,"href","#toggle"),k(o,"class","svelte-ezrkxr"),Ye(o,"collapsed",t[5][t[27].connection_id]),k(e,"class","l1 svelte-ezrkxr")},m(h,_){w(h,e,_),z(n,e,null),u(e,i),u(e,o),z(r,o,null),w(h,s,_),p&&p.m(h,_),w(h,l,_),a=!0,c||(f=Ce(o,"click",st(d)),c=!0)},p(h,_){t=h;const m={};_[0]&8&&(m.href=t[27].path),_[0]&8&&(m.class=Co(t[27],t[27])),_[0]&264|_[1]&4&&(m.$$scope={dirty:_,ctx:t}),n.$set(m),(!a||_[0]&40)&&Ye(o,"collapsed",t[5][t[27].connection_id]),!t[5][t[27].connection_id]||t[1].length?p?(p.p(t,_),_[0]&42&&v(p,1)):(p=Oa(t),p.c(),v(p,1),p.m(l.parentNode,l)):p&&(ye(),y(p,1,1,()=>{p=null}),Se())},i(h){a||(v(n.$$.fragment,h),v(r.$$.fragment,h),v(p),a=!0)},o(h){y(n.$$.fragment,h),y(r.$$.fragment,h),y(p),a=!1},d(h){h&&($(e),$(s),$(l)),H(n),H(r),p&&p.d(h),c=!1,f()}}}function Ma(t){let e,n,i,o,r,s,l,a,c,f,d,p,h,_=t[3].is("admin"),m,S,b,E,N,j,I,A=t[8]("Log out")+"",M,D,P,J,W;n=new Ge({props:{href:"/chat",$$slots:{default:[Gv]},$$scope:{ctx:t}}}),o=new Ge({props:{href:"/search",$$slots:{default:[Kv]},$$scope:{ctx:t}}}),s=new Ge({props:{href:t[7],$$slots:{default:[Yv]},$$scope:{ctx:t}}}),a=new Ge({props:{href:"/settings/connections",$$slots:{default:[Vv]},$$scope:{ctx:t}}}),f=new Ge({props:{href:"/settings/account",$$slots:{default:[Zv]},$$scope:{ctx:t}}}),p=new Ge({props:{href:"/settings/files",$$slots:{default:[Jv]},$$scope:{ctx:t}}});let T=_&&Ra(t);return S=new Ge({props:{href:"/help",$$slots:{default:[xv]},$$scope:{ctx:t}}}),N=new he({props:{name:"power-off"}}),P=new Ge({props:{href:"/search?q="+encodeURIComponent(t[6]),class:"for-search hidden",$$slots:{default:[e0]},$$scope:{ctx:t}}}),{c(){e=g("div"),q(n.$$.fragment),i=C(),q(o.$$.fragment),r=C(),q(s.$$.fragment),l=C(),q(a.$$.fragment),c=C(),q(f.$$.fragment),d=C(),q(p.$$.fragment),h=C(),T&&T.c(),m=C(),q(S.$$.fragment),b=C(),E=g("a"),q(N.$$.fragment),j=C(),I=g("span"),M=O(A),D=C(),q(P.$$.fragment),k(E,"href",Re.urlFor("/logout")+"?csrf="+Ve("csrf")),k(E,"target","_self")},m(G,K){w(G,e,K),z(n,e,null),u(e,i),z(o,e,null),u(e,r),z(s,e,null),u(e,l),z(a,e,null),u(e,c),z(f,e,null),u(e,d),z(p,e,null),u(e,h),T&&T.m(e,null),u(e,m),z(S,e,null),u(e,b),u(e,E),z(N,E,null),u(E,j),u(E,I),u(I,M),u(e,D),z(P,e,null),W=!0},p(G,K){t=G;const Q={};K[0]&768|K[1]&4&&(Q.$$scope={dirty:K,ctx:t}),n.$set(Q);const U={};K[0]&256|K[1]&4&&(U.$$scope={dirty:K,ctx:t}),o.$set(U);const L={};K[0]&128&&(L.href=t[7]),K[0]&256|K[1]&4&&(L.$$scope={dirty:K,ctx:t}),s.$set(L);const V={};K[0]&256|K[1]&4&&(V.$$scope={dirty:K,ctx:t}),a.$set(V);const F={};K[0]&256|K[1]&4&&(F.$$scope={dirty:K,ctx:t}),f.$set(F);const Z={};K[0]&256|K[1]&4&&(Z.$$scope={dirty:K,ctx:t}),p.$set(Z),K[0]&8&&(_=t[3].is("admin")),_?T?(T.p(t,K),K[0]&8&&v(T,1)):(T=Ra(t),T.c(),v(T,1),T.m(e,m)):T&&(ye(),y(T,1,1,()=>{T=null}),Se());const Y={};K[0]&256|K[1]&4&&(Y.$$scope={dirty:K,ctx:t}),S.$set(Y),(!W||K[0]&256)&&A!==(A=t[8]("Log out")+"")&&R(M,A);const B={};K[0]&64&&(B.href="/search?q="+encodeURIComponent(t[6])),K[0]&320|K[1]&4&&(B.$$scope={dirty:K,ctx:t}),P.$set(B)},i(G){W||(v(n.$$.fragment,G),v(o.$$.fragment,G),v(s.$$.fragment,G),v(a.$$.fragment,G),v(f.$$.fragment,G),v(p.$$.fragment,G),v(T),v(S.$$.fragment,G),v(N.$$.fragment,G),v(P.$$.fragment,G),G&&at(()=>{W&&(J||(J=et(e,Jt,{duration:Eo},!0)),J.run(1))}),W=!0)},o(G){y(n.$$.fragment,G),y(o.$$.fragment,G),y(s.$$.fragment,G),y(a.$$.fragment,G),y(f.$$.fragment,G),y(p.$$.fragment,G),y(T),y(S.$$.fragment,G),y(N.$$.fragment,G),y(P.$$.fragment,G),G&&(J||(J=et(e,Jt,{duration:Eo},!1)),J.run(0)),W=!1},d(G){G&&$(e),H(n),H(o),H(s),H(a),H(f),H(p),T&&T.d(),H(S),H(N),H(P),G&&J&&J.end()}}}function Gv(t){let e,n,i,o=t[8]("Notifications")+"",r,s,l,a=bn(t[9])+"",c,f,d;return e=new he({props:{name:"bell"}}),{c(){q(e.$$.fragment),n=C(),i=g("span"),r=O(o),s=C(),l=g("b"),c=O(a),k(l,"class","badge"),l.hidden=f=!t[9].unread},m(p,h){z(e,p,h),w(p,n,h),w(p,i,h),u(i,r),w(p,s,h),w(p,l,h),u(l,c),d=!0},p(p,h){(!d||h[0]&256)&&o!==(o=p[8]("Notifications")+"")&&R(r,o),(!d||h[0]&512)&&a!==(a=bn(p[9])+"")&&R(c,a),(!d||h[0]&512&&f!==(f=!p[9].unread))&&(l.hidden=f)},i(p){d||(v(e.$$.fragment,p),d=!0)},o(p){y(e.$$.fragment,p),d=!1},d(p){p&&($(n),$(i),$(s),$(l)),H(e,p)}}}function Kv(t){let e,n,i,o=t[8]("Search")+"",r,s;return e=new he({props:{name:"search"}}),{c(){q(e.$$.fragment),n=C(),i=g("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),u(i,r),s=!0},p(l,a){(!s||a[0]&256)&&o!==(o=l[8]("Search")+"")&&R(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){l&&($(n),$(i)),H(e,l)}}}function Yv(t){let e,n,i,o=t[8]("Add conversation")+"",r,s;return e=new he({props:{name:"comment"}}),{c(){q(e.$$.fragment),n=C(),i=g("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),u(i,r),s=!0},p(l,a){(!s||a[0]&256)&&o!==(o=l[8]("Add conversation")+"")&&R(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){l&&($(n),$(i)),H(e,l)}}}function Vv(t){let e,n,i,o=t[8]("Connections")+"",r,s;return e=new he({props:{name:"network-wired"}}),{c(){q(e.$$.fragment),n=C(),i=g("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),u(i,r),s=!0},p(l,a){(!s||a[0]&256)&&o!==(o=l[8]("Connections")+"")&&R(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){l&&($(n),$(i)),H(e,l)}}}function Zv(t){let e,n,i,o=t[8]("Account")+"",r,s;return e=new he({props:{name:"user-cog"}}),{c(){q(e.$$.fragment),n=C(),i=g("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),u(i,r),s=!0},p(l,a){(!s||a[0]&256)&&o!==(o=l[8]("Account")+"")&&R(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){l&&($(n),$(i)),H(e,l)}}}function Jv(t){let e,n,i,o=t[8]("Files")+"",r,s;return e=new he({props:{name:"folder-open"}}),{c(){q(e.$$.fragment),n=C(),i=g("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),u(i,r),s=!0},p(l,a){(!s||a[0]&256)&&o!==(o=l[8]("Files")+"")&&R(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){l&&($(n),$(i)),H(e,l)}}}function Ra(t){let e,n,i,o;return e=new Ge({props:{href:"/settings",$$slots:{default:[Qv]},$$scope:{ctx:t}}}),i=new Ge({props:{href:"/settings/users",$$slots:{default:[Xv]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment),n=C(),q(i.$$.fragment)},m(r,s){z(e,r,s),w(r,n,s),z(i,r,s),o=!0},p(r,s){const l={};s[0]&256|s[1]&4&&(l.$$scope={dirty:s,ctx:r}),e.$set(l);const a={};s[0]&256|s[1]&4&&(a.$$scope={dirty:s,ctx:r}),i.$set(a)},i(r){o||(v(e.$$.fragment,r),v(i.$$.fragment,r),o=!0)},o(r){y(e.$$.fragment,r),y(i.$$.fragment,r),o=!1},d(r){r&&$(n),H(e,r),H(i,r)}}}function Qv(t){let e,n,i,o=t[8]("Settings")+"",r,s;return e=new he({props:{name:"tools"}}),{c(){q(e.$$.fragment),n=C(),i=g("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),u(i,r),s=!0},p(l,a){(!s||a[0]&256)&&o!==(o=l[8]("Settings")+"")&&R(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){l&&($(n),$(i)),H(e,l)}}}function Xv(t){let e,n,i,o=t[8]("Users")+"",r,s;return e=new he({props:{name:"users"}}),{c(){q(e.$$.fragment),n=C(),i=g("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),u(i,r),s=!0},p(l,a){(!s||a[0]&256)&&o!==(o=l[8]("Users")+"")&&R(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){l&&($(n),$(i)),H(e,l)}}}function xv(t){let e,n,i,o=t[8]("Help")+"",r,s;return e=new he({props:{name:"question-circle"}}),{c(){q(e.$$.fragment),n=C(),i=g("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),u(i,r),s=!0},p(l,a){(!s||a[0]&256)&&o!==(o=l[8]("Help")+"")&&R(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){l&&($(n),$(i)),H(e,l)}}}function e0(t){let e,n,i,o=t[8]('Search for "%1"',t[6])+"",r,s;return e=new he({props:{name:"search"}}),{c(){q(e.$$.fragment),n=C(),i=g("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),u(i,r),s=!0},p(l,a){(!s||a[0]&320)&&o!==(o=l[8]('Search for "%1"',l[6])+"")&&R(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){l&&($(n),$(i)),H(e,l)}}}function t0(t){let e,n,i,o,r=t[8]("Conversations")+"",s,l,a,c,f,d,p=(t[3].email||t[8]("Account"))+"",h,_,m,S,b,E,N,j,I,A=!Pn.isSingleColumn&&Bv(t),M=!t[3].connections.size&&Aa(t),D=xe(t[3].connections.toArray()),P=[];for(let T=0;T<D.length;T+=1)P[T]=Ta(Ea(t,D,T));const J=T=>y(P[T],1,1,()=>{P[T]=null});S=new he({props:{name:"chevron-up"}});let W=!t[5].settings&&!t[1].length&&Ma(t);return{c(){e=g("div"),A&&A.c(),n=C(),i=g("nav"),o=g("h3"),s=O(r),l=C(),M&&M.c(),a=C();for(let T=0;T<P.length;T+=1)P[T].c();c=C(),f=g("h3"),d=g("span"),h=O(p),_=C(),m=g("a"),q(S.$$.fragment),b=C(),W&&W.c(),k(o,"class","svelte-ezrkxr"),k(m,"href","#toggle"),k(m,"class","svelte-ezrkxr"),Ye(m,"collapsed",t[5].settings),k(f,"class","l1 svelte-ezrkxr"),k(i,"class","sidebar-left__nav"),Ye(i,"is-filtering",t[1].length>0),k(e,"class","sidebar-left")},m(T,G){w(T,e,G),A&&A.m(e,null),u(e,n),u(e,i),u(i,o),u(o,s),u(i,l),M&&M.m(i,null),u(i,a);for(let K=0;K<P.length;K+=1)P[K]&&P[K].m(i,null);u(i,c),u(i,f),u(f,d),u(d,h),u(f,_),u(f,m),z(S,m,null),u(i,b),W&&W.m(i,null),t[23](i),N=!0,j||(I=[Ce(m,"click",st(t[22])),Ce(i,"click",t[14])],j=!0)},p(T,G){if(t=T,Pn.isSingleColumn||A.p(t,G),(!N||G[0]&256)&&r!==(r=t[8]("Conversations")+"")&&R(s,r),t[3].connections.size?M&&(ye(),y(M,1,1,()=>{M=null}),Se()):M?(M.p(t,G),G[0]&8&&v(M,1)):(M=Aa(t),M.c(),v(M,1),M.m(i,a)),G[0]&65834){D=xe(t[3].connections.toArray());let K;for(K=0;K<D.length;K+=1){const Q=Ea(t,D,K);P[K]?(P[K].p(Q,G),v(P[K],1)):(P[K]=Ta(Q),P[K].c(),v(P[K],1),P[K].m(i,c))}for(ye(),K=D.length;K<P.length;K+=1)J(K);Se()}(!N||G[0]&264)&&p!==(p=(t[3].email||t[8]("Account"))+"")&&R(h,p),(!N||G[0]&32)&&Ye(m,"collapsed",t[5].settings),!t[5].settings&&!t[1].length?W?(W.p(t,G),G[0]&34&&v(W,1)):(W=Ma(t),W.c(),v(W,1),W.m(i,null)):W&&(ye(),y(W,1,1,()=>{W=null}),Se()),(!N||G[0]&2)&&Ye(i,"is-filtering",t[1].length>0)},i(T){if(!N){v(A),v(M);for(let G=0;G<D.length;G+=1)v(P[G]);v(S.$$.fragment,T),v(W),T&&at(()=>{N&&(E||(E=et(e,Zt,t[0],!0)),E.run(1))}),N=!0}},o(T){y(A),y(M),P=P.filter(Boolean);for(let G=0;G<P.length;G+=1)y(P[G]);y(S.$$.fragment,T),y(W),T&&(E||(E=et(e,Zt,t[0],!1)),E.run(0)),N=!1},d(T){T&&$(e),A&&A.d(),M&&M.d(),yt(P,T),H(S),W&&W.d(),t[23](null),T&&E&&E.end(),j=!1,ut(I)}}}const Eo=250;function Co(t,e){const n=[e.conversation_id?"for-conversation":"for-connection"];return(e.frozen||t.state!=="connected")&&n.push("is-frozen"),e.frozen&&n.push("has-tooltip"),e.errors&&n.push("has-errors"),e.notifications&&n.push("has-notifications"),n.join(" ")}function bn(t,e=60){return t.unread>e?e+"+":t.unread||0}const n0=t=>t.preventDefault();function i0(t,e,n){let i,o,r,s,l,a,c;we(t,wt,K=>n(24,r=K)),we(t,Re,K=>n(19,s=K)),we(t,lt,K=>n(8,a=K));let{transition:f}=e;const d=mt("user");we(t,d,K=>n(3,l=K));const p=d.notifications;we(t,p,K=>n(9,c=K));let h=0,_="",m,S=!1,b=[],E=JSON.parse(localStorage.getItem("collapsedStates")||"{}");function N(){vt(m,"a",K=>K.classList.remove("has-focus")),setTimeout(()=>{if(!m)return;n(1,_="");const K=document.activeElement;K&&$r(K,m)&&vt(m,"a.has-path",Q=>Q.focus())},100)}function j(){if(!m)return;n(17,h=0),n(18,b=[]);const K=[_.match(/^\W+/)?"":"\\b\\W*"];K[0]&&K.push("");for(let U=0;U<K.length;U++){const L=_==="+"?new RegExp(/[1-9]\d*\+?\s*$/):_==="+@"?new RegExp(/^\s*\w.*[1-9]\d*\+?\s*$/):_==="+#"?new RegExp(/^\s*#.*[1-9]\d*\+?\s*$/):new RegExp(K[U]+bi(_),"i"),V={};if(vt(m,"a",(F,Z)=>{const Y=F.classList;!_.length&&Y.contains("has-path")&&n(17,h=Z),Y.remove("has-focus");const B=!_.length||!F.href.match(/\/search$/)&&!V[F.href]&&F.textContent.match(L);B&&b.push(F),F.classList[B?"remove":"add"]("hidden"),V[F.href]=!0}),b.length)break}vt(m,".for-connection",U=>{let L=U;for(;(L=L.nextElementSibling)&&L.classList.contains("for-conversation");)if(!L.classList.contains("hidden"))return U.classList.remove("hidden")});const Q=m.querySelector(".for-search");Q.classList[_?"remove":"add"]("hidden"),Q.classList.contains("hidden")||b.push(Q),vt(m,"h3",U=>{let L=U;for(;(L=L.nextElementSibling)&&!Dr(L,"h3");)if(!L.classList.contains("hidden"))return U.classList.remove("hidden");U.classList.add("hidden")})}function I(){n(4,S=!1),_.indexOf("+")!==0&&N()}function A(){n(4,S=!0)}function M(K){(K.target.className||"").match(/(network|user)/)?(K.target.closest("a").pathname===location.pathname&&K.preventDefault(),setTimeout(()=>{ho(wt,r="settings",r)},50)):K.target.closest("a")&&setTimeout(()=>{ho(wt,r="",r)},50)}function D(K){if(K.key=="Enter"){K.preventDefault(),N(),b[h]&&Re.go(b[h].href);return}const Q=K.key=="ArrowUp"?-1:K.key=="ArrowDown"?1:0;Q&&(K.preventDefault(),b[h]&&b[h].classList.remove("has-focus"),n(17,h+=K.ctrlKey?Q*4:Q)),h<0&&n(17,h=b.length-1),h>=b.length&&n(17,h=0)}function P(K){n(5,E[K]=!E[K],E),localStorage.setItem("collapsedStates",JSON.stringify(E))}function J(){_=this.value,n(1,_)}const W=K=>P(K.connection_id),T=()=>P("settings");function G(K){de[K?"unshift":"push"](()=>{m=K,n(2,m)})}return t.$$set=K=>{"transition"in K&&n(0,f=K.transition)},t.$$.update=()=>{t.$$.dirty[0]&2&&j(),t.$$.dirty[0]&8&&n(7,i="/settings/conversation?connection_id="+(l.activeConversation.connection_id||"")),t.$$.dirty[0]&2&&n(6,o=_.replace(/^\//,"")),t.$$.dirty[0]&524292&&m&&N(),t.$$.dirty[0]&393216&&b[h]&&b[h].classList.add("has-focus")},[f,_,m,l,S,E,o,i,a,c,d,p,I,A,M,D,P,h,b,s,J,W,T,G]}class o0 extends Xe{constructor(e){super(),Qe(this,e,i0,t0,Ze,{transition:0},null,[-1,-1])}}class r0 extends It{constructor(){super(),this.prop("cookie","activeTheme","convos",{key:"theme"}),this.prop("cookie","colorScheme","auto"),this.prop("cookie","compactDisplay",!1),this.prop("ro","colorSchemeOptions",["Auto","Light","Dark"].map(e=>[e.toLowerCase(),e])),this.prop("ro","themeOptions",()=>Array.from(this._stylesheets.entries())),this.prop("rw","osColorScheme",""),this._stylesheets=new Map([])}hasColorScheme(e){return vt(document,'link[id$="-'+e+'"]').length>1}start(){vt(document,'link[rel="alternate stylesheet"][title]',n=>{const i=n.title.replace(/\s\([a-z]+\)$/,"");this._stylesheets.set(n.id.replace(/^theme_alt__[a-z]+-/,""),i)});let e=this.osColorScheme;return this._matchMedia||(this._matchMedia=window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):{addListener:()=>{}},this._matchMedia.addListener(n=>this.update({osColorScheme:n.matches?"dark":"light"})),e=this._matchMedia.matches?"dark":"light"),this.update({compactDisplay:this.compactDisplay,osColorScheme:e})}update(e){return(e.activeTheme||e.colorScheme||e.osColorScheme)&&this._activateTheme(e),super.update(e)}_activateTheme(e){const n=e.activeTheme||this.activeTheme,i=e.colorScheme||this.colorScheme,o=e.osColorScheme||this.osColorScheme,r=[i==="auto"?o:i,"normal","light"];let s;for(let l=0;l<r.length&&(s=document.getElementById("theme_alt__"+r[l]+"-"+n),!s);l++);vt(document,'link[rel*="style"][title]',l=>{s||(s=l),l.disabled=!0,l.disabled=l.href!==s.href,l.setAttribute("media",l===s?"":"none"),l.setAttribute("rel",l===s?"stylesheet":"alternate stylesheet")})}}function Gc(t){return t instanceof Map?t.clear=t.delete=t.set=function(){throw new Error("map is read-only")}:t instanceof Set&&(t.add=t.clear=t.delete=function(){throw new Error("set is read-only")}),Object.freeze(t),Object.getOwnPropertyNames(t).forEach(e=>{const n=t[e],i=typeof n;(i==="object"||i==="function")&&!Object.isFrozen(n)&&Gc(n)}),t}class La{constructor(e){e.data===void 0&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function Kc(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function mn(t,...e){const n=Object.create(null);for(const i in t)n[i]=t[i];return e.forEach(function(i){for(const o in i)n[o]=i[o]}),n}const s0="</span>",Ia=t=>!!t.scope,l0=(t,{prefix:e})=>{if(t.startsWith("language:"))return t.replace("language:","language-");if(t.includes(".")){const n=t.split(".");return[`${e}${n.shift()}`,...n.map((i,o)=>`${i}${"_".repeat(o+1)}`)].join(" ")}return`${e}${t}`};class a0{constructor(e,n){this.buffer="",this.classPrefix=n.classPrefix,e.walk(this)}addText(e){this.buffer+=Kc(e)}openNode(e){if(!Ia(e))return;const n=l0(e.scope,{prefix:this.classPrefix});this.span(n)}closeNode(e){Ia(e)&&(this.buffer+=s0)}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}const Pa=(t={})=>{const e={children:[]};return Object.assign(e,t),e};class Vr{constructor(){this.rootNode=Pa(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const n=Pa({scope:e});this.add(n),this.stack.push(n)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,n){return typeof n=="string"?e.addText(n):n.children&&(e.openNode(n),n.children.forEach(i=>this._walk(e,i)),e.closeNode(n)),e}static _collapse(e){typeof e!="string"&&e.children&&(e.children.every(n=>typeof n=="string")?e.children=[e.children.join("")]:e.children.forEach(n=>{Vr._collapse(n)}))}}class c0 extends Vr{constructor(e){super(),this.options=e}addText(e){e!==""&&this.add(e)}startScope(e){this.openNode(e)}endScope(){this.closeNode()}__addSublanguage(e,n){const i=e.root;n&&(i.scope=`language:${n}`),this.add(i)}toHTML(){return new a0(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function Bi(t){return t?typeof t=="string"?t:t.source:null}function Yc(t){return Bn("(?=",t,")")}function u0(t){return Bn("(?:",t,")*")}function f0(t){return Bn("(?:",t,")?")}function Bn(...t){return t.map(n=>Bi(n)).join("")}function p0(t){const e=t[t.length-1];return typeof e=="object"&&e.constructor===Object?(t.splice(t.length-1,1),e):{}}function Zr(...t){return"("+(p0(t).capture?"":"?:")+t.map(i=>Bi(i)).join("|")+")"}function Vc(t){return new RegExp(t.toString()+"|").exec("").length-1}function d0(t,e){const n=t&&t.exec(e);return n&&n.index===0}const h0=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function Jr(t,{joinWith:e}){let n=0;return t.map(i=>{n+=1;const o=n;let r=Bi(i),s="";for(;r.length>0;){const l=h0.exec(r);if(!l){s+=r;break}s+=r.substring(0,l.index),r=r.substring(l.index+l[0].length),l[0][0]==="\\"&&l[1]?s+="\\"+String(Number(l[1])+o):(s+=l[0],l[0]==="("&&n++)}return s}).map(i=>`(${i})`).join(e)}const _0=/\b\B/,Zc="[a-zA-Z]\\w*",Qr="[a-zA-Z_]\\w*",Jc="\\b\\d+(\\.\\d+)?",Qc="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",Xc="\\b(0b[01]+)",m0="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",g0=(t={})=>{const e=/^#![ ]*\//;return t.binary&&(t.begin=Bn(e,/.*\b/,t.binary,/\b.*/)),mn({scope:"meta",begin:e,end:/$/,relevance:0,"on:begin":(n,i)=>{n.index!==0&&i.ignoreMatch()}},t)},Fi={begin:"\\\\[\\s\\S]",relevance:0},b0={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[Fi]},v0={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[Fi]},$0={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},Ro=function(t,e,n={}){const i=mn({scope:"comment",begin:t,end:e,contains:[]},n);i.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const o=Zr("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return i.contains.push({begin:Bn(/[ ]+/,"(",o,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),i},w0=Ro("//","$"),k0=Ro("/\\*","\\*/"),y0=Ro("#","$"),S0={scope:"number",begin:Jc,relevance:0},E0={scope:"number",begin:Qc,relevance:0},C0={scope:"number",begin:Xc,relevance:0},A0={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[Fi,{begin:/\[/,end:/\]/,relevance:0,contains:[Fi]}]},O0={scope:"title",begin:Zc,relevance:0},N0={scope:"title",begin:Qr,relevance:0},T0={begin:"\\.\\s*"+Qr,relevance:0},M0=function(t){return Object.assign(t,{"on:begin":(e,n)=>{n.data._beginMatch=e[1]},"on:end":(e,n)=>{n.data._beginMatch!==e[1]&&n.ignoreMatch()}})};var ao=Object.freeze({__proto__:null,APOS_STRING_MODE:b0,BACKSLASH_ESCAPE:Fi,BINARY_NUMBER_MODE:C0,BINARY_NUMBER_RE:Xc,COMMENT:Ro,C_BLOCK_COMMENT_MODE:k0,C_LINE_COMMENT_MODE:w0,C_NUMBER_MODE:E0,C_NUMBER_RE:Qc,END_SAME_AS_BEGIN:M0,HASH_COMMENT_MODE:y0,IDENT_RE:Zc,MATCH_NOTHING_RE:_0,METHOD_GUARD:T0,NUMBER_MODE:S0,NUMBER_RE:Jc,PHRASAL_WORDS_MODE:$0,QUOTE_STRING_MODE:v0,REGEXP_MODE:A0,RE_STARTERS_RE:m0,SHEBANG:g0,TITLE_MODE:O0,UNDERSCORE_IDENT_RE:Qr,UNDERSCORE_TITLE_MODE:N0});function R0(t,e){t.input[t.index-1]==="."&&e.ignoreMatch()}function L0(t,e){t.className!==void 0&&(t.scope=t.className,delete t.className)}function I0(t,e){e&&t.beginKeywords&&(t.begin="\\b("+t.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",t.__beforeBegin=R0,t.keywords=t.keywords||t.beginKeywords,delete t.beginKeywords,t.relevance===void 0&&(t.relevance=0))}function P0(t,e){Array.isArray(t.illegal)&&(t.illegal=Zr(...t.illegal))}function D0(t,e){if(t.match){if(t.begin||t.end)throw new Error("begin & end are not supported with match");t.begin=t.match,delete t.match}}function U0(t,e){t.relevance===void 0&&(t.relevance=1)}const B0=(t,e)=>{if(!t.beforeMatch)return;if(t.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},t);Object.keys(t).forEach(i=>{delete t[i]}),t.keywords=n.keywords,t.begin=Bn(n.beforeMatch,Yc(n.begin)),t.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},t.relevance=0,delete n.beforeMatch},F0=["of","and","for","in","not","or","if","then","parent","list","value"],j0="keyword";function xc(t,e,n=j0){const i=Object.create(null);return typeof t=="string"?o(n,t.split(" ")):Array.isArray(t)?o(n,t):Object.keys(t).forEach(function(r){Object.assign(i,xc(t[r],e,r))}),i;function o(r,s){e&&(s=s.map(l=>l.toLowerCase())),s.forEach(function(l){const a=l.split("|");i[a[0]]=[r,z0(a[0],a[1])]})}}function z0(t,e){return e?Number(e):H0(t)?0:1}function H0(t){return F0.includes(t.toLowerCase())}const Da={},In=t=>{console.error(t)},Ua=(t,...e)=>{console.log(`WARN: ${t}`,...e)},Qn=(t,e)=>{Da[`${t}/${e}`]||(console.log(`Deprecated as of ${t}. ${e}`),Da[`${t}/${e}`]=!0)},Ao=new Error;function eu(t,e,{key:n}){let i=0;const o=t[n],r={},s={};for(let l=1;l<=e.length;l++)s[l+i]=o[l],r[l+i]=!0,i+=Vc(e[l-1]);t[n]=s,t[n]._emit=r,t[n]._multi=!0}function q0(t){if(Array.isArray(t.begin)){if(t.skip||t.excludeBegin||t.returnBegin)throw In("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),Ao;if(typeof t.beginScope!="object"||t.beginScope===null)throw In("beginScope must be object"),Ao;eu(t,t.begin,{key:"beginScope"}),t.begin=Jr(t.begin,{joinWith:""})}}function W0(t){if(Array.isArray(t.end)){if(t.skip||t.excludeEnd||t.returnEnd)throw In("skip, excludeEnd, returnEnd not compatible with endScope: {}"),Ao;if(typeof t.endScope!="object"||t.endScope===null)throw In("endScope must be object"),Ao;eu(t,t.end,{key:"endScope"}),t.end=Jr(t.end,{joinWith:""})}}function G0(t){t.scope&&typeof t.scope=="object"&&t.scope!==null&&(t.beginScope=t.scope,delete t.scope)}function K0(t){G0(t),typeof t.beginScope=="string"&&(t.beginScope={_wrap:t.beginScope}),typeof t.endScope=="string"&&(t.endScope={_wrap:t.endScope}),q0(t),W0(t)}function Y0(t){function e(s,l){return new RegExp(Bi(s),"m"+(t.case_insensitive?"i":"")+(t.unicodeRegex?"u":"")+(l?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(l,a){a.position=this.position++,this.matchIndexes[this.matchAt]=a,this.regexes.push([a,l]),this.matchAt+=Vc(l)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const l=this.regexes.map(a=>a[1]);this.matcherRe=e(Jr(l,{joinWith:"|"}),!0),this.lastIndex=0}exec(l){this.matcherRe.lastIndex=this.lastIndex;const a=this.matcherRe.exec(l);if(!a)return null;const c=a.findIndex((d,p)=>p>0&&d!==void 0),f=this.matchIndexes[c];return a.splice(0,c),Object.assign(a,f)}}class i{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(l){if(this.multiRegexes[l])return this.multiRegexes[l];const a=new n;return this.rules.slice(l).forEach(([c,f])=>a.addRule(c,f)),a.compile(),this.multiRegexes[l]=a,a}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(l,a){this.rules.push([l,a]),a.type==="begin"&&this.count++}exec(l){const a=this.getMatcher(this.regexIndex);a.lastIndex=this.lastIndex;let c=a.exec(l);if(this.resumingScanAtSamePosition()&&!(c&&c.index===this.lastIndex)){const f=this.getMatcher(0);f.lastIndex=this.lastIndex+1,c=f.exec(l)}return c&&(this.regexIndex+=c.position+1,this.regexIndex===this.count&&this.considerAll()),c}}function o(s){const l=new i;return s.contains.forEach(a=>l.addRule(a.begin,{rule:a,type:"begin"})),s.terminatorEnd&&l.addRule(s.terminatorEnd,{type:"end"}),s.illegal&&l.addRule(s.illegal,{type:"illegal"}),l}function r(s,l){const a=s;if(s.isCompiled)return a;[L0,D0,K0,B0].forEach(f=>f(s,l)),t.compilerExtensions.forEach(f=>f(s,l)),s.__beforeBegin=null,[I0,P0,U0].forEach(f=>f(s,l)),s.isCompiled=!0;let c=null;return typeof s.keywords=="object"&&s.keywords.$pattern&&(s.keywords=Object.assign({},s.keywords),c=s.keywords.$pattern,delete s.keywords.$pattern),c=c||/\w+/,s.keywords&&(s.keywords=xc(s.keywords,t.case_insensitive)),a.keywordPatternRe=e(c,!0),l&&(s.begin||(s.begin=/\B|\b/),a.beginRe=e(a.begin),!s.end&&!s.endsWithParent&&(s.end=/\B|\b/),s.end&&(a.endRe=e(a.end)),a.terminatorEnd=Bi(a.end)||"",s.endsWithParent&&l.terminatorEnd&&(a.terminatorEnd+=(s.end?"|":"")+l.terminatorEnd)),s.illegal&&(a.illegalRe=e(s.illegal)),s.contains||(s.contains=[]),s.contains=[].concat(...s.contains.map(function(f){return V0(f==="self"?s:f)})),s.contains.forEach(function(f){r(f,a)}),s.starts&&r(s.starts,l),a.matcher=o(a),a}if(t.compilerExtensions||(t.compilerExtensions=[]),t.contains&&t.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return t.classNameAliases=mn(t.classNameAliases||{}),r(t)}function tu(t){return t?t.endsWithParent||tu(t.starts):!1}function V0(t){return t.variants&&!t.cachedVariants&&(t.cachedVariants=t.variants.map(function(e){return mn(t,{variants:null},e)})),t.cachedVariants?t.cachedVariants:tu(t)?mn(t,{starts:t.starts?mn(t.starts):null}):Object.isFrozen(t)?mn(t):t}var Z0="11.9.0";class J0 extends Error{constructor(e,n){super(e),this.name="HTMLInjectionError",this.html=n}}const ur=Kc,Ba=mn,Fa=Symbol("nomatch"),Q0=7,nu=function(t){const e=Object.create(null),n=Object.create(null),i=[];let o=!0;const r="Could not find the language '{}', did you forget to load/include a language module?",s={disableAutodetect:!0,name:"Plain text",contains:[]};let l={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:c0};function a(L){return l.noHighlightRe.test(L)}function c(L){let V=L.className+" ";V+=L.parentNode?L.parentNode.className:"";const F=l.languageDetectRe.exec(V);if(F){const Z=P(F[1]);return Z||(Ua(r.replace("{}",F[1])),Ua("Falling back to no-highlight mode for this block.",L)),Z?F[1]:"no-highlight"}return V.split(/\s+/).find(Z=>a(Z)||P(Z))}function f(L,V,F){let Z="",Y="";typeof V=="object"?(Z=L,F=V.ignoreIllegals,Y=V.language):(Qn("10.7.0","highlight(lang, code, ...args) has been deprecated."),Qn("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),Y=L,Z=V),F===void 0&&(F=!0);const B={code:Z,language:Y};Q("before:highlight",B);const oe=B.result?B.result:d(B.language,B.code,F);return oe.code=B.code,Q("after:highlight",oe),oe}function d(L,V,F,Z){const Y=Object.create(null);function B(x,X){return x.keywords[X]}function oe(){if(!Ee.keywords){ne.addText(pe);return}let x=0;Ee.keywordPatternRe.lastIndex=0;let X=Ee.keywordPatternRe.exec(pe),ie="";for(;X;){ie+=pe.substring(x,X.index);const re=ce.case_insensitive?X[0].toLowerCase():X[0],_e=B(Ee,re);if(_e){const[qe,Ue]=_e;if(ne.addText(ie),ie="",Y[re]=(Y[re]||0)+1,Y[re]<=Q0&&(ke+=Ue),qe.startsWith("_"))ie+=X[0];else{const rt=ce.classNameAliases[qe]||qe;ue(X[0],rt)}}else ie+=X[0];x=Ee.keywordPatternRe.lastIndex,X=Ee.keywordPatternRe.exec(pe)}ie+=pe.substring(x),ne.addText(ie)}function fe(){if(pe==="")return;let x=null;if(typeof Ee.subLanguage=="string"){if(!e[Ee.subLanguage]){ne.addText(pe);return}x=d(Ee.subLanguage,pe,!0,ve[Ee.subLanguage]),ve[Ee.subLanguage]=x._top}else x=h(pe,Ee.subLanguage.length?Ee.subLanguage:null);Ee.relevance>0&&(ke+=x.relevance),ne.__addSublanguage(x._emitter,x.language)}function te(){Ee.subLanguage!=null?fe():oe(),pe=""}function ue(x,X){x!==""&&(ne.startScope(X),ne.addText(x),ne.endScope())}function Ne(x,X){let ie=1;const re=X.length-1;for(;ie<=re;){if(!x._emit[ie]){ie++;continue}const _e=ce.classNameAliases[x[ie]]||x[ie],qe=X[ie];_e?ue(qe,_e):(pe=qe,oe(),pe=""),ie++}}function ae(x,X){return x.scope&&typeof x.scope=="string"&&ne.openNode(ce.classNameAliases[x.scope]||x.scope),x.beginScope&&(x.beginScope._wrap?(ue(pe,ce.classNameAliases[x.beginScope._wrap]||x.beginScope._wrap),pe=""):x.beginScope._multi&&(Ne(x.beginScope,X),pe="")),Ee=Object.create(x,{parent:{value:Ee}}),Ee}function $e(x,X,ie){let re=d0(x.endRe,ie);if(re){if(x["on:end"]){const _e=new La(x);x["on:end"](X,_e),_e.isMatchIgnored&&(re=!1)}if(re){for(;x.endsParent&&x.parent;)x=x.parent;return x}}if(x.endsWithParent)return $e(x.parent,X,ie)}function De(x){return Ee.matcher.regexIndex===0?(pe+=x[0],1):(Le=!0,0)}function je(x){const X=x[0],ie=x.rule,re=new La(ie),_e=[ie.__beforeBegin,ie["on:begin"]];for(const qe of _e)if(qe&&(qe(x,re),re.isMatchIgnored))return De(X);return ie.skip?pe+=X:(ie.excludeBegin&&(pe+=X),te(),!ie.returnBegin&&!ie.excludeBegin&&(pe=X)),ae(ie,x),ie.returnBegin?0:X.length}function Pe(x){const X=x[0],ie=V.substring(x.index),re=$e(Ee,x,ie);if(!re)return Fa;const _e=Ee;Ee.endScope&&Ee.endScope._wrap?(te(),ue(X,Ee.endScope._wrap)):Ee.endScope&&Ee.endScope._multi?(te(),Ne(Ee.endScope,x)):_e.skip?pe+=X:(_e.returnEnd||_e.excludeEnd||(pe+=X),te(),_e.excludeEnd&&(pe=X));do Ee.scope&&ne.closeNode(),!Ee.skip&&!Ee.subLanguage&&(ke+=Ee.relevance),Ee=Ee.parent;while(Ee!==re.parent);return re.starts&&ae(re.starts,x),_e.returnEnd?0:X.length}function Te(){const x=[];for(let X=Ee;X!==ce;X=X.parent)X.scope&&x.unshift(X.scope);x.forEach(X=>ne.openNode(X))}let ze={};function ee(x,X){const ie=X&&X[0];if(pe+=x,ie==null)return te(),0;if(ze.type==="begin"&&X.type==="end"&&ze.index===X.index&&ie===""){if(pe+=V.slice(X.index,X.index+1),!o){const re=new Error(`0 width match regex (${L})`);throw re.languageName=L,re.badRule=ze.rule,re}return 1}if(ze=X,X.type==="begin")return je(X);if(X.type==="illegal"&&!F){const re=new Error('Illegal lexeme "'+ie+'" for mode "'+(Ee.scope||"<unnamed>")+'"');throw re.mode=Ee,re}else if(X.type==="end"){const re=Pe(X);if(re!==Fa)return re}if(X.type==="illegal"&&ie==="")return 1;if(be>1e5&&be>X.index*3)throw new Error("potential infinite loop, way more iterations than matches");return pe+=ie,ie.length}const ce=P(L);if(!ce)throw In(r.replace("{}",L)),new Error('Unknown language: "'+L+'"');const He=Y0(ce);let Be="",Ee=Z||He;const ve={},ne=new l.__emitter(l);Te();let pe="",ke=0,se=0,be=0,Le=!1;try{if(ce.__emitTokens)ce.__emitTokens(V,ne);else{for(Ee.matcher.considerAll();;){be++,Le?Le=!1:Ee.matcher.considerAll(),Ee.matcher.lastIndex=se;const x=Ee.matcher.exec(V);if(!x)break;const X=V.substring(se,x.index),ie=ee(X,x);se=x.index+ie}ee(V.substring(se))}return ne.finalize(),Be=ne.toHTML(),{language:L,value:Be,relevance:ke,illegal:!1,_emitter:ne,_top:Ee}}catch(x){if(x.message&&x.message.includes("Illegal"))return{language:L,value:ur(V),illegal:!0,relevance:0,_illegalBy:{message:x.message,index:se,context:V.slice(se-100,se+100),mode:x.mode,resultSoFar:Be},_emitter:ne};if(o)return{language:L,value:ur(V),illegal:!1,relevance:0,errorRaised:x,_emitter:ne,_top:Ee};throw x}}function p(L){const V={value:ur(L),illegal:!1,relevance:0,_top:s,_emitter:new l.__emitter(l)};return V._emitter.addText(L),V}function h(L,V){V=V||l.languages||Object.keys(e);const F=p(L),Z=V.filter(P).filter(W).map(te=>d(te,L,!1));Z.unshift(F);const Y=Z.sort((te,ue)=>{if(te.relevance!==ue.relevance)return ue.relevance-te.relevance;if(te.language&&ue.language){if(P(te.language).supersetOf===ue.language)return 1;if(P(ue.language).supersetOf===te.language)return-1}return 0}),[B,oe]=Y,fe=B;return fe.secondBest=oe,fe}function _(L,V,F){const Z=V&&n[V]||F;L.classList.add("hljs"),L.classList.add(`language-${Z}`)}function m(L){let V=null;const F=c(L);if(a(F))return;if(Q("before:highlightElement",{el:L,language:F}),L.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",L);return}if(L.children.length>0&&(l.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(L)),l.throwUnescapedHTML))throw new J0("One of your code blocks includes unescaped HTML.",L.innerHTML);V=L;const Z=V.textContent,Y=F?f(Z,{language:F,ignoreIllegals:!0}):h(Z);L.innerHTML=Y.value,L.dataset.highlighted="yes",_(L,F,Y.language),L.result={language:Y.language,re:Y.relevance,relevance:Y.relevance},Y.secondBest&&(L.secondBest={language:Y.secondBest.language,relevance:Y.secondBest.relevance}),Q("after:highlightElement",{el:L,result:Y,text:Z})}function S(L){l=Ba(l,L)}const b=()=>{j(),Qn("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function E(){j(),Qn("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let N=!1;function j(){if(document.readyState==="loading"){N=!0;return}document.querySelectorAll(l.cssSelector).forEach(m)}function I(){N&&j()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",I,!1);function A(L,V){let F=null;try{F=V(t)}catch(Z){if(In("Language definition for '{}' could not be registered.".replace("{}",L)),o)In(Z);else throw Z;F=s}F.name||(F.name=L),e[L]=F,F.rawDefinition=V.bind(null,t),F.aliases&&J(F.aliases,{languageName:L})}function M(L){delete e[L];for(const V of Object.keys(n))n[V]===L&&delete n[V]}function D(){return Object.keys(e)}function P(L){return L=(L||"").toLowerCase(),e[L]||e[n[L]]}function J(L,{languageName:V}){typeof L=="string"&&(L=[L]),L.forEach(F=>{n[F.toLowerCase()]=V})}function W(L){const V=P(L);return V&&!V.disableAutodetect}function T(L){L["before:highlightBlock"]&&!L["before:highlightElement"]&&(L["before:highlightElement"]=V=>{L["before:highlightBlock"](Object.assign({block:V.el},V))}),L["after:highlightBlock"]&&!L["after:highlightElement"]&&(L["after:highlightElement"]=V=>{L["after:highlightBlock"](Object.assign({block:V.el},V))})}function G(L){T(L),i.push(L)}function K(L){const V=i.indexOf(L);V!==-1&&i.splice(V,1)}function Q(L,V){const F=L;i.forEach(function(Z){Z[F]&&Z[F](V)})}function U(L){return Qn("10.7.0","highlightBlock will be removed entirely in v12.0"),Qn("10.7.0","Please use highlightElement now."),m(L)}Object.assign(t,{highlight:f,highlightAuto:h,highlightAll:j,highlightElement:m,highlightBlock:U,configure:S,initHighlighting:b,initHighlightingOnLoad:E,registerLanguage:A,unregisterLanguage:M,listLanguages:D,getLanguage:P,registerAliases:J,autoDetection:W,inherit:Ba,addPlugin:G,removePlugin:K}),t.debugMode=function(){o=!1},t.safeMode=function(){o=!0},t.versionString=Z0,t.regex={concat:Bn,lookahead:Yc,either:Zr,optional:f0,anyNumberOfTimes:u0};for(const L in ao)typeof ao[L]=="object"&&Gc(ao[L]);return Object.assign(t,ao),t},pi=nu({});pi.newInstance=()=>nu({});var X0=pi;pi.HighlightJS=pi;pi.default=pi;const gt=gi(X0);function x0(t){t.lineNumbersBlock=function(e,n){t.highlightBlock(e,n),e.innerHTML=s$(e,n)}}var e$="hljs-ln",ja="hljs-ln-line",iu="hljs-ln-code",t$="hljs-ln-numbers",n$="hljs-ln-n",po="data-line-number",ou=/\r\n|\r|\n/g;function i$(t){for(var e=t;e;){if(e.className&&e.className.indexOf("hljs-ln-code")!==-1)return!0;e=e.parentNode}return!1}function o$(t){for(var e=t;e.nodeName!=="TABLE";)e=e.parentNode;return e}function r$(t){for(var e=t.toString(),n=t.anchorNode;n.nodeName!=="TD";)n=n.parentNode;for(var i=t.focusNode;i.nodeName!=="TD";)i=i.parentNode;var o=parseInt(n.dataset.lineNumber,10),r=parseInt(i.dataset.lineNumber,10);if(o!==r){var s=n.textContent,l=i.textContent;if(o>r){var a=o;o=r,r=a,a=s,s=l,l=a}for(;e.indexOf(s)!==0;)s=s.slice(1);for(;e.lastIndexOf(l)===-1;)l=l.slice(0,-1);for(var c=s,f=o$(n),d=o+1;d<r;++d){var p=`.${iu}[${po}="${d}"]`,h=f.querySelector(p);c+=`
`+h.textContent}return c+=`
`+l,c}else return e}document.addEventListener("copy",function(t){var e=window.getSelection();if(i$(e.anchorNode)){var n;window.navigator.userAgent.indexOf("Edge")!==-1?n=r$(e):n=e.toString(),t.clipboardData.setData("text/plain",n),t.preventDefault()}});function s$(t,e){e=e||{singleLine:!1};var n=e.singleLine?0:1;return ru(t),l$(t.innerHTML,n)}function l$(t,e){var n=su(t);if(n[n.length-1].trim()===""&&n.pop(),n.length>e){for(var i="",o=0,r=n.length;o<r;o++){let s=o+1;i+=`<tr><td class="${ja} ${t$}" ${po}="${s}"><div class="${n$}" ${po}="${s}"></div></td><td class="${ja} ${iu}" ${po}="${s}">`+(n[o].length>0?n[o]:" ")+"</td></tr>"}return`<table class="${e$}">${i}</table>`}return t}function ru(t){var e=t.childNodes;for(var n in e)if(Object.hasOwn(e,n)){var i=e[n];c$(i.textContent)>0&&(i.childNodes.length>0?ru(i):a$(i.parentNode))}}function a$(t){var e=t.className;if(/hljs-/.test(e)){for(var n=su(t.innerHTML),i=0,o="";i<n.length;i++){var r=n[i].length>0?n[i]:" ";o+=`<span class="${e}">${r}</span>
`}t.innerHTML=o.trim()}}function su(t){return t.length===0?[]:t.split(ou)}function c$(t){return(t.trim().match(ou)||[]).length}function u$(t){return{name:"Dockerfile",aliases:["docker"],case_insensitive:!0,keywords:["from","maintainer","expose","env","arg","user","onbuild","stopsignal"],contains:[t.HASH_COMMENT_MODE,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,t.NUMBER_MODE,{beginKeywords:"run cmd entrypoint volume add copy workdir label healthcheck shell",starts:{end:/[^\\]$/,subLanguage:"bash"}}],illegal:"</"}}const za="[A-Za-z$_][0-9A-Za-z$_]*",f$=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],p$=["true","false","null","undefined","NaN","Infinity"],lu=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],au=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],cu=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],d$=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],h$=[].concat(cu,lu,au);function _$(t){const e=t.regex,n=(V,{after:F})=>{const Z="</"+V[0].slice(1);return V.input.indexOf(Z,F)!==-1},i=za,o={begin:"<>",end:"</>"},r=/<[A-Za-z0-9\\._:-]+\s*\/>/,s={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(V,F)=>{const Z=V[0].length+V.index,Y=V.input[Z];if(Y==="<"||Y===","){F.ignoreMatch();return}Y===">"&&(n(V,{after:Z})||F.ignoreMatch());let B;const oe=V.input.substring(Z);if(B=oe.match(/^\s*=/)){F.ignoreMatch();return}if((B=oe.match(/^\s+extends\s+/))&&B.index===0){F.ignoreMatch();return}}},l={$pattern:za,keyword:f$,literal:p$,built_in:h$,"variable.language":d$},a="[0-9](_?[0-9])*",c=`\\.(${a})`,f="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",d={className:"number",variants:[{begin:`(\\b(${f})((${c})|\\.)?|(${c}))[eE][+-]?(${a})\\b`},{begin:`\\b(${f})\\b((${c})\\b|\\.)?|(${c})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},p={className:"subst",begin:"\\$\\{",end:"\\}",keywords:l,contains:[]},h={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"xml"}},_={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"css"}},m={begin:"gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"graphql"}},S={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,p]},E={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:i+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},N=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,h,_,m,S,{match:/\$\d+/},d];p.contains=N.concat({begin:/\{/,end:/\}/,keywords:l,contains:["self"].concat(N)});const j=[].concat(E,p.contains),I=j.concat([{begin:/\(/,end:/\)/,keywords:l,contains:["self"].concat(j)}]),A={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:I},M={variants:[{match:[/class/,/\s+/,i,/\s+/,/extends/,/\s+/,e.concat(i,"(",e.concat(/\./,i),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,i],scope:{1:"keyword",3:"title.class"}}]},D={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...lu,...au]}},P={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},J={variants:[{match:[/function/,/\s+/,i,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[A],illegal:/%/},W={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function T(V){return e.concat("(?!",V.join("|"),")")}const G={match:e.concat(/\b/,T([...cu,"super","import"]),i,e.lookahead(/\(/)),className:"title.function",relevance:0},K={begin:e.concat(/\./,e.lookahead(e.concat(i,/(?![0-9A-Za-z$_(])/))),end:i,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},Q={match:[/get|set/,/\s+/,i,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},A]},U="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",L={match:[/const|var|let/,/\s+/,i,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(U)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[A]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:l,exports:{PARAMS_CONTAINS:I,CLASS_REFERENCE:D},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),P,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,h,_,m,S,E,{match:/\$\d+/},d,D,{className:"attr",begin:i+e.lookahead(":"),relevance:0},L,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[E,t.REGEXP_MODE,{className:"function",begin:U,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:I}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:o.begin,end:o.end},{match:r},{begin:s.begin,"on:begin":s.isTrulyOpeningTag,end:s.end}],subLanguage:"xml",contains:[{begin:s.begin,end:s.end,skip:!0,contains:["self"]}]}]},J,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[A,t.inherit(t.TITLE_MODE,{begin:i,className:"title.function"})]},{match:/\.\.\./,relevance:0},K,{match:"\\$"+i,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[A]},G,W,M,Q,{match:/\$[(.]/}]}}function m$(t){const e=t.regex,n={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},i={begin:"^[-\\*]{3,}",end:"$"},o={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},r={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},s={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},l=/[A-Za-z][A-Za-z0-9+.-]*/,a={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:e.concat(/\[.+?\]\(/,l,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},c={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},f={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},d=t.inherit(c,{contains:[]}),p=t.inherit(f,{contains:[]});c.contains.push(p),f.contains.push(d);let h=[n,a];return[c,f,d,p].forEach(S=>{S.contains=S.contains.concat(h)}),h=h.concat(c,f),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:h},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:h}]}]},n,r,c,f,{className:"quote",begin:"^>\\s+",contains:h,end:"$"},o,i,a,s]}}function g$(t){return{name:"Mojolicious",subLanguage:"xml",contains:[{className:"meta",begin:"^__(END|DATA)__$"},{begin:"^\\s*%{1,2}={0,2}",end:"$",subLanguage:"perl"},{begin:"<%{1,2}={0,2}",end:"={0,1}%>",subLanguage:"perl",excludeBegin:!0,excludeEnd:!0}]}}function b$(t){const e=t.regex,n=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],i=/[dualxmsipngr]{0,12}/,o={$pattern:/[\w.]+/,keyword:n.join(" ")},r={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:o},s={begin:/->\{/,end:/\}/},l={variants:[{begin:/\$\d/},{begin:e.concat(/[$%@](\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@][^\s\w{]/,relevance:0}]},a=[t.BACKSLASH_ESCAPE,r,l],c=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],f=(h,_,m="\\1")=>{const S=m==="\\1"?m:e.concat(m,_);return e.concat(e.concat("(?:",h,")"),_,/(?:\\.|[^\\\/])*?/,S,/(?:\\.|[^\\\/])*?/,m,i)},d=(h,_,m)=>e.concat(e.concat("(?:",h,")"),_,/(?:\\.|[^\\\/])*?/,m,i),p=[l,t.HASH_COMMENT_MODE,t.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),s,{className:"string",contains:a,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},{className:"number",begin:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",relevance:0},{begin:"(\\/\\/|"+t.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[t.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:f("s|tr|y",e.either(...c,{capture:!0}))},{begin:f("s|tr|y","\\(","\\)")},{begin:f("s|tr|y","\\[","\\]")},{begin:f("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:d("(?:m|qr)?",/\//,/\//)},{begin:d("m|qr",e.either(...c,{capture:!0}),/\1/)},{begin:d("m|qr",/\(/,/\)/)},{begin:d("m|qr",/\[/,/\]/)},{begin:d("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return r.contains=p,s.contains=p,{name:"Perl",aliases:["pl","pm"],keywords:o,contains:p}}const v$=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),$$=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],w$=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],k$=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],y$=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],S$=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function E$(t){const e=v$(t),n=y$,i=k$,o="@[a-z-]+",r="and or not only",l={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,e.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+$$.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+i.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n.join("|")+")"},l,{begin:/\(/,end:/\)/,contains:[e.CSS_NUMBER_MODE]},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+S$.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[e.BLOCK_COMMENT,l,e.HEXCOLOR,e.CSS_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,e.IMPORTANT,e.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:o,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:r,attribute:w$.join(" ")},contains:[{begin:o,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},l,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,e.HEXCOLOR,e.CSS_NUMBER_MODE]},e.FUNCTION_DISPATCH]}}function C$(t){const e=t.regex,n=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),i=/[\p{L}0-9._:-]+/u,o={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},r={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},s=t.inherit(r,{begin:/\(/,end:/\)/}),l=t.inherit(t.APOS_STRING_MODE,{className:"string"}),a=t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),c={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:i,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[o]},{begin:/'/,end:/'/,contains:[o]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[r,a,l,s,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[r,s,a,l]}]}]},t.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},o,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[a]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[c],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[c],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(n,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:c}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function A$(t){const r={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:r,illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"string",variants:[t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{begin:t.C_NUMBER_RE+"[i]",relevance:1},t.C_NUMBER_MODE]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[t.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:r,illegal:/["']/}]}]}}function O$(t){const e=t.regex,n={className:"variable",variants:[{begin:/\$\d+/},{begin:/\$\{\w+\}/},{begin:e.concat(/[$@]/,t.UNDERSCORE_IDENT_RE)}]},o={endsWithParent:!0,keywords:{$pattern:/[a-z_]{2,}|\/dev\/poll/,literal:["on","off","yes","no","true","false","none","blocked","debug","info","notice","warn","error","crit","select","break","last","permanent","redirect","kqueue","rtsig","epoll","poll","/dev/poll"]},relevance:0,illegal:"=>",contains:[t.HASH_COMMENT_MODE,{className:"string",contains:[t.BACKSLASH_ESCAPE,n],variants:[{begin:/"/,end:/"/},{begin:/'/,end:/'/}]},{begin:"([a-z]+):/",end:"\\s",endsWithParent:!0,excludeEnd:!0,contains:[n]},{className:"regexp",contains:[t.BACKSLASH_ESCAPE,n],variants:[{begin:"\\s\\^",end:"\\s|\\{|;",returnEnd:!0},{begin:"~\\*?\\s+",end:"\\s|\\{|;",returnEnd:!0},{begin:"\\*(\\.[a-z\\-]+)+"},{begin:"([a-z\\-]+\\.)+\\*"}]},{className:"number",begin:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{className:"number",begin:"\\b\\d+[kKmMgGdshdwy]?\\b",relevance:0},n]};return{name:"Nginx config",aliases:["nginxconf"],contains:[t.HASH_COMMENT_MODE,{beginKeywords:"upstream location",end:/;|\{/,contains:o.contains,keywords:{section:"upstream location"}},{className:"section",begin:e.concat(t.UNDERSCORE_IDENT_RE+e.lookahead(/\s+\{/)),relevance:0},{begin:e.lookahead(t.UNDERSCORE_IDENT_RE+"\\s"),end:";|\\{",contains:[{className:"attribute",begin:t.UNDERSCORE_IDENT_RE,starts:o}],relevance:0}],illegal:"[^\\s\\}\\{]"}}function N$(t){const e=t.regex,n=/[\p{XID_Start}_]\p{XID_Continue}*/u,i=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],l={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:i,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},a={className:"meta",begin:/^(>>>|\.\.\.) /},c={className:"subst",begin:/\{/,end:/\}/,keywords:l,illegal:/#/},f={begin:/\{\{/,relevance:0},d={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,a],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,a],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,a,f,c]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,a,f,c]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[t.BACKSLASH_ESCAPE,f,c]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,f,c]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},p="[0-9](_?[0-9])*",h=`(\\b(${p}))?\\.(${p})|\\b(${p})\\.`,_=`\\b|${i.join("|")}`,m={className:"number",relevance:0,variants:[{begin:`(\\b(${p})|(${h}))[eE][+-]?(${p})[jJ]?(?=${_})`},{begin:`(${h})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${_})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${_})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${_})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${_})`},{begin:`\\b(${p})[jJ](?=${_})`}]},S={className:"comment",begin:e.lookahead(/# type:/),end:/$/,keywords:l,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},b={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:["self",a,m,d,t.HASH_COMMENT_MODE]}]};return c.contains=[d,m,a],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:l,illegal:/(<\/|\?)|=>/,contains:[a,m,{begin:/\bself\b/},{beginKeywords:"if",relevance:0},d,S,t.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[b]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[m,b,d]}]}}function T$(t){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}const M$=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),R$=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],L$=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],I$=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],P$=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],D$=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function U$(t){const e=t.regex,n=M$(t),i={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},o="and or not only",r=/@-?\w[\w]*(-\w+)*/,s="[a-zA-Z-][a-zA-Z0-9_-]*",l=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,i,n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+s,relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+I$.join("|")+")"},{begin:":(:)?("+P$.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+D$.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...l,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...l,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:r},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:o,attribute:L$.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...l,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+R$.join("|")+")\\b"}]}}function B$(t){const e=t.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:e.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:e.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function F$(t){const e=t.regex,n="HTTP/([32]|1\\.[01])",i=/[A-Za-z][A-Za-z0-9-]*/,o={className:"attribute",begin:e.concat("^",i,"(?=\\:\\s)"),starts:{contains:[{className:"punctuation",begin:/: /,relevance:0,starts:{end:"$",relevance:0}}]}},r=[o,{begin:"\\n\\n",starts:{subLanguage:[],endsWithParent:!0}}];return{name:"HTTP",aliases:["https"],illegal:/\S/,contains:[{begin:"^(?="+n+" \\d{3})",end:/$/,contains:[{className:"meta",begin:n},{className:"number",begin:"\\b\\d{3}\\b"}],starts:{end:/\b\B/,illegal:/\S/,contains:r}},{begin:"(?=^[A-Z]+ (.*?) "+n+"$)",end:/$/,contains:[{className:"string",begin:" ",end:" ",excludeBegin:!0,excludeEnd:!0},{className:"meta",begin:n},{className:"keyword",begin:"[A-Z]+"}],starts:{end:/\b\B/,illegal:/\S/,contains:r}},t.inherit(o,{relevance:0})]}}function j$(t){const e="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",i={className:"attr",variants:[{begin:"\\w[\\w :\\/.-]*:(?=[ 	]|$)"},{begin:'"\\w[\\w :\\/.-]*":(?=[ 	]|$)'},{begin:"'\\w[\\w :\\/.-]*':(?=[ 	]|$)"}]},o={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},r={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[t.BACKSLASH_ESCAPE,o]},s=t.inherit(r,{variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),l="[0-9]{4}(-[0-9][0-9]){0,2}",a="([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?",c="(\\.[0-9]*)?",f="([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?",d={className:"number",begin:"\\b"+l+a+c+f+"\\b"},p={end:",",endsWithParent:!0,excludeEnd:!0,keywords:e,relevance:0},h={begin:/\{/,end:/\}/,contains:[p],illegal:"\\n",relevance:0},_={begin:"\\[",end:"\\]",contains:[p],illegal:"\\n",relevance:0},m=[i,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+t.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+t.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},t.HASH_COMMENT_MODE,{beginKeywords:e,keywords:{literal:e}},d,{className:"number",begin:t.C_NUMBER_RE+"\\b",relevance:0},h,_,r],S=[...m];return S.pop(),S.push(s),p.contains=S,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:m}}gt.registerLanguage("css",U$);gt.registerLanguage("diff",B$);gt.registerLanguage("dockerfile",u$);gt.registerLanguage("go",A$);gt.registerLanguage("http",F$);gt.registerLanguage("javascript",_$);gt.registerLanguage("markdown",m$);gt.registerLanguage("mojolicious",g$);gt.registerLanguage("nginx",O$);gt.registerLanguage("perl",b$);gt.registerLanguage("python",N$);gt.registerLanguage("scss",E$);gt.registerLanguage("shell",T$);gt.registerLanguage("xml",C$);gt.registerLanguage("yaml",j$);x0(gt);var uu={exports:{}};function Ha(t){let e=document.createElement("div");const n=[[t,e]],i=[];for(;n.length;){const[o,r]=n.shift();let s,l,a=typeof o;if(o===null||a=="undefined"?a="null":Array.isArray(o)&&(a="array"),a=="array")l=c=>c,l.len=o.length,s=document.createElement("div"),s.className="json-array "+(l.len?"has-items":"is-empty");else if(a=="object"){const c=Object.keys(o).sort();l=f=>c[f],l.len=c.length,s=document.createElement("div"),s.className="json-object "+(l.len?"has-items":"is-empty")}else s=document.createElement("span"),s.className="json-"+a,s.textContent=a=="null"?"null":a!="boolean"?o:o?"true":"false";if(l){const c=document.createElement("span");if(c.className="json-type",c.textContent=l.len?a+"["+l.len+"]":"{}",r.appendChild(c),i.indexOf(o)!=-1)e.classList.add("has-recursive-items"),s.classList.add("is-seen");else{for(let f=0;f<l.len;f++){const d=l(f),p=document.createElement("div"),h=document.createElement("span");h.className="json-key",h.textContent=d,p.appendChild(h),s.appendChild(p),n.push([o[d],p])}i.push(o)}}r.className="json-item "+s.className.replace(/^json-/,"contains-"),r.appendChild(s)}return e}try{uu.exports={jsonhtmlify:Ha}}catch{window.jsonhtmlify=Ha}var z$=uu.exports;function qa(t,e){const n=e.vars?tt.l(e.message,...e.vars):e.message;return t?tt.raw(n):tt.md(n)}const H$={};let q$=0;class W$ extends It{constructor(e){super();let n=e.connection_id;e.conversation_id&&(n+=":"+e.conversation_id),this.prop("ro","length",()=>this.messages.length),this.prop("ro","messages",[]),this.prop("rw","expandUrlToMedia",!0),this.prop("persist","raw",!1,{key:n+":raw"}),this.embedCache=H$}clear(){return this.messages.length=0,this.update({messages:!0})}get(e){return e<0?this.messages.slice(e)[0]:this.messages[e]}push(e){return[].push.apply(this.messages,this._fill(e)),this.update({messages:!0})}render(e=-1){if(e!==-1){const i=this.get(e);return i&&!i.hasBeenSeen&&(i.embeds=this._embeds(i),i.hasBeenSeen=!0,this.update({messages:!0})),this.messages}let n={};return this.messages.map((i,o)=>(i.index=o,i.embeds||(i.dayChanged=this._dayChanged(i,n),i.className=this._className(i,n),i.embeds=[],i.html=qa(this.raw,i)),n=i))}toArray(){return this.messages}update(e){if(this._changed(e,"expandUrlToMedia")||this._changed(e,"raw")){const n=Object.hasOwn(e,"raw")?e.raw:this.raw;for(let i of this.messages)i.hasBeenSeen&&(i.embeds=this._embeds(i)),i.html=qa(n,i);this.update({messages:!0})}return super.update(e)}unshift(e){return[].unshift.apply(this.messages,this._fill(e)),this.update({messages:!0})}_changed(e,n){return Object.hasOwn(e,n)&&e[n]!==this[n]}_className(e,n){const i=["message"];e.type&&i.push("is-type-"+e.type),e.highlight&&i.push("is-highlighted");const o=e.from===n.from&&e.conversation_id===n.conversation_id&&e.connection_id===n.connection_id;return i.push(!e.dayChanged&&o?"has-same-from":"has-not-same-from"),i.join(" ")}_dayChanged(e,n){return!!(n.ts&&e.ts.getDate()!==n.ts.getDate())}_embeds(e){const n=[];return this._msgDetails(e)&&n.push(Promise.resolve({className:"le-details",details:!0,nodes:[z$.jsonhtmlify(e.details).lastChild]})),!this.expandUrlToMedia||this.raw||e.type==="notice"?this._embedsPromises(n):((e.message.match(/https?:\/\/(\S+)/g)||[]).forEach(i=>{i=i.replace(/(\W)?$/,""),this.embedCache[i]||(this.embedCache[i]=this._loadEmbed(e,i)),n.push(this.embedCache[i])}),this._embedsPromises(n))}_embedsPromises(e){return e.map(n=>(n.finally(()=>this.update({messages:!0})),n.catch(i=>console.error("[Messages:embed]",i))))}_fill(e){for(let n=0;n<e.length;n++){const i=e[n];i.from||([i.internal,i.from]=[!0,"Convos"]),i.type||(i.type="notice"),i.color=i.from==="Convos"?"inherit":go(i.from.toLowerCase()),i.ts=new $t(i.ts),i.id=++q$}return e}_isProbablyConvosVideoLink(e){return!!e.match(/\/video\/[^/]+\/[^/]+($|\?)/)}async _loadEmbed(e,n){const o=(await nt.op("embed",{url:n}).perform()).res.body;if(o.nodes=[],o.provider=(o.provider_name||"").toLowerCase(),!o.html)return o;let r=document.createRange().createContextualFragment(o.html).firstChild;return r&&(r=this._renderVideoChat(e,o,r)||this._renderPaste(e,o,r)||r,vt(r,"img",["error",s=>s.target.style.display="none"]),vt(r,".le-goto-link",s=>s.parentNode.children.length===1&&s.parentNode.remove()),delete o.html,o.className=r.className,o.nodes=r.tagName.toLowerCase()==="iframe"?[r]:[].slice.call(r.childNodes,0)),o}_msgDetails(e){if(Object.hasOwn(e,"details"))return e.details;if(e.type!=="error"&&e.type!=="notice")return e.details=null;const n={...e.sent||e};return["bubbles","className","command","connection_id","dispatchTo","color","dayChanged","hasBeenSeen","embeds","event","fresh","highlight","html","id","index","internal","method","silent","stopPropagation","ts"].forEach(i=>delete n[i]),Object.keys(n).sort().join(":")==="from:message:type"?e.details=null:e.details=n}_renderPaste(e,n,i){const o=i.querySelector("pre");if(!o)return;const r=i.querySelector(".le-meta");return r&&r.appendChild(dc("a",{className:"prevent-default",href:"#action:expand:"+e.index,innerHTML:'<i class="fas fa-angle-down"/>'})),gt.lineNumbersBlock(o),i}_renderVideoChat(e,n,i){const o=new URL(n.url).pathname.replace(/\/+$/,"").split("/");if(!(o.length&&(i.classList.contains("le-video-chat")||this._isProbablyConvosVideoLink(n.url))))return;const l=decodeURIComponent(o.slice(-1)[0]).replace(/\s-\s[\w-]+$/,"").replace(/[_.-]+/g," ").replace(/([a-z ])([A-Z])/g,(c,f,d)=>f+" "+d.toUpperCase()).replace(/((?:^|[ ])\w)/g,c=>c.toUpperCase()),a=tt.l('Do you want to join the %1 video chat with "%2"?',n.provider_name,l);return i=document.createElement("div"),i.className="le-card le-rich le-join-request le-provider-"+n.provider,i.innerHTML='<a class="le-thumbnail" href="'+n.url+'" target="convos_video"><i class="fas fa-video"></i></a><h3>'+a+'</h3><p class="le-description"><a href="'+n.url+'" target="convos_video">'+tt.l("Yes, I want to join.")+"</a></p>",e.fresh&&this.emit("notify",{...e,message:a}),i}}class G$ extends It{constructor(){super(),this.prop("ro","length",()=>this._map.size),this.prop("ro","_map",new Map)}clear(){const e=this.me();return this._map.clear(),this.add(e),this}delete(e){return this._map.delete(this._id(e)),this.update({})}get(e){return this._map.get(this._id(e))}has(e){return this._map.has(this._id(e))}me(){return Array.from(this._map.values()).filter(e=>e.me)[0]||this._defaultParticipant()}nicks(){return Array.from(this._map.values()).map(e=>e.nick)}rename(e,n){const i=this.get(e)||{};return delete i.id,i.nick=n,this.delete(e),this.add(i)}add(e){if(Array.isArray(e))return e.forEach(i=>this.add(i)),this;e.id=this._id(e.nick),e.color=go(e.id),e.group=go(e.id),Ie.string(e.mode)?(e.modes=vr(Nh,e.mode),e.group=e.modes.founder?7:e.modes.admin?6:e.modes.operator?5:e.modes.half_operator?4:e.modes.voice?3:e.modes.bot?2:e.modes.service_bot?1:0):(e.modes={},e.group=0);const n=this._map.get(e.id);return n&&Object.keys(n).forEach(i=>e[i]||(e[i]=n[i])),e.nick||(e.nick=e.name),this._map.set(e.id,e),this.update({length:!0})}toArray(){return Array.from(this._map.values()).sort((e,n)=>n.group-e.group||e.nick.localeCompare(n.nick))}_defaultParticipant(){return{color:"#000000",id:"",modes:{},nick:""}}_id(e){return e.toLowerCase()}}const Xn=mi("socket"),di=t=>di.singletons[t]||(di.singletons[t]=new K$);di.singletons={};const qi=[];qi[WebSocket.CONNECTING]="connecting";qi[WebSocket.OPEN]="open";qi[WebSocket.CLOSING]="closing";qi[WebSocket.CLOSED]="closed";class K$ extends It{constructor(){super(),this.prop("ro","readyState",()=>this.ws.readyState),this.prop("ro","readyStateHuman",()=>qi[this.ws.readyState]),this.prop("ro","waiting",new Map),this.prop("rw","closed",0),this.prop("rw","error",""),this.prop("rw","keepaliveInterval",1e4),this.prop("rw","url",""),this.id=0,this.queue=[],this.keepClosed=!0,this._resetWebSocket()}close(e,n){return typeof e!="number"&&([e,n]=[1e3,e]),this.ws.close&&this.ws.close(e,n),this.keepClosed=!0,this._keepAliveStop(),this._reconnectStop(),this._resetWebSocket(),this}deflateMessage(e){return JSON.stringify(e)}deleteWaitingMessage(e){this.waiting.delete(e),this.update({waiting:!0})}getWaitingMessages(e){return arguments.length===0?Array.from(this.waiting.values()):e.map(n=>this.waiting.get(n))}inflateMessage(e){return JSON.parse(e)}is(e){return this.ws.readyState===WebSocket[e.toUpperCase()]}open(){if(this.ws.close)return this;try{if(!this.url)throw"Can't open WebSocket connection without URL.";this.ws=new WebSocket(this.url),this.ws.onclose=e=>this._onClose(e),this.ws.onerror=e=>this._onError(e),this.ws.onmessage=e=>this._onMessage(e),this.ws.onopen=e=>this._onOpen(e),this.keepClosed=!1,this._keepAliveStart(),this._reconnectStop(),this.update({error:"",readyState:!0})}catch(e){this._onError(e.message?e:{message:String(e)})}return this}reconnectIn(e){return e.code===1008||e.code===1011?!1:this.closed<=1?1e3:this.closed>5?1e4:1e3*(this.closed*2)}send(e,n){const i=e.id||String(++this.id);return this.queue.push({...e,id:i}),this.open(),this._dequeue(),n&&this.on("message_"+i,n),this}_dequeue(){const e=this.queue;for(e.length&&this.update({waiting:!0});e.length;){if(this.ws.readyState!==WebSocket.OPEN)return;const n=e.shift();Xn.trace("<<<",n),this.ws.send(this.deflateMessage(n)),n.waitingForResponse=!0,n.ts||(n.ts=new $t),this.waiting.set(n.id,n)}}_keepAliveStart(){this._keepAliveStop(),this.keepaliveTid=setInterval(()=>this.ws.readyState===WebSocket.OPEN&&this.ws.send("{}"),this.keepaliveInterval)}_keepAliveStop(){this.keepaliveTid&&clearTimeout(this.keepaliveTid),delete this.keepaliveTid}_onClose(e){Xn.debug("close",e);for(let[n,i]of this.waiting)Object.keys(i).length<=1&&this.waiting.delete(n),i.waitingForResponse=!1;this._keepAliveStop(),this._resetWebSocket(),this.update({closed:this.closed+1,readyState:!0,waiting:!0}),this._reconnectStart(this.reconnectIn(e))}_onError(e){let n=String(e.message||e);(!n||n.indexOf("[")===0)&&(n="Could not connect."),Xn.error("error",n,e),this.update({error:n})}_onMessage(e){const n=this.inflateMessage(e.data);if(Xn.trace(">>>",n),n.bubbles=!0,n.stopPropagation=()=>{n.bubbles=!1},n.id&&(this.emit("message_"+n.id,n),this.waiting.delete(n.id)),n.bubbles&&this.emit("message",n),this.update({waiting:!0}),!(!n.errors||n.id)){for(let i of this.waiting.keys())this.emit("message_"+i,n);this.waiting.clear()}}_onOpen(e){Xn.info("open",e),this.update({closed:0,error:"",readyState:!0}),this._dequeue()}_reconnectStart(e){if(this._reconnectStop(),Xn.info("reconnect in",e),e===!0)return this.open();if(typeof e!="number")return this.keepClosed=!0;this.reconnectTid=setTimeout(()=>this.open(),e)}_reconnectStop(){this.reconnectTid&&clearTimeout(this.reconnectTid),delete this.reconnectTid}_resetWebSocket(){this.ws={readyState:WebSocket.CLOSED}}}const Y$=new RegExp("^[#&]");class ji extends It{constructor(e){super();const n=[e.connection_id,e.conversation_id,""].filter(Ie.defined).join(":");this.prop("persist","userInput","",{key:n+"userInput"}),this.prop("ro","color",go(e.conversation_id||e.connection_id||"")),this.prop("ro","connection_id",e.connection_id||""),this.prop("ro","messages",new W$(e)),this.prop("ro","participants",new G$),this.prop("ro","path",Re.conversationPath(e)),this.prop("rw","historyStartAt",null),this.prop("rw","historyStopAt",null),this.prop("rw","info",e.info||{}),this.prop("rw","modes",{}),this.prop("rw","name",e.name||e.conversation_id||e.connection_id||"ERR"),this.prop("rw","notifications",e.notifications||0),this.prop("rw","status","pending"),this.prop("rw","topic",e.topic||""),this.prop("rw","unread",e.unread||0),Object.hasOwn(e,"conversation_id")?(this.prop("ro","conversation_id",e.conversation_id),this.prop("ro","title",()=>[this.name,this.connection_id.replace(/^\w+-/,"")].join(" - ")),this.prop("rw","frozen",e.frozen||"")):(this.prop("ro","frozen",()=>this._calculateFrozen()),this.prop("ro","title",()=>this.name)),e.conversation_id&&this.prop("persist","wantNotifications",this.is("private"),{key:e.conversation_id+":wantNotifications"}),this.socket=e.socket||di("/events"),this.messages.on("notify",i=>this.notify(i)),this._addOperations()}addMessages(e,n){if(!Array.isArray(e)){if(this._maybeIncreaseUnread(e),this._maybeNotify(e),!this.historyStopAt&&["action","private"].indexOf(e.type)!==-1)return;e.fresh=!0,e=[e]}return this.messages[n||"push"](e),this}is(e){return e==="connection"?!this.conversation_id:e==="conversation"?this.conversation_id&&!this.is("notifications"):e==="frozen"?this.frozen&&!0:e==="locked"?this.frozen==="Invalid password.":e==="not_found"?this.frozen==="Not found.":e==="notifications"?!1:e==="pending"?this.frozen.match(/pending invitation/i):e==="private"?this.conversation_id&&!Y$.test(this.conversation_id)||!1:e==="search"?!1:e==="unread"?this.unread&&!0:this.status===e}async load(e={}){if(this._skipLoad(e))return this;this.update({status:"loading"}),e.limit||(e.limit=40);const n={...e,connection_id:this.connection_id,conversation_id:this.conversation_id};await this.messagesOp.perform(n),this.update({status:this.messagesOp.status});const i=this.messagesOp.res.body;i.messages||(i.messages=[]);const o=[];return(e.around||!e.after&&!e.before)&&(o.push.apply(o,this.messages.toArray().filter(r=>r.internal)),this.messages.clear()),this.addMessages(i.messages,e.before?"unshift":"push"),this.addMessages(o,"push"),this._setEndOfStream(e,i),this}notify(e){if(bt.appHasFocus)return;const n=e.from===this.name?e.from:tt.l("%1 in %2",e.from,this.name);this.lastNotification=bt.show(e.message,{path:this.path,title:n})}send(e,n){return Ie.string(e)&&(e={message:e}),this.socket.send({method:"send",connection_id:this.connection_id,conversation_id:this.conversation_id||"",...e},n)}async markAsRead(){if(this.markAsReadOp)return this.update({notifications:0}),await this.markAsReadOp.perform({connection_id:this.connection_id,conversation_id:this.conversation_id}),this}update(e){return this._loadInformation(),super.update(e),(Object.hasOwn(e,"notifications")||Object.hasOwn(e,"unread"))&&this.emit("unread",e),this}wsEventMode(e){const n=["banlist","exceptlist","invitelist","quietlist"].filter(i=>e[i])[0];if(n){const i=e[n].length,o=i===1?"entry":"entries";this.addMessages({...e,message:"%1 has %2 "+o+" in %3.",vars:[this.name,i,tt.l(n)]})}else e.nick?(this.participants.add({nick:e.nick,mode:e.mode}),this.addMessages({...e,message:"%1 got mode %2 from %3.",vars:[e.nick,e.mode,e.from]})):e.mode_changed?(this.addMessages({...e,message:"%1 received mode %2.",vars:[this.name,e.mode]}),this.update({modes:Object.assign({},this.modes,vr(ii,e.mode))})):(this.addMessages({...e,message:"%1 got mode %2.",vars:[this.name,e.mode]}),this.update({modes:Object.assign({},this.modes,vr(ii,e.mode))}))}wsEventNickChange(e){if(!this.participants.has(e.old_nick)||e.old_nick===e.new_nick)return;this.participants.rename(e.old_nick,e.new_nick);const n=e.type==="me"?"You (%1) changed nick to %2.":"%1 changed nick to %2.";this.addMessages({message:n,vars:[e.old_nick,e.new_nick]})}wsEventPart(e){const n=this.participants.get(e.nick);!n||n.me||(this.participants.delete(e.nick),this.update({participants:!0}),e.silent||this.addMessages(this._partMessage(e)))}wsEventSentClear(e){e.errors||(this.messages.clear(),this.addMessages({message:"History was cleared for %1.",vars:[this.name]}))}wsEventSentNames(e){this.participants.add(e.participants);const n={...e,message:"Participants (%1): %2",vars:[]},i=this.participants.nicks();i.length>1&&(n.message+=" and %3.",n.vars[2]=i.pop()),n.vars[0]=i.length,n.vars[1]=i.join(", "),this.addMessages(n)}wsEventSentTopic(e){const n=e.topic?"Topic for %1 is: %2":"No topic is set for %1.";this.addMessages({message:n,vars:[this.name,e.topic]}),this.update({topic:e.topic})}_addOperations(){this.prop("ro","messagesOp",nt.op("conversationMessages")),this.prop("ro","markAsReadOp",nt.op("markConversationAsRead"))}_calculateFrozen(){return""}_loadInformation(){if(!(this.participantsLoaded||!this.conversation_id||!this.messagesOp)&&!(this.is("frozen")||!this.messagesOp.is("success")))if(this.participantsLoaded=!0,this.is("private")){if(this.info.ts&&this.info.ts>new $t().toEpoch()-300)return;this.send("/whois "+this.conversation_id,e=>{e.stopPropagation(),this.update({frozen:e.errors&&e.errors.length?e.errors[0].message:""})})}else this.send("/names "+this.conversation_id,e=>{e.stopPropagation(),this.participants.clear(),e.participants&&this.participants.add(e.participants)})}_maybeIncreaseUnread(e){if(!e.from||e.yourself)return this;if(["action","error","private"].indexOf(e.type)===-1)return this;this.update({unread:this.unread+1})}_maybeNotify(e){!e.from||e.yourself||["action","error","private"].indexOf(e.type)!==-1&&(!e.highlight&&!this.wantNotifications||this.notify(e))}_noop(){}_partMessage(e){const n={message:"%1 parted.",vars:[e.nick]};return e.kicker?(n.message="%1 was kicked by %2"+(e.message?": %3":""),n.vars.push(e.kicker),n.vars.push(e.message)):e.message&&(n.message+=" Reason: %2",n.vars.push(e.message)),n}_setEndOfStream(e,n){if(!e.before&&!n.after){const i=n.messages.slice(-1)[0];this.update({historyStopAt:new $t(i&&i.ts)})}if(!e.after&&!n.before){const i=n.messages[0];this.update({historyStartAt:new $t(i&&i.ts)})}n.after&&this.update({historyStopAt:null}),n.before&&this.update({historyStartAt:null}),n.messages&&n.messages.length<=1&&this.update({historyStartAt:new $t,historyStopAt:new $t})}_skipLoad(e){return!this.messagesOp||this.is("loading")?!0:this.messages.length?e.around?!!this.messages.toArray().find(n=>n.ts.toISOString()===e.around):!!(e.before&&this.historyStartAt||e.after&&this.historyStopAt):this.is("success")}}const V$=(t,e)=>t.name.localeCompare(e.name);class fu extends Map{constructor(e=[],n={}){super(e),this.sorter=n.sorter||V$,this._sort()}filter(e){return Array.from(this.values()).filter(e)}set(e,n){super.set.call(this,e,n),this._sort()}toArray(){return Array.from(this.values())}_sort(){const e=Array.from(this.entries()),n=this.sorter;return this.clear(),e.sort((i,o)=>n(i[1],o[1])).forEach(([i,o])=>super.set.call(this,i,o)),e}}const Z$=(t,e)=>t.is("private")-e.is("private")||t.name.localeCompare(e.name);class Wa extends ji{constructor(e){super(e),this.prop("rw","certificate",{}),this.prop("ro","conversations",new fu([],{sorter:Z$})),this.prop("rw","on_connect_commands",e.on_connect_commands||[]),this.prop("rw","state",e.state||"disconnected"),this.prop("rw","wanted_state",e.wanted_state||"connected"),this.prop("rw","url",Ie.string(e.url)?new gn(e.url):e.url||new gn("irc://localhost"));const n=this.url.searchParams.get("nick")||"guest";this.prop("rw","nick",n),this.prop("rw","real_host",this.url.hostname),this.prop("rw","server_op",!1),e.info&&this.wsEventInfo(e.info)}ensureConversation(e){let n=this.conversations.get(e.conversation_id);return n?n.update(e):(!e.frozen&&this.frozen&&(e.frozen=this.frozen),n=new ji({...e,connection_id:this.connection_id}),n.on("message",i=>this.emit("message",i)),n.on("update",()=>this.update({conversations:!0})),n.on("unread",()=>this.emit("unread")),e.frozen||this._addDefaultParticipants(n),this.conversations.set(n.conversation_id,n),this.update({conversations:!0}),this.emit("conversationadd",n),n)}findConversation(e){return this.conversations.get(e.conversation_id)||null}is(e){return this.state===e||super.is(e)}removeConversation(e){const n=this.findConversation(e)||e;return this.conversations.delete(n.conversation_id),this.emit("conversationremove",n),this.update({conversations:!0})}send(e){Ie.string(e)&&(e={message:e});const n=new RegExp("^"+this.participants.toArray().map(i=>bi(i.id)).join("|")+":","i");return e.message.indexOf("/")!==0&&!e.message.match(n)&&(e.message="/quote "+e.message),super.send(e)}update(e){return e.url&&Ie.string(e.url)&&(e.url=new gn(e.url)),super.update(e)}wsEventSentAway(e){(this.findConversation(e)||this).addMessages({message:e.reason,sent:e,type:"notice"})}wsEventConnection(e){this.update({state:e.state})}wsEventFrozen(e){const n=this.findConversation(e),i=n&&n.frozen,o=this.ensureConversation(e);!e.frozen&&i&&n.addMessages({message:"Connected.",vars:[]}),e.frozen||o.participants.add({nick:this.nick,me:!0}),e.frozen&&o.is("pending")&&bt.show(e.frozen,{title:e.name})}wsEventInfo(e){e.nick&&this.wsEventNickChange(e),e.server_op&&this.addMessages({message:"You are an IRC operator.",vars:[],highlight:!0}),e.real_host&&this.participants.add({nick:e.real_host}),this.update(e)}wsEventMessage(e){return e.yourself=e.from===this.nick,e.conversation_id?this.ensureConversation(e).addMessages(e):this.addMessages(e)}wsEventNickChange(e){const n={old_nick:e.old_nick||this.nick,new_nick:e.new_nick||e.nick,type:e.type};e.old_nick===this.nick&&(n.me=!0),super.wsEventNickChange(n),this.conversations.forEach(i=>i.wsEventNickChange(n))}wsEventError(e){const n={message:Ir(e)||e.frozen||"Unknown error from %1.",sent:e,type:"error",vars:e.command||[e.message]},i=(e.message||"").match(/^\/j(oin)? (\S+)/);if(i)return this.ensureConversation({...e,conversation_id:i[2]});const o=e.conversation_id&&e.frozen?this.ensureConversation(e):this.findConversation(e)||this;console.error(o.conversation_id,n),o.addMessages(n)}wsEventJoin(e){const n=this.ensureConversation({connection_id:e.connection_id,conversation_id:e.conversation_id}),i=e.nick||this.nick;i!==this.nick&&!e.silent&&n.addMessages({message:"%1 joined.",vars:[i]}),n.participants.add({nick:i})}wsEventPart(e){if(e.nick===this.nick)return this.removeConversation(e);e.conversation_id||this.conversations.forEach(n=>n.wsEventPart(e))}wsEventQuit(e){this.wsEventPart(e)}wsEventSentJoin(e){this.wsEventJoin(e)}wsEventSentList(e){const n=e.args||"/*/";this.addMessages(e.done?{message:"Found %1 of %2 conversations from %3.",vars:[e.conversations.length,e.n_conversations,n]}:{message:"Found %1 of %2 conversations from %3, but conversations are still loading.",vars:[e.conversations.length,e.n_conversations,n]})}wsEventSentMode(e){const n=this.findConversation(e);return n?n.wsEventMode(e):this.addMessages({message:"%1 received mode %2.",vars:[e.target,e.mode]})}wsEventSentQuery(e){this.ensureConversation(e)}wsEventSentWhois(e){const[n,...i]=Ui(e);(this.findConversation(e)||this).addMessages({message:n,vars:i,sent:e})}wsEventSentNames(){}_addDefaultParticipants(e){const n=[{nick:this.nick,me:!0}];e.is("private")&&n.push({nick:e.name}),e.participants.add(n)}_addOperations(){this.prop("ro","markAsReadOp",nt.op("markConnectionAsRead")),this.prop("ro","messagesOp",nt.op("connectionMessages"))}_calculateFrozen(){switch(this.state){case"connected":return"";case"connecting":return"Connecting...";case"disconnected":return"Disconnected.";case"disconnecting":return"Disconnecting...";case"unreachable":return"Unreachable.";default:return"Connecting..."}}}class J$ extends It{constructor(e){super(e),this.prop("ro","op",nt.op("listConnectionProfiles")),this.prop("rw","profiles",[]),this.prop("rw","status","pending")}find(e){return this.search(n=>n.id===e)[0]}defaultProfile(){return{max_bulk_message_size:3,max_message_length:512,url:new gn("irc://0.0.0.0")}}is(e){return this.status===e}async load(e={}){return this.is("loading")?this:!e.force&&this.profiles.length?this:(this.update({status:"loading"}),await this.op.perform(),this.update({status:this.op.status}),this.is("success")&&this.update({profiles:this.op.res.body.profiles.map(n=>this._expand(n))}),this)}search(e=()=>!0){return this.profiles.filter(e)}_expand(e){e.url=new gn(e.url),e.service_accounts=e.service_accounts.join(", "),e.url.toFields(e);const n=this.defaultProfile();return Object.keys(n).forEach(i=>Object.hasOwn(e,i)||(e[i]=n[i])),e}}class Q$ extends ji{constructor(e){super({...e,connection_id:"",conversation_id:"notifications",name:"Notifications"})}addMessages(e){return Array.isArray(e)||(e=[e]),this.messages.push(e),this}async markAsRead(){return await super.markAsRead(),this.emit("cleared"),this}is(e){return e==="notifications"?!0:super.is(e)}send(e={}){return Promise.resolve(e)}_addOperations(){this.prop("ro","markAsReadOp",nt.op("markNotificationsAsRead")),this.prop("ro","messagesOp",nt.op("notificationMessages"))}_skipLoad(){return!1}}class X$ extends ji{constructor(e){super({...e,connection_id:"",conversation_id:"search",name:"Search"}),this.prop("rw","query",""),this.update({status:"success"})}is(e){return e==="conversation"?!1:e==="search"?!0:super.is(e)}async load(e={}){if(this.is("loading"))return this;const n={...e};if(n.match=e.match||e.message,!(n.match||"").match(/\S/))return this.messages.clear().push([{message:'Search query "%1" does not contain anything to search for.',vars:[e.message]}]);this.update({query:n.match,status:"loading"}),this.messages.clear(),await this.messagesOp.perform(n);const i=this.messagesOp.res.body;return this.messages[n.before?"unshift":"push"](i.messages||[]),this.update({status:this.messagesOp.status})}send(e){return Ie.string(e)&&(e={message:e}),this.emit("send",e),Promise.resolve(e)}_addOperations(){this.prop("ro","messagesOp",nt.op("searchMessages")),this.prop("ro","markAsReadOp",null)}_loadInformation(){}}function x$(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),n=n>o?o:n,n<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var r=Array(o);++i<o;)r[i]=t[i+e];return r}var ew=x$,tw=ew;function nw(t,e,n){var i=t.length;return n=n===void 0?i:n,!e&&n>=i?t:tw(t,e,n)}var iw=nw,ow="\\ud800-\\udfff",rw="\\u0300-\\u036f",sw="\\ufe20-\\ufe2f",lw="\\u20d0-\\u20ff",aw=rw+sw+lw,cw="\\ufe0e\\ufe0f",uw="\\u200d",fw=RegExp("["+uw+ow+aw+cw+"]");function pw(t){return fw.test(t)}var pu=pw;function dw(t){return t.split("")}var hw=dw,du="\\ud800-\\udfff",_w="\\u0300-\\u036f",mw="\\ufe20-\\ufe2f",gw="\\u20d0-\\u20ff",bw=_w+mw+gw,vw="\\ufe0e\\ufe0f",$w="["+du+"]",Ar="["+bw+"]",Or="\\ud83c[\\udffb-\\udfff]",ww="(?:"+Ar+"|"+Or+")",hu="[^"+du+"]",_u="(?:\\ud83c[\\udde6-\\uddff]){2}",mu="[\\ud800-\\udbff][\\udc00-\\udfff]",kw="\\u200d",gu=ww+"?",bu="["+vw+"]?",yw="(?:"+kw+"(?:"+[hu,_u,mu].join("|")+")"+bu+gu+")*",Sw=bu+gu+yw,Ew="(?:"+[hu+Ar+"?",Ar,_u,mu,$w].join("|")+")",Cw=RegExp(Or+"(?="+Or+")|"+Ew+Sw,"g");function Aw(t){return t.match(Cw)||[]}var Ow=Aw,Nw=hw,Tw=pu,Mw=Ow;function Rw(t){return Tw(t)?Mw(t):Nw(t)}var Lw=Rw,Iw=iw,Pw=pu,Dw=Lw,Uw=zi;function Bw(t){return function(e){e=Uw(e);var n=Pw(e)?Dw(e):void 0,i=n?n[0]:e.charAt(0),o=n?Iw(n,1).join(""):e.slice(1);return i[t]()+o}}var Fw=Bw,jw=Fw,zw=jw("toUpperCase"),Hw=zw,qw=zi,Ww=Hw;function Gw(t){return Ww(qw(t).toLowerCase())}var Kw=Gw;function Yw(t,e,n,i){var o=-1,r=t==null?0:t.length;for(i&&r&&(n=t[++o]);++o<r;)n=e(n,t[o],o,t);return n}var Vw=Yw;function Zw(t){return function(e){return t==null?void 0:t[e]}}var Jw=Zw,Qw=Jw,Xw={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},xw=Qw(Xw),e2=xw,t2=e2,n2=zi,i2=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,o2="\\u0300-\\u036f",r2="\\ufe20-\\ufe2f",s2="\\u20d0-\\u20ff",l2=o2+r2+s2,a2="["+l2+"]",c2=RegExp(a2,"g");function u2(t){return t=n2(t),t&&t.replace(i2,t2).replace(c2,"")}var f2=u2,p2=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function d2(t){return t.match(p2)||[]}var h2=d2,_2=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function m2(t){return _2.test(t)}var g2=m2,vu="\\ud800-\\udfff",b2="\\u0300-\\u036f",v2="\\ufe20-\\ufe2f",$2="\\u20d0-\\u20ff",w2=b2+v2+$2,$u="\\u2700-\\u27bf",wu="a-z\\xdf-\\xf6\\xf8-\\xff",k2="\\xac\\xb1\\xd7\\xf7",y2="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",S2="\\u2000-\\u206f",E2=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ku="A-Z\\xc0-\\xd6\\xd8-\\xde",C2="\\ufe0e\\ufe0f",yu=k2+y2+S2+E2,Su="['’]",Ga="["+yu+"]",A2="["+w2+"]",Eu="\\d+",O2="["+$u+"]",Cu="["+wu+"]",Au="[^"+vu+yu+Eu+$u+wu+ku+"]",N2="\\ud83c[\\udffb-\\udfff]",T2="(?:"+A2+"|"+N2+")",M2="[^"+vu+"]",Ou="(?:\\ud83c[\\udde6-\\uddff]){2}",Nu="[\\ud800-\\udbff][\\udc00-\\udfff]",ti="["+ku+"]",R2="\\u200d",Ka="(?:"+Cu+"|"+Au+")",L2="(?:"+ti+"|"+Au+")",Ya="(?:"+Su+"(?:d|ll|m|re|s|t|ve))?",Va="(?:"+Su+"(?:D|LL|M|RE|S|T|VE))?",Tu=T2+"?",Mu="["+C2+"]?",I2="(?:"+R2+"(?:"+[M2,Ou,Nu].join("|")+")"+Mu+Tu+")*",P2="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",D2="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",U2=Mu+Tu+I2,B2="(?:"+[O2,Ou,Nu].join("|")+")"+U2,F2=RegExp([ti+"?"+Cu+"+"+Ya+"(?="+[Ga,ti,"$"].join("|")+")",L2+"+"+Va+"(?="+[Ga,ti+Ka,"$"].join("|")+")",ti+"?"+Ka+"+"+Ya,ti+"+"+Va,D2,P2,Eu,B2].join("|"),"g");function j2(t){return t.match(F2)||[]}var z2=j2,H2=h2,q2=g2,W2=zi,G2=z2;function K2(t,e,n){return t=W2(t),e=n?void 0:e,e===void 0?q2(t)?G2(t):H2(t):t.match(e)||[]}var Y2=K2,V2=Vw,Z2=f2,J2=Y2,Q2="['’]",X2=RegExp(Q2,"g");function x2(t){return function(e){return V2(J2(Z2(e).replace(X2,"")),t,"")}}var ek=x2,tk=Kw,nk=ek,ik=nk(function(t,e,n){return e=e.toLowerCase(),t+(n?tk(e):e)}),ok=ik;const rk=gi(ok);class sk extends It{constructor(e){super(),this.prop("ro","connections",new fu),this.prop("ro","connectionProfiles",new J$),this.prop("ro","notifications",new Q$({})),this.prop("ro","search",new X$({})),this.prop("ro","roles",new Set),this.prop("persist","expandUrlToMedia",!0),this.prop("persist","ignoreStatuses",!1),this.prop("persist","lastUrl",""),this.prop("rw","activeConversation",this.notifications),this.prop("rw","email",""),this.prop("rw","forced_connection",!1),this.prop("rw","default_connection","irc://irc.libera.chat:6697/%23convos"),this.prop("rw","highlightKeywords",[]),this.prop("rw","id",""),this.prop("rw","status","pending"),this.prop("rw","unreadIncludePrivateMessages",!1),this.socket=e.socket||di("/events"),this.socket.on("message",n=>this._dispatchMessage(n)),this.socket.on("update",n=>this._onConnectionChange(n)),this.notifications.on("cleared",()=>this._calculateUnread("clear")),this._calculateUnreadDebounced=Kr(this._calculateUnread,25)}conversations(e){const n=[];return this.connections.toArray().forEach(i=>{i.conversations.toArray().forEach(o=>{(!e||e(o))&&n.push(o)})}),n}ensureConversation(e,n){if(e.conversation_id){const o=this.ensureConversation({connection_id:e.connection_id},!0);return this._maybeUpgradeActiveConversation(o.ensureConversation(e))}let i=this.findConversation(e);return i?i.update(e):(i=new Wa({...e}),i.on("conversationadd",o=>this._maybeUpgradeActiveConversation(o)),i.on("conversationremove",o=>o===this.activeConversation&&this.setActiveConversation(o)),i.on("update",()=>this.update({connections:!0})),i.on("unread",()=>this._calculateUnreadDebounced()),this.connections.set(i.connection_id,i),this.update({connections:!0}),n?i:this._maybeUpgradeActiveConversation(i))}findConversation(e){const n=this.connections.get(e.connection_id);return e.conversation_id?n&&n.findConversation(e)||null:n}is(e){return Array.isArray(e)?!!e.filter(n=>this.is(n)).length:this.roles.has(e)?!0:this.status===e}async load(){if(this.is("loading"))return this;this.roles.clear(),this.update({status:"loading"});const n=await new Promise(o=>this.socket.send({method:"load",object:"user",params:{connections:!0,conversations:!0}},o));if(n.errors)return this.update({email:"",roles:!0,status:n.errors?"error":"success"});const i=n.user||{};return this.connections.clear(),(i.connections||[]).forEach(o=>this.ensureConversation({...o,status:"pending"})),(i.conversations||[]).forEach(o=>this.ensureConversation({...o,status:"pending"})),(i.roles||[]).forEach(o=>this.roles.add(o)),this.notifications.update({unread:i.unread||0}),ko.fromString(i.video_service||""),this.update({email:i.email||"",default_connection:i.default_connection||"",forced_connection:i.forced_connection||!1,highlightKeywords:i.highlight_keywords||[],roles:!0,status:n.errors?"error":"success",id:i.uid||""})}removeConversation(e){const n=this.findConversation({connection_id:e.connection_id});if(e.conversation_id)return n&&n.removeConversation(e);this.connections.delete(e.connection_id),n===this.activeConversation&&this.setActiveConversation(n),this.update({connections:!0})}setActiveConversation(e){let n=!e.connection_id&&!e.conversation_id&&this.notifications;if(n)return this.update({activeConversation:n});if(n=this.findConversation(e),n)return this.update({activeConversation:n});const i={...e,connection_id:e.connection_id||"",frozen:"Not found."};return["conversation_id","name"].forEach(o=>Object.hasOwn(e,o)&&(i[o]=e[o])),this.update({activeConversation:i.conversation_id?new ji(i):new Wa(i)})}update(e){return super.update(e),Object.hasOwn(e,"unreadIncludePrivateMessages")&&this._calculateUnreadDebounced(),this}_calculateUnread(e){let[n,i]=[0,0];for(const o of this.connections.toArray())for(const r of o.conversations.toArray())e&&r.update({notifications:0}),n+=r.is("private")?this.unreadIncludePrivateMessages?r.unread:0:r.notifications,i+=r.is("private")?0:r.notifications;e||(this.notifications.update({notifications:n,unread:i}),this.update({notifications:!0}))}_dispatchMessage(e){e.dispatchTo=rk("wsEvent_"+this._getEventNameFromMessage(e)),e.silent=this.ignoreStatuses,this.emit(e.dispatchTo,e);const n=this.findConversation({connection_id:e.connection_id});if(!n||(n[e.dispatchTo]&&n[e.dispatchTo](e),!e.bubbles))return;const i=n.findConversation(e);i&&i[e.dispatchTo]&&i[e.dispatchTo](e),e.highlight&&!i.is("private")&&(this.notifications.addMessages(e),i===this.activeConversation&&bt.appHasFocus?i.markAsRead():i.update({notifications:i.notifications+1}))}_getEventNameFromMessage(e){return e.errors?"error":e.event==="state"?e.type:e.event==="sent"&&e.message.match(/\/\S+/)?(e.command=e.message.split(/\s+/).filter(n=>n.length),e.command[0]=e.command[0].substring(1),"sent_"+e.command[0].toLowerCase()):e.event}_maybeUpgradeActiveConversation(e){const n=this.activeConversation;return!e.conversation_id||e.connection_id&&e.connection_id!==n.connection_id||e.conversation_id&&e.conversation_id!==n.conversation_id||this.update({activeConversation:e}),e}_onConnectionChange(e){if(e.is("open")&&this.is("pending"))return this.load();e.is("closed")&&(this.connections.forEach(n=>n.update({state:"unreachable"})),this.is(["error","loading"])||this.update({status:"pending"}))}}const{window:Nr}=zu;function lk(t){let e,n,i;function o(s){t[27](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new Wc({props:r}),de.push(()=>ge(e,"title",o)),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],me(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function ak(t){let e,n,i,o,r,s,l,a,c,f,d=(t[5]==="nav"||!t[2].isSingleColumn)&&Za(t);const p=[yk,kk,wk,$k,vk,bk,gk,mk,_k,hk,dk,pk,fk,uk],h=[];function _(S,b){return b[0]&16&&(n=null),b[0]&16&&(i=null),b[0]&16&&(o=null),b[0]&16&&(r=null),n==null&&(n=!!S[4].path.match(/\/chat\/./)),n?0:(i==null&&(i=S[4].path.indexOf("/chat")===0),i?1:S[4].path==="/help"?2:S[4].path==="/search"?3:S[4].path==="/settings"?4:S[4].path==="/settings/account"?5:S[4].path==="/settings/connections"?6:S[4].path==="/settings/files"?7:(o==null&&(o=S[4].path.indexOf("/settings/connection/")===0),o?8:(r==null&&(r=S[4].path.indexOf("/settings/connection-profile/")===0),r?9:S[4].path==="/settings/conversation"?10:S[4].path==="/settings/users"?11:S[4].path==="/login"||S[4].path==="/register"?12:13)))}s=_(t,[-1,-1]),l=h[s]=p[s](t);let m=t[5]&&t[2].haSingleColumn&&Ja(t);return{c(){d&&d.c(),e=C(),l.c(),a=C(),m&&m.c(),c=pt()},m(S,b){d&&d.m(S,b),w(S,e,b),h[s].m(S,b),w(S,a,b),m&&m.m(S,b),w(S,c,b),f=!0},p(S,b){S[5]==="nav"||!S[2].isSingleColumn?d?(d.p(S,b),b[0]&36&&v(d,1)):(d=Za(S),d.c(),v(d,1),d.m(e.parentNode,e)):d&&(ye(),y(d,1,1,()=>{d=null}),Se());let E=s;s=_(S,b),s===E?h[s].p(S,b):(ye(),y(h[E],1,1,()=>{h[E]=null}),Se(),l=h[s],l?l.p(S,b):(l=h[s]=p[s](S),l.c()),v(l,1),l.m(a.parentNode,a)),S[5]&&S[2].haSingleColumn?m?b[0]&36&&v(m,1):(m=Ja(S),m.c(),v(m,1),m.m(c.parentNode,c)):m&&(ye(),y(m,1,1,()=>{m=null}),Se())},i(S){f||(v(d),v(l),v(m),f=!0)},o(S){y(d),y(l),y(m),f=!1},d(S){S&&($(e),$(a),$(c)),d&&d.d(S),h[s].d(S),m&&m.d(S)}}}function ck(t){let e,n;return e=new qc({}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p:Oe,i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function Za(t){let e,n;return e=new o0({props:{transition:{duration:t[2].isSingleColumn?250:0,x:t[0]}}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o[0]&5&&(r.transition={duration:i[2].isSingleColumn?250:0,x:i[0]}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function uk(t){let e,n,i;function o(s){t[25](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new qc({props:r}),de.push(()=>ge(e,"title",o)),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],me(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function fk(t){let e,n,i;function o(s){t[24](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new Wc({props:r}),de.push(()=>ge(e,"title",o)),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],me(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function pk(t){let e,n,i;function o(s){t[23](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new Ev({props:r}),de.push(()=>ge(e,"title",o)),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],me(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function dk(t){let e,n,i;function o(s){t[22](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new w1({props:r}),de.push(()=>ge(e,"title",o)),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],me(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function hk(t){let e,n,i;function o(s){t[21](s)}let r={profile_id:t[4].pathParts[2]};return t[1]!==void 0&&(r.title=t[1]),e=new s1({props:r}),de.push(()=>ge(e,"title",o)),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};l[0]&16&&(a.profile_id=s[4].pathParts[2]),!n&&l[0]&2&&(n=!0,a.title=s[1],me(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function _k(t){let e,n,i;function o(s){t[20](s)}let r={connection_id:t[4].pathParts[2]};return t[1]!==void 0&&(r.title=t[1]),e=new f1({props:r}),de.push(()=>ge(e,"title",o)),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};l[0]&16&&(a.connection_id=s[4].pathParts[2]),!n&&l[0]&2&&(n=!0,a.title=s[1],me(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function mk(t){let e,n,i;function o(s){t[19](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new Uv({props:r}),de.push(()=>ge(e,"title",o)),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],me(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function gk(t){let e,n,i;function o(s){t[18](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new Ig({props:r}),de.push(()=>ge(e,"title",o)),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],me(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function bk(t){let e,n,i;function o(s){t[17](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new Gb({props:r}),de.push(()=>ge(e,"title",o)),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],me(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function vk(t){let e,n,i;function o(s){t[16](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new cv({props:r}),de.push(()=>ge(e,"title",o)),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],me(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function $k(t){let e,n,i;function o(s){t[15](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new Sb({props:r}),de.push(()=>ge(e,"title",o)),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],me(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function wk(t){let e,n,i;function o(s){t[14](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new j1({props:r}),de.push(()=>ge(e,"title",o)),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],me(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function kk(t){let e,n,i;function o(s){t[13](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new hb({props:r}),de.push(()=>ge(e,"title",o)),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],me(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function yk(t){let e,n,i;function o(s){t[12](s)}let r={connection_id:t[4].pathParts[1],conversation_id:t[4].pathParts[2]};return t[1]!==void 0&&(r.title=t[1]),e=new wg({props:r}),de.push(()=>ge(e,"title",o)),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};l[0]&16&&(a.connection_id=s[4].pathParts[1]),l[0]&16&&(a.conversation_id=s[4].pathParts[2]),!n&&l[0]&2&&(n=!0,a.title=s[1],me(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function Ja(t){let e,n,i,o,r;return{c(){e=g("a"),e.textContent=" ",k(e,"href","#hide"),k(e,"class","overlay")},m(s,l){w(s,e,l),i=!0,o||(r=Ce(e,"click",t[26]),o=!0)},i(s){i||(s&&at(()=>{i&&(n||(n=et(e,Bt,{duration:200},!0)),n.run(1))}),i=!0)},o(s){s&&(n||(n=et(e,Bt,{duration:200},!1)),n.run(0)),i=!1},d(s){s&&$(e),s&&n&&n.end(),o=!1,r()}}}function Sk(t){let e,n,i,o,r,s,l;at(t[11]);const a=[ck,ak,lk],c=[];function f(d,p){return p[0]&8&&(e=null),e==null&&(e=!!d[3].is(["loading","pending"])),e?0:d[3].email?1:2}return n=f(t,[-1,-1]),i=c[n]=a[n](t),{c(){i.c(),o=pt()},m(d,p){c[n].m(d,p),w(d,o,p),r=!0,s||(l=[Ce(Nr,"focus",t[10]),Ce(Nr,"resize",t[11])],s=!0)},p(d,p){let h=n;n=f(d,p),n===h?c[n].p(d,p):(ye(),y(c[h],1,1,()=>{c[h]=null}),Se(),i=c[n],i?i.p(d,p):(i=c[n]=a[n](d),i.c()),v(i,1),i.m(o.parentNode,o))},i(d){r||(v(i),r=!0)},o(d){y(i),r=!1},d(d){d&&$(o),c[n].d(d),s=!1,ut(l)}}}function Ek(t,e,n){let i,o,r,s,l;we(t,wt,Y=>n(5,i=Y)),we(t,Pn,Y=>n(2,o=Y)),we(t,Re,Y=>n(4,s=Y));const a=di("/events"),c=new r0().start();we(t,c,Y=>n(9,l=Y));const f=new sk({});we(t,f,Y=>n(3,r=Y));let d=Re.path,p=0,h={closed:!0},_=tt.l("Chat");a.update({debug:"WebSocket"}),window.convosWebSockeet=a,nt.url(Re.urlFor("/api")),Re.update({baseUrl:Ve("base_url"),enabled:!0}),a.update({url:Re.wsUrlFor("/events")}),f.on("wsEventSentJoin",Y=>Re.go(Re.conversationPath(Y))),S().catch(Y=>console.error("[serviceWorker]",Y)),Vo("socket",a),Vo("themeManager",c),Vo("user",f),bt.on("click",Y=>Y.path&&Re.go(Y.path)),a.on("update",E),tt.load().then(()=>f.load());function m(Y,B){if(!document)return;const oe=Ve("organization_name"),fe=B.notifications.notifications?"("+B.notifications.notifications+") ":"";document.title=oe==="Convos"?tt.l("%1 - Convos",fe+tt.l(Y)):tt.l("%1 - Convos for %2",fe+tt.l(Y),oe)}async function S(){if(!navigator.serviceWorker)return{};const Y=await navigator.serviceWorker.register(Re.urlFor("/sw.js")),B=await fetch(Re.urlFor("/sw/info")),oe=B.status==200&&await B.json()||{mode:"",version:"0.00"};if(oe.version==Ve("version"))return{};console.info("[serviceWorker.update]",Ve("version"),oe),Y.update()}async function b(Y,B){B.email&&tt.emojis.load(),ri[B.email?"add":"remove"]("notify"),await Di();const oe=B.is(["loading","pending"])||document.querySelector(".cms-main")?"cms":"app";if(document.body.className=document.body.className.replace(/for-\w+/,"for-"+oe),d!==Y.path&&(d=Y.path,ho(wt,i="",i)),Y.pathParts.length===0){const fe=B.email?B.lastUrl||"/chat":"/login";Y.go(fe,{replace:!0})}else B.email&&B.update({lastUrl:location.href})}function E(Y){if(Y.is("open"))return h.close&&h.close();const B=navigator.onLine===!1?tt.l("You seem to be offline."):Y.error?tt.l(Y.error):Y.is("connecting")?tt.l("Connecting to Convos..."):tt.l("Connection to Convos is %1.",tt.l(Y.readyStateHuman));h.body!==B&&(h.close&&h.close(),h=bt.showInApp(B,{closeAfter:-1,title:tt.l("Status")}))}const N=()=>f.email&&a.open();function j(){n(0,p=Nr.innerWidth)}function I(Y){_=Y,n(1,_)}function A(Y){_=Y,n(1,_)}function M(Y){_=Y,n(1,_)}function D(Y){_=Y,n(1,_)}function P(Y){_=Y,n(1,_)}function J(Y){_=Y,n(1,_)}function W(Y){_=Y,n(1,_)}function T(Y){_=Y,n(1,_)}function G(Y){_=Y,n(1,_)}function K(Y){_=Y,n(1,_)}function Q(Y){_=Y,n(1,_)}function U(Y){_=Y,n(1,_)}function L(Y){_=Y,n(1,_)}function V(Y){_=Y,n(1,_)}const F=()=>wt.set("");function Z(Y){_=Y,n(1,_)}return t.$$.update=()=>{t.$$.dirty[0]&512&&ri[l.compactDisplay?"add":"remove"]("compact-display"),t.$$.dirty[0]&24&&b(s,r),t.$$.dirty[0]&10&&m(_,r),t.$$.dirty[0]&1&&Pn.setWidth(p),t.$$.dirty[0]&4&&f.update({unreadIncludePrivateMessages:o.isSingleColumn})},[p,_,o,r,s,i,a,c,f,l,N,j,I,A,M,D,P,J,W,T,G,K,Q,U,L,V,F,Z]}class Ck extends Xe{constructor(e){super(),Qe(this,e,Ek,Sk,Ze,{},null,[-1,-1])}}class Ak extends It{constructor(e){super(),this.prop("ro","domain",e.domain||"meet.jit.si"),this.prop("ro","email",e.email||""),this.prop("rw","nick",e.nick||""),this.prop("rw","roomName",e.roomName||"convos-default"),this.prop("persist","disableAudioLevels",!0,{key:"video:disableAudioLevels"}),this.prop("persist","disableH264",!0,{key:"video:disableH264"}),this.prop("persist","resolution",720,{key:"video:resolution"})}async render(e){try{const n=[].slice.call(e.children,0);this.targetEl=e,this.jitsi=await this._load(),n.forEach(i=>i.remove()),e.className=e.className.replace(/cms-main/,"video-chat--wrapper"),document.querySelector(".cms-navbar").classList.add("is-full-width")}catch(n){console.error("[Jitsi]",{err:n});const i=document.querySelector(".video-error");i.querySelector("span").textContent=String(n).substring(0,350),i.classList.remove("hidden"),vt(document,".cms-main .fa-spin",o=>o.parentNode.classList.add("hidden"))}return this.jitsi?(document.addEventListener("keydown",n=>{n.code==="KeyC"&&this.jitsi.executeCommand("toggleChat"),n.code==="KeyD"&&this.jitsi.executeCommand("toggleShareScreen"),n.code==="KeyF"&&this.jitsi.executeCommand("toggleFilmStrip"),n.code==="KeyM"&&this.jitsi.executeCommand("toggleAudio"),n.code==="KeyR"&&this.jitsi.executeCommand("toggleRaiseHand"),n.code==="KeyV"&&this.jitsi.executeCommand("toggleVideo"),n.code==="KeyW"&&this.jitsi.executeCommand("toggleTileView"),n.code==="Space"&&this.jitsi.isAudioMuted().then(i=>i&&this.jitsi.executeCommand("toggleAudio"))}),document.addEventListener("keyup",n=>{n.code==="Space"&&this.jitsi.isAudioMuted().then(i=>i||this.jitsi.executeCommand("toggleAudio"))}),this):this}_configOverwrite(){return{disableAudioLevels:this.disableAudioLevels,disableH264:this.disableH264,enableWelcomePage:!this.nick,prejoinPageEnabled:!this.nick,minParticipants:1,resolution:this.resolution,analytics:{googleAnalyticsTrackingId:"",scriptURLs:[]},e2eping:{analyticsInterval:-1,pingInterval:-1}}}_interfaceConfigOverwrite(){return{DEFAULT_BACKGROUND:window.getComputedStyle(document.querySelector(".cms-navbar--wrapper")).backgroundColor||"#222222",DISABLE_FOCUS_INDICATOR:!0,DISABLE_DOMINANT_SPEAKER_INDICATOR:!0,DISABLE_VIDEO_BACKGROUND:!0,INITIAL_TOOLBAR_TIMEOUT:1e3,SHOW_CHROME_EXTENSION_BANNER:!0,TOOLBAR_ALWAYS_VISIBLE:!1,TOOLBAR_BUTTONS:["camera","chat","closedcaptions","desktop","etherpad","fodeviceselection","fullscreen","hangup","help","microphone","mute-everyone","profile","raisehand","security","settings","sharedvideo","shortcuts","stats","tileview"],TOOLBAR_TIMEOUT:2e3,VERTICAL_FILMSTRIP:!1,VIDEO_QUALITY_LABEL_DISABLED:!0}}async _load(){return await wf("https://"+this.domain+"/external_api.js"),new JitsiMeetExternalAPI(this.domain,this._options())}_options(){const e={};return this.email&&(e.email=this.email),this.nick&&(e.displayName=this.nick),{configOverwrite:this._configOverwrite(),interfaceConfigOverwrite:this._interfaceConfigOverwrite(),parentNode:this.targetEl,roomName:this.roomName,userInfo:e,height:"100%",width:"100%"}}}vt(document,"#hamburger_checkbox_toggle",t=>{t.checked=!1});vt(document,".js-close-window",t=>{t.addEventListener("click",e=>{window.opener&&(e.preventDefault(),setTimeout(()=>window.close(),1),window.opener.focus())})});if(document.querySelector('meta[name="convos:start_app"][content="chat"]'))document.querySelector(".footer--wrapper").remove(),document.querySelector(".cms-main").remove(),new Ck({target:document.body});else if(document.querySelector('meta[name="convos:start_app"][content="jitsi"]')){document.querySelector(".footer--wrapper").remove();const t=document.querySelector(".cms-main");new Ak(t.dataset).render(t)}else document.addEventListener("DOMContentLoaded",function(){vt(document,"pre",t=>gt.lineNumbersBlock(t))});document.addEventListener("keydown",function(t){t.keyCode==27&&(vt(document,".fullscreen",e=>e.click()),Qa()),t.keyCode==13&&t.shiftKey&&(t.preventDefault(),Qa("toggle"))});function Qa(t){if("ontouchstart"in window)return;const e=r=>{for(let s=0;s<r.length;s++){const l=document.querySelector(r[s]);if(l&&l.tabIndex!==-1)return l}return null},n=t&&e(["input.is-primary-menu-item","a.is-primary-menu-item"]),i=document.activeElement;if(Dr(i,["a","input","textarea"])&&n&&i!==n)return n.focus();const o=e([".is-primary-input",'main input[type="text"], article input[type="text"]',"main a, article a"]);if(o)return o.focus();if(n)return n.focus()}
