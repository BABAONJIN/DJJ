const xn={add(t){document.body.classList.remove("no-"+t),document.body.classList.add("has-"+t)},has(t){return document.body.classList.contains("has-"+t)},remove(t){document.body.classList.add("no-"+t),document.body.classList.remove("has-"+t)}};Qa("mousemove","mouse");Qa("touchstart","touch");xn.add("js");function Qa(t,e){const n=()=>{t!=="mousemove"&&xn.add(e),t==="mousemove"&&!xn.has("touch")&&xn.add(e),document.removeEventListener(t,n)};document.addEventListener(t,n)}function Le(){}const Xa=t=>t;function Of(t,e){for(const n in e)t[n]=e[n];return t}function Nf(t){return t&&typeof t=="object"&&typeof t.then=="function"}function xa(t){return t()}function bs(){return Object.create(null)}function st(t){t.forEach(xa)}function ai(t){return typeof t=="function"}function Ze(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Tf(t){return Object.keys(t).length===0}function St(t,...e){if(t==null)return Le;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Rf(t){let e;return St(t,n=>e=n)(),e}function Ee(t,e,n){t.$$.on_destroy.push(St(e,n))}function qt(t,e,n,i){if(t){const o=eu(t,e,n,i);return t[0](o)}}function eu(t,e,n,i){return t[1]&&i?Of(n.ctx.slice(),t[1](i(e))):n.ctx}function Wt(t,e,n,i){if(t[2]&&i){const o=t[2](i(n));if(e.dirty===void 0)return o;if(typeof o=="object"){const r=[],s=Math.max(e.dirty.length,o.length);for(let l=0;l<s;l+=1)r[l]=e.dirty[l]|o[l];return r}return e.dirty|o}return e.dirty}function Gt(t,e,n,i,o,r){if(o){const s=eu(e,n,i,r);t.p(s,o)}}function Kt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function Ri(t,e,n){return t.set(n),e}function Nr(t){return t&&ai(t.destroy)?t.destroy:Le}const tu=typeof window<"u";let Mf=tu?()=>window.performance.now():()=>Date.now(),Tr=tu?t=>requestAnimationFrame(t):Le;const ei=new Set;function nu(t){ei.forEach(e=>{e.c(t)||(ei.delete(e),e.f())}),ei.size!==0&&Tr(nu)}function Lf(t){let e;return ei.size===0&&Tr(nu),{promise:new Promise(n=>{ei.add(e={c:t,f:n})}),abort(){ei.delete(e)}}}function f(t,e){t.appendChild(e)}function iu(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function If(t){const e=g("style");return Pf(iu(t),e),e.sheet}function Pf(t,e){return f(t.head||t,e),e.sheet}function w(t,e,n){t.insertBefore(e,n||null)}function $(t){t.parentNode.removeChild(t)}function $t(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function g(t){return document.createElement(t)}function Df(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function N(t){return document.createTextNode(t)}function C(){return N(" ")}function ct(){return N("")}function Se(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function rt(t){return function(e){return e.preventDefault(),t.call(this,e)}}function k(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Uf(t){return Array.from(t.childNodes)}function M(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Ct(t,e){t.value=e==null?"":e}function Pt(t,e,n,i){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}let no;function Bf(){if(no===void 0){no=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{no=!0}}return no}function jf(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const i=g("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const o=Bf();let r;return o?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=Se(window,"message",s=>{s.source===i.contentWindow&&e()})):(i.src="about:blank",i.onload=()=>{r=Se(i.contentWindow,"resize",e)}),f(t,i),()=>{(o||r&&i.contentWindow)&&r(),$(i)}}function Je(t,e,n){t.classList[n?"add":"remove"](e)}function ou(t,e,{bubbles:n=!1,cancelable:i=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,i,e),o}class Tt{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,i=null){this.e||(this.is_svg?this.e=Df(n.nodeName):this.e=g(n.nodeName),this.t=n,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)w(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach($)}}const ho=new Map;let mo=0;function Ff(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function zf(t,e){const n={stylesheet:If(e),rules:{}};return ho.set(t,n),n}function vs(t,e,n,i,o,r,s,l=0){const a=16.666/i;let u=`{
`;for(let y=0;y<=1;y+=a){const b=e+(n-e)*r(y);u+=y*100+`%{${s(b,1-b)}}
`}const c=u+`100% {${s(n,1-n)}}
}`,p=`__svelte_${Ff(c)}_${l}`,d=iu(t),{stylesheet:h,rules:m}=ho.get(d)||zf(d,t);m[p]||(m[p]=!0,h.insertRule(`@keyframes ${p} ${c}`,h.cssRules.length));const _=t.style.animation||"";return t.style.animation=`${_?`${_}, `:""}${p} ${i}ms linear ${o}ms 1 both`,mo+=1,p}function Hf(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?r=>r.indexOf(e)<0:r=>r.indexOf("__svelte")===-1),o=n.length-i.length;o&&(t.style.animation=i.join(", "),mo-=o,mo||qf())}function qf(){Tr(()=>{mo||(ho.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&$(e)}),ho.clear())})}let Mi;function Qt(t){Mi=t}function ui(){if(!Mi)throw new Error("Function called outside component initialization");return Mi}function Bt(t){ui().$$.on_mount.push(t)}function Rr(t){ui().$$.on_destroy.push(t)}function ru(){const t=ui();return(e,n,{cancelable:i=!1}={})=>{const o=t.$$.callbacks[e];if(o){const r=ou(e,n,{cancelable:i});return o.slice().forEach(s=>{s.call(t,r)}),!r.defaultPrevented}return!0}}function Ko(t,e){return ui().$$.context.set(t,e),e}function pt(t){return ui().$$.context.get(t)}function Ln(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const Ci=[],me=[],fo=[],ur=[],su=Promise.resolve();let fr=!1;function lu(){fr||(fr=!0,su.then(Mr))}function Li(){return lu(),su}function ut(t){fo.push(t)}function ve(t){ur.push(t)}const Yo=new Set;let io=0;function Mr(){const t=Mi;do{for(;io<Ci.length;){const e=Ci[io];io++,Qt(e),Wf(e.$$)}for(Qt(null),Ci.length=0,io=0;me.length;)me.pop()();for(let e=0;e<fo.length;e+=1){const n=fo[e];Yo.has(n)||(Yo.add(n),n())}fo.length=0}while(Ci.length);for(;ur.length;)ur.pop()();fr=!1,Yo.clear(),Qt(t)}function Wf(t){if(t.fragment!==null){t.update(),st(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ut)}}let wi;function Gf(){return wi||(wi=Promise.resolve(),wi.then(()=>{wi=null})),wi}function Vo(t,e,n){t.dispatchEvent(ou(`${e?"intro":"outro"}${n}`))}const co=new Set;let Xt;function Ce(){Xt={r:0,c:[],p:Xt}}function Ae(){Xt.r||st(Xt.c),Xt=Xt.p}function v(t,e){t&&t.i&&(co.delete(t),t.i(e))}function S(t,e,n,i){if(t&&t.o){if(co.has(t))return;co.add(t),Xt.c.push(()=>{co.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const Kf={duration:0};function tt(t,e,n,i){let o=e(t,n),r=i?0:1,s=null,l=null,a=null;function u(){a&&Hf(t,a)}function c(d,h){const m=d.b-r;return h*=Math.abs(m),{a:r,b:d.b,d:m,duration:h,start:d.start,end:d.start+h,group:d.group}}function p(d){const{delay:h=0,duration:m=300,easing:_=Xa,tick:y=Le,css:b}=o||Kf,E={start:Mf()+h,b:d};d||(E.group=Xt,Xt.r+=1),s||l?l=E:(b&&(u(),a=vs(t,r,d,m,h,_,b)),d&&y(0,1),s=c(E,m),ut(()=>Vo(t,d,"start")),Lf(R=>{if(l&&R>l.start&&(s=c(l,m),l=null,Vo(t,s.b,"start"),b&&(u(),a=vs(t,r,s.b,s.duration,0,_,o.css))),s){if(R>=s.end)y(r=s.b,1-r),Vo(t,s.b,"end"),l||(s.b?u():--s.group.r||st(s.group.c)),s=null;else if(R>=s.start){const j=R-s.start;r=s.a+s.d*_(j/s.duration),y(r,1-r)}}return!!(s||l)}))}return{run(d){ai(o)?Gf().then(()=>{o=o(),p(d)}):p(d)},end(){u(),s=l=null}}}function cr(t,e){const n=e.token={};function i(o,r,s,l){if(e.token!==n)return;e.resolved=l;let a=e.ctx;s!==void 0&&(a=a.slice(),a[s]=l);const u=o&&(e.current=o)(a);let c=!1;e.block&&(e.blocks?e.blocks.forEach((p,d)=>{d!==r&&p&&(Ce(),S(p,1,1,()=>{e.blocks[d]===p&&(e.blocks[d]=null)}),Ae())}):e.block.d(1),u.c(),v(u,1),u.m(e.mount(),e.anchor),c=!0),e.block=u,e.blocks&&(e.blocks[r]=u),c&&Mr()}if(Nf(t)){const o=ui();if(t.then(r=>{Qt(o),i(e.then,1,e.value,r),Qt(null)},r=>{if(Qt(o),i(e.catch,2,e.error,r),Qt(null),!e.hasCatch)throw r}),e.current!==e.pending)return i(e.pending,0),!0}else{if(e.current!==e.then)return i(e.then,1,e.value,t),!0;e.resolved=t}}function au(t,e,n){const i=e.slice(),{resolved:o}=t;t.current===t.then&&(i[t.value]=o),t.current===t.catch&&(i[t.error]=o),t.block.p(i,n)}const Yf=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function $e(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function G(t){t&&t.c()}function q(t,e,n,i){const{fragment:o,on_mount:r,on_destroy:s,after_update:l}=t.$$;o&&o.m(e,n),i||ut(()=>{const a=r.map(xa).filter(ai);s?s.push(...a):st(a),t.$$.on_mount=[]}),l.forEach(ut)}function W(t,e){const n=t.$$;n.fragment!==null&&(st(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Vf(t,e){t.$$.dirty[0]===-1&&(Ci.push(t),lu(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Qe(t,e,n,i,o,r,s,l=[-1]){const a=Mi;Qt(t);const u=t.$$={fragment:null,ctx:null,props:r,update:Le,not_equal:o,bound:bs(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:bs(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};s&&s(u.root);let c=!1;if(u.ctx=n?n(t,e.props||{},(p,d,...h)=>{const m=h.length?h[0]:d;return u.ctx&&o(u.ctx[p],u.ctx[p]=m)&&(!u.skip_bound&&u.bound[p]&&u.bound[p](m),c&&Vf(t,p)),d}):[],u.update(),c=!0,st(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const p=Uf(e.target);u.fragment&&u.fragment.l(p),p.forEach($)}else u.fragment&&u.fragment.c();e.intro&&v(t.$$.fragment),q(t,e.target,e.anchor,e.customElement),Mr()}Qt(a)}class Xe{$destroy(){W(this,1),this.$destroy=Le}$on(e,n){const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(e){this.$$set&&!Tf(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Zf(t){let e,n,i,o,r,s;return{c(){e=g("i"),k(e,"class",n=t[4](t[3],t[2],t[0])),k(e,"style",i=ws(t[3],t[1])),e.hidden=o=!t[3]},m(l,a){w(l,e,a),r||(s=Se(e,"click",t[6]),r=!0)},p(l,[a]){a&13&&n!==(n=l[4](l[3],l[2],l[0]))&&k(e,"class",n),a&10&&i!==(i=ws(l[3],l[1]))&&k(e,"style",i),a&8&&o!==(o=!l[3])&&(e.hidden=o)},i:Le,o:Le,d(l){l&&$(e),r=!1,s()}}}const Jf={brand:"fab",regular:"far",solid:"fas"},dr={batman:"https://www.gravatar.com/avatar/ab1839667863f31e359d98364cfdef61",marcusr:"https://www.gravatar.com/avatar/6c056546d802b1a9ac186ab63f9fb632"},$s=["fas fa-anchor","fas fa-atom","fas fa-award","fas fa-balance-scale","fas fa-baseball-ball","fas fa-basketball-ball","fas fa-bicycle","fas fa-bolt","fas fa-book-reader","fas fa-candy-cane","fas fa-carrot","fas fa-cat","fas fa-chess-knight","fas fa-child","fas fa-coffee","fas fa-cookie-bite","fas fa-crow","fas fa-dice","fas fa-dog","fas fa-dove","fas fa-feather","fas fa-fish","fas fa-gem","fas fa-ghost","fas fa-hard-hat","fas fa-hat-cowboy","fas fa-hat-wizard","fas fa-hiking","fas fa-horse-head","fas fa-horse","fas fa-id-badge","fas fa-igloo","fas fa-mask","fas fa-meteor","fas fa-paint-brush","fas fa-paw","fas fa-pepper-hot","fas fa-pizza-slice","fas fa-portrait","fas fa-puzzle-piece","fas fa-rainbow","fas fa-robot","fas fa-rocket","fas fa-running","fas fa-seedling","fas fa-skating","fas fa-skiing","fas fa-smile","fas fa-snowboarding","fas fa-snowflake","fas fa-snowman","fas fa-swimmer","fas fa-umbrella","fas fa-user-astronaut","fas fa-user-graduate","fas fa-user-ninja","fas fa-user-secret","fas fa-walking","fas fa-yin-yang"];function ws(t,e){const n=[];let i="color:";const o=t.match(/^pick:(.+)$/);return o&&dr[o[1]]&&(i="background-color:",n.push('background-image:url("'+dr[o[1]]+'")')),e&&n.push(i+e),n.join(";")}function Qf(t){let e=0;for(let n=0;n<t.length;n++)e=t.charCodeAt(n)+((e<<5)-e),e=e&e;return e=Math.abs(e),$s[e%$s.length]}function Xf(t,e,n){let{class:i=""}=e,{animation:o=""}=e,{color:r=""}=e,{family:s=""}=e,{name:l}=e;function a(c,p,d){const h=[],m=c.match(/^pick:(.+)$/);if(m){if(m[1]==="Convos")return"fas fa-info-circle";if(dr[m[1]])return"fas fa-contributor for-"+m[1].toLowerCase();h.push(Qf(m[1]))}else h.push(Jf[p]||"fas"),h.push("fa-"+c);return d&&h.push(d.split(" ").map(_=>"fa-"+_)),i&&h.push(i.split(" ")),h.join(" ")}function u(c){Ln.call(this,t,c)}return t.$$set=c=>{"class"in c&&n(5,i=c.class),"animation"in c&&n(0,o=c.animation),"color"in c&&n(1,r=c.color),"family"in c&&n(2,s=c.family),"name"in c&&n(3,l=c.name)},[o,r,s,l,a,i,u]}class be extends Xe{constructor(e){super(),Qe(this,e,Xf,Zf,Ze,{class:5,animation:0,color:1,family:2,name:3})}}const qn=[];function xf(t,e){return{subscribe:uu(t,e).subscribe}}function uu(t,e=Le){let n;const i=new Set;function o(l){if(Ze(t,l)&&(t=l,n)){const a=!qn.length;for(const u of i)u[1](),qn.push(u,t);if(a){for(let u=0;u<qn.length;u+=2)qn[u][0](qn[u+1]);qn.length=0}}}function r(l){o(l(t))}function s(l,a=Le){const u=[l,a];return i.add(u),i.size===1&&(n=e(o)||Le),l(t),()=>{i.delete(u),i.size===0&&(n(),n=null)}}return{set:o,update:r,subscribe:s}}function fu(t,e,n){const i=!Array.isArray(t),o=i?[t]:t,r=e.length<2;return xf(n,s=>{let l=!1;const a=[];let u=0,c=Le;const p=()=>{if(u)return;c();const h=e(i?a[0]:a,s);r?s(h):c=ai(h)?h:Le},d=o.map((h,m)=>St(h,_=>{a[m]=_,u&=~(1<<m),l&&p()},()=>{u|=1<<m}));return l=!0,p(),function(){st(d),c()}})}function Fi(t,e){const n=uu(t);n.get=()=>Rf(n);for(let i in e)Object.hasOwn(e,i)&&(n[i]=e[i].bind(n));return n}const vt=Fi("",{toggle(t){t.preventDefault();const e=t.target.closest("a"),n=e&&e.href.replace(/.*#/,"");this.set(this.get()===n?"":n)}}),Ii=Fi({hasLeftColumn:!1,hasRightColumn:!1,isSingleColumn:!0,width:0},{setWidth(t){const e=t>=800,n=t>=1200,i=!(e||n);this.set({hasLeftColumn:e,hasRightColumn:n,isSingleColumn:i,width:t})}});function ks(t){let e,n,i,o,r,s=t[2].notifications+"",l,a,u,c,p;return n=new be({props:{name:"bars"}}),i=new be({props:{name:"times"}}),{c(){e=g("a"),G(n.$$.fragment),G(i.$$.fragment),o=C(),r=g("small"),l=N(s),k(r,"class","badge is-important"),r.hidden=a=!t[2].notifications,k(e,"href","#nav"),k(e,"class","btn-hallow can-toggle"),Je(e,"is-active",t[1]==="nav")},m(d,h){w(d,e,h),q(n,e,null),q(i,e,null),f(e,o),f(e,r),f(r,l),u=!0,c||(p=Se(e,"click",vt.toggle),c=!0)},p(d,h){(!u||h&4)&&s!==(s=d[2].notifications+"")&&M(l,s),(!u||h&4&&a!==(a=!d[2].notifications))&&(r.hidden=a),(!u||h&2)&&Je(e,"is-active",d[1]==="nav")},i(d){u||(v(n.$$.fragment,d),v(i.$$.fragment,d),u=!0)},o(d){S(n.$$.fragment,d),S(i.$$.fragment,d),u=!1},d(d){d&&$(e),W(n),W(i),c=!1,p()}}}function ec(t){let e,n,i;const o=t[5].default,r=qt(o,t,t[4],null);let s=!t[0].hasLeftColumn&&ks(t);return{c(){e=g("header"),r&&r.c(),n=C(),s&&s.c(),k(e,"class","chat-header")},m(l,a){w(l,e,a),r&&r.m(e,null),f(e,n),s&&s.m(e,null),i=!0},p(l,[a]){r&&r.p&&(!i||a&16)&&Gt(r,o,l,l[4],i?Wt(o,l[4],a,null):Kt(l[4]),null),l[0].hasLeftColumn?s&&(Ce(),S(s,1,1,()=>{s=null}),Ae()):s?(s.p(l,a),a&1&&v(s,1)):(s=ks(l),s.c(),v(s,1),s.m(e,null))},i(l){i||(v(r,l),v(s),i=!0)},o(l){S(r,l),S(s),i=!1},d(l){l&&$(e),r&&r.d(l),s&&s.d()}}}function tc(t,e,n){let i,o,r;Ee(t,Ii,u=>n(0,i=u)),Ee(t,vt,u=>n(1,o=u));let{$$slots:s={},$$scope:l}=e;const a=pt("user").notifications;return Ee(t,a,u=>n(2,r=u)),t.$$set=u=>{"$$scope"in u&&n(4,l=u.$$scope)},[i,o,r,a,l,s]}class Ut extends Xe{constructor(e){super(),Qe(this,e,tc,ec,Ze,{})}}/*! js-cookie v3.0.1 | MIT */function oo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}var nc={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function pr(t,e){function n(o,r,s){if(!(typeof document>"u")){s=oo({},e,s),typeof s.expires=="number"&&(s.expires=new Date(Date.now()+s.expires*864e5)),s.expires&&(s.expires=s.expires.toUTCString()),o=encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var a in s)!s[a]||(l+="; "+a,s[a]!==!0&&(l+="="+s[a].split(";")[0]));return document.cookie=o+"="+t.write(r,o)+l}}function i(o){if(!(typeof document>"u"||arguments.length&&!o)){for(var r=document.cookie?document.cookie.split("; "):[],s={},l=0;l<r.length;l++){var a=r[l].split("="),u=a.slice(1).join("=");try{var c=decodeURIComponent(a[0]);if(s[c]=t.read(u,c),o===c)break}catch{}}return o?s[o]:s}}return Object.create({set:n,get:i,remove:function(o,r){n(o,"",oo({},r,{expires:-1}))},withAttributes:function(o){return pr(this.converter,oo({},this.attributes,o))},withConverter:function(o){return pr(oo({},this.converter,o),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var ys=pr(nc,{path:"/"});const ic=typeof process>"u"||typeof process.env!="object"?"info":process.env.LOG_LEVEL||"quiet",Zo=["trace","debug","info","warn","error","quiet"],hr={},Wn={},Ss=()=>{};hr.root=new cu({name:"root"});function oc(t){return Wn.root===void 0&&(Object.entries(JSON.parse(localStorage.getItem("logger:nameToLevel")||"{}")).forEach(([e,n])=>{Wn[e]=n||"debug"}),((location.href.match(/_debug=([a-z,:]+)/)||[]).pop()||"").split(",").forEach(e=>{const[n,i]=e.split(":");Wn[n]=i||"debug"}),localStorage.setItem("logger:nameToLevel",JSON.stringify(Wn))),Wn[t]||Wn.root||ic}function cu({name:t}){this.name=t,this.isLevel=e=>{const n=Zo.indexOf(e)||e||e.length;return this.numLevel>=n},this.setLevel=e=>{let n=Zo.indexOf(e);return n===-1&&(n=2),this.numLevel=n,Zo.forEach((i,o)=>{const r=i==="trace"||i==="debug"?"log":i,s=!console||o<n?Ss:console[r]||console.log||Ss;this[i]=s.bind(this,"["+this.name+"]")}),this},this.setLevel(oc(t))}function fi(t="root"){return hr[t]||(hr[t]=new cu({name:t}))}const rc=fi("util"),sc=.618033988749,mr=1e3,_r=mr*1e3,Es=_r*1e3;function gr(t,e){if(e&&!e.match(/^[+-]\w/)&&(e="+"+e),!e)return{};const n={};let i=!0;for(const o of e)o==="+"?i=!0:o==="-"?i=!1:n[t[o]||o]=i;return n}function br(t,e){for(;t;){if(e.tagName?t===e:t.matches?t.matches(e):!1)return t;t=t.parentNode}return null}function du(t){const n=pu("textarea",{style:{opacity:0,position:"absolute"},value:t.textContent||t.value});document.body.appendChild(n);try{n.focus(),n.select(),document.execCommand("copy")}catch(i){n.value="",rc.error("copyToClipboard() failed:",i)}return document.body.removeChild(n),n.value}function pu(t,e){const n=document.createElement(t);for(let i in e)Object.hasOwn(e,i)&&(n[i]=e[i]);return n}function lc(t,e,n){let i=t&&t.querySelector("."+e.split(" ").join("."));return i||(i=document.createElement("div"),i.className=e,t&&t.appendChild(i),n&&n(i),i)}function Lr(t,e="message"){const n=t.errors||t;return n&&n[0]?n[0][e]||"Unknown error.":""}function ac(t,e=document){const n=[...t.childNodes],i=[];let o=0;for(;o<n.length;)n[o].nodeType===Node.ELEMENT_NODE?(i.push([o,n[o]]),o++):n.splice(o,1);if(!n.length)return[];const r=e.scrollTop;for(;i.length>1;){const u=Math.floor(i.length/2);i[u][1].offsetTop<=r?i.splice(0,u):i.splice(u)}i.length||i.push([0,n[0]]);const s=e.offsetHeight,l=i[0][0];let a=l;for(;a<n.length&&!(n[a].offsetTop>r+s);)a++;return n.slice(l,a).filter(u=>!u.getAttribute("aria-hidden"))}function uc(t=0,e=.5,n=.95){var i=Math.floor(t*6),o=t*6-i,r=n*(1-e),s=n*(1-o*e),l=n*(1-(1-o)*e),a=255,u=255,c=255;switch(i){case 0:a=n,u=l,c=r;break;case 1:a=s,u=n,c=r;break;case 2:a=r,u=n,c=l;break;case 3:a=r,u=s,c=n;break;case 4:a=l,u=r,c=n;break;case 5:a=n,u=r,c=s;break}return[Math.floor(a*255),Math.floor(u*255),Math.floor(c*255)]}function Jn(t,e){const n=t<mr?[t,""]:t<_r?[t/mr,"k"]:t<Es?[t/_r,"M"]:[t/Es,"G"],i=String(Math.round(n[0]*10)/10);return(i.match(/\./)?i:i+".0")+n[1]+(e||"")}const Ue={array:t=>Array.isArray(t),defined:t=>!Ue.undefined(t),false:t=>!Ue.true(t),function:t=>typeof t=="function",number:t=>typeof t=="number",object:t=>typeof t=="object"&&t!==null,string:t=>typeof t=="string",stringable:t=>typeof t=="number"||typeof t=="string",true:t=>Ue.string(t)?!!t.length&&t!=="0":!!t,undefined:t=>t===null||typeof t>"u"};function fc(t){const e=document,n=t.replace(/\W/g,"_");if(e.getElementById(n))return;const i=e.createElement("script");return[i.id,i.src]=[n,t],e.getElementsByTagName("head")[0].appendChild(i),new Promise((o,r)=>{i.addEventListener("error",r),i.addEventListener("load",o)})}function _o(t){return Object.keys(t).filter(e=>t[e]).sort().map(e=>"has-mode-"+e).join(" ")}function At(t,e="\xA0"){return t.replace(/\s/g,e)}function gt(t,e,n){const i=e===":children"?t.children:t.querySelectorAll(e);if(!n)return[].slice.call(i,0);if(Array.isArray(n))return[].forEach.call(i,r=>r.addEventListener(n[0],n[1]));const o=[];for(let r=0;r<i.length;r++)o.push(n(i[r],r));return o}function cc(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Ge(t,e){const n=i=>document.querySelector('meta[name="convos:'+i+'"]')||document.querySelector('meta[name="'+i+'"]');if(arguments.length===1){t==="organization_name"&&(t="contactorganization"),t==="organization_url"&&(t="contactnetworkaddress");const i=n(t);if(!i)throw'Cannot get settings for "'+t+'".';const o={no:!1,yes:!0};return t==="contact"?atob(i.content||""):Object.hasOwn(o,i.content)?o[i.content]:i.content}t==="organization_name"&&(t="contactorganization"),t==="organization_url"&&(t="contactnetworkaddress"),t==="contact"&&(e=btoa(e)),typeof e=="boolean"&&(e=e?"yes":"no"),n(t).content=e}function Cs(t,e){t&&t.preventDefault&&t.preventDefault();const n=lc(document.body,"fullscreen",i=>{i.addEventListener("click",o=>o.target===i&&i.hide()),i.hide=()=>n.classList.add("hidden")});return cc(n),e?(n.classList.remove("hidden"),n.appendChild(e.cloneNode(!0)),n):n.hide()}function Ir(t){return(Ue.string(t)?t:"").split(/[.,\s]+/).map(e=>e.trim()).filter(e=>e.length)}function Pr(t,e=100){if(t.length===0)return"#000";let n=0;for(let i=0;i<t.length;i++)n=t.charCodeAt(i)+((n<<5)-n),n=n&n;return n=Math.abs(n%e/e),"#"+uc((n+sc)%1,.4,.7).map(i=>i.toString(16)).join("")}function Co(t,e){return Ue.array(e)?e.find(n=>Co(t,n))||!1:t&&t.tagName&&t.tagName.toLowerCase()===e||!1}function dc(t,e=!0){return new Promise((n,i)=>{setTimeout(()=>{typeof e=="function"?n(e()):typeof e=="string"?i(e):n(e)},t)})}function Ao(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){let e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}const Jo=fi("reactive");class Mt{constructor(){this.cookieName="convos_js",this._on={},this._props={}}emit(e,...n){const i=this._on[e];for(let o=0;o<(i||[]).length;o++)i[o][0](...n);return this}on(e,n){const i=n?null:new Promise(l=>{n=l}),o=this._on[e]||(this._on[e]=[]),r=[n];o.push(r);const s=()=>{const l=o.indexOf(r);l!==-1&&o.splice(l,1)};return i?i.finally(s):s}prop(e,n,i,o={}){const r={...o,defaultValue:i,name:n,type:e,value:i};switch(this._props[n]=r,r.updateable=["cookie","persist","rw"].indexOf(e)!==-1,e){case"cookie":return this._cookieProp(r);case"persist":return this._localStorageProp(r);case"ro":return this._readOnlyProp(r);case"rw":return this._updateableProp(r)}throw"["+this.constructor.name+'] Unknown prop type "'+e+'" for prop "'+n+'".'}subscribe(e){return e(this),this.on("update",e)}update(e){return Object.keys(e).forEach(n=>{const i=this._props[n];if(!i)return Jo.trace("["+this.constructor.name+'] Unknown prop "'+n+'".');Object.hasOwn(i,"prev")||(i.prev=i.type==="ro"?void 0:i.value),i.updateable&&(i.value=e[n])}),this._updatedTid||(this._updatedTid=setTimeout(this._delayedUpdate.bind(this),1)),this}_cookie(e,n){const i=e.key||e.name,o=document.decodedB64JSONCookies||(document.decodedB64JSONCookies={});if(!o[this.cookieName])try{const l=ys.get(this.cookieName);o[this.cookieName]=JSON.parse(l?atob(l):"{}")}catch(l){Jo.error({[i]:l})}const r=o[this.cookieName]||{};if(arguments.length===1)return r[i];n===e.defaultValue?delete r[i]:r[i]=n;const s=location.href.indexOf("https:")===0;ys.set(this.cookieName,btoa(JSON.stringify(r)),{expires:365,SameSite:"Lax",secure:s})}_cookieProp(e){const n=this._cookie(e);Ue.defined(n)&&(e.value=n),Ue.undefined(n)&&this._cookie(e,e.value),this._updateableProp(e)}_delayedUpdate(){const e={};return Object.keys(this._props).forEach(n=>{const i=this._props[n];if(!Object.hasOwn(i,"prev"))return;const o=i.prev;delete i.prev,i.value!==o&&(i.type==="cookie"&&this._cookie(i,i.value),i.type==="persist"&&this._localStorage(i,i.value),e[n]=i.type!=="ro")}),delete this._updatedTid,Object.keys(e).length&&this.emit("update",this,e),e}_localStorage(e,n){const i="convos:"+(e.key||e.name);if(arguments.length===2)return n===e.defaultValue?localStorage.removeItem(i):localStorage.setItem(i,JSON.stringify(n));try{return Object.hasOwn(localStorage,i)?JSON.parse(localStorage.getItem(i)):void 0}catch(o){Jo.error({[i]:localStorage.getItem(i)},o);return}}_localStorageProp(e){const n=this._localStorage(e);Ue.defined(n)&&(e.value=n),Ue.undefined(n)&&this._localStorage(e,e.value),this._updateableProp(e)}_readOnlyProp(e){if(e.value===void 0)throw"["+this.constructor.name+'] Read-only attribute "'+e.name+'" cannot be undefined';const n=Ue.function(e.value)?e.value:()=>e.value;Object.defineProperty(this,e.name,{get:n})}_updateableProp(e){Object.defineProperty(this,e.name,{get:()=>e.value})}}class pc extends Mt{constructor(){super(),this.prop("persist","history",[],{key:"command_history"}),this.prop("rw","conversation",null),this.prop("rw","index",-1)}add(e){if(!e.length)return this;const n=this.history.slice(0,19);return n.unshift(e),this.update({history:n,index:-1})}attach(e){this.inputEl=e}render(e,n){n=this.index+n,n<-1&&(n=-1),n>=this.history.length&&(n=this.history.length-1);const i=this.inputEl.value;return this.inputEl.selectionStart!==i.length||i.length&&i!==this.history[this.index]?!1:(e.preventDefault(),this.update({index:n}),this.inputEl.value=n===-1?"":this.history[n],!0)}update(e){return e.conversation&&e.conversation!==this.conversation&&this.update({index:-1}),super.update(e)}}var ro=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hc(t){var e=t.default;if(typeof e=="function"){var n=function(){return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var o=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:function(){return t[i]}})}),n}var mc=typeof ro=="object"&&ro&&ro.Object===Object&&ro,_c=mc,gc=_c,bc=typeof self=="object"&&self&&self.Object===Object&&self,vc=gc||bc||Function("return this")(),hu=vc,$c=hu,wc=function(){return $c.Date.now()},Ai=wc,kc=hu,yc=kc.Symbol,Dr=yc;function Sc(t,e){for(var n=-1,i=t==null?0:t.length,o=Array(i);++n<i;)o[n]=e(t[n],n,t);return o}var Ec=Sc,Cc=Array.isArray,Ac=Cc,As=Dr,mu=Object.prototype,Oc=mu.hasOwnProperty,Nc=mu.toString,ki=As?As.toStringTag:void 0;function Tc(t){var e=Oc.call(t,ki),n=t[ki];try{t[ki]=void 0;var i=!0}catch{}var o=Nc.call(t);return i&&(e?t[ki]=n:delete t[ki]),o}var Rc=Tc,Mc=Object.prototype,Lc=Mc.toString;function Ic(t){return Lc.call(t)}var Pc=Ic,Os=Dr,Dc=Rc,Uc=Pc,Bc="[object Null]",jc="[object Undefined]",Ns=Os?Os.toStringTag:void 0;function Fc(t){return t==null?t===void 0?jc:Bc:Ns&&Ns in Object(t)?Dc(t):Uc(t)}var zc=Fc;function Hc(t){return t!=null&&typeof t=="object"}var qc=Hc,Wc=zc,Gc=qc,Kc="[object Symbol]";function Yc(t){return typeof t=="symbol"||Gc(t)&&Wc(t)==Kc}var _u=Yc,Ts=Dr,Vc=Ec,Zc=Ac,Jc=_u,Qc=1/0,Rs=Ts?Ts.prototype:void 0,Ms=Rs?Rs.toString:void 0;function gu(t){if(typeof t=="string")return t;if(Zc(t))return Vc(t,gu)+"";if(Jc(t))return Ms?Ms.call(t):"";var e=t+"";return e=="0"&&1/t==-Qc?"-0":e}var Xc=gu,xc=Xc;function ed(t){return t==null?"":xc(t)}var zi=ed,td=zi,bu=/[\\^$.*+?()[\]{}|]/g,nd=RegExp(bu.source);function id(t){return t=td(t),t&&nd.test(t)?t.replace(bu,"\\$&"):t}var ci=id;const od=fi("api");class Oo extends Mt{constructor(e){super(),this.prop("ro","api",e.api),this.prop("ro","defaultParams",e.defaultParams||{}),this.prop("ro","id",e.id),this.prop("rw","err",null),this.prop("rw","req",{body:null,headers:{}}),this.prop("rw","res",{body:{},headers:[]}),this.prop("rw","status","pending")}error(e){if(e)return this.update({err:Array.isArray(e)?e:[{message:e}],status:"error"});if(!this.err||!this.err.length)return"";const n=this.err[0],i=n.path&&n.path.match(/\w$/)&&n.path.split("/").pop();return i?i+": "+n.message:n.message}perform(e){let n;return this._promise||(this._promise=this.api.spec(this.id).then(i=>{if(!i)throw'Unknown operationId "'+this.id+'".';const o=this._paramsToRequest(i,e||this.defaultParams);return n=new XMLHttpRequest,this.update({req:o,status:"loading"}),this._send(n,o)}).then(()=>{const i={};i.body=n.response?JSON.parse(n.response):{},i.headers=(n.getAllResponseHeaders()||"").trim().split(/[\r\n]+/).filter(r=>r.length).map(r=>r.split(/:\s*/,2)),i.status=String(n.status||"201");let o=null;return String(i.status).match(/^[23]/)||(o=i.body&&i.body.errors?i.body.errors:[{message:n.statusText||"Unknown error."}]),this.update({err:o,res:i,status:o?"error":"success"})}).catch(i=>(i.type&&(i=i.type),od.error(this.req.url+" FAILED "+i),this.update({res:{body:{errors:[{message:String(i)}]},headers:[],status:"599"},status:"error"}),this.error(Array.isArray(i)?i:'Failed fetching operationId "'+this.id+'": '+i))).finally(()=>{delete this._promise}))}is(e){return this.status===e}reset(){return this.res.body={},this.res.headers={},this.res.status=0,this.update({err:null,status:"pending"})}_extractValue(e,n){return n.schema?Object.keys(n.schema.properties).reduce((i,o)=>(i[o]=e[o],i),{}):e[n.name]}_hasProperty(e,n){return n.in==="body"?!0:n.in==="formData"?e.formData.has(n.name):Object.hasOwn(e,n.name)}_paramsToRequest(e,n){const i=new URL(e.url),o={headers:this.req.headers,method:e.method.toLowerCase(),url:i},r=[];if((e.parameters||[]).forEach(s=>{if(!this._hasProperty(n,s)&&s.required)r.push({message:"Missing property.",path:"/"+s.name});else{if(!this._hasProperty(n,s)&&!s.required)return;if(s.in==="path"){const l=new RegExp("(%7B|\\{)"+ci(s.name)+"(%7D|\\})","i");i.pathname=i.pathname.replace(l,encodeURIComponent(this._extractValue(n,s)))}else if(s.in==="query")i.searchParams.set(s.name,this._extractValue(n,s));else if(s.in==="formData")delete o.headers["Content-Type"],o.body=n.formData;else if(s.in==="body")o.body=this._extractValue(n,s);else if(s.in==="header")o.header[s.name]=this._extractValue(n,s.name);else throw"[Api] Parameter in:"+s.in+" is not supported."}}),r.length)throw r;return o}_send(e,n){return e.timeout=15e3,e.open(n.method.toUpperCase(),n.url),Object.keys(n.headers).forEach(i=>e.setRequestHeader(i,n.headers[i])),n.method==="post"?(e.upload.addEventListener("progress",i=>this.emit("progress",i)),e.send(Ue.object(n.body)&&!Ue.function(n.body.has)?JSON.stringify(n.body):n.body)):e.send(),new Promise(i=>{e.addEventListener("abort",i),e.addEventListener("error",i),e.addEventListener("load",i)})}}class rd{constructor(){this.protocol=location.protocol||"http",this._url="/api"}op(e,n){const i=new Oo({api:this,id:e,defaultParams:n});return i.req.headers={"Content-Type":"application/json"},i}async spec(e){if(this._ops&&e)return this._ops[e];if(this._spec)return this._spec;const i=await(await fetch(this._url)).json();if(this._ops={},this._spec=i,Object.keys(i.paths).forEach(o=>{Object.keys(i.paths[o]).forEach(r=>{const s=i.paths[o][r],l=s.operationId;!l||(s.method=r.toUpperCase(),s.url=this.protocol+"//"+i.host+i.basePath+o+".json",s.parameters=(s.parameters||[]).map(a=>this._resolveRef(a)),this._ops[l]=s)})}),this._ops&&e)return this._ops[e];if(this._spec)return this._spec}url(e){return this._url=e,this}_resolveRef(e){let n=e;if(e.$ref){const i=e.$ref.replace(/^#\//,"").split("/");for(n=this._spec;i.length;)n=n[i.shift()]}return Ue.object(n)&&Object.keys(n).forEach(i=>{n[i]=this._resolveRef(n[i])}),n}}const et=new rd;/*! Copyright Twitter Inc. and other contributors. Licensed under MIT */var sd=function(){var t={base:"https://twemoji.maxcdn.com/v/14.0.2/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:E,toCodePoint:A},onerror:function(){this.parentNode&&this.parentNode.replaceChild(a(this.alt,!1),this)},parse:R,replace:j,test:D},e={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},n=/(?:\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83e\udef1\ud83c\udffb\u200d\ud83e\udef2\ud83c[\udffc-\udfff]|\ud83e\udef1\ud83c\udffc\u200d\ud83e\udef2\ud83c[\udffb\udffd-\udfff]|\ud83e\udef1\ud83c\udffd\u200d\ud83e\udef2\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\udef1\ud83c\udffe\u200d\ud83e\udef2\ud83c[\udffb-\udffd\udfff]|\ud83e\udef1\ud83c\udfff\u200d\ud83e\udef2\ud83c[\udffb-\udffe]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d\udc8f\ud83c[\udffb-\udfff]|\ud83d\udc91\ud83c[\udffb-\udfff]|\ud83e\udd1d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d\udc8f\udc91]|\ud83e\udd1d)|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf7c\udf84\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc70\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd4\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83d\ude36\u200d\ud83c\udf2b\ufe0f|\u2764\ufe0f\u200d\ud83d\udd25|\u2764\ufe0f\u200d\ud83e\ude79|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc3b\u200d\u2744\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83d\ude2e\u200d\ud83d\udca8|\ud83d\ude35\u200d\ud83d\udcab|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f|\ud83d\udc08\u200d\u2b1b)|[#*0-9]\ufe0f?\u20e3|(?:[©®\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0c\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\udd77\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd\udec3-\udec5\udef0-\udef6]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udc8e\udc90\udc92-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5-\uded7\udedd-\udedf\udeeb\udeec\udef4-\udefc\udfe0-\udfeb\udff0]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd76\udd78-\uddb4\uddb7\uddba\uddbc-\uddcc\uddd0\uddde-\uddff\ude70-\ude74\ude78-\ude7c\ude80-\ude86\ude90-\udeac\udeb0-\udeba\udec0-\udec2\uded0-\uded9\udee0-\udee7]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,i=/\uFE0F/g,o=String.fromCharCode(8205),r=/[&<>'"]/g,s=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,l=String.fromCharCode;return t;function a(T,P){return document.createTextNode(P?T.replace(i,""):T)}function u(T){return T.replace(r,_)}function c(T,P){return"".concat(P.base,P.size,"/",T,P.ext)}function p(T,P){for(var U=T.childNodes,B=U.length,F,I;B--;)F=U[B],I=F.nodeType,I===3?P.push(F):I===1&&!("ownerSVGElement"in F)&&!s.test(F.nodeName.toLowerCase())&&p(F,P);return P}function d(T){return A(T.indexOf(o)<0?T.replace(i,""):T)}function h(T,P){for(var U=p(T,[]),B=U.length,F,I,z,x,J,O,L,Y,H,V,Z,K,re;B--;){for(z=!1,x=document.createDocumentFragment(),J=U[B],O=J.nodeValue,Y=0;L=n.exec(O);){if(H=L.index,H!==Y&&x.appendChild(a(O.slice(Y,H),!0)),Z=L[0],K=d(Z),Y=H+Z.length,re=P.callback(K,P),K&&re){V=new Image,V.onerror=P.onerror,V.setAttribute("draggable","false"),F=P.attributes(Z,K);for(I in F)F.hasOwnProperty(I)&&I.indexOf("on")!==0&&!V.hasAttribute(I)&&V.setAttribute(I,F[I]);V.className=P.className,V.alt=Z,V.src=re,z=!0,x.appendChild(V)}V||x.appendChild(a(Z,!1)),V=null}z&&(Y<O.length&&x.appendChild(a(O.slice(Y),!0)),J.parentNode.replaceChild(x,J))}return T}function m(T,P){return j(T,function(U){var B=U,F=d(U),I=P.callback(F,P),z,x;if(F&&I){B="<img ".concat('class="',P.className,'" ','draggable="false" ','alt="',U,'"',' src="',I,'"'),z=P.attributes(U,F);for(x in z)z.hasOwnProperty(x)&&x.indexOf("on")!==0&&B.indexOf(" "+x+"=")===-1&&(B=B.concat(" ",x,'="',u(z[x]),'"'));B=B.concat("/>")}return B})}function _(T){return e[T]}function y(){return null}function b(T){return typeof T=="number"?T+"x"+T:T}function E(T){var P=typeof T=="string"?parseInt(T,16):T;return P<65536?l(P):(P-=65536,l(55296+(P>>10),56320+(P&1023)))}function R(T,P){return(!P||typeof P=="function")&&(P={callback:P}),(typeof T=="string"?m:h)(T,{callback:P.callback||c,attributes:typeof P.attributes=="function"?P.attributes:y,base:typeof P.base=="string"?P.base:t.base,ext:P.ext||t.ext,size:P.folder||b(P.size||t.size),className:P.className||t.className,onerror:P.onerror||t.onerror})}function j(T,P){return String(T).replace(n,P)}function D(T){n.lastIndex=0;var P=n.test(T);return n.lastIndex=0,P}function A(T,P){for(var U=[],B=0,F=0,I=0;I<T.length;)B=T.charCodeAt(I++),F?(U.push((65536+(F-55296<<10)+(B-56320)).toString(16)),F=0):55296<=B&&B<=56319?F=B:U.push(B.toString(16));return U.join(P||"-")}}(),ld=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),i=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var o=42;e[n]=o;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var r=Object.getOwnPropertySymbols(e);if(r.length!==1||r[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(e,n);if(s.value!==o||s.enumerable!==!0)return!1}return!0},Ls=typeof Symbol<"u"&&Symbol,ad=ld,ud=function(){return typeof Ls!="function"||typeof Symbol!="function"||typeof Ls("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:ad()},fd="Function.prototype.bind called on incompatible ",Qo=Array.prototype.slice,cd=Object.prototype.toString,dd="[object Function]",pd=function(e){var n=this;if(typeof n!="function"||cd.call(n)!==dd)throw new TypeError(fd+n);for(var i=Qo.call(arguments,1),o,r=function(){if(this instanceof o){var c=n.apply(this,i.concat(Qo.call(arguments)));return Object(c)===c?c:this}else return n.apply(e,i.concat(Qo.call(arguments)))},s=Math.max(0,n.length-i.length),l=[],a=0;a<s;a++)l.push("$"+a);if(o=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(r),n.prototype){var u=function(){};u.prototype=n.prototype,o.prototype=new u,u.prototype=null}return o},hd=pd,Ur=Function.prototype.bind||hd,md=Ur,_d=md.call(Function.call,Object.prototype.hasOwnProperty),Ke,ii=SyntaxError,vu=Function,ti=TypeError,Xo=function(t){try{return vu('"use strict"; return ('+t+").constructor;")()}catch{}},Tn=Object.getOwnPropertyDescriptor;if(Tn)try{Tn({},"")}catch{Tn=null}var xo=function(){throw new ti},gd=Tn?function(){try{return arguments.callee,xo}catch{try{return Tn(arguments,"callee").get}catch{return xo}}}():xo,Gn=ud(),un=Object.getPrototypeOf||function(t){return t.__proto__},Vn={},bd=typeof Uint8Array>"u"?Ke:un(Uint8Array),ni={"%AggregateError%":typeof AggregateError>"u"?Ke:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ke:ArrayBuffer,"%ArrayIteratorPrototype%":Gn?un([][Symbol.iterator]()):Ke,"%AsyncFromSyncIteratorPrototype%":Ke,"%AsyncFunction%":Vn,"%AsyncGenerator%":Vn,"%AsyncGeneratorFunction%":Vn,"%AsyncIteratorPrototype%":Vn,"%Atomics%":typeof Atomics>"u"?Ke:Atomics,"%BigInt%":typeof BigInt>"u"?Ke:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ke:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Ke:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ke:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ke:FinalizationRegistry,"%Function%":vu,"%GeneratorFunction%":Vn,"%Int8Array%":typeof Int8Array>"u"?Ke:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ke:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ke:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Gn?un(un([][Symbol.iterator]())):Ke,"%JSON%":typeof JSON=="object"?JSON:Ke,"%Map%":typeof Map>"u"?Ke:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Gn?Ke:un(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ke:Promise,"%Proxy%":typeof Proxy>"u"?Ke:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Ke:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ke:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Gn?Ke:un(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ke:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Gn?un(""[Symbol.iterator]()):Ke,"%Symbol%":Gn?Symbol:Ke,"%SyntaxError%":ii,"%ThrowTypeError%":gd,"%TypedArray%":bd,"%TypeError%":ti,"%Uint8Array%":typeof Uint8Array>"u"?Ke:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ke:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ke:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ke:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Ke:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ke:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ke:WeakSet},vd=function t(e){var n;if(e==="%AsyncFunction%")n=Xo("async function () {}");else if(e==="%GeneratorFunction%")n=Xo("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=Xo("async function* () {}");else if(e==="%AsyncGenerator%"){var i=t("%AsyncGeneratorFunction%");i&&(n=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&(n=un(o.prototype))}return ni[e]=n,n},Is={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Hi=Ur,go=_d,$d=Hi.call(Function.call,Array.prototype.concat),wd=Hi.call(Function.apply,Array.prototype.splice),Ps=Hi.call(Function.call,String.prototype.replace),bo=Hi.call(Function.call,String.prototype.slice),kd=Hi.call(Function.call,RegExp.prototype.exec),yd=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Sd=/\\(\\)?/g,Ed=function(e){var n=bo(e,0,1),i=bo(e,-1);if(n==="%"&&i!=="%")throw new ii("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&n!=="%")throw new ii("invalid intrinsic syntax, expected opening `%`");var o=[];return Ps(e,yd,function(r,s,l,a){o[o.length]=l?Ps(a,Sd,"$1"):s||r}),o},Cd=function(e,n){var i=e,o;if(go(Is,i)&&(o=Is[i],i="%"+o[0]+"%"),go(ni,i)){var r=ni[i];if(r===Vn&&(r=vd(i)),typeof r>"u"&&!n)throw new ti("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:i,value:r}}throw new ii("intrinsic "+e+" does not exist!")},Br=function(e,n){if(typeof e!="string"||e.length===0)throw new ti("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new ti('"allowMissing" argument must be a boolean');if(kd(/^%?[^%]*%?$/,e)===null)throw new ii("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=Ed(e),o=i.length>0?i[0]:"",r=Cd("%"+o+"%",n),s=r.name,l=r.value,a=!1,u=r.alias;u&&(o=u[0],wd(i,$d([0,1],u)));for(var c=1,p=!0;c<i.length;c+=1){var d=i[c],h=bo(d,0,1),m=bo(d,-1);if((h==='"'||h==="'"||h==="`"||m==='"'||m==="'"||m==="`")&&h!==m)throw new ii("property names with quotes must have matching quotes");if((d==="constructor"||!p)&&(a=!0),o+="."+d,s="%"+o+"%",go(ni,s))l=ni[s];else if(l!=null){if(!(d in l)){if(!n)throw new ti("base intrinsic for "+e+" exists, but the property is not available.");return}if(Tn&&c+1>=i.length){var _=Tn(l,d);p=!!_,p&&"get"in _&&!("originalValue"in _.get)?l=_.get:l=l[d]}else p=go(l,d),l=l[d];p&&!a&&(ni[s]=l)}}return l},$u={exports:{}};(function(t){var e=Ur,n=Br,i=n("%Function.prototype.apply%"),o=n("%Function.prototype.call%"),r=n("%Reflect.apply%",!0)||e.call(o,i),s=n("%Object.getOwnPropertyDescriptor%",!0),l=n("%Object.defineProperty%",!0),a=n("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}t.exports=function(p){var d=r(e,o,arguments);if(s&&l){var h=s(d,"length");h.configurable&&l(d,"length",{value:1+a(0,p.length-(arguments.length-1))})}return d};var u=function(){return r(e,i,arguments)};l?l(t.exports,"apply",{value:u}):t.exports.apply=u})($u);var wu=Br,ku=$u.exports,Ad=ku(wu("String.prototype.indexOf")),Od=function(e,n){var i=wu(e,!!n);return typeof i=="function"&&Ad(e,".prototype.")>-1?ku(i):i};const Nd={},Td=Object.freeze(Object.defineProperty({__proto__:null,default:Nd},Symbol.toStringTag,{value:"Module"})),Rd=hc(Td);var jr=typeof Map=="function"&&Map.prototype,er=Object.getOwnPropertyDescriptor&&jr?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,vo=jr&&er&&typeof er.get=="function"?er.get:null,Md=jr&&Map.prototype.forEach,Fr=typeof Set=="function"&&Set.prototype,tr=Object.getOwnPropertyDescriptor&&Fr?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,$o=Fr&&tr&&typeof tr.get=="function"?tr.get:null,Ld=Fr&&Set.prototype.forEach,Id=typeof WeakMap=="function"&&WeakMap.prototype,Oi=Id?WeakMap.prototype.has:null,Pd=typeof WeakSet=="function"&&WeakSet.prototype,Ni=Pd?WeakSet.prototype.has:null,Dd=typeof WeakRef=="function"&&WeakRef.prototype,Ds=Dd?WeakRef.prototype.deref:null,Ud=Boolean.prototype.valueOf,Bd=Object.prototype.toString,jd=Function.prototype.toString,Fd=String.prototype.match,zr=String.prototype.slice,pn=String.prototype.replace,zd=String.prototype.toUpperCase,Us=String.prototype.toLowerCase,yu=RegExp.prototype.test,Bs=Array.prototype.concat,Ht=Array.prototype.join,Hd=Array.prototype.slice,js=Math.floor,vr=typeof BigInt=="function"?BigInt.prototype.valueOf:null,nr=Object.getOwnPropertySymbols,$r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,oi=typeof Symbol=="function"&&typeof Symbol.iterator=="object",wt=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===oi?"object":"symbol")?Symbol.toStringTag:null,Su=Object.prototype.propertyIsEnumerable,Fs=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function zs(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||yu.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var i=t<0?-js(-t):js(t);if(i!==t){var o=String(i),r=zr.call(e,o.length+1);return pn.call(o,n,"$&_")+"."+pn.call(pn.call(r,/([0-9]{3})/g,"$&_"),/_$/,"")}}return pn.call(e,n,"$&_")}var wr=Rd,Hs=wr.custom,qs=Cu(Hs)?Hs:null,qd=function t(e,n,i,o){var r=n||{};if(fn(r,"quoteStyle")&&r.quoteStyle!=="single"&&r.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(fn(r,"maxStringLength")&&(typeof r.maxStringLength=="number"?r.maxStringLength<0&&r.maxStringLength!==1/0:r.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=fn(r,"customInspect")?r.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(fn(r,"indent")&&r.indent!==null&&r.indent!=="	"&&!(parseInt(r.indent,10)===r.indent&&r.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(fn(r,"numericSeparator")&&typeof r.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var l=r.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Ou(e,r);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var a=String(e);return l?zs(e,a):a}if(typeof e=="bigint"){var u=String(e)+"n";return l?zs(e,u):u}var c=typeof r.depth>"u"?5:r.depth;if(typeof i>"u"&&(i=0),i>=c&&c>0&&typeof e=="object")return kr(e)?"[Array]":"[Object]";var p=lp(r,i);if(typeof o>"u")o=[];else if(Au(o,e)>=0)return"[Circular]";function d(z,x,J){if(x&&(o=Hd.call(o),o.push(x)),J){var O={depth:r.depth};return fn(r,"quoteStyle")&&(O.quoteStyle=r.quoteStyle),t(z,O,i+1,o)}return t(z,r,i+1,o)}if(typeof e=="function"&&!Ws(e)){var h=Xd(e),m=so(e,d);return"[Function"+(h?": "+h:" (anonymous)")+"]"+(m.length>0?" { "+Ht.call(m,", ")+" }":"")}if(Cu(e)){var _=oi?pn.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):$r.call(e);return typeof e=="object"&&!oi?yi(_):_}if(op(e)){for(var y="<"+Us.call(String(e.nodeName)),b=e.attributes||[],E=0;E<b.length;E++)y+=" "+b[E].name+"="+Eu(Wd(b[E].value),"double",r);return y+=">",e.childNodes&&e.childNodes.length&&(y+="..."),y+="</"+Us.call(String(e.nodeName))+">",y}if(kr(e)){if(e.length===0)return"[]";var R=so(e,d);return p&&!sp(R)?"["+yr(R,p)+"]":"[ "+Ht.call(R,", ")+" ]"}if(Kd(e)){var j=so(e,d);return!("cause"in Error.prototype)&&"cause"in e&&!Su.call(e,"cause")?"{ ["+String(e)+"] "+Ht.call(Bs.call("[cause]: "+d(e.cause),j),", ")+" }":j.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Ht.call(j,", ")+" }"}if(typeof e=="object"&&s){if(qs&&typeof e[qs]=="function"&&wr)return wr(e,{depth:c-i});if(s!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(xd(e)){var D=[];return Md.call(e,function(z,x){D.push(d(x,e,!0)+" => "+d(z,e))}),Gs("Map",vo.call(e),D,p)}if(np(e)){var A=[];return Ld.call(e,function(z){A.push(d(z,e))}),Gs("Set",$o.call(e),A,p)}if(ep(e))return ir("WeakMap");if(ip(e))return ir("WeakSet");if(tp(e))return ir("WeakRef");if(Vd(e))return yi(d(Number(e)));if(Jd(e))return yi(d(vr.call(e)));if(Zd(e))return yi(Ud.call(e));if(Yd(e))return yi(d(String(e)));if(!Gd(e)&&!Ws(e)){var T=so(e,d),P=Fs?Fs(e)===Object.prototype:e instanceof Object||e.constructor===Object,U=e instanceof Object?"":"null prototype",B=!P&&wt&&Object(e)===e&&wt in e?zr.call(gn(e),8,-1):U?"Object":"",F=P||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",I=F+(B||U?"["+Ht.call(Bs.call([],B||[],U||[]),": ")+"] ":"");return T.length===0?I+"{}":p?I+"{"+yr(T,p)+"}":I+"{ "+Ht.call(T,", ")+" }"}return String(e)};function Eu(t,e,n){var i=(n.quoteStyle||e)==="double"?'"':"'";return i+t+i}function Wd(t){return pn.call(String(t),/"/g,"&quot;")}function kr(t){return gn(t)==="[object Array]"&&(!wt||!(typeof t=="object"&&wt in t))}function Gd(t){return gn(t)==="[object Date]"&&(!wt||!(typeof t=="object"&&wt in t))}function Ws(t){return gn(t)==="[object RegExp]"&&(!wt||!(typeof t=="object"&&wt in t))}function Kd(t){return gn(t)==="[object Error]"&&(!wt||!(typeof t=="object"&&wt in t))}function Yd(t){return gn(t)==="[object String]"&&(!wt||!(typeof t=="object"&&wt in t))}function Vd(t){return gn(t)==="[object Number]"&&(!wt||!(typeof t=="object"&&wt in t))}function Zd(t){return gn(t)==="[object Boolean]"&&(!wt||!(typeof t=="object"&&wt in t))}function Cu(t){if(oi)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!$r)return!1;try{return $r.call(t),!0}catch{}return!1}function Jd(t){if(!t||typeof t!="object"||!vr)return!1;try{return vr.call(t),!0}catch{}return!1}var Qd=Object.prototype.hasOwnProperty||function(t){return t in this};function fn(t,e){return Qd.call(t,e)}function gn(t){return Bd.call(t)}function Xd(t){if(t.name)return t.name;var e=Fd.call(jd.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function Au(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}function xd(t){if(!vo||!t||typeof t!="object")return!1;try{vo.call(t);try{$o.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function ep(t){if(!Oi||!t||typeof t!="object")return!1;try{Oi.call(t,Oi);try{Ni.call(t,Ni)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function tp(t){if(!Ds||!t||typeof t!="object")return!1;try{return Ds.call(t),!0}catch{}return!1}function np(t){if(!$o||!t||typeof t!="object")return!1;try{$o.call(t);try{vo.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function ip(t){if(!Ni||!t||typeof t!="object")return!1;try{Ni.call(t,Ni);try{Oi.call(t,Oi)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function op(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function Ou(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,i="... "+n+" more character"+(n>1?"s":"");return Ou(zr.call(t,0,e.maxStringLength),e)+i}var o=pn.call(pn.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,rp);return Eu(o,"single",e)}function rp(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+zd.call(e.toString(16))}function yi(t){return"Object("+t+")"}function ir(t){return t+" { ? }"}function Gs(t,e,n,i){var o=i?yr(n,i):Ht.call(n,", ");return t+" ("+e+") {"+o+"}"}function sp(t){for(var e=0;e<t.length;e++)if(Au(t[e],`
`)>=0)return!1;return!0}function lp(t,e){var n;if(t.indent==="	")n="	";else if(typeof t.indent=="number"&&t.indent>0)n=Ht.call(Array(t.indent+1)," ");else return null;return{base:n,prev:Ht.call(Array(e+1),n)}}function yr(t,e){if(t.length===0)return"";var n=`
`+e.prev+e.base;return n+Ht.call(t,","+n)+`
`+e.prev}function so(t,e){var n=kr(t),i=[];if(n){i.length=t.length;for(var o=0;o<t.length;o++)i[o]=fn(t,o)?e(t[o],t):""}var r=typeof nr=="function"?nr(t):[],s;if(oi){s={};for(var l=0;l<r.length;l++)s["$"+r[l]]=r[l]}for(var a in t)!fn(t,a)||n&&String(Number(a))===a&&a<t.length||oi&&s["$"+a]instanceof Symbol||(yu.call(/[^\w$]/,a)?i.push(e(a,t)+": "+e(t[a],t)):i.push(a+": "+e(t[a],t)));if(typeof nr=="function")for(var u=0;u<r.length;u++)Su.call(t,r[u])&&i.push("["+e(r[u])+"]: "+e(t[r[u]],t));return i}var Hr=Br,di=Od,ap=qd,up=Hr("%TypeError%"),lo=Hr("%WeakMap%",!0),ao=Hr("%Map%",!0),fp=di("WeakMap.prototype.get",!0),cp=di("WeakMap.prototype.set",!0),dp=di("WeakMap.prototype.has",!0),pp=di("Map.prototype.get",!0),hp=di("Map.prototype.set",!0),mp=di("Map.prototype.has",!0),qr=function(t,e){for(var n=t,i;(i=n.next)!==null;n=i)if(i.key===e)return n.next=i.next,i.next=t.next,t.next=i,i},_p=function(t,e){var n=qr(t,e);return n&&n.value},gp=function(t,e,n){var i=qr(t,e);i?i.value=n:t.next={key:e,next:t.next,value:n}},bp=function(t,e){return!!qr(t,e)},vp=function(){var e,n,i,o={assert:function(r){if(!o.has(r))throw new up("Side channel does not contain "+ap(r))},get:function(r){if(lo&&r&&(typeof r=="object"||typeof r=="function")){if(e)return fp(e,r)}else if(ao){if(n)return pp(n,r)}else if(i)return _p(i,r)},has:function(r){if(lo&&r&&(typeof r=="object"||typeof r=="function")){if(e)return dp(e,r)}else if(ao){if(n)return mp(n,r)}else if(i)return bp(i,r);return!1},set:function(r,s){lo&&r&&(typeof r=="object"||typeof r=="function")?(e||(e=new lo),cp(e,r,s)):ao?(n||(n=new ao),hp(n,r,s)):(i||(i={key:{},next:null}),gp(i,r,s))}};return o},$p=String.prototype.replace,wp=/%20/g,or={RFC1738:"RFC1738",RFC3986:"RFC3986"},Wr={default:or.RFC3986,formatters:{RFC1738:function(t){return $p.call(t,wp,"+")},RFC3986:function(t){return String(t)}},RFC1738:or.RFC1738,RFC3986:or.RFC3986},kp=Wr,rr=Object.prototype.hasOwnProperty,Nn=Array.isArray,zt=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),yp=function(e){for(;e.length>1;){var n=e.pop(),i=n.obj[n.prop];if(Nn(i)){for(var o=[],r=0;r<i.length;++r)typeof i[r]<"u"&&o.push(i[r]);n.obj[n.prop]=o}}},Nu=function(e,n){for(var i=n&&n.plainObjects?Object.create(null):{},o=0;o<e.length;++o)typeof e[o]<"u"&&(i[o]=e[o]);return i},Sp=function t(e,n,i){if(!n)return e;if(typeof n!="object"){if(Nn(e))e.push(n);else if(e&&typeof e=="object")(i&&(i.plainObjects||i.allowPrototypes)||!rr.call(Object.prototype,n))&&(e[n]=!0);else return[e,n];return e}if(!e||typeof e!="object")return[e].concat(n);var o=e;return Nn(e)&&!Nn(n)&&(o=Nu(e,i)),Nn(e)&&Nn(n)?(n.forEach(function(r,s){if(rr.call(e,s)){var l=e[s];l&&typeof l=="object"&&r&&typeof r=="object"?e[s]=t(l,r,i):e.push(r)}else e[s]=r}),e):Object.keys(n).reduce(function(r,s){var l=n[s];return rr.call(r,s)?r[s]=t(r[s],l,i):r[s]=l,r},o)},Ep=function(e,n){return Object.keys(n).reduce(function(i,o){return i[o]=n[o],i},e)},Cp=function(t,e,n){var i=t.replace(/\+/g," ");if(n==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},Ap=function(e,n,i,o,r){if(e.length===0)return e;var s=e;if(typeof e=="symbol"?s=Symbol.prototype.toString.call(e):typeof e!="string"&&(s=String(e)),i==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});for(var l="",a=0;a<s.length;++a){var u=s.charCodeAt(a);if(u===45||u===46||u===95||u===126||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||r===kp.RFC1738&&(u===40||u===41)){l+=s.charAt(a);continue}if(u<128){l=l+zt[u];continue}if(u<2048){l=l+(zt[192|u>>6]+zt[128|u&63]);continue}if(u<55296||u>=57344){l=l+(zt[224|u>>12]+zt[128|u>>6&63]+zt[128|u&63]);continue}a+=1,u=65536+((u&1023)<<10|s.charCodeAt(a)&1023),l+=zt[240|u>>18]+zt[128|u>>12&63]+zt[128|u>>6&63]+zt[128|u&63]}return l},Op=function(e){for(var n=[{obj:{o:e},prop:"o"}],i=[],o=0;o<n.length;++o)for(var r=n[o],s=r.obj[r.prop],l=Object.keys(s),a=0;a<l.length;++a){var u=l[a],c=s[u];typeof c=="object"&&c!==null&&i.indexOf(c)===-1&&(n.push({obj:s,prop:u}),i.push(c))}return yp(n),e},Np=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Tp=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},Rp=function(e,n){return[].concat(e,n)},Mp=function(e,n){if(Nn(e)){for(var i=[],o=0;o<e.length;o+=1)i.push(n(e[o]));return i}return n(e)},Tu={arrayToObject:Nu,assign:Ep,combine:Rp,compact:Op,decode:Cp,encode:Ap,isBuffer:Tp,isRegExp:Np,maybeMap:Mp,merge:Sp},Ru=vp,Sr=Tu,Ti=Wr,Lp=Object.prototype.hasOwnProperty,Ks={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,n){return e+"["+n+"]"},repeat:function(e){return e}},Jt=Array.isArray,Ip=String.prototype.split,Pp=Array.prototype.push,Mu=function(t,e){Pp.apply(t,Jt(e)?e:[e])},Dp=Date.prototype.toISOString,Ys=Ti.default,mt={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Sr.encode,encodeValuesOnly:!1,format:Ys,formatter:Ti.formatters[Ys],indices:!1,serializeDate:function(e){return Dp.call(e)},skipNulls:!1,strictNullHandling:!1},Up=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},sr={},Bp=function t(e,n,i,o,r,s,l,a,u,c,p,d,h,m,_,y){for(var b=e,E=y,R=0,j=!1;(E=E.get(sr))!==void 0&&!j;){var D=E.get(e);if(R+=1,typeof D<"u"){if(D===R)throw new RangeError("Cyclic object value");j=!0}typeof E.get(sr)>"u"&&(R=0)}if(typeof a=="function"?b=a(n,b):b instanceof Date?b=p(b):i==="comma"&&Jt(b)&&(b=Sr.maybeMap(b,function(H){return H instanceof Date?p(H):H})),b===null){if(r)return l&&!m?l(n,mt.encoder,_,"key",d):n;b=""}if(Up(b)||Sr.isBuffer(b)){if(l){var A=m?n:l(n,mt.encoder,_,"key",d);if(i==="comma"&&m){for(var T=Ip.call(String(b),","),P="",U=0;U<T.length;++U)P+=(U===0?"":",")+h(l(T[U],mt.encoder,_,"value",d));return[h(A)+(o&&Jt(b)&&T.length===1?"[]":"")+"="+P]}return[h(A)+"="+h(l(b,mt.encoder,_,"value",d))]}return[h(n)+"="+h(String(b))]}var B=[];if(typeof b>"u")return B;var F;if(i==="comma"&&Jt(b))F=[{value:b.length>0?b.join(",")||null:void 0}];else if(Jt(a))F=a;else{var I=Object.keys(b);F=u?I.sort(u):I}for(var z=o&&Jt(b)&&b.length===1?n+"[]":n,x=0;x<F.length;++x){var J=F[x],O=typeof J=="object"&&typeof J.value<"u"?J.value:b[J];if(!(s&&O===null)){var L=Jt(b)?typeof i=="function"?i(z,J):z:z+(c?"."+J:"["+J+"]");y.set(e,R);var Y=Ru();Y.set(sr,y),Mu(B,t(O,L,i,o,r,s,l,a,u,c,p,d,h,m,_,Y))}}return B},jp=function(e){if(!e)return mt;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=e.charset||mt.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=Ti.default;if(typeof e.format<"u"){if(!Lp.call(Ti.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var o=Ti.formatters[i],r=mt.filter;return(typeof e.filter=="function"||Jt(e.filter))&&(r=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:mt.addQueryPrefix,allowDots:typeof e.allowDots>"u"?mt.allowDots:!!e.allowDots,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:mt.charsetSentinel,delimiter:typeof e.delimiter>"u"?mt.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:mt.encode,encoder:typeof e.encoder=="function"?e.encoder:mt.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:mt.encodeValuesOnly,filter:r,format:i,formatter:o,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:mt.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:mt.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:mt.strictNullHandling}},Fp=function(t,e){var n=t,i=jp(e),o,r;typeof i.filter=="function"?(r=i.filter,n=r("",n)):Jt(i.filter)&&(r=i.filter,o=r);var s=[];if(typeof n!="object"||n===null)return"";var l;e&&e.arrayFormat in Ks?l=e.arrayFormat:e&&"indices"in e?l=e.indices?"indices":"repeat":l="indices";var a=Ks[l];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var u=a==="comma"&&e&&e.commaRoundTrip;o||(o=Object.keys(n)),i.sort&&o.sort(i.sort);for(var c=Ru(),p=0;p<o.length;++p){var d=o[p];i.skipNulls&&n[d]===null||Mu(s,Bp(n[d],d,a,u,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,c))}var h=s.join(i.delimiter),m=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),h.length>0?m+h:""},ri=Tu,Er=Object.prototype.hasOwnProperty,zp=Array.isArray,dt={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:ri.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Hp=function(t){return t.replace(/&#(\d+);/g,function(e,n){return String.fromCharCode(parseInt(n,10))})},Lu=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},qp="utf8=%26%2310003%3B",Wp="utf8=%E2%9C%93",Gp=function(e,n){var i={},o=n.ignoreQueryPrefix?e.replace(/^\?/,""):e,r=n.parameterLimit===1/0?void 0:n.parameterLimit,s=o.split(n.delimiter,r),l=-1,a,u=n.charset;if(n.charsetSentinel)for(a=0;a<s.length;++a)s[a].indexOf("utf8=")===0&&(s[a]===Wp?u="utf-8":s[a]===qp&&(u="iso-8859-1"),l=a,a=s.length);for(a=0;a<s.length;++a)if(a!==l){var c=s[a],p=c.indexOf("]="),d=p===-1?c.indexOf("="):p+1,h,m;d===-1?(h=n.decoder(c,dt.decoder,u,"key"),m=n.strictNullHandling?null:""):(h=n.decoder(c.slice(0,d),dt.decoder,u,"key"),m=ri.maybeMap(Lu(c.slice(d+1),n),function(_){return n.decoder(_,dt.decoder,u,"value")})),m&&n.interpretNumericEntities&&u==="iso-8859-1"&&(m=Hp(m)),c.indexOf("[]=")>-1&&(m=zp(m)?[m]:m),Er.call(i,h)?i[h]=ri.combine(i[h],m):i[h]=m}return i},Kp=function(t,e,n,i){for(var o=i?e:Lu(e,n),r=t.length-1;r>=0;--r){var s,l=t[r];if(l==="[]"&&n.parseArrays)s=[].concat(o);else{s=n.plainObjects?Object.create(null):{};var a=l.charAt(0)==="["&&l.charAt(l.length-1)==="]"?l.slice(1,-1):l,u=parseInt(a,10);!n.parseArrays&&a===""?s={0:o}:!isNaN(u)&&l!==a&&String(u)===a&&u>=0&&n.parseArrays&&u<=n.arrayLimit?(s=[],s[u]=o):a!=="__proto__"&&(s[a]=o)}o=s}return o},Yp=function(e,n,i,o){if(!!e){var r=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/,l=/(\[[^[\]]*])/g,a=i.depth>0&&s.exec(r),u=a?r.slice(0,a.index):r,c=[];if(u){if(!i.plainObjects&&Er.call(Object.prototype,u)&&!i.allowPrototypes)return;c.push(u)}for(var p=0;i.depth>0&&(a=l.exec(r))!==null&&p<i.depth;){if(p+=1,!i.plainObjects&&Er.call(Object.prototype,a[1].slice(1,-1))&&!i.allowPrototypes)return;c.push(a[1])}return a&&c.push("["+r.slice(a.index)+"]"),Kp(c,n,i,o)}},Vp=function(e){if(!e)return dt;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=typeof e.charset>"u"?dt.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?dt.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:dt.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:dt.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:dt.arrayLimit,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:dt.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:dt.comma,decoder:typeof e.decoder=="function"?e.decoder:dt.decoder,delimiter:typeof e.delimiter=="string"||ri.isRegExp(e.delimiter)?e.delimiter:dt.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:dt.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:dt.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:dt.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:dt.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:dt.strictNullHandling}},Zp=function(t,e){var n=Vp(e);if(t===""||t===null||typeof t>"u")return n.plainObjects?Object.create(null):{};for(var i=typeof t=="string"?Gp(t,n):t,o=n.plainObjects?Object.create(null):{},r=Object.keys(i),s=0;s<r.length;++s){var l=r[s],a=Yp(l,i[l],n,typeof t=="string");o=ri.merge(o,a,n)}return n.allowSparse===!0?o:ri.compact(o)},Jp=Fp,Qp=Zp,Xp=Wr,xp={formats:Xp,parse:Qp,stringify:Jp};const eh=fi("route");class th extends Mt{constructor(){super(),this.prop("ro","basePath",()=>this._basePath),this.prop("ro","hash",()=>(this._location.hash||"").replace(/^#/,"")),this.prop("ro","path",()=>this._path),this.prop("ro","pathParts",()=>this._pathParts),this.prop("ro","query",()=>this._query),this.prop("rw","baseUrl",""),this.prop("rw","enabled",!1),this._onClick=this._onClick.bind(this),this._onLocationChange=this._onLocationChange.bind(this),window.addEventListener("click",this._onClick),window.addEventListener("popstate",this._onLocationChange),this._history=window.history,this._location=window.location,this._basePath="",this._path="/",this._pathParts=[],this._query={}}conversationPath(e){const n=["","chat"];return e.connection_id&&n.push(e.connection_id),e.conversation_id&&n.push(e.conversation_id),n.map(i=>encodeURIComponent(i)).join("/")}go(e,n={}){e.indexOf(this.baseUrl)===0&&(e=e.substr(this.baseUrl.length));const i=this.baseUrl+e;if(i===this._location.href)return this;this._history[n.replace?"replaceState":"pushState"]({},document.title,i),this.update({path:!0})._onLocationChange({})}param(e,n=""){const i=this.query;return Object.hasOwn(i,e)?i[e]:n}subscribe(e){return e(this),this.on("update",e)}update(e){return e.baseUrl&&(e.baseUrl=e.baseUrl.replace(/\/+$/,""),this._basePath=new URL(e.baseUrl).pathname.replace(/\/+$/,"")),super.update(e),e.baseUrl&&this._onLocationChange(),this}urlFor(e,n={}){const i=e.match(/^\w+:/)||e.match(/^#/)?e:this.basePath+e,o=Object.keys(n).sort().filter(r=>Ue.defined(n[r])).map(r=>r+"="+encodeURIComponent(n[r])).join("&");return i+(o?"?"+o:"")}wsUrlFor(e){return(e.match(/^\w+:/)?e:this.baseUrl+e).replace(/^http/,"ws")}_onClick(e){if(!this.enabled||e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)return;const n=e.target&&e.target.closest("a");if(!n||!n.href)return;if(n.target==="_self"&&(n.href.indexOf("/")===0?this.baseUrl+n.href:n.href)===location.href)return location.reload();if(n.hasAttribute("download")||n.hasAttribute("target"))return;let i=n.getAttribute("href")||"";i.indexOf("#")===0&&(i=this.path+i),i.indexOf("./")===0&&(i="/"+this._pathParts.slice(0,-1).join("/")+i.replace(/^\./,"")),i.indexOf(this.baseUrl)===0&&(i=i.substr(this.baseUrl.length)),i.indexOf(this.basePath)===0&&(i=i.substr(this.basePath.length)),i.indexOf("/")===0&&(this.go(i,{},n.hasAttribute("replace")),e.preventDefault())}_onLocationChange(){if(!this.enabled)return;const i=this._location.href.substr(this.baseUrl.length).split("#")[0].split("?");this._query=i.length===2?xp.parse(i.pop()):{},this._path=i[0],this._pathParts=i[0].length<=1?[]:i[0].replace(/^\//,"").split("/").map(decodeURIComponent),eh.info('path="'+this._path+'" '+JSON.stringify(this._pathParts)+", query="+JSON.stringify(this._query)),this.update({path:!0})}}const Be=new th;class nh{constructor(){this.aliases=this._buildAliases(),this.re=this._buildRe(),this.byShortName={},this.grouped={},this.status="pending"}async load(){if(["loading","success"].indexOf(this.status)!==-1)return this;this.status="loading";const e=await fetch(Be.urlFor("/emojis/0bf11a9aff0d6da7b46f1490f86a71eb.json"));return this._load((await e.json()).emojis),this.status="success",this}markup(e){return sd.parse(e.replace(this.re,(n,i,o)=>{const r=this.aliases[o]||o,s=this.byShortName[r];return i+(s&&s.emoji||o)}))}search(e){e=e.toLowerCase();const n=this.grouped[e]||this.grouped[e.substring(0,2)]||{};return Object.keys(n).sort((i,o)=>n[i]-n[o]).map(i=>this.byShortName[i]).filter(i=>(i.shortname+i.name).toLowerCase().indexOf(e)!==-1)}_buildAliases(){return{"&lt;3":":heart:","(Y)":":thumbsup:",":(":":disappointed:",":)":":slight_smile:",":-*":":kissing:",":/":":confused:",":D":":smiley:",":O":":open_mouth:",":P":":stuck_out_tongue:",";)":":wink:",";D":":grin:"}}_buildRe(){const e=Object.keys(this.aliases).sort().map(ci).join("|");return new RegExp("(^|\\s)(:\\w+:|"+e+")(?=\\s|\\,|\\.|$)","gi")}_load(e){this.grouped={};for(const n of e)!(n.emoji&&n.shortname)||(n.name||(n.name=n.shortname),delete n.category,delete n.html,delete n.order,delete n.unicode,this.byShortName[n.shortname]=n,this._toGrouped(n))}_toGrouped(e){const n=this.grouped;([e.shortname,e.name].join("-").replace(/\W+/," ").match(/\W(\w{2})/g)||[]).forEach((o,r)=>{o=o.substring(1).toLowerCase(),n[o]||(n[o]={}),n[o][e.shortname]=r,o=o[0],n[o]||(n[o]={}),n[o][e.shortname]=r})}}const ih={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"},Si=(t,e=/[&<>'"]/g)=>t.replace(e,n=>ih[n]),Vs=t=>t.replace(/\s$/,"&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s{2}/g," &nbsp;"),yt=t=>[t.map(e=>`<${e}>`).join(""),t.reverse().map(e=>`</${e}>`).join("")];class oh extends Mt{constructor(){super(),this.prop("cookie","lang",""),this.prop("ro","dictionaries",{}),this.prop("ro","emojis",new nh),this.prop("ro","languages",()=>this._languages),this.prop("ro","languageOptions",()=>this._languageOptions),this._languages=[],this._languageOptions=[],this._rules=this._makeRules()}l(e,...n){const i=this.dictionaries[this.lang]||{};return String(i[e]||e).replace(/%(\d)(\D|$)/g,(r,s,l)=>typeof n[s-1]>"u"?r:n[s-1]+l)}async load(e){if(e||(e=this.lang||document.documentElement.getAttribute("lang")),this.dictionaries[e])return this.update({lang:e});const n=await et.op("getDictionary",{lang:e}).perform();return this.dictionaries[e]=n.res.body.dictionary,this._languages=n.res.body.available_languages||{},this._languageOptions=Object.keys(this._languages).sort().map(i=>[i,this._languages[i].language_team.replace(/\s*<.*/,"")]),this.update({lang:e})}lmd(e,...n){return this.md(this.l(e,...n))}md(e){return e.length?this.emojis.markup(Vs(this._tagToHTML(this._makeTag(e)))):"&nbsp;"}raw(e){return e.length?Vs(Si(e)):"&nbsp;"}_makeRules(){const e=[];return e.push({tag:yt(["code"]),re:/`(?=[^`\s])/,rules:[],handler:"_mdTag"}),e.push({tag:yt(["em","strong"]),re:/\*\*\*(?=\S)/,rules:e,handler:"_mdTag"}),e.push({tag:yt(["strong"]),re:/\*\*(?=\S)/,rules:e,handler:"_mdTag"}),e.push({tag:yt(["em"]),re:/\*(?=\S)/,rules:e,handler:"_mdTag"}),e.push({tag:yt(["span"]),re:/\x03\d{1,2}(?:,\d{1,2})?/,rules:e,handler:"_mdIrcColorFormatting"}),e.push({tag:yt(["span"]),re:/[\x02\x1d\x1e\x1f\x11]/,rules:e,handler:"_mdIrcTextFormatting"}),e.push({tag:yt(["a"]),re:/\[([a-zA-Z][^\]]+)\]\(([^)]+)\)/,rules:[],handler:"_mdLink"}),e.push({tag:yt(["a"]),re:/\b(https?|mailto):\S+/,rules:[],handler:"_mdURL"}),e.push({tag:yt(["a"]),re:/(\s|^)#[a-zA-Z][\w.-]+(?=\W|$)/,rules:[],handler:"_mdChannelname"}),e}_makeTag(e,n=this._rules,i=0){if(i===0&&e.indexOf("> ")===0)return[yt(["blockquote"]),{},[this._makeTag(e.replace(/^>\s/,""),n,i+1)]];const o=[];for(const r of n){const s=e.match(r.re);if(!s)continue;const l={attrs:{},after:e.substring(s.index+s[0].length),before:e.substring(0,s.index),captured:s[0],index:s.index,match:s,tag:r.tag};if(this[r.handler](l),typeof l.content!="string"){e=l.before+l.captured+l.after;continue}l.before.length&&o.push(this._makeTag(l.before,n,i+1)),o.push([l.tag,l.attrs,[this._makeTag(l.content,r.rules,i+1)]]),l.after.length&&o.push(this._makeTag(l.after,n,i+1));break}return[null,{},o.length?o:[Si(e)]]}_mdChannelname(e){e.captured=e.captured.replace(/^\s/,n=>(e.before+=n,"")),e.content=e.captured,e.attrs.href="./"+encodeURIComponent(e.captured)}_mdIrcColorFormatting(e){const n=e.after.indexOf("");if(n===-1)return;e.content=e.after.substring(0,n),e.after=e.after.substring(n+1);const i=[];e.captured.replace(/\x030?(\d{1,2}),?(\d{1,2})?/,(o,r,s)=>{s&&i.push("bg-"+s),r&&i.push("text-"+r)}),i.length&&(e.attrs.class=i.join(" "))}_mdIrcTextFormatting(e){const n=e.after.indexOf(e.captured);n!==-1&&(e.content=e.after.substring(0,n),e.after=e.after.substring(n+e.captured.length),e.tag=e.captured===""?yt(["strong"]):e.captured===""?yt(["em"]):e.captured===""?yt(["u"]):e.captured===""?yt(["code"]):yt(["span"]))}_mdLink(e){e.content=e.match[1],e.attrs.href=Si(e.match[2]),e.match[2].match(/^\w+:/)&&(e.attrs.target="_blank")}_mdTag(e){if(e.before.match(/\\$/)){e.before=e.before.replace(/\\$/,"");return}const n=e.after.indexOf(e.captured);n!==-1&&(e.content=e.after.substring(0,n),e.after=e.after.substring(n+e.captured.length))}_mdURL(e){e.captured=e.captured.replace(/[,.:;!"')]$/,n=>(e.after=n[0]+e.after,"")),e.content=e.captured.replace(/^(https|mailto):(\/\/)?/,""),e.attrs.href=Si(e.captured),e.attrs.target="_blank"}_tagToHTML(e){if(typeof e=="string")return e;const n=typeof e[2]=="string"?Si(e[2]):e[2].map(r=>this._tagToHTML(r)).join("");if(!e[0])return n;const i=Object.keys(e[1]).sort().map(r=>`${r}="${e[1][r]}"`).join(" ");return(i?e[0][0].replace(/>/," "+i+">"):e[0][0])+n+e[0][1]}}const xe=new oh,lt=fu(xe,t=>(...e)=>t.l(...e)),jt=fu(xe,t=>(...e)=>t.lmd(...e)),cn=[],Iu={};function rh({query:t}){const e=[];for(let n=0;n<cn.length;n++){if(cn[n].cmd.indexOf(t)!==0)continue;const i=cn[n].alias||cn[n].cmd;e.push({val:i,text:xe.md(cn[n].example)})}return e}function sh(t){const e=t.split(/\s/),n=Iu[e[0].toLowerCase()];return Ue.function(n)?n(e.slice(1)):n?[n].concat(e.slice(1)).filter(i=>Ue.defined(i)&&i.length).join(" "):t}const it=(t,e,n)=>cn.push({cmd:t,description:n,example:e});it("/me","/me <msg>","Send message as an action.");it("/say","/say <msg>",'Used when you want to send a message starting with "/".');it("/whois","/whois <nick>","Show information about a user.");it("/query","/query <nick>","Open up a new chat window with nick.");it("/msg","/msg <nick> <msg>","Send a direct message to nick.");it("/shrug","/shrug <msg>","Add a shrug to end of message. Message is optional.");it("/join","/join <#channel>","Join channel and open up a chat window.");it("/close","/close [nick|#channel]","Close conversation.");it("/nick","/nick <nick>","Change your wanted nick.");it("/away","/away <message>","Add or remove an away message");it("/kick","/kick <nick>","Kick a user from the current channel.");it("/mode","/mode [+|-][b|o|v] <user>","Change mode of yourself or a user");it("/topic","/topic or /topic <new topic>","Show current topic, or set a new one.");it("/names","/names","Show participants in the channel.");it("/invite","/invite <nick> [#channel]","Invite a user to a channel.");it("/reconnect","/reconnect","Restart the current connection.");it("/clear","/clear history <#channel> or /clear history <nick>","Delete all history for the given conversation.");it("/oper","/oper <nick> <password>","Gain operator status on a network.");it("/cs","/cs <msg>","Send a message to chanserv.");it("/ns","/ns <msg>","Send a message to nickserv.");it("/ms","/ms <msg>","Send a message to memoserv.");it("/hs","/hs <msg>","Send a message to hostserv.");it("/bs","/bs <msg>","Send a message to botserv.");it("/os","/os <msg>","Send a message to operserv.");it("/quote","/quote <irc-command>","Allow you to send any raw IRC message.");const Vt=(t,e)=>Iu[t]=e;Vt("/close","/part");Vt("/shrug",t=>"/say "+t.concat("\xAF\\_(\u30C4)_/\xAF").join(" "));Vt("/cs","/quote chanserv");Vt("/ns","/quote nickserv");Vt("/ms","/quote memoserv");Vt("/hs","/quote hotserv");Vt("/bs","/quote botserv");Vt("/os","/quote operserv");Vt("/j","/join");Vt("/raw","/quote");function Mn(t,e){return Mn[t]?Mn[t](e):[]}function lh(t,e){t&&Object.hasOwn(t,"val")&&(t=t.val);const n=e.append?e.value.length:e.cursorPos;let[i,o]=[e.value.substring(0,n),e.value.substring(n)];return Ue.undefined(t)?{before:i,middle:"",after:o}:(e.append&&(i=i.replace(/[ ]$/,""),i.length&&(t=" "+t)),e.padBefore&&(i=i.replace(/[ ]$/,""),i.length&&(t=" "+t)),e.padAfter&&(o=o.replace(/^[ ]/,""),t=t+" "),e.replace&&(i=i.replace(/\S*\s?$/,"")),{before:i,middle:t,after:o})}function ah(t,e,{conversation:n,user:i}){let o="",r="";const s=t.substring(0,e).replace(/(\S)(\S*)$/,(u,c,p)=>(o=c,r=p,"")),l=o===":"&&r.length?"emojis":o==="/"&&!s.length?"commands":o==="@"&&r.length?"nicks":o==="#"||o==="&"?"conversations":"none",a=Mn(l,{conversation:n,query:o+r,user:i});return a.length&&a.unshift({autocompleteCategory:l,val:o+r}),a}Mn.commands=({query:t})=>rh({query:t});Mn.conversations=({conversation:t,query:e,user:n})=>{const i=n.findConversation({connection_id:t.connection_id}),o=i?i.conversations.toArray():n.conversations(),r=[];for(let s=0;s<o.length&&!(o[s].name.toLowerCase().indexOf(e)!==-1&&(r.push({text:o[s].name,val:o[s].conversation_id}),r.length>=20));s++);return r};Mn.emojis=({query:t})=>{const e=xe.emojis,n=[];for(let i of e.search(t.substring(1)))if(n.push({val:i.emoji,text:e.markup(i.emoji)}),n.length>=30)break;return n};Mn.nicks=({conversation:t,query:e})=>{const n=new RegExp("^"+ci(e.slice(1)),"i"),i=[];for(let o of t.participants.toArray()){if(i.length>=20)break;o.nick.match(n)&&i.push({val:o.nick})}return i};function Pu(t){const e=t-1;return e*e*e+1}function Dt(t,{delay:e=0,duration:n=400,easing:i=Xa}={}){const o=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:i,css:r=>`opacity: ${r*o}`}}function Yt(t,{delay:e=0,duration:n=400,easing:i=Pu,x:o=0,y:r=0,opacity:s=0}={}){const l=getComputedStyle(t),a=+l.opacity,u=l.transform==="none"?"":l.transform,c=a*(1-s);return{delay:e,duration:n,easing:i,css:(p,d)=>`
			transform: ${u} translate(${(1-p)*o}px, ${(1-p)*r}px);
			opacity: ${a-c*d}`}}function si(t,{delay:e=0,duration:n=400,easing:i=Pu}={}){const o=getComputedStyle(t),r=+o.opacity,s=parseFloat(o.height),l=parseFloat(o.paddingTop),a=parseFloat(o.paddingBottom),u=parseFloat(o.marginTop),c=parseFloat(o.marginBottom),p=parseFloat(o.borderTopWidth),d=parseFloat(o.borderBottomWidth);return{delay:e,duration:n,easing:i,css:h=>`overflow: hidden;opacity: ${Math.min(h*20,1)*r};height: ${h*s}px;padding-top: ${h*l}px;padding-bottom: ${h*a}px;margin-top: ${h*u}px;margin-bottom: ${h*c}px;border-top-width: ${h*p}px;border-bottom-width: ${h*d}px;`}}function Zs(t){const e=t.is("private")?t.participants.nicks().sort().join("-and-"):t.title;return encodeURIComponent(e).toLowerCase()}const wo=Fi(null,{conversationToInternalUrl(t){const e=this.get();if(!e)return null;const n=Be.urlFor("/video/"+e.hostname+"/"+Zs(t));return new URL(n,location.href).href},conversationToExternalUrl(t){const e=this.get();return e?new URL("/"+Zs(t),e).href:null},fromString(t){this.set(t?new URL(t):null)}}),uh=Fi(null,{close(){const t=this.get();return t?[!0,t.close(),this.set(null)][0]:!1},open(t,e={}){this.window||(this.window=window),t=t.toString(),e.nick&&(t+="?nick="+encodeURIComponent(e.nick));const n=this.window.open(t,"convos_video");["beforeunload","close"].forEach(i=>n.addEventListener(i,()=>this.set(null))),this.set(n)}});function Js(t,e,n){const i=t.slice();return i[39]=e[n],i[41]=n,i}function Qs(t){let e,n,i,o,r,s;return n=new be({props:{name:"plus-circle"}}),i=new be({props:{name:"times"}}),{c(){e=g("a"),G(n.$$.fragment),G(i.$$.fragment),k(e,"href","#actions"),k(e,"class","btn-hallow can-toggle"),Je(e,"is-active",t[2]==="actions")},m(l,a){w(l,e,a),q(n,e,null),q(i,e,null),o=!0,r||(s=Se(e,"click",rt(t[13])),r=!0)},p(l,a){(!o||a[0]&4)&&Je(e,"is-active",l[2]==="actions")},i(l){o||(v(n.$$.fragment,l),v(i.$$.fragment,l),o=!0)},o(l){S(n.$$.fragment,l),S(i.$$.fragment,l),o=!1},d(l){l&&$(e),W(n),W(i),r=!1,s()}}}function fh(t){let e,n,i,o,r=t[4],s=[];for(let l=0;l<r.length;l+=1)s[l]=Xs(Js(t,r,l));return{c(){e=g("div");for(let l=0;l<s.length;l+=1)s[l].c();k(e,"class",n="chat-input_menu for-"+t[5])},m(l,a){w(l,e,a);for(let u=0;u<s.length;u+=1)s[u].m(e,null);o=!0},p(l,a){if(t=l,a[0]&65560){r=t[4];let u;for(u=0;u<r.length;u+=1){const c=Js(t,r,u);s[u]?s[u].p(c,a):(s[u]=Xs(c),s[u].c(),s[u].m(e,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=r.length}(!o||a[0]&32&&n!==(n="chat-input_menu for-"+t[5]))&&k(e,"class",n)},i(l){o||(ut(()=>{i||(i=tt(e,Yt,t[12],!0)),i.run(1)}),o=!0)},o(l){i||(i=tt(e,Yt,t[12],!1)),i.run(0),o=!1},d(l){l&&$(e),$t(s,l),l&&i&&i.end()}}}function ch(t){let e,n,i,o,r,s=t[1]("Attach a file")+"",l,a,u,c=t[8]&&xs(t);return o=new be({props:{name:"cloud-upload-alt"}}),{c(){e=g("div"),c&&c.c(),n=C(),i=g("label"),G(o.$$.fragment),r=C(),l=N(s),k(i,"for","upload_files"),k(e,"class","chat-input_menu for-actions")},m(p,d){w(p,e,d),c&&c.m(e,null),f(e,n),f(e,i),q(o,i,null),f(i,r),f(i,l),u=!0},p(p,d){t=p,t[8]?c?(c.p(t,d),d[0]&256&&v(c,1)):(c=xs(t),c.c(),v(c,1),c.m(e,n)):c&&(Ce(),S(c,1,1,()=>{c=null}),Ae()),(!u||d[0]&2)&&s!==(s=t[1]("Attach a file")+"")&&M(l,s)},i(p){u||(v(c),v(o.$$.fragment,p),ut(()=>{a||(a=tt(e,Yt,t[12],!0)),a.run(1)}),u=!0)},o(p){S(c),S(o.$$.fragment,p),a||(a=tt(e,Yt,t[12],!1)),a.run(0),u=!1},d(p){p&&$(e),c&&c.d(),W(o),p&&a&&a.end()}}}function Xs(t){let e,n=(t[39].text||t[39].val)+"",i,o;return{c(){e=g("a"),k(e,"href","#index:"+t[41]),k(e,"tabindex","-1"),Je(e,"has-focus",t[41]===t[3])},m(r,s){w(r,e,s),e.innerHTML=n,i||(o=Se(e,"click",rt(t[16])),i=!0)},p(r,s){s[0]&16&&n!==(n=(r[39].text||r[39].val)+"")&&(e.innerHTML=n),s[0]&8&&Je(e,"has-focus",r[41]===r[3])},d(r){r&&$(e),i=!1,o()}}}function xs(t){let e,n,i,o=t[1]("Start a video conference")+"",r,s,l,a;return n=new be({props:{name:"video"}}),{c(){e=g("a"),G(n.$$.fragment),i=C(),r=N(o),k(e,"href",t[8])},m(u,c){w(u,e,c),q(n,e,null),f(e,i),f(e,r),s=!0,l||(a=Se(e,"click",t[15]),l=!0)},p(u,c){(!s||c[0]&2)&&o!==(o=u[1]("Start a video conference")+"")&&M(r,o),(!s||c[0]&256)&&k(e,"href",u[8])},i(u){s||(v(n.$$.fragment,u),s=!0)},o(u){S(n.$$.fragment,u),s=!1},d(u){u&&$(e),W(n),l=!1,a()}}}function dh(t){let e,n,i,o,r,s,l,a=t[0].is("conversation"),u,c,p,d,h,m=At(t[1](t[9]))+"",_,y,b,E,R,j,D,A,T=a&&Qs(t);p=new be({props:{name:t[10]}});const P=[ch,fh],U=[];function B(F,I){return I[0]&5&&(b=null),b==null&&(b=!!(F[2]==="actions"&&F[0].is("conversation"))),b?0:F[4].length?1:-1}return~(E=B(t,[-1,-1]))&&(R=U[E]=P[E](t)),{c(){e=g("form"),n=g("input"),i=C(),o=g("textarea"),r=C(),s=g("textarea"),l=C(),T&&T.c(),u=C(),c=g("button"),G(p.$$.fragment),d=C(),h=g("span"),_=N(m),y=C(),R&&R.c(),k(n,"type","file"),k(n,"id","upload_files"),k(n,"name","upload_files"),k(n,"class","non-interactive"),k(o,"class","non-interactive"),k(o,"placeholder",t[11]),k(s,"class","is-primary-input"),k(s,"placeholder",t[11]),k(h,"class","tooltip is-above is-left"),k(c,"type","buttton"),k(c,"class","btn-hallow has-tooltip chat-input__send"),k(e,"class","chat-input")},m(F,I){w(F,e,I),f(e,n),f(e,i),f(e,o),t[29](o),f(e,r),f(e,s),f(e,l),T&&T.m(e,null),f(e,u),f(e,c),q(p,c,null),f(c,d),f(c,h),f(h,_),f(e,y),~E&&U[E].m(e,null),j=!0,D||(A=[Se(window,"click",t[28]),Se(n,"change",function(){ai(t[7])&&t[7].apply(this,arguments)}),Nr(t[14].call(null,s)),Se(c,"click",t[17]),Se(e,"submit",rt(t[27]))],D=!0)},p(F,I){t=F,(!j||I[0]&2048)&&k(o,"placeholder",t[11]),(!j||I[0]&2048)&&k(s,"placeholder",t[11]),I[0]&1&&(a=t[0].is("conversation")),a?T?(T.p(t,I),I[0]&1&&v(T,1)):(T=Qs(t),T.c(),v(T,1),T.m(e,u)):T&&(Ce(),S(T,1,1,()=>{T=null}),Ae());const z={};I[0]&1024&&(z.name=t[10]),p.$set(z),(!j||I[0]&514)&&m!==(m=At(t[1](t[9]))+"")&&M(_,m);let x=E;E=B(t,I),E===x?~E&&U[E].p(t,I):(R&&(Ce(),S(U[x],1,1,()=>{U[x]=null}),Ae()),~E?(R=U[E],R?R.p(t,I):(R=U[E]=P[E](t),R.c()),v(R,1),R.m(e,null)):R=null)},i(F){j||(v(T),v(p.$$.fragment,F),v(R),j=!0)},o(F){S(T),S(p.$$.fragment,F),S(R),j=!1},d(F){F&&$(e),t[29](null),T&&T.d(),W(p),~E&&U[E].d(),D=!1,st(A)}}}function ph(t,e,n){let i,o,r,s,l,a,u,c,p=Le,d=()=>(p(),p=St(_,ce=>n(26,c=ce)),_);Ee(t,lt,ce=>n(1,u=ce)),t.$$.on_destroy.push(()=>p());const h=de;let{uploadProgress:m=0}=e,{conversation:_}=e;d();let y="",b=0,E=[],R="none",j={y:-10,duration:200},D,A,T=0;const P=pt("user"),U=new pc;function B(ce){const ke=ce.target.closest("a"),Ie=!ke||y?"":ke.href.replace(/.*#/,"");setTimeout(()=>{n(2,y=Ie)},1)}function F(ce,ke){const{before:Ie,middle:De,after:Ne}=lh(ce,{...ke,cursorPos:D.selectionStart,value:D.value});Z(Ie+De+Ne),D.selectionStart=D.selectionEnd=(Ie+De).length}function I(){D&&D.focus()}function z(ce,ke){!E.length||(ce.preventDefault(),n(3,b+=ke),b<0&&n(3,b=E.length-1),b>=E.length&&n(3,b=0),F(E[b],{replace:!0}))}function x(ce){!ce.conversation_id&&_.conversation_id&&(ce.conversation_id=_.conversation_id)}function J(ce){n(3,b=0),n(22,T=ce.selectionStart),_.update({userInput:ce.value}),ce.value.length||U.update({index:-1})}function O(ce){D=ce,D.addEventListener("focus",()=>n(22,T=D.value.length+1)),D.addEventListener("change",()=>J(D)),D.addEventListener("input",Y),D.addEventListener("keyup",ke=>{(ke.key.length===1||["ArrowLeft","ArrowRight","Backspace"].indexOf(ke.key)!==-1)&&J(D)}),D.addEventListener("keydown",ke=>{if(!(ke.key==="ArrowDown"&&U.render(ke,-1))&&!(ke.key==="ArrowUp"&&U.render(ke,1))){if(ke.key==="ArrowDown")return z(ke,ke.shiftKey?4:1);if(ke.key==="ArrowUp")return z(ke,ke.shiftKey?-4:-1);if(ke.key==="Enter")return V(ke);if(ke.key==="Tab")return z(ke,ke.shiftKey?-1:1)}}),U.attach(D),Z(Ue.undefined(_.userInput)?"":_.userInput)}function L(ce){ce.preventDefault(),uh.open(a,{nick:_.participants.me().nick});const ke=_.messages.toArray().slice(-20).find(Ie=>Ie.message.indexOf(a)!==-1);ke&&ke.ts.toEpoch()>Ai()-600||_.send({method:"send",message:wo.conversationToExternalUrl(_)})}function Y(){A.maxHeight||n(6,A.maxHeight=A.parentNode.offsetHeight,A),n(6,A.value=D.value,A),n(6,A.style.width=D.offsetWidth+"px",A),D.style.height=(A.maxHeight>A.scrollHeight?A.scrollHeight:A.maxHeight)+"px"}function H(ce){n(3,b=parseInt(ce.target.closest("a").href.replace(/.*index:/,""),10)),F(E[b],{padAfter:!0,replace:!0}),setTimeout(()=>{J(D),D.focus()},1)}function V(ce){if(E[b])ce.preventDefault(),F(E[b],{replace:!0}),n(22,T=D.selectionStart+1);else if(!ce.altKey&&!ce.ctrlKey&&!ce.metaKey&&!ce.shiftKey){ce.preventDefault();const Ie={method:"send"};Ie.message=sh(D.value),Ie.message.length&&_.send(Ie,x),U.add(Ie.message),_.is("search")||Z(""),setTimeout(Y,10)}}function Z(ce){D&&(D.value=ce),_.update({userInput:ce})}function K(ce){!D||(n(4,E=ce>D.value.length?[]:ah(D.value,ce,{conversation:_,user:P})),n(5,R=E.length&&E[0].autocompleteCategory||"none"))}function re(ce){re.lock!==ce.path&&(n(23,re.lock=ce.path,re),Z(Ue.undefined(ce.userInput)?"":ce.userInput))}function de(ce){const ke=ce.target&&ce.target.files||ce.dataTransfer&&ce.dataTransfer.files;if(!ke||!ke.length)return;if(ke.length>1)return _.addMessages({message:"Cannot upload more than one file.",type:"error"});const Ie=new FormData;Ie.append("file",ke[0]),n(7,de.file=ke[0],de);const De=et.op("uploadFile");De.on("progress",Ne=>{m<100&&n(18,m=parseInt(100*(Ne.total?Ne.loaded/Ne.total:.02),10)),m>=100&&n(18,m=0)}),n(18,m=1),De.perform({formData:Ie}).then(Ne=>{const Me=Ne.res.body;if(n(18,m=0),Me.files&&Me.files.length)return F(Me.files[0].url,{append:!0});Me.errors&&_.addMessages({message:"Could not upload file: %1",vars:[u(Lr(Me.errors))],type:"error"})})}function ie(ce){Ln.call(this,t,ce)}const he=()=>{n(2,y="")};function Te(ce){me[ce?"unshift":"push"](()=>{A=ce,n(6,A)})}return t.$$set=ce=>{"uploadProgress"in ce&&n(18,m=ce.uploadProgress),"conversation"in ce&&d(n(0,_=ce.conversation))},t.$$.update=()=>{t.$$.dirty[0]&1&&_&&n(2,y=""),t.$$.dirty[0]&1&&n(25,i=P.findConversation({connection_id:_.connection_id})),t.$$.dirty[0]&33554432&&n(24,o=i&&i.nick),t.$$.dirty[0]&50331651&&n(11,r=_.is("search")?u("What are you looking for?"):i&&i.is("unreachable")?u("Connecting..."):u("What is on your mind %1?",o)),t.$$.dirty[0]&1&&n(10,s=_.is("search")?"search":"paper-plane"),t.$$.dirty[0]&3&&n(9,l=_.is("search")?u("Search"):u("Send")),t.$$.dirty[0]&1&&n(8,a=wo.conversationToInternalUrl(_)),t.$$.dirty[0]&67108864&&U.update({conversation:c}),t.$$.dirty[0]&4194304&&K(T),t.$$.dirty[0]&8388609&&re(_)},[_,u,y,b,E,R,A,de,a,l,s,r,j,B,O,L,H,V,m,h,F,I,T,re,o,i,c,ie,he,Te]}class Du extends Xe{constructor(e){super(),Qe(this,e,ph,dh,Ze,{uploader:19,uploadProgress:18,conversation:0,fillIn:20,focus:21},null,[-1,-1])}get uploader(){return this.$$.ctx[19]}get fillIn(){return this.$$.ctx[20]}get focus(){return this.$$.ctx[21]}}function el(t,e,n){const i=t.slice();return i[9]=e[n],i}function tl(t){let e,n,i,o;return n=new be({props:{name:t[0].expanded?"caret-square-up":"caret-square-down"}}),{c(){e=g("a"),G(n.$$.fragment),k(e,"href",i="#action:expand:"+t[0].index)},m(r,s){w(r,e,s),q(n,e,null),o=!0},p(r,s){const l={};s&1&&(l.name=r[0].expanded?"caret-square-up":"caret-square-down"),n.$set(l),(!o||s&1&&i!==(i="#action:expand:"+r[0].index))&&k(e,"href",i)},i(r){o||(v(n.$$.fragment,r),o=!0)},o(r){S(n.$$.fragment,r),o=!1},d(r){r&&$(e),W(n)}}}function hh(t){return{c:Le,m:Le,p:Le,d:Le}}function mh(t){let e,n=_h(t);return{c(){n&&n.c(),e=ct()},m(i,o){n&&n.m(i,o),w(i,e,o)},p(i,o){n.p(i,o)},d(i){n&&n.d(i),i&&$(e)}}}function _h(t){let e,n,i,o,r;return{c(){e=g("div"),k(e,"class",n="embed "+t[12].className)},m(s,l){w(s,e,l),o||(r=Nr(i=vh.call(null,e,t[12])),o=!0)},p(s,l){t=s,l&1&&n!==(n="embed "+t[12].className)&&k(e,"class",n),i&&ai(i.update)&&l&1&&i.update.call(null,t[12])},d(s){s&&$(e),o=!1,r()}}}function gh(t){return{c:Le,m:Le,p:Le,d:Le}}function nl(t){let e,n,i={ctx:t,current:null,token:null,hasCatch:!1,pending:gh,then:mh,catch:hh,value:12};return cr(n=t[9],i),{c(){e=ct(),i.block.c()},m(o,r){w(o,e,r),i.block.m(o,i.anchor=r),i.mount=()=>e.parentNode,i.anchor=e},p(o,r){t=o,i.ctx=t,r&1&&n!==(n=t[9])&&cr(n,i)||au(i,t,r)},d(o){o&&$(e),i.block.d(o),i.token=null,i=null}}}function il(t){let e,n,i,o,r=t[0].from+"",s,l,a,u,c,p=t[3]("Mention")+"",d,h,m,_,y,b,E=t[3]("Chat")+"",R,j,D,A,T,P,U=t[3]("Whois")+"",B,F,I,z,x,J;return i=new be({props:{name:"pick:"+t[0].from,color:t[0].color}}),u=new be({props:{name:"quote-left"}}),y=new be({props:{name:"comments"}}),T=new be({props:{name:"address-card"}}),{c(){e=g("div"),n=g("a"),G(i.$$.fragment),o=C(),s=N(r),l=C(),a=g("a"),G(u.$$.fragment),c=C(),d=N(p),m=C(),_=g("a"),G(y.$$.fragment),b=C(),R=N(E),D=C(),A=g("a"),G(T.$$.fragment),P=C(),B=N(U),k(n,"href","#popover"),k(a,"href",h="#action:mention:"+encodeURIComponent(t[0].from)),k(a,"class","on-hover"),k(_,"href",j="#action:join:"+encodeURIComponent(t[0].from)),k(_,"class","on-hover"),k(A,"href",F="#action:whois:"+encodeURIComponent(t[0].from)),k(A,"class","on-hover"),k(e,"class","popover")},m(O,L){w(O,e,L),f(e,n),q(i,n,null),f(n,o),f(n,s),f(e,l),f(e,a),q(u,a,null),f(a,c),f(a,d),f(e,m),f(e,_),q(y,_,null),f(_,b),f(_,R),f(e,D),f(e,A),q(T,A,null),f(A,P),f(A,B),z=!0,x||(J=[Se(n,"click",dn.click),Se(e,"focus",dn.enter),Se(e,"mouseenter",dn.enter),Se(e,"blur",dn.leave),Se(e,"mouseleave",dn.leave)],x=!0)},p(O,L){const Y={};L&1&&(Y.name="pick:"+O[0].from),L&1&&(Y.color=O[0].color),i.$set(Y),(!z||L&1)&&r!==(r=O[0].from+"")&&M(s,r),(!z||L&8)&&p!==(p=O[3]("Mention")+"")&&M(d,p),(!z||L&1&&h!==(h="#action:mention:"+encodeURIComponent(O[0].from)))&&k(a,"href",h),(!z||L&8)&&E!==(E=O[3]("Chat")+"")&&M(R,E),(!z||L&1&&j!==(j="#action:join:"+encodeURIComponent(O[0].from)))&&k(_,"href",j),(!z||L&8)&&U!==(U=O[3]("Whois")+"")&&M(B,U),(!z||L&1&&F!==(F="#action:whois:"+encodeURIComponent(O[0].from)))&&k(A,"href",F)},i(O){z||(v(i.$$.fragment,O),v(u.$$.fragment,O),v(y.$$.fragment,O),v(T.$$.fragment,O),ut(()=>{I||(I=tt(e,Dt,{duration:200},!0)),I.run(1)}),z=!0)},o(O){S(i.$$.fragment,O),S(u.$$.fragment,O),S(y.$$.fragment,O),S(T.$$.fragment,O),I||(I=tt(e,Dt,{duration:200},!1)),I.run(0),z=!1},d(O){O&&$(e),W(i),W(u),W(y),W(T),O&&I&&I.end(),x=!1,st(J)}}}function bh(t){let e,n,i,o=t[0].ts.format("%H:%M")+"",r,s,l,a=At(t[0].ts.toLocaleString())+"",u,c,p,d,h,m=t[0].from+"",_,y,b,E,R,j=t[0].html+"",D,A,T,P,U,B,F,I;p=new be({props:{name:"pick:"+t[0].from,color:t[0].color}});let z=t[0].details&&tl(t),x=t[0].embeds,J=[];for(let L=0;L<x.length;L+=1)J[L]=nl(el(t,x,L));let O=t[2]===t[0].index&&il(t);return{c(){e=g("div"),n=g("div"),i=g("span"),r=N(o),s=C(),l=g("span"),u=N(a),c=C(),G(p.$$.fragment),d=C(),h=g("a"),_=N(m),y=C(),b=g("div"),z&&z.c(),E=C(),R=new Tt(!1),D=C();for(let L=0;L<J.length;L+=1)J[L].c();A=C(),O&&O.c(),k(l,"class","tooltip"),k(n,"class","message__ts has-tooltip"),k(h,"href","#popover"),k(h,"class","message__from"),Pt(h,"color",t[0].color),k(h,"tabindex","-1"),R.a=null,k(b,"class","message__text"),k(e,"class",T=t[0].className),k(e,"data-index",P=t[0].index),k(e,"data-ts",U=t[0].ts.toISOString()),Je(e,"is-not-present",!t[1].get(t[0].from)),Je(e,"is-expanded",!!t[0].expanded)},m(L,Y){w(L,e,Y),f(e,n),f(n,i),f(i,r),f(n,s),f(n,l),f(l,u),f(e,c),q(p,e,null),f(e,d),f(e,h),f(h,_),f(e,y),f(e,b),z&&z.m(b,null),f(b,E),R.m(j,b),f(e,D);for(let H=0;H<J.length;H+=1)J[H].m(e,null);f(e,A),O&&O.m(e,null),B=!0,F||(I=[Se(h,"click",dn.click),Se(e,"click",t[5])],F=!0)},p(L,[Y]){(!B||Y&1)&&o!==(o=L[0].ts.format("%H:%M")+"")&&M(r,o),(!B||Y&1)&&a!==(a=At(L[0].ts.toLocaleString())+"")&&M(u,a);const H={};if(Y&1&&(H.name="pick:"+L[0].from),Y&1&&(H.color=L[0].color),p.$set(H),(!B||Y&1)&&m!==(m=L[0].from+"")&&M(_,m),(!B||Y&1)&&Pt(h,"color",L[0].color),L[0].details?z?(z.p(L,Y),Y&1&&v(z,1)):(z=tl(L),z.c(),v(z,1),z.m(b,E)):z&&(Ce(),S(z,1,1,()=>{z=null}),Ae()),(!B||Y&1)&&j!==(j=L[0].html+"")&&R.p(j),Y&1){x=L[0].embeds;let V;for(V=0;V<x.length;V+=1){const Z=el(L,x,V);J[V]?J[V].p(Z,Y):(J[V]=nl(Z),J[V].c(),J[V].m(e,A))}for(;V<J.length;V+=1)J[V].d(1);J.length=x.length}L[2]===L[0].index?O?(O.p(L,Y),Y&5&&v(O,1)):(O=il(L),O.c(),v(O,1),O.m(e,null)):O&&(Ce(),S(O,1,1,()=>{O=null}),Ae()),(!B||Y&1&&T!==(T=L[0].className))&&k(e,"class",T),(!B||Y&1&&P!==(P=L[0].index))&&k(e,"data-index",P),(!B||Y&1&&U!==(U=L[0].ts.toISOString()))&&k(e,"data-ts",U),(!B||Y&3)&&Je(e,"is-not-present",!L[1].get(L[0].from)),(!B||Y&1)&&Je(e,"is-expanded",!!L[0].expanded)},i(L){B||(v(p.$$.fragment,L),v(z),v(O),B=!0)},o(L){S(p.$$.fragment,L),S(z),S(O),B=!1},d(L){L&&$(e),W(p),z&&z.d(),$t(J,L),O&&O.d(),F=!1,st(I)}}}let Ei=0,ol=Date.now();const dn=Fi(null,{click(t){t.preventDefault();const e=parseInt(t.target.closest(".message").dataset.index,10);ol=Date.now(),this.set(this.get()===e?-1:e),Ei&&clearTimeout(Ei)},closeMaybe(){ol<Date.now()-300&&this.set(-1)},enter(){Ei&&clearTimeout(Ei)},leave(){Ei=setTimeout(()=>this.set(-1),300)}});function vh(t,e){const n=e.nodes[0]&&e.nodes[0].parentNode;if(n&&n.classList){const i=n.classList.contains("embed")?"add":"remove";n.classList[i]("hidden")}e.nodes.forEach(i=>t.appendChild(i))}function $h(t,e,n){let i,o,r;Ee(t,dn,d=>n(2,o=d)),Ee(t,lt,d=>n(3,r=d));let{conversation:s}=e,{message:l}=e;const a=ru();let u=s.participants;Ee(t,u,d=>n(1,i=d));function c(d,h){d.preventDefault();const m=h.hash.match(/action:([a-z]+):(.*)$/)||["all","unknown","value"];if(m[2]=decodeURIComponent(m[2]),a(m[1],m[2]),m[1]==="expand"){const _=s.messages.get(m[2]);_.expanded=!_.expanded,s.messages.update({messages:!0})}else["join","whois"].indexOf(m[1])!==-1&&s.send("/"+m[1]+" "+m[2])}function p(d){const h=d.target.closest("a");if(!!h){if(dn.closeMaybe(),!h.target&&h.hash.indexOf("action:")!==-1)return c(d,h);if(Co(d.target,"img"))return Cs(d,d.target);if(h.classList.contains("le-thumbnail"))return Cs(d,h.querySelector("img"));!h.target&&h.closest(".embed")&&(h.target="_blank"),h.target!=="_blank"&&d.preventDefault()}}return t.$$set=d=>{"conversation"in d&&n(6,s=d.conversation),"message"in d&&n(0,l=d.message)},[l,i,o,r,u,p,s]}class wh extends Xe{constructor(e){super(),Qe(this,e,$h,bh,Ze,{conversation:6,message:0})}}const kh={0:"Jan",1:"Feb",2:"March",3:"Apr",4:"May",5:"Jun",6:"July",7:"Aug",8:"Sept",9:"Oct",10:"Nov",11:"Dec"},rl={H:"_getPaddedHours",M:"_getPaddedMinutes",S:"_getPaddedSeconds",b:"_getMonthAbbr",e:"getDate",Y:"getFullYear"},yh=t=>!!String(t||"").match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/);class bt extends Date{constructor(e){typeof e=="string"&&!e.match(/Z$/)&&(e+="Z"),super(e||new Date)}format(e){return e.replace(/%(\w)/g,(n,i)=>rl[i]?this[rl[i]]():i)}getHumanDate(e={}){let n=this.format("%b %e");const i=new bt;return(!(this.getYear()===i.getYear())||e.year)&&(n+=", "+this.getFullYear()),n}setDate(e,n){return[n?super.setUTCDate(e):super.setDate(e),this][1]}setFullYear(e,n){return[n?super.setUTCFullYear(e):super.setFullYear(e),this][1]}setHours(e,n){return[n?super.setUTCHours(e):super.setHours(e),this][1]}setMilliseconds(e,n){return[n?super.setUTCMilliseconds(e):super.setMilliseconds(e),this][1]}setMinutes(e,n){return[n?super.setUTCMinutes(e):super.setMinutes(e),this][1]}setMonth(e,n){return[n?super.setUTCMonth(e):super.setMonth(e),this][1]}setSeconds(e,n){return[n?super.setUTCSeconds(e):super.setSeconds(e),this][1]}setTime(e){return[super.setTime(e),this][1]}setYear(e){return[this.setYear(e),this][1]}toEpoch(){return this.getTime()/1e3}_getMonthAbbr(){return kh[this.getMonth()]||""}_getPaddedHours(){return String(this.getHours()).padStart(2,"0")}_getPaddedMinutes(){return String(this.getMinutes()).padStart(2,"0")}_getPaddedSeconds(){return String(this.getSeconds()).padStart(2,"0")}}function Sh(t){let e,n,i,o,r,s,l;n=new be({props:{animation:t[2],name:t[4]}});const a=t[13].default,u=qt(a,t,t[12],null);return{c(){e=g("button"),G(n.$$.fragment),i=C(),u&&u.c(),k(e,"class",o=t[3].join(" ")),e.disabled=t[5],k(e,"type",t[1])},m(c,p){w(c,e,p),q(n,e,null),f(e,i),u&&u.m(e,null),r=!0,s||(l=Se(e,"click",t[14]),s=!0)},p(c,[p]){const d={};p&4&&(d.animation=c[2]),p&16&&(d.name=c[4]),n.$set(d),u&&u.p&&(!r||p&4096)&&Gt(u,a,c,c[12],r?Wt(a,c[12],p,null):Kt(c[12]),null),(!r||p&8&&o!==(o=c[3].join(" ")))&&k(e,"class",o),(!r||p&32)&&(e.disabled=c[5]),(!r||p&2)&&k(e,"type",c[1])},i(c){r||(v(n.$$.fragment,c),v(u,c),r=!0)},o(c){S(n.$$.fragment,c),S(u,c),r=!1},d(c){c&&$(e),W(n),u&&u.d(c),s=!1,l()}}}const Eh=500;function Ch(t,e,n){let i,o,r=Le,s=()=>(r(),r=St(y,D=>n(11,o=D)),y);t.$$.on_destroy.push(()=>r());let{$$slots:l={},$$scope:a}=e,u="",{class:c=""}=e,p=[],d=!1,h=0,{disabled:m=!1}=e,{icon:_=""}=e,{op:y=new Oo({api:!1,id:""})}=e;s();let{type:b=""}=e,E=_;function R(D){D&&n(10,h=new bt().toEpoch()),n(2,u=D?"spin":""),n(4,E=D?"spinner":_),n(9,d=D)}function j(D){Ln.call(this,t,D)}return t.$$set=D=>{"class"in D&&n(6,c=D.class),"disabled"in D&&n(7,m=D.disabled),"icon"in D&&n(8,_=D.icon),"op"in D&&s(n(0,y=D.op)),"type"in D&&n(1,b=D.type),"$$scope"in D&&n(12,a=D.$$scope)},t.$$.update=()=>{t.$$.dirty&2048&&o.is("loading")&&R(!0),t.$$.dirty&3072&&(o.is("loading")||setTimeout(()=>R(!1),Eh-(new bt().toEpoch()-h))),t.$$.dirty&320&&n(3,p=["btn","for-"+(_||"default")].concat(c)),t.$$.dirty&640&&n(5,i=m||d)},[y,b,u,p,E,i,c,m,_,d,h,o,a,l,j]}class ft extends Xe{constructor(e){super(),Qe(this,e,Ch,Sh,Ze,{class:6,disabled:7,icon:8,op:0,type:1})}}const Ah=t=>({}),sl=t=>({});function Oh(t){let e,n,i,o,r,s,l,a,u;r=new be({props:{family:"regular",name:t[7]}});const c=t[11].label,p=qt(c,t,t[10],sl);return{c(){e=g("label"),n=g("input"),o=C(),G(r.$$.fragment),s=C(),p&&p.c(),k(n,"type","checkbox"),k(n,"id",t[5]),k(n,"name",t[4]),n.checked=i=!!t[0],n.disabled=t[2],k(e,"class","checkbox"),e.hidden=t[3],Je(e,"has-badge",t[1]),Je(e,"has-focus",t[6]),Je(e,"is-disabled",t[2])},m(d,h){w(d,e,h),f(e,n),f(e,o),q(r,e,null),f(e,s),p&&p.m(e,null),l=!0,a||(u=[Se(n,"blur",t[12]),Se(n,"change",t[13]),Se(n,"focus",t[14])],a=!0)},p(d,[h]){(!l||h&32)&&k(n,"id",d[5]),(!l||h&16)&&k(n,"name",d[4]),(!l||h&1&&i!==(i=!!d[0]))&&(n.checked=i),(!l||h&4)&&(n.disabled=d[2]);const m={};h&128&&(m.name=d[7]),r.$set(m),p&&p.p&&(!l||h&1024)&&Gt(p,c,d,d[10],l?Wt(c,d[10],h,Ah):Kt(d[10]),sl),(!l||h&8)&&(e.hidden=d[3]),(!l||h&2)&&Je(e,"has-badge",d[1]),(!l||h&64)&&Je(e,"has-focus",d[6]),(!l||h&4)&&Je(e,"is-disabled",d[2])},i(d){l||(v(r.$$.fragment,d),v(p,d),l=!0)},o(d){S(r.$$.fragment,d),S(p,d),l=!1},d(d){d&&$(e),W(r),p&&p.d(d),a=!1,st(u)}}}function Nh(t,e,n){let i,o,{$$slots:r={},$$scope:s}=e,{badge:l=!1}=e,{disabled:a=!1}=e,{hidden:u=!1}=e,{icon:c="square"}=e,{name:p=""}=e,{id:d=p?"form_"+p:Ao()}=e,{value:h}=e,m=!1;const _=()=>{n(6,m=!1)},y=E=>{n(0,h=E.target.checked)},b=()=>{n(6,m=!0)};return t.$$set=E=>{"badge"in E&&n(1,l=E.badge),"disabled"in E&&n(2,a=E.disabled),"hidden"in E&&n(3,u=E.hidden),"icon"in E&&n(8,c=E.icon),"name"in E&&n(4,p=E.name),"id"in E&&n(5,d=E.id),"value"in E&&n(0,h=E.value),"$$scope"in E&&n(10,s=E.$$scope)},t.$$.update=()=>{t.$$.dirty&256&&n(9,i=c==="caret"?["caret-square-down","caret-square-up"]:["square","check-square"]),t.$$.dirty&513&&n(7,o=i[h?1:0])},[h,l,a,u,p,d,m,o,c,i,s,r,_,y,b]}class nt extends Xe{constructor(e){super(),Qe(this,e,Nh,Oh,Ze,{badge:1,disabled:2,hidden:3,icon:8,name:4,id:5,value:0})}}class mn{constructor(e="http://localhost"){this._url=new URL("http://localhost"),Object.defineProperty(this,"href",{get:()=>this._url.href.replace(/^http:/,this.protocol),set:n=>{this._url.href=n.replace(/^\w+:/,"http:"),this.protocol=n.match(/^\w+:/)[0]}}),["host","pathname","password","searchParams","username"].forEach(n=>{Object.defineProperty(this,n,{get:()=>this._url[n],set:i=>{this._url[n]=i}})}),this.href=e}fromFields(e){Ue.string(e.protocol)&&(this.protocol=e.protocol.replace(/:?$/,":")),Ue.string(e.host)&&(this.host=e.host),Ue.string(e.password)&&(this.password=encodeURIComponent(e.password)),Ue.string(e.username)&&(this.username=encodeURIComponent(e.username)),Ue.string(e.conversation_id)&&(this.pathname=encodeURIComponent(e.conversation_id));const n=this.searchParams;return Ue.string(e.local_address)&&n.append("local_address",e.local_address||""),Ue.string(e.nick)&&n.append("nick",e.nick.trim()),Ue.string(e.realname)&&e.realname.length&&n.append("realname",e.realname.trim()),Ue.string(e.sasl)&&n.append("sasl",e.sasl||"none"),n.append("tls",Ue.true(e.tls)?"1":"0"),n.append("tls_verify",Ue.true(e.tls)&&Ue.true(e.tls_verify)?"1":"0"),this}toFields(e={}){e.protocol=this.protocol.replace(/:$/,""),e.host=this.host,e.password=Ue.string(this.password)?decodeURIComponent(this.password):"",e.username=Ue.string(this.username)?decodeURIComponent(this.username):"",e.conversation_id=decodeURIComponent(this.pathname.split("/").filter(i=>i.length)[0]||"");const n=this.searchParams;return e.local_address=n.get("local_address")||e.local_address||"",e.nick=n.get("nick")||e.nick||"",e.realname=n.get("realname")||e.realname||"",e.sasl=n.get("sasl")||e.sasl||"none",e.realname=n.get("realname")||e.realname||"",e.tls=Ue.true(n.get("tls")),e.tls_verify=Ue.true(n.get("tls_verify")),e}toString(){return this.href.replace(/^http:/,this.protocol)}}function Th(t){let e,n=t[4](t[1])+"",i,o,r;return{c(){e=g("div"),i=N(n),k(e,"class","success")},m(s,l){w(s,e,l),f(e,i),r=!0},p(s,l){(!r||l&18)&&n!==(n=s[4](s[1])+"")&&M(i,n)},i(s){r||(ut(()=>{o||(o=tt(e,Dt,{},!0)),o.run(1)}),r=!0)},o(s){o||(o=tt(e,Dt,{},!1)),o.run(0),r=!1},d(s){s&&$(e),s&&o&&o.end()}}}function Rh(t){let e,n=t[4](t[2].error())+"",i,o,r;return{c(){e=g("div"),i=N(n),k(e,"class","error")},m(s,l){w(s,e,l),f(e,i),r=!0},p(s,l){(!r||l&20)&&n!==(n=s[4](s[2].error())+"")&&M(i,n)},i(s){r||(ut(()=>{o||(o=tt(e,Dt,{},!0)),o.run(1)}),r=!0)},o(s){o||(o=tt(e,Dt,{},!1)),o.run(0),r=!1},d(s){s&&$(e),s&&o&&o.end()}}}function Mh(t){let e,n,i,o,r,s;const l=[Rh,Th],a=[];function u(c,p){return p&4&&(e=null),p&12&&(n=null),e==null&&(e=!!c[2].is("error")),e?0:(n==null&&(n=!!(c[2].is("success")&&c[3])),n?1:-1)}return~(i=u(t,-1))&&(o=a[i]=l[i](t)),{c(){o&&o.c(),r=ct()},m(c,p){~i&&a[i].m(c,p),w(c,r,p),s=!0},p(c,[p]){let d=i;i=u(c,p),i===d?~i&&a[i].p(c,p):(o&&(Ce(),S(a[d],1,1,()=>{a[d]=null}),Ae()),~i?(o=a[i],o?o.p(c,p):(o=a[i]=l[i](c),o.c()),v(o,1),o.m(r.parentNode,r)):o=null)},i(c){s||(v(o),s=!0)},o(c){S(o),s=!1},d(c){~i&&a[i].d(c),c&&$(r)}}}function Lh(t,e,n){let i,o=Le,r=()=>(o(),o=St(l,d=>n(2,i=d)),l),s;Ee(t,lt,d=>n(4,s=d)),t.$$.on_destroy.push(()=>o());let{op:l=new Oo({})}=e;r();let{success:a="Saved."}=e,u=!1,c;Rr(()=>c&&clearTimeout(c));function p(d){if(!d.is("success"))return n(3,u=!1);u||(n(3,u=!0),c=setTimeout(()=>n(3,u=!1),2e3))}return t.$$set=d=>{"op"in d&&r(n(0,l=d.op)),"success"in d&&n(1,a=d.success)},t.$$.update=()=>{t.$$.dirty&4&&p(i)},[l,a,i,u,s]}class Rt extends Xe{constructor(e){super(),Qe(this,e,Lh,Mh,Ze,{op:0,success:1})}}function ll(t,e,n){const i=t.slice();return i[26]=e[n],i[28]=n,i}const Ih=t=>({}),al=t=>({});function Ph(t){let e;return{c(){e=N("Label")},m(n,i){w(n,e,i)},d(n){n&&$(e)}}}function ul(t){let e,n=(t[26].length>1?t[26][1]:t[26][0])+"",i,o,r,s;function l(){return t[20](t[28])}function a(){return t[21](t[28])}return{c(){e=g("a"),i=N(n),k(e,"href",o="#"+t[28]+":"+t[26][0]),k(e,"class","select-field__option"),k(e,"tabindex","-1"),Je(e,"is-active",t[28]===t[8])},m(u,c){w(u,e,c),f(e,i),r||(s=[Se(e,"focus",l),Se(e,"mouseover",a)],r=!0)},p(u,c){t=u,c&512&&n!==(n=(t[26].length>1?t[26][1]:t[26][0])+"")&&M(i,n),c&512&&o!==(o="#"+t[28]+":"+t[26][0])&&k(e,"href",o),c&256&&Je(e,"is-active",t[28]===t[8])},d(u){u&&$(e),r=!1,st(s)}}}function Dh(t){let e,n,i,o,r,s,l,a,u,c,p;const d=t[17].label,h=qt(d,t,t[16],al),m=h||Ph();let _=t[9],y=[];for(let b=0;b<_.length;b+=1)y[b]=ul(ll(t,_,b));return{c(){e=g("div"),n=g("label"),m&&m.c(),i=C(),o=g("input"),r=C(),s=g("input"),l=C(),a=g("div");for(let b=0;b<y.length;b+=1)y[b].c();k(n,"for",t[3]),k(o,"type","hidden"),k(o,"name",t[2]),k(s,"type","text"),k(s,"id",t[3]),k(s,"autocomplete","off"),k(s,"placeholder",t[4]),s.readOnly=t[5],k(a,"class","select-field__options"),k(e,"class","select-field text-field"),e.hidden=t[1],Je(e,"is-open",t[7]),Je(e,"is-readonly",t[5])},m(b,E){w(b,e,E),f(e,n),m&&m.m(n,null),f(e,i),f(e,o),Ct(o,t[0]),f(e,r),f(e,s),t[19](s),f(e,l),f(e,a);for(let R=0;R<y.length;R+=1)y[R].m(a,null);u=!0,c||(p=[Se(o,"input",t[18]),Se(o,"keydown",t[11]),Se(s,"blur",t[10]),Se(s,"keydown",t[11]),Se(s,"keyup",t[12]),Se(s,"click",rt(t[13])),Se(a,"click",rt(t[13]))],c=!0)},p(b,[E]){if(h&&h.p&&(!u||E&65536)&&Gt(h,d,b,b[16],u?Wt(d,b[16],E,Ih):Kt(b[16]),al),(!u||E&8)&&k(n,"for",b[3]),(!u||E&4)&&k(o,"name",b[2]),E&1&&Ct(o,b[0]),(!u||E&8)&&k(s,"id",b[3]),(!u||E&16)&&k(s,"placeholder",b[4]),(!u||E&32)&&(s.readOnly=b[5]),E&768){_=b[9];let R;for(R=0;R<_.length;R+=1){const j=ll(b,_,R);y[R]?y[R].p(j,E):(y[R]=ul(j),y[R].c(),y[R].m(a,null))}for(;R<y.length;R+=1)y[R].d(1);y.length=_.length}(!u||E&2)&&(e.hidden=b[1]),(!u||E&128)&&Je(e,"is-open",b[7]),(!u||E&32)&&Je(e,"is-readonly",b[5])},i(b){u||(v(m,b),u=!0)},o(b){S(m,b),u=!1},d(b){b&&$(e),m&&m.d(b),t[19](null),$t(y,b),c=!1,st(p)}}}function Uh(t,e,n){let{$$slots:i={},$$scope:o}=e,r=0,s,l=!1,a="",u=[],{hidden:c=!1}=e,{name:p=""}=e,{id:d=p?"form_"+p:Ao()}=e,{options:h}=e,{placeholder:m=""}=e,{readonly:_=!1}=e,{value:y}=e;const b=["ArrowDown","ArrowUp","Enter"];function E(){setTimeout(()=>document.activeElement.closest(".select-field__option")||n(7,l=!1),100),T(y)}function R(z,x){let J=new RegExp("(?:^|\\s|-)"+ci(x),"i"),O=z.filter(L=>String(L[0])===x);O.length||(O=z.filter(L=>L[0].match(J)));for(let L=0;L<z.length;L++){const Y=z[L];Y.length>1&&O.indexOf(Y)===-1&&Y[1].match(J)&&O.push(Y)}n(8,r=0),n(9,u=O)}function j(z){if(b.indexOf(z.key)!==-1&&z.preventDefault(),z.key==="Tab"){l&&A(z);return}if(!l)return P(z);z.key==="ArrowDown"&&n(8,r++,r),z.key==="ArrowUp"&&n(8,r--,r),z.key==="Enter"&&A(z),r>=h.length&&n(8,r=0),r<0&&n(8,r=h.length-1)}function D(z){(z.key.length===1||z.key==="Backspace")&&n(15,a=s.value)}function A(z){let x;if(z.type==="keydown")x=u.length&&u[r]||h.filter(J=>J[0]===y)[0];else{const J=br(z.target,".select-field__option").href.replace(/^.*?#\d+:/,"");x=u.filter(O=>String(O[0])===J)[0]||[]}(!x||!x.length)&&(x=[""]),n(0,y=x[0]),n(7,l=!1)}function T(z){const x=u.filter(J=>String(J[0])===z)[0]||[];n(6,s.value=x.length>1?x[1]:x.length?x[0]:z,s)}function P(z){if(_)return;const x=z&&z.target&&br(z.target,".select-field__option");return l||(n(8,r=u.map(J=>J[0]).indexOf(y)),s.setSelectionRange(0,9999)),x?A(z):n(7,l=!l)}function U(){y=this.value,n(0,y)}function B(z){me[z?"unshift":"push"](()=>{s=z,n(6,s),n(14,h),n(0,y)})}const F=z=>{n(8,r=z)},I=z=>{n(8,r=z)};return t.$$set=z=>{"hidden"in z&&n(1,c=z.hidden),"name"in z&&n(2,p=z.name),"id"in z&&n(3,d=z.id),"options"in z&&n(14,h=z.options),"placeholder"in z&&n(4,m=z.placeholder),"readonly"in z&&n(5,_=z.readonly),"value"in z&&n(0,y=z.value),"$$scope"in z&&n(16,o=z.$$scope)},t.$$.update=()=>{if(t.$$.dirty&128&&l===!1&&n(15,a=""),t.$$.dirty&49152&&R(h,a),t.$$.dirty&16449&&s&&!s.value&&s!==document.activeElement){const z=h.find(x=>x[0]===y);z&&n(6,s.value=z[1]||z[0],s)}t.$$.dirty&65&&s&&T(y)},[y,c,p,d,m,_,s,l,r,u,E,j,D,P,h,a,o,i,U,B,F,I]}class Qn extends Xe{constructor(e){super(),Qe(this,e,Uh,Dh,Ze,{hidden:1,name:2,id:3,options:14,placeholder:4,readonly:5,value:0})}}const Bh=t=>({}),fl=t=>({});function jh(t){let e;return{c(){e=N("Label")},m(n,i){w(n,e,i)},d(n){n&&$(e)}}}function Fh(t){let e,n,i,o,r,s,l;const a=t[7].label,u=qt(a,t,t[6],fl),c=u||jh();return{c(){e=g("div"),n=g("label"),c&&c.c(),i=C(),o=g("textarea"),k(n,"for",t[3]),k(o,"id",t[3]),k(o,"name",t[2]),k(o,"placeholder",t[4]),o.readOnly=t[5],k(e,"class","text-area"),e.hidden=t[1]},m(p,d){w(p,e,d),f(e,n),c&&c.m(n,null),f(e,i),f(e,o),Ct(o,t[0]),r=!0,s||(l=Se(o,"input",t[8]),s=!0)},p(p,[d]){u&&u.p&&(!r||d&64)&&Gt(u,a,p,p[6],r?Wt(a,p[6],d,Bh):Kt(p[6]),fl),(!r||d&8)&&k(n,"for",p[3]),(!r||d&8)&&k(o,"id",p[3]),(!r||d&4)&&k(o,"name",p[2]),(!r||d&16)&&k(o,"placeholder",p[4]),(!r||d&32)&&(o.readOnly=p[5]),d&1&&Ct(o,p[0]),(!r||d&2)&&(e.hidden=p[1])},i(p){r||(v(c,p),r=!0)},o(p){S(c,p),r=!1},d(p){p&&$(e),c&&c.d(p),s=!1,l()}}}function zh(t,e,n){let{$$slots:i={},$$scope:o}=e,{hidden:r=!1}=e,{name:s=""}=e,{id:l=s?"form_"+s:Ao()}=e,{placeholder:a=""}=e,{readonly:u=!1}=e,{value:c}=e;function p(){c=this.value,n(0,c)}return t.$$set=d=>{"hidden"in d&&n(1,r=d.hidden),"name"in d&&n(2,s=d.name),"id"in d&&n(3,l=d.id),"placeholder"in d&&n(4,a=d.placeholder),"readonly"in d&&n(5,u=d.readonly),"value"in d&&n(0,c=d.value),"$$scope"in d&&n(6,o=d.$$scope)},[c,r,s,l,a,u,o,i,p]}class Uu extends Xe{constructor(e){super(),Qe(this,e,zh,Fh,Ze,{hidden:1,name:2,id:3,placeholder:4,readonly:5,value:0})}}const Hh=t=>({}),cl=t=>({}),qh=t=>({}),dl=t=>({});function Wh(t){let e;return{c(){e=N("Label")},m(n,i){w(n,e,i)},d(n){n&&$(e)}}}function pl(t){let e,n,i,o,r;return n=new be({props:{name:t[8]?"eye-slash":"eye"}}),{c(){e=g("a"),G(n.$$.fragment),k(e,"href","#toggle"),k(e,"class","text-field__toggle")},m(s,l){w(s,e,l),q(n,e,null),i=!0,o||(r=Se(e,"click",rt(t[13])),o=!0)},p(s,l){const a={};l&256&&(a.name=s[8]?"eye-slash":"eye"),n.$set(a)},i(s){i||(v(n.$$.fragment,s),i=!0)},o(s){S(n.$$.fragment,s),i=!1},d(s){s&&$(e),W(n),o=!1,r()}}}function Gh(t){let e,n,i,o,r,s,l,a,u,c;const p=t[11].label,d=qt(p,t,t[10],dl),h=d||Wh();let m=t[7]==="password"&&!t[6]&&pl(t);const _=t[11].help,y=qt(_,t,t[10],cl);return{c(){e=g("div"),n=g("label"),h&&h.c(),i=C(),o=g("input"),s=C(),m&&m.c(),l=C(),y&&y.c(),k(n,"for",t[4]),k(o,"type",r=t[8]?"text":t[7]),k(o,"id",t[4]),k(o,"name",t[3]),k(o,"autocomplete",t[1]),k(o,"placeholder",t[5]),o.readOnly=t[6],o.value=t[0],k(e,"class","text-field"),e.hidden=t[2],Je(e,"has-password",t[7]==="password")},m(b,E){w(b,e,E),f(e,n),h&&h.m(n,null),f(e,i),f(e,o),f(e,s),m&&m.m(e,null),w(b,l,E),y&&y.m(b,E),a=!0,u||(c=[Se(o,"input",t[9]),Se(o,"keyup",t[12])],u=!0)},p(b,[E]){d&&d.p&&(!a||E&1024)&&Gt(d,p,b,b[10],a?Wt(p,b[10],E,qh):Kt(b[10]),dl),(!a||E&16)&&k(n,"for",b[4]),(!a||E&384&&r!==(r=b[8]?"text":b[7]))&&k(o,"type",r),(!a||E&16)&&k(o,"id",b[4]),(!a||E&8)&&k(o,"name",b[3]),(!a||E&2)&&k(o,"autocomplete",b[1]),(!a||E&32)&&k(o,"placeholder",b[5]),(!a||E&64)&&(o.readOnly=b[6]),(!a||E&1&&o.value!==b[0])&&(o.value=b[0]),b[7]==="password"&&!b[6]?m?(m.p(b,E),E&192&&v(m,1)):(m=pl(b),m.c(),v(m,1),m.m(e,null)):m&&(Ce(),S(m,1,1,()=>{m=null}),Ae()),(!a||E&4)&&(e.hidden=b[2]),(!a||E&128)&&Je(e,"has-password",b[7]==="password"),y&&y.p&&(!a||E&1024)&&Gt(y,_,b,b[10],a?Wt(_,b[10],E,Hh):Kt(b[10]),cl)},i(b){a||(v(h,b),v(m),v(y,b),a=!0)},o(b){S(h,b),S(m),S(y,b),a=!1},d(b){b&&$(e),h&&h.d(b),m&&m.d(),b&&$(l),y&&y.d(b),u=!1,st(c)}}}function Kh(t,e,n){let{$$slots:i={},$$scope:o}=e,r=!1,{autocomplete:s=null}=e,{hidden:l=!1}=e,{name:a=""}=e,{id:u=a?"form_"+a:Ao()}=e,{placeholder:c=""}=e,{readonly:p=!1}=e,{type:d="text"}=e,{value:h}=e;function m(b){n(0,h=d.match(/^(number|range)$/)?parseInt(b.target.value,10):b.target.value)}function _(b){Ln.call(this,t,b)}const y=()=>{n(8,r=!r)};return t.$$set=b=>{"autocomplete"in b&&n(1,s=b.autocomplete),"hidden"in b&&n(2,l=b.hidden),"name"in b&&n(3,a=b.name),"id"in b&&n(4,u=b.id),"placeholder"in b&&n(5,c=b.placeholder),"readonly"in b&&n(6,p=b.readonly),"type"in b&&n(7,d=b.type),"value"in b&&n(0,h=b.value),"$$scope"in b&&n(10,o=b.$$scope)},[h,s,l,a,u,c,p,d,r,m,o,i,_,y]}class Ve extends Xe{constructor(e){super(),Qe(this,e,Kh,Gh,Ze,{autocomplete:1,hidden:2,name:3,id:4,placeholder:5,readonly:6,type:7,value:0})}}function Yh(t){let e,n=t[5]("Host and port")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Host and port")+"")&&M(i,n)},d(o){o&&$(e)}}}function Vh(t){let e,n=t[5]("You cannot create custom connections.")+"",i;return{c(){e=g("p"),i=N(n),k(e,"class","help"),k(e,"slot","help"),e.hidden=!t[7].forced_connection},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("You cannot create custom connections.")+"")&&M(i,n)},d(o){o&&$(e)}}}function Zh(t){let e,n=t[5]("Nickname")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Nickname")+"")&&M(i,n)},d(o){o&&$(e)}}}function Jh(t){let e,n=t[5]("Your name")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Your name")+"")&&M(i,n)},d(o){o&&$(e)}}}function Qh(t){let e,n,i;function o(s){t[19](s)}let r={name:"conversation_id",placeholder:t[5]("Ex: #convos"),$$slots:{label:[xh]},$$scope:{ctx:t}};return t[2].conversation_id!==void 0&&(r.value=t[2].conversation_id),e=new Ve({props:r}),me.push(()=>$e(e,"value",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};l[0]&32&&(a.placeholder=s[5]("Ex: #convos")),l[0]&32|l[1]&16&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&4&&(n=!0,a.value=s[2].conversation_id,ve(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function Xh(t){let e,n,i;function o(s){t[18](s)}let r={name:"want_to_be_connected",$$slots:{label:[em]},$$scope:{ctx:t}};return t[2].want_to_be_connected!==void 0&&(r.value=t[2].want_to_be_connected),e=new nt({props:r}),me.push(()=>$e(e,"value",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};l[0]&32|l[1]&16&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&4&&(n=!0,a.value=s[2].want_to_be_connected,ve(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function xh(t){let e,n=t[5]("Conversation name")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Conversation name")+"")&&M(i,n)},d(o){o&&$(e)}}}function em(t){let e,n=t[5]("Want to be connected")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Want to be connected")+"")&&M(i,n)},d(o){o&&$(e)}}}function tm(t){let e,n=t[5]("Secure connection (TLS)")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Secure connection (TLS)")+"")&&M(i,n)},d(o){o&&$(e)}}}function nm(t){let e,n=t[5]("Verify certificate (TLS)")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Verify certificate (TLS)")+"")&&M(i,n)},d(o){o&&$(e)}}}function im(t){let e,n=t[5]("Advanced settings")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Advanced settings")+"")&&M(i,n)},d(o){o&&$(e)}}}function hl(t){let e,n,i,o,r,s;function l(c){t[23](c)}let a={name:"on_connect_commands",placeholder:t[5]("Put each command on a new line."),$$slots:{label:[om]},$$scope:{ctx:t}};t[2].on_connect_commands!==void 0&&(a.value=t[2].on_connect_commands),n=new Uu({props:a}),me.push(()=>$e(n,"value",l));let u=!t[7].forced_connection&&rm(t);return{c(){e=g("div"),G(n.$$.fragment),o=C(),u&&u.c(),k(e,"class","form-group")},m(c,p){w(c,e,p),q(n,e,null),f(e,o),u&&u.m(e,null),s=!0},p(c,p){const d={};p[0]&32&&(d.placeholder=c[5]("Put each command on a new line.")),p[0]&32|p[1]&16&&(d.$$scope={dirty:p,ctx:c}),!i&&p[0]&4&&(i=!0,d.value=c[2].on_connect_commands,ve(()=>i=!1)),n.$set(d),c[7].forced_connection||u.p(c,p)},i(c){s||(v(n.$$.fragment,c),v(u),ut(()=>{r||(r=tt(e,si,{duration:150},!0)),r.run(1)}),s=!0)},o(c){S(n.$$.fragment,c),S(u),r||(r=tt(e,si,{duration:150},!1)),r.run(0),s=!1},d(c){c&&$(e),W(n),u&&u.d(),c&&r&&r.end()}}}function om(t){let e,n=t[5]("On-connect commands")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("On-connect commands")+"")&&M(i,n)},d(o){o&&$(e)}}}function rm(t){let e,n,i;function o(s){t[24](s)}let r={name:"local_address",$$slots:{help:[lm],label:[sm]},$$scope:{ctx:t}};return t[2].local_address!==void 0&&(r.value=t[2].local_address),e=new Ve({props:r}),me.push(()=>$e(e,"value",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};l[0]&32|l[1]&16&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&4&&(n=!0,a.value=s[2].local_address,ve(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function sm(t){let e,n=t[5]("Source IP")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Source IP")+"")&&M(i,n)},d(o){o&&$(e)}}}function lm(t){let e,n=t[5]("Leave this blank, unless you know what you are doing.")+"",i;return{c(){e=g("p"),i=N(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Leave this blank, unless you know what you are doing.")+"")&&M(i,n)},d(o){o&&$(e)}}}function am(t){let e,n,i,o,r;function s(u){t[25](u)}let l={icon:"caret",name:"show_auth_settings",$$slots:{label:[um]},$$scope:{ctx:t}};t[4]!==void 0&&(l.value=t[4]),e=new nt({props:l}),me.push(()=>$e(e,"value",s));let a=t[4]&&ml(t);return{c(){G(e.$$.fragment),i=C(),a&&a.c(),o=ct()},m(u,c){q(e,u,c),w(u,i,c),a&&a.m(u,c),w(u,o,c),r=!0},p(u,c){const p={};c[0]&32|c[1]&16&&(p.$$scope={dirty:c,ctx:u}),!n&&c[0]&16&&(n=!0,p.value=u[4],ve(()=>n=!1)),e.$set(p),u[4]?a?(a.p(u,c),c[0]&16&&v(a,1)):(a=ml(u),a.c(),v(a,1),a.m(o.parentNode,o)):a&&(Ce(),S(a,1,1,()=>{a=null}),Ae())},i(u){r||(v(e.$$.fragment,u),v(a),r=!0)},o(u){S(e.$$.fragment,u),S(a),r=!1},d(u){W(e,u),u&&$(i),a&&a.d(u),u&&$(o)}}}function um(t){let e,n=t[5]("Authentication settings")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Authentication settings")+"")&&M(i,n)},d(o){o&&$(e)}}}function ml(t){let e,n,i,o,r,s,l,a,u,c,p;function d(R){t[26](R)}let h={name:"username",placeholder:t[2].nick,$$slots:{help:[cm],label:[fm]},$$scope:{ctx:t}};t[2].username!==void 0&&(h.value=t[2].username),n=new Ve({props:h}),me.push(()=>$e(n,"value",d));const m=[pm,dm],_=[];function y(R,j){return R[2].sasl==="external"?0:1}r=y(t),s=_[r]=m[r](t);function b(R){t[29](R)}let E={name:"sasl",options:t[8],$$slots:{label:[bm]},$$scope:{ctx:t}};return t[2].sasl!==void 0&&(E.value=t[2].sasl),a=new Qn({props:E}),me.push(()=>$e(a,"value",b)),{c(){e=g("div"),G(n.$$.fragment),o=C(),s.c(),l=C(),G(a.$$.fragment),k(e,"class","form-group")},m(R,j){w(R,e,j),q(n,e,null),f(e,o),_[r].m(e,null),f(e,l),q(a,e,null),p=!0},p(R,j){const D={};j[0]&4&&(D.placeholder=R[2].nick),j[0]&32|j[1]&16&&(D.$$scope={dirty:j,ctx:R}),!i&&j[0]&4&&(i=!0,D.value=R[2].username,ve(()=>i=!1)),n.$set(D);let A=r;r=y(R),r===A?_[r].p(R,j):(Ce(),S(_[A],1,1,()=>{_[A]=null}),Ae(),s=_[r],s?s.p(R,j):(s=_[r]=m[r](R),s.c()),v(s,1),s.m(e,l));const T={};j[0]&32|j[1]&16&&(T.$$scope={dirty:j,ctx:R}),!u&&j[0]&4&&(u=!0,T.value=R[2].sasl,ve(()=>u=!1)),a.$set(T)},i(R){p||(v(n.$$.fragment,R),v(s),v(a.$$.fragment,R),ut(()=>{c||(c=tt(e,si,{duration:150},!0)),c.run(1)}),p=!0)},o(R){S(n.$$.fragment,R),S(s),S(a.$$.fragment,R),c||(c=tt(e,si,{duration:150},!1)),c.run(0),p=!1},d(R){R&&$(e),W(n),_[r].d(),W(a),R&&c&&c.end()}}}function fm(t){let e,n=t[5]("Username")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Username")+"")&&M(i,n)},d(o){o&&$(e)}}}function cm(t){let e,n=t[5]("SASL and IRC server username.")+"",i;return{c(){e=g("p"),i=N(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("SASL and IRC server username.")+"")&&M(i,n)},d(o){o&&$(e)}}}function dm(t){let e,n,i;function o(s){t[28](s)}let r={type:"password",name:"password",$$slots:{help:[mm],label:[hm]},$$scope:{ctx:t}};return t[2].password!==void 0&&(r.value=t[2].password),e=new Ve({props:r}),me.push(()=>$e(e,"value",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};l[0]&32|l[1]&16&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&4&&(n=!0,a.value=s[2].password,ve(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function pm(t){let e,n,i;function o(s){t[27](s)}let r={type:"text",name:"fingerprint",readonly:!0,$$slots:{help:[gm],label:[_m]},$$scope:{ctx:t}};return t[2].fingerprint!==void 0&&(r.value=t[2].fingerprint),e=new Ve({props:r}),me.push(()=>$e(e,"value",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};l[0]&32|l[1]&16&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&4&&(n=!0,a.value=s[2].fingerprint,ve(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function hm(t){let e,n=t[5]("Password")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Password")+"")&&M(i,n)},d(o){o&&$(e)}}}function mm(t){let e,n=t[5]("SASL plain or IRC server password.")+"",i;return{c(){e=g("p"),i=N(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("SASL plain or IRC server password.")+"")&&M(i,n)},d(o){o&&$(e)}}}function _m(t){let e,n=t[5]("Fingerprint")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Fingerprint")+"")&&M(i,n)},d(o){o&&$(e)}}}function gm(t){let e,n=t[5]("The certificate fingerprint is used for SASL external authentication.")+"",i;return{c(){e=g("p"),i=N(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("The certificate fingerprint is used for SASL external authentication.")+"")&&M(i,n)},d(o){o&&$(e)}}}function bm(t){let e,n=t[5]("SASL authentication mechanism")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("SASL authentication mechanism")+"")&&M(i,n)},d(o){o&&$(e)}}}function vm(t){let e,n;return e=new ft({props:{icon:"plus-circle",op:t[9],$$slots:{default:[wm]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o[0]&32|o[1]&16&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function $m(t){let e,n;return e=new ft({props:{icon:"save",op:t[11],$$slots:{default:[km]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o[0]&32|o[1]&16&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function wm(t){let e,n=t[5]("Add")+"",i;return{c(){e=g("span"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Add")+"")&&M(i,n)},d(o){o&&$(e)}}}function km(t){let e,n=t[5]("Update")+"",i;return{c(){e=g("span"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Update")+"")&&M(i,n)},d(o){o&&$(e)}}}function _l(t){let e,n=t[5]("Delete")+"",i,o,r,s=t[5]("This will permanently remove chat logs and other connection related data.")+"",l,a,u,c=t[6]('Please confirm by entering "**%1**" before hitting **%2**.',t[0],t[5]("Delete"))+"",p,d,h,m,_,y,b,E,R;function j(A){t[30](A)}let D={name:"confirm_connection_id",$$slots:{label:[ym]},$$scope:{ctx:t}};return t[1]!==void 0&&(D.value=t[1]),d=new Ve({props:D}),me.push(()=>$e(d,"value",j)),y=new ft({props:{icon:"trash",op:t[10],disabled:t[1]!==t[0],$$slots:{default:[Sm]},$$scope:{ctx:t}}}),y.$on("click",t[12]),E=new Rt({props:{op:t[10],success:"Deleted."}}),{c(){e=g("h3"),i=N(n),o=C(),r=g("p"),l=N(s),a=C(),u=new Tt(!1),p=C(),G(d.$$.fragment),m=C(),_=g("div"),G(y.$$.fragment),b=C(),G(E.$$.fragment),u.a=null,k(_,"class","form-actions")},m(A,T){w(A,e,T),f(e,i),w(A,o,T),w(A,r,T),f(r,l),f(r,a),u.m(c,r),w(A,p,T),q(d,A,T),w(A,m,T),w(A,_,T),q(y,_,null),w(A,b,T),q(E,A,T),R=!0},p(A,T){(!R||T[0]&32)&&n!==(n=A[5]("Delete")+"")&&M(i,n),(!R||T[0]&32)&&s!==(s=A[5]("This will permanently remove chat logs and other connection related data.")+"")&&M(l,s),(!R||T[0]&97)&&c!==(c=A[6]('Please confirm by entering "**%1**" before hitting **%2**.',A[0],A[5]("Delete"))+"")&&u.p(c);const P={};T[0]&32|T[1]&16&&(P.$$scope={dirty:T,ctx:A}),!h&&T[0]&2&&(h=!0,P.value=A[1],ve(()=>h=!1)),d.$set(P);const U={};T[0]&3&&(U.disabled=A[1]!==A[0]),T[0]&32|T[1]&16&&(U.$$scope={dirty:T,ctx:A}),y.$set(U)},i(A){R||(v(d.$$.fragment,A),v(y.$$.fragment,A),v(E.$$.fragment,A),R=!0)},o(A){S(d.$$.fragment,A),S(y.$$.fragment,A),S(E.$$.fragment,A),R=!1},d(A){A&&$(e),A&&$(o),A&&$(r),A&&$(p),W(d,A),A&&$(m),A&&$(_),W(y),A&&$(b),W(E,A)}}}function ym(t){let e,n=t[5]("Confirm connection ID")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Confirm connection ID")+"")&&M(i,n)},d(o){o&&$(e)}}}function Sm(t){let e,n=t[5]("Delete")+"",i;return{c(){e=g("span"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Delete")+"")&&M(i,n)},d(o){o&&$(e)}}}function Em(t){let e,n,i,o,r,s,l,a,u,c,p,d,h,m,_,y,b,E,R,j,D,A,T,P,U,B,F,I,z,x,J,O,L,Y,H;function V(ee){t[15](ee)}let Z={name:"host",placeholder:t[5]("Ex: irc.libera.chat:6697"),readonly:t[7].forced_connection,$$slots:{help:[Vh],label:[Yh]},$$scope:{ctx:t}};t[2].host!==void 0&&(Z.value=t[2].host),n=new Ve({props:Z}),me.push(()=>$e(n,"value",V));function K(ee){t[16](ee)}let re={name:"nick",placeholder:t[5]("Ex: superman"),$$slots:{label:[Zh]},$$scope:{ctx:t}};t[2].nick!==void 0&&(re.value=t[2].nick),r=new Ve({props:re}),me.push(()=>$e(r,"value",K));function de(ee){t[17](ee)}let ie={name:"realname",placeholder:t[5]("Ex: Clark Kent"),$$slots:{label:[Jh]},$$scope:{ctx:t}};t[2].realname!==void 0&&(ie.value=t[2].realname),a=new Ve({props:ie}),me.push(()=>$e(a,"value",de));const he=[Xh,Qh],Te=[];function ce(ee,we){return ee[0]!=="add"?0:1}p=ce(t),d=Te[p]=he[p](t);function ke(ee){t[20](ee)}let Ie={name:"tls",$$slots:{label:[tm]},$$scope:{ctx:t}};t[2].tls!==void 0&&(Ie.value=t[2].tls),m=new nt({props:Ie}),me.push(()=>$e(m,"value",ke));function De(ee){t[21](ee)}let Ne={name:"tls_verify",disabled:!t[2].tls,hidden:!t[2].tls,$$slots:{label:[nm]},$$scope:{ctx:t}};t[2].tls_verify!==void 0&&(Ne.value=t[2].tls_verify),b=new nt({props:Ne}),me.push(()=>$e(b,"value",De));function Me(ee){t[22](ee)}let je={icon:"caret",name:"show_advanced_settings",$$slots:{label:[im]},$$scope:{ctx:t}};t[3]!==void 0&&(je.value=t[3]),j=new nt({props:je}),me.push(()=>$e(j,"value",Me));let X=t[3]&&hl(t),ge=!t[7].forced_connection&&am(t);const fe=[$m,vm],He=[];function Re(ee,we){return ee[0]!=="add"?0:1}B=Re(t),F=He[B]=fe[B](t),z=new Rt({props:{op:t[9]}}),J=new Rt({props:{op:t[11]}});let oe=t[0]!=="add"&&_l(t);return{c(){e=g("form"),G(n.$$.fragment),o=C(),G(r.$$.fragment),l=C(),G(a.$$.fragment),c=C(),d.c(),h=C(),G(m.$$.fragment),y=C(),G(b.$$.fragment),R=C(),G(j.$$.fragment),A=C(),X&&X.c(),T=C(),ge&&ge.c(),P=C(),U=g("div"),F.c(),I=C(),G(z.$$.fragment),x=C(),G(J.$$.fragment),O=C(),oe&&oe.c(),k(U,"class","form-actions"),k(e,"method","post")},m(ee,we){w(ee,e,we),q(n,e,null),f(e,o),q(r,e,null),f(e,l),q(a,e,null),f(e,c),Te[p].m(e,null),f(e,h),q(m,e,null),f(e,y),q(b,e,null),f(e,R),q(j,e,null),f(e,A),X&&X.m(e,null),f(e,T),ge&&ge.m(e,null),f(e,P),f(e,U),He[B].m(U,null),f(e,I),q(z,e,null),f(e,x),q(J,e,null),f(e,O),oe&&oe.m(e,null),L=!0,Y||(H=Se(e,"submit",rt(t[13])),Y=!0)},p(ee,we){const ye={};we[0]&32&&(ye.placeholder=ee[5]("Ex: irc.libera.chat:6697")),we[0]&32|we[1]&16&&(ye.$$scope={dirty:we,ctx:ee}),!i&&we[0]&4&&(i=!0,ye.value=ee[2].host,ve(()=>i=!1)),n.$set(ye);const ue={};we[0]&32&&(ue.placeholder=ee[5]("Ex: superman")),we[0]&32|we[1]&16&&(ue.$$scope={dirty:we,ctx:ee}),!s&&we[0]&4&&(s=!0,ue.value=ee[2].nick,ve(()=>s=!1)),r.$set(ue);const te={};we[0]&32&&(te.placeholder=ee[5]("Ex: Clark Kent")),we[0]&32|we[1]&16&&(te.$$scope={dirty:we,ctx:ee}),!u&&we[0]&4&&(u=!0,te.value=ee[2].realname,ve(()=>u=!1)),a.$set(te);let se=p;p=ce(ee),p===se?Te[p].p(ee,we):(Ce(),S(Te[se],1,1,()=>{Te[se]=null}),Ae(),d=Te[p],d?d.p(ee,we):(d=Te[p]=he[p](ee),d.c()),v(d,1),d.m(e,h));const ne={};we[0]&32|we[1]&16&&(ne.$$scope={dirty:we,ctx:ee}),!_&&we[0]&4&&(_=!0,ne.value=ee[2].tls,ve(()=>_=!1)),m.$set(ne);const Q={};we[0]&4&&(Q.disabled=!ee[2].tls),we[0]&4&&(Q.hidden=!ee[2].tls),we[0]&32|we[1]&16&&(Q.$$scope={dirty:we,ctx:ee}),!E&&we[0]&4&&(E=!0,Q.value=ee[2].tls_verify,ve(()=>E=!1)),b.$set(Q);const le={};we[0]&32|we[1]&16&&(le.$$scope={dirty:we,ctx:ee}),!D&&we[0]&8&&(D=!0,le.value=ee[3],ve(()=>D=!1)),j.$set(le),ee[3]?X?(X.p(ee,we),we[0]&8&&v(X,1)):(X=hl(ee),X.c(),v(X,1),X.m(e,T)):X&&(Ce(),S(X,1,1,()=>{X=null}),Ae()),ee[7].forced_connection||ge.p(ee,we);let pe=B;B=Re(ee),B===pe?He[B].p(ee,we):(Ce(),S(He[pe],1,1,()=>{He[pe]=null}),Ae(),F=He[B],F?F.p(ee,we):(F=He[B]=fe[B](ee),F.c()),v(F,1),F.m(U,null)),ee[0]!=="add"?oe?(oe.p(ee,we),we[0]&1&&v(oe,1)):(oe=_l(ee),oe.c(),v(oe,1),oe.m(e,null)):oe&&(Ce(),S(oe,1,1,()=>{oe=null}),Ae())},i(ee){L||(v(n.$$.fragment,ee),v(r.$$.fragment,ee),v(a.$$.fragment,ee),v(d),v(m.$$.fragment,ee),v(b.$$.fragment,ee),v(j.$$.fragment,ee),v(X),v(ge),v(F),v(z.$$.fragment,ee),v(J.$$.fragment,ee),v(oe),L=!0)},o(ee){S(n.$$.fragment,ee),S(r.$$.fragment,ee),S(a.$$.fragment,ee),S(d),S(m.$$.fragment,ee),S(b.$$.fragment,ee),S(j.$$.fragment,ee),S(X),S(ge),S(F),S(z.$$.fragment,ee),S(J.$$.fragment,ee),S(oe),L=!1},d(ee){ee&&$(e),W(n),W(r),W(a),Te[p].d(),W(m),W(b),W(j),X&&X.d(),ge&&ge.d(),He[B].d(),W(z),W(J),oe&&oe.d(),Y=!1,H()}}}function Cm(t,e,n){let i,o,r;Ee(t,lt,K=>n(5,o=K)),Ee(t,jt,K=>n(6,r=K));let{id:s="add"}=e,{is_page:l=!1}=e;const a=pt("user");Ee(t,a,K=>n(32,i=K));const u=[["none","None"],["plain","Plain"],["external","External"]],c=et.op("createConnection"),p=et.op("removeConnection"),d=et.op("updateConnection");let h="",m={},_={},y=!1,b=!1;Bt(()=>{m=s==="add"?{}:i.findConversation({connection_id:s})||{},m.connection_id?E(m):R()});function E(K){const re=K.url?K.url.toFields():{};Ue.array(K.on_connect_commands)&&(re.on_connect_commands=K.on_connect_commands.join(`
`)),re.nick||(re.nick=a.email.replace(/@.*/,"").replace(/\W/g,"_")),re.want_to_be_connected=K.wanted_state!=="disconnected",n(2,_={..._,...re,fingerprint:K.certificate.fingerprint||""})}function R(){const K=new mn(Be.query.uri||a.default_connection||"irc://localhost").toFields();a.connections.size&&!Be.query.uri&&(K.host=""),K.nick||(K.nick=a.email.replace(/@.*/,"").replace(/\W/g,"_")),n(2,_={..._,...K,want_to_be_connected:!0})}async function j(){await p.perform(m),a.removeConversation(m),Be.go("/settings/connections")}async function D(){if(n(2,_.on_connect_commands=(_.on_connect_commands||"").split(/\n\r?/).filter(K=>K.length),_),n(2,_.url=new mn("irc://localhost").fromFields(_).toString(),_),m.connection_id)n(2,_.connection_id=m.connection_id,_),n(2,_.wanted_state=_.want_to_be_connected?"connected":"disconnected",_),await d.perform(_),m=a.ensureConversation(d.res.body),E(m);else{await c.perform(_);const K=c.res.body;K.connection_id&&Be.go(a.ensureConversation(K).path)}l&&Be.go("/settings/connections")}function A(K){t.$$.not_equal(_.host,K)&&(_.host=K,n(2,_))}function T(K){t.$$.not_equal(_.nick,K)&&(_.nick=K,n(2,_))}function P(K){t.$$.not_equal(_.realname,K)&&(_.realname=K,n(2,_))}function U(K){t.$$.not_equal(_.want_to_be_connected,K)&&(_.want_to_be_connected=K,n(2,_))}function B(K){t.$$.not_equal(_.conversation_id,K)&&(_.conversation_id=K,n(2,_))}function F(K){t.$$.not_equal(_.tls,K)&&(_.tls=K,n(2,_))}function I(K){t.$$.not_equal(_.tls_verify,K)&&(_.tls_verify=K,n(2,_))}function z(K){y=K,n(3,y)}function x(K){t.$$.not_equal(_.on_connect_commands,K)&&(_.on_connect_commands=K,n(2,_))}function J(K){t.$$.not_equal(_.local_address,K)&&(_.local_address=K,n(2,_))}function O(K){b=K,n(4,b)}function L(K){t.$$.not_equal(_.username,K)&&(_.username=K,n(2,_))}function Y(K){t.$$.not_equal(_.fingerprint,K)&&(_.fingerprint=K,n(2,_))}function H(K){t.$$.not_equal(_.password,K)&&(_.password=K,n(2,_))}function V(K){t.$$.not_equal(_.sasl,K)&&(_.sasl=K,n(2,_))}function Z(K){h=K,n(1,h)}return t.$$set=K=>{"id"in K&&n(0,s=K.id),"is_page"in K&&n(14,l=K.is_page)},[s,h,_,y,b,o,r,a,u,c,p,d,j,D,l,A,T,P,U,B,F,I,z,x,J,O,L,Y,H,V,Z]}class Bu extends Xe{constructor(e){super(),Qe(this,e,Cm,Em,Ze,{id:0,is_page:14},null,[-1,-1])}}function Am(t){let e,n=t[4]("Currently connecting to %1.",t[3])+"",i;return{c(){e=g("p"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&24&&n!==(n=o[4]("Currently connecting to %1.",o[3])+"")&&M(i,n)},d(o){o&&$(e)}}}function Om(t){let e,n=t[4]("Currently connected to %1.",t[3])+"",i;return{c(){e=g("p"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&24&&n!==(n=o[4]("Currently connected to %1.",o[3])+"")&&M(i,n)},d(o){o&&$(e)}}}function Nm(t){let e,n=t[4]("Currently disconnected from %1.",t[3])+"",i;return{c(){e=g("p"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&24&&n!==(n=o[4]("Currently disconnected from %1.",o[3])+"")&&M(i,n)},d(o){o&&$(e)}}}function Tm(t){let e,n=t[4]("Connection not found.")+"",i;return{c(){e=g("p"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Connection not found.")+"")&&M(i,n)},d(o){o&&$(e)}}}function Rm(t){let e,n,i,o=t[4]("Connection")+"",r,s,l,a,u,c,p,d,h,m,_,y;a=new be({props:{name:"bars"}}),u=new be({props:{name:"times"}});function b(j,D){return j[2].url?j[2].state==="disconnected"?Nm:j[2].state==="connected"?Om:Am:Tm}let E=b(t),R=E(t);return d=new Bu({props:{id:t[0].connection_id}}),{c(){e=g("div"),n=g("div"),i=g("h2"),r=N(o),s=C(),l=g("a"),G(a.$$.fragment),G(u.$$.fragment),c=C(),R.c(),p=C(),G(d.$$.fragment),k(l,"href","#settings"),k(l,"class","btn-hallow can-toggle is-active"),k(n,"class","sidebar-header"),k(e,"class","sidebar-left")},m(j,D){w(j,e,D),f(e,n),f(n,i),f(i,r),f(n,s),f(n,l),q(a,l,null),q(u,l,null),f(e,c),R.m(e,null),f(e,p),q(d,e,null),m=!0,_||(y=Se(l,"click",vt.toggle),_=!0)},p(j,[D]){t=j,(!m||D&16)&&o!==(o=t[4]("Connection")+"")&&M(r,o),E===(E=b(t))&&R?R.p(t,D):(R.d(1),R=E(t),R&&(R.c(),R.m(e,p)));const A={};D&1&&(A.id=t[0].connection_id),d.$set(A)},i(j){m||(v(a.$$.fragment,j),v(u.$$.fragment,j),v(d.$$.fragment,j),ut(()=>{h||(h=tt(e,Yt,t[1],!0)),h.run(1)}),m=!0)},o(j){S(a.$$.fragment,j),S(u.$$.fragment,j),S(d.$$.fragment,j),h||(h=tt(e,Yt,t[1],!1)),h.run(0),m=!1},d(j){j&&$(e),W(a),W(u),R.d(),W(d),j&&h&&h.end(),_=!1,y()}}}function Mm(t,e,n){let i,o;Ee(t,lt,u=>n(4,o=u));let{conversation:r={}}=e,{transition:s}=e;const l=pt("user");let a={};return Bt(async()=>{n(2,a=l.findConversation({connection_id:r.connection_id})||{})}),t.$$set=u=>{"conversation"in u&&n(0,r=u.conversation),"transition"in u&&n(1,s=u.transition)},t.$$.update=()=>{t.$$.dirty&4&&n(3,i=a.real_host||a.url&&a.url.host)},[r,s,a,i,o]}class Lm extends Xe{constructor(e){super(),Qe(this,e,Mm,Rm,Ze,{conversation:0,transition:1})}}function Im(t){let e,n,i,o;const r=t[9].default,s=qt(r,t,t[8],null);return{c(){e=g("a"),s&&s.c(),k(e,"href",t[2]),k(e,"class",t[0]),k(e,"style",t[1]),Je(e,"has-path",t[4])},m(l,a){w(l,e,a),s&&s.m(e,null),t[11](e),n=!0,i||(o=Se(e,"click",t[10]),i=!0)},p(l,[a]){s&&s.p&&(!n||a&256)&&Gt(s,r,l,l[8],n?Wt(r,l[8],a,null):Kt(l[8]),null),(!n||a&4)&&k(e,"href",l[2]),(!n||a&1)&&k(e,"class",l[0]),(!n||a&2)&&k(e,"style",l[1]),(!n||a&17)&&Je(e,"has-path",l[4])},i(l){n||(v(s,l),n=!0)},o(l){S(s,l),n=!1},d(l){l&&$(e),s&&s.d(l),t[11](null),i=!1,o()}}}function Pm(t,e,n){let i,o,r;Ee(t,Be,_=>n(7,r=_));let{$$slots:s={},$$scope:l}=e,{class:a=""}=e,u,{href:c="/"}=e,{style:p=""}=e;const d=()=>u.focus();function h(_){Ln.call(this,t,_)}function m(_){me[_?"unshift":"push"](()=>{u=_,n(3,u)})}return t.$$set=_=>{"class"in _&&n(0,a=_.class),"href"in _&&n(5,c=_.href),"style"in _&&n(1,p=_.style),"$$scope"in _&&n(8,l=_.$$scope)},t.$$.update=()=>{t.$$.dirty&160&&n(2,i=c.indexOf("/")===0?r.basePath+c:c),t.$$.dirty&132&&n(4,o=r.basePath+r.path===i.replace(/(#|\?).*/,""))},[a,p,i,u,o,c,d,r,l,s,h,m]}class qe extends Xe{constructor(e){super(),Qe(this,e,Pm,Im,Ze,{class:0,href:5,style:1,focus:6})}get focus(){return this.$$.ctx[6]}}function Pi(t){if(!t.nick)return["Loading..."];const e=Object.keys(t.channels||{}).sort(),n=[t.nick,t.name||t.user];let i="%1 (%2)";return t.away&&(i+=" is away (%3) and",n.push(t.away)),t.idle_for&&e.length?(i+=" has been idle for %4s in %5.",n.push(t.idle_for),n.push(e.sort().join(", "))):t.idle_for&&!e.length?(i+=" has been idle for %4s, and is not in any channels.",n.push(t.idle_for)):e.length?(i+=" is active in %4.",n.push(e.join(", "))):i+=" is not in any channels.",t.away||(i=i.replace(/%(4|5)/g,(o,r)=>"%"+(r-1))),[i,...n]}function ko(t){const e=["","chat",t.connection_id];return t.conversation_id&&e.push(t.conversation_id),Be.urlFor(e.map(encodeURIComponent).join("/")+"#"+t.ts.toISOString())}function ju(t){t.target.closest("a")||(t.preventDefault(),Be.go(t.target.closest(".message").querySelector("a").href))}function Dm(t,{conversation:e}){const n=t.detail.visibleEls.filter(r=>r.dataset.ts);if(!n.length)return;const i=r=>Be.go(e.path+(r.length?"#"+r:""),{replace:!0}),o=t.detail.pos;if(o==="top"){const r=n[0].dataset.ts;e.historyStartAt||e.load({before:r}),i(r)}else if(o==="bottom"){const r=n.slice(-1)[0].dataset.ts;e.historyStopAt||e.load({after:r}),i(e.historyStopAt?"":r)}else i(n[0].dataset.ts)}function Um(t,{conversation:e,timestampFromUrl:n}){const{infinityEl:i,scrollHeightChanged:o,scrollTo:r,visibleEls:s,visibleElsChanged:l}=t.detail,a=e.messages;!(i.scrollHeight>i.offsetHeight)&&a.length&&e.load({before:a.get(0).ts.toISOString()}),o&&(r(Be.hash?'.message[data-ts="'+Be.hash+'"]':-1),Bm(i,n===Be.hash)),l&&s.forEach(c=>a.render(c.dataset.index))}function Bm(t,e){const n=e&&Be.hash&&t.querySelector('.message[data-ts="'+Be.hash+'"]');gt(t,".has-focus",i=>i.classList.remove("has-focus")),n&&n.classList.add("has-focus")}function yo(t,e){return e.is("not_found")?"":t.frozen?t.frozen:t===e?"Connection messages.":e.info.away?e.info.away:e.info.idle_for?xe.l("User has been idle for %1s.",e.info.idle_for):(e.frozen?e.frozen:e.topic)||(e.is("private")?"Private conversation.":"No topic is set.")}const Xn={b:"channel_ban",C:"ctcp_block",c:"colour_filter",e:"ban_exemption",F:"enable_forwarding",f:"forward",g:"free_invite",i:"invite_only",I:"invite_exemption",j:"join_throttle",k:"password",l:"join_limit",L:"large_ban_list",m:"moderated",M:"login_to_talk",n:"prevent_external_send",P:"permanent",p:"privat",Q:"block_forwarded_users",q:"quiet",r:"block_unidentified",R:"login_to_join",s:"secret",S:"secure_connection_only",t:"topic_protection"};function pi(t){return Xn[t]?Xn[t]:Object.keys(Xn).filter(e=>t===Xn[e])[0]||""}const jm={a:"admin",B:"bot",h:"half_operator",i:"invisible",I:"whois_hide_online",o:"operator",p:"whois_hide_channels",R:"privmsg_from_registered_only",r:"registered",S:"service_bot",T:"ctcp_block",t:"vhost",v:"voice",W:"whois_notifications",x:"cloaked_hostname",z:"secure_connection",Z:"secure_connection_only"};function gl(t,e,n){const i=t.slice();return i[31]=e[n],i}function Fm(t){let e=t[12]("You are not a channel operator in %1.",t[0].name)+"",n;return{c(){n=N(e)},m(i,o){w(i,n,o)},p(i,o){o[0]&4097&&e!==(e=i[12]("You are not a channel operator in %1.",i[0].name)+"")&&M(n,e)},d(i){i&&$(n)}}}function zm(t){let e=t[12]("You are channel operator in %1.",t[0].name)+"",n;return{c(){n=N(e)},m(i,o){w(i,n,o)},p(i,o){o[0]&4097&&e!==(e=i[12]("You are channel operator in %1.",i[0].name)+"")&&M(n,e)},d(i){i&&$(n)}}}function Hm(t){let e,n=t[13](...Pi(t[3].info))+"",i,o,r,s,l=t[12]("Update information")+"",a,u,c;return{c(){e=g("span"),i=C(),o=g("br"),r=g("small"),s=g("a"),a=N(l),k(s,"href","#update")},m(p,d){w(p,e,d),e.innerHTML=n,w(p,i,d),w(p,o,d),w(p,r,d),f(r,s),f(s,a),u||(c=Se(s,"click",rt(t[18])),u=!0)},p(p,d){d[0]&8200&&n!==(n=p[13](...Pi(p[3].info))+"")&&(e.innerHTML=n),d[0]&4096&&l!==(l=p[12]("Update information")+"")&&M(a,l)},d(p){p&&$(e),p&&$(i),p&&$(o),p&&$(r),u=!1,c()}}}function qm(t){let e=t[12]("Conversation with %1 is frozen. Reason: %2",t[0].name,t[12](t[0].frozen))+"",n;return{c(){n=N(e)},m(i,o){w(i,n,o)},p(i,o){o[0]&4097&&e!==(e=i[12]("Conversation with %1 is frozen. Reason: %2",i[0].name,i[12](i[0].frozen))+"")&&M(n,e)},d(i){i&&$(n)}}}function bl(t){let e,n,i,o;const r=[Gm,Wm],s=[];function l(a,u){return a[9]||!a[3].modes.topic_protection?0:1}return e=l(t),n=s[e]=r[e](t),{c(){n.c(),i=ct()},m(a,u){s[e].m(a,u),w(a,i,u),o=!0},p(a,u){let c=e;e=l(a),e===c?s[e].p(a,u):(Ce(),S(s[c],1,1,()=>{s[c]=null}),Ae(),n=s[e],n?n.p(a,u):(n=s[e]=r[e](a),n.c()),v(n,1),n.m(i.parentNode,i))},i(a){o||(v(n),o=!0)},o(a){S(n),o=!1},d(a){s[e].d(a),a&&$(i)}}}function Wm(t){let e,n,i=t[12]("Topic")+"",o,r,s,l=t[13](t[0].topic||"No topic is set.")+"";return{c(){e=g("div"),n=g("label"),o=N(i),r=C(),s=g("div"),k(n,"for","nothing"),k(s,"class","input"),k(e,"class","text-field")},m(a,u){w(a,e,u),f(e,n),f(n,o),f(e,r),f(e,s),s.innerHTML=l},p(a,u){u[0]&4096&&i!==(i=a[12]("Topic")+"")&&M(o,i),u[0]&8193&&l!==(l=a[13](a[0].topic||"No topic is set.")+"")&&(s.innerHTML=l)},i:Le,o:Le,d(a){a&&$(e)}}}function Gm(t){let e,n,i;function o(s){t[19](s)}let r={name:"topic",placeholder:t[12]("No topic is set."),$$slots:{label:[Km]},$$scope:{ctx:t}};return t[7]!==void 0&&(r.value=t[7]),e=new Uu({props:r}),me.push(()=>$e(e,"value",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};l[0]&4096&&(a.placeholder=s[12]("No topic is set.")),l[0]&4096|l[1]&8&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&128&&(n=!0,a.value=s[7],ve(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function Km(t){let e,n=t[12]("Topic")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&4096&&n!==(n=o[12]("Topic")+"")&&M(i,n)},d(o){o&&$(e)}}}function vl(t){let e,n,i;function o(s){t[20](s)}let r={name:"want_notifications",$$slots:{label:[Ym]},$$scope:{ctx:t}};return t[8]!==void 0&&(r.value=t[8]),e=new nt({props:r}),me.push(()=>$e(e,"value",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};l[0]&4096|l[1]&8&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&256&&(n=!0,a.value=s[8],ve(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function Ym(t){let e,n=t[12]("Notify me on new messages")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&4096&&n!==(n=o[12]("Notify me on new messages")+"")&&M(i,n)},d(o){o&&$(e)}}}function Vm(t){let e,n=t[12]("Show raw messages")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&4096&&n!==(n=o[12]("Show raw messages")+"")&&M(i,n)},d(o){o&&$(e)}}}function $l(t){let e,n,i=t[12]("Conversation modes")+"",o,r,s,l,a,u,c,p,d,h,m,_,y,b,E,R,j,D,A;function T(H){t[22](H)}let P={badge:!0,name:"invite_only",disabled:!t[9],$$slots:{label:[Zm]},$$scope:{ctx:t}};t[4].invite_only!==void 0&&(P.value=t[4].invite_only),s=new nt({props:P}),me.push(()=>$e(s,"value",T));function U(H){t[23](H)}let B={badge:!0,name:"moderated",disabled:!t[9],$$slots:{label:[Jm]},$$scope:{ctx:t}};t[4].moderated!==void 0&&(B.value=t[4].moderated),u=new nt({props:B}),me.push(()=>$e(u,"value",U));function F(H){t[24](H)}let I={badge:!0,name:"prevent_external_send",disabled:!t[9],$$slots:{label:[Qm]},$$scope:{ctx:t}};t[4].prevent_external_send!==void 0&&(I.value=t[4].prevent_external_send),d=new nt({props:I}),me.push(()=>$e(d,"value",F));function z(H){t[25](H)}let x={badge:!0,name:"topic_protection",disabled:!t[9],$$slots:{label:[Xm]},$$scope:{ctx:t}};t[4].topic_protection!==void 0&&(x.value=t[4].topic_protection),_=new nt({props:x}),me.push(()=>$e(_,"value",z));function J(H){t[26](H)}let O={badge:!0,name:"password",disabled:!t[9],$$slots:{label:[xm]},$$scope:{ctx:t}};t[4].password!==void 0&&(O.value=t[4].password),E=new nt({props:O}),me.push(()=>$e(E,"value",J));let L=t[4].password&&wl(t),Y=!t[9]&&kl(t);return{c(){e=g("nav"),n=g("h3"),o=N(i),r=C(),G(s.$$.fragment),a=C(),G(u.$$.fragment),p=C(),G(d.$$.fragment),m=C(),G(_.$$.fragment),b=C(),G(E.$$.fragment),j=C(),L&&L.c(),D=C(),Y&&Y.c(),k(e,"class","sidebar-left__nav")},m(H,V){w(H,e,V),f(e,n),f(n,o),f(e,r),q(s,e,null),f(e,a),q(u,e,null),f(e,p),q(d,e,null),f(e,m),q(_,e,null),f(e,b),q(E,e,null),f(e,j),L&&L.m(e,null),f(e,D),Y&&Y.m(e,null),A=!0},p(H,V){(!A||V[0]&4096)&&i!==(i=H[12]("Conversation modes")+"")&&M(o,i);const Z={};V[0]&512&&(Z.disabled=!H[9]),V[0]&4112|V[1]&8&&(Z.$$scope={dirty:V,ctx:H}),!l&&V[0]&16&&(l=!0,Z.value=H[4].invite_only,ve(()=>l=!1)),s.$set(Z);const K={};V[0]&512&&(K.disabled=!H[9]),V[0]&4112|V[1]&8&&(K.$$scope={dirty:V,ctx:H}),!c&&V[0]&16&&(c=!0,K.value=H[4].moderated,ve(()=>c=!1)),u.$set(K);const re={};V[0]&512&&(re.disabled=!H[9]),V[0]&4112|V[1]&8&&(re.$$scope={dirty:V,ctx:H}),!h&&V[0]&16&&(h=!0,re.value=H[4].prevent_external_send,ve(()=>h=!1)),d.$set(re);const de={};V[0]&512&&(de.disabled=!H[9]),V[0]&4112|V[1]&8&&(de.$$scope={dirty:V,ctx:H}),!y&&V[0]&16&&(y=!0,de.value=H[4].topic_protection,ve(()=>y=!1)),_.$set(de);const ie={};V[0]&512&&(ie.disabled=!H[9]),V[0]&4112|V[1]&8&&(ie.$$scope={dirty:V,ctx:H}),!R&&V[0]&16&&(R=!0,ie.value=H[4].password,ve(()=>R=!1)),E.$set(ie),H[4].password?L?(L.p(H,V),V[0]&16&&v(L,1)):(L=wl(H),L.c(),v(L,1),L.m(e,D)):L&&(Ce(),S(L,1,1,()=>{L=null}),Ae()),H[9]?Y&&(Y.d(1),Y=null):Y?Y.p(H,V):(Y=kl(H),Y.c(),Y.m(e,null))},i(H){A||(v(s.$$.fragment,H),v(u.$$.fragment,H),v(d.$$.fragment,H),v(_.$$.fragment,H),v(E.$$.fragment,H),v(L),A=!0)},o(H){S(s.$$.fragment,H),S(u.$$.fragment,H),S(d.$$.fragment,H),S(_.$$.fragment,H),S(E.$$.fragment,H),S(L),A=!1},d(H){H&&$(e),W(s),W(u),W(d),W(_),W(E),L&&L.d(),Y&&Y.d()}}}function Zm(t){let e,n=t[12]("Invite only")+"",i,o,r,s=t[4].invite_only?"+":"-",l,a=pi("invite_only")+"",u;return{c(){e=g("span"),i=N(n),o=C(),r=g("b"),l=N(s),u=N(a),k(r,"class","badge"),k(e,"slot","label")},m(c,p){w(c,e,p),f(e,i),f(e,o),f(e,r),f(r,l),f(r,u)},p(c,p){p[0]&4096&&n!==(n=c[12]("Invite only")+"")&&M(i,n),p[0]&16&&s!==(s=c[4].invite_only?"+":"-")&&M(l,s)},d(c){c&&$(e)}}}function Jm(t){let e,n=t[12]("Moderated")+"",i,o,r,s=t[4].moderated?"+":"-",l,a=pi("moderated")+"",u;return{c(){e=g("span"),i=N(n),o=C(),r=g("b"),l=N(s),u=N(a),k(r,"class","badge"),k(e,"slot","label")},m(c,p){w(c,e,p),f(e,i),f(e,o),f(e,r),f(r,l),f(r,u)},p(c,p){p[0]&4096&&n!==(n=c[12]("Moderated")+"")&&M(i,n),p[0]&16&&s!==(s=c[4].moderated?"+":"-")&&M(l,s)},d(c){c&&$(e)}}}function Qm(t){let e,n=t[12]("Prevent external send")+"",i,o,r,s=t[4].prevent_external_send?"+":"-",l,a=pi("prevent_external_send")+"",u;return{c(){e=g("span"),i=N(n),o=C(),r=g("b"),l=N(s),u=N(a),k(r,"class","badge"),k(e,"slot","label")},m(c,p){w(c,e,p),f(e,i),f(e,o),f(e,r),f(r,l),f(r,u)},p(c,p){p[0]&4096&&n!==(n=c[12]("Prevent external send")+"")&&M(i,n),p[0]&16&&s!==(s=c[4].prevent_external_send?"+":"-")&&M(l,s)},d(c){c&&$(e)}}}function Xm(t){let e,n=t[12]("Protected topic")+"",i,o,r,s=t[4].topic_protection?"+":"-",l,a=pi("topic_protection")+"",u;return{c(){e=g("span"),i=N(n),o=C(),r=g("b"),l=N(s),u=N(a),k(r,"class","badge"),k(e,"slot","label")},m(c,p){w(c,e,p),f(e,i),f(e,o),f(e,r),f(r,l),f(r,u)},p(c,p){p[0]&4096&&n!==(n=c[12]("Protected topic")+"")&&M(i,n),p[0]&16&&s!==(s=c[4].topic_protection?"+":"-")&&M(l,s)},d(c){c&&$(e)}}}function xm(t){let e,n=t[12]("Password")+"",i,o,r,s=t[4].password?"+":"-",l,a=pi("password")+"",u;return{c(){e=g("span"),i=N(n),o=C(),r=g("b"),l=N(s),u=N(a),k(r,"class","badge"),k(e,"slot","label")},m(c,p){w(c,e,p),f(e,i),f(e,o),f(e,r),f(r,l),f(r,u)},p(c,p){p[0]&4096&&n!==(n=c[12]("Password")+"")&&M(i,n),p[0]&16&&s!==(s=c[4].password?"+":"-")&&M(l,s)},d(c){c&&$(e)}}}function wl(t){let e,n,i;function o(s){t[27](s)}let r={type:"password",name:"password",$$slots:{label:[e_]},$$scope:{ctx:t}};return t[5]!==void 0&&(r.value=t[5]),e=new Ve({props:r}),me.push(()=>$e(e,"value",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};l[0]&4096|l[1]&8&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&32&&(n=!0,a.value=s[5],ve(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function e_(t){let e,n=t[12]("Password")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&4096&&n!==(n=o[12]("Password")+"")&&M(i,n)},d(o){o&&$(e)}}}function kl(t){let e,n,i=t[12]("Only operators can change modes.")+"",o;return{c(){e=g("p"),n=g("i"),o=N(i)},m(r,s){w(r,e,s),f(e,n),f(n,o)},p(r,s){s[0]&4096&&i!==(i=r[12]("Only operators can change modes.")+"")&&M(o,i)},d(r){r&&$(e)}}}function t_(t){let e,n=t[12]("Save")+"",i;return{c(){e=g("span"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&4096&&n!==(n=o[12]("Save")+"")&&M(i,n)},d(o){o&&$(e)}}}function n_(t){let e,n=t[12]("Leave")+"",i;return{c(){e=g("span"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r[0]&4096&&n!==(n=o[12]("Leave")+"")&&M(i,n)},d(o){o&&$(e)}}}function yl(t){let e,n,i=t[12]("Participants (%1)",t[2].length)+"",o,r,s,l=t[2].toArray(),a=[];for(let c=0;c<l.length;c+=1)a[c]=Sl(gl(t,l,c));const u=c=>S(a[c],1,1,()=>{a[c]=null});return{c(){e=g("nav"),n=g("h3"),o=N(i),r=C();for(let c=0;c<a.length;c+=1)a[c].c();k(e,"class","sidebar-left__nav")},m(c,p){w(c,e,p),f(e,n),f(n,o),f(e,r);for(let d=0;d<a.length;d+=1)a[d].m(e,null);s=!0},p(c,p){if((!s||p[0]&4100)&&i!==(i=c[12]("Participants (%1)",c[2].length)+"")&&M(o,i),p[0]&5){l=c[2].toArray();let d;for(d=0;d<l.length;d+=1){const h=gl(c,l,d);a[d]?(a[d].p(h,p),v(a[d],1)):(a[d]=Sl(h),a[d].c(),v(a[d],1),a[d].m(e,null))}for(Ce(),d=l.length;d<a.length;d+=1)u(d);Ae()}},i(c){if(!s){for(let p=0;p<l.length;p+=1)v(a[p]);s=!0}},o(c){a=a.filter(Boolean);for(let p=0;p<a.length;p+=1)S(a[p]);s=!1},d(c){c&&$(e),$t(a,c)}}}function i_(t){let e,n=t[31].nick+"",i,o;return{c(){e=g("div"),i=N(n),o=C()},m(r,s){w(r,e,s),f(e,i),w(r,o,s)},p(r,s){s[0]&4&&n!==(n=r[31].nick+"")&&M(i,n)},d(r){r&&$(e),r&&$(o)}}}function Sl(t){let e,n;return e=new qe({props:{href:"/chat/"+t[0].connection_id+"/"+encodeURIComponent(t[31].nick),class:"participant "+_o(t[31].modes),$$slots:{default:[i_]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o[0]&5&&(r.href="/chat/"+i[0].connection_id+"/"+encodeURIComponent(i[31].nick)),o[0]&4&&(r.class="participant "+_o(i[31].modes)),o[0]&4|o[1]&8&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function o_(t){let e,n,i,o=t[12]("Conversation")+"",r,s,l,a,u,c,p,d,h,m,_=Object.hasOwn(t[3],"wantNotifications"),y,b,E,R,j,D,A,T,P,U,B,F,I,z,x,J;a=new be({props:{name:"bars"}}),u=new be({props:{name:"times"}});function O(ie,he){return ie[3].frozen?qm:ie[10]?Hm:ie[9]?zm:Fm}let L=O(t),Y=L(t),H=!t[10]&&bl(t),V=_&&vl(t);function Z(ie){t[21](ie)}let K={name:"raw_messages",$$slots:{label:[Vm]},$$scope:{ctx:t}};t[6]!==void 0&&(K.value=t[6]),b=new nt({props:K}),me.push(()=>$e(b,"value",Z));let re=!t[10]&&$l(t);A=new ft({props:{icon:"save",op:t[15],$$slots:{default:[t_]},$$scope:{ctx:t}}}),P=new ft({props:{type:"button",icon:"sign-out-alt",$$slots:{default:[n_]},$$scope:{ctx:t}}}),P.$on("click",t[16]),B=new Rt({props:{op:t[15]}});let de=!t[0].frozen&&t[14].hasRightColumn&&yl(t);return{c(){e=g("div"),n=g("div"),i=g("h2"),r=N(o),s=C(),l=g("a"),G(a.$$.fragment),G(u.$$.fragment),c=C(),p=g("p"),Y.c(),d=C(),h=g("form"),H&&H.c(),m=C(),V&&V.c(),y=C(),G(b.$$.fragment),R=C(),re&&re.c(),j=C(),D=g("div"),G(A.$$.fragment),T=C(),G(P.$$.fragment),U=C(),G(B.$$.fragment),F=C(),de&&de.c(),k(l,"href","#settings"),k(l,"class","btn-hallow can-toggle is-active"),k(n,"class","sidebar-header"),k(D,"class","form-actions"),k(h,"method","post"),k(e,"class","sidebar-left")},m(ie,he){w(ie,e,he),f(e,n),f(n,i),f(i,r),f(n,s),f(n,l),q(a,l,null),q(u,l,null),f(e,c),f(e,p),Y.m(p,null),f(e,d),f(e,h),H&&H.m(h,null),f(h,m),V&&V.m(h,null),f(h,y),q(b,h,null),f(h,R),re&&re.m(h,null),f(h,j),f(h,D),q(A,D,null),f(D,T),q(P,D,null),f(h,U),q(B,h,null),f(e,F),de&&de.m(e,null),z=!0,x||(J=[Se(l,"click",vt.toggle),Se(h,"submit",rt(t[17]))],x=!0)},p(ie,he){t=ie,(!z||he[0]&4096)&&o!==(o=t[12]("Conversation")+"")&&M(r,o),L===(L=O(t))&&Y?Y.p(t,he):(Y.d(1),Y=L(t),Y&&(Y.c(),Y.m(p,null))),t[10]?H&&(Ce(),S(H,1,1,()=>{H=null}),Ae()):H?(H.p(t,he),he[0]&1024&&v(H,1)):(H=bl(t),H.c(),v(H,1),H.m(h,m)),he[0]&8&&(_=Object.hasOwn(t[3],"wantNotifications")),_?V?(V.p(t,he),he[0]&8&&v(V,1)):(V=vl(t),V.c(),v(V,1),V.m(h,y)):V&&(Ce(),S(V,1,1,()=>{V=null}),Ae());const Te={};he[0]&4096|he[1]&8&&(Te.$$scope={dirty:he,ctx:t}),!E&&he[0]&64&&(E=!0,Te.value=t[6],ve(()=>E=!1)),b.$set(Te),t[10]?re&&(Ce(),S(re,1,1,()=>{re=null}),Ae()):re?(re.p(t,he),he[0]&1024&&v(re,1)):(re=$l(t),re.c(),v(re,1),re.m(h,j));const ce={};he[0]&4096|he[1]&8&&(ce.$$scope={dirty:he,ctx:t}),A.$set(ce);const ke={};he[0]&4096|he[1]&8&&(ke.$$scope={dirty:he,ctx:t}),P.$set(ke),!t[0].frozen&&t[14].hasRightColumn?de?(de.p(t,he),he[0]&16385&&v(de,1)):(de=yl(t),de.c(),v(de,1),de.m(e,null)):de&&(Ce(),S(de,1,1,()=>{de=null}),Ae())},i(ie){z||(v(a.$$.fragment,ie),v(u.$$.fragment,ie),v(H),v(V),v(b.$$.fragment,ie),v(re),v(A.$$.fragment,ie),v(P.$$.fragment,ie),v(B.$$.fragment,ie),v(de),ut(()=>{I||(I=tt(e,Yt,t[1],!0)),I.run(1)}),z=!0)},o(ie){S(a.$$.fragment,ie),S(u.$$.fragment,ie),S(H),S(V),S(b.$$.fragment,ie),S(re),S(A.$$.fragment,ie),S(P.$$.fragment,ie),S(B.$$.fragment,ie),S(de),I||(I=tt(e,Yt,t[1],!1)),I.run(0),z=!1},d(ie){ie&&$(e),W(a),W(u),Y.d(),H&&H.d(),V&&V.d(),W(b),re&&re.d(),W(A),W(P),W(B),de&&de.d(),ie&&I&&I.end(),x=!1,st(J)}}}function r_(t,e,n){let i,o,r,s,l,a=Le,u=()=>(a(),a=St(i,K=>n(2,l=K)),i),c,p=Le,d=()=>(p(),p=St(y,K=>n(3,c=K)),y),h,m,_;Ee(t,vt,K=>n(28,s=K)),Ee(t,lt,K=>n(12,h=K)),Ee(t,jt,K=>n(13,m=K)),Ee(t,Ii,K=>n(14,_=K)),t.$$.on_destroy.push(()=>a()),t.$$.on_destroy.push(()=>p());let{conversation:y}=e;d();let{transition:b}=e;const E=new Oo({api:!1,id:"saveConversationSettings"});let R={invite_only:!1,moderated:!1,password:!1,prevent_external_send:!1,topic_protection:!1},j="",D=!1,A="",T=!1;Bt(async()=>{Object.keys(y.modes).length===0&&!o&&await new Promise(K=>y.send("/mode",K)),await Li(),n(4,R=Object.assign({},R,y.modes)),n(6,D=y.messages.raw),n(7,A=y.topic),n(8,T=y.wantNotifications)});function P(){y.send("/part",K=>!K.errrors&&Ri(vt,s="",s))}function U(){const K=[];for(const re in R)re==="password"&&R[re]?(j&&y.send(r?"/mode +k "+j:"/join "+y.name+" "+j),n(5,j="")):R[re]!==(y.modes[re]||!1)&&K.push((R[re]?"+":"-")+pi(re));return r&&K.length&&y.send("/mode "+K.join(""))}function B(){return!r&&y.modes.topic_protection?!1:A!==y.topic&&y.send("/topic "+A)}async function F(){E.update({status:"loading"}),await E.on("update"),y.update({wantNotifications:T}),y.messages.update({raw:D}),U(),B(),await Li(),E.update({status:"success"})}function I(){y.send("/whois "+y.name,K=>K.stopPropagation())}function z(K){A=K,n(7,A)}function x(K){T=K,n(8,T)}function J(K){D=K,n(6,D)}function O(K){t.$$.not_equal(R.invite_only,K)&&(R.invite_only=K,n(4,R))}function L(K){t.$$.not_equal(R.moderated,K)&&(R.moderated=K,n(4,R))}function Y(K){t.$$.not_equal(R.prevent_external_send,K)&&(R.prevent_external_send=K,n(4,R))}function H(K){t.$$.not_equal(R.topic_protection,K)&&(R.topic_protection=K,n(4,R))}function V(K){t.$$.not_equal(R.password,K)&&(R.password=K,n(4,R))}function Z(K){j=K,n(5,j)}return t.$$set=K=>{"conversation"in K&&d(n(0,y=K.conversation)),"transition"in K&&n(1,b=K.transition)},t.$$.update=()=>{t.$$.dirty[0]&8&&u(n(11,i=c.participants)),t.$$.dirty[0]&8&&n(10,o=c.is("private")),t.$$.dirty[0]&4&&n(9,r=l.me().modes.operator)},[y,b,l,c,R,j,D,A,T,r,o,i,h,m,_,E,P,F,I,z,x,J,O,L,Y,H,V,Z]}class s_ extends Xe{constructor(e){super(),Qe(this,e,r_,o_,Ze,{conversation:0,transition:1},null,[-1,-1])}}function l_(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Fu=l_,a_=/\s/;function u_(t){for(var e=t.length;e--&&a_.test(t.charAt(e)););return e}var f_=u_,c_=f_,d_=/^\s+/;function p_(t){return t&&t.slice(0,c_(t)+1).replace(d_,"")}var h_=p_,m_=h_,El=Fu,__=_u,Cl=0/0,g_=/^[-+]0x[0-9a-f]+$/i,b_=/^0b[01]+$/i,v_=/^0o[0-7]+$/i,$_=parseInt;function w_(t){if(typeof t=="number")return t;if(__(t))return Cl;if(El(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=El(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=m_(t);var n=b_.test(t);return n||v_.test(t)?$_(t.slice(2),n?2:8):g_.test(t)?Cl:+t}var k_=w_,y_=Fu,lr=Ai,Al=k_,S_="Expected a function",E_=Math.max,C_=Math.min;function A_(t,e,n){var i,o,r,s,l,a,u=0,c=!1,p=!1,d=!0;if(typeof t!="function")throw new TypeError(S_);e=Al(e)||0,y_(n)&&(c=!!n.leading,p="maxWait"in n,r=p?E_(Al(n.maxWait)||0,e):r,d="trailing"in n?!!n.trailing:d);function h(A){var T=i,P=o;return i=o=void 0,u=A,s=t.apply(P,T),s}function m(A){return u=A,l=setTimeout(b,e),c?h(A):s}function _(A){var T=A-a,P=A-u,U=e-T;return p?C_(U,r-P):U}function y(A){var T=A-a,P=A-u;return a===void 0||T>=e||T<0||p&&P>=r}function b(){var A=lr();if(y(A))return E(A);l=setTimeout(b,_(A))}function E(A){return l=void 0,d&&i?h(A):(i=o=void 0,s)}function R(){l!==void 0&&clearTimeout(l),u=0,i=a=o=l=void 0}function j(){return l===void 0?s:E(lr())}function D(){var A=lr(),T=y(A);if(i=arguments,o=this,a=A,T){if(l===void 0)return m(a);if(p)return clearTimeout(l),l=setTimeout(b,e),h(a)}return l===void 0&&(l=setTimeout(b,e)),s}return D.cancel=R,D.flush=j,D}var Gr=A_;class O_{constructor(){this.dragAndDropEvents={drag:this._preventDefault.bind(this),dragend:this.stop.bind(this),dragenter:this.start.bind(this),dragleave:this.stop.bind(this),dragover:this.start.bind(this),dragstart:this._preventDefault.bind(this),drop:this.drop.bind(this)},this.pasteEvents={paste:this.paste.bind(this)},this.dropIndicatorEl=document.createElement("div"),this.dropIndicatorEl.className="drop-area hidden",this.removeDragOverDebounced=Gr(()=>this._removeDragOver(),100)}attach(e,n,i=document){this.dropEl=e,this.uploader=n,this.targetEl=i,Object.keys(this.dragAndDropEvents).forEach(o=>{i.addEventListener(o,this.dragAndDropEvents[o])}),Object.keys(this.pasteEvents).forEach(o=>{document.addEventListener(o,this.pasteEvents[o])})}detach(){Object.keys(this.dragAndDropEvents).forEach(e=>{this.targetEl.removeEventListener(e,this.dragAndDropEvents[e])}),Object.keys(this.pasteEvents).forEach(e=>{document.removeEventListener(e,this.pasteEvents[e])})}drop(e){this.stop(e),this.uploader&&this.uploader(e)}paste(e){const n=(e.clipboardData||e.originalEvent.clipboardData).items;if(!!this.uploader){for(let i=0;i<n.length;i++)if(n[i].kind==="file")return this.uploader({dataTransfer:{files:[n[i].getAsFile()]}})}}stop(e){this._preventDefault(e),this.removeDragOverDebounced()}start(e){if(!this.dropEl)return;this._preventDefault(e);const n=this.dropIndicatorEl.style;n.height=this.dropEl.offsetHeight+"px",n.width=this.dropEl.offsetWidth+"px",n.top=this.dropEl.offsetTop+"px",n.left=this.dropEl.offsetLeft+"px",this.dropIndicatorEl.classList.remove("hidden"),this.dropEl.parentNode.appendChild(this.dropIndicatorEl)}_preventDefault(e){e.preventDefault(),e.stopPropagation()}_removeDragOver(){this.dropIndicatorEl.classList.add("hidden")}}function N_(t){let e,n,i,o,r,s,l;const a=t[6].default,u=qt(a,t,t[5],null);return{c(){e=g("main"),n=g("div"),u&&u.c(),ut(()=>t[7].call(n)),k(e,"class",o=t[1].join(" "))},m(c,p){w(c,e,p),f(e,n),u&&u.m(n,null),i=jf(n,t[7].bind(n)),r=!0,s||(l=Nr(t[2].call(null,e)),s=!0)},p(c,[p]){u&&u.p&&(!r||p&32)&&Gt(u,a,c,c[5],r?Wt(a,c[5],p,null):Kt(c[5]),null),(!r||p&2&&o!==(o=c[1].join(" ")))&&k(e,"class",o)},i(c){r||(v(u,c),r=!0)},o(c){S(u,c),r=!1},d(c){c&&$(e),u&&u.d(c),i(),s=!1,l()}}}function T_(t,e,n){let i,{$$slots:o={},$$scope:r}=e;const s=ru(),l={scrollDelay:80,scrollOffset:80,scrollTop:0,visibleEls:[]};let{class:a=""}=e,u=Ai(),c=0,{pos:p="top"}=e;function d(){const E=l.infinityEl;if(!E)return;n(3,p=E.scrollTop>c-E.offsetHeight-l.scrollOffset?"bottom":E.scrollTop<l.scrollOffset?"top":"middle"),l.pos=p,l.scrollHeightChanged=l.scrollHeight!==c,l.scrollHeight=c,l.visibleElsChanged=!1;const R=ac(E.firstElementChild,E);(R.length!==l.visibleEls.length||R[0]!==l.visibleEls[0])&&(l.visibleEls=R,l.visibleElsChanged=!0),(l.scrollHeightChanged||l.visibleElsChanged)&&s("visibility",l),l.scrollHeightChanged&&s("rendered",l)}function h(E){l.infinityEl=E,l.scrollTo=y,E.addEventListener("scroll",()=>m(E)),d()}function m(E){l.scrollTid&&clearTimeout(l.scrollTid),l.scrollTid=setTimeout(()=>_(E),l.scrollDelay)}function _(E){u+500>Ai()?(Math.abs(E.scrollTop-l.scrollTop)>40&&(E.scrollTop=l.scrollTop),l.scrollTid&&clearTimeout(l.scrollTid),d()):(l.scrollTop=E.scrollTop,d(),s("scrolled",l))}function y(E){return Ue.undefined(E)||(E===-1&&(E=c),Ue.string(E)&&(E=l.infinityEl.querySelector(E)),E&&E.tagName&&(E=E.offsetTop),Ue.undefined(E))||E<0?!1:(u=Ai(),l.infinityEl.scrollTop=E,l.scrollTop=l.infinityEl.scrollTop,!0)}function b(){c=this.offsetHeight,n(0,c)}return t.$$set=E=>{"class"in E&&n(4,a=E.class),"pos"in E&&n(3,p=E.pos),"$$scope"in E&&n(5,r=E.$$scope)},t.$$.update=()=>{t.$$.dirty&24&&n(1,i=[a||"infinity-scroll"].concat(["has-pos-"+p])),t.$$.dirty&1&&c&&d()},[c,i,h,p,a,r,o,b]}class Kr extends Xe{constructor(e){super(),Qe(this,e,T_,N_,Ze,{class:4,pos:3})}}const R_=fi("notify");class M_ extends Mt{constructor(){super(),this.Notification=window.Notification||{permission:"denied"},this.prop("persist","volume",0),this.prop("persist","notificationCloseDelay",5e3),this.prop("persist","wantNotifications",this.Notification.requestPermission?null:!1),this.prop("ro","appHasFocus",()=>document.hasFocus()),this.prop("ro","volumeOptions",[["0","Muted"],["25","Low"],["50","Medium"],["100","Max"]]),this.prop("rw","desktopAccess",this.Notification.permission)}play(e=this){const n=document.getElementById("audio_notification");!n||(n.muted=!1,n.volume=parseInt(e.volume,10)/100,n.play())}requestDesktopAccess(){return this.Notification.requestPermission?(this.Notification.requestPermission(e=>this.update({desktopAccess:e})),this):this.update({desktopAccess:this.Notification.permission})}show(e,n={}){if(n.title||(n.title=document.title),!this.wantNotifications)return this._showInConsole(e,n);if(this.volume&&this.play(),this.desktopAccess!=="granted")return this.showInApp(e,n);const i=new Notification(n.title,{...n,body:e});return i.onclick=o=>this._onClick(o,i,n),setTimeout(()=>i.close(),this.notificationCloseDelay),i}showInApp(e,n={}){n.title||(n.title=document.title);const i=document.createElement("div"),o={...n,body:e,close:()=>{i.remove(),o.closed=!0},target:"app"};return i.className="notify-notification fade-in",i.innerHTML='<a href="#close" class="notify-notification__close"></a><h6 class="notify-notification__title"></h6><div class="notify-notification__content"></div>',i.querySelector("a").addEventListener("click",r=>{r.preventDefault(),o.close()}),i.querySelector("h6").textContent=n.title,i.querySelector("div").textContent=e,n.closeAfter===-1?i.querySelector("a").remove():setTimeout(()=>o.close(),n.closeAfter||this.notificationCloseDelay),setTimeout(()=>i.classList.add("is-visible"),1),document.body.appendChild(i),o}_onClick(e,n,i){n.close(),window.focus(),this.emit("click",{...i,sourceEvent:e})}_showInConsole(e,n){return R_.info("[Notify]",e,n),{...n,body:e,close:()=>{},target:"console"}}}const _t=new M_;function Ol(t,e,n){const i=t.slice();return i[40]=e[n],i}function Nl(t,e,n){const i=t.slice();return i[43]=e[n],i[45]=n,i}function Tl(t){let e,n,i,o,r,s;return n=new be({props:{name:"users-cog"}}),i=new be({props:{name:"times"}}),{c(){e=g("a"),G(n.$$.fragment),G(i.$$.fragment),k(e,"href","#settings"),k(e,"class","btn-hallow can-toggle"),Je(e,"is-active",t[17]==="settings")},m(l,a){w(l,e,a),q(n,e,null),q(i,e,null),o=!0,r||(s=Se(e,"click",vt.toggle),r=!0)},p(l,a){(!o||a[0]&131072)&&Je(e,"is-active",l[17]==="settings")},i(l){o||(v(n.$$.fragment,l),v(i.$$.fragment,l),o=!0)},o(l){S(n.$$.fragment,l),S(i.$$.fragment,l),o=!1},d(l){l&&$(e),W(n),W(i),r=!1,s()}}}function L_(t){let e,n,i=t[15](t[3].name)+"",o,r,s,l=yo(t[16],t[5])+"",a,u,c=!t[5].is("not_found"),p,d,h,m,_=c&&Tl(t);return{c(){e=g("h1"),n=g("a"),o=N(i),r=C(),s=g("span"),a=N(l),u=C(),_&&_.c(),p=ct(),k(n,"href","#settings"),k(e,"class","ellipsis"),k(s,"class","chat-header__topic ellipsis")},m(y,b){w(y,e,b),f(e,n),f(n,o),w(y,r,b),w(y,s,b),f(s,a),w(y,u,b),_&&_.m(y,b),w(y,p,b),d=!0,h||(m=Se(n,"click",vt.toggle),h=!0)},p(y,b){(!d||b[0]&32776)&&i!==(i=y[15](y[3].name)+"")&&M(o,i),(!d||b[0]&65568)&&l!==(l=yo(y[16],y[5])+"")&&M(a,l),b[0]&32&&(c=!y[5].is("not_found")),c?_?(_.p(y,b),b[0]&32&&v(_,1)):(_=Tl(y),_.c(),v(_,1),_.m(p.parentNode,p)):_&&(Ce(),S(_,1,1,()=>{_=null}),Ae())},i(y){d||(v(_),d=!0)},o(y){S(_),d=!1},d(y){y&&$(e),y&&$(r),y&&$(s),y&&$(u),_&&_.d(y),y&&$(p),h=!1,m()}}}function Rl(t){let e,n,i,o;const r=[P_,I_],s=[];function l(a,u){return a[0]?0:1}return e=l(t),n=s[e]=r[e](t),{c(){n.c(),i=ct()},m(a,u){s[e].m(a,u),w(a,i,u),o=!0},p(a,u){let c=e;e=l(a),e===c?s[e].p(a,u):(Ce(),S(s[c],1,1,()=>{s[c]=null}),Ae(),n=s[e],n?n.p(a,u):(n=s[e]=r[e](a),n.c()),v(n,1),n.m(i.parentNode,i))},i(a){o||(v(n),o=!0)},o(a){S(n),o=!1},d(a){s[e].d(a),a&&$(i)}}}function I_(t){let e,n;return e=new Lm({props:{conversation:t[3],transition:{duration:250,x:t[18].isSingleColumn?t[18].width:0}}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o[0]&8&&(r.conversation=i[3]),o[0]&262144&&(r.transition={duration:250,x:i[18].isSingleColumn?i[18].width:0}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function P_(t){let e,n;return e=new s_({props:{conversation:t[3],transition:{duration:250,x:t[18].isSingleColumn?t[18].width:0}}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o[0]&8&&(r.conversation=i[3]),o[0]&262144&&(r.transition={duration:250,x:i[18].isSingleColumn?i[18].width:0}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function Ml(t){let e,n,i,o,r;const s=[U_,D_],l=[];function a(u,c){return c[0]&32&&(e=null),e==null&&(e=!!u[5].is("private")),e?0:u[5].frozen?-1:1}return~(n=a(t,[-1,-1]))&&(i=l[n]=s[n](t)),{c(){i&&i.c(),o=ct()},m(u,c){~n&&l[n].m(u,c),w(u,o,c),r=!0},p(u,c){let p=n;n=a(u,c),n===p?~n&&l[n].p(u,c):(i&&(Ce(),S(l[p],1,1,()=>{l[p]=null}),Ae()),~n?(i=l[n],i?i.p(u,c):(i=l[n]=s[n](u),i.c()),v(i,1),i.m(o.parentNode,o)):i=null)},i(u){r||(v(i),r=!0)},o(u){S(i),r=!1},d(u){~n&&l[n].d(u),u&&$(o)}}}function D_(t){let e,n,i,o,r=t[20](t[5].topic?"Topic for %1 is: %2":"No topic is set for %1.",t[5].name,t[5].topic)+"",s,l,a,u,c;n=new be({props:{name:"info-circle"}}),a=new be({props:{name:"info-circle"}});function p(m,_){return m[21].length===1?j_:B_}let d=p(t),h=d(t);return{c(){e=g("p"),G(n.$$.fragment),i=C(),o=new Tt(!1),s=C(),l=g("p"),G(a.$$.fragment),u=C(),h.c(),o.a=null},m(m,_){w(m,e,_),q(n,e,null),f(e,i),o.m(r,e),w(m,s,_),w(m,l,_),q(a,l,null),f(l,u),h.m(l,null),c=!0},p(m,_){(!c||_[0]&1048608)&&r!==(r=m[20](m[5].topic?"Topic for %1 is: %2":"No topic is set for %1.",m[5].name,m[5].topic)+"")&&o.p(r),d===(d=p(m))&&h?h.p(m,_):(h.d(1),h=d(m),h&&(h.c(),h.m(l,null)))},i(m){c||(v(n.$$.fragment,m),v(a.$$.fragment,m),c=!0)},o(m){S(n.$$.fragment,m),S(a.$$.fragment,m),c=!1},d(m){m&&$(e),W(n),m&&$(s),m&&$(l),W(a),h.d()}}}function U_(t){let e,n,i,o,r=t[20]('This is a private conversation with "%1".',t[5].name)+"",s;return n=new be({props:{name:"info-circle"}}),{c(){e=g("p"),G(n.$$.fragment),i=C(),o=new Tt(!1),o.a=null},m(l,a){w(l,e,a),q(n,e,null),f(e,i),o.m(r,e),s=!0},p(l,a){(!s||a[0]&1048608)&&r!==(r=l[20]('This is a private conversation with "%1".',l[5].name)+"")&&o.p(r)},i(l){s||(v(n.$$.fragment,l),s=!0)},o(l){S(n.$$.fragment,l),s=!1},d(l){l&&$(e),W(n)}}}function B_(t){let e,n=t[20]("There are %1 participants in this conversation.",t[21].length)+"",i;return{c(){e=new Tt(!1),i=ct(),e.a=i},m(o,r){e.m(n,o,r),w(o,i,r)},p(o,r){r[0]&3145728&&n!==(n=o[20]("There are %1 participants in this conversation.",o[21].length)+"")&&e.p(n)},d(o){o&&$(i),o&&e.d()}}}function j_(t){let e=t[15]("You are the only participant in this conversation.")+"",n;return{c(){n=N(e)},m(i,o){w(i,n,o)},p(i,o){o[0]&32768&&e!==(e=i[15]("You are the only participant in this conversation.")+"")&&M(n,e)},d(i){i&&$(n)}}}function Ll(t){let e,n,i,o,r,s=t[15]("Loading...")+"",l,a;return i=new be({props:{name:"spinner",animation:"spin"}}),{c(){e=g("div"),n=g("span"),G(i.$$.fragment),o=C(),r=g("i"),l=N(s),k(e,"class","message__status-line for-loading has-pos-top")},m(u,c){w(u,e,c),f(e,n),q(i,n,null),f(n,o),f(n,r),f(r,l),a=!0},p(u,c){(!a||c[0]&32768)&&s!==(s=u[15]("Loading...")+"")&&M(l,s)},i(u){a||(v(i.$$.fragment,u),a=!0)},o(u){S(i.$$.fragment,u),a=!1},d(u){u&&$(e),W(i)}}}function Il(t){let e,n,i,o,r,s=t[15]("Started chatting on %1",t[5].historyStartAt.getHumanDate())+"",l,a;return i=new be({props:{name:"calendar-alt"}}),{c(){e=g("div"),n=g("span"),G(i.$$.fragment),o=C(),r=g("i"),l=N(s),k(e,"class","message__status-line for-start-of-history")},m(u,c){w(u,e,c),f(e,n),q(i,n,null),f(n,o),f(n,r),f(r,l),a=!0},p(u,c){(!a||c[0]&32800)&&s!==(s=u[15]("Started chatting on %1",u[5].historyStartAt.getHumanDate())+"")&&M(l,s)},i(u){a||(v(i.$$.fragment,u),a=!0)},o(u){S(i.$$.fragment,u),a=!1},d(u){u&&$(e),W(i)}}}function Pl(t){let e,n,i,o,r,s=t[43].ts.getHumanDate()+"",l,a;return i=new be({props:{name:"calendar-alt"}}),{c(){e=g("div"),n=g("span"),G(i.$$.fragment),o=C(),r=g("i"),l=N(s),k(e,"class","message__status-line for-day-changed")},m(u,c){w(u,e,c),f(e,n),q(i,n,null),f(n,o),f(n,r),f(r,l),a=!0},p(u,c){(!a||c[0]&524288)&&s!==(s=u[43].ts.getHumanDate()+"")&&M(l,s)},i(u){a||(v(i.$$.fragment,u),a=!0)},o(u){S(i.$$.fragment,u),a=!1},d(u){u&&$(e),W(i)}}}function Dl(t){let e,n,i,o,r=t[15]("New messages")+"",s,l;return i=new be({props:{name:"comments"}}),{c(){e=g("div"),n=g("span"),G(i.$$.fragment),o=C(),s=N(r),k(e,"class","message__status-line for-last-read")},m(a,u){w(a,e,u),f(e,n),q(i,n,null),f(n,o),f(n,s),l=!0},p(a,u){(!l||u[0]&32768)&&r!==(r=a[15]("New messages")+"")&&M(s,r)},i(a){l||(v(i.$$.fragment,a),l=!0)},o(a){S(i.$$.fragment,a),l=!1},d(a){a&&$(e),W(i)}}}function Ul(t){let e,n,i,o,r=t[43].dayChanged&&Pl(t),s=t[45]&&t[45]===t[19].length-t[5].unread&&Dl(t);return i=new wh({props:{conversation:t[3],message:t[43]}}),i.$on("mention",t[29]),{c(){r&&r.c(),e=C(),s&&s.c(),n=C(),G(i.$$.fragment)},m(l,a){r&&r.m(l,a),w(l,e,a),s&&s.m(l,a),w(l,n,a),q(i,l,a),o=!0},p(l,a){l[43].dayChanged?r?(r.p(l,a),a[0]&524288&&v(r,1)):(r=Pl(l),r.c(),v(r,1),r.m(e.parentNode,e)):r&&(Ce(),S(r,1,1,()=>{r=null}),Ae()),l[45]&&l[45]===l[19].length-l[5].unread?s?(s.p(l,a),a[0]&524320&&v(s,1)):(s=Dl(l),s.c(),v(s,1),s.m(n.parentNode,n)):s&&(Ce(),S(s,1,1,()=>{s=null}),Ae());const u={};a[0]&8&&(u.conversation=l[3]),a[0]&524288&&(u.message=l[43]),i.$set(u)},i(l){o||(v(r),v(s),v(i.$$.fragment,l),o=!0)},o(l){S(r),S(s),S(i.$$.fragment,l),o=!1},d(l){r&&r.d(l),l&&$(e),s&&s.d(l),l&&$(n),W(i,l)}}}function F_(t){let e,n,i,o,r=yo(t[16],t[5])+"",s,l;return i=new be({props:{name:"exclamation-triangle"}}),{c(){e=g("div"),n=g("div"),G(i.$$.fragment),o=C(),s=N(r),k(n,"class","message__text"),k(e,"class","message is-highlighted")},m(a,u){w(a,e,u),f(e,n),q(i,n,null),f(n,o),f(n,s),l=!0},p(a,u){(!l||u[0]&65568)&&r!==(r=yo(a[16],a[5])+"")&&M(s,r)},i(a){l||(v(i.$$.fragment,a),l=!0)},o(a){S(i.$$.fragment,a),l=!1},d(a){a&&$(e),W(i)}}}function z_(t){let e,n=t[15]("You are invited to join %1.",t[3].name)+"",i,o,r,s=t[15]("Do you want to join?")+"",l,a,u,c,p,d,h;return c=new qe({props:{href:"#action:join:"+t[14],class:"btn",$$slots:{default:[G_]},$$scope:{ctx:t}}}),c.$on("click",t[1]),d=new qe({props:{href:"#action:close:"+t[14],class:"btn is-secondary",$$slots:{default:[K_]},$$scope:{ctx:t}}}),d.$on("click",t[2]),{c(){e=g("h2"),i=N(n),o=C(),r=g("p"),l=N(s),a=C(),u=g("p"),G(c.$$.fragment),p=C(),G(d.$$.fragment)},m(m,_){w(m,e,_),f(e,i),w(m,o,_),w(m,r,_),f(r,l),w(m,a,_),w(m,u,_),q(c,u,null),f(u,p),q(d,u,null),h=!0},p(m,_){(!h||_[0]&32776)&&n!==(n=m[15]("You are invited to join %1.",m[3].name)+"")&&M(i,n),(!h||_[0]&32768)&&s!==(s=m[15]("Do you want to join?")+"")&&M(l,s);const y={};_[0]&16384&&(y.href="#action:join:"+m[14]),_[0]&32768|_[1]&32768&&(y.$$scope={dirty:_,ctx:m}),c.$set(y);const b={};_[0]&16384&&(b.href="#action:close:"+m[14]),_[0]&32768|_[1]&32768&&(b.$$scope={dirty:_,ctx:m}),d.$set(b)},i(m){h||(v(c.$$.fragment,m),v(d.$$.fragment,m),h=!0)},o(m){S(c.$$.fragment,m),S(d.$$.fragment,m),h=!1},d(m){m&&$(e),m&&$(o),m&&$(r),m&&$(a),m&&$(u),W(c),W(d)}}}function H_(t){let e,n,i,o,r,s=t[20]("Disconnected. Your connection %1 can be edited in [settings](%2).",t[16].name,"/chat/"+t[16].connection_id+"#settings")+"",l,a,u;return i=new be({props:{name:"exclamation-triangle"}}),{c(){e=g("div"),n=g("div"),G(i.$$.fragment),o=C(),r=new Tt(!1),r.a=null,k(n,"class","message__text"),k(e,"class","message is-highlighted")},m(c,p){w(c,e,p),f(e,n),q(i,n,null),f(n,o),r.m(s,n),l=!0,a||(u=Se(e,"click",vt.toggle),a=!0)},p(c,p){(!l||p[0]&1114112)&&s!==(s=c[20]("Disconnected. Your connection %1 can be edited in [settings](%2).",c[16].name,"/chat/"+c[16].connection_id+"#settings")+"")&&r.p(s)},i(c){l||(v(i.$$.fragment,c),l=!0)},o(c){S(i.$$.fragment,c),l=!1},d(c){c&&$(e),W(i),a=!1,u()}}}function q_(t){let e,n=t[15]("You are not part of this conversation.")+"",i,o,r,s=t[15]('Do you want to chat with "%1"?',t[5].name)+"",l,a,u,c,p,d,h;return c=new qe({props:{href:"#action:join:"+t[14],class:"btn",$$slots:{default:[Y_]},$$scope:{ctx:t}}}),c.$on("click",t[1]),d=new qe({props:{href:"/settings/conversation",class:"btn is-secondary",$$slots:{default:[V_]},$$scope:{ctx:t}}}),{c(){e=g("h2"),i=N(n),o=C(),r=g("p"),l=N(s),a=C(),u=g("p"),G(c.$$.fragment),p=C(),G(d.$$.fragment)},m(m,_){w(m,e,_),f(e,i),w(m,o,_),w(m,r,_),f(r,l),w(m,a,_),w(m,u,_),q(c,u,null),f(u,p),q(d,u,null),h=!0},p(m,_){(!h||_[0]&32768)&&n!==(n=m[15]("You are not part of this conversation.")+"")&&M(i,n),(!h||_[0]&32800)&&s!==(s=m[15]('Do you want to chat with "%1"?',m[5].name)+"")&&M(l,s);const y={};_[0]&16384&&(y.href="#action:join:"+m[14]),_[0]&32768|_[1]&32768&&(y.$$scope={dirty:_,ctx:m}),c.$set(y);const b={};_[0]&32768|_[1]&32768&&(b.$$scope={dirty:_,ctx:m}),d.$set(b)},i(m){h||(v(c.$$.fragment,m),v(d.$$.fragment,m),h=!0)},o(m){S(c.$$.fragment,m),S(d.$$.fragment,m),h=!1},d(m){m&&$(e),m&&$(o),m&&$(r),m&&$(a),m&&$(u),W(c),W(d)}}}function W_(t){let e,n=t[15]("Connection does not exist.")+"",i,o,r,s=t[15]('Do you want to create the connection "%1"?',t[16].connection_id)+"",l,a,u,c,p,d,h;return c=new qe({props:{href:"/settings/connections?uri="+encodeURIComponent(t[23](t[5])),class:"btn",$$slots:{default:[Z_]},$$scope:{ctx:t}}}),d=new qe({props:{href:"/settings/connections",class:"btn is-secondary",$$slots:{default:[J_]},$$scope:{ctx:t}}}),{c(){e=g("h2"),i=N(n),o=C(),r=g("p"),l=N(s),a=C(),u=g("p"),G(c.$$.fragment),p=C(),G(d.$$.fragment)},m(m,_){w(m,e,_),f(e,i),w(m,o,_),w(m,r,_),f(r,l),w(m,a,_),w(m,u,_),q(c,u,null),f(u,p),q(d,u,null),h=!0},p(m,_){(!h||_[0]&32768)&&n!==(n=m[15]("Connection does not exist.")+"")&&M(i,n),(!h||_[0]&98304)&&s!==(s=m[15]('Do you want to create the connection "%1"?',m[16].connection_id)+"")&&M(l,s);const y={};_[0]&32&&(y.href="/settings/connections?uri="+encodeURIComponent(m[23](m[5]))),_[0]&32768|_[1]&32768&&(y.$$scope={dirty:_,ctx:m}),c.$set(y);const b={};_[0]&32768|_[1]&32768&&(b.$$scope={dirty:_,ctx:m}),d.$set(b)},i(m){h||(v(c.$$.fragment,m),v(d.$$.fragment,m),h=!0)},o(m){S(c.$$.fragment,m),S(d.$$.fragment,m),h=!1},d(m){m&&$(e),m&&$(o),m&&$(r),m&&$(a),m&&$(u),W(c),W(d)}}}function G_(t){let e,n,i,o=t[15]("Yes")+"",r,s;return e=new be({props:{name:"thumbs-up"}}),{c(){G(e.$$.fragment),n=C(),i=g("span"),r=N(o)},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a[0]&32768)&&o!==(o=l[15]("Yes")+"")&&M(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){W(e,l),l&&$(n),l&&$(i)}}}function K_(t){let e,n,i,o=t[15]("No")+"",r,s;return e=new be({props:{name:"thumbs-down"}}),{c(){G(e.$$.fragment),n=C(),i=g("span"),r=N(o)},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a[0]&32768)&&o!==(o=l[15]("No")+"")&&M(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){W(e,l),l&&$(n),l&&$(i)}}}function Y_(t){let e,n,i,o=t[15]("Yes")+"",r,s;return e=new be({props:{name:"thumbs-up"}}),{c(){G(e.$$.fragment),n=C(),i=g("span"),r=N(o)},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a[0]&32768)&&o!==(o=l[15]("Yes")+"")&&M(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){W(e,l),l&&$(n),l&&$(i)}}}function V_(t){let e,n,i,o=t[15]("No")+"",r,s;return e=new be({props:{name:"thumbs-down"}}),{c(){G(e.$$.fragment),n=C(),i=g("span"),r=N(o)},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a[0]&32768)&&o!==(o=l[15]("No")+"")&&M(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){W(e,l),l&&$(n),l&&$(i)}}}function Z_(t){let e,n,i=t[15]("Yes")+"",o,r;return e=new be({props:{name:"thumbs-up"}}),{c(){G(e.$$.fragment),n=C(),o=N(i)},m(s,l){q(e,s,l),w(s,n,l),w(s,o,l),r=!0},p(s,l){(!r||l[0]&32768)&&i!==(i=s[15]("Yes")+"")&&M(o,i)},i(s){r||(v(e.$$.fragment,s),r=!0)},o(s){S(e.$$.fragment,s),r=!1},d(s){W(e,s),s&&$(n),s&&$(o)}}}function J_(t){let e,n,i=t[15]("No")+"",o,r;return e=new be({props:{name:"thumbs-down"}}),{c(){G(e.$$.fragment),n=C(),o=N(i)},m(s,l){q(e,s,l),w(s,n,l),w(s,o,l),r=!0},p(s,l){(!r||l[0]&32768)&&i!==(i=s[15]("No")+"")&&M(o,i)},i(s){r||(v(e.$$.fragment,s),r=!0)},o(s){S(e.$$.fragment,s),r=!1},d(s){W(e,s),s&&$(n),s&&$(o)}}}function Bl(t){let e,n,i=t[15]("Uploading %1...",t[11].file.name)+"",o,r,s,l,a,u,c,p;return{c(){e=g("div"),n=g("div"),o=N(i),r=C(),s=g("div"),l=g("div"),a=N(t[12]),u=N("%"),k(l,"class","progress__bar"),Pt(l,"width",t[12]+"%"),k(s,"class","progress"),k(e,"class","message")},m(d,h){w(d,e,h),f(e,n),f(n,o),f(e,r),f(e,s),f(s,l),f(l,a),f(l,u),p=!0},p(d,h){(!p||h[0]&34816)&&i!==(i=d[15]("Uploading %1...",d[11].file.name)+"")&&M(o,i),(!p||h[0]&4096)&&M(a,d[12]),(!p||h[0]&4096)&&Pt(l,"width",d[12]+"%")},i(d){p||(ut(()=>{c||(c=tt(e,Dt,{duration:200},!0)),c.run(1)}),p=!0)},o(d){c||(c=tt(e,Dt,{duration:200},!1)),c.run(0),p=!1},d(d){d&&$(e),d&&c&&c.end()}}}function Q_(t){let e,n,i,o,r,s=t[20]('Go to "[account settings](%1)" to enable or disable notifications.',"/settings/account")+"",l;return i=new be({props:{name:"info-circle"}}),{c(){e=g("div"),n=g("div"),G(i.$$.fragment),o=C(),r=new Tt(!1),r.a=null,k(n,"class","message__text"),k(e,"class","message is-highlighted")},m(a,u){w(a,e,u),f(e,n),q(i,n,null),f(n,o),r.m(s,n),l=!0},p(a,u){(!l||u[0]&1048576)&&s!==(s=a[20]('Go to "[account settings](%1)" to enable or disable notifications.',"/settings/account")+"")&&r.p(s)},i(a){l||(v(i.$$.fragment,a),l=!0)},o(a){S(i.$$.fragment,a),l=!1},d(a){a&&$(e),W(i)}}}function jl(t){let e,n,i,o,r,s=t[15]("Loading...")+"",l,a;return i=new be({props:{name:"spinner",animation:"spin"}}),{c(){e=g("div"),n=g("span"),G(i.$$.fragment),o=C(),r=g("i"),l=N(s),k(e,"class","message__status-line for-loading has-pos-bottom")},m(u,c){w(u,e,c),f(e,n),q(i,n,null),f(n,o),f(n,r),f(r,l),a=!0},p(u,c){(!a||c[0]&32768)&&s!==(s=u[15]("Loading...")+"")&&M(l,s)},i(u){a||(v(i.$$.fragment,u),a=!0)},o(u){S(i.$$.fragment,u),a=!1},d(u){u&&$(e),W(i)}}}function Fl(t){let e,n,i,o,r=t[15]("Jump to %1",t[8].format("%b %e %H:%M"))+"",s,l,a;return i=new be({props:{name:"external-link-alt"}}),{c(){e=g("div"),n=g("a"),G(i.$$.fragment),o=C(),s=N(r),k(n,"href",l=t[3].path),k(e,"class","message__status-line for-jump-to-now")},m(u,c){w(u,e,c),f(e,n),q(i,n,null),f(n,o),f(n,s),a=!0},p(u,c){(!a||c[0]&33024)&&r!==(r=u[15]("Jump to %1",u[8].format("%b %e %H:%M"))+"")&&M(s,r),(!a||c[0]&8&&l!==(l=u[3].path))&&k(n,"href",l)},i(u){a||(v(i.$$.fragment,u),a=!0)},o(u){S(i.$$.fragment,u),a=!1},d(u){u&&$(e),W(i)}}}function X_(t){let e=t[19].length<10&&!t[5].is("not_found"),n,i=t[5].is("loading")&&t[19].length>10,o,r=t[5].historyStartAt&&!t[5].is("not_found")&&t[19].length,s,l,a,u,c,p,d,h,m,_,y,b,E=t[5].is("loading"),R,j,D,A=e&&Ml(t),T=i&&Ll(t),P=r&&Il(t),U=t[19].render(),B=[];for(let H=0;H<U.length;H+=1)B[H]=Ul(Nl(t,U,H));const F=H=>S(B[H],1,1,()=>{B[H]=null}),I=[W_,q_,H_,z_,F_],z=[];function x(H,V){return V[0]&65536&&(a=null),V[0]&32&&(u=null),V[0]&65536&&(c=null),V[0]&32&&(p=null),V[0]&32&&(d=null),a==null&&(a=!!H[16].is("not_found")),a?0:(u==null&&(u=!!H[5].is("not_found")),u?1:(c==null&&(c=!!(!H[16].is("unreachable")&&H[16].frozen)),c?2:(p==null&&(p=!!(H[5].frozen&&H[5].is("pending"))),p?3:(d==null&&(d=!!(H[5].frozen&&!H[5].is("locked"))),d?4:-1))))}~(h=x(t,[-1,-1]))&&(m=z[h]=I[h](t));let J=t[12]&&Bl(t),O=_t.wantNotifications===null&&Q_(t),L=E&&jl(t),Y=!t[5].historyStopAt&&t[19].length&&Fl(t);return{c(){A&&A.c(),n=C(),T&&T.c(),o=C(),P&&P.c(),s=C();for(let H=0;H<B.length;H+=1)B[H].c();l=C(),m&&m.c(),_=C(),J&&J.c(),y=C(),O&&O.c(),b=C(),L&&L.c(),R=C(),Y&&Y.c(),j=ct()},m(H,V){A&&A.m(H,V),w(H,n,V),T&&T.m(H,V),w(H,o,V),P&&P.m(H,V),w(H,s,V);for(let Z=0;Z<B.length;Z+=1)B[Z].m(H,V);w(H,l,V),~h&&z[h].m(H,V),w(H,_,V),J&&J.m(H,V),w(H,y,V),O&&O.m(H,V),w(H,b,V),L&&L.m(H,V),w(H,R,V),Y&&Y.m(H,V),w(H,j,V),D=!0},p(H,V){if(V[0]&524320&&(e=H[19].length<10&&!H[5].is("not_found")),e?A?(A.p(H,V),V[0]&524320&&v(A,1)):(A=Ml(H),A.c(),v(A,1),A.m(n.parentNode,n)):A&&(Ce(),S(A,1,1,()=>{A=null}),Ae()),V[0]&524320&&(i=H[5].is("loading")&&H[19].length>10),i?T?(T.p(H,V),V[0]&524320&&v(T,1)):(T=Ll(H),T.c(),v(T,1),T.m(o.parentNode,o)):T&&(Ce(),S(T,1,1,()=>{T=null}),Ae()),V[0]&524320&&(r=H[5].historyStartAt&&!H[5].is("not_found")&&H[19].length),r?P?(P.p(H,V),V[0]&524320&&v(P,1)):(P=Il(H),P.c(),v(P,1),P.m(s.parentNode,s)):P&&(Ce(),S(P,1,1,()=>{P=null}),Ae()),V[0]&558120){U=H[19].render();let K;for(K=0;K<U.length;K+=1){const re=Nl(H,U,K);B[K]?(B[K].p(re,V),v(B[K],1)):(B[K]=Ul(re),B[K].c(),v(B[K],1),B[K].m(l.parentNode,l))}for(Ce(),K=U.length;K<B.length;K+=1)F(K);Ae()}let Z=h;h=x(H,V),h===Z?~h&&z[h].p(H,V):(m&&(Ce(),S(z[Z],1,1,()=>{z[Z]=null}),Ae()),~h?(m=z[h],m?m.p(H,V):(m=z[h]=I[h](H),m.c()),v(m,1),m.m(_.parentNode,_)):m=null),H[12]?J?(J.p(H,V),V[0]&4096&&v(J,1)):(J=Bl(H),J.c(),v(J,1),J.m(y.parentNode,y)):J&&(Ce(),S(J,1,1,()=>{J=null}),Ae()),_t.wantNotifications===null&&O.p(H,V),V[0]&32&&(E=H[5].is("loading")),E?L?(L.p(H,V),V[0]&32&&v(L,1)):(L=jl(H),L.c(),v(L,1),L.m(R.parentNode,R)):L&&(Ce(),S(L,1,1,()=>{L=null}),Ae()),!H[5].historyStopAt&&H[19].length?Y?(Y.p(H,V),V[0]&524320&&v(Y,1)):(Y=Fl(H),Y.c(),v(Y,1),Y.m(j.parentNode,j)):Y&&(Ce(),S(Y,1,1,()=>{Y=null}),Ae())},i(H){if(!D){v(A),v(T),v(P);for(let V=0;V<U.length;V+=1)v(B[V]);v(m),v(J),v(O),v(L),v(Y),D=!0}},o(H){S(A),S(T),S(P),B=B.filter(Boolean);for(let V=0;V<B.length;V+=1)S(B[V]);S(m),S(J),S(O),S(L),S(Y),D=!1},d(H){A&&A.d(H),H&&$(n),T&&T.d(H),H&&$(o),P&&P.d(H),H&&$(s),$t(B,H),H&&$(l),~h&&z[h].d(H),H&&$(_),J&&J.d(H),H&&$(y),O&&O.d(H),H&&$(b),L&&L.d(H),H&&$(R),Y&&Y.d(H),H&&$(j)}}}function zl(t){let e,n,i=t[15]("Participants (%1)",t[21].length)+"",o,r,s,l,a,u,c=t[5].is("private")&&t[5].info.nick,p,d,h;const m=[eg,x_],_=[];function y(E,R){return E[21].length?0:1}l=y(t),a=_[l]=m[l](t);let b=c&&ql(t);return{c(){e=g("div"),n=g("h3"),o=N(i),r=C(),s=g("nav"),a.c(),u=C(),b&&b.c(),k(s,"class","sidebar-right__nav"),k(e,"class","sidebar-right")},m(E,R){w(E,e,R),f(e,n),f(n,o),f(e,r),f(e,s),_[l].m(s,null),f(e,u),b&&b.m(e,null),p=!0,d||(h=Se(s,"click",t[1]),d=!0)},p(E,R){(!p||R[0]&2129920)&&i!==(i=E[15]("Participants (%1)",E[21].length)+"")&&M(o,i);let j=l;l=y(E),l===j?_[l].p(E,R):(Ce(),S(_[j],1,1,()=>{_[j]=null}),Ae(),a=_[l],a?a.p(E,R):(a=_[l]=m[l](E),a.c()),v(a,1),a.m(s,null)),R[0]&32&&(c=E[5].is("private")&&E[5].info.nick),c?b?b.p(E,R):(b=ql(E),b.c(),b.m(e,null)):b&&(b.d(1),b=null)},i(E){p||(v(a),p=!0)},o(E){S(a),p=!1},d(E){E&&$(e),_[l].d(),b&&b.d(),d=!1,h()}}}function x_(t){let e,n,i,o=t[15]("Settings")+"",r,s,l,a;return n=new be({props:{name:"users-cog"}}),{c(){e=g("a"),G(n.$$.fragment),i=C(),r=N(o),k(e,"href","#settings")},m(u,c){w(u,e,c),q(n,e,null),f(e,i),f(e,r),s=!0,l||(a=Se(e,"click",vt.toggle),l=!0)},p(u,c){(!s||c[0]&32768)&&o!==(o=u[15]("Settings")+"")&&M(r,o)},i(u){s||(v(n.$$.fragment,u),s=!0)},o(u){S(n.$$.fragment,u),s=!1},d(u){u&&$(e),W(n),l=!1,a()}}}function eg(t){let e,n,i=t[21].toArray(),o=[];for(let s=0;s<i.length;s+=1)o[s]=Hl(Ol(t,i,s));const r=s=>S(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=ct()},m(s,l){for(let a=0;a<o.length;a+=1)o[a].m(s,l);w(s,e,l),n=!0},p(s,l){if(l[0]&2097152){i=s[21].toArray();let a;for(a=0;a<i.length;a+=1){const u=Ol(s,i,a);o[a]?(o[a].p(u,l),v(o[a],1)):(o[a]=Hl(u),o[a].c(),v(o[a],1),o[a].m(e.parentNode,e))}for(Ce(),a=i.length;a<o.length;a+=1)r(a);Ae()}},i(s){if(!n){for(let l=0;l<i.length;l+=1)v(o[l]);n=!0}},o(s){o=o.filter(Boolean);for(let l=0;l<o.length;l+=1)S(o[l]);n=!1},d(s){$t(o,s),s&&$(e)}}}function Hl(t){let e,n,i,o,r=t[40].nick+"",s,l,a,u,c;return n=new be({props:{name:"pick:"+t[40].nick,family:"solid",color:t[40].color}}),{c(){e=g("a"),G(n.$$.fragment),i=C(),o=g("span"),s=N(r),l=C(),k(e,"href",a="#action:join:"+t[40].nick),k(e,"class",u="participant "+_o(t[40].modes))},m(p,d){w(p,e,d),q(n,e,null),f(e,i),f(e,o),f(o,s),f(e,l),c=!0},p(p,d){const h={};d[0]&2097152&&(h.name="pick:"+p[40].nick),d[0]&2097152&&(h.color=p[40].color),n.$set(h),(!c||d[0]&2097152)&&r!==(r=p[40].nick+"")&&M(s,r),(!c||d[0]&2097152&&a!==(a="#action:join:"+p[40].nick))&&k(e,"href",a),(!c||d[0]&2097152&&u!==(u="participant "+_o(p[40].modes)))&&k(e,"class",u)},i(p){c||(v(n.$$.fragment,p),c=!0)},o(p){S(n.$$.fragment,p),c=!1},d(p){p&&$(e),W(n)}}}function ql(t){let e,n=t[15]("Information")+"",i,o,r,s=t[20](...Pi(t[5].info))+"";return{c(){e=g("h3"),i=N(n),o=C(),r=g("p")},m(l,a){w(l,e,a),f(e,i),w(l,o,a),w(l,r,a),r.innerHTML=s},p(l,a){a[0]&32768&&n!==(n=l[15]("Information")+"")&&M(i,n),a[0]&1048608&&s!==(s=l[20](...Pi(l[5].info))+"")&&(r.innerHTML=s)},d(l){l&&$(e),l&&$(o),l&&$(r)}}}function tg(t){let e,n,i,o,r,s,l,a,u,c,p,d=t[18].hasRightColumn&&!t[5].is("not_found"),h,m,_,y;e=new Ut({props:{$$slots:{default:[L_]},$$scope:{ctx:t}}});let b=t[17]==="settings"&&Rl(t);o=new Kr({props:{class:"main is-above-chat-input",$$slots:{default:[X_]},$$scope:{ctx:t}}}),o.$on("scrolled",t[30]),o.$on("visibility",t[31]);function E(P){t[32](P)}function R(P){t[33](P)}function j(P){t[34](P)}function D(P){t[35](P)}let A={conversation:t[3]};t[10]!==void 0&&(A.fillIn=t[10]),t[9]!==void 0&&(A.focus=t[9]),t[11]!==void 0&&(A.uploader=t[11]),t[12]!==void 0&&(A.uploadProgress=t[12]),s=new Du({props:A}),me.push(()=>$e(s,"fillIn",E)),me.push(()=>$e(s,"focus",R)),me.push(()=>$e(s,"uploader",j)),me.push(()=>$e(s,"uploadProgress",D));let T=d&&zl(t);return{c(){G(e.$$.fragment),n=C(),b&&b.c(),i=C(),G(o.$$.fragment),r=C(),G(s.$$.fragment),p=C(),T&&T.c(),h=ct()},m(P,U){q(e,P,U),w(P,n,U),b&&b.m(P,U),w(P,i,U),q(o,P,U),w(P,r,U),q(s,P,U),w(P,p,U),T&&T.m(P,U),w(P,h,U),m=!0,_||(y=Se(window,"focus",t[24]),_=!0)},p(P,U){const B={};U[0]&229416|U[1]&32768&&(B.$$scope={dirty:U,ctx:P}),e.$set(B),P[17]==="settings"?b?(b.p(P,U),U[0]&131072&&v(b,1)):(b=Rl(P),b.c(),v(b,1),b.m(i.parentNode,i)):b&&(Ce(),S(b,1,1,()=>{b=null}),Ae());const F={};U[0]&3792168|U[1]&32768&&(F.$$scope={dirty:U,ctx:P}),o.$set(F);const I={};U[0]&8&&(I.conversation=P[3]),!l&&U[0]&1024&&(l=!0,I.fillIn=P[10],ve(()=>l=!1)),!a&&U[0]&512&&(a=!0,I.focus=P[9],ve(()=>a=!1)),!u&&U[0]&2048&&(u=!0,I.uploader=P[11],ve(()=>u=!1)),!c&&U[0]&4096&&(c=!0,I.uploadProgress=P[12],ve(()=>c=!1)),s.$set(I),U[0]&262176&&(d=P[18].hasRightColumn&&!P[5].is("not_found")),d?T?(T.p(P,U),U[0]&262176&&v(T,1)):(T=zl(P),T.c(),v(T,1),T.m(h.parentNode,h)):T&&(Ce(),S(T,1,1,()=>{T=null}),Ae())},i(P){m||(v(e.$$.fragment,P),v(b),v(o.$$.fragment,P),v(s.$$.fragment,P),v(T),m=!0)},o(P){S(e.$$.fragment,P),S(b),S(o.$$.fragment,P),S(s.$$.fragment,P),S(T),m=!1},d(P){W(e,P),P&&$(n),b&&b.d(P),P&&$(i),W(o,P),P&&$(r),W(s,P),P&&$(p),T&&T.d(P),P&&$(h),_=!1,y()}}}function ng(t,e,n){let i,o,r=Le,s=()=>(r(),r=St(I,X=>n(5,o=X)),I),l,a,u,c,p=Le,d=()=>(p(),p=St(F,X=>n(16,c=X)),F),h,m,_,y=Le,b=()=>(y(),y=St(z,X=>n(19,_=X)),z),E,R,j=Le,D=()=>(j(),j=St(x,X=>n(21,R=X)),x);Ee(t,Be,X=>n(27,l=X)),Ee(t,lt,X=>n(15,u=X)),Ee(t,vt,X=>n(17,h=X)),Ee(t,Ii,X=>n(18,m=X)),Ee(t,jt,X=>n(20,E=X)),t.$$.on_destroy.push(()=>r()),t.$$.on_destroy.push(()=>p()),t.$$.on_destroy.push(()=>y()),t.$$.on_destroy.push(()=>j());let{connection_id:A=""}=e,{conversation_id:T=""}=e,{title:P="Chat"}=e;const U=new O_,B=pt("user");Ee(t,B,X=>n(28,a=X));let F=B.notifications;d();let I=B.notifications;s();let z=I.messages;b();let x=I.participants;D();let J=new bt,O={},L,Y,H,V,Z="";Bt(()=>U.attach(document.querySelector(".main"),H)),Rr(()=>{Object.keys(O).forEach(X=>O[X]()),U.detach()});function K(X){X.preventDefault();const ge=X.target.closest("a");I.send("/join "+decodeURIComponent(ge.hash.replace(/^#?action:join:/,"")))}function re(X){X.preventDefault(),I.send("/close "+I.conversation_id),Be.go("/settings/conversation")}function de(){const[X,ge]=o.connection_id.split("-");return X+"://"+ge+"/"+i+"?tls=1"}function ie(){(I.notifications||I.unread)&&I.markAsRead()}function he(X,ge){I.connection_id===X&&I.conversation_id===ge||B.setActiveConversation({connection_id:X,conversation_id:ge})}function Te(X){if(X.activeConversation!==I){if(O.conversation&&O.conversation(),O.unread&&O.unread(),s(n(3,I=X.activeConversation)),b(n(4,z=I.messages)),D(n(7,x=I.participants)),d(n(6,F=X.findConversation({connection_id:I.connection_id})||I)),n(8,J=new bt),O.conversation=I.subscribe(ge=>{s(n(3,I=ge))}),O.unread=()=>I.update({unread:0}),I.markAsRead(),n(13,Z=yh(Be.hash)&&Be.hash||""),Z)return I.load({around:Z});if(!I.historyStopAt)return I.load({around:J.toISOString()})}}const ce=X=>Y(X.detail),ke=X=>Dm(X,{conversation:I}),Ie=X=>Um(X,{conversation:I,timestampFromUrl:Z});function De(X){Y=X,n(10,Y)}function Ne(X){L=X,n(9,L)}function Me(X){H=X,n(11,H)}function je(X){V=X,n(12,V)}return t.$$set=X=>{"connection_id"in X&&n(26,A=X.connection_id),"conversation_id"in X&&n(0,T=X.conversation_id),"title"in X&&n(25,P=X.title)},t.$$.update=()=>{t.$$.dirty[0]&67108865&&he(A,T),t.$$.dirty[0]&268435456&&Te(a),t.$$.dirty[0]&268435472&&z.update({expandUrlToMedia:a.expandUrlToMedia}),t.$$.dirty[0]&32&&n(14,i=encodeURIComponent(o.name)),t.$$.dirty[0]&32&&n(25,P=o.title),t.$$.dirty[0]&134217768&&!l.hash&&!o.historyStopAt&&I.load({})},[T,K,re,I,z,o,F,x,J,L,Y,H,V,Z,i,u,c,h,m,_,E,R,B,de,ie,P,A,l,a,ce,ke,Ie,De,Ne,Me,je]}class ig extends Xe{constructor(e){super(),Qe(this,e,ng,tg,Ze,{connection_id:26,conversation_id:0,title:25,conversationJoin:1,conversationClose:2},null,[-1,-1])}get conversationJoin(){return this.$$.ctx[1]}get conversationClose(){return this.$$.ctx[2]}}function og(t){let e;const n=t[5].default,i=qt(n,t,t[4],null);return{c(){i&&i.c()},m(o,r){i&&i.m(o,r),e=!0},p(o,r){i&&i.p&&(!e||r&16)&&Gt(i,n,o,o[4],e?Wt(n,o[4],r,null):Kt(o[4]),null)},i(o){e||(v(i,o),e=!0)},o(o){S(i,o),e=!1},d(o){i&&i.d(o)}}}function rg(t){let e=t[3]("Loading...")+"",n;return{c(){n=N(e)},m(i,o){w(i,n,o)},p(i,o){o&8&&e!==(e=i[3]("Loading...")+"")&&M(n,e)},i:Le,o:Le,d(i){i&&$(n)}}}function sg(t){let e,n=t[3](t[2].error())+"",i;return{c(){e=g("div"),i=N(n),k(e,"class","error")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&12&&n!==(n=o[3](o[2].error())+"")&&M(i,n)},i:Le,o:Le,d(o){o&&$(e)}}}function lg(t){let e,n,i,o,r,s,l;const a=[sg,rg,og],u=[];function c(p,d){return d&4&&(i=null),d&4&&(o=null),i==null&&(i=!!p[2].is("error")),i?0:(o==null&&(o=!!p[2].is("loading")),o?1:2)}return r=c(t,-1),s=u[r]=a[r](t),{c(){e=g("tr"),n=g("td"),s.c(),k(n,"colspan",t[0])},m(p,d){w(p,e,d),f(e,n),u[r].m(n,null),l=!0},p(p,[d]){let h=r;r=c(p,d),r===h?u[r].p(p,d):(Ce(),S(u[h],1,1,()=>{u[h]=null}),Ae(),s=u[r],s?s.p(p,d):(s=u[r]=a[r](p),s.c()),v(s,1),s.m(n,null)),(!l||d&1)&&k(n,"colspan",p[0])},i(p){l||(v(s),l=!0)},o(p){S(s),l=!1},d(p){p&&$(e),u[r].d()}}}function ag(t,e,n){let i,o=Le,r=()=>(o(),o=St(c,p=>n(2,i=p)),c),s;Ee(t,lt,p=>n(3,s=p)),t.$$.on_destroy.push(()=>o());let{$$slots:l={},$$scope:a}=e,{colspan:u=1}=e,{op:c}=e;return r(),t.$$set=p=>{"colspan"in p&&n(0,u=p.colspan),"op"in p&&r(n(1,c=p.op)),"$$scope"in p&&n(4,a=p.$$scope)},[u,c,i,s,a,l]}class No extends Xe{constructor(e){super(),Qe(this,e,ag,lg,Ze,{colspan:0,op:1})}}function Wl(t,e,n){const i=t.slice();return i[9]=e[n],i}function Gl(t,e,n){const i=t.slice();return i[12]=e[n],i}function ug(t){let e,n=t[2]("Connections")+"",i;return{c(){e=g("h1"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Connections")+"")&&M(i,n)},d(o){o&&$(e)}}}function fg(t){let e=t[12].host.replace(/:\d+$/,"")+"",n;return{c(){n=N(e)},m(i,o){w(i,n,o)},p(i,o){o&1&&e!==(e=i[12].host.replace(/:\d+$/,"")+"")&&M(n,e)},d(i){i&&$(n)}}}function Kl(t){let e,n,i,o,r,s=(Ue.true(t[12].tls_verify)?t[2]("Strict"):Ue.true(t[12].tls)?t[2]("Yes"):t[2]("No"))+"",l,a,u,c=t[12].nick+"",p,d,h;return i=new qe({props:{href:"/settings/connection/"+t[12].connection_id,$$slots:{default:[fg]},$$scope:{ctx:t}}}),{c(){e=g("tr"),n=g("td"),G(i.$$.fragment),o=C(),r=g("td"),l=N(s),a=C(),u=g("td"),p=N(c),d=C()},m(m,_){w(m,e,_),f(e,n),q(i,n,null),f(e,o),f(e,r),f(r,l),f(e,a),f(e,u),f(u,p),f(e,d),h=!0},p(m,_){const y={};_&1&&(y.href="/settings/connection/"+m[12].connection_id),_&32769&&(y.$$scope={dirty:_,ctx:m}),i.$set(y),(!h||_&5)&&s!==(s=(Ue.true(m[12].tls_verify)?m[2]("Strict"):Ue.true(m[12].tls)?m[2]("Yes"):m[2]("No"))+"")&&M(l,s),(!h||_&1)&&c!==(c=m[12].nick+"")&&M(p,c)},i(m){h||(v(i.$$.fragment,m),h=!0)},o(m){S(i.$$.fragment,m),h=!1},d(m){m&&$(e),W(i)}}}function Yl(t){let e,n,i;return n=new qe({props:{href:"/settings/connection/add",class:"btn",$$slots:{default:[cg]},$$scope:{ctx:t}}}),{c(){e=g("div"),G(n.$$.fragment),k(e,"class","form-actions")},m(o,r){w(o,e,r),q(n,e,null),i=!0},p(o,r){const s={};r&32772&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){i||(v(n.$$.fragment,o),i=!0)},o(o){S(n.$$.fragment,o),i=!1},d(o){o&&$(e),W(n)}}}function cg(t){let e,n,i,o=t[2]("Add")+"",r,s;return e=new be({props:{name:"plus-circle"}}),{c(){G(e.$$.fragment),n=C(),i=g("span"),r=N(o)},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a&4)&&o!==(o=l[2]("Add")+"")&&M(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){W(e,l),l&&$(n),l&&$(i)}}}function dg(t){let e=t[9].url.host.replace(/:\d+$/,"")+"",n;return{c(){n=N(e)},m(i,o){w(i,n,o)},p(i,o){o&8&&e!==(e=i[9].url.host.replace(/:\d+$/,"")+"")&&M(n,e)},d(i){i&&$(n)}}}function Vl(t){let e,n,i,o,r,s=(Ue.true(t[9].tls_verify)?t[2]("Strict"):Ue.true(t[9].tls)?t[2]("Yes"):t[2]("No"))+"",l,a,u,c=(t[9].is_default?t[2]("Yes"):t[2]("No"))+"",p,d,h,m=(t[9].is_forced?t[2]("Yes"):t[2]("No"))+"",_,y,b;return i=new qe({props:{href:"/settings/connection-profile/"+t[9].id,$$slots:{default:[dg]},$$scope:{ctx:t}}}),{c(){e=g("tr"),n=g("td"),G(i.$$.fragment),o=C(),r=g("td"),l=N(s),a=C(),u=g("td"),p=N(c),d=C(),h=g("td"),_=N(m),y=C()},m(E,R){w(E,e,R),f(e,n),q(i,n,null),f(e,o),f(e,r),f(r,l),f(e,a),f(e,u),f(u,p),f(e,d),f(e,h),f(h,_),f(e,y),b=!0},p(E,R){const j={};R&8&&(j.href="/settings/connection-profile/"+E[9].id),R&32776&&(j.$$scope={dirty:R,ctx:E}),i.$set(j),(!b||R&12)&&s!==(s=(Ue.true(E[9].tls_verify)?E[2]("Strict"):Ue.true(E[9].tls)?E[2]("Yes"):E[2]("No"))+"")&&M(l,s),(!b||R&12)&&c!==(c=(E[9].is_default?E[2]("Yes"):E[2]("No"))+"")&&M(p,c),(!b||R&12)&&m!==(m=(E[9].is_forced?E[2]("Yes"):E[2]("No"))+"")&&M(_,m)},i(E){b||(v(i.$$.fragment,E),b=!0)},o(E){S(i.$$.fragment,E),b=!1},d(E){E&&$(e),W(i)}}}function Zl(t){let e,n,i;return n=new qe({props:{href:"/settings/connection-profile/add",class:"btn",$$slots:{default:[pg]},$$scope:{ctx:t}}}),{c(){e=g("div"),G(n.$$.fragment),k(e,"class","form-actions")},m(o,r){w(o,e,r),q(n,e,null),i=!0},p(o,r){const s={};r&32772&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){i||(v(n.$$.fragment,o),i=!0)},o(o){S(n.$$.fragment,o),i=!1},d(o){o&&$(e),W(n)}}}function pg(t){let e,n,i,o=t[2]("Add")+"",r,s;return e=new be({props:{name:"plus-circle"}}),{c(){G(e.$$.fragment),n=C(),i=g("span"),r=N(o)},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a&4)&&o!==(o=l[2]("Add")+"")&&M(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){W(e,l),l&&$(n),l&&$(i)}}}function hg(t){let e,n,i,o,r=t[2]("Connections")+"",s,l,a,u,c,p,d=t[2]("Host")+"",h,m,_,y=t[2]("Secure")+"",b,E,R,j=t[2]("Nick")+"",D,A,T,P,U,B,F=t[2]("Connection profiles")+"",I,z,x,J=t[2]("Connection profiles are used to set up global values for every connection that connect to the same host.")+"",O,L,Y,H,V,Z,K=t[2]("Host")+"",re,de,ie,he=t[2]("Secure")+"",Te,ce,ke,Ie=t[2]("Default")+"",De,Ne,Me,je=t[2]("Forced")+"",X,ge,fe,He,Re,oe,ee;e=new Ut({props:{$$slots:{default:[ug]},$$scope:{ctx:t}}});let we=t[0],ye=[];for(let pe=0;pe<we.length;pe+=1)ye[pe]=Kl(Gl(t,we,pe));const ue=pe=>S(ye[pe],1,1,()=>{ye[pe]=null});let te=(t[1]||!t[4].forced_connection)&&Yl(t);He=new No({props:{op:t[5].op}});let se=t[3].search(),ne=[];for(let pe=0;pe<se.length;pe+=1)ne[pe]=Vl(Wl(t,se,pe));const Q=pe=>S(ne[pe],1,1,()=>{ne[pe]=null});let le=t[1]&&Zl(t);return{c(){G(e.$$.fragment),n=C(),i=g("main"),o=g("h2"),s=N(r),l=C(),a=g("table"),u=g("thead"),c=g("tr"),p=g("th"),h=N(d),m=C(),_=g("th"),b=N(y),E=C(),R=g("th"),D=N(j),A=C(),T=g("tbody");for(let pe=0;pe<ye.length;pe+=1)ye[pe].c();P=C(),te&&te.c(),U=C(),B=g("h2"),I=N(F),z=C(),x=g("p"),O=N(J),L=C(),Y=g("table"),H=g("thead"),V=g("tr"),Z=g("th"),re=N(K),de=C(),ie=g("th"),Te=N(he),ce=C(),ke=g("th"),De=N(Ie),Ne=C(),Me=g("th"),X=N(je),ge=C(),fe=g("tbody"),G(He.$$.fragment),Re=C();for(let pe=0;pe<ne.length;pe+=1)ne[pe].c();oe=C(),le&&le.c(),k(i,"class","main")},m(pe,_e){q(e,pe,_e),w(pe,n,_e),w(pe,i,_e),f(i,o),f(o,s),f(i,l),f(i,a),f(a,u),f(u,c),f(c,p),f(p,h),f(c,m),f(c,_),f(_,b),f(c,E),f(c,R),f(R,D),f(a,A),f(a,T);for(let Ye=0;Ye<ye.length;Ye+=1)ye[Ye].m(T,null);f(i,P),te&&te.m(i,null),f(i,U),f(i,B),f(B,I),f(i,z),f(i,x),f(x,O),f(i,L),f(i,Y),f(Y,H),f(H,V),f(V,Z),f(Z,re),f(V,de),f(V,ie),f(ie,Te),f(V,ce),f(V,ke),f(ke,De),f(V,Ne),f(V,Me),f(Me,X),f(Y,ge),f(Y,fe),q(He,fe,null),f(fe,Re);for(let Ye=0;Ye<ne.length;Ye+=1)ne[Ye].m(fe,null);f(i,oe),le&&le.m(i,null),ee=!0},p(pe,[_e]){const Ye={};if(_e&32772&&(Ye.$$scope={dirty:_e,ctx:pe}),e.$set(Ye),(!ee||_e&4)&&r!==(r=pe[2]("Connections")+"")&&M(s,r),(!ee||_e&4)&&d!==(d=pe[2]("Host")+"")&&M(h,d),(!ee||_e&4)&&y!==(y=pe[2]("Secure")+"")&&M(b,y),(!ee||_e&4)&&j!==(j=pe[2]("Nick")+"")&&M(D,j),_e&5){we=pe[0];let Fe;for(Fe=0;Fe<we.length;Fe+=1){const ot=Gl(pe,we,Fe);ye[Fe]?(ye[Fe].p(ot,_e),v(ye[Fe],1)):(ye[Fe]=Kl(ot),ye[Fe].c(),v(ye[Fe],1),ye[Fe].m(T,null))}for(Ce(),Fe=we.length;Fe<ye.length;Fe+=1)ue(Fe);Ae()}if(pe[1]||!pe[4].forced_connection?te?(te.p(pe,_e),_e&2&&v(te,1)):(te=Yl(pe),te.c(),v(te,1),te.m(i,U)):te&&(Ce(),S(te,1,1,()=>{te=null}),Ae()),(!ee||_e&4)&&F!==(F=pe[2]("Connection profiles")+"")&&M(I,F),(!ee||_e&4)&&J!==(J=pe[2]("Connection profiles are used to set up global values for every connection that connect to the same host.")+"")&&M(O,J),(!ee||_e&4)&&K!==(K=pe[2]("Host")+"")&&M(re,K),(!ee||_e&4)&&he!==(he=pe[2]("Secure")+"")&&M(Te,he),(!ee||_e&4)&&Ie!==(Ie=pe[2]("Default")+"")&&M(De,Ie),(!ee||_e&4)&&je!==(je=pe[2]("Forced")+"")&&M(X,je),_e&12){se=pe[3].search();let Fe;for(Fe=0;Fe<se.length;Fe+=1){const ot=Wl(pe,se,Fe);ne[Fe]?(ne[Fe].p(ot,_e),v(ne[Fe],1)):(ne[Fe]=Vl(ot),ne[Fe].c(),v(ne[Fe],1),ne[Fe].m(fe,null))}for(Ce(),Fe=se.length;Fe<ne.length;Fe+=1)Q(Fe);Ae()}pe[1]?le?(le.p(pe,_e),_e&2&&v(le,1)):(le=Zl(pe),le.c(),v(le,1),le.m(i,null)):le&&(Ce(),S(le,1,1,()=>{le=null}),Ae())},i(pe){if(!ee){v(e.$$.fragment,pe);for(let _e=0;_e<we.length;_e+=1)v(ye[_e]);v(te),v(He.$$.fragment,pe);for(let _e=0;_e<se.length;_e+=1)v(ne[_e]);v(le),ee=!0}},o(pe){S(e.$$.fragment,pe),ye=ye.filter(Boolean);for(let _e=0;_e<ye.length;_e+=1)S(ye[_e]);S(te),S(He.$$.fragment,pe),ne=ne.filter(Boolean);for(let _e=0;_e<ne.length;_e+=1)S(ne[_e]);S(le),ee=!1},d(pe){W(e,pe),pe&&$(n),pe&&$(i),$t(ye,pe),te&&te.d(),W(He),$t(ne,pe),le&&le.d()}}}function mg(t,e,n){let i,o,r,s;Ee(t,lt,d=>n(2,r=d));const l="Connections",a=pt("user");Ee(t,a,d=>n(7,o=d));const u=a.connectionProfiles;Ee(t,u,d=>n(3,s=d));const c=d=>d.url.toFields({connection_id:d.connection_id});let p=[];return Bt(()=>u.load()),t.$$.update=()=>{t.$$.dirty&129&&o.is("success")&&!p.length&&n(0,p=a.connections.toArray().map(c))},n(1,i=a.roles.has("admin")),[p,i,r,s,a,u,l,o]}class _g extends Xe{constructor(e){super(),Qe(this,e,mg,hg,Ze,{title:6})}get title(){return this.$$.ctx[6]}}function gg(t){let e,n,i,o,r=At(t[4]("See all connection profiles"))+"",s,l;return e=new be({props:{name:"list"}}),n=new be({props:{name:"times"}}),{c(){G(e.$$.fragment),G(n.$$.fragment),i=C(),o=g("span"),s=N(r),k(o,"class","tooltip is-left")},m(a,u){q(e,a,u),q(n,a,u),w(a,i,u),w(a,o,u),f(o,s),l=!0},p(a,u){(!l||u&16)&&r!==(r=At(a[4]("See all connection profiles"))+"")&&M(s,r)},i(a){l||(v(e.$$.fragment,a),v(n.$$.fragment,a),l=!0)},o(a){S(e.$$.fragment,a),S(n.$$.fragment,a),l=!1},d(a){W(e,a),W(n,a),a&&$(i),a&&$(o)}}}function bg(t){let e,n=(t[0]==="add"?t[4]("Add connection profile"):t[4]("Edit connection profile"))+"",i,o,r,s;return r=new qe({props:{href:"/settings/connections",class:"btn-hallow can-toggle is-active has-tooltip",$$slots:{default:[gg]},$$scope:{ctx:t}}}),{c(){e=g("h1"),i=N(n),o=C(),G(r.$$.fragment)},m(l,a){w(l,e,a),f(e,i),w(l,o,a),q(r,l,a),s=!0},p(l,a){(!s||a&17)&&n!==(n=(l[0]==="add"?l[4]("Add connection profile"):l[4]("Edit connection profile"))+"")&&M(i,n);const u={};a&33554448&&(u.$$scope={dirty:a,ctx:l}),r.$set(u)},i(l){s||(v(r.$$.fragment,l),s=!0)},o(l){S(r.$$.fragment,l),s=!1},d(l){l&&$(e),l&&$(o),W(r,l)}}}function vg(t){let e,n=t[4]("Host and port")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Host and port")+"")&&M(i,n)},d(o){o&&$(e)}}}function $g(t){let e,n=t[4]("Will match connections on hostname.")+"",i;return{c(){e=g("p"),i=N(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Will match connections on hostname.")+"")&&M(i,n)},d(o){o&&$(e)}}}function wg(t){let e,n=t[4]("Secure connection (TLS)")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Secure connection (TLS)")+"")&&M(i,n)},d(o){o&&$(e)}}}function kg(t){let e,n=t[4]("Verify certificate (TLS)")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Verify certificate (TLS)")+"")&&M(i,n)},d(o){o&&$(e)}}}function yg(t){let e,n=t[4]("Conversation name")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Conversation name")+"")&&M(i,n)},d(o){o&&$(e)}}}function Sg(t){let e,n=t[4]("Service accounts")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Service accounts")+"")&&M(i,n)},d(o){o&&$(e)}}}function Eg(t){let e,n=t[4]("Messages from these nicks will be shown in the connection conversation.")+"",i;return{c(){e=g("p"),i=N(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Messages from these nicks will be shown in the connection conversation.")+"")&&M(i,n)},d(o){o&&$(e)}}}function Cg(t){let e,n=t[4]("Default connection")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Default connection")+"")&&M(i,n)},d(o){o&&$(e)}}}function Ag(t){let e,n=t[4]("Force default connection")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Force default connection")+"")&&M(i,n)},d(o){o&&$(e)}}}function Jl(t){let e,n=t[4]("Tick this box if you want to prevent users from creating custom connections.")+"",i,o;return{c(){e=g("p"),i=N(n),k(e,"class","help"),e.hidden=o=!t[1].is_default},m(r,s){w(r,e,s),f(e,i)},p(r,s){s&16&&n!==(n=r[4]("Tick this box if you want to prevent users from creating custom connections.")+"")&&M(i,n),s&2&&o!==(o=!r[1].is_default)&&(e.hidden=o)},d(r){r&&$(e)}}}function Og(t){let e,n=t[4]("Advanced settings")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Advanced settings")+"")&&M(i,n)},d(o){o&&$(e)}}}function Ql(t){let e,n,i,o,r,s,l,a,u,c,p,d,h,m,_=t[4]("This might result in flood ban.")+"",y,b,E;function R(F){t[19](F)}let j={name:"max_bulk_message_size",type:"number",readonly:!t[3],$$slots:{help:[Tg],label:[Ng]},$$scope:{ctx:t}};t[1].max_bulk_message_size!==void 0&&(j.value=t[1].max_bulk_message_size),n=new Ve({props:j}),me.push(()=>$e(n,"value",R));function D(F){t[20](F)}let A={name:"max_message_length",type:"number",readonly:!t[3],$$slots:{help:[Mg],label:[Rg]},$$scope:{ctx:t}};t[1].max_message_length!==void 0&&(A.value=t[1].max_message_length),r=new Ve({props:A}),me.push(()=>$e(r,"value",D));function T(F){t[21](F)}let P={name:"webirc_password",type:"password",readonly:!t[3],$$slots:{label:[Lg]},$$scope:{ctx:t}};t[1].webirc_password!==void 0&&(P.value=t[1].webirc_password),a=new Ve({props:P}),me.push(()=>$e(a,"value",T));function U(F){t[22](F)}let B={name:"skip_queue",disabled:!t[3],$$slots:{label:[Ig]},$$scope:{ctx:t}};return t[1].skip_queue!==void 0&&(B.value=t[1].skip_queue),p=new nt({props:B}),me.push(()=>$e(p,"value",U)),{c(){e=g("div"),G(n.$$.fragment),o=C(),G(r.$$.fragment),l=C(),G(a.$$.fragment),c=C(),G(p.$$.fragment),h=C(),m=g("p"),y=N(_),k(m,"class","help"),k(e,"class","form-group")},m(F,I){w(F,e,I),q(n,e,null),f(e,o),q(r,e,null),f(e,l),q(a,e,null),f(e,c),q(p,e,null),f(e,h),f(e,m),f(m,y),E=!0},p(F,I){const z={};I&8&&(z.readonly=!F[3]),I&33554448&&(z.$$scope={dirty:I,ctx:F}),!i&&I&2&&(i=!0,z.value=F[1].max_bulk_message_size,ve(()=>i=!1)),n.$set(z);const x={};I&8&&(x.readonly=!F[3]),I&33554448&&(x.$$scope={dirty:I,ctx:F}),!s&&I&2&&(s=!0,x.value=F[1].max_message_length,ve(()=>s=!1)),r.$set(x);const J={};I&8&&(J.readonly=!F[3]),I&33554448&&(J.$$scope={dirty:I,ctx:F}),!u&&I&2&&(u=!0,J.value=F[1].webirc_password,ve(()=>u=!1)),a.$set(J);const O={};I&8&&(O.disabled=!F[3]),I&33554448&&(O.$$scope={dirty:I,ctx:F}),!d&&I&2&&(d=!0,O.value=F[1].skip_queue,ve(()=>d=!1)),p.$set(O),(!E||I&16)&&_!==(_=F[4]("This might result in flood ban.")+"")&&M(y,_)},i(F){E||(v(n.$$.fragment,F),v(r.$$.fragment,F),v(a.$$.fragment,F),v(p.$$.fragment,F),ut(()=>{b||(b=tt(e,si,{duration:150},!0)),b.run(1)}),E=!0)},o(F){S(n.$$.fragment,F),S(r.$$.fragment,F),S(a.$$.fragment,F),S(p.$$.fragment,F),b||(b=tt(e,si,{duration:150},!1)),b.run(0),E=!1},d(F){F&&$(e),W(n),W(r),W(a),W(p),F&&b&&b.end()}}}function Ng(t){let e,n=t[4]("Max number of pasted lines")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Max number of pasted lines")+"")&&M(i,n)},d(o){o&&$(e)}}}function Tg(t){let e,n=t[4]("Setting this value too high might get you banned from the server.")+"",i;return{c(){e=g("p"),i=N(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Setting this value too high might get you banned from the server.")+"")&&M(i,n)},d(o){o&&$(e)}}}function Rg(t){let e,n=t[4]("Max message length")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Max message length")+"")&&M(i,n)},d(o){o&&$(e)}}}function Mg(t){let e,n=t[4]("Messages longer than this will be split into multiple messages.")+"",i;return{c(){e=g("p"),i=N(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Messages longer than this will be split into multiple messages.")+"")&&M(i,n)},d(o){o&&$(e)}}}function Lg(t){let e,n=t[4]("WEBIRC password")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("WEBIRC password")+"")&&M(i,n)},d(o){o&&$(e)}}}function Ig(t){let e,n=t[4]("Skip connection queue")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Skip connection queue")+"")&&M(i,n)},d(o){o&&$(e)}}}function Xl(t){let e,n=t[4]("Only administrators can edit this section.")+"",i;return{c(){e=g("p"),i=N(n),k(e,"class","error")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Only administrators can edit this section.")+"")&&M(i,n)},d(o){o&&$(e)}}}function Pg(t){let e,n;return e=new ft({props:{icon:"plus-circle",op:t[7],$$slots:{default:[Ug]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o&33554448&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function Dg(t){let e,n,i,o;return e=new ft({props:{icon:"save",op:t[7],disabled:!t[3],$$slots:{default:[Bg]},$$scope:{ctx:t}}}),i=new ft({props:{icon:"trash",type:"button",op:t[6],disabled:!t[3],$$slots:{default:[jg]},$$scope:{ctx:t}}}),i.$on("click",t[8]),{c(){G(e.$$.fragment),n=C(),G(i.$$.fragment)},m(r,s){q(e,r,s),w(r,n,s),q(i,r,s),o=!0},p(r,s){const l={};s&8&&(l.disabled=!r[3]),s&33554448&&(l.$$scope={dirty:s,ctx:r}),e.$set(l);const a={};s&8&&(a.disabled=!r[3]),s&33554448&&(a.$$scope={dirty:s,ctx:r}),i.$set(a)},i(r){o||(v(e.$$.fragment,r),v(i.$$.fragment,r),o=!0)},o(r){S(e.$$.fragment,r),S(i.$$.fragment,r),o=!1},d(r){W(e,r),r&&$(n),W(i,r)}}}function Ug(t){let e,n=t[4]("Add")+"",i;return{c(){e=g("span"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Add")+"")&&M(i,n)},d(o){o&&$(e)}}}function Bg(t){let e,n=t[4]("Update")+"",i;return{c(){e=g("span"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Update")+"")&&M(i,n)},d(o){o&&$(e)}}}function jg(t){let e,n=t[4]("Delete")+"",i;return{c(){e=g("span"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Delete")+"")&&M(i,n)},d(o){o&&$(e)}}}function Fg(t){let e,n,i,o,r,s,l,a,u,c,p,d,h,m,_,y,b,E,R,j,D,A,T,P,U,B,F,I,z,x,J,O,L,Y,H,V,Z,K,re,de,ie;e=new Ut({props:{$$slots:{default:[bg]},$$scope:{ctx:t}}});function he(Q){t[11](Q)}let Te={name:"host",placeholder:t[4]("Ex: irc.libera.chat:6697"),readonly:!t[3],$$slots:{help:[$g],label:[vg]},$$scope:{ctx:t}};t[1].host!==void 0&&(Te.value=t[1].host),r=new Ve({props:Te}),me.push(()=>$e(r,"value",he));function ce(Q){t[12](Q)}let ke={name:"tls",disabled:!t[3],$$slots:{label:[wg]},$$scope:{ctx:t}};t[1].tls!==void 0&&(ke.value=t[1].tls),a=new nt({props:ke}),me.push(()=>$e(a,"value",ce));function Ie(Q){t[13](Q)}let De={name:"tls_verify",disabled:!t[1].tls||!t[3],hidden:!t[1].tls,$$slots:{label:[kg]},$$scope:{ctx:t}};t[1].tls_verify!==void 0&&(De.value=t[1].tls_verify),p=new nt({props:De}),me.push(()=>$e(p,"value",Ie));function Ne(Q){t[14](Q)}let Me={name:"conversation_id",placeholder:t[4]("Ex: #convos"),readonly:!t[3],$$slots:{label:[yg]},$$scope:{ctx:t}};t[1].conversation_id!==void 0&&(Me.value=t[1].conversation_id),m=new Ve({props:Me}),me.push(()=>$e(m,"value",Ne));function je(Q){t[15](Q)}let X={name:"service_accounts",placeholder:t[4]("chanserv, nickserv, ..."),readonly:!t[3],$$slots:{help:[Eg],label:[Sg]},$$scope:{ctx:t}};t[1].service_accounts!==void 0&&(X.value=t[1].service_accounts),b=new Ve({props:X}),me.push(()=>$e(b,"value",je));function ge(Q){t[16](Q)}let fe={name:"is_default",disabled:!t[3],$$slots:{label:[Cg]},$$scope:{ctx:t}};t[1].is_default!==void 0&&(fe.value=t[1].is_default),j=new nt({props:fe}),me.push(()=>$e(j,"value",ge));function He(Q){t[17](Q)}let Re={name:"is_forced",disabled:!t[3],hidden:!t[1].is_default,$$slots:{label:[Ag]},$$scope:{ctx:t}};t[1].is_forced!==void 0&&(Re.value=t[1].is_forced),T=new nt({props:Re}),me.push(()=>$e(T,"value",He));let oe=t[3]&&Jl(t);function ee(Q){t[18](Q)}let we={icon:"caret",name:"show_advanced_settings",$$slots:{label:[Og]},$$scope:{ctx:t}};t[2]!==void 0&&(we.value=t[2]),F=new nt({props:we}),me.push(()=>$e(F,"value",ee));let ye=t[2]&&Ql(t),ue=!t[3]&&Xl(t);const te=[Dg,Pg],se=[];function ne(Q,le){return Q[0]!=="add"?0:1}return L=ne(t),Y=se[L]=te[L](t),V=new Rt({props:{op:t[6],success:"Deleted."}}),K=new Rt({props:{op:t[7]}}),{c(){G(e.$$.fragment),n=C(),i=g("main"),o=g("form"),G(r.$$.fragment),l=C(),G(a.$$.fragment),c=C(),G(p.$$.fragment),h=C(),G(m.$$.fragment),y=C(),G(b.$$.fragment),R=C(),G(j.$$.fragment),A=C(),G(T.$$.fragment),U=C(),oe&&oe.c(),B=C(),G(F.$$.fragment),z=C(),ye&&ye.c(),x=C(),ue&&ue.c(),J=C(),O=g("div"),Y.c(),H=C(),G(V.$$.fragment),Z=C(),G(K.$$.fragment),k(O,"class","form-actions"),k(o,"method","post"),k(i,"class","main")},m(Q,le){q(e,Q,le),w(Q,n,le),w(Q,i,le),f(i,o),q(r,o,null),f(o,l),q(a,o,null),f(o,c),q(p,o,null),f(o,h),q(m,o,null),f(o,y),q(b,o,null),f(o,R),q(j,o,null),f(o,A),q(T,o,null),f(o,U),oe&&oe.m(o,null),f(o,B),q(F,o,null),f(o,z),ye&&ye.m(o,null),f(o,x),ue&&ue.m(o,null),f(o,J),f(o,O),se[L].m(O,null),f(o,H),q(V,o,null),f(o,Z),q(K,o,null),re=!0,de||(ie=Se(o,"submit",rt(t[9])),de=!0)},p(Q,[le]){const pe={};le&33554449&&(pe.$$scope={dirty:le,ctx:Q}),e.$set(pe);const _e={};le&16&&(_e.placeholder=Q[4]("Ex: irc.libera.chat:6697")),le&8&&(_e.readonly=!Q[3]),le&33554448&&(_e.$$scope={dirty:le,ctx:Q}),!s&&le&2&&(s=!0,_e.value=Q[1].host,ve(()=>s=!1)),r.$set(_e);const Ye={};le&8&&(Ye.disabled=!Q[3]),le&33554448&&(Ye.$$scope={dirty:le,ctx:Q}),!u&&le&2&&(u=!0,Ye.value=Q[1].tls,ve(()=>u=!1)),a.$set(Ye);const Fe={};le&10&&(Fe.disabled=!Q[1].tls||!Q[3]),le&2&&(Fe.hidden=!Q[1].tls),le&33554448&&(Fe.$$scope={dirty:le,ctx:Q}),!d&&le&2&&(d=!0,Fe.value=Q[1].tls_verify,ve(()=>d=!1)),p.$set(Fe);const ot={};le&16&&(ot.placeholder=Q[4]("Ex: #convos")),le&8&&(ot.readonly=!Q[3]),le&33554448&&(ot.$$scope={dirty:le,ctx:Q}),!_&&le&2&&(_=!0,ot.value=Q[1].conversation_id,ve(()=>_=!1)),m.$set(ot);const kt={};le&16&&(kt.placeholder=Q[4]("chanserv, nickserv, ...")),le&8&&(kt.readonly=!Q[3]),le&33554448&&(kt.$$scope={dirty:le,ctx:Q}),!E&&le&2&&(E=!0,kt.value=Q[1].service_accounts,ve(()=>E=!1)),b.$set(kt);const Lt={};le&8&&(Lt.disabled=!Q[3]),le&33554448&&(Lt.$$scope={dirty:le,ctx:Q}),!D&&le&2&&(D=!0,Lt.value=Q[1].is_default,ve(()=>D=!1)),j.$set(Lt);const at={};le&8&&(at.disabled=!Q[3]),le&2&&(at.hidden=!Q[1].is_default),le&33554448&&(at.$$scope={dirty:le,ctx:Q}),!P&&le&2&&(P=!0,at.value=Q[1].is_forced,ve(()=>P=!1)),T.$set(at),Q[3]?oe?oe.p(Q,le):(oe=Jl(Q),oe.c(),oe.m(o,B)):oe&&(oe.d(1),oe=null);const Zt={};le&33554448&&(Zt.$$scope={dirty:le,ctx:Q}),!I&&le&4&&(I=!0,Zt.value=Q[2],ve(()=>I=!1)),F.$set(Zt),Q[2]?ye?(ye.p(Q,le),le&4&&v(ye,1)):(ye=Ql(Q),ye.c(),v(ye,1),ye.m(o,x)):ye&&(Ce(),S(ye,1,1,()=>{ye=null}),Ae()),Q[3]?ue&&(ue.d(1),ue=null):ue?ue.p(Q,le):(ue=Xl(Q),ue.c(),ue.m(o,J));let Ft=L;L=ne(Q),L===Ft?se[L].p(Q,le):(Ce(),S(se[Ft],1,1,()=>{se[Ft]=null}),Ae(),Y=se[L],Y?Y.p(Q,le):(Y=se[L]=te[L](Q),Y.c()),v(Y,1),Y.m(O,null))},i(Q){re||(v(e.$$.fragment,Q),v(r.$$.fragment,Q),v(a.$$.fragment,Q),v(p.$$.fragment,Q),v(m.$$.fragment,Q),v(b.$$.fragment,Q),v(j.$$.fragment,Q),v(T.$$.fragment,Q),v(F.$$.fragment,Q),v(ye),v(Y),v(V.$$.fragment,Q),v(K.$$.fragment,Q),re=!0)},o(Q){S(e.$$.fragment,Q),S(r.$$.fragment,Q),S(a.$$.fragment,Q),S(p.$$.fragment,Q),S(m.$$.fragment,Q),S(b.$$.fragment,Q),S(j.$$.fragment,Q),S(T.$$.fragment,Q),S(F.$$.fragment,Q),S(ye),S(Y),S(V.$$.fragment,Q),S(K.$$.fragment,Q),re=!1},d(Q){W(e,Q),Q&&$(n),Q&&$(i),W(r),W(a),W(p),W(m),W(b),W(j),W(T),oe&&oe.d(),W(F),ye&&ye.d(),ue&&ue.d(),se[L].d(),W(V),W(K),de=!1,ie()}}}function zg(t,e,n){let i,o,r;Ee(t,lt,I=>n(4,r=I));let{profile_id:s="add"}=e;const l=s==="add"?"Add connection profile":"Edit connection profile",a=pt("user"),u=a.connectionProfiles;Ee(t,u,I=>n(23,o=I));const c=et.op("removeConnectionProfile"),p=et.op("saveConnectionProfile");let d={},h=!1;Bt(async()=>{await u.load(),n(1,d={...o.find(s)||o.defaultProfile()})});async function m(){await c.perform({id:s}),await u.load({force:!0}),await Li(),Be.go("/settings/connections")}async function _(){["is_default","is_forced","skip_queue"].forEach(I=>n(1,d[I]=!!d[I],d)),n(1,d.service_accounts=Ir(d.service_accounts),d),n(1,d.url=new mn("irc://localhost").fromFields(d).toString(),d),await p.perform(d),!p.is("error")&&(d.is_default&&a.update({default_connection:d.url,forced_connection:d.is_forced}),await u.load({force:!0}),await Li(),Be.go("/settings/connections"))}function y(I){t.$$.not_equal(d.host,I)&&(d.host=I,n(1,d))}function b(I){t.$$.not_equal(d.tls,I)&&(d.tls=I,n(1,d))}function E(I){t.$$.not_equal(d.tls_verify,I)&&(d.tls_verify=I,n(1,d))}function R(I){t.$$.not_equal(d.conversation_id,I)&&(d.conversation_id=I,n(1,d))}function j(I){t.$$.not_equal(d.service_accounts,I)&&(d.service_accounts=I,n(1,d))}function D(I){t.$$.not_equal(d.is_default,I)&&(d.is_default=I,n(1,d))}function A(I){t.$$.not_equal(d.is_forced,I)&&(d.is_forced=I,n(1,d))}function T(I){h=I,n(2,h)}function P(I){t.$$.not_equal(d.max_bulk_message_size,I)&&(d.max_bulk_message_size=I,n(1,d))}function U(I){t.$$.not_equal(d.max_message_length,I)&&(d.max_message_length=I,n(1,d))}function B(I){t.$$.not_equal(d.webirc_password,I)&&(d.webirc_password=I,n(1,d))}function F(I){t.$$.not_equal(d.skip_queue,I)&&(d.skip_queue=I,n(1,d))}return t.$$set=I=>{"profile_id"in I&&n(0,s=I.profile_id)},n(3,i=a.roles.has("admin")),[s,d,h,i,r,u,c,p,m,_,l,y,b,E,R,j,D,A,T,P,U,B,F]}class Hg extends Xe{constructor(e){super(),Qe(this,e,zg,Fg,Ze,{profile_id:0,title:10})}get title(){return this.$$.ctx[10]}}function qg(t){let e,n,i,o,r=At(t[1]("See all connections"))+"",s,l;return e=new be({props:{name:"list"}}),n=new be({props:{name:"times"}}),{c(){G(e.$$.fragment),G(n.$$.fragment),i=C(),o=g("span"),s=N(r),k(o,"class","tooltip is-left")},m(a,u){q(e,a,u),q(n,a,u),w(a,i,u),w(a,o,u),f(o,s),l=!0},p(a,u){(!l||u&2)&&r!==(r=At(a[1]("See all connections"))+"")&&M(s,r)},i(a){l||(v(e.$$.fragment,a),v(n.$$.fragment,a),l=!0)},o(a){S(e.$$.fragment,a),S(n.$$.fragment,a),l=!1},d(a){W(e,a),W(n,a),a&&$(i),a&&$(o)}}}function Wg(t){let e,n=(t[0]==="add"?t[1]("Add connection"):t[1]("Edit connection"))+"",i,o,r,s;return r=new qe({props:{href:"/settings/connections",class:"btn-hallow can-toggle is-active has-tooltip",$$slots:{default:[qg]},$$scope:{ctx:t}}}),{c(){e=g("h1"),i=N(n),o=C(),G(r.$$.fragment)},m(l,a){w(l,e,a),f(e,i),w(l,o,a),q(r,l,a),s=!0},p(l,a){(!s||a&3)&&n!==(n=(l[0]==="add"?l[1]("Add connection"):l[1]("Edit connection"))+"")&&M(i,n);const u={};a&10&&(u.$$scope={dirty:a,ctx:l}),r.$set(u)},i(l){s||(v(r.$$.fragment,l),s=!0)},o(l){S(r.$$.fragment,l),s=!1},d(l){l&&$(e),l&&$(o),W(r,l)}}}function Gg(t){let e,n,i,o,r;return e=new Ut({props:{$$slots:{default:[Wg]},$$scope:{ctx:t}}}),o=new Bu({props:{id:t[0],is_page:!0}}),{c(){G(e.$$.fragment),n=C(),i=g("main"),G(o.$$.fragment),k(i,"class","main")},m(s,l){q(e,s,l),w(s,n,l),w(s,i,l),q(o,i,null),r=!0},p(s,[l]){const a={};l&11&&(a.$$scope={dirty:l,ctx:s}),e.$set(a);const u={};l&1&&(u.id=s[0]),o.$set(u)},i(s){r||(v(e.$$.fragment,s),v(o.$$.fragment,s),r=!0)},o(s){S(e.$$.fragment,s),S(o.$$.fragment,s),r=!1},d(s){W(e,s),s&&$(n),s&&$(i),W(o)}}}function Kg(t,e,n){let i;Ee(t,lt,s=>n(1,i=s));let{connection_id:o="add"}=e;const r=o==="add"?"Add connection":"Edit connection";return t.$$set=s=>{"connection_id"in s&&n(0,o=s.connection_id)},[o,i,r]}class Yg extends Xe{constructor(e){super(),Qe(this,e,Kg,Gg,Ze,{connection_id:0,title:2})}get title(){return this.$$.ctx[2]}}function xl(t,e,n){const i=t.slice();return i[16]=e[n],i}function Vg(t){let e,n=t[4]("Add conversation")+"",i;return{c(){e=g("h1"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Add conversation")+"")&&M(i,n)},d(o){o&&$(e)}}}function Zg(t){let e,n=t[4]("Connection")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Connection")+"")&&M(i,n)},d(o){o&&$(e)}}}function Jg(t){let e,n=t[4](t[1].conversations.length?"Refresh":"Load")+"",i;return{c(){e=g("span"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&18&&n!==(n=o[4](o[1].conversations.length?"Refresh":"Load")+"")&&M(i,n)},d(o){o&&$(e)}}}function Qg(t){let e,n=t[4]("Conversation name")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Conversation name")+"")&&M(i,n)},d(o){o&&$(e)}}}function Xg(t){let e,n=t[4]("Add")+"",i;return{c(){e=g("span"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Add")+"")&&M(i,n)},d(o){o&&$(e)}}}function ea(t){let e,n,i,o=t[1].error+"",r;return{c(){e=g("p"),n=N(t[0]),i=N(": "),r=N(o),k(e,"class","error")},m(s,l){w(s,e,l),f(e,n),f(e,i),f(e,r)},p(s,l){l&1&&M(n,s[0]),l&2&&o!==(o=s[1].error+"")&&M(r,o)},d(s){s&&$(e)}}}function ta(t){let e,n,i;function o(u,c){return u[1].done?eb:xg}let r=o(t),s=r(t),l=t[1].conversations,a=[];for(let u=0;u<l.length;u+=1)a[u]=na(xl(t,l,u));return{c(){e=g("p"),s.c(),n=C(),i=g("div");for(let u=0;u<a.length;u+=1)a[u].c();k(i,"class","conversation-add-list")},m(u,c){w(u,e,c),s.m(e,null),w(u,n,c),w(u,i,c);for(let p=0;p<a.length;p+=1)a[p].m(i,null)},p(u,c){if(r===(r=o(u))&&s?s.p(u,c):(s.d(1),s=r(u),s&&(s.c(),s.m(e,null))),c&66){l=u[1].conversations;let p;for(p=0;p<l.length;p+=1){const d=xl(u,l,p);a[p]?a[p].p(d,c):(a[p]=na(d),a[p].c(),a[p].m(i,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=l.length}},d(u){u&&$(e),s.d(),u&&$(n),u&&$(i),$t(a,u)}}}function xg(t){let e=t[4]("Showing %1 of %2 conversations, but the list is still loading.",t[1].conversations.length,t[1].n_conversations)+"",n;return{c(){n=N(e)},m(i,o){w(i,n,o)},p(i,o){o&18&&e!==(e=i[4]("Showing %1 of %2 conversations, but the list is still loading.",i[1].conversations.length,i[1].n_conversations)+"")&&M(n,e)},d(i){i&&$(n)}}}function eb(t){let e=t[4]("Showing %1 of %2 conversations.",t[1].conversations.length,t[1].n_conversations)+"",n;return{c(){n=N(e)},m(i,o){w(i,n,o)},p(i,o){o&18&&e!==(e=i[4]("Showing %1 of %2 conversations.",i[1].conversations.length,i[1].n_conversations)+"")&&M(n,e)},d(i){i&&$(n)}}}function na(t){let e,n,i=t[16].n_users+"",o,r,s,l=t[16].name+"",a,u,c,p=(t[16].topic||"No topic.")+"",d,h,m,_,y;return{c(){e=g("a"),n=g("span"),o=N(i),r=C(),s=g("b"),a=N(l),u=C(),c=g("i"),d=N(p),h=C(),k(n,"class","conversation-add-list__n-users"),k(s,"class","conversation-add-list__name"),k(c,"class","conversation-add-list__title"),k(e,"href",m="#add:"+t[16].name)},m(b,E){w(b,e,E),f(e,n),f(n,o),f(e,r),f(e,s),f(s,a),f(e,u),f(e,c),f(c,d),f(e,h),_||(y=Se(e,"click",rt(t[6])),_=!0)},p(b,E){E&2&&i!==(i=b[16].n_users+"")&&M(o,i),E&2&&l!==(l=b[16].name+"")&&M(a,l),E&2&&p!==(p=(b[16].topic||"No topic.")+"")&&M(d,p),E&2&&m!==(m="#add:"+b[16].name)&&k(e,"href",m)},d(b){b&&$(e),_=!1,y()}}}function tb(t){let e,n,i,o,r=t[4]("Enter the name of an exising conversation, or create a new conversation.")+"",s,l,a,u,c,p,d,h,m,_,y,b,E,R,j,D,A,T,P,U,B;e=new Ut({props:{$$slots:{default:[Vg]},$$scope:{ctx:t}}});function F(L){t[11](L)}let I={name:"connection_id",options:t[3],placeholder:t[4]("Select..."),$$slots:{label:[Zg]},$$scope:{ctx:t}};t[0]!==void 0&&(I.value=t[0]),c=new Qn({props:I}),me.push(()=>$e(c,"value",F)),m=new ft({props:{type:"button",icon:"sync-alt",disabled:!t[0]||t[1].done===!1,$$slots:{default:[Jg]},$$scope:{ctx:t}}}),m.$on("click",t[7]);function z(L){t[12](L)}let x={name:"conversation_id",placeholder:t[4]("#room or nick"),autocomplete:"off",$$slots:{label:[Qg]},$$scope:{ctx:t}};t[2]!==void 0&&(x.value=t[2]),b=new Ve({props:x}),me.push(()=>$e(b,"value",z)),b.$on("keyup",t[8]),D=new ft({props:{icon:"comment",disabled:!t[0]||!t[2],$$slots:{default:[Xg]},$$scope:{ctx:t}}});let J=t[1].error&&ea(t),O=t[1].done!==null&&ta(t);return{c(){G(e.$$.fragment),n=C(),i=g("main"),o=g("p"),s=N(r),l=C(),a=g("form"),u=g("div"),G(c.$$.fragment),d=C(),h=g("div"),G(m.$$.fragment),_=C(),y=g("div"),G(b.$$.fragment),R=C(),j=g("div"),G(D.$$.fragment),A=C(),J&&J.c(),T=C(),O&&O.c(),k(h,"class","flex-basis-30"),k(u,"class","inputs-side-by-side"),k(j,"class","flex-basis-30"),k(y,"class","inputs-side-by-side"),k(a,"method","post"),k(i,"class","main")},m(L,Y){q(e,L,Y),w(L,n,Y),w(L,i,Y),f(i,o),f(o,s),f(i,l),f(i,a),f(a,u),q(c,u,null),f(u,d),f(u,h),q(m,h,null),f(a,_),f(a,y),q(b,y,null),f(y,R),f(y,j),q(D,j,null),f(a,A),J&&J.m(a,null),f(a,T),O&&O.m(a,null),P=!0,U||(B=Se(a,"submit",rt(t[6])),U=!0)},p(L,[Y]){const H={};Y&524304&&(H.$$scope={dirty:Y,ctx:L}),e.$set(H),(!P||Y&16)&&r!==(r=L[4]("Enter the name of an exising conversation, or create a new conversation.")+"")&&M(s,r);const V={};Y&8&&(V.options=L[3]),Y&16&&(V.placeholder=L[4]("Select...")),Y&524304&&(V.$$scope={dirty:Y,ctx:L}),!p&&Y&1&&(p=!0,V.value=L[0],ve(()=>p=!1)),c.$set(V);const Z={};Y&3&&(Z.disabled=!L[0]||L[1].done===!1),Y&524306&&(Z.$$scope={dirty:Y,ctx:L}),m.$set(Z);const K={};Y&16&&(K.placeholder=L[4]("#room or nick")),Y&524304&&(K.$$scope={dirty:Y,ctx:L}),!E&&Y&4&&(E=!0,K.value=L[2],ve(()=>E=!1)),b.$set(K);const re={};Y&5&&(re.disabled=!L[0]||!L[2]),Y&524304&&(re.$$scope={dirty:Y,ctx:L}),D.$set(re),L[1].error?J?J.p(L,Y):(J=ea(L),J.c(),J.m(a,T)):J&&(J.d(1),J=null),L[1].done!==null?O?O.p(L,Y):(O=ta(L),O.c(),O.m(a,null)):O&&(O.d(1),O=null)},i(L){P||(v(e.$$.fragment,L),v(c.$$.fragment,L),v(m.$$.fragment,L),v(b.$$.fragment,L),v(D.$$.fragment,L),P=!0)},o(L){S(e.$$.fragment,L),S(c.$$.fragment,L),S(m.$$.fragment,L),S(b.$$.fragment,L),S(D.$$.fragment,L),P=!1},d(L){W(e,L),L&&$(n),L&&$(i),W(c),W(m),W(b),W(D),J&&J.d(),O&&O.d(),U=!1,B()}}}function nb(t,e,n){let i,o,r;Ee(t,lt,R=>n(4,r=R));const s="Add conversation",l=pt("socket"),a=pt("user");Ee(t,a,R=>n(10,o=R));let u={conversations:[],done:null,n_conversations:0},c="",p="",d;function h(R){const j=R&&R.target&&R.target.closest("a");j&&j.href&&n(2,p=j.href.replace(/.*#add:/,""));const D=a.findConversation({connection_id:c});D&&p&&D.send("/join "+p)}async function m(R){let j="/list"+(p.length?" /"+p+"/":"");R.type==="click"&&u.done&&(j+=" refresh"),d&&clearTimeout(d),l.send({connection_id:c,message:j,method:"send"},D=>{const A=Lr(D);n(1,u=A?{conversations:[],done:!0,n_conversations:0,error:A}:D);let T=R.interval?R.interval+500:500;T>2e3&&(T=2e3),!A&&!D.done&&(d=setTimeout(()=>m({interval:T}),T))})}function _(){n(0,c=Be.param("connection_id")||i[0][0]||""),n(2,p=Be.param("conversation_id")||"")}const y=Gr(m,250);function b(R){c=R,n(0,c)}function E(R){p=R,n(2,p)}return t.$$.update=()=>{t.$$.dirty&1024&&n(3,i=Array.from(o.connections.keys()).map(R=>[R])),t.$$.dirty&1&&(c||_())},[c,u,p,i,r,a,h,m,y,s,o,b,E]}class ib extends Xe{constructor(e){super(),Qe(this,e,nb,tb,Ze,{title:9})}get title(){return this.$$.ctx[9]}}function ob(t){let e,n=t[4]("Yikes! we are so sorry for the inconvenience. Please submit an [issue](%1), if the problem does not go away.","https://github.com/convos-chat/convos/issues")+"",i,o,r,s,l,a=t[2]("Go to start page")+"",u,c;return s=new be({props:{name:"play"}}),{c(){e=g("p"),i=C(),o=g("p"),r=g("a"),G(s.$$.fragment),l=C(),u=N(a),k(r,"href",t[1]),k(r,"target","_self"),k(r,"class","btn")},m(p,d){w(p,e,d),e.innerHTML=n,w(p,i,d),w(p,o,d),f(o,r),q(s,r,null),f(r,l),f(r,u),c=!0},p(p,d){(!c||d&16)&&n!==(n=p[4]("Yikes! we are so sorry for the inconvenience. Please submit an [issue](%1), if the problem does not go away.","https://github.com/convos-chat/convos/issues")+"")&&(e.innerHTML=n),(!c||d&4)&&a!==(a=p[2]("Go to start page")+"")&&M(u,a),(!c||d&2)&&k(r,"href",p[1])},i(p){c||(v(s.$$.fragment,p),c=!0)},o(p){S(s.$$.fragment,p),c=!1},d(p){p&&$(e),p&&$(i),p&&$(o),W(s)}}}function rb(t){let e,n=t[2]("The Convos Team have been searching and searching, but the requested page could not be found.")+"",i,o,r,s,l,a,u=t[2]("Go to start page")+"",c,p;return l=new be({props:{name:"play"}}),{c(){e=g("p"),i=N(n),o=C(),r=g("p"),s=g("a"),G(l.$$.fragment),a=C(),c=N(u),k(s,"href",t[1]),k(s,"target","_self"),k(s,"class","btn")},m(d,h){w(d,e,h),f(e,i),w(d,o,h),w(d,r,h),f(r,s),q(l,s,null),f(s,a),f(s,c),p=!0},p(d,h){(!p||h&4)&&n!==(n=d[2]("The Convos Team have been searching and searching, but the requested page could not be found.")+"")&&M(i,n),(!p||h&4)&&u!==(u=d[2]("Go to start page")+"")&&M(c,u),(!p||h&2)&&k(s,"href",d[1])},i(d){p||(v(l.$$.fragment,d),p=!0)},o(d){S(l.$$.fragment,d),p=!1},d(d){d&&$(e),d&&$(o),d&&$(r),W(l)}}}function sb(t){let e,n,i,o=t[2]("Downloaded Convos.")+"",r,s,l,a,u,c=t[2]("Started Convos.")+"",p,d,h,m,_,y,b,E,R,j=t[2]("Contact admin")+"",D,A,T;n=new be({props:{name:"download"}}),a=new be({props:{name:"rocket"}});const P=[ab,lb],U=[];function B(I,z){return I[3].error?0:1}h=B(t),m=U[h]=P[h](t),E=new be({props:{name:"paper-plane"}});let F={ctx:t,current:null,token:null,hasCatch:!1,pending:cb,then:fb,catch:ub,blocks:[,,,]};return cr(t[8],F),{c(){e=g("p"),G(n.$$.fragment),i=C(),r=N(o),s=C(),l=g("p"),G(a.$$.fragment),u=C(),p=N(c),d=C(),m.c(),_=C(),y=g("p"),b=g("a"),G(E.$$.fragment),R=C(),D=N(j),A=C(),F.block.c(),k(b,"class","btn"),k(b,"href",Ge("contact"))},m(I,z){w(I,e,z),q(n,e,null),f(e,i),f(e,r),w(I,s,z),w(I,l,z),q(a,l,null),f(l,u),f(l,p),w(I,d,z),U[h].m(I,z),w(I,_,z),w(I,y,z),f(y,b),q(E,b,null),f(b,R),f(b,D),f(y,A),F.block.m(y,F.anchor=null),F.mount=()=>y,F.anchor=null,T=!0},p(I,z){t=I,(!T||z&4)&&o!==(o=t[2]("Downloaded Convos.")+"")&&M(r,o),(!T||z&4)&&c!==(c=t[2]("Started Convos.")+"")&&M(p,c);let x=h;h=B(t),h===x?U[h].p(t,z):(Ce(),S(U[x],1,1,()=>{U[x]=null}),Ae(),m=U[h],m?m.p(t,z):(m=U[h]=P[h](t),m.c()),v(m,1),m.m(_.parentNode,_)),(!T||z&4)&&j!==(j=t[2]("Contact admin")+"")&&M(D,j),au(F,t,z)},i(I){T||(v(n.$$.fragment,I),v(a.$$.fragment,I),v(m),v(E.$$.fragment,I),v(F.block),T=!0)},o(I){S(n.$$.fragment,I),S(a.$$.fragment,I),S(m),S(E.$$.fragment,I);for(let z=0;z<3;z+=1){const x=F.blocks[z];S(x)}T=!1},d(I){I&&$(e),W(n),I&&$(s),I&&$(l),W(a),I&&$(d),U[h].d(I),I&&$(_),I&&$(y),W(E),F.block.d(),F.token=null,F=null}}}function lb(t){let e,n,i,o=t[2]("Loading user data...")+"",r,s;return n=new be({props:{name:"spinner fa-spin"}}),{c(){e=g("p"),G(n.$$.fragment),i=C(),r=N(o)},m(l,a){w(l,e,a),q(n,e,null),f(e,i),f(e,r),s=!0},p(l,a){(!s||a&4)&&o!==(o=l[2]("Loading user data...")+"")&&M(r,o)},i(l){s||(v(n.$$.fragment,l),s=!0)},o(l){S(n.$$.fragment,l),s=!1},d(l){l&&$(e),W(n)}}}function ab(t){let e,n,i,o=t[2]("Loading user data failed: %1",t[2](t[3].error))+"",r,s;return n=new be({props:{name:"exclamation-triangle"}}),{c(){e=g("p"),G(n.$$.fragment),i=C(),r=N(o)},m(l,a){w(l,e,a),q(n,e,null),f(e,i),f(e,r),s=!0},p(l,a){(!s||a&12)&&o!==(o=l[2]("Loading user data failed: %1",l[2](l[3].error))+"")&&M(r,o)},i(l){s||(v(n.$$.fragment,l),s=!0)},o(l){S(n.$$.fragment,l),s=!1},d(l){l&&$(e),W(n)}}}function ub(t){return{c:Le,m:Le,p:Le,i:Le,o:Le,d:Le}}function fb(t){let e,n,i,o=t[2]("Retry")+"",r,s,l;return n=new be({props:{name:"redo"}}),{c(){e=g("a"),G(n.$$.fragment),i=C(),r=N(o),k(e,"href",t[1]),k(e,"target","_self"),k(e,"class","btn is-secondary")},m(a,u){w(a,e,u),q(n,e,null),f(e,i),f(e,r),l=!0},p(a,u){(!l||u&4)&&o!==(o=a[2]("Retry")+"")&&M(r,o),(!l||u&2)&&k(e,"href",a[1])},i(a){l||(v(n.$$.fragment,a),ut(()=>{s||(s=tt(e,Dt,{},!0)),s.run(1)}),l=!0)},o(a){S(n.$$.fragment,a),s||(s=tt(e,Dt,{},!1)),s.run(0),l=!1},d(a){a&&$(e),W(n),a&&s&&s.end()}}}function cb(t){return{c:Le,m:Le,p:Le,i:Le,o:Le,d:Le}}function db(t){let e,n,i=t[2](t[5][t[0]])+"",o,r,s,l,a;const u=[sb,rb,ob],c=[];function p(d,h){return d[0]==="loading"?0:d[0]==="not_found"?1:2}return s=p(t),l=c[s]=u[s](t),{c(){e=g("main"),n=g("h2"),o=N(i),r=C(),l.c(),k(e,"class","cms-main")},m(d,h){w(d,e,h),f(e,n),f(n,o),f(e,r),c[s].m(e,null),a=!0},p(d,[h]){(!a||h&5)&&i!==(i=d[2](d[5][d[0]])+"")&&M(o,i);let m=s;s=p(d),s===m?c[s].p(d,h):(Ce(),S(c[m],1,1,()=>{c[m]=null}),Ae(),l=c[s],l?l.p(d,h):(l=c[s]=u[s](d),l.c()),v(l,1),l.m(e,null))},i(d){a||(v(l),a=!0)},o(d){S(l),a=!1},d(d){d&&$(e),c[s].d()}}}function pb(t,e){const n=t.path.match(/\/err\/(\w+)/);return n?n[1]:e.is("pending")||e.is("loading")?"loading":"not_found"}function hb(t,e,n){let i,o,r,s,l,a,u;Ee(t,Be,_=>n(11,s=_)),Ee(t,lt,_=>n(2,l=_)),Ee(t,jt,_=>n(4,u=_));let{title:c="Loading..."}=e;const p={loading:"Loading...",not_found:"Not Found"},d=pt("socket");Ee(t,d,_=>n(3,a=_));const h=pt("user");Ee(t,h,_=>n(10,r=_));const m=dc(5e3);return t.$$set=_=>{"title"in _&&n(9,c=_.title)},t.$$.update=()=>{t.$$.dirty&3072&&n(0,i=pb(s,r)),t.$$.dirty&1&&n(9,c=p[i])},n(1,o=Be.urlFor(h.email?"/chat":"/login")),[i,o,l,a,u,p,d,h,m,c,r,s]}class zu extends Xe{constructor(e){super(),Qe(this,e,hb,db,Ze,{title:9})}}function ia(t,e,n){const i=t.slice();return i[5]=e[n],i}function mb(t){let e,n=t[0]("Help")+"",i,o,r,s,l,a=Ge("version")+"",u;return{c(){e=g("h1"),i=N(n),o=C(),r=g("small"),s=g("a"),l=N("v"),u=N(a),k(s,"href",t[2]),k(s,"target","_blank")},m(c,p){w(c,e,p),f(e,i),f(e,o),f(e,r),f(r,s),f(s,l),f(s,u)},p(c,p){p&1&&n!==(n=c[0]("Help")+"")&&M(i,n)},d(c){c&&$(e)}}}function oa(t){let e,n=t[5].example+"",i,o,r=t[0](t[5].description)+"",s;return{c(){e=g("dt"),i=N(n),o=g("dd"),s=N(r)},m(l,a){w(l,e,a),f(e,i),w(l,o,a),f(o,s)},p(l,a){a&1&&r!==(r=l[0](l[5].description)+"")&&M(s,r)},d(l){l&&$(e),l&&$(o)}}}function _b(t){let e,n,i=Ge("organization_name")+"",o;return{c(){e=g("li"),n=g("a"),o=N(i),k(n,"href",Ge("organization_url")),k(n,"target","_blank")},m(r,s){w(r,e,s),f(e,n),f(n,o)},p:Le,d(r){r&&$(e)}}}function gb(t){let e;return{c(){e=N("Loading")},m(n,i){w(n,e,i)},d(n){n&&$(e)}}}function bb(t){let e;return{c(){e=N("Not found")},m(n,i){w(n,e,i)},d(n){n&&$(e)}}}function vb(t){let e;return{c(){e=N("Unknown")},m(n,i){w(n,e,i)},d(n){n&&$(e)}}}function $b(t){let e,n,i,o,r,s=t[1]('Got any questions? Come and talk to us in the "#convos" channel on https://libera.chat.')+"",l,a,u=t[1]("More information can also be found on https://convos.chat.")+"",c,p,d=t[0]("Quick search")+"",h,m,_,y=t[0]("Pressing `shift+enter` will shift focus between chat input and search in sidebar.")+"",b,E,R,j,D,A=t[0]("Filter conversations with unread messages.")+"",T,P,U,B=t[0]("Filter private conversations with unread messages.")+"",F,I,z,x=t[0]("Filter channels with unread messages.")+"",J,O,L=t[0]("Any other combination")+"",Y,H,V=t[0]("Filter channels, private conversations or search for a string.")+"",Z,K,re,de=t[0]("Autocomplete")+"",ie,he,Te,ce=t[0]("The following rules apply when typing a message:")+"",ke,Ie,De,Ne,Me,je=t[0]('"@" followed by a character will show matching nicks in the current conversation.')+"",X,ge,fe,He=t[0]('":" followed by a character will show matching emojis.')+"",Re,oe,ee,we=t[0]('"/" will show the available commands.')+"",ye,ue,te,se=t[0]('"#" will show the matching conversation names.')+"",ne,Q,le,pe=t[0]("Text formatting")+"",_e,Ye,Fe,ot=t[0]("Convos supports some special way of formatting text:")+"",kt,Lt,at,Zt,Ft,Pn=t[0]("Will be automatically converted into emojis.")+"",Dn,hi,bn=t[0]("> some text")+"",mi,Un,Bn=t[0]('A line starting with ">" will be converted into a quote.')+"",jn,Ot,ae=t[0]("*some text*, **some text**, ***some text***")+"",Pe,vn,xt=t[1]('Using "*" around some text, will convert it into *italic*, **bold** or ***italic bold***.')+"",en,tn=t[0]("`some fragment`")+"",$n,nn,on=t[1]("Using backticks around some text, will format it as a `code fragment`.")+"",wn,kn,rn=t[0]("URLs will be converted to links, and might be embedded in the chat.")+"",sn,yn,ln,an=t[0]("Available commands")+"",Fn,es,Wi,Gi=t[1]('Any message starting with a-z is prefixed with "`/quote`", when sending from a connection conversation.')+"",ts,Ki,ns,Yi,Vi=t[0]("Other resources")+"",Ro,is,Nt,Mo,_i,Zi=t[0]("Changelog for v%1",Ge("version"))+"",Lo,os,Io,gi,Ji=t[0]("Project homepage")+"",Po,rs,Do,bi,Qi=t[0]("Bug/issue tracker")+"",Uo,ss,Bo,vi,Xi=t[0]("Source code")+"",jo,ls,as=Ge("organization_name")!=="Convos"&&Ge("organization_url")!=="https://convos.chat",us,Fo,$i,xi=t[0]("Contact admin")+"",zo,fs,eo,to=t[0]("Demo error pages")+"",Ho,cs,Sn,qo,En,ds,Wo,Cn,ps,Go,An,We;e=new Ut({props:{$$slots:{default:[mb]},$$scope:{ctx:t}}});let zn=cn,Et=[];for(let Oe=0;Oe<zn.length;Oe+=1)Et[Oe]=oa(ia(t,zn,Oe));let On=as&&_b();return En=new qe({props:{href:"/err/loading",$$slots:{default:[gb]},$$scope:{ctx:t}}}),Cn=new qe({props:{href:"/err/not_found",$$slots:{default:[bb]},$$scope:{ctx:t}}}),An=new qe({props:{href:"/err/unknown",$$slots:{default:[vb]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment),n=C(),i=g("main"),o=g("p"),r=new Tt(!1),l=C(),a=new Tt(!1),c=C(),p=g("h2"),h=N(d),m=C(),_=g("p"),b=N(y),E=C(),R=g("dl"),j=g("dt"),j.textContent="+",D=g("dd"),T=N(A),P=g("dt"),P.textContent="+@",U=g("dd"),F=N(B),I=g("dt"),I.textContent="+#",z=g("dd"),J=N(x),O=g("dt"),Y=N(L),H=g("dd"),Z=N(V),K=C(),re=g("h2"),ie=N(de),he=C(),Te=g("p"),ke=N(ce),Ie=C(),De=g("dl"),Ne=g("dt"),Ne.textContent="@nick",Me=g("dd"),X=N(je),ge=g("dt"),ge.textContent=":emoji_name",fe=g("dd"),Re=N(He),oe=g("dt"),oe.textContent="/command",ee=g("dd"),ye=N(we),ue=g("dt"),ue.textContent="#conversation",te=g("dd"),ne=N(se),Q=C(),le=g("h2"),_e=N(pe),Ye=C(),Fe=g("p"),kt=N(ot),Lt=C(),at=g("dl"),Zt=g("dt"),Ft=g("dd"),Dn=N(Pn),hi=g("dt"),mi=N(bn),Un=g("dd"),jn=N(Bn),Ot=g("dt"),Pe=N(ae),vn=g("dd"),en=g("dt"),$n=N(tn),nn=g("dd"),wn=g("dt"),wn.textContent="https://...",kn=g("dd"),sn=N(rn),yn=C(),ln=g("h2"),Fn=N(an),es=C(),Wi=g("p"),ts=C(),Ki=g("dl");for(let Oe=0;Oe<Et.length;Oe+=1)Et[Oe].c();ns=C(),Yi=g("h2"),Ro=N(Vi),is=C(),Nt=g("ul"),Mo=g("li"),_i=g("a"),Lo=N(Zi),os=C(),Io=g("li"),gi=g("a"),Po=N(Ji),rs=C(),Do=g("li"),bi=g("a"),Uo=N(Qi),ss=C(),Bo=g("li"),vi=g("a"),jo=N(Xi),ls=C(),On&&On.c(),us=C(),Fo=g("li"),$i=g("a"),zo=N(xi),fs=C(),eo=g("h2"),Ho=N(to),cs=C(),Sn=g("ul"),qo=g("li"),G(En.$$.fragment),ds=C(),Wo=g("li"),G(Cn.$$.fragment),ps=C(),Go=g("li"),G(An.$$.fragment),r.a=l,a.a=null,k(p,"id","quick-search"),k(re,"id","autocomplete"),k(le,"id","formatting"),k(ln,"id","commands"),k(Yi,"id","resources"),k(_i,"href",t[2]),k(_i,"target","_blank"),k(gi,"href","https://convos.chat"),k(gi,"target","_blank"),k(bi,"href","https://github.com/convos-chat/convos/issues"),k(bi,"target","_blank"),k(vi,"href","https://github.com/convos-chat/convos"),k(vi,"target","_blank"),k($i,"href",Ge("contact")),k($i,"target","_blank"),k(eo,"id","fallback"),k(i,"class","main")},m(Oe,ze){q(e,Oe,ze),w(Oe,n,ze),w(Oe,i,ze),f(i,o),r.m(s,o),f(o,l),a.m(u,o),f(i,c),f(i,p),f(p,h),f(i,m),f(i,_),f(_,b),f(i,E),f(i,R),f(R,j),f(R,D),f(D,T),f(R,P),f(R,U),f(U,F),f(R,I),f(R,z),f(z,J),f(R,O),f(O,Y),f(R,H),f(H,Z),f(i,K),f(i,re),f(re,ie),f(i,he),f(i,Te),f(Te,ke),f(i,Ie),f(i,De),f(De,Ne),f(De,Me),f(Me,X),f(De,ge),f(De,fe),f(fe,Re),f(De,oe),f(De,ee),f(ee,ye),f(De,ue),f(De,te),f(te,ne),f(i,Q),f(i,le),f(le,_e),f(i,Ye),f(i,Fe),f(Fe,kt),f(i,Lt),f(i,at),f(at,Zt),Zt.innerHTML=t[3],f(at,Ft),f(Ft,Dn),f(at,hi),f(hi,mi),f(at,Un),f(Un,jn),f(at,Ot),f(Ot,Pe),f(at,vn),vn.innerHTML=xt,f(at,en),f(en,$n),f(at,nn),nn.innerHTML=on,f(at,wn),f(at,kn),f(kn,sn),f(i,yn),f(i,ln),f(ln,Fn),f(i,es),f(i,Wi),Wi.innerHTML=Gi,f(i,ts),f(i,Ki);for(let Hn=0;Hn<Et.length;Hn+=1)Et[Hn].m(Ki,null);f(i,ns),f(i,Yi),f(Yi,Ro),f(i,is),f(i,Nt),f(Nt,Mo),f(Mo,_i),f(_i,Lo),f(Nt,os),f(Nt,Io),f(Io,gi),f(gi,Po),f(Nt,rs),f(Nt,Do),f(Do,bi),f(bi,Uo),f(Nt,ss),f(Nt,Bo),f(Bo,vi),f(vi,jo),f(Nt,ls),On&&On.m(Nt,null),f(Nt,us),f(Nt,Fo),f(Fo,$i),f($i,zo),f(i,fs),f(i,eo),f(eo,Ho),f(i,cs),f(i,Sn),f(Sn,qo),q(En,qo,null),f(Sn,ds),f(Sn,Wo),q(Cn,Wo,null),f(Sn,ps),f(Sn,Go),q(An,Go,null),We=!0},p(Oe,[ze]){const Hn={};if(ze&257&&(Hn.$$scope={dirty:ze,ctx:Oe}),e.$set(Hn),(!We||ze&2)&&s!==(s=Oe[1]('Got any questions? Come and talk to us in the "#convos" channel on https://libera.chat.')+"")&&r.p(s),(!We||ze&2)&&u!==(u=Oe[1]("More information can also be found on https://convos.chat.")+"")&&a.p(u),(!We||ze&1)&&d!==(d=Oe[0]("Quick search")+"")&&M(h,d),(!We||ze&1)&&y!==(y=Oe[0]("Pressing `shift+enter` will shift focus between chat input and search in sidebar.")+"")&&M(b,y),(!We||ze&1)&&A!==(A=Oe[0]("Filter conversations with unread messages.")+"")&&M(T,A),(!We||ze&1)&&B!==(B=Oe[0]("Filter private conversations with unread messages.")+"")&&M(F,B),(!We||ze&1)&&x!==(x=Oe[0]("Filter channels with unread messages.")+"")&&M(J,x),(!We||ze&1)&&L!==(L=Oe[0]("Any other combination")+"")&&M(Y,L),(!We||ze&1)&&V!==(V=Oe[0]("Filter channels, private conversations or search for a string.")+"")&&M(Z,V),(!We||ze&1)&&de!==(de=Oe[0]("Autocomplete")+"")&&M(ie,de),(!We||ze&1)&&ce!==(ce=Oe[0]("The following rules apply when typing a message:")+"")&&M(ke,ce),(!We||ze&1)&&je!==(je=Oe[0]('"@" followed by a character will show matching nicks in the current conversation.')+"")&&M(X,je),(!We||ze&1)&&He!==(He=Oe[0]('":" followed by a character will show matching emojis.')+"")&&M(Re,He),(!We||ze&1)&&we!==(we=Oe[0]('"/" will show the available commands.')+"")&&M(ye,we),(!We||ze&1)&&se!==(se=Oe[0]('"#" will show the matching conversation names.')+"")&&M(ne,se),(!We||ze&1)&&pe!==(pe=Oe[0]("Text formatting")+"")&&M(_e,pe),(!We||ze&1)&&ot!==(ot=Oe[0]("Convos supports some special way of formatting text:")+"")&&M(kt,ot),(!We||ze&1)&&Pn!==(Pn=Oe[0]("Will be automatically converted into emojis.")+"")&&M(Dn,Pn),(!We||ze&1)&&bn!==(bn=Oe[0]("> some text")+"")&&M(mi,bn),(!We||ze&1)&&Bn!==(Bn=Oe[0]('A line starting with ">" will be converted into a quote.')+"")&&M(jn,Bn),(!We||ze&1)&&ae!==(ae=Oe[0]("*some text*, **some text**, ***some text***")+"")&&M(Pe,ae),(!We||ze&2)&&xt!==(xt=Oe[1]('Using "*" around some text, will convert it into *italic*, **bold** or ***italic bold***.')+"")&&(vn.innerHTML=xt),(!We||ze&1)&&tn!==(tn=Oe[0]("`some fragment`")+"")&&M($n,tn),(!We||ze&2)&&on!==(on=Oe[1]("Using backticks around some text, will format it as a `code fragment`.")+"")&&(nn.innerHTML=on),(!We||ze&1)&&rn!==(rn=Oe[0]("URLs will be converted to links, and might be embedded in the chat.")+"")&&M(sn,rn),(!We||ze&1)&&an!==(an=Oe[0]("Available commands")+"")&&M(Fn,an),(!We||ze&2)&&Gi!==(Gi=Oe[1]('Any message starting with a-z is prefixed with "`/quote`", when sending from a connection conversation.')+"")&&(Wi.innerHTML=Gi),ze&1){zn=cn;let It;for(It=0;It<zn.length;It+=1){const gs=ia(Oe,zn,It);Et[It]?Et[It].p(gs,ze):(Et[It]=oa(gs),Et[It].c(),Et[It].m(Ki,null))}for(;It<Et.length;It+=1)Et[It].d(1);Et.length=zn.length}(!We||ze&1)&&Vi!==(Vi=Oe[0]("Other resources")+"")&&M(Ro,Vi),(!We||ze&1)&&Zi!==(Zi=Oe[0]("Changelog for v%1",Ge("version"))+"")&&M(Lo,Zi),(!We||ze&1)&&Ji!==(Ji=Oe[0]("Project homepage")+"")&&M(Po,Ji),(!We||ze&1)&&Qi!==(Qi=Oe[0]("Bug/issue tracker")+"")&&M(Uo,Qi),(!We||ze&1)&&Xi!==(Xi=Oe[0]("Source code")+"")&&M(jo,Xi),as&&On.p(Oe,ze),(!We||ze&1)&&xi!==(xi=Oe[0]("Contact admin")+"")&&M(zo,xi),(!We||ze&1)&&to!==(to=Oe[0]("Demo error pages")+"")&&M(Ho,to);const hs={};ze&256&&(hs.$$scope={dirty:ze,ctx:Oe}),En.$set(hs);const ms={};ze&256&&(ms.$$scope={dirty:ze,ctx:Oe}),Cn.$set(ms);const _s={};ze&256&&(_s.$$scope={dirty:ze,ctx:Oe}),An.$set(_s)},i(Oe){We||(v(e.$$.fragment,Oe),v(En.$$.fragment,Oe),v(Cn.$$.fragment,Oe),v(An.$$.fragment,Oe),We=!0)},o(Oe){S(e.$$.fragment,Oe),S(En.$$.fragment,Oe),S(Cn.$$.fragment,Oe),S(An.$$.fragment,Oe),We=!1},d(Oe){W(e,Oe),Oe&&$(n),Oe&&$(i),$t(Et,Oe),On&&On.d(),W(En),W(Cn),W(An)}}}function wb(t,e,n){let i,o;Ee(t,lt,a=>n(0,i=a)),Ee(t,jt,a=>n(1,o=a));const r="Help",s="https://github.com/convos-chat/convos/blob/v"+Ge("version")+"/Changes#L3",l=Object.keys(xe.emojis.aliases).sort().join(", ");return[i,o,s,l,r]}class kb extends Xe{constructor(e){super(),Qe(this,e,wb,$b,Ze,{title:4})}get title(){return this.$$.ctx[4]}}function ra(t,e,n){const i=t.slice();return i[22]=e[n],i}function yb(t){let e,n=t[2]("Sign up")+"",i,o,r,s=t[2]("Please ask your Convos admin for an invite link to sign up, or sign in if you already have an account.")+"",l,a,u,c,p,d,h=t[2]("Contact admin")+"",m,_,y,b;return p=new be({props:{name:"paper-plane"}}),y=new qe({props:{href:"/login",$$slots:{default:[Ab]},$$scope:{ctx:t}}}),{c(){e=g("h2"),i=N(n),o=C(),r=g("p"),l=N(s),a=C(),u=g("div"),c=g("a"),G(p.$$.fragment),d=C(),m=N(h),_=C(),G(y.$$.fragment),k(c,"class","btn"),k(c,"href",Ge("contact")),k(u,"class","form-actions")},m(E,R){w(E,e,R),f(e,i),w(E,o,R),w(E,r,R),f(r,l),w(E,a,R),w(E,u,R),f(u,c),q(p,c,null),f(c,d),f(c,m),f(u,_),q(y,u,null),b=!0},p(E,R){(!b||R&4)&&n!==(n=E[2]("Sign up")+"")&&M(i,n),(!b||R&4)&&s!==(s=E[2]("Please ask your Convos admin for an invite link to sign up, or sign in if you already have an account.")+"")&&M(l,s),(!b||R&4)&&h!==(h=E[2]("Contact admin")+"")&&M(m,h);const j={};R&33554436&&(j.$$scope={dirty:R,ctx:E}),y.$set(j)},i(E){b||(v(p.$$.fragment,E),v(y.$$.fragment,E),b=!0)},o(E){S(p.$$.fragment,E),S(y.$$.fragment,E),b=!1},d(E){E&&$(e),E&&$(o),E&&$(r),E&&$(a),E&&$(u),W(p),W(y)}}}function Sb(t){let e,n=t[2]("Sign in")+"",i,o,r,s,l,a,u,c,p,d,h,m,_,y,b;function E(A){t[17](A)}let R={type:"email",name:"email",placeholder:t[2]("Ex: john@doe.com"),$$slots:{label:[Ob]},$$scope:{ctx:t}};t[0].email!==void 0&&(R.value=t[0].email),r=new Ve({props:R}),me.push(()=>$e(r,"value",E));function j(A){t[18](A)}let D={type:"password",name:"password",autocomplete:"current-password",$$slots:{help:[Tb],label:[Nb]},$$scope:{ctx:t}};return t[0].password!==void 0&&(D.value=t[0].password),a=new Ve({props:D}),me.push(()=>$e(a,"value",j)),d=new ft({props:{icon:"sign-in-alt",op:t[6],$$slots:{default:[Rb]},$$scope:{ctx:t}}}),m=new qe({props:{href:"/register",$$slots:{default:[Mb]},$$scope:{ctx:t}}}),y=new Rt({props:{op:t[6],success:"Loading Convos..."}}),{c(){e=g("h2"),i=N(n),o=C(),G(r.$$.fragment),l=C(),G(a.$$.fragment),c=C(),p=g("div"),G(d.$$.fragment),h=C(),G(m.$$.fragment),_=C(),G(y.$$.fragment),k(p,"class","form-actions")},m(A,T){w(A,e,T),f(e,i),w(A,o,T),q(r,A,T),w(A,l,T),q(a,A,T),w(A,c,T),w(A,p,T),q(d,p,null),f(p,h),q(m,p,null),w(A,_,T),q(y,A,T),b=!0},p(A,T){(!b||T&4)&&n!==(n=A[2]("Sign in")+"")&&M(i,n);const P={};T&4&&(P.placeholder=A[2]("Ex: john@doe.com")),T&33554436&&(P.$$scope={dirty:T,ctx:A}),!s&&T&1&&(s=!0,P.value=A[0].email,ve(()=>s=!1)),r.$set(P);const U={};T&33554444&&(U.$$scope={dirty:T,ctx:A}),!u&&T&1&&(u=!0,U.value=A[0].password,ve(()=>u=!1)),a.$set(U);const B={};T&33554436&&(B.$$scope={dirty:T,ctx:A}),d.$set(B);const F={};T&33554436&&(F.$$scope={dirty:T,ctx:A}),m.$set(F)},i(A){b||(v(r.$$.fragment,A),v(a.$$.fragment,A),v(d.$$.fragment,A),v(m.$$.fragment,A),v(y.$$.fragment,A),b=!0)},o(A){S(r.$$.fragment,A),S(a.$$.fragment,A),S(d.$$.fragment,A),S(m.$$.fragment,A),S(y.$$.fragment,A),b=!1},d(A){A&&$(e),A&&$(o),W(r,A),A&&$(l),W(a,A),A&&$(c),A&&$(p),W(d),W(m),A&&$(_),W(y,A)}}}function Eb(t){let e,n=(t[1]==="recover"?t[2]("Recover account"):t[2]("Sign up"))+"",i,o,r=Ge("first_user"),s,l,a,u,c,p,d,h,m,_,y,b,E,R,j=!Ge("first_user"),D,A,T,P,U,B=r&&Lb(t);function F(O){t[15](O)}let I={type:"email",name:"email",placeholder:t[2]("Ex: john@doe.com"),readonly:t[1]!=="register",$$slots:{help:[Pb],label:[Ib]},$$scope:{ctx:t}};t[0].email!==void 0&&(I.value=t[0].email),p=new Ve({props:I}),me.push(()=>$e(p,"value",F));function z(O){t[16](O)}let x={type:"password",name:"password",$$slots:{help:[Ub],label:[Db]},$$scope:{ctx:t}};t[0].password!==void 0&&(x.value=t[0].password),m=new Ve({props:x}),me.push(()=>$e(m,"value",z)),E=new ft({props:{icon:"save",op:t[7],$$slots:{default:[Bb]},$$scope:{ctx:t}}});let J=j&&jb(t);return A=new Rt({props:{op:t[7],success:"Loading Convos..."}}),{c(){e=g("h2"),i=N(n),o=C(),B&&B.c(),s=C(),l=g("input"),a=C(),u=g("input"),c=C(),G(p.$$.fragment),h=C(),G(m.$$.fragment),y=C(),b=g("div"),G(E.$$.fragment),R=C(),J&&J.c(),D=C(),G(A.$$.fragment),k(l,"type","hidden"),k(l,"name","exp"),k(u,"type","hidden"),k(u,"name","token"),k(b,"class","form-actions")},m(O,L){w(O,e,L),f(e,i),w(O,o,L),B&&B.m(O,L),w(O,s,L),w(O,l,L),Ct(l,t[0].exp),w(O,a,L),w(O,u,L),Ct(u,t[0].token),w(O,c,L),q(p,O,L),w(O,h,L),q(m,O,L),w(O,y,L),w(O,b,L),q(E,b,null),f(b,R),J&&J.m(b,null),w(O,D,L),q(A,O,L),T=!0,P||(U=[Se(l,"input",t[13]),Se(u,"input",t[14])],P=!0)},p(O,L){(!T||L&6)&&n!==(n=(O[1]==="recover"?O[2]("Recover account"):O[2]("Sign up"))+"")&&M(i,n),r&&B.p(O,L),L&1&&Ct(l,O[0].exp),L&1&&Ct(u,O[0].token);const Y={};L&4&&(Y.placeholder=O[2]("Ex: john@doe.com")),L&2&&(Y.readonly=O[1]!=="register"),L&33554438&&(Y.$$scope={dirty:L,ctx:O}),!d&&L&1&&(d=!0,Y.value=O[0].email,ve(()=>d=!1)),p.$set(Y);const H={};L&33554436&&(H.$$scope={dirty:L,ctx:O}),!_&&L&1&&(_=!0,H.value=O[0].password,ve(()=>_=!1)),m.$set(H);const V={};L&33554438&&(V.$$scope={dirty:L,ctx:O}),E.$set(V),j&&J.p(O,L)},i(O){T||(v(p.$$.fragment,O),v(m.$$.fragment,O),v(E.$$.fragment,O),v(J),v(A.$$.fragment,O),T=!0)},o(O){S(p.$$.fragment,O),S(m.$$.fragment,O),S(E.$$.fragment,O),S(J),S(A.$$.fragment,O),T=!1},d(O){O&&$(e),O&&$(o),B&&B.d(O),O&&$(s),O&&$(l),O&&$(a),O&&$(u),O&&$(c),W(p,O),O&&$(h),W(m,O),O&&$(y),O&&$(b),W(E),J&&J.d(),O&&$(D),W(A,O),P=!1,st(U)}}}function Cb(t){let e,n=t[2]("Invalid invite/recover URL")+"",i,o,r,s=t[2](Ge("status")==410?"The link has expired.":"The link is invalid.")+"",l,a,u,c=t[2]("Please ask your Convos admin for a new link.")+"",p,d,h,m,_=t[2]("Contact admin")+"",y,b,E,R;return E=new qe({props:{href:"/login",$$slots:{default:[zb]},$$scope:{ctx:t}}}),{c(){e=g("h2"),i=N(n),o=C(),r=g("p"),l=N(s),a=C(),u=g("p"),p=N(c),d=C(),h=g("p"),m=g("a"),y=N(_),b=C(),G(E.$$.fragment),k(m,"class","btn"),k(m,"href",Ge("contact"))},m(j,D){w(j,e,D),f(e,i),w(j,o,D),w(j,r,D),f(r,l),w(j,a,D),w(j,u,D),f(u,p),w(j,d,D),w(j,h,D),f(h,m),f(m,y),f(h,b),q(E,h,null),R=!0},p(j,D){(!R||D&4)&&n!==(n=j[2]("Invalid invite/recover URL")+"")&&M(i,n),(!R||D&4)&&s!==(s=j[2](Ge("status")==410?"The link has expired.":"The link is invalid.")+"")&&M(l,s),(!R||D&4)&&c!==(c=j[2]("Please ask your Convos admin for a new link.")+"")&&M(p,c),(!R||D&4)&&_!==(_=j[2]("Contact admin")+"")&&M(y,_);const A={};D&33554436&&(A.$$scope={dirty:D,ctx:j}),E.$set(A)},i(j){R||(v(E.$$.fragment,j),R=!0)},o(j){S(E.$$.fragment,j),R=!1},d(j){j&&$(e),j&&$(o),j&&$(r),j&&$(a),j&&$(u),j&&$(d),j&&$(h),W(E)}}}function Ab(t){let e=t[2]("Sign in")+"",n;return{c(){n=N(e)},m(i,o){w(i,n,o)},p(i,o){o&4&&e!==(e=i[2]("Sign in")+"")&&M(n,e)},d(i){i&&$(n)}}}function Ob(t){let e,n=t[2]("Email")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Email")+"")&&M(i,n)},d(o){o&&$(e)}}}function Nb(t){let e,n=t[2]("Password")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Password")+"")&&M(i,n)},d(o){o&&$(e)}}}function Tb(t){let e,n=t[3]("Contact your [Convos admin](%1) if you have forgotten your password.",Ge("contact"))+"";return{c(){e=g("p"),k(e,"class","help"),k(e,"slot","help")},m(i,o){w(i,e,o),e.innerHTML=n},p(i,o){o&8&&n!==(n=i[3]("Contact your [Convos admin](%1) if you have forgotten your password.",Ge("contact"))+"")&&(e.innerHTML=n)},d(i){i&&$(e)}}}function Rb(t){let e,n=t[2]("Sign in")+"",i;return{c(){e=g("span"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Sign in")+"")&&M(i,n)},d(o){o&&$(e)}}}function Mb(t){let e=t[2]("Sign up")+"",n;return{c(){n=N(e)},m(i,o){w(i,n,o)},p(i,o){o&4&&e!==(e=i[2]("Sign up")+"")&&M(n,e)},d(i){i&&$(n)}}}function Lb(t){let e,n=t[2]('As you are the first user, you do not need any invitation link. Just fill in the form below, hit "Sign up" to start chatting.')+"",i;return{c(){e=g("p"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]('As you are the first user, you do not need any invitation link. Just fill in the form below, hit "Sign up" to start chatting.')+"")&&M(i,n)},d(o){o&&$(e)}}}function Ib(t){let e,n=t[2]("Email")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Email")+"")&&M(i,n)},d(o){o&&$(e)}}}function Pb(t){let e,n=(t[1]==="invitation"?t[2]("Your email is from the invite link."):t[2]("Your email will be used if you forget your password."))+"",i;return{c(){e=g("p"),i=N(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&6&&n!==(n=(o[1]==="invitation"?o[2]("Your email is from the invite link."):o[2]("Your email will be used if you forget your password."))+"")&&M(i,n)},d(o){o&&$(e)}}}function Db(t){let e,n=t[2]("Password")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Password")+"")&&M(i,n)},d(o){o&&$(e)}}}function Ub(t){let e,n=t[2]("Hint: Use a phrase from a book.")+"",i;return{c(){e=g("p"),i=N(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Hint: Use a phrase from a book.")+"")&&M(i,n)},d(o){o&&$(e)}}}function Bb(t){let e,n=(t[1]==="recover"?t[2]("Set new password"):t[2]("Sign up"))+"",i;return{c(){e=g("span"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&6&&n!==(n=(o[1]==="recover"?o[2]("Set new password"):o[2]("Sign up"))+"")&&M(i,n)},d(o){o&&$(e)}}}function jb(t){let e,n;return e=new qe({props:{href:"/login",$$slots:{default:[Fb]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o&33554436&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function Fb(t){let e=t[2]("Sign in")+"",n;return{c(){n=N(e)},m(i,o){w(i,n,o)},p(i,o){o&4&&e!==(e=i[2]("Sign in")+"")&&M(n,e)},d(i){i&&$(n)}}}function zb(t){let e=t[2]("Sign in")+"",n;return{c(){n=N(e)},m(i,o){w(i,n,o)},p(i,o){o&4&&e!==(e=i[2]("Sign in")+"")&&M(n,e)},d(i){i&&$(n)}}}function sa(t){let e,n=t[22][1]+"",i,o,r,s;function l(){return t[19](t[22])}return{c(){e=g("a"),i=N(n),k(e,"href",o="#"+t[22][0])},m(a,u){w(a,e,u),f(e,i),r||(s=Se(e,"click",l),r=!0)},p(a,u){t=a,u&16&&n!==(n=t[22][1]+"")&&M(i,n),u&16&&o!==(o="#"+t[22][0])&&k(e,"href",o)},d(a){a&&$(e),r=!1,s()}}}function Hb(t){let e,n,i,o,r,s,l,a,u,c,p,d,h,m,_;const y=[Cb,Eb,Sb,yb],b=[];function E(D,A){return A&2&&(r=null),D[1]==="invalid_invitation"?0:(r==null&&(r=["recover","invitation","register"].indexOf(D[1])!==-1),r?1:D[1]==="login"?2:3)}s=E(t,-1),l=b[s]=y[s](t),p=new be({props:{name:"globe"}});let R=t[4].languageOptions,j=[];for(let D=0;D<R.length;D+=1)j[D]=sa(ra(t,R,D));return{c(){e=g("main"),n=g("form"),i=g("input"),o=C(),l.c(),a=C(),u=g("div"),c=g("footer"),G(p.$$.fragment),d=C();for(let D=0;D<j.length;D+=1)j[D].c();k(i,"type","hidden"),k(i,"name","mode"),k(n,"method","post"),k(e,"class","cms-main"),k(c,"class","footer language-selector"),k(u,"class","footer--wrapper is-small")},m(D,A){w(D,e,A),f(e,n),f(n,i),Ct(i,t[0].mode),f(n,o),b[s].m(n,null),w(D,a,A),w(D,u,A),f(u,c),q(p,c,null),f(c,d);for(let T=0;T<j.length;T+=1)j[T].m(c,null);h=!0,m||(_=[Se(i,"input",t[12]),Se(n,"submit",rt(t[8]))],m=!0)},p(D,[A]){A&1&&Ct(i,D[0].mode);let T=s;if(s=E(D,A),s===T?b[s].p(D,A):(Ce(),S(b[T],1,1,()=>{b[T]=null}),Ae(),l=b[s],l?l.p(D,A):(l=b[s]=y[s](D),l.c()),v(l,1),l.m(n,null)),A&16){R=D[4].languageOptions;let P;for(P=0;P<R.length;P+=1){const U=ra(D,R,P);j[P]?j[P].p(U,A):(j[P]=sa(U),j[P].c(),j[P].m(c,null))}for(;P<j.length;P+=1)j[P].d(1);j.length=R.length}},i(D){h||(v(l),v(p.$$.fragment,D),h=!0)},o(D){S(l),S(p.$$.fragment,D),h=!1},d(D){D&&$(e),b[s].d(),D&&$(a),D&&$(u),W(p),$t(j,D),m=!1,st(_)}}}function qb(t,e,n){let i,o,r,s,l,a;Ee(t,Be,U=>n(10,o=U)),Ee(t,lt,U=>n(2,s=U)),Ee(t,jt,U=>n(3,l=U)),Ee(t,xe,U=>n(4,a=U));let{title:u="Sign in"}=e;const c=pt("user");Ee(t,c,U=>n(11,r=U));const p=et.op("loginUser"),d=et.op("registerUser");let h={};function m(U){if(U.is("loading")||!U.email)return;const B=U.conversations()[0],F=U.lastUrl?U.lastUrl:B?B.path:"/settings/connections";Be.go(F,{replace:!0})}function _(U){const B=U.path.indexOf("register")!==-1,F=!h.mode&&Ge("status")>=400?"invalid_invitation":U.param("email")&&Ge("existing_user")?"recover":U.param("email")?"invitation":Ge("first_user")||B&&Ge("open_to_public")?"register":B?"invalid":"login";return n(0,h={email:U.param("email")||h.email||"",exp:U.param("exp")||"",mode:F,password:"",token:U.param("token")||""}),n(9,u=F==="login"?"Sign in":"Sign up"),"ontouchstart"in window||setTimeout(()=>gt(document,".text-field input").reverse().map(I=>I.readOnly||I.focus()),1),F}async function y(U){const B=i==="login"?p:d,F=U.target.closest("form");n(0,h.email=F.email.value,h),n(0,h.password=F.password.value,h),await B.perform(h),i!=="login"&&Be.update({lastUrl:""}),B.error()||await c.load()}function b(){h.mode=this.value,n(0,h)}function E(){h.exp=this.value,n(0,h)}function R(){h.token=this.value,n(0,h)}function j(U){t.$$.not_equal(h.email,U)&&(h.email=U,n(0,h))}function D(U){t.$$.not_equal(h.password,U)&&(h.password=U,n(0,h))}function A(U){t.$$.not_equal(h.email,U)&&(h.email=U,n(0,h))}function T(U){t.$$.not_equal(h.password,U)&&(h.password=U,n(0,h))}const P=U=>a.load(U[0]);return t.$$set=U=>{"title"in U&&n(9,u=U.title)},t.$$.update=()=>{t.$$.dirty&2048&&m(r),t.$$.dirty&1024&&n(1,i=_(o))},[h,i,s,l,a,c,p,d,y,u,o,r,b,E,R,j,D,A,T,P]}class Hu extends Xe{constructor(e){super(),Qe(this,e,qb,Hb,Ze,{title:9})}}function la(t,e,n){const i=t.slice();return i[8]=e[n],i[10]=n,i}function Wb(t){let e,n;return e=new be({props:{name:"user-cog"}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p:Le,i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function Gb(t){let e,n=t[3]("Notifications")+"",i,o,r,s;return r=new qe({props:{href:"/settings/account",class:"btn-hallow",$$slots:{default:[Wb]},$$scope:{ctx:t}}}),{c(){e=g("h1"),i=N(n),o=C(),G(r.$$.fragment)},m(l,a){w(l,e,a),f(e,i),w(l,o,a),q(r,l,a),s=!0},p(l,a){(!s||a&8)&&n!==(n=l[3]("Notifications")+"")&&M(i,n);const u={};a&2048&&(u.$$scope={dirty:a,ctx:l}),r.$set(u)},i(l){s||(v(r.$$.fragment,l),s=!0)},o(l){S(r.$$.fragment,l),s=!1},d(l){l&&$(e),l&&$(o),W(r,l)}}}function aa(t){let e,n=t[3]("No notifications.")+"",i;return{c(){e=g("h2"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&8&&n!==(n=o[3]("No notifications.")+"")&&M(i,n)},d(o){o&&$(e)}}}function ua(t){let e,n,i,o,r,s=t[8].ts.getHumanDate()+"",l,a;return i=new be({props:{name:"calendar-alt"}}),{c(){e=g("div"),n=g("span"),G(i.$$.fragment),o=C(),r=g("i"),l=N(s),k(e,"class","message__status-line for-day-changed")},m(u,c){w(u,e,c),f(e,n),q(i,n,null),f(n,o),f(n,r),f(r,l),a=!0},p(u,c){(!a||c&16)&&s!==(s=u[8].ts.getHumanDate()+"")&&M(l,s)},i(u){a||(v(i.$$.fragment,u),a=!0)},o(u){S(i.$$.fragment,u),a=!1},d(u){u&&$(e),W(i)}}}function fa(t){let e,n,i,o,r,s,l=t[8].ts.format("%H:%M")+"",a,u,c,p=At(t[8].ts.toLocaleString())+"",d,h,m,_=t[3]("%1 in %2",t[8].from,t[8].conversation_id)+"",y,b,E,R,j=t[8].html+"",D,A,T,P,U=(!t[10]||t[8].dayChanged)&&ua(t);return i=new be({props:{name:"pick:"+t[8].from,color:t[8].color}}),{c(){U&&U.c(),e=C(),n=g("div"),G(i.$$.fragment),o=C(),r=g("div"),s=g("span"),a=N(l),u=C(),c=g("span"),d=N(p),h=C(),m=g("a"),y=N(_),E=C(),R=g("div"),k(c,"class","tooltip"),k(r,"class","message__ts has-tooltip"),k(m,"href",b=ko(t[8])),k(m,"class","message__from"),Pt(m,"color",t[8].color),k(R,"class","message__text"),k(n,"class",D=t[8].className)},m(B,F){U&&U.m(B,F),w(B,e,F),w(B,n,F),q(i,n,null),f(n,o),f(n,r),f(r,s),f(s,a),f(r,u),f(r,c),f(c,d),f(n,h),f(n,m),f(m,y),f(n,E),f(n,R),R.innerHTML=j,A=!0,T||(P=Se(n,"click",ju),T=!0)},p(B,F){!B[10]||B[8].dayChanged?U?(U.p(B,F),F&16&&v(U,1)):(U=ua(B),U.c(),v(U,1),U.m(e.parentNode,e)):U&&(Ce(),S(U,1,1,()=>{U=null}),Ae());const I={};F&16&&(I.name="pick:"+B[8].from),F&16&&(I.color=B[8].color),i.$set(I),(!A||F&16)&&l!==(l=B[8].ts.format("%H:%M")+"")&&M(a,l),(!A||F&16)&&p!==(p=At(B[8].ts.toLocaleString())+"")&&M(d,p),(!A||F&24)&&_!==(_=B[3]("%1 in %2",B[8].from,B[8].conversation_id)+"")&&M(y,_),(!A||F&16&&b!==(b=ko(B[8])))&&k(m,"href",b),(!A||F&16)&&Pt(m,"color",B[8].color),(!A||F&16)&&j!==(j=B[8].html+"")&&(R.innerHTML=j),(!A||F&16&&D!==(D=B[8].className))&&k(n,"class",D)},i(B){A||(v(U),v(i.$$.fragment,B),A=!0)},o(B){S(U),S(i.$$.fragment,B),A=!1},d(B){U&&U.d(B),B&&$(e),B&&$(n),W(i),T=!1,P()}}}function ca(t){let e,n,i,o,r,s=t[3]("Loading...")+"",l,a;return i=new be({props:{name:"spinner",animation:"spin"}}),{c(){e=g("div"),n=g("span"),G(i.$$.fragment),o=C(),r=g("i"),l=N(s),k(e,"class","message__status-line for-loading")},m(u,c){w(u,e,c),f(e,n),q(i,n,null),f(n,o),f(n,r),f(r,l),a=!0},p(u,c){(!a||c&8)&&s!==(s=u[3]("Loading...")+"")&&M(l,s)},i(u){a||(v(i.$$.fragment,u),a=!0)},o(u){S(i.$$.fragment,u),a=!1},d(u){u&&$(e),W(i)}}}function Kb(t){let e=t[4].length===0&&!t[5].is("loading"),n,i,o=t[1].is("loading"),r,s,l=e&&aa(t),a=t[4].render(),u=[];for(let d=0;d<a.length;d+=1)u[d]=fa(la(t,a,d));const c=d=>S(u[d],1,1,()=>{u[d]=null});let p=o&&ca(t);return{c(){l&&l.c(),n=C();for(let d=0;d<u.length;d+=1)u[d].c();i=C(),p&&p.c(),r=ct()},m(d,h){l&&l.m(d,h),w(d,n,h);for(let m=0;m<u.length;m+=1)u[m].m(d,h);w(d,i,h),p&&p.m(d,h),w(d,r,h),s=!0},p(d,h){if(h&16&&(e=d[4].length===0&&!d[5].is("loading")),e?l?l.p(d,h):(l=aa(d),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null),h&24){a=d[4].render();let m;for(m=0;m<a.length;m+=1){const _=la(d,a,m);u[m]?(u[m].p(_,h),v(u[m],1)):(u[m]=fa(_),u[m].c(),v(u[m],1),u[m].m(i.parentNode,i))}for(Ce(),m=a.length;m<u.length;m+=1)c(m);Ae()}h&2&&(o=d[1].is("loading")),o?p?(p.p(d,h),h&2&&v(p,1)):(p=ca(d),p.c(),v(p,1),p.m(r.parentNode,r)):p&&(Ce(),S(p,1,1,()=>{p=null}),Ae())},i(d){if(!s){for(let h=0;h<a.length;h+=1)v(u[h]);v(p),s=!0}},o(d){u=u.filter(Boolean);for(let h=0;h<u.length;h+=1)S(u[h]);S(p),s=!1},d(d){l&&l.d(d),d&&$(n),$t(u,d),d&&$(i),p&&p.d(d),d&&$(r)}}}function Yb(t){let e,n,i,o;return e=new Ut({props:{$$slots:{default:[Gb]},$$scope:{ctx:t}}}),i=new Kr({props:{class:t[2].join(" "),$$slots:{default:[Kb]},$$scope:{ctx:t}}}),i.$on("rendered",Vb),{c(){G(e.$$.fragment),n=C(),G(i.$$.fragment)},m(r,s){q(e,r,s),w(r,n,s),q(i,r,s),o=!0},p(r,[s]){const l={};s&2056&&(l.$$scope={dirty:s,ctx:r}),e.$set(l);const a={};s&4&&(a.class=r[2].join(" ")),s&2074&&(a.$$scope={dirty:s,ctx:r}),i.$set(a)},i(r){o||(v(e.$$.fragment,r),v(i.$$.fragment,r),o=!0)},o(r){S(e.$$.fragment,r),S(i.$$.fragment,r),o=!1},d(r){W(e,r),r&&$(n),W(i,r)}}}const Vb=t=>t.detail.scrollTo(-1);function Zb(t,e,n){let i,o,r,s,l,a=Le,u=()=>(a(),a=St(o,h=>n(4,l=h)),o);Ee(t,lt,h=>n(3,s=h)),t.$$.on_destroy.push(()=>a());const c="Notifications",d=pt("user").notifications;return Ee(t,d,h=>n(1,r=h)),Bt(async()=>{await d.load(),await d.markAsRead()}),t.$$.update=()=>{t.$$.dirty&2&&u(n(0,o=r.messages)),t.$$.dirty&1&&n(2,i=["main",o.length&&"has-results"].filter(h=>h))},[o,r,i,s,l,d,c]}class Jb extends Xe{constructor(e){super(),Qe(this,e,Zb,Yb,Ze,{title:6})}get title(){return this.$$.ctx[6]}}function da(t,e,n){const i=t.slice();return i[13]=e[n],i[15]=n,i}function Qb(t){let e,n,i,o,r=t[6]("Clear")+"",s,l;return e=new be({props:{name:"search"}}),n=new be({props:{name:"times"}}),{c(){G(e.$$.fragment),G(n.$$.fragment),i=C(),o=g("span"),s=N(r),k(o,"class","tooltip is-left")},m(a,u){q(e,a,u),q(n,a,u),w(a,i,u),w(a,o,u),f(o,s),l=!0},p(a,u){(!l||u&64)&&r!==(r=a[6]("Clear")+"")&&M(s,r)},i(a){l||(v(e.$$.fragment,a),v(n.$$.fragment,a),l=!0)},o(a){S(e.$$.fragment,a),S(n.$$.fragment,a),l=!1},d(a){W(e,a),W(n,a),a&&$(i),a&&$(o)}}}function Xb(t){let e,n=t[6](t[8].name)+"",i,o,r,s;return r=new qe({props:{href:"/search",class:"btn-hallow can-toggle "+(t[4]?"has-tooltip is-active":""),$$slots:{default:[Qb]},$$scope:{ctx:t}}}),r.$on("click",t[9]),{c(){e=g("h1"),i=N(n),o=C(),G(r.$$.fragment)},m(l,a){w(l,e,a),f(e,i),w(l,o,a),q(r,l,a),s=!0},p(l,a){(!s||a&64)&&n!==(n=l[6](l[8].name)+"")&&M(i,n);const u={};a&16&&(u.class="btn-hallow can-toggle "+(l[4]?"has-tooltip is-active":"")),a&65600&&(u.$$scope={dirty:a,ctx:l}),r.$set(u)},i(l){s||(v(r.$$.fragment,l),s=!0)},o(l){S(r.$$.fragment,l),s=!1},d(l){l&&$(e),l&&$(o),W(r,l)}}}function pa(t){let e,n,i,o,r;const s=[e1,xb],l=[];function a(u,c){return c&4&&(e=null),e==null&&(e=!!u[2].param("q")),e?0:1}return n=a(t,-1),i=l[n]=s[n](t),{c(){i.c(),o=ct()},m(u,c){l[n].m(u,c),w(u,o,c),r=!0},p(u,c){let p=n;n=a(u,c),n===p?l[n].p(u,c):(Ce(),S(l[p],1,1,()=>{l[p]=null}),Ae(),i=l[n],i?i.p(u,c):(i=l[n]=s[n](u),i.c()),v(i,1),i.m(o.parentNode,o))},i(u){r||(v(i),r=!0)},o(u){S(i),r=!1},d(u){l[n].d(u),u&&$(o)}}}function xb(t){let e,n,i,o,r=t[7]("You can enter a channel name like #cool_beans to narrow down the search, or enter @some_nick to filter messages sent by a given user.")+"",s;return n=new be({props:{name:"info-circle"}}),{c(){e=g("p"),G(n.$$.fragment),i=C(),o=new Tt(!1),o.a=null},m(l,a){w(l,e,a),q(n,e,null),f(e,i),o.m(r,e),s=!0},p(l,a){(!s||a&128)&&r!==(r=l[7]("You can enter a channel name like #cool_beans to narrow down the search, or enter @some_nick to filter messages sent by a given user.")+"")&&o.p(r)},i(l){s||(v(n.$$.fragment,l),s=!0)},o(l){S(n.$$.fragment,l),s=!1},d(l){l&&$(e),W(n)}}}function e1(t){let e,n,i,o=t[6]('No search results for "%1".',t[2].param("q"))+"",r,s;return n=new be({props:{name:"info-circle"}}),{c(){e=g("p"),G(n.$$.fragment),i=C(),r=N(o)},m(l,a){w(l,e,a),q(n,e,null),f(e,i),f(e,r),s=!0},p(l,a){(!s||a&68)&&o!==(o=l[6]('No search results for "%1".',l[2].param("q"))+"")&&M(r,o)},i(l){s||(v(n.$$.fragment,l),s=!0)},o(l){S(n.$$.fragment,l),s=!1},d(l){l&&$(e),W(n)}}}function ha(t){let e,n,i,o,r,s=t[13].ts.getHumanDate()+"",l,a;return i=new be({props:{name:"calendar-alt"}}),{c(){e=g("div"),n=g("span"),G(i.$$.fragment),o=C(),r=g("i"),l=N(s),k(e,"class","message__status-line for-day-changed")},m(u,c){w(u,e,c),f(e,n),q(i,n,null),f(n,o),f(n,r),f(r,l),a=!0},p(u,c){(!a||c&2)&&s!==(s=u[13].ts.getHumanDate()+"")&&M(l,s)},i(u){a||(v(i.$$.fragment,u),a=!0)},o(u){S(i.$$.fragment,u),a=!1},d(u){u&&$(e),W(i)}}}function ma(t){let e,n,i,o,r,s,l=t[13].ts.format("%H:%M")+"",a,u,c,p=At(t[13].ts.toLocaleString())+"",d,h,m,_=t[6]("%1 in %2",t[13].from,t[13].conversation_id)+"",y,b,E,R,j=t[13].html+"",D,A,T,P,U,B=(!t[15]||t[13].dayChanged)&&ha(t);return i=new be({props:{name:"pick:"+t[13].from,color:t[13].color}}),{c(){B&&B.c(),e=C(),n=g("div"),G(i.$$.fragment),o=C(),r=g("div"),s=g("span"),a=N(l),u=C(),c=g("span"),d=N(p),h=C(),m=g("a"),y=N(_),E=C(),R=g("div"),D=C(),k(c,"class","tooltip"),k(r,"class","message__ts has-tooltip"),k(m,"href",b=ko(t[13])),k(m,"class","message__from"),Pt(m,"color",t[13].color),k(R,"class","message__text"),k(n,"class",A=t[13].className)},m(F,I){B&&B.m(F,I),w(F,e,I),w(F,n,I),q(i,n,null),f(n,o),f(n,r),f(r,s),f(s,a),f(r,u),f(r,c),f(c,d),f(n,h),f(n,m),f(m,y),f(n,E),f(n,R),R.innerHTML=j,f(n,D),T=!0,P||(U=Se(n,"click",ju),P=!0)},p(F,I){!F[15]||F[13].dayChanged?B?(B.p(F,I),I&2&&v(B,1)):(B=ha(F),B.c(),v(B,1),B.m(e.parentNode,e)):B&&(Ce(),S(B,1,1,()=>{B=null}),Ae());const z={};I&2&&(z.name="pick:"+F[13].from),I&2&&(z.color=F[13].color),i.$set(z),(!T||I&2)&&l!==(l=F[13].ts.format("%H:%M")+"")&&M(a,l),(!T||I&2)&&p!==(p=At(F[13].ts.toLocaleString())+"")&&M(d,p),(!T||I&66)&&_!==(_=F[6]("%1 in %2",F[13].from,F[13].conversation_id)+"")&&M(y,_),(!T||I&2&&b!==(b=ko(F[13])))&&k(m,"href",b),(!T||I&2)&&Pt(m,"color",F[13].color),(!T||I&2)&&j!==(j=F[13].html+"")&&(R.innerHTML=j),(!T||I&2&&A!==(A=F[13].className))&&k(n,"class",A)},i(F){T||(v(B),v(i.$$.fragment,F),T=!0)},o(F){S(B),S(i.$$.fragment,F),T=!1},d(F){B&&B.d(F),F&&$(e),F&&$(n),W(i),P=!1,U()}}}function _a(t){let e,n,i,o,r,s=t[6]("Loading...")+"",l,a;return i=new be({props:{name:"spinner",animation:"spin"}}),{c(){e=g("div"),n=g("span"),G(i.$$.fragment),o=C(),r=g("i"),l=N(s),k(e,"class","message__status-line for-loading")},m(u,c){w(u,e,c),f(e,n),q(i,n,null),f(n,o),f(n,r),f(r,l),a=!0},p(u,c){(!a||c&64)&&s!==(s=u[6]("Loading...")+"")&&M(l,s)},i(u){a||(v(i.$$.fragment,u),a=!0)},o(u){S(i.$$.fragment,u),a=!1},d(u){u&&$(e),W(i)}}}function t1(t){let e=t[1].length===0&&!t[8].is("loading"),n,i,o=t[3].is("loading"),r,s,l=e&&pa(t),a=t[1].render(),u=[];for(let d=0;d<a.length;d+=1)u[d]=ma(da(t,a,d));const c=d=>S(u[d],1,1,()=>{u[d]=null});let p=o&&_a(t);return{c(){l&&l.c(),n=C();for(let d=0;d<u.length;d+=1)u[d].c();i=C(),p&&p.c(),r=ct()},m(d,h){l&&l.m(d,h),w(d,n,h);for(let m=0;m<u.length;m+=1)u[m].m(d,h);w(d,i,h),p&&p.m(d,h),w(d,r,h),s=!0},p(d,h){if(h&2&&(e=d[1].length===0&&!d[8].is("loading")),e?l?(l.p(d,h),h&2&&v(l,1)):(l=pa(d),l.c(),v(l,1),l.m(n.parentNode,n)):l&&(Ce(),S(l,1,1,()=>{l=null}),Ae()),h&66){a=d[1].render();let m;for(m=0;m<a.length;m+=1){const _=da(d,a,m);u[m]?(u[m].p(_,h),v(u[m],1)):(u[m]=ma(_),u[m].c(),v(u[m],1),u[m].m(i.parentNode,i))}for(Ce(),m=a.length;m<u.length;m+=1)c(m);Ae()}h&8&&(o=d[3].is("loading")),o?p?(p.p(d,h),h&8&&v(p,1)):(p=_a(d),p.c(),v(p,1),p.m(r.parentNode,r)):p&&(Ce(),S(p,1,1,()=>{p=null}),Ae())},i(d){if(!s){v(l);for(let h=0;h<a.length;h+=1)v(u[h]);v(p),s=!0}},o(d){S(l),u=u.filter(Boolean);for(let h=0;h<u.length;h+=1)S(u[h]);S(p),s=!1},d(d){l&&l.d(d),d&&$(n),$t(u,d),d&&$(i),p&&p.d(d),d&&$(r)}}}function n1(t){let e,n;return e=new Du({props:{conversation:t[8]}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p:Le,i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function i1(t){let e,n,i,o,r=t[8].is("search"),s,l;e=new Ut({props:{$$slots:{default:[Xb]},$$scope:{ctx:t}}}),i=new Kr({props:{class:t[5].join(" "),$$slots:{default:[t1]},$$scope:{ctx:t}}}),i.$on("rendered",o1);let a=r&&n1(t);return{c(){G(e.$$.fragment),n=C(),G(i.$$.fragment),o=C(),a&&a.c(),s=ct()},m(u,c){q(e,u,c),w(u,n,c),q(i,u,c),w(u,o,c),a&&a.m(u,c),w(u,s,c),l=!0},p(u,[c]){const p={};c&65616&&(p.$$scope={dirty:c,ctx:u}),e.$set(p);const d={};c&32&&(d.class=u[5].join(" ")),c&65742&&(d.$$scope={dirty:c,ctx:u}),i.$set(d),r&&a.p(u,c)},i(u){l||(v(e.$$.fragment,u),v(i.$$.fragment,u),v(a),l=!0)},o(u){S(e.$$.fragment,u),S(i.$$.fragment,u),S(a),l=!1},d(u){W(e,u),u&&$(n),W(i,u),u&&$(o),a&&a.d(u),u&&$(s)}}}const o1=t=>t.detail.scrollTo(-1);function r1(t,e,n){let i,o,r,s,l=Le,a=()=>(l(),l=St(i,E=>n(1,s=E)),i),u,c,p,d;Ee(t,Be,E=>n(2,u=E)),Ee(t,lt,E=>n(6,p=E)),Ee(t,jt,E=>n(7,d=E)),t.$$.on_destroy.push(()=>l());const h="Search",m=pt("user"),_=m.search;Ee(t,_,E=>n(3,c=E)),Bt(()=>{m.search.on("send",b),Be.param("q")&&b({message:Be.param("q")})});function y(E){if(r)return s.clear();E.preventDefault(),document.querySelector(".is-primary-input").focus()}function b(E){const R=E.message;return _.update({userInput:R}),Be.go("/search?q="+encodeURIComponent(R),{replace:!0}),R?_.load({match:R}):i.clear()}return t.$$.update=()=>{t.$$.dirty&8&&a(n(0,i=c.messages)),t.$$.dirty&9&&n(5,o=["main",i.length&&"has-results",c.is("search")&&"is-above-chat-input"].filter(E=>E)),t.$$.dirty&6&&n(4,r=u.param("q")||s.length)},[i,s,u,c,r,o,p,d,_,y,h]}class s1 extends Xe{constructor(e){super(),Qe(this,e,r1,i1,Ze,{title:10})}get title(){return this.$$.ctx[10]}}function l1(t){let e,n=t[2]("Account")+"",i;return{c(){e=g("h1"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Account")+"")&&M(i,n)},d(o){o&&$(e)}}}function a1(t){let e,n=t[2]("Email")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Email")+"")&&M(i,n)},d(o){o&&$(e)}}}function u1(t){let e,n=t[2]("Notification keywords")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Notification keywords")+"")&&M(i,n)},d(o){o&&$(e)}}}function f1(t){let e,n=t[2]("Enable notifications")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Enable notifications")+"")&&M(i,n)},d(o){o&&$(e)}}}function c1(t){let e,n=t[2]("Notification sound volume")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Notification sound volume")+"")&&M(i,n)},d(o){o&&$(e)}}}function d1(t){let e,n=t[2]("Test")+"",i;return{c(){e=g("span"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Test")+"")&&M(i,n)},d(o){o&&$(e)}}}function p1(t){let e,n=t[2]("Ignore join/part messages")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Ignore join/part messages")+"")&&M(i,n)},d(o){o&&$(e)}}}function h1(t){let e,n=t[2]("Expand URL to media")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Expand URL to media")+"")&&M(i,n)},d(o){o&&$(e)}}}function m1(t){let e,n=t[2]("Enable compact message display")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Enable compact message display")+"")&&M(i,n)},d(o){o&&$(e)}}}function _1(t){let e,n=t[2]("Theme")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Theme")+"")&&M(i,n)},d(o){o&&$(e)}}}function g1(t){let e,n=t[2]("Color scheme")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Color scheme")+"")&&M(i,n)},d(o){o&&$(e)}}}function b1(t){let e,n=t[2]("Language")+"",i,o,r,s;return r=new be({props:{name:"globe"}}),{c(){e=g("span"),i=N(n),o=C(),G(r.$$.fragment),k(e,"slot","label")},m(l,a){w(l,e,a),f(e,i),f(e,o),q(r,e,null),s=!0},p(l,a){(!s||a&4)&&n!==(n=l[2]("Language")+"")&&M(i,n)},i(l){s||(v(r.$$.fragment,l),s=!0)},o(l){S(r.$$.fragment,l),s=!1},d(l){l&&$(e),W(r)}}}function v1(t){let e,n=t[2]("Password")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Password")+"")&&M(i,n)},d(o){o&&$(e)}}}function $1(t){let e,n=t[2]("Repeat password")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Repeat password")+"")&&M(i,n)},d(o){o&&$(e)}}}function w1(t){let e,n=t[2]("Save settings")+"",i;return{c(){e=g("span"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("Save settings")+"")&&M(i,n)},d(o){o&&$(e)}}}function k1(t){let e,n,i,o,r=t[2]("Mark the protocols below that you want %1 to handle, and a popup should ask you for confirmation.",t[2]("Convos"))+"",s,l,a=t[2]("If you do not see any popup, then it probably means %1 already handles the protocol.",t[2]("Convos"))+"",u,c,p,d,h,m,_=t[3]("Test it by clicking on %1.","irc://localhost:6667")+"",y,b,E,R,j,D=t[3]("Test it by clicking on %1.","ircs://irc.libera.chat:6697/%23convos")+"",A,T,P;function U(z){t[25](z)}let B={name:"handle_protocol_irc",$$slots:{label:[y1]},$$scope:{ctx:t}};t[0].handle_protocol_irc!==void 0&&(B.value=t[0].handle_protocol_irc),p=new nt({props:B}),me.push(()=>$e(p,"value",U));function F(z){t[26](z)}let I={name:"handle_protocol_ircs",$$slots:{label:[S1]},$$scope:{ctx:t}};return t[0].handle_protocol_ircs!==void 0&&(I.value=t[0].handle_protocol_ircs),b=new nt({props:I}),me.push(()=>$e(b,"value",F)),{c(){e=g("form"),n=g("h2"),n.textContent="Protocol handlers",i=C(),o=g("p"),s=N(r),l=C(),u=N(a),c=C(),G(p.$$.fragment),h=C(),m=g("p"),y=C(),G(b.$$.fragment),R=C(),j=g("p"),k(m,"class","help"),k(j,"class","help")},m(z,x){w(z,e,x),f(e,n),f(e,i),f(e,o),f(o,s),f(o,l),f(o,u),f(e,c),q(p,e,null),f(e,h),f(e,m),m.innerHTML=_,f(e,y),q(b,e,null),f(e,R),f(e,j),j.innerHTML=D,A=!0,T||(P=Se(e,"submit",rt(t[11])),T=!0)},p(z,x){(!A||x&4)&&r!==(r=z[2]("Mark the protocols below that you want %1 to handle, and a popup should ask you for confirmation.",z[2]("Convos"))+"")&&M(s,r),(!A||x&4)&&a!==(a=z[2]("If you do not see any popup, then it probably means %1 already handles the protocol.",z[2]("Convos"))+"")&&M(u,a);const J={};x&536870916&&(J.$$scope={dirty:x,ctx:z}),!d&&x&1&&(d=!0,J.value=z[0].handle_protocol_irc,ve(()=>d=!1)),p.$set(J),(!A||x&8)&&_!==(_=z[3]("Test it by clicking on %1.","irc://localhost:6667")+"")&&(m.innerHTML=_);const O={};x&536870916&&(O.$$scope={dirty:x,ctx:z}),!E&&x&1&&(E=!0,O.value=z[0].handle_protocol_ircs,ve(()=>E=!1)),b.$set(O),(!A||x&8)&&D!==(D=z[3]("Test it by clicking on %1.","ircs://irc.libera.chat:6697/%23convos")+"")&&(j.innerHTML=D)},i(z){A||(v(p.$$.fragment,z),v(b.$$.fragment,z),A=!0)},o(z){S(p.$$.fragment,z),S(b.$$.fragment,z),A=!1},d(z){z&&$(e),W(p),W(b),T=!1,P()}}}function y1(t){let e,n=t[2]("irc://")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("irc://")+"")&&M(i,n)},d(o){o&&$(e)}}}function S1(t){let e,n=t[2]("ircs://")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&4&&n!==(n=o[2]("ircs://")+"")&&M(i,n)},d(o){o&&$(e)}}}function E1(t){let e,n,i,o,r,s,l,a,u,c,p,d,h,m,_=t[3]('Leave this unchecked, and hit "Save" to disable notifications.')+"",y,b,E,R,j,D,A,T,P,U,B,F,I,z,x,J,O,L,Y,H,V,Z,K,re,de,ie,he,Te,ce,ke,Ie,De,Ne,Me=t[2]("Leave the password fields empty to keep the current password.")+"",je,X,ge,fe,He,Re,oe,ee,we,ye;e=new Ut({props:{$$slots:{default:[l1]},$$scope:{ctx:t}}});function ue(ae){t[12](ae)}let te={type:"email",name:"email",readonly:!0,$$slots:{label:[a1]},$$scope:{ctx:t}};t[0].email!==void 0&&(te.value=t[0].email),r=new Ve({props:te}),me.push(()=>$e(r,"value",ue));function se(ae){t[13](ae)}let ne={name:"highlightKeywords",placeholder:t[2]("whatever, keywords"),$$slots:{label:[u1]},$$scope:{ctx:t}};t[0].highlightKeywords!==void 0&&(ne.value=t[0].highlightKeywords),a=new Ve({props:ne}),me.push(()=>$e(a,"value",se));function Q(ae){t[14](ae)}let le={name:"wantNotifications",$$slots:{label:[f1]},$$scope:{ctx:t}};t[0].wantNotifications!==void 0&&(le.value=t[0].wantNotifications),p=new nt({props:le}),me.push(()=>$e(p,"value",Q));function pe(ae){t[15](ae)}let _e={name:"volume",options:_t.volumeOptions,$$slots:{label:[c1]},$$scope:{ctx:t}};t[0].volume!==void 0&&(_e.value=t[0].volume),E=new Qn({props:_e}),me.push(()=>$e(E,"value",pe)),A=new ft({props:{icon:"play",disabled:!parseInt(t[0].volume,10),type:"button",$$slots:{default:[d1]},$$scope:{ctx:t}}}),A.$on("click",t[16]);function Ye(ae){t[17](ae)}let Fe={name:"ignoreStatuses",$$slots:{label:[p1]},$$scope:{ctx:t}};t[0].ignoreStatuses!==void 0&&(Fe.value=t[0].ignoreStatuses),P=new nt({props:Fe}),me.push(()=>$e(P,"value",Ye));function ot(ae){t[18](ae)}let kt={name:"expandUrlToMedia",$$slots:{label:[h1]},$$scope:{ctx:t}};t[0].expandUrlToMedia!==void 0&&(kt.value=t[0].expandUrlToMedia),F=new nt({props:kt}),me.push(()=>$e(F,"value",ot));function Lt(ae){t[19](ae)}let at={name:"compactDisplay",$$slots:{label:[m1]},$$scope:{ctx:t}};t[0].compactDisplay!==void 0&&(at.value=t[0].compactDisplay),x=new nt({props:at}),me.push(()=>$e(x,"value",Lt));function Zt(ae){t[20](ae)}let Ft={name:"activeTheme",options:t[6].themeOptions,$$slots:{label:[_1]},$$scope:{ctx:t}};t[0].activeTheme!==void 0&&(Ft.value=t[0].activeTheme),L=new Qn({props:Ft}),me.push(()=>$e(L,"value",Zt));function Pn(ae){t[21](ae)}let Dn={name:"colorScheme",readonly:t[1],options:t[6].colorSchemeOptions,$$slots:{label:[g1]},$$scope:{ctx:t}};t[0].colorScheme!==void 0&&(Dn.value=t[0].colorScheme),V=new Qn({props:Dn}),me.push(()=>$e(V,"value",Pn));function hi(ae){t[22](ae)}let bn={name:"lang",options:t[4].languageOptions,$$slots:{label:[b1]},$$scope:{ctx:t}};t[0].lang!==void 0&&(bn.value=t[0].lang),re=new Qn({props:bn}),me.push(()=>$e(re,"value",hi));function mi(ae){t[23](ae)}let Un={type:"password",name:"password",autocomplete:"new-password",$$slots:{label:[v1]},$$scope:{ctx:t}};t[0].password!==void 0&&(Un.value=t[0].password),he=new Ve({props:Un}),me.push(()=>$e(he,"value",mi));function Bn(ae){t[24](ae)}let jn={type:"password",name:"password_again",autocomplete:"new-password",$$slots:{label:[$1]},$$scope:{ctx:t}};t[0].password_again!==void 0&&(jn.value=t[0].password_again),ke=new Ve({props:jn}),me.push(()=>$e(ke,"value",Bn)),fe=new ft({props:{icon:"save",op:t[7],$$slots:{default:[w1]},$$scope:{ctx:t}}}),Re=new Rt({props:{op:t[7]}});let Ot=t[5]&&k1(t);return{c(){G(e.$$.fragment),n=C(),i=g("main"),o=g("form"),G(r.$$.fragment),l=C(),G(a.$$.fragment),c=C(),G(p.$$.fragment),h=C(),m=g("p"),y=C(),b=g("div"),G(E.$$.fragment),j=C(),D=g("div"),G(A.$$.fragment),T=C(),G(P.$$.fragment),B=C(),G(F.$$.fragment),z=C(),G(x.$$.fragment),O=C(),G(L.$$.fragment),H=C(),G(V.$$.fragment),K=C(),G(re.$$.fragment),ie=C(),G(he.$$.fragment),ce=C(),G(ke.$$.fragment),De=C(),Ne=g("p"),je=N(Me),X=C(),ge=g("div"),G(fe.$$.fragment),He=C(),G(Re.$$.fragment),oe=C(),Ot&&Ot.c(),k(m,"class","help"),k(D,"class","flex-basis-30"),k(b,"class","inputs-side-by-side"),k(ge,"class","form-actions"),k(o,"method","post"),k(i,"class","main")},m(ae,Pe){q(e,ae,Pe),w(ae,n,Pe),w(ae,i,Pe),f(i,o),q(r,o,null),f(o,l),q(a,o,null),f(o,c),q(p,o,null),f(o,h),f(o,m),m.innerHTML=_,f(o,y),f(o,b),q(E,b,null),f(b,j),f(b,D),q(A,D,null),f(o,T),q(P,o,null),f(o,B),q(F,o,null),f(o,z),q(x,o,null),f(o,O),q(L,o,null),f(o,H),q(V,o,null),f(o,K),q(re,o,null),f(o,ie),q(he,o,null),f(o,ce),q(ke,o,null),f(o,De),f(o,Ne),f(Ne,je),f(o,X),f(o,ge),q(fe,ge,null),f(o,He),q(Re,o,null),f(i,oe),Ot&&Ot.m(i,null),ee=!0,we||(ye=Se(o,"submit",rt(t[8])),we=!0)},p(ae,[Pe]){const vn={};Pe&536870916&&(vn.$$scope={dirty:Pe,ctx:ae}),e.$set(vn);const xt={};Pe&536870916&&(xt.$$scope={dirty:Pe,ctx:ae}),!s&&Pe&1&&(s=!0,xt.value=ae[0].email,ve(()=>s=!1)),r.$set(xt);const en={};Pe&4&&(en.placeholder=ae[2]("whatever, keywords")),Pe&536870916&&(en.$$scope={dirty:Pe,ctx:ae}),!u&&Pe&1&&(u=!0,en.value=ae[0].highlightKeywords,ve(()=>u=!1)),a.$set(en);const tn={};Pe&536870916&&(tn.$$scope={dirty:Pe,ctx:ae}),!d&&Pe&1&&(d=!0,tn.value=ae[0].wantNotifications,ve(()=>d=!1)),p.$set(tn),(!ee||Pe&8)&&_!==(_=ae[3]('Leave this unchecked, and hit "Save" to disable notifications.')+"")&&(m.innerHTML=_);const $n={};Pe&536870916&&($n.$$scope={dirty:Pe,ctx:ae}),!R&&Pe&1&&(R=!0,$n.value=ae[0].volume,ve(()=>R=!1)),E.$set($n);const nn={};Pe&1&&(nn.disabled=!parseInt(ae[0].volume,10)),Pe&536870916&&(nn.$$scope={dirty:Pe,ctx:ae}),A.$set(nn);const on={};Pe&536870916&&(on.$$scope={dirty:Pe,ctx:ae}),!U&&Pe&1&&(U=!0,on.value=ae[0].ignoreStatuses,ve(()=>U=!1)),P.$set(on);const wn={};Pe&536870916&&(wn.$$scope={dirty:Pe,ctx:ae}),!I&&Pe&1&&(I=!0,wn.value=ae[0].expandUrlToMedia,ve(()=>I=!1)),F.$set(wn);const kn={};Pe&536870916&&(kn.$$scope={dirty:Pe,ctx:ae}),!J&&Pe&1&&(J=!0,kn.value=ae[0].compactDisplay,ve(()=>J=!1)),x.$set(kn);const rn={};Pe&536870916&&(rn.$$scope={dirty:Pe,ctx:ae}),!Y&&Pe&1&&(Y=!0,rn.value=ae[0].activeTheme,ve(()=>Y=!1)),L.$set(rn);const sn={};Pe&2&&(sn.readonly=ae[1]),Pe&536870916&&(sn.$$scope={dirty:Pe,ctx:ae}),!Z&&Pe&1&&(Z=!0,sn.value=ae[0].colorScheme,ve(()=>Z=!1)),V.$set(sn);const yn={};Pe&16&&(yn.options=ae[4].languageOptions),Pe&536870916&&(yn.$$scope={dirty:Pe,ctx:ae}),!de&&Pe&1&&(de=!0,yn.value=ae[0].lang,ve(()=>de=!1)),re.$set(yn);const ln={};Pe&536870916&&(ln.$$scope={dirty:Pe,ctx:ae}),!Te&&Pe&1&&(Te=!0,ln.value=ae[0].password,ve(()=>Te=!1)),he.$set(ln);const an={};Pe&536870916&&(an.$$scope={dirty:Pe,ctx:ae}),!Ie&&Pe&1&&(Ie=!0,an.value=ae[0].password_again,ve(()=>Ie=!1)),ke.$set(an),(!ee||Pe&4)&&Me!==(Me=ae[2]("Leave the password fields empty to keep the current password.")+"")&&M(je,Me);const Fn={};Pe&536870916&&(Fn.$$scope={dirty:Pe,ctx:ae}),fe.$set(Fn),ae[5]&&Ot.p(ae,Pe)},i(ae){ee||(v(e.$$.fragment,ae),v(r.$$.fragment,ae),v(a.$$.fragment,ae),v(p.$$.fragment,ae),v(E.$$.fragment,ae),v(A.$$.fragment,ae),v(P.$$.fragment,ae),v(F.$$.fragment,ae),v(x.$$.fragment,ae),v(L.$$.fragment,ae),v(V.$$.fragment,ae),v(re.$$.fragment,ae),v(he.$$.fragment,ae),v(ke.$$.fragment,ae),v(fe.$$.fragment,ae),v(Re.$$.fragment,ae),v(Ot),ee=!0)},o(ae){S(e.$$.fragment,ae),S(r.$$.fragment,ae),S(a.$$.fragment,ae),S(p.$$.fragment,ae),S(E.$$.fragment,ae),S(A.$$.fragment,ae),S(P.$$.fragment,ae),S(F.$$.fragment,ae),S(x.$$.fragment,ae),S(L.$$.fragment,ae),S(V.$$.fragment,ae),S(re.$$.fragment,ae),S(he.$$.fragment,ae),S(ke.$$.fragment,ae),S(fe.$$.fragment,ae),S(Re.$$.fragment,ae),S(Ot),ee=!1},d(ae){W(e,ae),ae&&$(n),ae&&$(i),W(r),W(a),W(p),W(E),W(A),W(P),W(F),W(x),W(L),W(V),W(re),W(he),W(ke),W(fe),W(Re),Ot&&Ot.d(),we=!1,ye()}}}function C1(t,e,n){let i,o,r,s,l;Ee(t,lt,O=>n(2,o=O)),Ee(t,jt,O=>n(3,s=O)),Ee(t,xe,O=>n(4,l=O));const a="Account",u="registerProtocolHandler"in navigator,c=pt("themeManager");Ee(t,c,O=>n(10,r=O));const p=pt("user"),d=et.op("updateUser");let h={};Bt(()=>{n(0,h={activeTheme:c.activeTheme,colorScheme:c.colorScheme,compactDisplay:c.compactDisplay,email:p.email,expandUrlToMedia:p.expandUrlToMedia,highlightKeywords:p.highlightKeywords.join(", "),ignoreStatuses:p.ignoreStatuses,lang:xe.lang,password:"",password_again:"",volume:_t.volume,wantNotifications:_t.wantNotifications})}),Rr(_t.on("update",(O,L)=>{!L.wantNotifications&&!L.desktopAccess||O.wantNotifications&&O.show(o("You have enabled notifications."))}));function m(O){navigator.registerProtocolHandler(O,Be.urlFor("/register?uri=%s"),o("Convos %1 handler",O))}function _(){const O=[h.password,h.password_again];if(O.join("").length&&O[0]!==O[1])return d.error("Passwords does not match.");h.wantNotifications||n(0,h.wantNotifications=!1,h),h.wantNotifications&&_t.requestDesktopAccess(),_t.update(h),i&&n(0,h.colorScheme="auto",h),c.update(h);const L=Ir(h.highlightKeywords),Y={email:p.email,highlight_keywords:L};O[0]&&(Y.password=O[0]),p.update(h).update({highlightKeywords:L}),d.perform(Y)}function y(O){Ln.call(this,t,O)}function b(O){t.$$.not_equal(h.email,O)&&(h.email=O,n(0,h))}function E(O){t.$$.not_equal(h.highlightKeywords,O)&&(h.highlightKeywords=O,n(0,h))}function R(O){t.$$.not_equal(h.wantNotifications,O)&&(h.wantNotifications=O,n(0,h))}function j(O){t.$$.not_equal(h.volume,O)&&(h.volume=O,n(0,h))}const D=()=>_t.play({volume:h.volume});function A(O){t.$$.not_equal(h.ignoreStatuses,O)&&(h.ignoreStatuses=O,n(0,h))}function T(O){t.$$.not_equal(h.expandUrlToMedia,O)&&(h.expandUrlToMedia=O,n(0,h))}function P(O){t.$$.not_equal(h.compactDisplay,O)&&(h.compactDisplay=O,n(0,h))}function U(O){t.$$.not_equal(h.activeTheme,O)&&(h.activeTheme=O,n(0,h))}function B(O){t.$$.not_equal(h.colorScheme,O)&&(h.colorScheme=O,n(0,h))}function F(O){t.$$.not_equal(h.lang,O)&&(h.lang=O,n(0,h))}function I(O){t.$$.not_equal(h.password,O)&&(h.password=O,n(0,h))}function z(O){t.$$.not_equal(h.password_again,O)&&(h.password_again=O,n(0,h))}function x(O){t.$$.not_equal(h.handle_protocol_irc,O)&&(h.handle_protocol_irc=O,n(0,h))}function J(O){t.$$.not_equal(h.handle_protocol_ircs,O)&&(h.handle_protocol_ircs=O,n(0,h))}return t.$$.update=()=>{t.$$.dirty&1025&&n(1,i=!r.hasColorScheme(h.activeTheme)),t.$$.dirty&1&&xe.load(h.lang),t.$$.dirty&1&&h.handle_protocol_irc&&m("irc"),t.$$.dirty&1&&h.handle_protocol_ircs&&m("ircs")},[h,i,o,s,l,u,c,d,_,a,r,y,b,E,R,j,D,A,T,P,U,B,F,I,z,x,J]}class A1 extends Xe{constructor(e){super(),Qe(this,e,C1,E1,Ze,{title:9})}get title(){return this.$$.ctx[9]}}function O1(t){let e,n=t[5]("Global settings")+"",i;return{c(){e=g("h1"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&32&&n!==(n=o[5]("Global settings")+"")&&M(i,n)},d(o){o&&$(e)}}}function N1(t){let e,n=t[5]("Organization name")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&32&&n!==(n=o[5]("Organization name")+"")&&M(i,n)},d(o){o&&$(e)}}}function T1(t){let e,n=t[5]("Can be changed if you want to add a touch of your organization.")+"",i;return{c(){e=g("p"),i=N(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&32&&n!==(n=o[5]("Can be changed if you want to add a touch of your organization.")+"")&&M(i,n)},d(o){o&&$(e)}}}function R1(t){let e,n=t[5]("Organization URL")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&32&&n!==(n=o[5]("Organization URL")+"")&&M(i,n)},d(o){o&&$(e)}}}function M1(t){let e,n=t[5]('Used together with "Organization name" to add a link to your organization on the login screen.')+"",i;return{c(){e=g("p"),i=N(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&32&&n!==(n=o[5]('Used together with "Organization name" to add a link to your organization on the login screen.')+"")&&M(i,n)},d(o){o&&$(e)}}}function L1(t){let e,n=t[5]("Admin email")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&32&&n!==(n=o[5]("Admin email")+"")&&M(i,n)},d(o){o&&$(e)}}}function I1(t){let e,n=t[5]("This email can be used by users to get in touch with the Convos admin.")+"",i;return{c(){e=g("p"),i=N(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&32&&n!==(n=o[5]("This email can be used by users to get in touch with the Convos admin.")+"")&&M(i,n)},d(o){o&&$(e)}}}function P1(t){let e,n=t[5]("Video service")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&32&&n!==(n=o[5]("Video service")+"")&&M(i,n)},d(o){o&&$(e)}}}function D1(t){let e,n=t[6]("This should point to a [%1](%2) instance.","https://meet.jit.si/","https://github.com/jitsi/jitsi-meet")+"";return{c(){e=g("p"),k(e,"class","help"),k(e,"slot","help")},m(i,o){w(i,e,o),e.innerHTML=n},p(i,o){o&64&&n!==(n=i[6]("This should point to a [%1](%2) instance.","https://meet.jit.si/","https://github.com/jitsi/jitsi-meet")+"")&&(e.innerHTML=n)},d(i){i&&$(e)}}}function U1(t){let e,n=t[5]("Registration is open to public")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&32&&n!==(n=o[5]("Registration is open to public")+"")&&M(i,n)},d(o){o&&$(e)}}}function B1(t){let e,n=t[5]("Save settings")+"",i;return{c(){e=g("span"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&32&&n!==(n=o[5]("Save settings")+"")&&M(i,n)},d(o){o&&$(e)}}}function j1(t){let e,n=t[6]("You currently have Convos v%1 installed.",Ge("version"))+"",i;return{c(){e=g("p"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&64&&n!==(n=o[6]("You currently have Convos v%1 installed.",Ge("version"))+"")&&M(i,n)},d(o){o&&$(e)}}}function F1(t){let e,n=t[6](t[4]?"You have Convos v%1, which is the latest version.":"Convos v%1 is available.",t[0])+"",i;return{c(){e=g("p"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&81&&n!==(n=o[6](o[4]?"You have Convos v%1, which is the latest version.":"Convos v%1 is available.",o[0])+"")&&M(i,n)},d(o){o&&$(e)}}}function z1(t){let e,n=t[5](t[1].error())+"",i;return{c(){e=g("div"),i=N(n),k(e,"class","error")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&34&&n!==(n=o[5](o[1].error())+"")&&M(i,n)},d(o){o&&$(e)}}}function H1(t){let e,n=t[5]("Check for updates")+"",i;return{c(){e=g("span"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&32&&n!==(n=o[5]("Check for updates")+"")&&M(i,n)},d(o){o&&$(e)}}}function ga(t){let e,n,i=t[5]("Disk usage")+"",o,r,s,l,a=t[2].blocks_pct+"",u,c,p,d,h=t[5]("Disk usage")+"",m,_,y=t[2].blocks_used+"",b,E,R=t[2].blocks_total+"",j,D,A,T,P=t[2].inodes_pct+"",U,B,F,I,z=t[5]("Inode usage")+"",x,J,O=t[2].inodes_used+"",L,Y,H=t[2].inodes_total+"",V;return{c(){e=g("div"),n=g("h2"),o=N(i),r=C(),s=g("div"),l=g("div"),u=N(a),c=N("%"),p=C(),d=g("p"),m=N(h),_=N(": "),b=N(y),E=N(" / "),j=N(R),D=C(),A=g("div"),T=g("div"),U=N(P),B=N("%"),F=C(),I=g("p"),x=N(z),J=N(": "),L=N(O),Y=N(" / "),V=N(H),k(l,"class","progress__bar"),Pt(l,"width",t[2].blocks_pct+"%"),k(s,"class","progress"),k(d,"class","help"),k(T,"class","progress__bar"),Pt(T,"width",t[2].inodes_pct+"%"),k(A,"class","progress"),k(I,"class","help"),k(e,"id","disk-usage")},m(Z,K){w(Z,e,K),f(e,n),f(n,o),f(e,r),f(e,s),f(s,l),f(l,u),f(l,c),f(e,p),f(e,d),f(d,m),f(d,_),f(d,b),f(d,E),f(d,j),f(e,D),f(e,A),f(A,T),f(T,U),f(T,B),f(e,F),f(e,I),f(I,x),f(I,J),f(I,L),f(I,Y),f(I,V)},p(Z,K){K&32&&i!==(i=Z[5]("Disk usage")+"")&&M(o,i),K&4&&a!==(a=Z[2].blocks_pct+"")&&M(u,a),K&4&&Pt(l,"width",Z[2].blocks_pct+"%"),K&32&&h!==(h=Z[5]("Disk usage")+"")&&M(m,h),K&4&&y!==(y=Z[2].blocks_used+"")&&M(b,y),K&4&&R!==(R=Z[2].blocks_total+"")&&M(j,R),K&4&&P!==(P=Z[2].inodes_pct+"")&&M(U,P),K&4&&Pt(T,"width",Z[2].inodes_pct+"%"),K&32&&z!==(z=Z[5]("Inode usage")+"")&&M(x,z),K&4&&O!==(O=Z[2].inodes_used+"")&&M(L,O),K&4&&H!==(H=Z[2].inodes_total+"")&&M(V,H)},d(Z){Z&&$(e)}}}function q1(t){let e,n,i,o,r,s=t[5]("Convos settings")+"",l,a,u,c=t[6]("These settings control what users experience when they visit [%1](%1).",Ge("base_url"))+"",p,d,h,m,_,y,b,E,R,j,D,A,T,P,U,B,F,I=t[5]("Tick this box if you want users to be able to register without an invite URL.")+"",z,x,J,O,L,Y,H,V,Z=t[5]("Check for updates")+"",K,re,de,ie,he,Te,ce,ke,Ie,De,Ne;e=new Ut({props:{$$slots:{default:[O1]},$$scope:{ctx:t}}});function Me(ne){t[11](ne)}let je={name:"organization_name",$$slots:{help:[T1],label:[N1]},$$scope:{ctx:t}};t[3].organization_name!==void 0&&(je.value=t[3].organization_name),d=new Ve({props:je}),me.push(()=>$e(d,"value",Me));function X(ne){t[12](ne)}let ge={name:"organization_url",placeholder:t[5]("https://convos.chat"),$$slots:{help:[M1],label:[R1]},$$scope:{ctx:t}};t[3].organization_url!==void 0&&(ge.value=t[3].organization_url),_=new Ve({props:ge}),me.push(()=>$e(_,"value",X));function fe(ne){t[13](ne)}let He={name:"contact",placeholder:t[5]("Ex: jhthorsen@cpan.org"),$$slots:{help:[I1],label:[L1]},$$scope:{ctx:t}};t[3].contact!==void 0&&(He.value=t[3].contact),E=new Ve({props:He}),me.push(()=>$e(E,"value",fe));function Re(ne){t[14](ne)}let oe={name:"video_service",placeholder:t[5]("Ex: https://meet.jit.si/"),$$slots:{help:[D1],label:[P1]},$$scope:{ctx:t}};t[3].video_service!==void 0&&(oe.value=t[3].video_service),D=new Ve({props:oe}),me.push(()=>$e(D,"value",Re));function ee(ne){t[15](ne)}let we={name:"open_to_public",$$slots:{label:[U1]},$$scope:{ctx:t}};t[3].open_to_public!==void 0&&(we.value=t[3].open_to_public),P=new nt({props:we}),me.push(()=>$e(P,"value",ee)),O=new ft({props:{icon:"save",op:t[8],$$slots:{default:[B1]},$$scope:{ctx:t}}}),Y=new Rt({props:{op:t[8]}});function ye(ne,Q){return Q&2&&(ie=null),Q&2&&(he=null),ie==null&&(ie=!!ne[1].is("error")),ie?z1:(he==null&&(he=!!ne[1].is("success")),he?F1:j1)}let ue=ye(t,-1),te=ue(t);ce=new ft({props:{icon:"sync-alt",op:t[7],$$slots:{default:[H1]},$$scope:{ctx:t}}});let se=t[2]&&ga(t);return{c(){G(e.$$.fragment),n=C(),i=g("main"),o=g("form"),r=g("h2"),l=N(s),a=C(),u=g("p"),p=C(),G(d.$$.fragment),m=C(),G(_.$$.fragment),b=C(),G(E.$$.fragment),j=C(),G(D.$$.fragment),T=C(),G(P.$$.fragment),B=C(),F=g("p"),z=N(I),x=C(),J=g("div"),G(O.$$.fragment),L=C(),G(Y.$$.fragment),H=C(),V=g("h2"),K=N(Z),re=C(),de=g("form"),te.c(),Te=C(),G(ce.$$.fragment),ke=C(),se&&se.c(),k(F,"class","help"),k(J,"class","form-actions"),k(o,"id","convos-settings"),k(o,"method","post"),k(de,"id","convos-updates"),k(de,"method","post"),k(i,"class","main")},m(ne,Q){q(e,ne,Q),w(ne,n,Q),w(ne,i,Q),f(i,o),f(o,r),f(r,l),f(o,a),f(o,u),u.innerHTML=c,f(o,p),q(d,o,null),f(o,m),q(_,o,null),f(o,b),q(E,o,null),f(o,j),q(D,o,null),f(o,T),q(P,o,null),f(o,B),f(o,F),f(F,z),f(o,x),f(o,J),q(O,J,null),f(o,L),q(Y,o,null),f(i,H),f(i,V),f(V,K),f(i,re),f(i,de),te.m(de,null),f(de,Te),q(ce,de,null),f(i,ke),se&&se.m(i,null),Ie=!0,De||(Ne=[Se(o,"submit",rt(t[9])),Se(de,"submit",rt(t[16]))],De=!0)},p(ne,[Q]){const le={};Q&524320&&(le.$$scope={dirty:Q,ctx:ne}),e.$set(le),(!Ie||Q&32)&&s!==(s=ne[5]("Convos settings")+"")&&M(l,s),(!Ie||Q&64)&&c!==(c=ne[6]("These settings control what users experience when they visit [%1](%1).",Ge("base_url"))+"")&&(u.innerHTML=c);const pe={};Q&524320&&(pe.$$scope={dirty:Q,ctx:ne}),!h&&Q&8&&(h=!0,pe.value=ne[3].organization_name,ve(()=>h=!1)),d.$set(pe);const _e={};Q&32&&(_e.placeholder=ne[5]("https://convos.chat")),Q&524320&&(_e.$$scope={dirty:Q,ctx:ne}),!y&&Q&8&&(y=!0,_e.value=ne[3].organization_url,ve(()=>y=!1)),_.$set(_e);const Ye={};Q&32&&(Ye.placeholder=ne[5]("Ex: jhthorsen@cpan.org")),Q&524320&&(Ye.$$scope={dirty:Q,ctx:ne}),!R&&Q&8&&(R=!0,Ye.value=ne[3].contact,ve(()=>R=!1)),E.$set(Ye);const Fe={};Q&32&&(Fe.placeholder=ne[5]("Ex: https://meet.jit.si/")),Q&524384&&(Fe.$$scope={dirty:Q,ctx:ne}),!A&&Q&8&&(A=!0,Fe.value=ne[3].video_service,ve(()=>A=!1)),D.$set(Fe);const ot={};Q&524320&&(ot.$$scope={dirty:Q,ctx:ne}),!U&&Q&8&&(U=!0,ot.value=ne[3].open_to_public,ve(()=>U=!1)),P.$set(ot),(!Ie||Q&32)&&I!==(I=ne[5]("Tick this box if you want users to be able to register without an invite URL.")+"")&&M(z,I);const kt={};Q&524320&&(kt.$$scope={dirty:Q,ctx:ne}),O.$set(kt),(!Ie||Q&32)&&Z!==(Z=ne[5]("Check for updates")+"")&&M(K,Z),ue===(ue=ye(ne,Q))&&te?te.p(ne,Q):(te.d(1),te=ue(ne),te&&(te.c(),te.m(de,Te)));const Lt={};Q&524320&&(Lt.$$scope={dirty:Q,ctx:ne}),ce.$set(Lt),ne[2]?se?se.p(ne,Q):(se=ga(ne),se.c(),se.m(i,null)):se&&(se.d(1),se=null)},i(ne){Ie||(v(e.$$.fragment,ne),v(d.$$.fragment,ne),v(_.$$.fragment,ne),v(E.$$.fragment,ne),v(D.$$.fragment,ne),v(P.$$.fragment,ne),v(O.$$.fragment,ne),v(Y.$$.fragment,ne),v(ce.$$.fragment,ne),Ie=!0)},o(ne){S(e.$$.fragment,ne),S(d.$$.fragment,ne),S(_.$$.fragment,ne),S(E.$$.fragment,ne),S(D.$$.fragment,ne),S(P.$$.fragment,ne),S(O.$$.fragment,ne),S(Y.$$.fragment,ne),S(ce.$$.fragment,ne),Ie=!1},d(ne){W(e,ne),ne&&$(n),ne&&$(i),W(d),W(_),W(E),W(D),W(P),W(O),W(Y),te.d(),W(ce),se&&se.d(),De=!1,st(Ne)}}}function W1(t,e,n){let i,o,r,s,l;Ee(t,lt,A=>n(5,s=A)),Ee(t,jt,A=>n(6,l=A));const a="Global settings",u=et.op("checkForUpdates");Ee(t,u,A=>n(1,r=A));const c=et.op("getSettings"),p=et.op("updateSettings");let d=null,h={};Bt(async()=>{await c.perform();const A=c.res.body;n(2,d=m(A.disk_usage)),delete A.disk_usage,A.contact=A.contact.replace(/mailto:/,""),n(3,h={...h,...A})});function m(A){if(!A)return null;const T=A.block_size||1024;return{blocks_pct:Math.ceil(A.blocks_used/A.blocks_total*100),blocks_total:Jn(T*A.blocks_total,"B"),blocks_used:Jn(T*A.blocks_used,"B"),inodes_pct:Math.ceil(A.inodes_used/A.inodes_total*100),inodes_total:Jn(A.inodes_total),inodes_used:Jn(A.inodes_used)}}function _(){h.contact&&n(3,h.contact="mailto:"+h.contact,h),Ge("contact",h.contact),Ge("open_to_public",h.open_to_public),Ge("organization_name",h.organization_name),Ge("organization_url",h.organization_url),wo.fromString(h.video_service),p.perform(h)}function y(A){t.$$.not_equal(h.organization_name,A)&&(h.organization_name=A,n(3,h))}function b(A){t.$$.not_equal(h.organization_url,A)&&(h.organization_url=A,n(3,h))}function E(A){t.$$.not_equal(h.contact,A)&&(h.contact=A,n(3,h))}function R(A){t.$$.not_equal(h.video_service,A)&&(h.video_service=A,n(3,h))}function j(A){t.$$.not_equal(h.open_to_public,A)&&(h.open_to_public=A,n(3,h))}const D=()=>u.perform();return t.$$.update=()=>{t.$$.dirty&2&&n(0,i=r.res.body.available),t.$$.dirty&1&&n(4,o=i===Ge("version"))},[i,r,d,h,o,s,l,u,p,_,a,y,b,E,R,j,D]}class G1 extends Xe{constructor(e){super(),Qe(this,e,W1,q1,Ze,{title:10})}get title(){return this.$$.ctx[10]}}function ba(t,e,n){const i=t.slice();return i[25]=e[n],i}function K1(t){let e,n,i,o,r=At(t[4]("See all users"))+"",s,l;return e=new be({props:{name:"list"}}),n=new be({props:{name:"times"}}),{c(){G(e.$$.fragment),G(n.$$.fragment),i=C(),o=g("span"),s=N(r),k(o,"class","tooltip is-left")},m(a,u){q(e,a,u),q(n,a,u),w(a,i,u),w(a,o,u),f(o,s),l=!0},p(a,u){(!l||u&16)&&r!==(r=At(a[4]("See all users"))+"")&&M(s,r)},i(a){l||(v(e.$$.fragment,a),v(n.$$.fragment,a),l=!0)},o(a){S(e.$$.fragment,a),S(n.$$.fragment,a),l=!1},d(a){W(e,a),W(n,a),a&&$(i),a&&$(o)}}}function Y1(t){let e,n=t[4](t[0].uid?"Account":"Users")+"",i,o,r,s;return r=new qe({props:{href:"/settings/users",class:"btn-hallow can-toggle has-tooltip "+(t[0].uid?"is-active":""),$$slots:{default:[K1]},$$scope:{ctx:t}}}),{c(){e=g("h1"),i=N(n),o=C(),G(r.$$.fragment)},m(l,a){w(l,e,a),f(e,i),w(l,o,a),q(r,l,a),s=!0},p(l,a){(!s||a&17)&&n!==(n=l[4](l[0].uid?"Account":"Users")+"")&&M(i,n);const u={};a&1&&(u.class="btn-hallow can-toggle has-tooltip "+(l[0].uid?"is-active":"")),a&268435472&&(u.$$scope={dirty:a,ctx:l}),r.$set(u)},i(l){s||(v(r.$$.fragment,l),s=!0)},o(l){S(r.$$.fragment,l),s=!1},d(l){l&&$(e),l&&$(o),W(r,l)}}}function V1(t){let e,n,i=t[4]("Invite or recover password")+"",o,r,s,l,a,u,c,p,d,h,m,_,y=t[4]("Users")+"",b,E,R,j,D=t[1].length+"",A,T,P,U,B,F,I,z=t[4]("Email")+"",x,J,O,L=t[4]("Roles")+"",Y,H,V,Z=t[4]("Registered")+"",K,re,de,ie,he,Te,ce,ke;function Ie(X){t[22](X)}let De={type:"email",name:"email",placeholder:t[4]("user@example.com"),$$slots:{help:[Q1],label:[J1]},$$scope:{ctx:t}};t[0].email!==void 0&&(De.value=t[0].email),s=new Ve({props:De}),me.push(()=>$e(s,"value",Ie));let Ne=t[3].url&&va(t);p=new ft({props:{icon:"save",op:t[9],disabled:!t[0].email,$$slots:{default:[X1]},$$scope:{ctx:t}}}),h=new Rt({props:{op:t[9],success:"Link generated."}}),ie=new No({props:{colspan:"3",op:t[6]}});let Me=t[1],je=[];for(let X=0;X<Me.length;X+=1)je[X]=$a(ba(t,Me,X));return{c(){e=g("form"),n=g("h2"),o=N(i),r=C(),G(s.$$.fragment),a=C(),Ne&&Ne.c(),u=C(),c=g("div"),G(p.$$.fragment),d=C(),G(h.$$.fragment),m=C(),_=g("h2"),b=N(y),E=C(),R=g("small"),j=N("("),A=N(D),T=N(")"),P=C(),U=g("table"),B=g("thead"),F=g("tr"),I=g("th"),x=N(z),J=C(),O=g("th"),Y=N(L),H=C(),V=g("th"),K=N(Z),re=C(),de=g("tbody"),G(ie.$$.fragment),he=C();for(let X=0;X<je.length;X+=1)je[X].c();k(c,"class","form-actions"),k(e,"id","invite"),k(e,"method","post")},m(X,ge){w(X,e,ge),f(e,n),f(n,o),f(e,r),q(s,e,null),f(e,a),Ne&&Ne.m(e,null),f(e,u),f(e,c),q(p,c,null),f(e,d),q(h,e,null),w(X,m,ge),w(X,_,ge),f(_,b),f(_,E),f(_,R),f(R,j),f(R,A),f(R,T),w(X,P,ge),w(X,U,ge),f(U,B),f(B,F),f(F,I),f(I,x),f(F,J),f(F,O),f(O,Y),f(F,H),f(F,V),f(V,K),f(U,re),f(U,de),q(ie,de,null),f(de,he);for(let fe=0;fe<je.length;fe+=1)je[fe].m(de,null);Te=!0,ce||(ke=Se(e,"submit",rt(t[13])),ce=!0)},p(X,ge){(!Te||ge&16)&&i!==(i=X[4]("Invite or recover password")+"")&&M(o,i);const fe={};ge&16&&(fe.placeholder=X[4]("user@example.com")),ge&268435472&&(fe.$$scope={dirty:ge,ctx:X}),!l&&ge&1&&(l=!0,fe.value=X[0].email,ve(()=>l=!1)),s.$set(fe),X[3].url?Ne?Ne.p(X,ge):(Ne=va(X),Ne.c(),Ne.m(e,u)):Ne&&(Ne.d(1),Ne=null);const He={};ge&1&&(He.disabled=!X[0].email),ge&268435472&&(He.$$scope={dirty:ge,ctx:X}),p.$set(He),(!Te||ge&16)&&y!==(y=X[4]("Users")+"")&&M(b,y),(!Te||ge&2)&&D!==(D=X[1].length+"")&&M(A,D),(!Te||ge&16)&&z!==(z=X[4]("Email")+"")&&M(x,z),(!Te||ge&16)&&L!==(L=X[4]("Roles")+"")&&M(Y,L),(!Te||ge&16)&&Z!==(Z=X[4]("Registered")+"")&&M(K,Z);const Re={};if(ge&64&&(Re.op=X[6]),ie.$set(Re),ge&2){Me=X[1];let oe;for(oe=0;oe<Me.length;oe+=1){const ee=ba(X,Me,oe);je[oe]?je[oe].p(ee,ge):(je[oe]=$a(ee),je[oe].c(),je[oe].m(de,null))}for(;oe<je.length;oe+=1)je[oe].d(1);je.length=Me.length}},i(X){Te||(v(s.$$.fragment,X),v(p.$$.fragment,X),v(h.$$.fragment,X),v(ie.$$.fragment,X),Te=!0)},o(X){S(s.$$.fragment,X),S(p.$$.fragment,X),S(h.$$.fragment,X),S(ie.$$.fragment,X),Te=!1},d(X){X&&$(e),W(s),Ne&&Ne.d(),W(p),W(h),X&&$(m),X&&$(_),X&&$(P),X&&$(U),W(ie),$t(je,X),ce=!1,ke()}}}function Z1(t){let e,n,i,o,r,s,l,a,u,c,p,d,h,m,_,y,b,E,R=t[4]("This will permanently remove user settings, chat logs, uploaded files and other user related data.")+"",j,D,A,T=t[5]('Please confirm by entering "**%1**" before hitting **%2**.',t[0].email,t[4]("Delete user"))+"",P,U,B,F,I,z,x,J,O,L,Y;function H(ie){t[19](ie)}let V={name:"email",readonly:!0,$$slots:{label:[x1]},$$scope:{ctx:t}};t[0].email!==void 0&&(V.value=t[0].email),o=new Ve({props:V}),me.push(()=>$e(o,"value",H));function Z(ie){t[20](ie)}let K={name:"roles",placeholder:t[4]("admin, bot, ..."),$$slots:{help:[t0],label:[e0]},$$scope:{ctx:t}};t[0].roles!==void 0&&(K.value=t[0].roles),l=new Ve({props:K}),me.push(()=>$e(l,"value",Z)),p=new ft({props:{icon:"save",op:t[10],$$slots:{default:[n0]},$$scope:{ctx:t}}}),h=new Rt({props:{op:t[10]}});function re(ie){t[21](ie)}let de={name:"confirm_email",$$slots:{label:[i0]},$$scope:{ctx:t}};return t[2]!==void 0&&(de.value=t[2]),U=new Ve({props:de}),me.push(()=>$e(U,"value",re)),z=new ft({props:{icon:"trash",op:t[7],disabled:t[2]!==t[0].email,$$slots:{default:[o0]},$$scope:{ctx:t}}}),J=new Rt({props:{op:t[7],success:"Deleted."}}),{c(){e=g("form"),n=g("input"),i=C(),G(o.$$.fragment),s=C(),G(l.$$.fragment),u=C(),c=g("div"),G(p.$$.fragment),d=C(),G(h.$$.fragment),m=C(),_=g("h2"),_.textContent="Delete account",y=C(),b=g("form"),E=g("p"),j=N(R),D=C(),A=new Tt(!1),P=C(),G(U.$$.fragment),F=C(),I=g("div"),G(z.$$.fragment),x=C(),G(J.$$.fragment),k(n,"type","hidden"),k(n,"name","uid"),k(c,"class","form-actions"),k(e,"id","edit"),k(e,"method","post"),A.a=null,k(I,"class","form-actions"),k(b,"id","delete"),k(b,"method","post")},m(ie,he){w(ie,e,he),f(e,n),Ct(n,t[0].uid),f(e,i),q(o,e,null),f(e,s),q(l,e,null),f(e,u),f(e,c),q(p,c,null),f(e,d),q(h,e,null),w(ie,m,he),w(ie,_,he),w(ie,y,he),w(ie,b,he),f(b,E),f(E,j),f(E,D),A.m(T,E),f(b,P),q(U,b,null),f(b,F),f(b,I),q(z,I,null),f(b,x),q(J,b,null),O=!0,L||(Y=[Se(n,"input",t[18]),Se(e,"submit",rt(t[14])),Se(b,"submit",rt(t[12]))],L=!0)},p(ie,he){he&1&&Ct(n,ie[0].uid);const Te={};he&268435472&&(Te.$$scope={dirty:he,ctx:ie}),!r&&he&1&&(r=!0,Te.value=ie[0].email,ve(()=>r=!1)),o.$set(Te);const ce={};he&16&&(ce.placeholder=ie[4]("admin, bot, ...")),he&268435472&&(ce.$$scope={dirty:he,ctx:ie}),!a&&he&1&&(a=!0,ce.value=ie[0].roles,ve(()=>a=!1)),l.$set(ce);const ke={};he&268435472&&(ke.$$scope={dirty:he,ctx:ie}),p.$set(ke),(!O||he&16)&&R!==(R=ie[4]("This will permanently remove user settings, chat logs, uploaded files and other user related data.")+"")&&M(j,R),(!O||he&49)&&T!==(T=ie[5]('Please confirm by entering "**%1**" before hitting **%2**.',ie[0].email,ie[4]("Delete user"))+"")&&A.p(T);const Ie={};he&268435472&&(Ie.$$scope={dirty:he,ctx:ie}),!B&&he&4&&(B=!0,Ie.value=ie[2],ve(()=>B=!1)),U.$set(Ie);const De={};he&5&&(De.disabled=ie[2]!==ie[0].email),he&268435472&&(De.$$scope={dirty:he,ctx:ie}),z.$set(De)},i(ie){O||(v(o.$$.fragment,ie),v(l.$$.fragment,ie),v(p.$$.fragment,ie),v(h.$$.fragment,ie),v(U.$$.fragment,ie),v(z.$$.fragment,ie),v(J.$$.fragment,ie),O=!0)},o(ie){S(o.$$.fragment,ie),S(l.$$.fragment,ie),S(p.$$.fragment,ie),S(h.$$.fragment,ie),S(U.$$.fragment,ie),S(z.$$.fragment,ie),S(J.$$.fragment,ie),O=!1},d(ie){ie&&$(e),W(o),W(l),W(p),W(h),ie&&$(m),ie&&$(_),ie&&$(y),ie&&$(b),W(U),W(z),W(J),L=!1,st(Y)}}}function J1(t){let e,n=t[4]("User email")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("User email")+"")&&M(i,n)},d(o){o&&$(e)}}}function Q1(t){let e,n=t[4]("Using this form, you can generate a forgotten password or invite link for a user.")+"",i;return{c(){e=g("p"),i=N(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Using this form, you can generate a forgotten password or invite link for a user.")+"")&&M(i,n)},d(o){o&&$(e)}}}function va(t){let e,n=t[4]("A link was generated")+"",i,o,r,s,l=t[5](t[3].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"",a,u,c=t[5]("The link is valid until **%1**.",new Date(t[3].expires).toLocaleString())+"",p,d,h=t[3].url+"",m,_,y,b,E,R=t[4]("Tip: Clicking on the link will copy it to your clipboard.")+"",j,D,A;return{c(){e=g("h3"),i=N(n),o=C(),r=g("p"),s=new Tt(!1),a=C(),u=new Tt(!1),p=C(),d=g("a"),m=N(h),y=C(),b=g("p"),E=g("small"),j=N(R),s.a=a,u.a=null,k(d,"href",_=t[3].url)},m(T,P){w(T,e,P),f(e,i),w(T,o,P),w(T,r,P),s.m(l,r),f(r,a),u.m(c,r),w(T,p,P),w(T,d,P),f(d,m),w(T,y,P),w(T,b,P),f(b,E),f(E,j),D||(A=Se(d,"click",rt(t[11])),D=!0)},p(T,P){P&16&&n!==(n=T[4]("A link was generated")+"")&&M(i,n),P&40&&l!==(l=T[5](T[3].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"")&&s.p(l),P&40&&c!==(c=T[5]("The link is valid until **%1**.",new Date(T[3].expires).toLocaleString())+"")&&u.p(c),P&8&&h!==(h=T[3].url+"")&&M(m,h),P&8&&_!==(_=T[3].url)&&k(d,"href",_),P&16&&R!==(R=T[4]("Tip: Clicking on the link will copy it to your clipboard.")+"")&&M(j,R)},d(T){T&&$(e),T&&$(o),T&&$(r),T&&$(p),T&&$(d),T&&$(y),T&&$(b),D=!1,A()}}}function X1(t){let e,n=t[4]("Generate link")+"",i;return{c(){e=g("span"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Generate link")+"")&&M(i,n)},d(o){o&&$(e)}}}function $a(t){let e,n,i,o=t[25].email+"",r,s,l,a,u=t[25].roles.join(", ")+"",c,p,d,h=new bt(t[25].registered).getHumanDate({year:!0})+"",m,_;return{c(){e=g("tr"),n=g("td"),i=g("a"),r=N(o),l=C(),a=g("td"),c=N(u),p=C(),d=g("td"),m=N(h),_=C(),k(i,"href",s="#"+t[25].uid)},m(y,b){w(y,e,b),f(e,n),f(n,i),f(i,r),f(e,l),f(e,a),f(a,c),f(e,p),f(e,d),f(d,m),f(e,_)},p(y,b){b&2&&o!==(o=y[25].email+"")&&M(r,o),b&2&&s!==(s="#"+y[25].uid)&&k(i,"href",s),b&2&&u!==(u=y[25].roles.join(", ")+"")&&M(c,u),b&2&&h!==(h=new bt(y[25].registered).getHumanDate({year:!0})+"")&&M(m,h)},d(y){y&&$(e)}}}function x1(t){let e,n=t[4]("Email")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Email")+"")&&M(i,n)},d(o){o&&$(e)}}}function e0(t){let e,n=t[4]("Roles")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Roles")+"")&&M(i,n)},d(o){o&&$(e)}}}function t0(t){let e,n=t[4]("Roles must be separated by comma.")+"",i;return{c(){e=g("p"),i=N(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Roles must be separated by comma.")+"")&&M(i,n)},d(o){o&&$(e)}}}function n0(t){let e,n=t[4]("Save user")+"",i;return{c(){e=g("span"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Save user")+"")&&M(i,n)},d(o){o&&$(e)}}}function i0(t){let e,n=t[4]("Confirm email")+"",i;return{c(){e=g("span"),i=N(n),k(e,"slot","label")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Confirm email")+"")&&M(i,n)},d(o){o&&$(e)}}}function o0(t){let e,n=t[4]("Delete user")+"",i;return{c(){e=g("span"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&16&&n!==(n=o[4]("Delete user")+"")&&M(i,n)},d(o){o&&$(e)}}}function r0(t){let e,n,i,o,r,s;e=new Ut({props:{$$slots:{default:[Y1]},$$scope:{ctx:t}}});const l=[Z1,V1],a=[];function u(c,p){return c[0].uid?0:1}return o=u(t),r=a[o]=l[o](t),{c(){G(e.$$.fragment),n=C(),i=g("main"),r.c(),k(i,"class","main")},m(c,p){q(e,c,p),w(c,n,p),w(c,i,p),a[o].m(i,null),s=!0},p(c,[p]){const d={};p&268435473&&(d.$$scope={dirty:p,ctx:c}),e.$set(d);let h=o;o=u(c),o===h?a[o].p(c,p):(Ce(),S(a[h],1,1,()=>{a[h]=null}),Ae(),r=a[o],r?r.p(c,p):(r=a[o]=l[o](c),r.c()),v(r,1),r.m(i,null))},i(c){s||(v(e.$$.fragment,c),v(r),s=!0)},o(c){S(e.$$.fragment,c),S(r),s=!1},d(c){W(e,c),c&&$(n),c&&$(i),a[o].d()}}}function s0(t,e,n){let i,o,r,s,l,a;Ee(t,lt,I=>n(4,o=I)),Ee(t,Be,I=>n(17,s=I)),Ee(t,jt,I=>n(5,l=I));let{title:u="Users"}=e;const c=et.op("deleteUser"),p=et.op("getUsers");Ee(t,p,I=>n(6,a=I));const d=et.op("inviteUser");Ee(t,d,I=>n(16,r=I));const h=et.op("updateUser");let m="",_={email:""},y=[];Bt(D);function b(I){const z=du(I.target);z&&_t.showInApp(z,{title:o("Invite link copied")})}async function E(){c.reset(),h.reset(),m===_.email&&(await c.perform(_),c.is("success")&&(D(),Be.go("/settings/users",{replace:!0})))}function R(I,z){const x=uid&&z.filter(J=>J.uid==uid)[0];n(0,_=x?{..._,confirm_email:"",...x}:{..._,confirm_email:"",uid:""})}function j(){d.perform({email:_.email})}async function D(){await p.perform(),n(1,y=p.res.body.users||[]),p.reset()}function A(){c.reset(),h.perform({email:_.email,roles:Ir(_.roles)})}function T(){_.uid=this.value,n(0,_)}function P(I){t.$$.not_equal(_.email,I)&&(_.email=I,n(0,_))}function U(I){t.$$.not_equal(_.roles,I)&&(_.roles=I,n(0,_))}function B(I){m=I,n(2,m)}function F(I){t.$$.not_equal(_.email,I)&&(_.email=I,n(0,_))}return t.$$set=I=>{"title"in I&&n(15,u=I.title)},t.$$.update=()=>{t.$$.dirty&131074&&R(s,y),t.$$.dirty&65536&&n(3,i=r.res.body||{}),t.$$.dirty&1&&n(15,u=_.uid?_.email:"Users")},[_,y,m,i,o,l,a,c,p,d,h,b,E,j,A,u,r,s,T,P,U,B,F]}class l0 extends Xe{constructor(e){super(),Qe(this,e,s0,r0,Ze,{title:15})}}function wa(t,e,n){const i=t.slice();return i[21]=e[n],i[22]=e,i[23]=n,i}function a0(t){let e,n=t[6]("Files")+"",i;return{c(){e=g("h1"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&64&&n!==(n=o[6]("Files")+"")&&M(i,n)},d(o){o&&$(e)}}}function ka(t){let e,n,i=new bt(t[21].saved).getHumanDate({year:!0})+"",o,r,s,l,a,u,c,p=t[21].name+"",d,h,m,_,y=Jn(t[21].size,"B")+"",b,E,R,j,D,A;l=new be({props:{name:"copy"}}),l.$on("click",t[12]);function T(U){t[17](U,t[21])}let P={name:t[21].id};return t[21].selected!==void 0&&(P.value=t[21].selected),j=new nt({props:P}),me.push(()=>$e(j,"value",T)),{c(){e=g("tr"),n=g("td"),o=N(i),r=C(),s=g("td"),G(l.$$.fragment),a=C(),u=g("td"),c=g("a"),d=N(p),m=C(),_=g("td"),b=N(y),E=C(),R=g("td"),G(j.$$.fragment),k(c,"href",h=Be.urlFor("/file/"+t[11].id+"/"+t[21].id)),k(c,"target","convos_files_file"),k(_,"class","text-right"),k(R,"class","text-right")},m(U,B){w(U,e,B),f(e,n),f(n,o),f(e,r),f(e,s),q(l,s,null),f(e,a),f(e,u),f(u,c),f(c,d),f(e,m),f(e,_),f(_,b),f(e,E),f(e,R),q(j,R,null),A=!0},p(U,B){t=U,(!A||B&8)&&i!==(i=new bt(t[21].saved).getHumanDate({year:!0})+"")&&M(o,i),(!A||B&8)&&p!==(p=t[21].name+"")&&M(d,p),(!A||B&8&&h!==(h=Be.urlFor("/file/"+t[11].id+"/"+t[21].id)))&&k(c,"href",h),(!A||B&8)&&y!==(y=Jn(t[21].size,"B")+"")&&M(b,y);const F={};B&8&&(F.name=t[21].id),!D&&B&8&&(D=!0,F.value=t[21].selected,ve(()=>D=!1)),j.$set(F)},i(U){A||(v(l.$$.fragment,U),v(j.$$.fragment,U),A=!0)},o(U){S(l.$$.fragment,U),S(j.$$.fragment,U),A=!1},d(U){U&&$(e),W(l),W(j)}}}function ya(t){let e,n,i=t[6]("No files.")+"",o;return{c(){e=g("tr"),n=g("td"),o=N(i),k(n,"colspan","5")},m(r,s){w(r,e,s),f(e,n),f(n,o)},p(r,s){s&64&&i!==(i=r[6]("No files.")+"")&&M(o,i)},d(r){r&&$(e)}}}function Sa(t){let e,n;return e=new No({props:{colspan:"5",op:t[10],$$slots:{default:[u0]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o&16777216&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function u0(t){let e;return{c(){e=g("div"),e.textContent="\xA0"},m(n,i){w(n,e,i)},p:Le,d(n){n&&$(e)}}}function f0(t){let e,n=t[6]("Previous")+"",i;return{c(){e=g("span"),i=N(n),k(e,"class","disabled")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&64&&n!==(n=o[6]("Previous")+"")&&M(i,n)},i:Le,o:Le,d(o){o&&$(e)}}}function c0(t){let e,n;return e=new qe({props:{href:"/settings/files?after="+t[5],$$slots:{default:[d0]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o&32&&(r.href="/settings/files?after="+i[5]),o&16777280&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function d0(t){let e=t[6]("Previous")+"",n;return{c(){n=N(e)},m(i,o){w(i,n,o)},p(i,o){o&64&&e!==(e=i[6]("Previous")+"")&&M(n,e)},d(i){i&&$(n)}}}function p0(t){let e,n=t[6]("Next")+"",i;return{c(){e=g("span"),i=N(n),k(e,"class","disabled")},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&64&&n!==(n=o[6]("Next")+"")&&M(i,n)},i:Le,o:Le,d(o){o&&$(e)}}}function h0(t){let e,n;return e=new qe({props:{href:"/settings/files?after="+t[4],$$slots:{default:[m0]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o&16&&(r.href="/settings/files?after="+i[4]),o&16777280&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function m0(t){let e=t[6]("Next")+"",n;return{c(){n=N(e)},m(i,o){w(i,n,o)},p(i,o){o&64&&e!==(e=i[6]("Next")+"")&&M(n,e)},d(i){i&&$(n)}}}function _0(t){let e,n=t[6]("Delete selected files")+"",i;return{c(){e=g("span"),i=N(n)},m(o,r){w(o,e,r),f(e,i)},p(o,r){r&64&&n!==(n=o[6]("Delete selected files")+"")&&M(i,n)},d(o){o&&$(e)}}}function Ea(t){let e,n=t[8]("By deleting the files, you and everyone with the link *should* lose access to the file: Aggressive caching in browsers or proxies between Convos and other users might keep the file around for some time.")+"";return{c(){e=g("p")},m(i,o){w(i,e,o),e.innerHTML=n},p(i,o){o&256&&n!==(n=i[8]("By deleting the files, you and everyone with the link *should* lose access to the file: Aggressive caching in browsers or proxies between Convos and other users might keep the file around for some time.")+"")&&(e.innerHTML=n)},d(i){i&&$(e)}}}function g0(t){let e,n,i,o,r,s,l,a,u=t[6]("Uploaded")+"",c,p,d,h,m,_=t[6]("Name")+"",y,b,E,R=t[6]("Size")+"",j,D,A,T,P,U,B,F,I,z,x,J=!t[7].is("loading"),O,L,Y,H,V,Z,K,re,de,ie,he,Te,ce,ke;e=new Ut({props:{$$slots:{default:[a0]},$$scope:{ctx:t}}});function Ie(ue){t[16](ue)}let De={};t[0]!==void 0&&(De.value=t[0]),T=new nt({props:De}),me.push(()=>$e(T,"value",Ie));let Ne=t[3],Me=[];for(let ue=0;ue<Ne.length;ue+=1)Me[ue]=ka(wa(t,Ne,ue));const je=ue=>S(Me[ue],1,1,()=>{Me[ue]=null});let X=t[3].length===0&&ya(t);z=new No({props:{colspan:"5",op:t[9]}});let ge=J&&Sa(t);const fe=[c0,f0],He=[];function Re(ue,te){return ue[5]||ue[1].query.after?0:1}Y=Re(t),H=He[Y]=fe[Y](t);const oe=[h0,p0],ee=[];function we(ue,te){return ue[4]?0:1}Z=we(t),K=ee[Z]=oe[Z](t),ie=new ft({props:{icon:"trash",op:t[9],disabled:t[2],$$slots:{default:[_0]},$$scope:{ctx:t}}}),ie.$on("click",t[13]);let ye=(t[3].length||t[1].query.after)&&Ea(t);return{c(){G(e.$$.fragment),n=C(),i=g("main"),o=g("form"),r=g("table"),s=g("thead"),l=g("tr"),a=g("th"),c=N(u),p=C(),d=g("th"),d.textContent="\xA0",h=C(),m=g("th"),y=N(_),b=C(),E=g("th"),j=N(R),D=C(),A=g("th"),G(T.$$.fragment),U=C(),B=g("tbody");for(let ue=0;ue<Me.length;ue+=1)Me[ue].c();F=C(),X&&X.c(),I=C(),G(z.$$.fragment),x=C(),ge&&ge.c(),O=C(),L=g("div"),H.c(),V=C(),K.c(),re=C(),de=g("div"),G(ie.$$.fragment),he=C(),ye&&ye.c(),k(E,"class","text-right"),k(A,"class","text-right"),k(L,"class","pagination"),k(de,"class","form-actions"),k(o,"method","post"),k(i,"class","main")},m(ue,te){q(e,ue,te),w(ue,n,te),w(ue,i,te),f(i,o),f(o,r),f(r,s),f(s,l),f(l,a),f(a,c),f(l,p),f(l,d),f(l,h),f(l,m),f(m,y),f(l,b),f(l,E),f(E,j),f(l,D),f(l,A),q(T,A,null),f(r,U),f(r,B);for(let se=0;se<Me.length;se+=1)Me[se].m(B,null);f(B,F),X&&X.m(B,null),f(B,I),q(z,B,null),f(B,x),ge&&ge.m(B,null),f(o,O),f(o,L),He[Y].m(L,null),f(L,V),ee[Z].m(L,null),f(o,re),f(o,de),q(ie,de,null),f(o,he),ye&&ye.m(o,null),Te=!0,ce||(ke=[Se(o,"change",t[14]),Se(o,"submit",rt(t[15]))],ce=!0)},p(ue,[te]){const se={};te&16777280&&(se.$$scope={dirty:te,ctx:ue}),e.$set(se),(!Te||te&64)&&u!==(u=ue[6]("Uploaded")+"")&&M(c,u),(!Te||te&64)&&_!==(_=ue[6]("Name")+"")&&M(y,_),(!Te||te&64)&&R!==(R=ue[6]("Size")+"")&&M(j,R);const ne={};if(!P&&te&1&&(P=!0,ne.value=ue[0],ve(()=>P=!1)),T.$set(ne),te&6152){Ne=ue[3];let _e;for(_e=0;_e<Ne.length;_e+=1){const Ye=wa(ue,Ne,_e);Me[_e]?(Me[_e].p(Ye,te),v(Me[_e],1)):(Me[_e]=ka(Ye),Me[_e].c(),v(Me[_e],1),Me[_e].m(B,F))}for(Ce(),_e=Ne.length;_e<Me.length;_e+=1)je(_e);Ae()}ue[3].length===0?X?X.p(ue,te):(X=ya(ue),X.c(),X.m(B,I)):X&&(X.d(1),X=null),te&128&&(J=!ue[7].is("loading")),J?ge?(ge.p(ue,te),te&128&&v(ge,1)):(ge=Sa(ue),ge.c(),v(ge,1),ge.m(B,null)):ge&&(Ce(),S(ge,1,1,()=>{ge=null}),Ae());let Q=Y;Y=Re(ue),Y===Q?He[Y].p(ue,te):(Ce(),S(He[Q],1,1,()=>{He[Q]=null}),Ae(),H=He[Y],H?H.p(ue,te):(H=He[Y]=fe[Y](ue),H.c()),v(H,1),H.m(L,V));let le=Z;Z=we(ue),Z===le?ee[Z].p(ue,te):(Ce(),S(ee[le],1,1,()=>{ee[le]=null}),Ae(),K=ee[Z],K?K.p(ue,te):(K=ee[Z]=oe[Z](ue),K.c()),v(K,1),K.m(L,null));const pe={};te&4&&(pe.disabled=ue[2]),te&16777280&&(pe.$$scope={dirty:te,ctx:ue}),ie.$set(pe),ue[3].length||ue[1].query.after?ye?ye.p(ue,te):(ye=Ea(ue),ye.c(),ye.m(o,null)):ye&&(ye.d(1),ye=null)},i(ue){if(!Te){v(e.$$.fragment,ue),v(T.$$.fragment,ue);for(let te=0;te<Ne.length;te+=1)v(Me[te]);v(z.$$.fragment,ue),v(ge),v(H),v(K),v(ie.$$.fragment,ue),Te=!0}},o(ue){S(e.$$.fragment,ue),S(T.$$.fragment,ue),Me=Me.filter(Boolean);for(let te=0;te<Me.length;te+=1)S(Me[te]);S(z.$$.fragment,ue),S(ge),S(H),S(K),S(ie.$$.fragment,ue),Te=!1},d(ue){W(e,ue),ue&&$(n),ue&&$(i),W(T),$t(Me,ue),X&&X.d(),W(z),ge&&ge.d(),He[Y].d(),ee[Z].d(),W(ie),ye&&ye.d(),ce=!1,st(ke)}}}function b0(t,e,n){let i,o,r,s,l;Ee(t,lt,P=>n(6,o=P)),Ee(t,Be,P=>n(1,r=P)),Ee(t,jt,P=>n(8,l=P));const a=et.op("deleteFiles");Ee(t,a,P=>n(7,s=P));const u=et.op("getFiles");Ee(t,u,P=>n(18,i=P));const c=pt("user");let p=!1,d=!0,h=[],m="",_="";function y(P){const U=P.target.closest("tr").querySelector('[target="convos_files_file"]'),B=du({value:U.href});B&&_t.showInApp(B,{closeAfter:3e3,title:o("File URL copied")})}async function b(){const P=h.filter(U=>U.selected);await a.perform({fid:P.map(U=>U.id).join(","),uid:c.id}),n(3,h=h.filter(U=>!U.selected)),n(0,p=!1),R(),h.length===0&&E(Be)}async function E(P){const U=P.query.after||"";await u.perform({after:U,limit:20}),n(3,h=u.res.body.files||[]),n(0,p=!1),R(),(h.length||!U)&&(n(4,m=i.res.body.next&&h.slice(-1)[0].id||""),n(5,_=i.res.body.prev||""))}function R(){n(2,d=!h.find(P=>P.selected))}function j(P){n(3,h=h.map(U=>(U.selected=P,U)))}function D(P){Ln.call(this,t,P)}function A(P){p=P,n(0,p)}function T(P,U){t.$$.not_equal(U.selected,P)&&(U.selected=P,n(3,h))}return t.$$.update=()=>{t.$$.dirty&2&&E(r),t.$$.dirty&1&&j(p)},[p,r,d,h,m,_,o,s,l,a,u,c,y,b,R,D,A,T]}class v0 extends Xe{constructor(e){super(),Qe(this,e,b0,g0,Ze,{})}}function Ca(t,e,n){const i=t.slice();return i[23]=e[n],i}function Aa(t,e,n){const i=t.slice();return i[26]=e[n],i}function $0(t){let e,n,i,o=_n(t[8])+"",r,s,l;return e=new be({props:{family:"regular",name:"bell"}}),{c(){G(e.$$.fragment),n=C(),i=g("small"),r=N(o),k(i,"class","badge is-important"),i.hidden=s=!t[8].unread},m(a,u){q(e,a,u),w(a,n,u),w(a,i,u),f(i,r),l=!0},p(a,u){(!l||u&256)&&o!==(o=_n(a[8])+"")&&M(r,o),(!l||u&256&&s!==(s=!a[8].unread))&&(i.hidden=s)},i(a){l||(v(e.$$.fragment,a),l=!0)},o(a){S(e.$$.fragment,a),l=!1},d(a){W(e,a),a&&$(n),a&&$(i)}}}function Oa(t){let e,n;return e=new qe({props:{href:"/settings/connections",$$slots:{default:[w0]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o&536871040&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function w0(t){let e,n,i,o=t[7]("No conversations")+"",r,s;return e=new be({props:{name:"exclamation-circle"}}),{c(){G(e.$$.fragment),n=C(),i=g("span"),r=N(o)},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a&128)&&o!==(o=l[7]("No conversations")+"")&&M(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){W(e,l),l&&$(n),l&&$(i)}}}function k0(t){let e,n,i,o=(t[23].name||t[23].connection_id)+"",r,s,l,a=t[7](t[23].frozen)+"",u,c,p,d=_n(t[23])+"",h,m,_;return e=new be({props:{name:"network-wired"}}),{c(){G(e.$$.fragment),n=C(),i=g("span"),r=N(o),s=C(),l=g("span"),u=N(a),c=C(),p=g("b"),h=N(d),k(l,"class","tooltip"),k(p,"class","badge"),p.hidden=m=!t[23].unread},m(y,b){q(e,y,b),w(y,n,b),w(y,i,b),f(i,r),w(y,s,b),w(y,l,b),f(l,u),w(y,c,b),w(y,p,b),f(p,h),_=!0},p(y,b){(!_||b&8)&&o!==(o=(y[23].name||y[23].connection_id)+"")&&M(r,o),(!_||b&136)&&a!==(a=y[7](y[23].frozen)+"")&&M(u,a),(!_||b&8)&&d!==(d=_n(y[23])+"")&&M(h,d),(!_||b&8&&m!==(m=!y[23].unread))&&(p.hidden=m)},i(y){_||(v(e.$$.fragment,y),_=!0)},o(y){S(e.$$.fragment,y),_=!1},d(y){W(e,y),y&&$(n),y&&$(i),y&&$(s),y&&$(l),y&&$(c),y&&$(p)}}}function y0(t){let e,n;return e=new be({props:{name:t[26].is("private")?"user":"user-friends"}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o&8&&(r.name=i[26].is("private")?"user":"user-friends"),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function S0(t){let e,n;return e=new be({props:{name:"exclamation-triangle"}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p:Le,i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function E0(t){let e,n,i,o,r,s=t[26].name+"",l,a,u,c=t[7](t[26].frozen)+"",p,d,h,m=_n(t[26])+"",_,y,b;const E=[S0,y0],R=[];function j(D,A){return A&8&&(e=null),e==null&&(e=!!(D[26].frozen&&!D[26].is("private"))),e?0:1}return n=j(t,-1),i=R[n]=E[n](t),{c(){i.c(),o=C(),r=g("span"),l=N(s),a=C(),u=g("span"),p=N(c),d=C(),h=g("b"),_=N(m),k(u,"class","tooltip"),k(h,"class","badge"),h.hidden=y=!t[26].unread},m(D,A){R[n].m(D,A),w(D,o,A),w(D,r,A),f(r,l),w(D,a,A),w(D,u,A),f(u,p),w(D,d,A),w(D,h,A),f(h,_),b=!0},p(D,A){let T=n;n=j(D,A),n===T?R[n].p(D,A):(Ce(),S(R[T],1,1,()=>{R[T]=null}),Ae(),i=R[n],i?i.p(D,A):(i=R[n]=E[n](D),i.c()),v(i,1),i.m(o.parentNode,o)),(!b||A&8)&&s!==(s=D[26].name+"")&&M(l,s),(!b||A&136)&&c!==(c=D[7](D[26].frozen)+"")&&M(p,c),(!b||A&8)&&m!==(m=_n(D[26])+"")&&M(_,m),(!b||A&8&&y!==(y=!D[26].unread))&&(h.hidden=y)},i(D){b||(v(i),b=!0)},o(D){S(i),b=!1},d(D){R[n].d(D),D&&$(o),D&&$(r),D&&$(a),D&&$(u),D&&$(d),D&&$(h)}}}function Na(t){let e,n;return e=new qe({props:{href:t[26].path,class:So(t[23],t[26]),$$slots:{default:[E0]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o&8&&(r.href=i[26].path),o&8&&(r.class=So(i[23],i[26])),o&536871048&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function Ta(t){let e,n,i,o;e=new qe({props:{href:t[23].path,class:So(t[23],t[23]),$$slots:{default:[k0]},$$scope:{ctx:t}}});let r=t[23].conversations.toArray(),s=[];for(let a=0;a<r.length;a+=1)s[a]=Na(Aa(t,r,a));const l=a=>S(s[a],1,1,()=>{s[a]=null});return{c(){G(e.$$.fragment),n=C();for(let a=0;a<s.length;a+=1)s[a].c();i=ct()},m(a,u){q(e,a,u),w(a,n,u);for(let c=0;c<s.length;c+=1)s[c].m(a,u);w(a,i,u),o=!0},p(a,u){const c={};if(u&8&&(c.href=a[23].path),u&8&&(c.class=So(a[23],a[23])),u&536871048&&(c.$$scope={dirty:u,ctx:a}),e.$set(c),u&136){r=a[23].conversations.toArray();let p;for(p=0;p<r.length;p+=1){const d=Aa(a,r,p);s[p]?(s[p].p(d,u),v(s[p],1)):(s[p]=Na(d),s[p].c(),v(s[p],1),s[p].m(i.parentNode,i))}for(Ce(),p=r.length;p<s.length;p+=1)l(p);Ae()}},i(a){if(!o){v(e.$$.fragment,a);for(let u=0;u<r.length;u+=1)v(s[u]);o=!0}},o(a){S(e.$$.fragment,a),s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)S(s[u]);o=!1},d(a){W(e,a),a&&$(n),$t(s,a),a&&$(i)}}}function C0(t){let e,n,i,o=t[7]("Notifications")+"",r,s,l,a=_n(t[8])+"",u,c,p;return e=new be({props:{name:"bell"}}),{c(){G(e.$$.fragment),n=C(),i=g("span"),r=N(o),s=C(),l=g("b"),u=N(a),k(l,"class","badge"),l.hidden=c=!t[8].unread},m(d,h){q(e,d,h),w(d,n,h),w(d,i,h),f(i,r),w(d,s,h),w(d,l,h),f(l,u),p=!0},p(d,h){(!p||h&128)&&o!==(o=d[7]("Notifications")+"")&&M(r,o),(!p||h&256)&&a!==(a=_n(d[8])+"")&&M(u,a),(!p||h&256&&c!==(c=!d[8].unread))&&(l.hidden=c)},i(d){p||(v(e.$$.fragment,d),p=!0)},o(d){S(e.$$.fragment,d),p=!1},d(d){W(e,d),d&&$(n),d&&$(i),d&&$(s),d&&$(l)}}}function A0(t){let e,n,i,o=t[7]("Search")+"",r,s;return e=new be({props:{name:"search"}}),{c(){G(e.$$.fragment),n=C(),i=g("span"),r=N(o)},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a&128)&&o!==(o=l[7]("Search")+"")&&M(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){W(e,l),l&&$(n),l&&$(i)}}}function O0(t){let e,n,i,o=t[7]("Add conversation")+"",r,s;return e=new be({props:{name:"comment"}}),{c(){G(e.$$.fragment),n=C(),i=g("span"),r=N(o)},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a&128)&&o!==(o=l[7]("Add conversation")+"")&&M(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){W(e,l),l&&$(n),l&&$(i)}}}function N0(t){let e,n,i,o=t[7]("Connections")+"",r,s;return e=new be({props:{name:"network-wired"}}),{c(){G(e.$$.fragment),n=C(),i=g("span"),r=N(o)},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a&128)&&o!==(o=l[7]("Connections")+"")&&M(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){W(e,l),l&&$(n),l&&$(i)}}}function T0(t){let e,n,i,o=t[7]("Account")+"",r,s;return e=new be({props:{name:"user-cog"}}),{c(){G(e.$$.fragment),n=C(),i=g("span"),r=N(o)},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a&128)&&o!==(o=l[7]("Account")+"")&&M(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){W(e,l),l&&$(n),l&&$(i)}}}function R0(t){let e,n,i,o=t[7]("Files")+"",r,s;return e=new be({props:{name:"folder-open"}}),{c(){G(e.$$.fragment),n=C(),i=g("span"),r=N(o)},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a&128)&&o!==(o=l[7]("Files")+"")&&M(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){W(e,l),l&&$(n),l&&$(i)}}}function Ra(t){let e,n,i,o;return e=new qe({props:{href:"/settings",$$slots:{default:[M0]},$$scope:{ctx:t}}}),i=new qe({props:{href:"/settings/users",$$slots:{default:[L0]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment),n=C(),G(i.$$.fragment)},m(r,s){q(e,r,s),w(r,n,s),q(i,r,s),o=!0},p(r,s){const l={};s&536871040&&(l.$$scope={dirty:s,ctx:r}),e.$set(l);const a={};s&536871040&&(a.$$scope={dirty:s,ctx:r}),i.$set(a)},i(r){o||(v(e.$$.fragment,r),v(i.$$.fragment,r),o=!0)},o(r){S(e.$$.fragment,r),S(i.$$.fragment,r),o=!1},d(r){W(e,r),r&&$(n),W(i,r)}}}function M0(t){let e,n,i,o=t[7]("Settings")+"",r,s;return e=new be({props:{name:"tools"}}),{c(){G(e.$$.fragment),n=C(),i=g("span"),r=N(o)},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a&128)&&o!==(o=l[7]("Settings")+"")&&M(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){W(e,l),l&&$(n),l&&$(i)}}}function L0(t){let e,n,i,o=t[7]("Users")+"",r,s;return e=new be({props:{name:"users"}}),{c(){G(e.$$.fragment),n=C(),i=g("span"),r=N(o)},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a&128)&&o!==(o=l[7]("Users")+"")&&M(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){W(e,l),l&&$(n),l&&$(i)}}}function I0(t){let e,n,i,o=t[7]("Help")+"",r,s;return e=new be({props:{name:"question-circle"}}),{c(){G(e.$$.fragment),n=C(),i=g("span"),r=N(o)},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a&128)&&o!==(o=l[7]("Help")+"")&&M(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){W(e,l),l&&$(n),l&&$(i)}}}function P0(t){let e,n,i,o=t[7]('Search for "%1"',t[5])+"",r,s;return e=new be({props:{name:"search"}}),{c(){G(e.$$.fragment),n=C(),i=g("span"),r=N(o)},m(l,a){q(e,l,a),w(l,n,a),w(l,i,a),f(i,r),s=!0},p(l,a){(!s||a&160)&&o!==(o=l[7]('Search for "%1"',l[5])+"")&&M(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){W(e,l),l&&$(n),l&&$(i)}}}function D0(t){let e,n,i,o,r,s,l,a,u,c,p,d,h,m=t[7]("Conversations")+"",_,y,b,E,R,j=(t[3].email||t[7]("Account"))+"",D,A,T,P,U,B,F,I,z,x,J,O,L,Y,H=t[3].is("admin"),V,Z,K,re,de,ie,he,Te=t[7]("Log out")+"",ce,ke,Ie,De,Ne,Me,je;a=new be({props:{name:"search"}}),c=new qe({props:{href:"/chat",class:"btn-hallow for-notifications",$$slots:{default:[$0]},$$scope:{ctx:t}}});let X=!t[3].connections.size&&Oa(t),ge=t[3].connections.toArray(),fe=[];for(let oe=0;oe<ge.length;oe+=1)fe[oe]=Ta(Ca(t,ge,oe));const He=oe=>S(fe[oe],1,1,()=>{fe[oe]=null});T=new qe({props:{href:"/chat",$$slots:{default:[C0]},$$scope:{ctx:t}}}),U=new qe({props:{href:"/search",$$slots:{default:[A0]},$$scope:{ctx:t}}}),F=new qe({props:{href:t[6],$$slots:{default:[O0]},$$scope:{ctx:t}}}),z=new qe({props:{href:"/settings/connections",$$slots:{default:[N0]},$$scope:{ctx:t}}}),J=new qe({props:{href:"/settings/account",$$slots:{default:[T0]},$$scope:{ctx:t}}}),L=new qe({props:{href:"/settings/files",$$slots:{default:[R0]},$$scope:{ctx:t}}});let Re=H&&Ra(t);return Z=new qe({props:{href:"/help",$$slots:{default:[I0]},$$scope:{ctx:t}}}),de=new be({props:{name:"power-off"}}),Ie=new qe({props:{href:"/search?q="+encodeURIComponent(t[5]),class:"for-search hidden",$$slots:{default:[P0]},$$scope:{ctx:t}}}),{c(){e=g("div"),n=g("div"),i=g("form"),o=g("input"),s=C(),l=g("label"),G(a.$$.fragment),u=C(),G(c.$$.fragment),p=C(),d=g("nav"),h=g("h3"),_=N(m),y=C(),X&&X.c(),b=C();for(let oe=0;oe<fe.length;oe+=1)fe[oe].c();E=C(),R=g("h3"),D=N(j),A=C(),G(T.$$.fragment),P=C(),G(U.$$.fragment),B=C(),G(F.$$.fragment),I=C(),G(z.$$.fragment),x=C(),G(J.$$.fragment),O=C(),G(L.$$.fragment),Y=C(),Re&&Re.c(),V=C(),G(Z.$$.fragment),K=C(),re=g("a"),G(de.$$.fragment),ie=C(),he=g("span"),ce=N(Te),ke=C(),G(Ie.$$.fragment),k(o,"type","text"),k(o,"id","search_input"),k(o,"class","is-primary-menu-item"),k(o,"placeholder",r=t[4]?t[7]("Search..."):t[7]("Convos")),k(l,"for","search_input"),k(l,"class","btn-hallow"),k(i,"class","sidebar-header"),Je(i,"has-focus",t[4]),k(n,"class","sidebar-header__wrapper"),k(re,"href",Be.urlFor("/logout")+"?csrf="+Ge("csrf")),k(re,"target","_self"),k(d,"class","sidebar-left__nav"),Je(d,"is-filtering",t[1].length>0),k(e,"class","sidebar-left")},m(oe,ee){w(oe,e,ee),f(e,n),f(n,i),f(i,o),Ct(o,t[1]),f(i,s),f(i,l),q(a,l,null),f(i,u),q(c,i,null),f(e,p),f(e,d),f(d,h),f(h,_),f(d,y),X&&X.m(d,null),f(d,b);for(let we=0;we<fe.length;we+=1)fe[we].m(d,null);f(d,E),f(d,R),f(R,D),f(d,A),q(T,d,null),f(d,P),q(U,d,null),f(d,B),q(F,d,null),f(d,I),q(z,d,null),f(d,x),q(J,d,null),f(d,O),q(L,d,null),f(d,Y),Re&&Re.m(d,null),f(d,V),q(Z,d,null),f(d,K),f(d,re),q(de,re,null),f(re,ie),f(re,he),f(he,ce),f(d,ke),q(Ie,d,null),t[19](d),Ne=!0,Me||(je=[Se(o,"input",t[18]),Se(o,"blur",t[11]),Se(o,"focus",t[12]),Se(o,"keydown",t[14]),Se(i,"submit",U0),Se(d,"click",t[13])],Me=!0)},p(oe,[ee]){t=oe,(!Ne||ee&144&&r!==(r=t[4]?t[7]("Search..."):t[7]("Convos")))&&k(o,"placeholder",r),ee&2&&o.value!==t[1]&&Ct(o,t[1]);const we={};if(ee&536871168&&(we.$$scope={dirty:ee,ctx:t}),c.$set(we),(!Ne||ee&16)&&Je(i,"has-focus",t[4]),(!Ne||ee&128)&&m!==(m=t[7]("Conversations")+"")&&M(_,m),t[3].connections.size?X&&(Ce(),S(X,1,1,()=>{X=null}),Ae()):X?(X.p(t,ee),ee&8&&v(X,1)):(X=Oa(t),X.c(),v(X,1),X.m(d,b)),ee&136){ge=t[3].connections.toArray();let _e;for(_e=0;_e<ge.length;_e+=1){const Ye=Ca(t,ge,_e);fe[_e]?(fe[_e].p(Ye,ee),v(fe[_e],1)):(fe[_e]=Ta(Ye),fe[_e].c(),v(fe[_e],1),fe[_e].m(d,E))}for(Ce(),_e=ge.length;_e<fe.length;_e+=1)He(_e);Ae()}(!Ne||ee&136)&&j!==(j=(t[3].email||t[7]("Account"))+"")&&M(D,j);const ye={};ee&536871296&&(ye.$$scope={dirty:ee,ctx:t}),T.$set(ye);const ue={};ee&536871040&&(ue.$$scope={dirty:ee,ctx:t}),U.$set(ue);const te={};ee&64&&(te.href=t[6]),ee&536871040&&(te.$$scope={dirty:ee,ctx:t}),F.$set(te);const se={};ee&536871040&&(se.$$scope={dirty:ee,ctx:t}),z.$set(se);const ne={};ee&536871040&&(ne.$$scope={dirty:ee,ctx:t}),J.$set(ne);const Q={};ee&536871040&&(Q.$$scope={dirty:ee,ctx:t}),L.$set(Q),ee&8&&(H=t[3].is("admin")),H?Re?(Re.p(t,ee),ee&8&&v(Re,1)):(Re=Ra(t),Re.c(),v(Re,1),Re.m(d,V)):Re&&(Ce(),S(Re,1,1,()=>{Re=null}),Ae());const le={};ee&536871040&&(le.$$scope={dirty:ee,ctx:t}),Z.$set(le),(!Ne||ee&128)&&Te!==(Te=t[7]("Log out")+"")&&M(ce,Te);const pe={};ee&32&&(pe.href="/search?q="+encodeURIComponent(t[5])),ee&536871072&&(pe.$$scope={dirty:ee,ctx:t}),Ie.$set(pe),(!Ne||ee&2)&&Je(d,"is-filtering",t[1].length>0)},i(oe){if(!Ne){v(a.$$.fragment,oe),v(c.$$.fragment,oe),v(X);for(let ee=0;ee<ge.length;ee+=1)v(fe[ee]);v(T.$$.fragment,oe),v(U.$$.fragment,oe),v(F.$$.fragment,oe),v(z.$$.fragment,oe),v(J.$$.fragment,oe),v(L.$$.fragment,oe),v(Re),v(Z.$$.fragment,oe),v(de.$$.fragment,oe),v(Ie.$$.fragment,oe),ut(()=>{De||(De=tt(e,Yt,t[0],!0)),De.run(1)}),Ne=!0}},o(oe){S(a.$$.fragment,oe),S(c.$$.fragment,oe),S(X),fe=fe.filter(Boolean);for(let ee=0;ee<fe.length;ee+=1)S(fe[ee]);S(T.$$.fragment,oe),S(U.$$.fragment,oe),S(F.$$.fragment,oe),S(z.$$.fragment,oe),S(J.$$.fragment,oe),S(L.$$.fragment,oe),S(Re),S(Z.$$.fragment,oe),S(de.$$.fragment,oe),S(Ie.$$.fragment,oe),De||(De=tt(e,Yt,t[0],!1)),De.run(0),Ne=!1},d(oe){oe&&$(e),W(a),W(c),X&&X.d(),$t(fe,oe),W(T),W(U),W(F),W(z),W(J),W(L),Re&&Re.d(),W(Z),W(de),W(Ie),t[19](null),oe&&De&&De.end(),Me=!1,st(je)}}}function So(t,e){const n=[e.conversation_id?"for-conversation":"for-connection"];return(e.frozen||t.state!=="connected")&&n.push("is-frozen"),e.frozen&&n.push("has-tooltip"),e.errors&&n.push("has-errors"),e.notifications&&n.push("has-notifications"),n.join(" ")}function _n(t,e=60){return t.unread>e?e+"+":t.unread||0}const U0=t=>t.preventDefault();function B0(t,e,n){let i,o,r,s,l,a,u;Ee(t,vt,B=>n(20,r=B)),Ee(t,Be,B=>n(17,s=B)),Ee(t,lt,B=>n(7,a=B));let{transition:c}=e;const p=pt("user");Ee(t,p,B=>n(3,l=B));const d=p.notifications;Ee(t,d,B=>n(8,u=B));let h=0,m="",_,y=!1,b=[];function E(){gt(_,"a",B=>B.classList.remove("has-focus")),setTimeout(()=>{if(!_)return;n(1,m="");const B=document.activeElement;B&&br(B,_)&&gt(_,"a.has-path",F=>F.focus())},100)}function R(){if(!_)return;n(15,h=0),n(16,b=[]);const B=[m.match(/^\W+/)?"":"\\b\\W*"];B[0]&&B.push("");for(let I=0;I<B.length;I++){const z=m==="+"?new RegExp(/[1-9]\d*\+?\s*$/):m==="+@"?new RegExp(/^\s*\w.*[1-9]\d*\+?\s*$/):m==="+#"?new RegExp(/^\s*#.*[1-9]\d*\+?\s*$/):new RegExp(B[I]+ci(m),"i"),x={};if(gt(_,"a",(J,O)=>{const L=J.classList;!m.length&&L.contains("has-path")&&n(15,h=O),L.remove("has-focus");const Y=!m.length||!J.href.match(/\/search$/)&&!x[J.href]&&J.textContent.match(z);Y&&b.push(J),J.classList[Y?"remove":"add"]("hidden"),x[J.href]=!0}),b.length)break}gt(_,".for-connection",I=>{let z=I;for(;(z=z.nextElementSibling)&&z.classList.contains("for-conversation");)if(!z.classList.contains("hidden"))return I.classList.remove("hidden")});const F=_.querySelector(".for-search");F.classList[m?"remove":"add"]("hidden"),F.classList.contains("hidden")||b.push(F),gt(_,"h3",I=>{let z=I;for(;(z=z.nextElementSibling)&&!Co(z,"h3");)if(!z.classList.contains("hidden"))return I.classList.remove("hidden");I.classList.add("hidden")})}function j(){n(4,y=!1),m.indexOf("+")!==0&&E()}function D(){n(4,y=!0)}function A(B){(B.target.className||"").match(/(network|user)/)?(B.target.closest("a").pathname===location.pathname&&B.preventDefault(),setTimeout(()=>{Ri(vt,r="settings",r)},50)):B.target.closest("a")&&setTimeout(()=>{Ri(vt,r="",r)},50)}function T(B){if(B.keyCode==13){B.preventDefault(),E(),b[h]&&Be.go(b[h].href);return}const F=B.keyCode==38?-1:B.keyCode==40?1:0;F&&(B.preventDefault(),b[h]&&b[h].classList.remove("has-focus"),n(15,h+=B.ctrlKey?F*4:F)),h<0&&n(15,h=b.length-1),h>=b.length&&n(15,h=0)}function P(){m=this.value,n(1,m)}function U(B){me[B?"unshift":"push"](()=>{_=B,n(2,_)})}return t.$$set=B=>{"transition"in B&&n(0,c=B.transition)},t.$$.update=()=>{t.$$.dirty&2&&R(),t.$$.dirty&8&&n(6,i="/settings/conversation?connection_id="+(l.activeConversation.connection_id||"")),t.$$.dirty&2&&n(5,o=m.replace(/^\//,"")),t.$$.dirty&131076&&_&&E(),t.$$.dirty&98304&&b[h]&&b[h].classList.add("has-focus")},[c,m,_,l,y,o,i,a,u,p,d,j,D,A,T,h,b,s,P,U]}class j0 extends Xe{constructor(e){super(),Qe(this,e,B0,D0,Ze,{transition:0})}}class F0 extends Mt{constructor(){super(),this.prop("cookie","activeTheme","convos",{key:"theme"}),this.prop("cookie","colorScheme","auto"),this.prop("cookie","compactDisplay",!1),this.prop("ro","colorSchemeOptions",["Auto","Light","Dark"].map(e=>[e.toLowerCase(),e])),this.prop("ro","themeOptions",()=>Array.from(this._stylesheets.entries())),this.prop("rw","osColorScheme",""),this._stylesheets=new Map([])}hasColorScheme(e){return gt(document,'link[id$="-'+e+'"]').length>1}start(){gt(document,'link[rel="alternate stylesheet"][title]',n=>{const i=n.title.replace(/\s\([a-z]+\)$/,"");this._stylesheets.set(n.id.replace(/^theme_alt__[a-z]+-/,""),i)});let e=this.osColorScheme;return this._matchMedia||(this._matchMedia=window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):{addListener:()=>{}},this._matchMedia.addListener(n=>this.update({osColorScheme:n.matches?"dark":"light"})),e=this._matchMedia.matches?"dark":"light"),this.update({compactDisplay:this.compactDisplay,osColorScheme:e})}update(e){return(e.activeTheme||e.colorScheme||e.osColorScheme)&&this._activateTheme(e),super.update(e)}_activateTheme(e){const n=e.activeTheme||this.activeTheme,i=e.colorScheme||this.colorScheme,o=e.osColorScheme||this.osColorScheme,r=[i==="auto"?o:i,"normal","light"];let s;for(let l=0;l<r.length&&(s=document.getElementById("theme_alt__"+r[l]+"-"+n),!s);l++);gt(document,'link[rel*="style"][title]',l=>{s||(s=l),l.disabled=!0,l.disabled=l.href!==s.href,l.setAttribute("media",l===s?"":"none"),l.setAttribute("rel",l===s?"stylesheet":"alternate stylesheet")})}}var Yr={exports:{}};function Vr(t){return t instanceof Map?t.clear=t.delete=t.set=function(){throw new Error("map is read-only")}:t instanceof Set&&(t.add=t.clear=t.delete=function(){throw new Error("set is read-only")}),Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(e){var n=t[e];typeof n=="object"&&!Object.isFrozen(n)&&Vr(n)}),t}Yr.exports=Vr;Yr.exports.default=Vr;class Ma{constructor(e){e.data===void 0&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function qu(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function hn(t,...e){const n=Object.create(null);for(const i in t)n[i]=t[i];return e.forEach(function(i){for(const o in i)n[o]=i[o]}),n}const z0="</span>",La=t=>!!t.scope||t.sublanguage&&t.language,H0=(t,{prefix:e})=>{if(t.includes(".")){const n=t.split(".");return[`${e}${n.shift()}`,...n.map((i,o)=>`${i}${"_".repeat(o+1)}`)].join(" ")}return`${e}${t}`};class q0{constructor(e,n){this.buffer="",this.classPrefix=n.classPrefix,e.walk(this)}addText(e){this.buffer+=qu(e)}openNode(e){if(!La(e))return;let n="";e.sublanguage?n=`language-${e.language}`:n=H0(e.scope,{prefix:this.classPrefix}),this.span(n)}closeNode(e){!La(e)||(this.buffer+=z0)}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}const Ia=(t={})=>{const e={children:[]};return Object.assign(e,t),e};class Zr{constructor(){this.rootNode=Ia(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const n=Ia({scope:e});this.add(n),this.stack.push(n)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,n){return typeof n=="string"?e.addText(n):n.children&&(e.openNode(n),n.children.forEach(i=>this._walk(e,i)),e.closeNode(n)),e}static _collapse(e){typeof e!="string"&&(!e.children||(e.children.every(n=>typeof n=="string")?e.children=[e.children.join("")]:e.children.forEach(n=>{Zr._collapse(n)})))}}class W0 extends Zr{constructor(e){super(),this.options=e}addKeyword(e,n){e!==""&&(this.openNode(n),this.addText(e),this.closeNode())}addText(e){e!==""&&this.add(e)}addSublanguage(e,n){const i=e.root;i.sublanguage=!0,i.language=n,this.add(i)}toHTML(){return new q0(this,this.options).value()}finalize(){return!0}}function Di(t){return t?typeof t=="string"?t:t.source:null}function Wu(t){return In("(?=",t,")")}function G0(t){return In("(?:",t,")*")}function K0(t){return In("(?:",t,")?")}function In(...t){return t.map(n=>Di(n)).join("")}function Y0(t){const e=t[t.length-1];return typeof e=="object"&&e.constructor===Object?(t.splice(t.length-1,1),e):{}}function Jr(...t){const e=Y0(t);return"("+(e.capture?"":"?:")+t.map(i=>Di(i)).join("|")+")"}function Gu(t){return new RegExp(t.toString()+"|").exec("").length-1}function V0(t,e){const n=t&&t.exec(e);return n&&n.index===0}const Z0=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function Qr(t,{joinWith:e}){let n=0;return t.map(i=>{n+=1;const o=n;let r=Di(i),s="";for(;r.length>0;){const l=Z0.exec(r);if(!l){s+=r;break}s+=r.substring(0,l.index),r=r.substring(l.index+l[0].length),l[0][0]==="\\"&&l[1]?s+="\\"+String(Number(l[1])+o):(s+=l[0],l[0]==="("&&n++)}return s}).map(i=>`(${i})`).join(e)}const J0=/\b\B/,Ku="[a-zA-Z]\\w*",Xr="[a-zA-Z_]\\w*",Yu="\\b\\d+(\\.\\d+)?",Vu="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",Zu="\\b(0b[01]+)",Q0="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",X0=(t={})=>{const e=/^#![ ]*\//;return t.binary&&(t.begin=In(e,/.*\b/,t.binary,/\b.*/)),hn({scope:"meta",begin:e,end:/$/,relevance:0,"on:begin":(n,i)=>{n.index!==0&&i.ignoreMatch()}},t)},Ui={begin:"\\\\[\\s\\S]",relevance:0},x0={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[Ui]},ev={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[Ui]},tv={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},To=function(t,e,n={}){const i=hn({scope:"comment",begin:t,end:e,contains:[]},n);i.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const o=Jr("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return i.contains.push({begin:In(/[ ]+/,"(",o,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),i},nv=To("//","$"),iv=To("/\\*","\\*/"),ov=To("#","$"),rv={scope:"number",begin:Yu,relevance:0},sv={scope:"number",begin:Vu,relevance:0},lv={scope:"number",begin:Zu,relevance:0},av={begin:/(?=\/[^/\n]*\/)/,contains:[{scope:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[Ui,{begin:/\[/,end:/\]/,relevance:0,contains:[Ui]}]}]},uv={scope:"title",begin:Ku,relevance:0},fv={scope:"title",begin:Xr,relevance:0},cv={begin:"\\.\\s*"+Xr,relevance:0},dv=function(t){return Object.assign(t,{"on:begin":(e,n)=>{n.data._beginMatch=e[1]},"on:end":(e,n)=>{n.data._beginMatch!==e[1]&&n.ignoreMatch()}})};var uo=Object.freeze({__proto__:null,MATCH_NOTHING_RE:J0,IDENT_RE:Ku,UNDERSCORE_IDENT_RE:Xr,NUMBER_RE:Yu,C_NUMBER_RE:Vu,BINARY_NUMBER_RE:Zu,RE_STARTERS_RE:Q0,SHEBANG:X0,BACKSLASH_ESCAPE:Ui,APOS_STRING_MODE:x0,QUOTE_STRING_MODE:ev,PHRASAL_WORDS_MODE:tv,COMMENT:To,C_LINE_COMMENT_MODE:nv,C_BLOCK_COMMENT_MODE:iv,HASH_COMMENT_MODE:ov,NUMBER_MODE:rv,C_NUMBER_MODE:sv,BINARY_NUMBER_MODE:lv,REGEXP_MODE:av,TITLE_MODE:uv,UNDERSCORE_TITLE_MODE:fv,METHOD_GUARD:cv,END_SAME_AS_BEGIN:dv});function pv(t,e){t.input[t.index-1]==="."&&e.ignoreMatch()}function hv(t,e){t.className!==void 0&&(t.scope=t.className,delete t.className)}function mv(t,e){!e||!t.beginKeywords||(t.begin="\\b("+t.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",t.__beforeBegin=pv,t.keywords=t.keywords||t.beginKeywords,delete t.beginKeywords,t.relevance===void 0&&(t.relevance=0))}function _v(t,e){!Array.isArray(t.illegal)||(t.illegal=Jr(...t.illegal))}function gv(t,e){if(!!t.match){if(t.begin||t.end)throw new Error("begin & end are not supported with match");t.begin=t.match,delete t.match}}function bv(t,e){t.relevance===void 0&&(t.relevance=1)}const vv=(t,e)=>{if(!t.beforeMatch)return;if(t.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},t);Object.keys(t).forEach(i=>{delete t[i]}),t.keywords=n.keywords,t.begin=In(n.beforeMatch,Wu(n.begin)),t.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},t.relevance=0,delete n.beforeMatch},$v=["of","and","for","in","not","or","if","then","parent","list","value"],wv="keyword";function Ju(t,e,n=wv){const i=Object.create(null);return typeof t=="string"?o(n,t.split(" ")):Array.isArray(t)?o(n,t):Object.keys(t).forEach(function(r){Object.assign(i,Ju(t[r],e,r))}),i;function o(r,s){e&&(s=s.map(l=>l.toLowerCase())),s.forEach(function(l){const a=l.split("|");i[a[0]]=[r,kv(a[0],a[1])]})}}function kv(t,e){return e?Number(e):yv(t)?0:1}function yv(t){return $v.includes(t.toLowerCase())}const Pa={},Rn=t=>{console.error(t)},Da=(t,...e)=>{console.log(`WARN: ${t}`,...e)},Kn=(t,e)=>{Pa[`${t}/${e}`]||(console.log(`Deprecated as of ${t}. ${e}`),Pa[`${t}/${e}`]=!0)},Eo=new Error;function Qu(t,e,{key:n}){let i=0;const o=t[n],r={},s={};for(let l=1;l<=e.length;l++)s[l+i]=o[l],r[l+i]=!0,i+=Gu(e[l-1]);t[n]=s,t[n]._emit=r,t[n]._multi=!0}function Sv(t){if(!!Array.isArray(t.begin)){if(t.skip||t.excludeBegin||t.returnBegin)throw Rn("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),Eo;if(typeof t.beginScope!="object"||t.beginScope===null)throw Rn("beginScope must be object"),Eo;Qu(t,t.begin,{key:"beginScope"}),t.begin=Qr(t.begin,{joinWith:""})}}function Ev(t){if(!!Array.isArray(t.end)){if(t.skip||t.excludeEnd||t.returnEnd)throw Rn("skip, excludeEnd, returnEnd not compatible with endScope: {}"),Eo;if(typeof t.endScope!="object"||t.endScope===null)throw Rn("endScope must be object"),Eo;Qu(t,t.end,{key:"endScope"}),t.end=Qr(t.end,{joinWith:""})}}function Cv(t){t.scope&&typeof t.scope=="object"&&t.scope!==null&&(t.beginScope=t.scope,delete t.scope)}function Av(t){Cv(t),typeof t.beginScope=="string"&&(t.beginScope={_wrap:t.beginScope}),typeof t.endScope=="string"&&(t.endScope={_wrap:t.endScope}),Sv(t),Ev(t)}function Ov(t){function e(s,l){return new RegExp(Di(s),"m"+(t.case_insensitive?"i":"")+(t.unicodeRegex?"u":"")+(l?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(l,a){a.position=this.position++,this.matchIndexes[this.matchAt]=a,this.regexes.push([a,l]),this.matchAt+=Gu(l)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const l=this.regexes.map(a=>a[1]);this.matcherRe=e(Qr(l,{joinWith:"|"}),!0),this.lastIndex=0}exec(l){this.matcherRe.lastIndex=this.lastIndex;const a=this.matcherRe.exec(l);if(!a)return null;const u=a.findIndex((p,d)=>d>0&&p!==void 0),c=this.matchIndexes[u];return a.splice(0,u),Object.assign(a,c)}}class i{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(l){if(this.multiRegexes[l])return this.multiRegexes[l];const a=new n;return this.rules.slice(l).forEach(([u,c])=>a.addRule(u,c)),a.compile(),this.multiRegexes[l]=a,a}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(l,a){this.rules.push([l,a]),a.type==="begin"&&this.count++}exec(l){const a=this.getMatcher(this.regexIndex);a.lastIndex=this.lastIndex;let u=a.exec(l);if(this.resumingScanAtSamePosition()&&!(u&&u.index===this.lastIndex)){const c=this.getMatcher(0);c.lastIndex=this.lastIndex+1,u=c.exec(l)}return u&&(this.regexIndex+=u.position+1,this.regexIndex===this.count&&this.considerAll()),u}}function o(s){const l=new i;return s.contains.forEach(a=>l.addRule(a.begin,{rule:a,type:"begin"})),s.terminatorEnd&&l.addRule(s.terminatorEnd,{type:"end"}),s.illegal&&l.addRule(s.illegal,{type:"illegal"}),l}function r(s,l){const a=s;if(s.isCompiled)return a;[hv,gv,Av,vv].forEach(c=>c(s,l)),t.compilerExtensions.forEach(c=>c(s,l)),s.__beforeBegin=null,[mv,_v,bv].forEach(c=>c(s,l)),s.isCompiled=!0;let u=null;return typeof s.keywords=="object"&&s.keywords.$pattern&&(s.keywords=Object.assign({},s.keywords),u=s.keywords.$pattern,delete s.keywords.$pattern),u=u||/\w+/,s.keywords&&(s.keywords=Ju(s.keywords,t.case_insensitive)),a.keywordPatternRe=e(u,!0),l&&(s.begin||(s.begin=/\B|\b/),a.beginRe=e(a.begin),!s.end&&!s.endsWithParent&&(s.end=/\B|\b/),s.end&&(a.endRe=e(a.end)),a.terminatorEnd=Di(a.end)||"",s.endsWithParent&&l.terminatorEnd&&(a.terminatorEnd+=(s.end?"|":"")+l.terminatorEnd)),s.illegal&&(a.illegalRe=e(s.illegal)),s.contains||(s.contains=[]),s.contains=[].concat(...s.contains.map(function(c){return Nv(c==="self"?s:c)})),s.contains.forEach(function(c){r(c,a)}),s.starts&&r(s.starts,l),a.matcher=o(a),a}if(t.compilerExtensions||(t.compilerExtensions=[]),t.contains&&t.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return t.classNameAliases=hn(t.classNameAliases||{}),r(t)}function Xu(t){return t?t.endsWithParent||Xu(t.starts):!1}function Nv(t){return t.variants&&!t.cachedVariants&&(t.cachedVariants=t.variants.map(function(e){return hn(t,{variants:null},e)})),t.cachedVariants?t.cachedVariants:Xu(t)?hn(t,{starts:t.starts?hn(t.starts):null}):Object.isFrozen(t)?hn(t):t}var Tv="11.6.0";class Rv extends Error{constructor(e,n){super(e),this.name="HTMLInjectionError",this.html=n}}const ar=qu,Ua=hn,Ba=Symbol("nomatch"),Mv=7,Lv=function(t){const e=Object.create(null),n=Object.create(null),i=[];let o=!0;const r="Could not find the language '{}', did you forget to load/include a language module?",s={disableAutodetect:!0,name:"Plain text",contains:[]};let l={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:W0};function a(O){return l.noHighlightRe.test(O)}function u(O){let L=O.className+" ";L+=O.parentNode?O.parentNode.className:"";const Y=l.languageDetectRe.exec(L);if(Y){const H=U(Y[1]);return H||(Da(r.replace("{}",Y[1])),Da("Falling back to no-highlight mode for this block.",O)),H?Y[1]:"no-highlight"}return L.split(/\s+/).find(H=>a(H)||U(H))}function c(O,L,Y){let H="",V="";typeof L=="object"?(H=O,Y=L.ignoreIllegals,V=L.language):(Kn("10.7.0","highlight(lang, code, ...args) has been deprecated."),Kn("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),V=O,H=L),Y===void 0&&(Y=!0);const Z={code:H,language:V};x("before:highlight",Z);const K=Z.result?Z.result:p(Z.language,Z.code,Y);return K.code=Z.code,x("after:highlight",K),K}function p(O,L,Y,H){const V=Object.create(null);function Z(te,se){return te.keywords[se]}function K(){if(!fe.keywords){Re.addText(oe);return}let te=0;fe.keywordPatternRe.lastIndex=0;let se=fe.keywordPatternRe.exec(oe),ne="";for(;se;){ne+=oe.substring(te,se.index);const Q=je.case_insensitive?se[0].toLowerCase():se[0],le=Z(fe,Q);if(le){const[pe,_e]=le;if(Re.addText(ne),ne="",V[Q]=(V[Q]||0)+1,V[Q]<=Mv&&(ee+=_e),pe.startsWith("_"))ne+=se[0];else{const Ye=je.classNameAliases[pe]||pe;Re.addKeyword(se[0],Ye)}}else ne+=se[0];te=fe.keywordPatternRe.lastIndex,se=fe.keywordPatternRe.exec(oe)}ne+=oe.substring(te),Re.addText(ne)}function re(){if(oe==="")return;let te=null;if(typeof fe.subLanguage=="string"){if(!e[fe.subLanguage]){Re.addText(oe);return}te=p(fe.subLanguage,oe,!0,He[fe.subLanguage]),He[fe.subLanguage]=te._top}else te=h(oe,fe.subLanguage.length?fe.subLanguage:null);fe.relevance>0&&(ee+=te.relevance),Re.addSublanguage(te._emitter,te.language)}function de(){fe.subLanguage!=null?re():K(),oe=""}function ie(te,se){let ne=1;const Q=se.length-1;for(;ne<=Q;){if(!te._emit[ne]){ne++;continue}const le=je.classNameAliases[te[ne]]||te[ne],pe=se[ne];le?Re.addKeyword(pe,le):(oe=pe,K(),oe=""),ne++}}function he(te,se){return te.scope&&typeof te.scope=="string"&&Re.openNode(je.classNameAliases[te.scope]||te.scope),te.beginScope&&(te.beginScope._wrap?(Re.addKeyword(oe,je.classNameAliases[te.beginScope._wrap]||te.beginScope._wrap),oe=""):te.beginScope._multi&&(ie(te.beginScope,se),oe="")),fe=Object.create(te,{parent:{value:fe}}),fe}function Te(te,se,ne){let Q=V0(te.endRe,ne);if(Q){if(te["on:end"]){const le=new Ma(te);te["on:end"](se,le),le.isMatchIgnored&&(Q=!1)}if(Q){for(;te.endsParent&&te.parent;)te=te.parent;return te}}if(te.endsWithParent)return Te(te.parent,se,ne)}function ce(te){return fe.matcher.regexIndex===0?(oe+=te[0],1):(ue=!0,0)}function ke(te){const se=te[0],ne=te.rule,Q=new Ma(ne),le=[ne.__beforeBegin,ne["on:begin"]];for(const pe of le)if(!!pe&&(pe(te,Q),Q.isMatchIgnored))return ce(se);return ne.skip?oe+=se:(ne.excludeBegin&&(oe+=se),de(),!ne.returnBegin&&!ne.excludeBegin&&(oe=se)),he(ne,te),ne.returnBegin?0:se.length}function Ie(te){const se=te[0],ne=L.substring(te.index),Q=Te(fe,te,ne);if(!Q)return Ba;const le=fe;fe.endScope&&fe.endScope._wrap?(de(),Re.addKeyword(se,fe.endScope._wrap)):fe.endScope&&fe.endScope._multi?(de(),ie(fe.endScope,te)):le.skip?oe+=se:(le.returnEnd||le.excludeEnd||(oe+=se),de(),le.excludeEnd&&(oe=se));do fe.scope&&Re.closeNode(),!fe.skip&&!fe.subLanguage&&(ee+=fe.relevance),fe=fe.parent;while(fe!==Q.parent);return Q.starts&&he(Q.starts,te),le.returnEnd?0:se.length}function De(){const te=[];for(let se=fe;se!==je;se=se.parent)se.scope&&te.unshift(se.scope);te.forEach(se=>Re.openNode(se))}let Ne={};function Me(te,se){const ne=se&&se[0];if(oe+=te,ne==null)return de(),0;if(Ne.type==="begin"&&se.type==="end"&&Ne.index===se.index&&ne===""){if(oe+=L.slice(se.index,se.index+1),!o){const Q=new Error(`0 width match regex (${O})`);throw Q.languageName=O,Q.badRule=Ne.rule,Q}return 1}if(Ne=se,se.type==="begin")return ke(se);if(se.type==="illegal"&&!Y){const Q=new Error('Illegal lexeme "'+ne+'" for mode "'+(fe.scope||"<unnamed>")+'"');throw Q.mode=fe,Q}else if(se.type==="end"){const Q=Ie(se);if(Q!==Ba)return Q}if(se.type==="illegal"&&ne==="")return 1;if(ye>1e5&&ye>se.index*3)throw new Error("potential infinite loop, way more iterations than matches");return oe+=ne,ne.length}const je=U(O);if(!je)throw Rn(r.replace("{}",O)),new Error('Unknown language: "'+O+'"');const X=Ov(je);let ge="",fe=H||X;const He={},Re=new l.__emitter(l);De();let oe="",ee=0,we=0,ye=0,ue=!1;try{for(fe.matcher.considerAll();;){ye++,ue?ue=!1:fe.matcher.considerAll(),fe.matcher.lastIndex=we;const te=fe.matcher.exec(L);if(!te)break;const se=L.substring(we,te.index),ne=Me(se,te);we=te.index+ne}return Me(L.substring(we)),Re.closeAllNodes(),Re.finalize(),ge=Re.toHTML(),{language:O,value:ge,relevance:ee,illegal:!1,_emitter:Re,_top:fe}}catch(te){if(te.message&&te.message.includes("Illegal"))return{language:O,value:ar(L),illegal:!0,relevance:0,_illegalBy:{message:te.message,index:we,context:L.slice(we-100,we+100),mode:te.mode,resultSoFar:ge},_emitter:Re};if(o)return{language:O,value:ar(L),illegal:!1,relevance:0,errorRaised:te,_emitter:Re,_top:fe};throw te}}function d(O){const L={value:ar(O),illegal:!1,relevance:0,_top:s,_emitter:new l.__emitter(l)};return L._emitter.addText(O),L}function h(O,L){L=L||l.languages||Object.keys(e);const Y=d(O),H=L.filter(U).filter(F).map(de=>p(de,O,!1));H.unshift(Y);const V=H.sort((de,ie)=>{if(de.relevance!==ie.relevance)return ie.relevance-de.relevance;if(de.language&&ie.language){if(U(de.language).supersetOf===ie.language)return 1;if(U(ie.language).supersetOf===de.language)return-1}return 0}),[Z,K]=V,re=Z;return re.secondBest=K,re}function m(O,L,Y){const H=L&&n[L]||Y;O.classList.add("hljs"),O.classList.add(`language-${H}`)}function _(O){let L=null;const Y=u(O);if(a(Y))return;if(x("before:highlightElement",{el:O,language:Y}),O.children.length>0&&(l.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(O)),l.throwUnescapedHTML))throw new Rv("One of your code blocks includes unescaped HTML.",O.innerHTML);L=O;const H=L.textContent,V=Y?c(H,{language:Y,ignoreIllegals:!0}):h(H);O.innerHTML=V.value,m(O,Y,V.language),O.result={language:V.language,re:V.relevance,relevance:V.relevance},V.secondBest&&(O.secondBest={language:V.secondBest.language,relevance:V.secondBest.relevance}),x("after:highlightElement",{el:O,result:V,text:H})}function y(O){l=Ua(l,O)}const b=()=>{j(),Kn("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function E(){j(),Kn("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let R=!1;function j(){if(document.readyState==="loading"){R=!0;return}document.querySelectorAll(l.cssSelector).forEach(_)}function D(){R&&j()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",D,!1);function A(O,L){let Y=null;try{Y=L(t)}catch(H){if(Rn("Language definition for '{}' could not be registered.".replace("{}",O)),o)Rn(H);else throw H;Y=s}Y.name||(Y.name=O),e[O]=Y,Y.rawDefinition=L.bind(null,t),Y.aliases&&B(Y.aliases,{languageName:O})}function T(O){delete e[O];for(const L of Object.keys(n))n[L]===O&&delete n[L]}function P(){return Object.keys(e)}function U(O){return O=(O||"").toLowerCase(),e[O]||e[n[O]]}function B(O,{languageName:L}){typeof O=="string"&&(O=[O]),O.forEach(Y=>{n[Y.toLowerCase()]=L})}function F(O){const L=U(O);return L&&!L.disableAutodetect}function I(O){O["before:highlightBlock"]&&!O["before:highlightElement"]&&(O["before:highlightElement"]=L=>{O["before:highlightBlock"](Object.assign({block:L.el},L))}),O["after:highlightBlock"]&&!O["after:highlightElement"]&&(O["after:highlightElement"]=L=>{O["after:highlightBlock"](Object.assign({block:L.el},L))})}function z(O){I(O),i.push(O)}function x(O,L){const Y=O;i.forEach(function(H){H[Y]&&H[Y](L)})}function J(O){return Kn("10.7.0","highlightBlock will be removed entirely in v12.0"),Kn("10.7.0","Please use highlightElement now."),_(O)}Object.assign(t,{highlight:c,highlightAuto:h,highlightAll:j,highlightElement:_,highlightBlock:J,configure:y,initHighlighting:b,initHighlightingOnLoad:E,registerLanguage:A,unregisterLanguage:T,listLanguages:P,getLanguage:U,registerAliases:B,autoDetection:F,inherit:Ua,addPlugin:z}),t.debugMode=function(){o=!1},t.safeMode=function(){o=!0},t.versionString=Tv,t.regex={concat:In,lookahead:Wu,either:Jr,optional:K0,anyNumberOfTimes:G0};for(const O in uo)typeof uo[O]=="object"&&Yr.exports(uo[O]);return Object.assign(t,uo),t};var Bi=Lv({}),Iv=Bi;Bi.HighlightJS=Bi;Bi.default=Bi;const ht=Iv;function Pv(t){t.lineNumbersBlock=function(e,n){t.highlightBlock(e,n),e.innerHTML=Hv(e,n)}}var Dv="hljs-ln",ja="hljs-ln-line",xu="hljs-ln-code",Uv="hljs-ln-numbers",Bv="hljs-ln-n",po="data-line-number",ef=/\r\n|\r|\n/g;function jv(t){for(var e=t;e;){if(e.className&&e.className.indexOf("hljs-ln-code")!==-1)return!0;e=e.parentNode}return!1}function Fv(t){for(var e=t;e.nodeName!=="TABLE";)e=e.parentNode;return e}function zv(t){for(var e=t.toString(),n=t.anchorNode;n.nodeName!=="TD";)n=n.parentNode;for(var i=t.focusNode;i.nodeName!=="TD";)i=i.parentNode;var o=parseInt(n.dataset.lineNumber,10),r=parseInt(i.dataset.lineNumber,10);if(o!==r){var s=n.textContent,l=i.textContent;if(o>r){var a=o;o=r,r=a,a=s,s=l,l=a}for(;e.indexOf(s)!==0;)s=s.slice(1);for(;e.lastIndexOf(l)===-1;)l=l.slice(0,-1);for(var u=s,c=Fv(n),p=o+1;p<r;++p){var d=`.${xu}[${po}="${p}"]`,h=c.querySelector(d);u+=`
`+h.textContent}return u+=`
`+l,u}else return e}document.addEventListener("copy",function(t){var e=window.getSelection();if(jv(e.anchorNode)){var n;window.navigator.userAgent.indexOf("Edge")!==-1?n=zv(e):n=e.toString(),t.clipboardData.setData("text/plain",n),t.preventDefault()}});function Hv(t,e){e=e||{singleLine:!1};var n=e.singleLine?0:1;return tf(t),qv(t.innerHTML,n)}function qv(t,e){var n=nf(t);if(n[n.length-1].trim()===""&&n.pop(),n.length>e){for(var i="",o=0,r=n.length;o<r;o++){let s=o+1;i+=`<tr><td class="${ja} ${Uv}" ${po}="${s}"><div class="${Bv}" ${po}="${s}"></div></td><td class="${ja} ${xu}" ${po}="${s}">`+(n[o].length>0?n[o]:" ")+"</td></tr>"}return`<table class="${Dv}">${i}</table>`}return t}function tf(t){var e=t.childNodes;for(var n in e)if(Object.hasOwn(e,n)){var i=e[n];Gv(i.textContent)>0&&(i.childNodes.length>0?tf(i):Wv(i.parentNode))}}function Wv(t){var e=t.className;if(!!/hljs-/.test(e)){for(var n=nf(t.innerHTML),i=0,o="";i<n.length;i++){var r=n[i].length>0?n[i]:" ";o+=`<span class="${e}">${r}</span>
`}t.innerHTML=o.trim()}}function nf(t){return t.length===0?[]:t.split(ef)}function Gv(t){return(t.trim().match(ef)||[]).length}function Kv(t){return{name:"Dockerfile",aliases:["docker"],case_insensitive:!0,keywords:["from","maintainer","expose","env","arg","user","onbuild","stopsignal"],contains:[t.HASH_COMMENT_MODE,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,t.NUMBER_MODE,{beginKeywords:"run cmd entrypoint volume add copy workdir label healthcheck shell",starts:{end:/[^\\]$/,subLanguage:"bash"}}],illegal:"</"}}const Fa="[A-Za-z$_][0-9A-Za-z$_]*",Yv=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],Vv=["true","false","null","undefined","NaN","Infinity"],of=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],rf=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],sf=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],Zv=["arguments","this","super","console","window","document","localStorage","module","global"],Jv=[].concat(sf,of,rf);function Qv(t){const e=t.regex,n=(L,{after:Y})=>{const H="</"+L[0].slice(1);return L.input.indexOf(H,Y)!==-1},i=Fa,o={begin:"<>",end:"</>"},r=/<[A-Za-z0-9\\._:-]+\s*\/>/,s={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(L,Y)=>{const H=L[0].length+L.index,V=L.input[H];if(V==="<"||V===","){Y.ignoreMatch();return}V===">"&&(n(L,{after:H})||Y.ignoreMatch());let Z;if((Z=L.input.substring(H).match(/^\s+extends\s+/))&&Z.index===0){Y.ignoreMatch();return}}},l={$pattern:Fa,keyword:Yv,literal:Vv,built_in:Jv,"variable.language":Zv},a="[0-9](_?[0-9])*",u=`\\.(${a})`,c="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",p={className:"number",variants:[{begin:`(\\b(${c})((${u})|\\.)?|(${u}))[eE][+-]?(${a})\\b`},{begin:`\\b(${c})\\b((${u})\\b|\\.)?|(${u})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},d={className:"subst",begin:"\\$\\{",end:"\\}",keywords:l,contains:[]},h={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,d],subLanguage:"xml"}},m={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,d],subLanguage:"css"}},_={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,d]},y=t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:i+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),b={className:"comment",variants:[y,t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},E=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,h,m,_,p];d.contains=E.concat({begin:/\{/,end:/\}/,keywords:l,contains:["self"].concat(E)});const R=[].concat(b,d.contains),j=R.concat([{begin:/\(/,end:/\)/,keywords:l,contains:["self"].concat(R)}]),D={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:j},A={variants:[{match:[/class/,/\s+/,i,/\s+/,/extends/,/\s+/,e.concat(i,"(",e.concat(/\./,i),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,i],scope:{1:"keyword",3:"title.class"}}]},T={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...of,...rf]}},P={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},U={variants:[{match:[/function/,/\s+/,i,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[D],illegal:/%/},B={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function F(L){return e.concat("(?!",L.join("|"),")")}const I={match:e.concat(/\b/,F([...sf,"super"]),i,e.lookahead(/\(/)),className:"title.function",relevance:0},z={begin:e.concat(/\./,e.lookahead(e.concat(i,/(?![0-9A-Za-z$_(])/))),end:i,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},x={match:[/get|set/,/\s+/,i,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},D]},J="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",O={match:[/const|var|let/,/\s+/,i,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(J)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[D]};return{name:"Javascript",aliases:["js","jsx","mjs","cjs"],keywords:l,exports:{PARAMS_CONTAINS:j,CLASS_REFERENCE:T},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),P,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,h,m,_,b,p,T,{className:"attr",begin:i+e.lookahead(":"),relevance:0},O,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[b,t.REGEXP_MODE,{className:"function",begin:J,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:j}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:o.begin,end:o.end},{match:r},{begin:s.begin,"on:begin":s.isTrulyOpeningTag,end:s.end}],subLanguage:"xml",contains:[{begin:s.begin,end:s.end,skip:!0,contains:["self"]}]}]},U,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[D,t.inherit(t.TITLE_MODE,{begin:i,className:"title.function"})]},{match:/\.\.\./,relevance:0},z,{match:"\\$"+i,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[D]},I,B,A,x,{match:/\$[(.]/}]}}function Xv(t){const e=t.regex,n={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},i={begin:"^[-\\*]{3,}",end:"$"},o={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},r={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},s={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},l=/[A-Za-z][A-Za-z0-9+.-]*/,a={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:e.concat(/\[.+?\]\(/,l,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},u={className:"strong",contains:[],variants:[{begin:/_{2}/,end:/_{2}/},{begin:/\*{2}/,end:/\*{2}/}]},c={className:"emphasis",contains:[],variants:[{begin:/\*(?!\*)/,end:/\*/},{begin:/_(?!_)/,end:/_/,relevance:0}]},p=t.inherit(u,{contains:[]}),d=t.inherit(c,{contains:[]});u.contains.push(d),c.contains.push(p);let h=[n,a];return[u,c,p,d].forEach(y=>{y.contains=y.contains.concat(h)}),h=h.concat(u,c),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:h},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:h}]}]},n,r,u,c,{className:"quote",begin:"^>\\s+",contains:h,end:"$"},o,i,a,s]}}function xv(t){return{name:"Mojolicious",subLanguage:"xml",contains:[{className:"meta",begin:"^__(END|DATA)__$"},{begin:"^\\s*%{1,2}={0,2}",end:"$",subLanguage:"perl"},{begin:"<%{1,2}={0,2}",end:"={0,1}%>",subLanguage:"perl",excludeBegin:!0,excludeEnd:!0}]}}function e$(t){const e=t.regex,n=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],i=/[dualxmsipngr]{0,12}/,o={$pattern:/[\w.]+/,keyword:n.join(" ")},r={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:o},s={begin:/->\{/,end:/\}/},l={variants:[{begin:/\$\d/},{begin:e.concat(/[$%@](\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@][^\s\w{]/,relevance:0}]},a=[t.BACKSLASH_ESCAPE,r,l],u=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],c=(h,m,_="\\1")=>{const y=_==="\\1"?_:e.concat(_,m);return e.concat(e.concat("(?:",h,")"),m,/(?:\\.|[^\\\/])*?/,y,/(?:\\.|[^\\\/])*?/,_,i)},p=(h,m,_)=>e.concat(e.concat("(?:",h,")"),m,/(?:\\.|[^\\\/])*?/,_,i),d=[l,t.HASH_COMMENT_MODE,t.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),s,{className:"string",contains:a,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},{className:"number",begin:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",relevance:0},{begin:"(\\/\\/|"+t.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[t.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:c("s|tr|y",e.either(...u,{capture:!0}))},{begin:c("s|tr|y","\\(","\\)")},{begin:c("s|tr|y","\\[","\\]")},{begin:c("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:p("(?:m|qr)?",/\//,/\//)},{begin:p("m|qr",e.either(...u,{capture:!0}),/\1/)},{begin:p("m|qr",/\(/,/\)/)},{begin:p("m|qr",/\[/,/\]/)},{begin:p("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return r.contains=d,s.contains=d,{name:"Perl",aliases:["pl","pm"],keywords:o,contains:d}}const t$=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z][A-Za-z0-9_-]*/}}),n$=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],i$=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],o$=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],r$=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],s$=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function l$(t){const e=t$(t),n=r$,i=o$,o="@[a-z-]+",r="and or not only",l={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,e.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+n$.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+i.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n.join("|")+")"},l,{begin:/\(/,end:/\)/,contains:[e.CSS_NUMBER_MODE]},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+s$.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[e.BLOCK_COMMENT,l,e.HEXCOLOR,e.CSS_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,e.IMPORTANT,e.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:o,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:r,attribute:i$.join(" ")},contains:[{begin:o,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},l,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,e.HEXCOLOR,e.CSS_NUMBER_MODE]},e.FUNCTION_DISPATCH]}}function a$(t){const e=t.regex,n=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),i=/[\p{L}0-9._:-]+/u,o={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},r={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},s=t.inherit(r,{begin:/\(/,end:/\)/}),l=t.inherit(t.APOS_STRING_MODE,{className:"string"}),a=t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),u={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:i,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[o]},{begin:/'/,end:/'/,contains:[o]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[r,a,l,s,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[r,s,a,l]}]}]},t.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},o,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[a]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[u],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[u],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(n,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:u}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function u$(t){const r={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:r,illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"string",variants:[t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{begin:t.C_NUMBER_RE+"[i]",relevance:1},t.C_NUMBER_MODE]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[t.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:r,illegal:/["']/}]}]}}function f$(t){const e=t.regex,n={className:"variable",variants:[{begin:/\$\d+/},{begin:/\$\{\w+\}/},{begin:e.concat(/[$@]/,t.UNDERSCORE_IDENT_RE)}]},o={endsWithParent:!0,keywords:{$pattern:/[a-z_]{2,}|\/dev\/poll/,literal:["on","off","yes","no","true","false","none","blocked","debug","info","notice","warn","error","crit","select","break","last","permanent","redirect","kqueue","rtsig","epoll","poll","/dev/poll"]},relevance:0,illegal:"=>",contains:[t.HASH_COMMENT_MODE,{className:"string",contains:[t.BACKSLASH_ESCAPE,n],variants:[{begin:/"/,end:/"/},{begin:/'/,end:/'/}]},{begin:"([a-z]+):/",end:"\\s",endsWithParent:!0,excludeEnd:!0,contains:[n]},{className:"regexp",contains:[t.BACKSLASH_ESCAPE,n],variants:[{begin:"\\s\\^",end:"\\s|\\{|;",returnEnd:!0},{begin:"~\\*?\\s+",end:"\\s|\\{|;",returnEnd:!0},{begin:"\\*(\\.[a-z\\-]+)+"},{begin:"([a-z\\-]+\\.)+\\*"}]},{className:"number",begin:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{className:"number",begin:"\\b\\d+[kKmMgGdshdwy]?\\b",relevance:0},n]};return{name:"Nginx config",aliases:["nginxconf"],contains:[t.HASH_COMMENT_MODE,{beginKeywords:"upstream location",end:/;|\{/,contains:o.contains,keywords:{section:"upstream location"}},{className:"section",begin:e.concat(t.UNDERSCORE_IDENT_RE+e.lookahead(/\s+\{/)),relevance:0},{begin:e.lookahead(t.UNDERSCORE_IDENT_RE+"\\s"),end:";|\\{",contains:[{className:"attribute",begin:t.UNDERSCORE_IDENT_RE,starts:o}],relevance:0}],illegal:"[^\\s\\}\\{]"}}function c$(t){const e=t.regex,n=/[\p{XID_Start}_]\p{XID_Continue}*/u,i=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],l={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:i,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},a={className:"meta",begin:/^(>>>|\.\.\.) /},u={className:"subst",begin:/\{/,end:/\}/,keywords:l,illegal:/#/},c={begin:/\{\{/,relevance:0},p={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,a],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,a],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,a,c,u]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,a,c,u]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[t.BACKSLASH_ESCAPE,c,u]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,c,u]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},d="[0-9](_?[0-9])*",h=`(\\b(${d}))?\\.(${d})|\\b(${d})\\.`,m=`\\b|${i.join("|")}`,_={className:"number",relevance:0,variants:[{begin:`(\\b(${d})|(${h}))[eE][+-]?(${d})[jJ]?(?=${m})`},{begin:`(${h})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${m})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${m})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${m})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${m})`},{begin:`\\b(${d})[jJ](?=${m})`}]},y={className:"comment",begin:e.lookahead(/# type:/),end:/$/,keywords:l,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},b={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:["self",a,_,p,t.HASH_COMMENT_MODE]}]};return u.contains=[p,_,a],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:l,illegal:/(<\/|->|\?)|=>/,contains:[a,_,{begin:/\bself\b/},{beginKeywords:"if",relevance:0},p,y,t.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[b]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[_,b,p]}]}}function d$(t){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}const p$=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z][A-Za-z0-9_-]*/}}),h$=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],m$=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],_$=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],g$=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],b$=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function v$(t){const e=t.regex,n=p$(t),i={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},o="and or not only",r=/@-?\w[\w]*(-\w+)*/,s="[a-zA-Z-][a-zA-Z0-9_-]*",l=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,i,n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+s,relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+_$.join("|")+")"},{begin:":(:)?("+g$.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+b$.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...l,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...l,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:r},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:o,attribute:m$.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...l,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+h$.join("|")+")\\b"}]}}function $$(t){const e=t.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:e.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:e.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function w$(t){const e=t.regex,n="HTTP/(2|1\\.[01])",i=/[A-Za-z][A-Za-z0-9-]*/,o={className:"attribute",begin:e.concat("^",i,"(?=\\:\\s)"),starts:{contains:[{className:"punctuation",begin:/: /,relevance:0,starts:{end:"$",relevance:0}}]}},r=[o,{begin:"\\n\\n",starts:{subLanguage:[],endsWithParent:!0}}];return{name:"HTTP",aliases:["https"],illegal:/\S/,contains:[{begin:"^(?="+n+" \\d{3})",end:/$/,contains:[{className:"meta",begin:n},{className:"number",begin:"\\b\\d{3}\\b"}],starts:{end:/\b\B/,illegal:/\S/,contains:r}},{begin:"(?=^[A-Z]+ (.*?) "+n+"$)",end:/$/,contains:[{className:"string",begin:" ",end:" ",excludeBegin:!0,excludeEnd:!0},{className:"meta",begin:n},{className:"keyword",begin:"[A-Z]+"}],starts:{end:/\b\B/,illegal:/\S/,contains:r}},t.inherit(o,{relevance:0})]}}function k$(t){const e="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",i={className:"attr",variants:[{begin:"\\w[\\w :\\/.-]*:(?=[ 	]|$)"},{begin:'"\\w[\\w :\\/.-]*":(?=[ 	]|$)'},{begin:"'\\w[\\w :\\/.-]*':(?=[ 	]|$)"}]},o={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},r={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[t.BACKSLASH_ESCAPE,o]},s=t.inherit(r,{variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),l="[0-9]{4}(-[0-9][0-9]){0,2}",a="([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?",u="(\\.[0-9]*)?",c="([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?",p={className:"number",begin:"\\b"+l+a+u+c+"\\b"},d={end:",",endsWithParent:!0,excludeEnd:!0,keywords:e,relevance:0},h={begin:/\{/,end:/\}/,contains:[d],illegal:"\\n",relevance:0},m={begin:"\\[",end:"\\]",contains:[d],illegal:"\\n",relevance:0},_=[i,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+t.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+t.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},t.HASH_COMMENT_MODE,{beginKeywords:e,keywords:{literal:e}},p,{className:"number",begin:t.C_NUMBER_RE+"\\b",relevance:0},h,m,r],y=[..._];return y.pop(),y.push(s),d.contains=y,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:_}}ht.registerLanguage("css",v$);ht.registerLanguage("diff",$$);ht.registerLanguage("dockerfile",Kv);ht.registerLanguage("go",u$);ht.registerLanguage("http",w$);ht.registerLanguage("javascript",Qv);ht.registerLanguage("markdown",Xv);ht.registerLanguage("mojolicious",xv);ht.registerLanguage("nginx",f$);ht.registerLanguage("perl",e$);ht.registerLanguage("python",c$);ht.registerLanguage("scss",l$);ht.registerLanguage("shell",d$);ht.registerLanguage("xml",a$);ht.registerLanguage("yaml",k$);Pv(ht);var lf={exports:{}};function za(t){let e=document.createElement("div");const n=[[t,e]],i=[];for(;n.length;){const[o,r]=n.shift();let s,l,a=typeof o;if(o===null||a=="undefined"?a="null":Array.isArray(o)&&(a="array"),a=="array")l=u=>u,l.len=o.length,s=document.createElement("div"),s.className="json-array "+(l.len?"has-items":"is-empty");else if(a=="object"){const u=Object.keys(o).sort();l=c=>u[c],l.len=u.length,s=document.createElement("div"),s.className="json-object "+(l.len?"has-items":"is-empty")}else s=document.createElement("span"),s.className="json-"+a,s.textContent=a=="null"?"null":a!="boolean"?o:o?"true":"false";if(l){const u=document.createElement("span");if(u.className="json-type",u.textContent=l.len?a+"["+l.len+"]":"{}",r.appendChild(u),i.indexOf(o)!=-1)e.classList.add("has-recursive-items"),s.classList.add("is-seen");else{for(let c=0;c<l.len;c++){const p=l(c),d=document.createElement("div"),h=document.createElement("span");h.className="json-key",h.textContent=p,d.appendChild(h),s.appendChild(d),n.push([o[p],d])}i.push(o)}}r.className="json-item "+s.className.replace(/^json-/,"contains-"),r.appendChild(s)}return e}try{lf.exports={jsonhtmlify:za}}catch{window.jsonhtmlify=za}function Ha(t,e){const n=e.vars?xe.l(e.message,...e.vars):e.message;return t?xe.raw(n):xe.md(n)}const y$={};let S$=0;class E$ extends Mt{constructor(e){super();let n=e.connection_id;e.conversation_id&&(n+=":"+e.conversation_id),this.prop("ro","length",()=>this.messages.length),this.prop("ro","messages",[]),this.prop("rw","expandUrlToMedia",!0),this.prop("persist","raw",!1,{key:n+":raw"}),this.embedCache=y$}clear(){return this.messages.length=0,this.update({messages:!0})}get(e){return e<0?this.messages.slice(e)[0]:this.messages[e]}push(e){return[].push.apply(this.messages,this._fill(e)),this.update({messages:!0})}render(e=-1){if(e!==-1){const i=this.get(e);return i&&!i.hasBeenSeen&&(i.embeds=this.raw?[]:this._embeds(i),i.hasBeenSeen=!0,this.update({messages:!0})),this.messages}let n={};return this.messages.map((i,o)=>(i.index=o,i.embeds||(i.dayChanged=this._dayChanged(i,n),i.className=this._className(i,n),i.embeds=[],i.html=Ha(this.raw,i)),n=i))}toArray(){return this.messages}update(e){if(this._changed(e,"expandUrlToMedia")||this._changed(e,"raw")){const n=Object.hasOwn(e,"raw")?e.raw:this.raw;for(let i of this.messages)i.hasBeenSeen&&(i.embeds=this._embeds(i)),i.html=Ha(n,i);this.update({messages:!0})}return super.update(e)}unshift(e){return[].unshift.apply(this.messages,this._fill(e)),this.update({messages:!0})}_changed(e,n){return Object.hasOwn(e,n)&&e[n]!==this[n]}_className(e,n){const i=["message"];e.type&&i.push("is-type-"+e.type),e.highlight&&i.push("is-highlighted");const o=e.from===n.from&&e.conversation_id===n.conversation_id&&e.connection_id===n.connection_id;return i.push(!e.dayChanged&&o?"has-same-from":"has-not-same-from"),i.join(" ")}_dayChanged(e,n){return!!(n.ts&&e.ts.getDate()!==n.ts.getDate())}_embeds(e){const n=[];return this._msgDetails(e)&&n.push(Promise.resolve({className:"le-details",details:!0,nodes:[lf.exports.jsonhtmlify(e.details).lastChild]})),!this.expandUrlToMedia||e.type==="notice"?this._embedsPromises(n):((e.message.match(/https?:\/\/(\S+)/g)||[]).forEach(i=>{i=i.replace(/(\W)?$/,""),this.embedCache[i]||(this.embedCache[i]=this._loadEmbed(e,i)),n.push(this.embedCache[i])}),this._embedsPromises(n))}_embedsPromises(e){return e.map(n=>(n.finally(()=>this.update({messages:!0})),n.catch(i=>console.error("[Messages:embed]",i))))}_fill(e){for(let n=0;n<e.length;n++){const i=e[n];i.from||([i.internal,i.from]=[!0,"Convos"]),i.type||(i.type="notice"),i.color=i.from==="Convos"?"inherit":Pr(i.from.toLowerCase()),i.ts=new bt(i.ts),i.id=++S$}return e}_isProbablyConvosVideoLink(e){return!!e.match(/\/video\/[^/]+\/[^/]+($|\?)/)}async _loadEmbed(e,n){const o=(await et.op("embed",{url:n}).perform()).res.body;if(o.nodes=[],o.provider=(o.provider_name||"").toLowerCase(),!o.html)return o;let r=document.createRange().createContextualFragment(o.html).firstChild;return r&&(r=this._renderVideoChat(e,o,r)||this._renderPaste(e,o,r)||r,gt(r,"img",["error",s=>s.target.style.display="none"]),gt(r,".le-goto-link",s=>s.parentNode.children.length===1&&s.parentNode.remove()),delete o.html,o.className=r.className,o.nodes=r.tagName.toLowerCase()==="iframe"?[r]:[].slice.call(r.childNodes,0)),o}_msgDetails(e){if(Object.hasOwn(e,"details"))return e.details;if(e.type!=="error"&&e.type!=="notice")return e.details=null;const n={...e.sent||e};return["bubbles","className","command","connection_id","dispatchTo","color","dayChanged","hasBeenSeen","embeds","event","fresh","highlight","html","id","index","internal","method","silent","stopPropagation","ts"].forEach(i=>delete n[i]),Object.keys(n).sort().join(":")==="from:message:type"?e.details=null:e.details=n}_renderPaste(e,n,i){const o=i.querySelector("pre");o&&ht.lineNumbersBlock(o);const r=i.querySelector(".le-meta");return r&&r.appendChild(pu("a",{href:"#action:expand:"+e.index,innerHTML:'<i class="fas fa-angle-down"/>'})),i}_renderVideoChat(e,n,i){const o=new URL(n.url).pathname.replace(/\/+$/,"").split("/");if(!(o.length&&(i.classList.contains("le-video-chat")||this._isProbablyConvosVideoLink(n.url))))return;const l=decodeURIComponent(o.slice(-1)[0]).replace(/\s-\s[\w-]+$/,"").replace(/[_.-]+/g," ").replace(/([a-z ])([A-Z])/g,(u,c,p)=>c+" "+p.toUpperCase()).replace(/((?:^|[ ])\w)/g,u=>u.toUpperCase()),a=xe.l('Do you want to join the %1 video chat with "%2"?',n.provider_name,l);return i=document.createElement("div"),i.className="le-card le-rich le-join-request le-provider-"+n.provider,i.innerHTML='<a class="le-thumbnail" href="'+n.url+'" target="convos_video"><i class="fas fa-video"></i></a><h3>'+a+'</h3><p class="le-description"><a href="'+n.url+'" target="convos_video">'+xe.l("Yes, I want to join.")+"</a></p>",e.fresh&&this.emit("notify",{...e,message:a}),i}}const C$=(t,e)=>t.name.localeCompare(e.name);class xr extends Map{constructor(e=[],n={}){super(e),this.sorter=n.sorter||C$,this._sort()}filter(e){return Array.from(this.values()).filter(e)}set(e,n){super.set.call(this,e,n),this._sort()}toArray(){return Array.from(this.values())}_sort(){const e=Array.from(this.entries()),n=this.sorter;return this.clear(),e.sort((i,o)=>n(i[1],o[1])).forEach(([i,o])=>super.set.call(this,i,o)),e}}class A$ extends Mt{constructor(){super();function e(n,i){return i.modes.admin||!1-n.modes.admin||!1||i.modes.operator||!1-n.modes.operator||!1||i.modes.voice||!1-n.modes.voice||!1||n.nick.localeCompare(i.nick)}this.prop("ro","length",()=>this._map.size),this.prop("ro","_map",new xr([],{sorter:e}))}clear(){const e=this.me();return this._map.clear(),this.add(e),this}delete(e){return this._map.delete(this._id(e)),this.update({})}get(e){return this._map.get(this._id(e))}has(e){return this._map.has(this._id(e))}me(){return Array.from(this._map.values()).filter(e=>e.me)[0]||this._defaultParticipant()}nicks(){return Array.from(this._map.values()).map(e=>e.nick)}rename(e,n){const i=this.get(e)||{};return delete i.id,i.nick=n,this.delete(e),this.add(i)}add(e){if(Array.isArray(e))return e.forEach(i=>this.add(i)),this;e.id=this._id(e.nick),e.color=Pr(e.id),Ue.string(e.mode)&&(e.modes=gr(jm,e.mode));const n=this._map.get(e.id);return n&&Object.keys(n).forEach(i=>e[i]||(e[i]=n[i])),e.modes||(e.modes={}),e.nick||(e.nick=e.name),this._map.set(e.id,e),this.update({length:!0})}toArray(){return this._map.toArray()}_defaultParticipant(){return{color:"#000000",id:"",modes:{},nick:""}}_id(e){return e.toLowerCase()}}const Yn=fi("socket"),li=t=>li.singletons[t]||(li.singletons[t]=new O$);li.singletons={};const qi=[];qi[WebSocket.CONNECTING]="connecting";qi[WebSocket.OPEN]="open";qi[WebSocket.CLOSING]="closing";qi[WebSocket.CLOSED]="closed";class O$ extends Mt{constructor(){super(),this.prop("ro","readyState",()=>this.ws.readyState),this.prop("ro","readyStateHuman",()=>qi[this.ws.readyState]),this.prop("ro","waiting",new Map),this.prop("rw","closed",0),this.prop("rw","error",""),this.prop("rw","keepaliveInterval",1e4),this.prop("rw","url",""),this.id=0,this.queue=[],this.keepClosed=!0,this._resetWebSocket()}close(e,n){return typeof e!="number"&&([e,n]=[1e3,e]),this.ws.close&&this.ws.close(e,n),this.keepClosed=!0,this._keepAliveStop(),this._reconnectStop(),this._resetWebSocket(),this}deflateMessage(e){return JSON.stringify(e)}deleteWaitingMessage(e){this.waiting.delete(e),this.update({waiting:!0})}getWaitingMessages(e){return arguments.length===0?Array.from(this.waiting.values()):e.map(n=>this.waiting.get(n))}inflateMessage(e){return JSON.parse(e)}is(e){return this.ws.readyState===WebSocket[e.toUpperCase()]}open(){if(this.ws.close)return this;try{if(!this.url)throw"Can't open WebSocket connection without URL.";this.ws=new WebSocket(this.url),this.ws.onclose=e=>this._onClose(e),this.ws.onerror=e=>this._onError(e),this.ws.onmessage=e=>this._onMessage(e),this.ws.onopen=e=>this._onOpen(e),this.keepClosed=!1,this._keepAliveStart(),this._reconnectStop(),this.update({error:"",readyState:!0})}catch(e){this._onError(e.message?e:{message:String(e)})}return this}reconnectIn(e){return e.code===1008||e.code===1011?!1:this.closed<=1?1e3:this.closed>5?1e4:1e3*(this.closed*2)}send(e,n){const i=e.id||String(++this.id);return this.queue.push({...e,id:i}),this.open(),this._dequeue(),n&&this.on("message_"+i,n),this}_dequeue(){const e=this.queue;for(e.length&&this.update({waiting:!0});e.length;){if(this.ws.readyState!==WebSocket.OPEN)return;const n=e.shift();Yn.trace("<<<",n),this.ws.send(this.deflateMessage(n)),n.waitingForResponse=!0,n.ts||(n.ts=new bt),this.waiting.set(n.id,n)}}_keepAliveStart(){this._keepAliveStop(),this.keepaliveTid=setInterval(()=>this.ws.readyState===WebSocket.OPEN&&this.ws.send("{}"),this.keepaliveInterval)}_keepAliveStop(){this.keepaliveTid&&clearTimeout(this.keepaliveTid),delete this.keepaliveTid}_onClose(e){Yn.debug("close",e);for(let[n,i]of this.waiting)Object.keys(i).length<=1&&this.waiting.delete(n),i.waitingForResponse=!1;this._keepAliveStop(),this._resetWebSocket(),this.update({closed:this.closed+1,readyState:!0,waiting:!0}),this._reconnectStart(this.reconnectIn(e))}_onError(e){let n=String(e.message||e);(!n||n.indexOf("[")===0)&&(n="Could not connect."),Yn.error("error",n,e),this.update({error:n})}_onMessage(e){const n=this.inflateMessage(e.data);if(Yn.trace(">>>",n),n.bubbles=!0,n.stopPropagation=()=>{n.bubbles=!1},n.id&&(this.emit("message_"+n.id,n),this.waiting.delete(n.id)),n.bubbles&&this.emit("message",n),this.update({waiting:!0}),!(!n.errors||n.id)){for(let i of this.waiting.keys())this.emit("message_"+i,n);this.waiting.clear()}}_onOpen(e){Yn.info("open",e),this.update({closed:0,error:"",readyState:!0}),this._dequeue()}_reconnectStart(e){if(this._reconnectStop(),Yn.info("reconnect in",e),e===!0)return this.open();if(typeof e!="number")return this.keepClosed=!0;this.reconnectTid=setTimeout(()=>this.open(),e)}_reconnectStop(){this.reconnectTid&&clearTimeout(this.reconnectTid),delete this.reconnectTid}_resetWebSocket(){this.ws={readyState:WebSocket.CLOSED}}}const N$=new RegExp("^[#&]");class ji extends Mt{constructor(e){super();const n=[e.connection_id,e.conversation_id,""].filter(Ue.defined).join(":");this.prop("persist","userInput","",{key:n+"userInput"}),this.prop("ro","color",Pr(e.conversation_id||e.connection_id||"")),this.prop("ro","connection_id",e.connection_id||""),this.prop("ro","messages",new E$(e)),this.prop("ro","participants",new A$),this.prop("ro","path",Be.conversationPath(e)),this.prop("rw","historyStartAt",null),this.prop("rw","historyStopAt",null),this.prop("rw","info",e.info||{}),this.prop("rw","modes",{}),this.prop("rw","name",e.name||e.conversation_id||e.connection_id||"ERR"),this.prop("rw","notifications",e.notifications||0),this.prop("rw","status","pending"),this.prop("rw","topic",e.topic||""),this.prop("rw","unread",e.unread||0),Object.hasOwn(e,"conversation_id")?(this.prop("ro","conversation_id",e.conversation_id),this.prop("ro","title",()=>[this.name,this.connection_id.replace(/^\w+-/,"")].join(" - ")),this.prop("rw","frozen",e.frozen||"")):(this.prop("ro","frozen",()=>this._calculateFrozen()),this.prop("ro","title",()=>this.name)),e.conversation_id&&this.prop("persist","wantNotifications",this.is("private"),{key:e.conversation_id+":wantNotifications"}),this.socket=e.socket||li("/events"),this.messages.on("notify",i=>this.notify(i)),this._addOperations()}addMessages(e,n){if(!Array.isArray(e)){if(this._maybeIncreaseUnread(e),this._maybeNotify(e),!this.historyStopAt&&["action","private"].indexOf(e.type)!==-1)return;e.fresh=!0,e=[e]}return this.messages[n||"push"](e),this}is(e){return e==="connection"?!this.conversation_id:e==="conversation"?this.conversation_id&&!this.is("notifications"):e==="frozen"?this.frozen&&!0:e==="locked"?this.frozen==="Invalid password.":e==="not_found"?this.frozen==="Not found.":e==="notifications"?!1:e==="pending"?this.frozen.match(/pending invitation/i):e==="private"?this.conversation_id&&!N$.test(this.conversation_id)||!1:e==="search"?!1:e==="unread"?this.unread&&!0:this.status===e}async load(e={}){if(this._skipLoad(e))return this;this.update({status:"loading"}),e.limit||(e.limit=40);const n={...e,connection_id:this.connection_id,conversation_id:this.conversation_id};await this.messagesOp.perform(n),this.update({status:this.messagesOp.status});const i=this.messagesOp.res.body;i.messages||(i.messages=[]);const o=[];return(e.around||!e.after&&!e.before)&&(o.push.apply(o,this.messages.toArray().filter(r=>r.internal)),this.messages.clear()),this.addMessages(i.messages,e.before?"unshift":"push"),this.addMessages(o,"push"),this._setEndOfStream(e,i),this}notify(e){if(_t.appHasFocus)return;const n=e.from===this.name?e.from:xe.l("%1 in %2",e.from,this.name);this.lastNotification=_t.show(e.message,{path:this.path,title:n})}send(e,n){return Ue.string(e)&&(e={message:e}),this.socket.send({method:"send",connection_id:this.connection_id,conversation_id:this.conversation_id||"",...e},n)}async markAsRead(){if(!!this.markAsReadOp)return this.update({notifications:0}),await this.markAsReadOp.perform({connection_id:this.connection_id,conversation_id:this.conversation_id}),this}update(e){return this._loadInformation(),super.update(e),(Object.hasOwn(e,"notifications")||Object.hasOwn(e,"unread"))&&this.emit("unread",e),this}wsEventMode(e){const n=["banlist","exceptlist","invitelist","quietlist"].filter(i=>e[i])[0];if(n){const i=e[n].length,o=i===1?"entry":"entries";this.addMessages({...e,message:"%1 has %2 "+o+" in %3.",vars:[this.name,i,xe.l(n)]})}else e.nick?(this.participants.add({nick:e.nick,mode:e.mode}),this.addMessages({...e,message:"%1 got mode %2 from %3.",vars:[e.nick,e.mode,e.from]})):e.mode_changed?(this.addMessages({...e,message:"%1 received mode %2.",vars:[this.name,e.mode]}),this.update({modes:Object.assign({},this.modes,gr(Xn,e.mode))})):(this.addMessages({...e,message:"%1 got mode %2.",vars:[this.name,e.mode]}),this.update({modes:Object.assign({},this.modes,gr(Xn,e.mode))}))}wsEventNickChange(e){if(!this.participants.has(e.old_nick)||e.old_nick===e.new_nick)return;this.participants.rename(e.old_nick,e.new_nick);const n=e.type==="me"?"You (%1) changed nick to %2.":"%1 changed nick to %2.";this.addMessages({message:n,vars:[e.old_nick,e.new_nick]})}wsEventPart(e){const n=this.participants.get(e.nick);!n||n.me||(this.participants.delete(e.nick),this.update({participants:!0}),e.silent||this.addMessages(this._partMessage(e)))}wsEventSentClear(e){e.errors||(this.messages.clear(),this.addMessages({message:"History was cleared for %1.",vars:[this.name]}))}wsEventSentNames(e){this.participants.add(e.participants);const n={...e,message:"Participants (%1): %2",vars:[]},i=this.participants.nicks();i.length>1&&(n.message+=" and %3.",n.vars[2]=i.pop()),n.vars[0]=i.length,n.vars[1]=i.join(", "),this.addMessages(n)}wsEventSentTopic(e){const n=e.topic?"Topic for %1 is: %2":"No topic is set for %1.";this.addMessages({message:n,vars:[this.name,e.topic]}),this.update({topic:e.topic})}_addOperations(){this.prop("ro","messagesOp",et.op("conversationMessages")),this.prop("ro","markAsReadOp",et.op("markConversationAsRead"))}_calculateFrozen(){return""}_loadInformation(){if(!(this.participantsLoaded||!this.conversation_id||!this.messagesOp)&&!(this.is("frozen")||!this.messagesOp.is("success")))if(this.participantsLoaded=!0,this.is("private")){if(this.info.ts&&this.info.ts>new bt().toEpoch()-300)return;this.send("/whois "+this.conversation_id,e=>{e.stopPropagation(),this.update({frozen:e.errors&&e.errors.length?e.errors[0].message:""})})}else this.send("/names "+this.conversation_id,e=>{e.stopPropagation(),this.participants.clear(),e.participants&&this.participants.add(e.participants)})}_maybeIncreaseUnread(e){if(!e.from||e.yourself)return this;if(["action","error","private"].indexOf(e.type)===-1)return this;this.update({unread:this.unread+1})}_maybeNotify(e){!e.from||e.yourself||["action","error","private"].indexOf(e.type)!==-1&&(!e.highlight&&!this.wantNotifications||this.notify(e))}_noop(){}_partMessage(e){const n={message:"%1 parted.",vars:[e.nick]};return e.kicker?(n.message="%1 was kicked by %2"+(e.message?": %3":""),n.vars.push(e.kicker),n.vars.push(e.message)):e.message&&(n.message+=" Reason: %2",n.vars.push(e.message)),n}_setEndOfStream(e,n){if(!e.before&&!n.after){const i=n.messages.slice(-1)[0];this.update({historyStopAt:new bt(i&&i.ts)})}if(!e.after&&!n.before){const i=n.messages[0];this.update({historyStartAt:new bt(i&&i.ts)})}n.after&&this.update({historyStopAt:null}),n.before&&this.update({historyStartAt:null}),n.messages&&n.messages.length<=1&&this.update({historyStartAt:new bt,historyStopAt:new bt})}_skipLoad(e){return!this.messagesOp||this.is("loading")?!0:this.messages.length?e.around?!!this.messages.toArray().find(n=>n.ts.toISOString()===e.around):!!(e.before&&this.historyStartAt||e.after&&this.historyStopAt):this.is("success")}}const T$=(t,e)=>t.is("private")-e.is("private")||t.name.localeCompare(e.name);class qa extends ji{constructor(e){super(e),this.prop("rw","certificate",{}),this.prop("ro","conversations",new xr([],{sorter:T$})),this.prop("rw","on_connect_commands",e.on_connect_commands||[]),this.prop("rw","state",e.state||"disconnected"),this.prop("rw","wanted_state",e.wanted_state||"connected"),this.prop("rw","url",Ue.string(e.url)?new mn(e.url):e.url||new mn("irc://localhost"));const n=this.url.searchParams.get("nick")||"guest";this.prop("rw","nick",n),this.prop("rw","real_host",this.url.hostname),this.prop("rw","server_op",!1),e.info&&this.wsEventInfo(e.info)}ensureConversation(e){let n=this.conversations.get(e.conversation_id);return n?n.update(e):(!e.frozen&&this.frozen&&(e.frozen=this.frozen),n=new ji({...e,connection_id:this.connection_id}),n.on("message",i=>this.emit("message",i)),n.on("update",()=>this.update({conversations:!0})),n.on("unread",()=>this.emit("unread")),e.frozen||this._addDefaultParticipants(n),this.conversations.set(n.conversation_id,n),this.update({conversations:!0}),this.emit("conversationadd",n),n)}findConversation(e){return this.conversations.get(e.conversation_id)||null}is(e){return this.state===e||super.is(e)}removeConversation(e){const n=this.findConversation(e)||e;return this.conversations.delete(n.conversation_id),this.emit("conversationremove",n),this.update({conversations:!0})}send(e){Ue.string(e)&&(e={message:e});const n=new RegExp("^"+this.participants.toArray().map(i=>ci(i.id)).join("|")+":","i");return e.message.indexOf("/")!==0&&!e.message.match(n)&&(e.message="/quote "+e.message),super.send(e)}update(e){return e.url&&Ue.string(e.url)&&(e.url=new mn(e.url)),super.update(e)}wsEventSentAway(e){(this.findConversation(e)||this).addMessages({message:e.reason,sent:e,type:"notice"})}wsEventConnection(e){this.update({state:e.state})}wsEventFrozen(e){const n=this.findConversation(e),i=n&&n.frozen,o=this.ensureConversation(e);!e.frozen&&i&&n.addMessages({message:"Connected.",vars:[]}),e.frozen||o.participants.add({nick:this.nick,me:!0}),e.frozen&&o.is("pending")&&_t.show(e.frozen,{title:e.name})}wsEventInfo(e){e.nick&&this.wsEventNickChange(e),e.server_op&&this.addMessages({message:"You are an IRC operator.",vars:[],highlight:!0}),e.real_host&&this.participants.add({nick:e.real_host}),this.update(e)}wsEventMessage(e){return e.yourself=e.from===this.nick,e.conversation_id?this.ensureConversation(e).addMessages(e):this.addMessages(e)}wsEventNickChange(e){const n={old_nick:e.old_nick||this.nick,new_nick:e.new_nick||e.nick,type:e.type};e.old_nick===this.nick&&(n.me=!0),super.wsEventNickChange(n),this.conversations.forEach(i=>i.wsEventNickChange(n))}wsEventError(e){const n={message:Lr(e)||e.frozen||"Unknown error from %1.",sent:e,type:"error",vars:e.command||[e.message]},i=(e.message||"").match(/^\/j(oin)? (\S+)/);if(i)return this.ensureConversation({...e,conversation_id:i[2]});const o=e.conversation_id&&e.frozen?this.ensureConversation(e):this.findConversation(e)||this;console.error(o.conversation_id,n),o.addMessages(n)}wsEventJoin(e){const n=this.ensureConversation({connection_id:e.connection_id,conversation_id:e.conversation_id}),i=e.nick||this.nick;i!==this.nick&&!e.silent&&n.addMessages({message:"%1 joined.",vars:[i]}),n.participants.add({nick:i})}wsEventPart(e){if(e.nick===this.nick)return this.removeConversation(e);e.conversation_id||this.conversations.forEach(n=>n.wsEventPart(e))}wsEventQuit(e){this.wsEventPart(e)}wsEventSentJoin(e){this.wsEventJoin(e)}wsEventSentList(e){const n=e.args||"/*/";this.addMessages(e.done?{message:"Found %1 of %2 conversations from %3.",vars:[e.conversations.length,e.n_conversations,n]}:{message:"Found %1 of %2 conversations from %3, but conversations are still loading.",vars:[e.conversations.length,e.n_conversations,n]})}wsEventSentMode(e){const n=this.findConversation(e);return n?n.wsEventMode(e):this.addMessages({message:"%1 received mode %2.",vars:[e.target,e.mode]})}wsEventSentQuery(e){this.ensureConversation(e)}wsEventSentWhois(e){const[n,...i]=Pi(e);(this.findConversation(e)||this).addMessages({message:n,vars:i,sent:e})}wsEventSentNames(){}_addDefaultParticipants(e){const n=[{nick:this.nick,me:!0}];e.is("private")&&n.push({nick:e.name}),e.participants.add(n)}_addOperations(){this.prop("ro","markAsReadOp",et.op("markConnectionAsRead")),this.prop("ro","messagesOp",et.op("connectionMessages"))}_calculateFrozen(){switch(this.state){case"connected":return"";case"connecting":return"Connecting...";case"disconnected":return"Disconnected.";case"disconnecting":return"Disconnecting...";case"unreachable":return"Unreachable.";default:return"Connecting..."}}}class R$ extends Mt{constructor(e){super(e),this.prop("ro","op",et.op("listConnectionProfiles")),this.prop("rw","profiles",[]),this.prop("rw","status","pending")}find(e){return this.search(n=>n.id===e)[0]}defaultProfile(){return{max_bulk_message_size:3,max_message_length:512,url:new mn("irc://0.0.0.0")}}is(e){return this.status===e}async load(e={}){return this.is("loading")?this:!e.force&&this.profiles.length?this:(this.update({status:"loading"}),await this.op.perform(),this.update({status:this.op.status}),this.is("success")&&this.update({profiles:this.op.res.body.profiles.map(n=>this._expand(n))}),this)}search(e=()=>!0){return this.profiles.filter(e)}_expand(e){e.url=new mn(e.url),e.service_accounts=e.service_accounts.join(", "),e.url.toFields(e);const n=this.defaultProfile();return Object.keys(n).forEach(i=>Object.hasOwn(e,i)||(e[i]=n[i])),e}}class M$ extends ji{constructor(e){super({...e,connection_id:"",conversation_id:"notifications",name:"Notifications"})}addMessages(e){return Array.isArray(e)||(e=[e]),this.messages.push(e),this}async markAsRead(){return await super.markAsRead(),this.emit("cleared"),this}is(e){return e==="notifications"?!0:super.is(e)}send(e={}){return Promise.resolve(e)}_addOperations(){this.prop("ro","markAsReadOp",et.op("markNotificationsAsRead")),this.prop("ro","messagesOp",et.op("notificationMessages"))}_skipLoad(){return!1}}class L$ extends ji{constructor(e){super({...e,connection_id:"",conversation_id:"search",name:"Search"}),this.prop("rw","query",""),this.update({status:"success"})}is(e){return e==="conversation"?!1:e==="search"?!0:super.is(e)}async load(e={}){if(this.is("loading"))return this;const n={...e};if(n.match=e.match||e.message,!(n.match||"").match(/\S/))return this.messages.clear().push([{message:'Search query "%1" does not contain anything to search for.',vars:[e.message]}]);this.update({query:n.match,status:"loading"}),this.messages.clear(),await this.messagesOp.perform(n);const i=this.messagesOp.res.body;return this.messages[n.before?"unshift":"push"](i.messages||[]),this.update({status:this.messagesOp.status})}send(e){return Ue.string(e)&&(e={message:e}),this.emit("send",e),Promise.resolve(e)}_addOperations(){this.prop("ro","messagesOp",et.op("searchMessages")),this.prop("ro","markAsReadOp",null)}_loadInformation(){}}function I$(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),n=n>o?o:n,n<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var r=Array(o);++i<o;)r[i]=t[i+e];return r}var P$=I$,D$=P$;function U$(t,e,n){var i=t.length;return n=n===void 0?i:n,!e&&n>=i?t:D$(t,e,n)}var B$=U$,j$="\\ud800-\\udfff",F$="\\u0300-\\u036f",z$="\\ufe20-\\ufe2f",H$="\\u20d0-\\u20ff",q$=F$+z$+H$,W$="\\ufe0e\\ufe0f",G$="\\u200d",K$=RegExp("["+G$+j$+q$+W$+"]");function Y$(t){return K$.test(t)}var af=Y$;function V$(t){return t.split("")}var Z$=V$,uf="\\ud800-\\udfff",J$="\\u0300-\\u036f",Q$="\\ufe20-\\ufe2f",X$="\\u20d0-\\u20ff",x$=J$+Q$+X$,e2="\\ufe0e\\ufe0f",t2="["+uf+"]",Cr="["+x$+"]",Ar="\\ud83c[\\udffb-\\udfff]",n2="(?:"+Cr+"|"+Ar+")",ff="[^"+uf+"]",cf="(?:\\ud83c[\\udde6-\\uddff]){2}",df="[\\ud800-\\udbff][\\udc00-\\udfff]",i2="\\u200d",pf=n2+"?",hf="["+e2+"]?",o2="(?:"+i2+"(?:"+[ff,cf,df].join("|")+")"+hf+pf+")*",r2=hf+pf+o2,s2="(?:"+[ff+Cr+"?",Cr,cf,df,t2].join("|")+")",l2=RegExp(Ar+"(?="+Ar+")|"+s2+r2,"g");function a2(t){return t.match(l2)||[]}var u2=a2,f2=Z$,c2=af,d2=u2;function p2(t){return c2(t)?d2(t):f2(t)}var h2=p2,m2=B$,_2=af,g2=h2,b2=zi;function v2(t){return function(e){e=b2(e);var n=_2(e)?g2(e):void 0,i=n?n[0]:e.charAt(0),o=n?m2(n,1).join(""):e.slice(1);return i[t]()+o}}var $2=v2,w2=$2,k2=w2("toUpperCase"),y2=k2,S2=zi,E2=y2;function C2(t){return E2(S2(t).toLowerCase())}var A2=C2;function O2(t,e,n,i){var o=-1,r=t==null?0:t.length;for(i&&r&&(n=t[++o]);++o<r;)n=e(n,t[o],o,t);return n}var N2=O2;function T2(t){return function(e){return t==null?void 0:t[e]}}var R2=T2,M2=R2,L2={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},I2=M2(L2),P2=I2,D2=P2,U2=zi,B2=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,j2="\\u0300-\\u036f",F2="\\ufe20-\\ufe2f",z2="\\u20d0-\\u20ff",H2=j2+F2+z2,q2="["+H2+"]",W2=RegExp(q2,"g");function G2(t){return t=U2(t),t&&t.replace(B2,D2).replace(W2,"")}var K2=G2,Y2=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function V2(t){return t.match(Y2)||[]}var Z2=V2,J2=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Q2(t){return J2.test(t)}var X2=Q2,mf="\\ud800-\\udfff",x2="\\u0300-\\u036f",ew="\\ufe20-\\ufe2f",tw="\\u20d0-\\u20ff",nw=x2+ew+tw,_f="\\u2700-\\u27bf",gf="a-z\\xdf-\\xf6\\xf8-\\xff",iw="\\xac\\xb1\\xd7\\xf7",ow="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rw="\\u2000-\\u206f",sw=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",bf="A-Z\\xc0-\\xd6\\xd8-\\xde",lw="\\ufe0e\\ufe0f",vf=iw+ow+rw+sw,$f="['\u2019]",Wa="["+vf+"]",aw="["+nw+"]",wf="\\d+",uw="["+_f+"]",kf="["+gf+"]",yf="[^"+mf+vf+wf+_f+gf+bf+"]",fw="\\ud83c[\\udffb-\\udfff]",cw="(?:"+aw+"|"+fw+")",dw="[^"+mf+"]",Sf="(?:\\ud83c[\\udde6-\\uddff]){2}",Ef="[\\ud800-\\udbff][\\udc00-\\udfff]",Zn="["+bf+"]",pw="\\u200d",Ga="(?:"+kf+"|"+yf+")",hw="(?:"+Zn+"|"+yf+")",Ka="(?:"+$f+"(?:d|ll|m|re|s|t|ve))?",Ya="(?:"+$f+"(?:D|LL|M|RE|S|T|VE))?",Cf=cw+"?",Af="["+lw+"]?",mw="(?:"+pw+"(?:"+[dw,Sf,Ef].join("|")+")"+Af+Cf+")*",_w="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",gw="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",bw=Af+Cf+mw,vw="(?:"+[uw,Sf,Ef].join("|")+")"+bw,$w=RegExp([Zn+"?"+kf+"+"+Ka+"(?="+[Wa,Zn,"$"].join("|")+")",hw+"+"+Ya+"(?="+[Wa,Zn+Ga,"$"].join("|")+")",Zn+"?"+Ga+"+"+Ka,Zn+"+"+Ya,gw,_w,wf,vw].join("|"),"g");function ww(t){return t.match($w)||[]}var kw=ww,yw=Z2,Sw=X2,Ew=zi,Cw=kw;function Aw(t,e,n){return t=Ew(t),e=n?void 0:e,e===void 0?Sw(t)?Cw(t):yw(t):t.match(e)||[]}var Ow=Aw,Nw=N2,Tw=K2,Rw=Ow,Mw="['\u2019]",Lw=RegExp(Mw,"g");function Iw(t){return function(e){return Nw(Rw(Tw(e).replace(Lw,"")),t,"")}}var Pw=Iw,Dw=A2,Uw=Pw,Bw=Uw(function(t,e,n){return e=e.toLowerCase(),t+(n?Dw(e):e)}),jw=Bw;class Fw extends Mt{constructor(e){super(),this.prop("ro","connections",new xr),this.prop("ro","connectionProfiles",new R$),this.prop("ro","notifications",new M$({})),this.prop("ro","search",new L$({})),this.prop("ro","roles",new Set),this.prop("persist","expandUrlToMedia",!0),this.prop("persist","ignoreStatuses",!1),this.prop("persist","lastUrl",""),this.prop("rw","activeConversation",this.notifications),this.prop("rw","email",""),this.prop("rw","forced_connection",!1),this.prop("rw","default_connection","irc://irc.libera.chat:6697/%23convos"),this.prop("rw","highlightKeywords",[]),this.prop("rw","id",""),this.prop("rw","status","pending"),this.prop("rw","unreadIncludePrivateMessages",!1),this.socket=e.socket||li("/events"),this.socket.on("message",n=>this._dispatchMessage(n)),this.socket.on("update",n=>this._onConnectionChange(n)),this.notifications.on("cleared",()=>this._calculateUnread("clear")),this._calculateUnreadDebounced=Gr(this._calculateUnread,25)}conversations(e){const n=[];return this.connections.toArray().forEach(i=>{i.conversations.toArray().forEach(o=>{(!e||e(o))&&n.push(o)})}),n}ensureConversation(e,n){if(e.conversation_id){const o=this.ensureConversation({connection_id:e.connection_id},!0);return this._maybeUpgradeActiveConversation(o.ensureConversation(e))}let i=this.findConversation(e);return i?i.update(e):(i=new qa({...e}),i.on("conversationadd",o=>this._maybeUpgradeActiveConversation(o)),i.on("conversationremove",o=>o===this.activeConversation&&this.setActiveConversation(o)),i.on("update",()=>this.update({connections:!0})),i.on("unread",()=>this._calculateUnreadDebounced()),this.connections.set(i.connection_id,i),this.update({connections:!0}),n?i:this._maybeUpgradeActiveConversation(i))}findConversation(e){const n=this.connections.get(e.connection_id);return e.conversation_id?n&&n.findConversation(e)||null:n}is(e){return Array.isArray(e)?!!e.filter(n=>this.is(n)).length:this.roles.has(e)?!0:this.status===e}async load(){if(this.is("loading"))return this;this.roles.clear(),this.update({status:"loading"});const n=await new Promise(o=>this.socket.send({method:"load",object:"user",params:{connections:!0,conversations:!0}},o));if(n.errors)return this.update({email:"",roles:!0,status:n.errors?"error":"success"});const i=n.user||{};return this.connections.clear(),(i.connections||[]).forEach(o=>this.ensureConversation({...o,status:"pending"})),(i.conversations||[]).forEach(o=>this.ensureConversation({...o,status:"pending"})),(i.roles||[]).forEach(o=>this.roles.add(o)),this.notifications.update({unread:i.unread||0}),wo.fromString(i.video_service||""),this.update({email:i.email||"",default_connection:i.default_connection||"",forced_connection:i.forced_connection||!1,highlightKeywords:i.highlight_keywords||[],roles:!0,status:n.errors?"error":"success",id:i.uid||""})}removeConversation(e){const n=this.findConversation({connection_id:e.connection_id});if(e.conversation_id)return n&&n.removeConversation(e);this.connections.delete(e.connection_id),n===this.activeConversation&&this.setActiveConversation(n),this.update({connections:!0})}setActiveConversation(e){let n=!e.connection_id&&!e.conversation_id&&this.notifications;if(n)return this.update({activeConversation:n});if(n=this.findConversation(e),n)return this.update({activeConversation:n});const i={...e,connection_id:e.connection_id||"",frozen:"Not found."};return["conversation_id","name"].forEach(o=>Object.hasOwn(e,o)&&(i[o]=e[o])),this.update({activeConversation:i.conversation_id?new ji(i):new qa(i)})}update(e){return super.update(e),Object.hasOwn(e,"unreadIncludePrivateMessages")&&this._calculateUnreadDebounced(),this}_calculateUnread(e){let[n,i]=[0,0];for(const o of this.connections.toArray())for(const r of o.conversations.toArray())e&&r.update({notifications:0}),n+=r.is("private")?this.unreadIncludePrivateMessages?r.unread:0:r.notifications,i+=r.is("private")?0:r.notifications;e||(this.notifications.update({notifications:n,unread:i}),this.update({notifications:!0}))}_dispatchMessage(e){e.dispatchTo=jw("wsEvent_"+this._getEventNameFromMessage(e)),e.silent=this.ignoreStatuses,this.emit(e.dispatchTo,e);const n=this.findConversation({connection_id:e.connection_id});if(!n||(n[e.dispatchTo]&&n[e.dispatchTo](e),!e.bubbles))return;const i=n.findConversation(e);i&&i[e.dispatchTo]&&i[e.dispatchTo](e),e.highlight&&!i.is("private")&&(this.notifications.addMessages(e),i===this.activeConversation&&_t.appHasFocus?i.markAsRead():i.update({notifications:i.notifications+1}))}_getEventNameFromMessage(e){return e.errors?"error":e.event==="state"?e.type:e.event==="sent"&&e.message.match(/\/\S+/)?(e.command=e.message.split(/\s+/).filter(n=>n.length),e.command[0]=e.command[0].substring(1),"sent_"+e.command[0].toLowerCase()):e.event}_maybeUpgradeActiveConversation(e){const n=this.activeConversation;return!e.conversation_id||e.connection_id&&e.connection_id!==n.connection_id||e.conversation_id&&e.conversation_id!==n.conversation_id||this.update({activeConversation:e}),e}_onConnectionChange(e){if(e.is("open")&&this.is("pending"))return this.load();e.is("closed")&&(this.connections.forEach(n=>n.update({state:"unreachable"})),this.is(["error","loading"])||this.update({status:"pending"}))}}const{window:Or}=Yf;function zw(t){let e,n,i;function o(s){t[27](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new Hu({props:r}),me.push(()=>$e(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],ve(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function Hw(t){let e,n,i,o,r,s,l,a,u,c,p=(t[5]==="nav"||!t[2].isSingleColumn)&&Va(t);const d=[ik,nk,tk,ek,xw,Xw,Qw,Jw,Zw,Vw,Yw,Kw,Gw,Ww],h=[];function m(y,b){return b[0]&16&&(n=null),b[0]&16&&(i=null),b[0]&16&&(o=null),b[0]&16&&(r=null),n==null&&(n=!!y[4].path.match(/\/chat\/./)),n?0:(i==null&&(i=y[4].path.indexOf("/chat")===0),i?1:y[4].path==="/help"?2:y[4].path==="/search"?3:y[4].path==="/settings"?4:y[4].path==="/settings/account"?5:y[4].path==="/settings/connections"?6:y[4].path==="/settings/files"?7:(o==null&&(o=y[4].path.indexOf("/settings/connection/")===0),o?8:(r==null&&(r=y[4].path.indexOf("/settings/connection-profile/")===0),r?9:y[4].path==="/settings/conversation"?10:y[4].path==="/settings/users"?11:y[4].path==="/login"||y[4].path==="/register"?12:13)))}s=m(t,[-1,-1]),l=h[s]=d[s](t);let _=t[5]&&t[2].haSingleColumn&&Za(t);return{c(){p&&p.c(),e=C(),l.c(),a=C(),_&&_.c(),u=ct()},m(y,b){p&&p.m(y,b),w(y,e,b),h[s].m(y,b),w(y,a,b),_&&_.m(y,b),w(y,u,b),c=!0},p(y,b){y[5]==="nav"||!y[2].isSingleColumn?p?(p.p(y,b),b[0]&36&&v(p,1)):(p=Va(y),p.c(),v(p,1),p.m(e.parentNode,e)):p&&(Ce(),S(p,1,1,()=>{p=null}),Ae());let E=s;s=m(y,b),s===E?h[s].p(y,b):(Ce(),S(h[E],1,1,()=>{h[E]=null}),Ae(),l=h[s],l?l.p(y,b):(l=h[s]=d[s](y),l.c()),v(l,1),l.m(a.parentNode,a)),y[5]&&y[2].haSingleColumn?_?(_.p(y,b),b[0]&36&&v(_,1)):(_=Za(y),_.c(),v(_,1),_.m(u.parentNode,u)):_&&(Ce(),S(_,1,1,()=>{_=null}),Ae())},i(y){c||(v(p),v(l),v(_),c=!0)},o(y){S(p),S(l),S(_),c=!1},d(y){p&&p.d(y),y&&$(e),h[s].d(y),y&&$(a),_&&_.d(y),y&&$(u)}}}function qw(t){let e,n;return e=new zu({}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p:Le,i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function Va(t){let e,n;return e=new j0({props:{transition:{duration:t[2].isSingleColumn?250:0,x:t[0]}}}),{c(){G(e.$$.fragment)},m(i,o){q(e,i,o),n=!0},p(i,o){const r={};o[0]&5&&(r.transition={duration:i[2].isSingleColumn?250:0,x:i[0]}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function Ww(t){let e,n,i;function o(s){t[25](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new zu({props:r}),me.push(()=>$e(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],ve(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function Gw(t){let e,n,i;function o(s){t[24](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new Hu({props:r}),me.push(()=>$e(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],ve(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function Kw(t){let e,n,i;function o(s){t[23](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new l0({props:r}),me.push(()=>$e(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],ve(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function Yw(t){let e,n,i;function o(s){t[22](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new ib({props:r}),me.push(()=>$e(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],ve(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function Vw(t){let e,n,i;function o(s){t[21](s)}let r={profile_id:t[4].pathParts[2]};return t[1]!==void 0&&(r.title=t[1]),e=new Hg({props:r}),me.push(()=>$e(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};l[0]&16&&(a.profile_id=s[4].pathParts[2]),!n&&l[0]&2&&(n=!0,a.title=s[1],ve(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function Zw(t){let e,n,i;function o(s){t[20](s)}let r={connection_id:t[4].pathParts[2]};return t[1]!==void 0&&(r.title=t[1]),e=new Yg({props:r}),me.push(()=>$e(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};l[0]&16&&(a.connection_id=s[4].pathParts[2]),!n&&l[0]&2&&(n=!0,a.title=s[1],ve(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function Jw(t){let e,n,i;function o(s){t[19](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new v0({props:r}),me.push(()=>$e(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],ve(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function Qw(t){let e,n,i;function o(s){t[18](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new _g({props:r}),me.push(()=>$e(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],ve(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function Xw(t){let e,n,i;function o(s){t[17](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new A1({props:r}),me.push(()=>$e(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],ve(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function xw(t){let e,n,i;function o(s){t[16](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new G1({props:r}),me.push(()=>$e(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],ve(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function ek(t){let e,n,i;function o(s){t[15](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new s1({props:r}),me.push(()=>$e(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],ve(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function tk(t){let e,n,i;function o(s){t[14](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new kb({props:r}),me.push(()=>$e(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],ve(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function nk(t){let e,n,i;function o(s){t[13](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new Jb({props:r}),me.push(()=>$e(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],ve(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function ik(t){let e,n,i;function o(s){t[12](s)}let r={connection_id:t[4].pathParts[1],conversation_id:t[4].pathParts[2]};return t[1]!==void 0&&(r.title=t[1]),e=new ig({props:r}),me.push(()=>$e(e,"title",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),i=!0},p(s,l){const a={};l[0]&16&&(a.connection_id=s[4].pathParts[1]),l[0]&16&&(a.conversation_id=s[4].pathParts[2]),!n&&l[0]&2&&(n=!0,a.title=s[1],ve(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){S(e.$$.fragment,s),i=!1},d(s){W(e,s)}}}function Za(t){let e,n,i,o,r;return{c(){e=g("div"),e.textContent="\xA0",k(e,"class","overlay")},m(s,l){w(s,e,l),i=!0,o||(r=Se(e,"click",t[26]),o=!0)},p:Le,i(s){i||(ut(()=>{n||(n=tt(e,Dt,{duration:200},!0)),n.run(1)}),i=!0)},o(s){n||(n=tt(e,Dt,{duration:200},!1)),n.run(0),i=!1},d(s){s&&$(e),s&&n&&n.end(),o=!1,r()}}}function ok(t){let e,n,i,o,r,s,l;ut(t[11]);const a=[qw,Hw,zw],u=[];function c(p,d){return d[0]&8&&(e=null),e==null&&(e=!!p[3].is(["loading","pending"])),e?0:p[3].email?1:2}return n=c(t,[-1,-1]),i=u[n]=a[n](t),{c(){i.c(),o=ct()},m(p,d){u[n].m(p,d),w(p,o,d),r=!0,s||(l=[Se(Or,"focus",t[10]),Se(Or,"resize",t[11])],s=!0)},p(p,d){let h=n;n=c(p,d),n===h?u[n].p(p,d):(Ce(),S(u[h],1,1,()=>{u[h]=null}),Ae(),i=u[n],i?i.p(p,d):(i=u[n]=a[n](p),i.c()),v(i,1),i.m(o.parentNode,o))},i(p){r||(v(i),r=!0)},o(p){S(i),r=!1},d(p){u[n].d(p),p&&$(o),s=!1,st(l)}}}function rk(t,e,n){let i,o,r,s,l;Ee(t,vt,Z=>n(5,i=Z)),Ee(t,Ii,Z=>n(2,o=Z)),Ee(t,Be,Z=>n(4,s=Z));const a=li("/events"),u=new F0().start();Ee(t,u,Z=>n(9,l=Z));const c=new Fw({});Ee(t,c,Z=>n(3,r=Z));let p=Be.path,d=0,h={closed:!0},m=xe.l("Chat");a.update({debug:"WebSocket"}),window.convosWebSockeet=a,et.url(Be.urlFor("/api")),Be.update({baseUrl:Ge("base_url"),enabled:!0}),a.update({url:Be.wsUrlFor("/events")}),c.on("wsEventSentJoin",Z=>Be.go(Be.conversationPath(Z))),y().catch(Z=>console.error("[serviceWorker]",Z)),Ko("socket",a),Ko("themeManager",u),Ko("user",c),_t.on("click",Z=>Z.path&&Be.go(Z.path)),a.on("update",E),xe.load().then(()=>c.load());function _(Z,K){if(!document)return;const re=Ge("organization_name"),de=K.notifications.notifications?"("+K.notifications.notifications+") ":"";document.title=re==="Convos"?xe.l("%1 - Convos",de+xe.l(Z)):xe.l("%1 - Convos for %2",de+xe.l(Z),re)}async function y(){if(!navigator.serviceWorker)return{};const Z=await navigator.serviceWorker.register(Be.urlFor("/sw.js")),K=await fetch(Be.urlFor("/sw/info")),re=K.status==200&&await K.json()||{mode:"",version:"0.00"};if(re.version==Ge("version"))return{};console.info("[serviceWorker.update]",Ge("version"),re),Z.update()}async function b(Z,K){K.email&&xe.emojis.load(),xn[K.email?"add":"remove"]("notify"),await Li();const re=K.is(["loading","pending"])||document.querySelector(".cms-main")?"cms":"app";if(document.body.className=document.body.className.replace(/for-\w+/,"for-"+re),p!==Z.path&&(p=Z.path,Ri(vt,i="",i)),Z.pathParts.length===0){const de=K.email?K.lastUrl||"/chat":"/login";Z.go(de,{replace:!0})}else K.email&&K.update({lastUrl:location.href})}function E(Z){if(Z.is("open"))return h.close&&h.close();const K=navigator.onLine===!1?xe.l("You seem to be offline."):Z.error?xe.l(Z.error):Z.is("connecting")?xe.l("Connecting to Convos..."):xe.l("Connection to Convos is %1.",xe.l(Z.readyStateHuman));h.body!==K&&(h.close&&h.close(),h=_t.showInApp(K,{closeAfter:-1,title:xe.l("Status")}))}const R=()=>c.email&&a.open();function j(){n(0,d=Or.innerWidth)}function D(Z){m=Z,n(1,m)}function A(Z){m=Z,n(1,m)}function T(Z){m=Z,n(1,m)}function P(Z){m=Z,n(1,m)}function U(Z){m=Z,n(1,m)}function B(Z){m=Z,n(1,m)}function F(Z){m=Z,n(1,m)}function I(Z){m=Z,n(1,m)}function z(Z){m=Z,n(1,m)}function x(Z){m=Z,n(1,m)}function J(Z){m=Z,n(1,m)}function O(Z){m=Z,n(1,m)}function L(Z){m=Z,n(1,m)}function Y(Z){m=Z,n(1,m)}const H=()=>{Ri(vt,i="",i)};function V(Z){m=Z,n(1,m)}return t.$$.update=()=>{t.$$.dirty[0]&512&&xn[l.compactDisplay?"add":"remove"]("compact-display"),t.$$.dirty[0]&24&&b(s,r),t.$$.dirty[0]&10&&_(m,r),t.$$.dirty[0]&1&&Ii.setWidth(d),t.$$.dirty[0]&4&&c.update({unreadIncludePrivateMessages:o.isSingleColumn})},[d,m,o,r,s,i,a,u,c,l,R,j,D,A,T,P,U,B,F,I,z,x,J,O,L,Y,H,V]}class sk extends Xe{constructor(e){super(),Qe(this,e,rk,ok,Ze,{},null,[-1,-1])}}class lk extends Mt{constructor(e){super(),this.prop("ro","domain",e.domain||"meet.jit.si"),this.prop("ro","email",e.email||""),this.prop("rw","nick",e.nick||""),this.prop("rw","roomName",e.roomName||"convos-default"),this.prop("persist","disableAudioLevels",!0,{key:"video:disableAudioLevels"}),this.prop("persist","disableH264",!0,{key:"video:disableH264"}),this.prop("persist","resolution",720,{key:"video:resolution"})}async render(e){try{const n=[].slice.call(e.children,0);this.targetEl=e,this.jitsi=await this._load(),n.forEach(i=>i.remove()),e.className=e.className.replace(/cms-main/,"video-chat--wrapper"),document.querySelector(".cms-navbar").classList.add("is-full-width")}catch(n){console.error("[Jitsi]",{err:n});const i=document.querySelector(".video-error");i.querySelector("span").textContent=String(n).substring(0,350),i.classList.remove("hidden"),gt(document,".cms-main .fa-spin",o=>o.parentNode.classList.add("hidden"))}return this.jitsi?(document.addEventListener("keydown",n=>{n.code==="KeyC"&&this.jitsi.executeCommand("toggleChat"),n.code==="KeyD"&&this.jitsi.executeCommand("toggleShareScreen"),n.code==="KeyF"&&this.jitsi.executeCommand("toggleFilmStrip"),n.code==="KeyM"&&this.jitsi.executeCommand("toggleAudio"),n.code==="KeyR"&&this.jitsi.executeCommand("toggleRaiseHand"),n.code==="KeyV"&&this.jitsi.executeCommand("toggleVideo"),n.code==="KeyW"&&this.jitsi.executeCommand("toggleTileView"),n.code==="Space"&&this.jitsi.isAudioMuted().then(i=>i&&this.jitsi.executeCommand("toggleAudio"))}),document.addEventListener("keyup",n=>{n.code==="Space"&&this.jitsi.isAudioMuted().then(i=>i||this.jitsi.executeCommand("toggleAudio"))}),this):this}_configOverwrite(){return{disableAudioLevels:this.disableAudioLevels,disableH264:this.disableH264,enableWelcomePage:!this.nick,prejoinPageEnabled:!this.nick,minParticipants:1,resolution:this.resolution,analytics:{googleAnalyticsTrackingId:"",scriptURLs:[]},e2eping:{analyticsInterval:-1,pingInterval:-1}}}_interfaceConfigOverwrite(){return{DEFAULT_BACKGROUND:window.getComputedStyle(document.querySelector(".cms-navbar--wrapper")).backgroundColor||"#222222",DISABLE_FOCUS_INDICATOR:!0,DISABLE_DOMINANT_SPEAKER_INDICATOR:!0,DISABLE_VIDEO_BACKGROUND:!0,INITIAL_TOOLBAR_TIMEOUT:1e3,SHOW_CHROME_EXTENSION_BANNER:!0,TOOLBAR_ALWAYS_VISIBLE:!1,TOOLBAR_BUTTONS:["camera","chat","closedcaptions","desktop","etherpad","fodeviceselection","fullscreen","hangup","help","microphone","mute-everyone","profile","raisehand","security","settings","sharedvideo","shortcuts","stats","tileview"],TOOLBAR_TIMEOUT:2e3,VERTICAL_FILMSTRIP:!1,VIDEO_QUALITY_LABEL_DISABLED:!0}}async _load(){return await fc("https://"+this.domain+"/external_api.js"),new JitsiMeetExternalAPI(this.domain,this._options())}_options(){const e={};return this.email&&(e.email=this.email),this.nick&&(e.displayName=this.nick),{configOverwrite:this._configOverwrite(),interfaceConfigOverwrite:this._interfaceConfigOverwrite(),parentNode:this.targetEl,roomName:this.roomName,userInfo:e,height:"100%",width:"100%"}}}gt(document,"#hamburger_checkbox_toggle",t=>{t.checked=!1});gt(document,".js-close-window",t=>{t.addEventListener("click",e=>{!window.opener||(e.preventDefault(),setTimeout(()=>window.close(),1),window.opener.focus())})});if(document.querySelector('meta[name="convos:start_app"][content="chat"]'))document.querySelector(".footer--wrapper").remove(),document.querySelector(".cms-main").remove(),new sk({target:document.body});else if(document.querySelector('meta[name="convos:start_app"][content="jitsi"]')){document.querySelector(".footer--wrapper").remove();const t=document.querySelector(".cms-main");new lk(t.dataset).render(t)}else document.addEventListener("DOMContentLoaded",function(){gt(document,"pre",t=>ht.lineNumbersBlock(t))});document.addEventListener("keydown",function(t){t.keyCode==27&&(gt(document,".fullscreen",e=>e.click()),Ja()),t.keyCode==13&&t.shiftKey&&(t.preventDefault(),Ja("toggle"))});function Ja(t){if("ontouchstart"in window)return;const e=r=>{for(let s=0;s<r.length;s++){const l=document.querySelector(r[s]);if(l&&l.tabIndex!==-1)return l}return null},n=t&&e(["input.is-primary-menu-item","a.is-primary-menu-item"]),i=document.activeElement;if(Co(i,["a","input","textarea"])&&n&&i!==n)return n.focus();const o=e([".is-primary-input",'main input[type="text"], article input[type="text"]',"main a, article a"]);if(o)return o.focus();if(n)return n.focus()}
