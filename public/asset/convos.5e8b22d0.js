!function(){"use strict";var t=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")};var n=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};function e(t,n){return t(n={exports:{}},n.exports),n.exports}var r=e((function(t){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n}));var o=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?n(t):e},i=e((function(t){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n})),a=e((function(t){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},n(e,r)}t.exports=n}));var c=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&a(t,n)};var u=function(t){if(Array.isArray(t))return t};var s=function(t,n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var e=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(e.push(a.value),!n||e.length!==n);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return e}};var f=function(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r};var d=function(t,n){if(t){if("string"==typeof t)return f(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?f(t,n):void 0}};var l=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var p=function(t,n){return u(t)||s(t,n)||d(t,n)||l()};var h=function(t,n){for(;!Object.prototype.hasOwnProperty.call(t,n)&&null!==(t=i(t)););return t},m=e((function(t){function n(e,r,o){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=n=Reflect.get:t.exports=n=function(t,n,e){var r=h(t,n);if(r){var o=Object.getOwnPropertyDescriptor(r,n);return o.get?o.get.call(e):o.value}},n(e,r,o||e)}t.exports=n}));var g=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")};var v=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}},$=e((function(t){function n(e,r,o){return v()?t.exports=n=Reflect.construct:t.exports=n=function(t,n,e){var r=[null];r.push.apply(r,n);var o=new(Function.bind.apply(t,r));return e&&a(o,e.prototype),o},n.apply(null,arguments)}t.exports=n})),y=e((function(t){function n(e){var r="function"==typeof Map?new Map:void 0;return t.exports=n=function(t){if(null===t||!g(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,n)}function n(){return $(t,arguments,i(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a(n,t)},n(e)}t.exports=n}));var b=function(t){if(Array.isArray(t))return f(t)};var w=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)};var _=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var x=function(t){return b(t)||w(t)||d(t)||_()};function k(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var E=function(t,n,e){return n&&k(t.prototype,n),e&&k(t,e),t};function O(){}var R=function(t){return t};function C(t){return t()}function S(){return Object.create(null)}function N(t){t.forEach(C)}function D(t){return"function"==typeof t}function P(t,n){return t!=t?n==n:t!==n||t&&"object"===r(t)||"function"==typeof t}function M(t){if(null==t)return O;for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];var o=t.subscribe.apply(t,e);return o.unsubscribe?function(){return o.unsubscribe()}:o}function j(t,n,e){t.$$.on_destroy.push(M(n,e))}function A(t,n,e,r){if(t){var o=L(t,n,e,r);return t[0](o)}}function L(t,n,e,r){return t[1]&&r?function(t,n){for(var e in n)t[e]=n[e];return t}(e.ctx.slice(),t[1](r(n))):e.ctx}function T(t,n,e,o){if(t[2]&&o){var i=t[2](o(e));if(void 0===n.dirty)return i;if("object"===r(i)){for(var a=[],c=Math.max(n.dirty.length,i.length),u=0;u<c;u+=1)a[u]=n.dirty[u]|i[u];return a}return n.dirty|i}return n.dirty}var U="undefined"!=typeof window,I=U?function(){return window.performance.now()}:function(){return Date.now()},z=U?function(t){return requestAnimationFrame(t)}:O,B=new Set;function H(t){B.forEach((function(n){n.c(t)||(B.delete(n),n.f())})),0!==B.size&&z(H)}function q(t,n){t.appendChild(n)}function F(t,n,e){t.insertBefore(n,e||null)}function G(t){t.parentNode.removeChild(t)}function K(t,n){for(var e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function W(t){return document.createElement(t)}function V(t){return document.createTextNode(t)}function Y(){return V(" ")}function Q(){return V("")}function Z(t,n,e,r){return t.addEventListener(n,e,r),function(){return t.removeEventListener(n,e,r)}}function J(t){return function(n){return n.preventDefault(),t.call(this,n)}}function X(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function tt(t){return Array.from(t.childNodes)}function nt(t,n){n=""+n,t.data!==n&&(t.data=n)}function et(t,n){(null!=n||t.value)&&(t.value=n)}function rt(t,n,e,r){t.style.setProperty(n,e,r?"important":"")}function ot(t,n,e){t.classList[e?"add":"remove"](n)}var it,at=function(){function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t(this,n),this.e=W("div"),this.a=r,this.u(e)}return E(n,[{key:"m",value:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=0;e<this.n.length;e+=1)F(t,this.n[e],n);this.t=t}},{key:"u",value:function(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}},{key:"p",value:function(t){this.d(),this.u(t),this.m(this.t,this.a)}},{key:"d",value:function(){this.n.forEach(G)}}]),n}(),ct=new Set,ut=0;function st(t){for(var n=5381,e=t.length;e--;)n=(n<<5)-n^t.charCodeAt(e);return n>>>0}function ft(t,n,e,r,o,i,a){for(var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=16.666/r,s="{\n",f=0;f<=1;f+=u){var d=n+(e-n)*i(f);s+=100*f+"%{".concat(a(d,1-d),"}\n")}var l=s+"100% {".concat(a(e,1-e),"}\n}"),p="__svelte_".concat(st(l),"_").concat(c),h=t.ownerDocument;ct.add(h);var m=h.__svelte_stylesheet||(h.__svelte_stylesheet=h.head.appendChild(W("style")).sheet),g=h.__svelte_rules||(h.__svelte_rules={});g[p]||(g[p]=!0,m.insertRule("@keyframes ".concat(p," ").concat(l),m.cssRules.length));var v=t.style.animation||"";return t.style.animation="".concat(v?"".concat(v,", "):"").concat(p," ").concat(r,"ms linear ").concat(o,"ms 1 both"),ut+=1,p}function dt(t,n){var e=(t.style.animation||"").split(", "),r=e.filter(n?function(t){return t.indexOf(n)<0}:function(t){return-1===t.indexOf("__svelte")}),o=e.length-r.length;o&&(t.style.animation=r.join(", "),(ut-=o)||z((function(){ut||(ct.forEach((function(t){for(var n=t.__svelte_stylesheet,e=n.cssRules.length;e--;)n.deleteRule(e);t.__svelte_rules={}})),ct.clear())})))}function lt(t){it=t}function pt(){if(!it)throw new Error("Function called outside component initialization");return it}function ht(t){pt().$$.on_mount.push(t)}function mt(t){return pt().$$.context.get(t)}function gt(t,n){var e=t.$$.callbacks[n.type];e&&e.slice().forEach((function(t){return t(n)}))}var vt=[],$t=[],yt=[],bt=[],wt=Promise.resolve(),_t=!1;function xt(){_t||(_t=!0,wt.then(Nt))}function kt(){return xt(),wt}function Et(t){yt.push(t)}function Ot(t){bt.push(t)}var Rt,Ct=!1,St=new Set;function Nt(){if(!Ct){Ct=!0;do{for(var t=0;t<vt.length;t+=1){var n=vt[t];lt(n),Dt(n.$$)}for(vt.length=0;$t.length;)$t.pop()();for(var e=0;e<yt.length;e+=1){var r=yt[e];St.has(r)||(St.add(r),r())}yt.length=0}while(vt.length);for(;bt.length;)bt.pop()();_t=!1,Ct=!1,St.clear()}}function Dt(t){if(null!==t.fragment){t.update(),N(t.before_update);var n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(Et)}}function Pt(t,n,e){var r,o,i;t.dispatchEvent((r="".concat(n?"intro":"outro").concat(e),(i=document.createEvent("CustomEvent")).initCustomEvent(r,!1,!1,o),i))}var Mt,jt=new Set;function At(){Mt={r:0,c:[],p:Mt}}function Lt(){Mt.r||N(Mt.c),Mt=Mt.p}function Tt(t,n){t&&t.i&&(jt.delete(t),t.i(n))}function Ut(t,n,e,r){if(t&&t.o){if(jt.has(t))return;jt.add(t),Mt.c.push((function(){jt.delete(t),r&&(e&&t.d(1),r())})),t.o(n)}}var It={duration:0};function zt(t,n,e,r){var o=n(t,e),i=r?0:1,a=null,c=null,u=null;function s(){u&&dt(t,u)}function f(t,n){var e=t.b-i;return n*=Math.abs(e),{a:i,b:t.b,d:e,duration:n,start:t.start,end:t.start+n,group:t.group}}function d(n){var e,r=o||It,d=r.delay,l=void 0===d?0:d,p=r.duration,h=void 0===p?300:p,m=r.easing,g=void 0===m?R:m,v=r.tick,$=void 0===v?O:v,y=r.css,b={start:I()+l,b:n};n||(b.group=Mt,Mt.r+=1),a?c=b:(y&&(s(),u=ft(t,i,n,h,l,g,y)),n&&$(0,1),a=f(b,h),Et((function(){return Pt(t,n,"start")})),e=function(n){if(c&&n>c.start&&(a=f(c,h),c=null,Pt(t,a.b,"start"),y&&(s(),u=ft(t,i,a.b,a.duration,0,g,o.css))),a)if(n>=a.end)$(i=a.b,1-i),Pt(t,a.b,"end"),c||(a.b?s():--a.group.r||N(a.group.c)),a=null;else if(n>=a.start){var e=n-a.start;i=a.a+a.d*g(e/a.duration),$(i,1-i)}return!(!a&&!c)},0===B.size&&z(H),new Promise((function(t){B.add({c:e,f:t})})))}return{run:function(t){D(o)?(Rt||(Rt=Promise.resolve()).then((function(){Rt=null})),Rt).then((function(){o=o(),d(t)})):d(t)},end:function(){s(),a=c=null}}}var Bt="undefined"!=typeof window?window:global;function Ht(t,n,e){var r=t.$$.props[n];void 0!==r&&(t.$$.bound[r]=e,e(t.$$.ctx[r]))}function qt(t){t&&t.c()}function Ft(t,n,e){var r=t.$$,o=r.fragment,i=r.on_mount,a=r.on_destroy,c=r.after_update;o&&o.m(n,e),Et((function(){var n=i.map(C).filter(D);a?a.push.apply(a,x(n)):N(n),t.$$.on_mount=[]})),c.forEach(Et)}function Gt(t,n){var e=t.$$;null!==e.fragment&&(N(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function Kt(t,n){-1===t.$$.dirty[0]&&(vt.push(t),xt(),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function Wt(t,n,e,r,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[-1],c=it;lt(t);var u=n.props||{},s=t.$$={fragment:null,ctx:null,props:i,update:O,not_equal:o,bound:S(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:S(),dirty:a},f=!1;if(s.ctx=e?e(t,u,(function(n,e){var r=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:e;return s.ctx&&o(s.ctx[n],s.ctx[n]=r)&&(s.bound[n]&&s.bound[n](r),f&&Kt(t,n)),e})):[],s.update(),f=!0,N(s.before_update),s.fragment=!!r&&r(s.ctx),n.target){if(n.hydrate){var d=tt(n.target);s.fragment&&s.fragment.l(d),d.forEach(G)}else s.fragment&&s.fragment.c();n.intro&&Tt(t.$$.fragment),Ft(t,n.target,n.anchor),Nt()}lt(c)}var Vt=function(){function n(){t(this,n)}return E(n,[{key:"$destroy",value:function(){Gt(this,1),this.$destroy=O}},{key:"$on",value:function(t,n){var e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),function(){var t=e.indexOf(n);-1!==t&&e.splice(t,1)}}},{key:"$set",value:function(){}}]),n}(),Yt=e((function(t){var n=function(t){var n=Object.prototype,e=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,n,e,r){var o=n&&n.prototype instanceof d?n:d,i=Object.create(o.prototype),a=new x(r||[]);return i._invoke=function(t,n,e){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return E()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=b(a,e);if(c){if(c===f)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var u=s(t,n,e);if("normal"===u.type){if(r=e.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(r="completed",e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function s(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function d(){}function l(){}function p(){}var h={};h[i]=function(){return this};var m=Object.getPrototypeOf,g=m&&m(m(k([])));g&&g!==n&&e.call(g,i)&&(h=g);var v=p.prototype=d.prototype=Object.create(h);function $(t){["next","throw","return"].forEach((function(n){t[n]=function(t){return this._invoke(n,t)}}))}function y(t,n){var o;this._invoke=function(i,a){function c(){return new n((function(o,c){!function o(i,a,c,u){var f=s(t[i],t,a);if("throw"!==f.type){var d=f.arg,l=d.value;return l&&"object"===r(l)&&e.call(l,"__await")?n.resolve(l.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):n.resolve(l).then((function(t){d.value=t,c(d)}),(function(t){return o("throw",t,c,u)}))}u(f.arg)}(i,a,o,c)}))}return o=o?o.then(c,c):c()}}function b(t,n){var e=t.iterator[n.method];if(void 0===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,b(t,n),"throw"===n.method))return f;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=s(e,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,f;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,f):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function w(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function _(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function k(t){if(t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function n(){for(;++r<t.length;)if(e.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return l.prototype=v.constructor=p,p.constructor=l,p[c]=l.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===l||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},$(y.prototype),y.prototype[a]=function(){return this},t.AsyncIterator=y,t.async=function(n,e,r,o,i){void 0===i&&(i=Promise);var a=new y(u(n,e,r,o),i);return t.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},$(v),v[c]="Generator",v[i]=function(){return this},v.toString=function(){return"[object Generator]"},t.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e,r){return a.type="throw",a.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),u=e.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=n,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),f},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),_(e),f}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;_(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:k(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),f}},t}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}}));function Qt(t,n,e,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void e(t)}c.done?n(u):Promise.resolve(u).then(r,o)}var Zt=function(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Qt(i,r,o,a,c,"next",t)}function c(t){Qt(i,r,o,a,c,"throw",t)}a(void 0)}))}};var Jt=function(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t};function Xt(t,n){for(;t;){if(n.tagName?t==n:t.matches&&t.matches(n))return t;t=t.parentNode}return null}function tn(t,n){var e;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var a=this;e&&clearTimeout(e),e=setTimeout((function(){t.apply(a,o)}),n)}}function nn(t,n,e){var r=t&&t.querySelector("."+n.split(" ").join("."));return r||((r=document.createElement("div")).className=n,t&&t.appendChild(r),e&&e(r),r)}function en(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"message",e=t.errors||t;return e&&e[0]?e[0][n]||"Unknown error.":""}function rn(t){if(!t||!("ontouchstart"in window)){if(t){var n=document.getElementById(t).focus();return n&&n.focus()}var e=document.getElementById("search_input"),r=document.activeElement;if(r!=e&&!mn(r,"body"))return e.focus();for(var o=["#chat_input",'.main input[type="text"]',".main a","#search_input"],i=0;i<o.length;i++){var a=document.querySelector(o[i]);if(a)return a.focus()}}}function on(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.95,r=Math.floor(6*t),o=6*t-r,i=e*(1-n),a=e*(1-o*n),c=e*(1-(1-o)*n),u=255,s=255,f=255;switch(r){case 0:u=e,s=c,f=i;break;case 1:u=a,s=e,f=i;break;case 2:u=i,s=e,f=c;break;case 3:u=i,s=a,f=e;break;case 4:u=c,s=i,f=e;break;case 5:u=e,s=i,f=a}return[Math.floor(255*u),Math.floor(255*s),Math.floor(255*f)]}function an(t,n){return"array"==n?Array.isArray(t):"object"==n?"object"==r(t)&&null!==t:"undef"==n?null==t:r(t)==n}function cn(t){var n=document,e=t.replace(/\W/g,"_");if(!n.getElementById(e)){var r=n.createElement("script"),o=[e,t];r.id=o[0],r.src=o[1],n.getElementsByTagName("head")[0].appendChild(r)}}function un(t){return Object.keys(t).filter((function(n){return t[n]})).sort().map((function(t){return"has-mode-"+t})).join(" ")}function sn(t,n,e){var r=t.querySelectorAll(n);if(!e)return[].slice.call(r,0);for(var o=[],i=0;i<r.length;i++)o.push(e(r[i],i));return o}function fn(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function dn(t,n,e){var r=document.querySelector(t);r.className=r.className.replace(n,(function(t,n){return n+e}))}function ln(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!(n>=5)){var e=document.querySelector(".main")||document.querySelector("body");if(!e)return setTimeout((function(){return ln(t,n+1)}),20);if("number"==typeof t)return e.scrollTo(0,t);if("string"==typeof t){var r=document.querySelector(t);return r?ln(r):setTimeout((function(){return ln(t,n+1)}),20)}if(t.href&&-1!=t.href.indexOf("#"))return location.hash=t.href.replace(/.*#/,"#"),ln(location.hash);if(t.tagName)return ln(t.offsetTop-30);if(t.preventDefault&&t.preventDefault(),t.target&&t.target.tagName)return ln(t.target.closest("[href]"));throw"Cannot scroll to "+t}}function pn(t,n){return"is-visible"===n?!t.hasAttribute("hidden"):("toggle"===n&&(n=t.hasAttribute("hidden")),n?t.removeAttribute("hidden"):t.setAttribute("hidden",""))}function hn(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;if(0==t.length)return"#000";for(var e=0,r=0;r<t.length;r++)e=t.charCodeAt(r)+((e<<5)-e),e&=e;return"#"+on(((e=Math.abs(e%n/n))+.618033988749)%1,.4,.7).map((function(t){return t.toString(16)})).join("")}function mn(t,n){return t&&t.tagName&&t.tagName.toLowerCase()===n||!1}function gn(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=16*Math.random()|0;return("x"==t?n:3&n|8).toString(16)}))}function vn(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function $n(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?vn(Object(e),!0).forEach((function(n){Jt(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):vn(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}var yn=function(){function n(){t(this,n),this._on={},this._props={}}return E(n,[{key:"emit",value:function(t){for(var n=this._on[t],e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];for(var i=0;i<(n||[]).length;i++){var a;(a=n[i])[0].apply(a,r)}return this}},{key:"on",value:function(t,n){var e=n?null:new Promise((function(t){n=t})),r=this._on[t]||(this._on[t]=[]),o=[n];r.push(o);var i=function(){var t=r.indexOf(o);-1!=t&&r.splice(t,1)};return e?e.finally(i):i}},{key:"prop",value:function(t,n,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};switch(this._props[n]=$n({},r,{type:t,value:e}),t){case"persist":return this._localStorageProp(n);case"ro":return this._readOnlyProp(n);case"rw":return this._updateableProp(n)}throw"["+this.constructor.name+'] Unknown prop type "'+t+'" for prop "'+n+'".'}},{key:"subscribe",value:function(t){return t(this),this.on("update",t)}},{key:"update",value:function(t){var n=this;return Object.keys(t).forEach((function(e){var r=n._props[e];r&&(r.hasOwnProperty("prev")||(r.prev="ro"==r.type?void 0:r.value),"persist"!=r.type&&"rw"!=r.type||(r.value=t[e]))})),this._updatedTid||(this._updatedTid=setTimeout(this._delayedUpdate.bind(this),1)),this}},{key:"_delayedUpdate",value:function(){var t=this,n={};return Object.keys(this._props).forEach((function(e){var r=t._props[e];if(r.hasOwnProperty("prev")){var o=r.prev;delete r.prev,r.value!==o&&("persist"==r.type&&t._localStorage(e,r.value),n[e]="ro"!=r.type)}})),delete this._updatedTid,Object.keys(n).length&&this.emit("update",this,n),n}},{key:"_localStorage",value:function(t,n){var e="convos:"+(this._props[t].key||t);if(2==arguments.length)return localStorage.setItem(e,JSON.stringify(n));try{return localStorage.hasOwnProperty(e)?JSON.parse(localStorage.getItem(e)):void 0}catch(t){return void console.error("[Reactive:localStorage]",Jt({},e,localStorage.getItem(e)),t)}}},{key:"_localStorageProp",value:function(t){var n=this._props[t],e=this._localStorage(t);an(e,"undef")||(n.value=e),an(e,"undef")&&!this._props[t].lazy&&this._localStorage(t,n.value),this._updateableProp(t)}},{key:"_readOnlyProp",value:function(t){var n=this._props[t];if(void 0===n.value)throw"["+this.constructor.name+'] Read-only attribute "'+t+'" cannot be undefined';var e="function"==typeof n.value?n.value:function(){return n.value};Object.defineProperty(this,t,{get:e})}},{key:"_updateableProp",value:function(t){var n=this._props[t];Object.defineProperty(this,t,{get:function(){return n.value}})}}]),n}();function bn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var wn=function(n){c(a,n);var e,r=(e=a,function(){var t,n=i(e);if(bn()){var r=i(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return o(this,t)});function a(n){var e;return t(this,a),(e=r.call(this)).prop("ro","api",n.api),e.prop("ro","defaultParams",n.defaultParams||{}),e.prop("ro","id",n.id),e.prop("ro","req",{body:null,headers:{}}),e.prop("ro","res",{body:{},headers:{}}),e.prop("rw","err",null),e.prop("rw","status","pending"),e}return E(a,[{key:"error",value:function(t,n){if(t)return this.update({err:Array.isArray(t)?t:[{message:t,source:n}],status:"error"});if(!this.err||!this.err.length)return"";var e=this.err[0],r=e.path&&e.path.match(/\w$/)&&e.path.split("/").pop();return r?r+": "+e.message:e.message}},{key:"perform",value:function(t){var n=this;return this._promise||(this._promise=new Promise((function(e){n.api.spec(n.id).then((function(r){if(!r)return e(n.error('Invalid operationId "'+n.id+'".',"spec"));n.update({status:"loading"});var o=n._paramsToRequest(r,t||n.defaultParams),i=p(o,2),a=i[0],c=i[1];return n.emit("start",c),an(c.body,"object")&&"function"!=typeof c.body.has&&(c.body=JSON.stringify(c.body)),fetch(a,c)})).then((function(t){return Promise.all([t,t.json()])})).then((function(t){var r=p(t,2),o=r[0],i=r[1];delete n._promise,e(n.parse(o,i))})).catch((function(t){delete n._promise,e(n.error('Failed fetching operationId "'+n.id+'": '+t,"fetch"))}))})))}},{key:"is",value:function(t){return this.status==t}},{key:"parse",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.body;this.res.body=n||t,this.res.status=t.status||"201",t.headers&&(this.res.headers=t.headers);var e=null;return String(this.res.status).match(/^[23]/)||(e=n&&n.errors?n.errors:[{message:t.statusText||"Unknown error."}]),this.update({err:e,status:e?"error":"success"})}},{key:"reset",value:function(){return this.res.body={},this.res.headers={},this.res.status=0,this.update({err:null,status:"pending"})}},{key:"_extractValue",value:function(t,n){if(n.schema&&"form"==(t.tagName||"").toLowerCase())return Object.keys(n.schema.properties).reduce((function(n,e){var r=t[e];return r&&("checkbox"!=r.type||r.checked)?(n[e]=r.value,n):n}),{});if(t[n.name]&&t[n.name].tagName)return t[n.name].value;if(n.schema){var e={};return Object.keys(n.schema.properties).forEach((function(n){e[n]=t[n]})),e}return t[n.name]}},{key:"_hasProperty",value:function(t,n){return"body"==n.in||("formData"==n.in?t.formData.has(n.name):"form"==(t.tagName||"").toLowerCase()?!!t[n.name]:t.hasOwnProperty(n.name))}},{key:"_paramsToRequest",value:function(t,n){var e=this,r={headers:this.req.headers,method:t.method},o=new URL(t.url);return(t.parameters||[]).forEach((function(t){if(e._hasProperty(n,t)||t.required)if("path"==t.in){var i=new RegExp("(%7B|\\{)"+fn(t.name)+"(%7D|\\})","i");o.pathname=o.pathname.replace(i,encodeURIComponent(e._extractValue(n,t)))}else if("query"==t.in)o.searchParams.set(t.name,e._extractValue(n,t));else if("formData"==t.in)delete r.headers["Content-Type"],r.body=n.formData;else if("body"==t.in)r.body=e._extractValue(n,t);else{if("header"!=t.in)throw"[Api] Parameter in:"+t.in+" is not supported.";r.header[t.name]=e._extractValue(n,t.name)}})),[o,r]}}]),a}(yn),_n=function(){function n(e){t(this,n),this.protocol=location.protocol,this.url=e}var e;return E(n,[{key:"operation",value:function(t,n){var e=new wn({api:this,id:t,defaultParams:n});return e.req.headers={"Content-Type":"application/json"},e}},{key:"spec",value:(e=Zt(Yt.mark((function t(n){var e,r,o=this;return Yt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._ops||!n){t.next=2;break}return t.abrupt("return",this._ops[n]);case 2:if(!this._spec){t.next=4;break}return t.abrupt("return",this._spec);case 4:return t.next=6,fetch(this.url);case 6:return e=t.sent,t.next=9,e.json();case 9:if(r=t.sent,this._ops={},this._spec=r,Object.keys(r.paths).forEach((function(t){Object.keys(r.paths[t]).forEach((function(n){var e=r.paths[t][n],i=e.operationId;i&&(e.method=n.toUpperCase(),e.url=o.protocol+"//"+r.host+r.basePath+t+".json",e.parameters=(e.parameters||[]).map((function(t){return o._resolveRef(t)})),o._ops[i]=e)}))})),!this._ops||!n){t.next=15;break}return t.abrupt("return",this._ops[n]);case 15:if(!this._spec){t.next=17;break}return t.abrupt("return",this._spec);case 17:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"_resolveRef",value:function(t){var n=this,e=t;if(t.$ref){var r=t.$ref.replace(/^#\//,"").split("/");for(e=this._spec;r.length;)e=e[r.shift()]}return an(e,"object")&&Object.keys(e).forEach((function(t){e[t]=n._resolveRef(e[t])})),e}}]),n}();function xn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function kn(t){var n,e,r,o,i;return{c:function(){X(n=W("i"),"class",e=t[4](t[2],t[1],t[3])),X(n,"style",r=Cn(t[2],t[1],t[0],t[3])),n.hidden=o=!t[2]},m:function(e,r,o){F(e,n,r),o&&i(),i=Z(n,"click",t[7])},p:function(t,i){var a=p(i,1)[0];14&a&&e!==(e=t[4](t[2],t[1],t[3]))&&X(n,"class",e),15&a&&r!==(r=Cn(t[2],t[1],t[0],t[3]))&&X(n,"style",r),4&a&&o!==(o=!t[2])&&(n.hidden=o)},i:O,o:O,d:function(t){t&&G(n),i()}}}var En={regular:"far",solid:"fas"},On={Convos:"",batman:"https://www.gravatar.com/avatar/ab1839667863f31e359d98364cfdef61",marcusr:"https://www.gravatar.com/avatar/6c056546d802b1a9ac186ab63f9fb632"},Rn=["fas fa-anchor","fas fa-atom","fas fa-award","fas fa-balance-scale","fas fa-baseball-ball","fas fa-basketball-ball","fas fa-bicycle","fas fa-bolt","fas fa-book-reader","fas fa-candy-cane","fas fa-carrot","fas fa-cat","fas fa-chess-knight","fas fa-child","fas fa-coffee","fas fa-cookie-bite","fas fa-crow","fas fa-dice","fas fa-dog","fas fa-dove","fas fa-feather","fas fa-fish","fas fa-gem","fas fa-ghost","fas fa-hard-hat","fas fa-hat-cowboy","fas fa-hat-wizard","fas fa-hiking","fas fa-horse-head","fas fa-horse","fas fa-id-badge","fas fa-igloo","fas fa-mask","fas fa-meteor","fas fa-paint-brush","fas fa-paw","fas fa-pepper-hot","fas fa-pizza-slice","fas fa-portrait","fas fa-puzzle-piece","fas fa-rainbow","fas fa-robot","fas fa-rocket","fas fa-running","fas fa-seedling","fas fa-skating","fas fa-skiing","fas fa-smile","fas fa-snowboarding","fas fa-snowflake","fas fa-snowman","fas fa-swimmer","fas fa-umbrella","fas fa-user-astronaut","fas fa-user-graduate","fas fa-user-ninja","fas fa-user-secret","fas fa-walking","fas fa-yin-yang"];function Cn(t,n,e,r){var o=[],i="color:",a=t.match(/^pick:(.+)$/);return a&&On[a[1]]&&(i="background-color:",o.push('background-image:url("'+On[a[1]]+'")')),e&&o.push(i+e),o.join(";")}function Sn(t,n,e){var r=!1,o=n.class,i=void 0===o?"":o,a=n.animation,c=void 0===a?"":a,u=n.color,s=void 0===u?"":u,f=n.family,d=void 0===f?"":f,l=n.name;return ht((function(){if(e(3,r=!!On.Convos),!r){var t=document.querySelector('[rel=icon][type="image/png"][sizes="32x32"]')||document.querySelector('[rel=icon][type="image/png"]');t&&(On.Convos=t.href)}})),t.$set=function(t){"class"in t&&e(5,i=t.class),"animation"in t&&e(6,c=t.animation),"color"in t&&e(0,s=t.color),"family"in t&&e(1,d=t.family),"name"in t&&e(2,l=t.name)},[s,d,l,r,function(t,n,e){var r=[],o=t.match(/^pick:(.+)$/);if(o){if(On[o[1]])return"fas fa-contributor for-"+o[1].toLowerCase();r.push(function(t){if(t.match(/^\d+$/)&&console.log(Rn[t]),t.match(/^\d+$/))return Rn[t];for(var n=0,e=0;e<t.length;e++)n=t.charCodeAt(e)+((n<<5)-n),n&=n;return n=Math.abs(n),Rn[n%Rn.length]}(o[1]))}else r.push(En[n]||"fas"),r.push("fa-"+t);return c&&r.push(c.split(" ").map((function(t){return"fa-"+t}))),i&&r.push(i.split(" ")),r.join(" ")},i,c,function(n){gt(t,n)}]}var Nn=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(xn()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,Sn,kn,P,{class:5,animation:6,color:0,family:1,name:2}),r}return u}(Vt);function Dn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Pn={0:"Jan",1:"Feb",2:"March",3:"Apr",4:"May",5:"Jun",6:"July",7:"Aug",8:"Sept",9:"Oct",10:"Nov",11:"Dec"},Mn=function(n){c(a,n);var e,r=(e=a,function(){var t,n=i(e);if(Dn()){var r=i(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return o(this,t)});function a(n){return t(this,a),"string"!=typeof n||n.match(/Z$/)||(n+="Z"),r.call(this,n||new Date)}return E(a,[{key:"getHumanDate",value:function(){var t=this.getMonthAbbr()+" "+this.getDate(),n=new a;return this.getYear()==n.getYear()||(t+=", "+this.getFullYear()),t}},{key:"getHM",value:function(){return[this.getHours(),this.getMinutes()].map((function(t){return t<10?"0"+t:t})).join(":")}},{key:"getMonthAbbr",value:function(){return Pn[this.getMonth()]||""}},{key:"toEpoch",value:function(){return this.getTime()/1e3}}]),a}(y(Date));function jn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function An(t){var n,e,r,o,i,a=new Nn({props:{animation:t[3],name:t[0]}}),c=t[12].default,u=A(c,t,t[11],null);return{c:function(){n=W("button"),qt(a.$$.fragment),e=Y(),u&&u.c(),X(n,"class",r=t[4].join(" ")),n.disabled=t[5],X(n,"type",t[2])},m:function(r,c,s){F(r,n,c),Ft(a,n,null),q(n,e),u&&u.m(n,null),o=!0,s&&i(),i=Z(n,"click",t[13])},p:function(t,e){var i=p(e,1)[0],s={};8&i&&(s.animation=t[3]),1&i&&(s.name=t[0]),a.$set(s),u&&u.p&&2048&i&&u.p(L(c,t,t[11],null),T(c,t[11],i,null)),(!o||16&i&&r!==(r=t[4].join(" ")))&&X(n,"class",r),(!o||32&i)&&(n.disabled=t[5]),(!o||4&i)&&X(n,"type",t[2])},i:function(t){o||(Tt(a.$$.fragment,t),Tt(u,t),o=!0)},o:function(t){Ut(a.$$.fragment,t),Ut(u,t),o=!1},d:function(t){t&&G(n),Gt(a),u&&u.d(t),i()}}}function Ln(t,n,e){var r,o=O,i=function(){return o(),o=M(m,(function(t){return e(9,r=t)})),m};t.$$.on_destroy.push((function(){return o()}));var a="",c=[],u=!1,s=0,f=n.disabled,d=void 0!==f&&f,l=n.icon,p=void 0===l?"":l,h=n.op,m=void 0===h?new wn({api:!1,id:""}):h;i();var g=n.type,v=void 0===g?"":g;function $(t){t&&e(8,s=(new Mn).toEpoch()),e(3,a=t?"spin":""),e(7,u=t)}var y,b=n.$$slots,w=void 0===b?{}:b,_=n.$$scope;return t.$set=function(t){"disabled"in t&&e(6,d=t.disabled),"icon"in t&&e(0,p=t.icon),"op"in t&&i(e(1,m=t.op)),"type"in t&&e(2,v=t.type),"$$scope"in t&&e(11,_=t.$$scope)},t.$$.update=function(){512&t.$$.dirty&&r.is("loading")&&$(!0),768&t.$$.dirty&&(r.is("loading")||setTimeout((function(){return $(!1)}),700-((new Mn).toEpoch()-s))),1&t.$$.dirty&&e(4,c=["btn","for-"+(p||"default")]),192&t.$$.dirty&&e(5,y=d||u)},[p,m,v,a,c,y,d,u,s,r,$,_,w,function(n){gt(t,n)}]}var Tn=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(jn()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,Ln,An,P,{disabled:6,icon:0,op:1,type:2}),r}return u}(Vt);function Un(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var In=function(t){return{}},zn=function(t){return{}};function Bn(t){var n,e,r,o,i,a,c,u=new Nn({props:{family:"regular",name:t[7]}});u.$on("click",t[14]);var s,f=t[9].label,d=A(f,t,t[8],zn),l=d||{c:function(){s=V("Label")},m:function(t,n){F(t,s,n)},d:function(t){t&&G(s)}};return{c:function(){n=W("div"),e=W("input"),r=Y(),qt(u.$$.fragment),o=Y(),i=W("label"),l&&l.c(),X(e,"type","checkbox"),X(e,"id",t[4]),X(e,"name",t[3]),e.__value=t[1],e.value=e.__value,e.disabled=t[2],X(i,"for",t[4]),X(n,"class","checkbox"),ot(n,"has-focus",t[6]),ot(n,"is-disabled",t[2])},m:function(s,f,d){F(s,n,f),q(n,e),e.checked=t[0],t[11](e),q(n,r),Ft(u,n,null),q(n,o),q(n,i),l&&l.m(i,null),a=!0,d&&N(c),c=[Z(e,"change",t[10]),Z(e,"blur",t[12]),Z(e,"focus",t[13])]},p:function(t,r){var o=p(r,1)[0];(!a||16&o)&&X(e,"id",t[4]),(!a||8&o)&&X(e,"name",t[3]),(!a||2&o)&&(e.__value=t[1]),e.value=e.__value,(!a||4&o)&&(e.disabled=t[2]),1&o&&(e.checked=t[0]);var c={};128&o&&(c.name=t[7]),u.$set(c),d&&d.p&&256&o&&d.p(L(f,t,t[8],zn),T(f,t[8],o,In)),(!a||16&o)&&X(i,"for",t[4]),64&o&&ot(n,"has-focus",t[6]),4&o&&ot(n,"is-disabled",t[2])},i:function(t){a||(Tt(u.$$.fragment,t),Tt(l,t),a=!0)},o:function(t){Ut(u.$$.fragment,t),Ut(l,t),a=!1},d:function(e){e&&G(n),t[11](null),Gt(u),l&&l.d(e),N(c)}}}function Hn(t,n,e){var r,o=n.checked,i=void 0!==o&&o,a=n.disabled,c=void 0!==a&&a,u=n.name,s=void 0===u?"":u,f=n.id,d=void 0===f?s?"form_"+s:gn():f,l=n.value,p=void 0===l?1:l,h=!1,m=n.$$slots,g=void 0===m?{}:m,v=n.$$scope;var $;return t.$set=function(t){"checked"in t&&e(0,i=t.checked),"disabled"in t&&e(2,c=t.disabled),"name"in t&&e(3,s=t.name),"id"in t&&e(4,d=t.id),"value"in t&&e(1,p=t.value),"$$scope"in t&&e(8,v=t.$$scope)},t.$$.update=function(){32&t.$$.dirty&&r&&!r.syncValue&&(e(5,r.syncValue=function(){var t;e(0,(t=[this.checked,this.value],i=t[0],p=t[1],t),i,(e(1,p),e(5,r)))},r),r.syncValue()),1&t.$$.dirty&&e(7,$=i?"check-square":"square")},[i,p,c,s,d,r,h,$,v,g,function(){i=this.checked,e(0,i),e(5,r)},function(t){$t[t?"unshift":"push"]((function(){e(5,r=t)}))},function(){e(6,h=!1)},function(){e(6,h=!0)},function(){c||e(0,i=!i)}]}var qn=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(Un()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,Hn,Bn,P,{checked:0,disabled:2,name:3,id:4,value:1}),r}return u}(Vt),Fn=function(){function n(e){var r=this;t(this,n),this._url=new URL("http://localhost"),Object.defineProperty(this,"href",{get:function(){return r._url.href.replace(/^http:/,r.protocol)},set:function(t){r._url.href=t.replace(/^\w+:/,"http:"),r.protocol=t.match(/^\w+:/)[0]}}),["host","pathname","password","searchParams","username"].forEach((function(t){Object.defineProperty(r,t,{get:function(){return r._url[t]},set:function(n){r._url[t]=n}})})),this.href=e}return E(n,[{key:"fromForm",value:function(t){var n=t.server.value;return t.nick.value.length&&this.searchParams.append("nick",t.nick.value),this.searchParams.append("tls",t.tls.checked?"1":"0"),this.searchParams.append("tls_verify",t.tls_verify&&t.tls_verify.checked?"1":"0"),this.host=n.match(/:\d+$/)?n:n+":6667",this.password=t.password.value,this.username=t.username.value,this}},{key:"toString",value:function(){return this.href.replace(/^http:/,this.protocol)}}]),n}(),Gn=function(){var t={base:"https://twemoji.maxcdn.com/v/12.1.5/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:function(t){var n="string"==typeof t?parseInt(t,16):t;if(n<65536)return c(n);return c(55296+((n-=65536)>>10),56320+(1023&n))},toCodePoint:g},onerror:function(){this.parentNode&&this.parentNode.replaceChild(u(this.alt,!1),this)},parse:function(n,e){e&&"function"!=typeof e||(e={callback:e});return("string"==typeof n?l:d)(n,{callback:e.callback||s,attributes:"function"==typeof e.attributes?e.attributes:h,base:"string"==typeof e.base?e.base:t.base,ext:e.ext||t.ext,size:e.folder||(r=e.size||t.size,"number"==typeof r?r+"x"+r:r),className:e.className||t.className,onerror:e.onerror||t.onerror});var r},replace:m,test:function(t){e.lastIndex=0;var n=e.test(t);return e.lastIndex=0,n}},n={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},e=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[#*0-9]\ufe0f?\u20e3|(?:[©®\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5\udeeb\udeec\udef4-\udefa\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd71\udd73-\udd76\udd7a-\udda2\udda5-\uddaa\uddae-\uddb4\uddb7\uddba\uddbc-\uddca\uddd0\uddde-\uddff\ude70-\ude73\ude78-\ude7a\ude80-\ude82\ude90-\ude95]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,r=/\uFE0F/g,o=String.fromCharCode(8205),i=/[&<>'"]/g,a=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,c=String.fromCharCode;return t;function u(t,n){return document.createTextNode(n?t.replace(r,""):t)}function s(t,n){return"".concat(n.base,n.size,"/",t,n.ext)}function f(t){return g(t.indexOf(o)<0?t.replace(r,""):t)}function d(t,n){for(var r,o,i,c,s,d,l,p,h,m,g,v,$,y=function t(n,e){for(var r,o,i=n.childNodes,c=i.length;c--;)3===(o=(r=i[c]).nodeType)?e.push(r):1!==o||"ownerSVGElement"in r||a.test(r.nodeName.toLowerCase())||t(r,e);return e}(t,[]),b=y.length;b--;){for(i=!1,c=document.createDocumentFragment(),d=(s=y[b]).nodeValue,p=0;l=e.exec(d);){if((h=l.index)!==p&&c.appendChild(u(d.slice(p,h),!0)),v=f(g=l[0]),p=h+g.length,$=n.callback(v,n),v&&$){for(o in(m=new Image).onerror=n.onerror,m.setAttribute("draggable","false"),r=n.attributes(g,v))r.hasOwnProperty(o)&&0!==o.indexOf("on")&&!m.hasAttribute(o)&&m.setAttribute(o,r[o]);m.className=n.className,m.alt=g,m.src=$,i=!0,c.appendChild(m)}m||c.appendChild(u(g,!1)),m=null}i&&(p<d.length&&c.appendChild(u(d.slice(p),!0)),s.parentNode.replaceChild(c,s))}return t}function l(t,n){return m(t,(function(t){var e,r,o=t,a=f(t),c=n.callback(a,n);if(a&&c){for(r in o="<img ".concat('class="',n.className,'" ','draggable="false" ','alt="',t,'"',' src="',c,'"'),e=n.attributes(t,a))e.hasOwnProperty(r)&&0!==r.indexOf("on")&&-1===o.indexOf(" "+r+"=")&&(o=o.concat(" ",r,'="',e[r].replace(i,p),'"'));o=o.concat("/>")}return o}))}function p(t){return n[t]}function h(){return null}function m(t,n){return String(t).replace(e,n)}function g(t,n){for(var e=[],r=0,o=0,i=0;i<t.length;)r=t.charCodeAt(i++),o?(e.push((65536+(o-55296<<10)+(r-56320)).toString(16)),o=0):55296<=r&&r<=56319?o=r:e.push(r.toString(16));return e.join(n||"-")}}(),Kn=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},Wn=ae,Vn=Xn,Yn=function(t){return te(Xn(t))},Qn=te,Zn=ie,Jn=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Xn(t){for(var n,e=[],r=0,o=0,i="";null!=(n=Jn.exec(t));){var a=n[0],c=n[1],u=n.index;if(i+=t.slice(o,u),o=u+a.length,c)i+=c[1];else{i&&(e.push(i),i="");var s=n[2],f=n[3],d=n[4],l=n[5],p=n[6],h=n[7],m="+"===p||"*"===p,g="?"===p||"*"===p,v=s||"/",$=d||l||(h?".*":"[^"+v+"]+?");e.push({name:f||r++,prefix:s||"",delimiter:v,optional:g,repeat:m,pattern:ee($)})}}return o<t.length&&(i+=t.substr(o)),i&&e.push(i),e}function te(t){for(var n=new Array(t.length),e=0;e<t.length;e++)"object"===r(t[e])&&(n[e]=new RegExp("^"+t[e].pattern+"$"));return function(e){for(var r="",o=e||{},i=0;i<t.length;i++){var a=t[i];if("string"!=typeof a){var c,u=o[a.name];if(null==u){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to be defined')}if(Kn(u)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but received "'+u+'"');if(0===u.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var s=0;s<u.length;s++){if(c=encodeURIComponent(u[s]),!n[i].test(c))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but received "'+c+'"');r+=(0===s?a.prefix:a.delimiter)+c}}else{if(c=encodeURIComponent(u),!n[i].test(c))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but received "'+c+'"');r+=a.prefix+c}}else r+=a}return r}}function ne(t){return t.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function ee(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function re(t,n){return t.keys=n,t}function oe(t){return t.sensitive?"":"i"}function ie(t,n){for(var e=(n=n||{}).strict,r=!1!==n.end,o="",i=t[t.length-1],a="string"==typeof i&&/\/$/.test(i),c=0;c<t.length;c++){var u=t[c];if("string"==typeof u)o+=ne(u);else{var s=ne(u.prefix),f=u.pattern;u.repeat&&(f+="(?:"+s+f+")*"),o+=f=u.optional?s?"(?:"+s+"("+f+"))?":"("+f+")?":s+"("+f+")"}}return e||(o=(a?o.slice(0,-2):o)+"(?:\\/(?=$))?"),o+=r?"$":e&&a?"":"(?=\\/|$)",new RegExp("^"+o,oe(n))}function ae(t,n,e){return Kn(n=n||[])?e||(e={}):(e=n,n=[]),t instanceof RegExp?function(t,n){var e=t.source.match(/\((?!\?)/g);if(e)for(var r=0;r<e.length;r++)n.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return re(t,n)}(t,n):Kn(t)?function(t,n,e){for(var r=[],o=0;o<t.length;o++)r.push(ae(t[o],n,e).source);return re(new RegExp("(?:"+r.join("|")+")",oe(e)),n)}(t,n,e):function(t,n,e){for(var r=Xn(t),o=ie(r,e),i=0;i<r.length;i++)"string"!=typeof r[i]&&n.push(r[i]);return re(o,n)}(t,n,e)}Wn.parse=Vn,Wn.compile=Yn,Wn.tokensToFunction=Qn,Wn.tokensToRegExp=Zn;var ce,ue="undefined"!=typeof document,se="undefined"!=typeof window,fe="undefined"!=typeof history,de="undefined"!=typeof process,le=ue&&document.ontouchstart?"touchstart":"click",pe=se&&!(!window.history.location&&!window.location);function he(){this.callbacks=[],this.exits=[],this.current="",this.len=0,this._decodeURLComponents=!0,this._base="",this._strict=!1,this._running=!1,this._hashbang=!1,this.clickHandler=this.clickHandler.bind(this),this._onpopstate=this._onpopstate.bind(this)}function me(t,n){if("function"==typeof t)return me.call(this,"*",t);if("function"==typeof n)for(var e=new $e(t,null,this),r=1;r<arguments.length;++r)this.callbacks.push(e.middleware(arguments[r]));else"string"==typeof t?this["string"==typeof n?"redirect":"show"](t,n):this.start(t)}function ge(t){if(!t.handled){var n=this._window;(this._hashbang?pe&&this._getBase()+n.location.hash.replace("#!",""):pe&&n.location.pathname+n.location.search)!==t.canonicalPath&&(this.stop(),t.handled=!1,pe&&(n.location.href=t.canonicalPath))}}function ve(t,n,e){var r=this.page=e||me,o=r._window,i=r._hashbang,a=r._getBase();"/"===t[0]&&0!==t.indexOf(a)&&(t=a+(i?"#!":"")+t);var c=t.indexOf("?");this.canonicalPath=t;var u=new RegExp("^"+a.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"));if(this.path=t.replace(u,"")||"/",i&&(this.path=this.path.replace("#!","")||"/"),this.title=ue&&o.document.title,this.state=n||{},this.state.path=t,this.querystring=~c?r._decodeURLEncodedURIComponent(t.slice(c+1)):"",this.pathname=r._decodeURLEncodedURIComponent(~c?t.slice(0,c):t),this.params={},this.hash="",!i){if(!~this.path.indexOf("#"))return;var s=this.path.split("#");this.path=this.pathname=s[0],this.hash=r._decodeURLEncodedURIComponent(s[1])||"",this.querystring=this.querystring.split("#")[0]}}function $e(t,n,e){this.page=e||ye;var r=n||{};r.strict=r.strict||e._strict,this.path="*"===t?"(.*)":t,this.method="GET",this.regexp=Wn(this.path,this.keys=[],r)}he.prototype.configure=function(t){var n=t||{};this._window=n.window||se&&window,this._decodeURLComponents=!1!==n.decodeURLComponents,this._popstate=!1!==n.popstate&&se,this._click=!1!==n.click&&ue,this._hashbang=!!n.hashbang;var e=this._window;this._popstate?e.addEventListener("popstate",this._onpopstate,!1):se&&e.removeEventListener("popstate",this._onpopstate,!1),this._click?e.document.addEventListener(le,this.clickHandler,!1):ue&&e.document.removeEventListener(le,this.clickHandler,!1),this._hashbang&&se&&!fe?e.addEventListener("hashchange",this._onpopstate,!1):se&&e.removeEventListener("hashchange",this._onpopstate,!1)},he.prototype.base=function(t){if(0===arguments.length)return this._base;this._base=t},he.prototype._getBase=function(){var t=this._base;if(t)return t;var n=se&&this._window&&this._window.location;return se&&this._hashbang&&n&&"file:"===n.protocol&&(t=n.pathname),t},he.prototype.strict=function(t){if(0===arguments.length)return this._strict;this._strict=t},he.prototype.start=function(t){var n=t||{};if(this.configure(n),!1!==n.dispatch){var e;if(this._running=!0,pe){var r=this._window.location;e=this._hashbang&&~r.hash.indexOf("#!")?r.hash.substr(2)+r.search:this._hashbang?r.search+r.hash:r.pathname+r.search+r.hash}this.replace(e,null,!0,n.dispatch)}},he.prototype.stop=function(){if(this._running){this.current="",this.len=0,this._running=!1;var t=this._window;this._click&&t.document.removeEventListener(le,this.clickHandler,!1),se&&t.removeEventListener("popstate",this._onpopstate,!1),se&&t.removeEventListener("hashchange",this._onpopstate,!1)}},he.prototype.show=function(t,n,e,r){var o=new ve(t,n,this),i=this.prevContext;return this.prevContext=o,this.current=o.path,!1!==e&&this.dispatch(o,i),!1!==o.handled&&!1!==r&&o.pushState(),o},he.prototype.back=function(t,n){var e=this;if(this.len>0){var r=this._window;fe&&r.history.back(),this.len--}else t?setTimeout((function(){e.show(t,n)})):setTimeout((function(){e.show(e._getBase(),n)}))},he.prototype.redirect=function(t,n){var e=this;"string"==typeof t&&"string"==typeof n&&me.call(this,t,(function(t){setTimeout((function(){e.replace(n)}),0)})),"string"==typeof t&&void 0===n&&setTimeout((function(){e.replace(t)}),0)},he.prototype.replace=function(t,n,e,r){var o=new ve(t,n,this),i=this.prevContext;return this.prevContext=o,this.current=o.path,o.init=e,o.save(),!1!==r&&this.dispatch(o,i),o},he.prototype.dispatch=function(t,n){var e=0,r=0,o=this;function i(){var n=o.callbacks[e++];if(t.path===o.current)return n?void n(t,i):ge.call(o,t);t.handled=!1}n?function t(){var e=o.exits[r++];if(!e)return i();e(n,t)}():i()},he.prototype.exit=function(t,n){if("function"==typeof t)return this.exit("*",t);for(var e=new $e(t,null,this),r=1;r<arguments.length;++r)this.exits.push(e.middleware(arguments[r]))},he.prototype.clickHandler=function(t){if(1===this._which(t)&&!(t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){var n=t.target,e=t.path||(t.composedPath?t.composedPath():null);if(e)for(var o=0;o<e.length;o++)if(e[o].nodeName&&"A"===e[o].nodeName.toUpperCase()&&e[o].href){n=e[o];break}for(;n&&"A"!==n.nodeName.toUpperCase();)n=n.parentNode;if(n&&"A"===n.nodeName.toUpperCase()){var i="object"===r(n.href)&&"SVGAnimatedString"===n.href.constructor.name;if(!n.hasAttribute("download")&&"external"!==n.getAttribute("rel")){var a=n.getAttribute("href");if((this._hashbang||!this._samePath(n)||!n.hash&&"#"!==a)&&!(a&&a.indexOf("mailto:")>-1)&&!(i?n.target.baseVal:n.target)&&(i||this.sameOrigin(n.href))){var c=i?n.href.baseVal:n.pathname+n.search+(n.hash||"");c="/"!==c[0]?"/"+c:c,de&&c.match(/^\/[a-zA-Z]:\//)&&(c=c.replace(/^\/[a-zA-Z]:\//,"/"));var u=c,s=this._getBase();0===c.indexOf(s)&&(c=c.substr(s.length)),this._hashbang&&(c=c.replace("#!","")),(!s||u!==c||pe&&"file:"===this._window.location.protocol)&&(t.preventDefault(),this.show(u))}}}}},he.prototype._onpopstate=(ce=!1,se?(ue&&"complete"===document.readyState?ce=!0:window.addEventListener("load",(function(){setTimeout((function(){ce=!0}),0)})),function(t){if(ce)if(t.state){var n=t.state.path;this.replace(n,t.state)}else if(pe){var e=this._window.location;this.show(e.pathname+e.search+e.hash,void 0,void 0,!1)}}):function(){}),he.prototype._which=function(t){return null==(t=t||se&&this._window.event).which?t.button:t.which},he.prototype._toURL=function(t){var n=this._window;if("function"==typeof URL&&pe)return new URL(t,n.location.toString());if(ue){var e=n.document.createElement("a");return e.href=t,e}},he.prototype.sameOrigin=function(t){if(!t||!pe)return!1;var n=this._toURL(t),e=this._window.location;return e.protocol===n.protocol&&e.hostname===n.hostname&&e.port===n.port},he.prototype._samePath=function(t){if(!pe)return!1;var n=this._window.location;return t.pathname===n.pathname&&t.search===n.search},he.prototype._decodeURLEncodedURIComponent=function(t){return"string"!=typeof t?t:this._decodeURLComponents?decodeURIComponent(t.replace(/\+/g," ")):t},ve.prototype.pushState=function(){var t=this.page,n=t._window,e=t._hashbang;t.len++,fe&&n.history.pushState(this.state,this.title,e&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},ve.prototype.save=function(){var t=this.page;fe&&t._window.history.replaceState(this.state,this.title,t._hashbang&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},$e.prototype.middleware=function(t){var n=this;return function(e,r){if(n.match(e.path,e.params))return t(e,r);r()}},$e.prototype.match=function(t,n){var e=this.keys,r=t.indexOf("?"),o=~r?t.slice(0,r):t,i=this.regexp.exec(decodeURIComponent(o));if(!i)return!1;for(var a=1,c=i.length;a<c;++a){var u=e[a-1],s=this.page._decodeURLEncodedURIComponent(i[a]);void 0===s&&hasOwnProperty.call(n,u.name)||(n[u.name]=s)}return!0};var ye=function t(){var n=new he;function e(){return me.apply(n,arguments)}return e.callbacks=n.callbacks,e.exits=n.exits,e.base=n.base.bind(n),e.strict=n.strict.bind(n),e.start=n.start.bind(n),e.stop=n.stop.bind(n),e.show=n.show.bind(n),e.back=n.back.bind(n),e.redirect=n.redirect.bind(n),e.replace=n.replace.bind(n),e.dispatch=n.dispatch.bind(n),e.exit=n.exit.bind(n),e.configure=n.configure.bind(n),e.sameOrigin=n.sameOrigin.bind(n),e.clickHandler=n.clickHandler.bind(n),e.create=t,Object.defineProperty(e,"len",{get:function(){return n.len},set:function(t){n.len=t}}),Object.defineProperty(e,"current",{get:function(){return n.current},set:function(t){n.current=t}}),e.Context=ve,e.Route=$e,e}(),be=ye,we=ye;function _e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}be.default=we;var xe=new(function(n){c(a,n);var e,r=(e=a,function(){var t,n=i(e);if(_e()){var r=i(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return o(this,t)});function a(){var n;return t(this,a),(n=r.call(this)).prop("ro","basePath",(function(){return n._basePath})),n.prop("ro","canonicalPath",(function(){return n.ctx.canonicalPath})),n.prop("ro","hash",(function(){return location.hash})),n.prop("ro","pathParts",(function(){return n.ctx.pathname.split("/").filter((function(t){return t.length}))})),n.prop("ro","title",(function(){return n.ctx.title})),n.prop("rw","activeMenu",""),n.prop("rw","baseUrl",""),n.prop("rw","component",null),n.prop("rw","ctx",{canonicalPath:"/",params:{},pathname:"/",state:{},title:document.title}),n.prop("rw","query",{}),n.prop("rw","requireLogin",!1),n.prop("persist","lastUrl",""),n._basePath="",n._history=window.history,n._page=be,n._started=!1,n}return E(a,[{key:"dialogPath",value:function(t){var n=["","chat"];return t.connection_id&&n.push(t.connection_id),t.dialog_id&&n.push(t.dialog_id),n.map((function(t){return encodeURIComponent(t)})).join("/")}},{key:"go",value:function(t,n){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._started)return console.log("[Route] Cannot go("+t+",...) before router is started.");0==t.indexOf(this.baseUrl)&&(t=t.substr(this.baseUrl.length)),e?(0!=t.indexOf(this.basePath)&&(t=this.basePath+t),n=n||(this.ctx.state||{}),this.ctx.state=n,this._history.replaceState(this.ctx.state,this.title,t),this._page.show(this._pathWithoutPrefix(t),n||{},!0,!1)):this._page.show(this._pathWithoutPrefix(t),n||{},!0,!0)}},{key:"param",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=this.ctx.params;if(e.hasOwnProperty(t))return e[t];var r=this.query;return r.hasOwnProperty(t)?r[t]:n}},{key:"render",value:function(){this._page.start(),this._started=!0}},{key:"subscribe",value:function(t){return t(this),this.on("update",t)}},{key:"update",value:function(t){return t.baseUrl&&(t.baseUrl=t.baseUrl.replace(/\/+$/,""),this._basePath=new URL(t.baseUrl).pathname.replace(/\/+$/,"")),t.title&&(this.ctx.title=t.title),m(i(a.prototype),"update",this).call(this,t)}},{key:"urlFor",value:function(t){return t.match(/^\w+:/)||t.match(/^#/)?t:this.basePath+t}},{key:"urlToForm",value:function(t){var n=this;Object.keys(this.query).forEach((function(e){var r=n.query[e],o=t[e];o&&o.tagName&&("checkbox"==o.type?o.checked=!!r:o.value=r,o.syncValue&&o.syncValue())}))}},{key:"_pathWithoutPrefix",value:function(t){return 0==t.indexOf(this.basePath)?t.substr(this.basePath.length):t}}]),a}(yn)),ke=new RegExp("(\\\\?)`([^`]+)`","g"),Ee={},Oe={},Re=new RegExp("\\b[a-z]{2,5}://\\S+","g"),Ce=new RegExp("\\[([^\\]]+)\\]\\(([^)]+)\\)","g"),Se=new RegExp("(^|\\s)(\\\\?)(\\*+)(\\w[^<]*?)\\3","g"),Ne={":confused:":":/",":disappointed:":":(",":grin:":";D",":heart:":"&lt;3",":slight_smile:":":)",":smiley:":":D",":stuck_out_tongue:":":P",":wink:":";)"},De=new RegExp("(^|\\s)(:\\w+:|"+Object.keys(Ne).map((function(t){return fn(Ne[t])})).join("|")+")(?=\\W|$)","gi"),Pe={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"};function Me(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"single";return window.__emojiList&&(window.__emojiList.forEach((function(t){if(":"==(t.shortname||"")[0]){if(Ne[t.shortname]&&(Oe[Ne[t.shortname]]=t),Oe[t.shortname]=t,t.category){var n=":"+t.category;Ee[n]||(Ee[n]=[]),Ee[n].push(t)}t.shortname.match(/(_|:)\w/g).forEach((function(n){Ee[n]||(Ee[n]=[]),Ee[n].push(t)})),delete t.category,delete t.html,delete t.order,delete t.unicode}})),delete window.__emojiList),"group"==n?Ee[t]||[]:Oe[t]||{}}function je(t){t=t.replace(/[&<>"']/g,(function(t){return Pe[t]}));var n=0;return t=t.replace(/^&gt;\s(.*)/,(function(t,n){return"<blockquote>"+n+"</blockquote>"})).replace(Se,(function(t,n,e,r,o){return 1==r.length?e?t.replace(/^\\/,""):n+"<em>"+o+"</em>":2==r.length?e?t.replace(/^\\/,""):n+"<strong>"+o+"</strong>":3==r.length?e?t.replace(/^\\/,""):n+"<em><strong>"+o+"</strong></em>":t})).replace(Ce,(function(t,e,r){n++;var o=r.substring(0,1),i=-1!=["/","#"].indexOf(o)?"":"_blank";return'<a href="'+xe.urlFor(r)+'" target="'+i+'">'+e+"</a>"})).replace(ke,(function(t,n,e){return n?t.replace(/^\\/,""):"<code>"+e+"</code>"})),n||(t=t.replace(Re,(function(t){var n=t.match(/^(.*?)(&\w+;|\W)?$/);return'<a href="'+n[1]+'" target="_blank">'+n[1].replace(/^https:\/\//,"")+"</a>"+(n[2]||"")})).replace(/mailto:(\S+)/,(function(t,n){return-1!=t.indexOf('">')?t:'<a href="'+t+'" target="_blank">'+n+"</a>"}))),t=Gn.parse(t.replace(De,(function(t,n,e){return n+(Me(e).emoji||e)})))}var Ae={en:{"Test %1":"Test %1"}};function Le(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];var o=String(Ae.en[t]||t);return o.replace(/(%?)%(\d+)/g,(function(t,n,r){return"%"==n?n+r:e[r-1]}))}function Te(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return je(Le.apply(void 0,[t].concat(e)))}function Ue(t,n){return"Not found."==n.frozen?"":t.frozen?Le(t.frozen):t==n?Le("Connection messages."):(n.frozen?Le(n.frozen):n.topic)||n.is_private&&Le("Private conversation.")||Le("No topic is set.")}function Ie(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function ze(t){var n,e,r=Le(t[1].error())+"";return{c:function(){n=W("div"),e=V(r),X(n,"class","error")},m:function(t,r){F(t,n,r),q(n,e)},p:function(t,n){2&n&&r!==(r=Le(t[1].error())+"")&&nt(e,r)},d:function(t){t&&G(n)}}}function Be(t){var n,e=t[1].is("error"),r=e&&ze(t);return{c:function(){r&&r.c(),n=Q()},m:function(t,e){r&&r.m(t,e),F(t,n,e)},p:function(t,o){var i=p(o,1)[0];2&i&&(e=t[1].is("error")),e?r?r.p(t,i):((r=ze(t)).c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:O,o:O,d:function(t){r&&r.d(t),t&&G(n)}}}function He(t,n,e){var r,o=O,i=function(){return o(),o=M(c,(function(t){return e(1,r=t)})),c};t.$$.on_destroy.push((function(){return o()}));var a=n.op,c=void 0===a?new wn({}):a;return i(),t.$set=function(t){"op"in t&&i(e(0,c=t.op))},[c,r]}var qe=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(Ie()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,He,Be,P,{op:0}),r}return u}(Vt);function Fe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Ge(t){var n,e,r,o,i,a=Le(t[0].dialog_id?"Conversation":"Connection")+"",c=new Nn({props:{name:"times-circle"}});return{c:function(){n=W("a"),e=W("h2"),r=V(a),o=Y(),qt(c.$$.fragment),X(n,"href","#activeMenu:"),X(n,"class","sidebar__header for-settings")},m:function(t,a){F(t,n,a),q(n,e),q(e,r),q(n,o),Ft(c,n,null),i=!0},p:function(t,n){var e=p(n,1)[0];(!i||1&e)&&a!==(a=Le(t[0].dialog_id?"Conversation":"Connection")+"")&&nt(r,a)},i:function(t){i||(Tt(c.$$.fragment,t),i=!0)},o:function(t){Ut(c.$$.fragment,t),i=!1},d:function(t){t&&G(n),Gt(c)}}}function Ke(t,n,e){var r=n.dialog,o=void 0===r?{}:r;return t.$set=function(t){"dialog"in t&&e(0,o=t.dialog)},[o]}var We=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(Fe()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,Ke,Ge,P,{dialog:0}),r}return u}(Vt);function Ve(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Ye=function(t){return{}},Qe=function(t){return{}};function Ze(t){var n,e,r,o,i,a,c=t[8].label,u=A(c,t,t[7],Qe),s=u||function(t){var n;return{c:function(){n=V("Label")},m:function(t,e){F(t,n,e)},d:function(t){t&&G(n)}}}();return{c:function(){n=W("div"),e=W("label"),s&&s.c(),r=Y(),o=W("textarea"),X(e,"for",t[3]),X(o,"name",t[2]),X(o,"placeholder",t[4]),X(o,"id",t[3]),o.readOnly=t[5],X(n,"class","text-area"),n.hidden=t[1]},m:function(c,u,f){F(c,n,u),q(n,e),s&&s.m(e,null),q(n,r),q(n,o),t[9](o),et(o,t[0]),i=!0,f&&a(),a=Z(o,"input",t[10])},p:function(t,r){var a=p(r,1)[0];u&&u.p&&128&a&&u.p(L(c,t,t[7],Qe),T(c,t[7],a,Ye)),(!i||8&a)&&X(e,"for",t[3]),(!i||4&a)&&X(o,"name",t[2]),(!i||16&a)&&X(o,"placeholder",t[4]),(!i||8&a)&&X(o,"id",t[3]),(!i||32&a)&&(o.readOnly=t[5]),1&a&&et(o,t[0]),(!i||2&a)&&(n.hidden=t[1])},i:function(t){i||(Tt(s,t),i=!0)},o:function(t){Ut(s,t),i=!1},d:function(e){e&&G(n),s&&s.d(e),t[9](null),a()}}}function Je(t,n,e){var r,o=n.hidden,i=void 0!==o&&o,a=n.name,c=void 0===a?"":a,u=n.id,s=void 0===u?c?"form_"+c:gn():u,f=n.placeholder,d=void 0===f?"":f,l=n.readonly,p=void 0!==l&&l,h=n.value,m=void 0===h?"":h,g=n.$$slots,v=void 0===g?{}:g,$=n.$$scope;return t.$set=function(t){"hidden"in t&&e(1,i=t.hidden),"name"in t&&e(2,c=t.name),"id"in t&&e(3,s=t.id),"placeholder"in t&&e(4,d=t.placeholder),"readonly"in t&&e(5,p=t.readonly),"value"in t&&e(0,m=t.value),"$$scope"in t&&e(7,$=t.$$scope)},t.$$.update=function(){64&t.$$.dirty&&r&&!r.syncValue&&(e(6,r.syncValue=function(){e(0,m=this.value)},r),r.syncValue())},[m,i,c,s,d,p,r,$,v,function(t){$t[t?"unshift":"push"]((function(){e(6,r=t)}))},function(){m=this.value,e(0,m),e(6,r)}]}var Xe=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(Ve()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,Je,Ze,P,{hidden:1,name:2,id:3,placeholder:4,readonly:5,value:0}),r}return u}(Vt);function tr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var nr=function(t){return{}},er=function(t){return{}},rr=function(t){return{}},or=function(t){return{}};function ir(t){var n,e,r,o,i,a,c,u,s=t[11].label,f=A(s,t,t[10],or),d=f||{c:function(){u=V("Label")},m:function(t,n){F(t,u,n)},d:function(t){t&&G(u)}},l=t[11].help,h=A(l,t,t[10],er);return{c:function(){n=W("div"),e=W("label"),d&&d.c(),r=Y(),o=W("input"),i=Y(),h&&h.c(),X(e,"for",t[4]),X(o,"type",t[7]),X(o,"name",t[3]),X(o,"id",t[4]),X(o,"autocomplete",t[1]),X(o,"placeholder",t[5]),o.readOnly=t[6],o.value=t[0],X(n,"class","text-field"),n.hidden=t[2],ot(n,"has-password","password"==t[7])},m:function(u,s,f){F(u,n,s),q(n,e),d&&d.m(e,null),q(n,r),q(n,o),t[13](o),q(n,i),h&&h.m(n,null),a=!0,f&&N(c),c=[Z(o,"input",t[9]),Z(o,"keyup",t[12])]},p:function(t,r){var i=p(r,1)[0];f&&f.p&&1024&i&&f.p(L(s,t,t[10],or),T(s,t[10],i,rr)),(!a||16&i)&&X(e,"for",t[4]),(!a||128&i)&&X(o,"type",t[7]),(!a||8&i)&&X(o,"name",t[3]),(!a||16&i)&&X(o,"id",t[4]),(!a||2&i)&&X(o,"autocomplete",t[1]),(!a||32&i)&&X(o,"placeholder",t[5]),(!a||64&i)&&(o.readOnly=t[6]),(!a||1&i&&o.value!==t[0])&&(o.value=t[0]),h&&h.p&&1024&i&&h.p(L(l,t,t[10],er),T(l,t[10],i,nr)),(!a||4&i)&&(n.hidden=t[2]),128&i&&ot(n,"has-password","password"==t[7])},i:function(t){a||(Tt(d,t),Tt(h,t),a=!0)},o:function(t){Ut(d,t),Ut(h,t),a=!1},d:function(e){e&&G(n),d&&d.d(e),t[13](null),h&&h.d(e),N(c)}}}function ar(t,n,e){var r,o=n.autocomplete,i=void 0===o?null:o,a=n.hidden,c=void 0!==a&&a,u=n.name,s=void 0===u?"":u,f=n.id,d=void 0===f?s?"form_"+s:gn():f,l=n.placeholder,p=void 0===l?"":l,h=n.readonly,m=void 0!==h&&h,g=n.type,v=void 0===g?"text":g,$=n.value,y=void 0===$?"":$,b=n.$$slots,w=void 0===b?{}:b,_=n.$$scope;return t.$set=function(t){"autocomplete"in t&&e(1,i=t.autocomplete),"hidden"in t&&e(2,c=t.hidden),"name"in t&&e(3,s=t.name),"id"in t&&e(4,d=t.id),"placeholder"in t&&e(5,p=t.placeholder),"readonly"in t&&e(6,m=t.readonly),"type"in t&&e(7,v=t.type),"value"in t&&e(0,y=t.value),"$$scope"in t&&e(10,_=t.$$scope)},t.$$.update=function(){256&t.$$.dirty&&r&&!r.syncValue&&(e(8,r.syncValue=function(){e(0,y=this.value)},r),r.syncValue())},[y,i,c,s,d,p,m,v,r,function(t){e(0,y=v.match(/^(number|range)$/)?parseInt(t.target.value,10):t.target.value)},_,w,function(n){gt(t,n)},function(t){$t[t?"unshift":"push"]((function(){e(8,r=t)}))}]}var cr=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(tr()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,ar,ir,P,{autocomplete:1,hidden:2,name:3,id:4,placeholder:5,readonly:6,type:7,value:0}),r}return u}(Vt);function ur(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function sr(t){var n,e;return{c:function(){X(n=W("input"),"type","hidden"),X(n,"name","connection_id"),n.value=e=t[0].connection_id},m:function(t,e){F(t,n,e)},p:function(t,r){1&r&&e!==(e=t[0].connection_id)&&(n.value=e)},d:function(t){t&&G(n)}}}function fr(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Host and port")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function dr(t){var n,e=Te(process.env.forced_connection?"You cannot create custom connections.":"Example: %1","irc://chat.freenode.net:6697")+"";return{c:function(){X(n=W("p"),"class","help"),X(n,"slot","help")},m:function(t,r){F(t,n,r),n.innerHTML=e},p:O,d:function(t){t&&G(n)}}}function lr(t){var n;return{c:function(){n=Y()},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function pr(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Nickname")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function hr(t){var n,e=new cr({props:{name:"dialog",placeholder:Le("Ex: #convos"),$$slots:{label:[gr]},$$scope:{ctx:t}}});return{c:function(){qt(e.$$.fragment)},m:function(t,r){Ft(e,t,r),n=!0},p:function(t,n){var r={};1048576&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Tt(e.$$.fragment,t),n=!0)},o:function(t){Ut(e.$$.fragment,t),n=!1},d:function(t){Gt(e,t)}}}function mr(t){var n,e;function r(n){t[15].call(null,n)}var o={$$slots:{label:[vr]},$$scope:{ctx:t}};void 0!==t[5]&&(o.checked=t[5]);var i=new qn({props:o});return $t.push((function(){return Ht(i,"checked",r)})),{c:function(){qt(i.$$.fragment)},m:function(t,n){Ft(i,t,n),e=!0},p:function(t,e){var r={};1048576&e&&(r.$$scope={dirty:e,ctx:t}),!n&&32&e&&(n=!0,r.checked=t[5],Ot((function(){return n=!1}))),i.$set(r)},i:function(t){e||(Tt(i.$$.fragment,t),e=!0)},o:function(t){Ut(i.$$.fragment,t),e=!1},d:function(t){Gt(i,t)}}}function gr(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Conversation name")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function vr(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Want to be connected")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function $r(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Secure connection (TLS)")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function yr(t){var n,e;function r(n){t[17].call(null,n)}var o={name:"tls_verify",$$slots:{label:[br]},$$scope:{ctx:t}};void 0!==t[4]&&(o.checked=t[4]);var i=new qn({props:o});return $t.push((function(){return Ht(i,"checked",r)})),{c:function(){qt(i.$$.fragment)},m:function(t,n){Ft(i,t,n),e=!0},p:function(t,e){var r={};1048576&e&&(r.$$scope={dirty:e,ctx:t}),!n&&16&e&&(n=!0,r.checked=t[4],Ot((function(){return n=!1}))),i.$set(r)},i:function(t){e||(Tt(i.$$.fragment,t),e=!0)},o:function(t){Ut(i.$$.fragment,t),e=!1},d:function(t){Gt(i,t)}}}function br(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Verify certificate (TLS)")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function wr(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Show advanced settings")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function _r(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Username")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function xr(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Password")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function kr(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("On-connect commands")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function Er(t){var n,e=new Tn({props:{icon:"save",op:t[6],$$slots:{default:[Rr]},$$scope:{ctx:t}}});return{c:function(){qt(e.$$.fragment)},m:function(t,r){Ft(e,t,r),n=!0},p:function(t,n){var r={};1048576&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Tt(e.$$.fragment,t),n=!0)},o:function(t){Ut(e.$$.fragment,t),n=!1},d:function(t){Gt(e,t)}}}function Or(t){var n,e,r=new Tn({props:{icon:"save",op:t[8],$$slots:{default:[Cr]},$$scope:{ctx:t}}}),o=new Tn({props:{icon:"trash",type:"button",op:t[7],$$slots:{default:[Sr]},$$scope:{ctx:t}}});return o.$on("click",t[9]),{c:function(){qt(r.$$.fragment),n=Y(),qt(o.$$.fragment)},m:function(t,i){Ft(r,t,i),F(t,n,i),Ft(o,t,i),e=!0},p:function(t,n){var e={};1048576&n&&(e.$$scope={dirty:n,ctx:t}),r.$set(e);var i={};1048576&n&&(i.$$scope={dirty:n,ctx:t}),o.$set(i)},i:function(t){e||(Tt(r.$$.fragment,t),Tt(o.$$.fragment,t),e=!0)},o:function(t){Ut(r.$$.fragment,t),Ut(o.$$.fragment,t),e=!1},d:function(t){Gt(r,t),t&&G(n),Gt(o,t)}}}function Rr(t){var n,e=Le("Create")+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function Cr(t){var n,e=Le("Update")+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function Sr(t){var n,e=Le("Delete")+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function Nr(t){var n,e,r,o,i,a,c,u,s,f,d,l,h,m,g,v,$,y,b,w,_,x,k,E,O,R,C,S=t[0].connection_id&&sr(t),N=new cr({props:{name:"server",placeholder:Le("Ex: chat.freenode.net:6697"),readonly:process.env.forced_connection,$$slots:{default:[lr],help:[dr],label:[fr]},$$scope:{ctx:t}}}),D=new cr({props:{name:"nick",placeholder:Le("Ex: your-name"),$$slots:{label:[pr]},$$scope:{ctx:t}}}),P=[mr,hr],M=[];function j(t,n){return t[0].url?0:1}function A(n){t[16].call(null,n)}s=j(t),f=M[s]=P[s](t);var L={name:"tls",$$slots:{label:[$r]},$$scope:{ctx:t}};void 0!==t[3]&&(L.checked=t[3]);var T=new qn({props:L});$t.push((function(){return Ht(T,"checked",A)}));var U=t[3]&&yr(t);function I(n){t[18].call(null,n)}var z={$$slots:{label:[wr]},$$scope:{ctx:t}};void 0!==t[2]&&(z.checked=t[2]);var B=new qn({props:z});$t.push((function(){return Ht(B,"checked",I)}));var H=new cr({props:{name:"username",hidden:!t[2],$$slots:{label:[_r]},$$scope:{ctx:t}}}),K=new cr({props:{type:"password",name:"password",hidden:!t[2],$$slots:{label:[xr]},$$scope:{ctx:t}}}),V=new Xe({props:{name:"on_connect_commands",hidden:!t[2],$$slots:{label:[kr]},$$scope:{ctx:t}}}),Q=[Or,Er],tt=[];function nt(t,n){return t[0].url?0:1}_=nt(t),x=tt[_]=Q[_](t);var et=new qe({props:{op:t[6]}}),rt=new qe({props:{op:t[7]}}),ot=new qe({props:{op:t[8]}});return{c:function(){n=W("form"),S&&S.c(),e=Y(),r=W("input"),o=Y(),i=W("input"),a=Y(),qt(N.$$.fragment),c=Y(),qt(D.$$.fragment),u=Y(),f.c(),d=Y(),qt(T.$$.fragment),h=Y(),U&&U.c(),m=Y(),qt(B.$$.fragment),v=Y(),qt(H.$$.fragment),$=Y(),qt(K.$$.fragment),y=Y(),qt(V.$$.fragment),b=Y(),w=W("div"),x.c(),k=Y(),qt(et.$$.fragment),E=Y(),qt(rt.$$.fragment),O=Y(),qt(ot.$$.fragment),X(r,"type","hidden"),X(r,"name","url"),X(i,"type","hidden"),X(i,"name","wanted_state"),X(w,"class","form-actions"),X(n,"method","post")},m:function(f,l,p){F(f,n,l),S&&S.m(n,null),q(n,e),q(n,r),q(n,o),q(n,i),q(n,a),Ft(N,n,null),q(n,c),Ft(D,n,null),q(n,u),M[s].m(n,null),q(n,d),Ft(T,n,null),q(n,h),U&&U.m(n,null),q(n,m),Ft(B,n,null),q(n,v),Ft(H,n,null),q(n,$),Ft(K,n,null),q(n,y),Ft(V,n,null),q(n,b),q(n,w),tt[_].m(w,null),q(n,k),Ft(et,n,null),q(n,E),Ft(rt,n,null),q(n,O),Ft(ot,n,null),t[19](n),R=!0,p&&C(),C=Z(n,"submit",J(t[10]))},p:function(t,r){var o=p(r,1)[0];t[0].connection_id?S?S.p(t,o):((S=sr(t)).c(),S.m(n,e)):S&&(S.d(1),S=null);var i={};1048576&o&&(i.$$scope={dirty:o,ctx:t}),N.$set(i);var a={};1048576&o&&(a.$$scope={dirty:o,ctx:t}),D.$set(a);var c=s;(s=j(t))===c?M[s].p(t,o):(At(),Ut(M[c],1,1,(function(){M[c]=null})),Lt(),(f=M[s])||(f=M[s]=P[s](t)).c(),Tt(f,1),f.m(n,d));var u={};1048576&o&&(u.$$scope={dirty:o,ctx:t}),!l&&8&o&&(l=!0,u.checked=t[3],Ot((function(){return l=!1}))),T.$set(u),t[3]?U?(U.p(t,o),Tt(U,1)):((U=yr(t)).c(),Tt(U,1),U.m(n,m)):U&&(At(),Ut(U,1,1,(function(){U=null})),Lt());var h={};1048576&o&&(h.$$scope={dirty:o,ctx:t}),!g&&4&o&&(g=!0,h.checked=t[2],Ot((function(){return g=!1}))),B.$set(h);var v={};4&o&&(v.hidden=!t[2]),1048576&o&&(v.$$scope={dirty:o,ctx:t}),H.$set(v);var $={};4&o&&($.hidden=!t[2]),1048576&o&&($.$$scope={dirty:o,ctx:t}),K.$set($);var y={};4&o&&(y.hidden=!t[2]),1048576&o&&(y.$$scope={dirty:o,ctx:t}),V.$set(y);var b=_;(_=nt(t))===b?tt[_].p(t,o):(At(),Ut(tt[b],1,1,(function(){tt[b]=null})),Lt(),(x=tt[_])||(x=tt[_]=Q[_](t)).c(),Tt(x,1),x.m(w,null))},i:function(t){R||(Tt(N.$$.fragment,t),Tt(D.$$.fragment,t),Tt(f),Tt(T.$$.fragment,t),Tt(U),Tt(B.$$.fragment,t),Tt(H.$$.fragment,t),Tt(K.$$.fragment,t),Tt(V.$$.fragment,t),Tt(x),Tt(et.$$.fragment,t),Tt(rt.$$.fragment,t),Tt(ot.$$.fragment,t),R=!0)},o:function(t){Ut(N.$$.fragment,t),Ut(D.$$.fragment,t),Ut(f),Ut(T.$$.fragment,t),Ut(U),Ut(B.$$.fragment,t),Ut(H.$$.fragment,t),Ut(K.$$.fragment,t),Ut(V.$$.fragment,t),Ut(x),Ut(et.$$.fragment,t),Ut(rt.$$.fragment,t),Ut(ot.$$.fragment,t),R=!1},d:function(e){e&&G(n),S&&S.d(),Gt(N),Gt(D),M[s].d(),Gt(T),U&&U.d(),Gt(B),Gt(H),Gt(K),Gt(V),tt[_].d(),Gt(et),Gt(rt),Gt(ot),t[19](null),C()}}}function Dr(t,n,e){var r=n.dialog,o=void 0===r?{}:r,i=mt("user"),a=i.api.operation("createConnection"),c=i.api.operation("removeConnection"),u=i.api.operation("updateConnection");[a,u].forEach((function(t){t.on("start",(function(t){t.body.on_connect_commands=t.body.on_connect_commands.split("\n").map((function(t){return t.trim()}))}))}));var s,f={},d=!1,l=!1,p=!1,h=!1;function m(){if(process.env.forced_connection&&e(1,s.server.value=process.env.default_connection,s),e(1,s.nick.value=i.email.replace(/@.*/,"").replace(/\W/g,"_"),s),e(3,l=!0),e(5,h=!0),!xe.query.uri)return xe.urlToForm(s);var t=new Fn(xe.query.uri),n=t.searchParams;t.host&&e(1,s.server.value=t.host,s),t.password&&e(1,s.password.value=t.password,s),t.username&&e(1,s.username.value=t.username,s),n.get("nick")&&e(1,s.nick.value=n.get("nick"),s),t.pathname&&s.dialog&&e(1,s.dialog.value=decodeURIComponent(t.pathname.split("/").filter((function(t){return t.length}))[0]||""),s),Number(n.get("tls")||0)&&e(3,l=!0),Number(n.get("tls_verify")||0)&&e(4,p=!0)}function g(){f.url&&(e(1,s.server.value=f.url.host,s),e(1,s.nick.value=f.url.searchParams.get("nick")||"",s),e(1,s.on_connect_commands.value=f.on_connect_commands.join("\n"),s),e(1,s.password.value=f.url.password,s),e(1,s.username.value=f.url.username,s),e(1,s.url.value=f.url.toString(),s),e(3,l="1"==f.url.searchParams.get("tls")),e(4,p="1"==f.url.searchParams.get("tls_verify")),e(5,h="connected"==f.wanted_state))}function v(){return(v=Zt(Yt.mark((function t(n){return Yt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.perform(f);case 2:i.removeDialog(f),xe.go("/settings/connection");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function $(){return($=Zt(Yt.mark((function t(n){var r;return Yt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.server.value){t.next=2;break}return t.abrupt("return");case 2:if(e(1,s.url.value=new Fn("irc://localhost:6667").fromForm(n.target).toString(),s),!f.connection_id){t.next=10;break}return t.next=6,u.perform(n.target);case 6:e(0,f=i.ensureDialog(u.res.body)),g(),t.next=14;break;case 10:return t.next=12,a.perform(n.target);case 12:r=i.ensureDialog(a.res.body),xe.go(r.path);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return ht(Zt(Yt.mark((function t(){return Yt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s){t.next=2;break}return t.abrupt("return");case 2:return e(0,f=i.findDialog({connection_id:o.connection_id})||{}),t.abrupt("return",f.url?g():m());case 4:case"end":return t.stop()}}),t)})))),t.$set=function(t){"dialog"in t&&e(11,o=t.dialog)},t.$$.update=function(){34&t.$$.dirty&&s&&e(1,s.wanted_state.value=h?"connected":"disconnected",s)},[f,s,d,l,p,h,a,c,u,function(t){return v.apply(this,arguments)},function(t){return $.apply(this,arguments)},o,i,m,g,function(t){e(5,h=t)},function(t){e(3,l=t)},function(t){e(4,p=t)},function(t){e(2,d=t)},function(t){$t[t?"unshift":"push"]((function(){e(1,s=t)}))}]}var Pr=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(ur()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,Dr,Nr,P,{dialog:11}),r}return u}(Vt);function Mr(t){var n=t-1;return n*n*n+1}function jr(t,n){var e=n.delay,r=void 0===e?0:e,o=n.duration,i=void 0===o?400:o,a=n.easing,c=void 0===a?R:a,u=+getComputedStyle(t).opacity;return{delay:r,duration:i,easing:c,css:function(t){return"opacity: ".concat(t*u)}}}function Ar(t,n){var e=n.delay,r=void 0===e?0:e,o=n.duration,i=void 0===o?400:o,a=n.easing,c=void 0===a?Mr:a,u=n.x,s=void 0===u?0:u,f=n.y,d=void 0===f?0:f,l=n.opacity,p=void 0===l?0:l,h=getComputedStyle(t),m=+h.opacity,g="none"===h.transform?"":h.transform,v=m*(1-p);return{delay:r,duration:i,easing:c,css:function(t,n){return"\n\t\t\ttransform: ".concat(g," translate(").concat((1-t)*s,"px, ").concat((1-t)*d,"px);\n\t\t\topacity: ").concat(m-v*n)}}}function Lr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Tr(t){var n,e,r=Le("Currently connecting to %1.",t[3])+"";return{c:function(){n=W("p"),e=V(r)},m:function(t,r){F(t,n,r),q(n,e)},p:function(t,n){8&n&&r!==(r=Le("Currently connecting to %1.",t[3])+"")&&nt(e,r)},d:function(t){t&&G(n)}}}function Ur(t){var n,e,r=Le("Currently connected to %1.",t[3])+"";return{c:function(){n=W("p"),e=V(r)},m:function(t,r){F(t,n,r),q(n,e)},p:function(t,n){8&n&&r!==(r=Le("Currently connected to %1.",t[3])+"")&&nt(e,r)},d:function(t){t&&G(n)}}}function Ir(t){var n,e,r=Le("Currently disconnected from %1.",t[3])+"";return{c:function(){n=W("p"),e=V(r)},m:function(t,r){F(t,n,r),q(n,e)},p:function(t,n){8&n&&r!==(r=Le("Currently disconnected from %1.",t[3])+"")&&nt(e,r)},d:function(t){t&&G(n)}}}function zr(t){var n;return{c:function(){(n=W("p")).textContent="".concat(Le("Connection not found."))},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function Br(t){var n,e,r,o,i,a=new We({props:{dialog:t[0]}});function c(t,n){return t[2].url?"disconnected"==t[2].state?Ir:"connected"==t[2].state?Ur:Tr:zr}var u=c(t),s=u(t),f=new Pr({props:{dialog:t[0]}});return{c:function(){n=W("div"),qt(a.$$.fragment),e=Y(),s.c(),r=Y(),qt(f.$$.fragment),X(n,"class","sidebar-left")},m:function(t,o){F(t,n,o),Ft(a,n,null),q(n,e),s.m(n,null),q(n,r),Ft(f,n,null),i=!0},p:function(t,e){var o=p(e,1)[0],i={};1&o&&(i.dialog=t[0]),a.$set(i),u===(u=c(t))&&s?s.p(t,o):(s.d(1),(s=u(t))&&(s.c(),s.m(n,r)));var d={};1&o&&(d.dialog=t[0]),f.$set(d)},i:function(e){i||(Tt(a.$$.fragment,e),Tt(f.$$.fragment,e),Et((function(){o||(o=zt(n,Ar,t[1],!0)),o.run(1)})),i=!0)},o:function(e){Ut(a.$$.fragment,e),Ut(f.$$.fragment,e),o||(o=zt(n,Ar,t[1],!1)),o.run(0),i=!1},d:function(t){t&&G(n),Gt(a),s.d(),Gt(f),t&&o&&o.end()}}}function Hr(t,n,e){var r,o=n.dialog,i=void 0===o?{}:o,a=n.transition,c=mt("user"),u={};return ht(Zt(Yt.mark((function t(){return Yt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(2,u=c.findDialog({connection_id:i.connection_id})||{});case 1:case"end":return t.stop()}}),t)})))),t.$set=function(t){"dialog"in t&&e(0,i=t.dialog),"transition"in t&&e(1,a=t.transition)},t.$$.update=function(){4&t.$$.dirty&&e(3,r=u.real_host||u.url&&u.url.host)},[i,a,u,r]}var qr=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(Lr()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,Hr,Br,P,{dialog:0,transition:1}),r}return u}(Vt);function Fr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Gr(t){var n,e,r=t[10].default,o=A(r,t,t[9],null);return{c:function(){n=W("a"),o&&o.c(),X(n,"href",t[3]),X(n,"class",t[0]),X(n,"style",t[1]),ot(n,"has-path",t[4])},m:function(r,i){F(r,n,i),o&&o.m(n,null),t[11](n),e=!0},p:function(t,i){var a=p(i,1)[0];o&&o.p&&512&a&&o.p(L(r,t,t[9],null),T(r,t[9],a,null)),(!e||8&a)&&X(n,"href",t[3]),(!e||1&a)&&X(n,"class",t[0]),(!e||2&a)&&X(n,"style",t[1]),17&a&&ot(n,"has-path",t[4])},i:function(t){e||(Tt(o,t),e=!0)},o:function(t){Ut(o,t),e=!1},d:function(e){e&&G(n),o&&o.d(e),t[11](null)}}}function Kr(t,n,e){var r;j(t,xe,(function(t){return e(7,r=t)}));var o,i,a,c=n.class,u=void 0===c?"":c,s=n.href,f=void 0===s?"/":s,d=n.style,l=void 0===d?"":d,p=n.$$slots,h=void 0===p?{}:p,m=n.$$scope;return t.$set=function(t){"class"in t&&e(0,u=t.class),"href"in t&&e(5,f=t.href),"style"in t&&e(1,l=t.style),"$$scope"in t&&e(9,m=t.$$scope)},t.$$.update=function(){160&t.$$.dirty&&e(3,i="/"==f.slice(0,1)?r.basePath+f:f),136&t.$$.dirty&&e(4,a=r.canonicalPath.replace(/(#|\?).*/,"")==i.replace(/(#|\?).*/,""))},[u,l,o,i,a,f,function(){return o.focus()},r,[],m,h,function(t){$t[t?"unshift":"push"]((function(){e(2,o=t)}))}]}var Wr=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(Fr()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,Kr,Gr,P,{class:0,href:5,style:1,focus:6}),r}return E(u,[{key:"focus",get:function(){return this.$$.ctx[6]}}]),u}(Vt);function Vr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Yr(t,n,e){var r=t.slice();return r[15]=n[e],r}function Qr(t){var n,e=Le("You are not a channel operator in %1.",t[0].name)+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:function(t,r){1&r&&e!==(e=Le("You are not a channel operator in %1.",t[0].name)+"")&&nt(n,e)},d:function(t){t&&G(n)}}}function Zr(t){var n,e=Le("You are channel operator in %1.",t[0].name)+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:function(t,r){1&r&&e!==(e=Le("You are channel operator in %1.",t[0].name)+"")&&nt(n,e)},d:function(t){t&&G(n)}}}function Jr(t){var n,e=Le("Private conversation with %1.",t[0].name)+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:function(t,r){1&r&&e!==(e=Le("Private conversation with %1.",t[0].name)+"")&&nt(n,e)},d:function(t){t&&G(n)}}}function Xr(t){var n,e=Le("Conversation with %1 is frozen. Reason: %2",t[0].name,Le(t[0].frozen))+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:function(t,r){1&r&&e!==(e=Le("Conversation with %1 is frozen. Reason: %2",t[0].name,Le(t[0].frozen))+"")&&nt(n,e)},d:function(t){t&&G(n)}}}function to(t){var n,e,r,o,i,a,c,u,s,f,d,l,p,h=t[0].hasOwnProperty("wantNotifications"),m=[eo,no],g=[];function v(t,n){return t[6]?0:1}function $(n){t[12].call(null,n)}c=v(t),u=g[c]=m[c](t);var y={type:"password",name:"password",readonly:!t[0].is("locked")&&!t[6],$$slots:{label:[oo]},$$scope:{ctx:t}};void 0!==t[2]&&(y.value=t[2]);var b=new cr({props:y});$t.push((function(){return Ht(b,"value",$)}));var w=h&&io(t);return{c:function(){n=W("input"),r=Y(),o=W("input"),a=Y(),u.c(),s=Y(),qt(b.$$.fragment),d=Y(),w&&w.c(),l=Q(),X(n,"type","hidden"),X(n,"name","connection_id"),n.value=e=t[0].connection_id,X(o,"type","hidden"),X(o,"name","dialog_id"),o.value=i=t[0].dialog_id},m:function(t,e){F(t,n,e),F(t,r,e),F(t,o,e),F(t,a,e),g[c].m(t,e),F(t,s,e),Ft(b,t,e),F(t,d,e),w&&w.m(t,e),F(t,l,e),p=!0},p:function(t,r){(!p||1&r&&e!==(e=t[0].connection_id))&&(n.value=e),(!p||1&r&&i!==(i=t[0].dialog_id))&&(o.value=i);var a=c;(c=v(t))===a?g[c].p(t,r):(At(),Ut(g[a],1,1,(function(){g[a]=null})),Lt(),(u=g[c])||(u=g[c]=m[c](t)).c(),Tt(u,1),u.m(s.parentNode,s));var d={};65&r&&(d.readonly=!t[0].is("locked")&&!t[6]),262144&r&&(d.$$scope={dirty:r,ctx:t}),!f&&4&r&&(f=!0,d.value=t[2],Ot((function(){return f=!1}))),b.$set(d),1&r&&(h=t[0].hasOwnProperty("wantNotifications")),h?w?(w.p(t,r),Tt(w,1)):((w=io(t)).c(),Tt(w,1),w.m(l.parentNode,l)):w&&(At(),Ut(w,1,1,(function(){w=null})),Lt())},i:function(t){p||(Tt(u),Tt(b.$$.fragment,t),Tt(w),p=!0)},o:function(t){Ut(u),Ut(b.$$.fragment,t),Ut(w),p=!1},d:function(t){t&&G(n),t&&G(r),t&&G(o),t&&G(a),g[c].d(t),t&&G(s),Gt(b,t),t&&G(d),w&&w.d(t),t&&G(l)}}}function no(t){var n,e,r,o,i=Te(t[3]||"No topic is set.")+"";return{c:function(){n=W("div"),(e=W("label")).textContent="".concat(Le("Topic")),r=Y(),X(o=W("div"),"class","input"),X(n,"class","text-field")},m:function(t,a){F(t,n,a),q(n,e),q(n,r),q(n,o),o.innerHTML=i},p:function(t,n){8&n&&i!==(i=Te(t[3]||"No topic is set.")+"")&&(o.innerHTML=i)},i:O,o:O,d:function(t){t&&G(n)}}}function eo(t){var n,e;function r(n){t[11].call(null,n)}var o={name:"topic",placeholder:Le("No topic is set."),$$slots:{label:[ro]},$$scope:{ctx:t}};void 0!==t[3]&&(o.value=t[3]);var i=new Xe({props:o});return $t.push((function(){return Ht(i,"value",r)})),{c:function(){qt(i.$$.fragment)},m:function(t,n){Ft(i,t,n),e=!0},p:function(t,e){var r={};262144&e&&(r.$$scope={dirty:e,ctx:t}),!n&&8&e&&(n=!0,r.value=t[3],Ot((function(){return n=!1}))),i.$set(r)},i:function(t){e||(Tt(i.$$.fragment,t),e=!0)},o:function(t){Ut(i.$$.fragment,t),e=!1},d:function(t){Gt(i,t)}}}function ro(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Topic")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function oo(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Password")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function io(t){var n,e;function r(n){t[13].call(null,n)}var o={$$slots:{label:[ao]},$$scope:{ctx:t}};void 0!==t[5]&&(o.checked=t[5]);var i=new qn({props:o});return $t.push((function(){return Ht(i,"checked",r)})),{c:function(){qt(i.$$.fragment)},m:function(t,n){Ft(i,t,n),e=!0},p:function(t,e){var r={};262144&e&&(r.$$scope={dirty:e,ctx:t}),!n&&32&e&&(n=!0,r.checked=t[5],Ot((function(){return n=!1}))),i.$set(r)},i:function(t){e||(Tt(i.$$.fragment,t),e=!0)},o:function(t){Ut(i.$$.fragment,t),e=!1},d:function(t){Gt(i,t)}}}function ao(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Send me notifications")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function co(t){var n,e=new Tn({props:{icon:"save",$$slots:{default:[uo]},$$scope:{ctx:t}}});return{c:function(){qt(e.$$.fragment)},m:function(t,r){Ft(e,t,r),n=!0},p:function(t,n){var r={};262144&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Tt(e.$$.fragment,t),n=!0)},o:function(t){Ut(e.$$.fragment,t),n=!1},d:function(t){Gt(e,t)}}}function uo(t){var n,e=Le("Update")+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function so(t){var n,e=Le("Leave")+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function fo(t){for(var n,e,r,o,i,a=Le("Participants (%1)",t[0].participants().length)+"",c=t[0].participants(),u=[],s=0;s<c.length;s+=1)u[s]=po(Yr(t,c,s));var f=function(t){return Ut(u[t],1,1,(function(){u[t]=null}))};return{c:function(){n=W("nav"),e=W("h3"),r=V(a),o=Y();for(var t=0;t<u.length;t+=1)u[t].c();X(n,"class","sidebar-left__nav")},m:function(t,a){F(t,n,a),q(n,e),q(e,r),q(n,o);for(var c=0;c<u.length;c+=1)u[c].m(n,null);i=!0},p:function(t,e){if((!i||1&e)&&a!==(a=Le("Participants (%1)",t[0].participants().length)+"")&&nt(r,a),1&e){var o;for(c=t[0].participants(),o=0;o<c.length;o+=1){var s=Yr(t,c,o);u[o]?(u[o].p(s,e),Tt(u[o],1)):(u[o]=po(s),u[o].c(),Tt(u[o],1),u[o].m(n,null))}for(At(),o=c.length;o<u.length;o+=1)f(o);Lt()}},i:function(t){if(!i){for(var n=0;n<c.length;n+=1)Tt(u[n]);i=!0}},o:function(t){u=u.filter(Boolean);for(var n=0;n<u.length;n+=1)Ut(u[n]);i=!1},d:function(t){t&&G(n),K(u,t)}}}function lo(t){var n,e,r,o=t[15].nick+"";return{c:function(){n=W("span"),e=V(o),r=Y()},m:function(t,o){F(t,n,o),q(n,e),F(t,r,o)},p:function(t,n){1&n&&o!==(o=t[15].nick+"")&&nt(e,o)},d:function(t){t&&G(n),t&&G(r)}}}function po(t){var n,e=new Wr({props:{href:"/chat/"+t[0].connection_id+"/"+t[15].id,class:"participant "+un(t[15].modes),$$slots:{default:[lo]},$$scope:{ctx:t}}});return{c:function(){qt(e.$$.fragment)},m:function(t,r){Ft(e,t,r),n=!0},p:function(t,n){var r={};1&n&&(r.href="/chat/"+t[0].connection_id+"/"+t[15].id),1&n&&(r.class="participant "+un(t[15].modes)),262145&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Tt(e.$$.fragment,t),n=!0)},o:function(t){Ut(e.$$.fragment,t),n=!1},d:function(t){Gt(e,t)}}}function ho(t){var n,e,r,o,i,a,c,u,s,f,d,l,h,m=!t[0].is("private"),g=!t[0].is("private"),v=new We({props:{dialog:t[0]}});function $(t,n){return t[0].frozen?Xr:((null==o||1&n)&&(o=!!t[0].is("private")),o?Jr:t[6]?Zr:Qr)}var y=$(t,-1),b=y(t),w=m&&to(t),_=g&&co(t),x=new Tn({props:{type:"button",icon:"sign-out-alt",$$slots:{default:[so]},$$scope:{ctx:t}}});x.$on("click",t[7]);var k=!t[0].frozen&&fo(t);return{c:function(){n=W("div"),qt(v.$$.fragment),e=Y(),r=W("p"),b.c(),i=Y(),a=W("form"),w&&w.c(),c=Y(),u=W("div"),_&&_.c(),s=Y(),qt(x.$$.fragment),f=Y(),k&&k.c(),X(u,"class","form-actions"),X(a,"method","post"),X(n,"class","sidebar-left")},m:function(o,d,p){F(o,n,d),Ft(v,n,null),q(n,e),q(n,r),b.m(r,null),q(n,i),q(n,a),w&&w.m(a,null),q(a,c),q(a,u),_&&_.m(u,null),q(u,s),Ft(x,u,null),t[14](a),q(n,f),k&&k.m(n,null),l=!0,p&&h(),h=Z(a,"submit",J(t[8]))},p:function(t,e){var o=p(e,1)[0],i={};1&o&&(i.dialog=t[0]),v.$set(i),y===(y=$(t,o))&&b?b.p(t,o):(b.d(1),(b=y(t))&&(b.c(),b.m(r,null))),1&o&&(m=!t[0].is("private")),m?w?(w.p(t,o),Tt(w,1)):((w=to(t)).c(),Tt(w,1),w.m(a,c)):w&&(At(),Ut(w,1,1,(function(){w=null})),Lt()),1&o&&(g=!t[0].is("private")),g?_?(_.p(t,o),Tt(_,1)):((_=co(t)).c(),Tt(_,1),_.m(u,s)):_&&(At(),Ut(_,1,1,(function(){_=null})),Lt());var f={};262144&o&&(f.$$scope={dirty:o,ctx:t}),x.$set(f),t[0].frozen?k&&(At(),Ut(k,1,1,(function(){k=null})),Lt()):k?(k.p(t,o),Tt(k,1)):((k=fo(t)).c(),Tt(k,1),k.m(n,null))},i:function(e){l||(Tt(v.$$.fragment,e),Tt(w),Tt(_),Tt(x.$$.fragment,e),Tt(k),Et((function(){d||(d=zt(n,Ar,t[1],!0)),d.run(1)})),l=!0)},o:function(e){Ut(v.$$.fragment,e),Ut(w),Ut(_),Ut(x.$$.fragment,e),Ut(k),d||(d=zt(n,Ar,t[1],!1)),d.run(0),l=!1},d:function(e){e&&G(n),Gt(v),b.d(),w&&w.d(),_&&_.d(),Gt(x),t[14](null),k&&k.d(),e&&d&&d.end(),h()}}}function mo(t,n,e){var r,o,i=n.dialog,a=n.transition,c=mt("user"),u="",s=i.topic,f=i.wantNotifications;function d(t){var n=c.findDialog({connection_id:t.connection_id}),e=t.findParticipant(n&&n.nick);return e&&e.modes.operator}return t.$set=function(t){"dialog"in t&&e(0,i=t.dialog),"transition"in t&&e(1,a=t.transition)},t.$$.update=function(){1&t.$$.dirty&&e(6,o=d(i)),33&t.$$.dirty&&i.update({wantNotifications:f}),17&t.$$.dirty&&r&&r.topic&&e(4,r.topic.value=i.topic||"",r)},[i,a,u,s,r,f,o,function(t){c.omnibus.send({message:"/part",dialog:i})},function(t){if(u){var n=o?"/mode +k "+u:"/join "+i.name+" "+u;c.omnibus.send({message:n,dialog:i}),e(2,u="")}o&&s!=i.topic&&c.omnibus.send({message:"/topic "+s,dialog:i})},c,d,function(t){e(3,s=t)},function(t){e(2,u=t)},function(t){e(5,f=t)},function(t){$t[t?"unshift":"push"]((function(){e(4,r=t)}))}]}var go=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(Vr()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,mo,ho,P,{dialog:0,transition:1}),r}return u}(Vt);function vo(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function $o(t){var n,e,r,o,i=("loading"==t[0]?"":Le("Convos"))+"",a=Le("for %1",process.env.organization_name)+"";return{c:function(){n=W("small"),e=V(i),r=Y(),o=V(a),X(n,"class","subtitle")},m:function(t,i){F(t,n,i),q(n,e),q(n,r),q(n,o)},p:function(t,n){1&n&&i!==(i=("loading"==t[0]?"":Le("Convos"))+"")&&nt(e,i)},d:function(t){t&&G(n)}}}function yo(t){var n,e,r,o,i=("loading"==t[0]?"":Le("Convos"))+"",a=Te("for [%1](%2)",process.env.organization_name,process.env.organization_url)+"";return{c:function(){n=W("small"),e=V(i),r=Y(),o=new at(a,null),X(n,"class","subtitle")},m:function(t,i){F(t,n,i),q(n,e),q(n,r),o.m(n)},p:function(t,n){1&n&&i!==(i=("loading"==t[0]?"":Le("Convos"))+"")&&nt(e,i)},d:function(t){t&&G(n)}}}function bo(t){var n,e,r,o,i,a,c,u,s=Te("Yikes! we are so sorry for the inconvenience. Please submit an [issue](%1), if the problem does not go away.","https://github.com/nordaaker/convos/issues")+"",f=Le("Go to start page")+"",d=new Nn({props:{name:"play"}});return{c:function(){n=W("p"),e=Y(),r=W("p"),o=W("a"),qt(d.$$.fragment),i=Y(),a=V(f),X(o,"href",c=t[1].baseUrl),X(o,"target","_self"),X(o,"class","btn")},m:function(t,c){F(t,n,c),n.innerHTML=s,F(t,e,c),F(t,r,c),q(r,o),Ft(d,o,null),q(o,i),q(o,a),u=!0},p:function(t,n){(!u||2&n&&c!==(c=t[1].baseUrl))&&X(o,"href",c)},i:function(t){u||(Tt(d.$$.fragment,t),u=!0)},o:function(t){Ut(d.$$.fragment,t),u=!1},d:function(t){t&&G(n),t&&G(e),t&&G(r),Gt(d)}}}function wo(t){var n,e,r,o,i,a,c,u,s,f,d,l=Le("Unable to connect to Convos. Please try again later or check your network connection.")+"",p=Le("Retry")+"",h=new Nn({props:{name:"sync-alt"}});return{c:function(){n=W("p"),e=W("i"),r=Y(),o=V(l),i=Y(),a=W("p"),c=W("a"),qt(h.$$.fragment),u=Y(),s=V(p),X(e,"class","fas fa-exclamation-triangle"),X(c,"href",f=t[1].canonicalPath),X(c,"target","_self"),X(c,"class","btn")},m:function(t,f){F(t,n,f),q(n,e),q(n,r),q(n,o),F(t,i,f),F(t,a,f),q(a,c),Ft(h,c,null),q(c,u),q(c,s),d=!0},p:function(t,n){(!d||2&n&&f!==(f=t[1].canonicalPath))&&X(c,"href",f)},i:function(t){d||(Tt(h.$$.fragment,t),d=!0)},o:function(t){Ut(h.$$.fragment,t),d=!1},d:function(t){t&&G(n),t&&G(i),t&&G(a),Gt(h)}}}function _o(t){var n,e,r,o,i,a,c,u,s=Le("Go to start page")+"",f=new Nn({props:{name:"play"}});return{c:function(){(n=W("p")).textContent="".concat(Le("The Convos Team have been searching and searching, but the requested page could not be found.")),e=Y(),r=W("p"),o=W("a"),qt(f.$$.fragment),i=Y(),a=V(s),X(o,"href",c=t[1].baseUrl),X(o,"target","_self"),X(o,"class","btn")},m:function(t,c){F(t,n,c),F(t,e,c),F(t,r,c),q(r,o),Ft(f,o,null),q(o,i),q(o,a),u=!0},p:function(t,n){(!u||2&n&&c!==(c=t[1].baseUrl))&&X(o,"href",c)},i:function(t){u||(Tt(f.$$.fragment,t),u=!0)},o:function(t){Ut(f.$$.fragment,t),u=!1},d:function(t){t&&G(n),t&&G(e),t&&G(r),Gt(f)}}}function xo(t){var n,e,r,o,i,a,c,u,s,f,d,l,p,h,m,g,v,$,y,b,w=Le("Downloading Convos...")+"",_=Le("Starting Convos...")+"",x=Le("Loading user data...")+"",k=Le("Contact admin")+"";return{c:function(){(n=W("p")).textContent="".concat(Le("Convos is the simplest way to use IRC, and it keeps you always online.")),e=Y(),r=W("p"),o=W("i"),i=Y(),a=V(w),c=Y(),u=W("p"),s=W("i"),f=Y(),d=V(_),l=Y(),p=W("p"),h=W("i"),m=Y(),g=V(x),v=Y(),$=W("p"),y=W("a"),b=V(k),X(o,"class","fas fa-download"),X(s,"class","fas fa-rocket"),X(h,"class","fas fa-spinner fa-spin"),X(y,"class","btn"),X(y,"href",process.env.contact)},m:function(t,w){F(t,n,w),F(t,e,w),F(t,r,w),q(r,o),q(r,i),q(r,a),F(t,c,w),F(t,u,w),q(u,s),q(u,f),q(u,d),F(t,l,w),F(t,p,w),q(p,h),q(p,m),q(p,g),F(t,v,w),F(t,$,w),q($,y),q(y,b)},p:O,i:O,o:O,d:function(t){t&&G(n),t&&G(e),t&&G(r),t&&G(c),t&&G(u),t&&G(l),t&&G(p),t&&G(v),t&&G($)}}}function ko(t){var n,e,r,o,i,a,c,u,s,f,d,l,h,m,g,v,$,y,b,w,_,x=Le("loading"==t[0]?"Convos":t[2][t[0]])+"",k="Convos"!=process.env.organization_name&&function(t){var n,e=("https://convos.by"!=process.env.organization_url?yo:$o)(t);return{c:function(){e.c(),n=Q()},m:function(t,r){e.m(t,r),F(t,n,r)},p:function(t,n){e.p(t,n)},d:function(t){e.d(t),t&&G(n)}}}(t),E=[xo,_o,wo,bo],O=[];function R(t,n){return"loading"==t[0]?0:"not_found"==t[0]?1:"offline"==t[0]?2:3}return f=R(t),d=O[f]=E[f](t),{c:function(){n=W("main"),e=W("article"),r=W("h1"),o=W("a"),i=W("span"),a=V(x),u=Y(),k&&k.c(),s=Y(),d.c(),l=Y(),h=W("footer"),(m=W("a")).textContent="Convos",g=V("\n    —\n    "),(v=W("a")).textContent="".concat(Le("Blog")),$=V("\n    —\n    "),(y=W("a")).textContent="".concat(Le("Documentation")),b=V("\n    —\n    "),(w=W("a")).textContent="".concat(Le("GitHub")),X(o,"href",c=t[1].baseUrl),X(e,"class","welcome-screen_fallback"),X(m,"href","https://convos.by/"),X(m,"target","_blank"),X(v,"href","https://convos.by/blog"),X(v,"target","_blank"),X(y,"href","https://convos.by/doc"),X(y,"target","_blank"),X(w,"href","https://github.com/Nordaaker/convos"),X(w,"target","_blank"),X(h,"class","welcome-screen__footer"),X(n,"class","welcome-screen")},m:function(t,c){F(t,n,c),q(n,e),q(e,r),q(r,o),q(o,i),q(i,a),q(r,u),k&&k.m(r,null),q(e,s),O[f].m(e,null),q(n,l),q(n,h),q(h,m),q(h,g),q(h,v),q(h,$),q(h,y),q(h,b),q(h,w),_=!0},p:function(t,n){var r=p(n,1)[0];(!_||1&r)&&x!==(x=Le("loading"==t[0]?"Convos":t[2][t[0]])+"")&&nt(a,x),(!_||2&r&&c!==(c=t[1].baseUrl))&&X(o,"href",c),"Convos"!=process.env.organization_name&&k.p(t,r);var i=f;(f=R(t))===i?O[f].p(t,r):(At(),Ut(O[i],1,1,(function(){O[i]=null})),Lt(),(d=O[f])||(d=O[f]=E[f](t)).c(),Tt(d,1),d.m(e,null))},i:function(t){_||(Tt(d),_=!0)},o:function(t){Ut(d),_=!1},d:function(t){t&&G(n),k&&k.d(),O[f].d()}}}function Eo(t,n,e){var r;j(t,xe,(function(t){return e(1,r=t)}));var o,i=n.status,a=void 0===i?xe.pathParts.slice(0).pop()||"not_found":i,c=(mt("user"),process.env.load_user,{loading:"Loading",not_found:"Not Found",offline:"Oops! You appear to be offline",unknown:"Unknown error!"});return xe.update({title:Le(c[o])}),t.$set=function(t){"status"in t&&e(3,a=t.status)},t.$$.update=function(){8&t.$$.dirty&&e(0,o=c[a]?a:"unknown")},[o,r,c,a]}var Oo=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(vo()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,Eo,ko,P,{status:3}),r}return u}(Vt),Ro=e((function(t,n){var e,o;e=function(t){var n=[],e=Object.keys,o={},i={},a=!0,c=/^(no-?highlight|plain|text)$/i,u=/\blang(?:uage)?-([\w-]+)\b/i,s=/((^(<[^>]+>|\t|)+|(?:\n)))/gm,f="Could not find the language '{}', did you forget to load/include a language module?",d={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},l="of and for in not or if then".split(" ");function p(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function h(t){return t.nodeName.toLowerCase()}function m(t){return c.test(t)}function g(t){var n,e={},r=Array.prototype.slice.call(arguments,1);for(n in t)e[n]=t[n];return r.forEach((function(t){for(n in t)e[n]=t[n]})),e}function v(t){var n=[];return function t(e,r){for(var o=e.firstChild;o;o=o.nextSibling)3===o.nodeType?r+=o.nodeValue.length:1===o.nodeType&&(n.push({event:"start",offset:r,node:o}),r=t(o,r),h(o).match(/br|hr|img|input/)||n.push({event:"stop",offset:r,node:o}));return r}(t,0),n}function $(t){return t.variants&&!t.cached_variants&&(t.cached_variants=t.variants.map((function(n){return g(t,{variants:null},n)}))),t.cached_variants?t.cached_variants:function t(n){return!!n&&(n.endsWithParent||t(n.starts))}(t)?[g(t,{starts:t.starts?g(t.starts):null})]:Object.isFrozen(t)?[g(t)]:[t]}function y(t,n){return n?Number(n):(e=t,-1!=l.indexOf(e.toLowerCase())?0:1);var e}function b(t){function n(t){return t&&t.source||t}function r(e,r){return new RegExp(n(e),"m"+(t.case_insensitive?"i":"")+(r?"g":""))}function o(t){var e,o,i={},a=[],c={},u=1;function s(t,n){i[u]=t,a.push([t,n]),u+=function(t){return new RegExp(t.toString()+"|").exec("").length-1}(n)+1}for(var f=0;f<t.contains.length;f++)s(o=t.contains[f],o.beginKeywords?"\\.?(?:"+o.begin+")\\.?":o.begin);t.terminator_end&&s("end",t.terminator_end),t.illegal&&s("illegal",t.illegal);var d=a.map((function(t){return t[1]}));return e=r(function(t,e){for(var r=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./,o=0,i="",a=0;a<t.length;a++){var c=o+=1,u=n(t[a]);for(a>0&&(i+=e),i+="(";u.length>0;){var s=r.exec(u);if(null==s){i+=u;break}i+=u.substring(0,s.index),u=u.substring(s.index+s[0].length),"\\"==s[0][0]&&s[1]?i+="\\"+String(Number(s[1])+c):(i+=s[0],"("==s[0]&&o++)}i+=")"}return i}(d,"|"),!0),c.lastIndex=0,c.exec=function(n){var r;if(0===a.length)return null;e.lastIndex=c.lastIndex;var o=e.exec(n);if(!o)return null;for(var u=0;u<o.length;u++)if(null!=o[u]&&null!=i[""+u]){r=i[""+u];break}return"string"==typeof r?(o.type=r,o.extra=[t.illegal,t.terminator_end]):(o.type="begin",o.rule=r),o},c}if(t.contains&&-1!=t.contains.indexOf("self")){if(!a)throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");t.contains=t.contains.filter((function(t){return"self"!=t}))}!function i(a,c){a.compiled||(a.compiled=!0,a.keywords=a.keywords||a.beginKeywords,a.keywords&&(a.keywords=function(t,n){var r={};return"string"==typeof t?o("keyword",t):e(t).forEach((function(n){o(n,t[n])})),r;function o(t,e){n&&(e=e.toLowerCase()),e.split(" ").forEach((function(n){var e=n.split("|");r[e[0]]=[t,y(e[0],e[1])]}))}}(a.keywords,t.case_insensitive)),a.lexemesRe=r(a.lexemes||/\w+/,!0),c&&(a.beginKeywords&&(a.begin="\\b("+a.beginKeywords.split(" ").join("|")+")\\b"),a.begin||(a.begin=/\B|\b/),a.beginRe=r(a.begin),a.endSameAsBegin&&(a.end=a.begin),a.end||a.endsWithParent||(a.end=/\B|\b/),a.end&&(a.endRe=r(a.end)),a.terminator_end=n(a.end)||"",a.endsWithParent&&c.terminator_end&&(a.terminator_end+=(a.end?"|":"")+c.terminator_end)),a.illegal&&(a.illegalRe=r(a.illegal)),null==a.relevance&&(a.relevance=1),a.contains||(a.contains=[]),a.contains=Array.prototype.concat.apply([],a.contains.map((function(t){return $("self"===t?a:t)}))),a.contains.forEach((function(t){i(t,a)})),a.starts&&i(a.starts,c),a.terminators=o(a))}(t)}function w(t,n,e,r){var i=n;function c(t,n){var e=$.case_insensitive?n[0].toLowerCase():n[0];return t.keywords.hasOwnProperty(e)&&t.keywords[e]}function u(t,n,e,r){if(!e&&""===n)return"";if(!t)return n;var o='<span class="'+(r?"":d.classPrefix);return(o+=t+'">')+n+(e?"":"</span>")}function s(){E+=null!=x.subLanguage?function(){var t="string"==typeof x.subLanguage;if(t&&!o[x.subLanguage])return p(O);var n=t?w(x.subLanguage,O,!0,k[x.subLanguage]):_(O,x.subLanguage.length?x.subLanguage:void 0);return x.relevance>0&&(C+=n.relevance),t&&(k[x.subLanguage]=n.top),u(n.language,n.value,!1,!0)}():function(){var t,n,e,r;if(!x.keywords)return p(O);for(r="",n=0,x.lexemesRe.lastIndex=0,e=x.lexemesRe.exec(O);e;)r+=p(O.substring(n,e.index)),(t=c(x,e))?(C+=t[1],r+=u(t[0],p(e[0]))):r+=p(e[0]),n=x.lexemesRe.lastIndex,e=x.lexemesRe.exec(O);return r+p(O.substr(n))}(),O=""}function l(t){E+=t.className?u(t.className,"",!0):"",x=Object.create(t,{parent:{value:x}})}function h(t){var n=t[0],e=t.rule;return e&&e.endSameAsBegin&&(e.endRe=new RegExp(n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")),e.skip?O+=n:(e.excludeBegin&&(O+=n),s(),e.returnBegin||e.excludeBegin||(O=n)),l(e),e.returnBegin?0:n.length}function m(t){var n=t[0],e=i.substr(t.index),r=function t(n,e){if(function(t,n){var e=t&&t.exec(n);return e&&0===e.index}(n.endRe,e)){for(;n.endsParent&&n.parent;)n=n.parent;return n}if(n.endsWithParent)return t(n.parent,e)}(x,e);if(r){var o=x;o.skip?O+=n:(o.returnEnd||o.excludeEnd||(O+=n),s(),o.excludeEnd&&(O=n));do{x.className&&(E+="</span>"),x.skip||x.subLanguage||(C+=x.relevance),x=x.parent}while(x!==r.parent);return r.starts&&(r.endSameAsBegin&&(r.starts.endRe=r.endRe),l(r.starts)),o.returnEnd?0:n.length}}var g={};function v(t,n){var r=n&&n[0];if(O+=t,null==r)return s(),0;if("begin"==g.type&&"end"==n.type&&g.index==n.index&&""===r)return O+=i.slice(n.index,n.index+1),1;if(g=n,"begin"===n.type)return h(n);if("illegal"===n.type&&!e)throw new Error('Illegal lexeme "'+r+'" for mode "'+(x.className||"<unnamed>")+'"');if("end"===n.type){var o=m(n);if(null!=o)return o}return O+=r,r.length}var $=R(t);if(!$)throw console.error(f.replace("{}",t)),new Error('Unknown language: "'+t+'"');b($);var y,x=r||$,k={},E="";for(y=x;y!==$;y=y.parent)y.className&&(E=u(y.className,"",!0)+E);var O="",C=0;try{for(var S,N,D=0;x.terminators.lastIndex=D,S=x.terminators.exec(i);)N=v(i.substring(D,S.index),S),D=S.index+N;for(v(i.substr(D)),y=x;y.parent;y=y.parent)y.className&&(E+="</span>");return{relevance:C,value:E,illegal:!1,language:t,top:x}}catch(n){if(n.message&&-1!==n.message.indexOf("Illegal"))return{illegal:!0,relevance:0,value:p(i)};if(a)return{relevance:0,value:p(i),language:t,top:x,errorRaised:n};throw n}}function _(t,n){n=n||d.languages||e(o);var r={relevance:0,value:p(t)},i=r;return n.filter(R).filter(C).forEach((function(n){var e=w(n,t,!1);e.language=n,e.relevance>i.relevance&&(i=e),e.relevance>r.relevance&&(i=r,r=e)})),i.language&&(r.second_best=i),r}function x(t){return d.tabReplace||d.useBR?t.replace(s,(function(t,n){return d.useBR&&"\n"===t?"<br>":d.tabReplace?n.replace(/\t/g,d.tabReplace):""})):t}function k(t){var e,r,o,a,c,s=function(t){var n,e,r,o,i=t.className+" ";if(i+=t.parentNode?t.parentNode.className:"",e=u.exec(i)){var a=R(e[1]);return a||(console.warn(f.replace("{}",e[1])),console.warn("Falling back to no-highlight mode for this block.",t)),a?e[1]:"no-highlight"}for(n=0,r=(i=i.split(/\s+/)).length;n<r;n++)if(m(o=i[n])||R(o))return o}(t);m(s)||(d.useBR?(e=document.createElement("div")).innerHTML=t.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n"):e=t,c=e.textContent,o=s?w(s,c,!0):_(c),(r=v(e)).length&&((a=document.createElement("div")).innerHTML=o.value,o.value=function(t,e,r){var o=0,i="",a=[];function c(){return t.length&&e.length?t[0].offset!==e[0].offset?t[0].offset<e[0].offset?t:e:"start"===e[0].event?t:e:t.length?t:e}function u(t){i+="<"+h(t)+n.map.call(t.attributes,(function(t){return" "+t.nodeName+'="'+p(t.value).replace(/"/g,"&quot;")+'"'})).join("")+">"}function s(t){i+="</"+h(t)+">"}function f(t){("start"===t.event?u:s)(t.node)}for(;t.length||e.length;){var d=c();if(i+=p(r.substring(o,d[0].offset)),o=d[0].offset,d===t){a.reverse().forEach(s);do{f(d.splice(0,1)[0]),d=c()}while(d===t&&d.length&&d[0].offset===o);a.reverse().forEach(u)}else"start"===d[0].event?a.push(d[0].node):a.pop(),f(d.splice(0,1)[0])}return i+p(r.substr(o))}(r,v(a),c)),o.value=x(o.value),t.innerHTML=o.value,t.className=function(t,n,e){var r=n?i[n]:e,o=[t.trim()];return t.match(/\bhljs\b/)||o.push("hljs"),-1===t.indexOf(r)&&o.push(r),o.join(" ").trim()}(t.className,s,o.language),t.result={language:o.language,re:o.relevance},o.second_best&&(t.second_best={language:o.second_best.language,re:o.second_best.relevance}))}function E(){if(!E.called){E.called=!0;var t=document.querySelectorAll("pre code");n.forEach.call(t,k)}}var O={disableAutodetect:!0};function R(t){return t=(t||"").toLowerCase(),o[t]||o[i[t]]}function C(t){var n=R(t);return n&&!n.disableAutodetect}return t.highlight=w,t.highlightAuto=_,t.fixMarkup=x,t.highlightBlock=k,t.configure=function(t){d=g(d,t)},t.initHighlighting=E,t.initHighlightingOnLoad=function(){window.addEventListener("DOMContentLoaded",E,!1),window.addEventListener("load",E,!1)},t.registerLanguage=function(n,e){var r;try{r=e(t)}catch(t){if(console.error("Language definition for '{}' could not be registered.".replace("{}",n)),!a)throw t;console.error(t),r=O}o[n]=r,r.rawDefinition=e.bind(null,t),r.aliases&&r.aliases.forEach((function(t){i[t]=n}))},t.listLanguages=function(){return e(o)},t.getLanguage=R,t.requireLanguage=function(t){var n=R(t);if(n)return n;throw new Error("The '{}' language is required, but not loaded.".replace("{}",t))},t.autoDetection=C,t.inherit=g,t.debugMode=function(){a=!1},t.IDENT_RE="[a-zA-Z]\\w*",t.UNDERSCORE_IDENT_RE="[a-zA-Z_]\\w*",t.NUMBER_RE="\\b\\d+(\\.\\d+)?",t.C_NUMBER_RE="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",t.BINARY_NUMBER_RE="\\b(0b[01]+)",t.RE_STARTERS_RE="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",t.BACKSLASH_ESCAPE={begin:"\\\\[\\s\\S]",relevance:0},t.APOS_STRING_MODE={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},t.QUOTE_STRING_MODE={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},t.PHRASAL_WORDS_MODE={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},t.COMMENT=function(n,e,r){var o=t.inherit({className:"comment",begin:n,end:e,contains:[]},r||{});return o.contains.push(t.PHRASAL_WORDS_MODE),o.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|XXX):",relevance:0}),o},t.C_LINE_COMMENT_MODE=t.COMMENT("//","$"),t.C_BLOCK_COMMENT_MODE=t.COMMENT("/\\*","\\*/"),t.HASH_COMMENT_MODE=t.COMMENT("#","$"),t.NUMBER_MODE={className:"number",begin:t.NUMBER_RE,relevance:0},t.C_NUMBER_MODE={className:"number",begin:t.C_NUMBER_RE,relevance:0},t.BINARY_NUMBER_MODE={className:"number",begin:t.BINARY_NUMBER_RE,relevance:0},t.CSS_NUMBER_MODE={className:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},t.REGEXP_MODE={className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[t.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[t.BACKSLASH_ESCAPE]}]},t.TITLE_MODE={className:"title",begin:t.IDENT_RE,relevance:0},t.UNDERSCORE_TITLE_MODE={className:"title",begin:t.UNDERSCORE_IDENT_RE,relevance:0},t.METHOD_GUARD={begin:"\\.\\s*"+t.UNDERSCORE_IDENT_RE,relevance:0},[t.BACKSLASH_ESCAPE,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,t.PHRASAL_WORDS_MODE,t.COMMENT,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,t.HASH_COMMENT_MODE,t.NUMBER_MODE,t.C_NUMBER_MODE,t.BINARY_NUMBER_MODE,t.CSS_NUMBER_MODE,t.REGEXP_MODE,t.TITLE_MODE,t.UNDERSCORE_TITLE_MODE,t.METHOD_GUARD].forEach((function(t){!function t(n){Object.freeze(n);var e="function"==typeof n;return Object.getOwnPropertyNames(n).forEach((function(o){!n.hasOwnProperty(o)||null===n[o]||"object"!==r(n[o])&&"function"!=typeof n[o]||e&&("caller"===o||"callee"===o||"arguments"===o)||Object.isFrozen(n[o])||t(n[o])})),n}(t)})),t},o="object"===("undefined"==typeof window?"undefined":r(window))&&window||"object"===("undefined"==typeof self?"undefined":r(self))&&self,n.nodeType?o&&(o.hljs=e({})):e(n)}));function Co(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function So(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Convos"))},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function No(t){var n;return{c:function(){(n=W("small")).textContent="".concat(Le("for %1",process.env.organization_name)),X(n,"class","subtitle")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function Do(t){var n,e=Te("for [%1](%2)",process.env.organization_name,process.env.organization_url)+"";return{c:function(){X(n=W("small"),"class","subtitle")},m:function(t,r){F(t,n,r),n.innerHTML=e},p:O,d:function(t){t&&G(n)}}}function Po(t){var n,e,r,o,i,a,c,u,s,f,d,l,p;function h(n){t[12].call(null,n)}var m={type:"email",name:"email",placeholder:Le("Ex: john@doe.com"),$$slots:{label:[Mo]},$$scope:{ctx:t}};void 0!==t[0].formEmail&&(m.value=t[0].formEmail);var g=new cr({props:m});$t.push((function(){return Ht(g,"value",h)}));var v=new cr({props:{type:"password",name:"password",autocomplete:"current-password",$$slots:{label:[jo]},$$scope:{ctx:t}}}),$=new Tn({props:{icon:"sign-in-alt",op:t[4],$$slots:{default:[Ao]},$$scope:{ctx:t}}}),y=new qe({props:{op:t[4]}});return{c:function(){n=W("section"),e=W("form"),(r=W("h2")).textContent="".concat(Le("Sign in")),o=Y(),qt(g.$$.fragment),a=Y(),qt(v.$$.fragment),c=Y(),u=W("div"),qt($.$$.fragment),s=Y(),(f=W("a")).textContent="".concat(Le("Sign up")),d=Y(),qt(y.$$.fragment),X(f,"class","btn is-hallow"),X(f,"href","#signup"),X(u,"class","form-actions"),X(e,"method","post"),X(n,"id","signin"),X(n,"class","welcome-screen__signin fade-in")},m:function(i,h,m){F(i,n,h),q(n,e),q(e,r),q(e,o),Ft(g,e,null),q(e,a),Ft(v,e,null),q(e,c),q(e,u),Ft($,u,null),q(u,s),q(u,f),q(e,d),Ft(y,e,null),l=!0,m&&N(p),p=[Z(f,"click",ln),Z(e,"submit",J(t[13]))]},p:function(t,n){var e={};131072&n&&(e.$$scope={dirty:n,ctx:t}),!i&&1&n&&(i=!0,e.value=t[0].formEmail,Ot((function(){return i=!1}))),g.$set(e);var r={};131072&n&&(r.$$scope={dirty:n,ctx:t}),v.$set(r);var o={};131072&n&&(o.$$scope={dirty:n,ctx:t}),$.$set(o)},i:function(t){l||(Tt(g.$$.fragment,t),Tt(v.$$.fragment,t),Tt($.$$.fragment,t),Tt(y.$$.fragment,t),l=!0)},o:function(t){Ut(g.$$.fragment,t),Ut(v.$$.fragment,t),Ut($.$$.fragment,t),Ut(y.$$.fragment,t),l=!1},d:function(t){t&&G(n),Gt(g),Gt(v),Gt($),Gt(y),N(p)}}}function Mo(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("E-mail")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function jo(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Password")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function Ao(t){var n,e=Le("Sign in")+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function Lo(t){var n,e,r,o,i,a,c,u,s,f,d,l,p,h,m=Le("Contact admin")+"";return{c:function(){(n=W("h2")).textContent="".concat(Le("Sign up")),e=Y(),(r=W("p")).textContent="".concat(Le("Convos is not open for public registration.")),o=Y(),(i=W("p")).textContent="".concat(Le("Please ask your Convos admin for an invite link to sign up, or sign in if you already have an account.")),a=Y(),c=W("div"),u=W("a"),s=V(m),f=Y(),(d=W("a")).textContent="".concat(Le("Sign in")),l=Y(),(p=W("a")).textContent="".concat(Le("Home")),X(u,"class","btn"),X(u,"href",process.env.contact),X(d,"class","btn is-hallow"),X(d,"href","#signin"),X(p,"class","btn is-hallow"),X(p,"href","#top"),X(c,"class","form-actions")},m:function(t,m,g){F(t,n,m),F(t,e,m),F(t,r,m),F(t,o,m),F(t,i,m),F(t,a,m),F(t,c,m),q(c,u),q(u,s),q(c,f),q(c,d),q(c,l),q(c,p),g&&N(h),h=[Z(i,"click",ln),Z(d,"click",ln),Z(p,"click",ln)]},p:O,i:O,o:O,d:function(t){t&&G(n),t&&G(e),t&&G(r),t&&G(o),t&&G(i),t&&G(a),t&&G(c),N(h)}}}function To(t){var n,e,r,o,i,a,c,u,s,f,d,l,p,h,m,g,v=t[2].isFirst&&Io();function $(n){t[14].call(null,n)}var y={type:"email",name:"email",placeholder:Le("Ex: john@doe.com"),readonly:t[3],$$slots:{default:[Fo],help:[qo],label:[zo]},$$scope:{ctx:t}};void 0!==t[0].formEmail&&(y.value=t[0].formEmail);var b=new cr({props:y});$t.push((function(){return Ht(b,"value",$)}));var w=new cr({props:{type:"password",name:"password",$$slots:{default:[Wo],help:[Ko],label:[Go]},$$scope:{ctx:t}}}),_=new Tn({props:{icon:"save",op:t[5],$$slots:{default:[Vo]},$$scope:{ctx:t}}}),x=!t[3]&&!t[2].isFirst&&Yo(),k=new qe({props:{op:t[5]}});return{c:function(){n=W("form"),(e=W("h2")).textContent="".concat(Le(process.env.existing_user?"Recover account":"Sign up")),r=Y(),v&&v.c(),o=Y(),i=W("input"),a=Y(),c=W("input"),u=Y(),qt(b.$$.fragment),f=Y(),qt(w.$$.fragment),d=Y(),l=W("div"),qt(_.$$.fragment),p=Y(),x&&x.c(),h=Y(),qt(k.$$.fragment),X(i,"type","hidden"),X(i,"name","exp"),X(c,"type","hidden"),X(c,"name","token"),X(l,"class","form-actions"),X(n,"method","post")},m:function(s,$,y){F(s,n,$),q(n,e),q(n,r),v&&v.m(n,null),q(n,o),q(n,i),q(n,a),q(n,c),q(n,u),Ft(b,n,null),q(n,f),Ft(w,n,null),q(n,d),q(n,l),Ft(_,l,null),q(n,p),x&&x.m(n,null),q(n,h),Ft(k,n,null),t[16](n),m=!0,y&&g(),g=Z(n,"submit",J(t[15]))},p:function(t,e){t[2].isFirst?v?v.p(t,e):((v=Io()).c(),v.m(n,o)):v&&(v.d(1),v=null);var r={};131072&e&&(r.$$scope={dirty:e,ctx:t}),!s&&1&e&&(s=!0,r.value=t[0].formEmail,Ot((function(){return s=!1}))),b.$set(r);var i={};131072&e&&(i.$$scope={dirty:e,ctx:t}),w.$set(i);var a={};131072&e&&(a.$$scope={dirty:e,ctx:t}),_.$set(a),t[3]||t[2].isFirst?x&&(x.d(1),x=null):x?x.p(t,e):((x=Yo()).c(),x.m(n,h))},i:function(t){m||(Tt(b.$$.fragment,t),Tt(w.$$.fragment,t),Tt(_.$$.fragment,t),Tt(k.$$.fragment,t),m=!0)},o:function(t){Ut(b.$$.fragment,t),Ut(w.$$.fragment,t),Ut(_.$$.fragment,t),Ut(k.$$.fragment,t),m=!1},d:function(e){e&&G(n),v&&v.d(),Gt(b),Gt(w),Gt(_),x&&x.d(),Gt(k),t[16](null),g()}}}function Uo(t){var n,e,r,o,i,a,c,u,s,f,d,l,p,h,m=Le("Contact admin")+"";return{c:function(){(n=W("h2")).textContent="".concat(Le("Invalid invite/recover URL")),e=Y(),(r=W("p")).textContent="".concat(Le(410==process.env.status?"The link has expired.":"The link is invalid.")),o=Y(),(i=W("p")).textContent="".concat(Le("Please ask your Convos admin for a new link.")),a=Y(),c=W("p"),u=W("a"),s=V(m),f=Y(),(d=W("a")).textContent="".concat(Le("Sign in")),l=Y(),(p=W("a")).textContent="".concat(Le("Home")),X(u,"class","btn"),X(u,"href",process.env.contact),X(d,"class","btn is-hallow"),X(d,"href","#signin"),X(p,"class","btn is-hallow"),X(p,"href","#top")},m:function(t,m,g){F(t,n,m),F(t,e,m),F(t,r,m),F(t,o,m),F(t,i,m),F(t,a,m),F(t,c,m),q(c,u),q(u,s),q(c,f),q(c,d),q(c,l),q(c,p),g&&N(h),h=[Z(d,"click",ln),Z(p,"click",ln)]},p:O,i:O,o:O,d:function(t){t&&G(n),t&&G(e),t&&G(r),t&&G(o),t&&G(i),t&&G(a),t&&G(c),N(h)}}}function Io(t){var n;return{c:function(){(n=W("p")).textContent="".concat(Le('As you are the first user, you do not need any invitation link. Just fill in the form below, hit "Sign up" to start chatting.'))},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function zo(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("E-mail")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function Bo(t){var n,e=Le("Your email will be used if you forget your password.")+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function Ho(t){var n,e=Le("Your email is from the invite link.")+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function qo(t){var n;var e=function(t,n){return t[3]?Ho:Bo}(t)(t);return{c:function(){n=W("p"),e.c(),X(n,"class","help"),X(n,"slot","help")},m:function(t,r){F(t,n,r),e.m(n,null)},p:function(t,n){e.p(t,n)},d:function(t){t&&G(n),e.d()}}}function Fo(t){var n;return{c:function(){n=Y()},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function Go(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Password")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function Ko(t){var n;return{c:function(){(n=W("p")).textContent="".concat(Le("Hint: Use a phrase from a book.")),X(n,"class","help"),X(n,"slot","help")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function Wo(t){var n;return{c:function(){n=Y()},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function Vo(t){var n,e=Le(process.env.existing_user?"Set new password":"Sign up")+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function Yo(t){var n,e,r=Te("Go and [sign in](%1) if you already have an account.","#signin")+"";return{c:function(){n=W("p")},m:function(t,o,i){F(t,n,o),n.innerHTML=r,i&&e(),e=Z(n,"click",ln)},p:O,d:function(t){t&&G(n),e()}}}function Qo(t){var n;return{c:function(){n=V("Convos")},m:function(t,e){F(t,n,e)},d:function(t){t&&G(n)}}}function Zo(t){var n,e=Le("Blog")+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function Jo(t){var n,e=Le("Documentation")+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function Xo(t){var n,e=Le("GitHub")+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function ti(t){var n,e,r,o,i,a,c,u,s,f,d,l,h,m,g,v,$,y=new Wr({props:{href:"/",$$slots:{default:[So]},$$scope:{ctx:t}}}),b="Convos"!=process.env.organization_name&&function(t){var n,e=("https://convos.by"!=process.env.organization_url?Do:No)(t);return{c:function(){e.c(),n=Q()},m:function(t,r){e.m(t,r),F(t,n,r)},p:function(t,n){e.p(t,n)},d:function(t){e.d(t),t&&G(n)}}}(t),w=!t[2].isFirst&&Po(t),_=[Uo,To,Lo],x=[];function k(t,n){return process.env.status>=400?0:t[3]||process.env.open_to_public||t[2].isFirst?1:2}f=k(t),d=x[f]=_[f](t);var E=new Wr({props:{href:"https://convos.by/",$$slots:{default:[Qo]},$$scope:{ctx:t}}}),O=new Wr({props:{href:"https://convos.by/blog",$$slots:{default:[Zo]},$$scope:{ctx:t}}}),R=new Wr({props:{href:"https://convos.by/doc",$$slots:{default:[Jo]},$$scope:{ctx:t}}}),C=new Wr({props:{href:"https://github.com/Nordaaker/convos",$$slots:{default:[Xo]},$$scope:{ctx:t}}});return{c:function(){n=W("main"),e=W("article"),r=W("h1"),qt(y.$$.fragment),o=Y(),b&&b.c(),i=Y(),(a=W("p")).textContent="".concat(Le("Convos is the simplest way to use IRC, and it keeps you always online.")),c=Y(),w&&w.c(),u=Y(),s=W("section"),d.c(),l=Y(),h=W("footer"),qt(E.$$.fragment),m=V("\n    —\n    "),qt(O.$$.fragment),g=V("\n    —\n    "),qt(R.$$.fragment),v=V("\n    —\n    "),qt(C.$$.fragment),X(e,"class","welcome-screen__about"),X(s,"id","signup"),X(s,"class","welcome-screen__signup fade-in"),X(h,"class","welcome-screen__footer fade-in"),X(n,"id","top"),X(n,"class","welcome-screen")},m:function(t,d){F(t,n,d),q(n,e),q(e,r),Ft(y,r,null),q(r,o),b&&b.m(r,null),q(e,i),q(e,a),q(n,c),w&&w.m(n,null),q(n,u),q(n,s),x[f].m(s,null),q(n,l),q(n,h),Ft(E,h,null),q(h,m),Ft(O,h,null),q(h,g),Ft(R,h,null),q(h,v),Ft(C,h,null),$=!0},p:function(t,e){var r=p(e,1)[0],o={};131072&r&&(o.$$scope={dirty:r,ctx:t}),y.$set(o),"Convos"!=process.env.organization_name&&b.p(t,r),t[2].isFirst?w&&(At(),Ut(w,1,1,(function(){w=null})),Lt()):w?(w.p(t,r),Tt(w,1)):((w=Po(t)).c(),Tt(w,1),w.m(n,u));var i=f;(f=k(t))===i?x[f].p(t,r):(At(),Ut(x[i],1,1,(function(){x[i]=null})),Lt(),(d=x[f])||(d=x[f]=_[f](t)).c(),Tt(d,1),d.m(s,null));var a={};131072&r&&(a.$$scope={dirty:r,ctx:t}),E.$set(a);var c={};131072&r&&(c.$$scope={dirty:r,ctx:t}),O.$set(c);var l={};131072&r&&(l.$$scope={dirty:r,ctx:t}),R.$set(l);var h={};131072&r&&(h.$$scope={dirty:r,ctx:t}),C.$set(h)},i:function(t){$||(Tt(y.$$.fragment,t),Tt(w),Tt(d),Tt(E.$$.fragment,t),Tt(O.$$.fragment,t),Tt(R.$$.fragment,t),Tt(C.$$.fragment,t),$=!0)},o:function(t){Ut(y.$$.fragment,t),Ut(w),Ut(d),Ut(E.$$.fragment,t),Ut(O.$$.fragment,t),Ut(R.$$.fragment,t),Ut(C.$$.fragment,t),$=!1},d:function(t){t&&G(n),Gt(y),b&&b.d(),w&&w.d(),x[f].d(),Gt(E),Gt(O),Gt(R),Gt(C)}}}function ni(t,n,e){var r,o,i,a;j(t,xe,(function(t){return e(8,r=t)}));var c=-1!=location.href.indexOf("email="),u=mt("user");j(t,u,(function(t){return e(2,a=t)}));var s=u.api.operation("loginUser");j(t,s,(function(t){return e(9,o=t)}));var f,d,l=u.api.operation("registerUser");function p(t){return h.apply(this,arguments)}function h(){return(h=Zt(Yt.mark((function t(n){return Yt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return document.cookie=n.res.headers["Set-Cookie"],n.reset(),t.next=4,u.load();case 4:xe.go("/");case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}j(t,l,(function(t){return e(10,i=t)})),ht((function(){if(!d){d=new IntersectionObserver((function(t){t.forEach((function(t){var n=t.intersectionRatio;t.target.style.opacity=n>.9?1:n?n-.25:1}))}),{threshold:[.3,.4,.5,.6,.7,.8,.9]}),sn(document,".fade-in",(function(t){return d.observe(t)}))}f&&xe.urlToForm(f)}));var m;return t.$$.update=function(){256&t.$$.dirty&&e(7,m="register"==r.pathParts[0]?"#signup":0),384&t.$$.dirty&&ln(r.hash||m),512&t.$$.dirty&&o.is("success")&&p(s),1024&t.$$.dirty&&i.is("success")&&(xe.update({lastUrl:""}),p(l))},[u,f,a,c,s,l,d,m,r,o,i,p,function(t){u.formEmail=t,e(0,u)},function(t){return s.perform(t.target)},function(t){u.formEmail=t,e(0,u)},function(t){return l.perform(t.target)},function(t){$t[t?"unshift":"push"]((function(){e(1,f=t)}))}]}Ro.registerLanguage("css",(function(t){var n={begin:/(?:[A-Z\_\.\-]+|--[a-zA-Z0-9_-]+)\s*:/,returnBegin:!0,end:";",endsWithParent:!0,contains:[{className:"attribute",begin:/\S/,end:":",excludeEnd:!0,starts:{endsWithParent:!0,excludeEnd:!0,contains:[{begin:/[\w-]+\(/,returnBegin:!0,contains:[{className:"built_in",begin:/[\w-]+/},{begin:/\(/,end:/\)/,contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,t.CSS_NUMBER_MODE]}]},t.CSS_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,t.C_BLOCK_COMMENT_MODE,{className:"number",begin:"#[0-9A-Fa-f]+"},{className:"meta",begin:"!important"}]}}]};return{case_insensitive:!0,illegal:/[=\/|'\$]/,contains:[t.C_BLOCK_COMMENT_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/},{className:"selector-class",begin:/\.[A-Za-z0-9_-]+/},{className:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},{className:"selector-pseudo",begin:/:(:)?[a-zA-Z0-9\_\-\+\(\)"'.]+/},{begin:"@(page|font-face)",lexemes:"@[a-z-]+",keywords:"@page @font-face"},{begin:"@",end:"[{;]",illegal:/:/,returnBegin:!0,contains:[{className:"keyword",begin:/@\-?\w[\w]*(\-\w+)*/},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:"and or not only",contains:[{begin:/[a-z-]+:/,className:"attribute"},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,t.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"[a-zA-Z-][a-zA-Z0-9_-]*",relevance:0},{begin:"{",end:"}",illegal:/\S/,contains:[t.C_BLOCK_COMMENT_MODE,n]}]}})),Ro.registerLanguage("diff",(function(t){return{aliases:["patch"],contains:[{className:"meta",relevance:10,variants:[{begin:/^@@ +\-\d+,\d+ +\+\d+,\d+ +@@$/},{begin:/^\*\*\* +\d+,\d+ +\*\*\*\*$/},{begin:/^\-\-\- +\d+,\d+ +\-\-\-\-$/}]},{className:"comment",variants:[{begin:/Index: /,end:/$/},{begin:/={3,}/,end:/$/},{begin:/^\-{3}/,end:/$/},{begin:/^\*{3} /,end:/$/},{begin:/^\+{3}/,end:/$/},{begin:/^\*{15}$/}]},{className:"addition",begin:"^\\+",end:"$"},{className:"deletion",begin:"^\\-",end:"$"},{className:"addition",begin:"^\\!",end:"$"}]}})),Ro.registerLanguage("dockerfile",(function(t){return{aliases:["docker"],case_insensitive:!0,keywords:"from maintainer expose env arg user onbuild stopsignal",contains:[t.HASH_COMMENT_MODE,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,t.NUMBER_MODE,{beginKeywords:"run cmd entrypoint volume add copy workdir label healthcheck shell",starts:{end:/[^\\]$/,subLanguage:"bash"}}],illegal:"</"}})),Ro.registerLanguage("go",(function(t){var n={keyword:"break default func interface select case map struct chan else goto package switch const fallthrough if range type continue for import return var go defer bool byte complex64 complex128 float32 float64 int8 int16 int32 int64 string uint8 uint16 uint32 uint64 int uint uintptr rune",literal:"true false iota nil",built_in:"append cap close complex copy imag len make new panic print println real recover delete"};return{aliases:["golang"],keywords:n,illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"string",variants:[t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{begin:t.C_NUMBER_RE+"[i]",relevance:1},t.C_NUMBER_MODE]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[t.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,keywords:n,illegal:/["']/}]}]}})),Ro.registerLanguage("http",(function(t){return{aliases:["https"],illegal:"\\S",contains:[{begin:"^HTTP/[0-9\\.]+",end:"$",contains:[{className:"number",begin:"\\b\\d{3}\\b"}]},{begin:"^[A-Z]+ (.*?) HTTP/[0-9\\.]+$",returnBegin:!0,end:"$",contains:[{className:"string",begin:" ",end:" ",excludeBegin:!0,excludeEnd:!0},{begin:"HTTP/[0-9\\.]+"},{className:"keyword",begin:"[A-Z]+"}]},{className:"attribute",begin:"^\\w",end:": ",excludeEnd:!0,illegal:"\\n|\\s|=",starts:{end:"$",relevance:0}},{begin:"\\n\\n",starts:{subLanguage:[],endsWithParent:!0}}]}})),Ro.registerLanguage("javascript",(function(t){var n="<>",e="</>",r={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/},o="[A-Za-z$_][0-9A-Za-z$_]*",i={keyword:"in of if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const export super debugger as async await static import from as",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document Symbol Set Map WeakSet WeakMap Proxy Reflect Promise"},a={className:"number",variants:[{begin:"\\b(0[bB][01]+)n?"},{begin:"\\b(0[oO][0-7]+)n?"},{begin:t.C_NUMBER_RE+"n?"}],relevance:0},c={className:"subst",begin:"\\$\\{",end:"\\}",keywords:i,contains:[]},u={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,c],subLanguage:"xml"}},s={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,c],subLanguage:"css"}},f={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,c]};c.contains=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,u,s,f,a,t.REGEXP_MODE];var d=c.contains.concat([t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]);return{aliases:["js","jsx","mjs","cjs"],keywords:i,contains:[{className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},{className:"meta",begin:/^#!/,end:/$/},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,u,s,f,t.C_LINE_COMMENT_MODE,t.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+",contains:[{className:"type",begin:"\\{",end:"\\}",relevance:0},{className:"variable",begin:o+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,a,{begin:/[{,\n]\s*/,relevance:0,contains:[{begin:o+"\\s*:",returnBegin:!0,relevance:0,contains:[{className:"attr",begin:o,relevance:0}]}]},{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,t.REGEXP_MODE,{className:"function",begin:"(\\(.*?\\)|"+o+")\\s*=>",returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:o},{begin:/\(\s*\)/},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:i,contains:d}]}]},{className:"",begin:/\s/,end:/\s*/,skip:!0},{variants:[{begin:n,end:e},{begin:r.begin,end:r.end}],subLanguage:"xml",contains:[{begin:r.begin,end:r.end,skip:!0,contains:["self"]}]}],relevance:0},{className:"function",beginKeywords:"function",end:/\{/,excludeEnd:!0,contains:[t.inherit(t.TITLE_MODE,{begin:o}),{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,contains:d}],illegal:/\[|%/},{begin:/\$[(.]/},t.METHOD_GUARD,{className:"class",beginKeywords:"class",end:/[{;=]/,excludeEnd:!0,illegal:/[:"\[\]]/,contains:[{beginKeywords:"extends"},t.UNDERSCORE_TITLE_MODE]},{beginKeywords:"constructor get set",end:/\{/,excludeEnd:!0}],illegal:/#(?!!)/}})),Ro.registerLanguage("markdown",(function(t){return{aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$"},{begin:"^.+?\\n[=-]{2,}$"}]},{begin:"<",end:">",subLanguage:"xml",relevance:0},{className:"bullet",begin:"^\\s*([*+-]|(\\d+\\.))\\s+"},{className:"strong",begin:"[*_]{2}.+?[*_]{2}"},{className:"emphasis",variants:[{begin:"\\*.+?\\*"},{begin:"_.+?_",relevance:0}]},{className:"quote",begin:"^>\\s+",end:"$"},{className:"code",variants:[{begin:"^```\\w*\\s*$",end:"^```[ ]*$"},{begin:"`.+?`"},{begin:"^( {4}|\\t)",end:"$",relevance:0}]},{begin:"^[-\\*]{3,}",end:"$"},{begin:"\\[.+?\\][\\(\\[].*?[\\)\\]]",returnBegin:!0,contains:[{className:"string",begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0,relevance:0},{className:"link",begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}],relevance:10},{begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]}]}})),Ro.registerLanguage("mojolicious",(function(t){return{subLanguage:"xml",contains:[{className:"meta",begin:"^__(END|DATA)__$"},{begin:"^\\s*%{1,2}={0,2}",end:"$",subLanguage:"perl"},{begin:"<%{1,2}={0,2}",end:"={0,1}%>",subLanguage:"perl",excludeBegin:!0,excludeEnd:!0}]}})),Ro.registerLanguage("nginx",(function(t){var n={className:"variable",variants:[{begin:/\$\d+/},{begin:/\$\{/,end:/}/},{begin:"[\\$\\@]"+t.UNDERSCORE_IDENT_RE}]},e={endsWithParent:!0,lexemes:"[a-z/_]+",keywords:{literal:"on off yes no true false none blocked debug info notice warn error crit select break last permanent redirect kqueue rtsig epoll poll /dev/poll"},relevance:0,illegal:"=>",contains:[t.HASH_COMMENT_MODE,{className:"string",contains:[t.BACKSLASH_ESCAPE,n],variants:[{begin:/"/,end:/"/},{begin:/'/,end:/'/}]},{begin:"([a-z]+):/",end:"\\s",endsWithParent:!0,excludeEnd:!0,contains:[n]},{className:"regexp",contains:[t.BACKSLASH_ESCAPE,n],variants:[{begin:"\\s\\^",end:"\\s|{|;",returnEnd:!0},{begin:"~\\*?\\s+",end:"\\s|{|;",returnEnd:!0},{begin:"\\*(\\.[a-z\\-]+)+"},{begin:"([a-z\\-]+\\.)+\\*"}]},{className:"number",begin:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{className:"number",begin:"\\b\\d+[kKmMgGdshdwy]*\\b",relevance:0},n]};return{aliases:["nginxconf"],contains:[t.HASH_COMMENT_MODE,{begin:t.UNDERSCORE_IDENT_RE+"\\s+{",returnBegin:!0,end:"{",contains:[{className:"section",begin:t.UNDERSCORE_IDENT_RE}],relevance:0},{begin:t.UNDERSCORE_IDENT_RE+"\\s",end:";|{",returnBegin:!0,contains:[{className:"attribute",begin:t.UNDERSCORE_IDENT_RE,starts:e}],relevance:0}],illegal:"[^\\s\\}]"}})),Ro.registerLanguage("perl",(function(t){var n="getpwent getservent quotemeta msgrcv scalar kill dbmclose undef lc ma syswrite tr send umask sysopen shmwrite vec qx utime local oct semctl localtime readpipe do return format read sprintf dbmopen pop getpgrp not getpwnam rewinddir qqfileno qw endprotoent wait sethostent bless s|0 opendir continue each sleep endgrent shutdown dump chomp connect getsockname die socketpair close flock exists index shmgetsub for endpwent redo lstat msgctl setpgrp abs exit select print ref gethostbyaddr unshift fcntl syscall goto getnetbyaddr join gmtime symlink semget splice x|0 getpeername recv log setsockopt cos last reverse gethostbyname getgrnam study formline endhostent times chop length gethostent getnetent pack getprotoent getservbyname rand mkdir pos chmod y|0 substr endnetent printf next open msgsnd readdir use unlink getsockopt getpriority rindex wantarray hex system getservbyport endservent int chr untie rmdir prototype tell listen fork shmread ucfirst setprotoent else sysseek link getgrgid shmctl waitpid unpack getnetbyname reset chdir grep split require caller lcfirst until warn while values shift telldir getpwuid my getprotobynumber delete and sort uc defined srand accept package seekdir getprotobyname semop our rename seek if q|0 chroot sysread setpwent no crypt getc chown sqrt write setnetent setpriority foreach tie sin msgget map stat getlogin unless elsif truncate exec keys glob tied closedirioctl socket readlink eval xor readline binmode setservent eof ord bind alarm pipe atan2 getgrent exp time push setgrent gt lt or ne m|0 break given say state when",e={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:n},r={begin:"->{",end:"}"},o={variants:[{begin:/\$\d/},{begin:/[\$%@](\^\w\b|#\w+(::\w+)*|{\w+}|\w+(::\w*)*)/},{begin:/[\$%@][^\s\w{]/,relevance:0}]},i=[t.BACKSLASH_ESCAPE,e,o],a=[o,t.HASH_COMMENT_MODE,t.COMMENT("^\\=\\w","\\=cut",{endsWithParent:!0}),r,{className:"string",contains:i,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*\\<",end:"\\>",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE]},{begin:"{\\w+}",contains:[],relevance:0},{begin:"-?\\w+\\s*\\=\\>",contains:[],relevance:0}]},{className:"number",begin:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",relevance:0},{begin:"(\\/\\/|"+t.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[t.HASH_COMMENT_MODE,{className:"regexp",begin:"(s|tr|y)/(\\\\.|[^/])*/(\\\\.|[^/])*/[a-z]*",relevance:10},{className:"regexp",begin:"(m|qr)?/",end:"/[a-z]*",contains:[t.BACKSLASH_ESCAPE],relevance:0}]},{className:"function",beginKeywords:"sub",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return e.contains=a,r.contains=a,{aliases:["pl","pm"],lexemes:/[\w\.]+/,keywords:n,contains:a}})),Ro.registerLanguage("python",(function(t){var n={keyword:"and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del or def lambda async await nonlocal|10",built_in:"Ellipsis NotImplemented",literal:"False None True"},e={className:"meta",begin:/^(>>>|\.\.\.) /},r={className:"subst",begin:/\{/,end:/\}/,keywords:n,illegal:/#/},o={begin:/\{\{/,relevance:0},i={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:/(u|b)?r?'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,e],relevance:10},{begin:/(u|b)?r?"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,e],relevance:10},{begin:/(fr|rf|f)'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,e,o,r]},{begin:/(fr|rf|f)"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,e,o,r]},{begin:/(u|r|ur)'/,end:/'/,relevance:10},{begin:/(u|r|ur)"/,end:/"/,relevance:10},{begin:/(b|br)'/,end:/'/},{begin:/(b|br)"/,end:/"/},{begin:/(fr|rf|f)'/,end:/'/,contains:[t.BACKSLASH_ESCAPE,o,r]},{begin:/(fr|rf|f)"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,o,r]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},a={className:"number",relevance:0,variants:[{begin:t.BINARY_NUMBER_RE+"[lLjJ]?"},{begin:"\\b(0o[0-7]+)[lLjJ]?"},{begin:t.C_NUMBER_RE+"[lLjJ]?"}]},c={className:"params",begin:/\(/,end:/\)/,contains:["self",e,a,i,t.HASH_COMMENT_MODE]};return r.contains=[i,a,e],{aliases:["py","gyp","ipython"],keywords:n,illegal:/(<\/|->|\?)|=>/,contains:[e,a,{beginKeywords:"if",relevance:0},i,t.HASH_COMMENT_MODE,{variants:[{className:"function",beginKeywords:"def"},{className:"class",beginKeywords:"class"}],end:/:/,illegal:/[${=;\n,]/,contains:[t.UNDERSCORE_TITLE_MODE,c,{begin:/->/,endsWithParent:!0,keywords:"None"}]},{className:"meta",begin:/^[\t ]*@/,end:/$/},{begin:/\b(print|exec)\(/}]}})),Ro.registerLanguage("scss",(function(t){var n={className:"variable",begin:"(\\$[a-zA-Z-][a-zA-Z0-9_-]*)\\b"},e={className:"number",begin:"#[0-9A-Fa-f]+"};t.CSS_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,t.C_BLOCK_COMMENT_MODE;return{case_insensitive:!0,illegal:"[=/|']",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"selector-id",begin:"\\#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},{className:"selector-attr",begin:"\\[",end:"\\]",illegal:"$"},{className:"selector-tag",begin:"\\b(a|abbr|acronym|address|area|article|aside|audio|b|base|big|blockquote|body|br|button|canvas|caption|cite|code|col|colgroup|command|datalist|dd|del|details|dfn|div|dl|dt|em|embed|fieldset|figcaption|figure|footer|form|frame|frameset|(h[1-6])|head|header|hgroup|hr|html|i|iframe|img|input|ins|kbd|keygen|label|legend|li|link|map|mark|meta|meter|nav|noframes|noscript|object|ol|optgroup|option|output|p|param|pre|progress|q|rp|rt|ruby|samp|script|section|select|small|span|strike|strong|style|sub|sup|table|tbody|td|textarea|tfoot|th|thead|time|title|tr|tt|ul|var|video)\\b",relevance:0},{className:"selector-pseudo",begin:":(visited|valid|root|right|required|read-write|read-only|out-range|optional|only-of-type|only-child|nth-of-type|nth-last-of-type|nth-last-child|nth-child|not|link|left|last-of-type|last-child|lang|invalid|indeterminate|in-range|hover|focus|first-of-type|first-line|first-letter|first-child|first|enabled|empty|disabled|default|checked|before|after|active)"},{className:"selector-pseudo",begin:"::(after|before|choices|first-letter|first-line|repeat-index|repeat-item|selection|value)"},n,{className:"attribute",begin:"\\b(src|z-index|word-wrap|word-spacing|word-break|width|widows|white-space|visibility|vertical-align|unicode-bidi|transition-timing-function|transition-property|transition-duration|transition-delay|transition|transform-style|transform-origin|transform|top|text-underline-position|text-transform|text-shadow|text-rendering|text-overflow|text-indent|text-decoration-style|text-decoration-line|text-decoration-color|text-decoration|text-align-last|text-align|tab-size|table-layout|right|resize|quotes|position|pointer-events|perspective-origin|perspective|page-break-inside|page-break-before|page-break-after|padding-top|padding-right|padding-left|padding-bottom|padding|overflow-y|overflow-x|overflow-wrap|overflow|outline-width|outline-style|outline-offset|outline-color|outline|orphans|order|opacity|object-position|object-fit|normal|none|nav-up|nav-right|nav-left|nav-index|nav-down|min-width|min-height|max-width|max-height|mask|marks|margin-top|margin-right|margin-left|margin-bottom|margin|list-style-type|list-style-position|list-style-image|list-style|line-height|letter-spacing|left|justify-content|initial|inherit|ime-mode|image-orientation|image-resolution|image-rendering|icon|hyphens|height|font-weight|font-variant-ligatures|font-variant|font-style|font-stretch|font-size-adjust|font-size|font-language-override|font-kerning|font-feature-settings|font-family|font|float|flex-wrap|flex-shrink|flex-grow|flex-flow|flex-direction|flex-basis|flex|filter|empty-cells|display|direction|cursor|counter-reset|counter-increment|content|column-width|column-span|column-rule-width|column-rule-style|column-rule-color|column-rule|column-gap|column-fill|column-count|columns|color|clip-path|clip|clear|caption-side|break-inside|break-before|break-after|box-sizing|box-shadow|box-decoration-break|bottom|border-width|border-top-width|border-top-style|border-top-right-radius|border-top-left-radius|border-top-color|border-top|border-style|border-spacing|border-right-width|border-right-style|border-right-color|border-right|border-radius|border-left-width|border-left-style|border-left-color|border-left|border-image-width|border-image-source|border-image-slice|border-image-repeat|border-image-outset|border-image|border-color|border-collapse|border-bottom-width|border-bottom-style|border-bottom-right-radius|border-bottom-left-radius|border-bottom-color|border-bottom|border|background-size|background-repeat|background-position|background-origin|background-image|background-color|background-clip|background-attachment|background-blend-mode|background|backface-visibility|auto|animation-timing-function|animation-play-state|animation-name|animation-iteration-count|animation-fill-mode|animation-duration|animation-direction|animation-delay|animation|align-self|align-items|align-content)\\b",illegal:"[^\\s]"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:":",end:";",contains:[n,e,t.CSS_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{className:"meta",begin:"!important"}]},{begin:"@(page|font-face)",lexemes:"@[a-z-]+",keywords:"@page @font-face"},{begin:"@",end:"[{;]",returnBegin:!0,keywords:"and or not only",contains:[{begin:"@[a-z-]+",className:"keyword"},n,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,e,t.CSS_NUMBER_MODE]}]}})),Ro.registerLanguage("shell",(function(t){return{aliases:["console"],contains:[{className:"meta",begin:"^\\s{0,3}[/\\w\\d\\[\\]()@-]*[>%$#]",starts:{end:"$",subLanguage:"bash"}}]}})),Ro.registerLanguage("xml",(function(t){var n={className:"symbol",begin:"&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;"},e={begin:"\\s",contains:[{className:"meta-keyword",begin:"#?[a-z_][a-z1-9_-]+",illegal:"\\n"}]},r=t.inherit(e,{begin:"\\(",end:"\\)"}),o=t.inherit(t.APOS_STRING_MODE,{className:"meta-string"}),i=t.inherit(t.QUOTE_STRING_MODE,{className:"meta-string"}),a={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:"[A-Za-z0-9\\._:-]+",relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[n]},{begin:/'/,end:/'/,contains:[n]},{begin:/[^\s"'=<>`]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,contains:[{className:"meta",begin:"<![a-z]",end:">",relevance:10,contains:[e,i,o,r,{begin:"\\[",end:"\\]",contains:[{className:"meta",begin:"<![a-z]",end:">",contains:[e,r,i,o]}]}]},t.COMMENT("\x3c!--","--\x3e",{relevance:10}),{begin:"<\\!\\[CDATA\\[",end:"\\]\\]>",relevance:10},n,{className:"meta",begin:/<\?xml/,end:/\?>/,relevance:10},{begin:/<\?(php)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},t.inherit(t.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),t.inherit(t.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]},{className:"tag",begin:"<style(?=\\s|>)",end:">",keywords:{name:"style"},contains:[a],starts:{end:"</style>",returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:"<script(?=\\s|>)",end:">",keywords:{name:"script"},contains:[a],starts:{end:"<\/script>",returnEnd:!0,subLanguage:["actionscript","javascript","handlebars","xml"]}},{className:"tag",begin:"</?",end:"/?>",contains:[{className:"name",begin:/[^\/><\s]+/,relevance:0},a]}]}})),Ro.registerLanguage("yaml",(function(t){var n={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[t.BACKSLASH_ESCAPE,{className:"template-variable",variants:[{begin:"{{",end:"}}"},{begin:"%{",end:"}"}]}]};return{case_insensitive:!0,aliases:["yml","YAML","yaml"],contains:[{className:"attr",variants:[{begin:"\\w[\\w :\\/.-]*:(?=[ \t]|$)"},{begin:'"\\w[\\w :\\/.-]*":(?=[ \t]|$)'},{begin:"'\\w[\\w :\\/.-]*':(?=[ \t]|$)"}]},{className:"meta",begin:"^---s*$",relevance:10},{className:"string",begin:"[\\|>]([0-9]?[+-])?[ ]*\\n( *)[\\S ]+\\n(\\2[\\S ]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!"+t.UNDERSCORE_IDENT_RE},{className:"type",begin:"!!"+t.UNDERSCORE_IDENT_RE},{className:"meta",begin:"&"+t.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+t.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"\\-(?=[ ]|$)",relevance:0},t.HASH_COMMENT_MODE,{beginKeywords:"true false yes no null",keywords:{literal:"true false yes no null"}},{className:"number",begin:t.C_NUMBER_RE+"\\b"},n]}}));var ei=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(Co()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,ni,ti,P,{}),r}return u}(Vt);function ri(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function oi(t,n,e){var r=t.slice();return r[20]=n[e],r}function ii(t,n,e){var r=t.slice();return r[17]=n[e],r}function ai(t){var n,e=new Wr({props:{href:"/settings/connection",$$slots:{default:[ci]},$$scope:{ctx:t}}});return{c:function(){qt(e.$$.fragment)},m:function(t,r){Ft(e,t,r),n=!0},p:function(t,n){var r={};8388608&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Tt(e.$$.fragment,t),n=!0)},o:function(t){Ut(e.$$.fragment,t),n=!1},d:function(t){Gt(e,t)}}}function ci(t){var n,e,r,o=new Nn({props:{name:"exclamation-circle"}});return{c:function(){qt(o.$$.fragment),n=Y(),(e=W("span")).textContent="".concat(Le("No conversations"))},m:function(t,i){Ft(o,t,i),F(t,n,i),F(t,e,i),r=!0},p:O,i:function(t){r||(Tt(o.$$.fragment,t),r=!0)},o:function(t){Ut(o.$$.fragment,t),r=!1},d:function(t){Gt(o,t),t&&G(n),t&&G(e)}}}function ui(t){var n,e,r,o,i,a,c,u,s=(t[17].name||t[17].connection_id)+"",f=Ei(t[17])+"",d=new Nn({props:{name:"network-wired"}});return{c:function(){qt(d.$$.fragment),n=Y(),e=W("span"),r=V(s),o=Y(),i=W("b"),a=V(f),X(i,"class","unread"),i.hidden=c=!t[17].unread},m:function(t,c){Ft(d,t,c),F(t,n,c),F(t,e,c),q(e,r),F(t,o,c),F(t,i,c),q(i,a),u=!0},p:function(t,n){(!u||16&n)&&s!==(s=(t[17].name||t[17].connection_id)+"")&&nt(r,s),(!u||16&n)&&f!==(f=Ei(t[17])+"")&&nt(a,f),(!u||16&n&&c!==(c=!t[17].unread))&&(i.hidden=c)},i:function(t){u||(Tt(d.$$.fragment,t),u=!0)},o:function(t){Ut(d.$$.fragment,t),u=!1},d:function(t){Gt(d,t),t&&G(n),t&&G(e),t&&G(o),t&&G(i)}}}function si(t){var n,e,r,o,i,a,c,u,s=t[20].name+"",f=Ei(t[20])+"",d=new Nn({props:{name:t[20].is_private?"user":"user-friends"}});return{c:function(){qt(d.$$.fragment),n=Y(),e=W("span"),r=V(s),o=Y(),i=W("b"),a=V(f),X(i,"class","unread"),i.hidden=c=!t[20].unread},m:function(t,c){Ft(d,t,c),F(t,n,c),F(t,e,c),q(e,r),F(t,o,c),F(t,i,c),q(i,a),u=!0},p:function(t,n){var e={};16&n&&(e.name=t[20].is_private?"user":"user-friends"),d.$set(e),(!u||16&n)&&s!==(s=t[20].name+"")&&nt(r,s),(!u||16&n)&&f!==(f=Ei(t[20])+"")&&nt(a,f),(!u||16&n&&c!==(c=!t[20].unread))&&(i.hidden=c)},i:function(t){u||(Tt(d.$$.fragment,t),u=!0)},o:function(t){Ut(d.$$.fragment,t),u=!1},d:function(t){Gt(d,t),t&&G(n),t&&G(e),t&&G(o),t&&G(i)}}}function fi(t){var n,e=new Wr({props:{href:t[20].path,class:xi(t[17],t[20]),$$slots:{default:[si]},$$scope:{ctx:t}}});return{c:function(){qt(e.$$.fragment)},m:function(t,r){Ft(e,t,r),n=!0},p:function(t,n){var r={};16&n&&(r.href=t[20].path),16&n&&(r.class=xi(t[17],t[20])),8388624&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Tt(e.$$.fragment,t),n=!0)},o:function(t){Ut(e.$$.fragment,t),n=!1},d:function(t){Gt(e,t)}}}function di(t){for(var n,e,r,o=new Wr({props:{href:t[17].path,class:xi(t[17],t[17]),$$slots:{default:[ui]},$$scope:{ctx:t}}}),i=t[17].dialogs.toArray(),a=[],c=0;c<i.length;c+=1)a[c]=fi(oi(t,i,c));var u=function(t){return Ut(a[t],1,1,(function(){a[t]=null}))};return{c:function(){qt(o.$$.fragment),n=Y();for(var t=0;t<a.length;t+=1)a[t].c();e=Q()},m:function(t,i){Ft(o,t,i),F(t,n,i);for(var c=0;c<a.length;c+=1)a[c].m(t,i);F(t,e,i),r=!0},p:function(t,n){var r={};if(16&n&&(r.href=t[17].path),16&n&&(r.class=xi(t[17],t[17])),8388624&n&&(r.$$scope={dirty:n,ctx:t}),o.$set(r),16&n){var c;for(i=t[17].dialogs.toArray(),c=0;c<i.length;c+=1){var s=oi(t,i,c);a[c]?(a[c].p(s,n),Tt(a[c],1)):(a[c]=fi(s),a[c].c(),Tt(a[c],1),a[c].m(e.parentNode,e))}for(At(),c=i.length;c<a.length;c+=1)u(c);Lt()}},i:function(t){if(!r){Tt(o.$$.fragment,t);for(var n=0;n<i.length;n+=1)Tt(a[n]);r=!0}},o:function(t){Ut(o.$$.fragment,t),a=a.filter(Boolean);for(var n=0;n<a.length;n+=1)Ut(a[n]);r=!1},d:function(t){Gt(o,t),t&&G(n),K(a,t),t&&G(e)}}}function li(t){var n,e,r,o,i,a,c,u=Ei(t[6])+"",s=new Nn({props:{name:t[6].unread?"bell":"bell-slash"}});return{c:function(){qt(s.$$.fragment),n=Y(),(e=W("span")).textContent="".concat(Le("Notifications")),r=Y(),o=W("b"),i=V(u),X(o,"class","unread"),o.hidden=a=!t[6].unread},m:function(t,a){Ft(s,t,a),F(t,n,a),F(t,e,a),F(t,r,a),F(t,o,a),q(o,i),c=!0},p:function(t,n){var e={};64&n&&(e.name=t[6].unread?"bell":"bell-slash"),s.$set(e),(!c||64&n)&&u!==(u=Ei(t[6])+"")&&nt(i,u),(!c||64&n&&a!==(a=!t[6].unread))&&(o.hidden=a)},i:function(t){c||(Tt(s.$$.fragment,t),c=!0)},o:function(t){Ut(s.$$.fragment,t),c=!1},d:function(t){Gt(s,t),t&&G(n),t&&G(e),t&&G(r),t&&G(o)}}}function pi(t){var n,e,r,o=new Nn({props:{name:"search"}});return{c:function(){qt(o.$$.fragment),n=Y(),(e=W("span")).textContent="".concat(Le("Search"))},m:function(t,i){Ft(o,t,i),F(t,n,i),F(t,e,i),r=!0},p:O,i:function(t){r||(Tt(o.$$.fragment,t),r=!0)},o:function(t){Ut(o.$$.fragment,t),r=!1},d:function(t){Gt(o,t),t&&G(n),t&&G(e)}}}function hi(t){var n,e,r,o=new Nn({props:{name:"comment"}});return{c:function(){qt(o.$$.fragment),n=Y(),(e=W("span")).textContent="".concat(Le("Add conversation"))},m:function(t,i){Ft(o,t,i),F(t,n,i),F(t,e,i),r=!0},p:O,i:function(t){r||(Tt(o.$$.fragment,t),r=!0)},o:function(t){Ut(o.$$.fragment,t),r=!1},d:function(t){Gt(o,t),t&&G(n),t&&G(e)}}}function mi(t){var n,e,r,o=new Nn({props:{name:"network-wired"}});return{c:function(){qt(o.$$.fragment),n=Y(),(e=W("span")).textContent="".concat(Le("Add connection"))},m:function(t,i){Ft(o,t,i),F(t,n,i),F(t,e,i),r=!0},p:O,i:function(t){r||(Tt(o.$$.fragment,t),r=!0)},o:function(t){Ut(o.$$.fragment,t),r=!1},d:function(t){Gt(o,t),t&&G(n),t&&G(e)}}}function gi(t){var n,e,r,o=new Nn({props:{name:"user-cog"}});return{c:function(){qt(o.$$.fragment),n=Y(),(e=W("span")).textContent="".concat(Le("Account"))},m:function(t,i){Ft(o,t,i),F(t,n,i),F(t,e,i),r=!0},p:O,i:function(t){r||(Tt(o.$$.fragment,t),r=!0)},o:function(t){Ut(o.$$.fragment,t),r=!1},d:function(t){Gt(o,t),t&&G(n),t&&G(e)}}}function vi(t){var n,e,r,o=new Nn({props:{name:"question-circle"}});return{c:function(){qt(o.$$.fragment),n=Y(),(e=W("span")).textContent="".concat(Le("Help"))},m:function(t,i){Ft(o,t,i),F(t,n,i),F(t,e,i),r=!0},p:O,i:function(t){r||(Tt(o.$$.fragment,t),r=!0)},o:function(t){Ut(o.$$.fragment,t),r=!1},d:function(t){Gt(o,t),t&&G(n),t&&G(e)}}}function $i(t){var n,e=new Wr({props:{href:"/settings",$$slots:{default:[yi]},$$scope:{ctx:t}}});return{c:function(){qt(e.$$.fragment)},m:function(t,r){Ft(e,t,r),n=!0},p:function(t,n){var r={};8388608&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Tt(e.$$.fragment,t),n=!0)},o:function(t){Ut(e.$$.fragment,t),n=!1},d:function(t){Gt(e,t)}}}function yi(t){var n,e,r,o=new Nn({props:{name:"tools"}});return{c:function(){qt(o.$$.fragment),n=Y(),(e=W("span")).textContent="".concat(Le("Settings"))},m:function(t,i){Ft(o,t,i),F(t,n,i),F(t,e,i),r=!0},p:O,i:function(t){r||(Tt(o.$$.fragment,t),r=!0)},o:function(t){Ut(o.$$.fragment,t),r=!1},d:function(t){Gt(o,t),t&&G(n),t&&G(e)}}}function bi(t){var n,e,r,o=new Nn({props:{name:"power-off"}});return{c:function(){qt(o.$$.fragment),n=Y(),(e=W("span")).textContent="".concat(Le("Log out"))},m:function(t,i){Ft(o,t,i),F(t,n,i),F(t,e,i),r=!0},p:O,i:function(t){r||(Tt(o.$$.fragment,t),r=!0)},o:function(t){Ut(o.$$.fragment,t),r=!1},d:function(t){Gt(o,t),t&&G(n),t&&G(e)}}}function wi(t){var n,e,r,o,i=Le('Search for "%1"',t[5])+"",a=new Nn({props:{name:"search"}});return{c:function(){qt(a.$$.fragment),n=Y(),e=W("span"),r=V(i)},m:function(t,i){Ft(a,t,i),F(t,n,i),F(t,e,i),q(e,r),o=!0},p:function(t,n){(!o||32&n)&&i!==(i=Le('Search for "%1"',t[5])+"")&&nt(r,i)},i:function(t){o||(Tt(a.$$.fragment,t),o=!0)},o:function(t){Ut(a.$$.fragment,t),o=!1},d:function(t){Gt(a,t),t&&G(n),t&&G(e)}}}function _i(t){for(var n,e,r,o,i,a,c,u,s,f,d,l,h,m,g,v,$,y,b,w,_,x,k,E,O,R,C=(t[4].email||Le("Account"))+"",S=t[4].is("admin"),D=new Nn({props:{name:"search"}}),P=!t[4].connections.size&&ai(t),M=t[4].connections.toArray(),j=[],A=0;A<M.length;A+=1)j[A]=di(ii(t,M,A));var L=function(t){return Ut(j[t],1,1,(function(){j[t]=null}))},T=new Wr({props:{href:"/chat",$$slots:{default:[li]},$$scope:{ctx:t}}}),U=new Wr({props:{href:"/search",$$slots:{default:[pi]},$$scope:{ctx:t}}}),I=new Wr({props:{href:"/settings/conversation",$$slots:{default:[hi]},$$scope:{ctx:t}}}),z=new Wr({props:{href:"/settings/connection",$$slots:{default:[mi]},$$scope:{ctx:t}}}),B=new Wr({props:{href:"/settings/account",$$slots:{default:[gi]},$$scope:{ctx:t}}}),H=new Wr({props:{href:"/help",$$slots:{default:[vi]},$$scope:{ctx:t}}}),Q=S&&$i(t),J=new Wr({props:{href:"/api/user/logout.html",$$slots:{default:[bi]},$$scope:{ctx:t}}}),tt=new Wr({props:{href:"/search?q="+encodeURIComponent(t[5]),class:"for-search hidden",$$slots:{default:[wi]},$$scope:{ctx:t}}});return{c:function(){n=W("div"),e=W("form"),r=W("input"),i=Y(),a=W("label"),qt(D.$$.fragment),c=Y(),u=W("nav"),(s=W("h3")).textContent="".concat(Le("Conversations")),f=Y(),P&&P.c(),d=Y();for(var p=0;p<j.length;p+=1)j[p].c();l=Y(),h=W("h3"),m=V(C),g=Y(),qt(T.$$.fragment),v=Y(),qt(U.$$.fragment),$=Y(),qt(I.$$.fragment),y=Y(),qt(z.$$.fragment),b=Y(),qt(B.$$.fragment),w=Y(),qt(H.$$.fragment),_=Y(),Q&&Q.c(),x=Y(),qt(J.$$.fragment),k=Y(),qt(tt.$$.fragment),X(r,"type","text"),X(r,"id","search_input"),X(r,"placeholder",o=t[3]?Le("Search..."):Le("Convos")),X(a,"for","search_input"),X(e,"class","sidebar__header"),X(u,"class","sidebar-left__nav"),ot(u,"is-filtering",t[1].length>0),X(n,"class","sidebar-left")},m:function(o,p,E){F(o,n,p),q(n,e),q(e,r),et(r,t[1]),q(e,i),q(e,a),Ft(D,a,null),q(n,c),q(n,u),q(u,s),q(u,f),P&&P.m(u,null),q(u,d);for(var C=0;C<j.length;C+=1)j[C].m(u,null);q(u,l),q(u,h),q(h,m),q(u,g),Ft(T,u,null),q(u,v),Ft(U,u,null),q(u,$),Ft(I,u,null),q(u,y),Ft(z,u,null),q(u,b),Ft(B,u,null),q(u,w),Ft(H,u,null),q(u,_),Q&&Q.m(u,null),q(u,x),Ft(J,u,null),q(u,k),Ft(tt,u,null),t[16](u),O=!0,E&&N(R),R=[Z(r,"input",t[15]),Z(r,"blur",t[9]),Z(r,"focus",t[10]),Z(r,"keydown",t[11]),Z(e,"submit",Oi),Z(u,"click",ki)]},p:function(t,n){var e=p(n,1)[0];if((!O||8&e&&o!==(o=t[3]?Le("Search..."):Le("Convos")))&&X(r,"placeholder",o),2&e&&r.value!==t[1]&&et(r,t[1]),t[4].connections.size?P&&(At(),Ut(P,1,1,(function(){P=null})),Lt()):P?(P.p(t,e),Tt(P,1)):((P=ai(t)).c(),Tt(P,1),P.m(u,d)),16&e){var i;for(M=t[4].connections.toArray(),i=0;i<M.length;i+=1){var a=ii(t,M,i);j[i]?(j[i].p(a,e),Tt(j[i],1)):(j[i]=di(a),j[i].c(),Tt(j[i],1),j[i].m(u,l))}for(At(),i=M.length;i<j.length;i+=1)L(i);Lt()}(!O||16&e)&&C!==(C=(t[4].email||Le("Account"))+"")&&nt(m,C);var c={};8388672&e&&(c.$$scope={dirty:e,ctx:t}),T.$set(c);var s={};8388608&e&&(s.$$scope={dirty:e,ctx:t}),U.$set(s);var f={};8388608&e&&(f.$$scope={dirty:e,ctx:t}),I.$set(f);var h={};8388608&e&&(h.$$scope={dirty:e,ctx:t}),z.$set(h);var g={};8388608&e&&(g.$$scope={dirty:e,ctx:t}),B.$set(g);var v={};8388608&e&&(v.$$scope={dirty:e,ctx:t}),H.$set(v),16&e&&(S=t[4].is("admin")),S?Q?(Q.p(t,e),Tt(Q,1)):((Q=$i(t)).c(),Tt(Q,1),Q.m(u,x)):Q&&(At(),Ut(Q,1,1,(function(){Q=null})),Lt());var $={};8388608&e&&($.$$scope={dirty:e,ctx:t}),J.$set($);var y={};32&e&&(y.href="/search?q="+encodeURIComponent(t[5])),8388640&e&&(y.$$scope={dirty:e,ctx:t}),tt.$set(y),2&e&&ot(u,"is-filtering",t[1].length>0)},i:function(e){if(!O){Tt(D.$$.fragment,e),Tt(P);for(var r=0;r<M.length;r+=1)Tt(j[r]);Tt(T.$$.fragment,e),Tt(U.$$.fragment,e),Tt(I.$$.fragment,e),Tt(z.$$.fragment,e),Tt(B.$$.fragment,e),Tt(H.$$.fragment,e),Tt(Q),Tt(J.$$.fragment,e),Tt(tt.$$.fragment,e),Et((function(){E||(E=zt(n,Ar,t[0],!0)),E.run(1)})),O=!0}},o:function(e){Ut(D.$$.fragment,e),Ut(P),j=j.filter(Boolean);for(var r=0;r<j.length;r+=1)Ut(j[r]);Ut(T.$$.fragment,e),Ut(U.$$.fragment,e),Ut(I.$$.fragment,e),Ut(z.$$.fragment,e),Ut(B.$$.fragment,e),Ut(H.$$.fragment,e),Ut(Q),Ut(J.$$.fragment,e),Ut(tt.$$.fragment,e),E||(E=zt(n,Ar,t[0],!1)),E.run(0),O=!1},d:function(e){e&&G(n),Gt(D),P&&P.d(),K(j,e),Gt(T),Gt(U),Gt(I),Gt(z),Gt(B),Gt(H),Q&&Q.d(),Gt(J),Gt(tt),t[16](null),e&&E&&E.end(),N(R)}}}function xi(t,n){var e=[n.dialog_id?"for-dialog":"for-connection"];return(n.frozen||"connected"!=t.state)&&e.push("is-frozen"),n.errors&&e.push("has-errors"),e.join(" ")}function ki(t){(t.target.className||"").match(/(network|user)/)&&setTimeout((function(){return xe.update({activeMenu:"settings"})}),50)}function Ei(t){return t.unread>60?"60+":t.unread||0}var Oi=function(t){return t.preventDefault()};function Ri(t,n,e){var r,o,i;j(t,xe,(function(t){return e(14,o=t)}));var a=n.transition,c=mt("user");j(t,c,(function(t){return e(4,r=t)}));var u=r.notifications;j(t,u,(function(t){return e(6,i=t)}));var s,f,d=0,l="",p=!1,h=[];function m(){e(3,p=!1),sn(s,"a",(function(t){return t.classList.remove("has-focus")})),setTimeout((function(){if(s){e(1,l="");var t=document.activeElement;t&&Xt(t,s)&&sn(s,"a.has-path",(function(t){return t.focus()}))}}),100)}function g(){if(s){e(12,d=0),e(3,p=!0),e(13,h=[]);var t=[l.match(/^\W+/)?"":"\\b\\W*"];t[0]&&t.push("");for(var n=function(n){var r=new RegExp(t[n]+fn(l),"i"),o={};if(sn(s,"a",(function(t,n){var i=t.classList;!l.length&&i.contains("has-path")&&e(12,d=n),i.remove("has-focus");var a=!l.length||!t.href.match(/\/search$/)&&!o[t.href]&&t.textContent.match(r);a&&h.push(t),t.classList[a?"remove":"add"]("hidden"),o[t.href]=!0})),h.length)return"break"},r=0;r<t.length;r++){if("break"===n(r))break}sn(s,".for-connection",(function(t){for(var n=t;(n=n.nextElementSibling)&&n.classList.contains("for-dialog");)if(!n.classList.contains("hidden"))return t.classList.remove("hidden")}));var o=s.querySelector(".for-search");o.classList[l?"remove":"add"]("hidden"),o.classList.contains("hidden")||h.push(o),sn(s,"h3",(function(t){for(var n=t;(n=n.nextElementSibling)&&!mn(n,"h3");)if(!n.classList.contains("hidden"))return t.classList.remove("hidden");t.classList.add("hidden")}))}}return t.$set=function(t){"transition"in t&&e(0,a=t.transition)},t.$$.update=function(){2&t.$$.dirty&&g(),2&t.$$.dirty&&e(5,f=l.replace(/^\//,"")),16388&t.$$.dirty&&s&&m(),12288&t.$$.dirty&&h[d]&&h[d].classList.add("has-focus")},[a,l,s,p,r,f,i,c,u,m,g,function(t){if(13==t.keyCode)return t.preventDefault(),m(),void(h[d]&&xe.go(h[d].href));var n=38==t.keyCode?-1:40==t.keyCode?1:0;n&&(t.preventDefault(),h[d]&&h[d].classList.remove("has-focus"),e(12,d+=t.ctrlKey?4*n:n)),d<0&&e(12,d=h.length-1),d>=h.length&&e(12,d=0)},d,h,o,function(){l=this.value,e(1,l)},function(t){$t[t?"unshift":"push"]((function(){e(2,s=t)}))}]}var Ci=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(ri()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,Ri,_i,P,{transition:0}),r}return u}(Vt);function Si(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Ni=function(t,n){return t.name.localeCompare(n.name)},Di=function(n){c(a,n);var e,r=(e=a,function(){var t,n=i(e);if(Si()){var r=i(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return o(this,t)});function a(){var n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(this,a),(n=r.call(this,e)).sorter=o.sorter||Ni,n._sort(),n}return E(a,[{key:"filter",value:function(t){return Array.from(this.values()).filter(t)}},{key:"set",value:function(t,n){m(i(a.prototype),"set",this).call(this,t,n),this._sort()}},{key:"toArray",value:function(){return Array.from(this.values())}},{key:"_sort",value:function(){var t=this,n=Array.from(this.entries()),e=this.sorter;return this.clear(),n.sort((function(t,n){return e(t[1],n[1])})).forEach((function(n){var e=p(n,2),r=e[0],o=e[1];return m(i(a.prototype),"set",t).call(t,r,o)})),n}}]),a}(y(Map)),Pi={b:"channel_ban",C:"ctcp_block",c:"colour_filter",e:"ban_exemption",F:"enable_forwarding",f:"forward",g:"free_invite",I:"invite_exemption",j:"join_throttle",k:"password",l:"join_limit",L:"large_ban_list",m:"moderated",n:"prevent_external_send",P:"permanent",p:"privat",Q:"block_forwarded_users",q:"quiet",r:"block_unidentified",s:"secret",S:"secure_connection_only",t:"ops_topic"},Mi={o:"@",v:"+"},ji={a:"admin",B:"bot",h:"half_operator",i:"invisible",I:"whois_hide_online",o:"operator",p:"whois_hide_channels",R:"privmsg_from_registered_only",r:"registered",S:"service_bot",T:"ctcp_block",t:"vhost",v:"voice",W:"whois_notifications",x:"cloaked_hostname",z:"secure_connection",Z:"secure_connection_only"};function Ai(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function Li(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?Ai(Object(e),!0).forEach((function(n){Jt(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Ai(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function Ti(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Ui=new(function(n){c(a,n);var e,r=(e=a,function(){var t,n=i(e);if(Ti()){var r=i(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return o(this,t)});function a(){var n;return t(this,a),(n=r.call(this)).prop("persist","debug",0),n.prop("persist","notificationCloseDelay",5e3),n.prop("persist","protocols",{}),n.prop("persist","wantNotifications",null),n.prop("ro","notifyPermission",(function(){return n._notification().permission})),n.prop("rw","defaultTitle","Convos"),n.prop("rw","route",xe),n.prop("rw","wsUrl",""),n.msgId=0,n.messageCb={},n.wsSendQueue=[],n}return E(a,[{key:"notify",value:function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t||(t=this.defaultTitle);var r=this.wantNotifications?"granted"!=this._notification().permission?this._notification().permission:!e.force&&this._hasFocus()?"hasFocus":"":"wantNotifications == false";if(r)return this.debug&&console.log("[notify] Rejected: "+r,[t,n,e]),null;var o=this._notification(t,Li({},e,{body:n}));return o.onclick=function(t){window.focus(),o.close()},setTimeout((function(){return o.close()}),this.notificationCloseDelay),o}},{key:"registerProtocol",value:function(t,n){var e;return this.protocols[t]=n,this.update({protocols:(e=this.protocols,JSON.parse(JSON.stringify(e)))}),n&&navigator.registerProtocolHandler&&navigator.registerProtocolHandler(t,this.route.baseUrl+"/register?uri=%s",'Convos wants to handle "'+t+'" links'),this}},{key:"requestPermissionToNotify",value:function(t){var n=this;if("boolean"==typeof t)return this.update({wantNotifications:t});var e=this._notification();return"granted"!=e.permission&&e.requestPermission?(e.requestPermission((function(e){n.update({wantNotifications:"granted"==e}),t&&t(e)})),this):(this.update({wantNotifications:"granted"==e.permission}),t&&t(e.permission),this)}},{key:"send",value:function(t,n){var e="string"==typeof t?{method:t}:Li({},t);e.method||(e.method=e.message?"send":"ping"),e.connection&&["connection_id"].forEach((function(t){e[t]=e.dialog[t]||""})),e.dialog&&["connection_id","dialog_id"].forEach((function(t){e[t]=e.dialog[t]||""})),e.id=String("ping"==e.method?0:++this.msgId),delete e.connection,delete e.dialog,n&&(this.messageCb[e.id]=n),this.debug>=2&&console.log("[send]",e),this.wsSendQueue.push(e),this._ws()}},{key:"start",value:function(t){var n=this,e=t.route,r=t.wsUrl;e&&this.update({route:e}),r&&this.update({wsUrl:r}),this.keepaliveTid=setInterval((function(){return n._keepalive()}),1e4),this._listenToGlobalExceptions(e),this._setupServiceWorker(e)}},{key:"update",value:function(t){var n=this.wantNotifications;return m(i(a.prototype),"update",this).call(this,t),t.wantNotifications&&!n&&this.notify(null,Le("You have enabled notifications."),{force:!0}),this}},{key:"_dispatch",value:function(t){var n=("wsEvent_"+this._getEventNameFromParam(t)).replace(/_(\w)/g,(function(t,n){return n.toUpperCase()}));this.debug>=2&&console.log("[dispatch:"+n+"]",t),"wsEventError"!=n&&(this._wsReconnectDelay=0);var e=this.messageCb[t.id];t.bubbles=!0,t.dispatchTo=n,t.stopPropagation=function(){t.bubbles=!1},e&&e(t),t.bubbles&&this.emit("message",t),this.emit(n,t)}},{key:"_getEventNameFromParam",value:function(t){return t.errors?"error":"state"==t.event?t.type:"sent"==t.event&&t.message.match(/\/\S+/)?(t.command=t.message.split(/\s+/).filter((function(t){return t.length})),t.command[0]=t.command[0].substring(1),"sent_"+t.command[0]):t.event}},{key:"_hasFocus",value:function(){return document.hasFocus()}},{key:"_keepalive",value:function(){this._send({method:"ping"})}},{key:"_listenToGlobalExceptions",value:function(){var t=this;window.addEventListener("error",(function(n){var e=n.colno,r=n.error,o=n.filename,i=n.lineno,a=n.message,c=n.type,u=n.timeStamp;t.emit("error",{type:c,colno:e,error:r,filename:o,lineno:i,message:a,timeStamp:u})})),window.addEventListener("unhandledrejection",(function(n){var e=n.type,r=n.reason,o=n.returnValue,i=n.timeStamp;t.emit("error",{type:e,reason:r,returnValue:o,timeStamp:i})}))}},{key:"_notification",value:function(t,n){var e={permission:"denied"};try{return window.Notification?t?new Notification(t,n):Notification:e}catch(t){return e.error=t,e}}},{key:"_send",value:function(t){var n=this.ws&&1==this.ws.readyState&&this.ws;return n&&n.send(JSON.stringify(t)),!!n}},{key:"_setupServiceWorker",value:function(t){var n=this;return navigator.serviceWorker&&navigator.serviceWorker.register(t.urlFor("/sw.js")).then((function(t){return n.emit("serviceWorker",t)}))}},{key:"_ws",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dequeue";this.emit(n),"dequeue"==n&&this._wsReconnectTid&&(clearTimeout(this._wsReconnectTid),delete this._wsReconnectTid),"close"==n?(this._wsReconnectDelay=this._wsReconnectDelay>5e3?500:(this._wsReconnectDelay||0)+500,this._wsReconnectTid||(this._wsReconnectTid=setTimeout((function(){return t._ws()}),this._wsReconnectDelay)),delete this.ws):this.ws?this.wsSendQueue=this.wsSendQueue.filter((function(n){return!t._send(n)})):this.wsUrl&&(this.ws=new WebSocket(this.wsUrl),this.ws.onopen=function(){return t._ws("open")},this.ws.onclose=function(){return t._ws("close")},this.ws.onerror=function(){return t._ws("close")},this.ws.onmessage=function(n){return t._dispatch(JSON.parse(n.data))})}}]),a}(yn));function Ii(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function zi(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?Ii(Object(e),!0).forEach((function(n){Jt(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Ii(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function Bi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Hi=new RegExp("^[#&]"),qi=function(t,n){return n.modes.operator||!1-t.modes.operator||n.modes.voice||!1-t.modes.voice||t.name.localeCompare(n.name)},Fi=0,Gi=function(n){c(s,n);var e,r,a,u=(e=s,function(){var t,n=i(e);if(Bi()){var r=i(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return o(this,t)});function s(n){var e;return t(this,s),(e=u.call(this)).prop("ro","_participants",new Di([],{sorter:qi})),e.prop("ro","api",n.api),e.prop("ro","color",hn(n.dialog_id||n.connection_id||"")),e.prop("ro","connection_id",n.connection_id||""),e.prop("ro","is_private",(function(){return e.dialog_id&&!Hi.test(e.name)})),e.prop("ro","omnibus",n.omnibus||Ui),e.prop("ro","path",xe.dialogPath(n)),e.prop("rw","endOfHistory",!1),e.prop("rw","errors",0),e.prop("rw","first_time",!1),e.prop("rw","last_active",new Mn(n.last_active)),e.prop("rw","last_read",new Mn(n.last_read)),e.prop("rw","messages",[]),e.prop("rw","modes",{}),e.prop("rw","name",n.name||n.dialog_id||n.connection_id||"ERR"),e.prop("rw","status","pending"),e.prop("rw","topic",n.topic||""),e.prop("rw","unread",n.unread||0),n.hasOwnProperty("dialog_id")?(e.prop("ro","dialog_id",n.dialog_id),e.prop("ro","title",(function(){return[e.name,e.connection_id].join(" - ")})),e.prop("rw","frozen",n.frozen||"")):(e.prop("ro","frozen",(function(){return e._calculateFrozen()})),e.prop("ro","title",(function(){return e.name}))),n.dialog_id&&e.prop("persist","wantNotifications",!1,{key:n.dialog_id+":wantNotifications",lazy:!0}),e._addOperations(),e}return E(s,[{key:"addMessage",value:function(t){if(t.from&&-1!=["action","error","private"].indexOf(t.type)){if(t.highlight||this.is_private||this.wantNotifications){var n=t.from==this.name?t.from:Le("%1 in %2",t.from,this.name);this.omnibus.notify(n,t.message)}this.update({unread:this.unread+1})}return this.addMessages("push",[t])}},{key:"addMessages",value:function(t,n){var e=0,r=n.length;switch(t){case"push":e=this.messages.length,r=(n=this.messages.concat(n)).length;break;case"unshift":n=n.concat(this.messages)}for(var o=e;o<r;o++){var i=n[o];if(!i.hasOwnProperty("markdown")){if(!i.from){var a=[!0,this.connection_id||"Convos","Convos"];i.internal=a[0],i.from=a[1],i.fromId=a[2]}i.fromId||(i.fromId=i.from.toLowerCase()),i.type||(i.type="notice"),i.vars&&(i.message=Le.apply(void 0,[i.message].concat(x(i.vars)))),i.id="msg_"+ ++Fi,i.color="Convos"==i.fromId?"inherit":hn(i.from.toLowerCase()),i.ts=new Mn(i.ts),i.embeds=(i.message.match(/https?:\/\/(\S+)/g)||[]).map((function(t){return t.replace(/(\W)?$/,"")})),i.markdown=je(i.message)}}return this.update({messages:n}),this}},{key:"is",value:function(t){return"connection"==t?!this.dialog_id:"conversation"==t?this.dialog_id&&!this.is("notifications"):"frozen"==t?this.frozen&&!0:"locked"==t?"Invalid password."==this.frozen:"notifications"!=t&&("private"==t?this.is_private:"search"!=t&&("unread"==t?this.unread&&!0:this.status==t))}},{key:"load",value:(a=Zt(Yt.mark((function t(){var n,e,r,o,i,a=this,c=arguments;return Yt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=c.length>0&&void 0!==c[0]?c[0]:{},this.messagesOp&&!this.is("loading")){t.next=3;break}return t.abrupt("return",this);case 3:if(!(e="maybe"==n.after?"after":"maybe"==n.before?"before":"")||!this.is("success")){t.next=6;break}return t.abrupt("return",this);case 6:if("after"==e&&delete this.participantsLoaded,"maybe"!=(r=zi({},n,{connection_id:this.connection_id,dialog_id:this.dialog_id})).after||r.limit||(r.limit=200),["after","before"].forEach((function(t){if("maybe"==r[t]&&(r[t]=a._realMessage("before"==t?0:-1)),"number"==typeof r[t]&&(r[t]=a._realMessage(r[t])),an(r[t],"object")&&(r[t]=r[t].ts.toISOString()),an(r[t],"undef"))return delete r[t]})),!((o=this.messages.length)&&r.before&&this.endOfHistory)){t.next=13;break}return t.abrupt("return");case 13:return this.update({status:"loading"}),t.next=16,this.messagesOp.perform(r);case 16:if(i=this.messagesOp.res.body,this.addMessages(r.before?"unshift":"push",i.messages||[]),this.update({status:this.messagesOp.status}),this.messages.length<=10&&this.update({first_time:!0}),o&&r.before&&i.end&&this.update({endOfHistory:!0}),"after"!=e||i.end){t.next=25;break}return this.update({messages:[]}),t.next=25,this.load({});case 25:return t.abrupt("return",this);case 26:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"findParticipant",value:function(t){return this._participants.get(this._participantId(an(t,"undef")?"":t))}},{key:"participants",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n.forEach((function(n){n.nick||(n.nick=n.name||"");var e=t._participantId(n.nick),r=t._participants.get(e);r&&(Object.keys(n).forEach((function(t){r[t]=n[t]})),n=r),n.modes||(n.modes={}),t._calculateModes(ji,n.mode,n.modes),t._participants.set(e,zi({name:n.nick},n,{color:hn(e),id:e,ts:new Mn}))})),n.length&&this.update({_participants:!0}),this._participants.toArray()}},{key:"send",value:function(t,n){this.omnibus.send({connection_id:this.connection_id,dialog_id:this.dialog_id||"",message:t},"function"==typeof n?n:n?this[n].bind(this):null)}},{key:"setLastRead",value:(r=Zt(Yt.mark((function t(){return Yt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.setLastReadOp){t.next=2;break}return t.abrupt("return");case 2:return this.update({errors:0,unread:0}),t.next=5,this.setLastReadOp.perform({connection_id:this.connection_id,dialog_id:this.dialog_id});case 5:this.update(this.setLastReadOp.res.body||{});case 6:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"update",value:function(t){return this._loadParticipants(),m(i(s.prototype),"update",this).call(this,t)}},{key:"wsEventMode",value:function(t){t.nick?(this.participants([{nick:t.nick,mode:t.mode}]),this.addMessage({message:"%1 got mode %2 from %3.",vars:[t.nick,t.mode,t.from]})):this.update({modes:this._calculateModes(Pi,t.mode,this.modes)})}},{key:"wsEventNickChange",value:function(t){var n=this._participantId(t.old_nick);if(this._participants.has(n)&&t.old_nick!=t.new_nick){this._participants.delete(n),this.participants([{nick:t.new_nick}]);var e="me"==t.type?"You (%1) changed nick to %2.":"%1 changed nick to %2.";this.addMessage({message:e,vars:[t.old_nick,t.new_nick]})}}},{key:"wsEventPart",value:function(t){var n=this.findParticipant(t.nick);n&&!n.me&&(this._participants.delete(this._participantId(t.nick)),this.update({_participants:!0}),this.addMessage(this._partMessage(t)))}},{key:"wsEventSentClear",value:function(t){t.errors||(this.update({messages:[]}),this.addMessage({message:"History was cleared for %1.",vars:[this.name]}))}},{key:"wsEventSentNames",value:function(t){this._updateParticipants(t);var n={message:"Participants (%1): %2",vars:[]},e=this._participants.toArray().map((function(t){return(Mi[t.mode]||t.mode||"")+t.name}));e.length>1&&(n.message+=" and %3.",n.vars[2]=e.pop()),n.vars[0]=e.length,n.vars[1]=e.join(", "),this.addMessage(n)}},{key:"wsEventSentTopic",value:function(t){var n=t.topic?"Topic for %1 is: %2":"No topic is set for %1.";this.addMessage({message:n,vars:[this.name,t.topic]}),this.update({topic:t.topic})}},{key:"_addOperations",value:function(){this.prop("ro","messagesOp",this.api.operation("dialogMessages")),this.prop("ro","setLastReadOp",this.api.operation("setDialogLastRead"))}},{key:"_calculateModes",value:function(t,n,e){var r=(n||"").match(/^(\+|-)?(.*)/)||["","+",""],o=p(r,3),i=(o[0],o[1]);o[2].split("").forEach((function(n){e[t[n]||n]="-"!=i}))}},{key:"_calculateFrozen",value:function(){return""}},{key:"_loadParticipants",value:function(){if(!this.participantsLoaded&&this.dialog_id&&this.messagesOp&&!this.is("frozen")&&this.messagesOp.is("success"))return this.participantsLoaded=!0,this.is_private?this.send("/ison","_noop"):this.send("/names","_updateParticipants")}},{key:"_noop",value:function(){}},{key:"_participantId",value:function(t){return t.toLowerCase()}},{key:"_partMessage",value:function(t){var n={message:"%1 parted.",vars:[t.nick]};return t.kicker?(n.message="%1 was kicked by %2"+(t.message?": %3":""),n.vars.push(t.kicker),n.vars.push(t.message)):t.message&&(n.message+=" Reason: %2",n.vars.push(t.message)),n}},{key:"_realMessage",value:function(t){for(var n=-1==t?-1:1,e=this.messages,r=-1==t?this.messages.length-1:0;e[r];){if(!e[r].internal)return e[r];r+=n}return null}},{key:"_updateParticipants",value:function(t){this._participants.clear(),this.participants(t.participants),t.stopPropagation()}}]),s}(yn);function Ki(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function Wi(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?Ki(Object(e),!0).forEach((function(n){Jt(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Ki(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function Vi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Yi=function(t,n){return(t.is_private||0)-(n.is_private||0)||t.name.localeCompare(n.name)},Qi=function(n){c(a,n);var e,r=(e=a,function(){var t,n=i(e);if(Vi()){var r=i(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return o(this,t)});function a(n){var e;t(this,a),(e=r.call(this,n)).prop("ro","dialogs",new Di([],{sorter:Yi})),e.prop("rw","on_connect_commands",n.on_connect_commands||""),e.prop("rw","state",n.state||"queued"),e.prop("rw","wanted_state",n.wanted_state||"connected"),e.prop("rw","url","string"==typeof n.url?new Fn(n.url):n.url||new Fn("convos://loopback"));var o=n.me||{},i=o.nick||e.url.searchParams.get("nick")||"";return e.prop("rw","nick",i),e.prop("rw","real_host",o.real_host||e.url.hostname),e.participants([{nick:i}]),e}return E(a,[{key:"ensureDialog",value:function(t){var n=this,e=this.dialogs.get(t.dialog_id);return e?e.update(t):((e=new Gi(Wi({},t,{connection_id:this.connection_id,api:this.api}))).on("message",(function(t){return n.emit("message",t)})),e.on("update",(function(){return n.update({dialogs:!0})})),this._addDefaultParticipants(e),this.dialogs.set(e.dialog_id,e),this.update({dialogs:!0}),this.emit("dialogadd",e),e)}},{key:"findDialog",value:function(t){return this.dialogs.get(t.dialog_id)||null}},{key:"is",value:function(t){return this.state==t||m(i(a.prototype),"is",this).call(this,t)}},{key:"removeDialog",value:function(t){var n=this.findDialog(t)||t;return this.dialogs.delete(n.dialog_id),this.emit("dialogremove",n),this.update({dialogs:!0})}},{key:"update",value:function(t){return t.url&&"string"==typeof t.url&&(t.url=new Fn(t.url)),m(i(a.prototype),"update",this).call(this,t)}},{key:"wsEventConnection",value:function(t){this.update({state:t.state}),this.addMessage(t.message?{message:"Connection state changed to %1: %2",vars:[t.state,t.message]}:{message:"Connection state changed to %1.",vars:[t.state]})}},{key:"wsEventFrozen",value:function(t){var n=this.findDialog(t),e=n&&n.frozen;this.ensureDialog(t).participants([{nick:this.nick,me:!0}]),t.frozen&&(n||this).addMessage({message:t.frozen,vars:[]}),e&&!t.frozen&&n.addMessage({message:"Connected.",vars:[]})}},{key:"wsEventMe",value:function(t){this.wsEventNickChange(t),this.update(t)}},{key:"wsEventMessage",value:function(t){return t.dialog_id?this.ensureDialog(t).addMessage(t):this.addMessage(t)}},{key:"wsEventNickChange",value:function(t){var n={old_nick:t.old_nick||this.nick,new_nick:t.new_nick||t.nick,type:t.type};t.old_nick==this.nick&&(n.me=!0),m(i(a.prototype),"wsEventNickChange",this).call(this,n),this.dialogs.forEach((function(t){return t.wsEventNickChange(n)}))}},{key:"wsEventError",value:function(t){var n={message:en(t)||t.frozen||"Unknown error from %1.",sent:t,type:"error",vars:t.command||[t.message]},e=(t.message||"").match(/^\/j(oin)? (\S+)/);if(e)return this.ensureDialog(Wi({},t,{dialog_id:e[2]}));var r=t.dialog_id&&t.frozen?this.ensureDialog(t):this.findDialog(t)||this;r.update({errors:this.errors+1}),r.addMessage(n)}},{key:"wsEventJoin",value:function(t){var n=this.ensureDialog(t),e=t.nick||this.nick;e!=this.nick&&n.addMessage({message:"%1 joined.",vars:[e]}),n.participants([{nick:e}])}},{key:"wsEventPart",value:function(t){if(t.nick==this.nick)return this.removeDialog(t);t.dialog_id||this.dialogs.forEach((function(n){return n.wsEventPart(t)}))}},{key:"wsEventQuit",value:function(t){this.wsEventPart(t)}},{key:"wsEventSentJoin",value:function(t){this.wsEventJoin(t)}},{key:"wsEventSentList",value:function(t){var n=t.args||"/*/";this.addMessage(t.done?{message:"Found %1 of %2 dialogs from %3.",vars:[t.dialogs.length,t.n_dialogs,n]}:{message:"Found %1 of %2 dialogs from %3, but dialogs are still loading.",vars:[t.dialogs.length,t.n_dialogs,n]})}},{key:"wsEventSentMode",value:function(t){var n=this.findDialog(t)||this,e=(t.command[1]||"").match(/(\W*)(\w)$/);if(!e)return console.log("[wsEventSentMode] Unable to handle message:",t);switch(e.shift(),e[1]){case"":return n.addMessage({message:"%s has mode %s",vars:[t.dialog_id,t.mode]});case"k":return n.addMessage({message:"+"==e[0]?"Key was set.":"Key was unset."});case"b":return this._wsEventSentModeB(t,e)}}},{key:"_wsEventSentModeB",value:function(t,n){var e=this.findDialog(t)||this;if(t.banlist)t.banlist.length||e.addMessage({message:"Ban list is empty."}),t.banlist.forEach((function(t){e.addMessage({message:"Ban mask %1 set by %2 at %3.",vars:[t.mask,t.by,new Date(1e3*t.ts).toLocaleString()]})}));else{var r="+"==n[0]?"set":"removed";e.addMessage({message:"Ban mask %1 ".concat(r,"."),vars:[t.command[2]]})}}},{key:"wsEventSentQuery",value:function(t){this.ensureDialog(t)}},{key:"wsEventSentWhois",value:function(t){var n="%1 (%2)",e=[t.nick,t.host],r=Object.keys(t.channels).sort().map((function(n){return(Mi[t.channels[n].mode]||"")+n}));t.channels=r,t.idle_for&&r.length?(n+=" has been idle for %3s in %4.",e.push(t.idle_for),e.push(r.join(", "))):t.idle_for&&!r.length?(n+="has been idle for %3s, and is not in any channels.",e.push(t.idle_for)):r.length?(n+=" is active in %3.",e.push(r.join(", "))):n+=" is not in any channels.",(this.findDialog(t)||this).addMessage({message:n,vars:e,sent:t})}},{key:"_addDefaultParticipants",value:function(t){var n=[{nick:this.nick,me:!0}];t.is_private&&n.push({nick:t.name}),t.participants(n)}},{key:"_addOperations",value:function(){this.prop("ro","setLastReadOp",this.api.operation("setConnectionLastRead")),this.prop("ro","messagesOp",this.api.operation("connectionMessages"))}},{key:"_calculateFrozen",value:function(){switch(this.state){case"connected":return"";case"disconnected":return"Disconnected.";case"unreachable":return"Unreachable.";default:return"Connecting..."}}}]),a}(Gi),Zi=e((function(t){function n(t){for(var n=document.createElement("div"),e=[[t,n]],o=[];e.length;){var i=e.shift(),a=p(i,2),c=a[0],u=a[1],s=void 0,f=void 0,d=r(c);if(null===c||"undefined"==d?d="null":Array.isArray(c)&&(d="array"),"array"==d?((f=function(t){return t}).len=c.length,(s=document.createElement("div")).className="json-array "+(f.len?"has-items":"is-empty")):"object"==d?function(){var t=Object.keys(c).sort();(f=function(n){return t[n]}).len=t.length,(s=document.createElement("div")).className="json-object "+(f.len?"has-items":"is-empty")}():((s=document.createElement("span")).className="json-"+d,s.textContent="null"==d?"null":"boolean"!=d?c:c?"true":"false"),f){var l=document.createElement("span");if(l.className="json-type",l.textContent=f.len?d+"["+f.len+"]":"{}",u.appendChild(l),-1!=o.indexOf(c))n.classList.add("has-recursive-items"),s.classList.add("is-seen");else{for(var h=0;h<f.len;h++){var m=f(h),g=document.createElement("div"),v=document.createElement("span");v.className="json-key",v.textContent=m,g.appendChild(v),s.appendChild(g),e.push([c[m],g])}o.push(c)}}u.className="json-item "+s.className.replace(/^json-/,"contains-"),u.appendChild(s)}return n}try{t.exports={jsonhtmlify:n}}catch(t){window.jsonhtmlify=n}})).jsonhtmlify;function Ji(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function Xi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var ta=function(n){c(a,n);var e,r=(e=a,function(){var t,n=i(e);if(Xi()){var r=i(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return o(this,t)});function a(n){var e;return t(this,a),(e=r.call(this)).name="EmbedMaker",e.prop("persist","disableInstagram",!1),e.prop("persist","disableTwitter",!1),e.prop("persist","expandUrlToMedia",!0),e.prop("ro","api",n.api),e.prop("ro","embeds",{}),e}return E(a,[{key:"render",value:function(t,n){var e=this;if(this.expandUrlToMedia){var r={};sn(t,".message__embed",(function(t){r[t.dataset.url]=t})),n.forEach((function(n){e.embeds[n]||e._loadAndRender(n),r[n]||t.appendChild(e._ensureEmbedEl(n)),delete r[n]})),Object.keys(r).forEach((function(t){return r[t].remove()}))}}},{key:"renderInstagram",value:function(t){if(!this.disableInstagram)return window.instgrm?window.instgrm.Embeds.process():void cn("//platform.instagram.com/en_US/embeds.js")}},{key:"renderPasteEl",value:function(t){Ro.highlightBlock(t.querySelector("pre")),sn(t,".le-meta",(function(t){t.addEventListener("click",(function(){return t.parentNode.classList.toggle("is-expanded")}))}))}},{key:"renderPhoto",value:function(t){var n=this;sn(t,"img",(function(t){return t.addEventListener("click",(function(e){e.preventDefault(),n.showMedia(t)}))}))}},{key:"renderTwitter",value:function(t){this.disableTwitter||(window.twttr&&window.twttr.widgets.load(),cn("//platform.twitter.com/widgets.js"))}},{key:"showMedia",value:function(t){var n=nn(document.querySelector("body"),"fullscreen-media-wrapper",(function(t){t.addEventListener("click",(function(n){return pn(t,n.target!=t)}))}));!function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}(n),n.appendChild(t.cloneNode()),pn(n,!0)}},{key:"toggleDetails",value:function(t,n){var e=t.querySelector(".has-message-details");if(e)return pn(e,"toggle");var r=function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?Ji(Object(e),!0).forEach((function(n){Jt(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Ji(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}({},n.sent||n);["bubbles","color","command","dispatchTo","embeds","event","fromId","id","markdown","method","stopPropagation"].forEach((function(t){return delete r[t]})),r.ts=n.ts.toLocaleString(),(e=Zi(r.sent||r)).className=["message__embed","has-message-details",e.className].join(" "),t.appendChild(e)}},{key:"_bufAsBase64",value:function(t){var n=new Uint8Array(t).reduce((function(t,n){return t+String.fromCharCode(n)}),"");return window.btoa(n)}},{key:"_ensureEmbedEl",value:function(t){return this.embeds[t].el||(this.embeds[t].el=nn(null,"message__embed",(function(n){n.dataset.url=t})))}},{key:"_loadAndRender",value:function(t){var n=this;return this.embeds[t]={},this.api.operation("embed",{url:t}).perform().then((function(e){var r=e.res.body;if(r.html){var o=n._ensureEmbedEl(t);o.innerHTML=r.html,sn(o,"a",(function(t){t.target="_blank"})),sn(o,"img",(function(t){return n._processImage(t)}));var i=(r.provider_name||"").toLowerCase();if("instagram"==i)return n.renderInstagram(o);if("twitter"==i)return n.renderTwitter(o);if(-1!=(o.firstChild.className||"").split(/\s+/).indexOf("le-paste"))return n.renderPasteEl(o);sn(o,".le-photo, .le-thumbnail",(function(t){return n.renderPhoto(o)}))}}))}},{key:"_processImage",value:function(t){var n=this;if(!function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location;return 0==t.indexOf("/")||-1!=t.indexOf("://"+n.hostname)}(t.src))return t.addEventListener("error",(function(){return t.style.display="none"}));t.originalSource=t.src,t.src="",t.style.visibility="hidden",fetch(t.originalSource).then((function(e){var r=e.headers.get("Content-Type");return r?e.arrayBuffer().then((function(e){return n._renderImage(t,e,{contentType:r})})):n._renderImage(t,new ArrayBuffer(0),{})}))}},{key:"_renderImage",value:function(t,n,e){var r=e.contentType,o={1:0,3:180,6:90,8:270},i=new DataView(n);if(!r||n.length<2||65496!=i.getUint16(0))return t.src=t.originalSource,void(t.style.visibility="visible");for(var a=i.byteLength,c=2;c<a-2&&!t.orientation;){var u=i.getUint16(c);switch(c+=2,u){case 65505:a=i.getUint16(c)+c,c+=2;break;case 274:t.orientation=o[i.getUint16(c+6,!1)]}}void 0!==t.orientation&&(t.style.transform="rotate("+t.orientation+"deg)"),t.src="data:"+r+";base64,"+this._bufAsBase64(n),t.style.visibility="visible"}}]),a}(yn);function na(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function ea(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var ra=function(n){c(u,n);var e,r,a=(e=u,function(){var t,n=i(e);if(ea()){var r=i(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return o(this,t)});function u(n){return t(this,u),a.call(this,function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?na(Object(e),!0).forEach((function(n){Jt(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):na(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}({},n,{connection_id:"",dialog_id:"notifications",is_private:!0,name:"Notifications"}))}return E(u,[{key:"is",value:function(t){return"notifications"==t||m(i(u.prototype),"is",this).call(this,t)}},{key:"load",value:(r=Zt(Yt.mark((function t(){var n,e=arguments;return Yt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.length>0&&void 0!==e[0]?e[0]:{},this.messagesOp&&!this.is("loading")){t.next=3;break}return t.abrupt("return",this);case 3:if("after"!=("maybe"==n.after?"after":"maybe"==n.before?"before":"")||!this.is("success")){t.next=6;break}return t.abrupt("return",this);case 6:return this.messagesOp.update({status:"pending"}),this.update({messages:[]}),t.next=10,m(i(u.prototype),"load",this).call(this);case 10:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"send",value:function(){}},{key:"_addOperations",value:function(){this.prop("ro","messagesOp",this.api.operation("notificationMessages")),this.prop("ro","setLastReadOp",this.api.operation("readNotifications"))}}]),u}(Gi);function oa(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function ia(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?oa(Object(e),!0).forEach((function(n){Jt(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):oa(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function aa(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var ca=function(n){c(u,n);var e,r,a=(e=u,function(){var t,n=i(e);if(aa()){var r=i(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return o(this,t)});function u(n){var e;return t(this,u),(e=a.call(this,ia({},n,{connection_id:"",dialog_id:"search",is_private:!0,name:"Search"}))).prop("rw","query",null),e.update({status:"success"}),e}return E(u,[{key:"is",value:function(t){return"conversation"!=t&&("search"==t||m(i(u.prototype),"is",this).call(this,t))}},{key:"load",value:(r=Zt(Yt.mark((function t(n){var e,r;return Yt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.is("loading")){t.next=2;break}return t.abrupt("return",this);case 2:if((e=ia({},n)).match=n.match||n.message,null==e.match&&(e.match=""),e.match=e.match.replace(/\s*conversation:(\S+)\s*/,(function(t,n){return[" ",e.dialog_id=n][0]})).replace(/\s*([&#]\S+)\s*/,(function(t,n){return[" ",e.dialog_id=n][0]})),e.match=e.match.trim(),e.match.match(/\S/)){t.next=9;break}return t.abrupt("return",this);case 9:return this.update({messages:[],query:e.match,status:"loading"}),t.next=12,this.messagesOp.perform(e);case 12:return r=this.messagesOp.res.body,this.addMessages(e.before?"unshift":"push",r.messages||[]),t.abrupt("return",this.update({status:this.messagesOp.status}));case 15:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"send",value:function(t){return this.load(ia({},t,{match:t.messages}))}},{key:"_addOperations",value:function(){this.prop("ro","messagesOp",this.api.operation("searchMessages")),this.prop("ro","setLastReadOp",null)}},{key:"_loadParticipants",value:function(){}}]),u}(Gi);function ua(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function sa(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?ua(Object(e),!0).forEach((function(n){Jt(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):ua(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function fa(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var da=function(n){c(u,n);var e,r,a=(e=u,function(){var t,n=i(e);if(fa()){var r=i(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return o(this,t)});function u(n){var e;t(this,u),e=a.call(this);var r=n.api;e.prop("ro","api",(function(){return r})),e.prop("ro","connections",new Di),e.prop("ro","email",(function(){return e.getUserOp.res.body.email||""})),e.prop("ro","embedMaker",new ta({api:r})),e.prop("ro","isFirst",n.isFirst||!1),e.prop("ro","getUserOp",r.operation("getUser",{connections:!0,dialogs:!0})),e.prop("ro","notifications",new ra({api:r})),e.prop("ro","omnibus",n.omnibus||Ui),e.prop("ro","search",new ca({api:r})),e.prop("ro","roles",new Set),e.prop("ro","themes",n.themes||{}),e.prop("ro","unread",(function(){return e._calculateUnread()})),e.prop("rw","activeDialog",e.notifications),e.prop("rw","highlight_keywords",[]),e.prop("rw","status","pending"),e.prop("persist","assetVersion",0),e.prop("persist","colorScheme","auto"),e.prop("persist","experimentalLoad",!1),e.prop("persist","showGrid",!1),e.prop("persist","theme","convos");var o=window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):{addListener:function(){}};return o.matches&&(e._osColorScheme="dark"),o.addListener((function(t){e._osColorScheme=t.matches?"dark":"light"})),e._listenToOmnibus(),e}return E(u,[{key:"activateTheme",value:function(){var t="auto"==this.colorScheme?this._osColorScheme:this.colorScheme,n=this.themes[this.theme];if(!n)return console.error("[Convos] Invalid theme: "+this.theme);var e=n.color_schemes[t]||n.color_schemes.default;document.getElementById("link_selected_theme").setAttribute("href",xe.urlFor("/themes/"+e));var r=document.documentElement;r.className=r.className.replace(/theme-\S+/,(function(){return"theme-"+n.id}))}},{key:"dialogs",value:function(t){var n=[];return this.connections.toArray().forEach((function(e){e.dialogs.toArray().forEach((function(e){t&&!t(e)||n.push(e)}))})),n}},{key:"ensureDialog",value:function(t,n){var e=this;if(t.dialog_id){var r=this.ensureDialog({connection_id:t.connection_id},!0);return this._maybeUpgradeActiveDialog(r.ensureDialog(t))}var o=this.findDialog(t);return o?o.update(t):((o=new Qi(sa({},t,{api:this.api}))).on("dialogadd",(function(t){return e._maybeUpgradeActiveDialog(t)})),o.on("dialogremove",(function(t){return t==e.activeDialog&&e.setActiveDialog(t)})),o.on("update",(function(t){return e.update({connections:!0})})),this.connections.set(o.connection_id,o),this.update({connections:!0}),n?o:this._maybeUpgradeActiveDialog(o))}},{key:"findDialog",value:function(t){var n=this.connections.get(t.connection_id);return t.dialog_id?n&&n.findDialog(t)||null:n}},{key:"is",value:function(t){var n=this;return Array.isArray(t)?!!t.filter((function(t){return n.is(t)})).length:!!this.roles.has(t)||("offline"==t?"fetch"==en(this.getUserOp.err||[],"source"):this.status==t)}},{key:"load",value:(r=Zt(Yt.mark((function t(n){var e,r,o=this;return Yt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==n){t.next=4;break}return this.roles.add("anonymous"),this.update({roles:!0}),t.abrupt("return",this);case 4:if(!this.is("loading")){t.next=6;break}return t.abrupt("return",this);case 6:return this.update({status:"loading"}),t.next=9,this.getUserOp.perform();case 9:return e=this.getUserOp.res.body,r={},this.experimentalLoad||this.connections.clear(),(e.connections||[]).forEach((function(t){return r[o.ensureDialog(sa({},t,{status:"pending"})).path]=!0})),(e.dialogs||[]).forEach((function(t){return r[o.ensureDialog(sa({},t,{status:"pending"})).path]=!0})),this.connections.forEach((function(t){if(!r[t.path])return o.connections.delete(t.connection_id);t.dialogs.forEach((function(n){r[n.path]||t.dialogs.delete(n.dialog_id)}))})),this.notifications.update({unread:e.unread||0}),this.roles.clear(),this.roles.add(e.email?"authenticated":"anonymous"),(e.roles||[]).forEach((function(t){return o.roles.add(t)})),this.email&&this.omnibus.send("ping"),this.update({highlight_keywords:e.highlight_keywords||[],roles:!0,status:this.getUserOp.status}),t.abrupt("return",this);case 22:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"removeDialog",value:function(t){var n=this.findDialog({connection_id:t.connection_id});if(t.dialog_id)return n&&n.removeDialog(t);this.connections.delete(t.connection_id),n==this.activeDialog&&this.setActiveDialog(n),this.update({connections:!0})}},{key:"setActiveDialog",value:function(t){var n=!t.connection_id&&!t.dialog_id&&this.notifications;if(n)return this.update({activeDialog:n});if(n=this.findDialog(t))return this.update({activeDialog:n});var e=sa({},t,{connection_id:t.connection_id||"",api:this.api,frozen:"Not found."});return["dialog_id","name"].forEach((function(n){return t.hasOwnProperty(n)&&(e[n]=t[n])})),this.update({activeDialog:e.dialog_id?new Gi(e):new Qi(e)})}},{key:"update",value:function(t){return m(i(u.prototype),"update",this).call(this,t),(t.colorScheme||t.theme)&&this.activateTheme(),this}},{key:"wsEventPong",value:function(t){this.wsPongTimestamp=t.ts}},{key:"_calculateUnread",value:function(){return this.notifications.unread+this.dialogs((function(t){return t.is_private})).reduce((function(t,n){return t+n.unread}),0)}},{key:"_dispatchMessageToDialog",value:function(t){var n=this.findDialog({connection_id:t.connection_id});if(n&&(n[t.dispatchTo]&&n[t.dispatchTo](t),t.bubbles)){var e=n.findDialog(t);e&&e[t.dispatchTo]&&e[t.dispatchTo](t)}}},{key:"_listenToOmnibus",value:function(){var t=this;this.omnibus.on("close",(function(){t.connections.forEach((function(t){return t.update({state:"unreachable"})})),t.update({status:"pending"})})),this.omnibus.on("open",(function(){if(t.is("pending")&&t.email)return t.load()})),this.omnibus.on("message",(function(n){t._dispatchMessageToDialog(n),t.emit(n.dispatchTo,n),t[n.dispatchTo]&&t[n.dispatchTo](n)})),this.omnibus.on("serviceWorker",(function(n){var e=process.env.asset_version;t.omnibus.debug&&console.log("[serviceWorker]",[t.assetVersion,e].join(" == ")),t.assetVersion!=e&&(n.update(),t.update({assetVersion:e}))}))}},{key:"_maybeUpgradeActiveDialog",value:function(t){var n=this.activeDialog;return t.connection_id&&t.connection_id!=n.connection_id||t.dialog_id&&t.dialog_id!=n.dialog_id||this.update({activeDialog:t}),t}}]),u}(yn),la=Object.prototype.hasOwnProperty,pa=function(){for(var t=[],n=0;n<256;++n)t.push("%"+((n<16?"0":"")+n.toString(16)).toUpperCase());return t}(),ha=function(t,n){for(var e=n&&n.plainObjects?Object.create(null):{},r=0;r<t.length;++r)void 0!==t[r]&&(e[r]=t[r]);return e},ma={arrayToObject:ha,assign:function(t,n){return Object.keys(n).reduce((function(t,e){return t[e]=n[e],t}),t)},compact:function(t){for(var n=[{obj:{o:t},prop:"o"}],e=[],o=0;o<n.length;++o)for(var i=n[o],a=i.obj[i.prop],c=Object.keys(a),u=0;u<c.length;++u){var s=c[u],f=a[s];"object"===r(f)&&null!==f&&-1===e.indexOf(f)&&(n.push({obj:a,prop:s}),e.push(f))}return function(t){for(var n;t.length;){var e=t.pop();if(n=e.obj[e.prop],Array.isArray(n)){for(var r=[],o=0;o<n.length;++o)void 0!==n[o]&&r.push(n[o]);e.obj[e.prop]=r}}return n}(n)},decode:function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(n){return t}},encode:function(t){if(0===t.length)return t;for(var n="string"==typeof t?t:String(t),e="",r=0;r<n.length;++r){var o=n.charCodeAt(r);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?e+=n.charAt(r):o<128?e+=pa[o]:o<2048?e+=pa[192|o>>6]+pa[128|63&o]:o<55296||o>=57344?e+=pa[224|o>>12]+pa[128|o>>6&63]+pa[128|63&o]:(r+=1,o=65536+((1023&o)<<10|1023&n.charCodeAt(r)),e+=pa[240|o>>18]+pa[128|o>>12&63]+pa[128|o>>6&63]+pa[128|63&o])}return e},isBuffer:function(t){return null!=t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},merge:function t(n,e,o){if(!e)return n;if("object"!==r(e)){if(Array.isArray(n))n.push(e);else{if("object"!==r(n))return[n,e];(o.plainObjects||o.allowPrototypes||!la.call(Object.prototype,e))&&(n[e]=!0)}return n}if("object"!==r(n))return[n].concat(e);var i=n;return Array.isArray(n)&&!Array.isArray(e)&&(i=ha(n,o)),Array.isArray(n)&&Array.isArray(e)?(e.forEach((function(e,i){la.call(n,i)?n[i]&&"object"===r(n[i])?n[i]=t(n[i],e,o):n.push(e):n[i]=e})),n):Object.keys(e).reduce((function(n,r){var i=e[r];return la.call(n,r)?n[r]=t(n[r],i,o):n[r]=i,n}),i)}},ga=(String.prototype.replace,Date.prototype.toISOString,Object.prototype.hasOwnProperty),va={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:ma.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},$a=function(t,n,e){if(t){var r=e.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/g,i=/(\[[^[\]]*])/.exec(r),a=i?r.slice(0,i.index):r,c=[];if(a){if(!e.plainObjects&&ga.call(Object.prototype,a)&&!e.allowPrototypes)return;c.push(a)}for(var u=0;null!==(i=o.exec(r))&&u<e.depth;){if(u+=1,!e.plainObjects&&ga.call(Object.prototype,i[1].slice(1,-1))&&!e.allowPrototypes)return;c.push(i[1])}return i&&c.push("["+r.slice(i.index)+"]"),function(t,n,e){for(var r=n,o=t.length-1;o>=0;--o){var i,a=t[o];if("[]"===a)i=(i=[]).concat(r);else{i=e.plainObjects?Object.create(null):{};var c="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,u=parseInt(c,10);!isNaN(u)&&a!==c&&String(u)===c&&u>=0&&e.parseArrays&&u<=e.arrayLimit?(i=[])[u]=r:i[c]=r}r=i}return r}(c,n,e)}},ya=function(t,n){var e=n?ma.assign({},n):{};if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(e.ignoreQueryPrefix=!0===e.ignoreQueryPrefix,e.delimiter="string"==typeof e.delimiter||ma.isRegExp(e.delimiter)?e.delimiter:va.delimiter,e.depth="number"==typeof e.depth?e.depth:va.depth,e.arrayLimit="number"==typeof e.arrayLimit?e.arrayLimit:va.arrayLimit,e.parseArrays=!1!==e.parseArrays,e.decoder="function"==typeof e.decoder?e.decoder:va.decoder,e.allowDots="boolean"==typeof e.allowDots?e.allowDots:va.allowDots,e.plainObjects="boolean"==typeof e.plainObjects?e.plainObjects:va.plainObjects,e.allowPrototypes="boolean"==typeof e.allowPrototypes?e.allowPrototypes:va.allowPrototypes,e.parameterLimit="number"==typeof e.parameterLimit?e.parameterLimit:va.parameterLimit,e.strictNullHandling="boolean"==typeof e.strictNullHandling?e.strictNullHandling:va.strictNullHandling,""===t||null==t)return e.plainObjects?Object.create(null):{};for(var r="string"==typeof t?function(t,n){for(var e={},r=n.ignoreQueryPrefix?t.replace(/^\?/,""):t,o=n.parameterLimit===1/0?void 0:n.parameterLimit,i=r.split(n.delimiter,o),a=0;a<i.length;++a){var c,u,s=i[a],f=s.indexOf("]="),d=-1===f?s.indexOf("="):f+1;-1===d?(c=n.decoder(s,va.decoder),u=n.strictNullHandling?null:""):(c=n.decoder(s.slice(0,d),va.decoder),u=n.decoder(s.slice(d+1),va.decoder)),ga.call(e,c)?e[c]=[].concat(e[c]).concat(u):e[c]=u}return e}(t,e):t,o=e.plainObjects?Object.create(null):{},i=Object.keys(r),a=0;a<i.length;++a){var c=i[a],u=$a(c,r[c],e);o=ma.merge(o,u,e)}return ma.compact(o)};function ba(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function wa(t){var n,e,r,o,i,a,c,u,s=Le('Do you want to chat with "%1"?',t[0].dialog_id)+"",f=new Tn({props:{type:"button",icon:"thumbs-up",$$slots:{default:[xa]},$$scope:{ctx:t}}});f.$on("click",t[2]);var d=new Wr({props:{href:"/chat",class:"btn",$$slots:{default:[ka]},$$scope:{ctx:t}}});return{c:function(){(n=W("h2")).textContent="".concat(Le("You are not part of this conversation.")),e=Y(),r=W("p"),o=V(s),i=Y(),a=W("p"),qt(f.$$.fragment),c=Y(),qt(d.$$.fragment)},m:function(t,s){F(t,n,s),F(t,e,s),F(t,r,s),q(r,o),F(t,i,s),F(t,a,s),Ft(f,a,null),q(a,c),Ft(d,a,null),u=!0},p:function(t,n){(!u||1&n)&&s!==(s=Le('Do you want to chat with "%1"?',t[0].dialog_id)+"")&&nt(o,s);var e={};8&n&&(e.$$scope={dirty:n,ctx:t}),f.$set(e);var r={};8&n&&(r.$$scope={dirty:n,ctx:t}),d.$set(r)},i:function(t){u||(Tt(f.$$.fragment,t),Tt(d.$$.fragment,t),u=!0)},o:function(t){Ut(f.$$.fragment,t),Ut(d.$$.fragment,t),u=!1},d:function(t){t&&G(n),t&&G(e),t&&G(r),t&&G(i),t&&G(a),Gt(f),Gt(d)}}}function _a(t){var n,e,r,o,i,a,c,u,s=Le('Do you want to create the connection "%1"?',t[0].connection_id)+"",f=new Wr({props:{href:"/settings/connection?server="+encodeURIComponent(t[0].connection_id)+"&dialog="+encodeURIComponent(t[0].dialog_id),class:"btn",$$slots:{default:[Ea]},$$scope:{ctx:t}}}),d=new Wr({props:{href:"/chat",class:"btn",$$slots:{default:[Oa]},$$scope:{ctx:t}}});return{c:function(){(n=W("h2")).textContent="".concat(Le("Connection does not exist.")),e=Y(),r=W("p"),o=V(s),i=Y(),a=W("p"),qt(f.$$.fragment),c=Y(),qt(d.$$.fragment)},m:function(t,s){F(t,n,s),F(t,e,s),F(t,r,s),q(r,o),F(t,i,s),F(t,a,s),Ft(f,a,null),q(a,c),Ft(d,a,null),u=!0},p:function(t,n){(!u||1&n)&&s!==(s=Le('Do you want to create the connection "%1"?',t[0].connection_id)+"")&&nt(o,s);var e={};1&n&&(e.href="/settings/connection?server="+encodeURIComponent(t[0].connection_id)+"&dialog="+encodeURIComponent(t[0].dialog_id)),8&n&&(e.$$scope={dirty:n,ctx:t}),f.$set(e);var r={};8&n&&(r.$$scope={dirty:n,ctx:t}),d.$set(r)},i:function(t){u||(Tt(f.$$.fragment,t),Tt(d.$$.fragment,t),u=!0)},o:function(t){Ut(f.$$.fragment,t),Ut(d.$$.fragment,t),u=!1},d:function(t){t&&G(n),t&&G(e),t&&G(r),t&&G(i),t&&G(a),Gt(f),Gt(d)}}}function xa(t){var n,e=Le("Yes")+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function ka(t){var n,e,r,o=Le("No")+"",i=new Nn({props:{name:"thumbs-down"}});return{c:function(){qt(i.$$.fragment),n=Y(),e=V(o)},m:function(t,o){Ft(i,t,o),F(t,n,o),F(t,e,o),r=!0},p:O,i:function(t){r||(Tt(i.$$.fragment,t),r=!0)},o:function(t){Ut(i.$$.fragment,t),r=!1},d:function(t){Gt(i,t),t&&G(n),t&&G(e)}}}function Ea(t){var n,e,r,o=Le("Yes")+"",i=new Nn({props:{name:"thumbs-up"}});return{c:function(){qt(i.$$.fragment),n=Y(),e=V(o)},m:function(t,o){Ft(i,t,o),F(t,n,o),F(t,e,o),r=!0},p:O,i:function(t){r||(Tt(i.$$.fragment,t),r=!0)},o:function(t){Ut(i.$$.fragment,t),r=!1},d:function(t){Gt(i,t),t&&G(n),t&&G(e)}}}function Oa(t){var n,e,r,o=Le("No")+"",i=new Nn({props:{name:"thumbs-down"}});return{c:function(){qt(i.$$.fragment),n=Y(),e=V(o)},m:function(t,o){Ft(i,t,o),F(t,n,o),F(t,e,o),r=!0},p:O,i:function(t){r||(Tt(i.$$.fragment,t),r=!0)},o:function(t){Ut(i.$$.fragment,t),r=!1},d:function(t){Gt(i,t),t&&G(n),t&&G(e)}}}function Ra(t){var n,e,r,o,i,a=[_a,wa],c=[];function u(t,e){return 1&e&&(n=!t[1].findDialog({connection_id:t[0].connection_id})),n?0:1}return e=u(t,-1),r=c[e]=a[e](t),{c:function(){r.c(),o=Q()},m:function(t,n){c[e].m(t,n),F(t,o,n),i=!0},p:function(t,n){var i=p(n,1)[0],s=e;(e=u(t,i))===s?c[e].p(t,i):(At(),Ut(c[s],1,1,(function(){c[s]=null})),Lt(),(r=c[e])||(r=c[e]=a[e](t)).c(),Tt(r,1),r.m(o.parentNode,o))},i:function(t){i||(Tt(r),i=!0)},o:function(t){Ut(r),i=!1},d:function(t){c[e].d(t),t&&G(o)}}}function Ca(t,n,e){var r=n.dialog,o=void 0===r?"":r,i=mt("user");return t.$set=function(t){"dialog"in t&&e(0,o=t.dialog)},[o,i,function(){return o.send("/join "+o.dialog_id)}]}var Sa=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(ba()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,Ca,Ra,P,{dialog:0}),r}return u}(Vt);function Na(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Da(t){var n,e,r,o,i,a,c,u,s,f=t[1].unread+"",d=t[4].default,l=A(d,t,t[3],null),h=new Nn({props:{name:t[0].activeMenu?"times-circle":"bars"}});return{c:function(){n=W("header"),l&&l.c(),e=Y(),r=W("a"),qt(h.$$.fragment),o=Y(),i=W("small"),a=V(f),X(i,"class","chat-header__unread"),i.hidden=c=!t[1].unread,X(r,"href",u="#activeMenu:"+(t[0].activeMenu?"":"nav")),X(r,"class","chat-header__hamburger"),X(n,"class","chat-header")},m:function(t,c){F(t,n,c),l&&l.m(n,null),q(n,e),q(n,r),Ft(h,r,null),q(r,o),q(r,i),q(i,a),s=!0},p:function(t,n){var e=p(n,1)[0];l&&l.p&&8&e&&l.p(L(d,t,t[3],null),T(d,t[3],e,null));var o={};1&e&&(o.name=t[0].activeMenu?"times-circle":"bars"),h.$set(o),(!s||2&e)&&f!==(f=t[1].unread+"")&&nt(a,f),(!s||2&e&&c!==(c=!t[1].unread))&&(i.hidden=c),(!s||1&e&&u!==(u="#activeMenu:"+(t[0].activeMenu?"":"nav")))&&X(r,"href",u)},i:function(t){s||(Tt(l,t),Tt(h.$$.fragment,t),s=!0)},o:function(t){Ut(l,t),Ut(h.$$.fragment,t),s=!1},d:function(t){t&&G(n),l&&l.d(t),Gt(h)}}}function Pa(t,n,e){var r,o;j(t,xe,(function(t){return e(0,r=t)}));var i=mt("user");j(t,i,(function(t){return e(1,o=t)}));var a=n.$$slots,c=void 0===a?{}:a,u=n.$$scope;return t.$set=function(t){"$$scope"in t&&e(3,u=t.$$scope)},[r,o,i,u,c]}var Ma=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(Na()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,Pa,Da,P,{}),r}return u}(Vt);function ja(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,n){if(!t)return;if("string"==typeof t)return Aa(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Aa(t,n)}(t))){var n=0,e=function(){};return{s:e,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){a=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}function Aa(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var La=[];function Ta(t,n){return Ta[t]?Ta[t](n):[]}function Ua(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Ia(t,n,e){var r=t.slice();return r[30]=n[e],r[32]=e,r}function za(t){var n,e,r=(t[30].text||t[30].val)+"";return{c:function(){X(n=W("a"),"href","#index:"+t[32]),X(n,"tabindex","-1"),ot(n,"has-focus",t[32]==t[2])},m:function(o,i,a){F(o,n,i),n.innerHTML=r,a&&e(),e=Z(n,"click",J(t[10]))},p:function(t,e){128&e[0]&&r!==(r=(t[30].text||t[30].val)+"")&&(n.innerHTML=r),4&e[0]&&ot(n,"has-focus",t[32]==t[2])},d:function(t){t&&G(n),e()}}}function Ba(t){for(var n,e,r,o,i,a,c,u,s,f,d,l,p,h,m,g,v=new Nn({props:{name:t[9]}}),$=t[7],y=[],b=0;b<$.length;b+=1)y[b]=za(Ia(t,$,b));return{c:function(){n=W("form"),e=W("textarea"),r=Y(),o=W("div"),i=W("span"),a=Y(),c=W("input"),s=Y(),f=W("a"),qt(v.$$.fragment),d=Y(),l=W("div");for(var m=0;m<y.length;m+=1)y[m].c();X(e,"id","chat_input"),X(e,"placeholder",t[8]),X(c,"type","file"),X(o,"class","chat-input__upload-wrapper"),o.hidden=u=!t[0].is("conversation"),X(f,"href","#send"),X(f,"class","chat-input__send"),X(l,"class",p="chat-input_autocomplete chat-input_autocomplete_"+t[3]),l.hidden=h=!t[7].length,X(n,"class","chat-input")},m:function(u,p,h){F(u,n,p),q(n,e),t[25](e),q(n,r),q(n,o),q(o,i),q(o,a),q(o,c),t[29](c),q(n,s),q(n,f),Ft(v,f,null),q(n,d),q(n,l);for(var $=0;$<y.length;$+=1)y[$].m(l,null);m=!0,h&&N(g),g=[Z(e,"change",t[26]),Z(e,"keydown",t[27]),Z(e,"keyup",t[28]),Z(c,"change",t[11]),Z(f,"click",t[1]),Z(n,"submit",J(t[24]))]},p:function(t,n){(!m||256&n[0])&&X(e,"placeholder",t[8]),(!m||1&n[0]&&u!==(u=!t[0].is("conversation")))&&(o.hidden=u);var r={};if(512&n[0]&&(r.name=t[9]),v.$set(r),1156&n[0]){var i;for($=t[7],i=0;i<$.length;i+=1){var a=Ia(t,$,i);y[i]?y[i].p(a,n):(y[i]=za(a),y[i].c(),y[i].m(l,null))}for(;i<y.length;i+=1)y[i].d(1);y.length=$.length}(!m||8&n[0]&&p!==(p="chat-input_autocomplete chat-input_autocomplete_"+t[3]))&&X(l,"class",p),(!m||128&n[0]&&h!==(h=!t[7].length))&&(l.hidden=h)},i:function(t){m||(Tt(v.$$.fragment,t),m=!0)},o:function(t){Ut(v.$$.fragment,t),m=!1},d:function(e){e&&G(n),t[25](null),t[29](null),Gt(v),K(y,e),N(g)}}}function Ha(t,n,e){var r=n.dialog,o=void 0===r?{}:r;var i,a,c=0,u="none",s=0,f=mt("user");function d(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.space||"";e(4,i.value=_[0]+t+r+_[3],i),e(4,i.selectionStart=e(4,i.selectionEnd=(_[0]+t+r).length,i),i),r.length&&e(5,s=i.selectionStart)}function l(t){var n=p(t,4),r=n[0],i=n[1],a=n[2];n[3];e(3,u=":"==i&&a.length?"emojis":"/"!=i||r.length?"@"==i&&a.length?"nicks":"#"==i||"&"==i?"dialogs":"none":"commands"),e(2,c=0);var s=Ta(u,{dialog:o,query:i+a,user:f});return s.length&&s.unshift({val:i+a}),s}function h(t){if(!i)return["","","",""];var n="",e="";return[i.value.substring(0,t).replace(/(\S)(\S*)$/,(function(t,r,o){return n=r,e=o,""})),n,e,i.value.substring(t)]}function m(t){var n=b[c];n&&d(n.val,t)}function g(t,n){b.length&&(t.preventDefault(),e(2,c+=n),c<0&&e(2,c=b.length-1),c>=b.length&&e(2,c=0),m({space:""}))}function v(t){t.preventDefault&&t.preventDefault();var n={method:"send",dialog:o};n.message=t.preventDefault?i.value:t.message,n.message=n.message.replace(/^\/close/i,"/part"),n.message=n.message.replace(/^\/j\b/i,"/join");(n.message.match(/^\/(\w+)\s*(\S*)/)||["","message",""]).slice(1);n.message.length&&(o.is("search")?o:f.omnibus).send(n,(function(t){t.errors&&o&&(t.stopPropagation(),t.vars=[t.message,en(t.errors)],t.message='Could not send message "%1": %2',o.addMessage(t))}));o.is("conversation")&&e(4,i.value="",i),e(5,s=0)}function $(t){var n=t.target&&t.target.files||t.dataTransfer&&t.dataTransfer.files;if(n&&n.length){if(n.length>1)return console.log("Cannot upload more than one file.");var e=new FormData;e.append("file",n[0]),f.api.operation("uploadFile").perform({formData:e}).then((function(t){var n=t.res.body;if(n.files&&n.files.length)return d(n.files[0].url);n.errors&&o.addMessage({message:"Could not upload file: %1",vars:[Le(en(n.errors))],type:"error"})}))}}ht((function(){e(6,a.uploader=$,a)}));var y={ArrowDown:function(t){return g(t,t.shiftKey?4:1)},ArrowUp:function(t){return g(t,t.shiftKey?-4:-1)},Tab:function(t){return g(t,t.shiftKey?-1:1)},Enter:function(t){b[c]?(t.preventDefault(),m({space:" "})):t.altKey||t.ctrlKey||t.metaKey||t.shiftKey||v(t)},Fallback:function(t){},Release:function(t){1!=t.key.length&&-1==["ArrowLeft","ArrowRight","Backspace"].indexOf(t.key)||e(5,s=i.selectionStart)}};var b,w,_,x,k,E;return t.$set=function(t){"dialog"in t&&e(0,o=t.dialog)},t.$$.update=function(){32&t.$$.dirty[0]&&e(16,_=h(s)),65536&t.$$.dirty[0]&&e(7,b=l(_)||[]),1&t.$$.dirty[0]&&e(17,w=f.findDialog({connection_id:o.connection_id})),131072&t.$$.dirty[0]&&e(18,x=w&&w.nick),393217&t.$$.dirty[0]&&e(8,k=o.is("search")?"What are you looking for?":w&&w.is("unreachable")?Le("Connecting..."):Le("What is on your mind %1?",x)),1&t.$$.dirty[0]&&e(9,E=o.is("search")?"search":"paper-plane")},[o,v,c,u,i,s,a,b,k,E,function(t){e(2,c=parseInt(t.target.closest("a").href.replace(/.*index:/,""),10)),m({space:" "}),i.focus()},$,y,function(){return a},function(t){e(4,i.value=t,i)},d,_,w,x,f,l,h,m,g,function(n){gt(t,n)},function(t){$t[t?"unshift":"push"]((function(){e(4,i=t)}))},function(t){e(5,s=i.selectionStart)},function(t){return(y[t.key]||y.Fallback)(t)},function(t){return y.Release(t)},function(t){$t[t?"unshift":"push"]((function(){e(6,a=t)}))}]}Ta.commands=function(t){for(var n=t.query,e=[],r=0;r<La.length;r++)if(0==La[r].cmd.indexOf(n)){var o=La[r].alias||La[r].cmd,i=La[r].example.replace(/</g,"&lt;");e.push({text:i,val:o})}return e},Ta.dialogs=function(t){for(var n=t.dialog,e=t.query,r=t.user,o=r.findDialog({connection_id:n.connection_id}),i=o?o.dialogs.toArray():r.dialogs(),a=[],c=0;c<i.length&&!(-1!=i[c].name.toLowerCase().indexOf(e)&&(a.push({text:i[c].name,val:i[c].dialog_id}),a.length>=20));c++);return a},Ta.emojis=function(t){var n=t.query,e=[];return[":","_"].map((function(t){return t+n.slice(1,2)})).forEach((function(t){for(var r=Me(t,"group"),o=0;o<r.length&&(r[o].shortname.indexOf(n)>=0&&e.push({val:r[o].emoji,text:je(r[o].emoji)}),!(e.length>=20));o++);})),e},Ta.nicks=function(t){var n,e=t.dialog,r=t.query,o=e.participants(),i=new RegExp("^"+fn(r.slice(1)),"i"),a=[],c=ja(o);try{for(c.s();!(n=c.n()).done;){var u=n.value;if(a.length>=20)break;u.nick.match(i)&&a.push({val:u.nick})}}catch(t){c.e(t)}finally{c.f()}return a},La.push({cmd:"/me",example:"/me <msg>",description:"Send message as an action."}),La.push({cmd:"/say",example:"/say <msg>",description:'Used when you want to send a message starting with "/".'}),La.push({cmd:"/topic",example:"/topic or /topic <new topic>",description:"Show current topic, or set a new one."}),La.push({cmd:"/whois",example:"/whois <nick>",description:"Show information about a user."}),La.push({cmd:"/query",example:"/query <nick>",description:"Open up a new chat window with nick."}),La.push({cmd:"/msg",example:"/msg <nick> <msg>",description:"Send a direct message to nick."}),La.push({cmd:"/names",example:"/names",description:"Show participants in the channel."}),La.push({cmd:"/join",example:"/join <#channel>",description:"Join channel and open up a chat window."}),La.push({cmd:"/nick",example:"/nick <nick>",description:"Change your wanted nick."}),La.push({cmd:"/part",example:"/part",description:"Leave channel, and close window."}),La.push({cmd:"/close",example:"/close <nick>",description:"Close conversation with nick, defaults to current active."}),La.push({cmd:"/kick",example:"/kick <nick>",description:"Kick a user from the current channel."}),La.push({cmd:"/mode",example:"/mode [+|-][b|o|v] <user>",description:"Change mode of yourself or a user"}),La.push({cmd:"/reconnect",example:"/reconnect",description:"Restart the current connection."}),La.push({cmd:"/clear",example:"/clear history <#channel> or /clear history <nick>",description:"Delete all history for the given conversation."}),La.push({cmd:"/raw",example:"/raw <msg>",description:"Allow you to send any RFC 2812 message."});var qa=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(Ua()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,Ha,Ba,P,{dialog:0,getUploadEl:13,setValue:14,add:15,sendMessage:1},[-1,-1]),r}return E(u,[{key:"getUploadEl",get:function(){return this.$$.ctx[13]}},{key:"setValue",get:function(){return this.$$.ctx[14]}},{key:"add",get:function(){return this.$$.ctx[15]}},{key:"sendMessage",get:function(){return this.$$.ctx[1]}}]),u}(Vt);function Fa(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Ga(t){var n,e,r,o,i,a,c,u,s=new Nn({props:{name:"pick:Convos",color:"inherit"}}),f=t[2].default,d=A(f,t,t[1],null);return{c:function(){n=W("div"),qt(s.$$.fragment),e=Y(),(r=W("b")).textContent="".concat(t[0]),o=Y(),(i=W("a")).textContent="".concat(Le("Convos")),a=Y(),c=W("div"),d&&d.c(),X(r,"class","message__ts"),X(i,"href","/settings/account"),X(i,"class","message__from"),X(i,"color","inherit"),X(c,"class","message__text"),X(n,"class","message is-type-notice is-highlighted")},m:function(t,f){F(t,n,f),Ft(s,n,null),q(n,e),q(n,r),q(n,o),q(n,i),q(n,a),q(n,c),d&&d.m(c,null),u=!0},p:function(t,n){var e=p(n,1)[0];d&&d.p&&2&e&&d.p(L(f,t,t[1],null),T(f,t[1],e,null))},i:function(t){u||(Tt(s.$$.fragment,t),Tt(d,t),u=!0)},o:function(t){Ut(s.$$.fragment,t),Ut(d,t),u=!1},d:function(t){t&&G(n),Gt(s),d&&d.d(t)}}}function Ka(t,n,e){var r=(new Mn).getHM(),o=n.$$slots,i=void 0===o?{}:o,a=n.$$scope;return t.$set=function(t){"$$scope"in t&&e(1,a=t.$$scope)},[r,a,i]}var Wa=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(Fa()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,Ka,Ga,P,{}),r}return u}(Vt);function Va(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Ya(t){var n,e,r,o,i,a=new Nn({props:{name:t[1],animation:t[2]}}),c=t[4].default,u=A(c,t,t[3],null);return{c:function(){n=W("div"),e=W("span"),qt(a.$$.fragment),r=Y(),u&&u.c(),X(n,"class",o="message-status-line "+t[0])},m:function(t,o){F(t,n,o),q(n,e),Ft(a,e,null),q(e,r),u&&u.m(e,null),i=!0},p:function(t,e){var r=p(e,1)[0],s={};2&r&&(s.name=t[1]),4&r&&(s.animation=t[2]),a.$set(s),u&&u.p&&8&r&&u.p(L(c,t,t[3],null),T(c,t[3],r,null)),(!i||1&r&&o!==(o="message-status-line "+t[0]))&&X(n,"class",o)},i:function(t){i||(Tt(a.$$.fragment,t),Tt(u,t),i=!0)},o:function(t){Ut(a.$$.fragment,t),Ut(u,t),i=!1},d:function(t){t&&G(n),Gt(a),u&&u.d(t)}}}function Qa(t,n,e){var r=n.class,o=void 0===r?"":r,i=n.icon,a=void 0===i?"":i,c=n.animation,u=void 0===c?"":c,s=n.$$slots,f=void 0===s?{}:s,d=n.$$scope;return t.$set=function(t){"class"in t&&e(0,o=t.class),"icon"in t&&e(1,a=t.icon),"animation"in t&&e(2,u=t.animation),"$$scope"in t&&e(3,d=t.$$scope)},[o,a,u,d,f]}var Za=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(Va()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,Qa,Ya,P,{class:0,icon:1,animation:2}),r}return u}(Vt);function Ja(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function Xa(t){return function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?Ja(Object(e),!0).forEach((function(n){Jt(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Ja(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}({color:"inherit",from:"Convos",fromId:"Convos",markdown:Te.apply(void 0,[t.message].concat(x(t.vars))),ts:new Mn,type:"error"},t)}var tc={};function nc(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function ec(t,n,e){var r=t.slice();return r[21]=n[e],r[23]=e,r}function rc(t){var n;return{c:function(){(n=W("h2")).textContent="".concat(Le("No notifications."))},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function oc(t){var n,e=new Za({props:{class:"for-loading",icon:"spinner",animation:"spin",$$slots:{default:[ic]},$$scope:{ctx:t}}});return{c:function(){qt(e.$$.fragment)},m:function(t,r){Ft(e,t,r),n=!0},p:function(t,n){var r={};16777216&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Tt(e.$$.fragment,t),n=!0)},o:function(t){Ut(e.$$.fragment,t),n=!1},d:function(t){Gt(e,t)}}}function ic(t){var n,e=Le("Loading...")+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function ac(t){var n,e=new Za({props:{class:"for-last-read",icon:"comments",$$slots:{default:[cc]},$$scope:{ctx:t}}});return{c:function(){qt(e.$$.fragment)},m:function(t,r){Ft(e,t,r),n=!0},p:function(t,n){var r={};16777216&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Tt(e.$$.fragment,t),n=!0)},o:function(t){Ut(e.$$.fragment,t),n=!1},d:function(t){Gt(e,t)}}}function cc(t){var n,e=Le("New messages")+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function uc(t){var n,e=new Za({props:{class:"for-day-changed",icon:"calendar-alt",$$slots:{default:[fc]},$$scope:{ctx:t}}});return{c:function(){qt(e.$$.fragment)},m:function(t,r){Ft(e,t,r),n=!0},p:function(t,n){var r={};16777224&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Tt(e.$$.fragment,t),n=!0)},o:function(t){Ut(e.$$.fragment,t),n=!1},d:function(t){Gt(e,t)}}}function sc(t){var n,e=new Za({props:{class:"for-start-of-history",icon:"calendar-alt",$$slots:{default:[dc]},$$scope:{ctx:t}}});return{c:function(){qt(e.$$.fragment)},m:function(t,r){Ft(e,t,r),n=!0},p:function(t,n){var r={};16777224&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Tt(e.$$.fragment,t),n=!0)},o:function(t){Ut(e.$$.fragment,t),n=!1},d:function(t){Gt(e,t)}}}function fc(t){var n,e=t[21].ts.getHumanDate()+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:function(t,r){8&r&&e!==(e=t[21].ts.getHumanDate()+"")&&nt(n,e)},d:function(t){t&&G(n)}}}function dc(t){var n,e=Le("Started chatting on %1",t[21].ts.getHumanDate())+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:function(t,r){8&r&&e!==(e=Le("Started chatting on %1",t[21].ts.getHumanDate())+"")&&nt(n,e)},d:function(t){t&&G(n)}}}function lc(t){var n,e,r,o=Le("%1 in %2",t[21].from,t[21].dialog_id)+"";return{c:function(){n=W("a"),e=V(o),X(n,"href",r=Cc(t[21])),X(n,"class","message__from"),rt(n,"color",t[21].color)},m:function(t,r){F(t,n,r),q(n,e)},p:function(t,i){8&i&&o!==(o=Le("%1 in %2",t[21].from,t[21].dialog_id)+"")&&nt(e,o),8&i&&r!==(r=Cc(t[21]))&&X(n,"href",r),8&i&&rt(n,"color",t[21].color)},d:function(t){t&&G(n)}}}function pc(t){var n,e,r,o,i=t[21].from+"";function a(){for(var n,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(n=t)[16].apply(n,[t[21]].concat(r))}return{c:function(){n=W("a"),e=V(i),X(n,"href",r="#input:"+t[21].from),X(n,"class","message__from"),rt(n,"color",t[21].color),X(n,"tabindex","-1")},m:function(t,r,i){F(t,n,r),q(n,e),i&&o(),o=Z(n,"click",J(a))},p:function(o,a){t=o,8&a&&i!==(i=t[21].from+"")&&nt(e,i),8&a&&r!==(r="#input:"+t[21].from)&&X(n,"href",r),8&a&&rt(n,"color",t[21].color)},d:function(t){t&&G(n),o()}}}function hc(t){var n,e=new Nn({props:{name:"error"==t[21].type?"exclamation-circle":"info-circle"}});return e.$on("click",t[13]),{c:function(){qt(e.$$.fragment)},m:function(t,r){Ft(e,t,r),n=!0},p:function(t,n){var r={};8&n&&(r.name="error"==t[21].type?"exclamation-circle":"info-circle"),e.$set(r)},i:function(t){n||(Tt(e.$$.fragment,t),n=!0)},o:function(t){Ut(e.$$.fragment,t),n=!1},d:function(t){Gt(e,t)}}}function mc(t){var n,e,r,o,i,a,c,u,s,f,d,l,p,h,m,g,v,$,y,b,w,_=t[21].ts.getHM()+"",x=t[21].ts.toLocaleString()+"",k=Rc(t[21]),E=t[21].markdown+"",O=t[23]&&t[23]==t[3].length-t[6]&&ac(t),R=[sc,uc],C=[];function S(t,n){return 0==t[23]&&t[5].endOfHistory?0:t[21].dayChanged?1:-1}~(e=S(t))&&(r=C[e]=R[e](t));var N=new Nn({props:{name:"pick:"+t[21].fromId,color:t[21].color}});function D(t,n){return t[5].connection_id||!t[21].dialog_id?pc:lc}var P=D(t),M=P(t),j=k&&hc(t);return{c:function(){O&&O.c(),n=Y(),r&&r.c(),o=Y(),i=W("div"),qt(N.$$.fragment),a=Y(),c=W("b"),u=V(_),f=Y(),d=W("div"),l=V(x),h=Y(),M.c(),m=Y(),g=W("div"),j&&j.c(),v=Y(),X(c,"class","message__ts"),X(c,"aria-labelledby",s=t[21].id+"_ts"),X(d,"role","tooltip"),X(d,"id",p=t[21].id+"_ts"),$=new at(E,null),X(g,"class","message__text"),X(i,"class",y="message is-type-"+t[21].type),X(i,"data-index",t[23]),ot(i,"is-not-present",!t[12](t[21])),ot(i,"is-sent-by-you",t[21].from==t[4].nick),ot(i,"is-highlighted",t[21].highlight),ot(i,"has-not-same-from",!t[11](t[23])&&!t[21].dayChanged),ot(i,"has-same-from",t[11](t[23])&&!t[21].dayChanged)},m:function(r,s,p){O&&O.m(r,s),F(r,n,s),~e&&C[e].m(r,s),F(r,o,s),F(r,i,s),Ft(N,i,null),q(i,a),q(i,c),q(c,u),q(i,f),q(i,d),q(d,l),q(i,h),M.m(i,null),q(i,m),q(i,g),j&&j.m(g,null),q(g,v),$.m(g),b=!0,p&&w(),w=Z(i,"click",t[10])},p:function(t,a){t[23]&&t[23]==t[3].length-t[6]?O?(O.p(t,a),Tt(O,1)):((O=ac(t)).c(),Tt(O,1),O.m(n.parentNode,n)):O&&(At(),Ut(O,1,1,(function(){O=null})),Lt());var f=e;(e=S(t))===f?~e&&C[e].p(t,a):(r&&(At(),Ut(C[f],1,1,(function(){C[f]=null})),Lt()),~e?((r=C[e])||(r=C[e]=R[e](t)).c(),Tt(r,1),r.m(o.parentNode,o)):r=null);var h={};8&a&&(h.name="pick:"+t[21].fromId),8&a&&(h.color=t[21].color),N.$set(h),(!b||8&a)&&_!==(_=t[21].ts.getHM()+"")&&nt(u,_),(!b||8&a&&s!==(s=t[21].id+"_ts"))&&X(c,"aria-labelledby",s),(!b||8&a)&&x!==(x=t[21].ts.toLocaleString()+"")&&nt(l,x),(!b||8&a&&p!==(p=t[21].id+"_ts"))&&X(d,"id",p),P===(P=D(t))&&M?M.p(t,a):(M.d(1),(M=P(t))&&(M.c(),M.m(i,m))),8&a&&(k=Rc(t[21])),k?j?(j.p(t,a),Tt(j,1)):((j=hc(t)).c(),Tt(j,1),j.m(g,v)):j&&(At(),Ut(j,1,1,(function(){j=null})),Lt()),(!b||8&a)&&E!==(E=t[21].markdown+"")&&$.p(E),(!b||8&a&&y!==(y="message is-type-"+t[21].type))&&X(i,"class",y),4104&a&&ot(i,"is-not-present",!t[12](t[21])),24&a&&ot(i,"is-sent-by-you",t[21].from==t[4].nick),8&a&&ot(i,"is-highlighted",t[21].highlight),2056&a&&ot(i,"has-not-same-from",!t[11](t[23])&&!t[21].dayChanged),2056&a&&ot(i,"has-same-from",t[11](t[23])&&!t[21].dayChanged)},i:function(t){b||(Tt(O),Tt(r),Tt(N.$$.fragment,t),Tt(j),b=!0)},o:function(t){Ut(O),Ut(r),Ut(N.$$.fragment,t),Ut(j),b=!1},d:function(t){O&&O.d(t),t&&G(n),~e&&C[e].d(t),t&&G(o),t&&G(i),Gt(N),M.d(),j&&j.d(),w()}}}function gc(t){var n,e=new Wa({props:{$$slots:{default:[bc]},$$scope:{ctx:t}}});return{c:function(){qt(e.$$.fragment)},m:function(t,r){Ft(e,t,r),n=!0},p:function(t,n){var r={};16777216&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Tt(e.$$.fragment,t),n=!0)},o:function(t){Ut(e.$$.fragment,t),n=!1},d:function(t){Gt(e,t)}}}function vc(t){var n,e=new Wa({props:{$$slots:{default:[xc]},$$scope:{ctx:t}}});return{c:function(){qt(e.$$.fragment)},m:function(t,r){Ft(e,t,r),n=!0},p:function(t,n){var r={};16777216&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Tt(e.$$.fragment,t),n=!0)},o:function(t){Ut(e.$$.fragment,t),n=!1},d:function(t){Gt(e,t)}}}function $c(t){var n,e=Le("Yes")+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function yc(t){var n,e=Le("No")+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function bc(t){var n,e,r,o,i,a,c=Le('Do you want %1 to handle "irc://" links?',Le("Convos"))+"",u=new Tn({props:{type:"button",icon:"thumbs-up",$$slots:{default:[$c]},$$scope:{ctx:t}}});u.$on("click",t[19]);var s=new Tn({props:{type:"button",icon:"thumbs-down",$$slots:{default:[yc]},$$scope:{ctx:t}}});return s.$on("click",t[20]),{c:function(){n=V(c),e=Y(),r=W("br"),o=Y(),qt(u.$$.fragment),i=Y(),qt(s.$$.fragment)},m:function(t,c){F(t,n,c),F(t,e,c),F(t,r,c),F(t,o,c),Ft(u,t,c),F(t,i,c),Ft(s,t,c),a=!0},p:function(t,n){var e={};16777216&n&&(e.$$scope={dirty:n,ctx:t}),u.$set(e);var r={};16777216&n&&(r.$$scope={dirty:n,ctx:t}),s.$set(r)},i:function(t){a||(Tt(u.$$.fragment,t),Tt(s.$$.fragment,t),a=!0)},o:function(t){Ut(u.$$.fragment,t),Ut(s.$$.fragment,t),a=!1},d:function(t){t&&G(n),t&&G(e),t&&G(r),t&&G(o),Gt(u,t),t&&G(i),Gt(s,t)}}}function wc(t){var n,e=Le("Yes")+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function _c(t){var n,e=Le("No")+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function xc(t){var n,e,r,o,i,a,c=Le("Do you want to be notified when someone sends you a private message?")+"",u=new Tn({props:{type:"button",icon:"thumbs-up",$$slots:{default:[wc]},$$scope:{ctx:t}}});u.$on("click",t[17]);var s=new Tn({props:{type:"button",icon:"thumbs-down",$$slots:{default:[_c]},$$scope:{ctx:t}}});return s.$on("click",t[18]),{c:function(){n=V(c),e=Y(),r=W("br"),o=Y(),qt(u.$$.fragment),i=Y(),qt(s.$$.fragment)},m:function(t,c){F(t,n,c),F(t,e,c),F(t,r,c),F(t,o,c),Ft(u,t,c),F(t,i,c),Ft(s,t,c),a=!0},p:function(t,n){var e={};16777216&n&&(e.$$scope={dirty:n,ctx:t}),u.$set(e);var r={};16777216&n&&(r.$$scope={dirty:n,ctx:t}),s.$set(r)},i:function(t){a||(Tt(u.$$.fragment,t),Tt(s.$$.fragment,t),a=!0)},o:function(t){Ut(u.$$.fragment,t),Ut(s.$$.fragment,t),a=!1},d:function(t){t&&G(n),t&&G(e),t&&G(r),t&&G(o),Gt(u,t),t&&G(i),Gt(s,t)}}}function kc(t){var n,e=new Za({props:{class:"for-loading",icon:"spinner",animation:"spin",$$slots:{default:[Ec]},$$scope:{ctx:t}}});return{c:function(){qt(e.$$.fragment)},m:function(t,r){Ft(e,t,r),n=!0},p:function(t,n){var r={};16777216&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Tt(e.$$.fragment,t),n=!0)},o:function(t){Ut(e.$$.fragment,t),n=!1},d:function(t){Gt(e,t)}}}function Ec(t){var n,e,r=Le("Loading...")+"";return{c:function(){n=W("a"),e=V(r),X(n,"href",xe.baseUrl),X(n,"target","_self")},m:function(t,r){F(t,n,r),q(n,e)},p:O,d:function(t){t&&G(n)}}}function Oc(t){for(var n,e,r,o,i,a,c,u,s=0==t[5].messages.length&&t[5].is("notifications"),f=t[3].length>40&&t[5].is("loading"),d=t[4].is&&t[4].is("unreachable")||!t[5].is("success"),l=s&&rc(),h=f&&oc(t),m=t[3],g=[],v=0;v<m.length;v+=1)g[v]=mc(ec(t,m,v));var $=function(t){return Ut(g[t],1,1,(function(){g[t]=null}))},y=[vc,gc],b=[];function w(t,n){return null===t[7].wantNotifications?0:void 0===t[7].protocols.irc?1:-1}~(o=w(t))&&(i=b[o]=y[o](t));var _=d&&kc(t);return{c:function(){l&&l.c(),n=Y(),h&&h.c(),e=Y();for(var t=0;t<g.length;t+=1)g[t].c();r=Y(),i&&i.c(),a=Y(),_&&_.c(),c=Q()},m:function(t,i){l&&l.m(t,i),F(t,n,i),h&&h.m(t,i),F(t,e,i);for(var s=0;s<g.length;s+=1)g[s].m(t,i);F(t,r,i),~o&&b[o].m(t,i),F(t,a,i),_&&_.m(t,i),F(t,c,i),u=!0},p:function(t,u){var v=p(u,1)[0];if(32&v&&(s=0==t[5].messages.length&&t[5].is("notifications")),s?l?l.p(t,v):((l=rc()).c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null),40&v&&(f=t[3].length>40&&t[5].is("loading")),f?h?(h.p(t,v),Tt(h,1)):((h=oc(t)).c(),Tt(h,1),h.m(e.parentNode,e)):h&&(At(),Ut(h,1,1,(function(){h=null})),Lt()),15484&v){var x;for(m=t[3],x=0;x<m.length;x+=1){var k=ec(t,m,x);g[x]?(g[x].p(k,v),Tt(g[x],1)):(g[x]=mc(k),g[x].c(),Tt(g[x],1),g[x].m(r.parentNode,r))}for(At(),x=m.length;x<g.length;x+=1)$(x);Lt()}var E=o;(o=w(t))===E?~o&&b[o].p(t,v):(i&&(At(),Ut(b[E],1,1,(function(){b[E]=null})),Lt()),~o?((i=b[o])||(i=b[o]=y[o](t)).c(),Tt(i,1),i.m(a.parentNode,a)):i=null),48&v&&(d=t[4].is&&t[4].is("unreachable")||!t[5].is("success")),d?_?(_.p(t,v),Tt(_,1)):((_=kc(t)).c(),Tt(_,1),_.m(c.parentNode,c)):_&&(At(),Ut(_,1,1,(function(){_=null})),Lt())},i:function(t){if(!u){Tt(h);for(var n=0;n<m.length;n+=1)Tt(g[n]);Tt(i),Tt(_),u=!0}},o:function(t){Ut(h),g=g.filter(Boolean);for(var n=0;n<g.length;n+=1)Ut(g[n]);Ut(i),Ut(_),u=!1},d:function(t){l&&l.d(t),t&&G(n),h&&h.d(t),t&&G(e),K(g,t),t&&G(r),~o&&b[o].d(t),t&&G(a),_&&_.d(t),t&&G(c)}}}function Rc(t){return"error"==t.type||"notice"==t.type}function Cc(t){return["","chat",t.connection_id,t.dialog_id].map(encodeURIComponent).join("/")+"#"+t.ts.toISOString()}function Sc(t,n,e){var r,o,i,a,c=O,u=function(){return c(),c=M(d,(function(t){return e(4,o=t)})),d},s=O,f=function(){return s(),s=M(l,(function(t){return e(5,i=t)})),l};t.$$.on_destroy.push((function(){return c()})),t.$$.on_destroy.push((function(){return s()}));var d=n.connection;u();var l=n.dialog;f();var p=n.input,h=mt("user");j(t,h,(function(t){return e(14,r=t)}));var m=h.omnibus;function g(t){return t.map((function(n,e){return n.dayChanged=!!l.messages.length&&(0==e?l.is("search"):n.ts.getDate()!=t[e-1].ts.getDate()),n}))}j(t,m,(function(t){return e(7,a=t)}));var v,$;return t.$set=function(t){"connection"in t&&u(e(0,d=t.connection)),"dialog"in t&&f(e(1,l=t.dialog)),"input"in t&&e(2,p=t.input)},t.$$.update=function(){16432&t.$$.dirty&&e(3,v=g(tc.mergeWithMessages(r,o,i))),32&t.$$.dirty&&e(6,$=i.unread)},[d,l,p,v,o,i,$,a,h,m,function(t){if(!l.is("conversation")){var n=t.target.closest(".message"),e=v[n.dataset.index];e&&e.dialog_id&&(t.preventDefault(),xe.go(Cc(e)))}},function(t){return 0!=t&&v[t].fromId==v[t-1].fromId},function(t){return"Convos"==t.fromId||t.fromId==l.connection_id||!l.dialog_id||l.findParticipant(t.fromId)},function(t){var n=t.target.closest(".message");h.embedMaker.toggleDetails(n,v[n.dataset.index])},r,g,function(t){return p&&p.add(t.from)},function(){return m.requestPermissionToNotify()},function(){return m.requestPermissionToNotify(!1)},function(){return m.registerProtocol("irc",!0)},function(){return m.registerProtocol("irc",!1)}]}tc.fillIn=Xa,tc.firstTime=function(t,n){var e=[];if(!(n&&n.is&&n.is("conversation")&&n.first_time))return e;if(n.is_private||e.push(Xa({message:n.topic?"Topic for %1 is: %2":"No topic is set for %1.",type:"notice",vars:[n.name,n.topic]})),n.is_private)e.push(Xa({message:"This is a private conversation with %1.",type:"notice",vars:[n.name]}));else{var r=n.participants().length;e.push(Xa({message:1==r?"You are the only participant in this conversation.":"There are %1 [participants](%2) in this conversation.",type:"notice",vars:[r,xe.urlFor(n.path+"#activeMenu:settings")]}))}return t.dialogs().length<=3&&e.push(Xa({message:"Start chatting by writing a message in the input field, or click on the conversation name ([%1](%2)) to get more information.",type:"notice",vars:[n.name,xe.urlFor(n.path+"#activeMenu:settings")]})),e},tc.connectionDialogStatus=function(t,n){var e=[];return!t.is||t.is("unreachable")||(t.frozen?e.push(Xa({message:"Disconnected. Your connection %1 can be edited in [settings](%2).",vars:[t.name,xe.urlFor(t.path+"#activeMenu:settings")]})):n.frozen&&!n.is("locked")&&e.push(Xa({message:Ue(t,n).replace(/\.$/,""),vars:[]}))),e},tc.emptySearch=function(t,n){var e=[];return n.is("search")?(null===n.query?(e.push(Xa({message:"Search for messages sent by you or others the last %1 days by writing a message in the input field below.",type:"notice",vars:[90]})),e.push(Xa({message:'You can enter a channel name, or use `"conversation:#channel"` to narrow down the search.',type:"notice",vars:[n.name,xe.urlFor(n.path+"#activeMenu:settings")]}))):!n.messages.length&&n.is("success")&&e.push(Xa({message:'No search results for "%1".',type:"notice",vars:[n.query]})),e):e},tc.mergeWithMessages=function(t,n,e){return tc.emptySearch(t,e).concat(tc.firstTime(t,e)).concat(e.messages).concat(tc.connectionDialogStatus(n,e))};var Nc=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(nc()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,Sc,Oc,P,{connection:0,dialog:1,input:2}),r}return u}(Vt),Dc=function(){function n(){var e=this;t(this,n),this.dragAndDropEvents={drag:this._preventDefault.bind(this),dragend:this.stop.bind(this),dragenter:this.start.bind(this),dragleave:this.stop.bind(this),dragover:this.start.bind(this),dragstart:this._preventDefault.bind(this),drop:this.drop.bind(this)},this.pasteEvents={paste:this.paste.bind(this)},this.removeDragOverDebounced=tn((function(){return e._removeDragOver()}),100)}return E(n,[{key:"attach",value:function(t,n,e){var r=this;this.targetEl&&this.detach(),this.dropEl=n,this.uploadEl=e,this.targetEl=t,Object.keys(this.dragAndDropEvents).forEach((function(n){t.addEventListener(n,r.dragAndDropEvents[n])})),Object.keys(this.pasteEvents).forEach((function(t){document.addEventListener(t,r.pasteEvents[t])}))}},{key:"detach",value:function(){var t=this;Object.keys(this.dragAndDropEvents).forEach((function(n){t.targetEl.removeEventListener(n,t.dragAndDropEvents[n])})),Object.keys(this.pasteEvents).forEach((function(n){document.removeEventListener(n,t.pasteEvents[n])}))}},{key:"drop",value:function(t){this.stop(t),this.uploadEl&&this.uploadEl.uploader(t)}},{key:"paste",value:function(t){var n=(t.clipboardData||t.originalEvent.clipboardData).items;if(this.uploadEl)for(var e=0;e<n.length;e++)if("file"==n[e].kind)return this.uploadEl.uploader({dataTransfer:{files:[n[e].getAsFile()]}})}},{key:"stop",value:function(t){this._preventDefault(t),this.removeDragOverDebounced()}},{key:"start",value:function(t){this._preventDefault(t),this.dropEl&&this.dropEl.classList.add("is-dragover")}},{key:"_preventDefault",value:function(t){t.preventDefault(),t.stopPropagation()}},{key:"_removeDragOver",value:function(){this.dropEl&&this.dropEl.classList.remove("is-dragover")}}]),n}();function Pc(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Mc(t,n,e){var r=t.slice();return r[22]=n[e],r}function jc(t){var n,e,r,o,i,a,c,u,s,f,d=Le(t[4].name)+"",l=Ue(t[3],t[4])+"",p=new Nn({props:{name:t[4].connection_id?"sliders-h":"bell"}});return{c:function(){n=W("h1"),e=W("a"),qt(p.$$.fragment),r=W("span"),o=V(d),a=Y(),c=W("a"),u=V(l),X(e,"href",i="#activeMenu:"+(t[4].connection_id?"settings":"nav")),X(e,"tabindex","-1"),X(c,"href",s="#activeMenu:"+(t[4].connection_id?"settings":"nav")),X(c,"class","chat-header__topic")},m:function(t,i){F(t,n,i),q(n,e),Ft(p,e,null),q(e,r),q(r,o),F(t,a,i),F(t,c,i),q(c,u),f=!0},p:function(t,n){var r={};16&n&&(r.name=t[4].connection_id?"sliders-h":"bell"),p.$set(r),(!f||16&n)&&d!==(d=Le(t[4].name)+"")&&nt(o,d),(!f||16&n&&i!==(i="#activeMenu:"+(t[4].connection_id?"settings":"nav")))&&X(e,"href",i),(!f||24&n)&&l!==(l=Ue(t[3],t[4])+"")&&nt(u,l),(!f||16&n&&s!==(s="#activeMenu:"+(t[4].connection_id?"settings":"nav")))&&X(c,"href",s)},i:function(t){f||(Tt(p.$$.fragment,t),f=!0)},o:function(t){Ut(p.$$.fragment,t),f=!1},d:function(t){t&&G(n),Gt(p),t&&G(a),t&&G(c)}}}function Ac(t){var n,e=new Sa({props:{dialog:t[4]}});return{c:function(){qt(e.$$.fragment)},m:function(t,r){Ft(e,t,r),n=!0},p:function(t,n){var r={};16&n&&(r.dialog=t[4]),e.$set(r)},i:function(t){n||(Tt(e.$$.fragment,t),n=!0)},o:function(t){Ut(e.$$.fragment,t),n=!1},d:function(t){Gt(e,t)}}}function Lc(t){var n,e=new Nc({props:{connection:t[3],dialog:t[4],input:t[0]}});return{c:function(){qt(e.$$.fragment)},m:function(t,r){Ft(e,t,r),n=!0},p:function(t,n){var r={};8&n&&(r.connection=t[3]),16&n&&(r.dialog=t[4]),1&n&&(r.input=t[0]),e.$set(r)},i:function(t){n||(Tt(e.$$.fragment,t),n=!0)},o:function(t){Ut(e.$$.fragment,t),n=!1},d:function(t){Gt(e,t)}}}function Tc(t){var n,e={dialog:t[4]},r=new qa({props:e});return t[21](r),{c:function(){qt(r.$$.fragment)},m:function(t,e){Ft(r,t,e),n=!0},p:function(t,n){var e={};16&n&&(e.dialog=t[4]),r.$set(e)},i:function(t){n||(Tt(r.$$.fragment,t),n=!0)},o:function(t){Ut(r.$$.fragment,t),n=!1},d:function(n){t[21](null),Gt(r,n)}}}function Uc(t){for(var n,e,r,o,i,a,c,u,s=Le("Participants (%1)",t[4].participants().length)+"",f=t[4].participants(),d=[],l=0;l<f.length;l+=1)d[l]=zc(Mc(t,f,l));var p=function(t){return Ut(d[t],1,1,(function(){d[t]=null}))};return{c:function(){n=W("div"),e=W("nav"),r=W("h3"),o=V(s),i=Y();for(var t=0;t<d.length;t+=1)d[t].c();a=Y(),c=W("nav"),X(e,"class","sidebar-right__nav"),X(n,"class","sidebar-right")},m:function(t,s){F(t,n,s),q(n,e),q(e,r),q(r,o),q(e,i);for(var f=0;f<d.length;f+=1)d[f].m(e,null);q(e,a),q(e,c),u=!0},p:function(t,n){if((!u||16&n)&&s!==(s=Le("Participants (%1)",t[4].participants().length)+"")&&nt(o,s),16&n){var r;for(f=t[4].participants(),r=0;r<f.length;r+=1){var i=Mc(t,f,r);d[r]?(d[r].p(i,n),Tt(d[r],1)):(d[r]=zc(i),d[r].c(),Tt(d[r],1),d[r].m(e,a))}for(At(),r=f.length;r<d.length;r+=1)p(r);Lt()}},i:function(t){if(!u){for(var n=0;n<f.length;n+=1)Tt(d[n]);u=!0}},o:function(t){d=d.filter(Boolean);for(var n=0;n<d.length;n+=1)Ut(d[n]);u=!1},d:function(t){t&&G(n),K(d,t)}}}function Ic(t){var n,e,r,o,i=t[22].nick+"",a=new Nn({props:{name:"pick:"+t[22].id,family:"solid",color:t[22].color}});return{c:function(){qt(a.$$.fragment),n=Y(),e=W("span"),r=V(i)},m:function(t,i){Ft(a,t,i),F(t,n,i),F(t,e,i),q(e,r),o=!0},p:function(t,n){var e={};16&n&&(e.name="pick:"+t[22].id),16&n&&(e.color=t[22].color),a.$set(e),(!o||16&n)&&i!==(i=t[22].nick+"")&&nt(r,i)},i:function(t){o||(Tt(a.$$.fragment,t),o=!0)},o:function(t){Ut(a.$$.fragment,t),o=!1},d:function(t){Gt(a,t),t&&G(n),t&&G(e)}}}function zc(t){var n,e=new Wr({props:{href:"/chat/"+t[4].connection_id+"/"+t[22].id,class:"participant "+un(t[22].modes),$$slots:{default:[Ic]},$$scope:{ctx:t}}});return{c:function(){qt(e.$$.fragment)},m:function(t,r){Ft(e,t,r),n=!0},p:function(t,n){var r={};16&n&&(r.href="/chat/"+t[4].connection_id+"/"+t[22].id),16&n&&(r.class="participant "+un(t[22].modes)),33554448&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(Tt(e.$$.fragment,t),n=!0)},o:function(t){Ut(e.$$.fragment,t),n=!1},d:function(t){Gt(e,t)}}}function Bc(t){var n,e,r,o,i,a,c,u,s,f,d,l,h=!t[4].is("notifications"),m=t[4].participants().length,g=new Ma({props:{$$slots:{default:[jc]},$$scope:{ctx:t}}}),v=[Lc,Ac],$=[];function y(t,n){return 16&n&&(o=!(t[4].connection_id&&!t[5].findDialog(t[4]))),o?0:1}i=y(t,-1),a=$[i]=v[i](t);var b=h&&Tc(t),w=m&&Uc(t);return{c:function(){qt(g.$$.fragment),n=Y(),e=W("main"),r=W("div"),a.c(),u=Y(),b&&b.c(),s=Y(),w&&w.c(),f=Q(),X(r,"class","messages-container"),Et((function(){return t[19].call(r)})),ot(r,"has-notifications",t[4].is("notifications")),X(e,"class","main")},m:function(o,a,p){Ft(g,o,a),F(o,n,a),F(o,e,a),q(e,r),$[i].m(r,null),c=function(t,n){"static"===getComputedStyle(t).position&&(t.style.position="relative");var e,r=document.createElement("object");return r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.type="text/html",r.tabIndex=-1,r.onload=function(){(e=r.contentDocument.defaultView).addEventListener("resize",n)},/Trident/.test(navigator.userAgent)?(t.appendChild(r),r.data="about:blank"):(r.data="about:blank",t.appendChild(r)),{cancel:function(){e&&e.removeEventListener&&e.removeEventListener("resize",n),t.removeChild(r)}}}(r,t[19].bind(r)),t[20](e),F(o,u,a),b&&b.m(o,a),F(o,s,a),w&&w.m(o,a),F(o,f,a),d=!0,p&&l(),l=Z(e,"scroll",t[6])},p:function(t,n){var e=p(n,1)[0],o={};33554456&e&&(o.$$scope={dirty:e,ctx:t}),g.$set(o);var c=i;(i=y(t,e))===c?$[i].p(t,e):(At(),Ut($[c],1,1,(function(){$[c]=null})),Lt(),(a=$[i])||(a=$[i]=v[i](t)).c(),Tt(a,1),a.m(r,null)),16&e&&ot(r,"has-notifications",t[4].is("notifications")),16&e&&(h=!t[4].is("notifications")),h?b?(b.p(t,e),Tt(b,1)):((b=Tc(t)).c(),Tt(b,1),b.m(s.parentNode,s)):b&&(At(),Ut(b,1,1,(function(){b=null})),Lt()),16&e&&(m=t[4].participants().length),m?w?(w.p(t,e),Tt(w,1)):((w=Uc(t)).c(),Tt(w,1),w.m(f.parentNode,f)):w&&(At(),Ut(w,1,1,(function(){w=null})),Lt())},i:function(t){d||(Tt(g.$$.fragment,t),Tt(a),Tt(b),Tt(w),d=!0)},o:function(t){Ut(g.$$.fragment,t),Ut(a),Ut(b),Ut(w),d=!1},d:function(r){Gt(g,r),r&&G(n),r&&G(e),$[i].d(),c.cancel(),t[20](null),r&&G(u),b&&b.d(r),r&&G(s),w&&w.d(r),r&&G(f),l()}}}function Hc(t,n,e){var r,o;j(t,xe,(function(t){return e(12,r=t)}));var i,a,c=new Dc,u=mt("user");j(t,u,(function(t){return e(13,o=t)}));var s,f,d=0,l=0,h="bottom",m={},g=u.notifications,v=null,$={};function y(t){var n=["connection_id","dialog_id"].map((function(n){return t.param(n)})),e=p(n,2),r=e[0],o=e[1];g.connection_id==r&&g.dialog_id==o||(u.omnibus.debug>1&&console.log("[setDialogFromRoute]",JSON.stringify([r,o])),u.setActiveDialog({connection_id:r,dialog_id:o}))}function b(t){t.activeDialog!=v&&($.dialog&&_(),t.omnibus.debug>1&&console.log("[setDialogFromUser]",t.activeDialog.name),e(4,g=t.activeDialog),e(3,m=t.findDialog({connection_id:g.connection_id})||{}),l=0,v=g,h="bottom",sn(document,".message__embed",(function(t){return t.remove()})),g.load({before:"maybe"}),xe.update({title:g.title}),$.dialog=g.subscribe((function(t){e(4,g=t)})))}function w(t,n){t.forEach((function(t){if(t.isIntersecting){var n=g.messages[t.target.dataset.index]||{};n.embeds&&u.embedMaker.render(t.target,n.embeds)}}))}function _(){g.setLastRead&&g.setLastRead(),$.dialog&&$.dialog(),c.detach()}f=function(){s=s||new IntersectionObserver(w,{rootMargin:"0px"}),sn(document,".message",(function(t){t.classList.contains("is-observed")||s.observe(t),t.classList.add("is-observed")})),"bottom"==h?e(1,a.scrollTop=d,a):l&&l<d&&(e(1,a.scrollTop=d-l,a),"top"!=h&&(l=0))},pt().$$.after_update.push(f),ht((function(){return rn("chat_input")})),function(t){pt().$$.on_destroy.push(t)}(_);var x=tn((function(t){if(a){var n=a.offsetHeight,e=a.scrollTop;"top"!=(h=n>d||e+20>d-n?"bottom":e<100?"top":"middle")||g.is("loading")||(g.messages.length&&g.load({before:0}),l=d)}}),20);return t.$$.update=function(){4096&t.$$.dirty&&y(r),8192&t.$$.dirty&&b(o),3&t.$$.dirty&&c.attach(document,a,i&&i.getUploadEl())},[i,a,d,m,g,u,x,l,s,h,v,$,r,o,c,y,b,w,_,function(){d=this.offsetHeight,e(2,d)},function(t){$t[t?"unshift":"push"]((function(){e(1,a=t)}))},function(t){$t[t?"unshift":"push"]((function(){e(0,i=t)}))}]}var qc=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(Pc()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,Hc,Bc,P,{}),r}return u}(Vt);function Fc(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Gc(t){var n;return{c:function(){(n=W("h1")).textContent="".concat(Le("Add connection"))},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function Kc(t){var n,e,r,o=new Ma({props:{$$slots:{default:[Gc]},$$scope:{ctx:t}}}),i=new Pr({});return{c:function(){qt(o.$$.fragment),n=Y(),e=W("main"),qt(i.$$.fragment),X(e,"class","main")},m:function(t,a){Ft(o,t,a),F(t,n,a),F(t,e,a),Ft(i,e,null),r=!0},p:function(t,n){var e=p(n,1)[0],r={};1&e&&(r.$$scope={dirty:e,ctx:t}),o.$set(r)},i:function(t){r||(Tt(o.$$.fragment,t),Tt(i.$$.fragment,t),r=!0)},o:function(t){Ut(o.$$.fragment,t),Ut(i.$$.fragment,t),r=!1},d:function(t){Gt(o,t),t&&G(n),t&&G(e),Gt(i)}}}function Wc(t){return xe.update({title:Le("Add connection")}),[]}var Vc=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(Fc()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,Wc,Kc,P,{}),r}return u}(Vt);function Yc(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Qc(t,n,e){var r=t.slice();return r[26]=n[e],r[28]=e,r}var Zc=function(t){return{}},Jc=function(t){return{}};function Xc(t){var n,e,r,o,i=(t[26].length>1?t[26][1]:t[26][0])+"";function a(){for(var n,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(n=t)[24].apply(n,[t[28]].concat(r))}return{c:function(){n=W("a"),e=V(i),X(n,"href",r="#"+t[28]+":"+t[26][0]),X(n,"tabindex","-1"),ot(n,"is-active",t[28]==t[6])},m:function(r,i,c){F(r,n,i),q(n,e),c&&N(o),o=[Z(n,"click",t[14]),Z(n,"mouseover",a)]},p:function(o,a){t=o,2048&a&&i!==(i=(t[26].length>1?t[26][1]:t[26][0])+"")&&nt(e,i),2048&a&&r!==(r="#"+t[28]+":"+t[26][0])&&X(n,"href",r),64&a&&ot(n,"is-active",t[28]==t[6])},d:function(t){t&&G(n),N(o)}}}function tu(t){for(var n,e,r,o,i,a,c,u,s,f,d,l=t[20].label,h=A(l,t,t[19],Jc),m=h||{c:function(){d=V("Label")},m:function(t,n){F(t,d,n)},d:function(t){t&&G(d)}},g=t[11],v=[],$=0;$<g.length;$+=1)v[$]=Xc(Qc(t,g,$));return{c:function(){n=W("div"),e=W("label"),m&&m.c(),r=Y(),o=W("input"),i=Y(),a=W("input"),c=Y(),u=W("div");for(var s=0;s<v.length;s+=1)v[s].c();X(e,"for",t[3]),X(o,"type","hidden"),X(o,"name",t[2]),X(a,"type","text"),X(a,"placeholder",t[4]),X(a,"id",t[3]),a.readOnly=t[5],X(a,"autocomplete","off"),X(u,"class","select-field__options"),X(n,"class","select-field text-field"),n.hidden=t[1],ot(n,"is-open",t[9])},m:function(d,l,p){F(d,n,l),q(n,e),m&&m.m(e,null),q(n,r),q(n,o),t[21](o),et(o,t[0]),q(n,i),q(n,a),t[23](a),q(n,c),q(n,u);for(var h=0;h<v.length;h+=1)v[h].m(u,null);t[25](n),s=!0,p&&N(f),f=[Z(o,"input",t[22]),Z(o,"keydown",t[12]),Z(a,"keydown",t[12]),Z(a,"keyup",t[13]),Z(n,"click",J(t[15]))]},p:function(t,r){var i=p(r,1)[0];if(h&&h.p&&524288&i&&h.p(L(l,t,t[19],Jc),T(l,t[19],i,Zc)),(!s||8&i)&&X(e,"for",t[3]),(!s||4&i)&&X(o,"name",t[2]),1&i&&et(o,t[0]),(!s||16&i)&&X(a,"placeholder",t[4]),(!s||8&i)&&X(a,"id",t[3]),(!s||32&i)&&(a.readOnly=t[5]),18496&i){var c;for(g=t[11],c=0;c<g.length;c+=1){var f=Qc(t,g,c);v[c]?v[c].p(f,i):(v[c]=Xc(f),v[c].c(),v[c].m(u,null))}for(;c<v.length;c+=1)v[c].d(1);v.length=g.length}(!s||2&i)&&(n.hidden=t[1]),512&i&&ot(n,"is-open",t[9])},i:function(t){s||(Tt(m,t),s=!0)},o:function(t){Ut(m,t),s=!1},d:function(e){e&&G(n),m&&m.d(e),t[21](null),t[23](null),K(v,e),t[25](null),N(f)}}}function nu(t,n,e){var r,o,i,a=["ArrowDown","ArrowUp","Enter"],c=0,u=!1,s="",f=n.hidden,d=void 0!==f&&f,l=n.name,p=void 0===l?"":l,h=n.id,m=void 0===h?p?"form_"+p:gn():h,g=n.options,v=void 0===g?[]:g,$=n.placeholder,y=void 0===$?"":$,b=n.readonly,w=void 0!==b&&b,_=n.value,x=void 0===_?"":_;function k(t){return E.apply(this,arguments)}function E(){return(E=Zt(Yt.mark((function t(n){var r,i;return Yt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"keydown"==n.type?r=S.length?S[c]:[]:(i=n.target.href.replace(/^.*?#\d+:/,""),r=S.filter((function(t){return t[0]==i}))[0]||[]),r.length||(r=[""]),e(0,x=r[0]),e(8,o.value=r.length>1?r[1]:r[0],o),t.next=6,kt();case 6:o.setSelectionRange(0,9999),e(9,u=!1);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}ht((function(){o.addEventListener("blur",(function(){return setTimeout((function(){e(9,u=!1)}),100)})),e(0,x=r.value)}));var O=n.$$slots,R=void 0===O?{}:O,C=n.$$scope;var S;return t.$set=function(t){"hidden"in t&&e(1,d=t.hidden),"name"in t&&e(2,p=t.name),"id"in t&&e(3,m=t.id),"options"in t&&e(16,v=t.options),"placeholder"in t&&e(4,y=t.placeholder),"readonly"in t&&e(5,w=t.readonly),"value"in t&&e(0,x=t.value),"$$scope"in t&&e(19,C=t.$$scope)},t.$$.update=function(){if(512&t.$$.dirty&&0==u&&e(17,s=""),196608&t.$$.dirty&&e(11,S=function(t,n){var e=new RegExp("(?:^|\\s|-)"+fn(n),"i"),r=[];r.length||(r=t.filter((function(t){return t[0]==n}))),r.length||(r=t.filter((function(t){return t[0].match(e)})));for(var o=0;o<t.length;o++){var i=t[o];i.length>1&&-1!=r.indexOf(i)&&i[1].match(e)&&-1==t.map((function(t){return t[0]})).indexOf(i[0])&&t.push(i)}return t}(v,s)),512&t.$$.dirty&&1==u&&e(6,c=0),128&t.$$.dirty&&r&&!r.syncValue&&(e(7,r.syncValue=function(){e(0,x=this.value)},r),r.syncValue()),65920&t.$$.dirty&&o&&!o.value&&o!=document.activeElement){var n=v.find((function(t){return t[0]==r.value}));n&&e(8,o.value=n[1]||n[0],o)}},[x,d,p,m,y,w,c,r,o,u,i,S,function(t){-1!=a.indexOf(t.key)&&t.preventDefault(),"Tab"!=t.key?u?("ArrowDown"==t.key&&e(6,c++,c),"ArrowUp"==t.key&&e(6,c--,c),"Enter"==t.key&&k(t),c>=v.length&&e(6,c=0),c<0&&e(6,c=v.length-1)):e(9,u=!0):u&&k(t)},function(t){1!=t.key.length&&"Backspace"!=t.key||e(17,s=o.value)},k,function(t){t&&t.target&&Xt(t.target,".select-field__options")||e(9,u=!u)},v,s,a,C,R,function(t){$t[t?"unshift":"push"]((function(){e(7,r=t)}))},function(){x=this.value,e(0,x),e(7,r)},function(t){$t[t?"unshift":"push"]((function(){e(8,o=t)}))},function(t){e(6,c=t)},function(t){$t[t?"unshift":"push"]((function(){e(10,i=t)}))}]}var eu=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(Yc()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,nu,tu,P,{hidden:1,name:2,id:3,options:16,placeholder:4,readonly:5,value:0}),r}return u}(Vt);function ru(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function ou(t,n,e){var r=t.slice();return r[14]=n[e],r}function iu(t){var n;return{c:function(){(n=W("h1")).textContent="".concat(Le("Add conversation"))},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function au(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Connection")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function cu(t){var n,e=Le(t[0].dialogs.length?"Refresh":"Load")+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:function(t,r){1&r&&e!==(e=Le(t[0].dialogs.length?"Refresh":"Load")+"")&&nt(n,e)},d:function(t){t&&G(n)}}}function uu(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Conversation name")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function su(t){var n,e=Le("Add")+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function fu(t){var n,e,r,o,i=t[0].error+"";return{c:function(){n=W("p"),e=V(t[1]),r=V(": "),o=V(i),X(n,"class","error")},m:function(t,i){F(t,n,i),q(n,e),q(n,r),q(n,o)},p:function(t,n){2&n&&nt(e,t[1]),1&n&&i!==(i=t[0].error+"")&&nt(o,i)},d:function(t){t&&G(n)}}}function du(t){var n,e,r;function o(t,n){return t[0].done?pu:lu}for(var i=o(t),a=i(t),c=t[0].dialogs,u=[],s=0;s<c.length;s+=1)u[s]=hu(ou(t,c,s));return{c:function(){n=W("p"),a.c(),e=Y(),r=W("div");for(var t=0;t<u.length;t+=1)u[t].c();X(r,"class","dialog-add-list")},m:function(t,o){F(t,n,o),a.m(n,null),F(t,e,o),F(t,r,o);for(var i=0;i<u.length;i+=1)u[i].m(r,null)},p:function(t,e){if(i===(i=o(t))&&a?a.p(t,e):(a.d(1),(a=i(t))&&(a.c(),a.m(n,null))),65&e){var s;for(c=t[0].dialogs,s=0;s<c.length;s+=1){var f=ou(t,c,s);u[s]?u[s].p(f,e):(u[s]=hu(f),u[s].c(),u[s].m(r,null))}for(;s<u.length;s+=1)u[s].d(1);u.length=c.length}},d:function(t){t&&G(n),a.d(),t&&G(e),t&&G(r),K(u,t)}}}function lu(t){var n,e=Le("Showing %1 of %2 conversations, but the list is still loading.",t[0].dialogs.length,t[0].n_dialogs)+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:function(t,r){1&r&&e!==(e=Le("Showing %1 of %2 conversations, but the list is still loading.",t[0].dialogs.length,t[0].n_dialogs)+"")&&nt(n,e)},d:function(t){t&&G(n)}}}function pu(t){var n,e=Le("Showing %1 of %2 conversations.",t[0].dialogs.length,t[0].n_dialogs)+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:function(t,r){1&r&&e!==(e=Le("Showing %1 of %2 conversations.",t[0].dialogs.length,t[0].n_dialogs)+"")&&nt(n,e)},d:function(t){t&&G(n)}}}function hu(t){var n,e,r,o,i,a,c,u,s,f,d,l,p=t[14].n_users+"",h=t[14].name+"",m=(t[14].topic||"No topic.")+"";return{c:function(){n=W("a"),e=W("span"),r=V(p),o=Y(),i=W("b"),a=V(h),c=Y(),u=W("i"),s=V(m),f=Y(),X(e,"class","dialog-add-list__n-users"),X(i,"class","dialog-add-list__name"),X(u,"class","dialog-add-list__title"),X(n,"href",d="#add:"+t[14].name)},m:function(d,p,h){F(d,n,p),q(n,e),q(e,r),q(n,o),q(n,i),q(i,a),q(n,c),q(n,u),q(u,s),q(n,f),h&&l(),l=Z(n,"click",J(t[6]))},p:function(t,e){1&e&&p!==(p=t[14].n_users+"")&&nt(r,p),1&e&&h!==(h=t[14].name+"")&&nt(a,h),1&e&&m!==(m=(t[14].topic||"No topic.")+"")&&nt(s,m),1&e&&d!==(d="#add:"+t[14].name)&&X(n,"href",d)},d:function(t){t&&G(n),l()}}}function mu(t){var n,e,r,o,i,a,c,u,s,f,d,l,h,m,g,v,$,y,b=new Ma({props:{$$slots:{default:[iu]},$$scope:{ctx:t}}});function w(n){t[11].call(null,n)}var _={name:"connection_id",options:t[4],placeholder:Le("Select..."),$$slots:{label:[au]},$$scope:{ctx:t}};void 0!==t[1]&&(_.value=t[1]);var x=new eu({props:_});$t.push((function(){return Ht(x,"value",w)}));var k=new Tn({props:{type:"button",icon:"sync-alt",disabled:!t[1]||!1===t[0].done,$$slots:{default:[cu]},$$scope:{ctx:t}}});function E(n){t[12].call(null,n)}k.$on("click",t[7]);var O={name:"dialog_id",placeholder:Le("#room or nick"),autocomplete:"off",$$slots:{label:[uu]},$$scope:{ctx:t}};void 0!==t[2]&&(O.value=t[2]);var R=new cr({props:O});$t.push((function(){return Ht(R,"value",E)})),R.$on("keyup",t[8]);var C=new Tn({props:{icon:"comment",disabled:!t[1]||!t[2],$$slots:{default:[su]},$$scope:{ctx:t}}}),S=t[0].error&&fu(t),N=null!==t[0].done&&du(t);return{c:function(){qt(b.$$.fragment),n=Y(),e=W("main"),(r=W("p")).textContent="".concat(Le("Enter the name of an exising conversation, or create a new conversation.")," \n    ").concat(Le("It is also possible to load in all existing conversations for a given connection.")),o=Y(),i=W("form"),a=W("div"),qt(x.$$.fragment),u=Y(),s=W("div"),qt(k.$$.fragment),f=Y(),d=W("div"),qt(R.$$.fragment),h=Y(),m=W("div"),qt(C.$$.fragment),g=Y(),S&&S.c(),v=Y(),N&&N.c(),X(s,"class","has-remaining-space"),X(a,"class","inputs-side-by-side"),X(m,"class","has-remaining-space"),X(d,"class","inputs-side-by-side"),X(i,"method","post"),X(e,"class","main")},m:function(c,l,p){Ft(b,c,l),F(c,n,l),F(c,e,l),q(e,r),q(e,o),q(e,i),q(i,a),Ft(x,a,null),q(a,u),q(a,s),Ft(k,s,null),q(i,f),q(i,d),Ft(R,d,null),q(d,h),q(d,m),Ft(C,m,null),q(i,g),S&&S.m(i,null),q(i,v),N&&N.m(i,null),t[13](i),$=!0,p&&y(),y=Z(i,"submit",J(t[6]))},p:function(t,n){var e=p(n,1)[0],r={};131072&e&&(r.$$scope={dirty:e,ctx:t}),b.$set(r);var o={};16&e&&(o.options=t[4]),131072&e&&(o.$$scope={dirty:e,ctx:t}),!c&&2&e&&(c=!0,o.value=t[1],Ot((function(){return c=!1}))),x.$set(o);var a={};3&e&&(a.disabled=!t[1]||!1===t[0].done),131073&e&&(a.$$scope={dirty:e,ctx:t}),k.$set(a);var u={};131072&e&&(u.$$scope={dirty:e,ctx:t}),!l&&4&e&&(l=!0,u.value=t[2],Ot((function(){return l=!1}))),R.$set(u);var s={};6&e&&(s.disabled=!t[1]||!t[2]),131072&e&&(s.$$scope={dirty:e,ctx:t}),C.$set(s),t[0].error?S?S.p(t,e):((S=fu(t)).c(),S.m(i,v)):S&&(S.d(1),S=null),null!==t[0].done?N?N.p(t,e):((N=du(t)).c(),N.m(i,null)):N&&(N.d(1),N=null)},i:function(t){$||(Tt(b.$$.fragment,t),Tt(x.$$.fragment,t),Tt(k.$$.fragment,t),Tt(R.$$.fragment,t),Tt(C.$$.fragment,t),$=!0)},o:function(t){Ut(b.$$.fragment,t),Ut(x.$$.fragment,t),Ut(k.$$.fragment,t),Ut(R.$$.fragment,t),Ut(C.$$.fragment,t),$=!1},d:function(r){Gt(b,r),r&&G(n),r&&G(e),Gt(x),Gt(k),Gt(R),Gt(C),S&&S.d(),N&&N.d(),t[13](null),y()}}}function gu(t,n,e){var r,o=mt("user");j(t,o,(function(t){return e(10,r=t)}));var i,a,c={dialogs:[],done:null,n_dialogs:0},u="",s="";function f(t){var n="/list"+(s.length?" /"+s+"/":"");"click"==t.type&&c.done&&(n+=" refresh"),a&&clearTimeout(a),o.omnibus.send({connection_id:u,message:n},(function(n){var r=en(n);e(0,c=r?{dialogs:[],done:!0,n_dialogs:0,error:r}:n);var o=t.interval?t.interval+500:500;o>2e3&&(o=2e3),r||n.done||(a=setTimeout((function(){return f({interval:o})}),o))}))}xe.update({title:Le("Add conversation")}),ht((function(){return xe.urlToForm(i)}));var d,l=tn(f,250);return t.$$.update=function(){1024&t.$$.dirty&&e(4,d=Array.from(r.connections.keys()).map((function(t){return[t]}))),18&t.$$.dirty&&(u||e(1,u=d[0]?d[0][0]:""))},[c,u,s,i,d,o,function(t){var n=t&&t.target&&t.target.closest("a");n&&n.href&&e(2,s=n.href.replace(/.*#add:/,"")),u&&s&&o.findDialog({connection_id:u}).send("/join "+s)},f,l,a,r,function(t){e(1,u=t),e(4,d),e(10,r)},function(t){e(2,s=t)},function(t){$t[t?"unshift":"push"]((function(){e(3,i=t)}))}]}var vu=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(ru()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,gu,mu,P,{}),r}return u}(Vt);function $u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function yu(t,n,e){var r=t.slice();return r[2]=n[e],r}function bu(t){var n,e;return{c:function(){(n=W("h1")).textContent="".concat(Le("Help")),(e=W("small")).textContent="v".concat(process.env.version)},m:function(t,r){F(t,n,r),F(t,e,r)},p:O,d:function(t){t&&G(n),t&&G(e)}}}function wu(t){var n,e,r,o,i=t[2].example+"",a=Le(t[2].description)+"";return{c:function(){n=W("dt"),e=V(i),r=W("dd"),o=V(a)},m:function(t,i){F(t,n,i),q(n,e),F(t,r,i),q(r,o)},p:O,d:function(t){t&&G(n),t&&G(r)}}}function _u(t){var n;return{c:function(){n=V("Loading")},m:function(t,e){F(t,n,e)},d:function(t){t&&G(n)}}}function xu(t){var n;return{c:function(){n=V("Not found")},m:function(t,e){F(t,n,e)},d:function(t){t&&G(n)}}}function ku(t){var n;return{c:function(){n=V("Offline")},m:function(t,e){F(t,n,e)},d:function(t){t&&G(n)}}}function Eu(t){var n;return{c:function(){n=V("Unknown")},m:function(t,e){F(t,n,e)},d:function(t){t&&G(n)}}}function Ou(t){for(var n,e,r,o,i,a,c,u,s,f,d,l,h,m,g,v,$,y,b,w,_,x,k,E,R,C,S,N,D,P,M,j,A,L,T,U,I,z,B,H,Q,J,tt,nt,et,rt,ot,it,ct,ut,st,ft,dt,lt,pt,ht,mt,gt,vt,$t,yt,bt,wt,_t,xt,kt,Et,Ot,Rt,Ct,St,Nt,Dt,Pt,Mt,jt,At,Lt,It,zt,Bt,Ht,Kt,Wt,Vt,Yt,Qt,Zt,Jt,Xt,tn,nn,en=Le("Jump to:")+"",rn=Te('Got any questions? Come and talk to us in the "#convos" channel on https://freenode.net.')+"",on=Te("More information can also be found on https://convos.by.")+"",an=Te('Using "*" around some text, will convert it into *italic*, **bold** or ***italic bold***.')+"",cn=Te("Using backticks around some text, will format it as a `code fragment`.")+"",un=Le("Contact admin")+"",sn=new Ma({props:{$$slots:{default:[bu]},$$scope:{ctx:t}}}),fn=La,dn=[],pn=0;pn<fn.length;pn+=1)dn[pn]=wu(yu(t,fn,pn));var hn,mn,gn,vn,$n="Convos"!=process.env.organization_name&&"https://convos.by"!=process.env.organization_url&&(vn=process.env.organization_name+"",{c:function(){hn=W("li"),mn=W("a"),gn=V(vn),X(mn,"href",process.env.organization_url),X(mn,"target","_blank")},m:function(t,n){F(t,hn,n),q(hn,mn),q(mn,gn)},p:O,d:function(t){t&&G(hn)}}),yn=new Wr({props:{href:"/err/loading",$$slots:{default:[_u]},$$scope:{ctx:t}}}),bn=new Wr({props:{href:"/err/not_found",$$slots:{default:[xu]},$$scope:{ctx:t}}}),wn=new Wr({props:{href:"/err/offline",$$slots:{default:[ku]},$$scope:{ctx:t}}}),_n=new Wr({props:{href:"/err/unknown",$$slots:{default:[Eu]},$$scope:{ctx:t}}});return{c:function(){qt(sn.$$.fragment),n=Y(),e=W("main"),r=W("p"),o=V(en),i=Y(),(a=W("a")).textContent="".concat(Le("Shortcuts")),c=V(",\n    "),(u=W("a")).textContent="".concat(Le("Autocomplete")),s=V(",\n    "),(f=W("a")).textContent="".concat(Le("Text formatting")),d=V(",\n    "),(l=W("a")).textContent="".concat(Le("Available commands")),h=V(",\n    "),(m=W("a")).textContent="".concat(Le("Other resources")),g=V("."),v=Y(),$=W("p"),b=Y(),_=Y(),(x=W("h2")).textContent="".concat(Le("Shortcuts")),k=Y(),E=W("dl"),(R=W("dt")).textContent="".concat(Le("shift+enter")),(C=W("dd")).textContent="".concat(Le("Shift focus between chat input and search in sidebar.")),(S=W("dt")).textContent="".concat(Le("Open conversation or connection settings")),(N=W("dd")).textContent="".concat(Le("Clicking on the icon next to the conversation name will take you to settings.")),D=Y(),(P=W("h2")).textContent="".concat(Le("Autocomplete")),M=Y(),(j=W("p")).textContent="".concat(Le("The following rules apply when typing a message:")),A=Y(),L=W("dl"),(T=W("dt")).textContent="@nick",(U=W("dd")).textContent="".concat(Le('"@" followed by a character will show matching nicks in the current conversation.')),(I=W("dt")).textContent=":emoji_name",(z=W("dd")).textContent="".concat(Le('":" followed by a character will show matching emojis.')),(B=W("dt")).textContent="/command",(H=W("dd")).textContent="".concat(Le('"/" will show the available commands.')),(Q=W("dt")).textContent="#conversation",(J=W("dd")).textContent="".concat(Le('"#" will show the matching conversation names.')),tt=Y(),(nt=W("h2")).textContent="".concat(Le("Text formatting")),et=Y(),(rt=W("p")).textContent="".concat(Le("Convos supports some special way of formatting text:")),ot=Y(),it=W("dl"),(ct=W("dt")).textContent="".concat(Object.keys(Ne).sort().map(t[1]).join(", ")),(ut=W("dd")).textContent="".concat(Le("Will be automatically converted into emojis.")),(st=W("dt")).textContent="".concat(Le("> some text")),(ft=W("dd")).textContent="".concat(Le('A line starting with ">" will be converted into a quote.')),(dt=W("dt")).textContent="".concat(Le("*some text*, **some text**, ***some text***")),lt=W("dd"),(pt=W("dt")).textContent="".concat(Le("`some fragment`")),ht=W("dd"),(mt=W("dt")).textContent="https://...",(gt=W("dd")).textContent="".concat(Le("URLs will be converted to links, and might be embedded in the chat.")),vt=Y(),($t=W("h2")).textContent="".concat(Le("Available commands")),yt=Y(),bt=W("dl");for(var p=0;p<dn.length;p+=1)dn[p].c();wt=Y(),(_t=W("h2")).textContent="".concat(Le("Other resources")),xt=Y(),kt=W("ul"),Et=W("li"),(Ot=W("a")).textContent="".concat(Le("Project homepage")),Rt=Y(),Ct=W("li"),(St=W("a")).textContent="".concat(Le("Bug/issue tracker")),Nt=Y(),Dt=W("li"),(Pt=W("a")).textContent="".concat(Le("Source code")),Mt=Y(),$n&&$n.c(),jt=Y(),At=W("li"),Lt=W("a"),It=V(un),zt=Y(),(Bt=W("h2")).textContent="".concat(Le("Demo error pages")),Ht=Y(),Kt=W("ul"),Wt=W("li"),qt(yn.$$.fragment),Vt=Y(),Yt=W("li"),qt(bn.$$.fragment),Qt=Y(),Zt=W("li"),qt(wn.$$.fragment),Jt=Y(),Xt=W("li"),qt(_n.$$.fragment),X(a,"href","#shortcuts"),X(u,"href","#autocomplete"),X(f,"href","#formatting"),X(l,"href","#commands"),X(m,"href","#resources"),y=new at(rn,b),w=new at(on,null),X(x,"id","shortcuts"),X(P,"id","autocomplete"),X(nt,"id","formatting"),X($t,"id","commands"),X(_t,"id","resources"),X(Ot,"href","https://convos.by"),X(Ot,"target","_blank"),X(St,"href","https://github.com/Nordaaker/convos/issues"),X(St,"target","_blank"),X(Pt,"href","https://github.com/Nordaaker/convos"),X(Pt,"target","_blank"),X(Lt,"href",process.env.contact),X(Lt,"target","_blank"),X(Bt,"id","fallback"),X(e,"class","main")},m:function(t,p,O){Ft(sn,t,p),F(t,n,p),F(t,e,p),q(e,r),q(r,o),q(r,i),q(r,a),q(r,c),q(r,u),q(r,s),q(r,f),q(r,d),q(r,l),q(r,h),q(r,m),q(r,g),q(e,v),q(e,$),y.m($),q($,b),w.m($),q(e,_),q(e,x),q(e,k),q(e,E),q(E,R),q(E,C),q(E,S),q(E,N),q(e,D),q(e,P),q(e,M),q(e,j),q(e,A),q(e,L),q(L,T),q(L,U),q(L,I),q(L,z),q(L,B),q(L,H),q(L,Q),q(L,J),q(e,tt),q(e,nt),q(e,et),q(e,rt),q(e,ot),q(e,it),q(it,ct),q(it,ut),q(it,st),q(it,ft),q(it,dt),q(it,lt),lt.innerHTML=an,q(it,pt),q(it,ht),ht.innerHTML=cn,q(it,mt),q(it,gt),q(e,vt),q(e,$t),q(e,yt),q(e,bt);for(var G=0;G<dn.length;G+=1)dn[G].m(bt,null);q(e,wt),q(e,_t),q(e,xt),q(e,kt),q(kt,Et),q(Et,Ot),q(kt,Rt),q(kt,Ct),q(Ct,St),q(kt,Nt),q(kt,Dt),q(Dt,Pt),q(kt,Mt),$n&&$n.m(kt,null),q(kt,jt),q(kt,At),q(At,Lt),q(Lt,It),q(e,zt),q(e,Bt),q(e,Ht),q(e,Kt),q(Kt,Wt),Ft(yn,Wt,null),q(Kt,Vt),q(Kt,Yt),Ft(bn,Yt,null),q(Kt,Qt),q(Kt,Zt),Ft(wn,Zt,null),q(Kt,Jt),q(Kt,Xt),Ft(_n,Xt,null),tn=!0,O&&nn(),nn=Z(r,"click",ln)},p:function(t,n){var e=p(n,1)[0],r={};if(32&e&&(r.$$scope={dirty:e,ctx:t}),sn.$set(r),0&e){var o;for(fn=La,o=0;o<fn.length;o+=1){var i=yu(t,fn,o);dn[o]?dn[o].p(i,e):(dn[o]=wu(i),dn[o].c(),dn[o].m(bt,null))}for(;o<dn.length;o+=1)dn[o].d(1);dn.length=fn.length}"Convos"!=process.env.organization_name&&"https://convos.by"!=process.env.organization_url&&$n.p(t,e);var a={};32&e&&(a.$$scope={dirty:e,ctx:t}),yn.$set(a);var c={};32&e&&(c.$$scope={dirty:e,ctx:t}),bn.$set(c);var u={};32&e&&(u.$$scope={dirty:e,ctx:t}),wn.$set(u);var s={};32&e&&(s.$$scope={dirty:e,ctx:t}),_n.$set(s)},i:function(t){tn||(Tt(sn.$$.fragment,t),Tt(yn.$$.fragment,t),Tt(bn.$$.fragment,t),Tt(wn.$$.fragment,t),Tt(_n.$$.fragment,t),tn=!0)},o:function(t){Ut(sn.$$.fragment,t),Ut(yn.$$.fragment,t),Ut(bn.$$.fragment,t),Ut(wn.$$.fragment,t),Ut(_n.$$.fragment,t),tn=!1},d:function(t){Gt(sn,t),t&&G(n),t&&G(e),K(dn,t),$n&&$n.d(),Gt(yn),Gt(bn),Gt(wn),Gt(_n),nn()}}}function Ru(t,n,e){var r;j(t,xe,(function(t){return e(0,r=t)})),xe.update({title:Le("Help")});return t.$$.update=function(){1&t.$$.dirty&&ln(r.hash||0)},[r,function(t){return Ne[t]}]}var Cu=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if($u()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,Ru,Ou,P,{}),r}return u}(Vt);function Su(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Nu(t,n,e){var r,o=mt("user");return j(t,o,(function(t){return e(1,r=t)})),t.$$.update=function(){2&t.$$.dirty&&function(t){var n=t.dialogs()[0],e=xe.lastUrl?xe.lastUrl:n?n.path:"/settings/connection";t.is("loading")||(t.is("authenticated")?xe.lastUrl==xe.canonicalPath||xe.go(e):xe.go("/login"))}(r)},[o]}var Du=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(Su()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,Nu,null,P,{}),r}return u}(Vt);function Pu(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Mu(t){var n,e,r,o,i=new Nn({props:{name:"search"}});return{c:function(){n=W("h1"),e=W("a"),qt(i.$$.fragment),(r=W("span")).textContent="".concat(Le("Search")),X(e,"href","#activeMenu:nav"),X(e,"tabindex","-1")},m:function(t,a){F(t,n,a),q(n,e),Ft(i,e,null),q(e,r),o=!0},p:O,i:function(t){o||(Tt(i.$$.fragment,t),o=!0)},o:function(t){Ut(i.$$.fragment,t),o=!1},d:function(t){t&&G(n),Gt(i)}}}function ju(t){var n,e,r,o,i,a=new Ma({props:{$$slots:{default:[Mu]},$$scope:{ctx:t}}}),c=new Nc({props:{connection:t[2],dialog:t[3],input:null}}),u={dialog:t[3]},s=new qa({props:u});return t[5](s),{c:function(){qt(a.$$.fragment),n=Y(),e=W("main"),r=W("div"),qt(c.$$.fragment),o=Y(),qt(s.$$.fragment),X(r,"class","messages-container"),ot(r,"has-notifications",t[1].messages.length),X(e,"class","main")},m:function(t,u){Ft(a,t,u),F(t,n,u),F(t,e,u),q(e,r),Ft(c,r,null),F(t,o,u),Ft(s,t,u),i=!0},p:function(t,n){var e=p(n,1)[0],o={};64&e&&(o.$$scope={dirty:e,ctx:t}),a.$set(o),2&e&&ot(r,"has-notifications",t[1].messages.length);s.$set({})},i:function(t){i||(Tt(a.$$.fragment,t),Tt(c.$$.fragment,t),Tt(s.$$.fragment,t),i=!0)},o:function(t){Ut(a.$$.fragment,t),Ut(c.$$.fragment,t),Ut(s.$$.fragment,t),i=!1},d:function(r){Gt(a,r),r&&G(n),r&&G(e),Gt(c),r&&G(o),t[5](null),Gt(s,r)}}}function Au(t,n,e){var r,o,i=mt("user"),a=i.search;function c(t,n){var e=t.param("q");n.query&&"string"==typeof e&&(o.setValue(e),a.load({match:e}),rn("chat_input"),t.update({title:Le('Search for "%1"',e)}))}return j(t,a,(function(t){return e(1,r=t)})),ht((function(){return c(xe,{query:!0}),xe.on("update",c)})),[o,r,i,a,c,function(t){$t[t?"unshift":"push"]((function(){e(0,o=t)}))}]}var Lu=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(Pu()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,Au,ju,P,{}),r}return u}(Vt);function Tu(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Uu(t){var n;return{c:function(){(n=W("h1")).textContent="".concat(Le("Account"))},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function Iu(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Email")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function zu(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Notification keywords")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function Bu(t){var n,e;function r(n){t[13].call(null,n)}var o={name:"notifications",$$slots:{label:[Hu]},$$scope:{ctx:t}};void 0!==t[5]&&(o.checked=t[5]);var i=new qn({props:o});return $t.push((function(){return Ht(i,"checked",r)})),{c:function(){qt(i.$$.fragment)},m:function(t,n){Ft(i,t,n),e=!0},p:function(t,e){var r={};262144&e&&(r.$$scope={dirty:e,ctx:t}),!n&&32&e&&(n=!0,r.checked=t[5],Ot((function(){return n=!1}))),i.$set(r)},i:function(t){e||(Tt(i.$$.fragment,t),e=!0)},o:function(t){Ut(i.$$.fragment,t),e=!1},d:function(t){Gt(i,t)}}}function Hu(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Enable notifications")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function qu(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Expand URL to media")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function Fu(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Theme")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function Gu(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Color scheme")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function Ku(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Password")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function Wu(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Repeat password")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function Vu(t){var n,e=Le("Save settings")+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function Yu(t){var n;return{c:function(){(n=W("p")).textContent="".concat(Le("You cannot receive notifications, because it is denied by your browser.")),X(n,"class","error")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function Qu(t){var n,e,r,o,i,a,c,u,s,f,d,l,h,m,g,v,$,y,b,w,_,x=new Ma({props:{$$slots:{default:[Uu]},$$scope:{ctx:t}}}),k=new cr({props:{type:"email",name:"email",value:t[6].email,readonly:!0,$$slots:{label:[Iu]},$$scope:{ctx:t}}}),E=new cr({props:{name:"highlight_keywords",placeholder:Le("whatever, keywords"),value:t[11],$$slots:{label:[zu]},$$scope:{ctx:t}}}),O=!t[3]&&Bu(t);function R(n){t[14].call(null,n)}var C={name:"expand_url",$$slots:{label:[qu]},$$scope:{ctx:t}};void 0!==t[2]&&(C.checked=t[2]);var S=new qn({props:C});function N(n){t[15].call(null,n)}$t.push((function(){return Ht(S,"checked",R)}));var D={name:"theme",options:t[10],$$slots:{label:[Fu]},$$scope:{ctx:t}};void 0!==t[4]&&(D.value=t[4]);var P=new eu({props:D});function M(n){t[16].call(null,n)}$t.push((function(){return Ht(P,"value",N)}));var j={name:"color_scheme",options:t[7],$$slots:{label:[Gu]},$$scope:{ctx:t}};void 0!==t[1]&&(j.value=t[1]);var A=new eu({props:j});$t.push((function(){return Ht(A,"value",M)}));var L=new cr({props:{type:"password",name:"password",autocomplete:"new-password",$$slots:{label:[Ku]},$$scope:{ctx:t}}}),T=new cr({props:{type:"password",name:"password_again",autocomplete:"new-password",$$slots:{label:[Wu]},$$scope:{ctx:t}}}),U=new Tn({props:{icon:"save",op:t[9],$$slots:{default:[Vu]},$$scope:{ctx:t}}}),I=new qe({props:{op:t[9]}}),z=t[3]&&Yu();return{c:function(){qt(x.$$.fragment),n=Y(),e=W("main"),r=W("form"),qt(k.$$.fragment),o=Y(),qt(E.$$.fragment),i=Y(),O&&O.c(),a=Y(),qt(S.$$.fragment),u=Y(),qt(P.$$.fragment),f=Y(),qt(A.$$.fragment),l=Y(),qt(L.$$.fragment),h=Y(),qt(T.$$.fragment),m=Y(),(g=W("p")).textContent="".concat(Le("Leave the password fields empty to keep the current password.")),v=Y(),$=W("div"),qt(U.$$.fragment),y=Y(),qt(I.$$.fragment),b=Y(),z&&z.c(),X($,"class","form-actions"),X(r,"method","post"),X(e,"class","main")},m:function(c,s,d){Ft(x,c,s),F(c,n,s),F(c,e,s),q(e,r),Ft(k,r,null),q(r,o),Ft(E,r,null),q(r,i),O&&O.m(r,null),q(r,a),Ft(S,r,null),q(r,u),Ft(P,r,null),q(r,f),Ft(A,r,null),q(r,l),Ft(L,r,null),q(r,h),Ft(T,r,null),q(r,m),q(r,g),q(r,v),q(r,$),Ft(U,$,null),q(r,y),Ft(I,r,null),q(r,b),z&&z.m(r,null),t[17](r),w=!0,d&&_(),_=Z(r,"submit",J(t[12]))},p:function(t,n){var e=p(n,1)[0],o={};262144&e&&(o.$$scope={dirty:e,ctx:t}),x.$set(o);var i={};64&e&&(i.value=t[6].email),262144&e&&(i.$$scope={dirty:e,ctx:t}),k.$set(i);var u={};262144&e&&(u.$$scope={dirty:e,ctx:t}),E.$set(u),t[3]?O&&(At(),Ut(O,1,1,(function(){O=null})),Lt()):O?(O.p(t,e),Tt(O,1)):((O=Bu(t)).c(),Tt(O,1),O.m(r,a));var f={};262144&e&&(f.$$scope={dirty:e,ctx:t}),!c&&4&e&&(c=!0,f.checked=t[2],Ot((function(){return c=!1}))),S.$set(f);var l={};262144&e&&(l.$$scope={dirty:e,ctx:t}),!s&&16&e&&(s=!0,l.value=t[4],Ot((function(){return s=!1}))),P.$set(l);var h={};262144&e&&(h.$$scope={dirty:e,ctx:t}),!d&&2&e&&(d=!0,h.value=t[1],Ot((function(){return d=!1}))),A.$set(h);var m={};262144&e&&(m.$$scope={dirty:e,ctx:t}),L.$set(m);var g={};262144&e&&(g.$$scope={dirty:e,ctx:t}),T.$set(g);var v={};262144&e&&(v.$$scope={dirty:e,ctx:t}),U.$set(v),t[3]?z?z.p(t,e):((z=Yu()).c(),z.m(r,null)):z&&(z.d(1),z=null)},i:function(t){w||(Tt(x.$$.fragment,t),Tt(k.$$.fragment,t),Tt(E.$$.fragment,t),Tt(O),Tt(S.$$.fragment,t),Tt(P.$$.fragment,t),Tt(A.$$.fragment,t),Tt(L.$$.fragment,t),Tt(T.$$.fragment,t),Tt(U.$$.fragment,t),Tt(I.$$.fragment,t),w=!0)},o:function(t){Ut(x.$$.fragment,t),Ut(k.$$.fragment,t),Ut(E.$$.fragment,t),Ut(O),Ut(S.$$.fragment,t),Ut(P.$$.fragment,t),Ut(A.$$.fragment,t),Ut(L.$$.fragment,t),Ut(T.$$.fragment,t),Ut(U.$$.fragment,t),Ut(I.$$.fragment,t),w=!1},d:function(r){Gt(x,r),r&&G(n),r&&G(e),Gt(k),Gt(E),O&&O.d(),Gt(S),Gt(P),Gt(A),Gt(L),Gt(T),Gt(U),Gt(I),z&&z.d(),t[17](null),_()}}}function Zu(t,n,e){var r,o=mt("user");j(t,o,(function(t){return e(6,r=t)}));var i,a=o.api.operation("updateUser"),c=Object.keys(o.themes).map((function(t){var n=o.themes[t].name,e=Object.keys(o.themes[t].color_schemes||{}).filter((function(t){return"default"!=t}));return e.length&&(n+=" ("+e.sort().join("/")+")"),[t,n]})),u=o.colorScheme,s=o.embedMaker.expandUrlToMedia,f="denied"==o.omnibus.notifyPermission,d=o.theme,l=o.omnibus.wantNotifications,p=o.highlight_keywords.join(", ");return xe.update({title:Le("Account")}),a.on("start",(function(t){t.body.password||delete t.body.password,t.body.highlight_keywords=t.body.highlight_keywords.split(/[.,\s]+/).map((function(t){return t.trim()}))})),[i,u,s,f,d,l,r,[["auto","Auto"],["dark","Dark"],["light","Light"]],o,a,c,p,function(t){var n=t.target,r=[n.password.value,n.password_again.value];if(l&&o.omnibus.requestPermissionToNotify((function(t){"denied"==t&&(e(5,l=!1),e(3,f=!0))})),r.join("").length&&r[0]!=r[1])return a.error("Passwords does not match.");o.embedMaker.update({expandUrlToMedia:s}),o.update({colorScheme:u,theme:d}),a.perform(t.target)},function(t){e(5,l=t)},function(t){e(2,s=t)},function(t){e(4,d=t)},function(t){e(1,u=t)},function(t){$t[t?"unshift":"push"]((function(){e(0,i=t)}))}]}var Ju=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(Tu()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,Zu,Qu,P,{}),r}return u}(Vt);function Xu(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function ts(t){var n;return{c:function(){(n=W("h1")).textContent="".concat(Le("Global settings"))},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function ns(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("User email")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function es(t){var n,e,r,o,i,a,c,u,s,f,d,l,p,h,m=Te(t[1].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"",g=Te("The link is valid until **%1**.",new Date(t[1].expires).toLocaleString())+"",v=t[1].url+"";return{c:function(){(n=W("h3")).textContent="".concat(Le("A link was generated")),e=Y(),r=W("p"),i=Y(),c=Y(),u=W("a"),s=V(v),d=Y(),l=W("p"),(p=W("small")).textContent="".concat(Le("Tip: Clicking on the link will copy it to your clipboard.")),o=new at(m,i),a=new at(g,null),X(u,"href",f=t[1].url)},m:function(f,m,g){F(f,n,m),F(f,e,m),F(f,r,m),o.m(r),q(r,i),a.m(r),F(f,c,m),F(f,u,m),q(u,s),F(f,d,m),F(f,l,m),q(l,p),g&&h(),h=Z(u,"click",J(t[5]))},p:function(t,n){2&n&&m!==(m=Te(t[1].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"")&&o.p(m),2&n&&g!==(g=Te("The link is valid until **%1**.",new Date(t[1].expires).toLocaleString())+"")&&a.p(g),2&n&&v!==(v=t[1].url+"")&&nt(s,v),2&n&&f!==(f=t[1].url)&&X(u,"href",f)},d:function(t){t&&G(n),t&&G(e),t&&G(r),t&&G(c),t&&G(u),t&&G(d),t&&G(l),h()}}}function rs(t){var n,e=Le("Generate link")+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function os(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Organization name")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function is(t){var n;return{c:function(){(n=W("p")).textContent="".concat(Le("Can be changed if you want to add a touch of your organization.")),X(n,"class","help"),X(n,"slot","help")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function as(t){var n;return{c:function(){n=Y()},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function cs(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Organization URL")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function us(t){var n;return{c:function(){(n=W("p")).textContent="".concat(Le('Used together with "Organization name" to add a link to your organization on the login screen.')),X(n,"class","help"),X(n,"slot","help")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function ss(t){var n;return{c:function(){n=Y()},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function fs(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Admin email")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function ds(t){var n;return{c:function(){(n=W("p")).textContent="".concat(Le("This email can be used by users to get in touch with the Convos admin.")),X(n,"class","help"),X(n,"slot","help")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function ls(t){var n;return{c:function(){n=Y()},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function ps(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Default connection URL")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function hs(t){var n;return{c:function(){(n=W("p")).textContent="".concat(Le("This is the default connection new users will connect to.")," \n        ").concat(Le('The path part is the default channel to join. "%%23convos" means "#convos".')),X(n,"class","help"),X(n,"slot","help")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function ms(t){var n;return{c:function(){n=Y()},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function gs(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Force default connection")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function vs(t){var n;return{c:function(){(n=W("span")).textContent="".concat(Le("Registration is open to public")),X(n,"slot","label")},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function $s(t){var n,e=Le("Save settings")+"";return{c:function(){n=V(e)},m:function(t,e){F(t,n,e)},p:O,d:function(t){t&&G(n)}}}function ys(t){var n,e,r,o,i,a,c,u,s,f,d,l,h,m,g,v,$,y,b,w,_,x,k,E,O,R,C,S,D,P,M,j,A,L,T,U=Te("These settings control what users experience when they visit [%1](%1).",process.env.base_url)+"",I=new Ma({props:{$$slots:{default:[ts]},$$scope:{ctx:t}}}),z=new cr({props:{type:"email",name:"email",placeholder:Le("user@example.com"),$$slots:{label:[ns]},$$scope:{ctx:t}}}),B=t[1].url&&es(t),H=new Tn({props:{icon:"save",op:t[2],$$slots:{default:[rs]},$$scope:{ctx:t}}}),K=new qe({props:{op:t[2]}});function V(n){t[10].call(null,n)}var Q={name:"organization_name",placeholder:Le("Nordaaker"),$$slots:{default:[as],help:[is],label:[os]},$$scope:{ctx:t}};void 0!==t[0].organization_name&&(Q.value=t[0].organization_name);var tt=new cr({props:Q});function nt(n){t[11].call(null,n)}$t.push((function(){return Ht(tt,"value",V)}));var et={name:"organization_url",placeholder:Le("https://convos.by"),$$slots:{default:[ss],help:[us],label:[cs]},$$scope:{ctx:t}};void 0!==t[0].organization_url&&(et.value=t[0].organization_url);var rt=new cr({props:et});function ot(n){t[12].call(null,n)}$t.push((function(){return Ht(rt,"value",nt)}));var it={name:"contact",placeholder:Le("Ex: jhthorsen@cpan.org"),$$slots:{default:[ls],help:[ds],label:[fs]},$$scope:{ctx:t}};void 0!==t[0].contact&&(it.value=t[0].contact);var at=new cr({props:it});function ct(n){t[13].call(null,n)}$t.push((function(){return Ht(at,"value",ot)}));var ut={name:"default_connection",placeholder:Le("irc://chat.freenode.net:6697/%%23convos"),$$slots:{default:[ms],help:[hs],label:[ps]},$$scope:{ctx:t}};void 0!==t[0].default_connection&&(ut.value=t[0].default_connection);var st=new cr({props:ut});$t.push((function(){return Ht(st,"value",ct)}));var ft=new qn({props:{name:"forced_connection",checked:t[0].forced_connection,$$slots:{label:[gs]},$$scope:{ctx:t}}}),dt=new qn({props:{name:"open_to_public",checked:t[0].open_to_public,$$slots:{label:[vs]},$$scope:{ctx:t}}}),lt=new Tn({props:{icon:"save",op:t[3],$$slots:{default:[$s]},$$scope:{ctx:t}}}),pt=new qe({props:{op:t[3]}});return{c:function(){qt(I.$$.fragment),n=Y(),e=W("main"),r=W("form"),(o=W("h2")).textContent="".concat(Le("Recover or invite")),i=Y(),(a=W("p")).textContent="".concat(Le("Using this form, you can generate an invite link for new users, or a recover password link for existing users.")),c=Y(),qt(z.$$.fragment),u=Y(),B&&B.c(),s=Y(),f=W("div"),qt(H.$$.fragment),d=Y(),qt(K.$$.fragment),l=Y(),h=W("form"),(m=W("h2")).textContent="".concat(Le("Convos settings")),g=Y(),v=W("p"),$=Y(),qt(tt.$$.fragment),b=Y(),qt(rt.$$.fragment),_=Y(),qt(at.$$.fragment),k=Y(),qt(st.$$.fragment),O=Y(),qt(ft.$$.fragment),R=Y(),(C=W("p")).textContent="".concat(Le("Tick this box if you want to prevent users from creating custom connections.")),S=Y(),qt(dt.$$.fragment),D=Y(),(P=W("p")).textContent="".concat(Le("Tick this box if you want users to be able to register without an invite URL.")),M=Y(),j=W("div"),qt(lt.$$.fragment),A=Y(),qt(pt.$$.fragment),X(f,"class","form-actions"),X(r,"id","recover-or-invite"),X(r,"method","post"),X(C,"class","help"),X(P,"class","help"),X(j,"class","form-actions"),X(h,"id","convos-settings"),X(h,"method","post"),X(e,"class","main")},m:function(p,y,w){Ft(I,p,y),F(p,n,y),F(p,e,y),q(e,r),q(r,o),q(r,i),q(r,a),q(r,c),Ft(z,r,null),q(r,u),B&&B.m(r,null),q(r,s),q(r,f),Ft(H,f,null),q(r,d),Ft(K,r,null),q(e,l),q(e,h),q(h,m),q(h,g),q(h,v),v.innerHTML=U,q(h,$),Ft(tt,h,null),q(h,b),Ft(rt,h,null),q(h,_),Ft(at,h,null),q(h,k),Ft(st,h,null),q(h,O),Ft(ft,h,null),q(h,R),q(h,C),q(h,S),Ft(dt,h,null),q(h,D),q(h,P),q(h,M),q(h,j),Ft(lt,j,null),q(h,A),Ft(pt,h,null),L=!0,w&&N(T),T=[Z(r,"submit",J(t[4])),Z(h,"submit",J(t[6]))]},p:function(t,n){var e=p(n,1)[0],o={};16384&e&&(o.$$scope={dirty:e,ctx:t}),I.$set(o);var i={};16384&e&&(i.$$scope={dirty:e,ctx:t}),z.$set(i),t[1].url?B?B.p(t,e):((B=es(t)).c(),B.m(r,s)):B&&(B.d(1),B=null);var a={};16384&e&&(a.$$scope={dirty:e,ctx:t}),H.$set(a);var c={};16384&e&&(c.$$scope={dirty:e,ctx:t}),!y&&1&e&&(y=!0,c.value=t[0].organization_name,Ot((function(){return y=!1}))),tt.$set(c);var u={};16384&e&&(u.$$scope={dirty:e,ctx:t}),!w&&1&e&&(w=!0,u.value=t[0].organization_url,Ot((function(){return w=!1}))),rt.$set(u);var f={};16384&e&&(f.$$scope={dirty:e,ctx:t}),!x&&1&e&&(x=!0,f.value=t[0].contact,Ot((function(){return x=!1}))),at.$set(f);var d={};16384&e&&(d.$$scope={dirty:e,ctx:t}),!E&&1&e&&(E=!0,d.value=t[0].default_connection,Ot((function(){return E=!1}))),st.$set(d);var l={};1&e&&(l.checked=t[0].forced_connection),16384&e&&(l.$$scope={dirty:e,ctx:t}),ft.$set(l);var h={};1&e&&(h.checked=t[0].open_to_public),16384&e&&(h.$$scope={dirty:e,ctx:t}),dt.$set(h);var m={};16384&e&&(m.$$scope={dirty:e,ctx:t}),lt.$set(m)},i:function(t){L||(Tt(I.$$.fragment,t),Tt(z.$$.fragment,t),Tt(H.$$.fragment,t),Tt(K.$$.fragment,t),Tt(tt.$$.fragment,t),Tt(rt.$$.fragment,t),Tt(at.$$.fragment,t),Tt(st.$$.fragment,t),Tt(ft.$$.fragment,t),Tt(dt.$$.fragment,t),Tt(lt.$$.fragment,t),Tt(pt.$$.fragment,t),L=!0)},o:function(t){Ut(I.$$.fragment,t),Ut(z.$$.fragment,t),Ut(H.$$.fragment,t),Ut(K.$$.fragment,t),Ut(tt.$$.fragment,t),Ut(rt.$$.fragment,t),Ut(at.$$.fragment,t),Ut(st.$$.fragment,t),Ut(ft.$$.fragment,t),Ut(dt.$$.fragment,t),Ut(lt.$$.fragment,t),Ut(pt.$$.fragment,t),L=!1},d:function(t){Gt(I,t),t&&G(n),t&&G(e),Gt(z),B&&B.d(),Gt(H),Gt(K),Gt(tt),Gt(rt),Gt(at),Gt(st),Gt(ft),Gt(dt),Gt(lt),Gt(pt),N(T)}}}function bs(t,n,e){var r,o=mt("user"),i=o.api.operation("getSettings"),a=o.api.operation("inviteUser");j(t,a,(function(t){return e(7,r=t)}));var c,u=o.api.operation("updateSettings"),s={};return u.on("start",(function(t){t.body.contact&&(t.body.contact="mailto:"+t.body.contact),t.body.forced_connection=!!t.body.forced_connection,t.body.open_to_public=!!t.body.open_to_public})),xe.update({title:Le("Global settings")}),ht(Zt(Yt.mark((function t(){var n;return Yt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.perform();case 2:(n=i.res.body).contact=n.contact.replace(/mailto:/,""),e(0,s=n);case 5:case"end":return t.stop()}}),t)})))),t.$$.update=function(){128&t.$$.dirty&&e(1,c=r.res.body||{})},[s,c,a,u,function(t){a.perform(t.target)},function(t){var n=function(t){var n=document.createElement("textarea");n.value=t.textContent||t.value,n.style.opacity=0,n.style.position="absolute",document.body.appendChild(n);try{n.focus(),n.select(),document.execCommand("copy")}catch(t){n.value="",console.log("copyToClipboard() failed:",t)}return document.body.removeChild(n),n.value}(t.target);n&&o.omnibus.notify("Invite link copied",n,{force:!0})},function(t){u.perform(t.target)},r,o,i,function(t){s.organization_name=t,e(0,s)},function(t){s.organization_url=t,e(0,s)},function(t){s.contact=t,e(0,s)},function(t){s.default_connection=t,e(0,s)}]}var ws=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(Xu()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,bs,ys,P,{}),r}return u}(Vt);function _s(t,n){be("*",function(t){return function(n,e){for(var r=document.querySelectorAll(".js-remove"),o=0;o<r.length;o++)r[o].remove();t.update({ctx:n,query:ya(n.querystring)}),e()}}(t)),xs("/",t,Du),xs("/login",t,ei),xs("/register",t,ei),be("/api/user/logout.html",function(t){return function(n,e){return location.href=t.baseUrl+n.path}}(t)),xs("/help",t,Cu),xs("/settings/account",t,Ju),xs("/settings/connection",t,Vc),xs("/settings/conversation",t,vu),xs("/settings",t,ws),xs("/search",t,Lu),xs("/chat",t,qc),xs("/chat/:connection_id",t,qc),xs("/chat/:connection_id/:dialog_id",t,qc);var e=function(t,n){};be("/docs/*",e),be("/file/*",e),be("/paste/*",e),xs("*",t,Oo),function(t,n){n.omnibus.on("wsEventSentJoin",(function(n){t.go(t.dialogPath(n))})),n.omnibus.on("wsEventSentPart",(function(e){var r=n.findDialog({connection_id:e.connection_id});if(!r)return t.go("/settings/connection");var o=r.dialogs.toArray()[0];t.go(o?o.path:"/settings/conversation")}))}(t,n)}function xs(t,n,e){be(t,(function(r,o){var i=-1==[Oo,ei,Du].indexOf(e),a=i?"nav":"default";dn("body",/(is-logged-)\S+/,i?"in":"out"),dn("body",/(page-)\S+/,(e.name||n.pathParts[0]).toLowerCase()),n.update({activeMenu:a,component:e,requireLogin:i}),Ui.debug&&console.log("[render:"+e.name+"]",t,JSON.stringify(n.pathParts)),i&&n.update({lastUrl:r.canonicalPath})}))}function ks(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Es=new(function(n){c(a,n);var e,r=(e=a,function(){var t,n=i(e);if(ks()){var r=i(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return o(this,t)});function a(){var n;return t(this,a),(n=r.call(this)).prop("rw","height",0),n.prop("rw","width",0),n.prop("ro","isWide",(function(){return n.width>800})),n}return a}(yn));function Os(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Rs=Bt.window;function Cs(t){var n,e,r=t[4].component;if(r)var o=new r({});return{c:function(){o&&qt(o.$$.fragment),n=Q()},m:function(t,r){o&&Ft(o,t,r),F(t,n,r),e=!0},p:function(t,e){if(r!==(r=t[4].component)){if(o){At();var i=o;Ut(i.$$.fragment,1,0,(function(){Gt(i,1)})),Lt()}r?(qt((o=new r({})).$$.fragment),Tt(o.$$.fragment,1),Ft(o,n.parentNode,n)):o=null}},i:function(t){e||(o&&Tt(o.$$.fragment,t),e=!0)},o:function(t){o&&Ut(o.$$.fragment,t),e=!1},d:function(t){t&&G(n),o&&Gt(o,t)}}}function Ss(t){var n,e,r,o,i,a=("nav"==t[4].activeMenu||t[5].isWide)&&"default"!=t[4].activeMenu&&Ps(t),c="settings"==t[4].activeMenu&&Ms(t),u=t[4].component;if(u)var s=new u({});var f=t[4].activeMenu&&!t[5].isWide&&js(t);return{c:function(){a&&a.c(),n=Y(),c&&c.c(),e=Y(),s&&qt(s.$$.fragment),r=Y(),f&&f.c(),o=Q()},m:function(t,u){a&&a.m(t,u),F(t,n,u),c&&c.m(t,u),F(t,e,u),s&&Ft(s,t,u),F(t,r,u),f&&f.m(t,u),F(t,o,u),i=!0},p:function(t,i){if("nav"!=t[4].activeMenu&&!t[5].isWide||"default"==t[4].activeMenu?a&&(At(),Ut(a,1,1,(function(){a=null})),Lt()):a?(a.p(t,i),Tt(a,1)):((a=Ps(t)).c(),Tt(a,1),a.m(n.parentNode,n)),"settings"==t[4].activeMenu?c?(c.p(t,i),Tt(c,1)):((c=Ms(t)).c(),Tt(c,1),c.m(e.parentNode,e)):c&&(At(),Ut(c,1,1,(function(){c=null})),Lt()),u!==(u=t[4].component)){if(s){At();var d=s;Ut(d.$$.fragment,1,0,(function(){Gt(d,1)})),Lt()}u?(qt((s=new u({})).$$.fragment),Tt(s.$$.fragment,1),Ft(s,r.parentNode,r)):s=null}t[4].activeMenu&&!t[5].isWide?f?(f.p(t,i),Tt(f,1)):((f=js(t)).c(),Tt(f,1),f.m(o.parentNode,o)):f&&(At(),Ut(f,1,1,(function(){f=null})),Lt())},i:function(t){i||(Tt(a),Tt(c),s&&Tt(s.$$.fragment,t),Tt(f),i=!0)},o:function(t){Ut(a),Ut(c),s&&Ut(s.$$.fragment,t),Ut(f),i=!1},d:function(t){a&&a.d(t),t&&G(n),c&&c.d(t),t&&G(e),s&&Gt(s,t),t&&G(r),f&&f.d(t),t&&G(o)}}}function Ns(t){var n,e=new Oo({props:{status:"loading"}});return{c:function(){qt(e.$$.fragment)},m:function(t,r){Ft(e,t,r),n=!0},p:O,i:function(t){n||(Tt(e.$$.fragment,t),n=!0)},o:function(t){Ut(e.$$.fragment,t),n=!1},d:function(t){Gt(e,t)}}}function Ds(t){var n,e=new Oo({props:{status:"offline"}});return{c:function(){qt(e.$$.fragment)},m:function(t,r){Ft(e,t,r),n=!0},p:O,i:function(t){n||(Tt(e.$$.fragment,t),n=!0)},o:function(t){Ut(e.$$.fragment,t),n=!1},d:function(t){Gt(e,t)}}}function Ps(t){var n,e=new Ci({props:{transition:{duration:t[5].isWide?0:250,x:t[5].width}}});return{c:function(){qt(e.$$.fragment)},m:function(t,r){Ft(e,t,r),n=!0},p:function(t,n){var r={};32&n&&(r.transition={duration:t[5].isWide?0:250,x:t[5].width}),e.$set(r)},i:function(t){n||(Tt(e.$$.fragment,t),n=!0)},o:function(t){Ut(e.$$.fragment,t),n=!1},d:function(t){Gt(e,t)}}}function Ms(t){var n,e,r=t[2];function o(t){return{props:{dialog:t[3].activeDialog,transition:{duration:250,x:t[5].isWide?0:t[5].width}}}}if(r)var i=new r(o(t));return{c:function(){i&&qt(i.$$.fragment),n=Q()},m:function(t,r){i&&Ft(i,t,r),F(t,n,r),e=!0},p:function(t,e){var a={};if(8&e&&(a.dialog=t[3].activeDialog),32&e&&(a.transition={duration:250,x:t[5].isWide?0:t[5].width}),r!==(r=t[2])){if(i){At();var c=i;Ut(c.$$.fragment,1,0,(function(){Gt(c,1)})),Lt()}r?(qt((i=new r(o(t))).$$.fragment),Tt(i.$$.fragment,1),Ft(i,n.parentNode,n)):i=null}else r&&i.$set(a)},i:function(t){e||(i&&Tt(i.$$.fragment,t),e=!0)},o:function(t){i&&Ut(i.$$.fragment,t),e=!1},d:function(t){t&&G(n),i&&Gt(i,t)}}}function js(t){var n,e,r,o;return{c:function(){(n=W("div")).textContent=" ",X(n,"class","overlay")},m:function(e,i,a){F(e,n,i),r=!0,a&&o(),o=Z(n,"click",t[10])},p:O,i:function(t){r||(Et((function(){e||(e=zt(n,jr,{duration:200},!0)),e.run(1)})),r=!0)},o:function(t){e||(e=zt(n,jr,{duration:200},!1)),e.run(0),r=!1},d:function(t){t&&G(n),t&&e&&e.end(),o()}}}function As(t){var n,e,r,o,i,a,c;Et(t[9]);var u=[Ds,Ns,Ss,Cs],s=[];function f(t,r){return 8&r&&(n=!!t[3].is("offline")),n?0:t[4].component?(24&r&&(e=!(!t[4].requireLogin||!t[3].is("authenticated"))),e?2:3):1}return r=f(t,-1),o=s[r]=u[r](t),{c:function(){o.c(),i=Q()},m:function(n,e,o){s[r].m(n,e),F(n,i,e),a=!0,o&&N(c),c=[Z(Rs,"click",Ts),Z(Rs,"focus",t[8]),Z(Rs,"keydown",Ls),Z(Rs,"resize",t[9])]},p:function(t,n){var e=p(n,1)[0],a=r;(r=f(t,e))===a?s[r].p(t,e):(At(),Ut(s[a],1,1,(function(){s[a]=null})),Lt(),(o=s[r])||(o=s[r]=u[r](t)).c(),Tt(o,1),o.m(i.parentNode,i))},i:function(t){a||(Tt(o),a=!0)},o:function(t){Ut(o),a=!1},d:function(t){s[r].d(t),t&&G(i),N(c)}}}function Ls(t){if(27==t.keyCode)return rn("chat_input"),void sn(document,".fullscreen-media-wrapper",(function(t){return pn(t,!1)}));t.shiftKey&&13==t.keyCode&&(t.preventDefault(),rn())}function Ts(t){var n=t.target&&t.target.closest("a"),e=n&&n.href.match(/#activeMenu:(\w*)/);if(e){if(Xt(t.target,".sidebar-left")&&!n)return;xe.update({activeMenu:e[1]==xe.activeMenu?"":e[1]}),t.preventDefault()}}function Us(t,n,e){var r,o,i;j(t,xe,(function(t){return e(4,o=t)})),j(t,Es,(function(t){return e(5,i=t)}));var a=new _n(process.env.api_url,{debug:!0}),c=new da({api:a,isFirst:process.env.first_user,themes:process.env.themes});j(t,c,(function(t){return e(3,r=t)}));var u,s,f=0,d=0;u="user",s=c,pt().$$.context.set(u,s),window.hljs=Ro,xe.update({baseUrl:process.env.base_url}),_s(xe,c),c.activateTheme(),c.on("update",(function(t,n){return n.hasOwnProperty("roles")&&xe.render()})),c.omnibus.start({route:xe,wsUrl:process.env.ws_url}),ht((function(){cn(xe.urlFor("/images/emojis.js")),c.showGrid&&document.querySelector("body").classList.add("with-grid"),c.load(process.env.load_user)}));var l;return t.$$.update=function(){8&t.$$.dirty&&e(2,l=r.activeDialog.connection_id?r.activeDialog.dialog_id?go:qr:null),3&t.$$.dirty&&Es.update({height:f,width:d}),24&t.$$.dirty&&document&&(document.title=r.unread?"("+r.unread+") "+o.title:o.title)},[f,d,l,r,o,i,c,a,function(){return c.email&&c.omnibus.send("ping")},function(){e(0,f=Rs.innerHeight),e(1,d=Rs.innerWidth)},function(){return o.update({activeMenu:""})}]}var Is=function(e){c(u,e);var r,a=(r=u,function(){var t,n=i(r);if(Os()){var e=i(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function u(e){var r;return t(this,u),r=a.call(this),Wt(n(r),e,Us,As,P,{}),r}return u}(Vt),zs=document.querySelector("body");new Is({target:document.body});zs.classList=zs.className.replace(/no-js/,"has-js")}();
//# sourceMappingURL=convos.5e8b22d0.js.map
