!function(){"use strict";var n=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")};var t=function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n};function e(n,t){return n(t={exports:{}},t.exports),t.exports}var r=e((function(n){function t(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?n.exports=t=function(n){return typeof n}:n.exports=t=function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},t(e)}n.exports=t}));var o=function(n,e){return!e||"object"!==r(e)&&"function"!=typeof e?t(n):e},i=e((function(n){function t(e){return n.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},t(e)}n.exports=t})),a=e((function(n){function t(e,r){return n.exports=t=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},t(e,r)}n.exports=t}));var c=function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&a(n,t)};var u=function(n){if(Array.isArray(n))return n};var s=function(n,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n)){var e=[],r=!0,o=!1,i=void 0;try{for(var a,c=n[Symbol.iterator]();!(r=(a=c.next()).done)&&(e.push(a.value),!t||e.length!==t);r=!0);}catch(n){o=!0,i=n}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return e}};var f=function(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r};var d=function(n,t){if(n){if("string"==typeof n)return f(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?f(n,t):void 0}};var l=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var p=function(n,t){return u(n)||s(n,t)||d(n,t)||l()};var h=function(n,t){for(;!Object.prototype.hasOwnProperty.call(n,t)&&null!==(n=i(n)););return n},m=e((function(n){function t(e,r,o){return"undefined"!=typeof Reflect&&Reflect.get?n.exports=t=Reflect.get:n.exports=t=function(n,t,e){var r=h(n,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(e):o.value}},t(e,r,o||e)}n.exports=t}));var g=function(n){return-1!==Function.toString.call(n).indexOf("[native code]")};var v=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}},$=e((function(n){function t(e,r,o){return v()?n.exports=t=Reflect.construct:n.exports=t=function(n,t,e){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(n,r));return e&&a(o,e.prototype),o},t.apply(null,arguments)}n.exports=t})),y=e((function(n){function t(e){var r="function"==typeof Map?new Map:void 0;return n.exports=t=function(n){if(null===n||!g(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(n))return r.get(n);r.set(n,t)}function t(){return $(n,arguments,i(this).constructor)}return t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a(t,n)},t(e)}n.exports=t}));var b=function(n){if(Array.isArray(n))return f(n)};var w=function(n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)};var _=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var x=function(n){return b(n)||w(n)||d(n)||_()};function k(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var E=function(n,t,e){return t&&k(n.prototype,t),e&&k(n,e),n};function O(){}var C=function(n){return n};function R(n){return n()}function S(){return Object.create(null)}function N(n){n.forEach(R)}function D(n){return"function"==typeof n}function P(n,t){return n!=n?t==t:n!==t||n&&"object"===r(n)||"function"==typeof n}function M(n){if(null==n)return O;for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];var o=n.subscribe.apply(n,e);return o.unsubscribe?function(){return o.unsubscribe()}:o}function j(n,t,e){n.$$.on_destroy.push(M(t,e))}function A(n,t,e,r){if(n){var o=T(n,t,e,r);return n[0](o)}}function T(n,t,e,r){return n[1]&&r?function(n,t){for(var e in t)n[e]=t[e];return n}(e.ctx.slice(),n[1](r(t))):e.ctx}function L(n,t,e,o){if(n[2]&&o){var i=n[2](o(e));if(void 0===t.dirty)return i;if("object"===r(i)){for(var a=[],c=Math.max(t.dirty.length,i.length),u=0;u<c;u+=1)a[u]=t.dirty[u]|i[u];return a}return t.dirty|i}return t.dirty}var U="undefined"!=typeof window,I=U?function(){return window.performance.now()}:function(){return Date.now()},z=U?function(n){return requestAnimationFrame(n)}:O,B=new Set;function q(n){B.forEach((function(t){t.c(n)||(B.delete(t),t.f())})),0!==B.size&&z(q)}function H(n,t){n.appendChild(t)}function F(n,t,e){n.insertBefore(t,e||null)}function K(n){n.parentNode.removeChild(n)}function G(n,t){for(var e=0;e<n.length;e+=1)n[e]&&n[e].d(t)}function W(n){return document.createElement(n)}function V(n){return document.createTextNode(n)}function Y(){return V(" ")}function Q(){return V("")}function Z(n,t,e,r){return n.addEventListener(t,e,r),function(){return n.removeEventListener(t,e,r)}}function J(n){return function(t){return t.preventDefault(),n.call(this,t)}}function X(n,t,e){null==e?n.removeAttribute(t):n.getAttribute(t)!==e&&n.setAttribute(t,e)}function nn(n){return Array.from(n.childNodes)}function tn(n,t){t=""+t,n.data!==t&&(n.data=t)}function en(n,t){(null!=t||n.value)&&(n.value=t)}function rn(n,t,e,r){n.style.setProperty(t,e,r?"important":"")}function on(n,t,e){n.classList[e?"add":"remove"](t)}var an,cn=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n(this,t),this.e=W("div"),this.a=r,this.u(e)}return E(t,[{key:"m",value:function(n){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=0;e<this.n.length;e+=1)F(n,this.n[e],t);this.t=n}},{key:"u",value:function(n){this.e.innerHTML=n,this.n=Array.from(this.e.childNodes)}},{key:"p",value:function(n){this.d(),this.u(n),this.m(this.t,this.a)}},{key:"d",value:function(){this.n.forEach(K)}}]),t}(),un=new Set,sn=0;function fn(n){for(var t=5381,e=n.length;e--;)t=(t<<5)-t^n.charCodeAt(e);return t>>>0}function dn(n,t,e,r,o,i,a){for(var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=16.666/r,s="{\n",f=0;f<=1;f+=u){var d=t+(e-t)*i(f);s+=100*f+"%{".concat(a(d,1-d),"}\n")}var l=s+"100% {".concat(a(e,1-e),"}\n}"),p="__svelte_".concat(fn(l),"_").concat(c),h=n.ownerDocument;un.add(h);var m=h.__svelte_stylesheet||(h.__svelte_stylesheet=h.head.appendChild(W("style")).sheet),g=h.__svelte_rules||(h.__svelte_rules={});g[p]||(g[p]=!0,m.insertRule("@keyframes ".concat(p," ").concat(l),m.cssRules.length));var v=n.style.animation||"";return n.style.animation="".concat(v?"".concat(v,", "):"").concat(p," ").concat(r,"ms linear ").concat(o,"ms 1 both"),sn+=1,p}function ln(n,t){var e=(n.style.animation||"").split(", "),r=e.filter(t?function(n){return n.indexOf(t)<0}:function(n){return-1===n.indexOf("__svelte")}),o=e.length-r.length;o&&(n.style.animation=r.join(", "),(sn-=o)||z((function(){sn||(un.forEach((function(n){for(var t=n.__svelte_stylesheet,e=t.cssRules.length;e--;)t.deleteRule(e);n.__svelte_rules={}})),un.clear())})))}function pn(n){an=n}function hn(){if(!an)throw new Error("Function called outside component initialization");return an}function mn(n){hn().$$.on_mount.push(n)}function gn(n){return hn().$$.context.get(n)}function vn(n,t){var e=n.$$.callbacks[t.type];e&&e.slice().forEach((function(n){return n(t)}))}var $n=[],yn=[],bn=[],wn=[],_n=Promise.resolve(),xn=!1;function kn(){xn||(xn=!0,_n.then(Dn))}function En(){return kn(),_n}function On(n){bn.push(n)}function Cn(n){wn.push(n)}var Rn,Sn=!1,Nn=new Set;function Dn(){if(!Sn){Sn=!0;do{for(var n=0;n<$n.length;n+=1){var t=$n[n];pn(t),Pn(t.$$)}for($n.length=0;yn.length;)yn.pop()();for(var e=0;e<bn.length;e+=1){var r=bn[e];Nn.has(r)||(Nn.add(r),r())}bn.length=0}while($n.length);for(;wn.length;)wn.pop()();xn=!1,Sn=!1,Nn.clear()}}function Pn(n){if(null!==n.fragment){n.update(),N(n.before_update);var t=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,t),n.after_update.forEach(On)}}function Mn(n,t,e){var r,o,i;n.dispatchEvent((r="".concat(t?"intro":"outro").concat(e),(i=document.createEvent("CustomEvent")).initCustomEvent(r,!1,!1,o),i))}var jn,An=new Set;function Tn(){jn={r:0,c:[],p:jn}}function Ln(){jn.r||N(jn.c),jn=jn.p}function Un(n,t){n&&n.i&&(An.delete(n),n.i(t))}function In(n,t,e,r){if(n&&n.o){if(An.has(n))return;An.add(n),jn.c.push((function(){An.delete(n),r&&(e&&n.d(1),r())})),n.o(t)}}var zn={duration:0};function Bn(n,t,e,r){var o=t(n,e),i=r?0:1,a=null,c=null,u=null;function s(){u&&ln(n,u)}function f(n,t){var e=n.b-i;return t*=Math.abs(e),{a:i,b:n.b,d:e,duration:t,start:n.start,end:n.start+t,group:n.group}}function d(t){var e,r=o||zn,d=r.delay,l=void 0===d?0:d,p=r.duration,h=void 0===p?300:p,m=r.easing,g=void 0===m?C:m,v=r.tick,$=void 0===v?O:v,y=r.css,b={start:I()+l,b:t};t||(b.group=jn,jn.r+=1),a?c=b:(y&&(s(),u=dn(n,i,t,h,l,g,y)),t&&$(0,1),a=f(b,h),On((function(){return Mn(n,t,"start")})),e=function(t){if(c&&t>c.start&&(a=f(c,h),c=null,Mn(n,a.b,"start"),y&&(s(),u=dn(n,i,a.b,a.duration,0,g,o.css))),a)if(t>=a.end)$(i=a.b,1-i),Mn(n,a.b,"end"),c||(a.b?s():--a.group.r||N(a.group.c)),a=null;else if(t>=a.start){var e=t-a.start;i=a.a+a.d*g(e/a.duration),$(i,1-i)}return!(!a&&!c)},0===B.size&&z(q),new Promise((function(n){B.add({c:e,f:n})})))}return{run:function(n){D(o)?(Rn||(Rn=Promise.resolve()).then((function(){Rn=null})),Rn).then((function(){o=o(),d(n)})):d(n)},end:function(){s(),a=c=null}}}var qn="undefined"!=typeof window?window:global;function Hn(n,t,e){var r=n.$$.props[t];void 0!==r&&(n.$$.bound[r]=e,e(n.$$.ctx[r]))}function Fn(n){n&&n.c()}function Kn(n,t,e){var r=n.$$,o=r.fragment,i=r.on_mount,a=r.on_destroy,c=r.after_update;o&&o.m(t,e),On((function(){var t=i.map(R).filter(D);a?a.push.apply(a,x(t)):N(t),n.$$.on_mount=[]})),c.forEach(On)}function Gn(n,t){var e=n.$$;null!==e.fragment&&(N(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function Wn(n,t){-1===n.$$.dirty[0]&&($n.push(n),kn(),n.$$.dirty.fill(0)),n.$$.dirty[t/31|0]|=1<<t%31}function Vn(n,t,e,r,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[-1],c=an;pn(n);var u=t.props||{},s=n.$$={fragment:null,ctx:null,props:i,update:O,not_equal:o,bound:S(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:S(),dirty:a},f=!1;if(s.ctx=e?e(n,u,(function(t,e){var r=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:e;return s.ctx&&o(s.ctx[t],s.ctx[t]=r)&&(s.bound[t]&&s.bound[t](r),f&&Wn(n,t)),e})):[],s.update(),f=!0,N(s.before_update),s.fragment=!!r&&r(s.ctx),t.target){if(t.hydrate){var d=nn(t.target);s.fragment&&s.fragment.l(d),d.forEach(K)}else s.fragment&&s.fragment.c();t.intro&&Un(n.$$.fragment),Kn(n,t.target,t.anchor),Dn()}pn(c)}var Yn=function(){function t(){n(this,t)}return E(t,[{key:"$destroy",value:function(){Gn(this,1),this.$destroy=O}},{key:"$on",value:function(n,t){var e=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return e.push(t),function(){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}}},{key:"$set",value:function(){}}]),t}(),Qn=e((function(n){var t=function(n){var t=Object.prototype,e=t.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(n,t,e,r){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),a=new x(r||[]);return i._invoke=function(n,t,e){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return E()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=b(a,e);if(c){if(c===f)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var u=s(n,t,e);if("normal"===u.type){if(r=e.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(r="completed",e.method="throw",e.arg=u.arg)}}}(n,e,a),i}function s(n,t,e){try{return{type:"normal",arg:n.call(t,e)}}catch(n){return{type:"throw",arg:n}}}n.wrap=u;var f={};function d(){}function l(){}function p(){}var h={};h[i]=function(){return this};var m=Object.getPrototypeOf,g=m&&m(m(k([])));g&&g!==t&&e.call(g,i)&&(h=g);var v=p.prototype=d.prototype=Object.create(h);function $(n){["next","throw","return"].forEach((function(t){n[t]=function(n){return this._invoke(t,n)}}))}function y(n,t){var o;this._invoke=function(i,a){function c(){return new t((function(o,c){!function o(i,a,c,u){var f=s(n[i],n,a);if("throw"!==f.type){var d=f.arg,l=d.value;return l&&"object"===r(l)&&e.call(l,"__await")?t.resolve(l.__await).then((function(n){o("next",n,c,u)}),(function(n){o("throw",n,c,u)})):t.resolve(l).then((function(n){d.value=n,c(d)}),(function(n){return o("throw",n,c,u)}))}u(f.arg)}(i,a,o,c)}))}return o=o?o.then(c,c):c()}}function b(n,t){var e=n.iterator[t.method];if(void 0===e){if(t.delegate=null,"throw"===t.method){if(n.iterator.return&&(t.method="return",t.arg=void 0,b(n,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=s(e,n.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var o=r.arg;return o?o.done?(t[n.resultName]=o.value,t.next=n.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function w(n){var t={tryLoc:n[0]};1 in n&&(t.catchLoc=n[1]),2 in n&&(t.finallyLoc=n[2],t.afterLoc=n[3]),this.tryEntries.push(t)}function _(n){var t=n.completion||{};t.type="normal",delete t.arg,n.completion=t}function x(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(w,this),this.reset(!0)}function k(n){if(n){var t=n[i];if(t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,o=function t(){for(;++r<n.length;)if(e.call(n,r))return t.value=n[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return l.prototype=v.constructor=p,p.constructor=l,p[c]=l.displayName="GeneratorFunction",n.isGeneratorFunction=function(n){var t="function"==typeof n&&n.constructor;return!!t&&(t===l||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,p):(n.__proto__=p,c in n||(n[c]="GeneratorFunction")),n.prototype=Object.create(v),n},n.awrap=function(n){return{__await:n}},$(y.prototype),y.prototype[a]=function(){return this},n.AsyncIterator=y,n.async=function(t,e,r,o,i){void 0===i&&(i=Promise);var a=new y(u(t,e,r,o),i);return n.isGeneratorFunction(e)?a:a.next().then((function(n){return n.done?n.value:a.next()}))},$(v),v[c]="Generator",v[i]=function(){return this},v.toString=function(){return"[object Generator]"},n.keys=function(n){var t=[];for(var e in n)t.push(e);return t.reverse(),function e(){for(;t.length;){var r=t.pop();if(r in n)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=k,x.prototype={constructor:x,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!n)for(var t in this)"t"===t.charAt(0)&&e.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var t=this;function r(e,r){return a.type="throw",a.arg=n,t.next=e,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),u=e.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(n,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===n||"continue"===n)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=n,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(n,t){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&t&&(this.next=t),f},finish:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.finallyLoc===n)return this.complete(e.completion,e.afterLoc),_(e),f}},catch:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.tryLoc===n){var r=e.completion;if("throw"===r.type){var o=r.arg;_(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(n,t,e){return this.delegate={iterator:k(n),resultName:t,nextLoc:e},"next"===this.method&&(this.arg=void 0),f}},n}(n.exports);try{regeneratorRuntime=t}catch(n){Function("r","regeneratorRuntime = r")(t)}}));function Zn(n,t,e,r,o,i,a){try{var c=n[i](a),u=c.value}catch(n){return void e(n)}c.done?t(u):Promise.resolve(u).then(r,o)}var Jn=function(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(n){Zn(i,r,o,a,c,"next",n)}function c(n){Zn(i,r,o,a,c,"throw",n)}a(void 0)}))}};var Xn=function(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n};function nt(n,t){for(;n;){if(t.tagName?n==t:n.matches&&n.matches(t))return n;n=n.parentNode}return null}function tt(n,t){var e;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var a=this;e&&clearTimeout(e),e=setTimeout((function(){n.apply(a,o)}),t)}}function et(n,t,e){var r=n&&n.querySelector("."+t.split(" ").join("."));return r||((r=document.createElement("div")).className=t,n&&n.appendChild(r),e&&e(r),r)}function rt(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"message",e=n.errors||n;return e&&e[0]?e[0][t]||"Unknown error.":""}function ot(n){if(!n||!("ontouchstart"in window)){if(n){var t=document.getElementById(n);return t&&t.focus()}var e=document.getElementById("search_input"),r=document.activeElement;if(r!=e&&!ht(r,"body"))return e.focus();for(var o=["#chat_input",'.main input[type="text"]',".main a","#search_input"],i=0;i<o.length;i++){var a=document.querySelector(o[i]);if(a)return a.focus()}}}function it(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.95,r=Math.floor(6*n),o=6*n-r,i=e*(1-t),a=e*(1-o*t),c=e*(1-(1-o)*t),u=255,s=255,f=255;switch(r){case 0:u=e,s=c,f=i;break;case 1:u=a,s=e,f=i;break;case 2:u=i,s=e,f=c;break;case 3:u=i,s=a,f=e;break;case 4:u=c,s=i,f=e;break;case 5:u=e,s=i,f=a}return[Math.floor(255*u),Math.floor(255*s),Math.floor(255*f)]}function at(n,t){return"array"==t?Array.isArray(n):"object"==t?"object"==r(n)&&null!==n:"undef"==t?null==n:r(n)==t}function ct(n){var t=document,e=n.replace(/\W/g,"_");if(!t.getElementById(e)){var r=t.createElement("script"),o=[e,n];r.id=o[0],r.src=o[1],t.getElementsByTagName("head")[0].appendChild(r)}}function ut(n){return Object.keys(n).filter((function(t){return n[t]})).sort().map((function(n){return"has-mode-"+n})).join(" ")}function st(n,t,e){var r=n.querySelectorAll(t);if(!e)return[].slice.call(r,0);for(var o=[],i=0;i<r.length;i++)o.push(e(r[i],i));return o}function ft(n){return n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function dt(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!(t>=5)){var e=document.querySelector(".main")||document.querySelector("body");if(!e)return setTimeout((function(){return dt(n,t+1)}),20);if("number"==typeof n)return e.scrollTo(0,n);if("string"==typeof n){var r=document.querySelector(n);return r?dt(r):setTimeout((function(){return dt(n,t+1)}),20)}if(n.href&&-1!=n.href.indexOf("#"))return location.hash=n.href.replace(/.*#/,"#"),dt(location.hash);if(n.tagName)return dt(n.offsetTop-30);if(n.preventDefault&&n.preventDefault(),n.target&&n.target.tagName)return dt(n.target.closest("[href]"));throw"Cannot scroll to "+n}}function lt(n,t){return"is-visible"===t?!n.hasAttribute("hidden"):("toggle"===t&&(t=n.hasAttribute("hidden")),t?n.removeAttribute("hidden"):n.setAttribute("hidden",""))}function pt(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;if(0==n.length)return"#000";for(var e=0,r=0;r<n.length;r++)e=n.charCodeAt(r)+((e<<5)-e),e&=e;return"#"+it(((e=Math.abs(e%t/t))+.618033988749)%1,.4,.7).map((function(n){return n.toString(16)})).join("")}function ht(n,t){return n&&n.tagName&&n.tagName.toLowerCase()===t||!1}function mt(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var t=16*Math.random()|0;return("x"==n?t:3&t|8).toString(16)}))}function gt(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function vt(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(e),!0).forEach((function(t){Xn(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):gt(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}var $t=function(){function t(){n(this,t),this._on={},this._props={}}return E(t,[{key:"emit",value:function(n){for(var t=this._on[n],e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];for(var i=0;i<(t||[]).length;i++){var a;(a=t[i])[0].apply(a,r)}return this}},{key:"on",value:function(n,t){var e=t?null:new Promise((function(n){t=n})),r=this._on[n]||(this._on[n]=[]),o=[t];r.push(o);var i=function(){var n=r.indexOf(o);-1!=n&&r.splice(n,1)};return e?e.finally(i):i}},{key:"prop",value:function(n,t,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};switch(this._props[t]=vt({},r,{type:n,value:e}),n){case"persist":return this._localStorageProp(t);case"ro":return this._readOnlyProp(t);case"rw":return this._updateableProp(t)}throw"["+this.constructor.name+'] Unknown prop type "'+n+'" for prop "'+t+'".'}},{key:"subscribe",value:function(n){return n(this),this.on("update",n)}},{key:"update",value:function(n){var t=this;return Object.keys(n).forEach((function(e){var r=t._props[e];r&&(r.hasOwnProperty("prev")||(r.prev="ro"==r.type?void 0:r.value),"persist"!=r.type&&"rw"!=r.type||(r.value=n[e]))})),this._updatedTid||(this._updatedTid=setTimeout(this._delayedUpdate.bind(this),1)),this}},{key:"_delayedUpdate",value:function(){var n=this,t={};return Object.keys(this._props).forEach((function(e){var r=n._props[e];if(r.hasOwnProperty("prev")){var o=r.prev;delete r.prev,r.value!==o&&("persist"==r.type&&n._localStorage(e,r.value),t[e]="ro"!=r.type)}})),delete this._updatedTid,Object.keys(t).length&&this.emit("update",this,t),t}},{key:"_localStorage",value:function(n,t){var e="convos:"+(this._props[n].key||n);if(2==arguments.length)return localStorage.setItem(e,JSON.stringify(t));try{return localStorage.hasOwnProperty(e)?JSON.parse(localStorage.getItem(e)):void 0}catch(n){return void console.error("[Reactive:localStorage]",Xn({},e,localStorage.getItem(e)),n)}}},{key:"_localStorageProp",value:function(n){var t=this._props[n],e=this._localStorage(n);at(e,"undef")||(t.value=e),at(e,"undef")&&!this._props[n].lazy&&this._localStorage(n,t.value),this._updateableProp(n)}},{key:"_readOnlyProp",value:function(n){var t=this._props[n];if(void 0===t.value)throw"["+this.constructor.name+'] Read-only attribute "'+n+'" cannot be undefined';var e="function"==typeof t.value?t.value:function(){return t.value};Object.defineProperty(this,n,{get:e})}},{key:"_updateableProp",value:function(n){var t=this._props[n];Object.defineProperty(this,n,{get:function(){return t.value}})}}]),t}();function yt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var bt=function(t){c(a,t);var e,r=(e=a,function(){var n,t=i(e);if(yt()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function a(t){var e;return n(this,a),(e=r.call(this)).prop("ro","api",t.api),e.prop("ro","defaultParams",t.defaultParams||{}),e.prop("ro","id",t.id),e.prop("ro","req",{body:null,headers:{}}),e.prop("ro","res",{body:{},headers:{}}),e.prop("rw","err",null),e.prop("rw","status","pending"),e}return E(a,[{key:"error",value:function(n,t){if(n)return this.update({err:Array.isArray(n)?n:[{message:n,source:t}],status:"error"});if(!this.err||!this.err.length)return"";var e=this.err[0],r=e.path&&e.path.match(/\w$/)&&e.path.split("/").pop();return r?r+": "+e.message:e.message}},{key:"perform",value:function(n){var t=this;return this._promise||(this._promise=new Promise((function(e){t.api.spec(t.id).then((function(r){if(!r)return e(t.error('Invalid operationId "'+t.id+'".',"spec"));t.update({status:"loading"});var o=t._paramsToRequest(r,n||t.defaultParams),i=p(o,2),a=i[0],c=i[1];return t.emit("start",c),at(c.body,"object")&&"function"!=typeof c.body.has&&(c.body=JSON.stringify(c.body)),fetch(a,c)})).then((function(n){return Promise.all([n,n.json()])})).then((function(n){var r=p(n,2),o=r[0],i=r[1];delete t._promise,e(t.parse(o,i))})).catch((function(n){delete t._promise,e(t.error('Failed fetching operationId "'+t.id+'": '+n,"fetch"))}))})))}},{key:"is",value:function(n){return this.status==n}},{key:"parse",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.body;this.res.body=t||n,this.res.status=n.status||"201",n.headers&&(this.res.headers=n.headers);var e=null;return String(this.res.status).match(/^[23]/)||(e=t&&t.errors?t.errors:[{message:n.statusText||"Unknown error."}]),this.update({err:e,status:e?"error":"success"})}},{key:"reset",value:function(){return this.res.body={},this.res.headers={},this.res.status=0,this.update({err:null,status:"pending"})}},{key:"_extractValue",value:function(n,t){if(t.schema&&"form"==(n.tagName||"").toLowerCase())return Object.keys(t.schema.properties).reduce((function(t,e){var r=n[e];return r&&("checkbox"!=r.type||r.checked)?(t[e]=r.value,t):t}),{});if(n[t.name]&&n[t.name].tagName)return n[t.name].value;if(t.schema){var e={};return Object.keys(t.schema.properties).forEach((function(t){e[t]=n[t]})),e}return n[t.name]}},{key:"_hasProperty",value:function(n,t){return"body"==t.in||("formData"==t.in?n.formData.has(t.name):"form"==(n.tagName||"").toLowerCase()?!!n[t.name]:n.hasOwnProperty(t.name))}},{key:"_paramsToRequest",value:function(n,t){var e=this,r={headers:this.req.headers,method:n.method},o=new URL(n.url);return(n.parameters||[]).forEach((function(n){if(e._hasProperty(t,n)||n.required)if("path"==n.in){var i=new RegExp("(%7B|\\{)"+ft(n.name)+"(%7D|\\})","i");o.pathname=o.pathname.replace(i,encodeURIComponent(e._extractValue(t,n)))}else if("query"==n.in)o.searchParams.set(n.name,e._extractValue(t,n));else if("formData"==n.in)delete r.headers["Content-Type"],r.body=t.formData;else if("body"==n.in)r.body=e._extractValue(t,n);else{if("header"!=n.in)throw"[Api] Parameter in:"+n.in+" is not supported.";r.header[n.name]=e._extractValue(t,n.name)}})),[o,r]}}]),a}($t),wt=function(){function t(e){n(this,t),this.protocol=location.protocol,this.url=e}var e;return E(t,[{key:"operation",value:function(n,t){var e=new bt({api:this,id:n,defaultParams:t});return e.req.headers={"Content-Type":"application/json"},e}},{key:"spec",value:(e=Jn(Qn.mark((function n(t){var e,r,o=this;return Qn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this._ops||!t){n.next=2;break}return n.abrupt("return",this._ops[t]);case 2:if(!this._spec){n.next=4;break}return n.abrupt("return",this._spec);case 4:return n.next=6,fetch(this.url);case 6:return e=n.sent,n.next=9,e.json();case 9:if(r=n.sent,this._ops={},this._spec=r,Object.keys(r.paths).forEach((function(n){Object.keys(r.paths[n]).forEach((function(t){var e=r.paths[n][t],i=e.operationId;i&&(e.method=t.toUpperCase(),e.url=o.protocol+"//"+r.host+r.basePath+n+".json",e.parameters=(e.parameters||[]).map((function(n){return o._resolveRef(n)})),o._ops[i]=e)}))})),!this._ops||!t){n.next=15;break}return n.abrupt("return",this._ops[t]);case 15:if(!this._spec){n.next=17;break}return n.abrupt("return",this._spec);case 17:case"end":return n.stop()}}),n,this)}))),function(n){return e.apply(this,arguments)})},{key:"_resolveRef",value:function(n){var t=this,e=n;if(n.$ref){var r=n.$ref.replace(/^#\//,"").split("/");for(e=this._spec;r.length;)e=e[r.shift()]}return at(e,"object")&&Object.keys(e).forEach((function(n){e[n]=t._resolveRef(e[n])})),e}}]),t}();function _t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function xt(n){var t,e,r,o,i;return{c:function(){X(t=W("i"),"class",e=n[4](n[2],n[1],n[3])),X(t,"style",r=Ct(n[2],n[1],n[0],n[3])),t.hidden=o=!n[2]},m:function(e,r,o){F(e,t,r),o&&i(),i=Z(t,"click",n[7])},p:function(n,i){var a=p(i,1)[0];14&a&&e!==(e=n[4](n[2],n[1],n[3]))&&X(t,"class",e),15&a&&r!==(r=Ct(n[2],n[1],n[0],n[3]))&&X(t,"style",r),4&a&&o!==(o=!n[2])&&(t.hidden=o)},i:O,o:O,d:function(n){n&&K(t),i()}}}var kt={regular:"far",solid:"fas"},Et={Convos:"",batman:"https://www.gravatar.com/avatar/ab1839667863f31e359d98364cfdef61",marcusr:"https://www.gravatar.com/avatar/6c056546d802b1a9ac186ab63f9fb632"},Ot=["fas fa-anchor","fas fa-atom","fas fa-award","fas fa-balance-scale","fas fa-baseball-ball","fas fa-basketball-ball","fas fa-bicycle","fas fa-bolt","fas fa-book-reader","fas fa-candy-cane","fas fa-carrot","fas fa-cat","fas fa-chess-knight","fas fa-child","fas fa-coffee","fas fa-cookie-bite","fas fa-crow","fas fa-dice","fas fa-dog","fas fa-dove","fas fa-feather","fas fa-fish","fas fa-gem","fas fa-ghost","fas fa-hard-hat","fas fa-hat-cowboy","fas fa-hat-wizard","fas fa-hiking","fas fa-horse-head","fas fa-horse","fas fa-id-badge","fas fa-igloo","fas fa-mask","fas fa-meteor","fas fa-paint-brush","fas fa-paw","fas fa-pepper-hot","fas fa-pizza-slice","fas fa-portrait","fas fa-puzzle-piece","fas fa-rainbow","fas fa-robot","fas fa-rocket","fas fa-running","fas fa-seedling","fas fa-skating","fas fa-skiing","fas fa-smile","fas fa-snowboarding","fas fa-snowflake","fas fa-snowman","fas fa-swimmer","fas fa-umbrella","fas fa-user-astronaut","fas fa-user-graduate","fas fa-user-ninja","fas fa-user-secret","fas fa-walking","fas fa-yin-yang"];function Ct(n,t,e,r){var o=[],i="color:",a=n.match(/^pick:(.+)$/);return a&&Et[a[1]]&&(i="background-color:",o.push('background-image:url("'+Et[a[1]]+'")')),e&&o.push(i+e),o.join(";")}function Rt(n,t,e){var r=!1,o=t.class,i=void 0===o?"":o,a=t.animation,c=void 0===a?"":a,u=t.color,s=void 0===u?"":u,f=t.family,d=void 0===f?"":f,l=t.name;return mn((function(){if(e(3,r=!!Et.Convos),!r){var n=document.querySelector('[rel=icon][type="image/png"][sizes="32x32"]')||document.querySelector('[rel=icon][type="image/png"]');n&&(Et.Convos=n.href)}})),n.$set=function(n){"class"in n&&e(5,i=n.class),"animation"in n&&e(6,c=n.animation),"color"in n&&e(0,s=n.color),"family"in n&&e(1,d=n.family),"name"in n&&e(2,l=n.name)},[s,d,l,r,function(n,t,e){var r=[],o=n.match(/^pick:(.+)$/);if(o){if(Et[o[1]])return"fas fa-contributor for-"+o[1].toLowerCase();r.push(function(n){if(n.match(/^\d+$/)&&console.log(Ot[n]),n.match(/^\d+$/))return Ot[n];for(var t=0,e=0;e<n.length;e++)t=n.charCodeAt(e)+((t<<5)-t),t&=t;return t=Math.abs(t),Ot[t%Ot.length]}(o[1]))}else r.push(kt[t]||"fas"),r.push("fa-"+n);return c&&r.push(c.split(" ").map((function(n){return"fa-"+n}))),i&&r.push(i.split(" ")),r.join(" ")},i,c,function(t){vn(n,t)}]}var St=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(_t()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,Rt,xt,P,{class:5,animation:6,color:0,family:1,name:2}),r}return u}(Yn);function Nt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Dt={0:"Jan",1:"Feb",2:"March",3:"Apr",4:"May",5:"Jun",6:"July",7:"Aug",8:"Sept",9:"Oct",10:"Nov",11:"Dec"},Pt=function(t){c(a,t);var e,r=(e=a,function(){var n,t=i(e);if(Nt()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function a(t){return n(this,a),"string"!=typeof t||t.match(/Z$/)||(t+="Z"),r.call(this,t||new Date)}return E(a,[{key:"getHumanDate",value:function(){var n=this.getMonthAbbr()+" "+this.getDate(),t=new a;return this.getYear()==t.getYear()||(n+=", "+this.getFullYear()),n}},{key:"getHM",value:function(){return[this.getHours(),this.getMinutes()].map((function(n){return n<10?"0"+n:n})).join(":")}},{key:"getMonthAbbr",value:function(){return Dt[this.getMonth()]||""}},{key:"toEpoch",value:function(){return this.getTime()/1e3}}]),a}(y(Date));function Mt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function jt(n){var t,e,r,o,i,a=new St({props:{animation:n[3],name:n[0]}}),c=n[12].default,u=A(c,n,n[11],null);return{c:function(){t=W("button"),Fn(a.$$.fragment),e=Y(),u&&u.c(),X(t,"class",r=n[4].join(" ")),t.disabled=n[5],X(t,"type",n[2])},m:function(r,c,s){F(r,t,c),Kn(a,t,null),H(t,e),u&&u.m(t,null),o=!0,s&&i(),i=Z(t,"click",n[13])},p:function(n,e){var i=p(e,1)[0],s={};8&i&&(s.animation=n[3]),1&i&&(s.name=n[0]),a.$set(s),u&&u.p&&2048&i&&u.p(T(c,n,n[11],null),L(c,n[11],i,null)),(!o||16&i&&r!==(r=n[4].join(" ")))&&X(t,"class",r),(!o||32&i)&&(t.disabled=n[5]),(!o||4&i)&&X(t,"type",n[2])},i:function(n){o||(Un(a.$$.fragment,n),Un(u,n),o=!0)},o:function(n){In(a.$$.fragment,n),In(u,n),o=!1},d:function(n){n&&K(t),Gn(a),u&&u.d(n),i()}}}function At(n,t,e){var r,o=O,i=function(){return o(),o=M(m,(function(n){return e(9,r=n)})),m};n.$$.on_destroy.push((function(){return o()}));var a="",c=[],u=!1,s=0,f=t.disabled,d=void 0!==f&&f,l=t.icon,p=void 0===l?"":l,h=t.op,m=void 0===h?new bt({api:!1,id:""}):h;i();var g=t.type,v=void 0===g?"":g;function $(n){n&&e(8,s=(new Pt).toEpoch()),e(3,a=n?"spin":""),e(7,u=n)}var y,b=t.$$slots,w=void 0===b?{}:b,_=t.$$scope;return n.$set=function(n){"disabled"in n&&e(6,d=n.disabled),"icon"in n&&e(0,p=n.icon),"op"in n&&i(e(1,m=n.op)),"type"in n&&e(2,v=n.type),"$$scope"in n&&e(11,_=n.$$scope)},n.$$.update=function(){512&n.$$.dirty&&r.is("loading")&&$(!0),768&n.$$.dirty&&(r.is("loading")||setTimeout((function(){return $(!1)}),700-((new Pt).toEpoch()-s))),1&n.$$.dirty&&e(4,c=["btn","for-"+(p||"default")]),192&n.$$.dirty&&e(5,y=d||u)},[p,m,v,a,c,y,d,u,s,r,$,_,w,function(t){vn(n,t)}]}var Tt=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Mt()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,At,jt,P,{disabled:6,icon:0,op:1,type:2}),r}return u}(Yn);function Lt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Ut=function(n){return{}},It=function(n){return{}};function zt(n){var t,e,r,o,i,a,c,u=new St({props:{family:"regular",name:n[7]}});u.$on("click",n[14]);var s,f=n[9].label,d=A(f,n,n[8],It),l=d||{c:function(){s=V("Label")},m:function(n,t){F(n,s,t)},d:function(n){n&&K(s)}};return{c:function(){t=W("div"),e=W("input"),r=Y(),Fn(u.$$.fragment),o=Y(),i=W("label"),l&&l.c(),X(e,"type","checkbox"),X(e,"id",n[4]),X(e,"name",n[3]),e.__value=n[1],e.value=e.__value,e.disabled=n[2],X(i,"for",n[4]),X(t,"class","checkbox"),on(t,"has-focus",n[6]),on(t,"is-disabled",n[2])},m:function(s,f,d){F(s,t,f),H(t,e),e.checked=n[0],n[11](e),H(t,r),Kn(u,t,null),H(t,o),H(t,i),l&&l.m(i,null),a=!0,d&&N(c),c=[Z(e,"change",n[10]),Z(e,"blur",n[12]),Z(e,"focus",n[13])]},p:function(n,r){var o=p(r,1)[0];(!a||16&o)&&X(e,"id",n[4]),(!a||8&o)&&X(e,"name",n[3]),(!a||2&o)&&(e.__value=n[1]),e.value=e.__value,(!a||4&o)&&(e.disabled=n[2]),1&o&&(e.checked=n[0]);var c={};128&o&&(c.name=n[7]),u.$set(c),d&&d.p&&256&o&&d.p(T(f,n,n[8],It),L(f,n[8],o,Ut)),(!a||16&o)&&X(i,"for",n[4]),64&o&&on(t,"has-focus",n[6]),4&o&&on(t,"is-disabled",n[2])},i:function(n){a||(Un(u.$$.fragment,n),Un(l,n),a=!0)},o:function(n){In(u.$$.fragment,n),In(l,n),a=!1},d:function(e){e&&K(t),n[11](null),Gn(u),l&&l.d(e),N(c)}}}function Bt(n,t,e){var r,o=t.checked,i=void 0!==o&&o,a=t.disabled,c=void 0!==a&&a,u=t.name,s=void 0===u?"":u,f=t.id,d=void 0===f?s?"form_"+s:mt():f,l=t.value,p=void 0===l?1:l,h=!1,m=t.$$slots,g=void 0===m?{}:m,v=t.$$scope;var $;return n.$set=function(n){"checked"in n&&e(0,i=n.checked),"disabled"in n&&e(2,c=n.disabled),"name"in n&&e(3,s=n.name),"id"in n&&e(4,d=n.id),"value"in n&&e(1,p=n.value),"$$scope"in n&&e(8,v=n.$$scope)},n.$$.update=function(){32&n.$$.dirty&&r&&!r.syncValue&&(e(5,r.syncValue=function(){var n;e(0,(n=[this.checked,this.value],i=n[0],p=n[1],n),i,(e(1,p),e(5,r)))},r),r.syncValue()),1&n.$$.dirty&&e(7,$=i?"check-square":"square")},[i,p,c,s,d,r,h,$,v,g,function(){i=this.checked,e(0,i),e(5,r)},function(n){yn[n?"unshift":"push"]((function(){e(5,r=n)}))},function(){e(6,h=!1)},function(){e(6,h=!0)},function(){c||e(0,i=!i)}]}var qt=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Lt()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,Bt,zt,P,{checked:0,disabled:2,name:3,id:4,value:1}),r}return u}(Yn),Ht=function(){function t(e){var r=this;n(this,t),this._url=new URL("http://localhost"),Object.defineProperty(this,"href",{get:function(){return r._url.href.replace(/^http:/,r.protocol)},set:function(n){r._url.href=n.replace(/^\w+:/,"http:"),r.protocol=n.match(/^\w+:/)[0]}}),["host","pathname","password","searchParams","username"].forEach((function(n){Object.defineProperty(r,n,{get:function(){return r._url[n]},set:function(t){r._url[n]=t}})})),this.href=e}return E(t,[{key:"fromForm",value:function(n){var t=n.server.value;return n.nick.value.length&&this.searchParams.append("nick",n.nick.value),this.searchParams.append("tls",n.tls.checked?"1":"0"),this.searchParams.append("tls_verify",n.tls_verify&&n.tls_verify.checked?"1":"0"),this.host=t.match(/:\d+$/)?t:t+":6667",this.password=n.password.value,this.username=n.username.value,this}},{key:"toString",value:function(){return this.href.replace(/^http:/,this.protocol)}}]),t}(),Ft=function(){var n={base:"https://twemoji.maxcdn.com/v/12.1.5/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:function(n){var t="string"==typeof n?parseInt(n,16):n;if(t<65536)return c(t);return c(55296+((t-=65536)>>10),56320+(1023&t))},toCodePoint:g},onerror:function(){this.parentNode&&this.parentNode.replaceChild(u(this.alt,!1),this)},parse:function(t,e){e&&"function"!=typeof e||(e={callback:e});return("string"==typeof t?l:d)(t,{callback:e.callback||s,attributes:"function"==typeof e.attributes?e.attributes:h,base:"string"==typeof e.base?e.base:n.base,ext:e.ext||n.ext,size:e.folder||(r=e.size||n.size,"number"==typeof r?r+"x"+r:r),className:e.className||n.className,onerror:e.onerror||n.onerror});var r},replace:m,test:function(n){e.lastIndex=0;var t=e.test(n);return e.lastIndex=0,t}},t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},e=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[#*0-9]\ufe0f?\u20e3|(?:[©®\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5\udeeb\udeec\udef4-\udefa\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd71\udd73-\udd76\udd7a-\udda2\udda5-\uddaa\uddae-\uddb4\uddb7\uddba\uddbc-\uddca\uddd0\uddde-\uddff\ude70-\ude73\ude78-\ude7a\ude80-\ude82\ude90-\ude95]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,r=/\uFE0F/g,o=String.fromCharCode(8205),i=/[&<>'"]/g,a=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,c=String.fromCharCode;return n;function u(n,t){return document.createTextNode(t?n.replace(r,""):n)}function s(n,t){return"".concat(t.base,t.size,"/",n,t.ext)}function f(n){return g(n.indexOf(o)<0?n.replace(r,""):n)}function d(n,t){for(var r,o,i,c,s,d,l,p,h,m,g,v,$,y=function n(t,e){for(var r,o,i=t.childNodes,c=i.length;c--;)3===(o=(r=i[c]).nodeType)?e.push(r):1!==o||"ownerSVGElement"in r||a.test(r.nodeName.toLowerCase())||n(r,e);return e}(n,[]),b=y.length;b--;){for(i=!1,c=document.createDocumentFragment(),d=(s=y[b]).nodeValue,p=0;l=e.exec(d);){if((h=l.index)!==p&&c.appendChild(u(d.slice(p,h),!0)),v=f(g=l[0]),p=h+g.length,$=t.callback(v,t),v&&$){for(o in(m=new Image).onerror=t.onerror,m.setAttribute("draggable","false"),r=t.attributes(g,v))r.hasOwnProperty(o)&&0!==o.indexOf("on")&&!m.hasAttribute(o)&&m.setAttribute(o,r[o]);m.className=t.className,m.alt=g,m.src=$,i=!0,c.appendChild(m)}m||c.appendChild(u(g,!1)),m=null}i&&(p<d.length&&c.appendChild(u(d.slice(p),!0)),s.parentNode.replaceChild(c,s))}return n}function l(n,t){return m(n,(function(n){var e,r,o=n,a=f(n),c=t.callback(a,t);if(a&&c){for(r in o="<img ".concat('class="',t.className,'" ','draggable="false" ','alt="',n,'"',' src="',c,'"'),e=t.attributes(n,a))e.hasOwnProperty(r)&&0!==r.indexOf("on")&&-1===o.indexOf(" "+r+"=")&&(o=o.concat(" ",r,'="',e[r].replace(i,p),'"'));o=o.concat("/>")}return o}))}function p(n){return t[n]}function h(){return null}function m(n,t){return String(n).replace(e,t)}function g(n,t){for(var e=[],r=0,o=0,i=0;i<n.length;)r=n.charCodeAt(i++),o?(e.push((65536+(o-55296<<10)+(r-56320)).toString(16)),o=0):55296<=r&&r<=56319?o=r:e.push(r.toString(16));return e.join(t||"-")}}(),Kt=Object.prototype.hasOwnProperty,Gt=function(){for(var n=[],t=0;t<256;++t)n.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return n}(),Wt=function(n,t){for(var e=t&&t.plainObjects?Object.create(null):{},r=0;r<n.length;++r)void 0!==n[r]&&(e[r]=n[r]);return e},Vt={arrayToObject:Wt,assign:function(n,t){return Object.keys(t).reduce((function(n,e){return n[e]=t[e],n}),n)},compact:function(n){for(var t=[{obj:{o:n},prop:"o"}],e=[],o=0;o<t.length;++o)for(var i=t[o],a=i.obj[i.prop],c=Object.keys(a),u=0;u<c.length;++u){var s=c[u],f=a[s];"object"===r(f)&&null!==f&&-1===e.indexOf(f)&&(t.push({obj:a,prop:s}),e.push(f))}return function(n){for(var t;n.length;){var e=n.pop();if(t=e.obj[e.prop],Array.isArray(t)){for(var r=[],o=0;o<t.length;++o)void 0!==t[o]&&r.push(t[o]);e.obj[e.prop]=r}}return t}(t)},decode:function(n){try{return decodeURIComponent(n.replace(/\+/g," "))}catch(t){return n}},encode:function(n){if(0===n.length)return n;for(var t="string"==typeof n?n:String(n),e="",r=0;r<t.length;++r){var o=t.charCodeAt(r);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?e+=t.charAt(r):o<128?e+=Gt[o]:o<2048?e+=Gt[192|o>>6]+Gt[128|63&o]:o<55296||o>=57344?e+=Gt[224|o>>12]+Gt[128|o>>6&63]+Gt[128|63&o]:(r+=1,o=65536+((1023&o)<<10|1023&t.charCodeAt(r)),e+=Gt[240|o>>18]+Gt[128|o>>12&63]+Gt[128|o>>6&63]+Gt[128|63&o])}return e},isBuffer:function(n){return null!=n&&!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))},isRegExp:function(n){return"[object RegExp]"===Object.prototype.toString.call(n)},merge:function n(t,e,o){if(!e)return t;if("object"!==r(e)){if(Array.isArray(t))t.push(e);else{if("object"!==r(t))return[t,e];(o.plainObjects||o.allowPrototypes||!Kt.call(Object.prototype,e))&&(t[e]=!0)}return t}if("object"!==r(t))return[t].concat(e);var i=t;return Array.isArray(t)&&!Array.isArray(e)&&(i=Wt(t,o)),Array.isArray(t)&&Array.isArray(e)?(e.forEach((function(e,i){Kt.call(t,i)?t[i]&&"object"===r(t[i])?t[i]=n(t[i],e,o):t.push(e):t[i]=e})),t):Object.keys(e).reduce((function(t,r){var i=e[r];return Kt.call(t,r)?t[r]=n(t[r],i,o):t[r]=i,t}),i)}},Yt=(String.prototype.replace,Date.prototype.toISOString,Object.prototype.hasOwnProperty),Qt={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:Vt.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},Zt=function(n,t,e){if(n){var r=e.allowDots?n.replace(/\.([^.[]+)/g,"[$1]"):n,o=/(\[[^[\]]*])/g,i=/(\[[^[\]]*])/.exec(r),a=i?r.slice(0,i.index):r,c=[];if(a){if(!e.plainObjects&&Yt.call(Object.prototype,a)&&!e.allowPrototypes)return;c.push(a)}for(var u=0;null!==(i=o.exec(r))&&u<e.depth;){if(u+=1,!e.plainObjects&&Yt.call(Object.prototype,i[1].slice(1,-1))&&!e.allowPrototypes)return;c.push(i[1])}return i&&c.push("["+r.slice(i.index)+"]"),function(n,t,e){for(var r=t,o=n.length-1;o>=0;--o){var i,a=n[o];if("[]"===a)i=(i=[]).concat(r);else{i=e.plainObjects?Object.create(null):{};var c="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,u=parseInt(c,10);!isNaN(u)&&a!==c&&String(u)===c&&u>=0&&e.parseArrays&&u<=e.arrayLimit?(i=[])[u]=r:i[c]=r}r=i}return r}(c,t,e)}},Jt=function(n,t){var e=t?Vt.assign({},t):{};if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(e.ignoreQueryPrefix=!0===e.ignoreQueryPrefix,e.delimiter="string"==typeof e.delimiter||Vt.isRegExp(e.delimiter)?e.delimiter:Qt.delimiter,e.depth="number"==typeof e.depth?e.depth:Qt.depth,e.arrayLimit="number"==typeof e.arrayLimit?e.arrayLimit:Qt.arrayLimit,e.parseArrays=!1!==e.parseArrays,e.decoder="function"==typeof e.decoder?e.decoder:Qt.decoder,e.allowDots="boolean"==typeof e.allowDots?e.allowDots:Qt.allowDots,e.plainObjects="boolean"==typeof e.plainObjects?e.plainObjects:Qt.plainObjects,e.allowPrototypes="boolean"==typeof e.allowPrototypes?e.allowPrototypes:Qt.allowPrototypes,e.parameterLimit="number"==typeof e.parameterLimit?e.parameterLimit:Qt.parameterLimit,e.strictNullHandling="boolean"==typeof e.strictNullHandling?e.strictNullHandling:Qt.strictNullHandling,""===n||null==n)return e.plainObjects?Object.create(null):{};for(var r="string"==typeof n?function(n,t){for(var e={},r=t.ignoreQueryPrefix?n.replace(/^\?/,""):n,o=t.parameterLimit===1/0?void 0:t.parameterLimit,i=r.split(t.delimiter,o),a=0;a<i.length;++a){var c,u,s=i[a],f=s.indexOf("]="),d=-1===f?s.indexOf("="):f+1;-1===d?(c=t.decoder(s,Qt.decoder),u=t.strictNullHandling?null:""):(c=t.decoder(s.slice(0,d),Qt.decoder),u=t.decoder(s.slice(d+1),Qt.decoder)),Yt.call(e,c)?e[c]=[].concat(e[c]).concat(u):e[c]=u}return e}(n,e):n,o=e.plainObjects?Object.create(null):{},i=Object.keys(r),a=0;a<i.length;++a){var c=i[a],u=Zt(c,r[c],e);o=Vt.merge(o,u,e)}return Vt.compact(o)};function Xt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var ne=new(function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Xt()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(){var e;return n(this,u),(e=a.call(this)).prop("ro","basePath",(function(){return e._basePath})),e.prop("ro","hash",(function(){return(e._location.hash||"").replace(/^#/,"")})),e.prop("ro","path",(function(){return e._path})),e.prop("ro","params",(function(){return e._params})),e.prop("ro","query",(function(){return e._query})),e.prop("rw","activeMenu",""),e.prop("rw","baseUrl",""),e.prop("rw","component",null),e.prop("rw","match",""),e.prop("rw","requireLogin",!1),e.prop("rw","state",{}),e.prop("rw","title",document.title||""),e.prop("persist","lastUrl",""),e._history=window.history,e._location=window.location,e._onclick=e._onclick.bind(t(e)),e._onpopstate=e._onpopstate.bind(t(e)),e._basePath="",e._params={},e._path="/",e._query={},e._routes=[],e}return E(u,[{key:"dialogPath",value:function(n){var t=["","chat"];return n.connection_id&&t.push(n.connection_id),n.dialog_id&&t.push(n.dialog_id),t.map((function(n){return encodeURIComponent(n)})).join("/")}},{key:"go",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];0==n.indexOf(this.baseUrl)&&(n=n.substr(this.baseUrl.length));var r=this.baseUrl+n;if(r==this._location.href)return this;this._history[e?"replaceState":"pushState"](t,this.title,r),this.render(r,t)}},{key:"param",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=this.params;if(e.hasOwnProperty(n))return e[n];var r=this.query;return r.hasOwnProperty(n)?r[n]:t}},{key:"render",value:function(n,t){this._started||(window.addEventListener("click",this._onclick),window.addEventListener("popstate",this._onpopstate),this._started=!0),n||(n=this._location.href),t||(t=this.state);var e=n.substr(this.baseUrl.length).split("#")[0].split("?");this._query=2==e.length?Jt(e.pop()):{},this._path=e[0],this._params={};for(var r=0;r<this._routes.length;r++){var o=this._routes[r],i=this._path.match(o.re);if(i){for(var a=0;a<o.names.length;a++)this._params[o.names[a]]=decodeURIComponent(i[a+1]);return this.update({activeMenu:"",match:o.path,state:t}),o.cb(this),this}}throw'[Route] No route for "'+n+'".'}},{key:"subscribe",value:function(n){return n(this),this.on("update",n)}},{key:"to",value:function(n,t){var e=[],r=[];n.split("/").forEach((function(n,t){var o=n;0==n.indexOf("*")?(o="(.*)",e.push(String(n.slice(1)||t))):0==n.indexOf(":")&&(o="([^/]+)",e.push(String(n.slice(1)||t))),r.push(o)})),this._routes.push({cb:t,names:e,path:n,re:new RegExp("^"+r.join("/")+"$")})}},{key:"update",value:function(n){return n.baseUrl&&(n.baseUrl=n.baseUrl.replace(/\/+$/,""),this._basePath=new URL(n.baseUrl).pathname.replace(/\/+$/,"")),m(i(u.prototype),"update",this).call(this,n)}},{key:"urlFor",value:function(n){return n.match(/^\w+:/)||n.match(/^#/)?n:this.basePath+n}},{key:"urlToForm",value:function(n){var t=this;Object.keys(this.query).forEach((function(e){var r=t.query[e],o=n[e];o&&o.tagName&&("checkbox"==o.type?o.checked=!!r:o.value=r,o.syncValue&&o.syncValue())}))}},{key:"_onclick",value:function(n){if(!(n.metaKey||n.ctrlKey||n.shiftKey||n.defaultPrevented)){var t=n.target&&n.target.closest("a");if(t&&!t.hasAttribute("download")&&!t.hasAttribute("target")){var e=t&&t.href.match(/#activeMenu:(\w*)/);if(e){if(nt(n.target,".sidebar-left")&&!t)return;this.update({activeMenu:e[1]==this.activeMenu?"":e[1]}),n.preventDefault()}var r=t.getAttribute("href")||"";0==r.indexOf(this.baseUrl)&&(r=r.substr(this.baseUrl.length)),0==r.indexOf(this.basePath)&&(r=r.substr(this.basePath.length)),0==r.indexOf("/")&&(this.go(r,{},t.hasAttribute("replace")),n.preventDefault())}}}},{key:"_onpopstate",value:function(n){this.render(this._location.href,n.state)}},{key:"_pathWithoutPrefix",value:function(n){return 0==n.indexOf(this.basePath)?n.substr(this.basePath.length):n}}]),u}($t)),te=new RegExp("(\\\\?)`([^`]+)`","g"),ee={},re={},oe=new RegExp("\\b[a-z]{2,5}://\\S+","g"),ie=new RegExp("\\[([^\\]]+)\\]\\(([^)]+)\\)","g"),ae=new RegExp("(^|\\s)(\\\\?)(\\*+)(\\w[^<]*?)\\3","g"),ce={":confused:":":/",":disappointed:":":(",":grin:":";D",":heart:":"&lt;3",":slight_smile:":":)",":smiley:":":D",":stuck_out_tongue:":":P",":wink:":";)"},ue=new RegExp("(^|\\s)(:\\w+:|"+Object.keys(ce).map((function(n){return ft(ce[n])})).join("|")+")(?=\\W|$)","gi"),se={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"};function fe(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"single";return window.__emojiList&&(window.__emojiList.forEach((function(n){if(":"==(n.shortname||"")[0]){if(ce[n.shortname]&&(re[ce[n.shortname]]=n),re[n.shortname]=n,n.category){var t=":"+n.category;ee[t]||(ee[t]=[]),ee[t].push(n)}n.shortname.match(/(_|:)\w/g).forEach((function(t){ee[t]||(ee[t]=[]),ee[t].push(n)})),delete n.category,delete n.html,delete n.order,delete n.unicode}})),delete window.__emojiList),"group"==t?ee[n]||[]:re[n]||{}}function de(n){n=n.replace(/[&<>"']/g,(function(n){return se[n]}));var t=0;return n=n.replace(/^&gt;\s(.*)/,(function(n,t){return"<blockquote>"+t+"</blockquote>"})).replace(ae,(function(n,t,e,r,o){return 1==r.length?e?n.replace(/^\\/,""):t+"<em>"+o+"</em>":2==r.length?e?n.replace(/^\\/,""):t+"<strong>"+o+"</strong>":3==r.length?e?n.replace(/^\\/,""):t+"<em><strong>"+o+"</strong></em>":n})).replace(ie,(function(n,e,r){t++;var o=r.substring(0,1),i=-1!=["/","#"].indexOf(o)?"":"_blank";return'<a href="'+ne.urlFor(r)+'" target="'+i+'">'+e+"</a>"})).replace(te,(function(n,t,e){return t?n.replace(/^\\/,""):"<code>"+e+"</code>"})),t||(n=n.replace(oe,(function(n){var t=n.match(/^(.*?)(&\w+;|\W)?$/);return'<a href="'+t[1]+'" target="_blank">'+t[1].replace(/^https:\/\//,"")+"</a>"+(t[2]||"")})).replace(/mailto:(\S+)/,(function(n,t){return-1!=n.indexOf('">')?n:'<a href="'+n+'" target="_blank">'+t+"</a>"}))),n=Ft.parse(n.replace(ue,(function(n,t,e){return t+(fe(e).emoji||e)})))}var le={en:{"Test %1":"Test %1"}};function pe(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];var o=String(le.en[n]||n);return o.replace(/(%?)%(\d+)/g,(function(n,t,r){return"%"==t?t+r:e[r-1]}))}function he(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];return de(pe.apply(void 0,[n].concat(e)))}function me(n,t){return"Not found."==t.frozen?"":n.frozen?pe(n.frozen):n==t?pe("Connection messages."):(t.frozen?pe(t.frozen):t.topic)||t.is_private&&pe("Private conversation.")||pe("No topic is set.")}function ge(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function ve(n){var t,e,r=pe(n[1].error())+"";return{c:function(){t=W("div"),e=V(r),X(t,"class","error")},m:function(n,r){F(n,t,r),H(t,e)},p:function(n,t){2&t&&r!==(r=pe(n[1].error())+"")&&tn(e,r)},d:function(n){n&&K(t)}}}function $e(n){var t,e=n[1].is("error"),r=e&&ve(n);return{c:function(){r&&r.c(),t=Q()},m:function(n,e){r&&r.m(n,e),F(n,t,e)},p:function(n,o){var i=p(o,1)[0];2&i&&(e=n[1].is("error")),e?r?r.p(n,i):((r=ve(n)).c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:O,o:O,d:function(n){r&&r.d(n),n&&K(t)}}}function ye(n,t,e){var r,o=O,i=function(){return o(),o=M(c,(function(n){return e(1,r=n)})),c};n.$$.on_destroy.push((function(){return o()}));var a=t.op,c=void 0===a?new bt({}):a;return i(),n.$set=function(n){"op"in n&&i(e(0,c=n.op))},[c,r]}var be=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(ge()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,ye,$e,P,{op:0}),r}return u}(Yn);function we(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function _e(n){var t,e,r,o,i,a=pe(n[0].dialog_id?"Conversation":"Connection")+"",c=new St({props:{name:"times-circle"}});return{c:function(){t=W("a"),e=W("h2"),r=V(a),o=Y(),Fn(c.$$.fragment),X(t,"href","#activeMenu:"),X(t,"class","sidebar__header for-settings")},m:function(n,a){F(n,t,a),H(t,e),H(e,r),H(t,o),Kn(c,t,null),i=!0},p:function(n,t){var e=p(t,1)[0];(!i||1&e)&&a!==(a=pe(n[0].dialog_id?"Conversation":"Connection")+"")&&tn(r,a)},i:function(n){i||(Un(c.$$.fragment,n),i=!0)},o:function(n){In(c.$$.fragment,n),i=!1},d:function(n){n&&K(t),Gn(c)}}}function xe(n,t,e){var r=t.dialog,o=void 0===r?{}:r;return n.$set=function(n){"dialog"in n&&e(0,o=n.dialog)},[o]}var ke=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(we()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,xe,_e,P,{dialog:0}),r}return u}(Yn);function Ee(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Oe=function(n){return{}},Ce=function(n){return{}};function Re(n){var t,e,r,o,i,a,c=n[8].label,u=A(c,n,n[7],Ce),s=u||function(n){var t;return{c:function(){t=V("Label")},m:function(n,e){F(n,t,e)},d:function(n){n&&K(t)}}}();return{c:function(){t=W("div"),e=W("label"),s&&s.c(),r=Y(),o=W("textarea"),X(e,"for",n[3]),X(o,"name",n[2]),X(o,"placeholder",n[4]),X(o,"id",n[3]),o.readOnly=n[5],X(t,"class","text-area"),t.hidden=n[1]},m:function(c,u,f){F(c,t,u),H(t,e),s&&s.m(e,null),H(t,r),H(t,o),n[9](o),en(o,n[0]),i=!0,f&&a(),a=Z(o,"input",n[10])},p:function(n,r){var a=p(r,1)[0];u&&u.p&&128&a&&u.p(T(c,n,n[7],Ce),L(c,n[7],a,Oe)),(!i||8&a)&&X(e,"for",n[3]),(!i||4&a)&&X(o,"name",n[2]),(!i||16&a)&&X(o,"placeholder",n[4]),(!i||8&a)&&X(o,"id",n[3]),(!i||32&a)&&(o.readOnly=n[5]),1&a&&en(o,n[0]),(!i||2&a)&&(t.hidden=n[1])},i:function(n){i||(Un(s,n),i=!0)},o:function(n){In(s,n),i=!1},d:function(e){e&&K(t),s&&s.d(e),n[9](null),a()}}}function Se(n,t,e){var r,o=t.hidden,i=void 0!==o&&o,a=t.name,c=void 0===a?"":a,u=t.id,s=void 0===u?c?"form_"+c:mt():u,f=t.placeholder,d=void 0===f?"":f,l=t.readonly,p=void 0!==l&&l,h=t.value,m=void 0===h?"":h,g=t.$$slots,v=void 0===g?{}:g,$=t.$$scope;return n.$set=function(n){"hidden"in n&&e(1,i=n.hidden),"name"in n&&e(2,c=n.name),"id"in n&&e(3,s=n.id),"placeholder"in n&&e(4,d=n.placeholder),"readonly"in n&&e(5,p=n.readonly),"value"in n&&e(0,m=n.value),"$$scope"in n&&e(7,$=n.$$scope)},n.$$.update=function(){64&n.$$.dirty&&r&&!r.syncValue&&(e(6,r.syncValue=function(){e(0,m=this.value)},r),r.syncValue())},[m,i,c,s,d,p,r,$,v,function(n){yn[n?"unshift":"push"]((function(){e(6,r=n)}))},function(){m=this.value,e(0,m),e(6,r)}]}var Ne=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Ee()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,Se,Re,P,{hidden:1,name:2,id:3,placeholder:4,readonly:5,value:0}),r}return u}(Yn);function De(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Pe=function(n){return{}},Me=function(n){return{}},je=function(n){return{}},Ae=function(n){return{}};function Te(n){var t,e,r,o,i,a,c,u,s=n[11].label,f=A(s,n,n[10],Ae),d=f||{c:function(){u=V("Label")},m:function(n,t){F(n,u,t)},d:function(n){n&&K(u)}},l=n[11].help,h=A(l,n,n[10],Me);return{c:function(){t=W("div"),e=W("label"),d&&d.c(),r=Y(),o=W("input"),i=Y(),h&&h.c(),X(e,"for",n[4]),X(o,"type",n[7]),X(o,"name",n[3]),X(o,"id",n[4]),X(o,"autocomplete",n[1]),X(o,"placeholder",n[5]),o.readOnly=n[6],o.value=n[0],X(t,"class","text-field"),t.hidden=n[2],on(t,"has-password","password"==n[7])},m:function(u,s,f){F(u,t,s),H(t,e),d&&d.m(e,null),H(t,r),H(t,o),n[13](o),H(t,i),h&&h.m(t,null),a=!0,f&&N(c),c=[Z(o,"input",n[9]),Z(o,"keyup",n[12])]},p:function(n,r){var i=p(r,1)[0];f&&f.p&&1024&i&&f.p(T(s,n,n[10],Ae),L(s,n[10],i,je)),(!a||16&i)&&X(e,"for",n[4]),(!a||128&i)&&X(o,"type",n[7]),(!a||8&i)&&X(o,"name",n[3]),(!a||16&i)&&X(o,"id",n[4]),(!a||2&i)&&X(o,"autocomplete",n[1]),(!a||32&i)&&X(o,"placeholder",n[5]),(!a||64&i)&&(o.readOnly=n[6]),(!a||1&i&&o.value!==n[0])&&(o.value=n[0]),h&&h.p&&1024&i&&h.p(T(l,n,n[10],Me),L(l,n[10],i,Pe)),(!a||4&i)&&(t.hidden=n[2]),128&i&&on(t,"has-password","password"==n[7])},i:function(n){a||(Un(d,n),Un(h,n),a=!0)},o:function(n){In(d,n),In(h,n),a=!1},d:function(e){e&&K(t),d&&d.d(e),n[13](null),h&&h.d(e),N(c)}}}function Le(n,t,e){var r,o=t.autocomplete,i=void 0===o?null:o,a=t.hidden,c=void 0!==a&&a,u=t.name,s=void 0===u?"":u,f=t.id,d=void 0===f?s?"form_"+s:mt():f,l=t.placeholder,p=void 0===l?"":l,h=t.readonly,m=void 0!==h&&h,g=t.type,v=void 0===g?"text":g,$=t.value,y=void 0===$?"":$,b=t.$$slots,w=void 0===b?{}:b,_=t.$$scope;return n.$set=function(n){"autocomplete"in n&&e(1,i=n.autocomplete),"hidden"in n&&e(2,c=n.hidden),"name"in n&&e(3,s=n.name),"id"in n&&e(4,d=n.id),"placeholder"in n&&e(5,p=n.placeholder),"readonly"in n&&e(6,m=n.readonly),"type"in n&&e(7,v=n.type),"value"in n&&e(0,y=n.value),"$$scope"in n&&e(10,_=n.$$scope)},n.$$.update=function(){256&n.$$.dirty&&r&&!r.syncValue&&(e(8,r.syncValue=function(){e(0,y=this.value)},r),r.syncValue())},[y,i,c,s,d,p,m,v,r,function(n){e(0,y=v.match(/^(number|range)$/)?parseInt(n.target.value,10):n.target.value)},_,w,function(t){vn(n,t)},function(n){yn[n?"unshift":"push"]((function(){e(8,r=n)}))}]}var Ue=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(De()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,Le,Te,P,{autocomplete:1,hidden:2,name:3,id:4,placeholder:5,readonly:6,type:7,value:0}),r}return u}(Yn);function Ie(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function ze(n){var t,e;return{c:function(){X(t=W("input"),"type","hidden"),X(t,"name","connection_id"),t.value=e=n[0].connection_id},m:function(n,e){F(n,t,e)},p:function(n,r){1&r&&e!==(e=n[0].connection_id)&&(t.value=e)},d:function(n){n&&K(t)}}}function Be(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Host and port")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function qe(n){var t,e=he(process.env.forced_connection?"You cannot create custom connections.":"Example: %1","irc://chat.freenode.net:6697")+"";return{c:function(){X(t=W("p"),"class","help"),X(t,"slot","help")},m:function(n,r){F(n,t,r),t.innerHTML=e},p:O,d:function(n){n&&K(t)}}}function He(n){var t;return{c:function(){t=Y()},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Fe(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Nickname")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Ke(n){var t,e=new Ue({props:{name:"dialog",placeholder:pe("Ex: #convos"),$$slots:{label:[We]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};1048576&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Un(e.$$.fragment,n),t=!0)},o:function(n){In(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function Ge(n){var t,e;function r(t){n[15].call(null,t)}var o={$$slots:{label:[Ve]},$$scope:{ctx:n}};void 0!==n[5]&&(o.checked=n[5]);var i=new qt({props:o});return yn.push((function(){return Hn(i,"checked",r)})),{c:function(){Fn(i.$$.fragment)},m:function(n,t){Kn(i,n,t),e=!0},p:function(n,e){var r={};1048576&e&&(r.$$scope={dirty:e,ctx:n}),!t&&32&e&&(t=!0,r.checked=n[5],Cn((function(){return t=!1}))),i.$set(r)},i:function(n){e||(Un(i.$$.fragment,n),e=!0)},o:function(n){In(i.$$.fragment,n),e=!1},d:function(n){Gn(i,n)}}}function We(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Conversation name")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Ve(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Want to be connected")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Ye(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Secure connection (TLS)")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Qe(n){var t,e;function r(t){n[17].call(null,t)}var o={name:"tls_verify",$$slots:{label:[Ze]},$$scope:{ctx:n}};void 0!==n[4]&&(o.checked=n[4]);var i=new qt({props:o});return yn.push((function(){return Hn(i,"checked",r)})),{c:function(){Fn(i.$$.fragment)},m:function(n,t){Kn(i,n,t),e=!0},p:function(n,e){var r={};1048576&e&&(r.$$scope={dirty:e,ctx:n}),!t&&16&e&&(t=!0,r.checked=n[4],Cn((function(){return t=!1}))),i.$set(r)},i:function(n){e||(Un(i.$$.fragment,n),e=!0)},o:function(n){In(i.$$.fragment,n),e=!1},d:function(n){Gn(i,n)}}}function Ze(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Verify certificate (TLS)")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Je(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Show advanced settings")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Xe(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Username")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function nr(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Password")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function tr(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("On-connect commands")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function er(n){var t,e=new Tt({props:{icon:"save",op:n[6],$$slots:{default:[or]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};1048576&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Un(e.$$.fragment,n),t=!0)},o:function(n){In(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function rr(n){var t,e,r=new Tt({props:{icon:"save",op:n[8],$$slots:{default:[ir]},$$scope:{ctx:n}}}),o=new Tt({props:{icon:"trash",type:"button",op:n[7],$$slots:{default:[ar]},$$scope:{ctx:n}}});return o.$on("click",n[9]),{c:function(){Fn(r.$$.fragment),t=Y(),Fn(o.$$.fragment)},m:function(n,i){Kn(r,n,i),F(n,t,i),Kn(o,n,i),e=!0},p:function(n,t){var e={};1048576&t&&(e.$$scope={dirty:t,ctx:n}),r.$set(e);var i={};1048576&t&&(i.$$scope={dirty:t,ctx:n}),o.$set(i)},i:function(n){e||(Un(r.$$.fragment,n),Un(o.$$.fragment,n),e=!0)},o:function(n){In(r.$$.fragment,n),In(o.$$.fragment,n),e=!1},d:function(n){Gn(r,n),n&&K(t),Gn(o,n)}}}function or(n){var t,e=pe("Create")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function ir(n){var t,e=pe("Update")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function ar(n){var t,e=pe("Delete")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function cr(n){var t,e,r,o,i,a,c,u,s,f,d,l,h,m,g,v,$,y,b,w,_,x,k,E,O,C,R,S=n[0].connection_id&&ze(n),N=new Ue({props:{name:"server",placeholder:pe("Ex: chat.freenode.net:6697"),readonly:process.env.forced_connection,$$slots:{default:[He],help:[qe],label:[Be]},$$scope:{ctx:n}}}),D=new Ue({props:{name:"nick",placeholder:pe("Ex: your-name"),$$slots:{label:[Fe]},$$scope:{ctx:n}}}),P=[Ge,Ke],M=[];function j(n,t){return n[0].url?0:1}function A(t){n[16].call(null,t)}s=j(n),f=M[s]=P[s](n);var T={name:"tls",$$slots:{label:[Ye]},$$scope:{ctx:n}};void 0!==n[3]&&(T.checked=n[3]);var L=new qt({props:T});yn.push((function(){return Hn(L,"checked",A)}));var U=n[3]&&Qe(n);function I(t){n[18].call(null,t)}var z={$$slots:{label:[Je]},$$scope:{ctx:n}};void 0!==n[2]&&(z.checked=n[2]);var B=new qt({props:z});yn.push((function(){return Hn(B,"checked",I)}));var q=new Ue({props:{name:"username",hidden:!n[2],$$slots:{label:[Xe]},$$scope:{ctx:n}}}),G=new Ue({props:{type:"password",name:"password",hidden:!n[2],$$slots:{label:[nr]},$$scope:{ctx:n}}}),V=new Ne({props:{name:"on_connect_commands",hidden:!n[2],$$slots:{label:[tr]},$$scope:{ctx:n}}}),Q=[rr,er],nn=[];function tn(n,t){return n[0].url?0:1}_=tn(n),x=nn[_]=Q[_](n);var en=new be({props:{op:n[6]}}),rn=new be({props:{op:n[7]}}),on=new be({props:{op:n[8]}});return{c:function(){t=W("form"),S&&S.c(),e=Y(),r=W("input"),o=Y(),i=W("input"),a=Y(),Fn(N.$$.fragment),c=Y(),Fn(D.$$.fragment),u=Y(),f.c(),d=Y(),Fn(L.$$.fragment),h=Y(),U&&U.c(),m=Y(),Fn(B.$$.fragment),v=Y(),Fn(q.$$.fragment),$=Y(),Fn(G.$$.fragment),y=Y(),Fn(V.$$.fragment),b=Y(),w=W("div"),x.c(),k=Y(),Fn(en.$$.fragment),E=Y(),Fn(rn.$$.fragment),O=Y(),Fn(on.$$.fragment),X(r,"type","hidden"),X(r,"name","url"),X(i,"type","hidden"),X(i,"name","wanted_state"),X(w,"class","form-actions"),X(t,"method","post")},m:function(f,l,p){F(f,t,l),S&&S.m(t,null),H(t,e),H(t,r),H(t,o),H(t,i),H(t,a),Kn(N,t,null),H(t,c),Kn(D,t,null),H(t,u),M[s].m(t,null),H(t,d),Kn(L,t,null),H(t,h),U&&U.m(t,null),H(t,m),Kn(B,t,null),H(t,v),Kn(q,t,null),H(t,$),Kn(G,t,null),H(t,y),Kn(V,t,null),H(t,b),H(t,w),nn[_].m(w,null),H(t,k),Kn(en,t,null),H(t,E),Kn(rn,t,null),H(t,O),Kn(on,t,null),n[19](t),C=!0,p&&R(),R=Z(t,"submit",J(n[10]))},p:function(n,r){var o=p(r,1)[0];n[0].connection_id?S?S.p(n,o):((S=ze(n)).c(),S.m(t,e)):S&&(S.d(1),S=null);var i={};1048576&o&&(i.$$scope={dirty:o,ctx:n}),N.$set(i);var a={};1048576&o&&(a.$$scope={dirty:o,ctx:n}),D.$set(a);var c=s;(s=j(n))===c?M[s].p(n,o):(Tn(),In(M[c],1,1,(function(){M[c]=null})),Ln(),(f=M[s])||(f=M[s]=P[s](n)).c(),Un(f,1),f.m(t,d));var u={};1048576&o&&(u.$$scope={dirty:o,ctx:n}),!l&&8&o&&(l=!0,u.checked=n[3],Cn((function(){return l=!1}))),L.$set(u),n[3]?U?(U.p(n,o),Un(U,1)):((U=Qe(n)).c(),Un(U,1),U.m(t,m)):U&&(Tn(),In(U,1,1,(function(){U=null})),Ln());var h={};1048576&o&&(h.$$scope={dirty:o,ctx:n}),!g&&4&o&&(g=!0,h.checked=n[2],Cn((function(){return g=!1}))),B.$set(h);var v={};4&o&&(v.hidden=!n[2]),1048576&o&&(v.$$scope={dirty:o,ctx:n}),q.$set(v);var $={};4&o&&($.hidden=!n[2]),1048576&o&&($.$$scope={dirty:o,ctx:n}),G.$set($);var y={};4&o&&(y.hidden=!n[2]),1048576&o&&(y.$$scope={dirty:o,ctx:n}),V.$set(y);var b=_;(_=tn(n))===b?nn[_].p(n,o):(Tn(),In(nn[b],1,1,(function(){nn[b]=null})),Ln(),(x=nn[_])||(x=nn[_]=Q[_](n)).c(),Un(x,1),x.m(w,null))},i:function(n){C||(Un(N.$$.fragment,n),Un(D.$$.fragment,n),Un(f),Un(L.$$.fragment,n),Un(U),Un(B.$$.fragment,n),Un(q.$$.fragment,n),Un(G.$$.fragment,n),Un(V.$$.fragment,n),Un(x),Un(en.$$.fragment,n),Un(rn.$$.fragment,n),Un(on.$$.fragment,n),C=!0)},o:function(n){In(N.$$.fragment,n),In(D.$$.fragment,n),In(f),In(L.$$.fragment,n),In(U),In(B.$$.fragment,n),In(q.$$.fragment,n),In(G.$$.fragment,n),In(V.$$.fragment,n),In(x),In(en.$$.fragment,n),In(rn.$$.fragment,n),In(on.$$.fragment,n),C=!1},d:function(e){e&&K(t),S&&S.d(),Gn(N),Gn(D),M[s].d(),Gn(L),U&&U.d(),Gn(B),Gn(q),Gn(G),Gn(V),nn[_].d(),Gn(en),Gn(rn),Gn(on),n[19](null),R()}}}function ur(n,t,e){var r=t.dialog,o=void 0===r?{}:r,i=gn("user"),a=i.api.operation("createConnection"),c=i.api.operation("removeConnection"),u=i.api.operation("updateConnection");[a,u].forEach((function(n){n.on("start",(function(n){n.body.on_connect_commands=n.body.on_connect_commands.split("\n").map((function(n){return n.trim()}))}))}));var s,f={},d=!1,l=!1,p=!1,h=!1;function m(){if(process.env.forced_connection&&e(1,s.server.value=process.env.default_connection,s),e(1,s.nick.value=i.email.replace(/@.*/,"").replace(/\W/g,"_"),s),e(3,l=!0),e(5,h=!0),!ne.query.uri)return ne.urlToForm(s);var n=new Ht(ne.query.uri),t=n.searchParams;n.host&&e(1,s.server.value=n.host,s),n.password&&e(1,s.password.value=n.password,s),n.username&&e(1,s.username.value=n.username,s),t.get("nick")&&e(1,s.nick.value=t.get("nick"),s),n.pathname&&s.dialog&&e(1,s.dialog.value=decodeURIComponent(n.pathname.split("/").filter((function(n){return n.length}))[0]||""),s),Number(t.get("tls")||0)&&e(3,l=!0),Number(t.get("tls_verify")||0)&&e(4,p=!0)}function g(){f.url&&(e(1,s.server.value=f.url.host,s),e(1,s.nick.value=f.url.searchParams.get("nick")||"",s),e(1,s.on_connect_commands.value=f.on_connect_commands.join("\n"),s),e(1,s.password.value=f.url.password,s),e(1,s.username.value=f.url.username,s),e(1,s.url.value=f.url.toString(),s),e(3,l="1"==f.url.searchParams.get("tls")),e(4,p="1"==f.url.searchParams.get("tls_verify")),e(5,h="connected"==f.wanted_state))}function v(){return(v=Jn(Qn.mark((function n(t){return Qn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.perform(f);case 2:i.removeDialog(f),ne.go("/settings/connection");case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function $(){return($=Jn(Qn.mark((function n(t){var r;return Qn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s.server.value){n.next=2;break}return n.abrupt("return");case 2:if(e(1,s.url.value=new Ht("irc://localhost:6667").fromForm(t.target).toString(),s),!f.connection_id){n.next=10;break}return n.next=6,u.perform(t.target);case 6:e(0,f=i.ensureDialog(u.res.body)),g(),n.next=14;break;case 10:return n.next=12,a.perform(t.target);case 12:r=i.ensureDialog(a.res.body),ne.go(r.path);case 14:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return mn(Jn(Qn.mark((function n(){return Qn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s){n.next=2;break}return n.abrupt("return");case 2:return e(0,f=i.findDialog({connection_id:o.connection_id})||{}),n.abrupt("return",f.url?g():m());case 4:case"end":return n.stop()}}),n)})))),n.$set=function(n){"dialog"in n&&e(11,o=n.dialog)},n.$$.update=function(){34&n.$$.dirty&&s&&e(1,s.wanted_state.value=h?"connected":"disconnected",s)},[f,s,d,l,p,h,a,c,u,function(n){return v.apply(this,arguments)},function(n){return $.apply(this,arguments)},o,i,m,g,function(n){e(5,h=n)},function(n){e(3,l=n)},function(n){e(4,p=n)},function(n){e(2,d=n)},function(n){yn[n?"unshift":"push"]((function(){e(1,s=n)}))}]}var sr=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Ie()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,ur,cr,P,{dialog:11}),r}return u}(Yn);function fr(n){var t=n-1;return t*t*t+1}function dr(n,t){var e=t.delay,r=void 0===e?0:e,o=t.duration,i=void 0===o?400:o,a=t.easing,c=void 0===a?C:a,u=+getComputedStyle(n).opacity;return{delay:r,duration:i,easing:c,css:function(n){return"opacity: ".concat(n*u)}}}function lr(n,t){var e=t.delay,r=void 0===e?0:e,o=t.duration,i=void 0===o?400:o,a=t.easing,c=void 0===a?fr:a,u=t.x,s=void 0===u?0:u,f=t.y,d=void 0===f?0:f,l=t.opacity,p=void 0===l?0:l,h=getComputedStyle(n),m=+h.opacity,g="none"===h.transform?"":h.transform,v=m*(1-p);return{delay:r,duration:i,easing:c,css:function(n,t){return"\n\t\t\ttransform: ".concat(g," translate(").concat((1-n)*s,"px, ").concat((1-n)*d,"px);\n\t\t\topacity: ").concat(m-v*t)}}}function pr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function hr(n){var t,e,r=pe("Currently connecting to %1.",n[3])+"";return{c:function(){t=W("p"),e=V(r)},m:function(n,r){F(n,t,r),H(t,e)},p:function(n,t){8&t&&r!==(r=pe("Currently connecting to %1.",n[3])+"")&&tn(e,r)},d:function(n){n&&K(t)}}}function mr(n){var t,e,r=pe("Currently connected to %1.",n[3])+"";return{c:function(){t=W("p"),e=V(r)},m:function(n,r){F(n,t,r),H(t,e)},p:function(n,t){8&t&&r!==(r=pe("Currently connected to %1.",n[3])+"")&&tn(e,r)},d:function(n){n&&K(t)}}}function gr(n){var t,e,r=pe("Currently disconnected from %1.",n[3])+"";return{c:function(){t=W("p"),e=V(r)},m:function(n,r){F(n,t,r),H(t,e)},p:function(n,t){8&t&&r!==(r=pe("Currently disconnected from %1.",n[3])+"")&&tn(e,r)},d:function(n){n&&K(t)}}}function vr(n){var t;return{c:function(){(t=W("p")).textContent="".concat(pe("Connection not found."))},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function $r(n){var t,e,r,o,i,a=new ke({props:{dialog:n[0]}});function c(n,t){return n[2].url?"disconnected"==n[2].state?gr:"connected"==n[2].state?mr:hr:vr}var u=c(n),s=u(n),f=new sr({props:{dialog:n[0]}});return{c:function(){t=W("div"),Fn(a.$$.fragment),e=Y(),s.c(),r=Y(),Fn(f.$$.fragment),X(t,"class","sidebar-left")},m:function(n,o){F(n,t,o),Kn(a,t,null),H(t,e),s.m(t,null),H(t,r),Kn(f,t,null),i=!0},p:function(n,e){var o=p(e,1)[0],i={};1&o&&(i.dialog=n[0]),a.$set(i),u===(u=c(n))&&s?s.p(n,o):(s.d(1),(s=u(n))&&(s.c(),s.m(t,r)));var d={};1&o&&(d.dialog=n[0]),f.$set(d)},i:function(e){i||(Un(a.$$.fragment,e),Un(f.$$.fragment,e),On((function(){o||(o=Bn(t,lr,n[1],!0)),o.run(1)})),i=!0)},o:function(e){In(a.$$.fragment,e),In(f.$$.fragment,e),o||(o=Bn(t,lr,n[1],!1)),o.run(0),i=!1},d:function(n){n&&K(t),Gn(a),s.d(),Gn(f),n&&o&&o.end()}}}function yr(n,t,e){var r,o=t.dialog,i=void 0===o?{}:o,a=t.transition,c=gn("user"),u={};return mn(Jn(Qn.mark((function n(){return Qn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e(2,u=c.findDialog({connection_id:i.connection_id})||{});case 1:case"end":return n.stop()}}),n)})))),n.$set=function(n){"dialog"in n&&e(0,i=n.dialog),"transition"in n&&e(1,a=n.transition)},n.$$.update=function(){4&n.$$.dirty&&e(3,r=u.real_host||u.url&&u.url.host)},[i,a,u,r]}var br=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(pr()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,yr,$r,P,{dialog:0,transition:1}),r}return u}(Yn);function wr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function _r(n){var t,e,r=n[10].default,o=A(r,n,n[9],null);return{c:function(){t=W("a"),o&&o.c(),X(t,"href",n[3]),X(t,"class",n[0]),X(t,"style",n[1]),on(t,"has-path",n[4])},m:function(r,i){F(r,t,i),o&&o.m(t,null),n[11](t),e=!0},p:function(n,i){var a=p(i,1)[0];o&&o.p&&512&a&&o.p(T(r,n,n[9],null),L(r,n[9],a,null)),(!e||8&a)&&X(t,"href",n[3]),(!e||1&a)&&X(t,"class",n[0]),(!e||2&a)&&X(t,"style",n[1]),17&a&&on(t,"has-path",n[4])},i:function(n){e||(Un(o,n),e=!0)},o:function(n){In(o,n),e=!1},d:function(e){e&&K(t),o&&o.d(e),n[11](null)}}}function xr(n,t,e){var r;j(n,ne,(function(n){return e(7,r=n)}));var o,i,a,c=t.class,u=void 0===c?"":c,s=t.href,f=void 0===s?"/":s,d=t.style,l=void 0===d?"":d,p=t.$$slots,h=void 0===p?{}:p,m=t.$$scope;return n.$set=function(n){"class"in n&&e(0,u=n.class),"href"in n&&e(5,f=n.href),"style"in n&&e(1,l=n.style),"$$scope"in n&&e(9,m=n.$$scope)},n.$$.update=function(){160&n.$$.dirty&&e(3,i=0==f.indexOf("/")?r.basePath+f:f),136&n.$$.dirty&&e(4,a=r.path==i.replace(/(#|\?).*/,""))},[u,l,o,i,a,f,function(){return o.focus()},r,[],m,h,function(n){yn[n?"unshift":"push"]((function(){e(2,o=n)}))}]}var kr=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(wr()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,xr,_r,P,{class:0,href:5,style:1,focus:6}),r}return E(u,[{key:"focus",get:function(){return this.$$.ctx[6]}}]),u}(Yn);function Er(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Or(n,t,e){var r=n.slice();return r[15]=t[e],r}function Cr(n){var t,e=pe("You are not a channel operator in %1.",n[0].name)+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:function(n,r){1&r&&e!==(e=pe("You are not a channel operator in %1.",n[0].name)+"")&&tn(t,e)},d:function(n){n&&K(t)}}}function Rr(n){var t,e=pe("You are channel operator in %1.",n[0].name)+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:function(n,r){1&r&&e!==(e=pe("You are channel operator in %1.",n[0].name)+"")&&tn(t,e)},d:function(n){n&&K(t)}}}function Sr(n){var t,e=pe("Private conversation with %1.",n[0].name)+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:function(n,r){1&r&&e!==(e=pe("Private conversation with %1.",n[0].name)+"")&&tn(t,e)},d:function(n){n&&K(t)}}}function Nr(n){var t,e=pe("Conversation with %1 is frozen. Reason: %2",n[0].name,pe(n[0].frozen))+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:function(n,r){1&r&&e!==(e=pe("Conversation with %1 is frozen. Reason: %2",n[0].name,pe(n[0].frozen))+"")&&tn(t,e)},d:function(n){n&&K(t)}}}function Dr(n){var t,e,r,o,i,a,c,u,s,f,d,l,p,h=n[0].hasOwnProperty("wantNotifications"),m=[Mr,Pr],g=[];function v(n,t){return n[6]?0:1}function $(t){n[12].call(null,t)}c=v(n),u=g[c]=m[c](n);var y={type:"password",name:"password",readonly:!n[0].is("locked")&&!n[6],$$slots:{label:[Ar]},$$scope:{ctx:n}};void 0!==n[2]&&(y.value=n[2]);var b=new Ue({props:y});yn.push((function(){return Hn(b,"value",$)}));var w=h&&Tr(n);return{c:function(){t=W("input"),r=Y(),o=W("input"),a=Y(),u.c(),s=Y(),Fn(b.$$.fragment),d=Y(),w&&w.c(),l=Q(),X(t,"type","hidden"),X(t,"name","connection_id"),t.value=e=n[0].connection_id,X(o,"type","hidden"),X(o,"name","dialog_id"),o.value=i=n[0].dialog_id},m:function(n,e){F(n,t,e),F(n,r,e),F(n,o,e),F(n,a,e),g[c].m(n,e),F(n,s,e),Kn(b,n,e),F(n,d,e),w&&w.m(n,e),F(n,l,e),p=!0},p:function(n,r){(!p||1&r&&e!==(e=n[0].connection_id))&&(t.value=e),(!p||1&r&&i!==(i=n[0].dialog_id))&&(o.value=i);var a=c;(c=v(n))===a?g[c].p(n,r):(Tn(),In(g[a],1,1,(function(){g[a]=null})),Ln(),(u=g[c])||(u=g[c]=m[c](n)).c(),Un(u,1),u.m(s.parentNode,s));var d={};65&r&&(d.readonly=!n[0].is("locked")&&!n[6]),262144&r&&(d.$$scope={dirty:r,ctx:n}),!f&&4&r&&(f=!0,d.value=n[2],Cn((function(){return f=!1}))),b.$set(d),1&r&&(h=n[0].hasOwnProperty("wantNotifications")),h?w?(w.p(n,r),Un(w,1)):((w=Tr(n)).c(),Un(w,1),w.m(l.parentNode,l)):w&&(Tn(),In(w,1,1,(function(){w=null})),Ln())},i:function(n){p||(Un(u),Un(b.$$.fragment,n),Un(w),p=!0)},o:function(n){In(u),In(b.$$.fragment,n),In(w),p=!1},d:function(n){n&&K(t),n&&K(r),n&&K(o),n&&K(a),g[c].d(n),n&&K(s),Gn(b,n),n&&K(d),w&&w.d(n),n&&K(l)}}}function Pr(n){var t,e,r,o,i=he(n[3]||"No topic is set.")+"";return{c:function(){t=W("div"),(e=W("label")).textContent="".concat(pe("Topic")),r=Y(),X(o=W("div"),"class","input"),X(t,"class","text-field")},m:function(n,a){F(n,t,a),H(t,e),H(t,r),H(t,o),o.innerHTML=i},p:function(n,t){8&t&&i!==(i=he(n[3]||"No topic is set.")+"")&&(o.innerHTML=i)},i:O,o:O,d:function(n){n&&K(t)}}}function Mr(n){var t,e;function r(t){n[11].call(null,t)}var o={name:"topic",placeholder:pe("No topic is set."),$$slots:{label:[jr]},$$scope:{ctx:n}};void 0!==n[3]&&(o.value=n[3]);var i=new Ne({props:o});return yn.push((function(){return Hn(i,"value",r)})),{c:function(){Fn(i.$$.fragment)},m:function(n,t){Kn(i,n,t),e=!0},p:function(n,e){var r={};262144&e&&(r.$$scope={dirty:e,ctx:n}),!t&&8&e&&(t=!0,r.value=n[3],Cn((function(){return t=!1}))),i.$set(r)},i:function(n){e||(Un(i.$$.fragment,n),e=!0)},o:function(n){In(i.$$.fragment,n),e=!1},d:function(n){Gn(i,n)}}}function jr(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Topic")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Ar(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Password")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Tr(n){var t,e;function r(t){n[13].call(null,t)}var o={$$slots:{label:[Lr]},$$scope:{ctx:n}};void 0!==n[5]&&(o.checked=n[5]);var i=new qt({props:o});return yn.push((function(){return Hn(i,"checked",r)})),{c:function(){Fn(i.$$.fragment)},m:function(n,t){Kn(i,n,t),e=!0},p:function(n,e){var r={};262144&e&&(r.$$scope={dirty:e,ctx:n}),!t&&32&e&&(t=!0,r.checked=n[5],Cn((function(){return t=!1}))),i.$set(r)},i:function(n){e||(Un(i.$$.fragment,n),e=!0)},o:function(n){In(i.$$.fragment,n),e=!1},d:function(n){Gn(i,n)}}}function Lr(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Send me notifications")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Ur(n){var t,e=new Tt({props:{icon:"save",$$slots:{default:[Ir]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};262144&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Un(e.$$.fragment,n),t=!0)},o:function(n){In(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function Ir(n){var t,e=pe("Update")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function zr(n){var t,e=pe("Leave")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Br(n){for(var t,e,r,o,i,a=pe("Participants (%1)",n[0].participants().length)+"",c=n[0].participants(),u=[],s=0;s<c.length;s+=1)u[s]=Hr(Or(n,c,s));var f=function(n){return In(u[n],1,1,(function(){u[n]=null}))};return{c:function(){t=W("nav"),e=W("h3"),r=V(a),o=Y();for(var n=0;n<u.length;n+=1)u[n].c();X(t,"class","sidebar-left__nav")},m:function(n,a){F(n,t,a),H(t,e),H(e,r),H(t,o);for(var c=0;c<u.length;c+=1)u[c].m(t,null);i=!0},p:function(n,e){if((!i||1&e)&&a!==(a=pe("Participants (%1)",n[0].participants().length)+"")&&tn(r,a),1&e){var o;for(c=n[0].participants(),o=0;o<c.length;o+=1){var s=Or(n,c,o);u[o]?(u[o].p(s,e),Un(u[o],1)):(u[o]=Hr(s),u[o].c(),Un(u[o],1),u[o].m(t,null))}for(Tn(),o=c.length;o<u.length;o+=1)f(o);Ln()}},i:function(n){if(!i){for(var t=0;t<c.length;t+=1)Un(u[t]);i=!0}},o:function(n){u=u.filter(Boolean);for(var t=0;t<u.length;t+=1)In(u[t]);i=!1},d:function(n){n&&K(t),G(u,n)}}}function qr(n){var t,e,r,o=n[15].nick+"";return{c:function(){t=W("span"),e=V(o),r=Y()},m:function(n,o){F(n,t,o),H(t,e),F(n,r,o)},p:function(n,t){1&t&&o!==(o=n[15].nick+"")&&tn(e,o)},d:function(n){n&&K(t),n&&K(r)}}}function Hr(n){var t,e=new kr({props:{href:"/chat/"+n[0].connection_id+"/"+n[15].id,class:"participant "+ut(n[15].modes),$$slots:{default:[qr]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};1&t&&(r.href="/chat/"+n[0].connection_id+"/"+n[15].id),1&t&&(r.class="participant "+ut(n[15].modes)),262145&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Un(e.$$.fragment,n),t=!0)},o:function(n){In(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function Fr(n){var t,e,r,o,i,a,c,u,s,f,d,l,h,m=!n[0].is("private"),g=!n[0].is("private"),v=new ke({props:{dialog:n[0]}});function $(n,t){return n[0].frozen?Nr:((null==o||1&t)&&(o=!!n[0].is("private")),o?Sr:n[6]?Rr:Cr)}var y=$(n,-1),b=y(n),w=m&&Dr(n),_=g&&Ur(n),x=new Tt({props:{type:"button",icon:"sign-out-alt",$$slots:{default:[zr]},$$scope:{ctx:n}}});x.$on("click",n[7]);var k=!n[0].frozen&&Br(n);return{c:function(){t=W("div"),Fn(v.$$.fragment),e=Y(),r=W("p"),b.c(),i=Y(),a=W("form"),w&&w.c(),c=Y(),u=W("div"),_&&_.c(),s=Y(),Fn(x.$$.fragment),f=Y(),k&&k.c(),X(u,"class","form-actions"),X(a,"method","post"),X(t,"class","sidebar-left")},m:function(o,d,p){F(o,t,d),Kn(v,t,null),H(t,e),H(t,r),b.m(r,null),H(t,i),H(t,a),w&&w.m(a,null),H(a,c),H(a,u),_&&_.m(u,null),H(u,s),Kn(x,u,null),n[14](a),H(t,f),k&&k.m(t,null),l=!0,p&&h(),h=Z(a,"submit",J(n[8]))},p:function(n,e){var o=p(e,1)[0],i={};1&o&&(i.dialog=n[0]),v.$set(i),y===(y=$(n,o))&&b?b.p(n,o):(b.d(1),(b=y(n))&&(b.c(),b.m(r,null))),1&o&&(m=!n[0].is("private")),m?w?(w.p(n,o),Un(w,1)):((w=Dr(n)).c(),Un(w,1),w.m(a,c)):w&&(Tn(),In(w,1,1,(function(){w=null})),Ln()),1&o&&(g=!n[0].is("private")),g?_?(_.p(n,o),Un(_,1)):((_=Ur(n)).c(),Un(_,1),_.m(u,s)):_&&(Tn(),In(_,1,1,(function(){_=null})),Ln());var f={};262144&o&&(f.$$scope={dirty:o,ctx:n}),x.$set(f),n[0].frozen?k&&(Tn(),In(k,1,1,(function(){k=null})),Ln()):k?(k.p(n,o),Un(k,1)):((k=Br(n)).c(),Un(k,1),k.m(t,null))},i:function(e){l||(Un(v.$$.fragment,e),Un(w),Un(_),Un(x.$$.fragment,e),Un(k),On((function(){d||(d=Bn(t,lr,n[1],!0)),d.run(1)})),l=!0)},o:function(e){In(v.$$.fragment,e),In(w),In(_),In(x.$$.fragment,e),In(k),d||(d=Bn(t,lr,n[1],!1)),d.run(0),l=!1},d:function(e){e&&K(t),Gn(v),b.d(),w&&w.d(),_&&_.d(),Gn(x),n[14](null),k&&k.d(),e&&d&&d.end(),h()}}}function Kr(n,t,e){var r,o,i=t.dialog,a=t.transition,c=gn("user"),u="",s=i.topic,f=i.wantNotifications;function d(n){var t=c.findDialog({connection_id:n.connection_id}),e=n.findParticipant(t&&t.nick);return e&&e.modes.operator}return n.$set=function(n){"dialog"in n&&e(0,i=n.dialog),"transition"in n&&e(1,a=n.transition)},n.$$.update=function(){1&n.$$.dirty&&e(6,o=d(i)),33&n.$$.dirty&&i.update({wantNotifications:f}),17&n.$$.dirty&&r&&r.topic&&e(4,r.topic.value=i.topic||"",r)},[i,a,u,s,r,f,o,function(n){c.omnibus.send({message:"/part",dialog:i})},function(n){if(u){var t=o?"/mode +k "+u:"/join "+i.name+" "+u;c.omnibus.send({message:t,dialog:i}),e(2,u="")}o&&s!=i.topic&&c.omnibus.send({message:"/topic "+s,dialog:i})},c,d,function(n){e(3,s=n)},function(n){e(2,u=n)},function(n){e(5,f=n)},function(n){yn[n?"unshift":"push"]((function(){e(4,r=n)}))}]}var Gr=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Er()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,Kr,Fr,P,{dialog:0,transition:1}),r}return u}(Yn);function Wr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Vr(n){var t,e,r,o,i=("loading"==n[0]?"":pe("Convos"))+"",a=pe("for %1",process.env.organization_name)+"";return{c:function(){t=W("small"),e=V(i),r=Y(),o=V(a),X(t,"class","subtitle")},m:function(n,i){F(n,t,i),H(t,e),H(t,r),H(t,o)},p:function(n,t){1&t&&i!==(i=("loading"==n[0]?"":pe("Convos"))+"")&&tn(e,i)},d:function(n){n&&K(t)}}}function Yr(n){var t,e,r,o,i=("loading"==n[0]?"":pe("Convos"))+"",a=he("for [%1](%2)",process.env.organization_name,process.env.organization_url)+"";return{c:function(){t=W("small"),e=V(i),r=Y(),o=new cn(a,null),X(t,"class","subtitle")},m:function(n,i){F(n,t,i),H(t,e),H(t,r),o.m(t)},p:function(n,t){1&t&&i!==(i=("loading"==n[0]?"":pe("Convos"))+"")&&tn(e,i)},d:function(n){n&&K(t)}}}function Qr(n){var t,e,r,o,i,a,c,u,s=he("Yikes! we are so sorry for the inconvenience. Please submit an [issue](%1), if the problem does not go away.","https://github.com/nordaaker/convos/issues")+"",f=pe("Go to start page")+"",d=new St({props:{name:"play"}});return{c:function(){t=W("p"),e=Y(),r=W("p"),o=W("a"),Fn(d.$$.fragment),i=Y(),a=V(f),X(o,"href",c=n[1].baseUrl),X(o,"target","_self"),X(o,"class","btn")},m:function(n,c){F(n,t,c),t.innerHTML=s,F(n,e,c),F(n,r,c),H(r,o),Kn(d,o,null),H(o,i),H(o,a),u=!0},p:function(n,t){(!u||2&t&&c!==(c=n[1].baseUrl))&&X(o,"href",c)},i:function(n){u||(Un(d.$$.fragment,n),u=!0)},o:function(n){In(d.$$.fragment,n),u=!1},d:function(n){n&&K(t),n&&K(e),n&&K(r),Gn(d)}}}function Zr(n){var t,e,r,o,i,a,c,u,s,f,d=pe("Unable to connect to Convos. Please try again later or check your network connection.")+"",l=pe("Retry")+"",p=new St({props:{name:"sync-alt"}});return{c:function(){t=W("p"),e=W("i"),r=Y(),o=V(d),i=Y(),a=W("p"),c=W("a"),Fn(p.$$.fragment),u=Y(),s=V(l),X(e,"class","fas fa-exclamation-triangle"),X(c,"href",location.href),X(c,"target","_self"),X(c,"class","btn")},m:function(n,d){F(n,t,d),H(t,e),H(t,r),H(t,o),F(n,i,d),F(n,a,d),H(a,c),Kn(p,c,null),H(c,u),H(c,s),f=!0},p:O,i:function(n){f||(Un(p.$$.fragment,n),f=!0)},o:function(n){In(p.$$.fragment,n),f=!1},d:function(n){n&&K(t),n&&K(i),n&&K(a),Gn(p)}}}function Jr(n){var t,e,r,o,i,a,c,u,s=pe("Go to start page")+"",f=new St({props:{name:"play"}});return{c:function(){(t=W("p")).textContent="".concat(pe("The Convos Team have been searching and searching, but the requested page could not be found.")),e=Y(),r=W("p"),o=W("a"),Fn(f.$$.fragment),i=Y(),a=V(s),X(o,"href",c=n[1].baseUrl),X(o,"target","_self"),X(o,"class","btn")},m:function(n,c){F(n,t,c),F(n,e,c),F(n,r,c),H(r,o),Kn(f,o,null),H(o,i),H(o,a),u=!0},p:function(n,t){(!u||2&t&&c!==(c=n[1].baseUrl))&&X(o,"href",c)},i:function(n){u||(Un(f.$$.fragment,n),u=!0)},o:function(n){In(f.$$.fragment,n),u=!1},d:function(n){n&&K(t),n&&K(e),n&&K(r),Gn(f)}}}function Xr(n){var t,e,r,o,i,a,c,u,s,f,d,l,p,h,m,g,v,$,y,b,w=pe("Downloading Convos...")+"",_=pe("Starting Convos...")+"",x=pe("Loading user data...")+"",k=pe("Contact admin")+"";return{c:function(){(t=W("p")).textContent="".concat(pe("Convos is the simplest way to use IRC, and it keeps you always online.")),e=Y(),r=W("p"),o=W("i"),i=Y(),a=V(w),c=Y(),u=W("p"),s=W("i"),f=Y(),d=V(_),l=Y(),p=W("p"),h=W("i"),m=Y(),g=V(x),v=Y(),$=W("p"),y=W("a"),b=V(k),X(o,"class","fas fa-download"),X(s,"class","fas fa-rocket"),X(h,"class","fas fa-spinner fa-spin"),X(y,"class","btn"),X(y,"href",process.env.contact)},m:function(n,w){F(n,t,w),F(n,e,w),F(n,r,w),H(r,o),H(r,i),H(r,a),F(n,c,w),F(n,u,w),H(u,s),H(u,f),H(u,d),F(n,l,w),F(n,p,w),H(p,h),H(p,m),H(p,g),F(n,v,w),F(n,$,w),H($,y),H(y,b)},p:O,i:O,o:O,d:function(n){n&&K(t),n&&K(e),n&&K(r),n&&K(c),n&&K(u),n&&K(l),n&&K(p),n&&K(v),n&&K($)}}}function no(n){var t,e,r,o,i,a,c,u,s,f,d,l,h,m,g,v,$,y,b,w,_,x=pe("loading"==n[0]?"Convos":n[2][n[0]])+"",k="Convos"!=process.env.organization_name&&function(n){var t,e=("https://convos.by"!=process.env.organization_url?Yr:Vr)(n);return{c:function(){e.c(),t=Q()},m:function(n,r){e.m(n,r),F(n,t,r)},p:function(n,t){e.p(n,t)},d:function(n){e.d(n),n&&K(t)}}}(n),E=[Xr,Jr,Zr,Qr],O=[];function C(n,t){return"loading"==n[0]?0:"not_found"==n[0]?1:"offline"==n[0]?2:3}return f=C(n),d=O[f]=E[f](n),{c:function(){t=W("main"),e=W("article"),r=W("h1"),o=W("a"),i=W("span"),a=V(x),u=Y(),k&&k.c(),s=Y(),d.c(),l=Y(),h=W("footer"),(m=W("a")).textContent="Convos",g=V("\n    —\n    "),(v=W("a")).textContent="".concat(pe("Blog")),$=V("\n    —\n    "),(y=W("a")).textContent="".concat(pe("Documentation")),b=V("\n    —\n    "),(w=W("a")).textContent="".concat(pe("GitHub")),X(o,"href",c=n[1].baseUrl),X(e,"class","welcome-screen_fallback"),X(m,"href","https://convos.by/"),X(m,"target","_blank"),X(v,"href","https://convos.by/blog"),X(v,"target","_blank"),X(y,"href","https://convos.by/doc"),X(y,"target","_blank"),X(w,"href","https://github.com/Nordaaker/convos"),X(w,"target","_blank"),X(h,"class","welcome-screen__footer"),X(t,"class","welcome-screen")},m:function(n,c){F(n,t,c),H(t,e),H(e,r),H(r,o),H(o,i),H(i,a),H(r,u),k&&k.m(r,null),H(e,s),O[f].m(e,null),H(t,l),H(t,h),H(h,m),H(h,g),H(h,v),H(h,$),H(h,y),H(h,b),H(h,w),_=!0},p:function(n,t){var r=p(t,1)[0];(!_||1&r)&&x!==(x=pe("loading"==n[0]?"Convos":n[2][n[0]])+"")&&tn(a,x),(!_||2&r&&c!==(c=n[1].baseUrl))&&X(o,"href",c),"Convos"!=process.env.organization_name&&k.p(n,r);var i=f;(f=C(n))===i?O[f].p(n,r):(Tn(),In(O[i],1,1,(function(){O[i]=null})),Ln(),(d=O[f])||(d=O[f]=E[f](n)).c(),Un(d,1),d.m(e,null))},i:function(n){_||(Un(d),_=!0)},o:function(n){In(d),_=!1},d:function(n){n&&K(t),k&&k.d(),O[f].d()}}}function to(n,t,e){var r;j(n,ne,(function(n){return e(1,r=n)}));var o,i=t.status,a=void 0===i?ne.path.split("/").pop()||"not_found":i,c=(gn("user"),process.env.load_user,{loading:"Loading",not_found:"Not Found",offline:"Oops! You appear to be offline",unknown:"Unknown error!"});return ne.update({title:pe(c[o])}),n.$set=function(n){"status"in n&&e(3,a=n.status)},n.$$.update=function(){8&n.$$.dirty&&e(0,o=c[a]?a:"not_found")},[o,r,c,a]}var eo=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Wr()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,to,no,P,{status:3}),r}return u}(Yn),ro=e((function(n,t){var e,o;e=function(n){var t=[],e=Object.keys,o={},i={},a=!0,c=/^(no-?highlight|plain|text)$/i,u=/\blang(?:uage)?-([\w-]+)\b/i,s=/((^(<[^>]+>|\t|)+|(?:\n)))/gm,f="Could not find the language '{}', did you forget to load/include a language module?",d={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},l="of and for in not or if then".split(" ");function p(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function h(n){return n.nodeName.toLowerCase()}function m(n){return c.test(n)}function g(n){var t,e={},r=Array.prototype.slice.call(arguments,1);for(t in n)e[t]=n[t];return r.forEach((function(n){for(t in n)e[t]=n[t]})),e}function v(n){var t=[];return function n(e,r){for(var o=e.firstChild;o;o=o.nextSibling)3===o.nodeType?r+=o.nodeValue.length:1===o.nodeType&&(t.push({event:"start",offset:r,node:o}),r=n(o,r),h(o).match(/br|hr|img|input/)||t.push({event:"stop",offset:r,node:o}));return r}(n,0),t}function $(n){return n.variants&&!n.cached_variants&&(n.cached_variants=n.variants.map((function(t){return g(n,{variants:null},t)}))),n.cached_variants?n.cached_variants:function n(t){return!!t&&(t.endsWithParent||n(t.starts))}(n)?[g(n,{starts:n.starts?g(n.starts):null})]:Object.isFrozen(n)?[g(n)]:[n]}function y(n,t){return t?Number(t):(e=n,-1!=l.indexOf(e.toLowerCase())?0:1);var e}function b(n){function t(n){return n&&n.source||n}function r(e,r){return new RegExp(t(e),"m"+(n.case_insensitive?"i":"")+(r?"g":""))}function o(n){var e,o,i={},a=[],c={},u=1;function s(n,t){i[u]=n,a.push([n,t]),u+=function(n){return new RegExp(n.toString()+"|").exec("").length-1}(t)+1}for(var f=0;f<n.contains.length;f++)s(o=n.contains[f],o.beginKeywords?"\\.?(?:"+o.begin+")\\.?":o.begin);n.terminator_end&&s("end",n.terminator_end),n.illegal&&s("illegal",n.illegal);var d=a.map((function(n){return n[1]}));return e=r(function(n,e){for(var r=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./,o=0,i="",a=0;a<n.length;a++){var c=o+=1,u=t(n[a]);for(a>0&&(i+=e),i+="(";u.length>0;){var s=r.exec(u);if(null==s){i+=u;break}i+=u.substring(0,s.index),u=u.substring(s.index+s[0].length),"\\"==s[0][0]&&s[1]?i+="\\"+String(Number(s[1])+c):(i+=s[0],"("==s[0]&&o++)}i+=")"}return i}(d,"|"),!0),c.lastIndex=0,c.exec=function(t){var r;if(0===a.length)return null;e.lastIndex=c.lastIndex;var o=e.exec(t);if(!o)return null;for(var u=0;u<o.length;u++)if(null!=o[u]&&null!=i[""+u]){r=i[""+u];break}return"string"==typeof r?(o.type=r,o.extra=[n.illegal,n.terminator_end]):(o.type="begin",o.rule=r),o},c}if(n.contains&&-1!=n.contains.indexOf("self")){if(!a)throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");n.contains=n.contains.filter((function(n){return"self"!=n}))}!function i(a,c){a.compiled||(a.compiled=!0,a.keywords=a.keywords||a.beginKeywords,a.keywords&&(a.keywords=function(n,t){var r={};return"string"==typeof n?o("keyword",n):e(n).forEach((function(t){o(t,n[t])})),r;function o(n,e){t&&(e=e.toLowerCase()),e.split(" ").forEach((function(t){var e=t.split("|");r[e[0]]=[n,y(e[0],e[1])]}))}}(a.keywords,n.case_insensitive)),a.lexemesRe=r(a.lexemes||/\w+/,!0),c&&(a.beginKeywords&&(a.begin="\\b("+a.beginKeywords.split(" ").join("|")+")\\b"),a.begin||(a.begin=/\B|\b/),a.beginRe=r(a.begin),a.endSameAsBegin&&(a.end=a.begin),a.end||a.endsWithParent||(a.end=/\B|\b/),a.end&&(a.endRe=r(a.end)),a.terminator_end=t(a.end)||"",a.endsWithParent&&c.terminator_end&&(a.terminator_end+=(a.end?"|":"")+c.terminator_end)),a.illegal&&(a.illegalRe=r(a.illegal)),null==a.relevance&&(a.relevance=1),a.contains||(a.contains=[]),a.contains=Array.prototype.concat.apply([],a.contains.map((function(n){return $("self"===n?a:n)}))),a.contains.forEach((function(n){i(n,a)})),a.starts&&i(a.starts,c),a.terminators=o(a))}(n)}function w(n,t,e,r){var i=t;function c(n,t){var e=$.case_insensitive?t[0].toLowerCase():t[0];return n.keywords.hasOwnProperty(e)&&n.keywords[e]}function u(n,t,e,r){if(!e&&""===t)return"";if(!n)return t;var o='<span class="'+(r?"":d.classPrefix);return(o+=n+'">')+t+(e?"":"</span>")}function s(){E+=null!=x.subLanguage?function(){var n="string"==typeof x.subLanguage;if(n&&!o[x.subLanguage])return p(O);var t=n?w(x.subLanguage,O,!0,k[x.subLanguage]):_(O,x.subLanguage.length?x.subLanguage:void 0);return x.relevance>0&&(R+=t.relevance),n&&(k[x.subLanguage]=t.top),u(t.language,t.value,!1,!0)}():function(){var n,t,e,r;if(!x.keywords)return p(O);for(r="",t=0,x.lexemesRe.lastIndex=0,e=x.lexemesRe.exec(O);e;)r+=p(O.substring(t,e.index)),(n=c(x,e))?(R+=n[1],r+=u(n[0],p(e[0]))):r+=p(e[0]),t=x.lexemesRe.lastIndex,e=x.lexemesRe.exec(O);return r+p(O.substr(t))}(),O=""}function l(n){E+=n.className?u(n.className,"",!0):"",x=Object.create(n,{parent:{value:x}})}function h(n){var t=n[0],e=n.rule;return e&&e.endSameAsBegin&&(e.endRe=new RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")),e.skip?O+=t:(e.excludeBegin&&(O+=t),s(),e.returnBegin||e.excludeBegin||(O=t)),l(e),e.returnBegin?0:t.length}function m(n){var t=n[0],e=i.substr(n.index),r=function n(t,e){if(function(n,t){var e=n&&n.exec(t);return e&&0===e.index}(t.endRe,e)){for(;t.endsParent&&t.parent;)t=t.parent;return t}if(t.endsWithParent)return n(t.parent,e)}(x,e);if(r){var o=x;o.skip?O+=t:(o.returnEnd||o.excludeEnd||(O+=t),s(),o.excludeEnd&&(O=t));do{x.className&&(E+="</span>"),x.skip||x.subLanguage||(R+=x.relevance),x=x.parent}while(x!==r.parent);return r.starts&&(r.endSameAsBegin&&(r.starts.endRe=r.endRe),l(r.starts)),o.returnEnd?0:t.length}}var g={};function v(n,t){var r=t&&t[0];if(O+=n,null==r)return s(),0;if("begin"==g.type&&"end"==t.type&&g.index==t.index&&""===r)return O+=i.slice(t.index,t.index+1),1;if(g=t,"begin"===t.type)return h(t);if("illegal"===t.type&&!e)throw new Error('Illegal lexeme "'+r+'" for mode "'+(x.className||"<unnamed>")+'"');if("end"===t.type){var o=m(t);if(null!=o)return o}return O+=r,r.length}var $=C(n);if(!$)throw console.error(f.replace("{}",n)),new Error('Unknown language: "'+n+'"');b($);var y,x=r||$,k={},E="";for(y=x;y!==$;y=y.parent)y.className&&(E=u(y.className,"",!0)+E);var O="",R=0;try{for(var S,N,D=0;x.terminators.lastIndex=D,S=x.terminators.exec(i);)N=v(i.substring(D,S.index),S),D=S.index+N;for(v(i.substr(D)),y=x;y.parent;y=y.parent)y.className&&(E+="</span>");return{relevance:R,value:E,illegal:!1,language:n,top:x}}catch(t){if(t.message&&-1!==t.message.indexOf("Illegal"))return{illegal:!0,relevance:0,value:p(i)};if(a)return{relevance:0,value:p(i),language:n,top:x,errorRaised:t};throw t}}function _(n,t){t=t||d.languages||e(o);var r={relevance:0,value:p(n)},i=r;return t.filter(C).filter(R).forEach((function(t){var e=w(t,n,!1);e.language=t,e.relevance>i.relevance&&(i=e),e.relevance>r.relevance&&(i=r,r=e)})),i.language&&(r.second_best=i),r}function x(n){return d.tabReplace||d.useBR?n.replace(s,(function(n,t){return d.useBR&&"\n"===n?"<br>":d.tabReplace?t.replace(/\t/g,d.tabReplace):""})):n}function k(n){var e,r,o,a,c,s=function(n){var t,e,r,o,i=n.className+" ";if(i+=n.parentNode?n.parentNode.className:"",e=u.exec(i)){var a=C(e[1]);return a||(console.warn(f.replace("{}",e[1])),console.warn("Falling back to no-highlight mode for this block.",n)),a?e[1]:"no-highlight"}for(t=0,r=(i=i.split(/\s+/)).length;t<r;t++)if(m(o=i[t])||C(o))return o}(n);m(s)||(d.useBR?(e=document.createElement("div")).innerHTML=n.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n"):e=n,c=e.textContent,o=s?w(s,c,!0):_(c),(r=v(e)).length&&((a=document.createElement("div")).innerHTML=o.value,o.value=function(n,e,r){var o=0,i="",a=[];function c(){return n.length&&e.length?n[0].offset!==e[0].offset?n[0].offset<e[0].offset?n:e:"start"===e[0].event?n:e:n.length?n:e}function u(n){i+="<"+h(n)+t.map.call(n.attributes,(function(n){return" "+n.nodeName+'="'+p(n.value).replace(/"/g,"&quot;")+'"'})).join("")+">"}function s(n){i+="</"+h(n)+">"}function f(n){("start"===n.event?u:s)(n.node)}for(;n.length||e.length;){var d=c();if(i+=p(r.substring(o,d[0].offset)),o=d[0].offset,d===n){a.reverse().forEach(s);do{f(d.splice(0,1)[0]),d=c()}while(d===n&&d.length&&d[0].offset===o);a.reverse().forEach(u)}else"start"===d[0].event?a.push(d[0].node):a.pop(),f(d.splice(0,1)[0])}return i+p(r.substr(o))}(r,v(a),c)),o.value=x(o.value),n.innerHTML=o.value,n.className=function(n,t,e){var r=t?i[t]:e,o=[n.trim()];return n.match(/\bhljs\b/)||o.push("hljs"),-1===n.indexOf(r)&&o.push(r),o.join(" ").trim()}(n.className,s,o.language),n.result={language:o.language,re:o.relevance},o.second_best&&(n.second_best={language:o.second_best.language,re:o.second_best.relevance}))}function E(){if(!E.called){E.called=!0;var n=document.querySelectorAll("pre code");t.forEach.call(n,k)}}var O={disableAutodetect:!0};function C(n){return n=(n||"").toLowerCase(),o[n]||o[i[n]]}function R(n){var t=C(n);return t&&!t.disableAutodetect}return n.highlight=w,n.highlightAuto=_,n.fixMarkup=x,n.highlightBlock=k,n.configure=function(n){d=g(d,n)},n.initHighlighting=E,n.initHighlightingOnLoad=function(){window.addEventListener("DOMContentLoaded",E,!1),window.addEventListener("load",E,!1)},n.registerLanguage=function(t,e){var r;try{r=e(n)}catch(n){if(console.error("Language definition for '{}' could not be registered.".replace("{}",t)),!a)throw n;console.error(n),r=O}o[t]=r,r.rawDefinition=e.bind(null,n),r.aliases&&r.aliases.forEach((function(n){i[n]=t}))},n.listLanguages=function(){return e(o)},n.getLanguage=C,n.requireLanguage=function(n){var t=C(n);if(t)return t;throw new Error("The '{}' language is required, but not loaded.".replace("{}",n))},n.autoDetection=R,n.inherit=g,n.debugMode=function(){a=!1},n.IDENT_RE="[a-zA-Z]\\w*",n.UNDERSCORE_IDENT_RE="[a-zA-Z_]\\w*",n.NUMBER_RE="\\b\\d+(\\.\\d+)?",n.C_NUMBER_RE="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",n.BINARY_NUMBER_RE="\\b(0b[01]+)",n.RE_STARTERS_RE="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",n.BACKSLASH_ESCAPE={begin:"\\\\[\\s\\S]",relevance:0},n.APOS_STRING_MODE={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[n.BACKSLASH_ESCAPE]},n.QUOTE_STRING_MODE={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[n.BACKSLASH_ESCAPE]},n.PHRASAL_WORDS_MODE={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},n.COMMENT=function(t,e,r){var o=n.inherit({className:"comment",begin:t,end:e,contains:[]},r||{});return o.contains.push(n.PHRASAL_WORDS_MODE),o.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|XXX):",relevance:0}),o},n.C_LINE_COMMENT_MODE=n.COMMENT("//","$"),n.C_BLOCK_COMMENT_MODE=n.COMMENT("/\\*","\\*/"),n.HASH_COMMENT_MODE=n.COMMENT("#","$"),n.NUMBER_MODE={className:"number",begin:n.NUMBER_RE,relevance:0},n.C_NUMBER_MODE={className:"number",begin:n.C_NUMBER_RE,relevance:0},n.BINARY_NUMBER_MODE={className:"number",begin:n.BINARY_NUMBER_RE,relevance:0},n.CSS_NUMBER_MODE={className:"number",begin:n.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},n.REGEXP_MODE={className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[n.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[n.BACKSLASH_ESCAPE]}]},n.TITLE_MODE={className:"title",begin:n.IDENT_RE,relevance:0},n.UNDERSCORE_TITLE_MODE={className:"title",begin:n.UNDERSCORE_IDENT_RE,relevance:0},n.METHOD_GUARD={begin:"\\.\\s*"+n.UNDERSCORE_IDENT_RE,relevance:0},[n.BACKSLASH_ESCAPE,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.PHRASAL_WORDS_MODE,n.COMMENT,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,n.HASH_COMMENT_MODE,n.NUMBER_MODE,n.C_NUMBER_MODE,n.BINARY_NUMBER_MODE,n.CSS_NUMBER_MODE,n.REGEXP_MODE,n.TITLE_MODE,n.UNDERSCORE_TITLE_MODE,n.METHOD_GUARD].forEach((function(n){!function n(t){Object.freeze(t);var e="function"==typeof t;return Object.getOwnPropertyNames(t).forEach((function(o){!t.hasOwnProperty(o)||null===t[o]||"object"!==r(t[o])&&"function"!=typeof t[o]||e&&("caller"===o||"callee"===o||"arguments"===o)||Object.isFrozen(t[o])||n(t[o])})),t}(n)})),n},o="object"===("undefined"==typeof window?"undefined":r(window))&&window||"object"===("undefined"==typeof self?"undefined":r(self))&&self,t.nodeType?o&&(o.hljs=e({})):e(t)}));function oo(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function io(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Convos"))},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function ao(n){var t;return{c:function(){(t=W("small")).textContent="".concat(pe("for %1",process.env.organization_name)),X(t,"class","subtitle")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function co(n){var t,e=he("for [%1](%2)",process.env.organization_name,process.env.organization_url)+"";return{c:function(){X(t=W("small"),"class","subtitle")},m:function(n,r){F(n,t,r),t.innerHTML=e},p:O,d:function(n){n&&K(t)}}}function uo(n){var t,e,r,o,i,a,c,u,s,f,d,l,p;function h(t){n[12].call(null,t)}var m={type:"email",name:"email",placeholder:pe("Ex: john@doe.com"),$$slots:{label:[so]},$$scope:{ctx:n}};void 0!==n[0].formEmail&&(m.value=n[0].formEmail);var g=new Ue({props:m});yn.push((function(){return Hn(g,"value",h)}));var v=new Ue({props:{type:"password",name:"password",autocomplete:"current-password",$$slots:{label:[fo]},$$scope:{ctx:n}}}),$=new Tt({props:{icon:"sign-in-alt",op:n[4],$$slots:{default:[lo]},$$scope:{ctx:n}}}),y=new be({props:{op:n[4]}});return{c:function(){t=W("section"),e=W("form"),(r=W("h2")).textContent="".concat(pe("Sign in")),o=Y(),Fn(g.$$.fragment),a=Y(),Fn(v.$$.fragment),c=Y(),u=W("div"),Fn($.$$.fragment),s=Y(),(f=W("a")).textContent="".concat(pe("Sign up")),d=Y(),Fn(y.$$.fragment),X(f,"class","btn is-hallow"),X(f,"href","#signup"),X(u,"class","form-actions"),X(e,"method","post"),X(t,"id","signin"),X(t,"class","welcome-screen__signin fade-in")},m:function(i,h,m){F(i,t,h),H(t,e),H(e,r),H(e,o),Kn(g,e,null),H(e,a),Kn(v,e,null),H(e,c),H(e,u),Kn($,u,null),H(u,s),H(u,f),H(e,d),Kn(y,e,null),l=!0,m&&N(p),p=[Z(f,"click",dt),Z(e,"submit",J(n[13]))]},p:function(n,t){var e={};131072&t&&(e.$$scope={dirty:t,ctx:n}),!i&&1&t&&(i=!0,e.value=n[0].formEmail,Cn((function(){return i=!1}))),g.$set(e);var r={};131072&t&&(r.$$scope={dirty:t,ctx:n}),v.$set(r);var o={};131072&t&&(o.$$scope={dirty:t,ctx:n}),$.$set(o)},i:function(n){l||(Un(g.$$.fragment,n),Un(v.$$.fragment,n),Un($.$$.fragment,n),Un(y.$$.fragment,n),l=!0)},o:function(n){In(g.$$.fragment,n),In(v.$$.fragment,n),In($.$$.fragment,n),In(y.$$.fragment,n),l=!1},d:function(n){n&&K(t),Gn(g),Gn(v),Gn($),Gn(y),N(p)}}}function so(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("E-mail")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function fo(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Password")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function lo(n){var t,e=pe("Sign in")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function po(n){var t,e,r,o,i,a,c,u,s,f,d,l,p,h,m=pe("Contact admin")+"";return{c:function(){(t=W("h2")).textContent="".concat(pe("Sign up")),e=Y(),(r=W("p")).textContent="".concat(pe("Convos is not open for public registration.")),o=Y(),(i=W("p")).textContent="".concat(pe("Please ask your Convos admin for an invite link to sign up, or sign in if you already have an account.")),a=Y(),c=W("div"),u=W("a"),s=V(m),f=Y(),(d=W("a")).textContent="".concat(pe("Sign in")),l=Y(),(p=W("a")).textContent="".concat(pe("Home")),X(u,"class","btn"),X(u,"href",process.env.contact),X(d,"class","btn is-hallow"),X(d,"href","#signin"),X(p,"class","btn is-hallow"),X(p,"href","#top"),X(c,"class","form-actions")},m:function(n,m,g){F(n,t,m),F(n,e,m),F(n,r,m),F(n,o,m),F(n,i,m),F(n,a,m),F(n,c,m),H(c,u),H(u,s),H(c,f),H(c,d),H(c,l),H(c,p),g&&N(h),h=[Z(i,"click",dt),Z(d,"click",dt),Z(p,"click",dt)]},p:O,i:O,o:O,d:function(n){n&&K(t),n&&K(e),n&&K(r),n&&K(o),n&&K(i),n&&K(a),n&&K(c),N(h)}}}function ho(n){var t,e,r,o,i,a,c,u,s,f,d,l,p,h,m,g,v=n[2].isFirst&&go();function $(t){n[14].call(null,t)}var y={type:"email",name:"email",placeholder:pe("Ex: john@doe.com"),readonly:n[3],$$slots:{default:[wo],help:[bo],label:[vo]},$$scope:{ctx:n}};void 0!==n[0].formEmail&&(y.value=n[0].formEmail);var b=new Ue({props:y});yn.push((function(){return Hn(b,"value",$)}));var w=new Ue({props:{type:"password",name:"password",$$slots:{default:[ko],help:[xo],label:[_o]},$$scope:{ctx:n}}}),_=new Tt({props:{icon:"save",op:n[5],$$slots:{default:[Eo]},$$scope:{ctx:n}}}),x=!n[3]&&!n[2].isFirst&&Oo(),k=new be({props:{op:n[5]}});return{c:function(){t=W("form"),(e=W("h2")).textContent="".concat(pe(process.env.existing_user?"Recover account":"Sign up")),r=Y(),v&&v.c(),o=Y(),i=W("input"),a=Y(),c=W("input"),u=Y(),Fn(b.$$.fragment),f=Y(),Fn(w.$$.fragment),d=Y(),l=W("div"),Fn(_.$$.fragment),p=Y(),x&&x.c(),h=Y(),Fn(k.$$.fragment),X(i,"type","hidden"),X(i,"name","exp"),X(c,"type","hidden"),X(c,"name","token"),X(l,"class","form-actions"),X(t,"method","post")},m:function(s,$,y){F(s,t,$),H(t,e),H(t,r),v&&v.m(t,null),H(t,o),H(t,i),H(t,a),H(t,c),H(t,u),Kn(b,t,null),H(t,f),Kn(w,t,null),H(t,d),H(t,l),Kn(_,l,null),H(t,p),x&&x.m(t,null),H(t,h),Kn(k,t,null),n[16](t),m=!0,y&&g(),g=Z(t,"submit",J(n[15]))},p:function(n,e){n[2].isFirst?v?v.p(n,e):((v=go()).c(),v.m(t,o)):v&&(v.d(1),v=null);var r={};131072&e&&(r.$$scope={dirty:e,ctx:n}),!s&&1&e&&(s=!0,r.value=n[0].formEmail,Cn((function(){return s=!1}))),b.$set(r);var i={};131072&e&&(i.$$scope={dirty:e,ctx:n}),w.$set(i);var a={};131072&e&&(a.$$scope={dirty:e,ctx:n}),_.$set(a),n[3]||n[2].isFirst?x&&(x.d(1),x=null):x?x.p(n,e):((x=Oo()).c(),x.m(t,h))},i:function(n){m||(Un(b.$$.fragment,n),Un(w.$$.fragment,n),Un(_.$$.fragment,n),Un(k.$$.fragment,n),m=!0)},o:function(n){In(b.$$.fragment,n),In(w.$$.fragment,n),In(_.$$.fragment,n),In(k.$$.fragment,n),m=!1},d:function(e){e&&K(t),v&&v.d(),Gn(b),Gn(w),Gn(_),x&&x.d(),Gn(k),n[16](null),g()}}}function mo(n){var t,e,r,o,i,a,c,u,s,f,d,l,p,h,m=pe("Contact admin")+"";return{c:function(){(t=W("h2")).textContent="".concat(pe("Invalid invite/recover URL")),e=Y(),(r=W("p")).textContent="".concat(pe(410==process.env.status?"The link has expired.":"The link is invalid.")),o=Y(),(i=W("p")).textContent="".concat(pe("Please ask your Convos admin for a new link.")),a=Y(),c=W("p"),u=W("a"),s=V(m),f=Y(),(d=W("a")).textContent="".concat(pe("Sign in")),l=Y(),(p=W("a")).textContent="".concat(pe("Home")),X(u,"class","btn"),X(u,"href",process.env.contact),X(d,"class","btn is-hallow"),X(d,"href","#signin"),X(p,"class","btn is-hallow"),X(p,"href","#top")},m:function(n,m,g){F(n,t,m),F(n,e,m),F(n,r,m),F(n,o,m),F(n,i,m),F(n,a,m),F(n,c,m),H(c,u),H(u,s),H(c,f),H(c,d),H(c,l),H(c,p),g&&N(h),h=[Z(d,"click",dt),Z(p,"click",dt)]},p:O,i:O,o:O,d:function(n){n&&K(t),n&&K(e),n&&K(r),n&&K(o),n&&K(i),n&&K(a),n&&K(c),N(h)}}}function go(n){var t;return{c:function(){(t=W("p")).textContent="".concat(pe('As you are the first user, you do not need any invitation link. Just fill in the form below, hit "Sign up" to start chatting.'))},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function vo(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("E-mail")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function $o(n){var t,e=pe("Your email will be used if you forget your password.")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function yo(n){var t,e=pe("Your email is from the invite link.")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function bo(n){var t;var e=function(n,t){return n[3]?yo:$o}(n)(n);return{c:function(){t=W("p"),e.c(),X(t,"class","help"),X(t,"slot","help")},m:function(n,r){F(n,t,r),e.m(t,null)},p:function(n,t){e.p(n,t)},d:function(n){n&&K(t),e.d()}}}function wo(n){var t;return{c:function(){t=Y()},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function _o(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Password")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function xo(n){var t;return{c:function(){(t=W("p")).textContent="".concat(pe("Hint: Use a phrase from a book.")),X(t,"class","help"),X(t,"slot","help")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function ko(n){var t;return{c:function(){t=Y()},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Eo(n){var t,e=pe(process.env.existing_user?"Set new password":"Sign up")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Oo(n){var t,e,r=he("Go and [sign in](%1) if you already have an account.","#signin")+"";return{c:function(){t=W("p")},m:function(n,o,i){F(n,t,o),t.innerHTML=r,i&&e(),e=Z(t,"click",dt)},p:O,d:function(n){n&&K(t),e()}}}function Co(n){var t;return{c:function(){t=V("Convos")},m:function(n,e){F(n,t,e)},d:function(n){n&&K(t)}}}function Ro(n){var t,e=pe("Blog")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function So(n){var t,e=pe("Documentation")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function No(n){var t,e=pe("GitHub")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Do(n){var t,e,r,o,i,a,c,u,s,f,d,l,h,m,g,v,$,y=new kr({props:{href:"/",$$slots:{default:[io]},$$scope:{ctx:n}}}),b="Convos"!=process.env.organization_name&&function(n){var t,e=("https://convos.by"!=process.env.organization_url?co:ao)(n);return{c:function(){e.c(),t=Q()},m:function(n,r){e.m(n,r),F(n,t,r)},p:function(n,t){e.p(n,t)},d:function(n){e.d(n),n&&K(t)}}}(n),w=!n[2].isFirst&&uo(n),_=[mo,ho,po],x=[];function k(n,t){return process.env.status>=400?0:n[3]||process.env.open_to_public||n[2].isFirst?1:2}f=k(n),d=x[f]=_[f](n);var E=new kr({props:{href:"https://convos.by/",$$slots:{default:[Co]},$$scope:{ctx:n}}}),O=new kr({props:{href:"https://convos.by/blog",$$slots:{default:[Ro]},$$scope:{ctx:n}}}),C=new kr({props:{href:"https://convos.by/doc",$$slots:{default:[So]},$$scope:{ctx:n}}}),R=new kr({props:{href:"https://github.com/Nordaaker/convos",$$slots:{default:[No]},$$scope:{ctx:n}}});return{c:function(){t=W("main"),e=W("article"),r=W("h1"),Fn(y.$$.fragment),o=Y(),b&&b.c(),i=Y(),(a=W("p")).textContent="".concat(pe("Convos is the simplest way to use IRC, and it keeps you always online.")),c=Y(),w&&w.c(),u=Y(),s=W("section"),d.c(),l=Y(),h=W("footer"),Fn(E.$$.fragment),m=V("\n    —\n    "),Fn(O.$$.fragment),g=V("\n    —\n    "),Fn(C.$$.fragment),v=V("\n    —\n    "),Fn(R.$$.fragment),X(e,"class","welcome-screen__about"),X(s,"id","signup"),X(s,"class","welcome-screen__signup fade-in"),X(h,"class","welcome-screen__footer fade-in"),X(t,"id","top"),X(t,"class","welcome-screen")},m:function(n,d){F(n,t,d),H(t,e),H(e,r),Kn(y,r,null),H(r,o),b&&b.m(r,null),H(e,i),H(e,a),H(t,c),w&&w.m(t,null),H(t,u),H(t,s),x[f].m(s,null),H(t,l),H(t,h),Kn(E,h,null),H(h,m),Kn(O,h,null),H(h,g),Kn(C,h,null),H(h,v),Kn(R,h,null),$=!0},p:function(n,e){var r=p(e,1)[0],o={};131072&r&&(o.$$scope={dirty:r,ctx:n}),y.$set(o),"Convos"!=process.env.organization_name&&b.p(n,r),n[2].isFirst?w&&(Tn(),In(w,1,1,(function(){w=null})),Ln()):w?(w.p(n,r),Un(w,1)):((w=uo(n)).c(),Un(w,1),w.m(t,u));var i=f;(f=k(n))===i?x[f].p(n,r):(Tn(),In(x[i],1,1,(function(){x[i]=null})),Ln(),(d=x[f])||(d=x[f]=_[f](n)).c(),Un(d,1),d.m(s,null));var a={};131072&r&&(a.$$scope={dirty:r,ctx:n}),E.$set(a);var c={};131072&r&&(c.$$scope={dirty:r,ctx:n}),O.$set(c);var l={};131072&r&&(l.$$scope={dirty:r,ctx:n}),C.$set(l);var h={};131072&r&&(h.$$scope={dirty:r,ctx:n}),R.$set(h)},i:function(n){$||(Un(y.$$.fragment,n),Un(w),Un(d),Un(E.$$.fragment,n),Un(O.$$.fragment,n),Un(C.$$.fragment,n),Un(R.$$.fragment,n),$=!0)},o:function(n){In(y.$$.fragment,n),In(w),In(d),In(E.$$.fragment,n),In(O.$$.fragment,n),In(C.$$.fragment,n),In(R.$$.fragment,n),$=!1},d:function(n){n&&K(t),Gn(y),b&&b.d(),w&&w.d(),x[f].d(),Gn(E),Gn(O),Gn(C),Gn(R)}}}function Po(n,t,e){var r,o,i,a;j(n,ne,(function(n){return e(8,r=n)}));var c=-1!=location.href.indexOf("email="),u=gn("user");j(n,u,(function(n){return e(2,a=n)}));var s=u.api.operation("loginUser");j(n,s,(function(n){return e(9,o=n)}));var f,d,l=u.api.operation("registerUser");function p(n){return h.apply(this,arguments)}function h(){return(h=Jn(Qn.mark((function n(t){return Qn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return document.cookie=t.res.headers["Set-Cookie"],t.reset(),n.next=4,u.load();case 4:ne.go("/");case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}j(n,l,(function(n){return e(10,i=n)})),mn((function(){if(!d){d=new IntersectionObserver((function(n){n.forEach((function(n){var t=n.intersectionRatio;n.target.style.opacity=t>.9?1:t?t-.25:1}))}),{threshold:[.3,.4,.5,.6,.7,.8,.9]}),st(document,".fade-in",(function(n){return d.observe(n)}))}f&&ne.urlToForm(f)}));var m;return n.$$.update=function(){256&n.$$.dirty&&e(7,m=-1==r.path.indexOf("register")?0:"#signup"),384&n.$$.dirty&&dt(r.hash||m),512&n.$$.dirty&&o.is("success")&&p(s),1024&n.$$.dirty&&i.is("success")&&(ne.update({lastUrl:""}),p(l))},[u,f,a,c,s,l,d,m,r,o,i,p,function(n){u.formEmail=n,e(0,u)},function(n){return s.perform(n.target)},function(n){u.formEmail=n,e(0,u)},function(n){return l.perform(n.target)},function(n){yn[n?"unshift":"push"]((function(){e(1,f=n)}))}]}ro.registerLanguage("css",(function(n){var t={begin:/(?:[A-Z\_\.\-]+|--[a-zA-Z0-9_-]+)\s*:/,returnBegin:!0,end:";",endsWithParent:!0,contains:[{className:"attribute",begin:/\S/,end:":",excludeEnd:!0,starts:{endsWithParent:!0,excludeEnd:!0,contains:[{begin:/[\w-]+\(/,returnBegin:!0,contains:[{className:"built_in",begin:/[\w-]+/},{begin:/\(/,end:/\)/,contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.CSS_NUMBER_MODE]}]},n.CSS_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,n.C_BLOCK_COMMENT_MODE,{className:"number",begin:"#[0-9A-Fa-f]+"},{className:"meta",begin:"!important"}]}}]};return{case_insensitive:!0,illegal:/[=\/|'\$]/,contains:[n.C_BLOCK_COMMENT_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/},{className:"selector-class",begin:/\.[A-Za-z0-9_-]+/},{className:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},{className:"selector-pseudo",begin:/:(:)?[a-zA-Z0-9\_\-\+\(\)"'.]+/},{begin:"@(page|font-face)",lexemes:"@[a-z-]+",keywords:"@page @font-face"},{begin:"@",end:"[{;]",illegal:/:/,returnBegin:!0,contains:[{className:"keyword",begin:/@\-?\w[\w]*(\-\w+)*/},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:"and or not only",contains:[{begin:/[a-z-]+:/,className:"attribute"},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"[a-zA-Z-][a-zA-Z0-9_-]*",relevance:0},{begin:"{",end:"}",illegal:/\S/,contains:[n.C_BLOCK_COMMENT_MODE,t]}]}})),ro.registerLanguage("diff",(function(n){return{aliases:["patch"],contains:[{className:"meta",relevance:10,variants:[{begin:/^@@ +\-\d+,\d+ +\+\d+,\d+ +@@$/},{begin:/^\*\*\* +\d+,\d+ +\*\*\*\*$/},{begin:/^\-\-\- +\d+,\d+ +\-\-\-\-$/}]},{className:"comment",variants:[{begin:/Index: /,end:/$/},{begin:/={3,}/,end:/$/},{begin:/^\-{3}/,end:/$/},{begin:/^\*{3} /,end:/$/},{begin:/^\+{3}/,end:/$/},{begin:/^\*{15}$/}]},{className:"addition",begin:"^\\+",end:"$"},{className:"deletion",begin:"^\\-",end:"$"},{className:"addition",begin:"^\\!",end:"$"}]}})),ro.registerLanguage("dockerfile",(function(n){return{aliases:["docker"],case_insensitive:!0,keywords:"from maintainer expose env arg user onbuild stopsignal",contains:[n.HASH_COMMENT_MODE,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.NUMBER_MODE,{beginKeywords:"run cmd entrypoint volume add copy workdir label healthcheck shell",starts:{end:/[^\\]$/,subLanguage:"bash"}}],illegal:"</"}})),ro.registerLanguage("go",(function(n){var t={keyword:"break default func interface select case map struct chan else goto package switch const fallthrough if range type continue for import return var go defer bool byte complex64 complex128 float32 float64 int8 int16 int32 int64 string uint8 uint16 uint32 uint64 int uint uintptr rune",literal:"true false iota nil",built_in:"append cap close complex copy imag len make new panic print println real recover delete"};return{aliases:["golang"],keywords:t,illegal:"</",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,{className:"string",variants:[n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{begin:n.C_NUMBER_RE+"[i]",relevance:1},n.C_NUMBER_MODE]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[n.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,keywords:t,illegal:/["']/}]}]}})),ro.registerLanguage("http",(function(n){return{aliases:["https"],illegal:"\\S",contains:[{begin:"^HTTP/[0-9\\.]+",end:"$",contains:[{className:"number",begin:"\\b\\d{3}\\b"}]},{begin:"^[A-Z]+ (.*?) HTTP/[0-9\\.]+$",returnBegin:!0,end:"$",contains:[{className:"string",begin:" ",end:" ",excludeBegin:!0,excludeEnd:!0},{begin:"HTTP/[0-9\\.]+"},{className:"keyword",begin:"[A-Z]+"}]},{className:"attribute",begin:"^\\w",end:": ",excludeEnd:!0,illegal:"\\n|\\s|=",starts:{end:"$",relevance:0}},{begin:"\\n\\n",starts:{subLanguage:[],endsWithParent:!0}}]}})),ro.registerLanguage("javascript",(function(n){var t="<>",e="</>",r={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/},o="[A-Za-z$_][0-9A-Za-z$_]*",i={keyword:"in of if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const export super debugger as async await static import from as",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document Symbol Set Map WeakSet WeakMap Proxy Reflect Promise"},a={className:"number",variants:[{begin:"\\b(0[bB][01]+)n?"},{begin:"\\b(0[oO][0-7]+)n?"},{begin:n.C_NUMBER_RE+"n?"}],relevance:0},c={className:"subst",begin:"\\$\\{",end:"\\}",keywords:i,contains:[]},u={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,c],subLanguage:"xml"}},s={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,c],subLanguage:"css"}},f={className:"string",begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE,c]};c.contains=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,u,s,f,a,n.REGEXP_MODE];var d=c.contains.concat([n.C_BLOCK_COMMENT_MODE,n.C_LINE_COMMENT_MODE]);return{aliases:["js","jsx","mjs","cjs"],keywords:i,contains:[{className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},{className:"meta",begin:/^#!/,end:/$/},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,u,s,f,n.C_LINE_COMMENT_MODE,n.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+",contains:[{className:"type",begin:"\\{",end:"\\}",relevance:0},{className:"variable",begin:o+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),n.C_BLOCK_COMMENT_MODE,a,{begin:/[{,\n]\s*/,relevance:0,contains:[{begin:o+"\\s*:",returnBegin:!0,relevance:0,contains:[{className:"attr",begin:o,relevance:0}]}]},{begin:"("+n.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,n.REGEXP_MODE,{className:"function",begin:"(\\(.*?\\)|"+o+")\\s*=>",returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:o},{begin:/\(\s*\)/},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:i,contains:d}]}]},{className:"",begin:/\s/,end:/\s*/,skip:!0},{variants:[{begin:t,end:e},{begin:r.begin,end:r.end}],subLanguage:"xml",contains:[{begin:r.begin,end:r.end,skip:!0,contains:["self"]}]}],relevance:0},{className:"function",beginKeywords:"function",end:/\{/,excludeEnd:!0,contains:[n.inherit(n.TITLE_MODE,{begin:o}),{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,contains:d}],illegal:/\[|%/},{begin:/\$[(.]/},n.METHOD_GUARD,{className:"class",beginKeywords:"class",end:/[{;=]/,excludeEnd:!0,illegal:/[:"\[\]]/,contains:[{beginKeywords:"extends"},n.UNDERSCORE_TITLE_MODE]},{beginKeywords:"constructor get set",end:/\{/,excludeEnd:!0}],illegal:/#(?!!)/}})),ro.registerLanguage("markdown",(function(n){return{aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$"},{begin:"^.+?\\n[=-]{2,}$"}]},{begin:"<",end:">",subLanguage:"xml",relevance:0},{className:"bullet",begin:"^\\s*([*+-]|(\\d+\\.))\\s+"},{className:"strong",begin:"[*_]{2}.+?[*_]{2}"},{className:"emphasis",variants:[{begin:"\\*.+?\\*"},{begin:"_.+?_",relevance:0}]},{className:"quote",begin:"^>\\s+",end:"$"},{className:"code",variants:[{begin:"^```\\w*\\s*$",end:"^```[ ]*$"},{begin:"`.+?`"},{begin:"^( {4}|\\t)",end:"$",relevance:0}]},{begin:"^[-\\*]{3,}",end:"$"},{begin:"\\[.+?\\][\\(\\[].*?[\\)\\]]",returnBegin:!0,contains:[{className:"string",begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0,relevance:0},{className:"link",begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}],relevance:10},{begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]}]}})),ro.registerLanguage("mojolicious",(function(n){return{subLanguage:"xml",contains:[{className:"meta",begin:"^__(END|DATA)__$"},{begin:"^\\s*%{1,2}={0,2}",end:"$",subLanguage:"perl"},{begin:"<%{1,2}={0,2}",end:"={0,1}%>",subLanguage:"perl",excludeBegin:!0,excludeEnd:!0}]}})),ro.registerLanguage("nginx",(function(n){var t={className:"variable",variants:[{begin:/\$\d+/},{begin:/\$\{/,end:/}/},{begin:"[\\$\\@]"+n.UNDERSCORE_IDENT_RE}]},e={endsWithParent:!0,lexemes:"[a-z/_]+",keywords:{literal:"on off yes no true false none blocked debug info notice warn error crit select break last permanent redirect kqueue rtsig epoll poll /dev/poll"},relevance:0,illegal:"=>",contains:[n.HASH_COMMENT_MODE,{className:"string",contains:[n.BACKSLASH_ESCAPE,t],variants:[{begin:/"/,end:/"/},{begin:/'/,end:/'/}]},{begin:"([a-z]+):/",end:"\\s",endsWithParent:!0,excludeEnd:!0,contains:[t]},{className:"regexp",contains:[n.BACKSLASH_ESCAPE,t],variants:[{begin:"\\s\\^",end:"\\s|{|;",returnEnd:!0},{begin:"~\\*?\\s+",end:"\\s|{|;",returnEnd:!0},{begin:"\\*(\\.[a-z\\-]+)+"},{begin:"([a-z\\-]+\\.)+\\*"}]},{className:"number",begin:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{className:"number",begin:"\\b\\d+[kKmMgGdshdwy]*\\b",relevance:0},t]};return{aliases:["nginxconf"],contains:[n.HASH_COMMENT_MODE,{begin:n.UNDERSCORE_IDENT_RE+"\\s+{",returnBegin:!0,end:"{",contains:[{className:"section",begin:n.UNDERSCORE_IDENT_RE}],relevance:0},{begin:n.UNDERSCORE_IDENT_RE+"\\s",end:";|{",returnBegin:!0,contains:[{className:"attribute",begin:n.UNDERSCORE_IDENT_RE,starts:e}],relevance:0}],illegal:"[^\\s\\}]"}})),ro.registerLanguage("perl",(function(n){var t="getpwent getservent quotemeta msgrcv scalar kill dbmclose undef lc ma syswrite tr send umask sysopen shmwrite vec qx utime local oct semctl localtime readpipe do return format read sprintf dbmopen pop getpgrp not getpwnam rewinddir qqfileno qw endprotoent wait sethostent bless s|0 opendir continue each sleep endgrent shutdown dump chomp connect getsockname die socketpair close flock exists index shmgetsub for endpwent redo lstat msgctl setpgrp abs exit select print ref gethostbyaddr unshift fcntl syscall goto getnetbyaddr join gmtime symlink semget splice x|0 getpeername recv log setsockopt cos last reverse gethostbyname getgrnam study formline endhostent times chop length gethostent getnetent pack getprotoent getservbyname rand mkdir pos chmod y|0 substr endnetent printf next open msgsnd readdir use unlink getsockopt getpriority rindex wantarray hex system getservbyport endservent int chr untie rmdir prototype tell listen fork shmread ucfirst setprotoent else sysseek link getgrgid shmctl waitpid unpack getnetbyname reset chdir grep split require caller lcfirst until warn while values shift telldir getpwuid my getprotobynumber delete and sort uc defined srand accept package seekdir getprotobyname semop our rename seek if q|0 chroot sysread setpwent no crypt getc chown sqrt write setnetent setpriority foreach tie sin msgget map stat getlogin unless elsif truncate exec keys glob tied closedirioctl socket readlink eval xor readline binmode setservent eof ord bind alarm pipe atan2 getgrent exp time push setgrent gt lt or ne m|0 break given say state when",e={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:t},r={begin:"->{",end:"}"},o={variants:[{begin:/\$\d/},{begin:/[\$%@](\^\w\b|#\w+(::\w+)*|{\w+}|\w+(::\w*)*)/},{begin:/[\$%@][^\s\w{]/,relevance:0}]},i=[n.BACKSLASH_ESCAPE,e,o],a=[o,n.HASH_COMMENT_MODE,n.COMMENT("^\\=\\w","\\=cut",{endsWithParent:!0}),r,{className:"string",contains:i,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*\\<",end:"\\>",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[n.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE]},{begin:"{\\w+}",contains:[],relevance:0},{begin:"-?\\w+\\s*\\=\\>",contains:[],relevance:0}]},{className:"number",begin:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",relevance:0},{begin:"(\\/\\/|"+n.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[n.HASH_COMMENT_MODE,{className:"regexp",begin:"(s|tr|y)/(\\\\.|[^/])*/(\\\\.|[^/])*/[a-z]*",relevance:10},{className:"regexp",begin:"(m|qr)?/",end:"/[a-z]*",contains:[n.BACKSLASH_ESCAPE],relevance:0}]},{className:"function",beginKeywords:"sub",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[n.TITLE_MODE]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return e.contains=a,r.contains=a,{aliases:["pl","pm"],lexemes:/[\w\.]+/,keywords:t,contains:a}})),ro.registerLanguage("python",(function(n){var t={keyword:"and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del or def lambda async await nonlocal|10",built_in:"Ellipsis NotImplemented",literal:"False None True"},e={className:"meta",begin:/^(>>>|\.\.\.) /},r={className:"subst",begin:/\{/,end:/\}/,keywords:t,illegal:/#/},o={begin:/\{\{/,relevance:0},i={className:"string",contains:[n.BACKSLASH_ESCAPE],variants:[{begin:/(u|b)?r?'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,e],relevance:10},{begin:/(u|b)?r?"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,e],relevance:10},{begin:/(fr|rf|f)'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,e,o,r]},{begin:/(fr|rf|f)"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,e,o,r]},{begin:/(u|r|ur)'/,end:/'/,relevance:10},{begin:/(u|r|ur)"/,end:/"/,relevance:10},{begin:/(b|br)'/,end:/'/},{begin:/(b|br)"/,end:/"/},{begin:/(fr|rf|f)'/,end:/'/,contains:[n.BACKSLASH_ESCAPE,o,r]},{begin:/(fr|rf|f)"/,end:/"/,contains:[n.BACKSLASH_ESCAPE,o,r]},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},a={className:"number",relevance:0,variants:[{begin:n.BINARY_NUMBER_RE+"[lLjJ]?"},{begin:"\\b(0o[0-7]+)[lLjJ]?"},{begin:n.C_NUMBER_RE+"[lLjJ]?"}]},c={className:"params",begin:/\(/,end:/\)/,contains:["self",e,a,i,n.HASH_COMMENT_MODE]};return r.contains=[i,a,e],{aliases:["py","gyp","ipython"],keywords:t,illegal:/(<\/|->|\?)|=>/,contains:[e,a,{beginKeywords:"if",relevance:0},i,n.HASH_COMMENT_MODE,{variants:[{className:"function",beginKeywords:"def"},{className:"class",beginKeywords:"class"}],end:/:/,illegal:/[${=;\n,]/,contains:[n.UNDERSCORE_TITLE_MODE,c,{begin:/->/,endsWithParent:!0,keywords:"None"}]},{className:"meta",begin:/^[\t ]*@/,end:/$/},{begin:/\b(print|exec)\(/}]}})),ro.registerLanguage("scss",(function(n){var t={className:"variable",begin:"(\\$[a-zA-Z-][a-zA-Z0-9_-]*)\\b"},e={className:"number",begin:"#[0-9A-Fa-f]+"};n.CSS_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,n.C_BLOCK_COMMENT_MODE;return{case_insensitive:!0,illegal:"[=/|']",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,{className:"selector-id",begin:"\\#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},{className:"selector-attr",begin:"\\[",end:"\\]",illegal:"$"},{className:"selector-tag",begin:"\\b(a|abbr|acronym|address|area|article|aside|audio|b|base|big|blockquote|body|br|button|canvas|caption|cite|code|col|colgroup|command|datalist|dd|del|details|dfn|div|dl|dt|em|embed|fieldset|figcaption|figure|footer|form|frame|frameset|(h[1-6])|head|header|hgroup|hr|html|i|iframe|img|input|ins|kbd|keygen|label|legend|li|link|map|mark|meta|meter|nav|noframes|noscript|object|ol|optgroup|option|output|p|param|pre|progress|q|rp|rt|ruby|samp|script|section|select|small|span|strike|strong|style|sub|sup|table|tbody|td|textarea|tfoot|th|thead|time|title|tr|tt|ul|var|video)\\b",relevance:0},{className:"selector-pseudo",begin:":(visited|valid|root|right|required|read-write|read-only|out-range|optional|only-of-type|only-child|nth-of-type|nth-last-of-type|nth-last-child|nth-child|not|link|left|last-of-type|last-child|lang|invalid|indeterminate|in-range|hover|focus|first-of-type|first-line|first-letter|first-child|first|enabled|empty|disabled|default|checked|before|after|active)"},{className:"selector-pseudo",begin:"::(after|before|choices|first-letter|first-line|repeat-index|repeat-item|selection|value)"},t,{className:"attribute",begin:"\\b(src|z-index|word-wrap|word-spacing|word-break|width|widows|white-space|visibility|vertical-align|unicode-bidi|transition-timing-function|transition-property|transition-duration|transition-delay|transition|transform-style|transform-origin|transform|top|text-underline-position|text-transform|text-shadow|text-rendering|text-overflow|text-indent|text-decoration-style|text-decoration-line|text-decoration-color|text-decoration|text-align-last|text-align|tab-size|table-layout|right|resize|quotes|position|pointer-events|perspective-origin|perspective|page-break-inside|page-break-before|page-break-after|padding-top|padding-right|padding-left|padding-bottom|padding|overflow-y|overflow-x|overflow-wrap|overflow|outline-width|outline-style|outline-offset|outline-color|outline|orphans|order|opacity|object-position|object-fit|normal|none|nav-up|nav-right|nav-left|nav-index|nav-down|min-width|min-height|max-width|max-height|mask|marks|margin-top|margin-right|margin-left|margin-bottom|margin|list-style-type|list-style-position|list-style-image|list-style|line-height|letter-spacing|left|justify-content|initial|inherit|ime-mode|image-orientation|image-resolution|image-rendering|icon|hyphens|height|font-weight|font-variant-ligatures|font-variant|font-style|font-stretch|font-size-adjust|font-size|font-language-override|font-kerning|font-feature-settings|font-family|font|float|flex-wrap|flex-shrink|flex-grow|flex-flow|flex-direction|flex-basis|flex|filter|empty-cells|display|direction|cursor|counter-reset|counter-increment|content|column-width|column-span|column-rule-width|column-rule-style|column-rule-color|column-rule|column-gap|column-fill|column-count|columns|color|clip-path|clip|clear|caption-side|break-inside|break-before|break-after|box-sizing|box-shadow|box-decoration-break|bottom|border-width|border-top-width|border-top-style|border-top-right-radius|border-top-left-radius|border-top-color|border-top|border-style|border-spacing|border-right-width|border-right-style|border-right-color|border-right|border-radius|border-left-width|border-left-style|border-left-color|border-left|border-image-width|border-image-source|border-image-slice|border-image-repeat|border-image-outset|border-image|border-color|border-collapse|border-bottom-width|border-bottom-style|border-bottom-right-radius|border-bottom-left-radius|border-bottom-color|border-bottom|border|background-size|background-repeat|background-position|background-origin|background-image|background-color|background-clip|background-attachment|background-blend-mode|background|backface-visibility|auto|animation-timing-function|animation-play-state|animation-name|animation-iteration-count|animation-fill-mode|animation-duration|animation-direction|animation-delay|animation|align-self|align-items|align-content)\\b",illegal:"[^\\s]"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:":",end:";",contains:[t,e,n.CSS_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,{className:"meta",begin:"!important"}]},{begin:"@(page|font-face)",lexemes:"@[a-z-]+",keywords:"@page @font-face"},{begin:"@",end:"[{;]",returnBegin:!0,keywords:"and or not only",contains:[{begin:"@[a-z-]+",className:"keyword"},t,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,e,n.CSS_NUMBER_MODE]}]}})),ro.registerLanguage("shell",(function(n){return{aliases:["console"],contains:[{className:"meta",begin:"^\\s{0,3}[/\\w\\d\\[\\]()@-]*[>%$#]",starts:{end:"$",subLanguage:"bash"}}]}})),ro.registerLanguage("xml",(function(n){var t={className:"symbol",begin:"&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;"},e={begin:"\\s",contains:[{className:"meta-keyword",begin:"#?[a-z_][a-z1-9_-]+",illegal:"\\n"}]},r=n.inherit(e,{begin:"\\(",end:"\\)"}),o=n.inherit(n.APOS_STRING_MODE,{className:"meta-string"}),i=n.inherit(n.QUOTE_STRING_MODE,{className:"meta-string"}),a={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:"[A-Za-z0-9\\._:-]+",relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[t]},{begin:/'/,end:/'/,contains:[t]},{begin:/[^\s"'=<>`]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,contains:[{className:"meta",begin:"<![a-z]",end:">",relevance:10,contains:[e,i,o,r,{begin:"\\[",end:"\\]",contains:[{className:"meta",begin:"<![a-z]",end:">",contains:[e,r,i,o]}]}]},n.COMMENT("\x3c!--","--\x3e",{relevance:10}),{begin:"<\\!\\[CDATA\\[",end:"\\]\\]>",relevance:10},t,{className:"meta",begin:/<\?xml/,end:/\?>/,relevance:10},{begin:/<\?(php)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},n.inherit(n.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),n.inherit(n.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]},{className:"tag",begin:"<style(?=\\s|>)",end:">",keywords:{name:"style"},contains:[a],starts:{end:"</style>",returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:"<script(?=\\s|>)",end:">",keywords:{name:"script"},contains:[a],starts:{end:"<\/script>",returnEnd:!0,subLanguage:["actionscript","javascript","handlebars","xml"]}},{className:"tag",begin:"</?",end:"/?>",contains:[{className:"name",begin:/[^\/><\s]+/,relevance:0},a]}]}})),ro.registerLanguage("yaml",(function(n){var t={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[n.BACKSLASH_ESCAPE,{className:"template-variable",variants:[{begin:"{{",end:"}}"},{begin:"%{",end:"}"}]}]};return{case_insensitive:!0,aliases:["yml","YAML","yaml"],contains:[{className:"attr",variants:[{begin:"\\w[\\w :\\/.-]*:(?=[ \t]|$)"},{begin:'"\\w[\\w :\\/.-]*":(?=[ \t]|$)'},{begin:"'\\w[\\w :\\/.-]*':(?=[ \t]|$)"}]},{className:"meta",begin:"^---s*$",relevance:10},{className:"string",begin:"[\\|>]([0-9]?[+-])?[ ]*\\n( *)[\\S ]+\\n(\\2[\\S ]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!"+n.UNDERSCORE_IDENT_RE},{className:"type",begin:"!!"+n.UNDERSCORE_IDENT_RE},{className:"meta",begin:"&"+n.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+n.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"\\-(?=[ ]|$)",relevance:0},n.HASH_COMMENT_MODE,{beginKeywords:"true false yes no null",keywords:{literal:"true false yes no null"}},{className:"number",begin:n.C_NUMBER_RE+"\\b"},t]}}));var Mo=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(oo()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,Po,Do,P,{}),r}return u}(Yn);function jo(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Ao(n,t,e){var r=n.slice();return r[20]=t[e],r}function To(n,t,e){var r=n.slice();return r[17]=t[e],r}function Lo(n){var t,e=new kr({props:{href:"/settings/connection",$$slots:{default:[Uo]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};8388608&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Un(e.$$.fragment,n),t=!0)},o:function(n){In(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function Uo(n){var t,e,r,o=new St({props:{name:"exclamation-circle"}});return{c:function(){Fn(o.$$.fragment),t=Y(),(e=W("span")).textContent="".concat(pe("No conversations"))},m:function(n,i){Kn(o,n,i),F(n,t,i),F(n,e,i),r=!0},p:O,i:function(n){r||(Un(o.$$.fragment,n),r=!0)},o:function(n){In(o.$$.fragment,n),r=!1},d:function(n){Gn(o,n),n&&K(t),n&&K(e)}}}function Io(n){var t,e,r,o,i,a,c,u,s=(n[17].name||n[17].connection_id)+"",f=ei(n[17])+"",d=new St({props:{name:"network-wired"}});return{c:function(){Fn(d.$$.fragment),t=Y(),e=W("span"),r=V(s),o=Y(),i=W("b"),a=V(f),X(i,"class","unread"),i.hidden=c=!n[17].unread},m:function(n,c){Kn(d,n,c),F(n,t,c),F(n,e,c),H(e,r),F(n,o,c),F(n,i,c),H(i,a),u=!0},p:function(n,t){(!u||16&t)&&s!==(s=(n[17].name||n[17].connection_id)+"")&&tn(r,s),(!u||16&t)&&f!==(f=ei(n[17])+"")&&tn(a,f),(!u||16&t&&c!==(c=!n[17].unread))&&(i.hidden=c)},i:function(n){u||(Un(d.$$.fragment,n),u=!0)},o:function(n){In(d.$$.fragment,n),u=!1},d:function(n){Gn(d,n),n&&K(t),n&&K(e),n&&K(o),n&&K(i)}}}function zo(n){var t,e,r,o,i,a,c,u,s=n[20].name+"",f=ei(n[20])+"",d=new St({props:{name:n[20].is_private?"user":"user-friends"}});return{c:function(){Fn(d.$$.fragment),t=Y(),e=W("span"),r=V(s),o=Y(),i=W("b"),a=V(f),X(i,"class","unread"),i.hidden=c=!n[20].unread},m:function(n,c){Kn(d,n,c),F(n,t,c),F(n,e,c),H(e,r),F(n,o,c),F(n,i,c),H(i,a),u=!0},p:function(n,t){var e={};16&t&&(e.name=n[20].is_private?"user":"user-friends"),d.$set(e),(!u||16&t)&&s!==(s=n[20].name+"")&&tn(r,s),(!u||16&t)&&f!==(f=ei(n[20])+"")&&tn(a,f),(!u||16&t&&c!==(c=!n[20].unread))&&(i.hidden=c)},i:function(n){u||(Un(d.$$.fragment,n),u=!0)},o:function(n){In(d.$$.fragment,n),u=!1},d:function(n){Gn(d,n),n&&K(t),n&&K(e),n&&K(o),n&&K(i)}}}function Bo(n){var t,e=new kr({props:{href:n[20].path,class:ni(n[17],n[20]),$$slots:{default:[zo]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};16&t&&(r.href=n[20].path),16&t&&(r.class=ni(n[17],n[20])),8388624&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Un(e.$$.fragment,n),t=!0)},o:function(n){In(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function qo(n){for(var t,e,r,o=new kr({props:{href:n[17].path,class:ni(n[17],n[17]),$$slots:{default:[Io]},$$scope:{ctx:n}}}),i=n[17].dialogs.toArray(),a=[],c=0;c<i.length;c+=1)a[c]=Bo(Ao(n,i,c));var u=function(n){return In(a[n],1,1,(function(){a[n]=null}))};return{c:function(){Fn(o.$$.fragment),t=Y();for(var n=0;n<a.length;n+=1)a[n].c();e=Q()},m:function(n,i){Kn(o,n,i),F(n,t,i);for(var c=0;c<a.length;c+=1)a[c].m(n,i);F(n,e,i),r=!0},p:function(n,t){var r={};if(16&t&&(r.href=n[17].path),16&t&&(r.class=ni(n[17],n[17])),8388624&t&&(r.$$scope={dirty:t,ctx:n}),o.$set(r),16&t){var c;for(i=n[17].dialogs.toArray(),c=0;c<i.length;c+=1){var s=Ao(n,i,c);a[c]?(a[c].p(s,t),Un(a[c],1)):(a[c]=Bo(s),a[c].c(),Un(a[c],1),a[c].m(e.parentNode,e))}for(Tn(),c=i.length;c<a.length;c+=1)u(c);Ln()}},i:function(n){if(!r){Un(o.$$.fragment,n);for(var t=0;t<i.length;t+=1)Un(a[t]);r=!0}},o:function(n){In(o.$$.fragment,n),a=a.filter(Boolean);for(var t=0;t<a.length;t+=1)In(a[t]);r=!1},d:function(n){Gn(o,n),n&&K(t),G(a,n),n&&K(e)}}}function Ho(n){var t,e,r,o,i,a,c,u=ei(n[6])+"",s=new St({props:{name:n[6].unread?"bell":"bell-slash"}});return{c:function(){Fn(s.$$.fragment),t=Y(),(e=W("span")).textContent="".concat(pe("Notifications")),r=Y(),o=W("b"),i=V(u),X(o,"class","unread"),o.hidden=a=!n[6].unread},m:function(n,a){Kn(s,n,a),F(n,t,a),F(n,e,a),F(n,r,a),F(n,o,a),H(o,i),c=!0},p:function(n,t){var e={};64&t&&(e.name=n[6].unread?"bell":"bell-slash"),s.$set(e),(!c||64&t)&&u!==(u=ei(n[6])+"")&&tn(i,u),(!c||64&t&&a!==(a=!n[6].unread))&&(o.hidden=a)},i:function(n){c||(Un(s.$$.fragment,n),c=!0)},o:function(n){In(s.$$.fragment,n),c=!1},d:function(n){Gn(s,n),n&&K(t),n&&K(e),n&&K(r),n&&K(o)}}}function Fo(n){var t,e,r,o=new St({props:{name:"search"}});return{c:function(){Fn(o.$$.fragment),t=Y(),(e=W("span")).textContent="".concat(pe("Search"))},m:function(n,i){Kn(o,n,i),F(n,t,i),F(n,e,i),r=!0},p:O,i:function(n){r||(Un(o.$$.fragment,n),r=!0)},o:function(n){In(o.$$.fragment,n),r=!1},d:function(n){Gn(o,n),n&&K(t),n&&K(e)}}}function Ko(n){var t,e,r,o=new St({props:{name:"comment"}});return{c:function(){Fn(o.$$.fragment),t=Y(),(e=W("span")).textContent="".concat(pe("Add conversation"))},m:function(n,i){Kn(o,n,i),F(n,t,i),F(n,e,i),r=!0},p:O,i:function(n){r||(Un(o.$$.fragment,n),r=!0)},o:function(n){In(o.$$.fragment,n),r=!1},d:function(n){Gn(o,n),n&&K(t),n&&K(e)}}}function Go(n){var t,e,r,o=new St({props:{name:"network-wired"}});return{c:function(){Fn(o.$$.fragment),t=Y(),(e=W("span")).textContent="".concat(pe("Add connection"))},m:function(n,i){Kn(o,n,i),F(n,t,i),F(n,e,i),r=!0},p:O,i:function(n){r||(Un(o.$$.fragment,n),r=!0)},o:function(n){In(o.$$.fragment,n),r=!1},d:function(n){Gn(o,n),n&&K(t),n&&K(e)}}}function Wo(n){var t,e,r,o=new St({props:{name:"user-cog"}});return{c:function(){Fn(o.$$.fragment),t=Y(),(e=W("span")).textContent="".concat(pe("Account"))},m:function(n,i){Kn(o,n,i),F(n,t,i),F(n,e,i),r=!0},p:O,i:function(n){r||(Un(o.$$.fragment,n),r=!0)},o:function(n){In(o.$$.fragment,n),r=!1},d:function(n){Gn(o,n),n&&K(t),n&&K(e)}}}function Vo(n){var t,e,r,o=new St({props:{name:"question-circle"}});return{c:function(){Fn(o.$$.fragment),t=Y(),(e=W("span")).textContent="".concat(pe("Help"))},m:function(n,i){Kn(o,n,i),F(n,t,i),F(n,e,i),r=!0},p:O,i:function(n){r||(Un(o.$$.fragment,n),r=!0)},o:function(n){In(o.$$.fragment,n),r=!1},d:function(n){Gn(o,n),n&&K(t),n&&K(e)}}}function Yo(n){var t,e=new kr({props:{href:"/settings",$$slots:{default:[Qo]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};8388608&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Un(e.$$.fragment,n),t=!0)},o:function(n){In(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function Qo(n){var t,e,r,o=new St({props:{name:"tools"}});return{c:function(){Fn(o.$$.fragment),t=Y(),(e=W("span")).textContent="".concat(pe("Settings"))},m:function(n,i){Kn(o,n,i),F(n,t,i),F(n,e,i),r=!0},p:O,i:function(n){r||(Un(o.$$.fragment,n),r=!0)},o:function(n){In(o.$$.fragment,n),r=!1},d:function(n){Gn(o,n),n&&K(t),n&&K(e)}}}function Zo(n){var t,e,r,o=new St({props:{name:"power-off"}});return{c:function(){Fn(o.$$.fragment),t=Y(),(e=W("span")).textContent="".concat(pe("Log out"))},m:function(n,i){Kn(o,n,i),F(n,t,i),F(n,e,i),r=!0},p:O,i:function(n){r||(Un(o.$$.fragment,n),r=!0)},o:function(n){In(o.$$.fragment,n),r=!1},d:function(n){Gn(o,n),n&&K(t),n&&K(e)}}}function Jo(n){var t,e,r,o,i=pe('Search for "%1"',n[5])+"",a=new St({props:{name:"search"}});return{c:function(){Fn(a.$$.fragment),t=Y(),e=W("span"),r=V(i)},m:function(n,i){Kn(a,n,i),F(n,t,i),F(n,e,i),H(e,r),o=!0},p:function(n,t){(!o||32&t)&&i!==(i=pe('Search for "%1"',n[5])+"")&&tn(r,i)},i:function(n){o||(Un(a.$$.fragment,n),o=!0)},o:function(n){In(a.$$.fragment,n),o=!1},d:function(n){Gn(a,n),n&&K(t),n&&K(e)}}}function Xo(n){for(var t,e,r,o,i,a,c,u,s,f,d,l,h,m,g,v,$,y,b,w,_,x,k,E,O,C,R=(n[4].email||pe("Account"))+"",S=n[4].is("admin"),D=new St({props:{name:"search"}}),P=!n[4].connections.size&&Lo(n),M=n[4].connections.toArray(),j=[],A=0;A<M.length;A+=1)j[A]=qo(To(n,M,A));var T=function(n){return In(j[n],1,1,(function(){j[n]=null}))},L=new kr({props:{href:"/chat",$$slots:{default:[Ho]},$$scope:{ctx:n}}}),U=new kr({props:{href:"/search",$$slots:{default:[Fo]},$$scope:{ctx:n}}}),I=new kr({props:{href:"/settings/conversation",$$slots:{default:[Ko]},$$scope:{ctx:n}}}),z=new kr({props:{href:"/settings/connection",$$slots:{default:[Go]},$$scope:{ctx:n}}}),B=new kr({props:{href:"/settings/account",$$slots:{default:[Wo]},$$scope:{ctx:n}}}),q=new kr({props:{href:"/help",$$slots:{default:[Vo]},$$scope:{ctx:n}}}),Q=S&&Yo(n),J=new kr({props:{href:"/api/user/logout.html",$$slots:{default:[Zo]},$$scope:{ctx:n}}}),nn=new kr({props:{href:"/search?q="+encodeURIComponent(n[5]),class:"for-search hidden",$$slots:{default:[Jo]},$$scope:{ctx:n}}});return{c:function(){t=W("div"),e=W("form"),r=W("input"),i=Y(),a=W("label"),Fn(D.$$.fragment),c=Y(),u=W("nav"),(s=W("h3")).textContent="".concat(pe("Conversations")),f=Y(),P&&P.c(),d=Y();for(var p=0;p<j.length;p+=1)j[p].c();l=Y(),h=W("h3"),m=V(R),g=Y(),Fn(L.$$.fragment),v=Y(),Fn(U.$$.fragment),$=Y(),Fn(I.$$.fragment),y=Y(),Fn(z.$$.fragment),b=Y(),Fn(B.$$.fragment),w=Y(),Fn(q.$$.fragment),_=Y(),Q&&Q.c(),x=Y(),Fn(J.$$.fragment),k=Y(),Fn(nn.$$.fragment),X(r,"type","text"),X(r,"id","search_input"),X(r,"placeholder",o=n[3]?pe("Search..."):pe("Convos")),X(a,"for","search_input"),X(e,"class","sidebar__header"),X(u,"class","sidebar-left__nav"),on(u,"is-filtering",n[1].length>0),X(t,"class","sidebar-left")},m:function(o,p,E){F(o,t,p),H(t,e),H(e,r),en(r,n[1]),H(e,i),H(e,a),Kn(D,a,null),H(t,c),H(t,u),H(u,s),H(u,f),P&&P.m(u,null),H(u,d);for(var R=0;R<j.length;R+=1)j[R].m(u,null);H(u,l),H(u,h),H(h,m),H(u,g),Kn(L,u,null),H(u,v),Kn(U,u,null),H(u,$),Kn(I,u,null),H(u,y),Kn(z,u,null),H(u,b),Kn(B,u,null),H(u,w),Kn(q,u,null),H(u,_),Q&&Q.m(u,null),H(u,x),Kn(J,u,null),H(u,k),Kn(nn,u,null),n[16](u),O=!0,E&&N(C),C=[Z(r,"input",n[15]),Z(r,"blur",n[9]),Z(r,"focus",n[10]),Z(r,"keydown",n[11]),Z(e,"submit",ri),Z(u,"click",ti)]},p:function(n,t){var e=p(t,1)[0];if((!O||8&e&&o!==(o=n[3]?pe("Search..."):pe("Convos")))&&X(r,"placeholder",o),2&e&&r.value!==n[1]&&en(r,n[1]),n[4].connections.size?P&&(Tn(),In(P,1,1,(function(){P=null})),Ln()):P?(P.p(n,e),Un(P,1)):((P=Lo(n)).c(),Un(P,1),P.m(u,d)),16&e){var i;for(M=n[4].connections.toArray(),i=0;i<M.length;i+=1){var a=To(n,M,i);j[i]?(j[i].p(a,e),Un(j[i],1)):(j[i]=qo(a),j[i].c(),Un(j[i],1),j[i].m(u,l))}for(Tn(),i=M.length;i<j.length;i+=1)T(i);Ln()}(!O||16&e)&&R!==(R=(n[4].email||pe("Account"))+"")&&tn(m,R);var c={};8388672&e&&(c.$$scope={dirty:e,ctx:n}),L.$set(c);var s={};8388608&e&&(s.$$scope={dirty:e,ctx:n}),U.$set(s);var f={};8388608&e&&(f.$$scope={dirty:e,ctx:n}),I.$set(f);var h={};8388608&e&&(h.$$scope={dirty:e,ctx:n}),z.$set(h);var g={};8388608&e&&(g.$$scope={dirty:e,ctx:n}),B.$set(g);var v={};8388608&e&&(v.$$scope={dirty:e,ctx:n}),q.$set(v),16&e&&(S=n[4].is("admin")),S?Q?(Q.p(n,e),Un(Q,1)):((Q=Yo(n)).c(),Un(Q,1),Q.m(u,x)):Q&&(Tn(),In(Q,1,1,(function(){Q=null})),Ln());var $={};8388608&e&&($.$$scope={dirty:e,ctx:n}),J.$set($);var y={};32&e&&(y.href="/search?q="+encodeURIComponent(n[5])),8388640&e&&(y.$$scope={dirty:e,ctx:n}),nn.$set(y),2&e&&on(u,"is-filtering",n[1].length>0)},i:function(e){if(!O){Un(D.$$.fragment,e),Un(P);for(var r=0;r<M.length;r+=1)Un(j[r]);Un(L.$$.fragment,e),Un(U.$$.fragment,e),Un(I.$$.fragment,e),Un(z.$$.fragment,e),Un(B.$$.fragment,e),Un(q.$$.fragment,e),Un(Q),Un(J.$$.fragment,e),Un(nn.$$.fragment,e),On((function(){E||(E=Bn(t,lr,n[0],!0)),E.run(1)})),O=!0}},o:function(e){In(D.$$.fragment,e),In(P),j=j.filter(Boolean);for(var r=0;r<j.length;r+=1)In(j[r]);In(L.$$.fragment,e),In(U.$$.fragment,e),In(I.$$.fragment,e),In(z.$$.fragment,e),In(B.$$.fragment,e),In(q.$$.fragment,e),In(Q),In(J.$$.fragment,e),In(nn.$$.fragment,e),E||(E=Bn(t,lr,n[0],!1)),E.run(0),O=!1},d:function(e){e&&K(t),Gn(D),P&&P.d(),G(j,e),Gn(L),Gn(U),Gn(I),Gn(z),Gn(B),Gn(q),Q&&Q.d(),Gn(J),Gn(nn),n[16](null),e&&E&&E.end(),N(C)}}}function ni(n,t){var e=[t.dialog_id?"for-dialog":"for-connection"];return(t.frozen||"connected"!=n.state)&&e.push("is-frozen"),t.errors&&e.push("has-errors"),e.join(" ")}function ti(n){(n.target.className||"").match(/(network|user)/)&&setTimeout((function(){return ne.update({activeMenu:"settings"})}),50)}function ei(n){return n.unread>60?"60+":n.unread||0}var ri=function(n){return n.preventDefault()};function oi(n,t,e){var r,o,i;j(n,ne,(function(n){return e(14,o=n)}));var a=t.transition,c=gn("user");j(n,c,(function(n){return e(4,r=n)}));var u=r.notifications;j(n,u,(function(n){return e(6,i=n)}));var s,f,d=0,l="",p=!1,h=[];function m(){e(3,p=!1),st(s,"a",(function(n){return n.classList.remove("has-focus")})),setTimeout((function(){if(s){e(1,l="");var n=document.activeElement;n&&nt(n,s)&&st(s,"a.has-path",(function(n){return n.focus()}))}}),100)}function g(){if(s){e(12,d=0),e(3,p=!0),e(13,h=[]);var n=[l.match(/^\W+/)?"":"\\b\\W*"];n[0]&&n.push("");for(var t=function(t){var r=new RegExp(n[t]+ft(l),"i"),o={};if(st(s,"a",(function(n,t){var i=n.classList;!l.length&&i.contains("has-path")&&e(12,d=t),i.remove("has-focus");var a=!l.length||!n.href.match(/\/search$/)&&!o[n.href]&&n.textContent.match(r);a&&h.push(n),n.classList[a?"remove":"add"]("hidden"),o[n.href]=!0})),h.length)return"break"},r=0;r<n.length;r++){if("break"===t(r))break}st(s,".for-connection",(function(n){for(var t=n;(t=t.nextElementSibling)&&t.classList.contains("for-dialog");)if(!t.classList.contains("hidden"))return n.classList.remove("hidden")}));var o=s.querySelector(".for-search");o.classList[l?"remove":"add"]("hidden"),o.classList.contains("hidden")||h.push(o),st(s,"h3",(function(n){for(var t=n;(t=t.nextElementSibling)&&!ht(t,"h3");)if(!t.classList.contains("hidden"))return n.classList.remove("hidden");n.classList.add("hidden")}))}}return n.$set=function(n){"transition"in n&&e(0,a=n.transition)},n.$$.update=function(){2&n.$$.dirty&&g(),2&n.$$.dirty&&e(5,f=l.replace(/^\//,"")),16388&n.$$.dirty&&s&&m(),12288&n.$$.dirty&&h[d]&&h[d].classList.add("has-focus")},[a,l,s,p,r,f,i,c,u,m,g,function(n){if(13==n.keyCode)return n.preventDefault(),m(),void(h[d]&&ne.go(h[d].href));var t=38==n.keyCode?-1:40==n.keyCode?1:0;t&&(n.preventDefault(),h[d]&&h[d].classList.remove("has-focus"),e(12,d+=n.ctrlKey?4*t:t)),d<0&&e(12,d=h.length-1),d>=h.length&&e(12,d=0)},d,h,o,function(){l=this.value,e(1,l)},function(n){yn[n?"unshift":"push"]((function(){e(2,s=n)}))}]}var ii=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(jo()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,oi,Xo,P,{transition:0}),r}return u}(Yn);function ai(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var ci=function(n,t){return n.name.localeCompare(t.name)},ui=function(t){c(a,t);var e,r=(e=a,function(){var n,t=i(e);if(ai()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n(this,a),(t=r.call(this,e)).sorter=o.sorter||ci,t._sort(),t}return E(a,[{key:"filter",value:function(n){return Array.from(this.values()).filter(n)}},{key:"set",value:function(n,t){m(i(a.prototype),"set",this).call(this,n,t),this._sort()}},{key:"toArray",value:function(){return Array.from(this.values())}},{key:"_sort",value:function(){var n=this,t=Array.from(this.entries()),e=this.sorter;return this.clear(),t.sort((function(n,t){return e(n[1],t[1])})).forEach((function(t){var e=p(t,2),r=e[0],o=e[1];return m(i(a.prototype),"set",n).call(n,r,o)})),t}}]),a}(y(Map)),si={b:"channel_ban",C:"ctcp_block",c:"colour_filter",e:"ban_exemption",F:"enable_forwarding",f:"forward",g:"free_invite",I:"invite_exemption",j:"join_throttle",k:"password",l:"join_limit",L:"large_ban_list",m:"moderated",n:"prevent_external_send",P:"permanent",p:"privat",Q:"block_forwarded_users",q:"quiet",r:"block_unidentified",s:"secret",S:"secure_connection_only",t:"ops_topic"},fi={o:"@",v:"+"},di={a:"admin",B:"bot",h:"half_operator",i:"invisible",I:"whois_hide_online",o:"operator",p:"whois_hide_channels",R:"privmsg_from_registered_only",r:"registered",S:"service_bot",T:"ctcp_block",t:"vhost",v:"voice",W:"whois_notifications",x:"cloaked_hostname",z:"secure_connection",Z:"secure_connection_only"};function li(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function pi(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?li(Object(e),!0).forEach((function(t){Xn(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):li(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function hi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var mi=new(function(t){c(a,t);var e,r=(e=a,function(){var n,t=i(e);if(hi()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function a(){var t;return n(this,a),(t=r.call(this)).prop("persist","debug",0),t.prop("persist","notificationCloseDelay",5e3),t.prop("persist","protocols",{}),t.prop("persist","wantNotifications",null),t.prop("ro","notifyPermission",(function(){return t._notification().permission})),t.prop("rw","defaultTitle","Convos"),t.prop("rw","route",ne),t.prop("rw","wsUrl",""),t.msgId=0,t.messageCb={},t.wsSendQueue=[],t}return E(a,[{key:"notify",value:function(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n||(n=this.defaultTitle);var r=this.wantNotifications?"granted"!=this._notification().permission?this._notification().permission:!e.force&&this._hasFocus()?"hasFocus":"":"wantNotifications == false";if(r)return this.debug&&console.log("[notify] Rejected: "+r,[n,t,e]),null;var o=this._notification(n,pi({},e,{body:t}));return o.onclick=function(n){window.focus(),o.close()},setTimeout((function(){return o.close()}),this.notificationCloseDelay),o}},{key:"registerProtocol",value:function(n,t){var e;return this.protocols[n]=t,this.update({protocols:(e=this.protocols,JSON.parse(JSON.stringify(e)))}),t&&navigator.registerProtocolHandler&&navigator.registerProtocolHandler(n,this.route.baseUrl+"/register?uri=%s",'Convos wants to handle "'+n+'" links'),this}},{key:"requestPermissionToNotify",value:function(n){var t=this;if("boolean"==typeof n)return this.update({wantNotifications:n});var e=this._notification();return"granted"!=e.permission&&e.requestPermission?(e.requestPermission((function(e){t.update({wantNotifications:"granted"==e}),n&&n(e)})),this):(this.update({wantNotifications:"granted"==e.permission}),n&&n(e.permission),this)}},{key:"send",value:function(n,t){var e="string"==typeof n?{method:n}:pi({},n);e.method||(e.method=e.message?"send":"ping"),e.connection&&["connection_id"].forEach((function(n){e[n]=e.dialog[n]||""})),e.dialog&&["connection_id","dialog_id"].forEach((function(n){e[n]=e.dialog[n]||""})),e.id=String("ping"==e.method?0:++this.msgId),delete e.connection,delete e.dialog,t&&(this.messageCb[e.id]=t),this.debug>=2&&console.log("[send]",e),this.wsSendQueue.push(e),this._ws()}},{key:"start",value:function(n){var t=this,e=n.route,r=n.wsUrl;e&&this.update({route:e}),r&&this.update({wsUrl:r}),this.keepaliveTid=setInterval((function(){return t._keepalive()}),1e4),this._listenToGlobalExceptions(e),this._setupServiceWorker(e)}},{key:"update",value:function(n){var t=this.wantNotifications;return m(i(a.prototype),"update",this).call(this,n),n.wantNotifications&&!t&&this.notify(null,pe("You have enabled notifications."),{force:!0}),this}},{key:"_dispatch",value:function(n){var t=("wsEvent_"+this._getEventNameFromParam(n)).replace(/_(\w)/g,(function(n,t){return t.toUpperCase()}));this.debug>=2&&console.log("[dispatch:"+t+"]",n),"wsEventError"!=t&&(this._wsReconnectDelay=0);var e=this.messageCb[n.id];n.bubbles=!0,n.dispatchTo=t,n.stopPropagation=function(){n.bubbles=!1},e&&e(n),n.bubbles&&this.emit("message",n),this.emit(t,n)}},{key:"_getEventNameFromParam",value:function(n){return n.errors?"error":"state"==n.event?n.type:"sent"==n.event&&n.message.match(/\/\S+/)?(n.command=n.message.split(/\s+/).filter((function(n){return n.length})),n.command[0]=n.command[0].substring(1),"sent_"+n.command[0]):n.event}},{key:"_hasFocus",value:function(){return document.hasFocus()}},{key:"_keepalive",value:function(){this._send({method:"ping"})}},{key:"_listenToGlobalExceptions",value:function(){var n=this;window.addEventListener("error",(function(t){var e=t.colno,r=t.error,o=t.filename,i=t.lineno,a=t.message,c=t.type,u=t.timeStamp;n.emit("error",{type:c,colno:e,error:r,filename:o,lineno:i,message:a,timeStamp:u})})),window.addEventListener("unhandledrejection",(function(t){var e=t.type,r=t.reason,o=t.returnValue,i=t.timeStamp;n.emit("error",{type:e,reason:r,returnValue:o,timeStamp:i})}))}},{key:"_notification",value:function(n,t){var e={permission:"denied"};try{return window.Notification?n?new Notification(n,t):Notification:e}catch(n){return e.error=n,e}}},{key:"_send",value:function(n){var t=this.ws&&1==this.ws.readyState&&this.ws;return t&&t.send(JSON.stringify(n)),!!t}},{key:"_setupServiceWorker",value:function(n){var t=this;return navigator.serviceWorker&&navigator.serviceWorker.register(n.urlFor("/sw.js")).then((function(n){return t.emit("serviceWorker",n)}))}},{key:"_ws",value:function(){var n=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dequeue";this.emit(t),"dequeue"==t&&this._wsReconnectTid&&(clearTimeout(this._wsReconnectTid),delete this._wsReconnectTid),"close"==t?(this._wsReconnectDelay=this._wsReconnectDelay>5e3?500:(this._wsReconnectDelay||0)+500,this._wsReconnectTid||(this._wsReconnectTid=setTimeout((function(){return n._ws()}),this._wsReconnectDelay)),delete this.ws):this.ws?this.wsSendQueue=this.wsSendQueue.filter((function(t){return!n._send(t)})):this.wsUrl&&(this.ws=new WebSocket(this.wsUrl),this.ws.onopen=function(){return n._ws("open")},this.ws.onclose=function(){return n._ws("close")},this.ws.onerror=function(){return n._ws("close")},this.ws.onmessage=function(t){return n._dispatch(JSON.parse(t.data))})}}]),a}($t));function gi(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function vi(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?gi(Object(e),!0).forEach((function(t){Xn(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):gi(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function $i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var yi=new RegExp("^[#&]"),bi=function(n,t){return t.modes.operator||!1-n.modes.operator||t.modes.voice||!1-n.modes.voice||n.name.localeCompare(t.name)},wi=0,_i=function(t){c(s,t);var e,r,a,u=(e=s,function(){var n,t=i(e);if($i()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function s(t){var e;return n(this,s),(e=u.call(this)).prop("ro","_participants",new ui([],{sorter:bi})),e.prop("ro","api",t.api),e.prop("ro","color",pt(t.dialog_id||t.connection_id||"")),e.prop("ro","connection_id",t.connection_id||""),e.prop("ro","is_private",(function(){return e.dialog_id&&!yi.test(e.name)})),e.prop("ro","omnibus",t.omnibus||mi),e.prop("ro","path",ne.dialogPath(t)),e.prop("rw","endOfHistory",!1),e.prop("rw","errors",0),e.prop("rw","first_time",!1),e.prop("rw","last_active",new Pt(t.last_active)),e.prop("rw","last_read",new Pt(t.last_read)),e.prop("rw","messages",[]),e.prop("rw","modes",{}),e.prop("rw","name",t.name||t.dialog_id||t.connection_id||"ERR"),e.prop("rw","status","pending"),e.prop("rw","topic",t.topic||""),e.prop("rw","unread",t.unread||0),t.hasOwnProperty("dialog_id")?(e.prop("ro","dialog_id",t.dialog_id),e.prop("ro","title",(function(){return[e.name,e.connection_id].join(" - ")})),e.prop("rw","frozen",t.frozen||"")):(e.prop("ro","frozen",(function(){return e._calculateFrozen()})),e.prop("ro","title",(function(){return e.name}))),t.dialog_id&&e.prop("persist","wantNotifications",!1,{key:t.dialog_id+":wantNotifications",lazy:!0}),e._addOperations(),e}return E(s,[{key:"addMessage",value:function(n){if(n.from&&-1!=["action","error","private"].indexOf(n.type)){if(n.highlight||this.is_private||this.wantNotifications){var t=n.from==this.name?n.from:pe("%1 in %2",n.from,this.name);this.omnibus.notify(t,n.message)}this.update({unread:this.unread+1})}return this.addMessages("push",[n])}},{key:"addMessages",value:function(n,t){var e=0,r=t.length;switch(n){case"push":e=this.messages.length,r=(t=this.messages.concat(t)).length;break;case"unshift":t=t.concat(this.messages)}for(var o=e;o<r;o++){var i=t[o];if(!i.hasOwnProperty("markdown")){if(!i.from){var a=[!0,this.connection_id||"Convos","Convos"];i.internal=a[0],i.from=a[1],i.fromId=a[2]}i.fromId||(i.fromId=i.from.toLowerCase()),i.type||(i.type="notice"),i.vars&&(i.message=pe.apply(void 0,[i.message].concat(x(i.vars)))),i.id="msg_"+ ++wi,i.color="Convos"==i.fromId?"inherit":pt(i.from.toLowerCase()),i.ts=new Pt(i.ts),i.embeds=(i.message.match(/https?:\/\/(\S+)/g)||[]).map((function(n){return n.replace(/(\W)?$/,"")})),i.markdown=de(i.message)}}return this.update({messages:t}),this}},{key:"is",value:function(n){return"connection"==n?!this.dialog_id:"conversation"==n?this.dialog_id&&!this.is("notifications"):"frozen"==n?this.frozen&&!0:"locked"==n?"Invalid password."==this.frozen:"notifications"!=n&&("private"==n?this.is_private:"search"!=n&&("unread"==n?this.unread&&!0:this.status==n))}},{key:"load",value:(a=Jn(Qn.mark((function n(){var t,e,r,o,i,a=this,c=arguments;return Qn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},this.messagesOp&&!this.is("loading")){n.next=3;break}return n.abrupt("return",this);case 3:if(!(e="maybe"==t.after?"after":"maybe"==t.before?"before":"")||!this.is("success")){n.next=6;break}return n.abrupt("return",this);case 6:if("after"==e&&delete this.participantsLoaded,"maybe"!=(r=vi({},t,{connection_id:this.connection_id,dialog_id:this.dialog_id})).after||r.limit||(r.limit=200),["after","before"].forEach((function(n){if("maybe"==r[n]&&(r[n]=a._realMessage("before"==n?0:-1)),"number"==typeof r[n]&&(r[n]=a._realMessage(r[n])),at(r[n],"object")&&(r[n]=r[n].ts.toISOString()),at(r[n],"undef"))return delete r[n]})),!((o=this.messages.length)&&r.before&&this.endOfHistory)){n.next=13;break}return n.abrupt("return");case 13:return this.update({status:"loading"}),n.next=16,this.messagesOp.perform(r);case 16:if(i=this.messagesOp.res.body,this.addMessages(r.before?"unshift":"push",i.messages||[]),this.update({status:this.messagesOp.status}),this.messages.length<=10&&this.update({first_time:!0}),o&&r.before&&i.end&&this.update({endOfHistory:!0}),"after"!=e||i.end){n.next=25;break}return this.update({messages:[]}),n.next=25,this.load({});case 25:return n.abrupt("return",this);case 26:case"end":return n.stop()}}),n,this)}))),function(){return a.apply(this,arguments)})},{key:"findParticipant",value:function(n){return this._participants.get(this._participantId(at(n,"undef")?"":n))}},{key:"participants",value:function(){var n=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.forEach((function(t){t.nick||(t.nick=t.name||"");var e=n._participantId(t.nick),r=n._participants.get(e);r&&(Object.keys(t).forEach((function(n){r[n]=t[n]})),t=r),t.modes||(t.modes={}),n._calculateModes(di,t.mode,t.modes),n._participants.set(e,vi({name:t.nick},t,{color:pt(e),id:e,ts:new Pt}))})),t.length&&this.update({_participants:!0}),this._participants.toArray()}},{key:"send",value:function(n,t){this.omnibus.send({connection_id:this.connection_id,dialog_id:this.dialog_id||"",message:n},"function"==typeof t?t:t?this[t].bind(this):null)}},{key:"setLastRead",value:(r=Jn(Qn.mark((function n(){return Qn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.setLastReadOp){n.next=2;break}return n.abrupt("return");case 2:return this.update({errors:0,unread:0}),n.next=5,this.setLastReadOp.perform({connection_id:this.connection_id,dialog_id:this.dialog_id});case 5:this.update(this.setLastReadOp.res.body||{});case 6:case"end":return n.stop()}}),n,this)}))),function(){return r.apply(this,arguments)})},{key:"update",value:function(n){return this._loadParticipants(),m(i(s.prototype),"update",this).call(this,n)}},{key:"wsEventMode",value:function(n){n.nick?(this.participants([{nick:n.nick,mode:n.mode}]),this.addMessage({message:"%1 got mode %2 from %3.",vars:[n.nick,n.mode,n.from]})):this.update({modes:this._calculateModes(si,n.mode,this.modes)})}},{key:"wsEventNickChange",value:function(n){var t=this._participantId(n.old_nick);if(this._participants.has(t)&&n.old_nick!=n.new_nick){this._participants.delete(t),this.participants([{nick:n.new_nick}]);var e="me"==n.type?"You (%1) changed nick to %2.":"%1 changed nick to %2.";this.addMessage({message:e,vars:[n.old_nick,n.new_nick]})}}},{key:"wsEventPart",value:function(n){var t=this.findParticipant(n.nick);t&&!t.me&&(this._participants.delete(this._participantId(n.nick)),this.update({_participants:!0}),this.addMessage(this._partMessage(n)))}},{key:"wsEventSentClear",value:function(n){n.errors||(this.update({messages:[]}),this.addMessage({message:"History was cleared for %1.",vars:[this.name]}))}},{key:"wsEventSentNames",value:function(n){this._updateParticipants(n);var t={message:"Participants (%1): %2",vars:[]},e=this._participants.toArray().map((function(n){return(fi[n.mode]||n.mode||"")+n.name}));e.length>1&&(t.message+=" and %3.",t.vars[2]=e.pop()),t.vars[0]=e.length,t.vars[1]=e.join(", "),this.addMessage(t)}},{key:"wsEventSentTopic",value:function(n){var t=n.topic?"Topic for %1 is: %2":"No topic is set for %1.";this.addMessage({message:t,vars:[this.name,n.topic]}),this.update({topic:n.topic})}},{key:"_addOperations",value:function(){this.prop("ro","messagesOp",this.api.operation("dialogMessages")),this.prop("ro","setLastReadOp",this.api.operation("setDialogLastRead"))}},{key:"_calculateModes",value:function(n,t,e){var r=(t||"").match(/^(\+|-)?(.*)/)||["","+",""],o=p(r,3),i=(o[0],o[1]);o[2].split("").forEach((function(t){e[n[t]||t]="-"!=i}))}},{key:"_calculateFrozen",value:function(){return""}},{key:"_loadParticipants",value:function(){if(!this.participantsLoaded&&this.dialog_id&&this.messagesOp&&!this.is("frozen")&&this.messagesOp.is("success"))return this.participantsLoaded=!0,this.is_private?this.send("/ison","_noop"):this.send("/names","_updateParticipants")}},{key:"_noop",value:function(){}},{key:"_participantId",value:function(n){return n.toLowerCase()}},{key:"_partMessage",value:function(n){var t={message:"%1 parted.",vars:[n.nick]};return n.kicker?(t.message="%1 was kicked by %2"+(n.message?": %3":""),t.vars.push(n.kicker),t.vars.push(n.message)):n.message&&(t.message+=" Reason: %2",t.vars.push(n.message)),t}},{key:"_realMessage",value:function(n){for(var t=-1==n?-1:1,e=this.messages,r=-1==n?this.messages.length-1:0;e[r];){if(!e[r].internal)return e[r];r+=t}return null}},{key:"_updateParticipants",value:function(n){this._participants.clear(),this.participants(n.participants),n.stopPropagation()}}]),s}($t);function xi(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function ki(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?xi(Object(e),!0).forEach((function(t){Xn(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):xi(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function Ei(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Oi=function(n,t){return(n.is_private||0)-(t.is_private||0)||n.name.localeCompare(t.name)},Ci=function(t){c(a,t);var e,r=(e=a,function(){var n,t=i(e);if(Ei()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function a(t){var e;n(this,a),(e=r.call(this,t)).prop("ro","dialogs",new ui([],{sorter:Oi})),e.prop("rw","on_connect_commands",t.on_connect_commands||""),e.prop("rw","state",t.state||"queued"),e.prop("rw","wanted_state",t.wanted_state||"connected"),e.prop("rw","url","string"==typeof t.url?new Ht(t.url):t.url||new Ht("convos://loopback"));var o=t.me||{},i=o.nick||e.url.searchParams.get("nick")||"";return e.prop("rw","nick",i),e.prop("rw","real_host",o.real_host||e.url.hostname),e.participants([{nick:i}]),e}return E(a,[{key:"ensureDialog",value:function(n){var t=this,e=this.dialogs.get(n.dialog_id);return e?e.update(n):((e=new _i(ki({},n,{connection_id:this.connection_id,api:this.api}))).on("message",(function(n){return t.emit("message",n)})),e.on("update",(function(){return t.update({dialogs:!0})})),this._addDefaultParticipants(e),this.dialogs.set(e.dialog_id,e),this.update({dialogs:!0}),this.emit("dialogadd",e),e)}},{key:"findDialog",value:function(n){return this.dialogs.get(n.dialog_id)||null}},{key:"is",value:function(n){return this.state==n||m(i(a.prototype),"is",this).call(this,n)}},{key:"removeDialog",value:function(n){var t=this.findDialog(n)||n;return this.dialogs.delete(t.dialog_id),this.emit("dialogremove",t),this.update({dialogs:!0})}},{key:"update",value:function(n){return n.url&&"string"==typeof n.url&&(n.url=new Ht(n.url)),m(i(a.prototype),"update",this).call(this,n)}},{key:"wsEventConnection",value:function(n){this.update({state:n.state}),this.addMessage(n.message?{message:"Connection state changed to %1: %2",vars:[n.state,n.message]}:{message:"Connection state changed to %1.",vars:[n.state]})}},{key:"wsEventFrozen",value:function(n){var t=this.findDialog(n),e=t&&t.frozen;this.ensureDialog(n).participants([{nick:this.nick,me:!0}]),n.frozen&&(t||this).addMessage({message:n.frozen,vars:[]}),e&&!n.frozen&&t.addMessage({message:"Connected.",vars:[]})}},{key:"wsEventMe",value:function(n){this.wsEventNickChange(n),this.update(n)}},{key:"wsEventMessage",value:function(n){return n.dialog_id?this.ensureDialog(n).addMessage(n):this.addMessage(n)}},{key:"wsEventNickChange",value:function(n){var t={old_nick:n.old_nick||this.nick,new_nick:n.new_nick||n.nick,type:n.type};n.old_nick==this.nick&&(t.me=!0),m(i(a.prototype),"wsEventNickChange",this).call(this,t),this.dialogs.forEach((function(n){return n.wsEventNickChange(t)}))}},{key:"wsEventError",value:function(n){var t={message:rt(n)||n.frozen||"Unknown error from %1.",sent:n,type:"error",vars:n.command||[n.message]},e=(n.message||"").match(/^\/j(oin)? (\S+)/);if(e)return this.ensureDialog(ki({},n,{dialog_id:e[2]}));var r=n.dialog_id&&n.frozen?this.ensureDialog(n):this.findDialog(n)||this;r.update({errors:this.errors+1}),r.addMessage(t)}},{key:"wsEventJoin",value:function(n){var t=this.ensureDialog(n),e=n.nick||this.nick;e!=this.nick&&t.addMessage({message:"%1 joined.",vars:[e]}),t.participants([{nick:e}])}},{key:"wsEventPart",value:function(n){if(n.nick==this.nick)return this.removeDialog(n);n.dialog_id||this.dialogs.forEach((function(t){return t.wsEventPart(n)}))}},{key:"wsEventQuit",value:function(n){this.wsEventPart(n)}},{key:"wsEventSentJoin",value:function(n){this.wsEventJoin(n)}},{key:"wsEventSentList",value:function(n){var t=n.args||"/*/";this.addMessage(n.done?{message:"Found %1 of %2 dialogs from %3.",vars:[n.dialogs.length,n.n_dialogs,t]}:{message:"Found %1 of %2 dialogs from %3, but dialogs are still loading.",vars:[n.dialogs.length,n.n_dialogs,t]})}},{key:"wsEventSentMode",value:function(n){var t=this.findDialog(n)||this,e=(n.command[1]||"").match(/(\W*)(\w)$/);if(!e)return console.log("[wsEventSentMode] Unable to handle message:",n);switch(e.shift(),e[1]){case"":return t.addMessage({message:"%s has mode %s",vars:[n.dialog_id,n.mode]});case"k":return t.addMessage({message:"+"==e[0]?"Key was set.":"Key was unset."});case"b":return this._wsEventSentModeB(n,e)}}},{key:"_wsEventSentModeB",value:function(n,t){var e=this.findDialog(n)||this;if(n.banlist)n.banlist.length||e.addMessage({message:"Ban list is empty."}),n.banlist.forEach((function(n){e.addMessage({message:"Ban mask %1 set by %2 at %3.",vars:[n.mask,n.by,new Date(1e3*n.ts).toLocaleString()]})}));else{var r="+"==t[0]?"set":"removed";e.addMessage({message:"Ban mask %1 ".concat(r,"."),vars:[n.command[2]]})}}},{key:"wsEventSentQuery",value:function(n){this.ensureDialog(n)}},{key:"wsEventSentWhois",value:function(n){var t="%1 (%2)",e=[n.nick,n.host],r=Object.keys(n.channels).sort().map((function(t){return(fi[n.channels[t].mode]||"")+t}));n.channels=r,n.idle_for&&r.length?(t+=" has been idle for %3s in %4.",e.push(n.idle_for),e.push(r.join(", "))):n.idle_for&&!r.length?(t+="has been idle for %3s, and is not in any channels.",e.push(n.idle_for)):r.length?(t+=" is active in %3.",e.push(r.join(", "))):t+=" is not in any channels.",(this.findDialog(n)||this).addMessage({message:t,vars:e,sent:n})}},{key:"_addDefaultParticipants",value:function(n){var t=[{nick:this.nick,me:!0}];n.is_private&&t.push({nick:n.name}),n.participants(t)}},{key:"_addOperations",value:function(){this.prop("ro","setLastReadOp",this.api.operation("setConnectionLastRead")),this.prop("ro","messagesOp",this.api.operation("connectionMessages"))}},{key:"_calculateFrozen",value:function(){switch(this.state){case"connected":return"";case"disconnected":return"Disconnected.";case"unreachable":return"Unreachable.";default:return"Connecting..."}}}]),a}(_i),Ri=e((function(n){function t(n){for(var t=document.createElement("div"),e=[[n,t]],o=[];e.length;){var i=e.shift(),a=p(i,2),c=a[0],u=a[1],s=void 0,f=void 0,d=r(c);if(null===c||"undefined"==d?d="null":Array.isArray(c)&&(d="array"),"array"==d?((f=function(n){return n}).len=c.length,(s=document.createElement("div")).className="json-array "+(f.len?"has-items":"is-empty")):"object"==d?function(){var n=Object.keys(c).sort();(f=function(t){return n[t]}).len=n.length,(s=document.createElement("div")).className="json-object "+(f.len?"has-items":"is-empty")}():((s=document.createElement("span")).className="json-"+d,s.textContent="null"==d?"null":"boolean"!=d?c:c?"true":"false"),f){var l=document.createElement("span");if(l.className="json-type",l.textContent=f.len?d+"["+f.len+"]":"{}",u.appendChild(l),-1!=o.indexOf(c))t.classList.add("has-recursive-items"),s.classList.add("is-seen");else{for(var h=0;h<f.len;h++){var m=f(h),g=document.createElement("div"),v=document.createElement("span");v.className="json-key",v.textContent=m,g.appendChild(v),s.appendChild(g),e.push([c[m],g])}o.push(c)}}u.className="json-item "+s.className.replace(/^json-/,"contains-"),u.appendChild(s)}return t}try{n.exports={jsonhtmlify:t}}catch(n){window.jsonhtmlify=t}})).jsonhtmlify;function Si(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function Ni(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Di=function(t){c(a,t);var e,r=(e=a,function(){var n,t=i(e);if(Ni()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function a(t){var e;return n(this,a),(e=r.call(this)).name="EmbedMaker",e.prop("persist","disableInstagram",!1),e.prop("persist","disableTwitter",!1),e.prop("persist","expandUrlToMedia",!0),e.prop("ro","api",t.api),e.prop("ro","embeds",{}),e}return E(a,[{key:"render",value:function(n,t){var e=this;if(this.expandUrlToMedia){var r={};st(n,".message__embed",(function(n){r[n.dataset.url]=n})),t.forEach((function(t){e.embeds[t]||e._loadAndRender(t),r[t]||n.appendChild(e._ensureEmbedEl(t)),delete r[t]})),Object.keys(r).forEach((function(n){return r[n].remove()}))}}},{key:"renderInstagram",value:function(n){if(!this.disableInstagram)return window.instgrm?window.instgrm.Embeds.process():void ct("//platform.instagram.com/en_US/embeds.js")}},{key:"renderPasteEl",value:function(n){ro.highlightBlock(n.querySelector("pre")),st(n,".le-meta",(function(n){n.addEventListener("click",(function(){return n.parentNode.classList.toggle("is-expanded")}))}))}},{key:"renderPhoto",value:function(n){var t=this;st(n,"img",(function(n){return n.addEventListener("click",(function(e){e.preventDefault(),t.showMedia(n)}))}))}},{key:"renderTwitter",value:function(n){this.disableTwitter||(window.twttr&&window.twttr.widgets.load(),ct("//platform.twitter.com/widgets.js"))}},{key:"showMedia",value:function(n){var t=et(document.querySelector("body"),"fullscreen-media-wrapper",(function(n){n.addEventListener("click",(function(t){return lt(n,t.target!=n)}))}));!function(n){for(;n.firstChild;)n.removeChild(n.firstChild)}(t),t.appendChild(n.cloneNode()),lt(t,!0)}},{key:"toggleDetails",value:function(n,t){var e=n.querySelector(".has-message-details");if(e)return lt(e,"toggle");var r=function(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?Si(Object(e),!0).forEach((function(t){Xn(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Si(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}({},t.sent||t);["bubbles","color","command","dispatchTo","embeds","event","fromId","id","markdown","method","stopPropagation"].forEach((function(n){return delete r[n]})),r.ts=t.ts.toLocaleString(),(e=Ri(r.sent||r)).className=["message__embed","has-message-details",e.className].join(" "),n.appendChild(e)}},{key:"_bufAsBase64",value:function(n){var t=new Uint8Array(n).reduce((function(n,t){return n+String.fromCharCode(t)}),"");return window.btoa(t)}},{key:"_ensureEmbedEl",value:function(n){return this.embeds[n].el||(this.embeds[n].el=et(null,"message__embed",(function(t){t.dataset.url=n})))}},{key:"_loadAndRender",value:function(n){var t=this;return this.embeds[n]={},this.api.operation("embed",{url:n}).perform().then((function(e){var r=e.res.body;if(r.html){var o=t._ensureEmbedEl(n);o.innerHTML=r.html,st(o,"a",(function(n){n.target="_blank"})),st(o,"img",(function(n){return t._processImage(n)}));var i=(r.provider_name||"").toLowerCase();if("instagram"==i)return t.renderInstagram(o);if("twitter"==i)return t.renderTwitter(o);if(-1!=(o.firstChild.className||"").split(/\s+/).indexOf("le-paste"))return t.renderPasteEl(o);st(o,".le-photo, .le-thumbnail",(function(n){return t.renderPhoto(o)}))}}))}},{key:"_processImage",value:function(n){var t=this;if(!function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location;return 0==n.indexOf("/")||-1!=n.indexOf("://"+t.hostname)}(n.src))return n.addEventListener("error",(function(){return n.style.display="none"}));n.originalSource=n.src,n.src="",n.style.visibility="hidden",fetch(n.originalSource).then((function(e){var r=e.headers.get("Content-Type");return r?e.arrayBuffer().then((function(e){return t._renderImage(n,e,{contentType:r})})):t._renderImage(n,new ArrayBuffer(0),{})}))}},{key:"_renderImage",value:function(n,t,e){var r=e.contentType,o={1:0,3:180,6:90,8:270},i=new DataView(t);if(!r||t.length<2||65496!=i.getUint16(0))return n.src=n.originalSource,void(n.style.visibility="visible");for(var a=i.byteLength,c=2;c<a-2&&!n.orientation;){var u=i.getUint16(c);switch(c+=2,u){case 65505:a=i.getUint16(c)+c,c+=2;break;case 274:n.orientation=o[i.getUint16(c+6,!1)]}}void 0!==n.orientation&&(n.style.transform="rotate("+n.orientation+"deg)"),n.src="data:"+r+";base64,"+this._bufAsBase64(t),n.style.visibility="visible"}}]),a}($t);function Pi(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function Mi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var ji=function(t){c(u,t);var e,r,a=(e=u,function(){var n,t=i(e);if(Mi()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function u(t){return n(this,u),a.call(this,function(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?Pi(Object(e),!0).forEach((function(t){Xn(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Pi(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}({},t,{connection_id:"",dialog_id:"notifications",is_private:!0,name:"Notifications"}))}return E(u,[{key:"is",value:function(n){return"notifications"==n||m(i(u.prototype),"is",this).call(this,n)}},{key:"load",value:(r=Jn(Qn.mark((function n(){var t,e=arguments;return Qn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.length>0&&void 0!==e[0]?e[0]:{},this.messagesOp&&!this.is("loading")){n.next=3;break}return n.abrupt("return",this);case 3:if("after"!=("maybe"==t.after?"after":"maybe"==t.before?"before":"")||!this.is("success")){n.next=6;break}return n.abrupt("return",this);case 6:return this.messagesOp.update({status:"pending"}),this.update({messages:[]}),n.next=10,m(i(u.prototype),"load",this).call(this);case 10:case"end":return n.stop()}}),n,this)}))),function(){return r.apply(this,arguments)})},{key:"send",value:function(){}},{key:"_addOperations",value:function(){this.prop("ro","messagesOp",this.api.operation("notificationMessages")),this.prop("ro","setLastReadOp",this.api.operation("readNotifications"))}}]),u}(_i);function Ai(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function Ti(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?Ai(Object(e),!0).forEach((function(t){Xn(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Ai(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function Li(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Ui=function(t){c(u,t);var e,r,a=(e=u,function(){var n,t=i(e);if(Li()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function u(t){var e;return n(this,u),(e=a.call(this,Ti({},t,{connection_id:"",dialog_id:"search",is_private:!0,name:"Search"}))).prop("rw","query",null),e.update({status:"success"}),e}return E(u,[{key:"is",value:function(n){return"conversation"!=n&&("search"==n||m(i(u.prototype),"is",this).call(this,n))}},{key:"load",value:(r=Jn(Qn.mark((function n(t){var e,r;return Qn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.is("loading")){n.next=2;break}return n.abrupt("return",this);case 2:if((e=Ti({},t)).match=t.match||t.message,null==e.match&&(e.match=""),e.match=e.match.replace(/\s*conversation:(\S+)\s*/,(function(n,t){return[" ",e.dialog_id=t][0]})).replace(/\s*([&#]\S+)\s*/,(function(n,t){return[" ",e.dialog_id=t][0]})),e.match=e.match.trim(),e.match.match(/\S/)){n.next=9;break}return n.abrupt("return",this);case 9:return this.update({messages:[],query:e.match,status:"loading"}),n.next=12,this.messagesOp.perform(e);case 12:return r=this.messagesOp.res.body,this.addMessages(e.before?"unshift":"push",r.messages||[]),n.abrupt("return",this.update({status:this.messagesOp.status}));case 15:case"end":return n.stop()}}),n,this)}))),function(n){return r.apply(this,arguments)})},{key:"send",value:function(n){return this.load(Ti({},n,{match:n.messages}))}},{key:"_addOperations",value:function(){this.prop("ro","messagesOp",this.api.operation("searchMessages")),this.prop("ro","setLastReadOp",null)}},{key:"_loadParticipants",value:function(){}}]),u}(_i);function Ii(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function zi(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?Ii(Object(e),!0).forEach((function(t){Xn(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Ii(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function Bi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var qi=function(t){c(u,t);var e,r,a=(e=u,function(){var n,t=i(e);if(Bi()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function u(t){var e;n(this,u),e=a.call(this);var r=t.api;e.prop("ro","api",(function(){return r})),e.prop("ro","connections",new ui),e.prop("ro","email",(function(){return e.getUserOp.res.body.email||""})),e.prop("ro","embedMaker",new Di({api:r})),e.prop("ro","isFirst",t.isFirst||!1),e.prop("ro","getUserOp",r.operation("getUser",{connections:!0,dialogs:!0})),e.prop("ro","notifications",new ji({api:r})),e.prop("ro","omnibus",t.omnibus||mi),e.prop("ro","search",new Ui({api:r})),e.prop("ro","roles",new Set),e.prop("ro","themes",t.themes||{}),e.prop("ro","unread",(function(){return e._calculateUnread()})),e.prop("rw","activeDialog",e.notifications),e.prop("rw","highlight_keywords",[]),e.prop("rw","status","pending"),e.prop("persist","assetVersion",0),e.prop("persist","colorScheme","auto"),e.prop("persist","experimentalLoad",!1),e.prop("persist","showGrid",!1),e.prop("persist","theme","convos");var o=window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):{addListener:function(){}};return o.matches&&(e._osColorScheme="dark"),o.addListener((function(n){e._osColorScheme=n.matches?"dark":"light"})),e._listenToOmnibus(),e}return E(u,[{key:"activateTheme",value:function(){var n="auto"==this.colorScheme?this._osColorScheme:this.colorScheme,t=this.themes[this.theme];if(!t)return console.error("[Convos] Invalid theme: "+this.theme);var e=t.color_schemes[n]||t.color_schemes.default;document.getElementById("link_selected_theme").setAttribute("href",ne.urlFor("/themes/"+e));var r=document.documentElement;r.className=r.className.replace(/theme-\S+/,(function(){return"theme-"+t.id}))}},{key:"dialogs",value:function(n){var t=[];return this.connections.toArray().forEach((function(e){e.dialogs.toArray().forEach((function(e){n&&!n(e)||t.push(e)}))})),t}},{key:"ensureDialog",value:function(n,t){var e=this;if(n.dialog_id){var r=this.ensureDialog({connection_id:n.connection_id},!0);return this._maybeUpgradeActiveDialog(r.ensureDialog(n))}var o=this.findDialog(n);return o?o.update(n):((o=new Ci(zi({},n,{api:this.api}))).on("dialogadd",(function(n){return e._maybeUpgradeActiveDialog(n)})),o.on("dialogremove",(function(n){return n==e.activeDialog&&e.setActiveDialog(n)})),o.on("update",(function(n){return e.update({connections:!0})})),this.connections.set(o.connection_id,o),this.update({connections:!0}),t?o:this._maybeUpgradeActiveDialog(o))}},{key:"findDialog",value:function(n){var t=this.connections.get(n.connection_id);return n.dialog_id?t&&t.findDialog(n)||null:t}},{key:"is",value:function(n){var t=this;return Array.isArray(n)?!!n.filter((function(n){return t.is(n)})).length:!!this.roles.has(n)||("offline"==n?"fetch"==rt(this.getUserOp.err||[],"source"):this.status==n)}},{key:"load",value:(r=Jn(Qn.mark((function n(t){var e,r,o=this;return Qn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!1!==t){n.next=4;break}return this.roles.add("anonymous"),this.update({roles:!0}),n.abrupt("return",this);case 4:if(!this.is("loading")){n.next=6;break}return n.abrupt("return",this);case 6:return this.update({status:"loading"}),n.next=9,this.getUserOp.perform();case 9:return e=this.getUserOp.res.body,r={},this.experimentalLoad||this.connections.clear(),(e.connections||[]).forEach((function(n){return r[o.ensureDialog(zi({},n,{status:"pending"})).path]=!0})),(e.dialogs||[]).forEach((function(n){return r[o.ensureDialog(zi({},n,{status:"pending"})).path]=!0})),this.connections.forEach((function(n){if(!r[n.path])return o.connections.delete(n.connection_id);n.dialogs.forEach((function(t){r[t.path]||n.dialogs.delete(t.dialog_id)}))})),this.notifications.update({unread:e.unread||0}),this.roles.clear(),this.roles.add(e.email?"authenticated":"anonymous"),(e.roles||[]).forEach((function(n){return o.roles.add(n)})),this.email&&this.omnibus.send("ping"),this.update({highlight_keywords:e.highlight_keywords||[],roles:!0,status:this.getUserOp.status}),n.abrupt("return",this);case 22:case"end":return n.stop()}}),n,this)}))),function(n){return r.apply(this,arguments)})},{key:"removeDialog",value:function(n){var t=this.findDialog({connection_id:n.connection_id});if(n.dialog_id)return t&&t.removeDialog(n);this.connections.delete(n.connection_id),t==this.activeDialog&&this.setActiveDialog(t),this.update({connections:!0})}},{key:"setActiveDialog",value:function(n){var t=!n.connection_id&&!n.dialog_id&&this.notifications;if(t)return this.update({activeDialog:t});if(t=this.findDialog(n))return this.update({activeDialog:t});var e=zi({},n,{connection_id:n.connection_id||"",api:this.api,frozen:"Not found."});return["dialog_id","name"].forEach((function(t){return n.hasOwnProperty(t)&&(e[t]=n[t])})),this.update({activeDialog:e.dialog_id?new _i(e):new Ci(e)})}},{key:"update",value:function(n){return m(i(u.prototype),"update",this).call(this,n),(n.colorScheme||n.theme)&&this.activateTheme(),this}},{key:"wsEventPong",value:function(n){this.wsPongTimestamp=n.ts}},{key:"_calculateUnread",value:function(){return this.notifications.unread+this.dialogs((function(n){return n.is_private})).reduce((function(n,t){return n+t.unread}),0)}},{key:"_dispatchMessageToDialog",value:function(n){var t=this.findDialog({connection_id:n.connection_id});if(t&&(t[n.dispatchTo]&&t[n.dispatchTo](n),n.bubbles)){var e=t.findDialog(n);e&&e[n.dispatchTo]&&e[n.dispatchTo](n)}}},{key:"_listenToOmnibus",value:function(){var n=this;this.omnibus.on("close",(function(){n.connections.forEach((function(n){return n.update({state:"unreachable"})})),n.update({status:"pending"})})),this.omnibus.on("open",(function(){if(n.is("pending")&&n.email)return n.load()})),this.omnibus.on("message",(function(t){n._dispatchMessageToDialog(t),n.emit(t.dispatchTo,t),n[t.dispatchTo]&&n[t.dispatchTo](t)})),this.omnibus.on("serviceWorker",(function(t){var e=process.env.asset_version;n.omnibus.debug&&console.log("[serviceWorker]",[n.assetVersion,e].join(" == ")),n.assetVersion!=e&&(t.update(),n.update({assetVersion:e}))}))}},{key:"_maybeUpgradeActiveDialog",value:function(n){var t=this.activeDialog;return n.connection_id&&n.connection_id!=t.connection_id||n.dialog_id&&n.dialog_id!=t.dialog_id||this.update({activeDialog:n}),n}}]),u}($t);function Hi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Fi(n){var t,e,r,o,i,a,c,u,s=pe('Do you want to chat with "%1"?',n[0].dialog_id)+"",f=new Tt({props:{type:"button",icon:"thumbs-up",$$slots:{default:[Gi]},$$scope:{ctx:n}}});f.$on("click",n[2]);var d=new kr({props:{href:"/chat",class:"btn",$$slots:{default:[Wi]},$$scope:{ctx:n}}});return{c:function(){(t=W("h2")).textContent="".concat(pe("You are not part of this conversation.")),e=Y(),r=W("p"),o=V(s),i=Y(),a=W("p"),Fn(f.$$.fragment),c=Y(),Fn(d.$$.fragment)},m:function(n,s){F(n,t,s),F(n,e,s),F(n,r,s),H(r,o),F(n,i,s),F(n,a,s),Kn(f,a,null),H(a,c),Kn(d,a,null),u=!0},p:function(n,t){(!u||1&t)&&s!==(s=pe('Do you want to chat with "%1"?',n[0].dialog_id)+"")&&tn(o,s);var e={};8&t&&(e.$$scope={dirty:t,ctx:n}),f.$set(e);var r={};8&t&&(r.$$scope={dirty:t,ctx:n}),d.$set(r)},i:function(n){u||(Un(f.$$.fragment,n),Un(d.$$.fragment,n),u=!0)},o:function(n){In(f.$$.fragment,n),In(d.$$.fragment,n),u=!1},d:function(n){n&&K(t),n&&K(e),n&&K(r),n&&K(i),n&&K(a),Gn(f),Gn(d)}}}function Ki(n){var t,e,r,o,i,a,c,u,s=pe('Do you want to create the connection "%1"?',n[0].connection_id)+"",f=new kr({props:{href:"/settings/connection?server="+encodeURIComponent(n[0].connection_id)+"&dialog="+encodeURIComponent(n[0].dialog_id),class:"btn",$$slots:{default:[Vi]},$$scope:{ctx:n}}}),d=new kr({props:{href:"/chat",class:"btn",$$slots:{default:[Yi]},$$scope:{ctx:n}}});return{c:function(){(t=W("h2")).textContent="".concat(pe("Connection does not exist.")),e=Y(),r=W("p"),o=V(s),i=Y(),a=W("p"),Fn(f.$$.fragment),c=Y(),Fn(d.$$.fragment)},m:function(n,s){F(n,t,s),F(n,e,s),F(n,r,s),H(r,o),F(n,i,s),F(n,a,s),Kn(f,a,null),H(a,c),Kn(d,a,null),u=!0},p:function(n,t){(!u||1&t)&&s!==(s=pe('Do you want to create the connection "%1"?',n[0].connection_id)+"")&&tn(o,s);var e={};1&t&&(e.href="/settings/connection?server="+encodeURIComponent(n[0].connection_id)+"&dialog="+encodeURIComponent(n[0].dialog_id)),8&t&&(e.$$scope={dirty:t,ctx:n}),f.$set(e);var r={};8&t&&(r.$$scope={dirty:t,ctx:n}),d.$set(r)},i:function(n){u||(Un(f.$$.fragment,n),Un(d.$$.fragment,n),u=!0)},o:function(n){In(f.$$.fragment,n),In(d.$$.fragment,n),u=!1},d:function(n){n&&K(t),n&&K(e),n&&K(r),n&&K(i),n&&K(a),Gn(f),Gn(d)}}}function Gi(n){var t,e=pe("Yes")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Wi(n){var t,e,r,o=pe("No")+"",i=new St({props:{name:"thumbs-down"}});return{c:function(){Fn(i.$$.fragment),t=Y(),e=V(o)},m:function(n,o){Kn(i,n,o),F(n,t,o),F(n,e,o),r=!0},p:O,i:function(n){r||(Un(i.$$.fragment,n),r=!0)},o:function(n){In(i.$$.fragment,n),r=!1},d:function(n){Gn(i,n),n&&K(t),n&&K(e)}}}function Vi(n){var t,e,r,o=pe("Yes")+"",i=new St({props:{name:"thumbs-up"}});return{c:function(){Fn(i.$$.fragment),t=Y(),e=V(o)},m:function(n,o){Kn(i,n,o),F(n,t,o),F(n,e,o),r=!0},p:O,i:function(n){r||(Un(i.$$.fragment,n),r=!0)},o:function(n){In(i.$$.fragment,n),r=!1},d:function(n){Gn(i,n),n&&K(t),n&&K(e)}}}function Yi(n){var t,e,r,o=pe("No")+"",i=new St({props:{name:"thumbs-down"}});return{c:function(){Fn(i.$$.fragment),t=Y(),e=V(o)},m:function(n,o){Kn(i,n,o),F(n,t,o),F(n,e,o),r=!0},p:O,i:function(n){r||(Un(i.$$.fragment,n),r=!0)},o:function(n){In(i.$$.fragment,n),r=!1},d:function(n){Gn(i,n),n&&K(t),n&&K(e)}}}function Qi(n){var t,e,r,o,i,a=[Ki,Fi],c=[];function u(n,e){return 1&e&&(t=!n[1].findDialog({connection_id:n[0].connection_id})),t?0:1}return e=u(n,-1),r=c[e]=a[e](n),{c:function(){r.c(),o=Q()},m:function(n,t){c[e].m(n,t),F(n,o,t),i=!0},p:function(n,t){var i=p(t,1)[0],s=e;(e=u(n,i))===s?c[e].p(n,i):(Tn(),In(c[s],1,1,(function(){c[s]=null})),Ln(),(r=c[e])||(r=c[e]=a[e](n)).c(),Un(r,1),r.m(o.parentNode,o))},i:function(n){i||(Un(r),i=!0)},o:function(n){In(r),i=!1},d:function(n){c[e].d(n),n&&K(o)}}}function Zi(n,t,e){var r=t.dialog,o=void 0===r?"":r,i=gn("user");return n.$set=function(n){"dialog"in n&&e(0,o=n.dialog)},[o,i,function(){return o.send("/join "+o.dialog_id)}]}var Ji=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Hi()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,Zi,Qi,P,{dialog:0}),r}return u}(Yn);function Xi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function na(n){var t,e,r,o,i,a,c,u,s,f=n[1].unread+"",d=n[4].default,l=A(d,n,n[3],null),h=new St({props:{name:n[0].activeMenu?"times-circle":"bars"}});return{c:function(){t=W("header"),l&&l.c(),e=Y(),r=W("a"),Fn(h.$$.fragment),o=Y(),i=W("small"),a=V(f),X(i,"class","chat-header__unread"),i.hidden=c=!n[1].unread,X(r,"href",u="#activeMenu:"+(n[0].activeMenu?"":"nav")),X(r,"class","chat-header__hamburger"),X(t,"class","chat-header")},m:function(n,c){F(n,t,c),l&&l.m(t,null),H(t,e),H(t,r),Kn(h,r,null),H(r,o),H(r,i),H(i,a),s=!0},p:function(n,t){var e=p(t,1)[0];l&&l.p&&8&e&&l.p(T(d,n,n[3],null),L(d,n[3],e,null));var o={};1&e&&(o.name=n[0].activeMenu?"times-circle":"bars"),h.$set(o),(!s||2&e)&&f!==(f=n[1].unread+"")&&tn(a,f),(!s||2&e&&c!==(c=!n[1].unread))&&(i.hidden=c),(!s||1&e&&u!==(u="#activeMenu:"+(n[0].activeMenu?"":"nav")))&&X(r,"href",u)},i:function(n){s||(Un(l,n),Un(h.$$.fragment,n),s=!0)},o:function(n){In(l,n),In(h.$$.fragment,n),s=!1},d:function(n){n&&K(t),l&&l.d(n),Gn(h)}}}function ta(n,t,e){var r,o;j(n,ne,(function(n){return e(0,r=n)}));var i=gn("user");j(n,i,(function(n){return e(1,o=n)}));var a=t.$$slots,c=void 0===a?{}:a,u=t.$$scope;return n.$set=function(n){"$$scope"in n&&e(3,u=n.$$scope)},[r,o,i,u,c]}var ea=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Xi()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,ta,na,P,{}),r}return u}(Yn);function ra(n){if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(n=function(n,t){if(!n)return;if("string"==typeof n)return oa(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return oa(n,t)}(n))){var t=0,e=function(){};return{s:e,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(n){throw n},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,a=!1;return{s:function(){r=n[Symbol.iterator]()},n:function(){var n=r.next();return i=n.done,n},e:function(n){a=!0,o=n},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}function oa(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}var ia=[];function aa(n,t){return aa[n]?aa[n](t):[]}function ca(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function ua(n,t,e){var r=n.slice();return r[30]=t[e],r[32]=e,r}function sa(n){var t,e,r=(n[30].text||n[30].val)+"";return{c:function(){X(t=W("a"),"href","#index:"+n[32]),X(t,"tabindex","-1"),on(t,"has-focus",n[32]==n[2])},m:function(o,i,a){F(o,t,i),t.innerHTML=r,a&&e(),e=Z(t,"click",J(n[10]))},p:function(n,e){128&e[0]&&r!==(r=(n[30].text||n[30].val)+"")&&(t.innerHTML=r),4&e[0]&&on(t,"has-focus",n[32]==n[2])},d:function(n){n&&K(t),e()}}}function fa(n){for(var t,e,r,o,i,a,c,u,s,f,d,l,p,h,m,g,v=new St({props:{name:n[9]}}),$=n[7],y=[],b=0;b<$.length;b+=1)y[b]=sa(ua(n,$,b));return{c:function(){t=W("form"),e=W("textarea"),r=Y(),o=W("div"),i=W("span"),a=Y(),c=W("input"),s=Y(),f=W("a"),Fn(v.$$.fragment),d=Y(),l=W("div");for(var m=0;m<y.length;m+=1)y[m].c();X(e,"id","chat_input"),X(e,"placeholder",n[8]),X(c,"type","file"),X(o,"class","chat-input__upload-wrapper"),o.hidden=u=!n[0].is("conversation"),X(f,"href","#send"),X(f,"class","chat-input__send"),X(l,"class",p="chat-input_autocomplete chat-input_autocomplete_"+n[3]),l.hidden=h=!n[7].length,X(t,"class","chat-input")},m:function(u,p,h){F(u,t,p),H(t,e),n[25](e),H(t,r),H(t,o),H(o,i),H(o,a),H(o,c),n[29](c),H(t,s),H(t,f),Kn(v,f,null),H(t,d),H(t,l);for(var $=0;$<y.length;$+=1)y[$].m(l,null);m=!0,h&&N(g),g=[Z(e,"change",n[26]),Z(e,"keydown",n[27]),Z(e,"keyup",n[28]),Z(c,"change",n[11]),Z(f,"click",n[1]),Z(t,"submit",J(n[24]))]},p:function(n,t){(!m||256&t[0])&&X(e,"placeholder",n[8]),(!m||1&t[0]&&u!==(u=!n[0].is("conversation")))&&(o.hidden=u);var r={};if(512&t[0]&&(r.name=n[9]),v.$set(r),1156&t[0]){var i;for($=n[7],i=0;i<$.length;i+=1){var a=ua(n,$,i);y[i]?y[i].p(a,t):(y[i]=sa(a),y[i].c(),y[i].m(l,null))}for(;i<y.length;i+=1)y[i].d(1);y.length=$.length}(!m||8&t[0]&&p!==(p="chat-input_autocomplete chat-input_autocomplete_"+n[3]))&&X(l,"class",p),(!m||128&t[0]&&h!==(h=!n[7].length))&&(l.hidden=h)},i:function(n){m||(Un(v.$$.fragment,n),m=!0)},o:function(n){In(v.$$.fragment,n),m=!1},d:function(e){e&&K(t),n[25](null),n[29](null),Gn(v),G(y,e),N(g)}}}function da(n,t,e){var r=t.dialog,o=void 0===r?{}:r;var i,a,c=0,u="none",s=0,f=gn("user");function d(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.space||"";e(4,i.value=_[0]+n+r+_[3],i),e(4,i.selectionStart=e(4,i.selectionEnd=(_[0]+n+r).length,i),i),r.length&&e(5,s=i.selectionStart)}function l(n){var t=p(n,4),r=t[0],i=t[1],a=t[2];t[3];e(3,u=":"==i&&a.length?"emojis":"/"!=i||r.length?"@"==i&&a.length?"nicks":"#"==i||"&"==i?"dialogs":"none":"commands"),e(2,c=0);var s=aa(u,{dialog:o,query:i+a,user:f});return s.length&&s.unshift({val:i+a}),s}function h(n){if(!i)return["","","",""];var t="",e="";return[i.value.substring(0,n).replace(/(\S)(\S*)$/,(function(n,r,o){return t=r,e=o,""})),t,e,i.value.substring(n)]}function m(n){var t=b[c];t&&d(t.val,n)}function g(n,t){b.length&&(n.preventDefault(),e(2,c+=t),c<0&&e(2,c=b.length-1),c>=b.length&&e(2,c=0),m({space:""}))}function v(n){n.preventDefault&&n.preventDefault();var t={method:"send",dialog:o};t.message=n.preventDefault?i.value:n.message,t.message=t.message.replace(/^\/close/i,"/part"),t.message=t.message.replace(/^\/j\b/i,"/join");(t.message.match(/^\/(\w+)\s*(\S*)/)||["","message",""]).slice(1);t.message.length&&(o.is("search")?o:f.omnibus).send(t,(function(n){n.errors&&o&&(n.stopPropagation(),n.vars=[n.message,rt(n.errors)],n.message='Could not send message "%1": %2',o.addMessage(n))}));o.is("conversation")&&e(4,i.value="",i),e(5,s=0)}function $(n){var t=n.target&&n.target.files||n.dataTransfer&&n.dataTransfer.files;if(t&&t.length){if(t.length>1)return console.log("Cannot upload more than one file.");var e=new FormData;e.append("file",t[0]),f.api.operation("uploadFile").perform({formData:e}).then((function(n){var t=n.res.body;if(t.files&&t.files.length)return d(t.files[0].url);t.errors&&o.addMessage({message:"Could not upload file: %1",vars:[pe(rt(t.errors))],type:"error"})}))}}mn((function(){e(6,a.uploader=$,a)}));var y={ArrowDown:function(n){return g(n,n.shiftKey?4:1)},ArrowUp:function(n){return g(n,n.shiftKey?-4:-1)},Tab:function(n){return g(n,n.shiftKey?-1:1)},Enter:function(n){b[c]?(n.preventDefault(),m({space:" "})):n.altKey||n.ctrlKey||n.metaKey||n.shiftKey||v(n)},Fallback:function(n){},Release:function(n){1!=n.key.length&&-1==["ArrowLeft","ArrowRight","Backspace"].indexOf(n.key)||e(5,s=i.selectionStart)}};var b,w,_,x,k,E;return n.$set=function(n){"dialog"in n&&e(0,o=n.dialog)},n.$$.update=function(){32&n.$$.dirty[0]&&e(16,_=h(s)),65536&n.$$.dirty[0]&&e(7,b=l(_)||[]),1&n.$$.dirty[0]&&e(17,w=f.findDialog({connection_id:o.connection_id})),131072&n.$$.dirty[0]&&e(18,x=w&&w.nick),393217&n.$$.dirty[0]&&e(8,k=o.is("search")?"What are you looking for?":w&&w.is("unreachable")?pe("Connecting..."):pe("What is on your mind %1?",x)),1&n.$$.dirty[0]&&e(9,E=o.is("search")?"search":"paper-plane")},[o,v,c,u,i,s,a,b,k,E,function(n){e(2,c=parseInt(n.target.closest("a").href.replace(/.*index:/,""),10)),m({space:" "}),i.focus()},$,y,function(){return a},function(n){e(4,i.value=n,i)},d,_,w,x,f,l,h,m,g,function(t){vn(n,t)},function(n){yn[n?"unshift":"push"]((function(){e(4,i=n)}))},function(n){e(5,s=i.selectionStart)},function(n){return(y[n.key]||y.Fallback)(n)},function(n){return y.Release(n)},function(n){yn[n?"unshift":"push"]((function(){e(6,a=n)}))}]}aa.commands=function(n){for(var t=n.query,e=[],r=0;r<ia.length;r++)if(0==ia[r].cmd.indexOf(t)){var o=ia[r].alias||ia[r].cmd,i=ia[r].example.replace(/</g,"&lt;");e.push({text:i,val:o})}return e},aa.dialogs=function(n){for(var t=n.dialog,e=n.query,r=n.user,o=r.findDialog({connection_id:t.connection_id}),i=o?o.dialogs.toArray():r.dialogs(),a=[],c=0;c<i.length&&!(-1!=i[c].name.toLowerCase().indexOf(e)&&(a.push({text:i[c].name,val:i[c].dialog_id}),a.length>=20));c++);return a},aa.emojis=function(n){var t=n.query,e=[];return[":","_"].map((function(n){return n+t.slice(1,2)})).forEach((function(n){for(var r=fe(n,"group"),o=0;o<r.length&&(r[o].shortname.indexOf(t)>=0&&e.push({val:r[o].emoji,text:de(r[o].emoji)}),!(e.length>=20));o++);})),e},aa.nicks=function(n){var t,e=n.dialog,r=n.query,o=e.participants(),i=new RegExp("^"+ft(r.slice(1)),"i"),a=[],c=ra(o);try{for(c.s();!(t=c.n()).done;){var u=t.value;if(a.length>=20)break;u.nick.match(i)&&a.push({val:u.nick})}}catch(n){c.e(n)}finally{c.f()}return a},ia.push({cmd:"/me",example:"/me <msg>",description:"Send message as an action."}),ia.push({cmd:"/say",example:"/say <msg>",description:'Used when you want to send a message starting with "/".'}),ia.push({cmd:"/topic",example:"/topic or /topic <new topic>",description:"Show current topic, or set a new one."}),ia.push({cmd:"/whois",example:"/whois <nick>",description:"Show information about a user."}),ia.push({cmd:"/query",example:"/query <nick>",description:"Open up a new chat window with nick."}),ia.push({cmd:"/msg",example:"/msg <nick> <msg>",description:"Send a direct message to nick."}),ia.push({cmd:"/names",example:"/names",description:"Show participants in the channel."}),ia.push({cmd:"/join",example:"/join <#channel>",description:"Join channel and open up a chat window."}),ia.push({cmd:"/nick",example:"/nick <nick>",description:"Change your wanted nick."}),ia.push({cmd:"/part",example:"/part",description:"Leave channel, and close window."}),ia.push({cmd:"/close",example:"/close <nick>",description:"Close conversation with nick, defaults to current active."}),ia.push({cmd:"/kick",example:"/kick <nick>",description:"Kick a user from the current channel."}),ia.push({cmd:"/mode",example:"/mode [+|-][b|o|v] <user>",description:"Change mode of yourself or a user"}),ia.push({cmd:"/reconnect",example:"/reconnect",description:"Restart the current connection."}),ia.push({cmd:"/clear",example:"/clear history <#channel> or /clear history <nick>",description:"Delete all history for the given conversation."}),ia.push({cmd:"/raw",example:"/raw <msg>",description:"Allow you to send any RFC 2812 message."});var la=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(ca()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,da,fa,P,{dialog:0,getUploadEl:13,setValue:14,add:15,sendMessage:1},[-1,-1]),r}return E(u,[{key:"getUploadEl",get:function(){return this.$$.ctx[13]}},{key:"setValue",get:function(){return this.$$.ctx[14]}},{key:"add",get:function(){return this.$$.ctx[15]}},{key:"sendMessage",get:function(){return this.$$.ctx[1]}}]),u}(Yn);function pa(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function ha(n){var t,e,r,o,i,a,c,u,s=new St({props:{name:"pick:Convos",color:"inherit"}}),f=n[2].default,d=A(f,n,n[1],null);return{c:function(){t=W("div"),Fn(s.$$.fragment),e=Y(),(r=W("b")).textContent="".concat(n[0]),o=Y(),(i=W("a")).textContent="".concat(pe("Convos")),a=Y(),c=W("div"),d&&d.c(),X(r,"class","message__ts"),X(i,"href","/settings/account"),X(i,"class","message__from"),X(i,"color","inherit"),X(c,"class","message__text"),X(t,"class","message is-type-notice is-highlighted")},m:function(n,f){F(n,t,f),Kn(s,t,null),H(t,e),H(t,r),H(t,o),H(t,i),H(t,a),H(t,c),d&&d.m(c,null),u=!0},p:function(n,t){var e=p(t,1)[0];d&&d.p&&2&e&&d.p(T(f,n,n[1],null),L(f,n[1],e,null))},i:function(n){u||(Un(s.$$.fragment,n),Un(d,n),u=!0)},o:function(n){In(s.$$.fragment,n),In(d,n),u=!1},d:function(n){n&&K(t),Gn(s),d&&d.d(n)}}}function ma(n,t,e){var r=(new Pt).getHM(),o=t.$$slots,i=void 0===o?{}:o,a=t.$$scope;return n.$set=function(n){"$$scope"in n&&e(1,a=n.$$scope)},[r,a,i]}var ga=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(pa()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,ma,ha,P,{}),r}return u}(Yn);function va(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function $a(n){var t,e,r,o,i,a=new St({props:{name:n[1],animation:n[2]}}),c=n[4].default,u=A(c,n,n[3],null);return{c:function(){t=W("div"),e=W("span"),Fn(a.$$.fragment),r=Y(),u&&u.c(),X(t,"class",o="message-status-line "+n[0])},m:function(n,o){F(n,t,o),H(t,e),Kn(a,e,null),H(e,r),u&&u.m(e,null),i=!0},p:function(n,e){var r=p(e,1)[0],s={};2&r&&(s.name=n[1]),4&r&&(s.animation=n[2]),a.$set(s),u&&u.p&&8&r&&u.p(T(c,n,n[3],null),L(c,n[3],r,null)),(!i||1&r&&o!==(o="message-status-line "+n[0]))&&X(t,"class",o)},i:function(n){i||(Un(a.$$.fragment,n),Un(u,n),i=!0)},o:function(n){In(a.$$.fragment,n),In(u,n),i=!1},d:function(n){n&&K(t),Gn(a),u&&u.d(n)}}}function ya(n,t,e){var r=t.class,o=void 0===r?"":r,i=t.icon,a=void 0===i?"":i,c=t.animation,u=void 0===c?"":c,s=t.$$slots,f=void 0===s?{}:s,d=t.$$scope;return n.$set=function(n){"class"in n&&e(0,o=n.class),"icon"in n&&e(1,a=n.icon),"animation"in n&&e(2,u=n.animation),"$$scope"in n&&e(3,d=n.$$scope)},[o,a,u,d,f]}var ba=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(va()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,ya,$a,P,{class:0,icon:1,animation:2}),r}return u}(Yn);function wa(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function _a(n){return function(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?wa(Object(e),!0).forEach((function(t){Xn(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):wa(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}({color:"inherit",from:"Convos",fromId:"Convos",markdown:he.apply(void 0,[n.message].concat(x(n.vars))),ts:new Pt,type:"error"},n)}var xa={};function ka(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Ea(n,t,e){var r=n.slice();return r[20]=t[e],r[22]=e,r}function Oa(n){var t;return{c:function(){(t=W("h2")).textContent="".concat(pe("No notifications."))},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Ca(n){var t,e=new ba({props:{class:"for-loading",icon:"spinner",animation:"spin",$$slots:{default:[Ra]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};8388608&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Un(e.$$.fragment,n),t=!0)},o:function(n){In(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function Ra(n){var t,e=pe("Loading...")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Sa(n){var t,e=new ba({props:{class:"for-last-read",icon:"comments",$$slots:{default:[Na]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};8388608&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Un(e.$$.fragment,n),t=!0)},o:function(n){In(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function Na(n){var t,e=pe("New messages")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Da(n){var t,e=new ba({props:{class:"for-day-changed",icon:"calendar-alt",$$slots:{default:[Ma]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};8388624&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Un(e.$$.fragment,n),t=!0)},o:function(n){In(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function Pa(n){var t,e=new ba({props:{class:"for-start-of-history",icon:"calendar-alt",$$slots:{default:[ja]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};8388624&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Un(e.$$.fragment,n),t=!0)},o:function(n){In(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function Ma(n){var t,e=n[20].ts.getHumanDate()+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:function(n,r){16&r&&e!==(e=n[20].ts.getHumanDate()+"")&&tn(t,e)},d:function(n){n&&K(t)}}}function ja(n){var t,e=pe("Started chatting on %1",n[20].ts.getHumanDate())+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:function(n,r){16&r&&e!==(e=pe("Started chatting on %1",n[20].ts.getHumanDate())+"")&&tn(t,e)},d:function(n){n&&K(t)}}}function Aa(n){var t,e,r,o=pe("%1 in %2",n[20].from,n[20].dialog_id)+"";return{c:function(){t=W("a"),e=V(o),X(t,"href",r=Za(n[20])),X(t,"class","message__from"),rn(t,"color",n[20].color)},m:function(n,r){F(n,t,r),H(t,e)},p:function(n,i){16&i&&o!==(o=pe("%1 in %2",n[20].from,n[20].dialog_id)+"")&&tn(e,o),16&i&&r!==(r=Za(n[20]))&&X(t,"href",r),16&i&&rn(t,"color",n[20].color)},d:function(n){n&&K(t)}}}function Ta(n){var t,e,r,o,i=n[20].from+"";function a(){for(var t,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(t=n)[15].apply(t,[n[20]].concat(r))}return{c:function(){t=W("a"),e=V(i),X(t,"href",r="#input:"+n[20].from),X(t,"class","message__from"),rn(t,"color",n[20].color),X(t,"tabindex","-1")},m:function(n,r,i){F(n,t,r),H(t,e),i&&o(),o=Z(t,"click",J(a))},p:function(o,a){n=o,16&a&&i!==(i=n[20].from+"")&&tn(e,i),16&a&&r!==(r="#input:"+n[20].from)&&X(t,"href",r),16&a&&rn(t,"color",n[20].color)},d:function(n){n&&K(t),o()}}}function La(n){var t,e=new St({props:{name:"error"==n[20].type?"exclamation-circle":"info-circle"}});return e.$on("click",n[12]),{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};16&t&&(r.name="error"==n[20].type?"exclamation-circle":"info-circle"),e.$set(r)},i:function(n){t||(Un(e.$$.fragment,n),t=!0)},o:function(n){In(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function Ua(n){var t,e,r,o,i,a,c,u,s,f,d,l,p,h,m,g,v,$,y,b,w,_=n[20].ts.getHM()+"",x=n[20].ts.toLocaleString()+"",k=Qa(n[20]),E=n[20].markdown+"",O=n[22]&&n[22]==n[4].length-n[5]&&Sa(n),C=[Pa,Da],R=[];function S(n,t){return 0==n[22]&&n[3].endOfHistory?0:n[20].dayChanged?1:-1}~(e=S(n))&&(r=R[e]=C[e](n));var N=new St({props:{name:"pick:"+n[20].fromId,color:n[20].color}});function D(n,t){return n[3].connection_id||!n[20].dialog_id?Ta:Aa}var P=D(n),M=P(n),j=k&&La(n);return{c:function(){O&&O.c(),t=Y(),r&&r.c(),o=Y(),i=W("div"),Fn(N.$$.fragment),a=Y(),c=W("b"),u=V(_),f=Y(),d=W("div"),l=V(x),h=Y(),M.c(),m=Y(),g=W("div"),j&&j.c(),v=Y(),X(c,"class","message__ts"),X(c,"aria-labelledby",s=n[20].id+"_ts"),X(d,"role","tooltip"),X(d,"id",p=n[20].id+"_ts"),$=new cn(E,null),X(g,"class","message__text"),X(i,"class",y="message is-type-"+n[20].type),X(i,"data-index",n[22]),on(i,"is-not-present",!n[11](n[20])),on(i,"is-sent-by-you",n[20].from==n[2].nick),on(i,"is-highlighted",n[20].highlight),on(i,"has-not-same-from",!n[10](n[22])&&!n[20].dayChanged),on(i,"has-same-from",n[10](n[22])&&!n[20].dayChanged)},m:function(r,s,p){O&&O.m(r,s),F(r,t,s),~e&&R[e].m(r,s),F(r,o,s),F(r,i,s),Kn(N,i,null),H(i,a),H(i,c),H(c,u),H(i,f),H(i,d),H(d,l),H(i,h),M.m(i,null),H(i,m),H(i,g),j&&j.m(g,null),H(g,v),$.m(g),b=!0,p&&w(),w=Z(i,"click",n[9])},p:function(n,a){n[22]&&n[22]==n[4].length-n[5]?O?(O.p(n,a),Un(O,1)):((O=Sa(n)).c(),Un(O,1),O.m(t.parentNode,t)):O&&(Tn(),In(O,1,1,(function(){O=null})),Ln());var f=e;(e=S(n))===f?~e&&R[e].p(n,a):(r&&(Tn(),In(R[f],1,1,(function(){R[f]=null})),Ln()),~e?((r=R[e])||(r=R[e]=C[e](n)).c(),Un(r,1),r.m(o.parentNode,o)):r=null);var h={};16&a&&(h.name="pick:"+n[20].fromId),16&a&&(h.color=n[20].color),N.$set(h),(!b||16&a)&&_!==(_=n[20].ts.getHM()+"")&&tn(u,_),(!b||16&a&&s!==(s=n[20].id+"_ts"))&&X(c,"aria-labelledby",s),(!b||16&a)&&x!==(x=n[20].ts.toLocaleString()+"")&&tn(l,x),(!b||16&a&&p!==(p=n[20].id+"_ts"))&&X(d,"id",p),P===(P=D(n))&&M?M.p(n,a):(M.d(1),(M=P(n))&&(M.c(),M.m(i,m))),16&a&&(k=Qa(n[20])),k?j?(j.p(n,a),Un(j,1)):((j=La(n)).c(),Un(j,1),j.m(g,v)):j&&(Tn(),In(j,1,1,(function(){j=null})),Ln()),(!b||16&a)&&E!==(E=n[20].markdown+"")&&$.p(E),(!b||16&a&&y!==(y="message is-type-"+n[20].type))&&X(i,"class",y),2064&a&&on(i,"is-not-present",!n[11](n[20])),20&a&&on(i,"is-sent-by-you",n[20].from==n[2].nick),16&a&&on(i,"is-highlighted",n[20].highlight),1040&a&&on(i,"has-not-same-from",!n[10](n[22])&&!n[20].dayChanged),1040&a&&on(i,"has-same-from",n[10](n[22])&&!n[20].dayChanged)},i:function(n){b||(Un(O),Un(r),Un(N.$$.fragment,n),Un(j),b=!0)},o:function(n){In(O),In(r),In(N.$$.fragment,n),In(j),b=!1},d:function(n){O&&O.d(n),n&&K(t),~e&&R[e].d(n),n&&K(o),n&&K(i),Gn(N),M.d(),j&&j.d(),w()}}}function Ia(n){var t,e=new ga({props:{$$slots:{default:[Ha]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};8388608&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Un(e.$$.fragment,n),t=!0)},o:function(n){In(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function za(n){var t,e=new ga({props:{$$slots:{default:[Ga]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};8388608&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Un(e.$$.fragment,n),t=!0)},o:function(n){In(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function Ba(n){var t,e=pe("Yes")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function qa(n){var t,e=pe("No")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Ha(n){var t,e,r,o,i,a,c=pe('Do you want %1 to handle "irc://" links?',pe("Convos"))+"",u=new Tt({props:{type:"button",icon:"thumbs-up",$$slots:{default:[Ba]},$$scope:{ctx:n}}});u.$on("click",n[18]);var s=new Tt({props:{type:"button",icon:"thumbs-down",$$slots:{default:[qa]},$$scope:{ctx:n}}});return s.$on("click",n[19]),{c:function(){t=V(c),e=Y(),r=W("br"),o=Y(),Fn(u.$$.fragment),i=Y(),Fn(s.$$.fragment)},m:function(n,c){F(n,t,c),F(n,e,c),F(n,r,c),F(n,o,c),Kn(u,n,c),F(n,i,c),Kn(s,n,c),a=!0},p:function(n,t){var e={};8388608&t&&(e.$$scope={dirty:t,ctx:n}),u.$set(e);var r={};8388608&t&&(r.$$scope={dirty:t,ctx:n}),s.$set(r)},i:function(n){a||(Un(u.$$.fragment,n),Un(s.$$.fragment,n),a=!0)},o:function(n){In(u.$$.fragment,n),In(s.$$.fragment,n),a=!1},d:function(n){n&&K(t),n&&K(e),n&&K(r),n&&K(o),Gn(u,n),n&&K(i),Gn(s,n)}}}function Fa(n){var t,e=pe("Yes")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Ka(n){var t,e=pe("No")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Ga(n){var t,e,r,o,i,a,c=pe("Do you want to be notified when someone sends you a private message?")+"",u=new Tt({props:{type:"button",icon:"thumbs-up",$$slots:{default:[Fa]},$$scope:{ctx:n}}});u.$on("click",n[16]);var s=new Tt({props:{type:"button",icon:"thumbs-down",$$slots:{default:[Ka]},$$scope:{ctx:n}}});return s.$on("click",n[17]),{c:function(){t=V(c),e=Y(),r=W("br"),o=Y(),Fn(u.$$.fragment),i=Y(),Fn(s.$$.fragment)},m:function(n,c){F(n,t,c),F(n,e,c),F(n,r,c),F(n,o,c),Kn(u,n,c),F(n,i,c),Kn(s,n,c),a=!0},p:function(n,t){var e={};8388608&t&&(e.$$scope={dirty:t,ctx:n}),u.$set(e);var r={};8388608&t&&(r.$$scope={dirty:t,ctx:n}),s.$set(r)},i:function(n){a||(Un(u.$$.fragment,n),Un(s.$$.fragment,n),a=!0)},o:function(n){In(u.$$.fragment,n),In(s.$$.fragment,n),a=!1},d:function(n){n&&K(t),n&&K(e),n&&K(r),n&&K(o),Gn(u,n),n&&K(i),Gn(s,n)}}}function Wa(n){var t,e=new ba({props:{class:"for-loading",icon:"spinner",animation:"spin",$$slots:{default:[Va]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};8388608&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Un(e.$$.fragment,n),t=!0)},o:function(n){In(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function Va(n){var t,e,r=pe("Loading...")+"";return{c:function(){t=W("a"),e=V(r),X(t,"href",ne.baseUrl),X(t,"target","_self")},m:function(n,r){F(n,t,r),H(t,e)},p:O,d:function(n){n&&K(t)}}}function Ya(n){for(var t,e,r,o,i,a,c,u,s=0==n[3].messages.length&&n[3].is("notifications"),f=n[4].length>40&&n[3].is("loading"),d=n[2].is&&n[2].is("unreachable")||!n[3].is("success"),l=s&&Oa(),h=f&&Ca(n),m=n[4],g=[],v=0;v<m.length;v+=1)g[v]=Ua(Ea(n,m,v));var $=function(n){return In(g[n],1,1,(function(){g[n]=null}))},y=[za,Ia],b=[];function w(n,t){return null===n[6].wantNotifications?0:void 0===n[6].protocols.irc?1:-1}~(o=w(n))&&(i=b[o]=y[o](n));var _=d&&Wa(n);return{c:function(){l&&l.c(),t=Y(),h&&h.c(),e=Y();for(var n=0;n<g.length;n+=1)g[n].c();r=Y(),i&&i.c(),a=Y(),_&&_.c(),c=Q()},m:function(n,i){l&&l.m(n,i),F(n,t,i),h&&h.m(n,i),F(n,e,i);for(var s=0;s<g.length;s+=1)g[s].m(n,i);F(n,r,i),~o&&b[o].m(n,i),F(n,a,i),_&&_.m(n,i),F(n,c,i),u=!0},p:function(n,u){var v=p(u,1)[0];if(8&v&&(s=0==n[3].messages.length&&n[3].is("notifications")),s?l?l.p(n,v):((l=Oa()).c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null),24&v&&(f=n[4].length>40&&n[3].is("loading")),f?h?(h.p(n,v),Un(h,1)):((h=Ca(n)).c(),Un(h,1),h.m(e.parentNode,e)):h&&(Tn(),In(h,1,1,(function(){h=null})),Ln()),7742&v){var x;for(m=n[4],x=0;x<m.length;x+=1){var k=Ea(n,m,x);g[x]?(g[x].p(k,v),Un(g[x],1)):(g[x]=Ua(k),g[x].c(),Un(g[x],1),g[x].m(r.parentNode,r))}for(Tn(),x=m.length;x<g.length;x+=1)$(x);Ln()}var E=o;(o=w(n))===E?~o&&b[o].p(n,v):(i&&(Tn(),In(b[E],1,1,(function(){b[E]=null})),Ln()),~o?((i=b[o])||(i=b[o]=y[o](n)).c(),Un(i,1),i.m(a.parentNode,a)):i=null),12&v&&(d=n[2].is&&n[2].is("unreachable")||!n[3].is("success")),d?_?(_.p(n,v),Un(_,1)):((_=Wa(n)).c(),Un(_,1),_.m(c.parentNode,c)):_&&(Tn(),In(_,1,1,(function(){_=null})),Ln())},i:function(n){if(!u){Un(h);for(var t=0;t<m.length;t+=1)Un(g[t]);Un(i),Un(_),u=!0}},o:function(n){In(h),g=g.filter(Boolean);for(var t=0;t<g.length;t+=1)In(g[t]);In(i),In(_),u=!1},d:function(n){l&&l.d(n),n&&K(t),h&&h.d(n),n&&K(e),G(g,n),n&&K(r),~o&&b[o].d(n),n&&K(a),_&&_.d(n),n&&K(c)}}}function Qa(n){return"error"==n.type||"notice"==n.type}function Za(n){return["","chat",n.connection_id,n.dialog_id].map(encodeURIComponent).join("/")+"#"+n.ts.toISOString()}function Ja(n,t,e){var r,o,i,a=O,c=function(){return a(),a=M(u,(function(n){return e(3,o=n)})),u};n.$$.on_destroy.push((function(){return a()}));var u=t.dialog;c();var s=t.input,f=gn("user");j(n,f,(function(n){return e(13,r=n)}));var d=f.omnibus;function l(n){return n.map((function(t,e){return t.dayChanged=!!u.messages.length&&(0==e?u.is("search"):t.ts.getDate()!=n[e-1].ts.getDate()),t}))}j(n,d,(function(n){return e(6,i=n)}));var p,h,m;return n.$set=function(n){"dialog"in n&&c(e(0,u=n.dialog)),"input"in n&&e(1,s=n.input)},n.$$.update=function(){8200&n.$$.dirty&&e(2,p=r.findDialog({connection_id:o.connection_id})||{}),8197&n.$$.dirty&&e(4,h=l(xa.mergeWithMessages(r,p,u))),8&n.$$.dirty&&e(5,m=o.unread)},[u,s,p,o,h,m,i,f,d,function(n){if(!u.is("conversation")){var t=n.target.closest(".message"),e=h[t.dataset.index];e&&e.dialog_id&&(n.preventDefault(),ne.go(Za(e)))}},function(n){return 0!=n&&h[n].fromId==h[n-1].fromId},function(n){return"Convos"==n.fromId||n.fromId==u.connection_id||!u.dialog_id||u.findParticipant(n.fromId)},function(n){var t=n.target.closest(".message");f.embedMaker.toggleDetails(t,h[t.dataset.index])},r,l,function(n){return s&&s.add(n.from)},function(){return d.requestPermissionToNotify()},function(){return d.requestPermissionToNotify(!1)},function(){return d.registerProtocol("irc",!0)},function(){return d.registerProtocol("irc",!1)}]}xa.fillIn=_a,xa.firstTime=function(n,t){var e=[];if(!(t&&t.is&&t.is("conversation")&&t.first_time))return e;if(t.is_private||e.push(_a({message:t.topic?"Topic for %1 is: %2":"No topic is set for %1.",type:"notice",vars:[t.name,t.topic]})),t.is_private)e.push(_a({message:"This is a private conversation with %1.",type:"notice",vars:[t.name]}));else{var r=t.participants().length;e.push(_a({message:1==r?"You are the only participant in this conversation.":"There are %1 [participants](%2) in this conversation.",type:"notice",vars:[r,ne.urlFor(t.path+"#activeMenu:settings")]}))}return n.dialogs().length<=3&&e.push(_a({message:"Start chatting by writing a message in the input field, or click on the conversation name ([%1](%2)) to get more information.",type:"notice",vars:[t.name,ne.urlFor(t.path+"#activeMenu:settings")]})),e},xa.connectionDialogStatus=function(n,t){var e=[];return!n.is||n.is("unreachable")||(n.frozen?e.push(_a({message:"Disconnected. Your connection %1 can be edited in [settings](%2).",vars:[n.name,ne.urlFor(n.path+"#activeMenu:settings")]})):t.frozen&&!t.is("locked")&&e.push(_a({message:me(n,t).replace(/\.$/,""),vars:[]}))),e},xa.emptySearch=function(n,t){var e=[];return t.is("search")?(null===t.query?(e.push(_a({message:"Search for messages sent by you or others the last %1 days by writing a message in the input field below.",type:"notice",vars:[90]})),e.push(_a({message:'You can enter a channel name, or use `"conversation:#channel"` to narrow down the search.',type:"notice",vars:[t.name,ne.urlFor(t.path+"#activeMenu:settings")]}))):!t.messages.length&&t.is("success")&&e.push(_a({message:'No search results for "%1".',type:"notice",vars:[t.query]})),e):e},xa.mergeWithMessages=function(n,t,e){return xa.emptySearch(n,e).concat(xa.firstTime(n,e)).concat(e.messages).concat(xa.connectionDialogStatus(t,e))};var Xa=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(ka()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,Ja,Ya,P,{dialog:0,input:1}),r}return u}(Yn),nc=function(){function t(){var e=this;n(this,t),this.dragAndDropEvents={drag:this._preventDefault.bind(this),dragend:this.stop.bind(this),dragenter:this.start.bind(this),dragleave:this.stop.bind(this),dragover:this.start.bind(this),dragstart:this._preventDefault.bind(this),drop:this.drop.bind(this)},this.pasteEvents={paste:this.paste.bind(this)},this.removeDragOverDebounced=tt((function(){return e._removeDragOver()}),100)}return E(t,[{key:"attach",value:function(n,t,e){var r=this;this.targetEl&&this.detach(),this.dropEl=t,this.uploadEl=e,this.targetEl=n,Object.keys(this.dragAndDropEvents).forEach((function(t){n.addEventListener(t,r.dragAndDropEvents[t])})),Object.keys(this.pasteEvents).forEach((function(n){document.addEventListener(n,r.pasteEvents[n])}))}},{key:"detach",value:function(){var n=this;Object.keys(this.dragAndDropEvents).forEach((function(t){n.targetEl.removeEventListener(t,n.dragAndDropEvents[t])})),Object.keys(this.pasteEvents).forEach((function(t){document.removeEventListener(t,n.pasteEvents[t])}))}},{key:"drop",value:function(n){this.stop(n),this.uploadEl&&this.uploadEl.uploader(n)}},{key:"paste",value:function(n){var t=(n.clipboardData||n.originalEvent.clipboardData).items;if(this.uploadEl)for(var e=0;e<t.length;e++)if("file"==t[e].kind)return this.uploadEl.uploader({dataTransfer:{files:[t[e].getAsFile()]}})}},{key:"stop",value:function(n){this._preventDefault(n),this.removeDragOverDebounced()}},{key:"start",value:function(n){this._preventDefault(n),this.dropEl&&this.dropEl.classList.add("is-dragover")}},{key:"_preventDefault",value:function(n){n.preventDefault(),n.stopPropagation()}},{key:"_removeDragOver",value:function(){this.dropEl&&this.dropEl.classList.remove("is-dragover")}}]),t}();function tc(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function ec(n,t,e){var r=n.slice();return r[22]=t[e],r}function rc(n){var t,e,r,o,i,a,c,u,s,f,d=pe(n[4].name)+"",l=me(n[3],n[4])+"",p=new St({props:{name:n[4].connection_id?"sliders-h":"bell"}});return{c:function(){t=W("h1"),e=W("a"),Fn(p.$$.fragment),r=W("span"),o=V(d),a=Y(),c=W("a"),u=V(l),X(e,"href",i="#activeMenu:"+(n[4].connection_id?"settings":"nav")),X(e,"tabindex","-1"),X(c,"href",s="#activeMenu:"+(n[4].connection_id?"settings":"nav")),X(c,"class","chat-header__topic")},m:function(n,i){F(n,t,i),H(t,e),Kn(p,e,null),H(e,r),H(r,o),F(n,a,i),F(n,c,i),H(c,u),f=!0},p:function(n,t){var r={};16&t&&(r.name=n[4].connection_id?"sliders-h":"bell"),p.$set(r),(!f||16&t)&&d!==(d=pe(n[4].name)+"")&&tn(o,d),(!f||16&t&&i!==(i="#activeMenu:"+(n[4].connection_id?"settings":"nav")))&&X(e,"href",i),(!f||24&t)&&l!==(l=me(n[3],n[4])+"")&&tn(u,l),(!f||16&t&&s!==(s="#activeMenu:"+(n[4].connection_id?"settings":"nav")))&&X(c,"href",s)},i:function(n){f||(Un(p.$$.fragment,n),f=!0)},o:function(n){In(p.$$.fragment,n),f=!1},d:function(n){n&&K(t),Gn(p),n&&K(a),n&&K(c)}}}function oc(n){var t,e=new Ji({props:{dialog:n[4]}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};16&t&&(r.dialog=n[4]),e.$set(r)},i:function(n){t||(Un(e.$$.fragment,n),t=!0)},o:function(n){In(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function ic(n){var t,e=new Xa({props:{dialog:n[4],input:n[0]}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};16&t&&(r.dialog=n[4]),1&t&&(r.input=n[0]),e.$set(r)},i:function(n){t||(Un(e.$$.fragment,n),t=!0)},o:function(n){In(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function ac(n){var t,e={dialog:n[4]},r=new la({props:e});return n[21](r),{c:function(){Fn(r.$$.fragment)},m:function(n,e){Kn(r,n,e),t=!0},p:function(n,t){var e={};16&t&&(e.dialog=n[4]),r.$set(e)},i:function(n){t||(Un(r.$$.fragment,n),t=!0)},o:function(n){In(r.$$.fragment,n),t=!1},d:function(t){n[21](null),Gn(r,t)}}}function cc(n){for(var t,e,r,o,i,a,c,u,s=pe("Participants (%1)",n[4].participants().length)+"",f=n[4].participants(),d=[],l=0;l<f.length;l+=1)d[l]=sc(ec(n,f,l));var p=function(n){return In(d[n],1,1,(function(){d[n]=null}))};return{c:function(){t=W("div"),e=W("nav"),r=W("h3"),o=V(s),i=Y();for(var n=0;n<d.length;n+=1)d[n].c();a=Y(),c=W("nav"),X(e,"class","sidebar-right__nav"),X(t,"class","sidebar-right")},m:function(n,s){F(n,t,s),H(t,e),H(e,r),H(r,o),H(e,i);for(var f=0;f<d.length;f+=1)d[f].m(e,null);H(e,a),H(e,c),u=!0},p:function(n,t){if((!u||16&t)&&s!==(s=pe("Participants (%1)",n[4].participants().length)+"")&&tn(o,s),16&t){var r;for(f=n[4].participants(),r=0;r<f.length;r+=1){var i=ec(n,f,r);d[r]?(d[r].p(i,t),Un(d[r],1)):(d[r]=sc(i),d[r].c(),Un(d[r],1),d[r].m(e,a))}for(Tn(),r=f.length;r<d.length;r+=1)p(r);Ln()}},i:function(n){if(!u){for(var t=0;t<f.length;t+=1)Un(d[t]);u=!0}},o:function(n){d=d.filter(Boolean);for(var t=0;t<d.length;t+=1)In(d[t]);u=!1},d:function(n){n&&K(t),G(d,n)}}}function uc(n){var t,e,r,o,i=n[22].nick+"",a=new St({props:{name:"pick:"+n[22].id,family:"solid",color:n[22].color}});return{c:function(){Fn(a.$$.fragment),t=Y(),e=W("span"),r=V(i)},m:function(n,i){Kn(a,n,i),F(n,t,i),F(n,e,i),H(e,r),o=!0},p:function(n,t){var e={};16&t&&(e.name="pick:"+n[22].id),16&t&&(e.color=n[22].color),a.$set(e),(!o||16&t)&&i!==(i=n[22].nick+"")&&tn(r,i)},i:function(n){o||(Un(a.$$.fragment,n),o=!0)},o:function(n){In(a.$$.fragment,n),o=!1},d:function(n){Gn(a,n),n&&K(t),n&&K(e)}}}function sc(n){var t,e=new kr({props:{href:"/chat/"+n[4].connection_id+"/"+n[22].id,class:"participant "+ut(n[22].modes),$$slots:{default:[uc]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};16&t&&(r.href="/chat/"+n[4].connection_id+"/"+n[22].id),16&t&&(r.class="participant "+ut(n[22].modes)),33554448&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Un(e.$$.fragment,n),t=!0)},o:function(n){In(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function fc(n){var t,e,r,o,i,a,c,u,s,f,d,l,h=!n[4].is("notifications"),m=n[4].participants().length,g=new ea({props:{$$slots:{default:[rc]},$$scope:{ctx:n}}}),v=[ic,oc],$=[];function y(n,t){return 16&t&&(o=!(n[4].connection_id&&!n[5].findDialog(n[4]))),o?0:1}i=y(n,-1),a=$[i]=v[i](n);var b=h&&ac(n),w=m&&cc(n);return{c:function(){Fn(g.$$.fragment),t=Y(),e=W("main"),r=W("div"),a.c(),u=Y(),b&&b.c(),s=Y(),w&&w.c(),f=Q(),X(r,"class","messages-container"),On((function(){return n[19].call(r)})),on(r,"has-notifications",n[4].is("notifications")),X(e,"class","main for-chat")},m:function(o,a,p){Kn(g,o,a),F(o,t,a),F(o,e,a),H(e,r),$[i].m(r,null),c=function(n,t){"static"===getComputedStyle(n).position&&(n.style.position="relative");var e,r=document.createElement("object");return r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.type="text/html",r.tabIndex=-1,r.onload=function(){(e=r.contentDocument.defaultView).addEventListener("resize",t)},/Trident/.test(navigator.userAgent)?(n.appendChild(r),r.data="about:blank"):(r.data="about:blank",n.appendChild(r)),{cancel:function(){e&&e.removeEventListener&&e.removeEventListener("resize",t),n.removeChild(r)}}}(r,n[19].bind(r)),n[20](e),F(o,u,a),b&&b.m(o,a),F(o,s,a),w&&w.m(o,a),F(o,f,a),d=!0,p&&l(),l=Z(e,"scroll",n[6])},p:function(n,t){var e=p(t,1)[0],o={};33554456&e&&(o.$$scope={dirty:e,ctx:n}),g.$set(o);var c=i;(i=y(n,e))===c?$[i].p(n,e):(Tn(),In($[c],1,1,(function(){$[c]=null})),Ln(),(a=$[i])||(a=$[i]=v[i](n)).c(),Un(a,1),a.m(r,null)),16&e&&on(r,"has-notifications",n[4].is("notifications")),16&e&&(h=!n[4].is("notifications")),h?b?(b.p(n,e),Un(b,1)):((b=ac(n)).c(),Un(b,1),b.m(s.parentNode,s)):b&&(Tn(),In(b,1,1,(function(){b=null})),Ln()),16&e&&(m=n[4].participants().length),m?w?(w.p(n,e),Un(w,1)):((w=cc(n)).c(),Un(w,1),w.m(f.parentNode,f)):w&&(Tn(),In(w,1,1,(function(){w=null})),Ln())},i:function(n){d||(Un(g.$$.fragment,n),Un(a),Un(b),Un(w),d=!0)},o:function(n){In(g.$$.fragment,n),In(a),In(b),In(w),d=!1},d:function(r){Gn(g,r),r&&K(t),r&&K(e),$[i].d(),c.cancel(),n[20](null),r&&K(u),b&&b.d(r),r&&K(s),w&&w.d(r),r&&K(f),l()}}}function dc(n,t,e){var r,o;j(n,ne,(function(n){return e(12,r=n)}));var i,a,c=new nc,u=gn("user");j(n,u,(function(n){return e(13,o=n)}));var s,f,d=0,l=0,h="bottom",m={},g=u.notifications,v=null,$={};function y(n){var t=["connection_id","dialog_id"].map((function(t){return n.param(t)})),e=p(t,2),r=e[0],o=e[1];g.connection_id==r&&g.dialog_id==o||(u.omnibus.debug>1&&console.log("[setDialogFromRoute]",JSON.stringify([r,o])),u.setActiveDialog({connection_id:r,dialog_id:o}))}function b(n){n.activeDialog!=v&&($.dialog&&_(),n.omnibus.debug>1&&console.log("[setDialogFromUser]",n.activeDialog.name),e(4,g=n.activeDialog),e(3,m=n.findDialog({connection_id:g.connection_id})||{}),l=0,v=g,h="bottom",st(document,".message__embed",(function(n){return n.remove()})),g.load({before:"maybe"}),ne.update({title:g.title}),$.dialog=g.subscribe((function(n){e(4,g=n)})))}function w(n,t){n.forEach((function(n){if(n.isIntersecting){var t=g.messages[n.target.dataset.index]||{};t.embeds&&u.embedMaker.render(n.target,t.embeds)}}))}function _(){g.setLastRead&&g.setLastRead(),$.dialog&&$.dialog(),c.detach()}f=function(){s=s||new IntersectionObserver(w,{rootMargin:"0px"}),st(document,".message",(function(n){n.classList.contains("is-observed")||s.observe(n),n.classList.add("is-observed")})),"bottom"==h?e(1,a.scrollTop=d,a):l&&l<d&&(e(1,a.scrollTop=d-l,a),"top"!=h&&(l=0))},hn().$$.after_update.push(f),mn((function(){return ot("chat_input")})),function(n){hn().$$.on_destroy.push(n)}(_);var x=tt((function(n){if(a){var t=a.offsetHeight,e=a.scrollTop;"top"!=(h=t>d||e+20>d-t?"bottom":e<100?"top":"middle")||g.is("loading")||(g.messages.length&&g.load({before:0}),l=d)}}),20);return n.$$.update=function(){4096&n.$$.dirty&&y(r),8192&n.$$.dirty&&b(o),3&n.$$.dirty&&c.attach(document,a,i&&i.getUploadEl())},[i,a,d,m,g,u,x,l,s,h,v,$,r,o,c,y,b,w,_,function(){d=this.offsetHeight,e(2,d)},function(n){yn[n?"unshift":"push"]((function(){e(1,a=n)}))},function(n){yn[n?"unshift":"push"]((function(){e(0,i=n)}))}]}var lc=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(tc()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,dc,fc,P,{}),r}return u}(Yn);function pc(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function hc(n){var t;return{c:function(){(t=W("h1")).textContent="".concat(pe("Add connection"))},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function mc(n){var t,e,r,o=new ea({props:{$$slots:{default:[hc]},$$scope:{ctx:n}}}),i=new sr({});return{c:function(){Fn(o.$$.fragment),t=Y(),e=W("main"),Fn(i.$$.fragment),X(e,"class","main")},m:function(n,a){Kn(o,n,a),F(n,t,a),F(n,e,a),Kn(i,e,null),r=!0},p:function(n,t){var e=p(t,1)[0],r={};1&e&&(r.$$scope={dirty:e,ctx:n}),o.$set(r)},i:function(n){r||(Un(o.$$.fragment,n),Un(i.$$.fragment,n),r=!0)},o:function(n){In(o.$$.fragment,n),In(i.$$.fragment,n),r=!1},d:function(n){Gn(o,n),n&&K(t),n&&K(e),Gn(i)}}}function gc(n){return ne.update({title:pe("Add connection")}),[]}var vc=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(pc()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,gc,mc,P,{}),r}return u}(Yn);function $c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function yc(n,t,e){var r=n.slice();return r[26]=t[e],r[28]=e,r}var bc=function(n){return{}},wc=function(n){return{}};function _c(n){var t,e,r,o,i=(n[26].length>1?n[26][1]:n[26][0])+"";function a(){for(var t,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(t=n)[24].apply(t,[n[28]].concat(r))}return{c:function(){t=W("a"),e=V(i),X(t,"href",r="#"+n[28]+":"+n[26][0]),X(t,"tabindex","-1"),on(t,"is-active",n[28]==n[6])},m:function(r,i,c){F(r,t,i),H(t,e),c&&N(o),o=[Z(t,"click",n[14]),Z(t,"mouseover",a)]},p:function(o,a){n=o,2048&a&&i!==(i=(n[26].length>1?n[26][1]:n[26][0])+"")&&tn(e,i),2048&a&&r!==(r="#"+n[28]+":"+n[26][0])&&X(t,"href",r),64&a&&on(t,"is-active",n[28]==n[6])},d:function(n){n&&K(t),N(o)}}}function xc(n){for(var t,e,r,o,i,a,c,u,s,f,d,l=n[20].label,h=A(l,n,n[19],wc),m=h||{c:function(){d=V("Label")},m:function(n,t){F(n,d,t)},d:function(n){n&&K(d)}},g=n[11],v=[],$=0;$<g.length;$+=1)v[$]=_c(yc(n,g,$));return{c:function(){t=W("div"),e=W("label"),m&&m.c(),r=Y(),o=W("input"),i=Y(),a=W("input"),c=Y(),u=W("div");for(var s=0;s<v.length;s+=1)v[s].c();X(e,"for",n[3]),X(o,"type","hidden"),X(o,"name",n[2]),X(a,"type","text"),X(a,"placeholder",n[4]),X(a,"id",n[3]),a.readOnly=n[5],X(a,"autocomplete","off"),X(u,"class","select-field__options"),X(t,"class","select-field text-field"),t.hidden=n[1],on(t,"is-open",n[9])},m:function(d,l,p){F(d,t,l),H(t,e),m&&m.m(e,null),H(t,r),H(t,o),n[21](o),en(o,n[0]),H(t,i),H(t,a),n[23](a),H(t,c),H(t,u);for(var h=0;h<v.length;h+=1)v[h].m(u,null);n[25](t),s=!0,p&&N(f),f=[Z(o,"input",n[22]),Z(o,"keydown",n[12]),Z(a,"keydown",n[12]),Z(a,"keyup",n[13]),Z(t,"click",J(n[15]))]},p:function(n,r){var i=p(r,1)[0];if(h&&h.p&&524288&i&&h.p(T(l,n,n[19],wc),L(l,n[19],i,bc)),(!s||8&i)&&X(e,"for",n[3]),(!s||4&i)&&X(o,"name",n[2]),1&i&&en(o,n[0]),(!s||16&i)&&X(a,"placeholder",n[4]),(!s||8&i)&&X(a,"id",n[3]),(!s||32&i)&&(a.readOnly=n[5]),18496&i){var c;for(g=n[11],c=0;c<g.length;c+=1){var f=yc(n,g,c);v[c]?v[c].p(f,i):(v[c]=_c(f),v[c].c(),v[c].m(u,null))}for(;c<v.length;c+=1)v[c].d(1);v.length=g.length}(!s||2&i)&&(t.hidden=n[1]),512&i&&on(t,"is-open",n[9])},i:function(n){s||(Un(m,n),s=!0)},o:function(n){In(m,n),s=!1},d:function(e){e&&K(t),m&&m.d(e),n[21](null),n[23](null),G(v,e),n[25](null),N(f)}}}function kc(n,t,e){var r,o,i,a=["ArrowDown","ArrowUp","Enter"],c=0,u=!1,s="",f=t.hidden,d=void 0!==f&&f,l=t.name,p=void 0===l?"":l,h=t.id,m=void 0===h?p?"form_"+p:mt():h,g=t.options,v=void 0===g?[]:g,$=t.placeholder,y=void 0===$?"":$,b=t.readonly,w=void 0!==b&&b,_=t.value,x=void 0===_?"":_;function k(n){return E.apply(this,arguments)}function E(){return(E=Jn(Qn.mark((function n(t){var r,i;return Qn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return"keydown"==t.type?r=S.length?S[c]:[]:(i=t.target.href.replace(/^.*?#\d+:/,""),r=S.filter((function(n){return n[0]==i}))[0]||[]),r.length||(r=[""]),e(0,x=r[0]),e(8,o.value=r.length>1?r[1]:r[0],o),n.next=6,En();case 6:o.setSelectionRange(0,9999),e(9,u=!1);case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}mn((function(){o.addEventListener("blur",(function(){return setTimeout((function(){e(9,u=!1)}),100)})),e(0,x=r.value)}));var O=t.$$slots,C=void 0===O?{}:O,R=t.$$scope;var S;return n.$set=function(n){"hidden"in n&&e(1,d=n.hidden),"name"in n&&e(2,p=n.name),"id"in n&&e(3,m=n.id),"options"in n&&e(16,v=n.options),"placeholder"in n&&e(4,y=n.placeholder),"readonly"in n&&e(5,w=n.readonly),"value"in n&&e(0,x=n.value),"$$scope"in n&&e(19,R=n.$$scope)},n.$$.update=function(){if(512&n.$$.dirty&&0==u&&e(17,s=""),196608&n.$$.dirty&&e(11,S=function(n,t){var e=new RegExp("(?:^|\\s|-)"+ft(t),"i"),r=[];r.length||(r=n.filter((function(n){return n[0]==t}))),r.length||(r=n.filter((function(n){return n[0].match(e)})));for(var o=0;o<n.length;o++){var i=n[o];i.length>1&&-1!=r.indexOf(i)&&i[1].match(e)&&-1==n.map((function(n){return n[0]})).indexOf(i[0])&&n.push(i)}return n}(v,s)),512&n.$$.dirty&&1==u&&e(6,c=0),128&n.$$.dirty&&r&&!r.syncValue&&(e(7,r.syncValue=function(){e(0,x=this.value)},r),r.syncValue()),65920&n.$$.dirty&&o&&!o.value&&o!=document.activeElement){var t=v.find((function(n){return n[0]==r.value}));t&&e(8,o.value=t[1]||t[0],o)}},[x,d,p,m,y,w,c,r,o,u,i,S,function(n){-1!=a.indexOf(n.key)&&n.preventDefault(),"Tab"!=n.key?u?("ArrowDown"==n.key&&e(6,c++,c),"ArrowUp"==n.key&&e(6,c--,c),"Enter"==n.key&&k(n),c>=v.length&&e(6,c=0),c<0&&e(6,c=v.length-1)):e(9,u=!0):u&&k(n)},function(n){1!=n.key.length&&"Backspace"!=n.key||e(17,s=o.value)},k,function(n){n&&n.target&&nt(n.target,".select-field__options")||e(9,u=!u)},v,s,a,R,C,function(n){yn[n?"unshift":"push"]((function(){e(7,r=n)}))},function(){x=this.value,e(0,x),e(7,r)},function(n){yn[n?"unshift":"push"]((function(){e(8,o=n)}))},function(n){e(6,c=n)},function(n){yn[n?"unshift":"push"]((function(){e(10,i=n)}))}]}var Ec=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if($c()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,kc,xc,P,{hidden:1,name:2,id:3,options:16,placeholder:4,readonly:5,value:0}),r}return u}(Yn);function Oc(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Cc(n,t,e){var r=n.slice();return r[14]=t[e],r}function Rc(n){var t;return{c:function(){(t=W("h1")).textContent="".concat(pe("Add conversation"))},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Sc(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Connection")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Nc(n){var t,e=pe(n[0].dialogs.length?"Refresh":"Load")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:function(n,r){1&r&&e!==(e=pe(n[0].dialogs.length?"Refresh":"Load")+"")&&tn(t,e)},d:function(n){n&&K(t)}}}function Dc(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Conversation name")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Pc(n){var t,e=pe("Add")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Mc(n){var t,e,r,o,i=n[0].error+"";return{c:function(){t=W("p"),e=V(n[1]),r=V(": "),o=V(i),X(t,"class","error")},m:function(n,i){F(n,t,i),H(t,e),H(t,r),H(t,o)},p:function(n,t){2&t&&tn(e,n[1]),1&t&&i!==(i=n[0].error+"")&&tn(o,i)},d:function(n){n&&K(t)}}}function jc(n){var t,e,r;function o(n,t){return n[0].done?Tc:Ac}for(var i=o(n),a=i(n),c=n[0].dialogs,u=[],s=0;s<c.length;s+=1)u[s]=Lc(Cc(n,c,s));return{c:function(){t=W("p"),a.c(),e=Y(),r=W("div");for(var n=0;n<u.length;n+=1)u[n].c();X(r,"class","dialog-add-list")},m:function(n,o){F(n,t,o),a.m(t,null),F(n,e,o),F(n,r,o);for(var i=0;i<u.length;i+=1)u[i].m(r,null)},p:function(n,e){if(i===(i=o(n))&&a?a.p(n,e):(a.d(1),(a=i(n))&&(a.c(),a.m(t,null))),65&e){var s;for(c=n[0].dialogs,s=0;s<c.length;s+=1){var f=Cc(n,c,s);u[s]?u[s].p(f,e):(u[s]=Lc(f),u[s].c(),u[s].m(r,null))}for(;s<u.length;s+=1)u[s].d(1);u.length=c.length}},d:function(n){n&&K(t),a.d(),n&&K(e),n&&K(r),G(u,n)}}}function Ac(n){var t,e=pe("Showing %1 of %2 conversations, but the list is still loading.",n[0].dialogs.length,n[0].n_dialogs)+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:function(n,r){1&r&&e!==(e=pe("Showing %1 of %2 conversations, but the list is still loading.",n[0].dialogs.length,n[0].n_dialogs)+"")&&tn(t,e)},d:function(n){n&&K(t)}}}function Tc(n){var t,e=pe("Showing %1 of %2 conversations.",n[0].dialogs.length,n[0].n_dialogs)+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:function(n,r){1&r&&e!==(e=pe("Showing %1 of %2 conversations.",n[0].dialogs.length,n[0].n_dialogs)+"")&&tn(t,e)},d:function(n){n&&K(t)}}}function Lc(n){var t,e,r,o,i,a,c,u,s,f,d,l,p=n[14].n_users+"",h=n[14].name+"",m=(n[14].topic||"No topic.")+"";return{c:function(){t=W("a"),e=W("span"),r=V(p),o=Y(),i=W("b"),a=V(h),c=Y(),u=W("i"),s=V(m),f=Y(),X(e,"class","dialog-add-list__n-users"),X(i,"class","dialog-add-list__name"),X(u,"class","dialog-add-list__title"),X(t,"href",d="#add:"+n[14].name)},m:function(d,p,h){F(d,t,p),H(t,e),H(e,r),H(t,o),H(t,i),H(i,a),H(t,c),H(t,u),H(u,s),H(t,f),h&&l(),l=Z(t,"click",J(n[6]))},p:function(n,e){1&e&&p!==(p=n[14].n_users+"")&&tn(r,p),1&e&&h!==(h=n[14].name+"")&&tn(a,h),1&e&&m!==(m=(n[14].topic||"No topic.")+"")&&tn(s,m),1&e&&d!==(d="#add:"+n[14].name)&&X(t,"href",d)},d:function(n){n&&K(t),l()}}}function Uc(n){var t,e,r,o,i,a,c,u,s,f,d,l,h,m,g,v,$,y,b=new ea({props:{$$slots:{default:[Rc]},$$scope:{ctx:n}}});function w(t){n[11].call(null,t)}var _={name:"connection_id",options:n[4],placeholder:pe("Select..."),$$slots:{label:[Sc]},$$scope:{ctx:n}};void 0!==n[1]&&(_.value=n[1]);var x=new Ec({props:_});yn.push((function(){return Hn(x,"value",w)}));var k=new Tt({props:{type:"button",icon:"sync-alt",disabled:!n[1]||!1===n[0].done,$$slots:{default:[Nc]},$$scope:{ctx:n}}});function E(t){n[12].call(null,t)}k.$on("click",n[7]);var O={name:"dialog_id",placeholder:pe("#room or nick"),autocomplete:"off",$$slots:{label:[Dc]},$$scope:{ctx:n}};void 0!==n[2]&&(O.value=n[2]);var C=new Ue({props:O});yn.push((function(){return Hn(C,"value",E)})),C.$on("keyup",n[8]);var R=new Tt({props:{icon:"comment",disabled:!n[1]||!n[2],$$slots:{default:[Pc]},$$scope:{ctx:n}}}),S=n[0].error&&Mc(n),N=null!==n[0].done&&jc(n);return{c:function(){Fn(b.$$.fragment),t=Y(),e=W("main"),(r=W("p")).textContent="".concat(pe("Enter the name of an exising conversation, or create a new conversation.")," \n    ").concat(pe("It is also possible to load in all existing conversations for a given connection.")),o=Y(),i=W("form"),a=W("div"),Fn(x.$$.fragment),u=Y(),s=W("div"),Fn(k.$$.fragment),f=Y(),d=W("div"),Fn(C.$$.fragment),h=Y(),m=W("div"),Fn(R.$$.fragment),g=Y(),S&&S.c(),v=Y(),N&&N.c(),X(s,"class","has-remaining-space"),X(a,"class","inputs-side-by-side"),X(m,"class","has-remaining-space"),X(d,"class","inputs-side-by-side"),X(i,"method","post"),X(e,"class","main")},m:function(c,l,p){Kn(b,c,l),F(c,t,l),F(c,e,l),H(e,r),H(e,o),H(e,i),H(i,a),Kn(x,a,null),H(a,u),H(a,s),Kn(k,s,null),H(i,f),H(i,d),Kn(C,d,null),H(d,h),H(d,m),Kn(R,m,null),H(i,g),S&&S.m(i,null),H(i,v),N&&N.m(i,null),n[13](i),$=!0,p&&y(),y=Z(i,"submit",J(n[6]))},p:function(n,t){var e=p(t,1)[0],r={};131072&e&&(r.$$scope={dirty:e,ctx:n}),b.$set(r);var o={};16&e&&(o.options=n[4]),131072&e&&(o.$$scope={dirty:e,ctx:n}),!c&&2&e&&(c=!0,o.value=n[1],Cn((function(){return c=!1}))),x.$set(o);var a={};3&e&&(a.disabled=!n[1]||!1===n[0].done),131073&e&&(a.$$scope={dirty:e,ctx:n}),k.$set(a);var u={};131072&e&&(u.$$scope={dirty:e,ctx:n}),!l&&4&e&&(l=!0,u.value=n[2],Cn((function(){return l=!1}))),C.$set(u);var s={};6&e&&(s.disabled=!n[1]||!n[2]),131072&e&&(s.$$scope={dirty:e,ctx:n}),R.$set(s),n[0].error?S?S.p(n,e):((S=Mc(n)).c(),S.m(i,v)):S&&(S.d(1),S=null),null!==n[0].done?N?N.p(n,e):((N=jc(n)).c(),N.m(i,null)):N&&(N.d(1),N=null)},i:function(n){$||(Un(b.$$.fragment,n),Un(x.$$.fragment,n),Un(k.$$.fragment,n),Un(C.$$.fragment,n),Un(R.$$.fragment,n),$=!0)},o:function(n){In(b.$$.fragment,n),In(x.$$.fragment,n),In(k.$$.fragment,n),In(C.$$.fragment,n),In(R.$$.fragment,n),$=!1},d:function(r){Gn(b,r),r&&K(t),r&&K(e),Gn(x),Gn(k),Gn(C),Gn(R),S&&S.d(),N&&N.d(),n[13](null),y()}}}function Ic(n,t,e){var r,o=gn("user");j(n,o,(function(n){return e(10,r=n)}));var i,a,c={dialogs:[],done:null,n_dialogs:0},u="",s="";function f(n){var t="/list"+(s.length?" /"+s+"/":"");"click"==n.type&&c.done&&(t+=" refresh"),a&&clearTimeout(a),o.omnibus.send({connection_id:u,message:t},(function(t){var r=rt(t);e(0,c=r?{dialogs:[],done:!0,n_dialogs:0,error:r}:t);var o=n.interval?n.interval+500:500;o>2e3&&(o=2e3),r||t.done||(a=setTimeout((function(){return f({interval:o})}),o))}))}ne.update({title:pe("Add conversation")}),mn((function(){return ne.urlToForm(i)}));var d,l=tt(f,250);return n.$$.update=function(){1024&n.$$.dirty&&e(4,d=Array.from(r.connections.keys()).map((function(n){return[n]}))),18&n.$$.dirty&&(u||e(1,u=d[0]?d[0][0]:""))},[c,u,s,i,d,o,function(n){var t=n&&n.target&&n.target.closest("a");t&&t.href&&e(2,s=t.href.replace(/.*#add:/,"")),u&&s&&o.findDialog({connection_id:u}).send("/join "+s)},f,l,a,r,function(n){e(1,u=n),e(4,d),e(10,r)},function(n){e(2,s=n)},function(n){yn[n?"unshift":"push"]((function(){e(3,i=n)}))}]}var zc=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Oc()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,Ic,Uc,P,{}),r}return u}(Yn);function Bc(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function qc(n,t,e){var r=n.slice();return r[2]=t[e],r}function Hc(n){var t,e;return{c:function(){(t=W("h1")).textContent="".concat(pe("Help")),(e=W("small")).textContent="v".concat(process.env.version)},m:function(n,r){F(n,t,r),F(n,e,r)},p:O,d:function(n){n&&K(t),n&&K(e)}}}function Fc(n){var t,e,r,o,i=n[2].example+"",a=pe(n[2].description)+"";return{c:function(){t=W("dt"),e=V(i),r=W("dd"),o=V(a)},m:function(n,i){F(n,t,i),H(t,e),F(n,r,i),H(r,o)},p:O,d:function(n){n&&K(t),n&&K(r)}}}function Kc(n){var t;return{c:function(){t=V("Loading")},m:function(n,e){F(n,t,e)},d:function(n){n&&K(t)}}}function Gc(n){var t;return{c:function(){t=V("Not found")},m:function(n,e){F(n,t,e)},d:function(n){n&&K(t)}}}function Wc(n){var t;return{c:function(){t=V("Offline")},m:function(n,e){F(n,t,e)},d:function(n){n&&K(t)}}}function Vc(n){var t;return{c:function(){t=V("Unknown")},m:function(n,e){F(n,t,e)},d:function(n){n&&K(t)}}}function Yc(n){for(var t,e,r,o,i,a,c,u,s,f,d,l,h,m,g,v,$,y,b,w,_,x,k,E,C,R,S,N,D,P,M,j,A,T,L,U,I,z,B,q,Q,J,nn,tn,en,rn,on,an,un,sn,fn,dn,ln,pn,hn,mn,gn,vn,$n,yn,bn,wn,_n,xn,kn,En,On,Cn,Rn,Sn,Nn,Dn,Pn,Mn,jn,An,Tn,Ln,zn,Bn,qn,Hn,Wn,Vn,Yn,Qn,Zn,Jn,Xn,nt,tt,et,rt=pe("Jump to:")+"",ot=he('Got any questions? Come and talk to us in the "#convos" channel on https://freenode.net.')+"",it=he("More information can also be found on https://convos.by.")+"",at=he('Using "*" around some text, will convert it into *italic*, **bold** or ***italic bold***.')+"",ct=he("Using backticks around some text, will format it as a `code fragment`.")+"",ut=pe("Contact admin")+"",st=new ea({props:{$$slots:{default:[Hc]},$$scope:{ctx:n}}}),ft=ia,lt=[],pt=0;pt<ft.length;pt+=1)lt[pt]=Fc(qc(n,ft,pt));var ht,mt,gt,vt,$t="Convos"!=process.env.organization_name&&"https://convos.by"!=process.env.organization_url&&(vt=process.env.organization_name+"",{c:function(){ht=W("li"),mt=W("a"),gt=V(vt),X(mt,"href",process.env.organization_url),X(mt,"target","_blank")},m:function(n,t){F(n,ht,t),H(ht,mt),H(mt,gt)},p:O,d:function(n){n&&K(ht)}}),yt=new kr({props:{href:"/err/loading",$$slots:{default:[Kc]},$$scope:{ctx:n}}}),bt=new kr({props:{href:"/err/not_found",$$slots:{default:[Gc]},$$scope:{ctx:n}}}),wt=new kr({props:{href:"/err/offline",$$slots:{default:[Wc]},$$scope:{ctx:n}}}),_t=new kr({props:{href:"/err/unknown",$$slots:{default:[Vc]},$$scope:{ctx:n}}});return{c:function(){Fn(st.$$.fragment),t=Y(),e=W("main"),r=W("p"),o=V(rt),i=Y(),(a=W("a")).textContent="".concat(pe("Shortcuts")),c=V(",\n    "),(u=W("a")).textContent="".concat(pe("Autocomplete")),s=V(",\n    "),(f=W("a")).textContent="".concat(pe("Text formatting")),d=V(",\n    "),(l=W("a")).textContent="".concat(pe("Available commands")),h=V(",\n    "),(m=W("a")).textContent="".concat(pe("Other resources")),g=V("."),v=Y(),$=W("p"),b=Y(),_=Y(),(x=W("h2")).textContent="".concat(pe("Shortcuts")),k=Y(),E=W("dl"),(C=W("dt")).textContent="".concat(pe("shift+enter")),(R=W("dd")).textContent="".concat(pe("Shift focus between chat input and search in sidebar.")),(S=W("dt")).textContent="".concat(pe("Open conversation or connection settings")),(N=W("dd")).textContent="".concat(pe("Clicking on the icon next to the conversation name will take you to settings.")),D=Y(),(P=W("h2")).textContent="".concat(pe("Autocomplete")),M=Y(),(j=W("p")).textContent="".concat(pe("The following rules apply when typing a message:")),A=Y(),T=W("dl"),(L=W("dt")).textContent="@nick",(U=W("dd")).textContent="".concat(pe('"@" followed by a character will show matching nicks in the current conversation.')),(I=W("dt")).textContent=":emoji_name",(z=W("dd")).textContent="".concat(pe('":" followed by a character will show matching emojis.')),(B=W("dt")).textContent="/command",(q=W("dd")).textContent="".concat(pe('"/" will show the available commands.')),(Q=W("dt")).textContent="#conversation",(J=W("dd")).textContent="".concat(pe('"#" will show the matching conversation names.')),nn=Y(),(tn=W("h2")).textContent="".concat(pe("Text formatting")),en=Y(),(rn=W("p")).textContent="".concat(pe("Convos supports some special way of formatting text:")),on=Y(),an=W("dl"),(un=W("dt")).textContent="".concat(Object.keys(ce).sort().map(n[1]).join(", ")),(sn=W("dd")).textContent="".concat(pe("Will be automatically converted into emojis.")),(fn=W("dt")).textContent="".concat(pe("> some text")),(dn=W("dd")).textContent="".concat(pe('A line starting with ">" will be converted into a quote.')),(ln=W("dt")).textContent="".concat(pe("*some text*, **some text**, ***some text***")),pn=W("dd"),(hn=W("dt")).textContent="".concat(pe("`some fragment`")),mn=W("dd"),(gn=W("dt")).textContent="https://...",(vn=W("dd")).textContent="".concat(pe("URLs will be converted to links, and might be embedded in the chat.")),$n=Y(),(yn=W("h2")).textContent="".concat(pe("Available commands")),bn=Y(),wn=W("dl");for(var p=0;p<lt.length;p+=1)lt[p].c();_n=Y(),(xn=W("h2")).textContent="".concat(pe("Other resources")),kn=Y(),En=W("ul"),On=W("li"),(Cn=W("a")).textContent="".concat(pe("Project homepage")),Rn=Y(),Sn=W("li"),(Nn=W("a")).textContent="".concat(pe("Bug/issue tracker")),Dn=Y(),Pn=W("li"),(Mn=W("a")).textContent="".concat(pe("Source code")),jn=Y(),$t&&$t.c(),An=Y(),Tn=W("li"),Ln=W("a"),zn=V(ut),Bn=Y(),(qn=W("h2")).textContent="".concat(pe("Demo error pages")),Hn=Y(),Wn=W("ul"),Vn=W("li"),Fn(yt.$$.fragment),Yn=Y(),Qn=W("li"),Fn(bt.$$.fragment),Zn=Y(),Jn=W("li"),Fn(wt.$$.fragment),Xn=Y(),nt=W("li"),Fn(_t.$$.fragment),X(a,"href","#shortcuts"),X(u,"href","#autocomplete"),X(f,"href","#formatting"),X(l,"href","#commands"),X(m,"href","#resources"),y=new cn(ot,b),w=new cn(it,null),X(x,"id","shortcuts"),X(P,"id","autocomplete"),X(tn,"id","formatting"),X(yn,"id","commands"),X(xn,"id","resources"),X(Cn,"href","https://convos.by"),X(Cn,"target","_blank"),X(Nn,"href","https://github.com/Nordaaker/convos/issues"),X(Nn,"target","_blank"),X(Mn,"href","https://github.com/Nordaaker/convos"),X(Mn,"target","_blank"),X(Ln,"href",process.env.contact),X(Ln,"target","_blank"),X(qn,"id","fallback"),X(e,"class","main")},m:function(n,p,O){Kn(st,n,p),F(n,t,p),F(n,e,p),H(e,r),H(r,o),H(r,i),H(r,a),H(r,c),H(r,u),H(r,s),H(r,f),H(r,d),H(r,l),H(r,h),H(r,m),H(r,g),H(e,v),H(e,$),y.m($),H($,b),w.m($),H(e,_),H(e,x),H(e,k),H(e,E),H(E,C),H(E,R),H(E,S),H(E,N),H(e,D),H(e,P),H(e,M),H(e,j),H(e,A),H(e,T),H(T,L),H(T,U),H(T,I),H(T,z),H(T,B),H(T,q),H(T,Q),H(T,J),H(e,nn),H(e,tn),H(e,en),H(e,rn),H(e,on),H(e,an),H(an,un),H(an,sn),H(an,fn),H(an,dn),H(an,ln),H(an,pn),pn.innerHTML=at,H(an,hn),H(an,mn),mn.innerHTML=ct,H(an,gn),H(an,vn),H(e,$n),H(e,yn),H(e,bn),H(e,wn);for(var K=0;K<lt.length;K+=1)lt[K].m(wn,null);H(e,_n),H(e,xn),H(e,kn),H(e,En),H(En,On),H(On,Cn),H(En,Rn),H(En,Sn),H(Sn,Nn),H(En,Dn),H(En,Pn),H(Pn,Mn),H(En,jn),$t&&$t.m(En,null),H(En,An),H(En,Tn),H(Tn,Ln),H(Ln,zn),H(e,Bn),H(e,qn),H(e,Hn),H(e,Wn),H(Wn,Vn),Kn(yt,Vn,null),H(Wn,Yn),H(Wn,Qn),Kn(bt,Qn,null),H(Wn,Zn),H(Wn,Jn),Kn(wt,Jn,null),H(Wn,Xn),H(Wn,nt),Kn(_t,nt,null),tt=!0,O&&et(),et=Z(r,"click",dt)},p:function(n,t){var e=p(t,1)[0],r={};if(32&e&&(r.$$scope={dirty:e,ctx:n}),st.$set(r),0&e){var o;for(ft=ia,o=0;o<ft.length;o+=1){var i=qc(n,ft,o);lt[o]?lt[o].p(i,e):(lt[o]=Fc(i),lt[o].c(),lt[o].m(wn,null))}for(;o<lt.length;o+=1)lt[o].d(1);lt.length=ft.length}"Convos"!=process.env.organization_name&&"https://convos.by"!=process.env.organization_url&&$t.p(n,e);var a={};32&e&&(a.$$scope={dirty:e,ctx:n}),yt.$set(a);var c={};32&e&&(c.$$scope={dirty:e,ctx:n}),bt.$set(c);var u={};32&e&&(u.$$scope={dirty:e,ctx:n}),wt.$set(u);var s={};32&e&&(s.$$scope={dirty:e,ctx:n}),_t.$set(s)},i:function(n){tt||(Un(st.$$.fragment,n),Un(yt.$$.fragment,n),Un(bt.$$.fragment,n),Un(wt.$$.fragment,n),Un(_t.$$.fragment,n),tt=!0)},o:function(n){In(st.$$.fragment,n),In(yt.$$.fragment,n),In(bt.$$.fragment,n),In(wt.$$.fragment,n),In(_t.$$.fragment,n),tt=!1},d:function(n){Gn(st,n),n&&K(t),n&&K(e),G(lt,n),$t&&$t.d(),Gn(yt),Gn(bt),Gn(wt),Gn(_t),et()}}}function Qc(n,t,e){var r;j(n,ne,(function(n){return e(0,r=n)})),ne.update({title:pe("Help")});return n.$$.update=function(){1&n.$$.dirty&&dt(r.hash||0)},[r,function(n){return ce[n]}]}var Zc=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Bc()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,Qc,Yc,P,{}),r}return u}(Yn);function Jc(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Xc(n,t,e){var r,o=gn("user");return j(n,o,(function(n){return e(1,r=n)})),n.$$.update=function(){2&n.$$.dirty&&function(n){var t=n.dialogs()[0],e=ne.lastUrl?ne.lastUrl:t?t.path:"/settings/connection";n.is("loading")||(n.is("authenticated")?ne.go(e):ne.go("/login"))}(r)},[o]}var nu=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Jc()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,Xc,null,P,{}),r}return u}(Yn);function tu(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function eu(n){var t,e,r,o,i=new St({props:{name:"search"}});return{c:function(){t=W("h1"),e=W("a"),Fn(i.$$.fragment),(r=W("span")).textContent="".concat(pe("Search")),X(e,"href","#activeMenu:nav"),X(e,"tabindex","-1")},m:function(n,a){F(n,t,a),H(t,e),Kn(i,e,null),H(e,r),o=!0},p:O,i:function(n){o||(Un(i.$$.fragment,n),o=!0)},o:function(n){In(i.$$.fragment,n),o=!1},d:function(n){n&&K(t),Gn(i)}}}function ru(n){var t,e,r,o,i,a=new ea({props:{$$slots:{default:[eu]},$$scope:{ctx:n}}}),c=new Xa({props:{dialog:n[2],input:null}}),u={dialog:n[2]},s=new la({props:u});return n[5](s),{c:function(){Fn(a.$$.fragment),t=Y(),e=W("main"),r=W("div"),Fn(c.$$.fragment),o=Y(),Fn(s.$$.fragment),X(r,"class","messages-container"),on(r,"has-notifications",n[1].messages.length),X(e,"class","main")},m:function(n,u){Kn(a,n,u),F(n,t,u),F(n,e,u),H(e,r),Kn(c,r,null),F(n,o,u),Kn(s,n,u),i=!0},p:function(n,t){var e=p(t,1)[0],o={};64&e&&(o.$$scope={dirty:e,ctx:n}),a.$set(o),2&e&&on(r,"has-notifications",n[1].messages.length);s.$set({})},i:function(n){i||(Un(a.$$.fragment,n),Un(c.$$.fragment,n),Un(s.$$.fragment,n),i=!0)},o:function(n){In(a.$$.fragment,n),In(c.$$.fragment,n),In(s.$$.fragment,n),i=!1},d:function(r){Gn(a,r),r&&K(t),r&&K(e),Gn(c),r&&K(o),n[5](null),Gn(s,r)}}}function ou(n,t,e){var r,o,i=gn("user"),a=i.search;function c(n,t){var e=n.param("q");t.query&&"string"==typeof e&&(o.setValue(e),a.load({match:e}),ot("chat_input"),n.update({title:pe('Search for "%1"',e)}))}return j(n,a,(function(n){return e(1,r=n)})),mn((function(){return c(ne,{query:!0}),ne.on("update",c)})),[o,r,a,i,c,function(n){yn[n?"unshift":"push"]((function(){e(0,o=n)}))}]}var iu=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(tu()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,ou,ru,P,{}),r}return u}(Yn);function au(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function cu(n){var t;return{c:function(){(t=W("h1")).textContent="".concat(pe("Account"))},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function uu(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Email")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function su(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Notification keywords")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function fu(n){var t,e;function r(t){n[13].call(null,t)}var o={name:"notifications",$$slots:{label:[du]},$$scope:{ctx:n}};void 0!==n[5]&&(o.checked=n[5]);var i=new qt({props:o});return yn.push((function(){return Hn(i,"checked",r)})),{c:function(){Fn(i.$$.fragment)},m:function(n,t){Kn(i,n,t),e=!0},p:function(n,e){var r={};262144&e&&(r.$$scope={dirty:e,ctx:n}),!t&&32&e&&(t=!0,r.checked=n[5],Cn((function(){return t=!1}))),i.$set(r)},i:function(n){e||(Un(i.$$.fragment,n),e=!0)},o:function(n){In(i.$$.fragment,n),e=!1},d:function(n){Gn(i,n)}}}function du(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Enable notifications")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function lu(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Expand URL to media")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function pu(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Theme")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function hu(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Color scheme")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function mu(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Password")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function gu(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Repeat password")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function vu(n){var t,e=pe("Save settings")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function $u(n){var t;return{c:function(){(t=W("p")).textContent="".concat(pe("You cannot receive notifications, because it is denied by your browser.")),X(t,"class","error")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function yu(n){var t,e,r,o,i,a,c,u,s,f,d,l,h,m,g,v,$,y,b,w,_,x=new ea({props:{$$slots:{default:[cu]},$$scope:{ctx:n}}}),k=new Ue({props:{type:"email",name:"email",value:n[6].email,readonly:!0,$$slots:{label:[uu]},$$scope:{ctx:n}}}),E=new Ue({props:{name:"highlight_keywords",placeholder:pe("whatever, keywords"),value:n[11],$$slots:{label:[su]},$$scope:{ctx:n}}}),O=!n[3]&&fu(n);function C(t){n[14].call(null,t)}var R={name:"expand_url",$$slots:{label:[lu]},$$scope:{ctx:n}};void 0!==n[2]&&(R.checked=n[2]);var S=new qt({props:R});function N(t){n[15].call(null,t)}yn.push((function(){return Hn(S,"checked",C)}));var D={name:"theme",options:n[10],$$slots:{label:[pu]},$$scope:{ctx:n}};void 0!==n[4]&&(D.value=n[4]);var P=new Ec({props:D});function M(t){n[16].call(null,t)}yn.push((function(){return Hn(P,"value",N)}));var j={name:"color_scheme",options:n[7],$$slots:{label:[hu]},$$scope:{ctx:n}};void 0!==n[1]&&(j.value=n[1]);var A=new Ec({props:j});yn.push((function(){return Hn(A,"value",M)}));var T=new Ue({props:{type:"password",name:"password",autocomplete:"new-password",$$slots:{label:[mu]},$$scope:{ctx:n}}}),L=new Ue({props:{type:"password",name:"password_again",autocomplete:"new-password",$$slots:{label:[gu]},$$scope:{ctx:n}}}),U=new Tt({props:{icon:"save",op:n[9],$$slots:{default:[vu]},$$scope:{ctx:n}}}),I=new be({props:{op:n[9]}}),z=n[3]&&$u();return{c:function(){Fn(x.$$.fragment),t=Y(),e=W("main"),r=W("form"),Fn(k.$$.fragment),o=Y(),Fn(E.$$.fragment),i=Y(),O&&O.c(),a=Y(),Fn(S.$$.fragment),u=Y(),Fn(P.$$.fragment),f=Y(),Fn(A.$$.fragment),l=Y(),Fn(T.$$.fragment),h=Y(),Fn(L.$$.fragment),m=Y(),(g=W("p")).textContent="".concat(pe("Leave the password fields empty to keep the current password.")),v=Y(),$=W("div"),Fn(U.$$.fragment),y=Y(),Fn(I.$$.fragment),b=Y(),z&&z.c(),X($,"class","form-actions"),X(r,"method","post"),X(e,"class","main")},m:function(c,s,d){Kn(x,c,s),F(c,t,s),F(c,e,s),H(e,r),Kn(k,r,null),H(r,o),Kn(E,r,null),H(r,i),O&&O.m(r,null),H(r,a),Kn(S,r,null),H(r,u),Kn(P,r,null),H(r,f),Kn(A,r,null),H(r,l),Kn(T,r,null),H(r,h),Kn(L,r,null),H(r,m),H(r,g),H(r,v),H(r,$),Kn(U,$,null),H(r,y),Kn(I,r,null),H(r,b),z&&z.m(r,null),n[17](r),w=!0,d&&_(),_=Z(r,"submit",J(n[12]))},p:function(n,t){var e=p(t,1)[0],o={};262144&e&&(o.$$scope={dirty:e,ctx:n}),x.$set(o);var i={};64&e&&(i.value=n[6].email),262144&e&&(i.$$scope={dirty:e,ctx:n}),k.$set(i);var u={};262144&e&&(u.$$scope={dirty:e,ctx:n}),E.$set(u),n[3]?O&&(Tn(),In(O,1,1,(function(){O=null})),Ln()):O?(O.p(n,e),Un(O,1)):((O=fu(n)).c(),Un(O,1),O.m(r,a));var f={};262144&e&&(f.$$scope={dirty:e,ctx:n}),!c&&4&e&&(c=!0,f.checked=n[2],Cn((function(){return c=!1}))),S.$set(f);var l={};262144&e&&(l.$$scope={dirty:e,ctx:n}),!s&&16&e&&(s=!0,l.value=n[4],Cn((function(){return s=!1}))),P.$set(l);var h={};262144&e&&(h.$$scope={dirty:e,ctx:n}),!d&&2&e&&(d=!0,h.value=n[1],Cn((function(){return d=!1}))),A.$set(h);var m={};262144&e&&(m.$$scope={dirty:e,ctx:n}),T.$set(m);var g={};262144&e&&(g.$$scope={dirty:e,ctx:n}),L.$set(g);var v={};262144&e&&(v.$$scope={dirty:e,ctx:n}),U.$set(v),n[3]?z?z.p(n,e):((z=$u()).c(),z.m(r,null)):z&&(z.d(1),z=null)},i:function(n){w||(Un(x.$$.fragment,n),Un(k.$$.fragment,n),Un(E.$$.fragment,n),Un(O),Un(S.$$.fragment,n),Un(P.$$.fragment,n),Un(A.$$.fragment,n),Un(T.$$.fragment,n),Un(L.$$.fragment,n),Un(U.$$.fragment,n),Un(I.$$.fragment,n),w=!0)},o:function(n){In(x.$$.fragment,n),In(k.$$.fragment,n),In(E.$$.fragment,n),In(O),In(S.$$.fragment,n),In(P.$$.fragment,n),In(A.$$.fragment,n),In(T.$$.fragment,n),In(L.$$.fragment,n),In(U.$$.fragment,n),In(I.$$.fragment,n),w=!1},d:function(r){Gn(x,r),r&&K(t),r&&K(e),Gn(k),Gn(E),O&&O.d(),Gn(S),Gn(P),Gn(A),Gn(T),Gn(L),Gn(U),Gn(I),z&&z.d(),n[17](null),_()}}}function bu(n,t,e){var r,o=gn("user");j(n,o,(function(n){return e(6,r=n)}));var i,a=o.api.operation("updateUser"),c=Object.keys(o.themes).map((function(n){var t=o.themes[n].name,e=Object.keys(o.themes[n].color_schemes||{}).filter((function(n){return"default"!=n}));return e.length&&(t+=" ("+e.sort().join("/")+")"),[n,t]})),u=o.colorScheme,s=o.embedMaker.expandUrlToMedia,f="denied"==o.omnibus.notifyPermission,d=o.theme,l=o.omnibus.wantNotifications,p=o.highlight_keywords.join(", ");return ne.update({title:pe("Account")}),a.on("start",(function(n){n.body.password||delete n.body.password,n.body.highlight_keywords=n.body.highlight_keywords.split(/[.,\s]+/).map((function(n){return n.trim()}))})),[i,u,s,f,d,l,r,[["auto","Auto"],["dark","Dark"],["light","Light"]],o,a,c,p,function(n){var t=n.target,r=[t.password.value,t.password_again.value];if(l&&o.omnibus.requestPermissionToNotify((function(n){"denied"==n&&(e(5,l=!1),e(3,f=!0))})),r.join("").length&&r[0]!=r[1])return a.error("Passwords does not match.");o.embedMaker.update({expandUrlToMedia:s}),o.update({colorScheme:u,theme:d}),a.perform(n.target)},function(n){e(5,l=n)},function(n){e(2,s=n)},function(n){e(4,d=n)},function(n){e(1,u=n)},function(n){yn[n?"unshift":"push"]((function(){e(0,i=n)}))}]}var wu=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(au()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,bu,yu,P,{}),r}return u}(Yn);function _u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function xu(n){var t;return{c:function(){(t=W("h1")).textContent="".concat(pe("Global settings"))},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function ku(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("User email")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Eu(n){var t,e,r,o,i,a,c,u,s,f,d,l,p,h,m=he(n[1].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"",g=he("The link is valid until **%1**.",new Date(n[1].expires).toLocaleString())+"",v=n[1].url+"";return{c:function(){(t=W("h3")).textContent="".concat(pe("A link was generated")),e=Y(),r=W("p"),i=Y(),c=Y(),u=W("a"),s=V(v),d=Y(),l=W("p"),(p=W("small")).textContent="".concat(pe("Tip: Clicking on the link will copy it to your clipboard.")),o=new cn(m,i),a=new cn(g,null),X(u,"href",f=n[1].url)},m:function(f,m,g){F(f,t,m),F(f,e,m),F(f,r,m),o.m(r),H(r,i),a.m(r),F(f,c,m),F(f,u,m),H(u,s),F(f,d,m),F(f,l,m),H(l,p),g&&h(),h=Z(u,"click",J(n[5]))},p:function(n,t){2&t&&m!==(m=he(n[1].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"")&&o.p(m),2&t&&g!==(g=he("The link is valid until **%1**.",new Date(n[1].expires).toLocaleString())+"")&&a.p(g),2&t&&v!==(v=n[1].url+"")&&tn(s,v),2&t&&f!==(f=n[1].url)&&X(u,"href",f)},d:function(n){n&&K(t),n&&K(e),n&&K(r),n&&K(c),n&&K(u),n&&K(d),n&&K(l),h()}}}function Ou(n){var t,e=pe("Generate link")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Cu(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Organization name")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Ru(n){var t;return{c:function(){(t=W("p")).textContent="".concat(pe("Can be changed if you want to add a touch of your organization.")),X(t,"class","help"),X(t,"slot","help")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Su(n){var t;return{c:function(){t=Y()},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Nu(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Organization URL")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Du(n){var t;return{c:function(){(t=W("p")).textContent="".concat(pe('Used together with "Organization name" to add a link to your organization on the login screen.')),X(t,"class","help"),X(t,"slot","help")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Pu(n){var t;return{c:function(){t=Y()},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Mu(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Admin email")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function ju(n){var t;return{c:function(){(t=W("p")).textContent="".concat(pe("This email can be used by users to get in touch with the Convos admin.")),X(t,"class","help"),X(t,"slot","help")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Au(n){var t;return{c:function(){t=Y()},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Tu(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Default connection URL")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Lu(n){var t;return{c:function(){(t=W("p")).textContent="".concat(pe("This is the default connection new users will connect to.")," \n        ").concat(pe('The path part is the default channel to join. "%%23convos" means "#convos".')),X(t,"class","help"),X(t,"slot","help")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Uu(n){var t;return{c:function(){t=Y()},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Iu(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Force default connection")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function zu(n){var t;return{c:function(){(t=W("span")).textContent="".concat(pe("Registration is open to public")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Bu(n){var t,e=pe("Save settings")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function qu(n){var t,e,r,o,i,a,c,u,s,f,d,l,h,m,g,v,$,y,b,w,_,x,k,E,O,C,R,S,D,P,M,j,A,T,L,U=he("These settings control what users experience when they visit [%1](%1).",process.env.base_url)+"",I=new ea({props:{$$slots:{default:[xu]},$$scope:{ctx:n}}}),z=new Ue({props:{type:"email",name:"email",placeholder:pe("user@example.com"),$$slots:{label:[ku]},$$scope:{ctx:n}}}),B=n[1].url&&Eu(n),q=new Tt({props:{icon:"save",op:n[2],$$slots:{default:[Ou]},$$scope:{ctx:n}}}),G=new be({props:{op:n[2]}});function V(t){n[10].call(null,t)}var Q={name:"organization_name",placeholder:pe("Nordaaker"),$$slots:{default:[Su],help:[Ru],label:[Cu]},$$scope:{ctx:n}};void 0!==n[0].organization_name&&(Q.value=n[0].organization_name);var nn=new Ue({props:Q});function tn(t){n[11].call(null,t)}yn.push((function(){return Hn(nn,"value",V)}));var en={name:"organization_url",placeholder:pe("https://convos.by"),$$slots:{default:[Pu],help:[Du],label:[Nu]},$$scope:{ctx:n}};void 0!==n[0].organization_url&&(en.value=n[0].organization_url);var rn=new Ue({props:en});function on(t){n[12].call(null,t)}yn.push((function(){return Hn(rn,"value",tn)}));var an={name:"contact",placeholder:pe("Ex: jhthorsen@cpan.org"),$$slots:{default:[Au],help:[ju],label:[Mu]},$$scope:{ctx:n}};void 0!==n[0].contact&&(an.value=n[0].contact);var cn=new Ue({props:an});function un(t){n[13].call(null,t)}yn.push((function(){return Hn(cn,"value",on)}));var sn={name:"default_connection",placeholder:pe("irc://chat.freenode.net:6697/%%23convos"),$$slots:{default:[Uu],help:[Lu],label:[Tu]},$$scope:{ctx:n}};void 0!==n[0].default_connection&&(sn.value=n[0].default_connection);var fn=new Ue({props:sn});yn.push((function(){return Hn(fn,"value",un)}));var dn=new qt({props:{name:"forced_connection",checked:n[0].forced_connection,$$slots:{label:[Iu]},$$scope:{ctx:n}}}),ln=new qt({props:{name:"open_to_public",checked:n[0].open_to_public,$$slots:{label:[zu]},$$scope:{ctx:n}}}),pn=new Tt({props:{icon:"save",op:n[3],$$slots:{default:[Bu]},$$scope:{ctx:n}}}),hn=new be({props:{op:n[3]}});return{c:function(){Fn(I.$$.fragment),t=Y(),e=W("main"),r=W("form"),(o=W("h2")).textContent="".concat(pe("Recover or invite")),i=Y(),(a=W("p")).textContent="".concat(pe("Using this form, you can generate an invite link for new users, or a recover password link for existing users.")),c=Y(),Fn(z.$$.fragment),u=Y(),B&&B.c(),s=Y(),f=W("div"),Fn(q.$$.fragment),d=Y(),Fn(G.$$.fragment),l=Y(),h=W("form"),(m=W("h2")).textContent="".concat(pe("Convos settings")),g=Y(),v=W("p"),$=Y(),Fn(nn.$$.fragment),b=Y(),Fn(rn.$$.fragment),_=Y(),Fn(cn.$$.fragment),k=Y(),Fn(fn.$$.fragment),O=Y(),Fn(dn.$$.fragment),C=Y(),(R=W("p")).textContent="".concat(pe("Tick this box if you want to prevent users from creating custom connections.")),S=Y(),Fn(ln.$$.fragment),D=Y(),(P=W("p")).textContent="".concat(pe("Tick this box if you want users to be able to register without an invite URL.")),M=Y(),j=W("div"),Fn(pn.$$.fragment),A=Y(),Fn(hn.$$.fragment),X(f,"class","form-actions"),X(r,"id","recover-or-invite"),X(r,"method","post"),X(R,"class","help"),X(P,"class","help"),X(j,"class","form-actions"),X(h,"id","convos-settings"),X(h,"method","post"),X(e,"class","main")},m:function(p,y,w){Kn(I,p,y),F(p,t,y),F(p,e,y),H(e,r),H(r,o),H(r,i),H(r,a),H(r,c),Kn(z,r,null),H(r,u),B&&B.m(r,null),H(r,s),H(r,f),Kn(q,f,null),H(r,d),Kn(G,r,null),H(e,l),H(e,h),H(h,m),H(h,g),H(h,v),v.innerHTML=U,H(h,$),Kn(nn,h,null),H(h,b),Kn(rn,h,null),H(h,_),Kn(cn,h,null),H(h,k),Kn(fn,h,null),H(h,O),Kn(dn,h,null),H(h,C),H(h,R),H(h,S),Kn(ln,h,null),H(h,D),H(h,P),H(h,M),H(h,j),Kn(pn,j,null),H(h,A),Kn(hn,h,null),T=!0,w&&N(L),L=[Z(r,"submit",J(n[4])),Z(h,"submit",J(n[6]))]},p:function(n,t){var e=p(t,1)[0],o={};16384&e&&(o.$$scope={dirty:e,ctx:n}),I.$set(o);var i={};16384&e&&(i.$$scope={dirty:e,ctx:n}),z.$set(i),n[1].url?B?B.p(n,e):((B=Eu(n)).c(),B.m(r,s)):B&&(B.d(1),B=null);var a={};16384&e&&(a.$$scope={dirty:e,ctx:n}),q.$set(a);var c={};16384&e&&(c.$$scope={dirty:e,ctx:n}),!y&&1&e&&(y=!0,c.value=n[0].organization_name,Cn((function(){return y=!1}))),nn.$set(c);var u={};16384&e&&(u.$$scope={dirty:e,ctx:n}),!w&&1&e&&(w=!0,u.value=n[0].organization_url,Cn((function(){return w=!1}))),rn.$set(u);var f={};16384&e&&(f.$$scope={dirty:e,ctx:n}),!x&&1&e&&(x=!0,f.value=n[0].contact,Cn((function(){return x=!1}))),cn.$set(f);var d={};16384&e&&(d.$$scope={dirty:e,ctx:n}),!E&&1&e&&(E=!0,d.value=n[0].default_connection,Cn((function(){return E=!1}))),fn.$set(d);var l={};1&e&&(l.checked=n[0].forced_connection),16384&e&&(l.$$scope={dirty:e,ctx:n}),dn.$set(l);var h={};1&e&&(h.checked=n[0].open_to_public),16384&e&&(h.$$scope={dirty:e,ctx:n}),ln.$set(h);var m={};16384&e&&(m.$$scope={dirty:e,ctx:n}),pn.$set(m)},i:function(n){T||(Un(I.$$.fragment,n),Un(z.$$.fragment,n),Un(q.$$.fragment,n),Un(G.$$.fragment,n),Un(nn.$$.fragment,n),Un(rn.$$.fragment,n),Un(cn.$$.fragment,n),Un(fn.$$.fragment,n),Un(dn.$$.fragment,n),Un(ln.$$.fragment,n),Un(pn.$$.fragment,n),Un(hn.$$.fragment,n),T=!0)},o:function(n){In(I.$$.fragment,n),In(z.$$.fragment,n),In(q.$$.fragment,n),In(G.$$.fragment,n),In(nn.$$.fragment,n),In(rn.$$.fragment,n),In(cn.$$.fragment,n),In(fn.$$.fragment,n),In(dn.$$.fragment,n),In(ln.$$.fragment,n),In(pn.$$.fragment,n),In(hn.$$.fragment,n),T=!1},d:function(n){Gn(I,n),n&&K(t),n&&K(e),Gn(z),B&&B.d(),Gn(q),Gn(G),Gn(nn),Gn(rn),Gn(cn),Gn(fn),Gn(dn),Gn(ln),Gn(pn),Gn(hn),N(L)}}}function Hu(n,t,e){var r,o=gn("user"),i=o.api.operation("getSettings"),a=o.api.operation("inviteUser");j(n,a,(function(n){return e(7,r=n)}));var c,u=o.api.operation("updateSettings"),s={};return u.on("start",(function(n){n.body.contact&&(n.body.contact="mailto:"+n.body.contact),n.body.forced_connection=!!n.body.forced_connection,n.body.open_to_public=!!n.body.open_to_public})),ne.update({title:pe("Global settings")}),mn(Jn(Qn.mark((function n(){var t;return Qn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.perform();case 2:(t=i.res.body).contact=t.contact.replace(/mailto:/,""),e(0,s=t);case 5:case"end":return n.stop()}}),n)})))),n.$$.update=function(){128&n.$$.dirty&&e(1,c=r.res.body||{})},[s,c,a,u,function(n){a.perform(n.target)},function(n){var t=function(n){var t=document.createElement("textarea");t.value=n.textContent||n.value,t.style.opacity=0,t.style.position="absolute",document.body.appendChild(t);try{t.focus(),t.select(),document.execCommand("copy")}catch(n){t.value="",console.log("copyToClipboard() failed:",n)}return document.body.removeChild(t),t.value}(n.target);t&&o.omnibus.notify("Invite link copied",t,{force:!0})},function(n){u.perform(n.target)},r,o,i,function(n){s.organization_name=n,e(0,s)},function(n){s.organization_url=n,e(0,s)},function(n){s.contact=n,e(0,s)},function(n){s.default_connection=n,e(0,s)}]}var Fu=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(_u()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,Hu,qu,P,{}),r}return u}(Yn);function Ku(n){return function(t){for(var e=document.querySelectorAll(".js-remove"),r=0;r<e.length;r++)e[r].remove();var o,i,a,c,u=-1==[eo,Mo].indexOf(n);o="body",i=/(is-logged-)\S+/,a=u?"in":"out",(c=document.querySelector(o)).className=c.className.replace(i,(function(n,t){return t+a})),t.update({component:t.match.match(/^\W*$/)?nu:n,requireLogin:u}),u&&t.update({lastUrl:location.href})}}function Gu(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Wu=new(function(t){c(a,t);var e,r=(e=a,function(){var n,t=i(e);if(Gu()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function a(){var t;return n(this,a),(t=r.call(this)).prop("rw","height",0),t.prop("rw","width",0),t.prop("ro","isWide",(function(){return t.width>800})),t}return a}($t));function Vu(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Yu=qn.window;function Qu(n){var t,e,r=n[4].component;if(r)var o=new r({});return{c:function(){o&&Fn(o.$$.fragment),t=Q()},m:function(n,r){o&&Kn(o,n,r),F(n,t,r),e=!0},p:function(n,e){if(r!==(r=n[4].component)){if(o){Tn();var i=o;In(i.$$.fragment,1,0,(function(){Gn(i,1)})),Ln()}r?(Fn((o=new r({})).$$.fragment),Un(o.$$.fragment,1),Kn(o,t.parentNode,t)):o=null}},i:function(n){e||(o&&Un(o.$$.fragment,n),e=!0)},o:function(n){o&&In(o.$$.fragment,n),e=!1},d:function(n){n&&K(t),o&&Gn(o,n)}}}function Zu(n){var t,e,r,o,i,a=("nav"==n[4].activeMenu||n[5].isWide)&&"default"!=n[4].activeMenu&&Xu(n),c="settings"==n[4].activeMenu&&ns(n),u=n[4].component;if(u)var s=new u({});var f=n[4].activeMenu&&!n[5].isWide&&ts(n);return{c:function(){a&&a.c(),t=Y(),c&&c.c(),e=Y(),s&&Fn(s.$$.fragment),r=Y(),f&&f.c(),o=Q()},m:function(n,u){a&&a.m(n,u),F(n,t,u),c&&c.m(n,u),F(n,e,u),s&&Kn(s,n,u),F(n,r,u),f&&f.m(n,u),F(n,o,u),i=!0},p:function(n,i){if("nav"!=n[4].activeMenu&&!n[5].isWide||"default"==n[4].activeMenu?a&&(Tn(),In(a,1,1,(function(){a=null})),Ln()):a?(a.p(n,i),Un(a,1)):((a=Xu(n)).c(),Un(a,1),a.m(t.parentNode,t)),"settings"==n[4].activeMenu?c?(c.p(n,i),Un(c,1)):((c=ns(n)).c(),Un(c,1),c.m(e.parentNode,e)):c&&(Tn(),In(c,1,1,(function(){c=null})),Ln()),u!==(u=n[4].component)){if(s){Tn();var d=s;In(d.$$.fragment,1,0,(function(){Gn(d,1)})),Ln()}u?(Fn((s=new u({})).$$.fragment),Un(s.$$.fragment,1),Kn(s,r.parentNode,r)):s=null}n[4].activeMenu&&!n[5].isWide?f?(f.p(n,i),Un(f,1)):((f=ts(n)).c(),Un(f,1),f.m(o.parentNode,o)):f&&(Tn(),In(f,1,1,(function(){f=null})),Ln())},i:function(n){i||(Un(a),Un(c),s&&Un(s.$$.fragment,n),Un(f),i=!0)},o:function(n){In(a),In(c),s&&In(s.$$.fragment,n),In(f),i=!1},d:function(n){a&&a.d(n),n&&K(t),c&&c.d(n),n&&K(e),s&&Gn(s,n),n&&K(r),f&&f.d(n),n&&K(o)}}}function Ju(n){var t,e=new eo({props:{status:"offline"}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:O,i:function(n){t||(Un(e.$$.fragment,n),t=!0)},o:function(n){In(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function Xu(n){var t,e=new ii({props:{transition:{duration:n[5].isWide?0:250,x:n[5].width}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};32&t&&(r.transition={duration:n[5].isWide?0:250,x:n[5].width}),e.$set(r)},i:function(n){t||(Un(e.$$.fragment,n),t=!0)},o:function(n){In(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function ns(n){var t,e,r=n[2];function o(n){return{props:{dialog:n[3].activeDialog,transition:{duration:250,x:n[5].isWide?0:n[5].width}}}}if(r)var i=new r(o(n));return{c:function(){i&&Fn(i.$$.fragment),t=Q()},m:function(n,r){i&&Kn(i,n,r),F(n,t,r),e=!0},p:function(n,e){var a={};if(8&e&&(a.dialog=n[3].activeDialog),32&e&&(a.transition={duration:250,x:n[5].isWide?0:n[5].width}),r!==(r=n[2])){if(i){Tn();var c=i;In(c.$$.fragment,1,0,(function(){Gn(c,1)})),Ln()}r?(Fn((i=new r(o(n))).$$.fragment),Un(i.$$.fragment,1),Kn(i,t.parentNode,t)):i=null}else r&&i.$set(a)},i:function(n){e||(i&&Un(i.$$.fragment,n),e=!0)},o:function(n){i&&In(i.$$.fragment,n),e=!1},d:function(n){n&&K(t),i&&Gn(i,n)}}}function ts(n){var t,e,r,o;return{c:function(){(t=W("div")).textContent=" ",X(t,"class","overlay")},m:function(e,i,a){F(e,t,i),r=!0,a&&o(),o=Z(t,"click",n[10])},p:O,i:function(n){r||(On((function(){e||(e=Bn(t,dr,{duration:200},!0)),e.run(1)})),r=!0)},o:function(n){e||(e=Bn(t,dr,{duration:200},!1)),e.run(0),r=!1},d:function(n){n&&K(t),n&&e&&e.end(),o()}}}function es(n){var t,e,r,o,i,a,c;On(n[9]);var u=[Ju,Zu,Qu],s=[];function f(n,r){return 8&r&&(t=!!n[3].is("offline")),t?0:(24&r&&(e=!!(n[4].component&&n[4].requireLogin&&n[3].is("authenticated"))),e?1:2)}return r=f(n,-1),o=s[r]=u[r](n),{c:function(){o.c(),i=Q()},m:function(t,e,o){s[r].m(t,e),F(t,i,e),a=!0,o&&N(c),c=[Z(Yu,"focus",n[8]),Z(Yu,"keydown",rs),Z(Yu,"resize",n[9])]},p:function(n,t){var e=p(t,1)[0],a=r;(r=f(n,e))===a?s[r].p(n,e):(Tn(),In(s[a],1,1,(function(){s[a]=null})),Ln(),(o=s[r])||(o=s[r]=u[r](n)).c(),Un(o,1),o.m(i.parentNode,i))},i:function(n){a||(Un(o),a=!0)},o:function(n){In(o),a=!1},d:function(n){s[r].d(n),n&&K(i),N(c)}}}function rs(n){if(27==n.keyCode)return ot("chat_input"),void st(document,".fullscreen-media-wrapper",(function(n){return lt(n,!1)}));n.shiftKey&&13==n.keyCode&&(n.preventDefault(),ot())}function os(n,t,e){var r,o,i;j(n,ne,(function(n){return e(4,o=n)})),j(n,Wu,(function(n){return e(5,i=n)}));var a=new wt(process.env.api_url,{debug:!0}),c=new qi({api:a,isFirst:process.env.first_user,themes:process.env.themes});j(n,c,(function(n){return e(3,r=n)}));var u,s,f=0,d=0;u="user",s=c,hn().$$.context.set(u,s),window.hljs=ro,ne.update({baseUrl:process.env.base_url}),function(n,t){n.to("/login",Ku(Mo)),n.to("/register",Ku(Mo)),n.to("/api/user/logout.html",(function(n){return location.reload()})),n.to("/help",Ku(Zc)),n.to("/settings/account",Ku(wu)),n.to("/settings/connection",Ku(vc)),n.to("/settings/conversation",Ku(zc)),n.to("/settings",Ku(Fu)),n.to("/search",Ku(iu)),n.to("/chat",Ku(lc)),n.to("/chat/:connection_id",Ku(lc)),n.to("/chat/:connection_id/:dialog_id",Ku(lc));var e=function(){};n.to("/docs/*",e),n.to("/file/*",e),n.to("/paste/*",e),n.to("*",Ku(eo)),function(n,t){t.omnibus.on("wsEventSentJoin",(function(t){n.go(n.dialogPath(t))})),t.omnibus.on("wsEventSentPart",(function(e){var r=t.findDialog({connection_id:e.connection_id});if(!r)return n.go("/settings/connection");var o=r.dialogs.toArray()[0];n.go(o?o.path:"/settings/conversation")}))}(n,t)}(ne,c),c.activateTheme(),c.on("update",(function(n,t){return t.hasOwnProperty("roles")&&ne.render()})),c.omnibus.start({route:ne,wsUrl:process.env.ws_url}),mn((function(){ct(ne.urlFor("/images/emojis.js")),c.showGrid&&document.querySelector("body").classList.add("with-grid"),c.load(process.env.load_user)}));var l;return n.$$.update=function(){8&n.$$.dirty&&e(2,l=r.activeDialog.connection_id?r.activeDialog.dialog_id?Gr:br:null),3&n.$$.dirty&&Wu.update({height:f,width:d}),24&n.$$.dirty&&document&&(document.title=r.unread?"("+r.unread+") "+o.title:o.title)},[f,d,l,r,o,i,c,a,function(){return c.email&&c.omnibus.send("ping")},function(){e(0,f=Yu.innerHeight),e(1,d=Yu.innerWidth)},function(){return o.update({activeMenu:""})}]}var is=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Vu()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,os,es,P,{}),r}return u}(Yn),as=document.querySelector("body");new is({target:document.body});as.classList=as.className.replace(/no-js/,"has-js")}();
//# sourceMappingURL=convos.5e8d3772.js.map
