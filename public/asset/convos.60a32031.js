!function(){"use strict";var n={add:function(n){document.body.classList.remove("no-"+n),document.body.classList.add("has-"+n)},has:function(n){return document.body.classList.contains("has-"+n)},remove:function(n){document.body.classList.add("no-"+n),document.body.classList.remove("has-"+n)}};function t(t,e){document.addEventListener(t,(function r(o){"mousemove"!=t&&n.add(e),"mousemove"!=t||n.has("touch")||n.add(e),document.removeEventListener(t,r)}))}t("mousemove","mouse"),t("touchstart","touch"),n.add("js");var e=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")};var r=function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n};function o(n,t){return n(t={exports:{}},t.exports),t.exports}var i=o((function(n){function t(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?n.exports=t=function(n){return typeof n}:n.exports=t=function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},t(e)}n.exports=t}));var a=function(n,t){return!t||"object"!==i(t)&&"function"!=typeof t?r(n):t},c=o((function(n){function t(e){return n.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},t(e)}n.exports=t})),u=o((function(n){function t(e,r){return n.exports=t=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},t(e,r)}n.exports=t}));var s=function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&u(n,t)},f=o((function(n){var t=function(n){var t=Object.prototype,e=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function u(n,t,e,r){var o=t&&t.prototype instanceof l?t:l,i=Object.create(o.prototype),a=new k(r||[]);return i._invoke=function(n,t,e){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return E()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=b(a,e);if(c){if(c===f)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var u=s(n,t,e);if("normal"===u.type){if(r=e.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(r="completed",e.method="throw",e.arg=u.arg)}}}(n,e,a),i}function s(n,t,e){try{return{type:"normal",arg:n.call(t,e)}}catch(n){return{type:"throw",arg:n}}}n.wrap=u;var f={};function l(){}function d(){}function p(){}var m={};m[o]=function(){return this};var h=Object.getPrototypeOf,g=h&&h(h(x([])));g&&g!==t&&e.call(g,o)&&(m=g);var v=p.prototype=l.prototype=Object.create(m);function $(n){["next","throw","return"].forEach((function(t){n[t]=function(n){return this._invoke(t,n)}}))}function y(n,t){var r;this._invoke=function(o,a){function c(){return new t((function(r,c){!function r(o,a,c,u){var f=s(n[o],n,a);if("throw"!==f.type){var l=f.arg,d=l.value;return d&&"object"===i(d)&&e.call(d,"__await")?t.resolve(d.__await).then((function(n){r("next",n,c,u)}),(function(n){r("throw",n,c,u)})):t.resolve(d).then((function(n){l.value=n,c(l)}),(function(n){return r("throw",n,c,u)}))}u(f.arg)}(o,a,r,c)}))}return r=r?r.then(c,c):c()}}function b(n,t){var e=n.iterator[t.method];if(void 0===e){if(t.delegate=null,"throw"===t.method){if(n.iterator.return&&(t.method="return",t.arg=void 0,b(n,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=s(e,n.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var o=r.arg;return o?o.done?(t[n.resultName]=o.value,t.next=n.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function w(n){var t={tryLoc:n[0]};1 in n&&(t.catchLoc=n[1]),2 in n&&(t.finallyLoc=n[2],t.afterLoc=n[3]),this.tryEntries.push(t)}function _(n){var t=n.completion||{};t.type="normal",delete t.arg,n.completion=t}function k(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(w,this),this.reset(!0)}function x(n){if(n){var t=n[o];if(t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,i=function t(){for(;++r<n.length;)if(e.call(n,r))return t.value=n[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v.constructor=p,p.constructor=d,p[c]=d.displayName="GeneratorFunction",n.isGeneratorFunction=function(n){var t="function"==typeof n&&n.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,p):(n.__proto__=p,c in n||(n[c]="GeneratorFunction")),n.prototype=Object.create(v),n},n.awrap=function(n){return{__await:n}},$(y.prototype),y.prototype[a]=function(){return this},n.AsyncIterator=y,n.async=function(t,e,r,o,i){void 0===i&&(i=Promise);var a=new y(u(t,e,r,o),i);return n.isGeneratorFunction(e)?a:a.next().then((function(n){return n.done?n.value:a.next()}))},$(v),v[c]="Generator",v[o]=function(){return this},v.toString=function(){return"[object Generator]"},n.keys=function(n){var t=[];for(var e in n)t.push(e);return t.reverse(),function e(){for(;t.length;){var r=t.pop();if(r in n)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=x,k.prototype={constructor:k,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!n)for(var t in this)"t"===t.charAt(0)&&e.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var t=this;function r(e,r){return a.type="throw",a.arg=n,t.next=e,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),u=e.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(n,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===n||"continue"===n)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=n,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(n,t){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&t&&(this.next=t),f},finish:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.finallyLoc===n)return this.complete(e.completion,e.afterLoc),_(e),f}},catch:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.tryLoc===n){var r=e.completion;if("throw"===r.type){var o=r.arg;_(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(n,t,e){return this.delegate={iterator:x(n),resultName:t,nextLoc:e},"next"===this.method&&(this.arg=void 0),f}},n}(n.exports);try{regeneratorRuntime=t}catch(n){Function("r","regeneratorRuntime = r")(t)}}));function l(n,t,e,r,o,i,a){try{var c=n[i](a),u=c.value}catch(n){return void e(n)}c.done?t(u):Promise.resolve(u).then(r,o)}var d=function(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(n){l(i,r,o,a,c,"next",n)}function c(n){l(i,r,o,a,c,"throw",n)}a(void 0)}))}};var p=function(n,t){for(;!Object.prototype.hasOwnProperty.call(n,t)&&null!==(n=c(n)););return n},m=o((function(n){function t(e,r,o){return"undefined"!=typeof Reflect&&Reflect.get?n.exports=t=Reflect.get:n.exports=t=function(n,t,e){var r=p(n,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(e):o.value}},t(e,r,o||e)}n.exports=t}));var h=function(n){return-1!==Function.toString.call(n).indexOf("[native code]")};var g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}},v=o((function(n){function t(e,r,o){return g()?n.exports=t=Reflect.construct:n.exports=t=function(n,t,e){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(n,r));return e&&u(o,e.prototype),o},t.apply(null,arguments)}n.exports=t})),$=o((function(n){function t(e){var r="function"==typeof Map?new Map:void 0;return n.exports=t=function(n){if(null===n||!h(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(n))return r.get(n);r.set(n,t)}function t(){return v(n,arguments,c(this).constructor)}return t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),u(t,n)},t(e)}n.exports=t}));var y=function(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r};var b=function(n){if(Array.isArray(n))return y(n)};var w=function(n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)};var _=function(n,t){if(n){if("string"==typeof n)return y(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?y(n,t):void 0}};var k=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var x=function(n){return b(n)||w(n)||_(n)||k()};function E(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var S=function(n,t,e){return t&&E(n.prototype,t),e&&E(n,e),n};function O(){}var C=function(n){return n};function N(n){return n()}function R(){return Object.create(null)}function A(n){n.forEach(N)}function D(n){return"function"==typeof n}function j(n,t){return n!=n?t==t:n!==t||n&&"object"===i(n)||"function"==typeof n}function T(n){if(null==n)return O;for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];var o=n.subscribe.apply(n,e);return o.unsubscribe?function(){return o.unsubscribe()}:o}function L(n){var t;return T(n,(function(n){return t=n}))(),t}function P(n,t,e){n.$$.on_destroy.push(T(t,e))}function M(n,t,e,r){if(n){var o=I(n,t,e,r);return n[0](o)}}function I(n,t,e,r){return n[1]&&r?function(n,t){for(var e in t)n[e]=t[e];return n}(e.ctx.slice(),n[1](r(t))):e.ctx}function U(n,t,e,r,o,a,c){var u=function(n,t,e,r){if(n[2]&&r){var o=n[2](r(e));if(void 0===t.dirty)return o;if("object"===i(o)){for(var a=[],c=Math.max(t.dirty.length,o.length),u=0;u<c;u+=1)a[u]=t.dirty[u]|o[u];return a}return t.dirty|o}return t.dirty}(t,r,o,a);if(u){var s=I(t,e,r,c);n.p(s,u)}}function H(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;return n.set(e),t}function B(n){return n&&D(n.destroy)?n.destroy:O}var z,q="undefined"!=typeof window,F=q?function(){return window.performance.now()}:function(){return Date.now()},K=q?function(n){return requestAnimationFrame(n)}:O,W=new Set;function G(n){W.forEach((function(t){t.c(n)||(W.delete(t),t.f())})),0!==W.size&&K(G)}function Y(n,t){n.appendChild(t)}function J(n,t,e){n.insertBefore(t,e||null)}function V(n){n.parentNode.removeChild(n)}function Q(n,t){for(var e=0;e<n.length;e+=1)n[e]&&n[e].d(t)}function Z(n){return document.createElement(n)}function X(n){return document.createTextNode(n)}function nn(){return X(" ")}function tn(){return X("")}function en(n,t,e,r){return n.addEventListener(t,e,r),function(){return n.removeEventListener(t,e,r)}}function rn(n){return function(t){return t.preventDefault(),n.call(this,t)}}function on(n,t,e){null==e?n.removeAttribute(t):n.getAttribute(t)!==e&&n.setAttribute(t,e)}function an(n){return Array.from(n.childNodes)}function cn(n,t){t=""+t,n.wholeText!==t&&(n.data=t)}function un(n,t){n.value=null==t?"":t}function sn(n,t,e,r){n.style.setProperty(t,e,r?"important":"")}function fn(){if(void 0===z){z=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(n){z=!0}}return z}function ln(n,t,e){n.classList[e?"add":"remove"](t)}function dn(n,t){var e=document.createEvent("CustomEvent");return e.initCustomEvent(n,!1,!1,t),e}var pn,mn=function(){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e(this,n),this.a=t,this.e=this.n=null}return S(n,[{key:"m",value:function(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.e||(this.e=Z(t.nodeName),this.t=t,this.h(n)),this.i(e)}},{key:"h",value:function(n){this.e.innerHTML=n,this.n=Array.from(this.e.childNodes)}},{key:"i",value:function(n){for(var t=0;t<this.n.length;t+=1)J(this.t,this.n[t],n)}},{key:"p",value:function(n){this.d(),this.h(n),this.i(this.a)}},{key:"d",value:function(){this.n.forEach(V)}}]),n}(),hn=new Set,gn=0;function vn(n){for(var t=5381,e=n.length;e--;)t=(t<<5)-t^n.charCodeAt(e);return t>>>0}function $n(n,t,e,r,o,i,a){for(var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=16.666/r,s="{\n",f=0;f<=1;f+=u){var l=t+(e-t)*i(f);s+=100*f+"%{".concat(a(l,1-l),"}\n")}var d=s+"100% {".concat(a(e,1-e),"}\n}"),p="__svelte_".concat(vn(d),"_").concat(c),m=n.ownerDocument;hn.add(m);var h=m.__svelte_stylesheet||(m.__svelte_stylesheet=m.head.appendChild(Z("style")).sheet),g=m.__svelte_rules||(m.__svelte_rules={});g[p]||(g[p]=!0,h.insertRule("@keyframes ".concat(p," ").concat(d),h.cssRules.length));var v=n.style.animation||"";return n.style.animation="".concat(v?"".concat(v,", "):"").concat(p," ").concat(r,"ms linear ").concat(o,"ms 1 both"),gn+=1,p}function yn(n,t){var e=(n.style.animation||"").split(", "),r=e.filter(t?function(n){return n.indexOf(t)<0}:function(n){return-1===n.indexOf("__svelte")}),o=e.length-r.length;o&&(n.style.animation=r.join(", "),(gn-=o)||K((function(){gn||(hn.forEach((function(n){for(var t=n.__svelte_stylesheet,e=t.cssRules.length;e--;)t.deleteRule(e);n.__svelte_rules={}})),hn.clear())})))}function bn(n){pn=n}function wn(){if(!pn)throw new Error("Function called outside component initialization");return pn}function _n(n){wn().$$.on_mount.push(n)}function kn(n){wn().$$.on_destroy.push(n)}function xn(n,t){wn().$$.context.set(n,t)}function En(n){return wn().$$.context.get(n)}function Sn(n,t){var e=n.$$.callbacks[t.type];e&&e.slice().forEach((function(n){return n(t)}))}var On=[],Cn=[],Nn=[],Rn=[],An=Promise.resolve(),Dn=!1;function jn(){Dn||(Dn=!0,An.then(Hn))}function Tn(){return jn(),An}function Ln(n){Nn.push(n)}function Pn(n){Rn.push(n)}var Mn,In=!1,Un=new Set;function Hn(){if(!In){In=!0;do{for(var n=0;n<On.length;n+=1){var t=On[n];bn(t),Bn(t.$$)}for(bn(null),On.length=0;Cn.length;)Cn.pop()();for(var e=0;e<Nn.length;e+=1){var r=Nn[e];Un.has(r)||(Un.add(r),r())}Nn.length=0}while(On.length);for(;Rn.length;)Rn.pop()();Dn=!1,In=!1,Un.clear()}}function Bn(n){if(null!==n.fragment){n.update(),A(n.before_update);var t=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,t),n.after_update.forEach(Ln)}}function zn(n,t,e){n.dispatchEvent(dn("".concat(t?"intro":"outro").concat(e)))}var qn,Fn=new Set;function Kn(){qn={r:0,c:[],p:qn}}function Wn(){qn.r||A(qn.c),qn=qn.p}function Gn(n,t){n&&n.i&&(Fn.delete(n),n.i(t))}function Yn(n,t,e,r){if(n&&n.o){if(Fn.has(n))return;Fn.add(n),qn.c.push((function(){Fn.delete(n),r&&(e&&n.d(1),r())})),n.o(t)}}var Jn={duration:0};function Vn(n,t,e,r){var o=t(n,e),i=r?0:1,a=null,c=null,u=null;function s(){u&&yn(n,u)}function f(n,t){var e=n.b-i;return t*=Math.abs(e),{a:i,b:n.b,d:e,duration:t,start:n.start,end:n.start+t,group:n.group}}function l(t){var e,r=o||Jn,l=r.delay,d=void 0===l?0:l,p=r.duration,m=void 0===p?300:p,h=r.easing,g=void 0===h?C:h,v=r.tick,$=void 0===v?O:v,y=r.css,b={start:F()+d,b:t};t||(b.group=qn,qn.r+=1),a||c?c=b:(y&&(s(),u=$n(n,i,t,m,d,g,y)),t&&$(0,1),a=f(b,m),Ln((function(){return zn(n,t,"start")})),e=function(t){if(c&&t>c.start&&(a=f(c,m),c=null,zn(n,a.b,"start"),y&&(s(),u=$n(n,i,a.b,a.duration,0,g,o.css))),a)if(t>=a.end)$(i=a.b,1-i),zn(n,a.b,"end"),c||(a.b?s():--a.group.r||A(a.group.c)),a=null;else if(t>=a.start){var e=t-a.start;i=a.a+a.d*g(e/a.duration),$(i,1-i)}return!(!a&&!c)},0===W.size&&K(G),new Promise((function(n){W.add({c:e,f:n})})))}return{run:function(n){D(o)?(Mn||(Mn=Promise.resolve()).then((function(){Mn=null})),Mn).then((function(){o=o(),l(n)})):l(n)},end:function(){s(),a=c=null}}}function Qn(n,t){var e,r=t.token={};function o(n,e,o,i){if(t.token===r){t.resolved=i;var a=t.ctx;void 0!==o&&((a=a.slice())[o]=i);var c=n&&(t.current=n)(a),u=!1;t.block&&(t.blocks?t.blocks.forEach((function(n,r){r!==e&&n&&(Kn(),Yn(n,1,1,(function(){t.blocks[r]===n&&(t.blocks[r]=null)})),Wn())})):t.block.d(1),c.c(),Gn(c,1),c.m(t.mount(),t.anchor),u=!0),t.block=c,t.blocks&&(t.blocks[e]=c),u&&Hn()}}if((e=n)&&"object"===i(e)&&"function"==typeof e.then){var a=wn();if(n.then((function(n){bn(a),o(t.then,1,t.value,n),bn(null)}),(function(n){if(bn(a),o(t.catch,2,t.error,n),bn(null),!t.hasCatch)throw n})),t.current!==t.pending)return o(t.pending,0),!0}else{if(t.current!==t.then)return o(t.then,1,t.value,n),!0;t.resolved=n}}var Zn="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function Xn(n,t,e){var r=n.$$.props[t];void 0!==r&&(n.$$.bound[r]=e,e(n.$$.ctx[r]))}function nt(n){n&&n.c()}function tt(n,t,e,r){var o=n.$$,i=o.fragment,a=o.on_mount,c=o.on_destroy,u=o.after_update;i&&i.m(t,e),r||Ln((function(){var t=a.map(N).filter(D);c?c.push.apply(c,x(t)):A(t),n.$$.on_mount=[]})),u.forEach(Ln)}function et(n,t){var e=n.$$;null!==e.fragment&&(A(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function rt(n,t){-1===n.$$.dirty[0]&&(On.push(n),jn(),n.$$.dirty.fill(0)),n.$$.dirty[t/31|0]|=1<<t%31}function ot(n,t,e,r,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[-1],c=pn;bn(n);var u=n.$$={fragment:null,ctx:null,props:i,update:O,not_equal:o,bound:R(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:t.context||[]),callbacks:R(),dirty:a,skip_bound:!1},s=!1;if(u.ctx=e?e(n,t.props||{},(function(t,e){var r=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:e;return u.ctx&&o(u.ctx[t],u.ctx[t]=r)&&(!u.skip_bound&&u.bound[t]&&u.bound[t](r),s&&rt(n,t)),e})):[],u.update(),s=!0,A(u.before_update),u.fragment=!!r&&r(u.ctx),t.target){if(t.hydrate){var f=an(t.target);u.fragment&&u.fragment.l(f),f.forEach(V)}else u.fragment&&u.fragment.c();t.intro&&Gn(n.$$.fragment),tt(n,t.target,t.anchor,t.customElement),Hn()}bn(c)}var it=function(){function n(){e(this,n)}return S(n,[{key:"$destroy",value:function(){et(this,1),this.$destroy=O}},{key:"$on",value:function(n,t){var e=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return e.push(t),function(){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}}},{key:"$set",value:function(n){var t;this.$$set&&(t=n,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}]),n}();var at=function(n){if(Array.isArray(n))return n};var ct=function(n,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n)){var e=[],r=!0,o=!1,i=void 0;try{for(var a,c=n[Symbol.iterator]();!(r=(a=c.next()).done)&&(e.push(a.value),!t||e.length!==t);r=!0);}catch(n){o=!0,i=n}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return e}};var ut=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var st=function(n,t){return at(n)||ct(n,t)||_(n,t)||ut()};function ft(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function lt(n){var t,e,r,o,i,a;return{c:function(){on(t=Z("i"),"class",e=n[3](n[2],n[1],ht)),on(t,"style",r=gt(n[2],n[1],n[0])),t.hidden=o=!n[2]},m:function(e,r){J(e,t,r),i||(a=en(t,"click",n[6]),i=!0)},p:function(n,i){var a=st(i,1)[0];6&a&&e!==(e=n[3](n[2],n[1],ht))&&on(t,"class",e),7&a&&r!==(r=gt(n[2],n[1],n[0]))&&on(t,"style",r),4&a&&o!==(o=!n[2])&&(t.hidden=o)},i:O,o:O,d:function(n){n&&V(t),i=!1,a()}}}var dt={brand:"fab",regular:"far",solid:"fas"},pt={batman:"https://www.gravatar.com/avatar/ab1839667863f31e359d98364cfdef61",marcusr:"https://www.gravatar.com/avatar/6c056546d802b1a9ac186ab63f9fb632"},mt=["fas fa-anchor","fas fa-atom","fas fa-award","fas fa-balance-scale","fas fa-baseball-ball","fas fa-basketball-ball","fas fa-bicycle","fas fa-bolt","fas fa-book-reader","fas fa-candy-cane","fas fa-carrot","fas fa-cat","fas fa-chess-knight","fas fa-child","fas fa-coffee","fas fa-cookie-bite","fas fa-crow","fas fa-dice","fas fa-dog","fas fa-dove","fas fa-feather","fas fa-fish","fas fa-gem","fas fa-ghost","fas fa-hard-hat","fas fa-hat-cowboy","fas fa-hat-wizard","fas fa-hiking","fas fa-horse-head","fas fa-horse","fas fa-id-badge","fas fa-igloo","fas fa-mask","fas fa-meteor","fas fa-paint-brush","fas fa-paw","fas fa-pepper-hot","fas fa-pizza-slice","fas fa-portrait","fas fa-puzzle-piece","fas fa-rainbow","fas fa-robot","fas fa-rocket","fas fa-running","fas fa-seedling","fas fa-skating","fas fa-skiing","fas fa-smile","fas fa-snowboarding","fas fa-snowflake","fas fa-snowman","fas fa-swimmer","fas fa-umbrella","fas fa-user-astronaut","fas fa-user-graduate","fas fa-user-ninja","fas fa-user-secret","fas fa-walking","fas fa-yin-yang"],ht=!1;function gt(n,t,e,r){var o=[],i="color:",a=n.match(/^pick:(.+)$/);return a&&pt[a[1]]&&(i="background-color:",o.push('background-image:url("'+pt[a[1]]+'")')),e&&o.push(i+e),o.join(";")}function vt(n,t,e){var r=t.class,o=void 0===r?"":r,i=t.animation,a=void 0===i?"":i,c=t.color,u=void 0===c?"":c,s=t.family,f=void 0===s?"":s,l=t.name;return n.$$set=function(n){"class"in n&&e(4,o=n.class),"animation"in n&&e(5,a=n.animation),"color"in n&&e(0,u=n.color),"family"in n&&e(1,f=n.family),"name"in n&&e(2,l=n.name)},[u,f,l,function(n,t,e){var r=[],i=n.match(/^pick:(.+)$/);if(i){if("Convos"==i[1])return"fas fa-info-circle";if(pt[i[1]])return"fas fa-contributor for-"+i[1].toLowerCase();r.push(function(n){if(n.match(/^\d+$/))return mt[n];for(var t=0,e=0;e<n.length;e++)t=n.charCodeAt(e)+((t<<5)-t),t&=t;return t=Math.abs(t),mt[t%mt.length]}(i[1]))}else r.push(dt[t]||"fas"),r.push("fa-"+n);return a&&r.push(a.split(" ").map((function(n){return"fa-"+n}))),o&&r.push(o.split(" ")),r.join(" ")},o,a,function(t){Sn(n,t)}]}var $t=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(ft()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,vt,lt,j,{class:4,animation:5,color:0,family:1,name:2}),t}return i}(it);var yt=function(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n},bt=o((function(n,t){var e;e=function(){function n(){for(var n=0,t={};n<arguments.length;n++){var e=arguments[n];for(var r in e)t[r]=e[r]}return t}function t(n){return n.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function e(r){function o(){}function i(t,e,i){if("undefined"!=typeof document){"number"==typeof(i=n({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(e);/^[\{\[]/.test(a)&&(e=a)}catch(n){}e=r.write?r.write(e,t):encodeURIComponent(String(e)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var c="";for(var u in i)i[u]&&(c+="; "+u,!0!==i[u]&&(c+="="+i[u].split(";")[0]));return document.cookie=t+"="+e+c}}function a(n,e){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var c=i[a].split("="),u=c.slice(1).join("=");e||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var s=t(c[0]);if(u=(r.read||r)(u,s)||t(u),e)try{u=JSON.parse(u)}catch(n){}if(o[s]=u,n===s)break}catch(n){}}return n?o[n]:o}}return o.set=i,o.get=function(n){return a(n,!1)},o.getJSON=function(n){return a(n,!0)},o.remove=function(t,e){i(t,"",n(e,{expires:-1}))},o.defaults={},o.withConverter=e,o}((function(){}))},n.exports=e()})),wt=["trace","debug","info","warn","error"],_t={},kt={},xt=function(){};function Et(n){var t=this,e=n.name;this.name=e,this.isLevel=function(n){var e=wt.indexOf(n)||n||n.length;return t.numLevel>=e},this.setLevel=function(n){var e=wt.indexOf(n);return-1==e&&(e=2),t.numLevel=e,wt.forEach((function(n,r){var o=!console||r<e?xt:console["trace"==n||"debug"==n?"log":n]||console.log||xt;t[n]=o.bind(t,"["+t.name+"]")})),t},this.setLevel(function(n,t){if(void 0===kt.root){var e=(location.href.match(/_debug=([a-z,:]+)/)||[]).pop();e?(e.split(",").forEach((function(n){var t=n.split(":"),e=st(t,2),r=e[0],o=e[1];kt[r]=o||"debug"})),localStorage.setItem("logger:nameToLevel",JSON.stringify(kt))):(e=localStorage.getItem("logger:nameToLevel"))&&(e=JSON.parse(e),Object.keys(e).forEach((function(n,t){return kt[n]=t||"debug"})))}return kt[t]||kt.root||"info"}("root"==e||_t.root,e))}function St(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root";return _t[n]||(_t[n]=new Et({name:n}))}_t.root=new Et({name:"root"});var Ot=St("util"),Ct=1e3,Nt=1e6,Rt=1e3*Nt;function At(n,t){var e=(t||"").match(/^(\+|-)?(.*)/)||["","+",""],r=st(e,3),o=(r[0],r[1]),i=r[2],a={};return i.split("").forEach((function(t){return a[n[t]||t]="-"!=o})),a}function Dt(n,t){for(;n;){if(t.tagName?n==t:n.matches&&n.matches(t))return n;n=n.parentNode}return null}function jt(n,t){var e=function e(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var a=this;e.debounceTid&&clearTimeout(e.debounceTid),e.debounceTid=setTimeout((function(){n.apply(a,o),e.debounceTid=0}),t)};return e.debounceTid=0,e}function Tt(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"message",e=n.errors||n;return e&&e[0]?e[0][t]||"Unknown error.":""}function Lt(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.95,r=Math.floor(6*n),o=6*n-r,i=e*(1-t),a=e*(1-o*t),c=e*(1-(1-o)*t),u=255,s=255,f=255;switch(r){case 0:u=e,s=c,f=i;break;case 1:u=a,s=e,f=i;break;case 2:u=i,s=e,f=c;break;case 3:u=i,s=a,f=e;break;case 4:u=c,s=i,f=e;break;case 5:u=e,s=i,f=a}return[Math.floor(255*u),Math.floor(255*s),Math.floor(255*f)]}function Pt(n,t){var e=n<Ct?[n,""]:n<Nt?[n/Ct,"k"]:n<Rt?[n/Nt,"M"]:[n/Rt,"G"],r=String(Math.round(10*e[0])/10);return(r.match(/\./)?r:r+".0")+e[1]+(t||"")}var Mt={array:function(n){return Array.isArray(n)},defined:function(n){return!Mt.undefined(n)},false:function(n){return!Mt.true(n)},function:function(n){return"function"==typeof n},number:function(n){return"number"==typeof n},object:function(n){return"object"===i(n)&&null!==n},string:function(n){return"string"==typeof n},stringable:function(n){return"number"==typeof n||"string"==typeof n},true:function(n){return Mt.string(n)?!!n.length&&"0"!=n:!!n},undefined:function(n){return null==n}};function It(n){var t=document,e=n.replace(/\W/g,"_");if(!t.getElementById(e)){var r=t.createElement("script"),o=[e,n];return r.id=o[0],r.src=o[1],t.getElementsByTagName("head")[0].appendChild(r),new Promise((function(n,t){r.addEventListener("error",t),r.addEventListener("load",n)}))}}function Ut(n){return Object.keys(n).filter((function(t){return n[t]})).sort().map((function(n){return"has-mode-"+n})).join(" ")}function Ht(n,t,e){var r=":children"==t?n.children:n.querySelectorAll(t);if(!e)return[].slice.call(r,0);if(Array.isArray(e))return[].forEach.call(r,(function(n){return n.addEventListener(e[0],e[1])}));for(var o=[],i=0;i<r.length;i++)o.push(e(r[i],i));return o}function Bt(n){return n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function zt(n,t){var e=function(n){return document.querySelector('meta[name="convos:'+n+'"]')||document.querySelector('meta[name="'+n+'"]')};if(1==arguments.length){"organization_name"==n&&(n="contactorganization"),"organization_url"==n&&(n="contactnetworkaddress");var r=e(n);if(!r)throw'Cannot get settings for "'+n+'".';var o={no:!1,yes:!0};return"contact"==n?atob(r.content||""):o.hasOwnProperty(r.content)?o[r.content]:r.content}"organization_name"==n&&(n="contactorganization"),"organization_url"==n&&(n="contactnetworkaddress"),"contact"==n&&(t=btoa(t)),"boolean"==typeof t&&(t=t?"yes":"no"),e(n).content=t}function qt(n,t){n&&n.preventDefault&&n.preventDefault();var e,r,o,i,a=(e=document.body,r="fullscreen",o=function(n){n.addEventListener("click",(function(t){return t.target==n&&n.hide()})),n.hide=function(){return a.classList.add("hidden")}},(i=e&&e.querySelector("."+r.split(" ").join(".")))||((i=document.createElement("div")).className=r,e&&e.appendChild(i),o&&o(i),i));return function(n){for(;n.firstChild;)n.removeChild(n.firstChild)}(a),t?(a.classList.remove("hidden"),a.appendChild(t.cloneNode(!0)),a):a.hide()}function Ft(n){return(Mt.string(n)?n:"").split(/[.,\s]+/).map((function(n){return n.trim()})).filter((function(n){return n.length}))}function Kt(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;if(0==n.length)return"#000";for(var e=0,r=0;r<n.length;r++)e=n.charCodeAt(r)+((e<<5)-e),e&=e;return"#"+Lt(((e=Math.abs(e%t/t))+.618033988749)%1,.4,.7).map((function(n){return n.toString(16)})).join("")}function Wt(n,t){return Mt.array(t)?t.find((function(t){return Wt(n,t)}))||!1:n&&n.tagName&&n.tagName.toLowerCase()===t||!1}function Gt(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var t=16*Math.random()|0;return("x"==n?t:3&t|8).toString(16)}))}function Yt(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function Jt(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(e),!0).forEach((function(t){yt(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Yt(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}var Vt=St("reactive"),Qt=function(){function n(){e(this,n),this.cookieName="convos_js",this._on={},this._props={}}return S(n,[{key:"emit",value:function(n){for(var t=this._on[n],e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];for(var i=0;i<(t||[]).length;i++){var a;(a=t[i])[0].apply(a,r)}return this}},{key:"on",value:function(n,t){var e=t?null:new Promise((function(n){t=n})),r=this._on[n]||(this._on[n]=[]),o=[t];r.push(o);var i=function(){var n=r.indexOf(o);-1!=n&&r.splice(n,1)};return e?e.finally(i):i}},{key:"prop",value:function(n,t,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=Jt({},r,{defaultValue:e,name:t,type:n,value:e});switch(this._props[t]=o,o.updateable=-1!=["cookie","persist","rw"].indexOf(n),n){case"cookie":return this._cookieProp(o);case"persist":return this._localStorageProp(o);case"ro":return this._readOnlyProp(o);case"rw":return this._updateableProp(o)}throw"["+this.constructor.name+'] Unknown prop type "'+n+'" for prop "'+t+'".'}},{key:"subscribe",value:function(n){return n(this),this.on("update",n)}},{key:"update",value:function(n){var t=this;return Object.keys(n).forEach((function(e){var r=t._props[e];if(!r)return Vt.trace("["+t.constructor.name+'] Unknown prop "'+e+'".');r.hasOwnProperty("prev")||(r.prev="ro"==r.type?void 0:r.value),r.updateable&&(r.value=n[e])})),this._updatedTid||(this._updatedTid=setTimeout(this._delayedUpdate.bind(this),1)),this}},{key:"_cookie",value:function(n,t){var e=n.key||n.name,r=document.decodedB64JSONCookies||(document.decodedB64JSONCookies={});if(!r[this.cookieName])try{var o=bt.get(this.cookieName);r[this.cookieName]=JSON.parse(o?atob(o):"{}")}catch(n){Vt.error(yt({},e,n))}var i=r[this.cookieName]||{};if(1==arguments.length)return i[e];t===n.defaultValue?delete i[e]:i[e]=t;var a=0==location.href.indexOf("https:");bt.set(this.cookieName,btoa(JSON.stringify(i)),{expires:365,SameSite:"Lax",secure:a})}},{key:"_cookieProp",value:function(n){var t=this._cookie(n);Mt.defined(t)&&(n.value=t),Mt.undefined(t)&&this._cookie(n,n.value),this._updateableProp(n)}},{key:"_delayedUpdate",value:function(){var n=this,t={};return Object.keys(this._props).forEach((function(e){var r=n._props[e];if(r.hasOwnProperty("prev")){var o=r.prev;delete r.prev,r.value!==o&&("cookie"==r.type&&n._cookie(r,r.value),"persist"==r.type&&n._localStorage(r,r.value),t[e]="ro"!=r.type)}})),delete this._updatedTid,Object.keys(t).length&&this.emit("update",this,t),t}},{key:"_localStorage",value:function(n,t){var e="convos:"+(n.key||n.name);if(2==arguments.length)return t===n.defaultValue?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(t));try{return localStorage.hasOwnProperty(e)?JSON.parse(localStorage.getItem(e)):void 0}catch(n){return void Vt.error(yt({},e,localStorage.getItem(e)),n)}}},{key:"_localStorageProp",value:function(n){var t=this._localStorage(n);Mt.defined(t)&&(n.value=t),Mt.undefined(t)&&this._localStorage(n,n.value),this._updateableProp(n)}},{key:"_readOnlyProp",value:function(n){if(void 0===n.value)throw"["+this.constructor.name+'] Read-only attribute "'+n.name+'" cannot be undefined';var t=Mt.function(n.value)?n.value:function(){return n.value};Object.defineProperty(this,n.name,{get:t})}},{key:"_updateableProp",value:function(n){Object.defineProperty(this,n.name,{get:function(){return n.value}})}}]),n}();function Zt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Xt=function(n){s(o,n);var t,r=(t=o,function(){var n,e=c(t);if(Zt()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function o(n){var t;return e(this,o),(t=r.call(this)).prop("ro","api",n.api),t.prop("ro","defaultParams",n.defaultParams||{}),t.prop("ro","id",n.id),t.prop("ro","req",{body:null,headers:{}}),t.prop("ro","res",{body:{},headers:{}}),t.prop("rw","err",null),t.prop("rw","status","pending"),t}return S(o,[{key:"error",value:function(n,t){if(n)return this.update({err:Array.isArray(n)?n:[{message:n,source:t}],status:"error"});if(!this.err||!this.err.length)return"";var e=this.err[0],r=e.path&&e.path.match(/\w$/)&&e.path.split("/").pop();return r?r+": "+e.message:e.message}},{key:"perform",value:function(n){var t=this;return this._promise||(this._promise=new Promise((function(e){t.api.spec(t.id).then((function(e){if(!e)throw'Unknown operationId "'+t.id+'".';var r=t._paramsToRequest(e,n||t.defaultParams),o=st(r,2),i=o[0],a=o[1];if(!i)throw a;return t.update({status:"loading"}),Mt.object(a.body)&&!Mt.function(a.body.has)&&(a.body=JSON.stringify(a.body)),fetch(i,a)})).then((function(n){return Promise.all([n,n.json()])})).then((function(n){var r=st(n,2),o=r[0],i=r[1];delete t._promise,e(t.parse(o,i))})).catch((function(n){delete t._promise,e(t.error(Array.isArray(n)?n:'Failed fetching operationId "'+t.id+'": '+n,"fetch"))}))})))}},{key:"is",value:function(n){return this.status==n}},{key:"parse",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.body;this.res.body=t||n,this.res.status=n.status||"201",n.headers&&(this.res.headers=n.headers);var e=null;return String(this.res.status).match(/^[23]/)||(e=t&&t.errors?t.errors:[{message:n.statusText||"Unknown error."}]),this.update({err:e,status:e?"error":"success"})}},{key:"reset",value:function(){return this.res.body={},this.res.headers={},this.res.status=0,this.update({err:null,status:"pending"})}},{key:"_extractValue",value:function(n,t){return t.schema?Object.keys(t.schema.properties).reduce((function(t,e){return t[e]=n[e],t}),{}):n[t.name]}},{key:"_hasProperty",value:function(n,t){return"body"==t.in||("formData"==t.in?n.formData.has(t.name):n.hasOwnProperty(t.name))}},{key:"_paramsToRequest",value:function(n,t){var e=this,r={headers:this.req.headers,method:n.method},o=new URL(n.url),i=[];return(n.parameters||[]).forEach((function(n){if(!e._hasProperty(t,n)&&n.required)i.push({message:"Missing property.",path:"/"+n.name});else{if(!e._hasProperty(t,n)&&!n.required)return;if("path"==n.in){var a=new RegExp("(%7B|\\{)"+Bt(n.name)+"(%7D|\\})","i");o.pathname=o.pathname.replace(a,encodeURIComponent(e._extractValue(t,n)))}else if("query"==n.in)o.searchParams.set(n.name,e._extractValue(t,n));else if("formData"==n.in)delete r.headers["Content-Type"],r.body=t.formData;else if("body"==n.in)r.body=e._extractValue(t,n);else{if("header"!=n.in)throw"[Api] Parameter in:"+n.in+" is not supported.";r.header[n.name]=e._extractValue(t,n.name)}}})),i.length?[null,i]:[o,r]}}]),o}(Qt);function ne(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var te={0:"Jan",1:"Feb",2:"March",3:"Apr",4:"May",5:"Jun",6:"July",7:"Aug",8:"Sept",9:"Oct",10:"Nov",11:"Dec"},ee={H:"_getPaddedHours",M:"_getPaddedMinutes",S:"_getPaddedSeconds",b:"_getMonthAbbr",e:"getDate",Y:"getFullYear"},re=function(n){s(o,n);var t,r=(t=o,function(){var n,e=c(t);if(ne()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function o(n){return e(this,o),"string"!=typeof n||n.match(/Z$/)||(n+="Z"),r.call(this,n||new Date)}return S(o,[{key:"format",value:function(n){var t=this;return n.replace(/%(\w)/g,(function(n,e){return ee[e]?t[ee[e]]():e}))}},{key:"getHumanDate",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.format("%b %e"),e=new o,r=this.getYear()==e.getYear();return r&&!n.year||(t+=", "+this.getFullYear()),t}},{key:"setDate",value:function(n,t){return t?m(c(o.prototype),"setUTCDate",this).call(this,n):m(c(o.prototype),"setDate",this).call(this,n),this}},{key:"setFullYear",value:function(n,t){return t?m(c(o.prototype),"setUTCFullYear",this).call(this,n):m(c(o.prototype),"setFullYear",this).call(this,n),this}},{key:"setHours",value:function(n,t){return t?m(c(o.prototype),"setUTCHours",this).call(this,n):m(c(o.prototype),"setHours",this).call(this,n),this}},{key:"setMilliseconds",value:function(n,t){return t?m(c(o.prototype),"setUTCMilliseconds",this).call(this,n):m(c(o.prototype),"setMilliseconds",this).call(this,n),this}},{key:"setMinutes",value:function(n,t){return t?m(c(o.prototype),"setUTCMinutes",this).call(this,n):m(c(o.prototype),"setMinutes",this).call(this,n),this}},{key:"setMonth",value:function(n,t){return t?m(c(o.prototype),"setUTCMonth",this).call(this,n):m(c(o.prototype),"setMonth",this).call(this,n),this}},{key:"setSeconds",value:function(n,t){return t?m(c(o.prototype),"setUTCSeconds",this).call(this,n):m(c(o.prototype),"setSeconds",this).call(this,n),this}},{key:"setTime",value:function(n){return m(c(o.prototype),"setTime",this).call(this,n),this}},{key:"setYear",value:function(n){return this.setYear(n),this}},{key:"toEpoch",value:function(){return this.getTime()/1e3}},{key:"_getMonthAbbr",value:function(){return te[this.getMonth()]||""}},{key:"_getPaddedHours",value:function(){return String(this.getHours()).padStart(2,"0")}},{key:"_getPaddedMinutes",value:function(){return String(this.getMinutes()).padStart(2,"0")}},{key:"_getPaddedSeconds",value:function(){return String(this.getSeconds()).padStart(2,"0")}}]),o}($(Date));function oe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function ie(n){var t,e,r,o,i,a,c;e=new $t({props:{animation:n[4],name:n[0]}});var u=n[13].default,s=M(u,n,n[12],null);return{c:function(){t=Z("button"),nt(e.$$.fragment),r=nn(),s&&s.c(),on(t,"class",o=n[5].join(" ")),t.disabled=n[6],on(t,"type",n[3]),on(t,"data-tooltip",n[2]),ln(t,"has-tooltip",!!n[2].length)},m:function(o,u){J(o,t,u),tt(e,t,null),Y(t,r),s&&s.m(t,null),i=!0,a||(c=en(t,"click",n[14]),a=!0)},p:function(n,r){var a=st(r,1)[0],c={};16&a&&(c.animation=n[4]),1&a&&(c.name=n[0]),e.$set(c),s&&s.p&&(!i||4096&a)&&U(s,u,n,n[12],a,null,null),(!i||32&a&&o!==(o=n[5].join(" ")))&&on(t,"class",o),(!i||64&a)&&(t.disabled=n[6]),(!i||8&a)&&on(t,"type",n[3]),(!i||4&a)&&on(t,"data-tooltip",n[2]),36&a&&ln(t,"has-tooltip",!!n[2].length)},i:function(n){i||(Gn(e.$$.fragment,n),Gn(s,n),i=!0)},o:function(n){Yn(e.$$.fragment,n),Yn(s,n),i=!1},d:function(n){n&&V(t),et(e),s&&s.d(n),a=!1,c()}}}function ae(n,t,e){var r,o,i=O,a=function(){return i(),i=T(w,(function(n){return e(11,o=n)})),w};n.$$.on_destroy.push((function(){return i()}));var c=t.$$slots,u=void 0===c?{}:c,s=t.$$scope,f="",l=t.class,d=void 0===l?"":l,p=[],m=!1,h=0,g=t.disabled,v=void 0!==g&&g,$=t.icon,y=void 0===$?"":$,b=t.op,w=void 0===b?new Xt({api:!1,id:""}):b;a();var _=t.tooltip,k=void 0===_?"":_,x=t.type,E=void 0===x?"":x;function S(n){n&&e(10,h=(new re).toEpoch()),e(4,f=n?"spin":""),e(9,m=n)}return n.$$set=function(n){"class"in n&&e(7,d=n.class),"disabled"in n&&e(8,v=n.disabled),"icon"in n&&e(0,y=n.icon),"op"in n&&a(e(1,w=n.op)),"tooltip"in n&&e(2,k=n.tooltip),"type"in n&&e(3,E=n.type),"$$scope"in n&&e(12,s=n.$$scope)},n.$$.update=function(){2048&n.$$.dirty&&o.is("loading")&&S(!0),3072&n.$$.dirty&&(o.is("loading")||setTimeout((function(){return S(!1)}),700-((new re).toEpoch()-h))),129&n.$$.dirty&&e(5,p=["btn","for-"+(y||"default")].concat(d)),768&n.$$.dirty&&e(6,r=v||m)},[y,w,k,E,f,p,r,d,v,m,h,o,s,u,function(t){Sn(n,t)}]}var ce=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(oe()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,ae,ie,j,{class:7,disabled:8,icon:0,op:1,tooltip:2,type:3}),t}return i}(it),ue=[];function se(n){var t,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O,r=[];function o(e){if(j(n,e)&&(n=e,t)){for(var o=!ue.length,i=0;i<r.length;i+=1){var a=r[i];a[1](),ue.push(a,n)}if(o){for(var c=0;c<ue.length;c+=2)ue[c][0](ue[c+1]);ue.length=0}}}function i(t){o(t(n))}function a(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O,c=[i,a];return r.push(c),1===r.length&&(t=e(o)||O),i(n),function(){var n=r.indexOf(c);-1!==n&&r.splice(n,1),0===r.length&&(t(),t=null)}}return{set:o,update:i,subscribe:a}}function fe(n,t,e){var r=!Array.isArray(n),o=r?[n]:n,i=t.length<2;return{subscribe:se(e,(function(n){var e=!1,a=[],c=0,u=O,s=function(){if(!c){u();var e=t(r?a[0]:a,n);i?n(e):u=D(e)?e:O}},f=o.map((function(n,t){return T(n,(function(n){a[t]=n,c&=~(1<<t),e&&s()}),(function(){c|=1<<t}))}));return e=!0,s(),function(){A(f),u()}})).subscribe}}var le={},de=me("menu"),pe=se({nColumns:1,width:0});function me(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(le[n])return le[n];var e=le[n]=se(t);return e.toggle=function(n){var r=n.target.closest("a");if(!r)return setTimeout((function(){return e.set(t)}),50);n.preventDefault();var o=r.href.replace(/.*#/,"");0==r.href.indexOf("#")||0==r.href.indexOf(location.href)?e.set(L(e)==o?"":o):setTimeout((function(){return e.set(o)}),100)},e}function he(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function ge(n){var t,e,r,o,i,a,c,u,s,f,l,d=n[2].unread+"";return e=new $t({props:{name:"bars"}}),o=new $t({props:{name:"times"}}),{c:function(){t=Z("a"),nt(e.$$.fragment),r=nn(),nt(o.$$.fragment),i=nn(),a=Z("small"),c=X(d),on(a,"class","badge is-important"),a.hidden=u=!n[2].unread,on(t,"href","#nav"),on(t,"class","btn-hallow"),ln(t,"is-active","nav"==n[1])},m:function(n,u){J(n,t,u),tt(e,t,null),Y(t,r),tt(o,t,null),Y(t,i),Y(t,a),Y(a,c),s=!0,f||(l=en(t,"click",de.toggle),f=!0)},p:function(n,e){(!s||4&e)&&d!==(d=n[2].unread+"")&&cn(c,d),(!s||4&e&&u!==(u=!n[2].unread))&&(a.hidden=u),2&e&&ln(t,"is-active","nav"==n[1])},i:function(n){s||(Gn(e.$$.fragment,n),Gn(o.$$.fragment,n),s=!0)},o:function(n){Yn(e.$$.fragment,n),Yn(o.$$.fragment,n),s=!1},d:function(n){n&&V(t),et(e),et(o),f=!1,l()}}}function ve(n){var t,e,r,o=n[5].default,i=M(o,n,n[4],null),a=n[0].nColumns<=1&&ge(n);return{c:function(){t=Z("header"),i&&i.c(),e=nn(),a&&a.c(),on(t,"class","chat-header")},m:function(n,o){J(n,t,o),i&&i.m(t,null),Y(t,e),a&&a.m(t,null),r=!0},p:function(n,e){var c=st(e,1)[0];i&&i.p&&(!r||16&c)&&U(i,o,n,n[4],c,null,null),n[0].nColumns<=1?a?(a.p(n,c),1&c&&Gn(a,1)):((a=ge(n)).c(),Gn(a,1),a.m(t,null)):a&&(Kn(),Yn(a,1,1,(function(){a=null})),Wn())},i:function(n){r||(Gn(i,n),Gn(a),r=!0)},o:function(n){Yn(i,n),Yn(a),r=!1},d:function(n){n&&V(t),i&&i.d(n),a&&a.d()}}}function $e(n,t,e){var r,o,i;P(n,pe,(function(n){return e(0,r=n)})),P(n,de,(function(n){return e(1,o=n)}));var a=t.$$slots,c=void 0===a?{}:a,u=t.$$scope,s=En("user");return P(n,s,(function(n){return e(2,i=n)})),n.$$set=function(n){"$$scope"in n&&e(4,u=n.$$scope)},[r,o,i,s,u,c]}var ye=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(he()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,$e,ve,j,{}),t}return i}(it),be=function(){var n={base:"https://twemoji.maxcdn.com/v/12.1.5/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:function(n){var t="string"==typeof n?parseInt(n,16):n;if(t<65536)return c(t);return c(55296+((t-=65536)>>10),56320+(1023&t))},toCodePoint:g},onerror:function(){this.parentNode&&this.parentNode.replaceChild(u(this.alt,!1),this)},parse:function(t,e){e&&"function"!=typeof e||(e={callback:e});return("string"==typeof t?d:l)(t,{callback:e.callback||s,attributes:"function"==typeof e.attributes?e.attributes:m,base:"string"==typeof e.base?e.base:n.base,ext:e.ext||n.ext,size:e.folder||(r=e.size||n.size,"number"==typeof r?r+"x"+r:r),className:e.className||n.className,onerror:e.onerror||n.onerror});var r},replace:h,test:function(n){e.lastIndex=0;var t=e.test(n);return e.lastIndex=0,t}},t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},e=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[#*0-9]\ufe0f?\u20e3|(?:[©®\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5\udeeb\udeec\udef4-\udefa\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd71\udd73-\udd76\udd7a-\udda2\udda5-\uddaa\uddae-\uddb4\uddb7\uddba\uddbc-\uddca\uddd0\uddde-\uddff\ude70-\ude73\ude78-\ude7a\ude80-\ude82\ude90-\ude95]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,r=/\uFE0F/g,o=String.fromCharCode(8205),i=/[&<>'"]/g,a=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,c=String.fromCharCode;return n;function u(n,t){return document.createTextNode(t?n.replace(r,""):n)}function s(n,t){return"".concat(t.base,t.size,"/",n,t.ext)}function f(n){return g(n.indexOf(o)<0?n.replace(r,""):n)}function l(n,t){for(var r,o,i,c,s,l,d,p,m,h,g,v,$,y=function n(t,e){for(var r,o,i=t.childNodes,c=i.length;c--;)3===(o=(r=i[c]).nodeType)?e.push(r):1!==o||"ownerSVGElement"in r||a.test(r.nodeName.toLowerCase())||n(r,e);return e}(n,[]),b=y.length;b--;){for(i=!1,c=document.createDocumentFragment(),l=(s=y[b]).nodeValue,p=0;d=e.exec(l);){if((m=d.index)!==p&&c.appendChild(u(l.slice(p,m),!0)),v=f(g=d[0]),p=m+g.length,$=t.callback(v,t),v&&$){for(o in(h=new Image).onerror=t.onerror,h.setAttribute("draggable","false"),r=t.attributes(g,v))r.hasOwnProperty(o)&&0!==o.indexOf("on")&&!h.hasAttribute(o)&&h.setAttribute(o,r[o]);h.className=t.className,h.alt=g,h.src=$,i=!0,c.appendChild(h)}h||c.appendChild(u(g,!1)),h=null}i&&(p<l.length&&c.appendChild(u(l.slice(p),!0)),s.parentNode.replaceChild(c,s))}return n}function d(n,t){return h(n,(function(n){var e,r,o=n,a=f(n),c=t.callback(a,t);if(a&&c){for(r in o="<img ".concat('class="',t.className,'" ','draggable="false" ','alt="',n,'"',' src="',c,'"'),e=t.attributes(n,a))e.hasOwnProperty(r)&&0!==r.indexOf("on")&&-1===o.indexOf(" "+r+"=")&&(o=o.concat(" ",r,'="',e[r].replace(i,p),'"'));o=o.concat("/>")}return o}))}function p(n){return t[n]}function m(){return null}function h(n,t){return String(n).replace(e,t)}function g(n,t){for(var e=[],r=0,o=0,i=0;i<n.length;)r=n.charCodeAt(i++),o?(e.push((65536+(o-55296<<10)+(r-56320)).toString(16)),o=0):55296<=r&&r<=56319?o=r:e.push(r.toString(16));return e.join(t||"-")}}(),we=Object.prototype.hasOwnProperty,_e=function(){for(var n=[],t=0;t<256;++t)n.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return n}(),ke=function(n,t){for(var e=t&&t.plainObjects?Object.create(null):{},r=0;r<n.length;++r)void 0!==n[r]&&(e[r]=n[r]);return e},xe={arrayToObject:ke,assign:function(n,t){return Object.keys(t).reduce((function(n,e){return n[e]=t[e],n}),n)},compact:function(n){for(var t=[{obj:{o:n},prop:"o"}],e=[],r=0;r<t.length;++r)for(var o=t[r],a=o.obj[o.prop],c=Object.keys(a),u=0;u<c.length;++u){var s=c[u],f=a[s];"object"===i(f)&&null!==f&&-1===e.indexOf(f)&&(t.push({obj:a,prop:s}),e.push(f))}return function(n){for(var t;n.length;){var e=n.pop();if(t=e.obj[e.prop],Array.isArray(t)){for(var r=[],o=0;o<t.length;++o)void 0!==t[o]&&r.push(t[o]);e.obj[e.prop]=r}}return t}(t)},decode:function(n){try{return decodeURIComponent(n.replace(/\+/g," "))}catch(t){return n}},encode:function(n){if(0===n.length)return n;for(var t="string"==typeof n?n:String(n),e="",r=0;r<t.length;++r){var o=t.charCodeAt(r);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?e+=t.charAt(r):o<128?e+=_e[o]:o<2048?e+=_e[192|o>>6]+_e[128|63&o]:o<55296||o>=57344?e+=_e[224|o>>12]+_e[128|o>>6&63]+_e[128|63&o]:(r+=1,o=65536+((1023&o)<<10|1023&t.charCodeAt(r)),e+=_e[240|o>>18]+_e[128|o>>12&63]+_e[128|o>>6&63]+_e[128|63&o])}return e},isBuffer:function(n){return null!=n&&!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))},isRegExp:function(n){return"[object RegExp]"===Object.prototype.toString.call(n)},merge:function n(t,e,r){if(!e)return t;if("object"!==i(e)){if(Array.isArray(t))t.push(e);else{if("object"!==i(t))return[t,e];(r.plainObjects||r.allowPrototypes||!we.call(Object.prototype,e))&&(t[e]=!0)}return t}if("object"!==i(t))return[t].concat(e);var o=t;return Array.isArray(t)&&!Array.isArray(e)&&(o=ke(t,r)),Array.isArray(t)&&Array.isArray(e)?(e.forEach((function(e,o){we.call(t,o)?t[o]&&"object"===i(t[o])?t[o]=n(t[o],e,r):t.push(e):t[o]=e})),t):Object.keys(e).reduce((function(t,o){var i=e[o];return we.call(t,o)?t[o]=n(t[o],i,r):t[o]=i,t}),o)}},Ee=(String.prototype.replace,Date.prototype.toISOString,Object.prototype.hasOwnProperty),Se={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:xe.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},Oe=function(n,t,e){if(n){var r=e.allowDots?n.replace(/\.([^.[]+)/g,"[$1]"):n,o=/(\[[^[\]]*])/g,i=/(\[[^[\]]*])/.exec(r),a=i?r.slice(0,i.index):r,c=[];if(a){if(!e.plainObjects&&Ee.call(Object.prototype,a)&&!e.allowPrototypes)return;c.push(a)}for(var u=0;null!==(i=o.exec(r))&&u<e.depth;){if(u+=1,!e.plainObjects&&Ee.call(Object.prototype,i[1].slice(1,-1))&&!e.allowPrototypes)return;c.push(i[1])}return i&&c.push("["+r.slice(i.index)+"]"),function(n,t,e){for(var r=t,o=n.length-1;o>=0;--o){var i,a=n[o];if("[]"===a)i=(i=[]).concat(r);else{i=e.plainObjects?Object.create(null):{};var c="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,u=parseInt(c,10);!isNaN(u)&&a!==c&&String(u)===c&&u>=0&&e.parseArrays&&u<=e.arrayLimit?(i=[])[u]=r:i[c]=r}r=i}return r}(c,t,e)}},Ce=function(n,t){var e=t?xe.assign({},t):{};if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(e.ignoreQueryPrefix=!0===e.ignoreQueryPrefix,e.delimiter="string"==typeof e.delimiter||xe.isRegExp(e.delimiter)?e.delimiter:Se.delimiter,e.depth="number"==typeof e.depth?e.depth:Se.depth,e.arrayLimit="number"==typeof e.arrayLimit?e.arrayLimit:Se.arrayLimit,e.parseArrays=!1!==e.parseArrays,e.decoder="function"==typeof e.decoder?e.decoder:Se.decoder,e.allowDots="boolean"==typeof e.allowDots?e.allowDots:Se.allowDots,e.plainObjects="boolean"==typeof e.plainObjects?e.plainObjects:Se.plainObjects,e.allowPrototypes="boolean"==typeof e.allowPrototypes?e.allowPrototypes:Se.allowPrototypes,e.parameterLimit="number"==typeof e.parameterLimit?e.parameterLimit:Se.parameterLimit,e.strictNullHandling="boolean"==typeof e.strictNullHandling?e.strictNullHandling:Se.strictNullHandling,""===n||null==n)return e.plainObjects?Object.create(null):{};for(var r="string"==typeof n?function(n,t){for(var e={},r=t.ignoreQueryPrefix?n.replace(/^\?/,""):n,o=t.parameterLimit===1/0?void 0:t.parameterLimit,i=r.split(t.delimiter,o),a=0;a<i.length;++a){var c,u,s=i[a],f=s.indexOf("]="),l=-1===f?s.indexOf("="):f+1;-1===l?(c=t.decoder(s,Se.decoder),u=t.strictNullHandling?null:""):(c=t.decoder(s.slice(0,l),Se.decoder),u=t.decoder(s.slice(l+1),Se.decoder)),Ee.call(e,c)?e[c]=[].concat(e[c]).concat(u):e[c]=u}return e}(n,e):n,o=e.plainObjects?Object.create(null):{},i=Object.keys(r),a=0;a<i.length;++a){var c=i[a],u=Oe(c,r[c],e);o=xe.merge(o,u,e)}return xe.compact(o)};
/*! Copyright Twitter Inc. and other contributors. Licensed under MIT */function Ne(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Re=St("route"),Ae=new(function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(Ne()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(){var n;return e(this,i),(n=o.call(this)).prop("ro","basePath",(function(){return n._basePath})),n.prop("ro","hash",(function(){return(n._location.hash||"").replace(/^#/,"")})),n.prop("ro","path",(function(){return n._path})),n.prop("ro","pathParts",(function(){return n._pathParts})),n.prop("ro","query",(function(){return n._query})),n.prop("rw","baseUrl",""),n._onClick=n._onClick.bind(r(n)),n._onLocationChange=n._onLocationChange.bind(r(n)),window.addEventListener("click",n._onClick),window.addEventListener("popstate",n._onLocationChange),n._history=window.history,n._location=window.location,n._basePath="",n._path="/",n._pathParts=[],n._query={},n}return S(i,[{key:"conversationPath",value:function(n){var t=["","chat"];return n.connection_id&&t.push(n.connection_id),n.conversation_id&&t.push(n.conversation_id),t.map((function(n){return encodeURIComponent(n)})).join("/")}},{key:"go",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};0==n.indexOf(this.baseUrl)&&(n=n.substr(this.baseUrl.length));var e=this.baseUrl+n;if(e==this._location.href)return this;this._history[t.replace?"replaceState":"pushState"]({},document.title,e),t.replace||de.set(""),this.update({path:!0})._onLocationChange({})}},{key:"param",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=this.query;return e.hasOwnProperty(n)?e[n]:t}},{key:"subscribe",value:function(n){return n(this),this.on("update",n)}},{key:"update",value:function(n){return n.baseUrl&&(n.baseUrl=n.baseUrl.replace(/\/+$/,""),this._basePath=new URL(n.baseUrl).pathname.replace(/\/+$/,"")),m(c(i.prototype),"update",this).call(this,n),n.baseUrl&&this._onLocationChange(),this}},{key:"urlFor",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=n.match(/^\w+:/)||n.match(/^#/)?n:this.basePath+n,r=Object.keys(t).sort().filter((function(n){return Mt.defined(t[n])})).map((function(n){return n+"="+encodeURIComponent(t[n])})).join("&");return e+(r?"?"+r:"")}},{key:"wsUrlFor",value:function(n){return(n.match(/^\w+:/)?n:this.baseUrl+n).replace(/^http/,"ws")}},{key:"_onClick",value:function(n){if(!(n.metaKey||n.ctrlKey||n.shiftKey||n.defaultPrevented)){var t=n.target&&n.target.closest("a");if(t&&t.href){if("_self"==t.target)if((0==t.href.indexOf("/")?this.baseUrl+t.href:t.href)==location.href)return location.reload();if(!t.hasAttribute("download")&&!t.hasAttribute("target")){var e=t.getAttribute("href")||"";0==e.indexOf("#")&&(e=this.path+e),0==e.indexOf(this.baseUrl)&&(e=e.substr(this.baseUrl.length)),0==e.indexOf(this.basePath)&&(e=e.substr(this.basePath.length)),0==e.indexOf("/")&&(this.go(e,{},t.hasAttribute("replace")),n.preventDefault())}}}}},{key:"_onLocationChange",value:function(n){de.set("");var t=this._location.href.substr(this.baseUrl.length).split("#")[0].split("?");this._query=2==t.length?Ce(t.pop()):{},this._path=t[0],this._pathParts=t[0].length<=1?[]:t[0].replace(/^\//,"").split("/").map(decodeURIComponent),Re.info('path="'+this._path+'" '+JSON.stringify(this._pathParts)+", query="+JSON.stringify(this._query)),this.update({path:!0})}}]),i}(Qt));function De(n){if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(n=function(n,t){if(!n)return;if("string"==typeof n)return je(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return je(n,t)}(n))){var t=0,e=function(){};return{s:e,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(n){throw n},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,a=!1;return{s:function(){r=n[Symbol.iterator]()},n:function(){var n=r.next();return i=n.done,n},e:function(n){a=!0,o=n},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}function je(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}var Te=function(){function n(){e(this,n),this.aliases=this._buildAliases(),this.re=this._buildRe(),this.byShortName={},this.grouped={},this.status="pending"}var t;return S(n,[{key:"load",value:(t=d(f.mark((function n(){var t;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(-1==["loading","success"].indexOf(this.status)){n.next=2;break}return n.abrupt("return",this);case 2:return this.status="loading",n.next=5,fetch(Ae.urlFor("/emojis/0bf11a9aff0d6da7b46f1490f86a71eb.json"));case 5:return t=n.sent,n.t0=this,n.next=9,t.json();case 9:return n.t1=n.sent.emojis,n.t0._load.call(n.t0,n.t1),this.status="success",n.abrupt("return",this);case 13:case"end":return n.stop()}}),n,this)}))),function(){return t.apply(this,arguments)})},{key:"markup",value:function(n){var t=this;return be.parse(n.replace(this.re,(function(n,e,r){var o=t.aliases[r]||r,i=t.byShortName[o];return e+(i&&i.emoji||r)})))}},{key:"search",value:function(n){var t=this;n=n.toLowerCase();var e=this.grouped[n]||this.grouped[n.substring(0,2)]||{};return Object.keys(e).sort((function(n,t){return e[n]-e[t]})).map((function(n){return t.byShortName[n]})).filter((function(t){return-1!=(t.shortname+t.name).toLowerCase().indexOf(n)}))}},{key:"_buildAliases",value:function(){return{"&lt;3":":heart:","(Y)":":thumbsup:",":(":":disappointed:",":)":":slight_smile:",":-*":":kissing:",":/":":confused:",":D":":smiley:",":O":":open_mouth:",":P":":stuck_out_tongue:",";)":":wink:",";D":":grin:"}}},{key:"_buildRe",value:function(){var n=Object.keys(this.aliases).sort().map(Bt).join("|");return new RegExp("(^|\\s)(:\\w+:|"+n+")(?=\\s|\\,|\\.|$)","gi")}},{key:"_load",value:function(n){this.grouped={};var t,e=De(n);try{for(e.s();!(t=e.n()).done;){var r=t.value;r.emoji&&r.shortname&&(r.name||(r.name=r.shortname),delete r.category,delete r.html,delete r.order,delete r.unicode,this.byShortName[r.shortname]=r,this._toGrouped(r))}}catch(n){e.e(n)}finally{e.f()}}},{key:"_toGrouped",value:function(n){var t=this.grouped;([n.shortname,n.name].join("-").replace(/\W+/," ").match(/\W(\w{2})/g)||[]).forEach((function(e,r){e=e.substring(1).toLowerCase(),t[e]||(t[e]={}),t[e][n.shortname]=r,e=e[0],t[e]||(t[e]={}),t[e][n.shortname]=r}))}}]),n}();function Le(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Pe=function n(t,e,r){var o=n.singletons[t]||(n.singletons[t]=new Me);return e?o.operation(e,r):o};Pe.singletons={};var Me=function(n){s(i,n);var t,r,o=(t=i,function(){var n,e=c(t);if(Le()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(){var n;return e(this,i),(n=o.call(this)).prop("rw","protocol",location.protocol||"http"),n.prop("rw","url",""),n}return S(i,[{key:"operation",value:function(n,t){var e=new Xt({api:this,id:n,defaultParams:t});return e.req.headers={"Content-Type":"application/json"},e}},{key:"spec",value:(r=d(f.mark((function n(t){var e,r,o=this;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this._ops||!t){n.next=2;break}return n.abrupt("return",this._ops[t]);case 2:if(!this._spec){n.next=4;break}return n.abrupt("return",this._spec);case 4:return n.next=6,fetch(this.url);case 6:return e=n.sent,n.next=9,e.json();case 9:if(r=n.sent,this._ops={},this._spec=r,Object.keys(r.paths).forEach((function(n){Object.keys(r.paths[n]).forEach((function(t){var e=r.paths[n][t],i=e.operationId;i&&(e.method=t.toUpperCase(),e.url=o.protocol+"//"+r.host+r.basePath+n+".json",e.parameters=(e.parameters||[]).map((function(n){return o._resolveRef(n)})),o._ops[i]=e)}))})),!this._ops||!t){n.next=15;break}return n.abrupt("return",this._ops[t]);case 15:if(!this._spec){n.next=17;break}return n.abrupt("return",this._spec);case 17:case"end":return n.stop()}}),n,this)}))),function(n){return r.apply(this,arguments)})},{key:"toFunction",value:function(){var n=this;return function(t,e){return t?n.operation(t,e):n}}},{key:"_resolveRef",value:function(n){var t=this,e=n;if(n.$ref){var r=n.$ref.replace(/^#\//,"").split("/");for(e=this._spec;r.length;)e=e[r.shift()]}return Mt.object(e)&&Object.keys(e).forEach((function(n){e[n]=t._resolveRef(e[n])})),e}}]),i}(Qt);function Ie(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Ue={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"},He=new(function(n){s(i,n);var t,r,o=(t=i,function(){var n,e=c(t);if(Ie()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(){var n;return e(this,i),(n=o.call(this)).prop("cookie","lang",""),n.prop("ro","dictionaries",{}),n.prop("ro","emojis",new Te),n.prop("ro","languages",(function(){return n._languages})),n.prop("ro","languageOptions",(function(){return n._languageOptions})),n._languages=[],n._languageOptions=[],n}return S(i,[{key:"l",value:function(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];var o=this.dictionaries[this.lang]||{},i=String(o[n]||n);return i.replace(/(%?)%(\d+)/g,(function(n,t,r){return"%"==t?t+r:e[r-1]}))}},{key:"load",value:(r=d(f.mark((function n(t){var e,r=this;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t||(t=this.lang||document.documentElement.getAttribute("lang")),!this.dictionaries[t]){n.next=3;break}return n.abrupt("return",this.update({lang:t}));case 3:return n.next=5,Pe("/api","getDictionary",{lang:t}).perform();case 5:return e=n.sent,this.dictionaries[t]=e.res.body.dictionary,this._languages=e.res.body.available_languages||{},this._languageOptions=Object.keys(this._languages).sort().map((function(n){return[n,r._languages[n].language_team.replace(/\s*<.*/,"")]})),n.abrupt("return",this.update({lang:t}));case 10:case"end":return n.stop()}}),n,this)}))),function(n){return r.apply(this,arguments)})},{key:"lmd",value:function(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];return this.md(this.l.apply(this,[n].concat(e)))}},{key:"md",value:function(n){return this._state={},n=this._xmlEscape(n),n=this._nbsp(n),n=this._mdLink(n),n=this._plainUrlToLink(n),n=this._mdCode(n),n=this._mdEmStrong(n),n=this.emojis.markup(n),n=this._mdBlockQuote(n)}},{key:"_mdBlockQuote",value:function(n){return n.replace(/^&gt;\s(.*)/,(function(n,t){return"<blockquote>"+t+"</blockquote>"}))}},{key:"_mdCode",value:function(n){return n.replace(/(\\?)`(\S[^`]+)`/g,(function(n,t,e){return t?n.replace(/^\\/,""):"<code>"+e+"</code>"}))}},{key:"_mdEmStrong",value:function(n){return n.replace(/(^|\s)(\\?)(\*+)(\w[^<]*?)\3/g,(function(n,t,e,r,o){return 1==r.length?e?n.replace(/^\\/,""):t+"<em>"+o+"</em>":2==r.length?e?n.replace(/^\\/,""):t+"<strong>"+o+"</strong>":3==r.length?e?n.replace(/^\\/,""):t+"<em><strong>"+o+"</strong></em>":n}))}},{key:"_mdLink",value:function(n){var t=this;return n.replace(/\[([a-zA-Z][^\]]+)\]\(([^)]+)\)/g,(function(n,e,r){var o=r.match(/^\s*(\w+):/)||["",""];if(o[1]&&-1==["http","https","mailto"].indexOf(o[1]))return n;t._state.md=!0;var i=r.substring(0,1),a=-1!=["/","#"].indexOf(i)?"":' target="_blank"';return'<a href="'+Ae.urlFor(r)+'"'+a+">"+e+"</a>"}))}},{key:"_nbsp",value:function(n){return n.length?n.replace(/^\s/,"&nbsp;").replace(/\s{2}/g," &nbsp;"):"&nbsp;"}},{key:"_plainUrlToLink",value:function(n){return this._state.md?n:n.replace(/\b[a-z]{2,5}:\/\S+/g,(function(n){var t=n.match(/^(.*?)(&\w+;|\W)?$/);return'<a href="'+t[1]+'" target="_blank">'+t[1]+"</a>"+(t[2]||"")})).replace(/mailto:(\S+)/,(function(n,t){return-1!=n.indexOf('">')?n:'<a href="'+n+'" target="_blank">'+t+"</a>"}))}},{key:"_xmlEscape",value:function(n){return n.replace(/[&<>"']/g,(function(n){return Ue[n]}))}}]),i}(Qt)),Be=fe(He,(function(n){return function(){return n.l.apply(n,arguments)}})),ze=fe(He,(function(n){return function(){return n.lmd.apply(n,arguments)}})),qe=[],Fe={};var Ke=function(n,t,e){return qe.push({cmd:n,description:e,example:t})};Ke("/me","/me <msg>","Send message as an action."),Ke("/say","/say <msg>",'Used when you want to send a message starting with "/".'),Ke("/whois","/whois <nick>","Show information about a user."),Ke("/query","/query <nick>","Open up a new chat window with nick."),Ke("/msg","/msg <nick> <msg>","Send a direct message to nick."),Ke("/shrug","/shrug <msg>","Add a shrug to end of message. Message is optional."),Ke("/join","/join <#channel>","Join channel and open up a chat window."),Ke("/close","/close [nick|#channel]","Close conversation."),Ke("/nick","/nick <nick>","Change your wanted nick."),Ke("/kick","/kick <nick>","Kick a user from the current channel."),Ke("/mode","/mode [+|-][b|o|v] <user>","Change mode of yourself or a user"),Ke("/topic","/topic or /topic <new topic>","Show current topic, or set a new one."),Ke("/names","/names","Show participants in the channel."),Ke("/invite","/invite <nick> [#channel]","Invite a user to a channel."),Ke("/reconnect","/reconnect","Restart the current connection."),Ke("/clear","/clear history <#channel> or /clear history <nick>","Delete all history for the given conversation."),Ke("/oper","/oper <nick> <password>","Gain operator status on a network."),Ke("/cs","/cs <msg>","Send a message to chanserv."),Ke("/ns","/ns <msg>","Send a message to nickserv."),Ke("/ms","/ms <msg>","Send a message to memoserv."),Ke("/hs","/hs <msg>","Send a message to hostserv."),Ke("/bs","/bs <msg>","Send a message to botserv."),Ke("/os","/os <msg>","Send a message to operserv."),Ke("/quote","/quote <irc-command>","Allow you to send any raw IRC message.");var We=function(n,t){return Fe[n]=t};function Ge(n){if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(n=function(n,t){if(!n)return;if("string"==typeof n)return Ye(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ye(n,t)}(n))){var t=0,e=function(){};return{s:e,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(n){throw n},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,a=!1;return{s:function(){r=n[Symbol.iterator]()},n:function(){var n=r.next();return i=n.done,n},e:function(n){a=!0,o=n},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}function Ye(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function Je(n,t){return Je[n]?Je[n](t):[]}We("/close","/part"),We("/shrug",(function(n){return"/say "+n.concat("¯\\_(ツ)_/¯").join(" ")})),We("/cs","/quote chanserv"),We("/ns","/quote nickserv"),We("/ms","/quote memoserv"),We("/hs","/quote hotserv"),We("/bs","/quote botserv"),We("/os","/quote operserv"),We("/j","/join"),We("/raw","/quote"),Je.commands=function(n){return function(n){for(var t=n.query,e=[],r=0;r<qe.length;r++)if(0==qe[r].cmd.indexOf(t)){var o=qe[r].alias||qe[r].cmd;e.push({val:o,text:He.md(qe[r].example)})}return e}({query:n.query})},Je.conversations=function(n){for(var t=n.conversation,e=n.query,r=n.user,o=r.findConversation({connection_id:t.connection_id}),i=o?o.conversations.toArray():r.conversations(),a=[],c=0;c<i.length&&!(-1!=i[c].name.toLowerCase().indexOf(e)&&(a.push({text:i[c].name,val:i[c].conversation_id}),a.length>=20));c++);return a},Je.emojis=function(n){var t,e=n.query,r=He.emojis,o=[],i=Ge(r.search(e.substring(1)));try{for(i.s();!(t=i.n()).done;){var a=t.value;if(o.push({val:a.emoji,text:r.markup(a.emoji)}),o.length>=30)break}}catch(n){i.e(n)}finally{i.f()}return o},Je.nicks=function(n){var t,e=n.conversation,r=n.query,o=new RegExp("^"+Bt(r.slice(1)),"i"),i=[],a=Ge(e.participants.toArray());try{for(a.s();!(t=a.n()).done;){var c=t.value;if(i.length>=20)break;c.nick.match(o)&&i.push({val:c.nick})}}catch(n){a.e(n)}finally{a.f()}return i};var Ve=se(null);function Qe(n,t){return"onInfinityScrolled"==n?function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return nr.apply(void 0,[t].concat(e))}:"onInfinityVisibility"==n?function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return tr.apply(void 0,[t].concat(e))}:"onMessageClick"==n?function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return er.apply(void 0,[t].concat(e))}:"onVideoLinkClick"==n?function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return rr.apply(void 0,[t].concat(e))}:void 0}function Ze(n){var t=["","chat",n.connection_id];return n.conversation_id&&t.push(n.conversation_id),Ae.urlFor(t.map(encodeURIComponent).join("/")+"#"+n.ts.toISOString())}function Xe(n){n.target.closest("a")||(n.preventDefault(),Ae.go(n.target.closest(".message").querySelector("a").href))}function nr(n,t){var e=n.conversation,r=t.detail.visibleEls.filter((function(n){return n.dataset.ts}));if(r.length){var o=function(n){return Ae.go(e.path+(n.length?"#"+n:""),{replace:!0})},i=t.detail.pos;if("top"==i){var a=r[0].dataset.ts;e.historyStartAt||e.load({before:a}),o(a)}else if("bottom"==i){var c=r.slice(-1)[0].dataset.ts;e.historyStopAt||e.load({after:c}),o(e.historyStopAt?"":c)}else o(r[0].dataset.ts)}}function tr(n,t){var e=n.conversation,r=n.onLoadHash,o=t.detail,i=o.infinityEl,a=o.scrollHeightChanged,c=o.scrollTo,u=o.visibleEls,s=o.visibleElsChanged,f=e.messages;!(i.scrollHeight>i.offsetHeight)&&f.length&&e.load({before:f.get(0).ts.toISOString()}),a&&(c(Ae.hash?'.message[data-ts="'+Ae.hash+'"]':-1),function(n,t){var e=t&&Ae.hash&&n.querySelector('.message[data-ts="'+Ae.hash+'"]');Ht(n,".has-focus",(function(n){return n.classList.remove("has-focus")})),e&&e.classList.add("has-focus")}(i,r==Ae.hash)),s&&u.forEach((function(n){return f.render(n.dataset.index)}))}function er(n,t){var e=n.conversation,r=n.user,o=t.target.closest("a");o&&!o.target&&t.target.closest(".embed")&&(o.target="_blank");var i=o&&document.querySelector('[target="convos_video"][href="'+o.href+'"]');if(i)return rr({conversation:e,user:r},t,i);var a=t.target.closest(".le-meta");if(a)return o||a.parentNode.classList.toggle("is-expanded");var c=o&&o.href.match(/#(action:.+)/);return c?function(n,t,e){var r=n.conversation;if(t.preventDefault(),"details"==e[1]){var o=r.messages.get(e[2]);o.showDetails=!o.showDetails,r.messages.update({messages:!0})}else"close"==e[1]?(r.send("/close "+(e[2]?decodeURIComponent(e[2]):r.conversation_id)),Ae.go("/settings/conversation")):"join"==e[1]?r.send("/join "+(e[2]?decodeURIComponent(e[2]):r.conversation_id)):console.warn("Unhandled onMessageActionClick",e)}({conversation:e},t,c[1].split(":",3)):Wt(t.target,"img")?qt(t,t.target):o&&o.classList.contains("le-thumbnail")?qt(t,o.querySelector("img")):void 0}function rr(n,t,e){var r=n.conversation,o=n.user;e||(e=t.target.closest("a"));var i=-1!=e.href.indexOf("#action:video");if(Ve.close()&&i)return t.preventDefault();var a=e.closest(".le-provider-convosapp")||e.closest(".le-provider-jitsi"),c={nick:r.participants.me().nick};if(i){var u=new URL(o.videoService);u.pathname+="/"+ar(r),u.pathname=u.pathname.replace(/\/+/g,"/"),function(n,t){t=new URL(t,location.href).href;var e=n.messages.toArray().slice(-20).reverse().find((function(n){return-1!=n.message.indexOf(t)}));e&&e.ts.toEpoch()>(new re).toEpoch()-600||n.send({method:"send",message:t})}(r,u.toString()),t.preventDefault(),Ve.open(Ae.urlFor("/video/"+u.hostname+"/"+ar(r),c))}else if(-1!=e.href.indexOf("/video/")){var s=new URL(e.href);t.preventDefault(),Ve.open(Ae.urlFor(s.pathname.replace(/.*?\/video\//,"/video/"),c))}else if(a){var f=new URL(e.href);t.preventDefault(),Ve.open(Ae.urlFor("/video/"+f.hostname+f.pathname,c))}}function or(n,t){var e=t.nodes[0]&&t.nodes[0].parentNode;if(e&&e.classList){var r=e.classList.contains("embed")?"add":"remove";e.classList[r]("hidden")}t.nodes.forEach((function(t){return n.appendChild(t)}))}function ir(n,t){return t.is("not_found")?"":n.frozen?n.frozen:n==t?"Connection messages.":(t.frozen?t.frozen:t.topic)||(t.is("private")?"Private conversation.":"No topic is set.")}function ar(n){var t=n.is("private")?n.participants.nicks().sort().join("-and-"):n.title;return encodeURIComponent(t)}function cr(n){var t=n-1;return t*t*t+1}function ur(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=t.delay,r=void 0===e?0:e,o=t.duration,i=void 0===o?400:o,a=t.easing,c=void 0===a?C:a,u=+getComputedStyle(n).opacity;return{delay:r,duration:i,easing:c,css:function(n){return"opacity: ".concat(n*u)}}}function sr(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=t.delay,r=void 0===e?0:e,o=t.duration,i=void 0===o?400:o,a=t.easing,c=void 0===a?cr:a,u=t.x,s=void 0===u?0:u,f=t.y,l=void 0===f?0:f,d=t.opacity,p=void 0===d?0:d,m=getComputedStyle(n),h=+m.opacity,g="none"===m.transform?"":m.transform,v=h*(1-p);return{delay:r,duration:i,easing:c,css:function(n,t){return"\n\t\t\ttransform: ".concat(g," translate(").concat((1-n)*s,"px, ").concat((1-n)*l,"px);\n\t\t\topacity: ").concat(h-v*t)}}}function fr(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=t.delay,r=void 0===e?0:e,o=t.duration,i=void 0===o?400:o,a=t.easing,c=void 0===a?cr:a,u=getComputedStyle(n),s=+u.opacity,f=parseFloat(u.height),l=parseFloat(u.paddingTop),d=parseFloat(u.paddingBottom),p=parseFloat(u.marginTop),m=parseFloat(u.marginBottom),h=parseFloat(u.borderTopWidth),g=parseFloat(u.borderBottomWidth);return{delay:r,duration:i,easing:c,css:function(n){return"overflow: hidden;"+"opacity: ".concat(Math.min(20*n,1)*s,";")+"height: ".concat(n*f,"px;")+"padding-top: ".concat(n*l,"px;")+"padding-bottom: ".concat(n*d,"px;")+"margin-top: ".concat(n*p,"px;")+"margin-bottom: ".concat(n*m,"px;")+"border-top-width: ".concat(n*h,"px;")+"border-bottom-width: ".concat(n*g,"px;")}}}function lr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function dr(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function pr(n,t,e){var r=n.slice();return r[37]=t[e],r[39]=e,r}function mr(n){var t,e,r,o,i;e=new $t({props:{name:"cloud-upload-alt"}});var a=n[12].videoService&&hr(n);return{c:function(){t=Z("label"),nt(e.$$.fragment),r=nn(),a&&a.c(),o=tn(),on(t,"for","upload_files"),on(t,"class","btn-hallow upload")},m:function(n,c){J(n,t,c),tt(e,t,null),J(n,r,c),a&&a.m(n,c),J(n,o,c),i=!0},p:function(n,t){n[12].videoService?a?(a.p(n,t),4096&t[0]&&Gn(a,1)):((a=hr(n)).c(),Gn(a,1),a.m(o.parentNode,o)):a&&(Kn(),Yn(a,1,1,(function(){a=null})),Wn())},i:function(n){i||(Gn(e.$$.fragment,n),Gn(a),i=!0)},o:function(n){Yn(e.$$.fragment,n),Yn(a),i=!1},d:function(n){n&&V(t),et(e),n&&V(r),a&&a.d(n),n&&V(o)}}}function hr(n){var t,e,r,o,i,a;return e=new $t({props:{name:n[13]?"video-slash":"video"}}),{c:function(){t=Z("a"),nt(e.$$.fragment),on(t,"href","#action:video"),on(t,"class","btn-hallow has-tooltip"),on(t,"tooltip",r=n[1]("Start a video conference"))},m:function(r,c){J(r,t,c),tt(e,t,null),o=!0,i||(a=en(t,"click",(function(){D(n[9])&&n[9].apply(this,arguments)})),i=!0)},p:function(i,a){n=i;var c={};8192&a[0]&&(c.name=n[13]?"video-slash":"video"),e.$set(c),(!o||2&a[0]&&r!==(r=n[1]("Start a video conference")))&&on(t,"tooltip",r)},i:function(n){o||(Gn(e.$$.fragment,n),o=!0)},o:function(n){Yn(e.$$.fragment,n),o=!1},d:function(n){n&&V(t),et(e),i=!1,a()}}}function gr(n){var t,e,r,o,i,a,c;return e=new $t({props:{name:"plus-circle"}}),o=new $t({props:{name:"times"}}),{c:function(){t=Z("a"),nt(e.$$.fragment),r=nn(),nt(o.$$.fragment),on(t,"href","#actions"),on(t,"class","btn-hallow"),ln(t,"is-active","actions"==n[6])},m:function(u,s){J(u,t,s),tt(e,t,null),Y(t,r),tt(o,t,null),i=!0,a||(c=en(t,"click",n[16].toggle),a=!0)},p:function(n,e){64&e[0]&&ln(t,"is-active","actions"==n[6])},i:function(n){i||(Gn(e.$$.fragment,n),Gn(o.$$.fragment,n),i=!0)},o:function(n){Yn(e.$$.fragment,n),Yn(o.$$.fragment,n),i=!1},d:function(n){n&&V(t),et(e),et(o),a=!1,c()}}}function vr(n){for(var t,e,r,o,i=n[3],a=[],c=0;c<i.length;c+=1)a[c]=yr(pr(n,i,c));return{c:function(){t=Z("div");for(var r=0;r<a.length;r+=1)a[r].c();on(t,"class",e="chat-input_menu for-"+n[4])},m:function(n,e){J(n,t,e);for(var r=0;r<a.length;r+=1)a[r].m(t,null);o=!0},p:function(r,c){if(n=r,262156&c[0]){var u;for(i=n[3],u=0;u<i.length;u+=1){var s=pr(n,i,u);a[u]?a[u].p(s,c):(a[u]=yr(s),a[u].c(),a[u].m(t,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=i.length}(!o||16&c[0]&&e!==(e="chat-input_menu for-"+n[4]))&&on(t,"class",e)},i:function(e){o||(Ln((function(){r||(r=Vn(t,sr,n[14],!0)),r.run(1)})),o=!0)},o:function(e){r||(r=Vn(t,sr,n[14],!1)),r.run(0),o=!1},d:function(n){n&&V(t),Q(a,n),n&&r&&r.end()}}}function $r(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,m,h=n[1]("Start a video conference")+"",g=n[1]("Attach a file")+"";return r=new $t({props:{name:n[13]?"video-slash":"video"}}),u=new $t({props:{name:"cloud-upload-alt"}}),{c:function(){t=Z("div"),e=Z("a"),nt(r.$$.fragment),o=nn(),i=X(h),a=nn(),c=Z("label"),nt(u.$$.fragment),s=nn(),f=X(g),on(e,"href","#action:video"),on(c,"for","upload_files"),on(t,"class","chat-input_menu for-actions")},m:function(l,h){J(l,t,h),Y(t,e),tt(r,e,null),Y(e,o),Y(e,i),Y(t,a),Y(t,c),tt(u,c,null),Y(c,s),Y(c,f),d=!0,p||(m=[en(e,"click",(function(){D(n[9])&&n[9].apply(this,arguments)})),en(t,"click",n[16].toggle)],p=!0)},p:function(t,e){n=t;var o={};8192&e[0]&&(o.name=n[13]?"video-slash":"video"),r.$set(o),(!d||2&e[0])&&h!==(h=n[1]("Start a video conference")+"")&&cn(i,h),(!d||2&e[0])&&g!==(g=n[1]("Attach a file")+"")&&cn(f,g)},i:function(e){d||(Gn(r.$$.fragment,e),Gn(u.$$.fragment,e),Ln((function(){l||(l=Vn(t,sr,n[14],!0)),l.run(1)})),d=!0)},o:function(e){Yn(r.$$.fragment,e),Yn(u.$$.fragment,e),l||(l=Vn(t,sr,n[14],!1)),l.run(0),d=!1},d:function(n){n&&V(t),et(r),et(u),n&&l&&l.end(),p=!1,A(m)}}}function yr(n){var t,e,r,o=(n[37].text||n[37].val)+"";return{c:function(){on(t=Z("a"),"href","#index:"+n[39]),on(t,"tabindex","-1"),ln(t,"has-focus",n[39]==n[2])},m:function(i,a){J(i,t,a),t.innerHTML=o,e||(r=en(t,"click",rn(n[18])),e=!0)},p:function(n,e){8&e[0]&&o!==(o=(n[37].text||n[37].val)+"")&&(t.innerHTML=o),4&e[0]&&ln(t,"has-focus",n[39]==n[2])},d:function(n){n&&V(t),e=!1,r()}}}function br(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,m,h,g,v,$,y=n[10].nColumns>1&&n[11].is("conversation"),b=1==n[10].nColumns&&n[0].is("conversation"),w=y&&mr(n),_=b&&gr(n);l=new $t({props:{name:n[8]}});var k=[$r,vr],x=[];function E(n,t){return 65&t[0]&&(p=!("actions"!=n[6]||!n[0].is("conversation"))),p?0:n[3].length?1:-1}return~(m=E(n,[-1]))&&(h=x[m]=k[m](n)),{c:function(){t=Z("form"),e=Z("input"),r=nn(),o=Z("textarea"),i=nn(),a=Z("textarea"),c=nn(),w&&w.c(),u=nn(),_&&_.c(),s=nn(),f=Z("button"),nt(l.$$.fragment),d=nn(),h&&h.c(),on(e,"type","file"),on(e,"id","upload_files"),on(e,"name","upload_files"),on(e,"class","non-interactive"),on(o,"class","non-interactive"),on(o,"placeholder",n[7]),on(a,"class","is-primary-input"),on(a,"placeholder",n[7]),on(f,"type","buttton"),on(f,"class","btn-hallow chat-input__send"),on(t,"class","chat-input")},m:function(p,h){J(p,t,h),Y(t,e),Y(t,r),Y(t,o),n[27](o),Y(t,i),Y(t,a),Y(t,c),w&&w.m(t,null),Y(t,u),_&&_.m(t,null),Y(t,s),Y(t,f),tt(l,f,null),Y(t,d),~m&&x[m].m(t,null),g=!0,v||($=[en(e,"change",n[20]),B(n[17].call(null,a)),en(f,"click",n[19]),en(t,"submit",rn(n[26]))],v=!0)},p:function(n,e){(!g||128&e[0])&&on(o,"placeholder",n[7]),(!g||128&e[0])&&on(a,"placeholder",n[7]),3072&e[0]&&(y=n[10].nColumns>1&&n[11].is("conversation")),y?w?(w.p(n,e),3072&e[0]&&Gn(w,1)):((w=mr(n)).c(),Gn(w,1),w.m(t,u)):w&&(Kn(),Yn(w,1,1,(function(){w=null})),Wn()),1025&e[0]&&(b=1==n[10].nColumns&&n[0].is("conversation")),b?_?(_.p(n,e),1025&e[0]&&Gn(_,1)):((_=gr(n)).c(),Gn(_,1),_.m(t,s)):_&&(Kn(),Yn(_,1,1,(function(){_=null})),Wn());var r={};256&e[0]&&(r.name=n[8]),l.$set(r);var i=m;(m=E(n,e))===i?~m&&x[m].p(n,e):(h&&(Kn(),Yn(x[i],1,1,(function(){x[i]=null})),Wn()),~m?((h=x[m])?h.p(n,e):(h=x[m]=k[m](n)).c(),Gn(h,1),h.m(t,null)):h=null)},i:function(n){g||(Gn(w),Gn(_),Gn(l.$$.fragment,n),Gn(h),g=!0)},o:function(n){Yn(w),Yn(_),Yn(l.$$.fragment,n),Yn(h),g=!1},d:function(e){e&&V(t),n[27](null),w&&w.d(),_&&_.d(),et(l),~m&&x[m].d(),v=!1,A($)}}}function wr(n,t,e){var r,o,i,a,c,u,s,f,l,d,p,m=O,h=function(){return m(),m=T(v,(function(n){return e(11,l=n)})),v};P(n,Be,(function(n){return e(1,s=n)})),P(n,pe,(function(n){return e(10,f=n)})),P(n,Ve,(function(n){return e(13,p=n)})),n.$$.on_destroy.push((function(){return m()}));var g=U,v=t.conversation;h();var $,y,b=0,w=[],_="none",k=0,x=En("api"),E=En("user");P(n,E,(function(n){return e(12,d=n)}));var S=me("activeChatMenu");function C(n,t){var e=function(n,t){n&&n.hasOwnProperty("val")&&(n=n.val);var e=t.append?t.value.length:t.cursorPos,r=[t.value.substring(0,e),t.value.substring(e)],o=r[0],i=r[1];return Mt.undefined(n)?{before:o,middle:"",after:i}:(t.append&&(o=o.replace(/[ ]$/,"")).length&&(n=" "+n),t.padBefore&&(o=o.replace(/[ ]$/,"")).length&&(n=" "+n),t.padAfter&&(i=i.replace(/^[ ]/,""),n+=" "),t.replace&&(o=o.replace(/\S*\s?$/,"")),{before:o,middle:n,after:i})}(n,function(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(e),!0).forEach((function(t){yt(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):dr(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}({},t,{cursorPos:$.selectionStart,value:$.value})),r=e.before,o=e.middle;L(r+o+e.after),$.selectionStart=$.selectionEnd=(r+o).length}function N(n,t){w.length&&(n.preventDefault(),e(2,b+=t),b<0&&e(2,b=w.length-1),b>=w.length&&e(2,b=0),C(w[b],{replace:!0}))}function R(n){!n.conversation_id&&v.conversation_id&&(n.conversation_id=v.conversation_id)}function A(n){e(2,b=0),e(22,k=n.selectionStart),v.update({userInput:n.value})}function D(){y.maxHeight||e(5,y.maxHeight=y.parentNode.offsetHeight,y),e(5,y.value=$.value,y),e(5,y.style.width=$.offsetWidth+"px",y),$.style.height=(y.maxHeight>y.scrollHeight?y.scrollHeight:y.maxHeight)+"px"}function j(n){var t,r,o;if(w[b])n.preventDefault(),C(w[b],{replace:!0}),e(22,k=$.selectionStart+1);else if(!(n.altKey||n.ctrlKey||n.metaKey||n.shiftKey)){n.preventDefault();var i={method:"send"};i.message=(t=$.value,r=t.split(/\s/),o=Fe[r[0].toLowerCase()],Mt.function(o)?o(r.slice(1)):o?[o].concat(r.slice(1)).filter((function(n){return Mt.defined(n)&&n.length})).join(" "):t),i.message.length&&v.send(i,R),v.is("search")||L(""),setTimeout(D,10)}}function L(n){$&&($.value=n),v.update({userInput:n})}function M(n){$&&(e(3,w=n>$.value.length?[]:function(n,t,e){var r=e.conversation,o=e.user,i="",a="",c=n.substring(0,t).replace(/(\S)(\S*)$/,(function(n,t,e){return i=t,a=e,""})),u=":"==i&&a.length?"emojis":"/"!=i||c.length?"@"==i&&a.length?"nicks":"#"==i||"&"==i?"conversations":"none":"commands",s=Je(u,{conversation:r,query:i+a,user:o});return s.length&&s.unshift({autocompleteCategory:u,val:i+a}),s}($.value,n,{conversation:v,user:E})),e(4,_=w.length&&w[0].autocompleteCategory||"none"))}function I(n){I.lock!=n.path&&(e(23,I.lock=n.path,I),L(Mt.undefined(n.userInput)?"":n.userInput))}function U(n){var t=n.target&&n.target.files||n.dataTransfer&&n.dataTransfer.files;if(t&&t.length){if(t.length>1)return v.addMessages({message:"Cannot upload more than one file.",type:"error"});var e=new FormData;e.append("file",t[0]),x("uploadFile").perform({formData:e}).then((function(n){var t=n.res.body;if(t.files&&t.files.length)return C(t.files[0].url,{append:!0});t.errors&&v.addMessages({message:"Could not upload file: %1",vars:[s(Tt(t.errors))],type:"error"})}))}}return P(n,S,(function(n){return e(6,u=n)})),n.$$set=function(n){"conversation"in n&&h(e(0,v=n.conversation))},n.$$.update=function(){1&n.$$.dirty[0]&&e(24,r=E.findConversation({connection_id:v.connection_id})),1&n.$$.dirty[0]&&v&&H(S,u="",u),16777216&n.$$.dirty[0]&&e(25,o=r&&r.nick),50331651&n.$$.dirty[0]&&e(7,i=v.is("search")?s("What are you looking for?"):r&&r.is("unreachable")?s("Connecting..."):s("What is on your mind %1?",o)),1&n.$$.dirty[0]&&e(8,a=v.is("search")?"search":"paper-plane"),1&n.$$.dirty[0]&&e(9,c=Qe("onVideoLinkClick",{conversation:v,user:E})),4194304&n.$$.dirty[0]&&M(k),8388609&n.$$.dirty[0]&&I(v)},[v,s,b,w,_,y,u,i,a,c,f,l,d,p,{y:-10,duration:200},E,S,function(n){($=n).addEventListener("focus",(function(){return e(22,k=$.value.length+1)})),$.addEventListener("change",(function(){return A($)})),$.addEventListener("input",D),$.addEventListener("keyup",(function(n){1!=n.key.length&&-1==["ArrowLeft","ArrowRight","Backspace"].indexOf(n.key)||A($)})),$.addEventListener("keydown",(function(n){return"ArrowDown"==n.key?N(n,n.shiftKey?4:1):"ArrowUp"==n.key?N(n,n.shiftKey?-4:-1):"Enter"==n.key?j(n):"Tab"==n.key?N(n,n.shiftKey?-1:1):void 0})),L(Mt.undefined(v.userInput)?"":v.userInput)},function(n){e(2,b=parseInt(n.target.closest("a").href.replace(/.*index:/,""),10)),C(w[b],{padAfter:!0,replace:!0}),setTimeout((function(){return $.focus()}),1)},j,U,g,k,I,r,o,function(t){Sn(n,t)},function(n){Cn[n?"unshift":"push"]((function(){e(5,y=n)}))}]}Ve.close=function(){var n=L(this);return!!n&&[!0,n.close(),this.set(null)][0]},Ve.open=function(n){var t=this,e=window.open(n.toString(),"convos_video");["beforeunload","close"].forEach((function(n){return e.addEventListener(n,(function(){return t.set(null)}))})),this.set(e)};var _r=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(lr()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,wr,br,j,{uploader:21,conversation:0},[-1,-1]),t}return S(i,[{key:"uploader",get:function(){return this.$$.ctx[21]}}]),i}(it);function kr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var xr=function(n){return{}},Er=function(n){return{}};function Sr(n){var t,e,r,o,i,a,c,u,s;(o=new $t({props:{family:"regular",name:n[6]}})).$on("click",n[14]);var f,l=n[10].label,d=M(l,n,n[9],Er),p=d||{c:function(){f=X("Label")},m:function(n,t){J(n,f,t)},d:function(n){n&&V(f)}};return{c:function(){t=Z("div"),e=Z("input"),r=nn(),nt(o.$$.fragment),i=nn(),a=Z("label"),p&&p.c(),on(e,"type","checkbox"),on(e,"id",n[3]),on(e,"name",n[2]),e.disabled=n[0],on(a,"for",n[3]),on(t,"class","checkbox"),t.hidden=n[1],ln(t,"has-focus",n[5]),ln(t,"is-disabled",n[0])},m:function(f,l){J(f,t,l),Y(t,e),e.checked=n[4],Y(t,r),tt(o,t,null),Y(t,i),Y(t,a),p&&p.m(a,null),c=!0,u||(s=[en(e,"change",n[11]),en(e,"blur",n[12]),en(e,"focus",n[13])],u=!0)},p:function(n,r){var i=st(r,1)[0];(!c||8&i)&&on(e,"id",n[3]),(!c||4&i)&&on(e,"name",n[2]),(!c||1&i)&&(e.disabled=n[0]),16&i&&(e.checked=n[4]);var u={};64&i&&(u.name=n[6]),o.$set(u),d&&d.p&&(!c||512&i)&&U(d,l,n,n[9],i,xr,Er),(!c||8&i)&&on(a,"for",n[3]),(!c||2&i)&&(t.hidden=n[1]),32&i&&ln(t,"has-focus",n[5]),1&i&&ln(t,"is-disabled",n[0])},i:function(n){c||(Gn(o.$$.fragment,n),Gn(p,n),c=!0)},o:function(n){Yn(o.$$.fragment,n),Yn(p,n),c=!1},d:function(n){n&&V(t),et(o),p&&p.d(n),u=!1,A(s)}}}function Or(n,t,e){var r,o,i=t.$$slots,a=void 0===i?{}:i,c=t.$$scope,u=t.disabled,s=void 0!==u&&u,f=t.form,l=t.hidden,d=void 0!==l&&l,p=t.name,m=void 0===p?"":p,h=t.id,g=void 0===h?m?"form_"+m:Gt():h,v=f.field(m);P(n,v,(function(n){return e(4,o=n)}));var $=!1;return n.$$set=function(n){"disabled"in n&&e(0,s=n.disabled),"form"in n&&e(8,f=n.form),"hidden"in n&&e(1,d=n.hidden),"name"in n&&e(2,m=n.name),"id"in n&&e(3,g=n.id),"$$scope"in n&&e(9,c=n.$$scope)},n.$$.update=function(){16&n.$$.dirty&&e(6,r=o?"check-square":"square")},[s,d,m,g,o,$,r,v,f,c,a,function(){o=this.checked,v.set(o)},function(){e(5,$=!1)},function(){e(5,$=!0)},function(){s||H(v,o=!o,o)}]}var Cr=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(kr()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,Or,Sr,j,{disabled:0,form:8,hidden:1,name:2,id:3}),t}return i}(it),Nr=function(){function n(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http://localhost";e(this,n),this._url=new URL("http://localhost"),Object.defineProperty(this,"href",{get:function(){return t._url.href.replace(/^http:/,t.protocol)},set:function(n){t._url.href=n.replace(/^\w+:/,"http:"),t.protocol=n.match(/^\w+:/)[0]}}),["host","pathname","password","searchParams","username"].forEach((function(n){Object.defineProperty(t,n,{get:function(){return t._url[n]},set:function(e){t._url[n]=e}})})),this.href=r}return S(n,[{key:"fromFields",value:function(n){Mt.string(n.protocol)&&(this.protocol=n.protocol.replace(/:?$/,":")),Mt.string(n.host)&&(this.host=n.host),Mt.string(n.password)&&(this.password=n.password),Mt.string(n.username)&&(this.username=n.username),Mt.string(n.conversation_id)&&(this.pathname=encodeURIComponent(n.conversation_id));var t=this.searchParams;return Mt.string(n.local_address)&&t.append("local_address",n.local_address||""),Mt.string(n.nick)&&t.append("nick",n.nick.trim()),Mt.string(n.realname)&&n.realname.length&&t.append("realname",n.realname.trim()),Mt.string(n.sasl)&&t.append("sasl",n.sasl||"none"),t.append("tls",Mt.true(n.tls)?"1":"0"),t.append("tls_verify",Mt.true(n.tls)&&Mt.true(n.tls_verify)?"1":"0"),this}},{key:"toFields",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.protocol=this.protocol.replace(/:$/,""),n.host=this.host,n.password=Mt.string(this.password)?this.password:"",n.username=Mt.string(this.username)?this.username:"",n.conversation_id=decodeURIComponent(this.pathname.split("/").filter((function(n){return n.length}))[0]||"");var t=this.searchParams;return n.local_address=t.get("local_address")||n.local_address||"",n.nick=t.get("nick")||n.nick||"",n.realname=t.get("realname")||n.realname||"",n.sasl=t.get("sasl")||n.sasl||"none",n.realname=t.get("realname")||n.realname||"",n.tls=Mt.true(t.get("tls")),n.tls_verify=Mt.true(t.get("tls_verify")),n}},{key:"toString",value:function(){return this.href.replace(/^http:/,this.protocol)}}]),n}(),Rr=o((function(n,t){var e,r;e=function(n){var t=[],e=Object.keys,r={},o={},a=!0,c=/^(no-?highlight|plain|text)$/i,u=/\blang(?:uage)?-([\w-]+)\b/i,s=/((^(<[^>]+>|\t|)+|(?:\n)))/gm,f="Could not find the language '{}', did you forget to load/include a language module?",l={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},d="of and for in not or if then".split(" ");function p(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function m(n){return n.nodeName.toLowerCase()}function h(n){return c.test(n)}function g(n){var t,e={},r=Array.prototype.slice.call(arguments,1);for(t in n)e[t]=n[t];return r.forEach((function(n){for(t in n)e[t]=n[t]})),e}function v(n){var t=[];return function n(e,r){for(var o=e.firstChild;o;o=o.nextSibling)3===o.nodeType?r+=o.nodeValue.length:1===o.nodeType&&(t.push({event:"start",offset:r,node:o}),r=n(o,r),m(o).match(/br|hr|img|input/)||t.push({event:"stop",offset:r,node:o}));return r}(n,0),t}function $(n){return n.variants&&!n.cached_variants&&(n.cached_variants=n.variants.map((function(t){return g(n,{variants:null},t)}))),n.cached_variants?n.cached_variants:function n(t){return!!t&&(t.endsWithParent||n(t.starts))}(n)?[g(n,{starts:n.starts?g(n.starts):null})]:Object.isFrozen(n)?[g(n)]:[n]}function y(n,t){return t?Number(t):(e=n,-1!=d.indexOf(e.toLowerCase())?0:1);var e}function b(n){function t(n){return n&&n.source||n}function r(e,r){return new RegExp(t(e),"m"+(n.case_insensitive?"i":"")+(r?"g":""))}function o(n){var e,o,i={},a=[],c={},u=1;function s(n,t){i[u]=n,a.push([n,t]),u+=function(n){return new RegExp(n.toString()+"|").exec("").length-1}(t)+1}for(var f=0;f<n.contains.length;f++)s(o=n.contains[f],o.beginKeywords?"\\.?(?:"+o.begin+")\\.?":o.begin);n.terminator_end&&s("end",n.terminator_end),n.illegal&&s("illegal",n.illegal);var l=a.map((function(n){return n[1]}));return e=r(function(n,e){for(var r=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./,o=0,i="",a=0;a<n.length;a++){var c=o+=1,u=t(n[a]);for(a>0&&(i+=e),i+="(";u.length>0;){var s=r.exec(u);if(null==s){i+=u;break}i+=u.substring(0,s.index),u=u.substring(s.index+s[0].length),"\\"==s[0][0]&&s[1]?i+="\\"+String(Number(s[1])+c):(i+=s[0],"("==s[0]&&o++)}i+=")"}return i}(l,"|"),!0),c.lastIndex=0,c.exec=function(t){var r;if(0===a.length)return null;e.lastIndex=c.lastIndex;var o=e.exec(t);if(!o)return null;for(var u=0;u<o.length;u++)if(null!=o[u]&&null!=i[""+u]){r=i[""+u];break}return"string"==typeof r?(o.type=r,o.extra=[n.illegal,n.terminator_end]):(o.type="begin",o.rule=r),o},c}if(n.contains&&-1!=n.contains.indexOf("self")){if(!a)throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");n.contains=n.contains.filter((function(n){return"self"!=n}))}!function i(a,c){a.compiled||(a.compiled=!0,a.keywords=a.keywords||a.beginKeywords,a.keywords&&(a.keywords=function(n,t){var r={};return"string"==typeof n?o("keyword",n):e(n).forEach((function(t){o(t,n[t])})),r;function o(n,e){t&&(e=e.toLowerCase()),e.split(" ").forEach((function(t){var e=t.split("|");r[e[0]]=[n,y(e[0],e[1])]}))}}(a.keywords,n.case_insensitive)),a.lexemesRe=r(a.lexemes||/\w+/,!0),c&&(a.beginKeywords&&(a.begin="\\b("+a.beginKeywords.split(" ").join("|")+")\\b"),a.begin||(a.begin=/\B|\b/),a.beginRe=r(a.begin),a.endSameAsBegin&&(a.end=a.begin),a.end||a.endsWithParent||(a.end=/\B|\b/),a.end&&(a.endRe=r(a.end)),a.terminator_end=t(a.end)||"",a.endsWithParent&&c.terminator_end&&(a.terminator_end+=(a.end?"|":"")+c.terminator_end)),a.illegal&&(a.illegalRe=r(a.illegal)),null==a.relevance&&(a.relevance=1),a.contains||(a.contains=[]),a.contains=Array.prototype.concat.apply([],a.contains.map((function(n){return $("self"===n?a:n)}))),a.contains.forEach((function(n){i(n,a)})),a.starts&&i(a.starts,c),a.terminators=o(a))}(n)}function w(n,t,e,o){var i=t;function c(n,t){var e=$.case_insensitive?t[0].toLowerCase():t[0];return n.keywords.hasOwnProperty(e)&&n.keywords[e]}function u(n,t,e,r){if(!e&&""===t)return"";if(!n)return t;var o='<span class="'+(r?"":l.classPrefix);return(o+=n+'">')+t+(e?"":"</span>")}function s(){E+=null!=k.subLanguage?function(){var n="string"==typeof k.subLanguage;if(n&&!r[k.subLanguage])return p(S);var t=n?w(k.subLanguage,S,!0,x[k.subLanguage]):_(S,k.subLanguage.length?k.subLanguage:void 0);return k.relevance>0&&(C+=t.relevance),n&&(x[k.subLanguage]=t.top),u(t.language,t.value,!1,!0)}():function(){var n,t,e,r;if(!k.keywords)return p(S);for(r="",t=0,k.lexemesRe.lastIndex=0,e=k.lexemesRe.exec(S);e;)r+=p(S.substring(t,e.index)),(n=c(k,e))?(C+=n[1],r+=u(n[0],p(e[0]))):r+=p(e[0]),t=k.lexemesRe.lastIndex,e=k.lexemesRe.exec(S);return r+p(S.substr(t))}(),S=""}function d(n){E+=n.className?u(n.className,"",!0):"",k=Object.create(n,{parent:{value:k}})}function m(n){var t=n[0],e=n.rule;return e&&e.endSameAsBegin&&(e.endRe=new RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")),e.skip?S+=t:(e.excludeBegin&&(S+=t),s(),e.returnBegin||e.excludeBegin||(S=t)),d(e),e.returnBegin?0:t.length}function h(n){var t=n[0],e=i.substr(n.index),r=function n(t,e){if(function(n,t){var e=n&&n.exec(t);return e&&0===e.index}(t.endRe,e)){for(;t.endsParent&&t.parent;)t=t.parent;return t}if(t.endsWithParent)return n(t.parent,e)}(k,e);if(r){var o=k;o.skip?S+=t:(o.returnEnd||o.excludeEnd||(S+=t),s(),o.excludeEnd&&(S=t));do{k.className&&(E+="</span>"),k.skip||k.subLanguage||(C+=k.relevance),k=k.parent}while(k!==r.parent);return r.starts&&(r.endSameAsBegin&&(r.starts.endRe=r.endRe),d(r.starts)),o.returnEnd?0:t.length}}var g={};function v(n,t){var r=t&&t[0];if(S+=n,null==r)return s(),0;if("begin"==g.type&&"end"==t.type&&g.index==t.index&&""===r)return S+=i.slice(t.index,t.index+1),1;if(g=t,"begin"===t.type)return m(t);if("illegal"===t.type&&!e)throw new Error('Illegal lexeme "'+r+'" for mode "'+(k.className||"<unnamed>")+'"');if("end"===t.type){var o=h(t);if(null!=o)return o}return S+=r,r.length}var $=O(n);if(!$)throw console.error(f.replace("{}",n)),new Error('Unknown language: "'+n+'"');b($);var y,k=o||$,x={},E="";for(y=k;y!==$;y=y.parent)y.className&&(E=u(y.className,"",!0)+E);var S="",C=0;try{for(var N,R,A=0;k.terminators.lastIndex=A,N=k.terminators.exec(i);)R=v(i.substring(A,N.index),N),A=N.index+R;for(v(i.substr(A)),y=k;y.parent;y=y.parent)y.className&&(E+="</span>");return{relevance:C,value:E,illegal:!1,language:n,top:k}}catch(t){if(t.message&&-1!==t.message.indexOf("Illegal"))return{illegal:!0,relevance:0,value:p(i)};if(a)return{relevance:0,value:p(i),language:n,top:k,errorRaised:t};throw t}}function _(n,t){t=t||l.languages||e(r);var o={relevance:0,value:p(n)},i=o;return t.filter(O).filter(C).forEach((function(t){var e=w(t,n,!1);e.language=t,e.relevance>i.relevance&&(i=e),e.relevance>o.relevance&&(i=o,o=e)})),i.language&&(o.second_best=i),o}function k(n){return l.tabReplace||l.useBR?n.replace(s,(function(n,t){return l.useBR&&"\n"===n?"<br>":l.tabReplace?t.replace(/\t/g,l.tabReplace):""})):n}function x(n){var e,r,i,a,c,s=function(n){var t,e,r,o,i=n.className+" ";if(i+=n.parentNode?n.parentNode.className:"",e=u.exec(i)){var a=O(e[1]);return a||(console.warn(f.replace("{}",e[1])),console.warn("Falling back to no-highlight mode for this block.",n)),a?e[1]:"no-highlight"}for(t=0,r=(i=i.split(/\s+/)).length;t<r;t++)if(h(o=i[t])||O(o))return o}(n);h(s)||(l.useBR?(e=document.createElement("div")).innerHTML=n.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n"):e=n,c=e.textContent,i=s?w(s,c,!0):_(c),(r=v(e)).length&&((a=document.createElement("div")).innerHTML=i.value,i.value=function(n,e,r){var o=0,i="",a=[];function c(){return n.length&&e.length?n[0].offset!==e[0].offset?n[0].offset<e[0].offset?n:e:"start"===e[0].event?n:e:n.length?n:e}function u(n){i+="<"+m(n)+t.map.call(n.attributes,(function(n){return" "+n.nodeName+'="'+p(n.value).replace(/"/g,"&quot;")+'"'})).join("")+">"}function s(n){i+="</"+m(n)+">"}function f(n){("start"===n.event?u:s)(n.node)}for(;n.length||e.length;){var l=c();if(i+=p(r.substring(o,l[0].offset)),o=l[0].offset,l===n){a.reverse().forEach(s);do{f(l.splice(0,1)[0]),l=c()}while(l===n&&l.length&&l[0].offset===o);a.reverse().forEach(u)}else"start"===l[0].event?a.push(l[0].node):a.pop(),f(l.splice(0,1)[0])}return i+p(r.substr(o))}(r,v(a),c)),i.value=k(i.value),n.innerHTML=i.value,n.className=function(n,t,e){var r=t?o[t]:e,i=[n.trim()];return n.match(/\bhljs\b/)||i.push("hljs"),-1===n.indexOf(r)&&i.push(r),i.join(" ").trim()}(n.className,s,i.language),n.result={language:i.language,re:i.relevance},i.second_best&&(n.second_best={language:i.second_best.language,re:i.second_best.relevance}))}function E(){if(!E.called){E.called=!0;var n=document.querySelectorAll("pre code");t.forEach.call(n,x)}}var S={disableAutodetect:!0};function O(n){return n=(n||"").toLowerCase(),r[n]||r[o[n]]}function C(n){var t=O(n);return t&&!t.disableAutodetect}return n.highlight=w,n.highlightAuto=_,n.fixMarkup=k,n.highlightBlock=x,n.configure=function(n){l=g(l,n)},n.initHighlighting=E,n.initHighlightingOnLoad=function(){window.addEventListener("DOMContentLoaded",E,!1),window.addEventListener("load",E,!1)},n.registerLanguage=function(t,e){var i;try{i=e(n)}catch(n){if(console.error("Language definition for '{}' could not be registered.".replace("{}",t)),!a)throw n;console.error(n),i=S}r[t]=i,i.rawDefinition=e.bind(null,n),i.aliases&&i.aliases.forEach((function(n){o[n]=t}))},n.listLanguages=function(){return e(r)},n.getLanguage=O,n.requireLanguage=function(n){var t=O(n);if(t)return t;throw new Error("The '{}' language is required, but not loaded.".replace("{}",n))},n.autoDetection=C,n.inherit=g,n.debugMode=function(){a=!1},n.IDENT_RE="[a-zA-Z]\\w*",n.UNDERSCORE_IDENT_RE="[a-zA-Z_]\\w*",n.NUMBER_RE="\\b\\d+(\\.\\d+)?",n.C_NUMBER_RE="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",n.BINARY_NUMBER_RE="\\b(0b[01]+)",n.RE_STARTERS_RE="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",n.BACKSLASH_ESCAPE={begin:"\\\\[\\s\\S]",relevance:0},n.APOS_STRING_MODE={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[n.BACKSLASH_ESCAPE]},n.QUOTE_STRING_MODE={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[n.BACKSLASH_ESCAPE]},n.PHRASAL_WORDS_MODE={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},n.COMMENT=function(t,e,r){var o=n.inherit({className:"comment",begin:t,end:e,contains:[]},r||{});return o.contains.push(n.PHRASAL_WORDS_MODE),o.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|XXX):",relevance:0}),o},n.C_LINE_COMMENT_MODE=n.COMMENT("//","$"),n.C_BLOCK_COMMENT_MODE=n.COMMENT("/\\*","\\*/"),n.HASH_COMMENT_MODE=n.COMMENT("#","$"),n.NUMBER_MODE={className:"number",begin:n.NUMBER_RE,relevance:0},n.C_NUMBER_MODE={className:"number",begin:n.C_NUMBER_RE,relevance:0},n.BINARY_NUMBER_MODE={className:"number",begin:n.BINARY_NUMBER_RE,relevance:0},n.CSS_NUMBER_MODE={className:"number",begin:n.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},n.REGEXP_MODE={className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[n.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[n.BACKSLASH_ESCAPE]}]},n.TITLE_MODE={className:"title",begin:n.IDENT_RE,relevance:0},n.UNDERSCORE_TITLE_MODE={className:"title",begin:n.UNDERSCORE_IDENT_RE,relevance:0},n.METHOD_GUARD={begin:"\\.\\s*"+n.UNDERSCORE_IDENT_RE,relevance:0},[n.BACKSLASH_ESCAPE,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.PHRASAL_WORDS_MODE,n.COMMENT,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,n.HASH_COMMENT_MODE,n.NUMBER_MODE,n.C_NUMBER_MODE,n.BINARY_NUMBER_MODE,n.CSS_NUMBER_MODE,n.REGEXP_MODE,n.TITLE_MODE,n.UNDERSCORE_TITLE_MODE,n.METHOD_GUARD].forEach((function(n){!function n(t){Object.freeze(t);var e="function"==typeof t;return Object.getOwnPropertyNames(t).forEach((function(r){!t.hasOwnProperty(r)||null===t[r]||"object"!==i(t[r])&&"function"!=typeof t[r]||e&&("caller"===r||"callee"===r||"arguments"===r)||Object.isFrozen(t[r])||n(t[r])})),t}(n)})),n},r="object"===("undefined"==typeof window?"undefined":i(window))&&window||"object"===("undefined"==typeof self?"undefined":i(self))&&self,t.nodeType?r&&(r.hljs=e({})):e(t)}));var Ar=/\r\n|\r|\n/g;function Dr(n){var t=n.className;if(/hljs-/.test(t)){for(var e=jr(n.innerHTML),r=0,o="";r<e.length;r++){var i=e[r].length>0?e[r]:" ";o+='<span class="'.concat(t,'">').concat(i,"</span>\n")}n.innerHTML=o.trim()}}function jr(n){return 0===n.length?[]:n.split(Ar)}function Tr(n){return(n.trim().match(Ar)||[]).length}document.addEventListener("copy",(function(n){var t,e=window.getSelection();(function(n){for(var t=n;t;){if(t.className&&-1!==t.className.indexOf("hljs-ln-code"))return!0;t=t.parentNode}return!1})(e.anchorNode)&&(t=-1!==window.navigator.userAgent.indexOf("Edge")?function(n){for(var t=n.toString(),e=n.anchorNode;"TD"!==e.nodeName;)e=e.parentNode;for(var r=n.focusNode;"TD"!==r.nodeName;)r=r.parentNode;var o=parseInt(e.dataset.lineNumber,10),i=parseInt(r.dataset.lineNumber,10);if(o!=i){var a=e.textContent,c=r.textContent;if(o>i){var u=o;o=i,i=u,u=a,a=c,c=u}for(;0!==t.indexOf(a);)a=a.slice(1);for(;-1===t.lastIndexOf(c);)c=c.slice(0,-1);for(var s=a,f=function(n){for(var t=n;"TABLE"!==t.nodeName;)t=t.parentNode;return t}(e),l=o+1;l<i;++l){var d=".".concat("hljs-ln-code","[").concat("data-line-number",'="').concat(l,'"]');s+="\n"+f.querySelector(d).textContent}return s+="\n"+c}return t}(e):e.toString(),n.clipboardData.setData("text/plain",t),n.preventDefault())}));var Lr;Rr.registerLanguage("css",(function(n){var t={begin:/(?:[A-Z\_\.\-]+|--[a-zA-Z0-9_-]+)\s*:/,returnBegin:!0,end:";",endsWithParent:!0,contains:[{className:"attribute",begin:/\S/,end:":",excludeEnd:!0,starts:{endsWithParent:!0,excludeEnd:!0,contains:[{begin:/[\w-]+\(/,returnBegin:!0,contains:[{className:"built_in",begin:/[\w-]+/},{begin:/\(/,end:/\)/,contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.CSS_NUMBER_MODE]}]},n.CSS_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,n.C_BLOCK_COMMENT_MODE,{className:"number",begin:"#[0-9A-Fa-f]+"},{className:"meta",begin:"!important"}]}}]};return{case_insensitive:!0,illegal:/[=\/|'\$]/,contains:[n.C_BLOCK_COMMENT_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/},{className:"selector-class",begin:/\.[A-Za-z0-9_-]+/},{className:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},{className:"selector-pseudo",begin:/:(:)?[a-zA-Z0-9\_\-\+\(\)"'.]+/},{begin:"@(page|font-face)",lexemes:"@[a-z-]+",keywords:"@page @font-face"},{begin:"@",end:"[{;]",illegal:/:/,returnBegin:!0,contains:[{className:"keyword",begin:/@\-?\w[\w]*(\-\w+)*/},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:"and or not only",contains:[{begin:/[a-z-]+:/,className:"attribute"},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"[a-zA-Z-][a-zA-Z0-9_-]*",relevance:0},{begin:"{",end:"}",illegal:/\S/,contains:[n.C_BLOCK_COMMENT_MODE,t]}]}})),Rr.registerLanguage("diff",(function(n){return{aliases:["patch"],contains:[{className:"meta",relevance:10,variants:[{begin:/^@@ +\-\d+,\d+ +\+\d+,\d+ +@@$/},{begin:/^\*\*\* +\d+,\d+ +\*\*\*\*$/},{begin:/^\-\-\- +\d+,\d+ +\-\-\-\-$/}]},{className:"comment",variants:[{begin:/Index: /,end:/$/},{begin:/={3,}/,end:/$/},{begin:/^\-{3}/,end:/$/},{begin:/^\*{3} /,end:/$/},{begin:/^\+{3}/,end:/$/},{begin:/^\*{15}$/}]},{className:"addition",begin:"^\\+",end:"$"},{className:"deletion",begin:"^\\-",end:"$"},{className:"addition",begin:"^\\!",end:"$"}]}})),Rr.registerLanguage("dockerfile",(function(n){return{aliases:["docker"],case_insensitive:!0,keywords:"from maintainer expose env arg user onbuild stopsignal",contains:[n.HASH_COMMENT_MODE,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.NUMBER_MODE,{beginKeywords:"run cmd entrypoint volume add copy workdir label healthcheck shell",starts:{end:/[^\\]$/,subLanguage:"bash"}}],illegal:"</"}})),Rr.registerLanguage("go",(function(n){var t={keyword:"break default func interface select case map struct chan else goto package switch const fallthrough if range type continue for import return var go defer bool byte complex64 complex128 float32 float64 int8 int16 int32 int64 string uint8 uint16 uint32 uint64 int uint uintptr rune",literal:"true false iota nil",built_in:"append cap close complex copy imag len make new panic print println real recover delete"};return{aliases:["golang"],keywords:t,illegal:"</",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,{className:"string",variants:[n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{begin:n.C_NUMBER_RE+"[i]",relevance:1},n.C_NUMBER_MODE]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[n.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,keywords:t,illegal:/["']/}]}]}})),Rr.registerLanguage("http",(function(n){return{aliases:["https"],illegal:"\\S",contains:[{begin:"^HTTP/[0-9\\.]+",end:"$",contains:[{className:"number",begin:"\\b\\d{3}\\b"}]},{begin:"^[A-Z]+ (.*?) HTTP/[0-9\\.]+$",returnBegin:!0,end:"$",contains:[{className:"string",begin:" ",end:" ",excludeBegin:!0,excludeEnd:!0},{begin:"HTTP/[0-9\\.]+"},{className:"keyword",begin:"[A-Z]+"}]},{className:"attribute",begin:"^\\w",end:": ",excludeEnd:!0,illegal:"\\n|\\s|=",starts:{end:"$",relevance:0}},{begin:"\\n\\n",starts:{subLanguage:[],endsWithParent:!0}}]}})),Rr.registerLanguage("javascript",(function(n){var t="<>",e="</>",r={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/},o="[A-Za-z$_][0-9A-Za-z$_]*",i={keyword:"in of if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const export super debugger as async await static import from as",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document Symbol Set Map WeakSet WeakMap Proxy Reflect Promise"},a={className:"number",variants:[{begin:"\\b(0[bB][01]+)n?"},{begin:"\\b(0[oO][0-7]+)n?"},{begin:n.C_NUMBER_RE+"n?"}],relevance:0},c={className:"subst",begin:"\\$\\{",end:"\\}",keywords:i,contains:[]},u={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,c],subLanguage:"xml"}},s={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,c],subLanguage:"css"}},f={className:"string",begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE,c]};c.contains=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,u,s,f,a,n.REGEXP_MODE];var l=c.contains.concat([n.C_BLOCK_COMMENT_MODE,n.C_LINE_COMMENT_MODE]);return{aliases:["js","jsx","mjs","cjs"],keywords:i,contains:[{className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},{className:"meta",begin:/^#!/,end:/$/},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,u,s,f,n.C_LINE_COMMENT_MODE,n.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+",contains:[{className:"type",begin:"\\{",end:"\\}",relevance:0},{className:"variable",begin:o+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),n.C_BLOCK_COMMENT_MODE,a,{begin:/[{,\n]\s*/,relevance:0,contains:[{begin:o+"\\s*:",returnBegin:!0,relevance:0,contains:[{className:"attr",begin:o,relevance:0}]}]},{begin:"("+n.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,n.REGEXP_MODE,{className:"function",begin:"(\\(.*?\\)|"+o+")\\s*=>",returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:o},{begin:/\(\s*\)/},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:i,contains:l}]}]},{className:"",begin:/\s/,end:/\s*/,skip:!0},{variants:[{begin:t,end:e},{begin:r.begin,end:r.end}],subLanguage:"xml",contains:[{begin:r.begin,end:r.end,skip:!0,contains:["self"]}]}],relevance:0},{className:"function",beginKeywords:"function",end:/\{/,excludeEnd:!0,contains:[n.inherit(n.TITLE_MODE,{begin:o}),{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,contains:l}],illegal:/\[|%/},{begin:/\$[(.]/},n.METHOD_GUARD,{className:"class",beginKeywords:"class",end:/[{;=]/,excludeEnd:!0,illegal:/[:"\[\]]/,contains:[{beginKeywords:"extends"},n.UNDERSCORE_TITLE_MODE]},{beginKeywords:"constructor get set",end:/\{/,excludeEnd:!0}],illegal:/#(?!!)/}})),Rr.registerLanguage("markdown",(function(n){return{aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$"},{begin:"^.+?\\n[=-]{2,}$"}]},{begin:"<",end:">",subLanguage:"xml",relevance:0},{className:"bullet",begin:"^\\s*([*+-]|(\\d+\\.))\\s+"},{className:"strong",begin:"[*_]{2}.+?[*_]{2}"},{className:"emphasis",variants:[{begin:"\\*.+?\\*"},{begin:"_.+?_",relevance:0}]},{className:"quote",begin:"^>\\s+",end:"$"},{className:"code",variants:[{begin:"^```\\w*\\s*$",end:"^```[ ]*$"},{begin:"`.+?`"},{begin:"^( {4}|\\t)",end:"$",relevance:0}]},{begin:"^[-\\*]{3,}",end:"$"},{begin:"\\[.+?\\][\\(\\[].*?[\\)\\]]",returnBegin:!0,contains:[{className:"string",begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0,relevance:0},{className:"link",begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}],relevance:10},{begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]}]}})),Rr.registerLanguage("mojolicious",(function(n){return{subLanguage:"xml",contains:[{className:"meta",begin:"^__(END|DATA)__$"},{begin:"^\\s*%{1,2}={0,2}",end:"$",subLanguage:"perl"},{begin:"<%{1,2}={0,2}",end:"={0,1}%>",subLanguage:"perl",excludeBegin:!0,excludeEnd:!0}]}})),Rr.registerLanguage("nginx",(function(n){var t={className:"variable",variants:[{begin:/\$\d+/},{begin:/\$\{/,end:/}/},{begin:"[\\$\\@]"+n.UNDERSCORE_IDENT_RE}]},e={endsWithParent:!0,lexemes:"[a-z/_]+",keywords:{literal:"on off yes no true false none blocked debug info notice warn error crit select break last permanent redirect kqueue rtsig epoll poll /dev/poll"},relevance:0,illegal:"=>",contains:[n.HASH_COMMENT_MODE,{className:"string",contains:[n.BACKSLASH_ESCAPE,t],variants:[{begin:/"/,end:/"/},{begin:/'/,end:/'/}]},{begin:"([a-z]+):/",end:"\\s",endsWithParent:!0,excludeEnd:!0,contains:[t]},{className:"regexp",contains:[n.BACKSLASH_ESCAPE,t],variants:[{begin:"\\s\\^",end:"\\s|{|;",returnEnd:!0},{begin:"~\\*?\\s+",end:"\\s|{|;",returnEnd:!0},{begin:"\\*(\\.[a-z\\-]+)+"},{begin:"([a-z\\-]+\\.)+\\*"}]},{className:"number",begin:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{className:"number",begin:"\\b\\d+[kKmMgGdshdwy]*\\b",relevance:0},t]};return{aliases:["nginxconf"],contains:[n.HASH_COMMENT_MODE,{begin:n.UNDERSCORE_IDENT_RE+"\\s+{",returnBegin:!0,end:"{",contains:[{className:"section",begin:n.UNDERSCORE_IDENT_RE}],relevance:0},{begin:n.UNDERSCORE_IDENT_RE+"\\s",end:";|{",returnBegin:!0,contains:[{className:"attribute",begin:n.UNDERSCORE_IDENT_RE,starts:e}],relevance:0}],illegal:"[^\\s\\}]"}})),Rr.registerLanguage("perl",(function(n){var t="getpwent getservent quotemeta msgrcv scalar kill dbmclose undef lc ma syswrite tr send umask sysopen shmwrite vec qx utime local oct semctl localtime readpipe do return format read sprintf dbmopen pop getpgrp not getpwnam rewinddir qqfileno qw endprotoent wait sethostent bless s|0 opendir continue each sleep endgrent shutdown dump chomp connect getsockname die socketpair close flock exists index shmgetsub for endpwent redo lstat msgctl setpgrp abs exit select print ref gethostbyaddr unshift fcntl syscall goto getnetbyaddr join gmtime symlink semget splice x|0 getpeername recv log setsockopt cos last reverse gethostbyname getgrnam study formline endhostent times chop length gethostent getnetent pack getprotoent getservbyname rand mkdir pos chmod y|0 substr endnetent printf next open msgsnd readdir use unlink getsockopt getpriority rindex wantarray hex system getservbyport endservent int chr untie rmdir prototype tell listen fork shmread ucfirst setprotoent else sysseek link getgrgid shmctl waitpid unpack getnetbyname reset chdir grep split require caller lcfirst until warn while values shift telldir getpwuid my getprotobynumber delete and sort uc defined srand accept package seekdir getprotobyname semop our rename seek if q|0 chroot sysread setpwent no crypt getc chown sqrt write setnetent setpriority foreach tie sin msgget map stat getlogin unless elsif truncate exec keys glob tied closedirioctl socket readlink eval xor readline binmode setservent eof ord bind alarm pipe atan2 getgrent exp time push setgrent gt lt or ne m|0 break given say state when",e={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:t},r={begin:"->{",end:"}"},o={variants:[{begin:/\$\d/},{begin:/[\$%@](\^\w\b|#\w+(::\w+)*|{\w+}|\w+(::\w*)*)/},{begin:/[\$%@][^\s\w{]/,relevance:0}]},i=[n.BACKSLASH_ESCAPE,e,o],a=[o,n.HASH_COMMENT_MODE,n.COMMENT("^\\=\\w","\\=cut",{endsWithParent:!0}),r,{className:"string",contains:i,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*\\<",end:"\\>",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[n.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE]},{begin:"{\\w+}",contains:[],relevance:0},{begin:"-?\\w+\\s*\\=\\>",contains:[],relevance:0}]},{className:"number",begin:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",relevance:0},{begin:"(\\/\\/|"+n.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[n.HASH_COMMENT_MODE,{className:"regexp",begin:"(s|tr|y)/(\\\\.|[^/])*/(\\\\.|[^/])*/[a-z]*",relevance:10},{className:"regexp",begin:"(m|qr)?/",end:"/[a-z]*",contains:[n.BACKSLASH_ESCAPE],relevance:0}]},{className:"function",beginKeywords:"sub",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[n.TITLE_MODE]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return e.contains=a,r.contains=a,{aliases:["pl","pm"],lexemes:/[\w\.]+/,keywords:t,contains:a}})),Rr.registerLanguage("python",(function(n){var t={keyword:"and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del or def lambda async await nonlocal|10",built_in:"Ellipsis NotImplemented",literal:"False None True"},e={className:"meta",begin:/^(>>>|\.\.\.) /},r={className:"subst",begin:/\{/,end:/\}/,keywords:t,illegal:/#/},o={begin:/\{\{/,relevance:0},i={className:"string",contains:[n.BACKSLASH_ESCAPE],variants:[{begin:/(u|b)?r?'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,e],relevance:10},{begin:/(u|b)?r?"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,e],relevance:10},{begin:/(fr|rf|f)'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,e,o,r]},{begin:/(fr|rf|f)"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,e,o,r]},{begin:/(u|r|ur)'/,end:/'/,relevance:10},{begin:/(u|r|ur)"/,end:/"/,relevance:10},{begin:/(b|br)'/,end:/'/},{begin:/(b|br)"/,end:/"/},{begin:/(fr|rf|f)'/,end:/'/,contains:[n.BACKSLASH_ESCAPE,o,r]},{begin:/(fr|rf|f)"/,end:/"/,contains:[n.BACKSLASH_ESCAPE,o,r]},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},a={className:"number",relevance:0,variants:[{begin:n.BINARY_NUMBER_RE+"[lLjJ]?"},{begin:"\\b(0o[0-7]+)[lLjJ]?"},{begin:n.C_NUMBER_RE+"[lLjJ]?"}]},c={className:"params",begin:/\(/,end:/\)/,contains:["self",e,a,i,n.HASH_COMMENT_MODE]};return r.contains=[i,a,e],{aliases:["py","gyp","ipython"],keywords:t,illegal:/(<\/|->|\?)|=>/,contains:[e,a,{beginKeywords:"if",relevance:0},i,n.HASH_COMMENT_MODE,{variants:[{className:"function",beginKeywords:"def"},{className:"class",beginKeywords:"class"}],end:/:/,illegal:/[${=;\n,]/,contains:[n.UNDERSCORE_TITLE_MODE,c,{begin:/->/,endsWithParent:!0,keywords:"None"}]},{className:"meta",begin:/^[\t ]*@/,end:/$/},{begin:/\b(print|exec)\(/}]}})),Rr.registerLanguage("scss",(function(n){var t={className:"variable",begin:"(\\$[a-zA-Z-][a-zA-Z0-9_-]*)\\b"},e={className:"number",begin:"#[0-9A-Fa-f]+"};n.CSS_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,n.C_BLOCK_COMMENT_MODE;return{case_insensitive:!0,illegal:"[=/|']",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,{className:"selector-id",begin:"\\#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},{className:"selector-attr",begin:"\\[",end:"\\]",illegal:"$"},{className:"selector-tag",begin:"\\b(a|abbr|acronym|address|area|article|aside|audio|b|base|big|blockquote|body|br|button|canvas|caption|cite|code|col|colgroup|command|datalist|dd|del|details|dfn|div|dl|dt|em|embed|fieldset|figcaption|figure|footer|form|frame|frameset|(h[1-6])|head|header|hgroup|hr|html|i|iframe|img|input|ins|kbd|keygen|label|legend|li|link|map|mark|meta|meter|nav|noframes|noscript|object|ol|optgroup|option|output|p|param|pre|progress|q|rp|rt|ruby|samp|script|section|select|small|span|strike|strong|style|sub|sup|table|tbody|td|textarea|tfoot|th|thead|time|title|tr|tt|ul|var|video)\\b",relevance:0},{className:"selector-pseudo",begin:":(visited|valid|root|right|required|read-write|read-only|out-range|optional|only-of-type|only-child|nth-of-type|nth-last-of-type|nth-last-child|nth-child|not|link|left|last-of-type|last-child|lang|invalid|indeterminate|in-range|hover|focus|first-of-type|first-line|first-letter|first-child|first|enabled|empty|disabled|default|checked|before|after|active)"},{className:"selector-pseudo",begin:"::(after|before|choices|first-letter|first-line|repeat-index|repeat-item|selection|value)"},t,{className:"attribute",begin:"\\b(src|z-index|word-wrap|word-spacing|word-break|width|widows|white-space|visibility|vertical-align|unicode-bidi|transition-timing-function|transition-property|transition-duration|transition-delay|transition|transform-style|transform-origin|transform|top|text-underline-position|text-transform|text-shadow|text-rendering|text-overflow|text-indent|text-decoration-style|text-decoration-line|text-decoration-color|text-decoration|text-align-last|text-align|tab-size|table-layout|right|resize|quotes|position|pointer-events|perspective-origin|perspective|page-break-inside|page-break-before|page-break-after|padding-top|padding-right|padding-left|padding-bottom|padding|overflow-y|overflow-x|overflow-wrap|overflow|outline-width|outline-style|outline-offset|outline-color|outline|orphans|order|opacity|object-position|object-fit|normal|none|nav-up|nav-right|nav-left|nav-index|nav-down|min-width|min-height|max-width|max-height|mask|marks|margin-top|margin-right|margin-left|margin-bottom|margin|list-style-type|list-style-position|list-style-image|list-style|line-height|letter-spacing|left|justify-content|initial|inherit|ime-mode|image-orientation|image-resolution|image-rendering|icon|hyphens|height|font-weight|font-variant-ligatures|font-variant|font-style|font-stretch|font-size-adjust|font-size|font-language-override|font-kerning|font-feature-settings|font-family|font|float|flex-wrap|flex-shrink|flex-grow|flex-flow|flex-direction|flex-basis|flex|filter|empty-cells|display|direction|cursor|counter-reset|counter-increment|content|column-width|column-span|column-rule-width|column-rule-style|column-rule-color|column-rule|column-gap|column-fill|column-count|columns|color|clip-path|clip|clear|caption-side|break-inside|break-before|break-after|box-sizing|box-shadow|box-decoration-break|bottom|border-width|border-top-width|border-top-style|border-top-right-radius|border-top-left-radius|border-top-color|border-top|border-style|border-spacing|border-right-width|border-right-style|border-right-color|border-right|border-radius|border-left-width|border-left-style|border-left-color|border-left|border-image-width|border-image-source|border-image-slice|border-image-repeat|border-image-outset|border-image|border-color|border-collapse|border-bottom-width|border-bottom-style|border-bottom-right-radius|border-bottom-left-radius|border-bottom-color|border-bottom|border|background-size|background-repeat|background-position|background-origin|background-image|background-color|background-clip|background-attachment|background-blend-mode|background|backface-visibility|auto|animation-timing-function|animation-play-state|animation-name|animation-iteration-count|animation-fill-mode|animation-duration|animation-direction|animation-delay|animation|align-self|align-items|align-content)\\b",illegal:"[^\\s]"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:":",end:";",contains:[t,e,n.CSS_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,{className:"meta",begin:"!important"}]},{begin:"@(page|font-face)",lexemes:"@[a-z-]+",keywords:"@page @font-face"},{begin:"@",end:"[{;]",returnBegin:!0,keywords:"and or not only",contains:[{begin:"@[a-z-]+",className:"keyword"},t,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,e,n.CSS_NUMBER_MODE]}]}})),Rr.registerLanguage("shell",(function(n){return{aliases:["console"],contains:[{className:"meta",begin:"^\\s{0,3}[/\\w\\d\\[\\]()@-]*[>%$#]",starts:{end:"$",subLanguage:"bash"}}]}})),Rr.registerLanguage("xml",(function(n){var t={className:"symbol",begin:"&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;"},e={begin:"\\s",contains:[{className:"meta-keyword",begin:"#?[a-z_][a-z1-9_-]+",illegal:"\\n"}]},r=n.inherit(e,{begin:"\\(",end:"\\)"}),o=n.inherit(n.APOS_STRING_MODE,{className:"meta-string"}),i=n.inherit(n.QUOTE_STRING_MODE,{className:"meta-string"}),a={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:"[A-Za-z0-9\\._:-]+",relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[t]},{begin:/'/,end:/'/,contains:[t]},{begin:/[^\s"'=<>`]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,contains:[{className:"meta",begin:"<![a-z]",end:">",relevance:10,contains:[e,i,o,r,{begin:"\\[",end:"\\]",contains:[{className:"meta",begin:"<![a-z]",end:">",contains:[e,r,i,o]}]}]},n.COMMENT("\x3c!--","--\x3e",{relevance:10}),{begin:"<\\!\\[CDATA\\[",end:"\\]\\]>",relevance:10},t,{className:"meta",begin:/<\?xml/,end:/\?>/,relevance:10},{begin:/<\?(php)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},n.inherit(n.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),n.inherit(n.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]},{className:"tag",begin:"<style(?=\\s|>)",end:">",keywords:{name:"style"},contains:[a],starts:{end:"</style>",returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:"<script(?=\\s|>)",end:">",keywords:{name:"script"},contains:[a],starts:{end:"<\/script>",returnEnd:!0,subLanguage:["actionscript","javascript","handlebars","xml"]}},{className:"tag",begin:"</?",end:"/?>",contains:[{className:"name",begin:/[^\/><\s]+/,relevance:0},a]}]}})),Rr.registerLanguage("yaml",(function(n){var t={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[n.BACKSLASH_ESCAPE,{className:"template-variable",variants:[{begin:"{{",end:"}}"},{begin:"%{",end:"}"}]}]};return{case_insensitive:!0,aliases:["yml","YAML","yaml"],contains:[{className:"attr",variants:[{begin:"\\w[\\w :\\/.-]*:(?=[ \t]|$)"},{begin:'"\\w[\\w :\\/.-]*":(?=[ \t]|$)'},{begin:"'\\w[\\w :\\/.-]*':(?=[ \t]|$)"}]},{className:"meta",begin:"^---s*$",relevance:10},{className:"string",begin:"[\\|>]([0-9]?[+-])?[ ]*\\n( *)[\\S ]+\\n(\\2[\\S ]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!"+n.UNDERSCORE_IDENT_RE},{className:"type",begin:"!!"+n.UNDERSCORE_IDENT_RE},{className:"meta",begin:"&"+n.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+n.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"\\-(?=[ ]|$)",relevance:0},n.HASH_COMMENT_MODE,{beginKeywords:"true false yes no null",keywords:{literal:"true false yes no null"}},{className:"number",begin:n.C_NUMBER_RE+"\\b"},t]}})),(Lr=Rr).lineNumbersBlock=function(n,t){Lr.highlightBlock(n,t),n.innerHTML=function(n,t){var e=(t=t||{singleLine:!1}).singleLine?0:1;return function n(t){var e=t.childNodes;for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];Tr(o.textContent)>0&&(o.childNodes.length>0?n(o):Dr(o.parentNode))}}(n),function(n,t){var e=jr(n);if(""===e[e.length-1].trim()&&e.pop(),e.length>t){for(var r="",o=0,i=e.length;o<i;o++){var a=o+1;r+="<tr>"+'<td class="'.concat("hljs-ln-line"," ").concat("hljs-ln-numbers",'" ').concat("data-line-number",'="').concat(a,'">')+'<div class="'.concat("hljs-ln-n",'" ').concat("data-line-number",'="').concat(a,'"></div>')+"</td>"+'<td class="'.concat("hljs-ln-line"," ").concat("hljs-ln-code",'" ').concat("data-line-number",'="').concat(a,'">')+(e[o].length>0?e[o]:" ")+"</td></tr>"}return'<table class="'.concat("hljs-ln",'">').concat(r,"</table>")}return n}(n.innerHTML,e)}(n,t)};var Pr=o((function(n){function t(n){for(var t=document.createElement("div"),e=[[n,t]],r=[];e.length;){var o=e.shift(),a=st(o,2),c=a[0],u=a[1],s=void 0,f=void 0,l=i(c);if(null===c||"undefined"==l?l="null":Array.isArray(c)&&(l="array"),"array"==l?((f=function(n){return n}).len=c.length,(s=document.createElement("div")).className="json-array "+(f.len?"has-items":"is-empty")):"object"==l?function(){var n=Object.keys(c).sort();(f=function(t){return n[t]}).len=n.length,(s=document.createElement("div")).className="json-object "+(f.len?"has-items":"is-empty")}():((s=document.createElement("span")).className="json-"+l,s.textContent="null"==l?"null":"boolean"!=l?c:c?"true":"false"),f){var d=document.createElement("span");if(d.className="json-type",d.textContent=f.len?l+"["+f.len+"]":"{}",u.appendChild(d),-1!=r.indexOf(c))t.classList.add("has-recursive-items"),s.classList.add("is-seen");else{for(var p=0;p<f.len;p++){var m=f(p),h=document.createElement("div"),g=document.createElement("span");g.className="json-key",g.textContent=m,h.appendChild(g),s.appendChild(h),e.push([c[m],h])}r.push(c)}}u.className="json-item "+s.className.replace(/^json-/,"contains-"),u.appendChild(s)}return t}try{n.exports={jsonhtmlify:t}}catch(n){window.jsonhtmlify=t}})).jsonhtmlify;function Mr(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function Ir(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?Mr(Object(e),!0).forEach((function(t){yt(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Mr(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function Ur(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Hr={},Br=function(n){s(i,n);var t,r,o=(t=i,function(){var n,e=c(t);if(Ur()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(){var n;return e(this,i),(n=o.call(this)).prop("ro","length",(function(){return n.messages.length})),n.prop("ro","messages",[]),n.prop("rw","expandUrlToMedia",!0),n.embedCache=Hr,n}return S(i,[{key:"clear",value:function(){return this.messages.length=0,this.update({messages:!0})}},{key:"get",value:function(n){return n<0?this.messages.slice(n)[0]:this.messages[n]}},{key:"push",value:function(n){return[].push.apply(this.messages,this._fill(n)),this.update({messages:!0})}},{key:"render",value:function(){var n=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(-1!=t){var e=this.get(t);return e&&!e.rendered&&(e.embeds=this._embeds(e),e.rendered=!0,this.update({messages:!0})),this.messages}var r={};return this.messages.map((function(t,e){return t.index=e,t.className||(t.dayChanged=n._dayChanged(t,r),t.className=n._className(t,r),t.embeds=[],t.markdown=t.vars?He.lmd.apply(He,[t.message].concat(x(t.vars))):He.md(t.message)),r=t}))}},{key:"toArray",value:function(){return this.messages}},{key:"update",value:function(n){return n.hasOwnProperty("expandUrlToMedia")&&n.expandUrlToMedia!=this.expandUrlToMedia&&this.messages.forEach((function(n){return delete n.rendered})),m(c(i.prototype),"update",this).call(this,n)}},{key:"unshift",value:function(n){return[].unshift.apply(this.messages,this._fill(n)),this.update({messages:!0})}},{key:"_className",value:function(n,t){var e=["message"];return n.type&&e.push("is-type-"+n.type),n.highlight&&e.push("is-highlighted"),e.push(n.dayChanged||n.from!=t.from?"has-not-same-from":"has-same-from"),e.join(" ")}},{key:"_dayChanged",value:function(n,t){return!(!t.ts||n.ts.getDate()==t.ts.getDate())}},{key:"_embeds",value:function(n){var t=this,e=[];return this._msgDetails(n)&&e.push(Promise.resolve({className:"le-details",details:!0,nodes:[Pr(n.details).lastChild]})),this.expandUrlToMedia&&"notice"!=n.type?((n.message.match(/https?:\/\/(\S+)/g)||[]).forEach((function(r){r=r.replace(/(\W)?$/,""),t.embedCache[r]||(t.embedCache[r]=t._loadEmbed(n,r)),e.push(t.embedCache[r])})),e.map((function(t){return t.catch((function(t){return console.error("[Messages:embed]",n,t)}))}))):e}},{key:"_fill",value:function(n){for(var t=0;t<n.length;t++){var e=n[t];if(!e.from){var r=[!0,"Convos"];e.internal=r[0],e.from=r[1]}e.type||(e.type="notice"),e.color="Convos"==e.from?"inherit":Kt(e.from.toLowerCase()),e.ts=new re(e.ts)}return n}},{key:"_loadEmbed",value:(r=d(f.mark((function n(t,e){var r,o,i;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Pe("/api","embed",{url:e}).perform();case 2:if(r=n.sent,(o=r.res.body).nodes=[],o.provider=(o.provider_name||"").toLowerCase(),o.html){n.next=8;break}return n.abrupt("return",o);case 8:if(i=document.createRange().createContextualFragment(o.html).firstChild){n.next=11;break}return n.abrupt("return",o);case 11:return Ht(i=this._renderVideoChat(t,o,i)||this._renderPaste(t,o,i)||i,"img",["error",function(n){return n.target.style.display="none"}]),Ht(i,".le-goto-link",(function(n){return 1==n.parentNode.children.length&&n.parentNode.remove()})),delete o.html,o.className=i.className,o.nodes="iframe"==i.tagName.toLowerCase()?[i]:[].slice.call(i.childNodes,0),n.abrupt("return",o);case 18:case"end":return n.stop()}}),n,this)}))),function(n,t){return r.apply(this,arguments)})},{key:"_msgDetails",value:function(n){if(n.hasOwnProperty("details"))return n.details;if("error"!=n.type&&"notice"!=n.type)return n.details=null;var t=Ir({},n.sent||n);return["bubbles","className","command","connection_id","dispatchTo","color","dayChanged","embeds","event","fresh","highlight","id","index","internal","markdown","method","rendered","silent","stopPropagation","ts"].forEach((function(n){return delete t[n]})),"from:message:type"==Object.keys(t).sort().join(":")?n.details=null:n.details=t}},{key:"_renderPaste",value:function(n,t,e){var r=e.querySelector("pre");return r&&[e,Rr.lineNumbersBlock(r)][0]}},{key:"_renderVideoChat",value:function(n,t,e){var r=new URL(t.url).pathname.replace(/\/+$/,"").split("/");if(r.length&&(e.classList.contains("le-video-chat")||r.includes("video"))){var o=decodeURIComponent(r.slice(-1)[0]).replace(/\s-\s[\w-]+$/,"").replace(/[_.-]+/g," ").replace(/([a-z ])([A-Z])/g,(function(n,t,e){return t+" "+e.toUpperCase()})).replace(/((?:^|[ ])\w)/g,(function(n){return n.toUpperCase()})),i=He.l('Do you want to join the %1 video chat with "%2"?',t.provider_name,o);return(e=document.createElement("div")).className="le-card le-rich le-join-request le-provider-"+t.provider,e.innerHTML='<a class="le-thumbnail" href="'+t.url+'" target="convos_video"><i class="fas fa-video"></i></a><h3>'+i+'</h3><p class="le-description"><a href="'+t.url+'" target="convos_video">'+He.l("Yes, I want to join.")+"</a></p>",n.fresh&&this.emit("notify",Ir({},n,{message:i})),e}}}]),i}(Qt);function zr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var qr=function(n,t){return n.name.localeCompare(t.name)},Fr=function(n){s(o,n);var t,r=(t=o,function(){var n,e=c(t);if(zr()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function o(){var n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e(this,o),(n=r.call(this,t)).sorter=i.sorter||qr,n._sort(),n}return S(o,[{key:"filter",value:function(n){return Array.from(this.values()).filter(n)}},{key:"set",value:function(n,t){m(c(o.prototype),"set",this).call(this,n,t),this._sort()}},{key:"toArray",value:function(){return Array.from(this.values())}},{key:"_sort",value:function(){var n=this,t=Array.from(this.entries()),e=this.sorter;return this.clear(),t.sort((function(n,t){return e(n[1],t[1])})).forEach((function(t){var e=st(t,2),r=e[0],i=e[1];return m(c(o.prototype),"set",n).call(n,r,i)})),t}}]),o}($(Map)),Kr={b:"channel_ban",C:"ctcp_block",c:"colour_filter",e:"ban_exemption",F:"enable_forwarding",f:"forward",g:"free_invite",I:"invite_exemption",j:"join_throttle",k:"password",l:"join_limit",L:"large_ban_list",m:"moderated",n:"prevent_external_send",P:"permanent",p:"privat",Q:"block_forwarded_users",q:"quiet",r:"block_unidentified",s:"secret",S:"secure_connection_only",t:"ops_topic"},Wr={a:"&",h:"%",o:"@",q:"~",v:"+"},Gr={a:"admin",B:"bot",h:"half_operator",i:"invisible",I:"whois_hide_online",o:"operator",p:"whois_hide_channels",R:"privmsg_from_registered_only",r:"registered",S:"service_bot",T:"ctcp_block",t:"vhost",v:"voice",W:"whois_notifications",x:"cloaked_hostname",z:"secure_connection",Z:"secure_connection_only"};function Yr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Jr=function(n){s(o,n);var t,r=(t=o,function(){var n,e=c(t);if(Yr()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function o(){var n;return e(this,o),(n=r.call(this)).prop("ro","length",(function(){return n._map.size})),n.prop("ro","_map",new Fr([],{sorter:function(n,t){return t.modes.operator||!1-n.modes.operator||t.modes.voice||!1-n.modes.voice||n.nick.localeCompare(t.nick)}})),n}return S(o,[{key:"clear",value:function(){var n=this.me();return this._map.clear(),this.add(n),this}},{key:"delete",value:function(n){return this._map.delete(this._id(n)),this.update({})}},{key:"get",value:function(n){return this._map.get(this._id(n))}},{key:"has",value:function(n){return this._map.has(this._id(n))}},{key:"me",value:function(){return Array.from(this._map.values()).filter((function(n){return n.me}))[0]||this._defaultParticipant()}},{key:"nicks",value:function(){return Array.from(this._map.values()).map((function(n){return n.nick}))}},{key:"rename",value:function(n,t){var e=this.get(n)||{};return delete e.id,e.nick=t,this.delete(n),this.add(e)}},{key:"add",value:function(n){var t=this;if(Array.isArray(n))return n.forEach((function(n){return t.add(n)})),this;n.id=this._id(n.nick),n.color=Kt(n.id),Mt.string(n.mode)&&(n.modes=At(Gr,n.mode)),n.modes||(n.modes={}),n.nick||(n.nick=n.name);var e=this._map.get(n.id);return e&&Object.keys(e).forEach((function(t){return n[t]||(n[t]=e[t])})),this._map.set(n.id,n),this.update({length:!0})}},{key:"toArray",value:function(){return this._map.toArray()}},{key:"_defaultParticipant",value:function(){return{color:"#000000",id:"",modes:{},nick:""}}},{key:"_id",value:function(n){return n.toLowerCase()}}]),o}(Qt);function Vr(n){if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(n=function(n,t){if(!n)return;if("string"==typeof n)return Qr(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Qr(n,t)}(n))){var t=0,e=function(){};return{s:e,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(n){throw n},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,a=!1;return{s:function(){r=n[Symbol.iterator]()},n:function(){var n=r.next();return i=n.done,n},e:function(n){a=!0,o=n},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}function Qr(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function Zr(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function Xr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var no=St("socket"),to=function n(t){return n.singletons[t]||(n.singletons[t]=new ro)};to.singletons={};var eo=[];eo[WebSocket.CONNECTING]="connecting",eo[WebSocket.OPEN]="open",eo[WebSocket.CLOSING]="closing",eo[WebSocket.CLOSED]="closed";var ro=function(n){s(o,n);var t,r=(t=o,function(){var n,e=c(t);if(Xr()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function o(n){var t;return e(this,o),(t=r.call(this)).prop("ro","readyState",(function(){return t.ws.readyState})),t.prop("ro","readyStateHuman",(function(){return eo[t.ws.readyState]})),t.prop("ro","waiting",new Map),t.prop("rw","closed",0),t.prop("rw","error",""),t.prop("rw","keepaliveInterval",1e4),t.prop("rw","url",""),t.id=0,t.queue=[],t.keepClosed=!0,t._resetWebSocket(),t}return S(o,[{key:"close",value:function(n,t){if("number"!=typeof n){var e=[1e3,n];n=e[0],t=e[1]}return this.ws.close&&this.ws.close(n,t),this.keepClosed=!0,this._keepAliveStop(),this._reconnectStop(),this._resetWebSocket(),this}},{key:"deflateMessage",value:function(n){return JSON.stringify(n)}},{key:"deleteWaitingMessage",value:function(n){this.waiting.delete(n),this.update({waiting:!0})}},{key:"getWaitingMessages",value:function(n){var t=this;return 0==arguments.length?Array.from(this.waiting.values()):n.map((function(n){return t.waiting.get(n)}))}},{key:"inflateMessage",value:function(n){return JSON.parse(n)}},{key:"is",value:function(n){return this.ws.readyState==WebSocket[n.toUpperCase()]}},{key:"open",value:function(){var n=this;if(this.ws.close)return this;try{if(!this.url)throw"Can't open WebSocket connection without URL.";this.ws=new WebSocket(this.url),this.ws.onclose=function(t){return n._onClose(t)},this.ws.onerror=function(t){return n._onError(t)},this.ws.onmessage=function(t){return n._onMessage(t)},this.ws.onopen=function(t){return n._onOpen(t)},this.keepClosed=!1,this._keepAliveStart(),this._reconnectStop(),this.update({error:"",readyState:!0})}catch(n){this._onError(n.message?n:{message:String(n)})}return this}},{key:"reconnectIn",value:function(n){return 1008!==n.code&&1011!==n.code&&(this.closed<=1?1e3:this.closed>5?1e4:2*this.closed*1e3)}},{key:"send",value:function(n,t){var e=n.id||String(++this.id);return this.queue.push(function(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?Zr(Object(e),!0).forEach((function(t){yt(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Zr(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}({},n,{id:e})),this.open(),this._dequeue(),t&&this.on("message_"+e,t),this}},{key:"_dequeue",value:function(){var n=this.queue;for(n.length&&this.update({waiting:!0});n.length;){if(this.ws.readyState!=WebSocket.OPEN)return;var t=n.shift();this.ws.send(this.deflateMessage(t)),t.waitingForResponse=!0,t.ts||(t.ts=new re),this.waiting.set(t.id,t)}}},{key:"_keepAliveStart",value:function(){var n=this;this._keepAliveStop(),this.keepaliveTid=setInterval((function(){return n.ws.readyState==WebSocket.OPEN&&n.ws.send("{}")}),this.keepaliveInterval)}},{key:"_keepAliveStop",value:function(){this.keepaliveTid&&clearTimeout(this.keepaliveTid),delete this.keepaliveTid}},{key:"_onClose",value:function(n){no.debug("close",n);var t,e=Vr(this.waiting);try{for(e.s();!(t=e.n()).done;){var r=st(t.value,2),o=r[0],i=r[1];Object.keys(i).length<=1&&this.waiting.delete(o),i.waitingForResponse=!1}}catch(n){e.e(n)}finally{e.f()}this._keepAliveStop(),this._resetWebSocket(),this.update({closed:this.closed+1,readyState:!0,waiting:!0}),this._reconnectStart(this.reconnectIn(n))}},{key:"_onError",value:function(n){var t=String(n.message||n);t&&0!=t.indexOf("[")||(t="Could not connect."),no.error("error",t,n),this.update({error:t})}},{key:"_onMessage",value:function(n){var t=this.inflateMessage(n.data);if(t.bubbles=!0,t.stopPropagation=function(){t.bubbles=!1},t.id&&(this.emit("message_"+t.id,t),this.waiting.delete(t.id)),t.bubbles&&this.emit("message",t),this.update({waiting:!0}),t.errors&&!t.id){var e,r=Vr(this.waiting.keys());try{for(r.s();!(e=r.n()).done;){var o=e.value;this.emit("message_"+o,t)}}catch(n){r.e(n)}finally{r.f()}this.waiting.clear()}}},{key:"_onOpen",value:function(n){no.info("open",n),this.update({closed:0,error:"",readyState:!0}),this._dequeue()}},{key:"_reconnectStart",value:function(n){var t=this;return this._reconnectStop(),no.info("reconnect in",n),!0===n?this.open():"number"!=typeof n?this.keepClosed=!0:void(this.reconnectTid=setTimeout((function(){return t.open()}),n))}},{key:"_reconnectStop",value:function(){this.reconnectTid&&clearTimeout(this.reconnectTid),delete this.reconnectTid}},{key:"_resetWebSocket",value:function(){this.ws={readyState:WebSocket.CLOSED}}}]),o}(Qt);function oo(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function io(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?oo(Object(e),!0).forEach((function(t){yt(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):oo(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function ao(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var co=new(function(n){s(o,n);var t,r=(t=o,function(){var n,e=c(t);if(ao()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function o(){var n;return e(this,o),(n=r.call(this)).Notification=window.Notification||{permission:"denied"},n.prop("persist","notificationCloseDelay",5e3),n.prop("persist","wantNotifications",!!n.Notification.requestPermission&&null),n.prop("ro","appHasFocus",(function(){return document.hasFocus()})),n.prop("rw","desktopAccess",n.Notification.permission),n}return S(o,[{key:"requestDesktopAccess",value:function(){var n=this;return this.Notification.requestPermission?(this.Notification.requestPermission((function(t){return n.update({desktopAccess:t})})),this):this.update({desktopAccess:this.Notification.permission})}},{key:"show",value:function(n){var t=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.title||(e.title=document.title),!this.wantNotifications)return this._showInConsole(n,e);if("granted"!=this.desktopAccess)return this.showInApp(n,e);var r=new Notification(e.title,io({},e,{body:n}));return r.onclick=function(n){return t._onClick(n,r,e)},setTimeout((function(){return r.close()}),this.notificationCloseDelay),r}},{key:"showInApp",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.title||(t.title=document.title);var e=document.createElement("div"),r=io({},t,{body:n,close:function(){e.remove(),r.closed=!0},target:"app"});return e.className="notify-notification fade-in",e.innerHTML='<a href="#close" class="notify-notification__close"></a><h6 class="notify-notification__title"></h6><div class="notify-notification__content"></div>',e.querySelector("a").addEventListener("click",(function(n){n.preventDefault(),r.close()})),e.querySelector("h6").textContent=t.title,e.querySelector("div").textContent=n,-1==t.closeAfter?e.querySelector("a").remove():setTimeout((function(){return r.close()}),t.closeAfter||this.notificationCloseDelay),setTimeout((function(){return e.classList.add("is-visible")}),1),document.body.insertBefore(e,document.body.querySelector(".notify-notification")),r}},{key:"_onClick",value:function(n,t,e){t.close(),window.focus(),this.emit("click",io({},e,{sourceEvent:n}))}},{key:"_showInConsole",value:function(n,t){return console.info("[Notify]",n,t),io({},t,{body:n,close:function(){},target:"console"})}}]),o}(Qt));function uo(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function so(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?uo(Object(e),!0).forEach((function(t){yt(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):uo(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function fo(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var lo=new RegExp("^[#&]"),po=function(n){s(u,n);var t,r,o,i=(t=u,function(){var n,e=c(t);if(fo()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function u(n){var t;e(this,u),t=i.call(this);var r=[n.connection_id,n.conversation_id,""].filter(Mt.defined).join(":");return t.prop("persist","userInput","",{key:r+"userInput"}),t.prop("ro","color",Kt(n.conversation_id||n.connection_id||"")),t.prop("ro","connection_id",n.connection_id||""),t.prop("ro","messages",new Br({})),t.prop("ro","participants",new Jr),t.prop("ro","path",Ae.conversationPath(n)),t.prop("rw","historyStartAt",null),t.prop("rw","historyStopAt",null),t.prop("rw","modes",{}),t.prop("rw","name",n.name||n.conversation_id||n.connection_id||"ERR"),t.prop("rw","status","pending"),t.prop("rw","topic",n.topic||""),t.prop("rw","unread",n.unread||0),n.hasOwnProperty("conversation_id")?(t.prop("ro","conversation_id",n.conversation_id),t.prop("ro","title",(function(){return[t.name,t.connection_id.replace(/^\w+-/,"")].join(" - ")})),t.prop("rw","frozen",n.frozen||"")):(t.prop("ro","frozen",(function(){return t._calculateFrozen()})),t.prop("ro","title",(function(){return t.name}))),n.conversation_id&&t.prop("persist","wantNotifications",t.is("private"),{key:n.conversation_id+":wantNotifications"}),t.socket=n.socket||to("/events"),t.messages.on("notify",(function(n){return t.notify(n)})),t._addOperations(),t}return S(u,[{key:"addMessages",value:function(n,t){if(!Array.isArray(n)){if(this._maybeIncreaseUnread(n),this._maybeNotify(n),!this.historyStopAt&&-1!=["action","private"].indexOf(n.type))return;n.fresh=!0,n=[n]}return this.messages[t||"push"](n),this}},{key:"is",value:function(n){return"connection"==n?!this.conversation_id:"conversation"==n?this.conversation_id&&!this.is("notifications"):"frozen"==n?this.frozen&&!0:"locked"==n?"Invalid password."==this.frozen:"not_found"==n?"Not found."==this.frozen:"notifications"!=n&&("pending"==n?this.frozen.match(/pending invitation/i):"private"==n?this.conversation_id&&!lo.test(this.conversation_id)||!1:"search"!=n&&("unread"==n?this.unread&&!0:this.status==n))}},{key:"load",value:(o=d(f.mark((function n(){var t,e,r,o,i=arguments;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:{},!this._skipLoad(t)){n.next=3;break}return n.abrupt("return",this);case 3:return this.update({status:"loading"}),t.limit||(t.limit=40),e=so({},t,{connection_id:this.connection_id,conversation_id:this.conversation_id}),n.next=8,this.messagesOp.perform(e);case 8:return this.update({status:this.messagesOp.status}),r=this.messagesOp.res.body,o=[],(t.around||!t.after&&!t.before)&&(o.push.apply(o,this.messages.toArray().filter((function(n){return n.internal}))),this.messages.clear()),this.addMessages(r.messages||[],t.before?"unshift":"push"),this.addMessages(o,"push"),this._setEndOfStream(t,r),n.abrupt("return",this);case 16:case"end":return n.stop()}}),n,this)}))),function(){return o.apply(this,arguments)})},{key:"notify",value:function(n){if(!co.appHasFocus){var t=n.from==this.name?n.from:He.l("%1 in %2",n.from,this.name);this.lastNotification=co.show(n.message,{path:this.path,title:t})}}},{key:"send",value:function(n,t){return Mt.string(n)&&(n={message:n}),this.socket.send(so({method:"send",connection_id:this.connection_id,conversation_id:this.conversation_id||""},n),t)}},{key:"markAsRead",value:(r=d(f.mark((function n(){return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.markAsReadOp){n.next=2;break}return n.abrupt("return");case 2:return this.update({unread:0}),n.next=5,this.markAsReadOp.perform({connection_id:this.connection_id,conversation_id:this.conversation_id});case 5:return n.abrupt("return",this);case 6:case"end":return n.stop()}}),n,this)}))),function(){return r.apply(this,arguments)})},{key:"update",value:function(n){return this._loadParticipants(),m(c(u.prototype),"update",this).call(this,n)}},{key:"wsEventMode",value:function(n){var t=["banlist","exceptlist","invitelist","quietlist"].filter((function(t){return n[t]}))[0];if(t){var e=n[t].length,r=1==e?"entry":"entries";this.addMessages(so({},n,{message:"%1 has %2 "+r+" in %3.",vars:[this.name,e,He.l(t)]}))}else n.nick?(this.participants.add({nick:n.nick,modes:n.mode}),this.addMessages(so({},n,{message:"%1 got mode %2 from %3.",vars:[n.nick,n.mode,n.from]}))):n.mode_changed?this.addMessages(so({},n,{message:"%1 received mode %2.",vars:[this.name,n.mode]})):(this.addMessages(so({},n,{message:"%1 got mode %2.",vars:[this.name,n.mode]})),this.update({modes:At(Kr,n.mode)}))}},{key:"wsEventNickChange",value:function(n){if(this.participants.has(n.old_nick)&&n.old_nick!=n.new_nick){this.participants.rename(n.old_nick,n.new_nick);var t="me"==n.type?"You (%1) changed nick to %2.":"%1 changed nick to %2.";this.addMessages({message:t,vars:[n.old_nick,n.new_nick]})}}},{key:"wsEventPart",value:function(n){var t=this.participants.get(n.nick);t&&!t.me&&(this.participants.delete(n.nick),this.update({participants:!0}),n.silent||this.addMessages(this._partMessage(n)))}},{key:"wsEventSentClear",value:function(n){n.errors||(this.messages.clear(),this.addMessages({message:"History was cleared for %1.",vars:[this.name]}))}},{key:"wsEventSentNames",value:function(n){this.participants.add(n.participants);var t=so({},n,{message:"Participants (%1): %2",vars:[]}),e=this.participants.nicks();e.length>1&&(t.message+=" and %3.",t.vars[2]=e.pop()),t.vars[0]=e.length,t.vars[1]=e.join(", "),this.addMessages(t)}},{key:"wsEventSentTopic",value:function(n){var t=n.topic?"Topic for %1 is: %2":"No topic is set for %1.";this.addMessages({message:t,vars:[this.name,n.topic]}),this.update({topic:n.topic})}},{key:"_addOperations",value:function(){this.prop("ro","messagesOp",Pe("/api","conversationMessages")),this.prop("ro","markAsReadOp",Pe("/api","markConversationAsRead"))}},{key:"_calculateFrozen",value:function(){return""}},{key:"_loadParticipants",value:function(){var n=this;!this.participantsLoaded&&this.conversation_id&&this.messagesOp&&!this.is("frozen")&&this.messagesOp.is("success")&&(this.participantsLoaded=!0,this.is("private")?this.send("/whois "+this.conversation_id,(function(t){t.stopPropagation(),n.update({frozen:t.errors&&t.errors.length?t.errors[0].message:""})})):this.send("/names "+this.conversation_id,(function(t){t.stopPropagation(),n.participants.clear(),t.participants&&n.participants.add(t.participants)})))}},{key:"_maybeIncreaseUnread",value:function(n){return!n.from||n.yourself||-1==["action","error","private"].indexOf(n.type)?this:void this.update({unread:this.unread+1})}},{key:"_maybeNotify",value:function(n){n.from&&!n.yourself&&-1!=["action","error","private"].indexOf(n.type)&&(n.highlight||this.wantNotifications)&&this.notify(n)}},{key:"_noop",value:function(){}},{key:"_partMessage",value:function(n){var t={message:"%1 parted.",vars:[n.nick]};return n.kicker?(t.message="%1 was kicked by %2"+(n.message?": %3":""),t.vars.push(n.kicker),t.vars.push(n.message)):n.message&&(t.message+=" Reason: %2",t.vars.push(n.message)),t}},{key:"_setEndOfStream",value:function(n,t){if(!n.before&&!t.after){var e=t.messages.slice(-1)[0];this.update({historyStopAt:new re(e&&e.ts)})}if(!n.after&&!t.before){var r=t.messages[0];this.update({historyStartAt:new re(r&&r.ts)})}t.after&&this.update({historyStopAt:null}),t.before&&this.update({historyStartAt:null}),t.messages&&t.messages.length<=1&&this.update({historyStartAt:new re,historyStopAt:new re})}},{key:"_skipLoad",value:function(n){return!(this.messagesOp&&!this.is("loading"))||(this.messages.length?n.around?!!this.messages.toArray().find((function(t){return t.ts.toISOString()==n.around})):!(!n.before||!this.historyStartAt)||!(!n.after||!this.historyStopAt):this.is("success"))}}]),u}(Qt);function mo(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function ho(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?mo(Object(e),!0).forEach((function(t){yt(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):mo(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function go(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var vo=function(n,t){return n.is("private")-t.is("private")||n.name.localeCompare(t.name)},$o=function(n){s(o,n);var t,r=(t=o,function(){var n,e=c(t);if(go()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function o(n){var t;e(this,o),(t=r.call(this,n)).prop("ro","conversations",new Fr([],{sorter:vo})),t.prop("rw","on_connect_commands",n.on_connect_commands||[]),t.prop("rw","state",n.state||"queued"),t.prop("rw","wanted_state",n.wanted_state||"connected"),t.prop("rw","url",Mt.string(n.url)?new Nr(n.url):n.url||new Nr("irc://localhost"));var i=t.url.searchParams.get("nick")||"guest";return t.prop("rw","nick",i),t.prop("rw","real_host",t.url.hostname),t.prop("rw","server_op",!1),t.participants.add((n.service_accounts||[]).map((function(n){return{nick:n}})).concat({nick:i})),n.me&&t.wsEventMe(n.me),t}return S(o,[{key:"ensureConversation",value:function(n){var t=this,e=this.conversations.get(n.conversation_id);return e?e.update(n):((e=new po(ho({},n,{connection_id:this.connection_id}))).on("message",(function(n){return t.emit("message",n)})),e.on("update",(function(){return t.update({conversations:!0})})),this._addDefaultParticipants(e),this.conversations.set(e.conversation_id,e),this.update({conversations:!0}),this.emit("conversationadd",e),e)}},{key:"findConversation",value:function(n){return this.conversations.get(n.conversation_id)||null}},{key:"is",value:function(n){return this.state==n||m(c(o.prototype),"is",this).call(this,n)}},{key:"removeConversation",value:function(n){var t=this.findConversation(n)||n;return this.conversations.delete(t.conversation_id),this.emit("conversationremove",t),this.update({conversations:!0})}},{key:"send",value:function(n){Mt.string(n)&&(n={message:n});var t=new RegExp("^"+this.participants.toArray().map((function(n){return n.id})).join("|")+":","i");return 0==n.message.indexOf("/")||n.message.match(t)||(n.message="/quote "+n.message),m(c(o.prototype),"send",this).call(this,n)}},{key:"update",value:function(n){return n.url&&Mt.string(n.url)&&(n.url=new Nr(n.url)),m(c(o.prototype),"update",this).call(this,n)}},{key:"wsEventConnection",value:function(n){this.update({state:n.state}),this.addMessages(n.message?{message:"Connection state changed to %1: %2",vars:[n.state,n.message]}:{message:"Connection state changed to %1.",vars:[n.state]})}},{key:"wsEventFrozen",value:function(n){var t=this.findConversation(n),e=t&&t.frozen,r=this.ensureConversation(n);r.participants.add({nick:this.nick,me:!0}),e&&!n.frozen&&t.addMessages({message:"Connected.",vars:[]}),n.frozen&&r.is("pending")&&co.show(n.frozen,{title:n.name})}},{key:"wsEventMe",value:function(n){n.nick&&this.wsEventNickChange(n),n.server_op&&this.addMessages({message:"You are an IRC operator.",vars:[],highlight:!0}),n.real_host&&this.participants.add({nick:n.real_host}),this.update(n)}},{key:"wsEventMessage",value:function(n){return n.yourself=n.from==this.nick,n.conversation_id?this.ensureConversation(n).addMessages(n):this.addMessages(n)}},{key:"wsEventNickChange",value:function(n){var t={old_nick:n.old_nick||this.nick,new_nick:n.new_nick||n.nick,type:n.type};n.old_nick==this.nick&&(t.me=!0),m(c(o.prototype),"wsEventNickChange",this).call(this,t),this.conversations.forEach((function(n){return n.wsEventNickChange(t)}))}},{key:"wsEventError",value:function(n){var t={message:Tt(n)||n.frozen||"Unknown error from %1.",sent:n,type:"error",vars:n.command||[n.message]},e=(n.message||"").match(/^\/j(oin)? (\S+)/);if(e)return this.ensureConversation(ho({},n,{conversation_id:e[2]}));var r=n.conversation_id&&n.frozen?this.ensureConversation(n):this.findConversation(n)||this;console.error(r.conversation_id,t),r.addMessages(t)}},{key:"wsEventJoin",value:function(n){var t=this.ensureConversation({connection_id:n.connection_id,conversation_id:n.conversation_id}),e=n.nick||this.nick;e==this.nick||n.silent||t.addMessages({message:"%1 joined.",vars:[e]}),t.participants.add({nick:e})}},{key:"wsEventPart",value:function(n){if(n.nick==this.nick)return this.removeConversation(n);n.conversation_id||this.conversations.forEach((function(t){return t.wsEventPart(n)}))}},{key:"wsEventQuit",value:function(n){this.wsEventPart(n)}},{key:"wsEventSentJoin",value:function(n){this.wsEventJoin(n)}},{key:"wsEventSentList",value:function(n){var t=n.args||"/*/";this.addMessages(n.done?{message:"Found %1 of %2 conversations from %3.",vars:[n.conversations.length,n.n_conversations,t]}:{message:"Found %1 of %2 conversations from %3, but conversations are still loading.",vars:[n.conversations.length,n.n_conversations,t]})}},{key:"wsEventSentMode",value:function(n){var t=this.findConversation(n);return t?t.wsEventMode(n):this.addMessages({message:"%1 received mode %2.",vars:[n.target,n.mode]})}},{key:"wsEventSentQuery",value:function(n){this.ensureConversation(n)}},{key:"wsEventSentWhois",value:function(n){var t="%1 (%2@%3, %4)",e=[n.nick,n.user,n.host,n.name],r=Object.keys(n.channels).sort().map((function(t){return(Wr[n.channels[t].mode]||"")+t}));n.channels=r,n.idle_for&&r.length?(t+=" has been idle for %5s in %6.",e.push(n.idle_for),e.push(r.join(", "))):n.idle_for&&!r.length?(t+="has been idle for %5s, and is not in any channels.",e.push(n.idle_for)):r.length?(t+=" is active in %5.",e.push(r.join(", "))):t+=" is not in any channels.",(this.findConversation(n)||this).addMessages({message:t,vars:e,sent:n})}},{key:"wsEventSentNames",value:function(){}},{key:"_addDefaultParticipants",value:function(n){var t=[{nick:this.nick,me:!0}];n.is("private")&&t.push({nick:n.name}),n.participants.add(t)}},{key:"_addOperations",value:function(){this.prop("ro","markAsReadOp",Pe("/api","markConnectionAsRead")),this.prop("ro","messagesOp",Pe("/api","connectionMessages"))}},{key:"_calculateFrozen",value:function(){switch(this.state){case"connected":return"";case"disconnected":return"Disconnected.";case"unreachable":return"Unreachable.";default:return"Connecting..."}}}]),o}(po);function yo(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function bo(n){var t,e,r,o,i=n[4](n[1])+"";return{c:function(){t=Z("div"),e=X(i),on(t,"class","success")},m:function(n,r){J(n,t,r),Y(t,e),o=!0},p:function(n,t){(!o||18&t)&&i!==(i=n[4](n[1])+"")&&cn(e,i)},i:function(n){o||(Ln((function(){r||(r=Vn(t,ur,{},!0)),r.run(1)})),o=!0)},o:function(n){r||(r=Vn(t,ur,{},!1)),r.run(0),o=!1},d:function(n){n&&V(t),n&&r&&r.end()}}}function wo(n){var t,e,r,o,i=n[4](n[2].error())+"";return{c:function(){t=Z("div"),e=X(i),on(t,"class","error")},m:function(n,r){J(n,t,r),Y(t,e),o=!0},p:function(n,t){(!o||20&t)&&i!==(i=n[4](n[2].error())+"")&&cn(e,i)},i:function(n){o||(Ln((function(){r||(r=Vn(t,ur,{},!0)),r.run(1)})),o=!0)},o:function(n){r||(r=Vn(t,ur,{},!1)),r.run(0),o=!1},d:function(n){n&&V(t),n&&r&&r.end()}}}function _o(n){var t,e,r,o,i,a,c=[wo,bo],u=[];function s(n,r){return 4&r&&(t=!!n[2].is("error")),t?0:(12&r&&(e=!(!n[2].is("success")||!n[3])),e?1:-1)}return~(r=s(n,-1))&&(o=u[r]=c[r](n)),{c:function(){o&&o.c(),i=tn()},m:function(n,t){~r&&u[r].m(n,t),J(n,i,t),a=!0},p:function(n,t){var e=st(t,1)[0],a=r;(r=s(n,e))===a?~r&&u[r].p(n,e):(o&&(Kn(),Yn(u[a],1,1,(function(){u[a]=null})),Wn()),~r?((o=u[r])?o.p(n,e):(o=u[r]=c[r](n)).c(),Gn(o,1),o.m(i.parentNode,i)):o=null)},i:function(n){a||(Gn(o),a=!0)},o:function(n){Yn(o),a=!1},d:function(n){~r&&u[r].d(n),n&&V(i)}}}function ko(n,t,e){var r,o,i=O,a=function(){return i(),i=T(u,(function(n){return e(2,r=n)})),u};P(n,Be,(function(n){return e(4,o=n)})),n.$$.on_destroy.push((function(){return i()}));var c=t.op,u=void 0===c?new Xt({}):c;a();var s,f=t.success,l=void 0===f?"Saved.":f,d=!1;return kn((function(){return s&&clearTimeout(s)})),n.$$set=function(n){"op"in n&&a(e(0,u=n.op)),"success"in n&&e(1,l=n.success)},n.$$.update=function(){4&n.$$.dirty&&function(n){if(!n.is("success"))return e(3,d=!1);d||(e(3,d=!0),s=setTimeout((function(){return e(3,d=!1)}),2e3))}(r)},[u,l,r,d,o]}var xo=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(yo()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,ko,_o,j,{op:0,success:1}),t}return i}(it);function Eo(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function So(n,t,e){var r=n.slice();return r[29]=t[e],r[31]=e,r}var Oo=function(n){return{}},Co=function(n){return{}};function No(n){var t,e,r,o,i,a=(n[29].length>1?n[29][1]:n[29][0])+"";function c(){return n[23](n[31])}return{c:function(){t=Z("a"),e=X(a),on(t,"href",r="#"+n[31]+":"+n[29][0]),on(t,"class","select-field__option"),on(t,"tabindex","-1"),ln(t,"is-active",n[31]==n[8])},m:function(n,r){J(n,t,r),Y(t,e),o||(i=en(t,"mouseover",c),o=!0)},p:function(o,i){n=o,1024&i[0]&&a!==(a=(n[29].length>1?n[29][1]:n[29][0])+"")&&cn(e,a),1024&i[0]&&r!==(r="#"+n[31]+":"+n[29][0])&&on(t,"href",r),256&i[0]&&ln(t,"is-active",n[31]==n[8])},d:function(n){n&&V(t),o=!1,i()}}}function Ro(n){for(var t,e,r,o,i,a,c,u,s,f,l,d,p=n[20].label,m=M(p,n,n[19],Co),h=m||{c:function(){d=X("Label")},m:function(n,t){J(n,d,t)},d:function(n){n&&V(d)}},g=n[10],v=[],$=0;$<g.length;$+=1)v[$]=No(So(n,g,$));return{c:function(){t=Z("div"),e=Z("label"),h&&h.c(),r=nn(),o=Z("input"),i=nn(),a=Z("input"),c=nn(),u=Z("div");for(var s=0;s<v.length;s+=1)v[s].c();on(e,"for",n[2]),on(o,"type","hidden"),on(o,"name",n[1]),on(a,"type","text"),on(a,"id",n[2]),on(a,"autocomplete","off"),on(a,"placeholder",n[3]),a.readOnly=n[4],on(u,"class","select-field__options"),on(t,"class","select-field text-field"),t.hidden=n[0],ln(t,"is-open",n[6]),ln(t,"is-readonly",n[4])},m:function(d,p){J(d,t,p),Y(t,e),h&&h.m(e,null),Y(t,r),Y(t,o),un(o,n[7]),Y(t,i),Y(t,a),n[22](a),Y(t,c),Y(t,u);for(var m=0;m<v.length;m+=1)v[m].m(u,null);n[24](t),s=!0,f||(l=[en(o,"input",n[21]),en(o,"keydown",n[13]),en(a,"blur",n[12]),en(a,"keydown",n[13]),en(a,"keyup",n[14]),en(a,"click",rn(n[15])),en(u,"click",rn(n[15]))],f=!0)},p:function(n,r){if(m&&m.p&&(!s||524288&r[0])&&U(m,p,n,n[19],r,Oo,Co),(!s||4&r[0])&&on(e,"for",n[2]),(!s||2&r[0])&&on(o,"name",n[1]),128&r[0]&&un(o,n[7]),(!s||4&r[0])&&on(a,"id",n[2]),(!s||8&r[0])&&on(a,"placeholder",n[3]),(!s||16&r[0])&&(a.readOnly=n[4]),1280&r[0]){var i;for(g=n[10],i=0;i<g.length;i+=1){var c=So(n,g,i);v[i]?v[i].p(c,r):(v[i]=No(c),v[i].c(),v[i].m(u,null))}for(;i<v.length;i+=1)v[i].d(1);v.length=g.length}(!s||1&r[0])&&(t.hidden=n[0]),64&r[0]&&ln(t,"is-open",n[6]),16&r[0]&&ln(t,"is-readonly",n[4])},i:function(n){s||(Gn(h,n),s=!0)},o:function(n){Yn(h,n),s=!1},d:function(e){e&&V(t),h&&h.d(e),n[22](null),Q(v,e),n[24](null),f=!1,A(l)}}}function Ao(n,t,e){var r,o,i,a=t.$$slots,c=void 0===a?{}:a,u=t.$$scope,s=0,f=!1,l="",d=[],p=t.form,m=t.hidden,h=void 0!==m&&m,g=t.name,v=void 0===g?"":g,$=t.id,y=void 0===$?v?"form_"+v:Gt():$,b=t.options,w=t.placeholder,_=void 0===w?"":w,k=t.readonly,x=void 0!==k&&k,E=["ArrowDown","ArrowUp","Enter"],S=p.field(v);function O(n){var t;if("keydown"==n.type)t=d.length&&d[s]||b.filter((function(n){return n[0]==r}))[0];else{var o=Dt(n.target,".select-field__option").href.replace(/^.*?#\d+:/,"");t=d.filter((function(n){return n[0]==o}))[0]||[]}t&&t.length||(t=[""]),S.set(t[0]),e(6,f=!1)}function C(n){var t=d.filter((function(t){return t[0]==n}))[0]||[];e(5,o.value=t.length>1?t[1]:t.length?t[0]:n,o)}function N(n){if(!x){var t=n&&n.target&&Dt(n.target,".select-field__option");return f||(e(8,s=d.map((function(n){return n[0]})).indexOf(r)),o.setSelectionRange(0,9999)),t?O(n):e(6,f=!f)}}P(n,S,(function(n){return e(7,r=n)}));return n.$$set=function(n){"form"in n&&e(16,p=n.form),"hidden"in n&&e(0,h=n.hidden),"name"in n&&e(1,v=n.name),"id"in n&&e(2,y=n.id),"options"in n&&e(17,b=n.options),"placeholder"in n&&e(3,_=n.placeholder),"readonly"in n&&e(4,x=n.readonly),"$$scope"in n&&e(19,u=n.$$scope)},n.$$.update=function(){if(64&n.$$.dirty[0]&&0==f&&e(18,l=""),393216&n.$$.dirty[0]&&function(n,t){var r=new RegExp("(?:^|\\s|-)"+Bt(t),"i"),o=n.filter((function(n){return n[0]==t}));o.length||(o=n.filter((function(n){return n[0].match(r)})));for(var i=0;i<n.length;i++){var a=n[i];a.length>1&&-1!=o.indexOf(a)&&a[1].match(r)&&-1==n.map((function(n){return n[0]})).indexOf(a[0])&&o.push(a)}e(8,s=0),e(10,d=o)}(b,l),131232&n.$$.dirty[0]&&o&&!o.value&&o!=document.activeElement){var t=b.find((function(n){return n[0]==r}));t&&e(5,o.value=t[1]||t[0],o)}160&n.$$.dirty[0]&&o&&C(r)},[h,v,y,_,x,o,f,r,s,i,d,S,function(){setTimeout((function(){return document.activeElement.closest(".select-field__option")||e(6,f=!1)}),100),C(r)},function(n){if(-1!=E.indexOf(n.key)&&n.preventDefault(),"Tab"!=n.key){if(!f)return N(n);"ArrowDown"==n.key&&e(8,s++,s),"ArrowUp"==n.key&&e(8,s--,s),"Enter"==n.key&&O(n),s>=b.length&&e(8,s=0),s<0&&e(8,s=b.length-1)}else f&&O(n)},function(n){1!=n.key.length&&"Backspace"!=n.key||e(18,l=o.value)},N,p,b,l,u,c,function(){r=this.value,S.set(r)},function(n){Cn[n?"unshift":"push"]((function(){e(5,o=n),e(17,b),e(7,r)}))},function(n){e(8,s=n)},function(n){Cn[n?"unshift":"push"]((function(){e(9,i=n)}))}]}var Do=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(Eo()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,Ao,Ro,j,{form:16,hidden:0,name:1,id:2,options:17,placeholder:3,readonly:4},[-1,-1]),t}return i}(it);function jo(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var To=function(n){return{}},Lo=function(n){return{}};function Po(n){var t,e,r,o,i,a,c,u=n[9].label,s=M(u,n,n[8],Lo),f=s||function(n){var t;return{c:function(){t=X("Label")},m:function(n,e){J(n,t,e)},d:function(n){n&&V(t)}}}();return{c:function(){t=Z("div"),e=Z("label"),f&&f.c(),r=nn(),o=Z("textarea"),on(e,"for",n[2]),on(o,"id",n[2]),on(o,"name",n[1]),on(o,"placeholder",n[3]),o.readOnly=n[4],on(t,"class","text-area"),t.hidden=n[0]},m:function(u,s){J(u,t,s),Y(t,e),f&&f.m(e,null),Y(t,r),Y(t,o),un(o,n[5]),i=!0,a||(c=en(o,"input",n[10]),a=!0)},p:function(n,r){var a=st(r,1)[0];s&&s.p&&(!i||256&a)&&U(s,u,n,n[8],a,To,Lo),(!i||4&a)&&on(e,"for",n[2]),(!i||4&a)&&on(o,"id",n[2]),(!i||2&a)&&on(o,"name",n[1]),(!i||8&a)&&on(o,"placeholder",n[3]),(!i||16&a)&&(o.readOnly=n[4]),32&a&&un(o,n[5]),(!i||1&a)&&(t.hidden=n[0])},i:function(n){i||(Gn(f,n),i=!0)},o:function(n){Yn(f,n),i=!1},d:function(n){n&&V(t),f&&f.d(n),a=!1,c()}}}function Mo(n,t,e){var r,o=t.$$slots,i=void 0===o?{}:o,a=t.$$scope,c=t.form,u=t.hidden,s=void 0!==u&&u,f=t.name,l=void 0===f?"":f,d=t.id,p=void 0===d?l?"form_"+l:Gt():d,m=t.placeholder,h=void 0===m?"":m,g=t.readonly,v=void 0!==g&&g,$=c.field(l);return P(n,$,(function(n){return e(5,r=n)})),n.$$set=function(n){"form"in n&&e(7,c=n.form),"hidden"in n&&e(0,s=n.hidden),"name"in n&&e(1,l=n.name),"id"in n&&e(2,p=n.id),"placeholder"in n&&e(3,h=n.placeholder),"readonly"in n&&e(4,v=n.readonly),"$$scope"in n&&e(8,a=n.$$scope)},[s,l,p,h,v,r,$,c,a,i,function(){r=this.value,$.set(r)}]}var Io=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(jo()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,Mo,Po,j,{form:7,hidden:0,name:1,id:2,placeholder:3,readonly:4}),t}return i}(it);function Uo(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Ho=function(n){return{}},Bo=function(n){return{}},zo=function(n){return{}},qo=function(n){return{}};function Fo(n){var t,e,r,o,i;return e=new $t({props:{name:n[7]?"eye-slash":"eye"}}),{c:function(){t=Z("a"),nt(e.$$.fragment),on(t,"href","#toggle"),on(t,"class","text-field__toggle")},m:function(a,c){J(a,t,c),tt(e,t,null),r=!0,o||(i=en(t,"click",rn(n[15])),o=!0)},p:function(n,t){var r={};128&t&&(r.name=n[7]?"eye-slash":"eye"),e.$set(r)},i:function(n){r||(Gn(e.$$.fragment,n),r=!0)},o:function(n){Yn(e.$$.fragment,n),r=!1},d:function(n){n&&V(t),et(e),o=!1,i()}}}function Ko(n){var t,e,r,o,i,a,c,u,s,f,l,d=n[13].label,p=M(d,n,n[12],qo),m=p||{c:function(){l=X("Label")},m:function(n,t){J(n,l,t)},d:function(n){n&&V(l)}},h="password"==n[6]&&!n[5]&&Fo(n),g=n[13].help,v=M(g,n,n[12],Bo);return{c:function(){t=Z("div"),e=Z("label"),m&&m.c(),r=nn(),o=Z("input"),a=nn(),h&&h.c(),c=nn(),v&&v.c(),on(e,"for",n[3]),on(o,"type",i=n[7]?"text":n[6]),on(o,"id",n[3]),on(o,"name",n[2]),on(o,"autocomplete",n[0]),on(o,"placeholder",n[4]),o.readOnly=n[5],o.value=n[8],on(t,"class","text-field"),t.hidden=n[1],ln(t,"has-password","password"==n[6])},m:function(i,l){J(i,t,l),Y(t,e),m&&m.m(e,null),Y(t,r),Y(t,o),Y(t,a),h&&h.m(t,null),J(i,c,l),v&&v.m(i,l),u=!0,s||(f=[en(o,"input",n[9]),en(o,"keyup",n[14])],s=!0)},p:function(n,r){var a=st(r,1)[0];p&&p.p&&(!u||4096&a)&&U(p,d,n,n[12],a,zo,qo),(!u||8&a)&&on(e,"for",n[3]),(!u||192&a&&i!==(i=n[7]?"text":n[6]))&&on(o,"type",i),(!u||8&a)&&on(o,"id",n[3]),(!u||4&a)&&on(o,"name",n[2]),(!u||1&a)&&on(o,"autocomplete",n[0]),(!u||16&a)&&on(o,"placeholder",n[4]),(!u||32&a)&&(o.readOnly=n[5]),(!u||256&a&&o.value!==n[8])&&(o.value=n[8]),"password"!=n[6]||n[5]?h&&(Kn(),Yn(h,1,1,(function(){h=null})),Wn()):h?(h.p(n,a),96&a&&Gn(h,1)):((h=Fo(n)).c(),Gn(h,1),h.m(t,null)),(!u||2&a)&&(t.hidden=n[1]),64&a&&ln(t,"has-password","password"==n[6]),v&&v.p&&(!u||4096&a)&&U(v,g,n,n[12],a,Ho,Bo)},i:function(n){u||(Gn(m,n),Gn(h),Gn(v,n),u=!0)},o:function(n){Yn(m,n),Yn(h),Yn(v,n),u=!1},d:function(n){n&&V(t),m&&m.d(n),h&&h.d(),n&&V(c),v&&v.d(n),s=!1,A(f)}}}function Wo(n,t,e){var r,o=t.$$slots,i=void 0===o?{}:o,a=t.$$scope,c=!1,u=t.autocomplete,s=void 0===u?null:u,f=t.form,l=t.hidden,d=void 0!==l&&l,p=t.name,m=void 0===p?"":p,h=t.id,g=void 0===h?m?"form_"+m:Gt():h,v=t.placeholder,$=void 0===v?"":v,y=t.readonly,b=void 0!==y&&y,w=t.type,_=void 0===w?"text":w,k=f.field(m);P(n,k,(function(n){return e(8,r=n)}));return n.$$set=function(n){"autocomplete"in n&&e(0,s=n.autocomplete),"form"in n&&e(11,f=n.form),"hidden"in n&&e(1,d=n.hidden),"name"in n&&e(2,m=n.name),"id"in n&&e(3,g=n.id),"placeholder"in n&&e(4,$=n.placeholder),"readonly"in n&&e(5,b=n.readonly),"type"in n&&e(6,_=n.type),"$$scope"in n&&e(12,a=n.$$scope)},[s,d,m,g,$,b,_,c,r,function(n){k.set(_.match(/^(number|range)$/)?parseInt(n.target.value,10):n.target.value)},k,f,a,i,function(t){Sn(n,t)},function(){e(7,c=!c)}]}var Go=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(Uo()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,Wo,Ko,j,{autocomplete:0,form:11,hidden:1,name:2,id:3,placeholder:4,readonly:5,type:6}),t}return i}(it);function Yo(n){if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(n=function(n,t){if(!n)return;if("string"==typeof n)return Jo(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Jo(n,t)}(n))){var t=0,e=function(){};return{s:e,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(n){throw n},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,a=!1;return{s:function(){r=n[Symbol.iterator]()},n:function(){var n=r.next();return i=n.done,n},e:function(n){a=!0,o=n},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}function Jo(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}var Vo=St("form");var Qo=function(){var n={},t={},e={},r=[];return e.field=function(e){if(t[e])return t[e];var o=se("");return o.subscribe((function(t){Vo.debug(e,"=",t),n[e]=t;var o,i=Yo(r);try{for(i.s();!(o=i.n()).done;){o.value[0](n)}}catch(n){i.e(n)}finally{i.f()}})),t[e]=o},e.get=function(t){return function(n,t){return Mt.undefined(t)&&(t=Object.keys(n)),Mt.array(t)?t.reduce((function(t,e){return t[e]=n[e],t}),{}):n[t]}(n,t)},e.set=function(n){return function(n,t){return Object.keys(t).forEach((function(e){return n.field(e).set(Mt.stringable(t[e])?String(t[e]):t[e])})),n}(e,n)},e.subscribe=function(t){return t(n),function(n,t){var e=[t];return n.push(e),function(){var t=n.indexOf(e);-1!=t&&n.splice(t,1)}}(r,t)},e};function Zo(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Xo(n){var t,e,r=n[1]("Host and port")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Host and port")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function ni(n){var t,e,r=n[1]("You cannot create custom connections.")+"";return{c:function(){t=Z("p"),e=X(r),on(t,"class","help"),on(t,"slot","help"),t.hidden=!n[4].forced_connection},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("You cannot create custom connections.")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function ti(n){var t,e,r=n[1]("Nickname")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Nickname")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function ei(n){var t,e,r=n[1]("Your name")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Your name")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function ri(n){var t,e;return t=new Go({props:{name:"conversation_id",form:n[3],placeholder:n[1]("Ex: #convos"),$$slots:{label:[ii]},$$scope:{ctx:n}}}),{c:function(){nt(t.$$.fragment)},m:function(n,r){tt(t,n,r),e=!0},p:function(n,e){var r={};2&e&&(r.placeholder=n[1]("Ex: #convos")),131074&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(Gn(t.$$.fragment,n),e=!0)},o:function(n){Yn(t.$$.fragment,n),e=!1},d:function(n){et(t,n)}}}function oi(n){var t,e;return t=new Cr({props:{name:"want_to_be_connected",form:n[3],$$slots:{label:[ai]},$$scope:{ctx:n}}}),{c:function(){nt(t.$$.fragment)},m:function(n,r){tt(t,n,r),e=!0},p:function(n,e){var r={};131074&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(Gn(t.$$.fragment,n),e=!0)},o:function(n){Yn(t.$$.fragment,n),e=!1},d:function(n){et(t,n)}}}function ii(n){var t,e,r=n[1]("Conversation name")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Conversation name")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function ai(n){var t,e,r=n[1]("Want to be connected")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Want to be connected")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function ci(n){var t,e,r=n[1]("Secure connection (TLS)")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Secure connection (TLS)")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function ui(n){var t,e,r=n[1]("Verify certificate (TLS)")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Verify certificate (TLS)")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function si(n){var t,e,r=n[1]("Show advanced settings")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Show advanced settings")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function fi(n){var t,e,r,o,i;e=new Io({props:{name:"on_connect_commands",form:n[3],placeholder:n[1]("Put each command on a new line."),$$slots:{label:[li]},$$scope:{ctx:n}}});var a=!n[4].forced_connection&&function(n){var t,e;return t=new Go({props:{name:"local_address",form:n[3],$$slots:{help:[pi],label:[di]},$$scope:{ctx:n}}}),{c:function(){nt(t.$$.fragment)},m:function(n,r){tt(t,n,r),e=!0},p:function(n,e){var r={};131074&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(Gn(t.$$.fragment,n),e=!0)},o:function(n){Yn(t.$$.fragment,n),e=!1},d:function(n){et(t,n)}}}(n);return{c:function(){t=Z("div"),nt(e.$$.fragment),r=nn(),a&&a.c(),on(t,"class","form-group")},m:function(n,o){J(n,t,o),tt(e,t,null),Y(t,r),a&&a.m(t,null),i=!0},p:function(n,t){var r={};2&t&&(r.placeholder=n[1]("Put each command on a new line.")),131074&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r),n[4].forced_connection||a.p(n,t)},i:function(n){i||(Gn(e.$$.fragment,n),Gn(a),Ln((function(){o||(o=Vn(t,fr,{duration:150},!0)),o.run(1)})),i=!0)},o:function(n){Yn(e.$$.fragment,n),Yn(a),o||(o=Vn(t,fr,{duration:150},!1)),o.run(0),i=!1},d:function(n){n&&V(t),et(e),a&&a.d(),n&&o&&o.end()}}}function li(n){var t,e,r=n[1]("On-connect commands")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("On-connect commands")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function di(n){var t,e,r=n[1]("Source IP")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Source IP")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function pi(n){var t,e,r=n[1]("Leave this blank, unless you know what you are doing.")+"";return{c:function(){t=Z("p"),e=X(r),on(t,"class","help"),on(t,"slot","help")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Leave this blank, unless you know what you are doing.")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function mi(n){var t,e,r=n[1]("Show authentication settings")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Show authentication settings")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function hi(n){var t,e,r,o,i,a,c,u;return e=new Go({props:{name:"username",form:n[3],$$slots:{label:[gi]},$$scope:{ctx:n}}}),o=new Go({props:{type:"password",name:"password",form:n[3],$$slots:{label:[vi]},$$scope:{ctx:n}}}),a=new Do({props:{name:"sasl",options:n[5],form:n[3],$$slots:{label:[$i]},$$scope:{ctx:n}}}),{c:function(){t=Z("div"),nt(e.$$.fragment),r=nn(),nt(o.$$.fragment),i=nn(),nt(a.$$.fragment),on(t,"class","form-group")},m:function(n,c){J(n,t,c),tt(e,t,null),Y(t,r),tt(o,t,null),Y(t,i),tt(a,t,null),u=!0},p:function(n,t){var r={};131074&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r);var i={};131074&t&&(i.$$scope={dirty:t,ctx:n}),o.$set(i);var c={};131074&t&&(c.$$scope={dirty:t,ctx:n}),a.$set(c)},i:function(n){u||(Gn(e.$$.fragment,n),Gn(o.$$.fragment,n),Gn(a.$$.fragment,n),Ln((function(){c||(c=Vn(t,fr,{duration:150},!0)),c.run(1)})),u=!0)},o:function(n){Yn(e.$$.fragment,n),Yn(o.$$.fragment,n),Yn(a.$$.fragment,n),c||(c=Vn(t,fr,{duration:150},!1)),c.run(0),u=!1},d:function(n){n&&V(t),et(e),et(o),et(a),n&&c&&c.end()}}}function gi(n){var t,e,r=n[1]("Username")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Username")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function vi(n){var t,e,r=n[1]("Password")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Password")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function $i(n){var t,e,r=n[1]("SASL authentication mechanism")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("SASL authentication mechanism")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function yi(n){var t,e;return t=new ce({props:{icon:"plus-circle",op:n[6],$$slots:{default:[wi]},$$scope:{ctx:n}}}),{c:function(){nt(t.$$.fragment)},m:function(n,r){tt(t,n,r),e=!0},p:function(n,e){var r={};131074&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(Gn(t.$$.fragment,n),e=!0)},o:function(n){Yn(t.$$.fragment,n),e=!1},d:function(n){et(t,n)}}}function bi(n){var t,e,r,o;return t=new ce({props:{icon:"save",op:n[8],$$slots:{default:[_i]},$$scope:{ctx:n}}}),(r=new ce({props:{icon:"trash",type:"button",op:n[7],$$slots:{default:[ki]},$$scope:{ctx:n}}})).$on("click",n[9]),{c:function(){nt(t.$$.fragment),e=nn(),nt(r.$$.fragment)},m:function(n,i){tt(t,n,i),J(n,e,i),tt(r,n,i),o=!0},p:function(n,e){var o={};131074&e&&(o.$$scope={dirty:e,ctx:n}),t.$set(o);var i={};131074&e&&(i.$$scope={dirty:e,ctx:n}),r.$set(i)},i:function(n){o||(Gn(t.$$.fragment,n),Gn(r.$$.fragment,n),o=!0)},o:function(n){Yn(t.$$.fragment,n),Yn(r.$$.fragment,n),o=!1},d:function(n){et(t,n),n&&V(e),et(r,n)}}}function wi(n){var t,e,r=n[1]("Add")+"";return{c:function(){t=Z("span"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Add")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function _i(n){var t,e,r=n[1]("Update")+"";return{c:function(){t=Z("span"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Update")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function ki(n){var t,e,r=n[1]("Delete")+"";return{c:function(){t=Z("span"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Delete")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function xi(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,m,h,g,v,$,y,b,w,_,k,x,E,S,O,C,N,R;e=new Go({props:{name:"host",form:n[3],placeholder:n[1]("Ex: chat.freenode.net:6697"),readonly:n[4].forced_connection,$$slots:{help:[ni],label:[Xo]},$$scope:{ctx:n}}}),o=new Go({props:{name:"nick",form:n[3],placeholder:n[1]("Ex: superman"),$$slots:{label:[ti]},$$scope:{ctx:n}}}),a=new Go({props:{name:"realname",form:n[3],placeholder:n[1]("Ex: Clark Kent"),$$slots:{label:[ei]},$$scope:{ctx:n}}});var A=[oi,ri],D=[];function j(n,t){return"add"!=n[0]?0:1}u=j(n),s=D[u]=A[u](n),l=new Cr({props:{name:"tls",form:n[3],$$slots:{label:[ci]},$$scope:{ctx:n}}}),p=new Cr({props:{name:"tls_verify",form:n[3],disabled:!n[2].tls,hidden:!n[2].tls,$$slots:{label:[ui]},$$scope:{ctx:n}}}),h=new Cr({props:{name:"show_advanced_settings",form:n[3],$$slots:{label:[si]},$$scope:{ctx:n}}});var T=n[2].show_advanced_settings&&fi(n),L=!n[4].forced_connection&&function(n){var t,e,r,o;t=new Cr({props:{name:"show_auth_settings",form:n[3],$$slots:{label:[mi]},$$scope:{ctx:n}}});var i=n[2].show_auth_settings&&hi(n);return{c:function(){nt(t.$$.fragment),e=nn(),i&&i.c(),r=tn()},m:function(n,a){tt(t,n,a),J(n,e,a),i&&i.m(n,a),J(n,r,a),o=!0},p:function(n,e){var o={};131074&e&&(o.$$scope={dirty:e,ctx:n}),t.$set(o),n[2].show_auth_settings?i?(i.p(n,e),4&e&&Gn(i,1)):((i=hi(n)).c(),Gn(i,1),i.m(r.parentNode,r)):i&&(Kn(),Yn(i,1,1,(function(){i=null})),Wn())},i:function(n){o||(Gn(t.$$.fragment,n),Gn(i),o=!0)},o:function(n){Yn(t.$$.fragment,n),Yn(i),o=!1},d:function(n){et(t,n),n&&V(e),i&&i.d(n),n&&V(r)}}}(n),P=[bi,yi],M=[];function I(n,t){return"add"!=n[0]?0:1}return b=I(n),w=M[b]=P[b](n),k=new xo({props:{op:n[6]}}),E=new xo({props:{op:n[7],success:"Deleted."}}),O=new xo({props:{op:n[8]}}),{c:function(){t=Z("form"),nt(e.$$.fragment),r=nn(),nt(o.$$.fragment),i=nn(),nt(a.$$.fragment),c=nn(),s.c(),f=nn(),nt(l.$$.fragment),d=nn(),nt(p.$$.fragment),m=nn(),nt(h.$$.fragment),g=nn(),T&&T.c(),v=nn(),L&&L.c(),$=nn(),y=Z("div"),w.c(),_=nn(),nt(k.$$.fragment),x=nn(),nt(E.$$.fragment),S=nn(),nt(O.$$.fragment),on(y,"class","form-actions"),on(t,"method","post")},m:function(s,w){J(s,t,w),tt(e,t,null),Y(t,r),tt(o,t,null),Y(t,i),tt(a,t,null),Y(t,c),D[u].m(t,null),Y(t,f),tt(l,t,null),Y(t,d),tt(p,t,null),Y(t,m),tt(h,t,null),Y(t,g),T&&T.m(t,null),Y(t,v),L&&L.m(t,null),Y(t,$),Y(t,y),M[b].m(y,null),Y(t,_),tt(k,t,null),Y(t,x),tt(E,t,null),Y(t,S),tt(O,t,null),C=!0,N||(R=en(t,"submit",rn(n[10])),N=!0)},p:function(n,r){var i=st(r,1)[0],c={};2&i&&(c.placeholder=n[1]("Ex: chat.freenode.net:6697")),131074&i&&(c.$$scope={dirty:i,ctx:n}),e.$set(c);var d={};2&i&&(d.placeholder=n[1]("Ex: superman")),131074&i&&(d.$$scope={dirty:i,ctx:n}),o.$set(d);var m={};2&i&&(m.placeholder=n[1]("Ex: Clark Kent")),131074&i&&(m.$$scope={dirty:i,ctx:n}),a.$set(m);var g=u;(u=j(n))===g?D[u].p(n,i):(Kn(),Yn(D[g],1,1,(function(){D[g]=null})),Wn(),(s=D[u])?s.p(n,i):(s=D[u]=A[u](n)).c(),Gn(s,1),s.m(t,f));var $={};131074&i&&($.$$scope={dirty:i,ctx:n}),l.$set($);var _={};4&i&&(_.disabled=!n[2].tls),4&i&&(_.hidden=!n[2].tls),131074&i&&(_.$$scope={dirty:i,ctx:n}),p.$set(_);var k={};131074&i&&(k.$$scope={dirty:i,ctx:n}),h.$set(k),n[2].show_advanced_settings?T?(T.p(n,i),4&i&&Gn(T,1)):((T=fi(n)).c(),Gn(T,1),T.m(t,v)):T&&(Kn(),Yn(T,1,1,(function(){T=null})),Wn()),n[4].forced_connection||L.p(n,i);var x=b;(b=I(n))===x?M[b].p(n,i):(Kn(),Yn(M[x],1,1,(function(){M[x]=null})),Wn(),(w=M[b])?w.p(n,i):(w=M[b]=P[b](n)).c(),Gn(w,1),w.m(y,null))},i:function(n){C||(Gn(e.$$.fragment,n),Gn(o.$$.fragment,n),Gn(a.$$.fragment,n),Gn(s),Gn(l.$$.fragment,n),Gn(p.$$.fragment,n),Gn(h.$$.fragment,n),Gn(T),Gn(L),Gn(w),Gn(k.$$.fragment,n),Gn(E.$$.fragment,n),Gn(O.$$.fragment,n),C=!0)},o:function(n){Yn(e.$$.fragment,n),Yn(o.$$.fragment,n),Yn(a.$$.fragment,n),Yn(s),Yn(l.$$.fragment,n),Yn(p.$$.fragment,n),Yn(h.$$.fragment,n),Yn(T),Yn(L),Yn(w),Yn(k.$$.fragment,n),Yn(E.$$.fragment,n),Yn(O.$$.fragment,n),C=!1},d:function(n){n&&V(t),et(e),et(o),et(a),D[u].d(),et(l),et(p),et(h),T&&T.d(),L&&L.d(),M[b].d(),et(k),et(E),et(O),N=!1,R()}}}function Ei(n,t,e){var r,o,i;P(n,Be,(function(n){return e(1,o=n)}));var a=t.id,c=void 0===a?"add":a,u=t.is_page,s=void 0!==u&&u,l=En("api"),p=Qo();P(n,p,(function(n){return e(2,i=n)}));var m=En("user");P(n,m,(function(n){return e(13,r=n)}));var h=l("createConnection"),g=l("removeConnection"),v=l("updateConnection"),$={};function y(n){var t=n.url?n.url.toFields():{};Mt.array(n.on_connect_commands)&&(t.on_connect_commands=n.on_connect_commands.join("\n")),t.nick||(t.nick=m.email.replace(/@.*/,"").replace(/\W/g,"_")),t.want_to_be_connected="disconnected"!=n.wanted_state,p.set(t)}function b(){return(b=d(f.mark((function n(){return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.perform($);case 2:m.removeConversation($),Ae.go("/settings/connections");case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function w(){return(w=d(f.mark((function n(){var t,e;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((t=p.get()).on_connect_commands=(t.on_connect_commands||"").split(/\n\r?/).filter((function(n){return n.length})),t.url=new Nr("irc://localhost").fromFields(t).toString(),!$.connection_id){n.next=12;break}return t.connection_id=$.connection_id,t.wanted_state=t.want_to_be_connected?"connected":"disconnected",n.next=8,v.perform(t);case 8:y($=m.ensureConversation(v.res.body)),n.next=16;break;case 12:return n.next=14,h.perform(t);case 14:(e=h.res.body).connection_id&&Ae.go(m.ensureConversation(e).path);case 16:s&&Ae.go("/settings/connections");case 17:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return _n((function(){($="add"==c?{}:r.findConversation({connection_id:c})||{}).connection_id?y($):function(){var n=new Nr(Ae.query.uri||m.default_connection||"irc://localhost").toFields();n.want_to_be_connected=!0,m.connections.size&&!Ae.query.uri&&(n.host="");n.nick||(n.nick=m.email.replace(/@.*/,"").replace(/\W/g,"_"));p.set(n)}()})),n.$$set=function(n){"id"in n&&e(0,c=n.id),"is_page"in n&&e(11,s=n.is_page)},[c,o,i,p,m,[["none","None"],["plain","Plain"],["external","External"]],h,g,v,function(){return b.apply(this,arguments)},function(){return w.apply(this,arguments)},s]}var Si=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(Zo()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,Ei,xi,j,{id:0,is_page:11}),t}return i}(it);function Oi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Ci(n){var t,e,r=n[4]("Currently connecting to %1.",n[3])+"";return{c:function(){t=Z("p"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){24&t&&r!==(r=n[4]("Currently connecting to %1.",n[3])+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Ni(n){var t,e,r=n[4]("Currently connected to %1.",n[3])+"";return{c:function(){t=Z("p"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){24&t&&r!==(r=n[4]("Currently connected to %1.",n[3])+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Ri(n){var t,e,r=n[4]("Currently disconnected from %1.",n[3])+"";return{c:function(){t=Z("p"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){24&t&&r!==(r=n[4]("Currently disconnected from %1.",n[3])+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Ai(n){var t,e,r=n[4]("Connection not found.")+"";return{c:function(){t=Z("p"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){16&t&&r!==(r=n[4]("Connection not found.")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Di(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,m,h=n[4]("Connection")+"";function g(n,t){return n[2].url?"disconnected"==n[2].state?Ri:"connected"==n[2].state?Ni:Ci:Ai}c=new $t({props:{name:"times"}});var v=g(n),$=v(n);return f=new Si({props:{id:n[0].connection_id}}),{c:function(){t=Z("div"),e=Z("div"),r=Z("h2"),o=X(h),i=nn(),a=Z("a"),nt(c.$$.fragment),u=nn(),$.c(),s=nn(),nt(f.$$.fragment),on(a,"href","#settings"),on(a,"class","btn-hallow is-active"),on(e,"class","sidebar-header"),on(t,"class","sidebar-left")},m:function(n,l){J(n,t,l),Y(t,e),Y(e,r),Y(r,o),Y(e,i),Y(e,a),tt(c,a,null),Y(t,u),$.m(t,null),Y(t,s),tt(f,t,null),d=!0,p||(m=en(a,"click",de.toggle),p=!0)},p:function(e,r){var i=st(r,1)[0];n=e,(!d||16&i)&&h!==(h=n[4]("Connection")+"")&&cn(o,h),v===(v=g(n))&&$?$.p(n,i):($.d(1),($=v(n))&&($.c(),$.m(t,s)));var a={};1&i&&(a.id=n[0].connection_id),f.$set(a)},i:function(e){d||(Gn(c.$$.fragment,e),Gn(f.$$.fragment,e),Ln((function(){l||(l=Vn(t,sr,n[1],!0)),l.run(1)})),d=!0)},o:function(e){Yn(c.$$.fragment,e),Yn(f.$$.fragment,e),l||(l=Vn(t,sr,n[1],!1)),l.run(0),d=!1},d:function(n){n&&V(t),et(c),$.d(),et(f),n&&l&&l.end(),p=!1,m()}}}function ji(n,t,e){var r,o;P(n,Be,(function(n){return e(4,o=n)}));var i=t.conversation,a=void 0===i?{}:i,c=t.transition,u=En("user"),s={};return _n(d(f.mark((function n(){return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e(2,s=u.findConversation({connection_id:a.connection_id})||{});case 1:case"end":return n.stop()}}),n)})))),n.$$set=function(n){"conversation"in n&&e(0,a=n.conversation),"transition"in n&&e(1,c=n.transition)},n.$$.update=function(){4&n.$$.dirty&&e(3,r=s.real_host||s.url&&s.url.host)},[a,c,s,r,o]}var Ti=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(Oi()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,ji,Di,j,{conversation:0,transition:1}),t}return i}(it);function Li(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Pi(n){var t,e,r,o,i=n[9].default,a=M(i,n,n[8],null);return{c:function(){t=Z("a"),a&&a.c(),on(t,"href",n[2]),on(t,"class",n[0]),on(t,"style",n[1]),ln(t,"has-path",n[4])},m:function(i,c){J(i,t,c),a&&a.m(t,null),n[11](t),e=!0,r||(o=en(t,"click",n[10]),r=!0)},p:function(n,r){var o=st(r,1)[0];a&&a.p&&(!e||256&o)&&U(a,i,n,n[8],o,null,null),(!e||4&o)&&on(t,"href",n[2]),(!e||1&o)&&on(t,"class",n[0]),(!e||2&o)&&on(t,"style",n[1]),17&o&&ln(t,"has-path",n[4])},i:function(n){e||(Gn(a,n),e=!0)},o:function(n){Yn(a,n),e=!1},d:function(e){e&&V(t),a&&a.d(e),n[11](null),r=!1,o()}}}function Mi(n,t,e){var r,o,i;P(n,Ae,(function(n){return e(7,i=n)}));var a,c=t.$$slots,u=void 0===c?{}:c,s=t.$$scope,f=t.class,l=void 0===f?"":f,d=t.href,p=void 0===d?"/":d,m=t.style,h=void 0===m?"":m;return n.$$set=function(n){"class"in n&&e(0,l=n.class),"href"in n&&e(5,p=n.href),"style"in n&&e(1,h=n.style),"$$scope"in n&&e(8,s=n.$$scope)},n.$$.update=function(){160&n.$$.dirty&&e(2,r=0==p.indexOf("/")?i.basePath+p:p),132&n.$$.dirty&&e(4,o=i.basePath+i.path==r.replace(/(#|\?).*/,""))},[l,h,r,a,o,p,function(){return a.focus()},i,s,u,function(t){Sn(n,t)},function(n){Cn[n?"unshift":"push"]((function(){e(3,a=n)}))}]}var Ii=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(Li()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,Mi,Pi,j,{class:0,href:5,style:1,focus:6}),t}return S(i,[{key:"focus",get:function(){return this.$$.ctx[6]}}]),i}(it);function Ui(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Hi(n){var t;return{c:function(){on(t=Z("input"),"type",n[2]),on(t,"id",n[1]),on(t,"name",n[0]),t.value=n[3]},m:function(n,e){J(n,t,e)},p:function(n,e){var r=st(e,1)[0];4&r&&on(t,"type",n[2]),2&r&&on(t,"id",n[1]),1&r&&on(t,"name",n[0]),8&r&&t.value!==n[3]&&(t.value=n[3])},i:O,o:O,d:function(n){n&&V(t)}}}function Bi(n,t,e){var r,o=t.form,i=t.name,a=void 0===i?"":i,c=t.id,u=void 0===c?a?"form_"+a:Gt():c,s=t.type,f=void 0===s?"hidden":s,l=o.field(a);return P(n,l,(function(n){return e(3,r=n)})),n.$$set=function(n){"form"in n&&e(5,o=n.form),"name"in n&&e(0,a=n.name),"id"in n&&e(1,u=n.id),"type"in n&&e(2,f=n.type)},[a,u,f,r,l,o]}var zi=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(Ui()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,Bi,Hi,j,{form:5,name:0,id:1,type:2}),t}return i}(it);function qi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Fi(n,t,e){var r=n.slice();return r[18]=t[e],r}function Ki(n){var t,e=n[4]("You are not a channel operator in %1.",n[0].name)+"";return{c:function(){t=X(e)},m:function(n,e){J(n,t,e)},p:function(n,r){17&r&&e!==(e=n[4]("You are not a channel operator in %1.",n[0].name)+"")&&cn(t,e)},d:function(n){n&&V(t)}}}function Wi(n){var t,e=n[4]("You are channel operator in %1.",n[0].name)+"";return{c:function(){t=X(e)},m:function(n,e){J(n,t,e)},p:function(n,r){17&r&&e!==(e=n[4]("You are channel operator in %1.",n[0].name)+"")&&cn(t,e)},d:function(n){n&&V(t)}}}function Gi(n){var t,e=n[4]("Private conversation with %1.",n[0].name)+"";return{c:function(){t=X(e)},m:function(n,e){J(n,t,e)},p:function(n,r){17&r&&e!==(e=n[4]("Private conversation with %1.",n[0].name)+"")&&cn(t,e)},d:function(n){n&&V(t)}}}function Yi(n){var t,e=n[4]("Conversation with %1 is frozen. Reason: %2",n[0].name,n[4](n[0].frozen))+"";return{c:function(){t=X(e)},m:function(n,e){J(n,t,e)},p:function(n,r){17&r&&e!==(e=n[4]("Conversation with %1 is frozen. Reason: %2",n[0].name,n[4](n[0].frozen))+"")&&cn(t,e)},d:function(n){n&&V(t)}}}function Ji(n){var t,e,r,o,i,a,c,u,s;t=new zi({props:{name:"connection_id",form:n[8]}}),r=new zi({props:{name:"conversation_id",form:n[8]}});var f=[Qi,Vi],l=[];function d(n,t){return n[2]?0:1}return i=d(n),a=l[i]=f[i](n),u=new Go({props:{type:"password",name:"password",form:n[8],readonly:!n[0].is("locked")&&!n[2],$$slots:{label:[Xi]},$$scope:{ctx:n}}}),{c:function(){nt(t.$$.fragment),e=nn(),nt(r.$$.fragment),o=nn(),a.c(),c=nn(),nt(u.$$.fragment)},m:function(n,a){tt(t,n,a),J(n,e,a),tt(r,n,a),J(n,o,a),l[i].m(n,a),J(n,c,a),tt(u,n,a),s=!0},p:function(n,t){var e=i;(i=d(n))===e?l[i].p(n,t):(Kn(),Yn(l[e],1,1,(function(){l[e]=null})),Wn(),(a=l[i])?a.p(n,t):(a=l[i]=f[i](n)).c(),Gn(a,1),a.m(c.parentNode,c));var r={};5&t&&(r.readonly=!n[0].is("locked")&&!n[2]),2097168&t&&(r.$$scope={dirty:t,ctx:n}),u.$set(r)},i:function(n){s||(Gn(t.$$.fragment,n),Gn(r.$$.fragment,n),Gn(a),Gn(u.$$.fragment,n),s=!0)},o:function(n){Yn(t.$$.fragment,n),Yn(r.$$.fragment,n),Yn(a),Yn(u.$$.fragment,n),s=!1},d:function(n){et(t,n),n&&V(e),et(r,n),n&&V(o),l[i].d(n),n&&V(c),et(u,n)}}}function Vi(n){var t,e,r,o,i,a=n[4]("Topic")+"",c=n[5](n[9]||"No topic is set.")+"";return{c:function(){t=Z("div"),e=Z("label"),r=X(a),o=nn(),i=Z("div"),on(e,"for","nothing"),on(i,"class","input"),on(t,"class","text-field")},m:function(n,a){J(n,t,a),Y(t,e),Y(e,r),Y(t,o),Y(t,i),i.innerHTML=c},p:function(n,t){16&t&&a!==(a=n[4]("Topic")+"")&&cn(r,a),32&t&&c!==(c=n[5](n[9]||"No topic is set.")+"")&&(i.innerHTML=c)},i:O,o:O,d:function(n){n&&V(t)}}}function Qi(n){var t,e;return t=new Io({props:{name:"topic",form:n[8],placeholder:n[4]("No topic is set."),$$slots:{label:[Zi]},$$scope:{ctx:n}}}),{c:function(){nt(t.$$.fragment)},m:function(n,r){tt(t,n,r),e=!0},p:function(n,e){var r={};16&e&&(r.placeholder=n[4]("No topic is set.")),2097168&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(Gn(t.$$.fragment,n),e=!0)},o:function(n){Yn(t.$$.fragment,n),e=!1},d:function(n){et(t,n)}}}function Zi(n){var t,e,r=n[4]("Topic")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){16&t&&r!==(r=n[4]("Topic")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Xi(n){var t,e,r=n[4]("Password")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){16&t&&r!==(r=n[4]("Password")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function na(n){var t,e;return t=new Cr({props:{name:"want_notifications",form:n[8],$$slots:{label:[ta]},$$scope:{ctx:n}}}),{c:function(){nt(t.$$.fragment)},m:function(n,r){tt(t,n,r),e=!0},p:function(n,e){var r={};2097168&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(Gn(t.$$.fragment,n),e=!0)},o:function(n){Yn(t.$$.fragment,n),e=!1},d:function(n){et(t,n)}}}function ta(n){var t,e,r=n[4]("Notify me on new messages")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){16&t&&r!==(r=n[4]("Notify me on new messages")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function ea(n){var t,e;return t=new ce({props:{icon:"save",$$slots:{default:[ra]},$$scope:{ctx:n}}}),{c:function(){nt(t.$$.fragment)},m:function(n,r){tt(t,n,r),e=!0},p:function(n,e){var r={};2097168&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(Gn(t.$$.fragment,n),e=!0)},o:function(n){Yn(t.$$.fragment,n),e=!1},d:function(n){et(t,n)}}}function ra(n){var t,e,r=n[4]("Update")+"";return{c:function(){t=Z("span"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){16&t&&r!==(r=n[4]("Update")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function oa(n){var t,e,r=n[4]("Leave")+"";return{c:function(){t=Z("span"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){16&t&&r!==(r=n[4]("Leave")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function ia(n){for(var t,e,r,o,i,a=n[4]("Participants (%1)",n[7].length)+"",c=n[7].toArray(),u=[],s=0;s<c.length;s+=1)u[s]=ca(Fi(n,c,s));var f=function(n){return Yn(u[n],1,1,(function(){u[n]=null}))};return{c:function(){t=Z("nav"),e=Z("h3"),r=X(a),o=nn();for(var n=0;n<u.length;n+=1)u[n].c();on(t,"class","sidebar-left__nav")},m:function(n,a){J(n,t,a),Y(t,e),Y(e,r),Y(t,o);for(var c=0;c<u.length;c+=1)u[c].m(t,null);i=!0},p:function(n,e){if((!i||144&e)&&a!==(a=n[4]("Participants (%1)",n[7].length)+"")&&cn(r,a),129&e){var o;for(c=n[7].toArray(),o=0;o<c.length;o+=1){var s=Fi(n,c,o);u[o]?(u[o].p(s,e),Gn(u[o],1)):(u[o]=ca(s),u[o].c(),Gn(u[o],1),u[o].m(t,null))}for(Kn(),o=c.length;o<u.length;o+=1)f(o);Wn()}},i:function(n){if(!i){for(var t=0;t<c.length;t+=1)Gn(u[t]);i=!0}},o:function(n){u=u.filter(Boolean);for(var t=0;t<u.length;t+=1)Yn(u[t]);i=!1},d:function(n){n&&V(t),Q(u,n)}}}function aa(n){var t,e,r,o=n[18].nick+"";return{c:function(){t=Z("span"),e=X(o),r=nn()},m:function(n,o){J(n,t,o),Y(t,e),J(n,r,o)},p:function(n,t){128&t&&o!==(o=n[18].nick+"")&&cn(e,o)},d:function(n){n&&V(t),n&&V(r)}}}function ca(n){var t,e;return t=new Ii({props:{href:"/chat/"+n[0].connection_id+"/"+n[18].id,class:"participant "+Ut(n[18].modes),$$slots:{default:[aa]},$$scope:{ctx:n}}}),{c:function(){nt(t.$$.fragment)},m:function(n,r){tt(t,n,r),e=!0},p:function(n,e){var r={};129&e&&(r.href="/chat/"+n[0].connection_id+"/"+n[18].id),128&e&&(r.class="participant "+Ut(n[18].modes)),2097280&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(Gn(t.$$.fragment,n),e=!0)},o:function(n){Yn(t.$$.fragment,n),e=!1},d:function(n){et(t,n)}}}function ua(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,m,h,g,v,$,y,b,w,_,k=n[4]("Conversation")+"",x=!n[0].is("private"),E=n[0].hasOwnProperty("wantNotifications"),S=!n[0].is("private");function O(n,t){return n[0].frozen?Yi:((null==f||1&t)&&(f=!!n[0].is("private")),f?Gi:n[2]?Wi:Ki)}c=new $t({props:{name:"times"}});var C=O(n,-1),N=C(n),R=x&&Ji(n),D=E&&na(n),j=S&&ea(n);(v=new ce({props:{type:"button",icon:"sign-out-alt",$$slots:{default:[oa]},$$scope:{ctx:n}}})).$on("click",n[10]);var T=!n[0].frozen&&n[6].nColumns<3&&ia(n);return{c:function(){t=Z("div"),e=Z("div"),r=Z("h2"),o=X(k),i=nn(),a=Z("a"),nt(c.$$.fragment),u=nn(),s=Z("p"),N.c(),l=nn(),d=Z("form"),R&&R.c(),p=nn(),D&&D.c(),m=nn(),h=Z("div"),j&&j.c(),g=nn(),nt(v.$$.fragment),$=nn(),T&&T.c(),on(a,"href","#settings"),on(a,"class","btn-hallow is-active"),on(e,"class","sidebar-header"),on(h,"class","form-actions"),on(d,"method","post"),on(t,"class","sidebar-left")},m:function(f,y){J(f,t,y),Y(t,e),Y(e,r),Y(r,o),Y(e,i),Y(e,a),tt(c,a,null),Y(t,u),Y(t,s),N.m(s,null),Y(t,l),Y(t,d),R&&R.m(d,null),Y(d,p),D&&D.m(d,null),Y(d,m),Y(d,h),j&&j.m(h,null),Y(h,g),tt(v,h,null),Y(t,$),T&&T.m(t,null),b=!0,w||(_=[en(a,"click",de.toggle),en(d,"submit",rn(n[11]))],w=!0)},p:function(e,r){var i=st(r,1)[0];n=e,(!b||16&i)&&k!==(k=n[4]("Conversation")+"")&&cn(o,k),C===(C=O(n,i))&&N?N.p(n,i):(N.d(1),(N=C(n))&&(N.c(),N.m(s,null))),1&i&&(x=!n[0].is("private")),x?R?(R.p(n,i),1&i&&Gn(R,1)):((R=Ji(n)).c(),Gn(R,1),R.m(d,p)):R&&(Kn(),Yn(R,1,1,(function(){R=null})),Wn()),1&i&&(E=n[0].hasOwnProperty("wantNotifications")),E?D?(D.p(n,i),1&i&&Gn(D,1)):((D=na(n)).c(),Gn(D,1),D.m(d,m)):D&&(Kn(),Yn(D,1,1,(function(){D=null})),Wn()),1&i&&(S=!n[0].is("private")),S?j?(j.p(n,i),1&i&&Gn(j,1)):((j=ea(n)).c(),Gn(j,1),j.m(h,g)):j&&(Kn(),Yn(j,1,1,(function(){j=null})),Wn());var a={};2097168&i&&(a.$$scope={dirty:i,ctx:n}),v.$set(a),!n[0].frozen&&n[6].nColumns<3?T?(T.p(n,i),65&i&&Gn(T,1)):((T=ia(n)).c(),Gn(T,1),T.m(t,null)):T&&(Kn(),Yn(T,1,1,(function(){T=null})),Wn())},i:function(e){b||(Gn(c.$$.fragment,e),Gn(R),Gn(D),Gn(j),Gn(v.$$.fragment,e),Gn(T),Ln((function(){y||(y=Vn(t,sr,n[1],!0)),y.run(1)})),b=!0)},o:function(e){Yn(c.$$.fragment,e),Yn(R),Yn(D),Yn(j),Yn(v.$$.fragment,e),Yn(T),y||(y=Vn(t,sr,n[1],!1)),y.run(0),b=!1},d:function(n){n&&V(t),et(c),N.d(),R&&R.d(),D&&D.d(),j&&j.d(),et(v),T&&T.d(),n&&y&&y.end(),w=!1,A(_)}}}function sa(n,t,e){var r,o,i,a,c,u,s,f=O;P(n,de,(function(n){return e(14,i=n)})),P(n,Be,(function(n){return e(4,a=n)})),P(n,ze,(function(n){return e(5,c=n)})),P(n,pe,(function(n){return e(6,u=n)})),n.$$.on_destroy.push((function(){return f()}));var l=t.conversation,d=t.transition,p=Qo(),m=En("user"),h=l.topic,g=l.wantNotifications;return n.$$set=function(n){"conversation"in n&&e(0,l=n.conversation),"transition"in n&&e(1,d=n.transition)},n.$$.update=function(){1&n.$$.dirty&&e(2,r=function(n){var t=m.findConversation({connection_id:n.connection_id}),e=n.participants.get(t&&t.nick);return e&&e.modes.operator}(l)),1&n.$$.dirty&&l.update({wantNotifications:g}),1&n.$$.dirty&&(e(3,o=l.participants),f(),f=T(o,(function(n){return e(7,s=n)}))),n.$$.dirty},[l,d,r,o,a,c,u,s,p,h,function(){l.send("/part",(function(n){return!n.errrors&&H(de,i="",i)}))},function(){r&&h!=l.topic&&l.send("/topic "+h)},void 0]}var fa=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(qi()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,sa,ua,j,{conversation:0,transition:1}),t}return i}(it),la=function(){function n(){var t=this;e(this,n),this.dragAndDropEvents={drag:this._preventDefault.bind(this),dragend:this.stop.bind(this),dragenter:this.start.bind(this),dragleave:this.stop.bind(this),dragover:this.start.bind(this),dragstart:this._preventDefault.bind(this),drop:this.drop.bind(this)},this.pasteEvents={paste:this.paste.bind(this)},this.dropIndicatorEl=document.createElement("div"),this.dropIndicatorEl.className="drop-area hidden",this.removeDragOverDebounced=jt((function(){return t._removeDragOver()}),100)}return S(n,[{key:"attach",value:function(n,t){var e=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;this.dropEl=n,this.uploader=t,this.targetEl=r,Object.keys(this.dragAndDropEvents).forEach((function(n){r.addEventListener(n,e.dragAndDropEvents[n])})),Object.keys(this.pasteEvents).forEach((function(n){document.addEventListener(n,e.pasteEvents[n])}))}},{key:"detach",value:function(){var n=this;Object.keys(this.dragAndDropEvents).forEach((function(t){n.targetEl.removeEventListener(t,n.dragAndDropEvents[t])})),Object.keys(this.pasteEvents).forEach((function(t){document.removeEventListener(t,n.pasteEvents[t])}))}},{key:"drop",value:function(n){this.stop(n),this.uploader&&this.uploader(n)}},{key:"paste",value:function(n){var t=(n.clipboardData||n.originalEvent.clipboardData).items;if(this.uploader)for(var e=0;e<t.length;e++)if("file"==t[e].kind)return this.uploader({dataTransfer:{files:[t[e].getAsFile()]}})}},{key:"stop",value:function(n){this._preventDefault(n),this.removeDragOverDebounced()}},{key:"start",value:function(n){if(this.dropEl){this._preventDefault(n);var t=this.dropIndicatorEl.style;t.height=this.dropEl.offsetHeight+"px",t.width=this.dropEl.offsetWidth+"px",t.top=this.dropEl.offsetTop+"px",t.left=this.dropEl.offsetLeft+"px",this.dropIndicatorEl.classList.remove("hidden"),this.dropEl.parentNode.appendChild(this.dropIndicatorEl)}}},{key:"_preventDefault",value:function(n){n.preventDefault(),n.stopPropagation()}},{key:"_removeDragOver",value:function(){this.dropIndicatorEl.classList.add("hidden")}}]),n}();function da(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function pa(n){var t,e,r,o,i,a,c,u=n[6].default,s=M(u,n,n[5],null);return{c:function(){t=Z("main"),e=Z("div"),s&&s.c(),Ln((function(){return n[7].call(e)})),on(t,"class",o=n[1].join(" "))},m:function(o,u){J(o,t,u),Y(t,e),s&&s.m(e,null),r=function(n,t){"static"===getComputedStyle(n).position&&(n.style.position="relative");var e=Z("iframe");e.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),e.setAttribute("aria-hidden","true"),e.tabIndex=-1;var r,o=fn();return o?(e.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=en(window,"message",(function(n){n.source===e.contentWindow&&t()}))):(e.src="about:blank",e.onload=function(){r=en(e.contentWindow,"resize",t)}),Y(n,e),function(){(o||r&&e.contentWindow)&&r(),V(e)}}(e,n[7].bind(e)),i=!0,a||(c=B(n[2].call(null,t)),a=!0)},p:function(n,e){var r=st(e,1)[0];s&&s.p&&(!i||32&r)&&U(s,u,n,n[5],r,null,null),(!i||2&r&&o!==(o=n[1].join(" ")))&&on(t,"class",o)},i:function(n){i||(Gn(s,n),i=!0)},o:function(n){Yn(s,n),i=!1},d:function(n){n&&V(t),s&&s.d(n),r(),a=!1,c()}}}function ma(n,t,e){var r,o,i=t.$$slots,a=void 0===i?{}:i,c=t.$$scope,u=(o=wn(),function(n,t){var e=o.$$.callbacks[n];if(e){var r=dn(n,t);e.slice().forEach((function(n){n.call(o,r)}))}}),s={scrollDelay:80,scrollOffset:80,scrollTop:0,visibleEls:[]},f=t.class,l=void 0===f?"":f,d=Date.now(),p=0,m=t.pos,h=void 0===m?"top":m;function g(){var n=s.infinityEl;if(n){e(3,h=n.scrollTop>p-n.offsetHeight-s.scrollOffset?"bottom":n.scrollTop<s.scrollOffset?"top":"middle"),s.pos=h,s.scrollHeightChanged=s.scrollHeight!=p,s.scrollHeight=p,s.visibleElsChanged=!1;var t=function(n){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,e=x(n.childNodes),r=[],o=0;o<e.length;)e[o].nodeType==Node.ELEMENT_NODE?(r.push([o,e[o]]),o++):e.splice(o,1);if(!e.length)return[];for(var i=t.scrollTop;r.length>1;){var a=Math.floor(r.length/2);r[a][1].offsetTop<=i?r.splice(0,a):r.splice(a)}r.length||r.push([0,e[0]]);for(var c=t.offsetHeight,u=r[0][0],s=u;s<e.length&&!(e[s].offsetTop>i+c);)s++;return e.slice(u,s).filter((function(n){return!n.getAttribute("aria-hidden")}))}(n.firstElementChild,n);t.length==s.visibleEls.length&&t[0]==s.visibleEls[0]||(s.visibleEls=t,s.visibleElsChanged=!0),(s.scrollHeightChanged||s.visibleElsChanged)&&u("visibility",s),s.scrollHeightChanged&&u("rendered",s)}}function v(n){return!Mt.undefined(n)&&(-1==n&&(n=p),Mt.string(n)&&(n=s.infinityEl.querySelector(n)),n&&n.tagName&&(n=n.offsetTop),!Mt.undefined(n)&&(!(n<0)&&(d=Date.now(),s.infinityEl.scrollTop=n,s.scrollTop=s.infinityEl.scrollTop,!0)))}return n.$$set=function(n){"class"in n&&e(4,l=n.class),"pos"in n&&e(3,h=n.pos),"$$scope"in n&&e(5,c=n.$$scope)},n.$$.update=function(){24&n.$$.dirty&&e(1,r=[l||"infinity-scroll"].concat(["has-pos-"+h])),1&n.$$.dirty&&p&&g()},[p,r,function(n){s.infinityEl=n,s.scrollTo=v,n.addEventListener("scroll",(function(){return function(n){s.scrollTid&&clearTimeout(s.scrollTid);s.scrollTid=setTimeout((function(){return function(n){d+500>Date.now()?(Math.abs(n.scrollTop-s.scrollTop)>40&&(n.scrollTop=s.scrollTop),s.scrollTid&&clearTimeout(s.scrollTid),g()):(s.scrollTop=n.scrollTop,g(),u("scrolled",s))}(n)}),s.scrollDelay)}(n)})),g()},h,l,c,a,function(){p=this.offsetHeight,e(0,p)}]}var ha=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(da()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,ma,pa,j,{class:4,pos:3}),t}return i}(it);function ga(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function va(n,t,e){var r=n.slice();return r[32]=t[e],r}function $a(n,t,e){var r=n.slice();return r[35]=t[e],r[37]=e,r}function ya(n,t,e){var r=n.slice();return r[38]=t[e],r}function ba(n){var t,e,r,o,i,a,c;return e=new $t({props:{name:"users-cog"}}),o=new $t({props:{name:"times"}}),{c:function(){t=Z("a"),nt(e.$$.fragment),r=nn(),nt(o.$$.fragment),on(t,"href","#settings"),on(t,"class","btn-hallow"),ln(t,"is-active","settings"==n[13])},m:function(n,u){J(n,t,u),tt(e,t,null),Y(t,r),tt(o,t,null),i=!0,a||(c=en(t,"click",de.toggle),a=!0)},p:function(n,e){8192&e[0]&&ln(t,"is-active","settings"==n[13])},i:function(n){i||(Gn(e.$$.fragment,n),Gn(o.$$.fragment,n),i=!0)},o:function(n){Yn(e.$$.fragment,n),Yn(o.$$.fragment,n),i=!1},d:function(n){n&&V(t),et(e),et(o),a=!1,c()}}}function wa(n){var t,e,r,o,i,a,c,u,s,f,l,d=n[11](n[1].name)+"",p=ir(n[12],n[3])+"",m=!n[3].is("not_found"),h=m&&ba(n);return{c:function(){t=Z("h1"),e=Z("a"),r=X(d),o=nn(),i=Z("span"),a=X(p),c=nn(),h&&h.c(),u=tn(),on(e,"href","#settings"),on(t,"class","ellipsis"),on(i,"class","chat-header__topic ellipsis")},m:function(n,d){J(n,t,d),Y(t,e),Y(e,r),J(n,o,d),J(n,i,d),Y(i,a),J(n,c,d),h&&h.m(n,d),J(n,u,d),s=!0,f||(l=en(e,"click",de.toggle),f=!0)},p:function(n,t){(!s||2050&t[0])&&d!==(d=n[11](n[1].name)+"")&&cn(r,d),(!s||4104&t[0])&&p!==(p=ir(n[12],n[3])+"")&&cn(a,p),8&t[0]&&(m=!n[3].is("not_found")),m?h?(h.p(n,t),8&t[0]&&Gn(h,1)):((h=ba(n)).c(),Gn(h,1),h.m(u.parentNode,u)):h&&(Kn(),Yn(h,1,1,(function(){h=null})),Wn())},i:function(n){s||(Gn(h),s=!0)},o:function(n){Yn(h),s=!1},d:function(n){n&&V(t),n&&V(o),n&&V(i),n&&V(c),h&&h.d(n),n&&V(u),f=!1,l()}}}function _a(n){var t,e,r,o,i=[xa,ka],a=[];function c(n,t){return n[0]?0:1}return t=c(n),e=a[t]=i[t](n),{c:function(){e.c(),r=tn()},m:function(n,e){a[t].m(n,e),J(n,r,e),o=!0},p:function(n,o){var u=t;(t=c(n))===u?a[t].p(n,o):(Kn(),Yn(a[u],1,1,(function(){a[u]=null})),Wn(),(e=a[t])?e.p(n,o):(e=a[t]=i[t](n)).c(),Gn(e,1),e.m(r.parentNode,r))},i:function(n){o||(Gn(e),o=!0)},o:function(n){Yn(e),o=!1},d:function(n){a[t].d(n),n&&V(r)}}}function ka(n){var t,e;return t=new Ti({props:{conversation:n[1],transition:{duration:250,x:n[14].nColumns>1?0:n[14].width}}}),{c:function(){nt(t.$$.fragment)},m:function(n,r){tt(t,n,r),e=!0},p:function(n,e){var r={};2&e[0]&&(r.conversation=n[1]),16384&e[0]&&(r.transition={duration:250,x:n[14].nColumns>1?0:n[14].width}),t.$set(r)},i:function(n){e||(Gn(t.$$.fragment,n),e=!0)},o:function(n){Yn(t.$$.fragment,n),e=!1},d:function(n){et(t,n)}}}function xa(n){var t,e;return t=new fa({props:{conversation:n[1],transition:{duration:250,x:n[14].nColumns>1?0:n[14].width}}}),{c:function(){nt(t.$$.fragment)},m:function(n,r){tt(t,n,r),e=!0},p:function(n,e){var r={};2&e[0]&&(r.conversation=n[1]),16384&e[0]&&(r.transition={duration:250,x:n[14].nColumns>1?0:n[14].width}),t.$set(r)},i:function(n){e||(Gn(t.$$.fragment,n),e=!0)},o:function(n){Yn(t.$$.fragment,n),e=!1},d:function(n){et(t,n)}}}function Ea(n){var t,e,r,o,i,a=[Oa,Sa],c=[];function u(n,e){return 8&e[0]&&(t=!!n[3].is("private")),t?0:n[3].frozen?-1:1}return~(e=u(n,[-1]))&&(r=c[e]=a[e](n)),{c:function(){r&&r.c(),o=tn()},m:function(n,t){~e&&c[e].m(n,t),J(n,o,t),i=!0},p:function(n,t){var i=e;(e=u(n,t))===i?~e&&c[e].p(n,t):(r&&(Kn(),Yn(c[i],1,1,(function(){c[i]=null})),Wn()),~e?((r=c[e])?r.p(n,t):(r=c[e]=a[e](n)).c(),Gn(r,1),r.m(o.parentNode,o)):r=null)},i:function(n){i||(Gn(r),i=!0)},o:function(n){Yn(r),i=!1},d:function(n){~e&&c[e].d(n),n&&V(o)}}}function Sa(n){var t,e,r,o,i,a,c,u,s,f=n[16](n[3].topic?"Topic for %1 is: %2":"No topic is set for %1.",n[3].name,n[3].topic)+"";function l(n,t){return 1==n[17].length?Na:Ca}e=new $t({props:{name:"info-circle"}}),c=new $t({props:{name:"info-circle"}});var d=l(n),p=d(n);return{c:function(){t=Z("p"),nt(e.$$.fragment),r=nn(),i=nn(),a=Z("p"),nt(c.$$.fragment),u=nn(),p.c(),o=new mn(null)},m:function(n,l){J(n,t,l),tt(e,t,null),Y(t,r),o.m(f,t),J(n,i,l),J(n,a,l),tt(c,a,null),Y(a,u),p.m(a,null),s=!0},p:function(n,t){(!s||65544&t[0])&&f!==(f=n[16](n[3].topic?"Topic for %1 is: %2":"No topic is set for %1.",n[3].name,n[3].topic)+"")&&o.p(f),d===(d=l(n))&&p?p.p(n,t):(p.d(1),(p=d(n))&&(p.c(),p.m(a,null)))},i:function(n){s||(Gn(e.$$.fragment,n),Gn(c.$$.fragment,n),s=!0)},o:function(n){Yn(e.$$.fragment,n),Yn(c.$$.fragment,n),s=!1},d:function(n){n&&V(t),et(e),n&&V(i),n&&V(a),et(c),p.d()}}}function Oa(n){var t,e,r,o,i,a=n[16]('This is a private conversation with "%1".',n[3].name)+"";return e=new $t({props:{name:"info-circle"}}),{c:function(){t=Z("p"),nt(e.$$.fragment),r=nn(),o=new mn(null)},m:function(n,c){J(n,t,c),tt(e,t,null),Y(t,r),o.m(a,t),i=!0},p:function(n,t){(!i||65544&t[0])&&a!==(a=n[16]('This is a private conversation with "%1".',n[3].name)+"")&&o.p(a)},i:function(n){i||(Gn(e.$$.fragment,n),i=!0)},o:function(n){Yn(e.$$.fragment,n),i=!1},d:function(n){n&&V(t),et(e)}}}function Ca(n){var t,e,r=n[16]("There are %1 participants in this conversation.",n[17].length)+"";return{c:function(){e=tn(),t=new mn(e)},m:function(n,o){t.m(r,n,o),J(n,e,o)},p:function(n,e){196608&e[0]&&r!==(r=n[16]("There are %1 participants in this conversation.",n[17].length)+"")&&t.p(r)},d:function(n){n&&V(e),n&&t.d()}}}function Na(n){var t,e=n[11]("You are the only participant in this conversation.")+"";return{c:function(){t=X(e)},m:function(n,e){J(n,t,e)},p:function(n,r){2048&r[0]&&e!==(e=n[11]("You are the only participant in this conversation.")+"")&&cn(t,e)},d:function(n){n&&V(t)}}}function Ra(n){var t,e,r,o,i,a,c,u=n[11]("Loading...")+"";return r=new $t({props:{name:"spinner",animation:"spin"}}),{c:function(){t=Z("div"),e=Z("span"),nt(r.$$.fragment),o=nn(),i=Z("i"),a=X(u),on(t,"class","message__status-line for-loading has-pos-top")},m:function(n,u){J(n,t,u),Y(t,e),tt(r,e,null),Y(e,o),Y(e,i),Y(i,a),c=!0},p:function(n,t){(!c||2048&t[0])&&u!==(u=n[11]("Loading...")+"")&&cn(a,u)},i:function(n){c||(Gn(r.$$.fragment,n),c=!0)},o:function(n){Yn(r.$$.fragment,n),c=!1},d:function(n){n&&V(t),et(r)}}}function Aa(n){var t,e,r,o,i,a,c,u=n[11]("Started chatting on %1",n[3].historyStartAt.getHumanDate())+"";return r=new $t({props:{name:"calendar-alt"}}),{c:function(){t=Z("div"),e=Z("span"),nt(r.$$.fragment),o=nn(),i=Z("i"),a=X(u),on(t,"class","message__status-line for-start-of-history")},m:function(n,u){J(n,t,u),Y(t,e),tt(r,e,null),Y(e,o),Y(e,i),Y(i,a),c=!0},p:function(n,t){(!c||2056&t[0])&&u!==(u=n[11]("Started chatting on %1",n[3].historyStartAt.getHumanDate())+"")&&cn(a,u)},i:function(n){c||(Gn(r.$$.fragment,n),c=!0)},o:function(n){Yn(r.$$.fragment,n),c=!1},d:function(n){n&&V(t),et(r)}}}function Da(n){var t,e,r,o,i,a,c,u=n[35].ts.getHumanDate()+"";return r=new $t({props:{name:"calendar-alt"}}),{c:function(){t=Z("div"),e=Z("span"),nt(r.$$.fragment),o=nn(),i=Z("i"),a=X(u),on(t,"class","message__status-line for-day-changed")},m:function(n,u){J(n,t,u),Y(t,e),tt(r,e,null),Y(e,o),Y(e,i),Y(i,a),c=!0},p:function(n,t){(!c||32768&t[0])&&u!==(u=n[35].ts.getHumanDate()+"")&&cn(a,u)},i:function(n){c||(Gn(r.$$.fragment,n),c=!0)},o:function(n){Yn(r.$$.fragment,n),c=!1},d:function(n){n&&V(t),et(r)}}}function ja(n){var t,e,r,o,i,a,c=n[11]("New messages")+"";return r=new $t({props:{name:"comments"}}),{c:function(){t=Z("div"),e=Z("span"),nt(r.$$.fragment),o=nn(),i=X(c),on(t,"class","message__status-line for-last-read")},m:function(n,c){J(n,t,c),Y(t,e),tt(r,e,null),Y(e,o),Y(e,i),a=!0},p:function(n,t){(!a||2048&t[0])&&c!==(c=n[11]("New messages")+"")&&cn(i,c)},i:function(n){a||(Gn(r.$$.fragment,n),a=!0)},o:function(n){Yn(r.$$.fragment,n),a=!1},d:function(n){n&&V(t),et(r)}}}function Ta(n){var t,e,r,o;return e=new $t({props:{name:n[35].showDetails?"caret-square-up":"caret-square-down"}}),{c:function(){t=Z("a"),nt(e.$$.fragment),on(t,"href",r="#action:details:"+n[35].index)},m:function(n,r){J(n,t,r),tt(e,t,null),o=!0},p:function(n,i){var a={};32768&i[0]&&(a.name=n[35].showDetails?"caret-square-up":"caret-square-down"),e.$set(a),(!o||32768&i[0]&&r!==(r="#action:details:"+n[35].index))&&on(t,"href",r)},i:function(n){o||(Gn(e.$$.fragment,n),o=!0)},o:function(n){Yn(e.$$.fragment,n),o=!1},d:function(n){n&&V(t),et(e)}}}function La(n){var t,e,r,o,i,a,c,u;return e=new $t({props:{name:"times-circle"}}),a=new $t({props:{name:"sync-alt"}}),{c:function(){t=Z("a"),nt(e.$$.fragment),o=nn(),i=Z("a"),nt(a.$$.fragment),on(t,"href","#action:remove"),on(t,"class","pull-right has-tooltip"),on(t,"data-tooltip",r=n[11]("Remove")),on(i,"href","#action:resend"),on(i,"class","pull-right has-tooltip "),on(i,"data-tooltip",c=n[11]("Resend"))},m:function(n,r){J(n,t,r),tt(e,t,null),J(n,o,r),J(n,i,r),tt(a,i,null),u=!0},p:function(n,e){(!u||2048&e[0]&&r!==(r=n[11]("Remove")))&&on(t,"data-tooltip",r),(!u||2048&e[0]&&c!==(c=n[11]("Resend")))&&on(i,"data-tooltip",c)},i:function(n){u||(Gn(e.$$.fragment,n),Gn(a.$$.fragment,n),u=!0)},o:function(n){Yn(e.$$.fragment,n),Yn(a.$$.fragment,n),u=!1},d:function(n){n&&V(t),et(e),n&&V(o),n&&V(i),et(a)}}}function Pa(n){return{c:O,m:O,p:O,d:O}}function Ma(n){var t,e,r,o,i;return{c:function(){on(t=Z("div"),"class",e="embed "+n[41].className)},m:function(e,a){J(e,t,a),o||(i=B(r=or.call(null,t,n[41])),o=!0)},p:function(o,i){n=o,32768&i[0]&&e!==(e="embed "+n[41].className)&&on(t,"class",e),r&&D(r.update)&&32768&i[0]&&r.update.call(null,n[41])},d:function(n){n&&V(t),o=!1,i()}}}function Ia(n){return{c:O,m:O,p:O,d:O}}function Ua(n){var t,e,r={ctx:n,current:null,token:null,hasCatch:!1,pending:Ia,then:Ma,catch:Pa,value:41};return Qn(e=n[38],r),{c:function(){t=tn(),r.block.c()},m:function(n,e){J(n,t,e),r.block.m(n,r.anchor=e),r.mount=function(){return t.parentNode},r.anchor=t},p:function(t,o){n=t,r.ctx=n,32768&o[0]&&e!==(e=n[38])&&Qn(e,r)||function(n,t,e){var r=t.slice(),o=n.resolved;n.current===n.then&&(r[n.value]=o),n.current===n.catch&&(r[n.error]=o),n.block.p(r,e)}(r,n,o)},d:function(n){n&&V(t),r.block.d(n),r.token=null,r=null}}}function Ha(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,m,h,g,v,$,y,b,w,_,k,x,E,S,O=n[35].ts.toLocaleString()+"",C=n[35].from+"",N=n[35].markdown+"",R=n[35].dayChanged&&Da(n),A=n[37]&&n[37]==n[15].length-n[3].unread&&ja(n);o=new $t({props:{name:"pick:"+n[35].from,color:n[35].color}});var j=[La,Ta],T=[];function L(n,t){return!1===n[35].waitingForResponse?0:!n[35].waitingForResponse&&n[35].details?1:-1}~(g=L(n))&&(v=T[g]=j[g](n));for(var P=n[35].embeds,M=[],I=0;I<P.length;I+=1)M[I]=Ua(ya(n,P,I));return{c:function(){R&&R.c(),t=nn(),A&&A.c(),e=nn(),r=Z("div"),nt(o.$$.fragment),i=nn(),a=Z("div"),c=Z("div"),u=X(O),f=nn(),l=Z("a"),d=X(C),m=nn(),h=Z("div"),v&&v.c(),$=nn(),b=nn();for(var g=0;g<M.length;g+=1)M[g].c();w=nn(),on(a,"class","message__ts has-tooltip"),on(a,"data-content",s=n[35].ts.format("%H:%M")),on(l,"href",p="#action:join:"+n[35].from),on(l,"class","message__from"),sn(l,"color",n[35].color),on(l,"tabindex","-1"),y=new mn(null),on(h,"class","message__text"),on(r,"class",_=n[35].className),on(r,"data-index",n[37]),on(r,"data-ts",k=n[35].ts.toISOString()),ln(r,"is-not-present",!n[17].get(n[35].from)),ln(r,"show-details",!!n[35].showDetails)},m:function(s,p){R&&R.m(s,p),J(s,t,p),A&&A.m(s,p),J(s,e,p),J(s,r,p),tt(o,r,null),Y(r,i),Y(r,a),Y(a,c),Y(c,u),Y(r,f),Y(r,l),Y(l,d),Y(r,m),Y(r,h),~g&&T[g].m(h,null),Y(h,$),y.m(N,h),Y(r,b);for(var v=0;v<M.length;v+=1)M[v].m(r,null);Y(r,w),x=!0,E||(S=en(r,"click",(function(){D(n[10])&&n[10].apply(this,arguments)})),E=!0)},p:function(i,c){(n=i)[35].dayChanged?R?(R.p(n,c),32768&c[0]&&Gn(R,1)):((R=Da(n)).c(),Gn(R,1),R.m(t.parentNode,t)):R&&(Kn(),Yn(R,1,1,(function(){R=null})),Wn()),n[37]&&n[37]==n[15].length-n[3].unread?A?(A.p(n,c),32776&c[0]&&Gn(A,1)):((A=ja(n)).c(),Gn(A,1),A.m(e.parentNode,e)):A&&(Kn(),Yn(A,1,1,(function(){A=null})),Wn());var f={};32768&c[0]&&(f.name="pick:"+n[35].from),32768&c[0]&&(f.color=n[35].color),o.$set(f),(!x||32768&c[0])&&O!==(O=n[35].ts.toLocaleString()+"")&&cn(u,O),(!x||32768&c[0]&&s!==(s=n[35].ts.format("%H:%M")))&&on(a,"data-content",s),(!x||32768&c[0])&&C!==(C=n[35].from+"")&&cn(d,C),(!x||32768&c[0]&&p!==(p="#action:join:"+n[35].from))&&on(l,"href",p),(!x||32768&c[0])&&sn(l,"color",n[35].color);var m=g;if((g=L(n))===m?~g&&T[g].p(n,c):(v&&(Kn(),Yn(T[m],1,1,(function(){T[m]=null})),Wn()),~g?((v=T[g])?v.p(n,c):(v=T[g]=j[g](n)).c(),Gn(v,1),v.m(h,$)):v=null),(!x||32768&c[0])&&N!==(N=n[35].markdown+"")&&y.p(N),32768&c[0]){var b;for(P=n[35].embeds,b=0;b<P.length;b+=1){var E=ya(n,P,b);M[b]?M[b].p(E,c):(M[b]=Ua(E),M[b].c(),M[b].m(r,w))}for(;b<M.length;b+=1)M[b].d(1);M.length=P.length}(!x||32768&c[0]&&_!==(_=n[35].className))&&on(r,"class",_),(!x||32768&c[0]&&k!==(k=n[35].ts.toISOString()))&&on(r,"data-ts",k),163840&c[0]&&ln(r,"is-not-present",!n[17].get(n[35].from)),32768&c[0]&&ln(r,"show-details",!!n[35].showDetails)},i:function(n){x||(Gn(R),Gn(A),Gn(o.$$.fragment,n),Gn(v),x=!0)},o:function(n){Yn(R),Yn(A),Yn(o.$$.fragment,n),Yn(v),x=!1},d:function(n){R&&R.d(n),n&&V(t),A&&A.d(n),n&&V(e),n&&V(r),et(o),~g&&T[g].d(),Q(M,n),E=!1,S()}}}function Ba(n){var t,e,r,o,i,a,c=ir(n[12],n[3])+"";return r=new $t({props:{name:"exclamation-triangle"}}),{c:function(){t=Z("div"),e=Z("div"),nt(r.$$.fragment),o=nn(),i=X(c),on(e,"class","message__text"),on(t,"class","message is-highlighted")},m:function(n,c){J(n,t,c),Y(t,e),tt(r,e,null),Y(e,o),Y(e,i),a=!0},p:function(n,t){(!a||4104&t[0])&&c!==(c=ir(n[12],n[3])+"")&&cn(i,c)},i:function(n){a||(Gn(r.$$.fragment,n),a=!0)},o:function(n){Yn(r.$$.fragment,n),a=!1},d:function(n){n&&V(t),et(r)}}}function za(n){var t,e,r,o,i,a,c,u,s,f,l,d=n[11]("You are invited to join %1.",n[1].name)+"",p=n[11]("Do you want to join?")+"";return(u=new Ii({props:{href:"#action:join",class:"btn",$$slots:{default:[Wa]},$$scope:{ctx:n}}})).$on("click",(function(){D(n[10])&&n[10].apply(this,arguments)})),(f=new Ii({props:{href:"#action:close",class:"btn is-secondary",$$slots:{default:[Ga]},$$scope:{ctx:n}}})).$on("click",(function(){D(n[10])&&n[10].apply(this,arguments)})),{c:function(){t=Z("h2"),e=X(d),r=nn(),o=Z("p"),i=X(p),a=nn(),c=Z("p"),nt(u.$$.fragment),s=nn(),nt(f.$$.fragment)},m:function(n,d){J(n,t,d),Y(t,e),J(n,r,d),J(n,o,d),Y(o,i),J(n,a,d),J(n,c,d),tt(u,c,null),Y(c,s),tt(f,c,null),l=!0},p:function(t,r){n=t,(!l||2050&r[0])&&d!==(d=n[11]("You are invited to join %1.",n[1].name)+"")&&cn(e,d),(!l||2048&r[0])&&p!==(p=n[11]("Do you want to join?")+"")&&cn(i,p);var o={};2048&r[0]|2048&r[1]&&(o.$$scope={dirty:r,ctx:n}),u.$set(o);var a={};2048&r[0]|2048&r[1]&&(a.$$scope={dirty:r,ctx:n}),f.$set(a)},i:function(n){l||(Gn(u.$$.fragment,n),Gn(f.$$.fragment,n),l=!0)},o:function(n){Yn(u.$$.fragment,n),Yn(f.$$.fragment,n),l=!1},d:function(n){n&&V(t),n&&V(r),n&&V(o),n&&V(a),n&&V(c),et(u),et(f)}}}function qa(n){var t,e,r,o,i,a,c,u,s=n[16]("Disconnected. Your connection %1 can be edited in [settings](%2).",n[12].name,"/chat/"+n[12].connection_id+"#settings")+"";return r=new $t({props:{name:"exclamation-triangle"}}),{c:function(){t=Z("div"),e=Z("div"),nt(r.$$.fragment),o=nn(),i=new mn(null),on(e,"class","message__text"),on(t,"class","message is-highlighted")},m:function(n,f){J(n,t,f),Y(t,e),tt(r,e,null),Y(e,o),i.m(s,e),a=!0,c||(u=en(t,"click",de.toggle),c=!0)},p:function(n,t){(!a||69632&t[0])&&s!==(s=n[16]("Disconnected. Your connection %1 can be edited in [settings](%2).",n[12].name,"/chat/"+n[12].connection_id+"#settings")+"")&&i.p(s)},i:function(n){a||(Gn(r.$$.fragment,n),a=!0)},o:function(n){Yn(r.$$.fragment,n),a=!1},d:function(n){n&&V(t),et(r),c=!1,u()}}}function Fa(n){var t,e,r,o,i,a,c,u,s,f,l,d=n[11]("You are not part of this conversation.")+"",p=n[11]('Do you want to chat with "%1"?',n[3].name)+"";return(u=new Ii({props:{href:"#action:join:"+n[3].name,class:"btn",$$slots:{default:[Ya]},$$scope:{ctx:n}}})).$on("click",(function(){D(n[10])&&n[10].apply(this,arguments)})),f=new Ii({props:{href:"/settings/conversation",class:"btn is-secondary",$$slots:{default:[Ja]},$$scope:{ctx:n}}}),{c:function(){t=Z("h2"),e=X(d),r=nn(),o=Z("p"),i=X(p),a=nn(),c=Z("p"),nt(u.$$.fragment),s=nn(),nt(f.$$.fragment)},m:function(n,d){J(n,t,d),Y(t,e),J(n,r,d),J(n,o,d),Y(o,i),J(n,a,d),J(n,c,d),tt(u,c,null),Y(c,s),tt(f,c,null),l=!0},p:function(t,r){n=t,(!l||2048&r[0])&&d!==(d=n[11]("You are not part of this conversation.")+"")&&cn(e,d),(!l||2056&r[0])&&p!==(p=n[11]('Do you want to chat with "%1"?',n[3].name)+"")&&cn(i,p);var o={};8&r[0]&&(o.href="#action:join:"+n[3].name),2048&r[0]|2048&r[1]&&(o.$$scope={dirty:r,ctx:n}),u.$set(o);var a={};2048&r[0]|2048&r[1]&&(a.$$scope={dirty:r,ctx:n}),f.$set(a)},i:function(n){l||(Gn(u.$$.fragment,n),Gn(f.$$.fragment,n),l=!0)},o:function(n){Yn(u.$$.fragment,n),Yn(f.$$.fragment,n),l=!1},d:function(n){n&&V(t),n&&V(r),n&&V(o),n&&V(a),n&&V(c),et(u),et(f)}}}function Ka(n){var t,e,r,o,i,a,c,u,s,f,l,d=n[11]("Connection does not exist.")+"",p=n[11]('Do you want to create the connection "%1"?',n[12].connection_id)+"";return u=new Ii({props:{href:"/settings/connections?uri="+encodeURIComponent(n[19](n[3])),class:"btn",$$slots:{default:[Va]},$$scope:{ctx:n}}}),f=new Ii({props:{href:"/settings/connections",class:"btn is-secondary",$$slots:{default:[Qa]},$$scope:{ctx:n}}}),{c:function(){t=Z("h2"),e=X(d),r=nn(),o=Z("p"),i=X(p),a=nn(),c=Z("p"),nt(u.$$.fragment),s=nn(),nt(f.$$.fragment)},m:function(n,d){J(n,t,d),Y(t,e),J(n,r,d),J(n,o,d),Y(o,i),J(n,a,d),J(n,c,d),tt(u,c,null),Y(c,s),tt(f,c,null),l=!0},p:function(n,t){(!l||2048&t[0])&&d!==(d=n[11]("Connection does not exist.")+"")&&cn(e,d),(!l||6144&t[0])&&p!==(p=n[11]('Do you want to create the connection "%1"?',n[12].connection_id)+"")&&cn(i,p);var r={};8&t[0]&&(r.href="/settings/connections?uri="+encodeURIComponent(n[19](n[3]))),2048&t[0]|2048&t[1]&&(r.$$scope={dirty:t,ctx:n}),u.$set(r);var o={};2048&t[0]|2048&t[1]&&(o.$$scope={dirty:t,ctx:n}),f.$set(o)},i:function(n){l||(Gn(u.$$.fragment,n),Gn(f.$$.fragment,n),l=!0)},o:function(n){Yn(u.$$.fragment,n),Yn(f.$$.fragment,n),l=!1},d:function(n){n&&V(t),n&&V(r),n&&V(o),n&&V(a),n&&V(c),et(u),et(f)}}}function Wa(n){var t,e,r,o,i,a=n[11]("Yes")+"";return t=new $t({props:{name:"thumbs-up"}}),{c:function(){nt(t.$$.fragment),e=nn(),r=Z("span"),o=X(a)},m:function(n,a){tt(t,n,a),J(n,e,a),J(n,r,a),Y(r,o),i=!0},p:function(n,t){(!i||2048&t[0])&&a!==(a=n[11]("Yes")+"")&&cn(o,a)},i:function(n){i||(Gn(t.$$.fragment,n),i=!0)},o:function(n){Yn(t.$$.fragment,n),i=!1},d:function(n){et(t,n),n&&V(e),n&&V(r)}}}function Ga(n){var t,e,r,o,i,a=n[11]("No")+"";return t=new $t({props:{name:"thumbs-down"}}),{c:function(){nt(t.$$.fragment),e=nn(),r=Z("span"),o=X(a)},m:function(n,a){tt(t,n,a),J(n,e,a),J(n,r,a),Y(r,o),i=!0},p:function(n,t){(!i||2048&t[0])&&a!==(a=n[11]("No")+"")&&cn(o,a)},i:function(n){i||(Gn(t.$$.fragment,n),i=!0)},o:function(n){Yn(t.$$.fragment,n),i=!1},d:function(n){et(t,n),n&&V(e),n&&V(r)}}}function Ya(n){var t,e,r,o,i,a=n[11]("Yes")+"";return t=new $t({props:{name:"thumbs-up"}}),{c:function(){nt(t.$$.fragment),e=nn(),r=Z("span"),o=X(a)},m:function(n,a){tt(t,n,a),J(n,e,a),J(n,r,a),Y(r,o),i=!0},p:function(n,t){(!i||2048&t[0])&&a!==(a=n[11]("Yes")+"")&&cn(o,a)},i:function(n){i||(Gn(t.$$.fragment,n),i=!0)},o:function(n){Yn(t.$$.fragment,n),i=!1},d:function(n){et(t,n),n&&V(e),n&&V(r)}}}function Ja(n){var t,e,r,o,i,a=n[11]("No")+"";return t=new $t({props:{name:"thumbs-down"}}),{c:function(){nt(t.$$.fragment),e=nn(),r=Z("span"),o=X(a)},m:function(n,a){tt(t,n,a),J(n,e,a),J(n,r,a),Y(r,o),i=!0},p:function(n,t){(!i||2048&t[0])&&a!==(a=n[11]("No")+"")&&cn(o,a)},i:function(n){i||(Gn(t.$$.fragment,n),i=!0)},o:function(n){Yn(t.$$.fragment,n),i=!1},d:function(n){et(t,n),n&&V(e),n&&V(r)}}}function Va(n){var t,e,r,o,i=n[11]("Yes")+"";return t=new $t({props:{name:"thumbs-up"}}),{c:function(){nt(t.$$.fragment),e=nn(),r=X(i)},m:function(n,i){tt(t,n,i),J(n,e,i),J(n,r,i),o=!0},p:function(n,t){(!o||2048&t[0])&&i!==(i=n[11]("Yes")+"")&&cn(r,i)},i:function(n){o||(Gn(t.$$.fragment,n),o=!0)},o:function(n){Yn(t.$$.fragment,n),o=!1},d:function(n){et(t,n),n&&V(e),n&&V(r)}}}function Qa(n){var t,e,r,o,i=n[11]("No")+"";return t=new $t({props:{name:"thumbs-down"}}),{c:function(){nt(t.$$.fragment),e=nn(),r=X(i)},m:function(n,i){tt(t,n,i),J(n,e,i),J(n,r,i),o=!0},p:function(n,t){(!o||2048&t[0])&&i!==(i=n[11]("No")+"")&&cn(r,i)},i:function(n){o||(Gn(t.$$.fragment,n),o=!0)},o:function(n){Yn(t.$$.fragment,n),o=!1},d:function(n){et(t,n),n&&V(e),n&&V(r)}}}function Za(n){var t,e,r,o,i,a,c,u=n[11]("Loading...")+"";return r=new $t({props:{name:"spinner",animation:"spin"}}),{c:function(){t=Z("div"),e=Z("span"),nt(r.$$.fragment),o=nn(),i=Z("i"),a=X(u),on(t,"class","message__status-line for-loading has-pos-bottom")},m:function(n,u){J(n,t,u),Y(t,e),tt(r,e,null),Y(e,o),Y(e,i),Y(i,a),c=!0},p:function(n,t){(!c||2048&t[0])&&u!==(u=n[11]("Loading...")+"")&&cn(a,u)},i:function(n){c||(Gn(r.$$.fragment,n),c=!0)},o:function(n){Yn(r.$$.fragment,n),c=!1},d:function(n){n&&V(t),et(r)}}}function Xa(n){var t,e,r,o,i,a,c,u=n[11]("Jump to %1",n[6].format("%b %e %H:%M"))+"";return r=new $t({props:{name:"external-link-alt"}}),{c:function(){t=Z("div"),e=Z("a"),nt(r.$$.fragment),o=nn(),i=X(u),on(e,"href",a=n[1].path),on(t,"class","message__status-line for-jump-to-now")},m:function(n,a){J(n,t,a),Y(t,e),tt(r,e,null),Y(e,o),Y(e,i),c=!0},p:function(n,t){(!c||2112&t[0])&&u!==(u=n[11]("Jump to %1",n[6].format("%b %e %H:%M"))+"")&&cn(i,u),(!c||2&t[0]&&a!==(a=n[1].path))&&on(e,"href",a)},i:function(n){c||(Gn(r.$$.fragment,n),c=!0)},o:function(n){Yn(r.$$.fragment,n),c=!1},d:function(n){n&&V(t),et(r)}}}function nc(n){for(var t,e,r,o,i,a,c,u,s,f,l,d,p,m,h,g,v=n[15].length<10&&!n[3].is("not_found"),$=n[3].is("loading")&&n[15].length>10,y=n[3].historyStartAt&&!n[3].is("not_found")&&n[15].length,b=n[3].is("loading"),w=v&&Ea(n),_=$&&Ra(n),k=y&&Aa(n),x=n[15].render(),E=[],S=0;S<x.length;S+=1)E[S]=Ha($a(n,x,S));var O=function(n){return Yn(E[n],1,1,(function(){E[n]=null}))},C=[Ka,Fa,qa,za,Ba],N=[];function R(n,t){return 4096&t[0]&&(i=!!n[12].is("not_found")),i?0:(8&t[0]&&(a=!!n[3].is("not_found")),a?1:(4096&t[0]&&(c=!(n[12].is("unreachable")||!n[12].frozen)),c?2:(8&t[0]&&(u=!(!n[3].frozen||!n[3].is("pending"))),u?3:(8&t[0]&&(s=!(!n[3].frozen||n[3].is("locked"))),s?4:-1))))}~(f=R(n,[-1]))&&(l=N[f]=C[f](n));var A=null===co.wantNotifications&&function(n){var t,e,r,o,i,a,c=n[16]('Go to "[account settings](%1)" to enable or disable notifications.',"/settings/account")+"";return r=new $t({props:{name:"info-circle"}}),{c:function(){t=Z("div"),e=Z("div"),nt(r.$$.fragment),o=nn(),i=new mn(null),on(e,"class","message__text"),on(t,"class","message is-highlighted")},m:function(n,u){J(n,t,u),Y(t,e),tt(r,e,null),Y(e,o),i.m(c,e),a=!0},p:function(n,t){(!a||65536&t[0])&&c!==(c=n[16]('Go to "[account settings](%1)" to enable or disable notifications.',"/settings/account")+"")&&i.p(c)},i:function(n){a||(Gn(r.$$.fragment,n),a=!0)},o:function(n){Yn(r.$$.fragment,n),a=!1},d:function(n){n&&V(t),et(r)}}}(n),D=b&&Za(n),j=!n[3].historyStopAt&&n[15].length&&Xa(n);return{c:function(){w&&w.c(),t=nn(),_&&_.c(),e=nn(),k&&k.c(),r=nn();for(var n=0;n<E.length;n+=1)E[n].c();o=nn(),l&&l.c(),d=nn(),A&&A.c(),p=nn(),D&&D.c(),m=nn(),j&&j.c(),h=tn()},m:function(n,i){w&&w.m(n,i),J(n,t,i),_&&_.m(n,i),J(n,e,i),k&&k.m(n,i),J(n,r,i);for(var a=0;a<E.length;a+=1)E[a].m(n,i);J(n,o,i),~f&&N[f].m(n,i),J(n,d,i),A&&A.m(n,i),J(n,p,i),D&&D.m(n,i),J(n,m,i),j&&j.m(n,i),J(n,h,i),g=!0},p:function(n,i){if(32776&i[0]&&(v=n[15].length<10&&!n[3].is("not_found")),v?w?(w.p(n,i),32776&i[0]&&Gn(w,1)):((w=Ea(n)).c(),Gn(w,1),w.m(t.parentNode,t)):w&&(Kn(),Yn(w,1,1,(function(){w=null})),Wn()),32776&i[0]&&($=n[3].is("loading")&&n[15].length>10),$?_?(_.p(n,i),32776&i[0]&&Gn(_,1)):((_=Ra(n)).c(),Gn(_,1),_.m(e.parentNode,e)):_&&(Kn(),Yn(_,1,1,(function(){_=null})),Wn()),32776&i[0]&&(y=n[3].historyStartAt&&!n[3].is("not_found")&&n[15].length),y?k?(k.p(n,i),32776&i[0]&&Gn(k,1)):((k=Aa(n)).c(),Gn(k,1),k.m(r.parentNode,r)):k&&(Kn(),Yn(k,1,1,(function(){k=null})),Wn()),166920&i[0]){var a;for(x=n[15].render(),a=0;a<x.length;a+=1){var c=$a(n,x,a);E[a]?(E[a].p(c,i),Gn(E[a],1)):(E[a]=Ha(c),E[a].c(),Gn(E[a],1),E[a].m(o.parentNode,o))}for(Kn(),a=x.length;a<E.length;a+=1)O(a);Wn()}var u=f;(f=R(n,i))===u?~f&&N[f].p(n,i):(l&&(Kn(),Yn(N[u],1,1,(function(){N[u]=null})),Wn()),~f?((l=N[f])?l.p(n,i):(l=N[f]=C[f](n)).c(),Gn(l,1),l.m(d.parentNode,d)):l=null),null===co.wantNotifications&&A.p(n,i),8&i[0]&&(b=n[3].is("loading")),b?D?(D.p(n,i),8&i[0]&&Gn(D,1)):((D=Za(n)).c(),Gn(D,1),D.m(m.parentNode,m)):D&&(Kn(),Yn(D,1,1,(function(){D=null})),Wn()),!n[3].historyStopAt&&n[15].length?j?(j.p(n,i),32776&i[0]&&Gn(j,1)):((j=Xa(n)).c(),Gn(j,1),j.m(h.parentNode,h)):j&&(Kn(),Yn(j,1,1,(function(){j=null})),Wn())},i:function(n){if(!g){Gn(w),Gn(_),Gn(k);for(var t=0;t<x.length;t+=1)Gn(E[t]);Gn(l),Gn(A),Gn(D),Gn(j),g=!0}},o:function(n){Yn(w),Yn(_),Yn(k),E=E.filter(Boolean);for(var t=0;t<E.length;t+=1)Yn(E[t]);Yn(l),Yn(A),Yn(D),Yn(j),g=!1},d:function(n){w&&w.d(n),n&&V(t),_&&_.d(n),n&&V(e),k&&k.d(n),n&&V(r),Q(E,n),n&&V(o),~f&&N[f].d(n),n&&V(d),A&&A.d(n),n&&V(p),D&&D.d(n),n&&V(m),j&&j.d(n),n&&V(h)}}}function tc(n){for(var t,e,r,o,i,a,c,u,s,f,l=n[11]("Participants (%1)",n[17].length)+"",d=n[17].toArray(),p=[],m=0;m<d.length;m+=1)p[m]=ec(va(n,d,m));var h=function(n){return Yn(p[n],1,1,(function(){p[n]=null}))};return{c:function(){t=Z("div"),e=Z("nav"),r=Z("h3"),o=X(l),i=nn();for(var n=0;n<p.length;n+=1)p[n].c();a=nn(),c=Z("nav"),on(e,"class","sidebar-right__nav"),on(t,"class","sidebar-right")},m:function(l,d){J(l,t,d),Y(t,e),Y(e,r),Y(r,o),Y(e,i);for(var m=0;m<p.length;m+=1)p[m].m(e,null);Y(e,a),Y(e,c),u=!0,s||(f=en(e,"click",(function(){D(n[10])&&n[10].apply(this,arguments)})),s=!0)},p:function(t,r){if(n=t,(!u||133120&r[0])&&l!==(l=n[11]("Participants (%1)",n[17].length)+"")&&cn(o,l),131072&r[0]){var i;for(d=n[17].toArray(),i=0;i<d.length;i+=1){var c=va(n,d,i);p[i]?(p[i].p(c,r),Gn(p[i],1)):(p[i]=ec(c),p[i].c(),Gn(p[i],1),p[i].m(e,a))}for(Kn(),i=d.length;i<p.length;i+=1)h(i);Wn()}},i:function(n){if(!u){for(var t=0;t<d.length;t+=1)Gn(p[t]);u=!0}},o:function(n){p=p.filter(Boolean);for(var t=0;t<p.length;t+=1)Yn(p[t]);u=!1},d:function(n){n&&V(t),Q(p,n),s=!1,f()}}}function ec(n){var t,e,r,o,i,a,c,u,s=n[32].nick+"";return e=new $t({props:{name:"pick:"+n[32].id,family:"solid",color:n[32].color}}),{c:function(){t=Z("a"),nt(e.$$.fragment),r=nn(),o=Z("span"),i=X(s),on(t,"href",a="#action:join:"+n[32].id),on(t,"class",c="participant "+Ut(n[32].modes))},m:function(n,a){J(n,t,a),tt(e,t,null),Y(t,r),Y(t,o),Y(o,i),u=!0},p:function(n,r){var o={};131072&r[0]&&(o.name="pick:"+n[32].id),131072&r[0]&&(o.color=n[32].color),e.$set(o),(!u||131072&r[0])&&s!==(s=n[32].nick+"")&&cn(i,s),(!u||131072&r[0]&&a!==(a="#action:join:"+n[32].id))&&on(t,"href",a),(!u||131072&r[0]&&c!==(c="participant "+Ut(n[32].modes)))&&on(t,"class",c)},i:function(n){u||(Gn(e.$$.fragment,n),u=!0)},o:function(n){Yn(e.$$.fragment,n),u=!1},d:function(n){n&&V(t),et(e)}}}function rc(n){var t,e,r,o,i,a,c,u,s,f,l=n[14].nColumns>2&&n[17].length&&!n[3].is("not_found");t=new ye({props:{$$slots:{default:[wa]},$$scope:{ctx:n}}});var d="settings"==n[13]&&_a(n);function p(t){n[25](t)}(o=new ha({props:{class:"main is-above-chat-input",$$slots:{default:[nc]},$$scope:{ctx:n}}})).$on("scrolled",(function(){D(n[8])&&n[8].apply(this,arguments)})),o.$on("visibility",(function(){D(n[9])&&n[9].apply(this,arguments)}));var m={conversation:n[1]};void 0!==n[7]&&(m.uploader=n[7]),a=new _r({props:m}),Cn.push((function(){return Xn(a,"uploader",p)}));var h=l&&tc(n);return{c:function(){nt(t.$$.fragment),e=nn(),d&&d.c(),r=nn(),nt(o.$$.fragment),i=nn(),nt(a.$$.fragment),u=nn(),h&&h.c(),s=tn()},m:function(n,c){tt(t,n,c),J(n,e,c),d&&d.m(n,c),J(n,r,c),tt(o,n,c),J(n,i,c),tt(a,n,c),J(n,u,c),h&&h.m(n,c),J(n,s,c),f=!0},p:function(e,i){n=e;var u={};14346&i[0]|2048&i[1]&&(u.$$scope={dirty:i,ctx:n}),t.$set(u),"settings"==n[13]?d?(d.p(n,i),8192&i[0]&&Gn(d,1)):((d=_a(n)).c(),Gn(d,1),d.m(r.parentNode,r)):d&&(Kn(),Yn(d,1,1,(function(){d=null})),Wn());var f={};236618&i[0]|2048&i[1]&&(f.$$scope={dirty:i,ctx:n}),o.$set(f);var p={};2&i[0]&&(p.conversation=n[1]),!c&&128&i[0]&&(c=!0,p.uploader=n[7],Pn((function(){return c=!1}))),a.$set(p),147464&i[0]&&(l=n[14].nColumns>2&&n[17].length&&!n[3].is("not_found")),l?h?(h.p(n,i),147464&i[0]&&Gn(h,1)):((h=tc(n)).c(),Gn(h,1),h.m(s.parentNode,s)):h&&(Kn(),Yn(h,1,1,(function(){h=null})),Wn())},i:function(n){f||(Gn(t.$$.fragment,n),Gn(d),Gn(o.$$.fragment,n),Gn(a.$$.fragment,n),Gn(h),f=!0)},o:function(n){Yn(t.$$.fragment,n),Yn(d),Yn(o.$$.fragment,n),Yn(a.$$.fragment,n),Yn(h),f=!1},d:function(n){et(t,n),n&&V(e),d&&d.d(n),n&&V(r),et(o,n),n&&V(i),et(a,n),n&&V(u),h&&h.d(n),n&&V(s)}}}function oc(n,t,e){var r,o,i,a,c,u,s,f,l,d,p,m,h,g=O,v=function(){return g(),g=T(L,(function(n){return e(3,c=n)})),L},$=O,y=function(){return $(),$=T(j,(function(n){return e(12,f=n)})),j},b=O,w=function(){return b(),b=T(M,(function(n){return e(15,p=n)})),M},_=O,k=function(){return _(),_=T(I,(function(n){return e(17,h=n)})),I};P(n,Ae,(function(n){return e(24,u=n)})),P(n,Be,(function(n){return e(11,s=n)})),P(n,de,(function(n){return e(13,l=n)})),P(n,pe,(function(n){return e(14,d=n)})),P(n,ze,(function(n){return e(16,m=n)})),n.$$.on_destroy.push((function(){return g()})),n.$$.on_destroy.push((function(){return $()})),n.$$.on_destroy.push((function(){return b()})),n.$$.on_destroy.push((function(){return _()}));var x=t.connection_id,E=void 0===x?"":x,S=t.conversation_id,C=void 0===S?"":S,N=t.title,R=void 0===N?"Chat":N,A=new la,D=(En("socket"),En("user"));P(n,D,(function(n){return e(23,a=n)}));var j=D.notifications;y();var L=D.notifications;v();var M=L.messages;w();var I=L.participants;k();var U,H=new re,B="",z={};function q(n){var t;if(n.activeConversation!=L)return z.conversation&&z.conversation(),z.markAsRead&&z.markAsRead(),v(e(1,L=n.activeConversation)),w(e(2,M=L.messages)),k(e(5,I=L.participants)),y(e(4,j=n.findConversation({connection_id:L.connection_id})||L)),e(6,H=new re),z.conversation=L.subscribe((function(n){v(e(1,L=n))})),z.markAsRead=L.markAsRead.bind(L),e(22,(t=Ae.hash,B=!!String(t||"").match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)&&Ae.hash||"")),B?L.load({around:B}):L.historyStopAt?void 0:L.load({around:H.toISOString()})}return _n((function(){A.attach(document.querySelector(".main"),U)})),kn((function(){Object.keys(z).forEach((function(n){return z[n]()})),A.detach()})),n.$$set=function(n){"connection_id"in n&&e(21,E=n.connection_id),"conversation_id"in n&&e(0,C=n.conversation_id),"title"in n&&e(20,R=n.title)},n.$$.update=function(){2097153&n.$$.dirty[0]&&function(n,t){L.connection_id==n&&L.conversation_id==t||D.setActiveConversation({connection_id:n,conversation_id:t})}(E,C),8388608&n.$$.dirty[0]&&q(a),8388612&n.$$.dirty[0]&&M.update({expandUrlToMedia:a.expandUrlToMedia}),8&n.$$.dirty[0]&&!!c.frozen,8&n.$$.dirty[0]&&e(20,R=c.title),16777226&n.$$.dirty[0]&&(u.hash||c.historyStopAt||L.load({})),2&n.$$.dirty[0]&&e(8,r=Qe("onInfinityScrolled",{conversation:L})),4194306&n.$$.dirty[0]&&e(9,o=Qe("onInfinityVisibility",{conversation:L,onLoadHash:B})),2&n.$$.dirty[0]&&e(10,i=Qe("onMessageClick",{conversation:L,user:D}))},[C,L,M,c,j,I,H,U,r,o,i,s,f,l,d,p,m,h,D,function(){var n=c.connection_id.split("-"),t=st(n,2);return t[0]+"://"+t[1]+"/"+encodeURIComponent(c.conversation_id)+"?tls=1"},R,E,B,a,u,function(n){e(7,U=n)}]}var ic=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(ga()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,oc,rc,j,{connection_id:21,conversation_id:0,title:20},[-1,-1]),t}return i}(it);function ac(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function cc(n){var t,e=n[3]("Loading...")+"";return{c:function(){t=X(e)},m:function(n,e){J(n,t,e)},p:function(n,r){8&r&&e!==(e=n[3]("Loading...")+"")&&cn(t,e)},d:function(n){n&&V(t)}}}function uc(n){var t,e,r=n[3](n[2].error())+"";return{c:function(){t=Z("div"),e=X(r),on(t,"class","error")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){12&t&&r!==(r=n[3](n[2].error())+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function sc(n){var t,e,r,o;function i(n,t){return(null==r||4&t)&&(r=!!n[2].is("error")),r?uc:((null==o||4&t)&&(o=!!n[2].is("loading")),o?cc:void 0)}var a=i(n,-1),c=a&&a(n);return{c:function(){t=Z("tr"),e=Z("td"),c&&c.c(),on(e,"colspan",n[0])},m:function(n,r){J(n,t,r),Y(t,e),c&&c.m(e,null)},p:function(n,t){var r=st(t,1)[0];a===(a=i(n,r))&&c?c.p(n,r):(c&&c.d(1),(c=a&&a(n))&&(c.c(),c.m(e,null))),1&r&&on(e,"colspan",n[0])},i:O,o:O,d:function(n){n&&V(t),c&&c.d()}}}function fc(n,t,e){var r,o,i=O,a=function(){return i(),i=T(s,(function(n){return e(2,r=n)})),s};P(n,Be,(function(n){return e(3,o=n)})),n.$$.on_destroy.push((function(){return i()}));var c=t.colspan,u=void 0===c?1:c,s=t.op;return a(),n.$$set=function(n){"colspan"in n&&e(0,u=n.colspan),"op"in n&&a(e(1,s=n.op))},[u,s,r,o]}var lc=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(ac()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,fc,sc,j,{colspan:0,op:1}),t}return i}(it);function dc(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function pc(n,t,e){var r=n.slice();return r[9]=t[e],r}function mc(n,t,e){var r=n.slice();return r[12]=t[e],r}function hc(n){var t,e,r=n[2]("Connections")+"";return{c:function(){t=Z("h1"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){4&t&&r!==(r=n[2]("Connections")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function gc(n){var t,e=n[12].host.replace(/:\d+$/,"")+"";return{c:function(){t=X(e)},m:function(n,e){J(n,t,e)},p:function(n,r){1&r&&e!==(e=n[12].host.replace(/:\d+$/,"")+"")&&cn(t,e)},d:function(n){n&&V(t)}}}function vc(n){var t,e,r,o,i,a,c,u,s,f,l,d=(Mt.true(n[12].tls_verify)?n[2]("Strict"):Mt.true(n[12].tls)?n[2]("Yes"):n[2]("No"))+"",p=n[12].nick+"";return r=new Ii({props:{href:"/settings/connection/"+n[12].connection_id,$$slots:{default:[gc]},$$scope:{ctx:n}}}),{c:function(){t=Z("tr"),e=Z("td"),nt(r.$$.fragment),o=nn(),i=Z("td"),a=X(d),c=nn(),u=Z("td"),s=X(p),f=nn()},m:function(n,d){J(n,t,d),Y(t,e),tt(r,e,null),Y(t,o),Y(t,i),Y(i,a),Y(t,c),Y(t,u),Y(u,s),Y(t,f),l=!0},p:function(n,t){var e={};1&t&&(e.href="/settings/connection/"+n[12].connection_id),32769&t&&(e.$$scope={dirty:t,ctx:n}),r.$set(e),(!l||5&t)&&d!==(d=(Mt.true(n[12].tls_verify)?n[2]("Strict"):Mt.true(n[12].tls)?n[2]("Yes"):n[2]("No"))+"")&&cn(a,d),(!l||1&t)&&p!==(p=n[12].nick+"")&&cn(s,p)},i:function(n){l||(Gn(r.$$.fragment,n),l=!0)},o:function(n){Yn(r.$$.fragment,n),l=!1},d:function(n){n&&V(t),et(r)}}}function $c(n){var t,e,r;return e=new Ii({props:{href:"/settings/connection/add",class:"btn",$$slots:{default:[yc]},$$scope:{ctx:n}}}),{c:function(){t=Z("div"),nt(e.$$.fragment),on(t,"class","form-actions")},m:function(n,o){J(n,t,o),tt(e,t,null),r=!0},p:function(n,t){var r={};32772&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){r||(Gn(e.$$.fragment,n),r=!0)},o:function(n){Yn(e.$$.fragment,n),r=!1},d:function(n){n&&V(t),et(e)}}}function yc(n){var t,e,r,o,i,a=n[2]("Add")+"";return t=new $t({props:{name:"plus-circle"}}),{c:function(){nt(t.$$.fragment),e=nn(),r=Z("span"),o=X(a)},m:function(n,a){tt(t,n,a),J(n,e,a),J(n,r,a),Y(r,o),i=!0},p:function(n,t){(!i||4&t)&&a!==(a=n[2]("Add")+"")&&cn(o,a)},i:function(n){i||(Gn(t.$$.fragment,n),i=!0)},o:function(n){Yn(t.$$.fragment,n),i=!1},d:function(n){et(t,n),n&&V(e),n&&V(r)}}}function bc(n){var t,e=n[9].url.host.replace(/:\d+$/,"")+"";return{c:function(){t=X(e)},m:function(n,e){J(n,t,e)},p:function(n,r){8&r&&e!==(e=n[9].url.host.replace(/:\d+$/,"")+"")&&cn(t,e)},d:function(n){n&&V(t)}}}function wc(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,m,h=(Mt.true(n[9].tls_verify)?n[2]("Strict"):Mt.true(n[9].tls)?n[2]("Yes"):n[2]("No"))+"",g=(n[9].is_default?n[2]("Yes"):n[2]("No"))+"",v=(n[9].is_forced?n[2]("Yes"):n[2]("No"))+"";return r=new Ii({props:{href:"/settings/connection-profile/"+n[9].id,$$slots:{default:[bc]},$$scope:{ctx:n}}}),{c:function(){t=Z("tr"),e=Z("td"),nt(r.$$.fragment),o=nn(),i=Z("td"),a=X(h),c=nn(),u=Z("td"),s=X(g),f=nn(),l=Z("td"),d=X(v),p=nn()},m:function(n,h){J(n,t,h),Y(t,e),tt(r,e,null),Y(t,o),Y(t,i),Y(i,a),Y(t,c),Y(t,u),Y(u,s),Y(t,f),Y(t,l),Y(l,d),Y(t,p),m=!0},p:function(n,t){var e={};8&t&&(e.href="/settings/connection-profile/"+n[9].id),32776&t&&(e.$$scope={dirty:t,ctx:n}),r.$set(e),(!m||12&t)&&h!==(h=(Mt.true(n[9].tls_verify)?n[2]("Strict"):Mt.true(n[9].tls)?n[2]("Yes"):n[2]("No"))+"")&&cn(a,h),(!m||12&t)&&g!==(g=(n[9].is_default?n[2]("Yes"):n[2]("No"))+"")&&cn(s,g),(!m||12&t)&&v!==(v=(n[9].is_forced?n[2]("Yes"):n[2]("No"))+"")&&cn(d,v)},i:function(n){m||(Gn(r.$$.fragment,n),m=!0)},o:function(n){Yn(r.$$.fragment,n),m=!1},d:function(n){n&&V(t),et(r)}}}function _c(n){var t,e,r;return e=new Ii({props:{href:"/settings/connection-profile/add",class:"btn",$$slots:{default:[kc]},$$scope:{ctx:n}}}),{c:function(){t=Z("div"),nt(e.$$.fragment),on(t,"class","form-actions")},m:function(n,o){J(n,t,o),tt(e,t,null),r=!0},p:function(n,t){var r={};32772&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){r||(Gn(e.$$.fragment,n),r=!0)},o:function(n){Yn(e.$$.fragment,n),r=!1},d:function(n){n&&V(t),et(e)}}}function kc(n){var t,e,r,o,i,a=n[2]("Add")+"";return t=new $t({props:{name:"plus-circle"}}),{c:function(){nt(t.$$.fragment),e=nn(),r=Z("span"),o=X(a)},m:function(n,a){tt(t,n,a),J(n,e,a),J(n,r,a),Y(r,o),i=!0},p:function(n,t){(!i||4&t)&&a!==(a=n[2]("Add")+"")&&cn(o,a)},i:function(n){i||(Gn(t.$$.fragment,n),i=!0)},o:function(n){Yn(t.$$.fragment,n),i=!1},d:function(n){et(t,n),n&&V(e),n&&V(r)}}}function xc(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,m,h,g,v,$,y,b,w,_,k,x,E,S,O,C,N,R,A,D,j,T,L,P,M,I,U,H,B,z,q,F,K,W,G,tn=n[2]("Connections")+"",en=n[2]("Host")+"",rn=n[2]("Secure")+"",an=n[2]("Nick")+"",un=n[2]("Connection profiles")+"",sn=n[2]("Connection profiles are used to set up global values for every connection that connect to the same host.")+"",fn=n[2]("Host")+"",ln=n[2]("Secure")+"",dn=n[2]("Default")+"",pn=n[2]("Forced")+"";t=new ye({props:{$$slots:{default:[hc]},$$scope:{ctx:n}}});for(var mn=n[0],hn=[],gn=0;gn<mn.length;gn+=1)hn[gn]=vc(mc(n,mn,gn));var vn=function(n){return Yn(hn[n],1,1,(function(){hn[n]=null}))},$n=n[1]&&$c(n);F=new lc({props:{op:n[5].op}});for(var yn=n[3].search(),bn=[],wn=0;wn<yn.length;wn+=1)bn[wn]=wc(pc(n,yn,wn));var _n=function(n){return Yn(bn[n],1,1,(function(){bn[n]=null}))},kn=n[1]&&_c(n);return{c:function(){nt(t.$$.fragment),e=nn(),r=Z("main"),o=Z("h2"),i=X(tn),a=nn(),c=Z("table"),u=Z("thead"),s=Z("tr"),f=Z("th"),l=X(en),d=nn(),p=Z("th"),m=X(rn),h=nn(),g=Z("th"),v=X(an),$=nn(),y=Z("tbody");for(var n=0;n<hn.length;n+=1)hn[n].c();b=nn(),$n&&$n.c(),w=nn(),_=Z("h2"),k=X(un),x=nn(),E=Z("p"),S=X(sn),O=nn(),C=Z("table"),N=Z("thead"),R=Z("tr"),A=Z("th"),D=X(fn),j=nn(),T=Z("th"),L=X(ln),P=nn(),M=Z("th"),I=X(dn),U=nn(),H=Z("th"),B=X(pn),z=nn(),q=Z("tbody"),nt(F.$$.fragment),K=nn();for(var G=0;G<bn.length;G+=1)bn[G].c();W=nn(),kn&&kn.c(),on(r,"class","main")},m:function(n,V){tt(t,n,V),J(n,e,V),J(n,r,V),Y(r,o),Y(o,i),Y(r,a),Y(r,c),Y(c,u),Y(u,s),Y(s,f),Y(f,l),Y(s,d),Y(s,p),Y(p,m),Y(s,h),Y(s,g),Y(g,v),Y(c,$),Y(c,y);for(var Q=0;Q<hn.length;Q+=1)hn[Q].m(y,null);Y(r,b),$n&&$n.m(r,null),Y(r,w),Y(r,_),Y(_,k),Y(r,x),Y(r,E),Y(E,S),Y(r,O),Y(r,C),Y(C,N),Y(N,R),Y(R,A),Y(A,D),Y(R,j),Y(R,T),Y(T,L),Y(R,P),Y(R,M),Y(M,I),Y(R,U),Y(R,H),Y(H,B),Y(C,z),Y(C,q),tt(F,q,null),Y(q,K);for(var Z=0;Z<bn.length;Z+=1)bn[Z].m(q,null);Y(r,W),kn&&kn.m(r,null),G=!0},p:function(n,e){var o=st(e,1)[0],a={};if(32772&o&&(a.$$scope={dirty:o,ctx:n}),t.$set(a),(!G||4&o)&&tn!==(tn=n[2]("Connections")+"")&&cn(i,tn),(!G||4&o)&&en!==(en=n[2]("Host")+"")&&cn(l,en),(!G||4&o)&&rn!==(rn=n[2]("Secure")+"")&&cn(m,rn),(!G||4&o)&&an!==(an=n[2]("Nick")+"")&&cn(v,an),5&o){var c;for(mn=n[0],c=0;c<mn.length;c+=1){var u=mc(n,mn,c);hn[c]?(hn[c].p(u,o),Gn(hn[c],1)):(hn[c]=vc(u),hn[c].c(),Gn(hn[c],1),hn[c].m(y,null))}for(Kn(),c=mn.length;c<hn.length;c+=1)vn(c);Wn()}if(n[1]?$n?($n.p(n,o),2&o&&Gn($n,1)):(($n=$c(n)).c(),Gn($n,1),$n.m(r,w)):$n&&(Kn(),Yn($n,1,1,(function(){$n=null})),Wn()),(!G||4&o)&&un!==(un=n[2]("Connection profiles")+"")&&cn(k,un),(!G||4&o)&&sn!==(sn=n[2]("Connection profiles are used to set up global values for every connection that connect to the same host.")+"")&&cn(S,sn),(!G||4&o)&&fn!==(fn=n[2]("Host")+"")&&cn(D,fn),(!G||4&o)&&ln!==(ln=n[2]("Secure")+"")&&cn(L,ln),(!G||4&o)&&dn!==(dn=n[2]("Default")+"")&&cn(I,dn),(!G||4&o)&&pn!==(pn=n[2]("Forced")+"")&&cn(B,pn),12&o){var s;for(yn=n[3].search(),s=0;s<yn.length;s+=1){var f=pc(n,yn,s);bn[s]?(bn[s].p(f,o),Gn(bn[s],1)):(bn[s]=wc(f),bn[s].c(),Gn(bn[s],1),bn[s].m(q,null))}for(Kn(),s=yn.length;s<bn.length;s+=1)_n(s);Wn()}n[1]?kn?(kn.p(n,o),2&o&&Gn(kn,1)):((kn=_c(n)).c(),Gn(kn,1),kn.m(r,null)):kn&&(Kn(),Yn(kn,1,1,(function(){kn=null})),Wn())},i:function(n){if(!G){Gn(t.$$.fragment,n);for(var e=0;e<mn.length;e+=1)Gn(hn[e]);Gn($n),Gn(F.$$.fragment,n);for(var r=0;r<yn.length;r+=1)Gn(bn[r]);Gn(kn),G=!0}},o:function(n){Yn(t.$$.fragment,n),hn=hn.filter(Boolean);for(var e=0;e<hn.length;e+=1)Yn(hn[e]);Yn($n),Yn(F.$$.fragment,n),bn=bn.filter(Boolean);for(var r=0;r<bn.length;r+=1)Yn(bn[r]);Yn(kn),G=!1},d:function(n){et(t,n),n&&V(e),n&&V(r),Q(hn,n),$n&&$n.d(),et(F),Q(bn,n),kn&&kn.d()}}}function Ec(n,t,e){var r,o,i,a;P(n,Be,(function(n){return e(2,i=n)}));var c=En("user");P(n,c,(function(n){return e(7,o=n)}));var u=c.connectionProfiles;P(n,u,(function(n){return e(3,a=n)}));var s=function(n){return n.url.toFields({connection_id:n.connection_id})},f=[];return _n((function(){return u.load()})),n.$$.update=function(){129&n.$$.dirty&&o.is("success")&&!f.length&&e(0,f=c.connections.toArray().map(s))},e(1,r=c.roles.has("admin")),[f,r,i,a,c,u,"Connections",o]}var Sc=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(dc()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,Ec,xc,j,{title:6}),t}return S(i,[{key:"title",get:function(){return this.$$.ctx[6]}}]),i}(it);function Oc(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Cc(n){var t,e,r;return t=new $t({props:{name:"list"}}),e=new $t({props:{name:"times"}}),{c:function(){nt(t.$$.fragment),nt(e.$$.fragment)},m:function(n,o){tt(t,n,o),tt(e,n,o),r=!0},p:O,i:function(n){r||(Gn(t.$$.fragment,n),Gn(e.$$.fragment,n),r=!0)},o:function(n){Yn(t.$$.fragment,n),Yn(e.$$.fragment,n),r=!1},d:function(n){et(t,n),et(e,n)}}}function Nc(n){var t,e,r,o,i,a=("add"==n[0]?n[2]("Add connection profile"):n[2]("Edit connection profile"))+"";return o=new Ii({props:{href:"/settings/connections",class:"btn-hallow is-active","data-tooltip":n[2]("See all connection profiles"),$$slots:{default:[Cc]},$$scope:{ctx:n}}}),{c:function(){t=Z("h1"),e=X(a),r=nn(),nt(o.$$.fragment)},m:function(n,a){J(n,t,a),Y(t,e),J(n,r,a),tt(o,n,a),i=!0},p:function(n,t){(!i||5&t)&&a!==(a=("add"==n[0]?n[2]("Add connection profile"):n[2]("Edit connection profile"))+"")&&cn(e,a);var r={};4&t&&(r["data-tooltip"]=n[2]("See all connection profiles")),16384&t&&(r.$$scope={dirty:t,ctx:n}),o.$set(r)},i:function(n){i||(Gn(o.$$.fragment,n),i=!0)},o:function(n){Yn(o.$$.fragment,n),i=!1},d:function(n){n&&V(t),n&&V(r),et(o,n)}}}function Rc(n){var t,e,r=n[2]("Host and port")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){4&t&&r!==(r=n[2]("Host and port")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Ac(n){var t,e,r=n[2]("Will match connections on hostname.")+"";return{c:function(){t=Z("p"),e=X(r),on(t,"class","help"),on(t,"slot","help")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){4&t&&r!==(r=n[2]("Will match connections on hostname.")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Dc(n){var t,e,r=n[2]("Secure connection (TLS)")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){4&t&&r!==(r=n[2]("Secure connection (TLS)")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function jc(n){var t,e,r=n[2]("Verify certificate (TLS)")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){4&t&&r!==(r=n[2]("Verify certificate (TLS)")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Tc(n){var t,e,r=n[2]("Conversation name")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){4&t&&r!==(r=n[2]("Conversation name")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Lc(n){var t,e,r=n[2]("Service accounts")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){4&t&&r!==(r=n[2]("Service accounts")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Pc(n){var t,e,r=n[2]("Messages from these nicks will be shown in the connection conversation.")+"";return{c:function(){t=Z("p"),e=X(r),on(t,"class","help"),on(t,"slot","help")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){4&t&&r!==(r=n[2]("Messages from these nicks will be shown in the connection conversation.")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Mc(n){var t,e,r=n[2]("Default connection")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){4&t&&r!==(r=n[2]("Default connection")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Ic(n){var t,e,r=n[2]("Force default connection")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){4&t&&r!==(r=n[2]("Force default connection")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Uc(n){var t,e,r,o=n[2]("Tick this box if you want to prevent users from creating custom connections.")+"";return{c:function(){t=Z("p"),e=X(o),on(t,"class","help"),t.hidden=r=!n[3].is_default},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,i){4&i&&o!==(o=n[2]("Tick this box if you want to prevent users from creating custom connections.")+"")&&cn(e,o),8&i&&r!==(r=!n[3].is_default)&&(t.hidden=r)},d:function(n){n&&V(t)}}}function Hc(n){var t,e,r=n[2]("Show advanced settings")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){4&t&&r!==(r=n[2]("Show advanced settings")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Bc(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,m=n[2]("This might result in flood ban.")+"";return e=new Go({props:{name:"max_bulk_message_size",form:n[5],type:"number",readonly:!n[1],$$slots:{help:[qc],label:[zc]},$$scope:{ctx:n}}}),o=new Go({props:{name:"max_message_length",form:n[5],type:"number",readonly:!n[1],$$slots:{help:[Kc],label:[Fc]},$$scope:{ctx:n}}}),a=new Go({props:{name:"webirc_password",form:n[5],type:"password",readonly:!n[1],$$slots:{label:[Wc]},$$scope:{ctx:n}}}),u=new Cr({props:{name:"skip_queue",form:n[5],disabled:!n[1],$$slots:{label:[Gc]},$$scope:{ctx:n}}}),{c:function(){t=Z("div"),nt(e.$$.fragment),r=nn(),nt(o.$$.fragment),i=nn(),nt(a.$$.fragment),c=nn(),nt(u.$$.fragment),s=nn(),f=Z("p"),l=X(m),on(f,"class","help"),on(t,"class","form-group")},m:function(n,d){J(n,t,d),tt(e,t,null),Y(t,r),tt(o,t,null),Y(t,i),tt(a,t,null),Y(t,c),tt(u,t,null),Y(t,s),Y(t,f),Y(f,l),p=!0},p:function(n,t){var r={};2&t&&(r.readonly=!n[1]),16388&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r);var i={};2&t&&(i.readonly=!n[1]),16388&t&&(i.$$scope={dirty:t,ctx:n}),o.$set(i);var c={};2&t&&(c.readonly=!n[1]),16388&t&&(c.$$scope={dirty:t,ctx:n}),a.$set(c);var s={};2&t&&(s.disabled=!n[1]),16388&t&&(s.$$scope={dirty:t,ctx:n}),u.$set(s),(!p||4&t)&&m!==(m=n[2]("This might result in flood ban.")+"")&&cn(l,m)},i:function(n){p||(Gn(e.$$.fragment,n),Gn(o.$$.fragment,n),Gn(a.$$.fragment,n),Gn(u.$$.fragment,n),Ln((function(){d||(d=Vn(t,fr,{duration:150},!0)),d.run(1)})),p=!0)},o:function(n){Yn(e.$$.fragment,n),Yn(o.$$.fragment,n),Yn(a.$$.fragment,n),Yn(u.$$.fragment,n),d||(d=Vn(t,fr,{duration:150},!1)),d.run(0),p=!1},d:function(n){n&&V(t),et(e),et(o),et(a),et(u),n&&d&&d.end()}}}function zc(n){var t,e,r=n[2]("Max number of pasted lines")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){4&t&&r!==(r=n[2]("Max number of pasted lines")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function qc(n){var t,e,r=n[2]("Setting this value too high might get you banned from the server.")+"";return{c:function(){t=Z("p"),e=X(r),on(t,"class","help"),on(t,"slot","help")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){4&t&&r!==(r=n[2]("Setting this value too high might get you banned from the server.")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Fc(n){var t,e,r=n[2]("Max message length")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){4&t&&r!==(r=n[2]("Max message length")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Kc(n){var t,e,r=n[2]("Messages longer than this will be split into multiple messages.")+"";return{c:function(){t=Z("p"),e=X(r),on(t,"class","help"),on(t,"slot","help")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){4&t&&r!==(r=n[2]("Messages longer than this will be split into multiple messages.")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Wc(n){var t,e,r=n[2]("WEBIRC password")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){4&t&&r!==(r=n[2]("WEBIRC password")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Gc(n){var t,e,r=n[2]("Skip connection queue")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){4&t&&r!==(r=n[2]("Skip connection queue")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Yc(n){var t,e,r=n[2]("Only administrators can edit this section.")+"";return{c:function(){t=Z("p"),e=X(r),on(t,"class","error")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){4&t&&r!==(r=n[2]("Only administrators can edit this section.")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Jc(n){var t,e;return t=new ce({props:{icon:"plus-circle",op:n[7],$$slots:{default:[Qc]},$$scope:{ctx:n}}}),{c:function(){nt(t.$$.fragment)},m:function(n,r){tt(t,n,r),e=!0},p:function(n,e){var r={};16388&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(Gn(t.$$.fragment,n),e=!0)},o:function(n){Yn(t.$$.fragment,n),e=!1},d:function(n){et(t,n)}}}function Vc(n){var t,e,r,o;return t=new ce({props:{icon:"save",op:n[7],disabled:!n[1],$$slots:{default:[Zc]},$$scope:{ctx:n}}}),(r=new ce({props:{icon:"trash",type:"button",op:n[6],$$slots:{default:[Xc]},$$scope:{ctx:n}}})).$on("click",n[8]),{c:function(){nt(t.$$.fragment),e=nn(),nt(r.$$.fragment)},m:function(n,i){tt(t,n,i),J(n,e,i),tt(r,n,i),o=!0},p:function(n,e){var o={};2&e&&(o.disabled=!n[1]),16388&e&&(o.$$scope={dirty:e,ctx:n}),t.$set(o);var i={};16388&e&&(i.$$scope={dirty:e,ctx:n}),r.$set(i)},i:function(n){o||(Gn(t.$$.fragment,n),Gn(r.$$.fragment,n),o=!0)},o:function(n){Yn(t.$$.fragment,n),Yn(r.$$.fragment,n),o=!1},d:function(n){et(t,n),n&&V(e),et(r,n)}}}function Qc(n){var t,e,r=n[2]("Add")+"";return{c:function(){t=Z("span"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){4&t&&r!==(r=n[2]("Add")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Zc(n){var t,e,r=n[2]("Update")+"";return{c:function(){t=Z("span"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){4&t&&r!==(r=n[2]("Update")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Xc(n){var t,e,r=n[2]("Delete")+"";return{c:function(){t=Z("span"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){4&t&&r!==(r=n[2]("Delete")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function nu(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,m,h,g,v,$,y,b,w,_,k,x,E,S,O,C,N,R,A,D,j;t=new ye({props:{$$slots:{default:[Nc]},$$scope:{ctx:n}}}),i=new Go({props:{name:"host",form:n[5],placeholder:n[2]("Ex: chat.freenode.net:6697"),readonly:!n[1],$$slots:{help:[Ac],label:[Rc]},$$scope:{ctx:n}}}),c=new Cr({props:{name:"tls",form:n[5],disabled:!n[1],$$slots:{label:[Dc]},$$scope:{ctx:n}}}),s=new Cr({props:{name:"tls_verify",form:n[5],disabled:!n[3].tls||!n[1],hidden:!n[3].tls,$$slots:{label:[jc]},$$scope:{ctx:n}}}),l=new Go({props:{name:"conversation_id",form:n[5],placeholder:n[2]("Ex: #convos"),readonly:!n[1],$$slots:{label:[Tc]},$$scope:{ctx:n}}}),p=new Go({props:{name:"service_accounts",form:n[5],placeholder:n[2]("chanserv, nickserv, ..."),readonly:!n[1],$$slots:{help:[Pc],label:[Lc]},$$scope:{ctx:n}}}),h=new Cr({props:{name:"is_default",form:n[5],disabled:!n[1],$$slots:{label:[Mc]},$$scope:{ctx:n}}}),v=new Cr({props:{name:"is_forced",form:n[5],disabled:!n[1],hidden:!n[3].is_default,$$slots:{label:[Ic]},$$scope:{ctx:n}}});var T=n[1]&&Uc(n);b=new Cr({props:{name:"show_advanced_settings",form:n[5],$$slots:{label:[Hc]},$$scope:{ctx:n}}});var L=n[3].show_advanced_settings&&Bc(n),P=!n[1]&&Yc(n),M=[Vc,Jc],I=[];function U(n,t){return"add"!=n[0]?0:1}return E=U(n),S=I[E]=M[E](n),C=new xo({props:{op:n[6],success:"Deleted."}}),R=new xo({props:{op:n[7]}}),{c:function(){nt(t.$$.fragment),e=nn(),r=Z("main"),o=Z("form"),nt(i.$$.fragment),a=nn(),nt(c.$$.fragment),u=nn(),nt(s.$$.fragment),f=nn(),nt(l.$$.fragment),d=nn(),nt(p.$$.fragment),m=nn(),nt(h.$$.fragment),g=nn(),nt(v.$$.fragment),$=nn(),T&&T.c(),y=nn(),nt(b.$$.fragment),w=nn(),L&&L.c(),_=nn(),P&&P.c(),k=nn(),x=Z("div"),S.c(),O=nn(),nt(C.$$.fragment),N=nn(),nt(R.$$.fragment),on(x,"class","form-actions"),on(o,"method","post"),on(r,"class","main")},m:function(S,M){tt(t,S,M),J(S,e,M),J(S,r,M),Y(r,o),tt(i,o,null),Y(o,a),tt(c,o,null),Y(o,u),tt(s,o,null),Y(o,f),tt(l,o,null),Y(o,d),tt(p,o,null),Y(o,m),tt(h,o,null),Y(o,g),tt(v,o,null),Y(o,$),T&&T.m(o,null),Y(o,y),tt(b,o,null),Y(o,w),L&&L.m(o,null),Y(o,_),P&&P.m(o,null),Y(o,k),Y(o,x),I[E].m(x,null),Y(o,O),tt(C,o,null),Y(o,N),tt(R,o,null),A=!0,D||(j=en(o,"submit",rn(n[9])),D=!0)},p:function(n,e){var r=st(e,1)[0],a={};16389&r&&(a.$$scope={dirty:r,ctx:n}),t.$set(a);var u={};4&r&&(u.placeholder=n[2]("Ex: chat.freenode.net:6697")),2&r&&(u.readonly=!n[1]),16388&r&&(u.$$scope={dirty:r,ctx:n}),i.$set(u);var f={};2&r&&(f.disabled=!n[1]),16388&r&&(f.$$scope={dirty:r,ctx:n}),c.$set(f);var d={};10&r&&(d.disabled=!n[3].tls||!n[1]),8&r&&(d.hidden=!n[3].tls),16388&r&&(d.$$scope={dirty:r,ctx:n}),s.$set(d);var m={};4&r&&(m.placeholder=n[2]("Ex: #convos")),2&r&&(m.readonly=!n[1]),16388&r&&(m.$$scope={dirty:r,ctx:n}),l.$set(m);var g={};4&r&&(g.placeholder=n[2]("chanserv, nickserv, ...")),2&r&&(g.readonly=!n[1]),16388&r&&(g.$$scope={dirty:r,ctx:n}),p.$set(g);var $={};2&r&&($.disabled=!n[1]),16388&r&&($.$$scope={dirty:r,ctx:n}),h.$set($);var w={};2&r&&(w.disabled=!n[1]),8&r&&(w.hidden=!n[3].is_default),16388&r&&(w.$$scope={dirty:r,ctx:n}),v.$set(w),n[1]?T?T.p(n,r):((T=Uc(n)).c(),T.m(o,y)):T&&(T.d(1),T=null);var O={};16388&r&&(O.$$scope={dirty:r,ctx:n}),b.$set(O),n[3].show_advanced_settings?L?(L.p(n,r),8&r&&Gn(L,1)):((L=Bc(n)).c(),Gn(L,1),L.m(o,_)):L&&(Kn(),Yn(L,1,1,(function(){L=null})),Wn()),n[1]?P&&(P.d(1),P=null):P?P.p(n,r):((P=Yc(n)).c(),P.m(o,k));var C=E;(E=U(n))===C?I[E].p(n,r):(Kn(),Yn(I[C],1,1,(function(){I[C]=null})),Wn(),(S=I[E])?S.p(n,r):(S=I[E]=M[E](n)).c(),Gn(S,1),S.m(x,null))},i:function(n){A||(Gn(t.$$.fragment,n),Gn(i.$$.fragment,n),Gn(c.$$.fragment,n),Gn(s.$$.fragment,n),Gn(l.$$.fragment,n),Gn(p.$$.fragment,n),Gn(h.$$.fragment,n),Gn(v.$$.fragment,n),Gn(b.$$.fragment,n),Gn(L),Gn(S),Gn(C.$$.fragment,n),Gn(R.$$.fragment,n),A=!0)},o:function(n){Yn(t.$$.fragment,n),Yn(i.$$.fragment,n),Yn(c.$$.fragment,n),Yn(s.$$.fragment,n),Yn(l.$$.fragment,n),Yn(p.$$.fragment,n),Yn(h.$$.fragment,n),Yn(v.$$.fragment,n),Yn(b.$$.fragment,n),Yn(L),Yn(S),Yn(C.$$.fragment,n),Yn(R.$$.fragment,n),A=!1},d:function(n){et(t,n),n&&V(e),n&&V(r),et(i),et(c),et(s),et(l),et(p),et(h),et(v),T&&T.d(),et(b),L&&L.d(),P&&P.d(),I[E].d(),et(C),et(R),D=!1,j()}}}function tu(n,t,e){var r,o,i,a;P(n,Be,(function(n){return e(2,i=n)}));var c=t.profile_id,u=void 0===c?"add":c,s="add"==u?"Add connection profile":"Edit connection profile",l=En("api"),p=En("user"),m=p.connectionProfiles;P(n,m,(function(n){return e(11,o=n)}));var h=Qo();P(n,h,(function(n){return e(3,a=n)}));var g=l("removeConnectionProfile"),v=l("saveConnectionProfile");function $(){return($=d(f.mark((function n(){return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.perform({id:u});case 2:return n.next=4,m.load({force:!0});case 4:return n.next=6,Tn();case 6:Ae.go("/settings/connections");case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function y(){return(y=d(f.mark((function n(){var t;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=h.get(),["is_default","is_forced","skip_queue"].forEach((function(n){return t[n]=!!t[n]})),t.service_accounts=Ft(t.service_accounts),t.url=new Nr("irc://localhost").fromFields(t).toString(),n.next=6,v.perform(t);case 6:if(!v.is("error")){n.next=8;break}return n.abrupt("return");case 8:return t.is_default&&p.update({default_connection:t.url,forced_connection:t.is_forced}),n.next=11,m.load({force:!0});case 11:return n.next=13,Tn();case 13:Ae.go("/settings/connections");case 14:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return _n((function(){return m.load()})),n.$$set=function(n){"profile_id"in n&&e(0,u=n.profile_id)},n.$$.update=function(){2049&n.$$.dirty&&h.set(o.find(u)||o.defaultProfile())},e(1,r=p.roles.has("admin")),[u,r,i,a,m,h,g,v,function(){return $.apply(this,arguments)},function(){return y.apply(this,arguments)},s,o]}var eu=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(Oc()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,tu,nu,j,{profile_id:0,title:10}),t}return S(i,[{key:"title",get:function(){return this.$$.ctx[10]}}]),i}(it);function ru(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function ou(n){var t,e,r;return t=new $t({props:{name:"list"}}),e=new $t({props:{name:"times"}}),{c:function(){nt(t.$$.fragment),nt(e.$$.fragment)},m:function(n,o){tt(t,n,o),tt(e,n,o),r=!0},p:O,i:function(n){r||(Gn(t.$$.fragment,n),Gn(e.$$.fragment,n),r=!0)},o:function(n){Yn(t.$$.fragment,n),Yn(e.$$.fragment,n),r=!1},d:function(n){et(t,n),et(e,n)}}}function iu(n){var t,e,r,o,i,a=("add"==n[0]?n[1]("Add connection"):n[1]("Edit connection"))+"";return o=new Ii({props:{href:"/settings/connections",class:"btn-hallow is-active","data-tooltip":n[1]("See all connections"),$$slots:{default:[ou]},$$scope:{ctx:n}}}),{c:function(){t=Z("h1"),e=X(a),r=nn(),nt(o.$$.fragment)},m:function(n,a){J(n,t,a),Y(t,e),J(n,r,a),tt(o,n,a),i=!0},p:function(n,t){(!i||3&t)&&a!==(a=("add"==n[0]?n[1]("Add connection"):n[1]("Edit connection"))+"")&&cn(e,a);var r={};2&t&&(r["data-tooltip"]=n[1]("See all connections")),8&t&&(r.$$scope={dirty:t,ctx:n}),o.$set(r)},i:function(n){i||(Gn(o.$$.fragment,n),i=!0)},o:function(n){Yn(o.$$.fragment,n),i=!1},d:function(n){n&&V(t),n&&V(r),et(o,n)}}}function au(n){var t,e,r,o,i;return t=new ye({props:{$$slots:{default:[iu]},$$scope:{ctx:n}}}),o=new Si({props:{id:n[0],is_page:!0}}),{c:function(){nt(t.$$.fragment),e=nn(),r=Z("main"),nt(o.$$.fragment),on(r,"class","main")},m:function(n,a){tt(t,n,a),J(n,e,a),J(n,r,a),tt(o,r,null),i=!0},p:function(n,e){var r=st(e,1)[0],i={};11&r&&(i.$$scope={dirty:r,ctx:n}),t.$set(i);var a={};1&r&&(a.id=n[0]),o.$set(a)},i:function(n){i||(Gn(t.$$.fragment,n),Gn(o.$$.fragment,n),i=!0)},o:function(n){Yn(t.$$.fragment,n),Yn(o.$$.fragment,n),i=!1},d:function(n){et(t,n),n&&V(e),n&&V(r),et(o)}}}function cu(n,t,e){var r;P(n,Be,(function(n){return e(1,r=n)}));var o=t.connection_id,i=void 0===o?"add":o,a="add"==i?"Add connection":"Edit connection";return n.$$set=function(n){"connection_id"in n&&e(0,i=n.connection_id)},[i,r,a]}var uu=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(ru()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,cu,au,j,{connection_id:0,title:2}),t}return S(i,[{key:"title",get:function(){return this.$$.ctx[2]}}]),i}(it);function su(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function fu(n,t,e){var r=n.slice();return r[14]=t[e],r}function lu(n){var t,e,r=n[3]("Add conversation")+"";return{c:function(){t=Z("h1"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){8&t&&r!==(r=n[3]("Add conversation")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function du(n){var t,e,r=n[3]("Connection")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){8&t&&r!==(r=n[3]("Connection")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function pu(n){var t,e,r=n[3](n[1].conversations.length?"Refresh":"Load")+"";return{c:function(){t=Z("span"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){10&t&&r!==(r=n[3](n[1].conversations.length?"Refresh":"Load")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function mu(n){var t,e,r=n[3]("Conversation name")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){8&t&&r!==(r=n[3]("Conversation name")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function hu(n){var t,e,r=n[3]("Add")+"";return{c:function(){t=Z("span"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){8&t&&r!==(r=n[3]("Add")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function gu(n){var t,e,r,o,i=n[0].connection_id+"",a=n[1].error+"";return{c:function(){t=Z("p"),e=X(i),r=X(": "),o=X(a),on(t,"class","error")},m:function(n,i){J(n,t,i),Y(t,e),Y(t,r),Y(t,o)},p:function(n,t){1&t&&i!==(i=n[0].connection_id+"")&&cn(e,i),2&t&&a!==(a=n[1].error+"")&&cn(o,a)},d:function(n){n&&V(t)}}}function vu(n){var t,e,r;function o(n,t){return n[1].done?yu:$u}for(var i=o(n),a=i(n),c=n[1].conversations,u=[],s=0;s<c.length;s+=1)u[s]=bu(fu(n,c,s));return{c:function(){t=Z("p"),a.c(),e=nn(),r=Z("div");for(var n=0;n<u.length;n+=1)u[n].c();on(r,"class","conversation-add-list")},m:function(n,o){J(n,t,o),a.m(t,null),J(n,e,o),J(n,r,o);for(var i=0;i<u.length;i+=1)u[i].m(r,null)},p:function(n,e){if(i===(i=o(n))&&a?a.p(n,e):(a.d(1),(a=i(n))&&(a.c(),a.m(t,null))),66&e){var s;for(c=n[1].conversations,s=0;s<c.length;s+=1){var f=fu(n,c,s);u[s]?u[s].p(f,e):(u[s]=bu(f),u[s].c(),u[s].m(r,null))}for(;s<u.length;s+=1)u[s].d(1);u.length=c.length}},d:function(n){n&&V(t),a.d(),n&&V(e),n&&V(r),Q(u,n)}}}function $u(n){var t,e=n[3]("Showing %1 of %2 conversations, but the list is still loading.",n[1].conversations.length,n[1].n_conversations)+"";return{c:function(){t=X(e)},m:function(n,e){J(n,t,e)},p:function(n,r){10&r&&e!==(e=n[3]("Showing %1 of %2 conversations, but the list is still loading.",n[1].conversations.length,n[1].n_conversations)+"")&&cn(t,e)},d:function(n){n&&V(t)}}}function yu(n){var t,e=n[3]("Showing %1 of %2 conversations.",n[1].conversations.length,n[1].n_conversations)+"";return{c:function(){t=X(e)},m:function(n,e){J(n,t,e)},p:function(n,r){10&r&&e!==(e=n[3]("Showing %1 of %2 conversations.",n[1].conversations.length,n[1].n_conversations)+"")&&cn(t,e)},d:function(n){n&&V(t)}}}function bu(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,m=n[14].n_users+"",h=n[14].name+"",g=(n[14].topic||"No topic.")+"";return{c:function(){t=Z("a"),e=Z("span"),r=X(m),o=nn(),i=Z("b"),a=X(h),c=nn(),u=Z("i"),s=X(g),f=nn(),on(e,"class","conversation-add-list__n-users"),on(i,"class","conversation-add-list__name"),on(u,"class","conversation-add-list__title"),on(t,"href",l="#add:"+n[14].name)},m:function(l,m){J(l,t,m),Y(t,e),Y(e,r),Y(t,o),Y(t,i),Y(i,a),Y(t,c),Y(t,u),Y(u,s),Y(t,f),d||(p=en(t,"click",rn(n[6])),d=!0)},p:function(n,e){2&e&&m!==(m=n[14].n_users+"")&&cn(r,m),2&e&&h!==(h=n[14].name+"")&&cn(a,h),2&e&&g!==(g=(n[14].topic||"No topic.")+"")&&cn(s,g),2&e&&l!==(l="#add:"+n[14].name)&&on(t,"href",l)},d:function(n){n&&V(t),d=!1,p()}}}function wu(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,m,h,g,v,$,y,b,w,_,k,x=n[3]("Enter the name of an exising conversation, or create a new conversation.")+"";t=new ye({props:{$$slots:{default:[lu]},$$scope:{ctx:n}}}),s=new Do({props:{name:"connection_id",form:n[4],options:n[2],placeholder:n[3]("Select..."),$$slots:{label:[du]},$$scope:{ctx:n}}}),(d=new ce({props:{type:"button",icon:"sync-alt",disabled:!n[0].connection_id||!1===n[1].done,$$slots:{default:[pu]},$$scope:{ctx:n}}})).$on("click",n[7]),(h=new Go({props:{name:"conversation_id",form:n[4],placeholder:n[3]("#room or nick"),autocomplete:"off",$$slots:{label:[mu]},$$scope:{ctx:n}}})).$on("keyup",n[8]),$=new ce({props:{icon:"comment",disabled:!n[0].connection_id||!n[0].conversation_id,$$slots:{default:[hu]},$$scope:{ctx:n}}});var E=n[1].error&&gu(n),S=null!==n[1].done&&vu(n);return{c:function(){nt(t.$$.fragment),e=nn(),r=Z("main"),o=Z("p"),i=X(x),a=nn(),c=Z("form"),u=Z("div"),nt(s.$$.fragment),f=nn(),l=Z("div"),nt(d.$$.fragment),p=nn(),m=Z("div"),nt(h.$$.fragment),g=nn(),v=Z("div"),nt($.$$.fragment),y=nn(),E&&E.c(),b=nn(),S&&S.c(),on(l,"class","flex-basis-30"),on(u,"class","inputs-side-by-side"),on(v,"class","flex-basis-30"),on(m,"class","inputs-side-by-side"),on(c,"method","post"),on(r,"class","main")},m:function(x,O){tt(t,x,O),J(x,e,O),J(x,r,O),Y(r,o),Y(o,i),Y(r,a),Y(r,c),Y(c,u),tt(s,u,null),Y(u,f),Y(u,l),tt(d,l,null),Y(c,p),Y(c,m),tt(h,m,null),Y(m,g),Y(m,v),tt($,v,null),Y(c,y),E&&E.m(c,null),Y(c,b),S&&S.m(c,null),w=!0,_||(k=en(c,"submit",rn(n[6])),_=!0)},p:function(n,e){var r=st(e,1)[0],o={};131080&r&&(o.$$scope={dirty:r,ctx:n}),t.$set(o),(!w||8&r)&&x!==(x=n[3]("Enter the name of an exising conversation, or create a new conversation.")+"")&&cn(i,x);var a={};4&r&&(a.options=n[2]),8&r&&(a.placeholder=n[3]("Select...")),131080&r&&(a.$$scope={dirty:r,ctx:n}),s.$set(a);var u={};3&r&&(u.disabled=!n[0].connection_id||!1===n[1].done),131082&r&&(u.$$scope={dirty:r,ctx:n}),d.$set(u);var f={};8&r&&(f.placeholder=n[3]("#room or nick")),131080&r&&(f.$$scope={dirty:r,ctx:n}),h.$set(f);var l={};1&r&&(l.disabled=!n[0].connection_id||!n[0].conversation_id),131080&r&&(l.$$scope={dirty:r,ctx:n}),$.$set(l),n[1].error?E?E.p(n,r):((E=gu(n)).c(),E.m(c,b)):E&&(E.d(1),E=null),null!==n[1].done?S?S.p(n,r):((S=vu(n)).c(),S.m(c,null)):S&&(S.d(1),S=null)},i:function(n){w||(Gn(t.$$.fragment,n),Gn(s.$$.fragment,n),Gn(d.$$.fragment,n),Gn(h.$$.fragment,n),Gn($.$$.fragment,n),w=!0)},o:function(n){Yn(t.$$.fragment,n),Yn(s.$$.fragment,n),Yn(d.$$.fragment,n),Yn(h.$$.fragment,n),Yn($.$$.fragment,n),w=!1},d:function(n){et(t,n),n&&V(e),n&&V(r),et(s),et(d),et(h),et($),E&&E.d(),S&&S.d(),_=!1,k()}}}function _u(n,t,e){var r,o,i,a;P(n,Be,(function(n){return e(3,a=n)}));var c=Qo();P(n,c,(function(n){return e(0,i=n)}));var u=En("socket"),s=En("user");P(n,s,(function(n){return e(10,o=n)}));var l,p={conversations:[],done:null,n_conversations:0};function m(n){return h.apply(this,arguments)}function h(){return(h=d(f.mark((function n(t){var r,o,i;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=c.get("conversation_id")||"",o="/list"+(r.length?" /"+r+"/":""),"click"==t.type&&p.done&&(o+=" refresh"),l&&clearTimeout(l),i=c.get("connection_id"),u.send({connection_id:i,message:o,method:"send"},(function(n){var r=Tt(n);e(1,p=r?{conversations:[],done:!0,n_conversations:0,error:r}:n);var o=t.interval?t.interval+500:500;o>2e3&&(o=2e3),r||n.done||(l=setTimeout((function(){return m({interval:o})}),o))}));case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var g=jt(m,250);return n.$$.update=function(){1024&n.$$.dirty&&e(2,r=Array.from(o.connections.keys()).map((function(n){return[n]}))),1&n.$$.dirty&&(i.connection_id||c.set({connection_id:Ae.param("connection_id")||r[0]||"",conversation_id:Ae.param("conversation_id")||""}))},[i,p,r,a,c,s,function(n){var t=n&&n.target&&n.target.closest("a");t&&t.href&&c.set({conversation_id:t.href.replace(/.*#add:/,"")});var e=s.findConversation({connection_id:c.get("connection_id")});e&&c.get("conversation_id")&&e.send("/join "+c.get("conversation_id"))},m,g,"Add conversation",o]}var ku=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(su()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,_u,wu,j,{title:9}),t}return S(i,[{key:"title",get:function(){return this.$$.ctx[9]}}]),i}(it);function xu(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Eu(n){var t,e,r,o,i,a,c,u,s=n[4]("Yikes! we are so sorry for the inconvenience. Please submit an [issue](%1), if the problem does not go away.","https://github.com/convos-chat/convos/issues")+"",f=n[2]("Go to start page")+"";return i=new $t({props:{name:"play"}}),{c:function(){t=Z("p"),e=nn(),r=Z("p"),o=Z("a"),nt(i.$$.fragment),a=nn(),c=X(f),on(o,"href",n[1]),on(o,"target","_self"),on(o,"class","btn")},m:function(n,f){J(n,t,f),t.innerHTML=s,J(n,e,f),J(n,r,f),Y(r,o),tt(i,o,null),Y(o,a),Y(o,c),u=!0},p:function(n,e){(!u||16&e)&&s!==(s=n[4]("Yikes! we are so sorry for the inconvenience. Please submit an [issue](%1), if the problem does not go away.","https://github.com/convos-chat/convos/issues")+"")&&(t.innerHTML=s),(!u||4&e)&&f!==(f=n[2]("Go to start page")+"")&&cn(c,f),(!u||2&e)&&on(o,"href",n[1])},i:function(n){u||(Gn(i.$$.fragment,n),u=!0)},o:function(n){Yn(i.$$.fragment,n),u=!1},d:function(n){n&&V(t),n&&V(e),n&&V(r),et(i)}}}function Su(n){var t,e,r,o,i,a,c,u,s,f=n[2]("The Convos Team have been searching and searching, but the requested page could not be found.")+"",l=n[2]("Go to start page")+"";return a=new $t({props:{name:"play"}}),{c:function(){t=Z("p"),e=X(f),r=nn(),o=Z("p"),i=Z("a"),nt(a.$$.fragment),c=nn(),u=X(l),on(i,"href",n[1]),on(i,"target","_self"),on(i,"class","btn")},m:function(n,f){J(n,t,f),Y(t,e),J(n,r,f),J(n,o,f),Y(o,i),tt(a,i,null),Y(i,c),Y(i,u),s=!0},p:function(n,t){(!s||4&t)&&f!==(f=n[2]("The Convos Team have been searching and searching, but the requested page could not be found.")+"")&&cn(e,f),(!s||4&t)&&l!==(l=n[2]("Go to start page")+"")&&cn(u,l),(!s||2&t)&&on(i,"href",n[1])},i:function(n){s||(Gn(a.$$.fragment,n),s=!0)},o:function(n){Yn(a.$$.fragment,n),s=!1},d:function(n){n&&V(t),n&&V(r),n&&V(o),et(a)}}}function Ou(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,m,h,g,v,$,y,b=n[2]("Downloaded Convos.")+"",w=n[2]("Started Convos.")+"",_=n[2]("Contact admin")+"";e=new $t({props:{name:"download"}}),c=new $t({props:{name:"rocket"}});var k=[Nu,Cu],x=[];function E(n,t){return n[3].error?0:1}return l=E(n),d=x[l]=k[l](n),g=new $t({props:{name:"paper-plane"}}),{c:function(){t=Z("p"),nt(e.$$.fragment),r=nn(),o=X(b),i=nn(),a=Z("p"),nt(c.$$.fragment),u=nn(),s=X(w),f=nn(),d.c(),p=nn(),m=Z("p"),h=Z("a"),nt(g.$$.fragment),v=nn(),$=X(_),on(h,"class","btn"),on(h,"href",zt("contact"))},m:function(n,d){J(n,t,d),tt(e,t,null),Y(t,r),Y(t,o),J(n,i,d),J(n,a,d),tt(c,a,null),Y(a,u),Y(a,s),J(n,f,d),x[l].m(n,d),J(n,p,d),J(n,m,d),Y(m,h),tt(g,h,null),Y(h,v),Y(h,$),y=!0},p:function(n,t){(!y||4&t)&&b!==(b=n[2]("Downloaded Convos.")+"")&&cn(o,b),(!y||4&t)&&w!==(w=n[2]("Started Convos.")+"")&&cn(s,w);var e=l;(l=E(n))===e?x[l].p(n,t):(Kn(),Yn(x[e],1,1,(function(){x[e]=null})),Wn(),(d=x[l])?d.p(n,t):(d=x[l]=k[l](n)).c(),Gn(d,1),d.m(p.parentNode,p)),(!y||4&t)&&_!==(_=n[2]("Contact admin")+"")&&cn($,_)},i:function(n){y||(Gn(e.$$.fragment,n),Gn(c.$$.fragment,n),Gn(d),Gn(g.$$.fragment,n),y=!0)},o:function(n){Yn(e.$$.fragment,n),Yn(c.$$.fragment,n),Yn(d),Yn(g.$$.fragment,n),y=!1},d:function(n){n&&V(t),et(e),n&&V(i),n&&V(a),et(c),n&&V(f),x[l].d(n),n&&V(p),n&&V(m),et(g)}}}function Cu(n){var t,e,r,o,i,a=n[2]("Loading user data...")+"";return e=new $t({props:{name:"spinner fa-spin"}}),{c:function(){t=Z("p"),nt(e.$$.fragment),r=nn(),o=X(a)},m:function(n,a){J(n,t,a),tt(e,t,null),Y(t,r),Y(t,o),i=!0},p:function(n,t){(!i||4&t)&&a!==(a=n[2]("Loading user data...")+"")&&cn(o,a)},i:function(n){i||(Gn(e.$$.fragment,n),i=!0)},o:function(n){Yn(e.$$.fragment,n),i=!1},d:function(n){n&&V(t),et(e)}}}function Nu(n){var t,e,r,o,i,a=n[2]("Loading user data failed: %1",n[2](n[3].error))+"";return e=new $t({props:{name:"exclamation-triangle"}}),{c:function(){t=Z("p"),nt(e.$$.fragment),r=nn(),o=X(a)},m:function(n,a){J(n,t,a),tt(e,t,null),Y(t,r),Y(t,o),i=!0},p:function(n,t){(!i||12&t)&&a!==(a=n[2]("Loading user data failed: %1",n[2](n[3].error))+"")&&cn(o,a)},i:function(n){i||(Gn(e.$$.fragment,n),i=!0)},o:function(n){Yn(e.$$.fragment,n),i=!1},d:function(n){n&&V(t),et(e)}}}function Ru(n){var t,e,r,o,i,a,c,u=n[2](n[5][n[0]])+"",s=[Ou,Su,Eu],f=[];function l(n,t){return"loading"==n[0]?0:"not_found"==n[0]?1:2}return i=l(n),a=f[i]=s[i](n),{c:function(){t=Z("main"),e=Z("h2"),r=X(u),o=nn(),a.c(),on(t,"class","cms-main")},m:function(n,a){J(n,t,a),Y(t,e),Y(e,r),Y(t,o),f[i].m(t,null),c=!0},p:function(n,e){var o=st(e,1)[0];(!c||5&o)&&u!==(u=n[2](n[5][n[0]])+"")&&cn(r,u);var d=i;(i=l(n))===d?f[i].p(n,o):(Kn(),Yn(f[d],1,1,(function(){f[d]=null})),Wn(),(a=f[i])?a.p(n,o):(a=f[i]=s[i](n)).c(),Gn(a,1),a.m(t,null))},i:function(n){c||(Gn(a),c=!0)},o:function(n){Yn(a),c=!1},d:function(n){n&&V(t),f[i].d()}}}function Au(n,t,e){var r,o,i,a,c,u,s;P(n,Ae,(function(n){return e(9,i=n)})),P(n,Be,(function(n){return e(2,c=n)})),P(n,ze,(function(n){return e(4,s=n)}));var f=t.title,l=void 0===f?"Loading...":f,d={loading:"Loading...",not_found:"Not Found"},p=En("socket");P(n,p,(function(n){return e(3,u=n)}));var m=En("user");return P(n,m,(function(n){return e(10,a=n)})),n.$$set=function(n){"title"in n&&e(8,l=n.title)},n.$$.update=function(){1536&n.$$.dirty&&e(0,r=function(n,t){var e=n.path.match(/\/err\/(\w+)/);return e?e[1]:t.is("pending")||t.is("loading")?"loading":"not_found"}(i,a)),1&n.$$.dirty&&e(8,l=d[r])},e(1,o=Ae.urlFor(m.email?"/chat":"/login")),[r,o,c,u,s,d,p,m,l,i,a]}var Du=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(xu()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,Au,Ru,j,{title:8}),t}return i}(it);function ju(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Tu(n,t,e){var r=n.slice();return r[5]=t[e],r}function Lu(n){var t,e,r,o,i,a,c,u=n[0]("Help")+"",s=zt("version")+"";return{c:function(){t=Z("h1"),e=X(u),r=nn(),o=Z("small"),i=Z("a"),a=X("v"),c=X(s),on(i,"href",n[2]),on(i,"target","_blank")},m:function(n,u){J(n,t,u),Y(t,e),Y(t,r),Y(t,o),Y(o,i),Y(i,a),Y(i,c)},p:function(n,t){1&t&&u!==(u=n[0]("Help")+"")&&cn(e,u)},d:function(n){n&&V(t)}}}function Pu(n){var t,e,r,o,i=n[5].example+"",a=n[0](n[5].description)+"";return{c:function(){t=Z("dt"),e=X(i),r=Z("dd"),o=X(a)},m:function(n,i){J(n,t,i),Y(t,e),J(n,r,i),Y(r,o)},p:function(n,t){1&t&&a!==(a=n[0](n[5].description)+"")&&cn(o,a)},d:function(n){n&&V(t),n&&V(r)}}}function Mu(n){var t;return{c:function(){t=X("Loading")},m:function(n,e){J(n,t,e)},d:function(n){n&&V(t)}}}function Iu(n){var t;return{c:function(){t=X("Not found")},m:function(n,e){J(n,t,e)},d:function(n){n&&V(t)}}}function Uu(n){var t;return{c:function(){t=X("Unknown")},m:function(n,e){J(n,t,e)},d:function(n){n&&V(t)}}}function Hu(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,m,h,g,v,$,y,b,w,_,k,x,E,S,C,N,R,A,D,j,T,L,P,M,I,U,H,B,z,q,F,K,W,G,tn,en,rn,an,un,sn,fn,ln,dn,pn,hn,gn,vn,$n,yn,bn,wn,_n,kn,xn,En,Sn,On,Cn,Nn,Rn,An,Dn,jn,Tn,Ln,Pn,Mn,In,Un,Hn,Bn,zn,qn,Fn,Kn,Wn,Jn,Vn,Qn,Zn,Xn,rt,ot,it,at,ct,ut,ft,lt,dt,pt,mt,ht,gt,vt,$t,yt,bt,wt,_t,kt,xt,Et,St,Ot,Ct,Nt=n[1]('Got any questions? Come and talk to us in the "#convos" channel on https://freenode.net.')+"",Rt=n[1]("More information can also be found on https://convos.chat.")+"",At=n[0]("Quick search")+"",Dt=n[0]("Pressing `shift+enter` will shift focus between chat input and search in sidebar.")+"",jt=n[0]("Filter conversations with unread messages.")+"",Tt=n[0]("Filter private conversations with unread messages.")+"",Lt=n[0]("Filter channels with unread messages.")+"",Pt=n[0]("Any other combination")+"",Mt=n[0]("Filter channels, private conversations or search for a string.")+"",It=n[0]("Autocomplete")+"",Ut=n[0]("The following rules apply when typing a message:")+"",Ht=n[0]('"@" followed by a character will show matching nicks in the current conversation.')+"",Bt=n[0]('":" followed by a character will show matching emojis.')+"",qt=n[0]('"/" will show the available commands.')+"",Ft=n[0]('"#" will show the matching conversation names.')+"",Kt=n[0]("Text formatting")+"",Wt=n[0]("Convos supports some special way of formatting text:")+"",Gt=n[0]("Will be automatically converted into emojis.")+"",Yt=n[0]("> some text")+"",Jt=n[0]('A line starting with ">" will be converted into a quote.')+"",Vt=n[0]("*some text*, **some text**, ***some text***")+"",Qt=n[1]('Using "*" around some text, will convert it into *italic*, **bold** or ***italic bold***.')+"",Zt=n[0]("`some fragment`")+"",Xt=n[1]("Using backticks around some text, will format it as a `code fragment`.")+"",ne=n[0]("URLs will be converted to links, and might be embedded in the chat.")+"",te=n[0]("Available commands")+"",ee=n[1]('Any message starting with a-z is prefixed with "`/quote`", when sending from a connection conversation.')+"",re=n[0]("Other resources")+"",oe=n[0]("Changelog for v%1",zt("version"))+"",ie=n[0]("Project homepage")+"",ae=n[0]("Bug/issue tracker")+"",ce=n[0]("Source code")+"",ue="Convos"!=zt("organization_name")&&"https://convos.chat"!=zt("organization_url"),se=n[0]("Contact admin")+"",fe=n[0]("Demo error pages")+"";t=new ye({props:{$$slots:{default:[Lu]},$$scope:{ctx:n}}});for(var le=qe,de=[],pe=0;pe<le.length;pe+=1)de[pe]=Pu(Tu(n,le,pe));var me,he,ge,ve,$e=ue&&(ve=zt("organization_name")+"",{c:function(){me=Z("li"),he=Z("a"),ge=X(ve),on(he,"href",zt("organization_url")),on(he,"target","_blank")},m:function(n,t){J(n,me,t),Y(me,he),Y(he,ge)},p:O,d:function(n){n&&V(me)}});return wt=new Ii({props:{href:"/err/loading",$$slots:{default:[Mu]},$$scope:{ctx:n}}}),xt=new Ii({props:{href:"/err/not_found",$$slots:{default:[Iu]},$$scope:{ctx:n}}}),Ot=new Ii({props:{href:"/err/unknown",$$slots:{default:[Uu]},$$scope:{ctx:n}}}),{c:function(){nt(t.$$.fragment),e=nn(),r=Z("main"),o=Z("p"),a=nn(),u=nn(),s=Z("h2"),f=X(At),l=nn(),d=Z("p"),p=X(Dt),m=nn(),h=Z("dl"),(g=Z("dt")).textContent="+",v=Z("dd"),$=X(jt),(y=Z("dt")).textContent="+@",b=Z("dd"),w=X(Tt),(_=Z("dt")).textContent="+#",k=Z("dd"),x=X(Lt),E=Z("dt"),S=X(Pt),C=Z("dd"),N=X(Mt),R=nn(),A=Z("h2"),D=X(It),j=nn(),T=Z("p"),L=X(Ut),P=nn(),M=Z("dl"),(I=Z("dt")).textContent="@nick",U=Z("dd"),H=X(Ht),(B=Z("dt")).textContent=":emoji_name",z=Z("dd"),q=X(Bt),(F=Z("dt")).textContent="/command",K=Z("dd"),W=X(qt),(G=Z("dt")).textContent="#conversation",tn=Z("dd"),en=X(Ft),rn=nn(),an=Z("h2"),un=X(Kt),sn=nn(),fn=Z("p"),ln=X(Wt),dn=nn(),pn=Z("dl"),hn=Z("dt"),gn=Z("dd"),vn=X(Gt),$n=Z("dt"),yn=X(Yt),bn=Z("dd"),wn=X(Jt),_n=Z("dt"),kn=X(Vt),xn=Z("dd"),En=Z("dt"),Sn=X(Zt),On=Z("dd"),(Cn=Z("dt")).textContent="https://...",Nn=Z("dd"),Rn=X(ne),An=nn(),Dn=Z("h2"),jn=X(te),Tn=nn(),Ln=Z("p"),Pn=nn(),Mn=Z("dl");for(var O=0;O<de.length;O+=1)de[O].c();In=nn(),Un=Z("h2"),Hn=X(re),Bn=nn(),zn=Z("ul"),qn=Z("li"),Fn=Z("a"),Kn=X(oe),Wn=nn(),Jn=Z("li"),Vn=Z("a"),Qn=X(ie),Zn=nn(),Xn=Z("li"),rt=Z("a"),ot=X(ae),it=nn(),at=Z("li"),ct=Z("a"),ut=X(ce),ft=nn(),$e&&$e.c(),lt=nn(),dt=Z("li"),pt=Z("a"),mt=X(se),ht=nn(),gt=Z("h2"),vt=X(fe),$t=nn(),yt=Z("ul"),bt=Z("li"),nt(wt.$$.fragment),_t=nn(),kt=Z("li"),nt(xt.$$.fragment),Et=nn(),St=Z("li"),nt(Ot.$$.fragment),i=new mn(a),c=new mn(null),on(s,"id","quick-search"),on(A,"id","autocomplete"),on(an,"id","formatting"),on(Dn,"id","commands"),on(Un,"id","resources"),on(Fn,"href",n[2]),on(Fn,"target","_blank"),on(Vn,"href","https://convos.chat"),on(Vn,"target","_blank"),on(rt,"href","https://github.com/convos-chat/convos/issues"),on(rt,"target","_blank"),on(ct,"href","https://github.com/convos-chat/convos"),on(ct,"target","_blank"),on(pt,"href",zt("contact")),on(pt,"target","_blank"),on(gt,"id","fallback"),on(r,"class","main")},m:function(O,V){tt(t,O,V),J(O,e,V),J(O,r,V),Y(r,o),i.m(Nt,o),Y(o,a),c.m(Rt,o),Y(r,u),Y(r,s),Y(s,f),Y(r,l),Y(r,d),Y(d,p),Y(r,m),Y(r,h),Y(h,g),Y(h,v),Y(v,$),Y(h,y),Y(h,b),Y(b,w),Y(h,_),Y(h,k),Y(k,x),Y(h,E),Y(E,S),Y(h,C),Y(C,N),Y(r,R),Y(r,A),Y(A,D),Y(r,j),Y(r,T),Y(T,L),Y(r,P),Y(r,M),Y(M,I),Y(M,U),Y(U,H),Y(M,B),Y(M,z),Y(z,q),Y(M,F),Y(M,K),Y(K,W),Y(M,G),Y(M,tn),Y(tn,en),Y(r,rn),Y(r,an),Y(an,un),Y(r,sn),Y(r,fn),Y(fn,ln),Y(r,dn),Y(r,pn),Y(pn,hn),hn.innerHTML=n[3],Y(pn,gn),Y(gn,vn),Y(pn,$n),Y($n,yn),Y(pn,bn),Y(bn,wn),Y(pn,_n),Y(_n,kn),Y(pn,xn),xn.innerHTML=Qt,Y(pn,En),Y(En,Sn),Y(pn,On),On.innerHTML=Xt,Y(pn,Cn),Y(pn,Nn),Y(Nn,Rn),Y(r,An),Y(r,Dn),Y(Dn,jn),Y(r,Tn),Y(r,Ln),Ln.innerHTML=ee,Y(r,Pn),Y(r,Mn);for(var Q=0;Q<de.length;Q+=1)de[Q].m(Mn,null);Y(r,In),Y(r,Un),Y(Un,Hn),Y(r,Bn),Y(r,zn),Y(zn,qn),Y(qn,Fn),Y(Fn,Kn),Y(zn,Wn),Y(zn,Jn),Y(Jn,Vn),Y(Vn,Qn),Y(zn,Zn),Y(zn,Xn),Y(Xn,rt),Y(rt,ot),Y(zn,it),Y(zn,at),Y(at,ct),Y(ct,ut),Y(zn,ft),$e&&$e.m(zn,null),Y(zn,lt),Y(zn,dt),Y(dt,pt),Y(pt,mt),Y(r,ht),Y(r,gt),Y(gt,vt),Y(r,$t),Y(r,yt),Y(yt,bt),tt(wt,bt,null),Y(yt,_t),Y(yt,kt),tt(xt,kt,null),Y(yt,Et),Y(yt,St),tt(Ot,St,null),Ct=!0},p:function(n,e){var r=st(e,1)[0],o={};if(257&r&&(o.$$scope={dirty:r,ctx:n}),t.$set(o),(!Ct||2&r)&&Nt!==(Nt=n[1]('Got any questions? Come and talk to us in the "#convos" channel on https://freenode.net.')+"")&&i.p(Nt),(!Ct||2&r)&&Rt!==(Rt=n[1]("More information can also be found on https://convos.chat.")+"")&&c.p(Rt),(!Ct||1&r)&&At!==(At=n[0]("Quick search")+"")&&cn(f,At),(!Ct||1&r)&&Dt!==(Dt=n[0]("Pressing `shift+enter` will shift focus between chat input and search in sidebar.")+"")&&cn(p,Dt),(!Ct||1&r)&&jt!==(jt=n[0]("Filter conversations with unread messages.")+"")&&cn($,jt),(!Ct||1&r)&&Tt!==(Tt=n[0]("Filter private conversations with unread messages.")+"")&&cn(w,Tt),(!Ct||1&r)&&Lt!==(Lt=n[0]("Filter channels with unread messages.")+"")&&cn(x,Lt),(!Ct||1&r)&&Pt!==(Pt=n[0]("Any other combination")+"")&&cn(S,Pt),(!Ct||1&r)&&Mt!==(Mt=n[0]("Filter channels, private conversations or search for a string.")+"")&&cn(N,Mt),(!Ct||1&r)&&It!==(It=n[0]("Autocomplete")+"")&&cn(D,It),(!Ct||1&r)&&Ut!==(Ut=n[0]("The following rules apply when typing a message:")+"")&&cn(L,Ut),(!Ct||1&r)&&Ht!==(Ht=n[0]('"@" followed by a character will show matching nicks in the current conversation.')+"")&&cn(H,Ht),(!Ct||1&r)&&Bt!==(Bt=n[0]('":" followed by a character will show matching emojis.')+"")&&cn(q,Bt),(!Ct||1&r)&&qt!==(qt=n[0]('"/" will show the available commands.')+"")&&cn(W,qt),(!Ct||1&r)&&Ft!==(Ft=n[0]('"#" will show the matching conversation names.')+"")&&cn(en,Ft),(!Ct||1&r)&&Kt!==(Kt=n[0]("Text formatting")+"")&&cn(un,Kt),(!Ct||1&r)&&Wt!==(Wt=n[0]("Convos supports some special way of formatting text:")+"")&&cn(ln,Wt),(!Ct||1&r)&&Gt!==(Gt=n[0]("Will be automatically converted into emojis.")+"")&&cn(vn,Gt),(!Ct||1&r)&&Yt!==(Yt=n[0]("> some text")+"")&&cn(yn,Yt),(!Ct||1&r)&&Jt!==(Jt=n[0]('A line starting with ">" will be converted into a quote.')+"")&&cn(wn,Jt),(!Ct||1&r)&&Vt!==(Vt=n[0]("*some text*, **some text**, ***some text***")+"")&&cn(kn,Vt),(!Ct||2&r)&&Qt!==(Qt=n[1]('Using "*" around some text, will convert it into *italic*, **bold** or ***italic bold***.')+"")&&(xn.innerHTML=Qt),(!Ct||1&r)&&Zt!==(Zt=n[0]("`some fragment`")+"")&&cn(Sn,Zt),(!Ct||2&r)&&Xt!==(Xt=n[1]("Using backticks around some text, will format it as a `code fragment`.")+"")&&(On.innerHTML=Xt),(!Ct||1&r)&&ne!==(ne=n[0]("URLs will be converted to links, and might be embedded in the chat.")+"")&&cn(Rn,ne),(!Ct||1&r)&&te!==(te=n[0]("Available commands")+"")&&cn(jn,te),(!Ct||2&r)&&ee!==(ee=n[1]('Any message starting with a-z is prefixed with "`/quote`", when sending from a connection conversation.')+"")&&(Ln.innerHTML=ee),1&r){var a;for(le=qe,a=0;a<le.length;a+=1){var u=Tu(n,le,a);de[a]?de[a].p(u,r):(de[a]=Pu(u),de[a].c(),de[a].m(Mn,null))}for(;a<de.length;a+=1)de[a].d(1);de.length=le.length}(!Ct||1&r)&&re!==(re=n[0]("Other resources")+"")&&cn(Hn,re),(!Ct||1&r)&&oe!==(oe=n[0]("Changelog for v%1",zt("version"))+"")&&cn(Kn,oe),(!Ct||1&r)&&ie!==(ie=n[0]("Project homepage")+"")&&cn(Qn,ie),(!Ct||1&r)&&ae!==(ae=n[0]("Bug/issue tracker")+"")&&cn(ot,ae),(!Ct||1&r)&&ce!==(ce=n[0]("Source code")+"")&&cn(ut,ce),ue&&$e.p(n,r),(!Ct||1&r)&&se!==(se=n[0]("Contact admin")+"")&&cn(mt,se),(!Ct||1&r)&&fe!==(fe=n[0]("Demo error pages")+"")&&cn(vt,fe);var s={};256&r&&(s.$$scope={dirty:r,ctx:n}),wt.$set(s);var l={};256&r&&(l.$$scope={dirty:r,ctx:n}),xt.$set(l);var d={};256&r&&(d.$$scope={dirty:r,ctx:n}),Ot.$set(d)},i:function(n){Ct||(Gn(t.$$.fragment,n),Gn(wt.$$.fragment,n),Gn(xt.$$.fragment,n),Gn(Ot.$$.fragment,n),Ct=!0)},o:function(n){Yn(t.$$.fragment,n),Yn(wt.$$.fragment,n),Yn(xt.$$.fragment,n),Yn(Ot.$$.fragment,n),Ct=!1},d:function(n){et(t,n),n&&V(e),n&&V(r),Q(de,n),$e&&$e.d(),et(wt),et(xt),et(Ot)}}}function Bu(n,t,e){var r,o;P(n,Be,(function(n){return e(0,r=n)})),P(n,ze,(function(n){return e(1,o=n)}));var i="https://github.com/convos-chat/convos/blob/v"+zt("version")+"/Changes#L3",a=Object.keys(He.emojis.aliases).sort().join(", ");return[r,o,i,a,"Help"]}var zu=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(ju()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,Bu,Hu,j,{title:4}),t}return S(i,[{key:"title",get:function(){return this.$$.ctx[4]}}]),i}(it);function qu(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Fu(n,t,e){var r=n.slice();return r[16]=t[e],r}function Ku(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,m,h=n[1]("Sign up")+"",g=n[1]("Please ask your Convos admin for an invite link to sign up, or sign in if you already have an account.")+"",v=n[1]("Contact admin")+"";return s=new $t({props:{name:"paper-plane"}}),p=new Ii({props:{href:"/login",$$slots:{default:[Ju]},$$scope:{ctx:n}}}),{c:function(){t=Z("h2"),e=X(h),r=nn(),o=Z("p"),i=X(g),a=nn(),c=Z("div"),u=Z("a"),nt(s.$$.fragment),f=nn(),l=X(v),d=nn(),nt(p.$$.fragment),on(u,"class","btn"),on(u,"href",zt("contact")),on(c,"class","form-actions")},m:function(n,h){J(n,t,h),Y(t,e),J(n,r,h),J(n,o,h),Y(o,i),J(n,a,h),J(n,c,h),Y(c,u),tt(s,u,null),Y(u,f),Y(u,l),Y(c,d),tt(p,c,null),m=!0},p:function(n,t){(!m||2&t)&&h!==(h=n[1]("Sign up")+"")&&cn(e,h),(!m||2&t)&&g!==(g=n[1]("Please ask your Convos admin for an invite link to sign up, or sign in if you already have an account.")+"")&&cn(i,g),(!m||2&t)&&v!==(v=n[1]("Contact admin")+"")&&cn(l,v);var r={};524290&t&&(r.$$scope={dirty:t,ctx:n}),p.$set(r)},i:function(n){m||(Gn(s.$$.fragment,n),Gn(p.$$.fragment,n),m=!0)},o:function(n){Yn(s.$$.fragment,n),Yn(p.$$.fragment,n),m=!1},d:function(n){n&&V(t),n&&V(r),n&&V(o),n&&V(a),n&&V(c),et(s),et(p)}}}function Wu(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,m,h=n[1]("Sign in")+"";return o=new Go({props:{type:"email",name:"email",form:n[4],placeholder:n[1]("Ex: john@doe.com"),$$slots:{label:[Vu]},$$scope:{ctx:n}}}),a=new Go({props:{type:"password",name:"password",form:n[4],autocomplete:"current-password",$$slots:{help:[Zu],label:[Qu]},$$scope:{ctx:n}}}),s=new ce({props:{icon:"sign-in-alt",op:n[6],$$slots:{default:[Xu]},$$scope:{ctx:n}}}),l=new Ii({props:{href:"/register",$$slots:{default:[ns]},$$scope:{ctx:n}}}),p=new xo({props:{op:n[6],success:"Loading Convos..."}}),{c:function(){t=Z("h2"),e=X(h),r=nn(),nt(o.$$.fragment),i=nn(),nt(a.$$.fragment),c=nn(),u=Z("div"),nt(s.$$.fragment),f=nn(),nt(l.$$.fragment),d=nn(),nt(p.$$.fragment),on(u,"class","form-actions")},m:function(n,h){J(n,t,h),Y(t,e),J(n,r,h),tt(o,n,h),J(n,i,h),tt(a,n,h),J(n,c,h),J(n,u,h),tt(s,u,null),Y(u,f),tt(l,u,null),J(n,d,h),tt(p,n,h),m=!0},p:function(n,t){(!m||2&t)&&h!==(h=n[1]("Sign in")+"")&&cn(e,h);var r={};2&t&&(r.placeholder=n[1]("Ex: john@doe.com")),524290&t&&(r.$$scope={dirty:t,ctx:n}),o.$set(r);var i={};524294&t&&(i.$$scope={dirty:t,ctx:n}),a.$set(i);var c={};524290&t&&(c.$$scope={dirty:t,ctx:n}),s.$set(c);var u={};524290&t&&(u.$$scope={dirty:t,ctx:n}),l.$set(u)},i:function(n){m||(Gn(o.$$.fragment,n),Gn(a.$$.fragment,n),Gn(s.$$.fragment,n),Gn(l.$$.fragment,n),Gn(p.$$.fragment,n),m=!0)},o:function(n){Yn(o.$$.fragment,n),Yn(a.$$.fragment,n),Yn(s.$$.fragment,n),Yn(l.$$.fragment,n),Yn(p.$$.fragment,n),m=!1},d:function(n){n&&V(t),n&&V(r),et(o,n),n&&V(i),et(a,n),n&&V(c),n&&V(u),et(s),et(l),n&&V(d),et(p,n)}}}function Gu(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,m,h,g,v,$,y=("recover"==n[0]?n[1]("Recover account"):n[1]("Sign up"))+"",b=zt("first_user"),w=!zt("first_user"),_=b&&function(n){var t,e,r=n[1]('As you are the first user, you do not need any invitation link. Just fill in the form below, hit "Sign up" to start chatting.')+"";return{c:function(){t=Z("p"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]('As you are the first user, you do not need any invitation link. Just fill in the form below, hit "Sign up" to start chatting.')+"")&&cn(e,r)},d:function(n){n&&V(t)}}}(n);i=new zi({props:{name:"exp",form:n[4]}}),c=new zi({props:{name:"token",form:n[4]}}),s=new Go({props:{type:"email",name:"email",form:n[4],placeholder:n[1]("Ex: john@doe.com"),readonly:"register"!=n[0],$$slots:{help:[es],label:[ts]},$$scope:{ctx:n}}}),l=new Go({props:{type:"password",name:"password",form:n[4],$$slots:{help:[os],label:[rs]},$$scope:{ctx:n}}}),m=new ce({props:{icon:"save",op:n[7],$$slots:{default:[is]},$$scope:{ctx:n}}});var k=w&&function(n){var t,e;return t=new Ii({props:{href:"/login",$$slots:{default:[as]},$$scope:{ctx:n}}}),{c:function(){nt(t.$$.fragment)},m:function(n,r){tt(t,n,r),e=!0},p:function(n,e){var r={};524290&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(Gn(t.$$.fragment,n),e=!0)},o:function(n){Yn(t.$$.fragment,n),e=!1},d:function(n){et(t,n)}}}(n);return v=new xo({props:{op:n[7],success:"Loading Convos..."}}),{c:function(){t=Z("h2"),e=X(y),r=nn(),_&&_.c(),o=nn(),nt(i.$$.fragment),a=nn(),nt(c.$$.fragment),u=nn(),nt(s.$$.fragment),f=nn(),nt(l.$$.fragment),d=nn(),p=Z("div"),nt(m.$$.fragment),h=nn(),k&&k.c(),g=nn(),nt(v.$$.fragment),on(p,"class","form-actions")},m:function(n,y){J(n,t,y),Y(t,e),J(n,r,y),_&&_.m(n,y),J(n,o,y),tt(i,n,y),J(n,a,y),tt(c,n,y),J(n,u,y),tt(s,n,y),J(n,f,y),tt(l,n,y),J(n,d,y),J(n,p,y),tt(m,p,null),Y(p,h),k&&k.m(p,null),J(n,g,y),tt(v,n,y),$=!0},p:function(n,t){(!$||3&t)&&y!==(y=("recover"==n[0]?n[1]("Recover account"):n[1]("Sign up"))+"")&&cn(e,y),b&&_.p(n,t);var r={};2&t&&(r.placeholder=n[1]("Ex: john@doe.com")),1&t&&(r.readonly="register"!=n[0]),524291&t&&(r.$$scope={dirty:t,ctx:n}),s.$set(r);var o={};524290&t&&(o.$$scope={dirty:t,ctx:n}),l.$set(o);var i={};524291&t&&(i.$$scope={dirty:t,ctx:n}),m.$set(i),w&&k.p(n,t)},i:function(n){$||(Gn(i.$$.fragment,n),Gn(c.$$.fragment,n),Gn(s.$$.fragment,n),Gn(l.$$.fragment,n),Gn(m.$$.fragment,n),Gn(k),Gn(v.$$.fragment,n),$=!0)},o:function(n){Yn(i.$$.fragment,n),Yn(c.$$.fragment,n),Yn(s.$$.fragment,n),Yn(l.$$.fragment,n),Yn(m.$$.fragment,n),Yn(k),Yn(v.$$.fragment,n),$=!1},d:function(n){n&&V(t),n&&V(r),_&&_.d(n),n&&V(o),et(i,n),n&&V(a),et(c,n),n&&V(u),et(s,n),n&&V(f),et(l,n),n&&V(d),n&&V(p),et(m),k&&k.d(),n&&V(g),et(v,n)}}}function Yu(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,m,h,g=n[1]("Invalid invite/recover URL")+"",v=n[1](410==zt("status")?"The link has expired.":"The link is invalid.")+"",$=n[1]("Please ask your Convos admin for a new link.")+"",y=n[1]("Contact admin")+"";return m=new Ii({props:{href:"/login",$$slots:{default:[cs]},$$scope:{ctx:n}}}),{c:function(){t=Z("h2"),e=X(g),r=nn(),o=Z("p"),i=X(v),a=nn(),c=Z("p"),u=X($),s=nn(),f=Z("p"),l=Z("a"),d=X(y),p=nn(),nt(m.$$.fragment),on(l,"class","btn"),on(l,"href",zt("contact"))},m:function(n,g){J(n,t,g),Y(t,e),J(n,r,g),J(n,o,g),Y(o,i),J(n,a,g),J(n,c,g),Y(c,u),J(n,s,g),J(n,f,g),Y(f,l),Y(l,d),Y(f,p),tt(m,f,null),h=!0},p:function(n,t){(!h||2&t)&&g!==(g=n[1]("Invalid invite/recover URL")+"")&&cn(e,g),(!h||2&t)&&v!==(v=n[1](410==zt("status")?"The link has expired.":"The link is invalid.")+"")&&cn(i,v),(!h||2&t)&&$!==($=n[1]("Please ask your Convos admin for a new link.")+"")&&cn(u,$),(!h||2&t)&&y!==(y=n[1]("Contact admin")+"")&&cn(d,y);var r={};524290&t&&(r.$$scope={dirty:t,ctx:n}),m.$set(r)},i:function(n){h||(Gn(m.$$.fragment,n),h=!0)},o:function(n){Yn(m.$$.fragment,n),h=!1},d:function(n){n&&V(t),n&&V(r),n&&V(o),n&&V(a),n&&V(c),n&&V(s),n&&V(f),et(m)}}}function Ju(n){var t,e=n[1]("Sign in")+"";return{c:function(){t=X(e)},m:function(n,e){J(n,t,e)},p:function(n,r){2&r&&e!==(e=n[1]("Sign in")+"")&&cn(t,e)},d:function(n){n&&V(t)}}}function Vu(n){var t,e,r=n[1]("Email")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Email")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Qu(n){var t,e,r=n[1]("Password")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Password")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Zu(n){var t,e=n[2]("Contact your [Convos admin](%1) if you have forgotten your password.",zt("contact"))+"";return{c:function(){on(t=Z("p"),"class","help"),on(t,"slot","help")},m:function(n,r){J(n,t,r),t.innerHTML=e},p:function(n,r){4&r&&e!==(e=n[2]("Contact your [Convos admin](%1) if you have forgotten your password.",zt("contact"))+"")&&(t.innerHTML=e)},d:function(n){n&&V(t)}}}function Xu(n){var t,e,r=n[1]("Sign in")+"";return{c:function(){t=Z("span"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Sign in")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function ns(n){var t,e=n[1]("Sign up")+"";return{c:function(){t=X(e)},m:function(n,e){J(n,t,e)},p:function(n,r){2&r&&e!==(e=n[1]("Sign up")+"")&&cn(t,e)},d:function(n){n&&V(t)}}}function ts(n){var t,e,r=n[1]("Email")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Email")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function es(n){var t,e,r=("invitation"==n[0]?n[1]("Your email is from the invite link."):n[1]("Your email will be used if you forget your password."))+"";return{c:function(){t=Z("p"),e=X(r),on(t,"class","help"),on(t,"slot","help")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){3&t&&r!==(r=("invitation"==n[0]?n[1]("Your email is from the invite link."):n[1]("Your email will be used if you forget your password."))+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function rs(n){var t,e,r=n[1]("Password")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Password")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function os(n){var t,e,r=n[1]("Hint: Use a phrase from a book.")+"";return{c:function(){t=Z("p"),e=X(r),on(t,"class","help"),on(t,"slot","help")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Hint: Use a phrase from a book.")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function is(n){var t,e,r=("recover"==n[0]?n[1]("Set new password"):n[1]("Sign up"))+"";return{c:function(){t=Z("span"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){3&t&&r!==(r=("recover"==n[0]?n[1]("Set new password"):n[1]("Sign up"))+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function as(n){var t,e=n[1]("Sign in")+"";return{c:function(){t=X(e)},m:function(n,e){J(n,t,e)},p:function(n,r){2&r&&e!==(e=n[1]("Sign in")+"")&&cn(t,e)},d:function(n){n&&V(t)}}}function cs(n){var t,e=n[1]("Sign in")+"";return{c:function(){t=X(e)},m:function(n,e){J(n,t,e)},p:function(n,r){2&r&&e!==(e=n[1]("Sign in")+"")&&cn(t,e)},d:function(n){n&&V(t)}}}function us(n){var t,e,r,o,i,a=n[16][1]+"";function c(){return n[12](n[16])}return{c:function(){t=Z("a"),e=X(a),on(t,"href",r="#"+n[16][0])},m:function(n,r){J(n,t,r),Y(t,e),o||(i=en(t,"click",c),o=!0)},p:function(o,i){n=o,8&i&&a!==(a=n[16][1]+"")&&cn(e,a),8&i&&r!==(r="#"+n[16][0])&&on(t,"href",r)},d:function(n){n&&V(t),o=!1,i()}}}function ss(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,m,h;r=new zi({props:{name:"mode",form:n[4]}});var g=[Yu,Gu,Wu,Ku],v=[];function $(n,t){return"invalid_invitation"==n[0]?0:(1&t&&(i=!(-1==["recover","invitation","register"].indexOf(n[0]))),i?1:"login"==n[0]?2:3)}a=$(n,-1),c=v[a]=g[a](n),l=new $t({props:{name:"globe"}});for(var y=n[3].languageOptions,b=[],w=0;w<y.length;w+=1)b[w]=us(Fu(n,y,w));return{c:function(){t=Z("main"),e=Z("form"),nt(r.$$.fragment),o=nn(),c.c(),u=nn(),s=Z("div"),f=Z("footer"),nt(l.$$.fragment),d=nn();for(var n=0;n<b.length;n+=1)b[n].c();on(e,"method","post"),on(t,"class","cms-main"),on(f,"class","footer language-selector"),on(s,"class","footer--wrapper is-small")},m:function(i,c){J(i,t,c),Y(t,e),tt(r,e,null),Y(e,o),v[a].m(e,null),J(i,u,c),J(i,s,c),Y(s,f),tt(l,f,null),Y(f,d);for(var g=0;g<b.length;g+=1)b[g].m(f,null);p=!0,m||(h=en(e,"submit",rn(n[8])),m=!0)},p:function(n,t){var r=st(t,1)[0],o=a;if((a=$(n,r))===o?v[a].p(n,r):(Kn(),Yn(v[o],1,1,(function(){v[o]=null})),Wn(),(c=v[a])?c.p(n,r):(c=v[a]=g[a](n)).c(),Gn(c,1),c.m(e,null)),8&r){var i;for(y=n[3].languageOptions,i=0;i<y.length;i+=1){var u=Fu(n,y,i);b[i]?b[i].p(u,r):(b[i]=us(u),b[i].c(),b[i].m(f,null))}for(;i<b.length;i+=1)b[i].d(1);b.length=y.length}},i:function(n){p||(Gn(r.$$.fragment,n),Gn(c),Gn(l.$$.fragment,n),p=!0)},o:function(n){Yn(r.$$.fragment,n),Yn(c),Yn(l.$$.fragment,n),p=!1},d:function(n){n&&V(t),et(r),v[a].d(),n&&V(u),n&&V(s),et(l),Q(b,n),m=!1,h()}}}function fs(n,t,e){var r,o,i,a,c,u;P(n,Ae,(function(n){return e(11,i=n)})),P(n,Be,(function(n){return e(1,a=n)})),P(n,ze,(function(n){return e(2,c=n)})),P(n,He,(function(n){return e(3,u=n)}));var s=t.title,l=void 0===s?"Sign in":s,p=En("api"),m=Qo(),h=En("user");P(n,h,(function(n){return e(10,o=n)}));var g=p("loginUser"),v=p("registerUser");function $(){return($=d(f.mark((function n(){var t;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t="login"==r?g:v,n.next=3,t.perform(m.get());case 3:if("login"!=r&&Ae.update({lastUrl:""}),t.error()){n.next=7;break}return n.next=7,h.load();case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return n.$$set=function(n){"title"in n&&e(9,l=n.title)},n.$$.update=function(){1024&n.$$.dirty&&function(n){if(!n.is("loading")&&n.email){var t=n.conversations()[0],e=n.lastUrl?n.lastUrl:t?t.path:"/settings/connections";Ae.go(e,{replace:!0})}}(o),2048&n.$$.dirty&&e(0,r=function(n){var t=-1!=n.path.indexOf("register"),r=!m.get("mode")&&zt("status")>=400?"invalid_invitation":n.param("email")&&zt("existing_user")?"recover":n.param("email")?"invitation":zt("first_user")||t&&zt("open_to_public")?"register":t?"invalid":"login";return m.set({email:n.param("email")||m.get("email")||"",exp:n.param("exp")||"",mode:r,token:n.param("token")||""}),e(9,l="login"==r?"Sign in":"Sign up"),"ontouchstart"in window||setTimeout((function(){return Ht(document,".text-field input").reverse().map((function(n){return n.readOnly||n.focus()}))}),1),r}(i))},[r,a,c,u,m,h,g,v,function(){return $.apply(this,arguments)},l,o,i,function(n){return u.load(n[0])}]}var ls=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(qu()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,fs,ss,j,{title:9}),t}return i}(it);function ds(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function ps(n,t,e){var r=n.slice();return r[8]=t[e],r[10]=e,r}function ms(n){var t,e,r=n[3]("Notifications")+"";return{c:function(){t=Z("h1"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){8&t&&r!==(r=n[3]("Notifications")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function hs(n){var t,e,r=n[3]("No notifications.")+"";return{c:function(){t=Z("h2"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){8&t&&r!==(r=n[3]("No notifications.")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function gs(n){var t,e,r,o,i,a,c,u=n[8].ts.getHumanDate()+"";return r=new $t({props:{name:"calendar-alt"}}),{c:function(){t=Z("div"),e=Z("span"),nt(r.$$.fragment),o=nn(),i=Z("i"),a=X(u),on(t,"class","message__status-line for-day-changed")},m:function(n,u){J(n,t,u),Y(t,e),tt(r,e,null),Y(e,o),Y(e,i),Y(i,a),c=!0},p:function(n,t){(!c||16&t)&&u!==(u=n[8].ts.getHumanDate()+"")&&cn(a,u)},i:function(n){c||(Gn(r.$$.fragment,n),c=!0)},o:function(n){Yn(r.$$.fragment,n),c=!1},d:function(n){n&&V(t),et(r)}}}function vs(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,m,h,g,v,$,y=n[8].ts.toLocaleString()+"",b=n[3]("%1 in %2",n[8].from,n[8].conversation_id)+"",w=n[8].markdown+"",_=(!n[10]||n[8].dayChanged)&&gs(n);return r=new $t({props:{name:"pick:"+n[8].from,color:n[8].color}}),{c:function(){_&&_.c(),t=nn(),e=Z("div"),nt(r.$$.fragment),o=nn(),i=Z("div"),a=Z("div"),c=X(y),s=nn(),f=Z("a"),l=X(b),p=nn(),m=Z("div"),on(i,"class","message__ts has-tooltip"),on(i,"data-content",u=n[8].ts.format("%H:%M")),on(f,"href",d=Ze(n[8])),on(f,"class","message__from"),sn(f,"color",n[8].color),on(m,"class","message__text"),on(e,"class",h=n[8].className)},m:function(n,u){_&&_.m(n,u),J(n,t,u),J(n,e,u),tt(r,e,null),Y(e,o),Y(e,i),Y(i,a),Y(a,c),Y(e,s),Y(e,f),Y(f,l),Y(e,p),Y(e,m),m.innerHTML=w,g=!0,v||($=en(e,"click",Xe),v=!0)},p:function(n,o){!n[10]||n[8].dayChanged?_?(_.p(n,o),16&o&&Gn(_,1)):((_=gs(n)).c(),Gn(_,1),_.m(t.parentNode,t)):_&&(Kn(),Yn(_,1,1,(function(){_=null})),Wn());var a={};16&o&&(a.name="pick:"+n[8].from),16&o&&(a.color=n[8].color),r.$set(a),(!g||16&o)&&y!==(y=n[8].ts.toLocaleString()+"")&&cn(c,y),(!g||16&o&&u!==(u=n[8].ts.format("%H:%M")))&&on(i,"data-content",u),(!g||24&o)&&b!==(b=n[3]("%1 in %2",n[8].from,n[8].conversation_id)+"")&&cn(l,b),(!g||16&o&&d!==(d=Ze(n[8])))&&on(f,"href",d),(!g||16&o)&&sn(f,"color",n[8].color),(!g||16&o)&&w!==(w=n[8].markdown+"")&&(m.innerHTML=w),(!g||16&o&&h!==(h=n[8].className))&&on(e,"class",h)},i:function(n){g||(Gn(_),Gn(r.$$.fragment,n),g=!0)},o:function(n){Yn(_),Yn(r.$$.fragment,n),g=!1},d:function(n){_&&_.d(n),n&&V(t),n&&V(e),et(r),v=!1,$()}}}function $s(n){var t,e,r,o,i,a,c,u=n[3]("Loading...")+"";return r=new $t({props:{name:"spinner",animation:"spin"}}),{c:function(){t=Z("div"),e=Z("span"),nt(r.$$.fragment),o=nn(),i=Z("i"),a=X(u),on(t,"class","message__status-line for-loading")},m:function(n,u){J(n,t,u),Y(t,e),tt(r,e,null),Y(e,o),Y(e,i),Y(i,a),c=!0},p:function(n,t){(!c||8&t)&&u!==(u=n[3]("Loading...")+"")&&cn(a,u)},i:function(n){c||(Gn(r.$$.fragment,n),c=!0)},o:function(n){Yn(r.$$.fragment,n),c=!1},d:function(n){n&&V(t),et(r)}}}function ys(n){for(var t,e,r,o,i=0==n[4].length&&!n[5].is("loading"),a=n[1].is("loading"),c=i&&hs(n),u=n[4].render(),s=[],f=0;f<u.length;f+=1)s[f]=vs(ps(n,u,f));var l=function(n){return Yn(s[n],1,1,(function(){s[n]=null}))},d=a&&$s(n);return{c:function(){c&&c.c(),t=nn();for(var n=0;n<s.length;n+=1)s[n].c();e=nn(),d&&d.c(),r=tn()},m:function(n,i){c&&c.m(n,i),J(n,t,i);for(var a=0;a<s.length;a+=1)s[a].m(n,i);J(n,e,i),d&&d.m(n,i),J(n,r,i),o=!0},p:function(n,o){if(16&o&&(i=0==n[4].length&&!n[5].is("loading")),i?c?c.p(n,o):((c=hs(n)).c(),c.m(t.parentNode,t)):c&&(c.d(1),c=null),24&o){var f;for(u=n[4].render(),f=0;f<u.length;f+=1){var p=ps(n,u,f);s[f]?(s[f].p(p,o),Gn(s[f],1)):(s[f]=vs(p),s[f].c(),Gn(s[f],1),s[f].m(e.parentNode,e))}for(Kn(),f=u.length;f<s.length;f+=1)l(f);Wn()}2&o&&(a=n[1].is("loading")),a?d?(d.p(n,o),2&o&&Gn(d,1)):((d=$s(n)).c(),Gn(d,1),d.m(r.parentNode,r)):d&&(Kn(),Yn(d,1,1,(function(){d=null})),Wn())},i:function(n){if(!o){for(var t=0;t<u.length;t+=1)Gn(s[t]);Gn(d),o=!0}},o:function(n){s=s.filter(Boolean);for(var t=0;t<s.length;t+=1)Yn(s[t]);Yn(d),o=!1},d:function(n){c&&c.d(n),n&&V(t),Q(s,n),n&&V(e),d&&d.d(n),n&&V(r)}}}function bs(n){var t,e,r,o;return t=new ye({props:{$$slots:{default:[ms]},$$scope:{ctx:n}}}),(r=new ha({props:{class:n[2].join(" "),$$slots:{default:[ys]},$$scope:{ctx:n}}})).$on("rendered",ws),{c:function(){nt(t.$$.fragment),e=nn(),nt(r.$$.fragment)},m:function(n,i){tt(t,n,i),J(n,e,i),tt(r,n,i),o=!0},p:function(n,e){var o=st(e,1)[0],i={};2056&o&&(i.$$scope={dirty:o,ctx:n}),t.$set(i);var a={};4&o&&(a.class=n[2].join(" ")),2074&o&&(a.$$scope={dirty:o,ctx:n}),r.$set(a)},i:function(n){o||(Gn(t.$$.fragment,n),Gn(r.$$.fragment,n),o=!0)},o:function(n){Yn(t.$$.fragment,n),Yn(r.$$.fragment,n),o=!1},d:function(n){et(t,n),n&&V(e),et(r,n)}}}var ws=function(n){return n.detail.scrollTo(-1)};function _s(n,t,e){var r,o,i,a,c,u=O;P(n,Be,(function(n){return e(3,a=n)})),n.$$.on_destroy.push((function(){return u()}));var s=En("user").notifications;return P(n,s,(function(n){return e(1,i=n)})),kn((function(){return s.markAsRead()})),_n((function(){return s.load()})),n.$$.update=function(){2&n.$$.dirty&&(e(0,o=i.messages),u(),u=T(o,(function(n){return e(4,c=n)}))),1&n.$$.dirty&&e(2,r=["main",o.length&&"has-results"].filter((function(n){return n})))},[o,i,r,a,c,s,"Notifications"]}var ks=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(ds()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,_s,bs,j,{title:6}),t}return S(i,[{key:"title",get:function(){return this.$$.ctx[6]}}]),i}(it);function xs(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Es(n,t,e){var r=n.slice();return r[11]=t[e],r[13]=e,r}function Ss(n){var t,e,r=n[3](n[7].name)+"";return{c:function(){t=Z("h1"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){8&t&&r!==(r=n[3](n[7].name)+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Os(n){var t,e,r,o,i,a=[Ns,Cs],c=[];function u(n,e){return 32&e&&(t=!!n[5].param("q")),t?0:1}return e=u(n,-1),r=c[e]=a[e](n),{c:function(){r.c(),o=tn()},m:function(n,t){c[e].m(n,t),J(n,o,t),i=!0},p:function(n,t){var i=e;(e=u(n,t))===i?c[e].p(n,t):(Kn(),Yn(c[i],1,1,(function(){c[i]=null})),Wn(),(r=c[e])?r.p(n,t):(r=c[e]=a[e](n)).c(),Gn(r,1),r.m(o.parentNode,o))},i:function(n){i||(Gn(r),i=!0)},o:function(n){Yn(r),i=!1},d:function(n){c[e].d(n),n&&V(o)}}}function Cs(n){var t,e,r,o,i,a=n[6]("You can enter a channel name like #cool_beans to narrow down the search, or enter @some_nick to filter messages sent by a given user.")+"";return e=new $t({props:{name:"info-circle"}}),{c:function(){t=Z("p"),nt(e.$$.fragment),r=nn(),o=new mn(null)},m:function(n,c){J(n,t,c),tt(e,t,null),Y(t,r),o.m(a,t),i=!0},p:function(n,t){(!i||64&t)&&a!==(a=n[6]("You can enter a channel name like #cool_beans to narrow down the search, or enter @some_nick to filter messages sent by a given user.")+"")&&o.p(a)},i:function(n){i||(Gn(e.$$.fragment,n),i=!0)},o:function(n){Yn(e.$$.fragment,n),i=!1},d:function(n){n&&V(t),et(e)}}}function Ns(n){var t,e,r,o,i,a=n[3]('No search results for "%1".',n[5].param("q"))+"";return e=new $t({props:{name:"info-circle"}}),{c:function(){t=Z("p"),nt(e.$$.fragment),r=nn(),o=X(a)},m:function(n,a){J(n,t,a),tt(e,t,null),Y(t,r),Y(t,o),i=!0},p:function(n,t){(!i||40&t)&&a!==(a=n[3]('No search results for "%1".',n[5].param("q"))+"")&&cn(o,a)},i:function(n){i||(Gn(e.$$.fragment,n),i=!0)},o:function(n){Yn(e.$$.fragment,n),i=!1},d:function(n){n&&V(t),et(e)}}}function Rs(n){var t,e,r,o,i,a,c,u=n[11].ts.getHumanDate()+"";return r=new $t({props:{name:"calendar-alt"}}),{c:function(){t=Z("div"),e=Z("span"),nt(r.$$.fragment),o=nn(),i=Z("i"),a=X(u),on(t,"class","message__status-line for-day-changed")},m:function(n,u){J(n,t,u),Y(t,e),tt(r,e,null),Y(e,o),Y(e,i),Y(i,a),c=!0},p:function(n,t){(!c||16&t)&&u!==(u=n[11].ts.getHumanDate()+"")&&cn(a,u)},i:function(n){c||(Gn(r.$$.fragment,n),c=!0)},o:function(n){Yn(r.$$.fragment,n),c=!1},d:function(n){n&&V(t),et(r)}}}function As(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,m,h,g,v,$,y,b=n[11].ts.toLocaleString()+"",w=n[3]("%1 in %2",n[11].from,n[11].conversation_id)+"",_=n[11].markdown+"",k=(!n[13]||n[11].dayChanged)&&Rs(n);return r=new $t({props:{name:"pick:"+n[11].from,color:n[11].color}}),{c:function(){k&&k.c(),t=nn(),e=Z("div"),nt(r.$$.fragment),o=nn(),i=Z("div"),a=Z("div"),c=X(b),s=nn(),f=Z("a"),l=X(w),p=nn(),m=Z("div"),h=nn(),on(i,"class","message__ts has-tooltip"),on(i,"data-content",u=n[11].ts.format("%H:%M")),on(f,"href",d=Ze(n[11])),on(f,"class","message__from"),sn(f,"color",n[11].color),on(m,"class","message__text"),on(e,"class",g=n[11].className)},m:function(n,u){k&&k.m(n,u),J(n,t,u),J(n,e,u),tt(r,e,null),Y(e,o),Y(e,i),Y(i,a),Y(a,c),Y(e,s),Y(e,f),Y(f,l),Y(e,p),Y(e,m),m.innerHTML=_,Y(e,h),v=!0,$||(y=en(e,"click",Xe),$=!0)},p:function(n,o){!n[13]||n[11].dayChanged?k?(k.p(n,o),16&o&&Gn(k,1)):((k=Rs(n)).c(),Gn(k,1),k.m(t.parentNode,t)):k&&(Kn(),Yn(k,1,1,(function(){k=null})),Wn());var a={};16&o&&(a.name="pick:"+n[11].from),16&o&&(a.color=n[11].color),r.$set(a),(!v||16&o)&&b!==(b=n[11].ts.toLocaleString()+"")&&cn(c,b),(!v||16&o&&u!==(u=n[11].ts.format("%H:%M")))&&on(i,"data-content",u),(!v||24&o)&&w!==(w=n[3]("%1 in %2",n[11].from,n[11].conversation_id)+"")&&cn(l,w),(!v||16&o&&d!==(d=Ze(n[11])))&&on(f,"href",d),(!v||16&o)&&sn(f,"color",n[11].color),(!v||16&o)&&_!==(_=n[11].markdown+"")&&(m.innerHTML=_),(!v||16&o&&g!==(g=n[11].className))&&on(e,"class",g)},i:function(n){v||(Gn(k),Gn(r.$$.fragment,n),v=!0)},o:function(n){Yn(k),Yn(r.$$.fragment,n),v=!1},d:function(n){k&&k.d(n),n&&V(t),n&&V(e),et(r),$=!1,y()}}}function Ds(n){var t,e,r,o,i,a,c,u=n[3]("Loading...")+"";return r=new $t({props:{name:"spinner",animation:"spin"}}),{c:function(){t=Z("div"),e=Z("span"),nt(r.$$.fragment),o=nn(),i=Z("i"),a=X(u),on(t,"class","message__status-line for-loading")},m:function(n,u){J(n,t,u),Y(t,e),tt(r,e,null),Y(e,o),Y(e,i),Y(i,a),c=!0},p:function(n,t){(!c||8&t)&&u!==(u=n[3]("Loading...")+"")&&cn(a,u)},i:function(n){c||(Gn(r.$$.fragment,n),c=!0)},o:function(n){Yn(r.$$.fragment,n),c=!1},d:function(n){n&&V(t),et(r)}}}function js(n){for(var t,e,r,o,i=0==n[4].length&&!n[7].is("loading"),a=n[1].is("loading"),c=i&&Os(n),u=n[4].render(),s=[],f=0;f<u.length;f+=1)s[f]=As(Es(n,u,f));var l=function(n){return Yn(s[n],1,1,(function(){s[n]=null}))},d=a&&Ds(n);return{c:function(){c&&c.c(),t=nn();for(var n=0;n<s.length;n+=1)s[n].c();e=nn(),d&&d.c(),r=tn()},m:function(n,i){c&&c.m(n,i),J(n,t,i);for(var a=0;a<s.length;a+=1)s[a].m(n,i);J(n,e,i),d&&d.m(n,i),J(n,r,i),o=!0},p:function(n,o){if(16&o&&(i=0==n[4].length&&!n[7].is("loading")),i?c?(c.p(n,o),16&o&&Gn(c,1)):((c=Os(n)).c(),Gn(c,1),c.m(t.parentNode,t)):c&&(Kn(),Yn(c,1,1,(function(){c=null})),Wn()),24&o){var f;for(u=n[4].render(),f=0;f<u.length;f+=1){var p=Es(n,u,f);s[f]?(s[f].p(p,o),Gn(s[f],1)):(s[f]=As(p),s[f].c(),Gn(s[f],1),s[f].m(e.parentNode,e))}for(Kn(),f=u.length;f<s.length;f+=1)l(f);Wn()}2&o&&(a=n[1].is("loading")),a?d?(d.p(n,o),2&o&&Gn(d,1)):((d=Ds(n)).c(),Gn(d,1),d.m(r.parentNode,r)):d&&(Kn(),Yn(d,1,1,(function(){d=null})),Wn())},i:function(n){if(!o){Gn(c);for(var t=0;t<u.length;t+=1)Gn(s[t]);Gn(d),o=!0}},o:function(n){Yn(c),s=s.filter(Boolean);for(var t=0;t<s.length;t+=1)Yn(s[t]);Yn(d),o=!1},d:function(n){c&&c.d(n),n&&V(t),Q(s,n),n&&V(e),d&&d.d(n),n&&V(r)}}}function Ts(n){var t,e,r,o,i,a,c=n[7].is("search");t=new ye({props:{$$slots:{default:[Ss]},$$scope:{ctx:n}}}),(r=new ha({props:{class:n[2].join(" "),$$slots:{default:[js]},$$scope:{ctx:n}}})).$on("rendered",Ls);var u=c&&function(n){var t,e;return t=new _r({props:{conversation:n[7]}}),{c:function(){nt(t.$$.fragment)},m:function(n,r){tt(t,n,r),e=!0},p:O,i:function(n){e||(Gn(t.$$.fragment,n),e=!0)},o:function(n){Yn(t.$$.fragment,n),e=!1},d:function(n){et(t,n)}}}(n);return{c:function(){nt(t.$$.fragment),e=nn(),nt(r.$$.fragment),o=nn(),u&&u.c(),i=tn()},m:function(n,c){tt(t,n,c),J(n,e,c),tt(r,n,c),J(n,o,c),u&&u.m(n,c),J(n,i,c),a=!0},p:function(n,e){var o=st(e,1)[0],i={};16392&o&&(i.$$scope={dirty:o,ctx:n}),t.$set(i);var a={};4&o&&(a.class=n[2].join(" ")),16506&o&&(a.$$scope={dirty:o,ctx:n}),r.$set(a),c&&u.p(n,o)},i:function(n){a||(Gn(t.$$.fragment,n),Gn(r.$$.fragment,n),Gn(u),a=!0)},o:function(n){Yn(t.$$.fragment,n),Yn(r.$$.fragment,n),Yn(u),a=!1},d:function(n){et(t,n),n&&V(e),et(r,n),n&&V(o),u&&u.d(n),n&&V(i)}}}var Ls=function(n){return n.detail.scrollTo(-1)};function Ps(n,t,e){var r,o,i,a,c,u,s,f=O;P(n,Be,(function(n){return e(3,a=n)})),P(n,Ae,(function(n){return e(5,u=n)})),P(n,ze,(function(n){return e(6,s=n)})),n.$$.on_destroy.push((function(){return f()}));var l=En("user"),d=l.search;function p(n){var t=n.message;return d.update({userInput:t}),Ae.go("/search?q="+encodeURIComponent(t),{replace:!0}),t?d.load({match:t}):o.clear()}return P(n,d,(function(n){return e(1,i=n)})),_n((function(){return l.search.on("send",p)})),n.$$.update=function(){2&n.$$.dirty&&(e(0,o=i.messages),f(),f=T(o,(function(n){return e(4,c=n)}))),3&n.$$.dirty&&e(2,r=["main",o.length&&"has-results",i.is("search")&&"is-above-chat-input"].filter((function(n){return n})))},Ae.param("q")&&p({message:Ae.param("q")}),[o,i,r,a,c,u,s,d,"Search"]}var Ms=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(xs()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,Ps,Ts,j,{title:8}),t}return S(i,[{key:"title",get:function(){return this.$$.ctx[8]}}]),i}(it);function Is(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Us(n){var t,e,r=n[1]("Account")+"";return{c:function(){t=Z("h1"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Account")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Hs(n){var t,e,r=n[1]("Email")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Email")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Bs(n){var t,e,r=n[1]("Notification keywords")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Notification keywords")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function zs(n){var t,e,r=n[1]("Enable notifications")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Enable notifications")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function qs(n){var t,e,r=n[1]("Ignore join/part messages")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Ignore join/part messages")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Fs(n){var t,e,r=n[1]("Expand URL to media")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Expand URL to media")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Ks(n){var t,e,r=n[1]("Theme")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Theme")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Ws(n){var t,e,r=n[1]("Color scheme")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Color scheme")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Gs(n){var t,e,r=n[1]("Enable compact message display")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Enable compact message display")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Ys(n){var t,e,r,o,i,a=n[1]("Language")+"";return o=new $t({props:{name:"globe"}}),{c:function(){t=Z("span"),e=X(a),r=nn(),nt(o.$$.fragment),on(t,"slot","label")},m:function(n,a){J(n,t,a),Y(t,e),Y(t,r),tt(o,t,null),i=!0},p:function(n,t){(!i||2&t)&&a!==(a=n[1]("Language")+"")&&cn(e,a)},i:function(n){i||(Gn(o.$$.fragment,n),i=!0)},o:function(n){Yn(o.$$.fragment,n),i=!1},d:function(n){n&&V(t),et(o)}}}function Js(n){var t,e,r=n[1]("Password")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Password")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Vs(n){var t,e,r=n[1]("Repeat password")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Repeat password")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Qs(n){var t,e,r=n[1]("Save settings")+"";return{c:function(){t=Z("span"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Save settings")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Zs(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,m,h,g,v,$,y,b,w,_,k,x,E,S,O,C,N,R,A,D,j,T,L,P,M=n[1]("Leave the password fields empty to keep the current password.")+"";return t=new ye({props:{$$slots:{default:[Us]},$$scope:{ctx:n}}}),i=new Go({props:{type:"email",name:"email",form:n[3],readonly:!0,$$slots:{label:[Hs]},$$scope:{ctx:n}}}),c=new Go({props:{name:"highlightKeywords",form:n[3],placeholder:n[1]("whatever, keywords"),$$slots:{label:[Bs]},$$scope:{ctx:n}}}),s=new Cr({props:{name:"wantNotifications",form:n[3],$$slots:{label:[zs]},$$scope:{ctx:n}}}),l=new Cr({props:{name:"ignoreStatuses",form:n[3],$$slots:{label:[qs]},$$scope:{ctx:n}}}),p=new Cr({props:{name:"expandUrlToMedia",form:n[3],$$slots:{label:[Fs]},$$scope:{ctx:n}}}),h=new Do({props:{name:"activeTheme",form:n[3],options:n[4].themeOptions,$$slots:{label:[Ks]},$$scope:{ctx:n}}}),v=new Do({props:{name:"colorScheme",form:n[3],readonly:n[0],options:n[4].colorSchemeOptions,$$slots:{label:[Ws]},$$scope:{ctx:n}}}),y=new Cr({props:{name:"compactDisplay",form:n[3],$$slots:{label:[Gs]},$$scope:{ctx:n}}}),w=new Do({props:{name:"lang",form:n[3],options:n[2].languageOptions,$$slots:{label:[Ys]},$$scope:{ctx:n}}}),k=new Go({props:{type:"password",name:"password",form:n[3],autocomplete:"new-password",$$slots:{label:[Js]},$$scope:{ctx:n}}}),E=new Go({props:{type:"password",name:"password_again",form:n[3],autocomplete:"new-password",$$slots:{label:[Vs]},$$scope:{ctx:n}}}),A=new ce({props:{icon:"save",op:n[5],$$slots:{default:[Qs]},$$scope:{ctx:n}}}),j=new xo({props:{op:n[5]}}),{c:function(){nt(t.$$.fragment),e=nn(),r=Z("main"),o=Z("form"),nt(i.$$.fragment),a=nn(),nt(c.$$.fragment),u=nn(),nt(s.$$.fragment),f=nn(),nt(l.$$.fragment),d=nn(),nt(p.$$.fragment),m=nn(),nt(h.$$.fragment),g=nn(),nt(v.$$.fragment),$=nn(),nt(y.$$.fragment),b=nn(),nt(w.$$.fragment),_=nn(),nt(k.$$.fragment),x=nn(),nt(E.$$.fragment),S=nn(),O=Z("p"),C=X(M),N=nn(),R=Z("div"),nt(A.$$.fragment),D=nn(),nt(j.$$.fragment),on(R,"class","form-actions"),on(o,"method","post"),on(r,"class","main")},m:function(M,I){tt(t,M,I),J(M,e,I),J(M,r,I),Y(r,o),tt(i,o,null),Y(o,a),tt(c,o,null),Y(o,u),tt(s,o,null),Y(o,f),tt(l,o,null),Y(o,d),tt(p,o,null),Y(o,m),tt(h,o,null),Y(o,g),tt(v,o,null),Y(o,$),tt(y,o,null),Y(o,b),tt(w,o,null),Y(o,_),tt(k,o,null),Y(o,x),tt(E,o,null),Y(o,S),Y(o,O),Y(O,C),Y(o,N),Y(o,R),tt(A,R,null),Y(o,D),tt(j,o,null),T=!0,L||(P=en(o,"submit",rn(n[6])),L=!0)},p:function(n,e){var r=st(e,1)[0],o={};4098&r&&(o.$$scope={dirty:r,ctx:n}),t.$set(o);var a={};4098&r&&(a.$$scope={dirty:r,ctx:n}),i.$set(a);var u={};2&r&&(u.placeholder=n[1]("whatever, keywords")),4098&r&&(u.$$scope={dirty:r,ctx:n}),c.$set(u);var f={};4098&r&&(f.$$scope={dirty:r,ctx:n}),s.$set(f);var d={};4098&r&&(d.$$scope={dirty:r,ctx:n}),l.$set(d);var m={};4098&r&&(m.$$scope={dirty:r,ctx:n}),p.$set(m);var g={};4098&r&&(g.$$scope={dirty:r,ctx:n}),h.$set(g);var $={};1&r&&($.readonly=n[0]),4098&r&&($.$$scope={dirty:r,ctx:n}),v.$set($);var b={};4098&r&&(b.$$scope={dirty:r,ctx:n}),y.$set(b);var _={};4&r&&(_.options=n[2].languageOptions),4098&r&&(_.$$scope={dirty:r,ctx:n}),w.$set(_);var x={};4098&r&&(x.$$scope={dirty:r,ctx:n}),k.$set(x);var S={};4098&r&&(S.$$scope={dirty:r,ctx:n}),E.$set(S),(!T||2&r)&&M!==(M=n[1]("Leave the password fields empty to keep the current password.")+"")&&cn(C,M);var O={};4098&r&&(O.$$scope={dirty:r,ctx:n}),A.$set(O)},i:function(n){T||(Gn(t.$$.fragment,n),Gn(i.$$.fragment,n),Gn(c.$$.fragment,n),Gn(s.$$.fragment,n),Gn(l.$$.fragment,n),Gn(p.$$.fragment,n),Gn(h.$$.fragment,n),Gn(v.$$.fragment,n),Gn(y.$$.fragment,n),Gn(w.$$.fragment,n),Gn(k.$$.fragment,n),Gn(E.$$.fragment,n),Gn(A.$$.fragment,n),Gn(j.$$.fragment,n),T=!0)},o:function(n){Yn(t.$$.fragment,n),Yn(i.$$.fragment,n),Yn(c.$$.fragment,n),Yn(s.$$.fragment,n),Yn(l.$$.fragment,n),Yn(p.$$.fragment,n),Yn(h.$$.fragment,n),Yn(v.$$.fragment,n),Yn(y.$$.fragment,n),Yn(w.$$.fragment,n),Yn(k.$$.fragment,n),Yn(E.$$.fragment,n),Yn(A.$$.fragment,n),Yn(j.$$.fragment,n),T=!1},d:function(n){et(t,n),n&&V(e),n&&V(r),et(i),et(c),et(s),et(l),et(p),et(h),et(v),et(y),et(w),et(k),et(E),et(A),et(j),L=!1,P()}}}function Xs(n,t,e){var r,o,i,a,c;P(n,Be,(function(n){return e(1,a=n)})),P(n,He,(function(n){return e(2,c=n)}));var u=En("api"),s=Qo();P(n,s,(function(n){return e(9,i=n)}));var f=En("themeManager");P(n,f,(function(n){return e(8,o=n)}));var l=En("user"),d=u("updateUser");return s.set({activeTheme:f.activeTheme,colorScheme:f.colorScheme,compactDisplay:f.compactDisplay,email:l.email,expandUrlToMedia:l.expandUrlToMedia,highlightKeywords:l.highlightKeywords.join(", "),ignoreStatuses:l.ignoreStatuses,lang:He.lang,wantNotifications:co.wantNotifications}),kn(co.on("update",(function(n,t){(t.wantNotifications||t.desktopAccess)&&n.wantNotifications&&n.show(a("You have enabled notifications."))}))),n.$$.update=function(){768&n.$$.dirty&&e(0,r=!o.hasColorScheme(i.activeTheme)),512&n.$$.dirty&&He.load(i.lang)},[r,a,c,s,f,d,function(){var n=[i.password,i.password_again];if(n.join("").length&&n[0]!=n[1])return d.error("Passwords does not match.");i.wantNotifications&&co.requestDesktopAccess(),co.update(s.get(["wantNotifications"])),r&&s.set({colorScheme:"auto"}),f.update(s.get(["activeTheme","colorScheme","compactDisplay"]));var t=Ft(s.get("highlightKeywords")),e={email:l.email,highlight_keywords:t};n[0]&&(e.password=n[0]),l.update(s.get(["expandUrlToMedia","ignoreStatuses"])).update({highlightKeywords:t}),d.perform(e)},"Account",o,i]}var nf=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(Is()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,Xs,Zs,j,{title:7}),t}return S(i,[{key:"title",get:function(){return this.$$.ctx[7]}}]),i}(it);function tf(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function ef(n){var t,e,r=n[1]("Global settings")+"";return{c:function(){t=Z("h1"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Global settings")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function rf(n){var t,e,r=n[1]("Organization name")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Organization name")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function of(n){var t,e,r=n[1]("Can be changed if you want to add a touch of your organization.")+"";return{c:function(){t=Z("p"),e=X(r),on(t,"class","help"),on(t,"slot","help")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Can be changed if you want to add a touch of your organization.")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function af(n){var t,e,r=n[1]("Organization URL")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Organization URL")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function cf(n){var t,e,r=n[1]('Used together with "Organization name" to add a link to your organization on the login screen.')+"";return{c:function(){t=Z("p"),e=X(r),on(t,"class","help"),on(t,"slot","help")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]('Used together with "Organization name" to add a link to your organization on the login screen.')+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function uf(n){var t,e,r=n[1]("Admin email")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Admin email")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function sf(n){var t,e,r=n[1]("This email can be used by users to get in touch with the Convos admin.")+"";return{c:function(){t=Z("p"),e=X(r),on(t,"class","help"),on(t,"slot","help")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("This email can be used by users to get in touch with the Convos admin.")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function ff(n){var t,e,r=n[1]("Video service")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Video service")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function lf(n){var t,e=n[2]("This should point to a [%1](%2) instance.","https://meet.jit.si/","https://github.com/jitsi/jitsi-meet")+"";return{c:function(){on(t=Z("p"),"class","help"),on(t,"slot","help")},m:function(n,r){J(n,t,r),t.innerHTML=e},p:function(n,r){4&r&&e!==(e=n[2]("This should point to a [%1](%2) instance.","https://meet.jit.si/","https://github.com/jitsi/jitsi-meet")+"")&&(t.innerHTML=e)},d:function(n){n&&V(t)}}}function df(n){var t,e,r=n[1]("Registration is open to public")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Registration is open to public")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function pf(n){var t,e,r=n[1]("Save settings")+"";return{c:function(){t=Z("span"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){2&t&&r!==(r=n[1]("Save settings")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function mf(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,m,h,g,v,$,y,b,w,_,k,x,E,S,O,C=n[1]("Disk usage")+"",N=n[0].blocks_pct+"",R=n[1]("Disk usage")+"",A=n[0].blocks_used+"",D=n[0].blocks_total+"",j=n[0].inodes_pct+"",T=n[1]("Inode usage")+"",L=n[0].inodes_used+"",P=n[0].inodes_total+"";return{c:function(){t=Z("div"),e=Z("h2"),r=X(C),o=nn(),i=Z("div"),a=Z("div"),c=X(N),u=X("%"),s=nn(),f=Z("p"),l=X(R),d=X(": "),p=X(A),m=X(" / "),h=X(D),g=nn(),v=Z("div"),$=Z("div"),y=X(j),b=X("%"),w=nn(),_=Z("p"),k=X(T),x=X(": "),E=X(L),S=X(" / "),O=X(P),on(a,"class","progress__bar"),sn(a,"width",n[0].blocks_pct+"%"),on(i,"class","progress"),on(f,"class","help"),on($,"class","progress__bar"),sn($,"width",n[0].inodes_pct+"%"),on(v,"class","progress"),on(_,"class","help"),on(t,"id","disk-usage")},m:function(n,C){J(n,t,C),Y(t,e),Y(e,r),Y(t,o),Y(t,i),Y(i,a),Y(a,c),Y(a,u),Y(t,s),Y(t,f),Y(f,l),Y(f,d),Y(f,p),Y(f,m),Y(f,h),Y(t,g),Y(t,v),Y(v,$),Y($,y),Y($,b),Y(t,w),Y(t,_),Y(_,k),Y(_,x),Y(_,E),Y(_,S),Y(_,O)},p:function(n,t){2&t&&C!==(C=n[1]("Disk usage")+"")&&cn(r,C),1&t&&N!==(N=n[0].blocks_pct+"")&&cn(c,N),1&t&&sn(a,"width",n[0].blocks_pct+"%"),2&t&&R!==(R=n[1]("Disk usage")+"")&&cn(l,R),1&t&&A!==(A=n[0].blocks_used+"")&&cn(p,A),1&t&&D!==(D=n[0].blocks_total+"")&&cn(h,D),1&t&&j!==(j=n[0].inodes_pct+"")&&cn(y,j),1&t&&sn($,"width",n[0].inodes_pct+"%"),2&t&&T!==(T=n[1]("Inode usage")+"")&&cn(k,T),1&t&&L!==(L=n[0].inodes_used+"")&&cn(E,L),1&t&&P!==(P=n[0].inodes_total+"")&&cn(O,P)},d:function(n){n&&V(t)}}}function hf(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,m,h,g,v,$,y,b,w,_,k,x,E,S,O,C,N,R,A=n[1]("Convos settings")+"",D=n[2]("These settings control what users experience when they visit [%1](%1).",zt("base_url"))+"",j=n[1]("Tick this box if you want users to be able to register without an invite URL.")+"";t=new ye({props:{$$slots:{default:[ef]},$$scope:{ctx:n}}}),f=new Go({props:{name:"organization_name",form:n[3],$$slots:{help:[of],label:[rf]},$$scope:{ctx:n}}}),d=new Go({props:{name:"organization_url",form:n[3],placeholder:n[1]("https://convos.chat"),$$slots:{help:[cf],label:[af]},$$scope:{ctx:n}}}),m=new Go({props:{name:"contact",form:n[3],placeholder:n[1]("Ex: jhthorsen@cpan.org"),$$slots:{help:[sf],label:[uf]},$$scope:{ctx:n}}}),g=new Go({props:{name:"video_service",form:n[3],placeholder:n[1]("Ex: https://meet.jit.si/"),$$slots:{help:[lf],label:[ff]},$$scope:{ctx:n}}}),$=new Cr({props:{name:"open_to_public",form:n[3],$$slots:{label:[df]},$$scope:{ctx:n}}}),x=new ce({props:{icon:"save",op:n[4],$$slots:{default:[pf]},$$scope:{ctx:n}}}),S=new xo({props:{op:n[4]}});var T=n[0]&&mf(n);return{c:function(){nt(t.$$.fragment),e=nn(),r=Z("main"),o=Z("form"),i=Z("h2"),a=X(A),c=nn(),u=Z("p"),s=nn(),nt(f.$$.fragment),l=nn(),nt(d.$$.fragment),p=nn(),nt(m.$$.fragment),h=nn(),nt(g.$$.fragment),v=nn(),nt($.$$.fragment),y=nn(),b=Z("p"),w=X(j),_=nn(),k=Z("div"),nt(x.$$.fragment),E=nn(),nt(S.$$.fragment),O=nn(),T&&T.c(),on(b,"class","help"),on(k,"class","form-actions"),on(o,"id","convos-settings"),on(o,"method","post"),on(r,"class","main")},m:function(A,j){tt(t,A,j),J(A,e,j),J(A,r,j),Y(r,o),Y(o,i),Y(i,a),Y(o,c),Y(o,u),u.innerHTML=D,Y(o,s),tt(f,o,null),Y(o,l),tt(d,o,null),Y(o,p),tt(m,o,null),Y(o,h),tt(g,o,null),Y(o,v),tt($,o,null),Y(o,y),Y(o,b),Y(b,w),Y(o,_),Y(o,k),tt(x,k,null),Y(o,E),tt(S,o,null),Y(r,O),T&&T.m(r,null),C=!0,N||(R=en(o,"submit",rn(n[5])),N=!0)},p:function(n,e){var o=st(e,1)[0],i={};2050&o&&(i.$$scope={dirty:o,ctx:n}),t.$set(i),(!C||2&o)&&A!==(A=n[1]("Convos settings")+"")&&cn(a,A),(!C||4&o)&&D!==(D=n[2]("These settings control what users experience when they visit [%1](%1).",zt("base_url"))+"")&&(u.innerHTML=D);var c={};2050&o&&(c.$$scope={dirty:o,ctx:n}),f.$set(c);var s={};2&o&&(s.placeholder=n[1]("https://convos.chat")),2050&o&&(s.$$scope={dirty:o,ctx:n}),d.$set(s);var l={};2&o&&(l.placeholder=n[1]("Ex: jhthorsen@cpan.org")),2050&o&&(l.$$scope={dirty:o,ctx:n}),m.$set(l);var p={};2&o&&(p.placeholder=n[1]("Ex: https://meet.jit.si/")),2054&o&&(p.$$scope={dirty:o,ctx:n}),g.$set(p);var h={};2050&o&&(h.$$scope={dirty:o,ctx:n}),$.$set(h),(!C||2&o)&&j!==(j=n[1]("Tick this box if you want users to be able to register without an invite URL.")+"")&&cn(w,j);var v={};2050&o&&(v.$$scope={dirty:o,ctx:n}),x.$set(v),n[0]?T?T.p(n,o):((T=mf(n)).c(),T.m(r,null)):T&&(T.d(1),T=null)},i:function(n){C||(Gn(t.$$.fragment,n),Gn(f.$$.fragment,n),Gn(d.$$.fragment,n),Gn(m.$$.fragment,n),Gn(g.$$.fragment,n),Gn($.$$.fragment,n),Gn(x.$$.fragment,n),Gn(S.$$.fragment,n),C=!0)},o:function(n){Yn(t.$$.fragment,n),Yn(f.$$.fragment,n),Yn(d.$$.fragment,n),Yn(m.$$.fragment,n),Yn(g.$$.fragment,n),Yn($.$$.fragment,n),Yn(x.$$.fragment,n),Yn(S.$$.fragment,n),C=!1},d:function(n){et(t,n),n&&V(e),n&&V(r),et(f),et(d),et(m),et(g),et($),et(x),et(S),T&&T.d(),N=!1,R()}}}function gf(n,t,e){var r,o;P(n,Be,(function(n){return e(1,r=n)})),P(n,ze,(function(n){return e(2,o=n)}));var i=En("api"),a=Qo(),c=En("user"),u=i("getSettings"),s=i("updateSettings"),l=null;function p(n){if(!n)return null;var t=n.block_size||1024;return{blocks_pct:Math.ceil(n.blocks_used/n.blocks_total*100),blocks_total:Pt(t*n.blocks_total,"B"),blocks_used:Pt(t*n.blocks_used,"B"),inodes_pct:Math.ceil(n.inodes_used/n.inodes_total*100),inodes_total:Pt(n.inodes_total),inodes_used:Pt(n.inodes_used)}}return _n(d(f.mark((function n(){var t;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.perform();case 2:t=u.res.body,e(0,l=p(t.disk_usage)),delete t.disk_usage,t.contact=t.contact.replace(/mailto:/,""),a.set(t);case 7:case"end":return n.stop()}}),n)})))),[l,r,o,a,s,function(){var n=a.get();n.contact&&(n.contact="mailto:"+n.contact),zt("contact",n.contact),zt("open_to_public",n.open_to_public),zt("organization_name",n.organization_name),zt("organization_url",n.organization_url),c.update({videoService:n.video_service}),s.perform(n)},"Global settings"]}var vf=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(tf()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,gf,hf,j,{title:6}),t}return S(i,[{key:"title",get:function(){return this.$$.ctx[6]}}]),i}(it);function $f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function yf(n,t,e){var r=n.slice();return r[15]=t[e],r}function bf(n){var t,e,r;return t=new $t({props:{name:"list"}}),e=new $t({props:{name:"times"}}),{c:function(){nt(t.$$.fragment),nt(e.$$.fragment)},m:function(n,o){tt(t,n,o),tt(e,n,o),r=!0},p:O,i:function(n){r||(Gn(t.$$.fragment,n),Gn(e.$$.fragment,n),r=!0)},o:function(n){Yn(t.$$.fragment,n),Yn(e.$$.fragment,n),r=!1},d:function(n){et(t,n),et(e,n)}}}function wf(n){var t,e,r,o,i,a=n[3](n[1].uid?"Account":"Users")+"";return o=new Ii({props:{href:"/settings/users",class:"btn-hallow "+(n[1].uid?"is-active":""),"data-tooltip":n[3]("See all users"),$$slots:{default:[bf]},$$scope:{ctx:n}}}),{c:function(){t=Z("h1"),e=X(a),r=nn(),nt(o.$$.fragment)},m:function(n,a){J(n,t,a),Y(t,e),J(n,r,a),tt(o,n,a),i=!0},p:function(n,t){(!i||10&t)&&a!==(a=n[3](n[1].uid?"Account":"Users")+"")&&cn(e,a);var r={};2&t&&(r.class="btn-hallow "+(n[1].uid?"is-active":"")),8&t&&(r["data-tooltip"]=n[3]("See all users")),16777216&t&&(r.$$scope={dirty:t,ctx:n}),o.$set(r)},i:function(n){i||(Gn(o.$$.fragment,n),i=!0)},o:function(n){Yn(o.$$.fragment,n),i=!1},d:function(n){n&&V(t),n&&V(r),et(o,n)}}}function _f(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,m,h,g,v,$,y,b,w,_,k,x,E,S,O,C,N,R,A,D,j,T,L,P,M,I,U=n[3]("Invite or recover password")+"",H=n[3]("Users")+"",B=n[0].length+"",z=n[3]("Email")+"",q=n[3]("Roles")+"",F=n[3]("Registered")+"";i=new Go({props:{type:"email",name:"email",form:n[6],placeholder:n[3]("user@example.com"),$$slots:{help:[Ef],label:[xf]},$$scope:{ctx:n}}});var K=n[2].url&&Sf(n);s=new ce({props:{icon:"save",op:n[9],disabled:!n[1].email,$$slots:{default:[Of]},$$scope:{ctx:n}}}),l=new xo({props:{op:n[9],success:"Link generated."}}),T=new lc({props:{colspan:"3",op:n[5]}});for(var W=n[0],G=[],tn=0;tn<W.length;tn+=1)G[tn]=Cf(yf(n,W,tn));return{c:function(){t=Z("form"),e=Z("h2"),r=X(U),o=nn(),nt(i.$$.fragment),a=nn(),K&&K.c(),c=nn(),u=Z("div"),nt(s.$$.fragment),f=nn(),nt(l.$$.fragment),d=nn(),p=Z("h2"),m=X(H),h=nn(),g=Z("small"),v=X("("),$=X(B),y=X(")"),b=nn(),w=Z("table"),_=Z("thead"),k=Z("tr"),x=Z("th"),E=X(z),S=nn(),O=Z("th"),C=X(q),N=nn(),R=Z("th"),A=X(F),D=nn(),j=Z("tbody"),nt(T.$$.fragment),L=nn();for(var n=0;n<G.length;n+=1)G[n].c();on(u,"class","form-actions"),on(t,"id","invite"),on(t,"method","post")},m:function(U,H){J(U,t,H),Y(t,e),Y(e,r),Y(t,o),tt(i,t,null),Y(t,a),K&&K.m(t,null),Y(t,c),Y(t,u),tt(s,u,null),Y(t,f),tt(l,t,null),J(U,d,H),J(U,p,H),Y(p,m),Y(p,h),Y(p,g),Y(g,v),Y(g,$),Y(g,y),J(U,b,H),J(U,w,H),Y(w,_),Y(_,k),Y(k,x),Y(x,E),Y(k,S),Y(k,O),Y(O,C),Y(k,N),Y(k,R),Y(R,A),Y(w,D),Y(w,j),tt(T,j,null),Y(j,L);for(var B=0;B<G.length;B+=1)G[B].m(j,null);P=!0,M||(I=en(t,"submit",rn(n[13])),M=!0)},p:function(n,e){(!P||8&e)&&U!==(U=n[3]("Invite or recover password")+"")&&cn(r,U);var o={};8&e&&(o.placeholder=n[3]("user@example.com")),16777224&e&&(o.$$scope={dirty:e,ctx:n}),i.$set(o),n[2].url?K?K.p(n,e):((K=Sf(n)).c(),K.m(t,c)):K&&(K.d(1),K=null);var a={};2&e&&(a.disabled=!n[1].email),16777224&e&&(a.$$scope={dirty:e,ctx:n}),s.$set(a),(!P||8&e)&&H!==(H=n[3]("Users")+"")&&cn(m,H),(!P||1&e)&&B!==(B=n[0].length+"")&&cn($,B),(!P||8&e)&&z!==(z=n[3]("Email")+"")&&cn(E,z),(!P||8&e)&&q!==(q=n[3]("Roles")+"")&&cn(C,q),(!P||8&e)&&F!==(F=n[3]("Registered")+"")&&cn(A,F);var u={};if(32&e&&(u.op=n[5]),T.$set(u),1&e){var f;for(W=n[0],f=0;f<W.length;f+=1){var l=yf(n,W,f);G[f]?G[f].p(l,e):(G[f]=Cf(l),G[f].c(),G[f].m(j,null))}for(;f<G.length;f+=1)G[f].d(1);G.length=W.length}},i:function(n){P||(Gn(i.$$.fragment,n),Gn(s.$$.fragment,n),Gn(l.$$.fragment,n),Gn(T.$$.fragment,n),P=!0)},o:function(n){Yn(i.$$.fragment,n),Yn(s.$$.fragment,n),Yn(l.$$.fragment,n),Yn(T.$$.fragment,n),P=!1},d:function(n){n&&V(t),et(i),K&&K.d(),et(s),et(l),n&&V(d),n&&V(p),n&&V(b),n&&V(w),et(T),Q(G,n),M=!1,I()}}}function kf(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,m,h,g,v,$,y,b,w,_,k,x,E,S,O,C,N,R=n[3]("This will permanently remove user settings, chat logs, uploaded files and other user related data.")+"",D=n[4]("Please confirm by entering **%1** before hitting **%2**.",n[1].email,n[3]("Delete user"))+"";return e=new zi({props:{name:"uid",form:n[6]}}),o=new Go({props:{name:"email",form:n[6],readonly:!0,$$slots:{label:[Nf]},$$scope:{ctx:n}}}),a=new Go({props:{name:"roles",form:n[6],placeholder:n[3]("admin, bot, ..."),$$slots:{help:[Af],label:[Rf]},$$scope:{ctx:n}}}),s=new ce({props:{icon:"save",op:n[10],$$slots:{default:[Df]},$$scope:{ctx:n}}}),l=new xo({props:{op:n[10]}}),w=new Go({props:{name:"confirm_email",form:n[6],$$slots:{label:[jf]},$$scope:{ctx:n}}}),x=new ce({props:{icon:"trash",op:n[7],disabled:n[1].confirm_email!=n[1].email,$$slots:{default:[Tf]},$$scope:{ctx:n}}}),S=new xo({props:{op:n[7],success:"Deleted."}}),{c:function(){t=Z("form"),nt(e.$$.fragment),r=nn(),nt(o.$$.fragment),i=nn(),nt(a.$$.fragment),c=nn(),u=Z("div"),nt(s.$$.fragment),f=nn(),nt(l.$$.fragment),d=nn(),(p=Z("h2")).textContent="Delete account",m=nn(),h=Z("form"),g=Z("p"),v=X(R),$=nn(),b=nn(),nt(w.$$.fragment),_=nn(),k=Z("div"),nt(x.$$.fragment),E=nn(),nt(S.$$.fragment),on(u,"class","form-actions"),on(t,"id","edit"),on(t,"method","post"),y=new mn(null),on(k,"class","form-actions"),on(h,"id","delete"),on(h,"method","post")},m:function(R,A){J(R,t,A),tt(e,t,null),Y(t,r),tt(o,t,null),Y(t,i),tt(a,t,null),Y(t,c),Y(t,u),tt(s,u,null),Y(t,f),tt(l,t,null),J(R,d,A),J(R,p,A),J(R,m,A),J(R,h,A),Y(h,g),Y(g,v),Y(g,$),y.m(D,g),Y(h,b),tt(w,h,null),Y(h,_),Y(h,k),tt(x,k,null),Y(h,E),tt(S,h,null),O=!0,C||(N=[en(t,"submit",rn(n[14])),en(h,"submit",rn(n[12]))],C=!0)},p:function(n,t){var e={};16777224&t&&(e.$$scope={dirty:t,ctx:n}),o.$set(e);var r={};8&t&&(r.placeholder=n[3]("admin, bot, ...")),16777224&t&&(r.$$scope={dirty:t,ctx:n}),a.$set(r);var i={};16777224&t&&(i.$$scope={dirty:t,ctx:n}),s.$set(i),(!O||8&t)&&R!==(R=n[3]("This will permanently remove user settings, chat logs, uploaded files and other user related data.")+"")&&cn(v,R),(!O||26&t)&&D!==(D=n[4]("Please confirm by entering **%1** before hitting **%2**.",n[1].email,n[3]("Delete user"))+"")&&y.p(D);var c={};16777224&t&&(c.$$scope={dirty:t,ctx:n}),w.$set(c);var u={};2&t&&(u.disabled=n[1].confirm_email!=n[1].email),16777224&t&&(u.$$scope={dirty:t,ctx:n}),x.$set(u)},i:function(n){O||(Gn(e.$$.fragment,n),Gn(o.$$.fragment,n),Gn(a.$$.fragment,n),Gn(s.$$.fragment,n),Gn(l.$$.fragment,n),Gn(w.$$.fragment,n),Gn(x.$$.fragment,n),Gn(S.$$.fragment,n),O=!0)},o:function(n){Yn(e.$$.fragment,n),Yn(o.$$.fragment,n),Yn(a.$$.fragment,n),Yn(s.$$.fragment,n),Yn(l.$$.fragment,n),Yn(w.$$.fragment,n),Yn(x.$$.fragment,n),Yn(S.$$.fragment,n),O=!1},d:function(n){n&&V(t),et(e),et(o),et(a),et(s),et(l),n&&V(d),n&&V(p),n&&V(m),n&&V(h),et(w),et(x),et(S),C=!1,A(N)}}}function xf(n){var t,e,r=n[3]("User email")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){8&t&&r!==(r=n[3]("User email")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Ef(n){var t,e,r=n[3]("Using this form, you can generate a forgotten password or invite link for a user.")+"";return{c:function(){t=Z("p"),e=X(r),on(t,"class","help"),on(t,"slot","help")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){8&t&&r!==(r=n[3]("Using this form, you can generate a forgotten password or invite link for a user.")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Sf(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,m,h,g,v,$=n[3]("A link was generated")+"",y=n[4](n[2].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"",b=n[4]("The link is valid until **%1**.",new Date(n[2].expires).toLocaleString())+"",w=n[2].url+"",_=n[3]("Tip: Clicking on the link will copy it to your clipboard.")+"";return{c:function(){t=Z("h3"),e=X($),r=nn(),o=Z("p"),a=nn(),u=nn(),s=Z("a"),f=X(w),d=nn(),p=Z("p"),m=Z("small"),h=X(_),i=new mn(a),c=new mn(null),on(s,"href",l=n[2].url)},m:function(l,$){J(l,t,$),Y(t,e),J(l,r,$),J(l,o,$),i.m(y,o),Y(o,a),c.m(b,o),J(l,u,$),J(l,s,$),Y(s,f),J(l,d,$),J(l,p,$),Y(p,m),Y(m,h),g||(v=en(s,"click",rn(n[11])),g=!0)},p:function(n,t){8&t&&$!==($=n[3]("A link was generated")+"")&&cn(e,$),20&t&&y!==(y=n[4](n[2].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"")&&i.p(y),20&t&&b!==(b=n[4]("The link is valid until **%1**.",new Date(n[2].expires).toLocaleString())+"")&&c.p(b),4&t&&w!==(w=n[2].url+"")&&cn(f,w),4&t&&l!==(l=n[2].url)&&on(s,"href",l),8&t&&_!==(_=n[3]("Tip: Clicking on the link will copy it to your clipboard.")+"")&&cn(h,_)},d:function(n){n&&V(t),n&&V(r),n&&V(o),n&&V(u),n&&V(s),n&&V(d),n&&V(p),g=!1,v()}}}function Of(n){var t,e,r=n[3]("Generate link")+"";return{c:function(){t=Z("span"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){8&t&&r!==(r=n[3]("Generate link")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Cf(n){var t,e,r,o,i,a,c,u,s,f,l,d,p=n[15].email+"",m=n[15].roles.join(", ")+"",h=new re(n[15].registered).getHumanDate({year:!0})+"";return{c:function(){t=Z("tr"),e=Z("td"),r=Z("a"),o=X(p),a=nn(),c=Z("td"),u=X(m),s=nn(),f=Z("td"),l=X(h),d=nn(),on(r,"href",i="#"+n[15].uid)},m:function(n,i){J(n,t,i),Y(t,e),Y(e,r),Y(r,o),Y(t,a),Y(t,c),Y(c,u),Y(t,s),Y(t,f),Y(f,l),Y(t,d)},p:function(n,t){1&t&&p!==(p=n[15].email+"")&&cn(o,p),1&t&&i!==(i="#"+n[15].uid)&&on(r,"href",i),1&t&&m!==(m=n[15].roles.join(", ")+"")&&cn(u,m),1&t&&h!==(h=new re(n[15].registered).getHumanDate({year:!0})+"")&&cn(l,h)},d:function(n){n&&V(t)}}}function Nf(n){var t,e,r=n[3]("Email")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){8&t&&r!==(r=n[3]("Email")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Rf(n){var t,e,r=n[3]("Roles")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){8&t&&r!==(r=n[3]("Roles")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Af(n){var t,e,r=n[3]("Roles must be separated by comma.")+"";return{c:function(){t=Z("p"),e=X(r),on(t,"class","help"),on(t,"slot","help")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){8&t&&r!==(r=n[3]("Roles must be separated by comma.")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Df(n){var t,e,r=n[3]("Save user")+"";return{c:function(){t=Z("span"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){8&t&&r!==(r=n[3]("Save user")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function jf(n){var t,e,r=n[3]("Confirm email")+"";return{c:function(){t=Z("span"),e=X(r),on(t,"slot","label")},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){8&t&&r!==(r=n[3]("Confirm email")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Tf(n){var t,e,r=n[3]("Delete user")+"";return{c:function(){t=Z("span"),e=X(r)},m:function(n,r){J(n,t,r),Y(t,e)},p:function(n,t){8&t&&r!==(r=n[3]("Delete user")+"")&&cn(e,r)},d:function(n){n&&V(t)}}}function Lf(n){var t,e,r,o,i,a;t=new ye({props:{$$slots:{default:[wf]},$$scope:{ctx:n}}});var c=[kf,_f],u=[];function s(n,t){return n[1].uid?0:1}return o=s(n),i=u[o]=c[o](n),{c:function(){nt(t.$$.fragment),e=nn(),r=Z("main"),i.c(),on(r,"class","main")},m:function(n,i){tt(t,n,i),J(n,e,i),J(n,r,i),u[o].m(r,null),a=!0},p:function(n,e){var a=st(e,1)[0],f={};16777226&a&&(f.$$scope={dirty:a,ctx:n}),t.$set(f);var l=o;(o=s(n))===l?u[o].p(n,a):(Kn(),Yn(u[l],1,1,(function(){u[l]=null})),Wn(),(i=u[o])?i.p(n,a):(i=u[o]=c[o](n)).c(),Gn(i,1),i.m(r,null))},i:function(n){a||(Gn(t.$$.fragment,n),Gn(i),a=!0)},o:function(n){Yn(t.$$.fragment,n),Yn(i),a=!1},d:function(n){et(t,n),n&&V(e),n&&V(r),u[o].d()}}}function Pf(n,t,e){var r,o,i,a,c,u,s;P(n,Ae,(function(n){return e(17,o=n)})),P(n,Be,(function(n){return e(3,c=n)})),P(n,ze,(function(n){return e(4,u=n)}));var l=t.title,p=void 0===l?"Users":l,m=En("api"),h=Qo();P(n,h,(function(n){return e(1,a=n)}));var g=En("user"),v=m("deleteUser"),$=m("getUsers");P(n,$,(function(n){return e(5,s=n)}));var y=m("inviteUser");P(n,y,(function(n){return e(18,i=n)}));var b=m("updateUser"),w=[];function _(){return(_=d(f.mark((function n(){return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(v.reset(),b.reset(),h.get("confirm_email")==h.get("email")){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,v.perform(h.get());case 6:if(v.is("success")){n.next=8;break}return n.abrupt("return");case 8:k(),Ae.go("/settings/users",{replace:!0});case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function k(){return x.apply(this,arguments)}function x(){return(x=d(f.mark((function n(){return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,$.perform();case 2:e(0,w=$.res.body.users||[]),$.reset();case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return _n(k),n.$$set=function(n){"title"in n&&e(16,p=n.title)},n.$$.update=function(){131073&n.$$.dirty&&function(n,t){var e=n.hash,r=e&&t.filter((function(n){return n.uid==e}))[0];if(!r)return h.set({confirm_email:"",uid:""});h.set({confirm_email:""}).set(r)}(o,w),262144&n.$$.dirty&&e(2,r=i.res.body||{}),2&n.$$.dirty&&e(16,p=a.uid?a.email:"Users")},[w,a,r,c,u,s,h,v,$,y,b,function(n){var t=function(n){var t=document.createElement("textarea");t.value=n.textContent||n.value,t.style.opacity=0,t.style.position="absolute",document.body.appendChild(t);try{t.focus(),t.select(),document.execCommand("copy")}catch(n){t.value="",Ot.error("copyToClipboard() failed:",n)}return document.body.removeChild(t),t.value}(n.target);t&&co.showInApp(t,{title:c("Invite link copied")})},function(){return _.apply(this,arguments)},function(){y.perform(h.get(["email"]))},function(){v.reset(),b.perform({email:h.get("email"),roles:Ft(h.get("roles"))})},g,p,o,i]}var Mf=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if($f()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,Pf,Lf,j,{title:16}),t}return i}(it);function If(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Uf(n,t,e){var r=n.slice();return r[21]=t[e],r}function Hf(n,t,e){var r=n.slice();return r[24]=t[e],r}function Bf(n){var t,e,r,o,i,a,c=ul(n[8])+"";return t=new $t({props:{family:"regular",name:"bell"}}),{c:function(){nt(t.$$.fragment),e=nn(),r=Z("small"),o=X(c),on(r,"class","badge is-important"),r.hidden=i=!n[8].unread},m:function(n,i){tt(t,n,i),J(n,e,i),J(n,r,i),Y(r,o),a=!0},p:function(n,t){(!a||256&t)&&c!==(c=ul(n[8])+"")&&cn(o,c),(!a||256&t&&i!==(i=!n[8].unread))&&(r.hidden=i)},i:function(n){a||(Gn(t.$$.fragment,n),a=!0)},o:function(n){Yn(t.$$.fragment,n),a=!1},d:function(n){et(t,n),n&&V(e),n&&V(r)}}}function zf(n){var t,e;return t=new Ii({props:{href:"/settings/connections",$$slots:{default:[qf]},$$scope:{ctx:n}}}),{c:function(){nt(t.$$.fragment)},m:function(n,r){tt(t,n,r),e=!0},p:function(n,e){var r={};134217856&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(Gn(t.$$.fragment,n),e=!0)},o:function(n){Yn(t.$$.fragment,n),e=!1},d:function(n){et(t,n)}}}function qf(n){var t,e,r,o,i,a=n[7]("No conversations")+"";return t=new $t({props:{name:"exclamation-circle"}}),{c:function(){nt(t.$$.fragment),e=nn(),r=Z("span"),o=X(a)},m:function(n,a){tt(t,n,a),J(n,e,a),J(n,r,a),Y(r,o),i=!0},p:function(n,t){(!i||128&t)&&a!==(a=n[7]("No conversations")+"")&&cn(o,a)},i:function(n){i||(Gn(t.$$.fragment,n),i=!0)},o:function(n){Yn(t.$$.fragment,n),i=!1},d:function(n){et(t,n),n&&V(e),n&&V(r)}}}function Ff(n){var t,e,r,o,i,a,c,u,s,f=(n[21].name||n[21].connection_id)+"",l=ul(n[21])+"";return t=new $t({props:{name:"network-wired"}}),{c:function(){nt(t.$$.fragment),e=nn(),r=Z("span"),o=X(f),i=nn(),a=Z("b"),c=X(l),on(a,"class","badge"),a.hidden=u=!n[21].unread},m:function(n,u){tt(t,n,u),J(n,e,u),J(n,r,u),Y(r,o),J(n,i,u),J(n,a,u),Y(a,c),s=!0},p:function(n,t){(!s||8&t)&&f!==(f=(n[21].name||n[21].connection_id)+"")&&cn(o,f),(!s||8&t)&&l!==(l=ul(n[21])+"")&&cn(c,l),(!s||8&t&&u!==(u=!n[21].unread))&&(a.hidden=u)},i:function(n){s||(Gn(t.$$.fragment,n),s=!0)},o:function(n){Yn(t.$$.fragment,n),s=!1},d:function(n){et(t,n),n&&V(e),n&&V(r),n&&V(i),n&&V(a)}}}function Kf(n){var t,e;return t=new $t({props:{name:n[24].is("private")?"user":"user-friends"}}),{c:function(){nt(t.$$.fragment)},m:function(n,r){tt(t,n,r),e=!0},p:function(n,e){var r={};8&e&&(r.name=n[24].is("private")?"user":"user-friends"),t.$set(r)},i:function(n){e||(Gn(t.$$.fragment,n),e=!0)},o:function(n){Yn(t.$$.fragment,n),e=!1},d:function(n){et(t,n)}}}function Wf(n){var t,e;return t=new $t({props:{name:"exclamation-triangle"}}),{c:function(){nt(t.$$.fragment)},m:function(n,r){tt(t,n,r),e=!0},p:O,i:function(n){e||(Gn(t.$$.fragment,n),e=!0)},o:function(n){Yn(t.$$.fragment,n),e=!1},d:function(n){et(t,n)}}}function Gf(n){var t,e,r,o,i,a,c,u,s,f,l,d=n[24].name+"",p=ul(n[24])+"",m=[Wf,Kf],h=[];function g(n,e){return 8&e&&(t=!(!n[24].frozen||n[24].is("private"))),t?0:1}return e=g(n,-1),r=h[e]=m[e](n),{c:function(){r.c(),o=nn(),i=Z("span"),a=X(d),c=nn(),u=Z("b"),s=X(p),on(u,"class","badge"),u.hidden=f=!n[24].unread},m:function(n,t){h[e].m(n,t),J(n,o,t),J(n,i,t),Y(i,a),J(n,c,t),J(n,u,t),Y(u,s),l=!0},p:function(n,t){var i=e;(e=g(n,t))===i?h[e].p(n,t):(Kn(),Yn(h[i],1,1,(function(){h[i]=null})),Wn(),(r=h[e])?r.p(n,t):(r=h[e]=m[e](n)).c(),Gn(r,1),r.m(o.parentNode,o)),(!l||8&t)&&d!==(d=n[24].name+"")&&cn(a,d),(!l||8&t)&&p!==(p=ul(n[24])+"")&&cn(s,p),(!l||8&t&&f!==(f=!n[24].unread))&&(u.hidden=f)},i:function(n){l||(Gn(r),l=!0)},o:function(n){Yn(r),l=!1},d:function(n){h[e].d(n),n&&V(o),n&&V(i),n&&V(c),n&&V(u)}}}function Yf(n){var t,e;return t=new Ii({props:{href:n[24].path,class:cl(n[21],n[24]),$$slots:{default:[Gf]},$$scope:{ctx:n}}}),{c:function(){nt(t.$$.fragment)},m:function(n,r){tt(t,n,r),e=!0},p:function(n,e){var r={};8&e&&(r.href=n[24].path),8&e&&(r.class=cl(n[21],n[24])),134217736&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(Gn(t.$$.fragment,n),e=!0)},o:function(n){Yn(t.$$.fragment,n),e=!1},d:function(n){et(t,n)}}}function Jf(n){var t,e,r,o;t=new Ii({props:{href:n[21].path,class:cl(n[21],n[21]),$$slots:{default:[Ff]},$$scope:{ctx:n}}});for(var i=n[21].conversations.toArray(),a=[],c=0;c<i.length;c+=1)a[c]=Yf(Hf(n,i,c));var u=function(n){return Yn(a[n],1,1,(function(){a[n]=null}))};return{c:function(){nt(t.$$.fragment),e=nn();for(var n=0;n<a.length;n+=1)a[n].c();r=tn()},m:function(n,i){tt(t,n,i),J(n,e,i);for(var c=0;c<a.length;c+=1)a[c].m(n,i);J(n,r,i),o=!0},p:function(n,e){var o={};if(8&e&&(o.href=n[21].path),8&e&&(o.class=cl(n[21],n[21])),134217736&e&&(o.$$scope={dirty:e,ctx:n}),t.$set(o),8&e){var c;for(i=n[21].conversations.toArray(),c=0;c<i.length;c+=1){var s=Hf(n,i,c);a[c]?(a[c].p(s,e),Gn(a[c],1)):(a[c]=Yf(s),a[c].c(),Gn(a[c],1),a[c].m(r.parentNode,r))}for(Kn(),c=i.length;c<a.length;c+=1)u(c);Wn()}},i:function(n){if(!o){Gn(t.$$.fragment,n);for(var e=0;e<i.length;e+=1)Gn(a[e]);o=!0}},o:function(n){Yn(t.$$.fragment,n),a=a.filter(Boolean);for(var e=0;e<a.length;e+=1)Yn(a[e]);o=!1},d:function(n){et(t,n),n&&V(e),Q(a,n),n&&V(r)}}}function Vf(n){var t,e,r,o,i,a,c,u,s,f=n[7]("Notifications")+"",l=ul(n[8])+"";return t=new $t({props:{name:"bell"}}),{c:function(){nt(t.$$.fragment),e=nn(),r=Z("span"),o=X(f),i=nn(),a=Z("b"),c=X(l),on(a,"class","badge"),a.hidden=u=!n[8].unread},m:function(n,u){tt(t,n,u),J(n,e,u),J(n,r,u),Y(r,o),J(n,i,u),J(n,a,u),Y(a,c),s=!0},p:function(n,t){(!s||128&t)&&f!==(f=n[7]("Notifications")+"")&&cn(o,f),(!s||256&t)&&l!==(l=ul(n[8])+"")&&cn(c,l),(!s||256&t&&u!==(u=!n[8].unread))&&(a.hidden=u)},i:function(n){s||(Gn(t.$$.fragment,n),s=!0)},o:function(n){Yn(t.$$.fragment,n),s=!1},d:function(n){et(t,n),n&&V(e),n&&V(r),n&&V(i),n&&V(a)}}}function Qf(n){var t,e,r,o,i,a=n[7]("Search")+"";return t=new $t({props:{name:"search"}}),{c:function(){nt(t.$$.fragment),e=nn(),r=Z("span"),o=X(a)},m:function(n,a){tt(t,n,a),J(n,e,a),J(n,r,a),Y(r,o),i=!0},p:function(n,t){(!i||128&t)&&a!==(a=n[7]("Search")+"")&&cn(o,a)},i:function(n){i||(Gn(t.$$.fragment,n),i=!0)},o:function(n){Yn(t.$$.fragment,n),i=!1},d:function(n){et(t,n),n&&V(e),n&&V(r)}}}function Zf(n){var t,e,r,o,i,a=n[7]("Add conversation")+"";return t=new $t({props:{name:"comment"}}),{c:function(){nt(t.$$.fragment),e=nn(),r=Z("span"),o=X(a)},m:function(n,a){tt(t,n,a),J(n,e,a),J(n,r,a),Y(r,o),i=!0},p:function(n,t){(!i||128&t)&&a!==(a=n[7]("Add conversation")+"")&&cn(o,a)},i:function(n){i||(Gn(t.$$.fragment,n),i=!0)},o:function(n){Yn(t.$$.fragment,n),i=!1},d:function(n){et(t,n),n&&V(e),n&&V(r)}}}function Xf(n){var t,e,r,o,i,a=n[7]("Connections")+"";return t=new $t({props:{name:"network-wired"}}),{c:function(){nt(t.$$.fragment),e=nn(),r=Z("span"),o=X(a)},m:function(n,a){tt(t,n,a),J(n,e,a),J(n,r,a),Y(r,o),i=!0},p:function(n,t){(!i||128&t)&&a!==(a=n[7]("Connections")+"")&&cn(o,a)},i:function(n){i||(Gn(t.$$.fragment,n),i=!0)},o:function(n){Yn(t.$$.fragment,n),i=!1},d:function(n){et(t,n),n&&V(e),n&&V(r)}}}function nl(n){var t,e,r,o,i,a=n[7]("Account")+"";return t=new $t({props:{name:"user-cog"}}),{c:function(){nt(t.$$.fragment),e=nn(),r=Z("span"),o=X(a)},m:function(n,a){tt(t,n,a),J(n,e,a),J(n,r,a),Y(r,o),i=!0},p:function(n,t){(!i||128&t)&&a!==(a=n[7]("Account")+"")&&cn(o,a)},i:function(n){i||(Gn(t.$$.fragment,n),i=!0)},o:function(n){Yn(t.$$.fragment,n),i=!1},d:function(n){et(t,n),n&&V(e),n&&V(r)}}}function tl(n){var t,e,r,o,i,a=n[7]("Help")+"";return t=new $t({props:{name:"question-circle"}}),{c:function(){nt(t.$$.fragment),e=nn(),r=Z("span"),o=X(a)},m:function(n,a){tt(t,n,a),J(n,e,a),J(n,r,a),Y(r,o),i=!0},p:function(n,t){(!i||128&t)&&a!==(a=n[7]("Help")+"")&&cn(o,a)},i:function(n){i||(Gn(t.$$.fragment,n),i=!0)},o:function(n){Yn(t.$$.fragment,n),i=!1},d:function(n){et(t,n),n&&V(e),n&&V(r)}}}function el(n){var t,e,r,o;return t=new Ii({props:{href:"/settings",$$slots:{default:[rl]},$$scope:{ctx:n}}}),r=new Ii({props:{href:"/settings/users",$$slots:{default:[ol]},$$scope:{ctx:n}}}),{c:function(){nt(t.$$.fragment),e=nn(),nt(r.$$.fragment)},m:function(n,i){tt(t,n,i),J(n,e,i),tt(r,n,i),o=!0},p:function(n,e){var o={};134217856&e&&(o.$$scope={dirty:e,ctx:n}),t.$set(o);var i={};134217856&e&&(i.$$scope={dirty:e,ctx:n}),r.$set(i)},i:function(n){o||(Gn(t.$$.fragment,n),Gn(r.$$.fragment,n),o=!0)},o:function(n){Yn(t.$$.fragment,n),Yn(r.$$.fragment,n),o=!1},d:function(n){et(t,n),n&&V(e),et(r,n)}}}function rl(n){var t,e,r,o,i,a=n[7]("Settings")+"";return t=new $t({props:{name:"tools"}}),{c:function(){nt(t.$$.fragment),e=nn(),r=Z("span"),o=X(a)},m:function(n,a){tt(t,n,a),J(n,e,a),J(n,r,a),Y(r,o),i=!0},p:function(n,t){(!i||128&t)&&a!==(a=n[7]("Settings")+"")&&cn(o,a)},i:function(n){i||(Gn(t.$$.fragment,n),i=!0)},o:function(n){Yn(t.$$.fragment,n),i=!1},d:function(n){et(t,n),n&&V(e),n&&V(r)}}}function ol(n){var t,e,r,o,i,a=n[7]("Users")+"";return t=new $t({props:{name:"users"}}),{c:function(){nt(t.$$.fragment),e=nn(),r=Z("span"),o=X(a)},m:function(n,a){tt(t,n,a),J(n,e,a),J(n,r,a),Y(r,o),i=!0},p:function(n,t){(!i||128&t)&&a!==(a=n[7]("Users")+"")&&cn(o,a)},i:function(n){i||(Gn(t.$$.fragment,n),i=!0)},o:function(n){Yn(t.$$.fragment,n),i=!1},d:function(n){et(t,n),n&&V(e),n&&V(r)}}}function il(n){var t,e,r,o,i,a=n[7]('Search for "%1"',n[6])+"";return t=new $t({props:{name:"search"}}),{c:function(){nt(t.$$.fragment),e=nn(),r=Z("span"),o=X(a)},m:function(n,a){tt(t,n,a),J(n,e,a),J(n,r,a),Y(r,o),i=!0},p:function(n,t){(!i||192&t)&&a!==(a=n[7]('Search for "%1"',n[6])+"")&&cn(o,a)},i:function(n){i||(Gn(t.$$.fragment,n),i=!0)},o:function(n){Yn(t.$$.fragment,n),i=!1},d:function(n){et(t,n),n&&V(e),n&&V(r)}}}function al(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,m,h,g,v,$,y,b,w,_,k,x,E,S,O,C,N,R,D,j,T,L,P,M,I,U,H,B,z,q,F,K=n[7]("Conversations")+"",W=(n[3].email||n[7]("Account"))+"",G=n[3].is("admin"),tn=n[7]("Log out")+"";c=new $t({props:{name:"search"}}),s=new Ii({props:{href:"/chat",class:"btn-hallow for-notifications",$$slots:{default:[Bf]},$$scope:{ctx:n}}});for(var rn=!n[3].connections.size&&zf(n),an=n[3].connections.toArray(),sn=[],fn=0;fn<an.length;fn+=1)sn[fn]=Jf(Uf(n,an,fn));var dn=function(n){return Yn(sn[n],1,1,(function(){sn[n]=null}))};b=new Ii({props:{href:"/chat",$$slots:{default:[Vf]},$$scope:{ctx:n}}}),_=new Ii({props:{href:"/search",$$slots:{default:[Qf]},$$scope:{ctx:n}}}),x=new Ii({props:{href:n[5],$$slots:{default:[Zf]},$$scope:{ctx:n}}}),S=new Ii({props:{href:"/settings/connections",$$slots:{default:[Xf]},$$scope:{ctx:n}}}),C=new Ii({props:{href:"/settings/account",$$slots:{default:[nl]},$$scope:{ctx:n}}}),R=new Ii({props:{href:"/help",$$slots:{default:[tl]},$$scope:{ctx:n}}});var pn=G&&el(n);return L=new $t({props:{name:"power-off"}}),H=new Ii({props:{href:"/search?q="+encodeURIComponent(n[6]),class:"for-search hidden",$$slots:{default:[il]},$$scope:{ctx:n}}}),{c:function(){t=Z("div"),e=Z("form"),r=Z("input"),i=nn(),a=Z("label"),nt(c.$$.fragment),u=nn(),nt(s.$$.fragment),f=nn(),l=Z("nav"),d=Z("h3"),p=X(K),m=nn(),rn&&rn.c(),h=nn();for(var A=0;A<sn.length;A+=1)sn[A].c();g=nn(),v=Z("h3"),$=X(W),y=nn(),nt(b.$$.fragment),w=nn(),nt(_.$$.fragment),k=nn(),nt(x.$$.fragment),E=nn(),nt(S.$$.fragment),O=nn(),nt(C.$$.fragment),N=nn(),nt(R.$$.fragment),D=nn(),pn&&pn.c(),j=nn(),T=Z("a"),nt(L.$$.fragment),P=nn(),M=Z("span"),I=X(tn),U=nn(),nt(H.$$.fragment),on(r,"type","text"),on(r,"id","search_input"),on(r,"class","is-primary-menu-item"),on(r,"placeholder",o=n[4]?n[7]("Search..."):n[7]("Convos")),on(a,"for","search_input"),on(a,"class","btn-hallow"),on(e,"class","sidebar-header"),ln(e,"has-focus",n[4]),on(T,"href",Ae.urlFor("/logout")),on(T,"target","_self"),on(l,"class","sidebar-left__nav"),ln(l,"is-filtering",n[1].length>0),on(t,"class","sidebar-left")},m:function(o,A){J(o,t,A),Y(t,e),Y(e,r),un(r,n[1]),Y(e,i),Y(e,a),tt(c,a,null),Y(e,u),tt(s,e,null),Y(t,f),Y(t,l),Y(l,d),Y(d,p),Y(l,m),rn&&rn.m(l,null),Y(l,h);for(var B=0;B<sn.length;B+=1)sn[B].m(l,null);Y(l,g),Y(l,v),Y(v,$),Y(l,y),tt(b,l,null),Y(l,w),tt(_,l,null),Y(l,k),tt(x,l,null),Y(l,E),tt(S,l,null),Y(l,O),tt(C,l,null),Y(l,N),tt(R,l,null),Y(l,D),pn&&pn.m(l,null),Y(l,j),Y(l,T),tt(L,T,null),Y(T,P),Y(T,M),Y(M,I),Y(l,U),tt(H,l,null),n[19](l),z=!0,q||(F=[en(r,"input",n[18]),en(r,"blur",n[11]),en(r,"focus",n[12]),en(r,"keydown",n[14]),en(e,"submit",sl),en(l,"click",n[13])],q=!0)},p:function(t,i){var a=st(i,1)[0];n=t,(!z||144&a&&o!==(o=n[4]?n[7]("Search..."):n[7]("Convos")))&&on(r,"placeholder",o),2&a&&r.value!==n[1]&&un(r,n[1]);var c={};if(134217984&a&&(c.$$scope={dirty:a,ctx:n}),s.$set(c),16&a&&ln(e,"has-focus",n[4]),(!z||128&a)&&K!==(K=n[7]("Conversations")+"")&&cn(p,K),n[3].connections.size?rn&&(Kn(),Yn(rn,1,1,(function(){rn=null})),Wn()):rn?(rn.p(n,a),8&a&&Gn(rn,1)):((rn=zf(n)).c(),Gn(rn,1),rn.m(l,h)),8&a){var u;for(an=n[3].connections.toArray(),u=0;u<an.length;u+=1){var f=Uf(n,an,u);sn[u]?(sn[u].p(f,a),Gn(sn[u],1)):(sn[u]=Jf(f),sn[u].c(),Gn(sn[u],1),sn[u].m(l,g))}for(Kn(),u=an.length;u<sn.length;u+=1)dn(u);Wn()}(!z||136&a)&&W!==(W=(n[3].email||n[7]("Account"))+"")&&cn($,W);var d={};134218112&a&&(d.$$scope={dirty:a,ctx:n}),b.$set(d);var m={};134217856&a&&(m.$$scope={dirty:a,ctx:n}),_.$set(m);var v={};32&a&&(v.href=n[5]),134217856&a&&(v.$$scope={dirty:a,ctx:n}),x.$set(v);var y={};134217856&a&&(y.$$scope={dirty:a,ctx:n}),S.$set(y);var w={};134217856&a&&(w.$$scope={dirty:a,ctx:n}),C.$set(w);var k={};134217856&a&&(k.$$scope={dirty:a,ctx:n}),R.$set(k),8&a&&(G=n[3].is("admin")),G?pn?(pn.p(n,a),8&a&&Gn(pn,1)):((pn=el(n)).c(),Gn(pn,1),pn.m(l,j)):pn&&(Kn(),Yn(pn,1,1,(function(){pn=null})),Wn()),(!z||128&a)&&tn!==(tn=n[7]("Log out")+"")&&cn(I,tn);var E={};64&a&&(E.href="/search?q="+encodeURIComponent(n[6])),134217920&a&&(E.$$scope={dirty:a,ctx:n}),H.$set(E),2&a&&ln(l,"is-filtering",n[1].length>0)},i:function(e){if(!z){Gn(c.$$.fragment,e),Gn(s.$$.fragment,e),Gn(rn);for(var r=0;r<an.length;r+=1)Gn(sn[r]);Gn(b.$$.fragment,e),Gn(_.$$.fragment,e),Gn(x.$$.fragment,e),Gn(S.$$.fragment,e),Gn(C.$$.fragment,e),Gn(R.$$.fragment,e),Gn(pn),Gn(L.$$.fragment,e),Gn(H.$$.fragment,e),Ln((function(){B||(B=Vn(t,sr,n[0],!0)),B.run(1)})),z=!0}},o:function(e){Yn(c.$$.fragment,e),Yn(s.$$.fragment,e),Yn(rn),sn=sn.filter(Boolean);for(var r=0;r<sn.length;r+=1)Yn(sn[r]);Yn(b.$$.fragment,e),Yn(_.$$.fragment,e),Yn(x.$$.fragment,e),Yn(S.$$.fragment,e),Yn(C.$$.fragment,e),Yn(R.$$.fragment,e),Yn(pn),Yn(L.$$.fragment,e),Yn(H.$$.fragment,e),B||(B=Vn(t,sr,n[0],!1)),B.run(0),z=!1},d:function(e){e&&V(t),et(c),et(s),rn&&rn.d(),Q(sn,e),et(b),et(_),et(x),et(S),et(C),et(R),pn&&pn.d(),et(L),et(H),n[19](null),e&&B&&B.end(),q=!1,A(F)}}}function cl(n,t){var e=[t.conversation_id?"for-conversation":"for-connection"];return(t.frozen||"connected"!=n.state)&&e.push("is-frozen"),t.errors&&e.push("has-errors"),e.join(" ")}function ul(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;return n.unread>t?t+"+":n.unread||0}var sl=function(n){return n.preventDefault()};function fl(n,t,e){var r,o,i,a,c,u,s;P(n,Ae,(function(n){return e(17,a=n)})),P(n,de,(function(n){return e(20,c=n)})),P(n,Be,(function(n){return e(7,u=n)}));var f=t.transition,l=En("user");P(n,l,(function(n){return e(3,i=n)}));var d=i.notifications;P(n,d,(function(n){return e(8,s=n)}));var p,m=0,h="",g=!1,v=[];function $(){Ht(p,"a",(function(n){return n.classList.remove("has-focus")})),setTimeout((function(){if(p){e(1,h="");var n=document.activeElement;n&&Dt(n,p)&&Ht(p,"a.has-path",(function(n){return n.focus()})),e(4,g=!1)}}),100)}function y(){if(p){e(15,m=0),e(4,g=!0),e(16,v=[]);var n=[h.match(/^\W+/)?"":"\\b\\W*"];n[0]&&n.push("");for(var t=function(t){var r="+"==h?new RegExp(/[1-9]\d*\s*$/):"+@"==h?new RegExp(/^\s*\w.*[1-9]\d*\s*$/):"+#"==h?new RegExp(/^\s*#.*[1-9]\d*\s*$/):new RegExp(n[t]+Bt(h),"i"),o={};if(Ht(p,"a",(function(n,t){var i=n.classList;!h.length&&i.contains("has-path")&&e(15,m=t),i.remove("has-focus");var a=!h.length||!n.href.match(/\/search$/)&&!o[n.href]&&n.textContent.match(r);a&&v.push(n),n.classList[a?"remove":"add"]("hidden"),o[n.href]=!0})),v.length)return"break"},r=0;r<n.length;r++){if("break"===t(r))break}Ht(p,".for-connection",(function(n){for(var t=n;(t=t.nextElementSibling)&&t.classList.contains("for-conversation");)if(!t.classList.contains("hidden"))return n.classList.remove("hidden")}));var o=p.querySelector(".for-search");o.classList[h?"remove":"add"]("hidden"),o.classList.contains("hidden")||v.push(o),Ht(p,"h3",(function(n){for(var t=n;(t=t.nextElementSibling)&&!Wt(t,"h3");)if(!t.classList.contains("hidden"))return n.classList.remove("hidden");n.classList.add("hidden")}))}}return n.$$set=function(n){"transition"in n&&e(0,f=n.transition)},n.$$.update=function(){2&n.$$.dirty&&y(),8&n.$$.dirty&&e(5,r="/settings/conversation?connection_id="+(i.activeConversation.connection_id||"")),2&n.$$.dirty&&e(6,o=h.replace(/^\//,"")),131076&n.$$.dirty&&p&&$(),98304&n.$$.dirty&&v[m]&&v[m].classList.add("has-focus")},[f,h,p,i,g,r,o,u,s,l,d,$,y,function(n){return(n.target.className||"").match(/(network|user)/)?setTimeout((function(){H(de,c="settings",c)}),50):n.target.closest("a")?setTimeout((function(){H(de,c="",c)}),50):void 0},function(n){if(13==n.keyCode)return n.preventDefault(),$(),void(v[m]&&Ae.go(v[m].href));var t=38==n.keyCode?-1:40==n.keyCode?1:0;t&&(n.preventDefault(),v[m]&&v[m].classList.remove("has-focus"),e(15,m+=n.ctrlKey?4*t:t)),m<0&&e(15,m=v.length-1),m>=v.length&&e(15,m=0)},m,v,a,function(){h=this.value,e(1,h)},function(n){Cn[n?"unshift":"push"]((function(){e(2,p=n)}))}]}var ll=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(If()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,fl,al,j,{transition:0}),t}return i}(it);function dl(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var pl=function(n){s(o,n);var t,r=(t=o,function(){var n,e=c(t);if(dl()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function o(){var n;return e(this,o),(n=r.call(this)).prop("cookie","activeTheme","convos",{key:"theme"}),n.prop("cookie","colorScheme","auto"),n.prop("cookie","compactDisplay",!1),n.prop("ro","colorSchemeOptions",["Auto","Light","Dark"].map((function(n){return[n.toLowerCase(),n]}))),n.prop("ro","themeOptions",(function(){return Array.from(n._stylesheets.entries())})),n.prop("rw","osColorScheme",""),n._stylesheets=new Map([]),n}return S(o,[{key:"hasColorScheme",value:function(n){return Ht(document,'link[id$="-'+n+'"]').length>1}},{key:"start",value:function(){var n=this;Ht(document,'link[rel="alternate stylesheet"][title]',(function(t){var e=t.title.replace(/\s\([a-z]+\)$/,"");n._stylesheets.set(t.id.replace(/^theme_alt__[a-z]+-/,""),e)}));var t=this.osColorScheme;return this._matchMedia||(this._matchMedia=window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):{addListener:function(){}},this._matchMedia.addListener((function(t){return n.update({osColorScheme:t.matches?"dark":"light"})})),t=this._matchMedia.matches?"dark":"light"),this.update({compactDisplay:this.compactDisplay,osColorScheme:t})}},{key:"update",value:function(n){return(n.activeTheme||n.colorScheme||n.osColorScheme)&&this._activateTheme(n),m(c(o.prototype),"update",this).call(this,n)}},{key:"_activateTheme",value:function(n){for(var t,e=n.activeTheme||this.activeTheme,r=n.colorScheme||this.colorScheme,o=n.osColorScheme||this.osColorScheme,i=["auto"==r?o:r,"normal","light"],a=0;a<i.length&&!(t=document.getElementById("theme_alt__"+i[a]+"-"+e));a++);Ht(document,'link[rel*="style"][title]',(function(n){t||(t=n),n.disabled=!0,n.disabled=n.href!=t.href,n.setAttribute("media",n==t?"":"none"),n.setAttribute("rel",n==t?"stylesheet":"alternate stylesheet")}))}}]),o}(Qt);function ml(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var hl=function(n){s(i,n);var t,r,o=(t=i,function(){var n,e=c(t);if(ml()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),(t=o.call(this,n)).prop("ro","op",Pe("/api","listConnectionProfiles")),t.prop("rw","profiles",[]),t.prop("rw","status","pending"),t}return S(i,[{key:"find",value:function(n){return this.search((function(t){return t.id==n}))[0]}},{key:"defaultProfile",value:function(){return{max_bulk_message_size:3,max_message_length:512,url:new Nr("irc://0.0.0.0")}}},{key:"is",value:function(n){return this.status==n}},{key:"load",value:(r=d(f.mark((function n(){var t,e=this,r=arguments;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:{},!this.is("loading")){n.next=3;break}return n.abrupt("return",this);case 3:if(t.force||!this.profiles.length){n.next=5;break}return n.abrupt("return",this);case 5:return this.update({status:"loading"}),n.next=8,this.op.perform();case 8:return this.update({status:this.op.status}),this.is("success")&&this.update({profiles:this.op.res.body.profiles.map((function(n){return e._expand(n)}))}),n.abrupt("return",this);case 11:case"end":return n.stop()}}),n,this)}))),function(){return r.apply(this,arguments)})},{key:"search",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!0};return this.profiles.filter(n)}},{key:"_expand",value:function(n){n.url=new Nr(n.url),n.service_accounts=n.service_accounts.join(", "),n.url.toFields(n);var t=this.defaultProfile();return Object.keys(t).forEach((function(e){return n.hasOwnProperty(e)||(n[e]=t[e])})),n}}]),i}(Qt);function gl(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function vl(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var $l=function(n){s(o,n);var t,r=(t=o,function(){var n,e=c(t);if(vl()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function o(n){return e(this,o),r.call(this,function(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?gl(Object(e),!0).forEach((function(t){yt(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):gl(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}({},n,{connection_id:"",conversation_id:"notifications",name:"Notifications"}))}return S(o,[{key:"addMessages",value:function(n,t){return Array.isArray(n)||(n=[n],this.update({unread:this.unread+1})),this.messages.push(n),this}},{key:"is",value:function(n){return"notifications"==n||m(c(o.prototype),"is",this).call(this,n)}},{key:"send",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Promise.resolve(n)}},{key:"_addOperations",value:function(){this.prop("ro","markAsReadOp",Pe("/api","markNotificationsAsRead")),this.prop("ro","messagesOp",Pe("/api","notificationMessages"))}},{key:"_skipLoad",value:function(){return!1}}]),o}(po);function yl(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function bl(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?yl(Object(e),!0).forEach((function(t){yt(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):yl(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function wl(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var _l=function(n){s(i,n);var t,r,o=(t=i,function(){var n,e=c(t);if(wl()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),(t=o.call(this,bl({},n,{connection_id:"",conversation_id:"search",name:"Search"}))).prop("rw","query",""),t.update({status:"success"}),t}return S(i,[{key:"is",value:function(n){return"conversation"!=n&&("search"==n||m(c(i.prototype),"is",this).call(this,n))}},{key:"load",value:(r=d(f.mark((function n(){var t,e,r,o=arguments;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:{},!this.is("loading")){n.next=3;break}return n.abrupt("return",this);case 3:if((e=bl({},t)).match=t.match||t.message,(e.match||"").match(/\S/)){n.next=7;break}return n.abrupt("return",this.messages.clear().push([{message:'Search query "%1" does not contain anything to search for.',vars:[t.message]}]));case 7:return this.update({query:e.match,status:"loading"}),this.messages.clear(),n.next=11,this.messagesOp.perform(e);case 11:return r=this.messagesOp.res.body,this.messages[e.before?"unshift":"push"](r.messages||[]),n.abrupt("return",this.update({status:this.messagesOp.status}));case 14:case"end":return n.stop()}}),n,this)}))),function(){return r.apply(this,arguments)})},{key:"send",value:function(n){return Mt.string(n)&&(n={message:n}),this.emit("send",n),Promise.resolve(n)}},{key:"_addOperations",value:function(){this.prop("ro","messagesOp",Pe("/api","searchMessages")),this.prop("ro","markAsReadOp",null)}},{key:"_loadParticipants",value:function(){}}]),i}(po);function kl(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function xl(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?kl(Object(e),!0).forEach((function(t){yt(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):kl(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function El(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Sl=function(n){s(i,n);var t,r,o=(t=i,function(){var n,e=c(t);if(El()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),(t=o.call(this)).prop("ro","connections",new Fr),t.prop("ro","connectionProfiles",new hl),t.prop("ro","notifications",new $l({})),t.prop("ro","search",new _l({})),t.prop("ro","roles",new Set),t.prop("ro","unread",(function(){return t._calculateUnread()})),t.prop("persist","expandUrlToMedia",!0),t.prop("persist","ignoreStatuses",!1),t.prop("persist","lastUrl",""),t.prop("rw","activeConversation",t.notifications),t.prop("rw","email",""),t.prop("rw","forced_connection",!1),t.prop("rw","default_connection","irc://chat.freenode.net:6697/%23convos"),t.prop("rw","highlightKeywords",[]),t.prop("rw","status","pending"),t.prop("rw","videoService",n.videoService||""),t.socket=n.socket||to("/events"),t.socket.on("message",(function(n){return t._dispatchMessage(n)})),t.socket.on("update",(function(n){return t._onConnectionChange(n)})),t}return S(i,[{key:"conversations",value:function(n){var t=[];return this.connections.toArray().forEach((function(e){e.conversations.toArray().forEach((function(e){n&&!n(e)||t.push(e)}))})),t}},{key:"ensureConversation",value:function(n,t){var e=this;if((n=xl({},n,{videoService:this.videoService})).conversation_id){var r=this.ensureConversation({connection_id:n.connection_id},!0);return this._maybeUpgradeActiveConversation(r.ensureConversation(n))}var o=this.findConversation(n);return o?o.update(n):((o=new $o(xl({},n))).on("conversationadd",(function(n){return e._maybeUpgradeActiveConversation(n)})),o.on("conversationremove",(function(n){return n==e.activeConversation&&e.setActiveConversation(n)})),o.on("update",(function(n){return e.update({connections:!0})})),this.connections.set(o.connection_id,o),this.update({connections:!0}),t?o:this._maybeUpgradeActiveConversation(o))}},{key:"findConversation",value:function(n){var t=this.connections.get(n.connection_id);return n.conversation_id?t&&t.findConversation(n)||null:t}},{key:"is",value:function(n){var t=this;return Array.isArray(n)?!!n.filter((function(n){return t.is(n)})).length:!!this.roles.has(n)||this.status==n}},{key:"load",value:(r=d(f.mark((function n(){var t,e,r,o=this;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.is("loading")){n.next=2;break}return n.abrupt("return",this);case 2:return this.roles.clear(),this.update({status:"loading"}),t=new Promise((function(n){return o.socket.send({method:"load",object:"user",params:{connections:!0,conversations:!0}},n)})),n.next=7,t;case 7:if(!(e=n.sent).errors){n.next=10;break}return n.abrupt("return",this.update({email:"",roles:!0,status:e.errors?"error":"success"}));case 10:return r=e.user||{},this.connections.clear(),(r.connections||[]).forEach((function(n){return o.ensureConversation(xl({},n,{status:"pending"}))})),(r.conversations||[]).forEach((function(n){return o.ensureConversation(xl({},n,{status:"pending"}))})),this.notifications.update({unread:r.unread||0}),(r.roles||[]).forEach((function(n){return o.roles.add(n)})),n.abrupt("return",this.update({email:r.email||"",default_connection:r.default_connection||"",forced_connection:r.forced_connection||!1,highlightKeywords:r.highlight_keywords||[],roles:!0,status:e.errors?"error":"success",videoService:r.video_service||""}));case 17:case"end":return n.stop()}}),n,this)}))),function(){return r.apply(this,arguments)})},{key:"removeConversation",value:function(n){var t=this.findConversation({connection_id:n.connection_id});if(n.conversation_id)return t&&t.removeConversation(n);this.connections.delete(n.connection_id),t==this.activeConversation&&this.setActiveConversation(t),this.update({connections:!0})}},{key:"setActiveConversation",value:function(n){var t=!n.connection_id&&!n.conversation_id&&this.notifications;if(t)return this.update({activeConversation:t});if(t=this.findConversation(n))return this.update({activeConversation:t});var e=xl({},n,{connection_id:n.connection_id||"",frozen:"Not found."});return["conversation_id","name"].forEach((function(t){return n.hasOwnProperty(t)&&(e[t]=n[t])})),this.update({activeConversation:e.conversation_id?new po(e):new $o(e)})}},{key:"update",value:function(n){return n.videoService&&this.connections.forEach((function(t){return t.update({videoService:n.videoService})})),m(c(i.prototype),"update",this).call(this,n)}},{key:"_calculateUnread",value:function(){var n=this.activeConversation;return this.notifications.unread+this.conversations((function(n){return n.is("private")})).reduce((function(t,e){return t+(e==n?0:e.unread)}),0)}},{key:"_dispatchMessage",value:function(n){n.dispatchTo=("wsEvent_"+this._getEventNameFromMessage(n)).replace(/_(\w)/g,(function(n,t){return t.toUpperCase()})),n.silent=this.ignoreStatuses,this.emit(n.dispatchTo,n),n.highlight&&this.notifications.addMessages(n);var t=this.findConversation({connection_id:n.connection_id});if(t&&(t[n.dispatchTo]&&t[n.dispatchTo](n),n.bubbles)){var e=t.findConversation(n);e&&e[n.dispatchTo]&&e[n.dispatchTo](n)}}},{key:"_getEventNameFromMessage",value:function(n){return n.errors?"error":"state"==n.event?n.type:"sent"==n.event&&n.message.match(/\/\S+/)?(n.command=n.message.split(/\s+/).filter((function(n){return n.length})),n.command[0]=n.command[0].substring(1),"sent_"+n.command[0].toLowerCase()):n.event}},{key:"_maybeUpgradeActiveConversation",value:function(n){var t=this.activeConversation;return n.conversation_id?(n.connection_id&&n.connection_id!=t.connection_id||n.conversation_id&&n.conversation_id!=t.conversation_id||this.update({activeConversation:n}),n):n}},{key:"_onConnectionChange",value:function(n){if(n.is("open")&&this.is("pending"))return this.load();n.is("closed")&&(this.connections.forEach((function(n){return n.update({state:"unreachable"})})),this.is(["error","loading"])||this.update({status:"pending"}))}}]),i}(Qt);function Ol(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Cl=Zn.window;function Nl(n){var t,e,r;function o(t){n[26](t)}var i={};return void 0!==n[1]&&(i.title=n[1]),t=new ls({props:i}),Cn.push((function(){return Xn(t,"title",o)})),{c:function(){nt(t.$$.fragment)},m:function(n,e){tt(t,n,e),r=!0},p:function(n,r){var o={};!e&&2&r[0]&&(e=!0,o.title=n[1],Pn((function(){return e=!1}))),t.$set(o)},i:function(n){r||(Gn(t.$$.fragment,n),r=!0)},o:function(n){Yn(t.$$.fragment,n),r=!1},d:function(n){et(t,n)}}}function Rl(n){var t,e,r,o,i,a,c,u,s,f=("nav"==n[4]||n[5].nColumns>1)&&Dl(n),l=[Kl,Fl,ql,zl,Bl,Hl,Ul,Il,Ml,Pl,Ll,Tl,jl],d=[];function p(n,t){return"/chat"==n[2].path?0:(4&t[0]&&(e=!(0!=n[2].path.indexOf("/chat/"))),e?1:"/help"==n[2].path?2:"/search"==n[2].path?3:"/settings"==n[2].path?4:"/settings/account"==n[2].path?5:"/settings/connections"==n[2].path?6:(4&t[0]&&(r=!(0!=n[2].path.indexOf("/settings/connection/"))),r?7:(4&t[0]&&(o=!(0!=n[2].path.indexOf("/settings/connection-profile/"))),o?8:"/settings/conversation"==n[2].path?9:"/settings/users"==n[2].path?10:"/login"==n[2].path||"/register"==n[2].path?11:12)))}i=p(n,[-1]),a=d[i]=l[i](n);var m=n[4]&&1==n[5].nColumns&&Wl(n);return{c:function(){f&&f.c(),t=nn(),a.c(),c=nn(),m&&m.c(),u=tn()},m:function(n,e){f&&f.m(n,e),J(n,t,e),d[i].m(n,e),J(n,c,e),m&&m.m(n,e),J(n,u,e),s=!0},p:function(n,e){"nav"==n[4]||n[5].nColumns>1?f?(f.p(n,e),48&e[0]&&Gn(f,1)):((f=Dl(n)).c(),Gn(f,1),f.m(t.parentNode,t)):f&&(Kn(),Yn(f,1,1,(function(){f=null})),Wn());var r=i;(i=p(n,e))===r?d[i].p(n,e):(Kn(),Yn(d[r],1,1,(function(){d[r]=null})),Wn(),(a=d[i])?a.p(n,e):(a=d[i]=l[i](n)).c(),Gn(a,1),a.m(c.parentNode,c)),n[4]&&1==n[5].nColumns?m?(m.p(n,e),48&e[0]&&Gn(m,1)):((m=Wl(n)).c(),Gn(m,1),m.m(u.parentNode,u)):m&&(Kn(),Yn(m,1,1,(function(){m=null})),Wn())},i:function(n){s||(Gn(f),Gn(a),Gn(m),s=!0)},o:function(n){Yn(f),Yn(a),Yn(m),s=!1},d:function(n){f&&f.d(n),n&&V(t),d[i].d(n),n&&V(c),m&&m.d(n),n&&V(u)}}}function Al(n){var t,e;return t=new Du({}),{c:function(){nt(t.$$.fragment)},m:function(n,r){tt(t,n,r),e=!0},p:O,i:function(n){e||(Gn(t.$$.fragment,n),e=!0)},o:function(n){Yn(t.$$.fragment,n),e=!1},d:function(n){et(t,n)}}}function Dl(n){var t,e;return t=new ll({props:{transition:{duration:n[5].nColumns>1?0:250,x:n[0]}}}),{c:function(){nt(t.$$.fragment)},m:function(n,r){tt(t,n,r),e=!0},p:function(n,e){var r={};33&e[0]&&(r.transition={duration:n[5].nColumns>1?0:250,x:n[0]}),t.$set(r)},i:function(n){e||(Gn(t.$$.fragment,n),e=!0)},o:function(n){Yn(t.$$.fragment,n),e=!1},d:function(n){et(t,n)}}}function jl(n){var t,e,r;function o(t){n[24](t)}var i={};return void 0!==n[1]&&(i.title=n[1]),t=new Du({props:i}),Cn.push((function(){return Xn(t,"title",o)})),{c:function(){nt(t.$$.fragment)},m:function(n,e){tt(t,n,e),r=!0},p:function(n,r){var o={};!e&&2&r[0]&&(e=!0,o.title=n[1],Pn((function(){return e=!1}))),t.$set(o)},i:function(n){r||(Gn(t.$$.fragment,n),r=!0)},o:function(n){Yn(t.$$.fragment,n),r=!1},d:function(n){et(t,n)}}}function Tl(n){var t,e,r;function o(t){n[23](t)}var i={};return void 0!==n[1]&&(i.title=n[1]),t=new ls({props:i}),Cn.push((function(){return Xn(t,"title",o)})),{c:function(){nt(t.$$.fragment)},m:function(n,e){tt(t,n,e),r=!0},p:function(n,r){var o={};!e&&2&r[0]&&(e=!0,o.title=n[1],Pn((function(){return e=!1}))),t.$set(o)},i:function(n){r||(Gn(t.$$.fragment,n),r=!0)},o:function(n){Yn(t.$$.fragment,n),r=!1},d:function(n){et(t,n)}}}function Ll(n){var t,e,r;function o(t){n[22](t)}var i={};return void 0!==n[1]&&(i.title=n[1]),t=new Mf({props:i}),Cn.push((function(){return Xn(t,"title",o)})),{c:function(){nt(t.$$.fragment)},m:function(n,e){tt(t,n,e),r=!0},p:function(n,r){var o={};!e&&2&r[0]&&(e=!0,o.title=n[1],Pn((function(){return e=!1}))),t.$set(o)},i:function(n){r||(Gn(t.$$.fragment,n),r=!0)},o:function(n){Yn(t.$$.fragment,n),r=!1},d:function(n){et(t,n)}}}function Pl(n){var t,e,r;function o(t){n[21](t)}var i={};return void 0!==n[1]&&(i.title=n[1]),t=new ku({props:i}),Cn.push((function(){return Xn(t,"title",o)})),{c:function(){nt(t.$$.fragment)},m:function(n,e){tt(t,n,e),r=!0},p:function(n,r){var o={};!e&&2&r[0]&&(e=!0,o.title=n[1],Pn((function(){return e=!1}))),t.$set(o)},i:function(n){r||(Gn(t.$$.fragment,n),r=!0)},o:function(n){Yn(t.$$.fragment,n),r=!1},d:function(n){et(t,n)}}}function Ml(n){var t,e,r;function o(t){n[20](t)}var i={profile_id:n[2].pathParts[2]};return void 0!==n[1]&&(i.title=n[1]),t=new eu({props:i}),Cn.push((function(){return Xn(t,"title",o)})),{c:function(){nt(t.$$.fragment)},m:function(n,e){tt(t,n,e),r=!0},p:function(n,r){var o={};4&r[0]&&(o.profile_id=n[2].pathParts[2]),!e&&2&r[0]&&(e=!0,o.title=n[1],Pn((function(){return e=!1}))),t.$set(o)},i:function(n){r||(Gn(t.$$.fragment,n),r=!0)},o:function(n){Yn(t.$$.fragment,n),r=!1},d:function(n){et(t,n)}}}function Il(n){var t,e,r;function o(t){n[19](t)}var i={connection_id:n[2].pathParts[2]};return void 0!==n[1]&&(i.title=n[1]),t=new uu({props:i}),Cn.push((function(){return Xn(t,"title",o)})),{c:function(){nt(t.$$.fragment)},m:function(n,e){tt(t,n,e),r=!0},p:function(n,r){var o={};4&r[0]&&(o.connection_id=n[2].pathParts[2]),!e&&2&r[0]&&(e=!0,o.title=n[1],Pn((function(){return e=!1}))),t.$set(o)},i:function(n){r||(Gn(t.$$.fragment,n),r=!0)},o:function(n){Yn(t.$$.fragment,n),r=!1},d:function(n){et(t,n)}}}function Ul(n){var t,e,r;function o(t){n[18](t)}var i={};return void 0!==n[1]&&(i.title=n[1]),t=new Sc({props:i}),Cn.push((function(){return Xn(t,"title",o)})),{c:function(){nt(t.$$.fragment)},m:function(n,e){tt(t,n,e),r=!0},p:function(n,r){var o={};!e&&2&r[0]&&(e=!0,o.title=n[1],Pn((function(){return e=!1}))),t.$set(o)},i:function(n){r||(Gn(t.$$.fragment,n),r=!0)},o:function(n){Yn(t.$$.fragment,n),r=!1},d:function(n){et(t,n)}}}function Hl(n){var t,e,r;function o(t){n[17](t)}var i={};return void 0!==n[1]&&(i.title=n[1]),t=new nf({props:i}),Cn.push((function(){return Xn(t,"title",o)})),{c:function(){nt(t.$$.fragment)},m:function(n,e){tt(t,n,e),r=!0},p:function(n,r){var o={};!e&&2&r[0]&&(e=!0,o.title=n[1],Pn((function(){return e=!1}))),t.$set(o)},i:function(n){r||(Gn(t.$$.fragment,n),r=!0)},o:function(n){Yn(t.$$.fragment,n),r=!1},d:function(n){et(t,n)}}}function Bl(n){var t,e,r;function o(t){n[16](t)}var i={};return void 0!==n[1]&&(i.title=n[1]),t=new vf({props:i}),Cn.push((function(){return Xn(t,"title",o)})),{c:function(){nt(t.$$.fragment)},m:function(n,e){tt(t,n,e),r=!0},p:function(n,r){var o={};!e&&2&r[0]&&(e=!0,o.title=n[1],Pn((function(){return e=!1}))),t.$set(o)},i:function(n){r||(Gn(t.$$.fragment,n),r=!0)},o:function(n){Yn(t.$$.fragment,n),r=!1},d:function(n){et(t,n)}}}function zl(n){var t,e,r;function o(t){n[15](t)}var i={};return void 0!==n[1]&&(i.title=n[1]),t=new Ms({props:i}),Cn.push((function(){return Xn(t,"title",o)})),{c:function(){nt(t.$$.fragment)},m:function(n,e){tt(t,n,e),r=!0},p:function(n,r){var o={};!e&&2&r[0]&&(e=!0,o.title=n[1],Pn((function(){return e=!1}))),t.$set(o)},i:function(n){r||(Gn(t.$$.fragment,n),r=!0)},o:function(n){Yn(t.$$.fragment,n),r=!1},d:function(n){et(t,n)}}}function ql(n){var t,e,r;function o(t){n[14](t)}var i={};return void 0!==n[1]&&(i.title=n[1]),t=new zu({props:i}),Cn.push((function(){return Xn(t,"title",o)})),{c:function(){nt(t.$$.fragment)},m:function(n,e){tt(t,n,e),r=!0},p:function(n,r){var o={};!e&&2&r[0]&&(e=!0,o.title=n[1],Pn((function(){return e=!1}))),t.$set(o)},i:function(n){r||(Gn(t.$$.fragment,n),r=!0)},o:function(n){Yn(t.$$.fragment,n),r=!1},d:function(n){et(t,n)}}}function Fl(n){var t,e,r;function o(t){n[13](t)}var i={connection_id:n[2].pathParts[1],conversation_id:n[2].pathParts[2]};return void 0!==n[1]&&(i.title=n[1]),t=new ic({props:i}),Cn.push((function(){return Xn(t,"title",o)})),{c:function(){nt(t.$$.fragment)},m:function(n,e){tt(t,n,e),r=!0},p:function(n,r){var o={};4&r[0]&&(o.connection_id=n[2].pathParts[1]),4&r[0]&&(o.conversation_id=n[2].pathParts[2]),!e&&2&r[0]&&(e=!0,o.title=n[1],Pn((function(){return e=!1}))),t.$set(o)},i:function(n){r||(Gn(t.$$.fragment,n),r=!0)},o:function(n){Yn(t.$$.fragment,n),r=!1},d:function(n){et(t,n)}}}function Kl(n){var t,e,r;function o(t){n[12](t)}var i={};return void 0!==n[1]&&(i.title=n[1]),t=new ks({props:i}),Cn.push((function(){return Xn(t,"title",o)})),{c:function(){nt(t.$$.fragment)},m:function(n,e){tt(t,n,e),r=!0},p:function(n,r){var o={};!e&&2&r[0]&&(e=!0,o.title=n[1],Pn((function(){return e=!1}))),t.$set(o)},i:function(n){r||(Gn(t.$$.fragment,n),r=!0)},o:function(n){Yn(t.$$.fragment,n),r=!1},d:function(n){et(t,n)}}}function Wl(n){var t,e,r,o,i;return{c:function(){(t=Z("div")).textContent=" ",on(t,"class","overlay")},m:function(e,a){J(e,t,a),r=!0,o||(i=en(t,"click",n[25]),o=!0)},p:O,i:function(n){r||(Ln((function(){e||(e=Vn(t,ur,{duration:200},!0)),e.run(1)})),r=!0)},o:function(n){e||(e=Vn(t,ur,{duration:200},!1)),e.run(0),r=!1},d:function(n){n&&V(t),n&&e&&e.end(),o=!1,i()}}}function Gl(n){var t,e,r,o,i,a,c;Ln(n[11]);var u=[Al,Rl,Nl],s=[];function f(n,e){return 8&e[0]&&(t=!!n[3].is(["loading","pending"])),t?0:n[3].email?1:2}return e=f(n,[-1]),r=s[e]=u[e](n),{c:function(){r.c(),o=tn()},m:function(t,r){s[e].m(t,r),J(t,o,r),i=!0,a||(c=[en(Cl,"focus",n[10]),en(Cl,"resize",n[11])],a=!0)},p:function(n,t){var i=e;(e=f(n,t))===i?s[e].p(n,t):(Kn(),Yn(s[i],1,1,(function(){s[i]=null})),Wn(),(r=s[e])?r.p(n,t):(r=s[e]=u[e](n)).c(),Gn(r,1),r.m(o.parentNode,o))},i:function(n){i||(Gn(r),i=!0)},o:function(n){Yn(r),i=!1},d:function(n){s[e].d(n),n&&V(o),a=!1,A(c)}}}function Yl(t,e,r){var o,i,a,c,u;P(t,Ae,(function(n){return r(2,i=n)})),P(t,de,(function(n){return r(4,c=n)})),P(t,pe,(function(n){return r(5,u=n)}));var s=to("/events"),l=(new pl).start();P(t,l,(function(n){return r(9,o=n)}));var p=new Sl({});P(t,p,(function(n){return r(3,a=n)}));var m=0,h={closed:!0},g=He.l("Chat");function v(){return(v=d(f.mark((function n(){var t,e,r;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(navigator.serviceWorker){n.next=2;break}return n.abrupt("return",{});case 2:return n.next=4,navigator.serviceWorker.register(Ae.urlFor("/sw.js"));case 4:return t=n.sent,n.next=7,fetch(Ae.urlFor("/sw/info"));case 7:if(e=n.sent,n.t1=200==e.status,!n.t1){n.next=13;break}return n.next=12,e.json();case 12:n.t1=n.sent;case 13:if(n.t0=n.t1,n.t0){n.next=16;break}n.t0={mode:"",version:"0.00"};case 16:if((r=n.t0).version!=zt("version")){n.next=19;break}return n.abrupt("return",{});case 19:console.info("[serviceWorker.update]",zt("version"),r),t.update();case 21:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function $(){return($=d(f.mark((function t(e,r){var o,i;return f.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.email&&He.emojis.load(),n[r.email?"add":"remove"]("notify"),t.next=4,Tn();case 4:o=r.is(["loading","pending"])||document.querySelector(".cms-main")?"cms":"app",document.body.className=document.body.className.replace(/for-\w+/,"for-"+o),0==e.pathParts.length?(i=r.email?r.lastUrl||"/chat":"/login",e.go(i,{replace:!0})):r.email&&r.update({lastUrl:location.href});case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}s.update({debug:"WebSocket"}),window.convosWebSockeet=s,Ae.update({baseUrl:zt("base_url")}),s.update({url:Ae.wsUrlFor("/events")}),p.on("wsEventSentJoin",(function(n){return Ae.go(Ae.conversationPath(n))})),function(){return v.apply(this,arguments)}().catch((function(n){return console.error("[serviceWorker]",n)})),xn("api",Pe("/api").update({url:Ae.urlFor("/api")}).toFunction()),xn("socket",s),xn("themeManager",l),xn("user",p),co.on("click",(function(n){return n.path&&Ae.go(n.path)})),s.on("update",(function(n){if(n.is("open"))return h.close&&h.close();var t=!1===navigator.onLine?He.l("You seem to be offline."):n.error?He.l(n.error):n.is("connecting")?He.l("Connecting to Convos..."):He.l("Connection to Convos is %1.",He.l(n.readyStateHuman));if(h.body==t)return;h.close&&h.close();h=co.showInApp(t,{closeAfter:-1,title:He.l("Status")})})),He.load().then((function(){return p.load()}));return t.$$.update=function(){512&t.$$.dirty[0]&&n[o.compactDisplay?"add":"remove"]("compact-display"),12&t.$$.dirty[0]&&function(n,t){$.apply(this,arguments)}(i,a),10&t.$$.dirty[0]&&function(n,t){if(document){var e=zt("organization_name");n=t.unread?"("+t.unread+") "+He.l(n):He.l(n),document.title="Convos"==e?He.l("%1 - Convos",n):He.l("%1 - Convos for %2",n,e)}}(g,a),1&t.$$.dirty[0]&&pe.set({width:m,nColumns:m>1200?3:m>800?2:1})},[m,g,i,a,c,u,s,l,p,o,function(){return p.email&&s.open()},function(){r(0,m=Cl.innerWidth)},function(n){r(1,g=n)},function(n){r(1,g=n)},function(n){r(1,g=n)},function(n){r(1,g=n)},function(n){r(1,g=n)},function(n){r(1,g=n)},function(n){r(1,g=n)},function(n){r(1,g=n)},function(n){r(1,g=n)},function(n){r(1,g=n)},function(n){r(1,g=n)},function(n){r(1,g=n)},function(n){r(1,g=n)},function(){H(de,c="",c)},function(n){r(1,g=n)}]}var Jl=function(n){s(i,n);var t,o=(t=i,function(){var n,e=c(t);if(Ol()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function i(n){var t;return e(this,i),t=o.call(this),ot(r(t),n,Yl,Gl,j,{},[-1,-1]),t}return i}(it);function Vl(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Ql=function(n){s(u,n);var t,r,o,i=(t=u,function(){var n,e=c(t);if(Vl()){var r=c(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return a(this,n)});function u(n){var t;return e(this,u),(t=i.call(this)).prop("ro","domain",n.domain||"meet.jit.si"),t.prop("ro","email",n.email||""),t.prop("rw","nick",n.nick||""),t.prop("rw","roomName",n.roomName||"convos-default"),t.prop("persist","disableAudioLevels",!0,{key:"video:disableAudioLevels"}),t.prop("persist","disableH264",!0,{key:"video:disableH264"}),t.prop("persist","resolution",720,{key:"video:resolution"}),t}return S(u,[{key:"render",value:(o=d(f.mark((function n(t){var e,r,o=this;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e=[].slice.call(t.children,0),this.targetEl=t,n.next=5,this._load();case 5:this.jitsi=n.sent,e.forEach((function(n){return n.remove()})),t.className=t.className.replace(/cms-main/,"video-chat--wrapper"),document.querySelector(".cms-navbar").classList.add("is-full-width"),n.next=18;break;case 11:n.prev=11,n.t0=n.catch(0),console.error("[Jitsi]",{err:n.t0}),(r=document.querySelector(".video-error")).querySelector("span").textContent=String(n.t0).substring(0,350),r.classList.remove("hidden"),Ht(document,".cms-main .fa-spin",(function(n){return n.parentNode.classList.add("hidden")}));case 18:if(this.jitsi){n.next=20;break}return n.abrupt("return",this);case 20:return document.addEventListener("keydown",(function(n){"KeyC"==n.code&&o.jitsi.executeCommand("toggleChat"),"KeyD"==n.code&&o.jitsi.executeCommand("toggleShareScreen"),"KeyF"==n.code&&o.jitsi.executeCommand("toggleFilmStrip"),"KeyM"==n.code&&o.jitsi.executeCommand("toggleAudio"),"KeyR"==n.code&&o.jitsi.executeCommand("toggleRaiseHand"),"KeyV"==n.code&&o.jitsi.executeCommand("toggleVideo"),"KeyW"==n.code&&o.jitsi.executeCommand("toggleTileView"),"Space"==n.code&&o.jitsi.isAudioMuted().then((function(n){return n&&o.jitsi.executeCommand("toggleAudio")}))})),document.addEventListener("keyup",(function(n){"Space"==n.code&&o.jitsi.isAudioMuted().then((function(n){return n||o.jitsi.executeCommand("toggleAudio")}))})),n.abrupt("return",this);case 23:case"end":return n.stop()}}),n,this,[[0,11]])}))),function(n){return o.apply(this,arguments)})},{key:"_configOverwrite",value:function(){return{disableAudioLevels:this.disableAudioLevels,disableH264:this.disableH264,enableWelcomePage:!this.nick,prejoinPageEnabled:!this.nick,minParticipants:1,resolution:this.resolution,analytics:{googleAnalyticsTrackingId:"",scriptURLs:[]},e2eping:{analyticsInterval:-1,pingInterval:-1}}}},{key:"_interfaceConfigOverwrite",value:function(){return{DEFAULT_BACKGROUND:window.getComputedStyle(document.querySelector(".cms-navbar--wrapper")).backgroundColor||"#222222",DISABLE_FOCUS_INDICATOR:!0,DISABLE_DOMINANT_SPEAKER_INDICATOR:!0,DISABLE_VIDEO_BACKGROUND:!0,INITIAL_TOOLBAR_TIMEOUT:1e3,SHOW_CHROME_EXTENSION_BANNER:!0,TOOLBAR_ALWAYS_VISIBLE:!1,TOOLBAR_BUTTONS:["camera","chat","closedcaptions","desktop","etherpad","fodeviceselection","fullscreen","hangup","help","microphone","mute-everyone","profile","raisehand","security","settings","sharedvideo","shortcuts","stats","tileview"],TOOLBAR_TIMEOUT:2e3,VERTICAL_FILMSTRIP:!1,VIDEO_QUALITY_LABEL_DISABLED:!0}}},{key:"_load",value:(r=d(f.mark((function n(){return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,It("https://"+this.domain+"/external_api.js");case 2:return n.abrupt("return",new JitsiMeetExternalAPI(this.domain,this._options()));case 3:case"end":return n.stop()}}),n,this)}))),function(){return r.apply(this,arguments)})},{key:"_options",value:function(){var n={};return this.email&&(n.email=this.email),this.nick&&(n.displayName=this.nick),{configOverwrite:this._configOverwrite(),interfaceConfigOverwrite:this._interfaceConfigOverwrite(),parentNode:this.targetEl,roomName:this.roomName,userInfo:n,height:"100%",width:"100%"}}}]),u}(Qt);if(Ht(document,"#hamburger_checkbox_toggle",(function(n){n.checked=!1})),Ht(document,".js-close-window",(function(n){n.addEventListener("click",(function(n){window.opener&&(n.preventDefault(),setTimeout((function(){return window.close()}),1),window.opener.focus())}))})),document.querySelector('meta[name="convos:start_app"][content="chat"]')){document.querySelector(".footer--wrapper").remove(),document.querySelector(".cms-main").remove();new Jl({target:document.body})}else if(document.querySelector('meta[name="convos:start_app"][content="jitsi"]')){document.querySelector(".footer--wrapper").remove();var Zl=document.querySelector(".cms-main");new Ql(Zl.dataset).render(Zl)}else document.addEventListener("DOMContentLoaded",(function(n){Ht(document,"pre",(function(n){return Rr.lineNumbersBlock(n)}))}));function Xl(n){if(!("ontouchstart"in window)){var t=function(n){for(var t=0;t<n.length;t++){var e=document.querySelector(n[t]);if(e&&-1!=e.tabIndex)return e}return null},e=n&&t(["input.is-primary-menu-item","a.is-primary-menu-item"]),r=document.activeElement;if(Wt(r,["a","input","textarea"])&&e&&r!=e)return e.focus();var o=t([".is-primary-input",'main input[type="text"], article input[type="text"]',"main a, article a"]);return o?o.focus():e?e.focus():void 0}}document.addEventListener("keydown",(function(n){27==n.keyCode&&(Ht(document,".fullscreen",(function(n){return n.click()})),Xl()),13==n.keyCode&&n.shiftKey&&(n.preventDefault(),Xl("toggle"))}))}();
//# sourceMappingURL=convos.60a32031.js.map
