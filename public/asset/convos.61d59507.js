!function(){"use strict";var e={add:function(e){document.body.classList.remove("no-"+e),document.body.classList.add("has-"+e)},has:function(e){return document.body.classList.contains("has-"+e)},remove:function(e){document.body.classList.add("no-"+e),document.body.classList.remove("has-"+e)}};function t(t,n){document.addEventListener(t,(function r(o){"mousemove"!=t&&e.add(n),"mousemove"!=t||e.has("touch")||e.add(n),document.removeEventListener(t,r)}))}function n(e){return n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function i(e,t,n){return i=o()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return n&&r(i,n.prototype),i},i.apply(null,arguments)}function a(e){var t="function"==typeof Map?new Map:void 0;return a=function(e){if(null===e||(o=e,-1===Function.toString.call(o).indexOf("[native code]")))return e;var o;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,a)}function a(){return i(e,arguments,n(this).constructor)}return a.prototype=Object.create(e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),r(a,e)},a(e)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function c(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function l(e){return function(e){if(Array.isArray(e))return u(e)}(e)||s(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=d(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},f.apply(this,arguments)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function $(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(){}t("mousemove","mouse"),t("touchstart","touch"),e.add("js");var D=function(e){return e};function w(e){return e()}function _(){return Object.create(null)}function E(e){e.forEach(w)}function C(e){return"function"==typeof e}function k(e,t){return e!=e?t==t:e!==t||e&&"object"===m(e)||"function"==typeof e}function A(e){if(null==e)return y;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=e.subscribe.apply(e,n);return o.unsubscribe?function(){return o.unsubscribe()}:o}function x(e){var t;return A(e,(function(e){return t=e}))(),t}function F(e,t,n){e.$$.on_destroy.push(A(t,n))}function S(e,t,n,r){if(e){var o=O(e,t,n,r);return e[0](o)}}function O(e,t,n,r){return e[1]&&r?function(e,t){for(var n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](r(t))):n.ctx}function B(e,t,n,r){if(e[2]&&r){var o=e[2](r(n));if(void 0===t.dirty)return o;if("object"===m(o)){for(var i=[],a=Math.max(t.dirty.length,o.length),u=0;u<a;u+=1)i[u]=t.dirty[u]|o[u];return i}return t.dirty|o}return t.dirty}function N(e,t,n,r,o,i){if(o){var a=O(t,n,r,i);e.p(a,o)}}function j(e){if(e.ctx.length>32){for(var t=[],n=e.ctx.length/32,r=0;r<n;r++)t[r]=-1;return t}return-1}function T(e,t,n){return e.set(n),t}function R(e){return e&&C(e.destroy)?e.destroy:y}var L,M="undefined"!=typeof window,P=M?function(){return window.performance.now()}:function(){return Date.now()},I=M?function(e){return requestAnimationFrame(e)}:y,U=new Set;function H(e){U.forEach((function(t){t.c(e)||(U.delete(t),t.f())})),0!==U.size&&I(H)}function z(e,t){e.appendChild(t)}function q(e){if(!e)return document;var t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function W(e){var t=Z("style");return function(e,t){z(e.head||e,t)}(q(e),t),t}function K(e,t,n){e.insertBefore(t,n||null)}function G(e){e.parentNode.removeChild(e)}function Y(e,t){for(var n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function Z(e){return document.createElement(e)}function V(e){return document.createTextNode(e)}function J(){return V(" ")}function Q(){return V("")}function X(e,t,n,r){return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n,r)}}function ee(e){return function(t){return t.preventDefault(),e.call(this,t)}}function te(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ne(e){return Array.from(e.childNodes)}function re(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function oe(e,t){e.value=null==t?"":t}function ie(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function ae(){if(void 0===L){L=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(e){L=!0}}return L}function ue(e,t,n){e.classList[n?"add":"remove"](t)}function se(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,!1,t),r}var ce,le=function(){function e(){$(this,e),this.e=this.n=null}return b(e,[{key:"c",value:function(e){this.h(e)}},{key:"m",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.e||(this.e=Z(t.nodeName),this.t=t,this.c(e)),this.i(n)}},{key:"h",value:function(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}},{key:"i",value:function(e){for(var t=0;t<this.n.length;t+=1)K(this.t,this.n[t],e)}},{key:"p",value:function(e){this.d(),this.h(e),this.i(this.a)}},{key:"d",value:function(){this.n.forEach(G)}}]),e}(),de=new Set,fe=0;function pe(e){for(var t=5381,n=e.length;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function me(e,t,n,r,o,i,a){for(var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,s=16.666/r,c="{\n",l=0;l<=1;l+=s){var d=t+(n-t)*i(l);c+=100*l+"%{".concat(a(d,1-d),"}\n")}var f=c+"100% {".concat(a(n,1-n),"}\n}"),p="__svelte_".concat(pe(f),"_").concat(u),m=q(e);de.add(m);var h=m.__svelte_stylesheet||(m.__svelte_stylesheet=W(e).sheet),g=m.__svelte_rules||(m.__svelte_rules={});g[p]||(g[p]=!0,h.insertRule("@keyframes ".concat(p," ").concat(f),h.cssRules.length));var $=e.style.animation||"";return e.style.animation="".concat($?"".concat($,", "):"").concat(p," ").concat(r,"ms linear ").concat(o,"ms 1 both"),fe+=1,p}function he(e,t){var n=(e.style.animation||"").split(", "),r=n.filter(t?function(e){return e.indexOf(t)<0}:function(e){return-1===e.indexOf("__svelte")}),o=n.length-r.length;o&&(e.style.animation=r.join(", "),(fe-=o)||I((function(){fe||(de.forEach((function(e){for(var t=e.__svelte_stylesheet,n=t.cssRules.length;n--;)t.deleteRule(n);e.__svelte_rules={}})),de.clear())})))}function ge(e){ce=e}function $e(){if(!ce)throw new Error("Function called outside component initialization");return ce}function ve(e){$e().$$.on_mount.push(e)}function be(e){$e().$$.on_destroy.push(e)}function ye(e,t){$e().$$.context.set(e,t)}function De(e){return $e().$$.context.get(e)}function we(e,t){var n=this,r=e.$$.callbacks[t.type];r&&r.slice().forEach((function(e){return e.call(n,t)}))}var _e=[],Ee=[],Ce=[],ke=[],Ae=Promise.resolve(),xe=!1;function Fe(){xe||(xe=!0,Ae.then(Re))}function Se(){return Fe(),Ae}function Oe(e){Ce.push(e)}function Be(e){ke.push(e)}var Ne,je=new Set,Te=0;function Re(){var e=ce;do{for(;Te<_e.length;){var t=_e[Te];Te++,ge(t),Le(t.$$)}for(ge(null),_e.length=0,Te=0;Ee.length;)Ee.pop()();for(var n=0;n<Ce.length;n+=1){var r=Ce[n];je.has(r)||(je.add(r),r())}Ce.length=0}while(_e.length);for(;ke.length;)ke.pop()();xe=!1,je.clear(),ge(e)}function Le(e){if(null!==e.fragment){e.update(),E(e.before_update);var t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Oe)}}function Me(e,t,n){e.dispatchEvent(se("".concat(t?"intro":"outro").concat(n)))}var Pe,Ie=new Set;function Ue(){Pe={r:0,c:[],p:Pe}}function He(){Pe.r||E(Pe.c),Pe=Pe.p}function ze(e,t){e&&e.i&&(Ie.delete(e),e.i(t))}function qe(e,t,n,r){if(e&&e.o){if(Ie.has(e))return;Ie.add(e),Pe.c.push((function(){Ie.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}var We={duration:0};function Ke(e,t,n,r){var o=t(e,n),i=r?0:1,a=null,u=null,s=null;function c(){s&&he(e,s)}function l(e,t){var n=e.b-i;return t*=Math.abs(n),{a:i,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function d(t){var n,r=o||We,d=r.delay,f=void 0===d?0:d,p=r.duration,m=void 0===p?300:p,h=r.easing,g=void 0===h?D:h,$=r.tick,v=void 0===$?y:$,b=r.css,w={start:P()+f,b:t};t||(w.group=Pe,Pe.r+=1),a||u?u=w:(b&&(c(),s=me(e,i,t,m,f,g,b)),t&&v(0,1),a=l(w,m),Oe((function(){return Me(e,t,"start")})),n=function(t){if(u&&t>u.start&&(a=l(u,m),u=null,Me(e,a.b,"start"),b&&(c(),s=me(e,i,a.b,a.duration,0,g,o.css))),a)if(t>=a.end)v(i=a.b,1-i),Me(e,a.b,"end"),u||(a.b?c():--a.group.r||E(a.group.c)),a=null;else if(t>=a.start){var n=t-a.start;i=a.a+a.d*g(n/a.duration),v(i,1-i)}return!(!a&&!u)},0===U.size&&I(H),new Promise((function(e){U.add({c:n,f:e})})))}return{run:function(e){C(o)?(Ne||(Ne=Promise.resolve()).then((function(){Ne=null})),Ne).then((function(){o=o(),d(e)})):d(e)},end:function(){c(),a=u=null}}}function Ge(e,t){var n,r=t.token={};function o(e,n,o,i){if(t.token===r){t.resolved=i;var a=t.ctx;void 0!==o&&((a=a.slice())[o]=i);var u=e&&(t.current=e)(a),s=!1;t.block&&(t.blocks?t.blocks.forEach((function(e,r){r!==n&&e&&(Ue(),qe(e,1,1,(function(){t.blocks[r]===e&&(t.blocks[r]=null)})),He())})):t.block.d(1),u.c(),ze(u,1),u.m(t.mount(),t.anchor),s=!0),t.block=u,t.blocks&&(t.blocks[n]=u),s&&Re()}}if((n=e)&&"object"===m(n)&&"function"==typeof n.then){var i=$e();if(e.then((function(e){ge(i),o(t.then,1,t.value,e),ge(null)}),(function(e){if(ge(i),o(t.catch,2,t.error,e),ge(null),!t.hasCatch)throw e})),t.current!==t.pending)return o(t.pending,0),!0}else{if(t.current!==t.then)return o(t.then,1,t.value,e),!0;t.resolved=e}}function Ye(e,t,n){var r=t.slice(),o=e.resolved;e.current===e.then&&(r[e.value]=o),e.current===e.catch&&(r[e.error]=o),e.block.p(r,n)}var Ze="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function Ve(e,t,n){var r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function Je(e){e&&e.c()}function Qe(e,t,n,r){var o=e.$$,i=o.fragment,a=o.on_mount,u=o.on_destroy,s=o.after_update;i&&i.m(t,n),r||Oe((function(){var t=a.map(w).filter(C);u?u.push.apply(u,l(t)):E(t),e.$$.on_mount=[]})),s.forEach(Oe)}function Xe(e,t){var n=e.$$;null!==n.fragment&&(E(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function et(e,t){-1===e.$$.dirty[0]&&(_e.push(e),Fe(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function tt(e,t,n,r,o,i,a){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[-1],s=ce;ge(e);var c=e.$$={fragment:null,ctx:null,props:i,update:y,not_equal:o,bound:_(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:_(),dirty:u,skip_bound:!1,root:t.target||s.$$.root};a&&a(c.root);var l=!1;if(c.ctx=n?n(e,t.props||{},(function(t,n){var r=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:n;return c.ctx&&o(c.ctx[t],c.ctx[t]=r)&&(!c.skip_bound&&c.bound[t]&&c.bound[t](r),l&&et(e,t)),n})):[],c.update(),l=!0,E(c.before_update),c.fragment=!!r&&r(c.ctx),t.target){if(t.hydrate){var d=ne(t.target);c.fragment&&c.fragment.l(d),d.forEach(G)}else c.fragment&&c.fragment.c();t.intro&&ze(e.$$.fragment),Qe(e,t.target,t.anchor,t.customElement),Re()}ge(s)}var nt=function(){function e(){$(this,e)}return b(e,[{key:"$destroy",value:function(){Xe(this,1),this.$destroy=y}},{key:"$on",value:function(e,t){var n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}}},{key:"$set",value:function(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}]),e}();function rt(e){let t,n,r,o,i,a;return{c(){t=Z("i"),te(t,"class",n=e[3](e[2],e[1])),te(t,"style",r=ut(e[2],e[0])),t.hidden=o=!e[2]},m(n,r){K(n,t,r),i||(a=X(t,"click",e[6]),i=!0)},p(e,[i]){6&i&&n!==(n=e[3](e[2],e[1]))&&te(t,"class",n),5&i&&r!==(r=ut(e[2],e[0]))&&te(t,"style",r),4&i&&o!==(o=!e[2])&&(t.hidden=o)},i:y,o:y,d(e){e&&G(t),i=!1,a()}}}const ot={brand:"fab",regular:"far",solid:"fas"},it={batman:"https://www.gravatar.com/avatar/ab1839667863f31e359d98364cfdef61",marcusr:"https://www.gravatar.com/avatar/6c056546d802b1a9ac186ab63f9fb632"},at=["fas fa-anchor","fas fa-atom","fas fa-award","fas fa-balance-scale","fas fa-baseball-ball","fas fa-basketball-ball","fas fa-bicycle","fas fa-bolt","fas fa-book-reader","fas fa-candy-cane","fas fa-carrot","fas fa-cat","fas fa-chess-knight","fas fa-child","fas fa-coffee","fas fa-cookie-bite","fas fa-crow","fas fa-dice","fas fa-dog","fas fa-dove","fas fa-feather","fas fa-fish","fas fa-gem","fas fa-ghost","fas fa-hard-hat","fas fa-hat-cowboy","fas fa-hat-wizard","fas fa-hiking","fas fa-horse-head","fas fa-horse","fas fa-id-badge","fas fa-igloo","fas fa-mask","fas fa-meteor","fas fa-paint-brush","fas fa-paw","fas fa-pepper-hot","fas fa-pizza-slice","fas fa-portrait","fas fa-puzzle-piece","fas fa-rainbow","fas fa-robot","fas fa-rocket","fas fa-running","fas fa-seedling","fas fa-skating","fas fa-skiing","fas fa-smile","fas fa-snowboarding","fas fa-snowflake","fas fa-snowman","fas fa-swimmer","fas fa-umbrella","fas fa-user-astronaut","fas fa-user-graduate","fas fa-user-ninja","fas fa-user-secret","fas fa-walking","fas fa-yin-yang"];function ut(e,t){const n=[];let r="color:";const o=e.match(/^pick:(.+)$/);return o&&it[o[1]]&&(r="background-color:",n.push('background-image:url("'+it[o[1]]+'")')),t&&n.push(r+t),n.join(";")}function st(e,t,n){let{class:r=""}=t,{animation:o=""}=t,{color:i=""}=t,{family:a=""}=t,{name:u}=t;return e.$$set=e=>{"class"in e&&n(4,r=e.class),"animation"in e&&n(5,o=e.animation),"color"in e&&n(0,i=e.color),"family"in e&&n(1,a=e.family),"name"in e&&n(2,u=e.name)},[i,a,u,function(e,t){const n=[],i=e.match(/^pick:(.+)$/);if(i){if("Convos"==i[1])return"fas fa-info-circle";if(it[i[1]])return"fas fa-contributor for-"+i[1].toLowerCase();n.push(function(e){if(e.match(/^\d+$/))return at[e];let t=0;for(let n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t),t&=t;return t=Math.abs(t),at[t%at.length]}(i[1]))}else n.push(ot[t]||"fas"),n.push("fa-"+e);return o&&n.push(o.split(" ").map((e=>"fa-"+e))),r&&n.push(r.split(" ")),n.join(" ")},r,o,function(t){we.call(this,e,t)}]}class ct extends nt{constructor(e){super(),tt(this,e,st,rt,k,{class:4,animation:5,color:0,family:1,name:2})}}function lt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ft=[];function pt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y,r=new Set;function o(n){if(k(e,n)&&(e=n,t)){var o,i=!ft.length,a=lt(r);try{for(a.s();!(o=a.n()).done;){var u=o.value;u[1](),ft.push(u,e)}}catch(e){a.e(e)}finally{a.f()}if(i){for(var s=0;s<ft.length;s+=2)ft[s][0](ft[s+1]);ft.length=0}}}function i(t){o(t(e))}function a(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y,u=[i,a];return r.add(u),1===r.size&&(t=n(o)||y),i(e),function(){r.delete(u),0===r.size&&(t(),t=null)}}return{set:o,update:i,subscribe:a}}function mt(e,t,n){var r,o=!Array.isArray(e),i=o?[e]:e,a=t.length<2;return r=function(e){var n=!1,r=[],u=0,s=y,c=function(){if(!u){s();var n=t(o?r[0]:r,e);a?e(n):s=C(n)?n:y}},l=i.map((function(e,t){return A(e,(function(e){r[t]=e,u&=~(1<<t),n&&c()}),(function(){u|=1<<t}))}));return n=!0,c(),function(){E(l),s()}},{subscribe:pt(n,r).subscribe}}var ht={},gt=vt("menu"),$t=pt({nColumns:1,width:0});function vt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(ht[e])return ht[e];var n=ht[e]=pt(t);return n.toggle=function(e){var r=e.target.closest("a");if(!r)return setTimeout((function(){return n.set(t)}),50);e.preventDefault();var o=r.href.replace(/.*#/,"");0==r.href.indexOf("#")||0==r.href.indexOf(location.href)?n.set(x(n)==o?"":o):setTimeout((function(){return n.set(o)}),100)},n}function bt(e){let t,n,r,o,i,a,u,s,c,l,d,f=e[2].notifications+"";return n=new ct({props:{name:"bars"}}),o=new ct({props:{name:"times"}}),{c(){t=Z("a"),Je(n.$$.fragment),r=J(),Je(o.$$.fragment),i=J(),a=Z("small"),u=V(f),te(a,"class","badge is-important"),a.hidden=s=!e[2].notifications,te(t,"href","#nav"),te(t,"class","btn-hallow"),ue(t,"is-active","nav"==e[1])},m(e,s){K(e,t,s),Qe(n,t,null),z(t,r),Qe(o,t,null),z(t,i),z(t,a),z(a,u),c=!0,l||(d=X(t,"click",gt.toggle),l=!0)},p(e,n){(!c||4&n)&&f!==(f=e[2].notifications+"")&&re(u,f),(!c||4&n&&s!==(s=!e[2].notifications))&&(a.hidden=s),2&n&&ue(t,"is-active","nav"==e[1])},i(e){c||(ze(n.$$.fragment,e),ze(o.$$.fragment,e),c=!0)},o(e){qe(n.$$.fragment,e),qe(o.$$.fragment,e),c=!1},d(e){e&&G(t),Xe(n),Xe(o),l=!1,d()}}}function yt(e){let t,n,r;const o=e[5].default,i=S(o,e,e[4],null);let a=e[0].nColumns<=1&&bt(e);return{c(){t=Z("header"),i&&i.c(),n=J(),a&&a.c(),te(t,"class","chat-header")},m(e,o){K(e,t,o),i&&i.m(t,null),z(t,n),a&&a.m(t,null),r=!0},p(e,[n]){i&&i.p&&(!r||16&n)&&N(i,o,e,e[4],r?B(o,e[4],n,null):j(e[4]),null),e[0].nColumns<=1?a?(a.p(e,n),1&n&&ze(a,1)):(a=bt(e),a.c(),ze(a,1),a.m(t,null)):a&&(Ue(),qe(a,1,1,(()=>{a=null})),He())},i(e){r||(ze(i,e),ze(a),r=!0)},o(e){qe(i,e),qe(a),r=!1},d(e){e&&G(t),i&&i.d(e),a&&a.d()}}}function Dt(e,t,n){let r,o,i;F(e,$t,(e=>n(0,r=e))),F(e,gt,(e=>n(1,o=e)));let{$$slots:a={},$$scope:u}=t;const s=De("user").notifications;return F(e,s,(e=>n(2,i=e))),e.$$set=e=>{"$$scope"in e&&n(4,u=e.$$scope)},[r,o,i,s,u,a]}class wt extends nt{constructor(e){super(),tt(this,e,Dt,yt,k,{})}}function _t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/*! js-cookie v3.0.1 | MIT */function Et(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var Ct=function e(t,n){function r(e,r,o){if("undefined"!=typeof document){"number"==typeof(o=Et({},n,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var a in o)o[a]&&(i+="; "+a,!0!==o[a]&&(i+="="+o[a].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+i}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},o=0;o<n.length;o++){var i=n[o].split("="),a=i.slice(1).join("=");try{var u=decodeURIComponent(i[0]);if(r[u]=t.read(a,u),e===u)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){r(e,"",Et({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,Et({},this.attributes,t))},withConverter:function(t){return e(Et({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});function kt(e){if(Array.isArray(e))return e}function At(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xt(e,t){return kt(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||c(e,t)||At()}var Ft=["trace","debug","info","warn","error"],St={},Ot={},Bt=function(){};function Nt(e){var t=this,n=e.name;this.name=n,this.isLevel=function(e){var n=Ft.indexOf(e)||e||e.length;return t.numLevel>=n},this.setLevel=function(e){var n=Ft.indexOf(e);return-1==n&&(n=2),t.numLevel=n,Ft.forEach((function(e,r){var o=!console||r<n?Bt:console["trace"==e||"debug"==e?"log":e]||console.log||Bt;t[e]=o.bind(t,"["+t.name+"]")})),t},this.setLevel(function(e){return void 0===Ot.root&&(Object.entries(JSON.parse(localStorage.getItem("logger:nameToLevel")||"{}")).forEach((function(e){var t=xt(e,2),n=t[0],r=t[1];Ot[n]=r||"debug"})),((location.href.match(/_debug=([a-z,:]+)/)||[]).pop()||"").split(",").forEach((function(e){var t=xt(e.split(":"),2),n=t[0],r=t[1];Ot[n]=r||"debug"})),localStorage.setItem("logger:nameToLevel",JSON.stringify(Ot))),Ot[e]||Ot.root||"info"}(n))}function jt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root";return St[e]||(St[e]=new Nt({name:e}))}function Tt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}St.root=new Nt({name:"root"});var Lt=jt("util"),Mt=.618033988749,Pt=1e3,It=1e3*Pt,Ut=1e3*It;function Ht(e,t){if(t&&!t.match(/^[+-]\w/)&&(t="+"+t),!t)return{};var n,r={},o=!0,i=Tt(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;"+"==a?o=!0:"-"==a?o=!1:r[e[a]||a]=o}}catch(e){i.e(e)}finally{i.f()}return r}function zt(e,t){for(;e;){if(t.tagName?e==t:e.matches&&e.matches(t))return e;e=e.parentNode}return null}function qt(e){var t=document.createElement("textarea");t.value=e.textContent||e.value,t.style.opacity=0,t.style.position="absolute",document.body.appendChild(t);try{t.focus(),t.select(),document.execCommand("copy")}catch(e){t.value="",Lt.error("copyToClipboard() failed:",e)}return document.body.removeChild(t),t.value}function Wt(e,t){var n=function n(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var a=this;n.debounceTid&&clearTimeout(n.debounceTid),n.debounceTid=setTimeout((function(){e.apply(a,o),n.debounceTid=0}),t)};return n.debounceTid=0,n}function Kt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"message",n=e.errors||e;return n&&n[0]?n[0][t]||"Unknown error.":""}function Gt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.95,r=Math.floor(6*e),o=6*e-r,i=n*(1-t),a=n*(1-o*t),u=n*(1-(1-o)*t),s=255,c=255,l=255;switch(r){case 0:s=n,c=u,l=i;break;case 1:s=a,c=n,l=i;break;case 2:s=i,c=n,l=u;break;case 3:s=i,c=a,l=n;break;case 4:s=u,c=i,l=n;break;case 5:s=n,c=i,l=a}return[Math.floor(255*s),Math.floor(255*c),Math.floor(255*l)]}function Yt(e,t){var n=e<Pt?[e,""]:e<It?[e/Pt,"k"]:e<Ut?[e/It,"M"]:[e/Ut,"G"],r=String(Math.round(10*n[0])/10);return(r.match(/\./)?r:r+".0")+n[1]+(t||"")}var Zt={array:function(e){return Array.isArray(e)},defined:function(e){return!Zt.undefined(e)},false:function(e){return!Zt.true(e)},function:function(e){return"function"==typeof e},number:function(e){return"number"==typeof e},object:function(e){return"object"===m(e)&&null!==e},string:function(e){return"string"==typeof e},stringable:function(e){return"number"==typeof e||"string"==typeof e},true:function(e){return Zt.string(e)?!!e.length&&"0"!=e:!!e},undefined:function(e){return null==e}};function Vt(e){var t=document,n=e.replace(/\W/g,"_");if(!t.getElementById(n)){var r=t.createElement("script"),o=[n,e];return r.id=o[0],r.src=o[1],t.getElementsByTagName("head")[0].appendChild(r),new Promise((function(e,t){r.addEventListener("error",t),r.addEventListener("load",e)}))}}function Jt(e){return Object.keys(e).filter((function(t){return e[t]})).sort().map((function(e){return"has-mode-"+e})).join(" ")}function Qt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return e.replace(/\s/g,t)}function Xt(e,t,n){var r=":children"==t?e.children:e.querySelectorAll(t);if(!n)return[].slice.call(r,0);if(Array.isArray(n))return[].forEach.call(r,(function(e){return e.addEventListener(n[0],n[1])}));for(var o=[],i=0;i<r.length;i++)o.push(n(r[i],i));return o}function en(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function tn(e,t){var n=function(e){return document.querySelector('meta[name="convos:'+e+'"]')||document.querySelector('meta[name="'+e+'"]')};if(1==arguments.length){"organization_name"==e&&(e="contactorganization"),"organization_url"==e&&(e="contactnetworkaddress");var r=n(e);if(!r)throw'Cannot get settings for "'+e+'".';var o={no:!1,yes:!0};return"contact"==e?atob(r.content||""):o.hasOwnProperty(r.content)?o[r.content]:r.content}"organization_name"==e&&(e="contactorganization"),"organization_url"==e&&(e="contactnetworkaddress"),"contact"==e&&(t=btoa(t)),"boolean"==typeof t&&(t=t?"yes":"no"),n(e).content=t}function nn(e,t){e&&e.preventDefault&&e.preventDefault();var n,r,o,i,a=(n=document.body,r="fullscreen",o=function(e){e.addEventListener("click",(function(t){return t.target==e&&e.hide()})),e.hide=function(){return a.classList.add("hidden")}},(i=n&&n.querySelector("."+r.split(" ").join(".")))||((i=document.createElement("div")).className=r,n&&n.appendChild(i),o&&o(i),i));return function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(a),t?(a.classList.remove("hidden"),a.appendChild(t.cloneNode(!0)),a):a.hide()}function rn(e){return(Zt.string(e)?e:"").split(/[.,\s]+/).map((function(e){return e.trim()})).filter((function(e){return e.length}))}function on(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;if(0==e.length)return"#000";for(var n=0,r=0;r<e.length;r++)n=e.charCodeAt(r)+((n<<5)-n),n&=n;return"#"+Gt(((n=Math.abs(n%t/t))+Mt)%1,.4,.7).map((function(e){return e.toString(16)})).join("")}function an(e,t){return Zt.array(t)?t.find((function(t){return an(e,t)}))||!1:e&&e.tagName&&e.tagName.toLowerCase()===t||!1}function un(e){return e.slice(0,1).toUpperCase()+e.slice(1)}function sn(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}function cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(n),!0).forEach((function(t){_t(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dn=jt("reactive"),fn=function(){function e(){$(this,e),this.cookieName="convos_js",this._on={},this._props={}}return b(e,[{key:"emit",value:function(e){for(var t=this._on[e],n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(var i=0;i<(t||[]).length;i++){var a;(a=t[i])[0].apply(a,r)}return this}},{key:"on",value:function(e,t){var n=t?null:new Promise((function(e){t=e})),r=this._on[e]||(this._on[e]=[]),o=[t];r.push(o);var i=function(){var e=r.indexOf(o);-1!=e&&r.splice(e,1)};return n?n.finally(i):i}},{key:"prop",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=ln(ln({},r),{},{defaultValue:n,name:t,type:e,value:n});switch(this._props[t]=o,o.updateable=-1!=["cookie","persist","rw"].indexOf(e),e){case"cookie":return this._cookieProp(o);case"persist":return this._localStorageProp(o);case"ro":return this._readOnlyProp(o);case"rw":return this._updateableProp(o)}throw"["+this.constructor.name+'] Unknown prop type "'+e+'" for prop "'+t+'".'}},{key:"subscribe",value:function(e){return e(this),this.on("update",e)}},{key:"update",value:function(e){var t=this;return Object.keys(e).forEach((function(n){var r=t._props[n];if(!r)return dn.trace("["+t.constructor.name+'] Unknown prop "'+n+'".');r.hasOwnProperty("prev")||(r.prev="ro"==r.type?void 0:r.value),r.updateable&&(r.value=e[n])})),this._updatedTid||(this._updatedTid=setTimeout(this._delayedUpdate.bind(this),1)),this}},{key:"_cookie",value:function(e,t){var n=e.key||e.name,r=document.decodedB64JSONCookies||(document.decodedB64JSONCookies={});if(!r[this.cookieName])try{var o=Ct.get(this.cookieName);r[this.cookieName]=JSON.parse(o?atob(o):"{}")}catch(e){dn.error(_t({},n,e))}var i=r[this.cookieName]||{};if(1==arguments.length)return i[n];t===e.defaultValue?delete i[n]:i[n]=t;var a=0==location.href.indexOf("https:");Ct.set(this.cookieName,btoa(JSON.stringify(i)),{expires:365,SameSite:"Lax",secure:a})}},{key:"_cookieProp",value:function(e){var t=this._cookie(e);Zt.defined(t)&&(e.value=t),Zt.undefined(t)&&this._cookie(e,e.value),this._updateableProp(e)}},{key:"_delayedUpdate",value:function(){var e=this,t={};return Object.keys(this._props).forEach((function(n){var r=e._props[n];if(r.hasOwnProperty("prev")){var o=r.prev;delete r.prev,r.value!==o&&("cookie"==r.type&&e._cookie(r,r.value),"persist"==r.type&&e._localStorage(r,r.value),t[n]="ro"!=r.type)}})),delete this._updatedTid,Object.keys(t).length&&this.emit("update",this,t),t}},{key:"_localStorage",value:function(e,t){var n="convos:"+(e.key||e.name);if(2==arguments.length)return t===e.defaultValue?localStorage.removeItem(n):localStorage.setItem(n,JSON.stringify(t));try{return localStorage.hasOwnProperty(n)?JSON.parse(localStorage.getItem(n)):void 0}catch(e){return void dn.error(_t({},n,localStorage.getItem(n)),e)}}},{key:"_localStorageProp",value:function(e){var t=this._localStorage(e);Zt.defined(t)&&(e.value=t),Zt.undefined(t)&&this._localStorage(e,e.value),this._updateableProp(e)}},{key:"_readOnlyProp",value:function(e){if(void 0===e.value)throw"["+this.constructor.name+'] Read-only attribute "'+e.name+'" cannot be undefined';var t=Zt.function(e.value)?e.value:function(){return e.value};Object.defineProperty(this,e.name,{get:t})}},{key:"_updateableProp",value:function(e){Object.defineProperty(this,e.name,{get:function(){return e.value}})}}]),e}();function pn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return g(this,r)}}var mn=function(e){p(r,e);var t=pn(r);function r(){var e;return $(this,r),(e=t.call(this)).prop("persist","history",[],{key:"command_history"}),e.prop("rw","conversation",null),e.prop("rw","index",-1),e}return b(r,[{key:"add",value:function(e){if(!e.length)return this;var t=this.history.slice(0,19);return t.unshift(e),this.update({history:t,index:-1})}},{key:"attach",value:function(e){this.inputEl=e}},{key:"render",value:function(e,t){(t=this.index+t)<-1&&(t=-1),t>=this.history.length&&(t=this.history.length-1);var n=this.inputEl.value;return this.inputEl.selectionStart==n.length&&((!n.length||n==this.history[this.index])&&(e.preventDefault(),this.update({index:t}),this.inputEl.value=-1==t?"":this.history[t],!0))}},{key:"update",value:function(e){return e.conversation&&e.conversation!=this.conversation&&this.update({index:-1}),f(n(r.prototype),"update",this).call(this,e)}}]),r}(fn);function hn(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function gn(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){hn(i,r,o,a,u,"next",e)}function u(e){hn(i,r,o,a,u,"throw",e)}a(void 0)}))}}var $n={exports:{}};!function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o=t&&t.prototype instanceof $?t:$,i=Object.create(o.prototype),a=new F(r||[]);return i._invoke=function(e,t,n){var r=d;return function(o,i){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===o)throw i;return O()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=k(a,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?h:f,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=h,n.method="throw",n.arg=s.arg)}}}(e,n,a),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",f="suspendedYield",p="executing",h="completed",g={};function $(){}function v(){}function b(){}var y={};s(y,i,(function(){return this}));var D=Object.getPrototypeOf,w=D&&D(D(S([])));w&&w!==n&&r.call(w,i)&&(y=w);var _=b.prototype=$.prototype=Object.create(y);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(o,i,a,u){var s=l(e[o],e,i);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"===m(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(d).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,u)}))}u(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function k(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,k(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var o=l(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function S(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:O}}function O(){return{value:t,done:!0}}return v.prototype=b,s(_,"constructor",b),s(b,"constructor",v),v.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},E(C.prototype),s(C.prototype,a,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new C(c(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(_),s(_,u,"Generator"),s(_,i,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=S,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return u.type="throw",u.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:S(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"===("undefined"==typeof globalThis?"undefined":m(globalThis))?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}($n);var vn=$n.exports,bn=function(){var e={base:"https://twemoji.maxcdn.com/v/13.1.0/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:function(e){var t="string"==typeof e?parseInt(e,16):e;if(t<65536)return u(t);return u(55296+((t-=65536)>>10),56320+(1023&t))},toCodePoint:$},onerror:function(){this.parentNode&&this.parentNode.replaceChild(s(this.alt,!1),this)},parse:function(t,n){n&&"function"!=typeof n||(n={callback:n});return("string"==typeof t?p:f)(t,{callback:n.callback||c,attributes:"function"==typeof n.attributes?n.attributes:h,base:"string"==typeof n.base?n.base:e.base,ext:n.ext||e.ext,size:n.folder||(r=n.size||e.size,"number"==typeof r?r+"x"+r:r),className:n.className||e.className,onerror:n.onerror||e.onerror});var r},replace:g,test:function(e){n.lastIndex=0;var t=n.test(e);return n.lastIndex=0,t}},t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},n=/(?:\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d\udc8f\ud83c[\udffb-\udfff]|\ud83d\udc91\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d\udc8f\udc91])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf7c\udf84\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc70\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd4\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83d\ude36\u200d\ud83c\udf2b\ufe0f|\u2764\ufe0f\u200d\ud83d\udd25|\u2764\ufe0f\u200d\ud83e\ude79|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc3b\u200d\u2744\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83d\ude2e\u200d\ud83d\udca8|\ud83d\ude35\u200d\ud83d\udcab|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f|\ud83d\udc08\u200d\u2b1b)|[#*0-9]\ufe0f?\u20e3|(?:[©®\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0c\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\udd77\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udc8e\udc90\udc92-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5-\uded7\udeeb\udeec\udef4-\udefc\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd76\udd78\udd7a-\uddb4\uddb7\uddba\uddbc-\uddcb\uddd0\uddde-\uddff\ude70-\ude74\ude78-\ude7a\ude80-\ude86\ude90-\udea8\udeb0-\udeb6\udec0-\udec2\uded0-\uded6]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,r=/\uFE0F/g,o=String.fromCharCode(8205),i=/[&<>'"]/g,a=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,u=String.fromCharCode;return e;function s(e,t){return document.createTextNode(t?e.replace(r,""):e)}function c(e,t){return"".concat(t.base,t.size,"/",e,t.ext)}function l(e,t){for(var n,r,o=e.childNodes,i=o.length;i--;)3===(r=(n=o[i]).nodeType)?t.push(n):1!==r||"ownerSVGElement"in n||a.test(n.nodeName.toLowerCase())||l(n,t);return t}function d(e){return $(e.indexOf(o)<0?e.replace(r,""):e)}function f(e,t){for(var r,o,i,a,u,c,f,p,m,h,g,$,v,b=l(e,[]),y=b.length;y--;){for(i=!1,a=document.createDocumentFragment(),c=(u=b[y]).nodeValue,p=0;f=n.exec(c);){if((m=f.index)!==p&&a.appendChild(s(c.slice(p,m),!0)),$=d(g=f[0]),p=m+g.length,v=t.callback($,t),$&&v){for(o in(h=new Image).onerror=t.onerror,h.setAttribute("draggable","false"),r=t.attributes(g,$))r.hasOwnProperty(o)&&0!==o.indexOf("on")&&!h.hasAttribute(o)&&h.setAttribute(o,r[o]);h.className=t.className,h.alt=g,h.src=v,i=!0,a.appendChild(h)}h||a.appendChild(s(g,!1)),h=null}i&&(p<c.length&&a.appendChild(s(c.slice(p),!0)),u.parentNode.replaceChild(a,u))}return e}function p(e,t){return g(e,(function(e){var n,r,o=e,a=d(e),u=t.callback(a,t);if(a&&u){for(r in o="<img ".concat('class="',t.className,'" ','draggable="false" ','alt="',e,'"',' src="',u,'"'),n=t.attributes(e,a))n.hasOwnProperty(r)&&0!==r.indexOf("on")&&-1===o.indexOf(" "+r+"=")&&(o=o.concat(" ",r,'="',n[r].replace(i,m),'"'));o=o.concat("/>")}return o}))}function m(e){return t[e]}function h(){return null}function g(e,t){return String(e).replace(n,t)}function $(e,t){for(var n=[],r=0,o=0,i=0;i<e.length;)r=e.charCodeAt(i++),o?(n.push((65536+(o-55296<<10)+(r-56320)).toString(16)),o=0):55296<=r&&r<=56319?o=r:n.push(r.toString(16));return n.join(t||"-")}}(),yn=Object.prototype.hasOwnProperty,Dn=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),wn=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n},_n={arrayToObject:wn,assign:function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var o=t[r],i=o.obj[o.prop],a=Object.keys(i),u=0;u<a.length;++u){var s=a[u],c=i[s];"object"===m(c)&&null!==c&&-1===n.indexOf(c)&&(t.push({obj:i,prop:s}),n.push(c))}return function(e){for(var t;e.length;){var n=e.pop();if(t=n.obj[n.prop],Array.isArray(t)){for(var r=[],o=0;o<t.length;++o)void 0!==t[o]&&r.push(t[o]);n.obj[n.prop]=r}}return t}(t)},decode:function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},encode:function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),n="",r=0;r<t.length;++r){var o=t.charCodeAt(r);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?n+=t.charAt(r):o<128?n+=Dn[o]:o<2048?n+=Dn[192|o>>6]+Dn[128|63&o]:o<55296||o>=57344?n+=Dn[224|o>>12]+Dn[128|o>>6&63]+Dn[128|63&o]:(r+=1,o=65536+((1023&o)<<10|1023&t.charCodeAt(r)),n+=Dn[240|o>>18]+Dn[128|o>>12&63]+Dn[128|o>>6&63]+Dn[128|63&o])}return n},isBuffer:function(e){return null!=e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,n,r){if(!n)return t;if("object"!==m(n)){if(Array.isArray(t))t.push(n);else{if("object"!==m(t))return[t,n];(r.plainObjects||r.allowPrototypes||!yn.call(Object.prototype,n))&&(t[n]=!0)}return t}if("object"!==m(t))return[t].concat(n);var o=t;return Array.isArray(t)&&!Array.isArray(n)&&(o=wn(t,r)),Array.isArray(t)&&Array.isArray(n)?(n.forEach((function(n,o){yn.call(t,o)?t[o]&&"object"===m(t[o])?t[o]=e(t[o],n,r):t.push(n):t[o]=n})),t):Object.keys(n).reduce((function(t,o){var i=n[o];return yn.call(t,o)?t[o]=e(t[o],i,r):t[o]=i,t}),o)}},En=String.prototype.replace,Cn=/%20/g,kn={default:"RFC3986",formatters:{RFC1738:function(e){return En.call(e,Cn,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"},An=_n,xn=kn,Fn={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},Sn=Date.prototype.toISOString,On={delimiter:"&",encode:!0,encoder:An.encode,encodeValuesOnly:!1,serializeDate:function(e){return Sn.call(e)},skipNulls:!1,strictNullHandling:!1},Bn=function e(t,n,r,o,i,a,u,s,c,l,d,f){var p=t;if("function"==typeof u)p=u(n,p);else if(p instanceof Date)p=l(p);else if(null===p){if(o)return a&&!f?a(n,On.encoder):n;p=""}if("string"==typeof p||"number"==typeof p||"boolean"==typeof p||An.isBuffer(p))return a?[d(f?n:a(n,On.encoder))+"="+d(a(p,On.encoder))]:[d(n)+"="+d(String(p))];var m,h=[];if(void 0===p)return h;if(Array.isArray(u))m=u;else{var g=Object.keys(p);m=s?g.sort(s):g}for(var $=0;$<m.length;++$){var v=m[$];i&&null===p[v]||(h=Array.isArray(p)?h.concat(e(p[v],r(n,v),r,o,i,a,u,s,c,l,d,f)):h.concat(e(p[v],n+(c?"."+v:"["+v+"]"),r,o,i,a,u,s,c,l,d,f)))}return h},Nn=_n,jn=Object.prototype.hasOwnProperty,Tn={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:Nn.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},Rn=function(e,t,n){if(e){var r=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/g,i=/(\[[^[\]]*])/.exec(r),a=i?r.slice(0,i.index):r,u=[];if(a){if(!n.plainObjects&&jn.call(Object.prototype,a)&&!n.allowPrototypes)return;u.push(a)}for(var s=0;null!==(i=o.exec(r))&&s<n.depth;){if(s+=1,!n.plainObjects&&jn.call(Object.prototype,i[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(i[1])}return i&&u.push("["+r.slice(i.index)+"]"),function(e,t,n){for(var r=t,o=e.length-1;o>=0;--o){var i,a=e[o];if("[]"===a)i=(i=[]).concat(r);else{i=n.plainObjects?Object.create(null):{};var u="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,s=parseInt(u,10);!isNaN(s)&&a!==u&&String(s)===u&&s>=0&&n.parseArrays&&s<=n.arrayLimit?(i=[])[s]=r:i[u]=r}r=i}return r}(u,t,n)}},Ln=function(e,t){var n=e,r=t?An.assign({},t):{};if(null!==r.encoder&&void 0!==r.encoder&&"function"!=typeof r.encoder)throw new TypeError("Encoder has to be a function.");var o=void 0===r.delimiter?On.delimiter:r.delimiter,i="boolean"==typeof r.strictNullHandling?r.strictNullHandling:On.strictNullHandling,a="boolean"==typeof r.skipNulls?r.skipNulls:On.skipNulls,u="boolean"==typeof r.encode?r.encode:On.encode,s="function"==typeof r.encoder?r.encoder:On.encoder,c="function"==typeof r.sort?r.sort:null,l=void 0!==r.allowDots&&r.allowDots,d="function"==typeof r.serializeDate?r.serializeDate:On.serializeDate,f="boolean"==typeof r.encodeValuesOnly?r.encodeValuesOnly:On.encodeValuesOnly;if(void 0===r.format)r.format=xn.default;else if(!Object.prototype.hasOwnProperty.call(xn.formatters,r.format))throw new TypeError("Unknown format option provided.");var p,h,g=xn.formatters[r.format];"function"==typeof r.filter?n=(h=r.filter)("",n):Array.isArray(r.filter)&&(p=h=r.filter);var $,v=[];if("object"!==m(n)||null===n)return"";$=r.arrayFormat in Fn?r.arrayFormat:"indices"in r?r.indices?"indices":"repeat":"indices";var b=Fn[$];p||(p=Object.keys(n)),c&&p.sort(c);for(var y=0;y<p.length;++y){var D=p[y];a&&null===n[D]||(v=v.concat(Bn(n[D],D,b,i,a,u?s:null,h,c,l,d,g,f)))}var w=v.join(o),_=!0===r.addQueryPrefix?"?":"";return w.length>0?_+w:""},Mn={formats:kn,parse:function(e,t){var n=t?Nn.assign({},t):{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!=typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.ignoreQueryPrefix=!0===n.ignoreQueryPrefix,n.delimiter="string"==typeof n.delimiter||Nn.isRegExp(n.delimiter)?n.delimiter:Tn.delimiter,n.depth="number"==typeof n.depth?n.depth:Tn.depth,n.arrayLimit="number"==typeof n.arrayLimit?n.arrayLimit:Tn.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder="function"==typeof n.decoder?n.decoder:Tn.decoder,n.allowDots="boolean"==typeof n.allowDots?n.allowDots:Tn.allowDots,n.plainObjects="boolean"==typeof n.plainObjects?n.plainObjects:Tn.plainObjects,n.allowPrototypes="boolean"==typeof n.allowPrototypes?n.allowPrototypes:Tn.allowPrototypes,n.parameterLimit="number"==typeof n.parameterLimit?n.parameterLimit:Tn.parameterLimit,n.strictNullHandling="boolean"==typeof n.strictNullHandling?n.strictNullHandling:Tn.strictNullHandling,""===e||null==e)return n.plainObjects?Object.create(null):{};for(var r="string"==typeof e?function(e,t){for(var n={},r=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,o=t.parameterLimit===1/0?void 0:t.parameterLimit,i=r.split(t.delimiter,o),a=0;a<i.length;++a){var u,s,c=i[a],l=c.indexOf("]="),d=-1===l?c.indexOf("="):l+1;-1===d?(u=t.decoder(c,Tn.decoder),s=t.strictNullHandling?null:""):(u=t.decoder(c.slice(0,d),Tn.decoder),s=t.decoder(c.slice(d+1),Tn.decoder)),jn.call(n,u)?n[u]=[].concat(n[u]).concat(s):n[u]=s}return n}(e,n):e,o=n.plainObjects?Object.create(null):{},i=Object.keys(r),a=0;a<i.length;++a){var u=i[a],s=Rn(u,r[u],n);o=Nn.merge(o,s,n)}return Nn.compact(o)},stringify:Ln};
/*! Copyright Twitter Inc. and other contributors. Licensed under MIT */function Pn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return g(this,r)}}var In=jt("route"),Un=function(e){p(r,e);var t=Pn(r);function r(){var e;return $(this,r),(e=t.call(this)).prop("ro","basePath",(function(){return e._basePath})),e.prop("ro","hash",(function(){return(e._location.hash||"").replace(/^#/,"")})),e.prop("ro","path",(function(){return e._path})),e.prop("ro","pathParts",(function(){return e._pathParts})),e.prop("ro","query",(function(){return e._query})),e.prop("rw","baseUrl",""),e.prop("rw","enabled",!1),e._onClick=e._onClick.bind(h(e)),e._onLocationChange=e._onLocationChange.bind(h(e)),window.addEventListener("click",e._onClick),window.addEventListener("popstate",e._onLocationChange),e._history=window.history,e._location=window.location,e._basePath="",e._path="/",e._pathParts=[],e._query={},e}return b(r,[{key:"conversationPath",value:function(e){var t=["","chat"];return e.connection_id&&t.push(e.connection_id),e.conversation_id&&t.push(e.conversation_id),t.map((function(e){return encodeURIComponent(e)})).join("/")}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};0==e.indexOf(this.baseUrl)&&(e=e.substr(this.baseUrl.length));var n=this.baseUrl+e;if(n==this._location.href)return this;this._history[t.replace?"replaceState":"pushState"]({},document.title,n),t.replace||gt.set(""),this.update({path:!0})._onLocationChange({})}},{key:"param",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.query;return n.hasOwnProperty(e)?n[e]:t}},{key:"subscribe",value:function(e){return e(this),this.on("update",e)}},{key:"update",value:function(e){return e.baseUrl&&(e.baseUrl=e.baseUrl.replace(/\/+$/,""),this._basePath=new URL(e.baseUrl).pathname.replace(/\/+$/,"")),f(n(r.prototype),"update",this).call(this,e),e.baseUrl&&this._onLocationChange(),this}},{key:"urlFor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(/^\w+:/)||e.match(/^#/)?e:this.basePath+e,r=Object.keys(t).sort().filter((function(e){return Zt.defined(t[e])})).map((function(e){return e+"="+encodeURIComponent(t[e])})).join("&");return n+(r?"?"+r:"")}},{key:"wsUrlFor",value:function(e){return(e.match(/^\w+:/)?e:this.baseUrl+e).replace(/^http/,"ws")}},{key:"_onClick",value:function(e){if(this.enabled&&!(e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)){var t=e.target&&e.target.closest("a");if(t&&t.href){if("_self"==t.target)if((0==t.href.indexOf("/")?this.baseUrl+t.href:t.href)==location.href)return location.reload();if(!t.hasAttribute("download")&&!t.hasAttribute("target")){var n=t.getAttribute("href")||"";0==n.indexOf("#")&&(n=this.path+n),0==n.indexOf("./")&&(n="/"+this._pathParts.slice(0,-1).join("/")+n.replace(/^\./,"")),0==n.indexOf(this.baseUrl)&&(n=n.substr(this.baseUrl.length)),0==n.indexOf(this.basePath)&&(n=n.substr(this.basePath.length)),0==n.indexOf("/")&&(this.go(n,{},t.hasAttribute("replace")),e.preventDefault())}}}}},{key:"_onLocationChange",value:function(e){if(this.enabled){gt.set("");var t=this._location.href.substr(this.baseUrl.length).split("#")[0].split("?");this._query=2==t.length?Mn.parse(t.pop()):{},this._path=t[0],this._pathParts=t[0].length<=1?[]:t[0].replace(/^\//,"").split("/").map(decodeURIComponent),In.info('path="'+this._path+'" '+JSON.stringify(this._pathParts)+", query="+JSON.stringify(this._query)),this.update({path:!0})}}}]),r}(fn),Hn=new Un;function zn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return qn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function qn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Wn=function(){function e(){$(this,e),this.aliases=this._buildAliases(),this.re=this._buildRe(),this.byShortName={},this.grouped={},this.status="pending"}var t;return b(e,[{key:"load",value:(t=gn(vn.mark((function e(){var t;return vn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1==["loading","success"].indexOf(this.status)){e.next=2;break}return e.abrupt("return",this);case 2:return this.status="loading",e.next=5,fetch(Hn.urlFor("/emojis/0bf11a9aff0d6da7b46f1490f86a71eb.json"));case 5:return t=e.sent,e.t0=this,e.next=9,t.json();case 9:return e.t1=e.sent.emojis,e.t0._load.call(e.t0,e.t1),this.status="success",e.abrupt("return",this);case 13:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"markup",value:function(e){var t=this;return bn.parse(e.replace(this.re,(function(e,n,r){var o=t.aliases[r]||r,i=t.byShortName[o];return n+(i&&i.emoji||r)})))}},{key:"search",value:function(e){var t=this;e=e.toLowerCase();var n=this.grouped[e]||this.grouped[e.substring(0,2)]||{};return Object.keys(n).sort((function(e,t){return n[e]-n[t]})).map((function(e){return t.byShortName[e]})).filter((function(t){return-1!=(t.shortname+t.name).toLowerCase().indexOf(e)}))}},{key:"_buildAliases",value:function(){return{"&lt;3":":heart:","(Y)":":thumbsup:",":(":":disappointed:",":)":":slight_smile:",":-*":":kissing:",":/":":confused:",":D":":smiley:",":O":":open_mouth:",":P":":stuck_out_tongue:",";)":":wink:",";D":":grin:"}}},{key:"_buildRe",value:function(){var e=Object.keys(this.aliases).sort().map(en).join("|");return new RegExp("(^|\\s)(:\\w+:|"+e+")(?=\\s|\\,|\\.|$)","gi")}},{key:"_load",value:function(e){this.grouped={};var t,n=zn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.emoji&&r.shortname&&(r.name||(r.name=r.shortname),delete r.category,delete r.html,delete r.order,delete r.unicode,this.byShortName[r.shortname]=r,this._toGrouped(r))}}catch(e){n.e(e)}finally{n.f()}}},{key:"_toGrouped",value:function(e){var t=this.grouped;([e.shortname,e.name].join("-").replace(/\W+/," ").match(/\W(\w{2})/g)||[]).forEach((function(n,r){n=n.substring(1).toLowerCase(),t[n]||(t[n]={}),t[n][e.shortname]=r,n=n[0],t[n]||(t[n]={}),t[n][e.shortname]=r}))}}]),e}();function Kn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return g(this,r)}}var Gn=function(e){p(n,e);var t=Kn(n);function n(e){var r;return $(this,n),(r=t.call(this)).prop("ro","api",e.api),r.prop("ro","defaultParams",e.defaultParams||{}),r.prop("ro","id",e.id),r.prop("rw","err",null),r.prop("rw","req",{body:null,headers:{}}),r.prop("rw","res",{body:{},headers:[]}),r.prop("rw","status","pending"),r}return b(n,[{key:"error",value:function(e){if(e)return this.update({err:Array.isArray(e)?e:[{message:e}],status:"error"});if(!this.err||!this.err.length)return"";var t=this.err[0],n=t.path&&t.path.match(/\w$/)&&t.path.split("/").pop();return n?n+": "+t.message:t.message}},{key:"perform",value:function(e){var t,n=this;return this._promise||(this._promise=this.api.spec(this.id).then((function(r){if(!r)throw'Unknown operationId "'+n.id+'".';var o=n._paramsToRequest(r,e||n.defaultParams);return t=new XMLHttpRequest,n.update({req:o,status:"loading"}),n._send(t,o)})).then((function(){var e={};e.body=t.response?JSON.parse(t.response):{},e.headers=(t.getAllResponseHeaders()||"").trim().split(/[\r\n]+/).filter((function(e){return e.length})).map((function(e){return e.split(/:\s*/,2)})),e.status=String(t.status||"201");var r=null;return String(e.status).match(/^[23]/)||(r=e.body&&e.body.errors?e.body.errors:[{message:t.statusText||"Unknown error."}]),n.update({err:r,res:e,status:r?"error":"success"})})).catch((function(e){return e.type&&(e=e.type),console.error(n.req.url+" FAILED "+e),n.update({res:{body:{errors:[{message:String(e)}]},headers:[],status:"599"},status:"error"}),n.error(Array.isArray(e)?e:'Failed fetching operationId "'+n.id+'": '+e)})).finally((function(){delete n._promise})))}},{key:"is",value:function(e){return this.status==e}},{key:"reset",value:function(){return this.res.body={},this.res.headers={},this.res.status=0,this.update({err:null,status:"pending"})}},{key:"_extractValue",value:function(e,t){return t.schema?Object.keys(t.schema.properties).reduce((function(t,n){return t[n]=e[n],t}),{}):e[t.name]}},{key:"_hasProperty",value:function(e,t){return"body"==t.in||("formData"==t.in?e.formData.has(t.name):e.hasOwnProperty(t.name))}},{key:"_paramsToRequest",value:function(e,t){var n=this,r=new URL(e.url),o={headers:this.req.headers,method:e.method.toLowerCase(),url:r},i=[];if((e.parameters||[]).forEach((function(e){if(!n._hasProperty(t,e)&&e.required)i.push({message:"Missing property.",path:"/"+e.name});else{if(!n._hasProperty(t,e)&&!e.required)return;if("path"==e.in){var a=new RegExp("(%7B|\\{)"+en(e.name)+"(%7D|\\})","i");r.pathname=r.pathname.replace(a,encodeURIComponent(n._extractValue(t,e)))}else if("query"==e.in)r.searchParams.set(e.name,n._extractValue(t,e));else if("formData"==e.in)delete o.headers["Content-Type"],o.body=t.formData;else if("body"==e.in)o.body=n._extractValue(t,e);else{if("header"!=e.in)throw"[Api] Parameter in:"+e.in+" is not supported.";o.header[e.name]=n._extractValue(t,e.name)}}})),i.length)throw i;return o}},{key:"_send",value:function(e,t){var n=this;return e.timeout=15e3,e.open(t.method.toUpperCase(),t.url),Object.keys(t.headers).forEach((function(n){return e.setRequestHeader(n,t.headers[n])})),"post"==t.method?(e.upload.addEventListener("progress",(function(e){return n.emit("progress",e)})),e.send(Zt.object(t.body)&&!Zt.function(t.body.has)?JSON.stringify(t.body):t.body)):e.send(),new Promise((function(t){e.addEventListener("abort",t),e.addEventListener("error",t),e.addEventListener("load",t)}))}}]),n}(fn);function Yn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return g(this,r)}}var Zn=function e(t,n,r){var o=e.singletons[t]||(e.singletons[t]=new Vn);return n?o.operation(n,r):o};Zn.singletons={};var Vn=function(e){p(r,e);var t,n=Yn(r);function r(){var e;return $(this,r),(e=n.call(this)).prop("rw","protocol",location.protocol||"http"),e.prop("rw","url",""),e}return b(r,[{key:"operation",value:function(e,t){var n=new Gn({api:this,id:e,defaultParams:t});return n.req.headers={"Content-Type":"application/json"},n}},{key:"spec",value:(t=gn(vn.mark((function e(t){var n,r,o=this;return vn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._ops||!t){e.next=2;break}return e.abrupt("return",this._ops[t]);case 2:if(!this._spec){e.next=4;break}return e.abrupt("return",this._spec);case 4:return e.next=6,fetch(this.url);case 6:return n=e.sent,e.next=9,n.json();case 9:if(r=e.sent,this._ops={},this._spec=r,Object.keys(r.paths).forEach((function(e){Object.keys(r.paths[e]).forEach((function(t){var n=r.paths[e][t],i=n.operationId;i&&(n.method=t.toUpperCase(),n.url=o.protocol+"//"+r.host+r.basePath+e+".json",n.parameters=(n.parameters||[]).map((function(e){return o._resolveRef(e)})),o._ops[i]=n)}))})),!this._ops||!t){e.next=15;break}return e.abrupt("return",this._ops[t]);case 15:if(!this._spec){e.next=17;break}return e.abrupt("return",this._spec);case 17:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toFunction",value:function(){var e=this;return function(t,n){return t?e.operation(t,n):e}}},{key:"_resolveRef",value:function(e){var t=this,n=e;if(e.$ref){var r=e.$ref.replace(/^#\//,"").split("/");for(n=this._spec;r.length;)n=n[r.shift()]}return Zt.object(n)&&Object.keys(n).forEach((function(e){n[e]=t._resolveRef(n[e])})),n}}]),r}(fn);function Jn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Qn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Qn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return g(this,r)}}var er={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"},tr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/[&<>'"]/g;return e.replace(t,(function(e){return er[e]}))},nr=function(e){return e.replace(/\s$/,"&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s{2}/g," &nbsp;")},rr=function(e){return[e.map((function(e){return"<".concat(e,">")})).join(""),e.reverse().map((function(e){return"</".concat(e,">")})).join("")]},or=function(e){p(r,e);var t,n=Xn(r);function r(){var e;return $(this,r),(e=n.call(this)).prop("cookie","lang",""),e.prop("ro","dictionaries",{}),e.prop("ro","emojis",new Wn),e.prop("ro","languages",(function(){return e._languages})),e.prop("ro","languageOptions",(function(){return e._languageOptions})),e._languages=[],e._languageOptions=[],e._rules=e._makeRules(),e}return b(r,[{key:"l",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=this.dictionaries[this.lang]||{},i=String(o[e]||e);return i.replace(/%(\d)(\D|$)/g,(function(e,t,r){return void 0===n[t-1]?e:n[t-1]+r}))}},{key:"load",value:(t=gn(vn.mark((function e(t){var n,r=this;return vn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t||(t=this.lang||document.documentElement.getAttribute("lang")),!this.dictionaries[t]){e.next=3;break}return e.abrupt("return",this.update({lang:t}));case 3:return e.next=5,Zn("/api","getDictionary",{lang:t}).perform();case 5:return n=e.sent,this.dictionaries[t]=n.res.body.dictionary,this._languages=n.res.body.available_languages||{},this._languageOptions=Object.keys(this._languages).sort().map((function(e){return[e,r._languages[e].language_team.replace(/\s*<.*/,"")]})),e.abrupt("return",this.update({lang:t}));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"lmd",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.md(this.l.apply(this,[e].concat(n)))}},{key:"md",value:function(e){return e.length?this.emojis.markup(nr(this._tagToHTML(this._makeTag(e)))):"&nbsp;"}},{key:"raw",value:function(e){return e.length?nr(tr(e)):"&nbsp;"}},{key:"_makeRules",value:function(){var e=[];return e.push({tag:rr(["code"]),re:/`(?=[^`\s])/,rules:[],handler:"_mdTag"}),e.push({tag:rr(["em","strong"]),re:/\*\*\*(?=\S)/,rules:e,handler:"_mdTag"}),e.push({tag:rr(["strong"]),re:/\*\*(?=\S)/,rules:e,handler:"_mdTag"}),e.push({tag:rr(["em"]),re:/\*(?=\S)/,rules:e,handler:"_mdTag"}),e.push({tag:rr(["span"]),re:/\x03\d{1,2}(?:,\d{1,2})?/,rules:e,handler:"_mdIrcColorFormatting"}),e.push({tag:rr(["span"]),re:/[\x02\x1d\x1e\x1f\x11]/,rules:e,handler:"_mdIrcTextFormatting"}),e.push({tag:rr(["a"]),re:/\[([a-zA-Z][^\]]+)\]\(([^)]+)\)/,rules:[],handler:"_mdLink"}),e.push({tag:rr(["a"]),re:/\b(https?|mailto):\S+/,rules:[],handler:"_mdURL"}),e.push({tag:rr(["a"]),re:/(\s|^)#[a-zA-Z][\w.-]+(?=\W|$)/,rules:[],handler:"_mdChannelname"}),e}},{key:"_makeTag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._rules,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0==n&&0==e.indexOf("> "))return[rr(["blockquote"]),{},[this._makeTag(e.replace(/^>\s/,""),t,n+1)]];var r,o=[],i=Jn(t);try{for(i.s();!(r=i.n()).done;){var a=r.value,u=e.match(a.re);if(u){var s={attrs:{},after:e.substring(u.index+u[0].length),before:e.substring(0,u.index),captured:u[0],index:u.index,match:u,tag:a.tag};if(this[a.handler](s),"string"==typeof s.content){s.before.length&&o.push(this._makeTag(s.before,t,n+1)),o.push([s.tag,s.attrs,[this._makeTag(s.content,a.rules,n+1)]]),s.after.length&&o.push(this._makeTag(s.after,t,n+1));break}e=s.before+s.captured+s.after}}}catch(e){i.e(e)}finally{i.f()}return[null,{},o.length?o:[tr(e)]]}},{key:"_mdChannelname",value:function(e){e.captured=e.captured.replace(/^\s/,(function(t){return e.before+=t,""})),e.content=e.captured,e.attrs.href="./"+encodeURIComponent(e.captured)}},{key:"_mdIrcColorFormatting",value:function(e){var t=e.after.indexOf("");if(-1!=t){e.content=e.after.substring(0,t),e.after=e.after.substring(t+1);var n=[];e.captured.replace(/\x030?(\d{1,2}),?(\d{1,2})?/,(function(e,t,r){r&&n.push("bg-"+r),t&&n.push("text-"+t)})),n.length&&(e.attrs.class=n.join(" "))}}},{key:"_mdIrcTextFormatting",value:function(e){var t=e.after.indexOf(e.captured);-1!=t&&(e.content=e.after.substring(0,t),e.after=e.after.substring(t+e.captured.length),e.tag=""==e.captured?rr(["strong"]):""==e.captured?rr(["em"]):""==e.captured?rr(["u"]):""==e.captured?rr(["code"]):rr(["span"]))}},{key:"_mdLink",value:function(e){e.content=e.match[1],e.attrs.href=tr(e.match[2]),e.match[2].match(/^\w+:/)&&(e.attrs.target="_blank")}},{key:"_mdTag",value:function(e){if(e.before.match(/\\$/))e.before=e.before.replace(/\\$/,"");else{var t=e.after.indexOf(e.captured);-1!=t&&(e.content=e.after.substring(0,t),e.after=e.after.substring(t+e.captured.length))}}},{key:"_mdURL",value:function(e){e.captured=e.captured.replace(/[,.:;!"']$/,(function(t){return e.after=t[0]+e.after,""})),e.content=e.captured.replace(/^(https|mailto):(\/\/)?/,""),e.attrs.href=tr(e.captured),e.attrs.target="_blank"}},{key:"_tagToHTML",value:function(e){var t=this;if("string"==typeof e)return e;var n="string"==typeof e[2]?tr(e[2]):e[2].map((function(e){return t._tagToHTML(e)})).join("");if(!e[0])return n;var r=Object.keys(e[1]).sort().map((function(t){return"".concat(t,'="').concat(e[1][t],'"')})).join(" ");return(r?e[0][0].replace(/>/," "+r+">"):e[0][0])+n+e[0][1]}}]),r}(fn),ir=new or,ar=mt(ir,(function(e){return function(){return e.l.apply(e,arguments)}})),ur=mt(ir,(function(e){return function(){return e.lmd.apply(e,arguments)}})),sr=[],cr={};var lr=function(e,t,n){return sr.push({cmd:e,description:n,example:t})};lr("/me","/me <msg>","Send message as an action."),lr("/say","/say <msg>",'Used when you want to send a message starting with "/".'),lr("/whois","/whois <nick>","Show information about a user."),lr("/query","/query <nick>","Open up a new chat window with nick."),lr("/msg","/msg <nick> <msg>","Send a direct message to nick."),lr("/shrug","/shrug <msg>","Add a shrug to end of message. Message is optional."),lr("/join","/join <#channel>","Join channel and open up a chat window."),lr("/close","/close [nick|#channel]","Close conversation."),lr("/nick","/nick <nick>","Change your wanted nick."),lr("/away","/away <message>","Add or remove an away message"),lr("/kick","/kick <nick>","Kick a user from the current channel."),lr("/mode","/mode [+|-][b|o|v] <user>","Change mode of yourself or a user"),lr("/topic","/topic or /topic <new topic>","Show current topic, or set a new one."),lr("/names","/names","Show participants in the channel."),lr("/invite","/invite <nick> [#channel]","Invite a user to a channel."),lr("/reconnect","/reconnect","Restart the current connection."),lr("/clear","/clear history <#channel> or /clear history <nick>","Delete all history for the given conversation."),lr("/oper","/oper <nick> <password>","Gain operator status on a network."),lr("/cs","/cs <msg>","Send a message to chanserv."),lr("/ns","/ns <msg>","Send a message to nickserv."),lr("/ms","/ms <msg>","Send a message to memoserv."),lr("/hs","/hs <msg>","Send a message to hostserv."),lr("/bs","/bs <msg>","Send a message to botserv."),lr("/os","/os <msg>","Send a message to operserv."),lr("/quote","/quote <irc-command>","Allow you to send any raw IRC message.");var dr=function(e,t){return cr[e]=t};function fr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return pr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pr(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function pr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mr(e,t){return mr[e]?mr[e](t):[]}function hr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return g(this,r)}}dr("/close","/part"),dr("/shrug",(function(e){return"/say "+e.concat("¯\\_(ツ)_/¯").join(" ")})),dr("/cs","/quote chanserv"),dr("/ns","/quote nickserv"),dr("/ms","/quote memoserv"),dr("/hs","/quote hotserv"),dr("/bs","/quote botserv"),dr("/os","/quote operserv"),dr("/j","/join"),dr("/raw","/quote"),mr.commands=function(e){return function(e){for(var t=e.query,n=[],r=0;r<sr.length;r++)if(0==sr[r].cmd.indexOf(t)){var o=sr[r].alias||sr[r].cmd;n.push({val:o,text:ir.md(sr[r].example)})}return n}({query:e.query})},mr.conversations=function(e){for(var t=e.conversation,n=e.query,r=e.user,o=r.findConversation({connection_id:t.connection_id}),i=o?o.conversations.toArray():r.conversations(),a=[],u=0;u<i.length&&!(-1!=i[u].name.toLowerCase().indexOf(n)&&(a.push({text:i[u].name,val:i[u].conversation_id}),a.length>=20));u++);return a},mr.emojis=function(e){var t,n=e.query,r=ir.emojis,o=[],i=fr(r.search(n.substring(1)));try{for(i.s();!(t=i.n()).done;){var a=t.value;if(o.push({val:a.emoji,text:r.markup(a.emoji)}),o.length>=30)break}}catch(e){i.e(e)}finally{i.f()}return o},mr.nicks=function(e){var t,n=e.conversation,r=e.query,o=new RegExp("^"+en(r.slice(1)),"i"),i=[],a=fr(n.participants.toArray());try{for(a.s();!(t=a.n()).done;){var u=t.value;if(i.length>=20)break;u.nick.match(o)&&i.push({val:u.nick})}}catch(e){a.e(e)}finally{a.f()}return i};var gr={0:"Jan",1:"Feb",2:"March",3:"Apr",4:"May",5:"Jun",6:"July",7:"Aug",8:"Sept",9:"Oct",10:"Nov",11:"Dec"},$r={H:"_getPaddedHours",M:"_getPaddedMinutes",S:"_getPaddedSeconds",b:"_getMonthAbbr",e:"getDate",Y:"getFullYear"},vr=function(e){p(r,e);var t=hr(r);function r(e){return $(this,r),"string"!=typeof e||e.match(/Z$/)||(e+="Z"),t.call(this,e||new Date)}return b(r,[{key:"format",value:function(e){var t=this;return e.replace(/%(\w)/g,(function(e,n){return $r[n]?t[$r[n]]():n}))}},{key:"getHumanDate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.format("%b %e"),n=new r,o=this.getYear()==n.getYear();return o&&!e.year||(t+=", "+this.getFullYear()),t}},{key:"setDate",value:function(e,t){return t?f(n(r.prototype),"setUTCDate",this).call(this,e):f(n(r.prototype),"setDate",this).call(this,e),this}},{key:"setFullYear",value:function(e,t){return t?f(n(r.prototype),"setUTCFullYear",this).call(this,e):f(n(r.prototype),"setFullYear",this).call(this,e),this}},{key:"setHours",value:function(e,t){return t?f(n(r.prototype),"setUTCHours",this).call(this,e):f(n(r.prototype),"setHours",this).call(this,e),this}},{key:"setMilliseconds",value:function(e,t){return t?f(n(r.prototype),"setUTCMilliseconds",this).call(this,e):f(n(r.prototype),"setMilliseconds",this).call(this,e),this}},{key:"setMinutes",value:function(e,t){return t?f(n(r.prototype),"setUTCMinutes",this).call(this,e):f(n(r.prototype),"setMinutes",this).call(this,e),this}},{key:"setMonth",value:function(e,t){return t?f(n(r.prototype),"setUTCMonth",this).call(this,e):f(n(r.prototype),"setMonth",this).call(this,e),this}},{key:"setSeconds",value:function(e,t){return t?f(n(r.prototype),"setUTCSeconds",this).call(this,e):f(n(r.prototype),"setSeconds",this).call(this,e),this}},{key:"setTime",value:function(e){return f(n(r.prototype),"setTime",this).call(this,e),this}},{key:"setYear",value:function(e){return this.setYear(e),this}},{key:"toEpoch",value:function(){return this.getTime()/1e3}},{key:"_getMonthAbbr",value:function(){return gr[this.getMonth()]||""}},{key:"_getPaddedHours",value:function(){return String(this.getHours()).padStart(2,"0")}},{key:"_getPaddedMinutes",value:function(){return String(this.getMinutes()).padStart(2,"0")}},{key:"_getPaddedSeconds",value:function(){return String(this.getSeconds()).padStart(2,"0")}}]),r}(a(Date)),br=pt(null);function yr(e){if(!e.nick)return["Loading..."];var t=Object.keys(e.channels||{}).sort(),n=[e.nick,e.name||e.user],r="%1 (%2)";return e.away&&(r+=" is away (%3) and",n.push(e.away)),e.idle_for&&t.length?(r+=" has been idle for %4s in %5.",n.push(e.idle_for),n.push(t.sort().join(", "))):e.idle_for&&!t.length?(r+=" has been idle for %4s, and is not in any channels.",n.push(e.idle_for)):t.length?(r+=" is active in %4.",n.push(t.join(", "))):r+=" is not in any channels.",e.away||(r=r.replace(/%(4|5)/g,(function(e,t){return"%"+(t-1)}))),[r].concat(n)}function Dr(e,t){return"onInfinityScrolled"==e?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Er.apply(void 0,[t].concat(n))}:"onInfinityVisibility"==e?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Cr.apply(void 0,[t].concat(n))}:"onMessageClick"==e?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return kr.apply(void 0,[t].concat(n))}:"onVideoLinkClick"==e?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ar.apply(void 0,[t].concat(n))}:void 0}function wr(e){var t=["","chat",e.connection_id];return e.conversation_id&&t.push(e.conversation_id),Hn.urlFor(t.map(encodeURIComponent).join("/")+"#"+e.ts.toISOString())}function _r(e){e.target.closest("a")||(e.preventDefault(),Hn.go(e.target.closest(".message").querySelector("a").href))}function Er(e,t){var n=e.conversation,r=t.detail.visibleEls.filter((function(e){return e.dataset.ts}));if(r.length){var o=function(e){return Hn.go(n.path+(e.length?"#"+e:""),{replace:!0})},i=t.detail.pos;if("top"==i){var a=r[0].dataset.ts;n.historyStartAt||n.load({before:a}),o(a)}else if("bottom"==i){var u=r.slice(-1)[0].dataset.ts;n.historyStopAt||n.load({after:u}),o(n.historyStopAt?"":u)}else o(r[0].dataset.ts)}}function Cr(e,t){var n=e.conversation,r=e.onLoadHash,o=t.detail,i=o.infinityEl,a=o.scrollHeightChanged,u=o.scrollTo,s=o.visibleEls,c=o.visibleElsChanged,l=n.messages;!(i.scrollHeight>i.offsetHeight)&&l.length&&n.load({before:l.get(0).ts.toISOString()}),a&&(u(Hn.hash?'.message[data-ts="'+Hn.hash+'"]':-1),function(e,t){var n=t&&Hn.hash&&e.querySelector('.message[data-ts="'+Hn.hash+'"]');Xt(e,".has-focus",(function(e){return e.classList.remove("has-focus")})),n&&n.classList.add("has-focus")}(i,r==Hn.hash)),c&&s.forEach((function(e){return l.render(e.dataset.index)}))}function kr(e,t){var n=t.target.closest("a");n&&!n.target&&t.target.closest(".embed")&&(n.target="_blank");var r=n&&document.querySelector('[target="convos_video"][href="'+n.href+'"]');if(r)return Ar(e,t,r);var o=t.target.closest(".le-meta");if(o)return n||o.parentNode.classList.toggle("is-expanded");var i=n&&n.href.match(/#(action|popover):(\w+):?(.*)/);return i?function(e,t,n){var r=e.conversation,o=e.fillIn,i=e.focusChatInput,a=e.popoverTarget;if(t.preventDefault(),"popover"==n[0])a.set(x(a)==n[1]?null:n[1]);else if("details"==n[1]){var u=r.messages.get(n[2]);u.showDetails=!u.showDetails,r.messages.update({messages:!0})}else"close"==n[1]?(r.send("/close "+(n[2]?decodeURIComponent(n[2]):r.conversation_id)),Hn.go("/settings/conversation")):"join"==n[1]?(a.set(null),r.send("/join "+(n[2]?decodeURIComponent(n[2]):r.conversation_id))):"mention"==n[1]?(a.set(null),o(n[2],{}),i()):"whois"==n[1]?(a.set(null),r.send("/whois "+decodeURIComponent(n[2]),(function(e){var t=Kt(e);t&&r.addMessages({message:t,sent:e,type:"error"})}))):console.warn("Unhandled onMessageActionClick",n)}(e,t,i.slice(1)):an(t.target,"img")?nn(t,t.target):n&&n.classList.contains("le-thumbnail")?nn(t,n.querySelector("img")):void 0}function Ar(e,t,n){var r=e.conversation,o=e.user;n||(n=t.target.closest("a"));var i=-1!=n.href.indexOf("#action:video");if(br.close()&&i)return t.preventDefault();var a=n.closest(".le-provider-convosapp")||n.closest(".le-provider-jitsi"),u={nick:r.participants.me().nick};if(i){var s=new URL(o.videoService);s.pathname+="/"+Sr(r),s.pathname=s.pathname.replace(/\/+/g,"/"),function(e,t){t=new URL(t,location.href).href;var n=e.messages.toArray().slice(-20).reverse().find((function(e){return-1!=e.message.indexOf(t)}));n&&n.ts.toEpoch()>(new vr).toEpoch()-600||e.send({method:"send",message:t})}(r,s.toString()),t.preventDefault(),br.open(Hn.urlFor("/video/"+s.hostname+"/"+Sr(r),u))}else if(-1!=n.href.indexOf("/video/")){var c=new URL(n.href);t.preventDefault(),br.open(Hn.urlFor(c.pathname.replace(/.*?\/video\//,"/video/"),u))}else if(a){var l=new URL(n.href);t.preventDefault(),br.open(Hn.urlFor("/video/"+l.hostname+l.pathname,u))}}function xr(e,t){var n=t.nodes[0]&&t.nodes[0].parentNode;if(n&&n.classList){var r=n.classList.contains("embed")?"add":"remove";n.classList[r]("hidden")}t.nodes.forEach((function(t){return e.appendChild(t)}))}function Fr(e,t){return t.is("not_found")?"":e.frozen?e.frozen:e==t?"Connection messages.":t.info.away?t.info.away:t.info.idle_for?ir.l("User has been idle for %1s.",t.info.idle_for):(t.frozen?t.frozen:t.topic)||(t.is("private")?"Private conversation.":"No topic is set.")}function Sr(e){var t=e.is("private")?e.participants.nicks().sort().join("-and-"):e.title;return encodeURIComponent(t)}function Or(e){var t=e-1;return t*t*t+1}function Br(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.delay,r=void 0===n?0:n,o=t.duration,i=void 0===o?400:o,a=t.easing,u=void 0===a?D:a,s=+getComputedStyle(e).opacity;return{delay:r,duration:i,easing:u,css:function(e){return"opacity: ".concat(e*s)}}}function Nr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.delay,r=void 0===n?0:n,o=t.duration,i=void 0===o?400:o,a=t.easing,u=void 0===a?Or:a,s=t.x,c=void 0===s?0:s,l=t.y,d=void 0===l?0:l,f=t.opacity,p=void 0===f?0:f,m=getComputedStyle(e),h=+m.opacity,g="none"===m.transform?"":m.transform,$=h*(1-p);return{delay:r,duration:i,easing:u,css:function(e,t){return"\n\t\t\ttransform: ".concat(g," translate(").concat((1-e)*c,"px, ").concat((1-e)*d,"px);\n\t\t\topacity: ").concat(h-$*t)}}}function jr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.delay,r=void 0===n?0:n,o=t.duration,i=void 0===o?400:o,a=t.easing,u=void 0===a?Or:a,s=getComputedStyle(e),c=+s.opacity,l=parseFloat(s.height),d=parseFloat(s.paddingTop),f=parseFloat(s.paddingBottom),p=parseFloat(s.marginTop),m=parseFloat(s.marginBottom),h=parseFloat(s.borderTopWidth),g=parseFloat(s.borderBottomWidth);return{delay:r,duration:i,easing:u,css:function(e){return"overflow: hidden;"+"opacity: ".concat(Math.min(20*e,1)*c,";")+"height: ".concat(e*l,"px;")+"padding-top: ".concat(e*d,"px;")+"padding-bottom: ".concat(e*f,"px;")+"margin-top: ".concat(e*p,"px;")+"margin-bottom: ".concat(e*m,"px;")+"border-top-width: ".concat(e*h,"px;")+"border-bottom-width: ".concat(e*g,"px;")}}}function Tr(e,t,n){const r=e.slice();return r[41]=t[n],r[43]=n,r}function Rr(e){let t,n,r,o,i,a,u,s,c=Qt(e[1]("Upload a file"))+"";n=new ct({props:{name:"cloud-upload-alt"}});let l=e[14].videoService&&Lr(e);return{c(){t=Z("label"),Je(n.$$.fragment),r=J(),o=Z("span"),i=V(c),a=J(),l&&l.c(),u=Q(),te(o,"class","tooltip is-above is-left"),te(t,"for","upload_files"),te(t,"class","btn-hallow upload has-tooltip")},m(e,c){K(e,t,c),Qe(n,t,null),z(t,r),z(t,o),z(o,i),K(e,a,c),l&&l.m(e,c),K(e,u,c),s=!0},p(e,t){(!s||2&t[0])&&c!==(c=Qt(e[1]("Upload a file"))+"")&&re(i,c),e[14].videoService?l?(l.p(e,t),16384&t[0]&&ze(l,1)):(l=Lr(e),l.c(),ze(l,1),l.m(u.parentNode,u)):l&&(Ue(),qe(l,1,1,(()=>{l=null})),He())},i(e){s||(ze(n.$$.fragment,e),ze(l),s=!0)},o(e){qe(n.$$.fragment,e),qe(l),s=!1},d(e){e&&G(t),Xe(n),e&&G(a),l&&l.d(e),e&&G(u)}}}function Lr(e){let t,n,r,o,i,a,u,s,c=Qt(e[1]("Start a video conference"))+"";return n=new ct({props:{name:e[15]?"video-slash":"video"}}),{c(){t=Z("a"),Je(n.$$.fragment),r=J(),o=Z("span"),i=V(c),te(o,"class","tooltip is-above is-left"),te(t,"href","#action:video"),te(t,"class","btn-hallow has-tooltip")},m(c,l){K(c,t,l),Qe(n,t,null),z(t,r),z(t,o),z(o,i),a=!0,u||(s=X(t,"click",(function(){C(e[9])&&e[9].apply(this,arguments)})),u=!0)},p(t,r){e=t;const o={};32768&r[0]&&(o.name=e[15]?"video-slash":"video"),n.$set(o),(!a||2&r[0])&&c!==(c=Qt(e[1]("Start a video conference"))+"")&&re(i,c)},i(e){a||(ze(n.$$.fragment,e),a=!0)},o(e){qe(n.$$.fragment,e),a=!1},d(e){e&&G(t),Xe(n),u=!1,s()}}}function Mr(e){let t,n,r,o,i,a,u;return n=new ct({props:{name:"plus-circle"}}),o=new ct({props:{name:"times"}}),{c(){t=Z("a"),Je(n.$$.fragment),r=J(),Je(o.$$.fragment),te(t,"href","#actions"),te(t,"class","btn-hallow"),ue(t,"is-active","actions"==e[12])},m(s,c){K(s,t,c),Qe(n,t,null),z(t,r),Qe(o,t,null),i=!0,a||(u=X(t,"click",e[18].toggle),a=!0)},p(e,n){4096&n[0]&&ue(t,"is-active","actions"==e[12])},i(e){i||(ze(n.$$.fragment,e),ze(o.$$.fragment,e),i=!0)},o(e){qe(n.$$.fragment,e),qe(o.$$.fragment,e),i=!1},d(e){e&&G(t),Xe(n),Xe(o),a=!1,u()}}}function Pr(e){let t,n,r,o,i=e[4],a=[];for(let t=0;t<i.length;t+=1)a[t]=Ur(Tr(e,i,t));return{c(){t=Z("div");for(let e=0;e<a.length;e+=1)a[e].c();te(t,"class",n="chat-input_menu for-"+e[5])},m(e,n){K(e,t,n);for(let e=0;e<a.length;e+=1)a[e].m(t,null);o=!0},p(r,u){if(e=r,1048600&u[0]){let n;for(i=e[4],n=0;n<i.length;n+=1){const r=Tr(e,i,n);a[n]?a[n].p(r,u):(a[n]=Ur(r),a[n].c(),a[n].m(t,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=i.length}(!o||32&u[0]&&n!==(n="chat-input_menu for-"+e[5]))&&te(t,"class",n)},i(n){o||(Oe((()=>{r||(r=Ke(t,Nr,e[16],!0)),r.run(1)})),o=!0)},o(n){r||(r=Ke(t,Nr,e[16],!1)),r.run(0),o=!1},d(e){e&&G(t),Y(a,e),e&&r&&r.end()}}}function Ir(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h=e[1]("Start a video conference")+"",g=e[1]("Attach a file")+"";return r=new ct({props:{name:e[15]?"video-slash":"video"}}),s=new ct({props:{name:"cloud-upload-alt"}}),{c(){t=Z("div"),n=Z("a"),Je(r.$$.fragment),o=J(),i=V(h),a=J(),u=Z("label"),Je(s.$$.fragment),c=J(),l=V(g),te(n,"href","#action:video"),te(u,"for","upload_files"),te(t,"class","chat-input_menu for-actions")},m(d,h){K(d,t,h),z(t,n),Qe(r,n,null),z(n,o),z(n,i),z(t,a),z(t,u),Qe(s,u,null),z(u,c),z(u,l),f=!0,p||(m=[X(n,"click",(function(){C(e[9])&&e[9].apply(this,arguments)})),X(t,"click",e[18].toggle)],p=!0)},p(t,n){e=t;const o={};32768&n[0]&&(o.name=e[15]?"video-slash":"video"),r.$set(o),(!f||2&n[0])&&h!==(h=e[1]("Start a video conference")+"")&&re(i,h),(!f||2&n[0])&&g!==(g=e[1]("Attach a file")+"")&&re(l,g)},i(n){f||(ze(r.$$.fragment,n),ze(s.$$.fragment,n),Oe((()=>{d||(d=Ke(t,Nr,e[16],!0)),d.run(1)})),f=!0)},o(n){qe(r.$$.fragment,n),qe(s.$$.fragment,n),d||(d=Ke(t,Nr,e[16],!1)),d.run(0),f=!1},d(e){e&&G(t),Xe(r),Xe(s),e&&d&&d.end(),p=!1,E(m)}}}function Ur(e){let t,n,r,o,i=(e[41].text||e[41].val)+"";return{c(){t=Z("a"),te(t,"href",n="#index:"+e[43]),te(t,"tabindex","-1"),ue(t,"has-focus",e[43]==e[3])},m(n,a){K(n,t,a),t.innerHTML=i,r||(o=X(t,"click",ee(e[20])),r=!0)},p(e,n){16&n[0]&&i!==(i=(e[41].text||e[41].val)+"")&&(t.innerHTML=i),8&n[0]&&ue(t,"has-focus",e[43]==e[3])},d(e){e&&G(t),r=!1,o()}}}function Hr(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h,g,$,v,b,y,D,w=e[13].nColumns>1&&e[2].is("conversation"),_=1==e[13].nColumns&&e[0].is("conversation"),k=Qt(e[1](e[8]))+"",A=w&&Rr(e),x=_&&Mr(e);d=new ct({props:{name:e[10]}});const F=[Ir,Pr],S=[];function O(e,t){return(null==g||4097&t[0])&&(g=!("actions"!=e[12]||!e[0].is("conversation"))),g?0:e[4].length?1:-1}return~($=O(e,[-1,-1]))&&(v=S[$]=F[$](e)),{c(){t=Z("form"),n=Z("input"),r=J(),o=Z("textarea"),i=J(),a=Z("textarea"),u=J(),A&&A.c(),s=J(),x&&x.c(),c=J(),l=Z("button"),Je(d.$$.fragment),f=J(),p=Z("span"),m=V(k),h=J(),v&&v.c(),te(n,"type","file"),te(n,"id","upload_files"),te(n,"name","upload_files"),te(n,"class","non-interactive"),te(o,"class","non-interactive"),te(o,"placeholder",e[11]),te(a,"class","is-primary-input"),te(a,"placeholder",e[11]),te(p,"class","tooltip is-above is-left"),te(l,"type","buttton"),te(l,"class","btn-hallow has-tooltip chat-input__send"),te(t,"class","chat-input")},m(g,v){K(g,t,v),z(t,n),z(t,r),z(t,o),e[31](o),z(t,i),z(t,a),z(t,u),A&&A.m(t,null),z(t,s),x&&x.m(t,null),z(t,c),z(t,l),Qe(d,l,null),z(l,f),z(l,p),z(p,m),z(t,h),~$&&S[$].m(t,null),b=!0,y||(D=[X(n,"change",(function(){C(e[7])&&e[7].apply(this,arguments)})),R(e[19].call(null,a)),X(l,"click",e[21]),X(t,"submit",ee(e[30]))],y=!0)},p(n,r){e=n,(!b||2048&r[0])&&te(o,"placeholder",e[11]),(!b||2048&r[0])&&te(a,"placeholder",e[11]),8196&r[0]&&(w=e[13].nColumns>1&&e[2].is("conversation")),w?A?(A.p(e,r),8196&r[0]&&ze(A,1)):(A=Rr(e),A.c(),ze(A,1),A.m(t,s)):A&&(Ue(),qe(A,1,1,(()=>{A=null})),He()),8193&r[0]&&(_=1==e[13].nColumns&&e[0].is("conversation")),_?x?(x.p(e,r),8193&r[0]&&ze(x,1)):(x=Mr(e),x.c(),ze(x,1),x.m(t,c)):x&&(Ue(),qe(x,1,1,(()=>{x=null})),He());const i={};1024&r[0]&&(i.name=e[10]),d.$set(i),(!b||258&r[0])&&k!==(k=Qt(e[1](e[8]))+"")&&re(m,k);let u=$;$=O(e,r),$===u?~$&&S[$].p(e,r):(v&&(Ue(),qe(S[u],1,1,(()=>{S[u]=null})),He()),~$?(v=S[$],v?v.p(e,r):(v=S[$]=F[$](e),v.c()),ze(v,1),v.m(t,null)):v=null)},i(e){b||(ze(A),ze(x),ze(d.$$.fragment,e),ze(v),b=!0)},o(e){qe(A),qe(x),qe(d.$$.fragment,e),qe(v),b=!1},d(n){n&&G(t),e[31](null),A&&A.d(),x&&x.d(),Xe(d),~$&&S[$].d(),y=!1,E(D)}}}function zr(e,t,n){let r,o,i,a,u,s,c,l,d,f,p,m,h=y,g=()=>(h(),h=A(b,(e=>n(2,l=e))),b);F(e,ar,(e=>n(1,c=e))),F(e,$t,(e=>n(13,f=e))),F(e,br,(e=>n(15,m=e))),e.$$.on_destroy.push((()=>h()));const $=z;let{uploadProgress:v=0}=t,{conversation:b}=t;g();let D,w,_=0,E=[],C="none",k=0;const x=De("api"),S=De("user");F(e,S,(e=>n(14,p=e)));const O=vt("activeChatMenu");F(e,O,(e=>n(12,d=e)));const B=new mn;function N(e,t){const{before:n,middle:r,after:o}=function(e,t){e&&e.hasOwnProperty("val")&&(e=e.val);var n=t.append?t.value.length:t.cursorPos,r=[t.value.substring(0,n),t.value.substring(n)],o=r[0],i=r[1];return Zt.undefined(e)?{before:o,middle:"",after:i}:(t.append&&(o=o.replace(/[ ]$/,"")).length&&(e=" "+e),t.padBefore&&(o=o.replace(/[ ]$/,"")).length&&(e=" "+e),t.padAfter&&(i=i.replace(/^[ ]/,""),e+=" "),t.replace&&(o=o.replace(/\S*\s?$/,"")),{before:o,middle:e,after:i})}(e,{...t,cursorPos:D.selectionStart,value:D.value});I(n+r+o),D.selectionStart=D.selectionEnd=(n+r).length}function j(e,t){E.length&&(e.preventDefault(),n(3,_+=t),_<0&&n(3,_=E.length-1),_>=E.length&&n(3,_=0),N(E[_],{replace:!0}))}function R(e){!e.conversation_id&&b.conversation_id&&(e.conversation_id=b.conversation_id)}function L(e){n(3,_=0),n(26,k=e.selectionStart),b.update({userInput:e.value}),e.value.length||B.update({index:-1})}function M(){w.maxHeight||n(6,w.maxHeight=w.parentNode.offsetHeight,w),n(6,w.value=D.value,w),n(6,w.style.width=D.offsetWidth+"px",w),D.style.height=(w.maxHeight>w.scrollHeight?w.scrollHeight:w.maxHeight)+"px"}function P(e){if(E[_])e.preventDefault(),N(E[_],{replace:!0}),n(26,k=D.selectionStart+1);else if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)){e.preventDefault();const n={method:"send"};n.message=(t=D.value,r=t.split(/\s/),o=cr[r[0].toLowerCase()],Zt.function(o)?o(r.slice(1)):o?[o].concat(r.slice(1)).filter((function(e){return Zt.defined(e)&&e.length})).join(" "):t),n.message.length&&b.send(n,R),B.add(n.message),b.is("search")||I(""),setTimeout(M,10)}var t,r,o}function I(e){D&&(D.value=e),b.update({userInput:e})}function U(e){D&&(n(4,E=e>D.value.length?[]:function(e,t,n){var r=n.conversation,o=n.user,i="",a="",u=e.substring(0,t).replace(/(\S)(\S*)$/,(function(e,t,n){return i=t,a=n,""})),s=":"==i&&a.length?"emojis":"/"!=i||u.length?"@"==i&&a.length?"nicks":"#"==i||"&"==i?"conversations":"none":"commands",c=mr(s,{conversation:r,query:i+a,user:o});return c.length&&c.unshift({autocompleteCategory:s,val:i+a}),c}(D.value,e,{conversation:b,user:S})),n(5,C=E.length&&E[0].autocompleteCategory||"none"))}function H(e){H.lock!=e.path&&(n(27,H.lock=e.path,H),I(Zt.undefined(e.userInput)?"":e.userInput))}function z(e){const t=e.target&&e.target.files||e.dataTransfer&&e.dataTransfer.files;if(!t||!t.length)return;if(t.length>1)return b.addMessages({message:"Cannot upload more than one file.",type:"error"});const r=new FormData;r.append("file",t[0]),n(7,z.file=t[0],z);const o=x("uploadFile");o.on("progress",(e=>{v<100&&n(22,v=parseInt(100*(e.total?e.loaded/e.total:.02),10)),v>=100&&n(22,v=0)})),n(22,v=1),o.perform({formData:r}).then((e=>{const t=e.res.body;if(n(22,v=0),t.files&&t.files.length)return N(t.files[0].url,{append:!0});t.errors&&b.addMessages({message:"Could not upload file: %1",vars:[c(Kt(t.errors))],type:"error"})}))}return e.$$set=e=>{"uploadProgress"in e&&n(22,v=e.uploadProgress),"conversation"in e&&g(n(0,b=e.conversation))},e.$$.update=()=>{1&e.$$.dirty[0]&&n(29,r=S.findConversation({connection_id:b.connection_id})),1&e.$$.dirty[0]&&b&&T(O,d="",d),536870912&e.$$.dirty[0]&&n(28,o=r&&r.nick),805306371&e.$$.dirty[0]&&n(11,i=b.is("search")?c("What are you looking for?"):r&&r.is("unreachable")?c("Connecting..."):c("What is on your mind %1?",o)),1&e.$$.dirty[0]&&n(10,a=b.is("search")?"search":"paper-plane"),1&e.$$.dirty[0]&&n(9,u=Dr("onVideoLinkClick",{conversation:b,user:S})),3&e.$$.dirty[0]&&n(8,s=b.is("search")?c("Search"):c("Send")),4&e.$$.dirty[0]&&B.update({conversation:l}),67108864&e.$$.dirty[0]&&U(k),134217729&e.$$.dirty[0]&&H(b)},[b,c,l,_,E,C,w,z,s,u,a,i,d,f,p,m,{y:-10,duration:200},S,O,function(e){D=e,D.addEventListener("focus",(()=>n(26,k=D.value.length+1))),D.addEventListener("change",(()=>L(D))),D.addEventListener("input",M),D.addEventListener("keyup",(e=>{1!=e.key.length&&-1==["ArrowLeft","ArrowRight","Backspace"].indexOf(e.key)||L(D)})),D.addEventListener("keydown",(e=>{if(!("ArrowDown"==e.key&&B.render(e,-1)||"ArrowUp"==e.key&&B.render(e,1)))return"ArrowDown"==e.key?j(e,e.shiftKey?4:1):"ArrowUp"==e.key?j(e,e.shiftKey?-4:-1):"Enter"==e.key?P(e):"Tab"==e.key?j(e,e.shiftKey?-1:1):void 0})),B.attach(D),I(Zt.undefined(b.userInput)?"":b.userInput)},function(e){n(3,_=parseInt(e.target.closest("a").href.replace(/.*index:/,""),10)),N(E[_],{padAfter:!0,replace:!0}),setTimeout((()=>{L(D),D.focus()}),1)},P,v,$,N,function(){D&&D.focus()},k,H,o,r,function(t){we.call(this,e,t)},function(e){Ee[e?"unshift":"push"]((()=>{w=e,n(6,w)}))}]}br.close=function(){var e=x(this);return!!e&&[!0,e.close(),this.set(null)][0]},br.open=function(e){var t=this,n=window.open(e.toString(),"convos_video");["beforeunload","close"].forEach((function(e){return n.addEventListener(e,(function(){return t.set(null)}))})),this.set(n)};class qr extends nt{constructor(e){super(),tt(this,e,zr,Hr,k,{uploader:23,uploadProgress:22,conversation:0,fillIn:24,focus:25},null,[-1,-1])}get uploader(){return this.$$.ctx[23]}get fillIn(){return this.$$.ctx[24]}get focus(){return this.$$.ctx[25]}}function Wr(e){let t,n,r,o,i,a,u;n=new ct({props:{animation:e[3],name:e[0]}});const s=e[12].default,c=S(s,e,e[11],null);return{c(){t=Z("button"),Je(n.$$.fragment),r=J(),c&&c.c(),te(t,"class",o=e[4].join(" ")),t.disabled=e[5],te(t,"type",e[2])},m(o,s){K(o,t,s),Qe(n,t,null),z(t,r),c&&c.m(t,null),i=!0,a||(u=X(t,"click",e[13]),a=!0)},p(e,[r]){const a={};8&r&&(a.animation=e[3]),1&r&&(a.name=e[0]),n.$set(a),c&&c.p&&(!i||2048&r)&&N(c,s,e,e[11],i?B(s,e[11],r,null):j(e[11]),null),(!i||16&r&&o!==(o=e[4].join(" ")))&&te(t,"class",o),(!i||32&r)&&(t.disabled=e[5]),(!i||4&r)&&te(t,"type",e[2])},i(e){i||(ze(n.$$.fragment,e),ze(c,e),i=!0)},o(e){qe(n.$$.fragment,e),qe(c,e),i=!1},d(e){e&&G(t),Xe(n),c&&c.d(e),a=!1,u()}}}function Kr(e,t,n){let r,o,i=y,a=()=>(i(),i=A(g,(e=>n(10,o=e))),g);e.$$.on_destroy.push((()=>i()));let{$$slots:u={},$$scope:s}=t,c="",{class:l=""}=t,d=[],f=!1,p=0,{disabled:m=!1}=t,{icon:h=""}=t,{op:g=new Gn({api:!1,id:""})}=t;a();let{type:$=""}=t;function v(e){e&&n(9,p=(new vr).toEpoch()),n(3,c=e?"spin":""),n(8,f=e)}return e.$$set=e=>{"class"in e&&n(6,l=e.class),"disabled"in e&&n(7,m=e.disabled),"icon"in e&&n(0,h=e.icon),"op"in e&&a(n(1,g=e.op)),"type"in e&&n(2,$=e.type),"$$scope"in e&&n(11,s=e.$$scope)},e.$$.update=()=>{1024&e.$$.dirty&&o.is("loading")&&v(!0),1536&e.$$.dirty&&(o.is("loading")||setTimeout((()=>v(!1)),700-((new vr).toEpoch()-p))),65&e.$$.dirty&&n(4,d=["btn","for-"+(h||"default")].concat(l)),384&e.$$.dirty&&n(5,r=m||f)},[h,g,$,c,d,r,l,m,f,p,o,s,u,function(t){we.call(this,e,t)}]}class Gr extends nt{constructor(e){super(),tt(this,e,Kr,Wr,k,{class:6,disabled:7,icon:0,op:1,type:2})}}const Yr=e=>({}),Zr=e=>({});function Vr(e){let t,n;const r=e[14].label,o=S(r,e,e[13],Zr);return{c(){t=Z("label"),o&&o.c(),te(t,"for",e[4])},m(e,r){K(e,t,r),o&&o.m(t,null),n=!0},p(e,i){o&&o.p&&(!n||8192&i)&&N(o,r,e,e[13],n?B(r,e[13],i,Yr):j(e[13]),Zr),(!n||16&i)&&te(t,"for",e[4])},i(e){n||(ze(o,e),n=!0)},o(e){qe(o,e),n=!1},d(e){e&&G(t),o&&o.d(e)}}}function Jr(e){let t,n,r,o,i,a,u,s;o=new ct({props:{family:"regular",name:e[7]}}),o.$on("click",e[18]);let c=e[9].label&&Vr(e);return{c(){t=Z("div"),n=Z("input"),r=J(),Je(o.$$.fragment),i=J(),c&&c.c(),te(n,"type","checkbox"),te(n,"id",e[4]),te(n,"name",e[3]),n.disabled=e[1],te(t,"class","checkbox"),t.hidden=e[2],ue(t,"has-badge",e[0]),ue(t,"has-focus",e[6]),ue(t,"is-disabled",e[1])},m(l,d){K(l,t,d),z(t,n),n.checked=e[5],z(t,r),Qe(o,t,null),z(t,i),c&&c.m(t,null),a=!0,u||(s=[X(n,"change",e[15]),X(n,"blur",e[16]),X(n,"focus",e[17])],u=!0)},p(e,[r]){(!a||16&r)&&te(n,"id",e[4]),(!a||8&r)&&te(n,"name",e[3]),(!a||2&r)&&(n.disabled=e[1]),32&r&&(n.checked=e[5]);const i={};128&r&&(i.name=e[7]),o.$set(i),e[9].label?c?(c.p(e,r),512&r&&ze(c,1)):(c=Vr(e),c.c(),ze(c,1),c.m(t,null)):c&&(Ue(),qe(c,1,1,(()=>{c=null})),He()),(!a||4&r)&&(t.hidden=e[2]),1&r&&ue(t,"has-badge",e[0]),64&r&&ue(t,"has-focus",e[6]),2&r&&ue(t,"is-disabled",e[1])},i(e){a||(ze(o.$$.fragment,e),ze(c),a=!0)},o(e){qe(o.$$.fragment,e),qe(c),a=!1},d(e){e&&G(t),Xe(o),c&&c.d(),u=!1,E(s)}}}function Qr(e,t,n){let r,o,i,a,u=y;e.$$.on_destroy.push((()=>u()));let{$$slots:s={},$$scope:c}=t;const l=function(e){var t={};for(var n in e)t[n]=!0;return t}(s);let{badge:d=!1}=t,{disabled:f=!1}=t,{form:p}=t,{hidden:m=!1}=t,{icon:h="square"}=t,{name:g=""}=t,{id:$=(g?"form_"+g:sn())}=t,v=!1;return e.$$set=e=>{"badge"in e&&n(0,d=e.badge),"disabled"in e&&n(1,f=e.disabled),"form"in e&&n(10,p=e.form),"hidden"in e&&n(2,m=e.hidden),"icon"in e&&n(11,h=e.icon),"name"in e&&n(3,g=e.name),"id"in e&&n(4,$=e.id),"$$scope"in e&&n(13,c=e.$$scope)},e.$$.update=()=>{1032&e.$$.dirty&&(n(8,r=p.field(g)),u(),u=A(r,(e=>n(5,a=e)))),2048&e.$$.dirty&&n(12,o="caret"==h?["caret-square-down","caret-square-up"]:["square","check-square"]),4128&e.$$.dirty&&n(7,i=o[a?1:0])},[d,f,m,g,$,a,v,i,r,l,p,h,o,c,s,function(){a=this.checked,r.set(a)},()=>{n(6,v=!1)},()=>{n(6,v=!0)},()=>{f||T(r,a=!a,a)}]}class Xr extends nt{constructor(e){super(),tt(this,e,Qr,Jr,k,{badge:0,disabled:1,form:10,hidden:2,icon:11,name:3,id:4})}}var eo=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http://localhost";$(this,e),this._url=new URL("http://localhost"),Object.defineProperty(this,"href",{get:function(){return t._url.href.replace(/^http:/,t.protocol)},set:function(e){t._url.href=e.replace(/^\w+:/,"http:"),t.protocol=e.match(/^\w+:/)[0]}}),["host","pathname","password","searchParams","username"].forEach((function(e){Object.defineProperty(t,e,{get:function(){return t._url[e]},set:function(n){t._url[e]=n}})})),this.href=n}return b(e,[{key:"fromFields",value:function(e){Zt.string(e.protocol)&&(this.protocol=e.protocol.replace(/:?$/,":")),Zt.string(e.host)&&(this.host=e.host),Zt.string(e.password)&&(this.password=encodeURIComponent(e.password)),Zt.string(e.username)&&(this.username=encodeURIComponent(e.username)),Zt.string(e.conversation_id)&&(this.pathname=encodeURIComponent(e.conversation_id));var t=this.searchParams;return Zt.string(e.local_address)&&t.append("local_address",e.local_address||""),Zt.string(e.nick)&&t.append("nick",e.nick.trim()),Zt.string(e.realname)&&e.realname.length&&t.append("realname",e.realname.trim()),Zt.string(e.sasl)&&t.append("sasl",e.sasl||"none"),t.append("tls",Zt.true(e.tls)?"1":"0"),t.append("tls_verify",Zt.true(e.tls)&&Zt.true(e.tls_verify)?"1":"0"),this}},{key:"toFields",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.protocol=this.protocol.replace(/:$/,""),e.host=this.host,e.password=Zt.string(this.password)?decodeURIComponent(this.password):"",e.username=Zt.string(this.username)?decodeURIComponent(this.username):"",e.conversation_id=decodeURIComponent(this.pathname.split("/").filter((function(e){return e.length}))[0]||"");var t=this.searchParams;return e.local_address=t.get("local_address")||e.local_address||"",e.nick=t.get("nick")||e.nick||"",e.realname=t.get("realname")||e.realname||"",e.sasl=t.get("sasl")||e.sasl||"none",e.realname=t.get("realname")||e.realname||"",e.tls=Zt.true(t.get("tls")),e.tls_verify=Zt.true(t.get("tls_verify")),e}},{key:"toString",value:function(){return this.href.replace(/^http:/,this.protocol)}}]),e}();function to(e){let t,n,r,o,i=e[4](e[1])+"";return{c(){t=Z("div"),n=V(i),te(t,"class","success")},m(e,r){K(e,t,r),z(t,n),o=!0},p(e,t){(!o||18&t)&&i!==(i=e[4](e[1])+"")&&re(n,i)},i(e){o||(Oe((()=>{r||(r=Ke(t,Br,{},!0)),r.run(1)})),o=!0)},o(e){r||(r=Ke(t,Br,{},!1)),r.run(0),o=!1},d(e){e&&G(t),e&&r&&r.end()}}}function no(e){let t,n,r,o,i=e[4](e[2].error())+"";return{c(){t=Z("div"),n=V(i),te(t,"class","error")},m(e,r){K(e,t,r),z(t,n),o=!0},p(e,t){(!o||20&t)&&i!==(i=e[4](e[2].error())+"")&&re(n,i)},i(e){o||(Oe((()=>{r||(r=Ke(t,Br,{},!0)),r.run(1)})),o=!0)},o(e){r||(r=Ke(t,Br,{},!1)),r.run(0),o=!1},d(e){e&&G(t),e&&r&&r.end()}}}function ro(e){let t,n,r,o,i,a;const u=[no,to],s=[];function c(e,r){return(null==t||4&r)&&(t=!!e[2].is("error")),t?0:((null==n||12&r)&&(n=!(!e[2].is("success")||!e[3])),n?1:-1)}return~(r=c(e,-1))&&(o=s[r]=u[r](e)),{c(){o&&o.c(),i=Q()},m(e,t){~r&&s[r].m(e,t),K(e,i,t),a=!0},p(e,[t]){let n=r;r=c(e,t),r===n?~r&&s[r].p(e,t):(o&&(Ue(),qe(s[n],1,1,(()=>{s[n]=null})),He()),~r?(o=s[r],o?o.p(e,t):(o=s[r]=u[r](e),o.c()),ze(o,1),o.m(i.parentNode,i)):o=null)},i(e){a||(ze(o),a=!0)},o(e){qe(o),a=!1},d(e){~r&&s[r].d(e),e&&G(i)}}}function oo(e,t,n){let r,o,i=y,a=()=>(i(),i=A(u,(e=>n(2,r=e))),u);F(e,ar,(e=>n(4,o=e))),e.$$.on_destroy.push((()=>i()));let{op:u=new Gn({})}=t;a();let s,{success:c="Saved."}=t,l=!1;return be((()=>s&&clearTimeout(s))),e.$$set=e=>{"op"in e&&a(n(0,u=e.op)),"success"in e&&n(1,c=e.success)},e.$$.update=()=>{4&e.$$.dirty&&function(e){if(!e.is("success"))return n(3,l=!1);l||(n(3,l=!0),s=setTimeout((()=>n(3,l=!1)),2e3))}(r)},[u,c,r,l,o]}class io extends nt{constructor(e){super(),tt(this,e,oo,ro,k,{op:0,success:1})}}function ao(e,t,n){const r=e.slice();return r[30]=t[n],r[32]=n,r}const uo=e=>({}),so=e=>({});function co(e){let t,n,r,o,i,a=(e[30].length>1?e[30][1]:e[30][0])+"";function u(){return e[23](e[32])}function s(){return e[24](e[32])}return{c(){t=Z("a"),n=V(a),te(t,"href",r="#"+e[32]+":"+e[30][0]),te(t,"class","select-field__option"),te(t,"tabindex","-1"),ue(t,"is-active",e[32]==e[8])},m(e,r){K(e,t,r),z(t,n),o||(i=[X(t,"focus",u),X(t,"mouseover",s)],o=!0)},p(o,i){e=o,1024&i[0]&&a!==(a=(e[30].length>1?e[30][1]:e[30][0])+"")&&re(n,a),1024&i[0]&&r!==(r="#"+e[32]+":"+e[30][0])&&te(t,"href",r),256&i[0]&&ue(t,"is-active",e[32]==e[8])},d(e){e&&G(t),o=!1,E(i)}}}function lo(e){let t,n,r,o,i,a,u,s,c,l,d;const f=e[20].label,p=S(f,e,e[19],so),m=p||function(e){let t;return{c(){t=V("Label")},m(e,n){K(e,t,n)},d(e){e&&G(t)}}}();let h=e[10],g=[];for(let t=0;t<h.length;t+=1)g[t]=co(ao(e,h,t));return{c(){t=Z("div"),n=Z("label"),m&&m.c(),r=J(),o=Z("input"),i=J(),a=Z("input"),u=J(),s=Z("div");for(let e=0;e<g.length;e+=1)g[e].c();te(n,"for",e[2]),te(o,"type","hidden"),te(o,"name",e[1]),te(a,"type","text"),te(a,"id",e[2]),te(a,"autocomplete","off"),te(a,"placeholder",e[3]),a.readOnly=e[4],te(s,"class","select-field__options"),te(t,"class","select-field text-field"),t.hidden=e[0],ue(t,"is-open",e[6]),ue(t,"is-readonly",e[4])},m(f,p){K(f,t,p),z(t,n),m&&m.m(n,null),z(t,r),z(t,o),oe(o,e[7]),z(t,i),z(t,a),e[22](a),z(t,u),z(t,s);for(let e=0;e<g.length;e+=1)g[e].m(s,null);e[25](t),c=!0,l||(d=[X(o,"input",e[21]),X(o,"keydown",e[13]),X(a,"blur",e[12]),X(a,"keydown",e[13]),X(a,"keyup",e[14]),X(a,"click",ee(e[15])),X(s,"click",ee(e[15]))],l=!0)},p(e,r){if(p&&p.p&&(!c||524288&r[0])&&N(p,f,e,e[19],c?B(f,e[19],r,uo):j(e[19]),so),(!c||4&r[0])&&te(n,"for",e[2]),(!c||2&r[0])&&te(o,"name",e[1]),128&r[0]&&oe(o,e[7]),(!c||4&r[0])&&te(a,"id",e[2]),(!c||8&r[0])&&te(a,"placeholder",e[3]),(!c||16&r[0])&&(a.readOnly=e[4]),1280&r[0]){let t;for(h=e[10],t=0;t<h.length;t+=1){const n=ao(e,h,t);g[t]?g[t].p(n,r):(g[t]=co(n),g[t].c(),g[t].m(s,null))}for(;t<g.length;t+=1)g[t].d(1);g.length=h.length}(!c||1&r[0])&&(t.hidden=e[0]),64&r[0]&&ue(t,"is-open",e[6]),16&r[0]&&ue(t,"is-readonly",e[4])},i(e){c||(ze(m,e),c=!0)},o(e){qe(m,e),c=!1},d(n){n&&G(t),m&&m.d(n),e[22](null),Y(g,n),e[25](null),l=!1,E(d)}}}function fo(e,t,n){let r,o,i,{$$slots:a={},$$scope:u}=t,s=0,c=!1,l="",d=[],{form:f}=t,{hidden:p=!1}=t,{name:m=""}=t,{id:h=(m?"form_"+m:sn())}=t,{options:g}=t,{placeholder:$=""}=t,{readonly:v=!1}=t;const b=["ArrowDown","ArrowUp","Enter"],y=f.field(m);function D(e){let t;if("keydown"==e.type)t=d.length&&d[s]||g.filter((e=>e[0]==r))[0];else{const n=zt(e.target,".select-field__option").href.replace(/^.*?#\d+:/,"");t=d.filter((e=>e[0]==n))[0]||[]}t&&t.length||(t=[""]),y.set(t[0]),n(6,c=!1)}function w(e){const t=d.filter((t=>t[0]==e))[0]||[];n(5,o.value=t.length>1?t[1]:t.length?t[0]:e,o)}function _(e){if(v)return;const t=e&&e.target&&zt(e.target,".select-field__option");return c||(n(8,s=d.map((e=>e[0])).indexOf(r)),o.setSelectionRange(0,9999)),t?D(e):n(6,c=!c)}F(e,y,(e=>n(7,r=e)));return e.$$set=e=>{"form"in e&&n(16,f=e.form),"hidden"in e&&n(0,p=e.hidden),"name"in e&&n(1,m=e.name),"id"in e&&n(2,h=e.id),"options"in e&&n(17,g=e.options),"placeholder"in e&&n(3,$=e.placeholder),"readonly"in e&&n(4,v=e.readonly),"$$scope"in e&&n(19,u=e.$$scope)},e.$$.update=()=>{if(64&e.$$.dirty[0]&&0==c&&n(18,l=""),393216&e.$$.dirty[0]&&function(e,t){let r=new RegExp("(?:^|\\s|-)"+en(t),"i"),o=e.filter((e=>e[0]==t));o.length||(o=e.filter((e=>e[0].match(r))));for(let t=0;t<e.length;t++){const n=e[t];n.length>1&&-1!=o.indexOf(n)&&n[1].match(r)&&-1==e.map((e=>e[0])).indexOf(n[0])&&o.push(n)}n(8,s=0),n(10,d=o)}(g,l),131232&e.$$.dirty[0]&&o&&!o.value&&o!=document.activeElement){const e=g.find((e=>e[0]==r));e&&n(5,o.value=e[1]||e[0],o)}160&e.$$.dirty[0]&&o&&w(r)},[p,m,h,$,v,o,c,r,s,i,d,y,function(){setTimeout((()=>document.activeElement.closest(".select-field__option")||n(6,c=!1)),100),w(r)},function(e){if(-1!=b.indexOf(e.key)&&e.preventDefault(),"Tab"!=e.key){if(!c)return _(e);"ArrowDown"==e.key&&n(8,s++,s),"ArrowUp"==e.key&&n(8,s--,s),"Enter"==e.key&&D(e),s>=g.length&&n(8,s=0),s<0&&n(8,s=g.length-1)}else c&&D(e)},function(e){1!=e.key.length&&"Backspace"!=e.key||n(18,l=o.value)},_,f,g,l,u,a,function(){r=this.value,y.set(r)},function(e){Ee[e?"unshift":"push"]((()=>{o=e,n(5,o),n(17,g),n(7,r)}))},e=>{n(8,s=e)},e=>{n(8,s=e)},function(e){Ee[e?"unshift":"push"]((()=>{i=e,n(9,i)}))}]}class po extends nt{constructor(e){super(),tt(this,e,fo,lo,k,{form:16,hidden:0,name:1,id:2,options:17,placeholder:3,readonly:4},null,[-1,-1])}}const mo=e=>({}),ho=e=>({});function go(e){let t,n,r,o,i,a,u;const s=e[9].label,c=S(s,e,e[8],ho),l=c||function(e){let t;return{c(){t=V("Label")},m(e,n){K(e,t,n)},d(e){e&&G(t)}}}();return{c(){t=Z("div"),n=Z("label"),l&&l.c(),r=J(),o=Z("textarea"),te(n,"for",e[2]),te(o,"id",e[2]),te(o,"name",e[1]),te(o,"placeholder",e[3]),o.readOnly=e[4],te(t,"class","text-area"),t.hidden=e[0]},m(s,c){K(s,t,c),z(t,n),l&&l.m(n,null),z(t,r),z(t,o),oe(o,e[5]),i=!0,a||(u=X(o,"input",e[10]),a=!0)},p(e,[r]){c&&c.p&&(!i||256&r)&&N(c,s,e,e[8],i?B(s,e[8],r,mo):j(e[8]),ho),(!i||4&r)&&te(n,"for",e[2]),(!i||4&r)&&te(o,"id",e[2]),(!i||2&r)&&te(o,"name",e[1]),(!i||8&r)&&te(o,"placeholder",e[3]),(!i||16&r)&&(o.readOnly=e[4]),32&r&&oe(o,e[5]),(!i||1&r)&&(t.hidden=e[0])},i(e){i||(ze(l,e),i=!0)},o(e){qe(l,e),i=!1},d(e){e&&G(t),l&&l.d(e),a=!1,u()}}}function $o(e,t,n){let r,{$$slots:o={},$$scope:i}=t,{form:a}=t,{hidden:u=!1}=t,{name:s=""}=t,{id:c=(s?"form_"+s:sn())}=t,{placeholder:l=""}=t,{readonly:d=!1}=t;const f=a.field(s);return F(e,f,(e=>n(5,r=e))),e.$$set=e=>{"form"in e&&n(7,a=e.form),"hidden"in e&&n(0,u=e.hidden),"name"in e&&n(1,s=e.name),"id"in e&&n(2,c=e.id),"placeholder"in e&&n(3,l=e.placeholder),"readonly"in e&&n(4,d=e.readonly),"$$scope"in e&&n(8,i=e.$$scope)},[u,s,c,l,d,r,f,a,i,o,function(){r=this.value,f.set(r)}]}class vo extends nt{constructor(e){super(),tt(this,e,$o,go,k,{form:7,hidden:0,name:1,id:2,placeholder:3,readonly:4})}}const bo=e=>({}),yo=e=>({}),Do=e=>({}),wo=e=>({});function _o(e){let t,n,r,o,i;return n=new ct({props:{name:e[7]?"eye-slash":"eye"}}),{c(){t=Z("a"),Je(n.$$.fragment),te(t,"href","#toggle"),te(t,"class","text-field__toggle")},m(a,u){K(a,t,u),Qe(n,t,null),r=!0,o||(i=X(t,"click",ee(e[15])),o=!0)},p(e,t){const r={};128&t&&(r.name=e[7]?"eye-slash":"eye"),n.$set(r)},i(e){r||(ze(n.$$.fragment,e),r=!0)},o(e){qe(n.$$.fragment,e),r=!1},d(e){e&&G(t),Xe(n),o=!1,i()}}}function Eo(e){let t,n,r,o,i,a,u,s,c,l;const d=e[13].label,f=S(d,e,e[12],wo),p=f||function(e){let t;return{c(){t=V("Label")},m(e,n){K(e,t,n)},d(e){e&&G(t)}}}();let m="password"==e[6]&&!e[5]&&_o(e);const h=e[13].help,g=S(h,e,e[12],yo);return{c(){t=Z("div"),n=Z("label"),p&&p.c(),r=J(),o=Z("input"),a=J(),m&&m.c(),u=J(),g&&g.c(),te(n,"for",e[3]),te(o,"type",i=e[7]?"text":e[6]),te(o,"id",e[3]),te(o,"name",e[2]),te(o,"autocomplete",e[0]),te(o,"placeholder",e[4]),o.readOnly=e[5],o.value=e[8],te(t,"class","text-field"),t.hidden=e[1],ue(t,"has-password","password"==e[6])},m(i,d){K(i,t,d),z(t,n),p&&p.m(n,null),z(t,r),z(t,o),z(t,a),m&&m.m(t,null),K(i,u,d),g&&g.m(i,d),s=!0,c||(l=[X(o,"input",e[9]),X(o,"keyup",e[14])],c=!0)},p(e,[r]){f&&f.p&&(!s||4096&r)&&N(f,d,e,e[12],s?B(d,e[12],r,Do):j(e[12]),wo),(!s||8&r)&&te(n,"for",e[3]),(!s||192&r&&i!==(i=e[7]?"text":e[6]))&&te(o,"type",i),(!s||8&r)&&te(o,"id",e[3]),(!s||4&r)&&te(o,"name",e[2]),(!s||1&r)&&te(o,"autocomplete",e[0]),(!s||16&r)&&te(o,"placeholder",e[4]),(!s||32&r)&&(o.readOnly=e[5]),(!s||256&r&&o.value!==e[8])&&(o.value=e[8]),"password"!=e[6]||e[5]?m&&(Ue(),qe(m,1,1,(()=>{m=null})),He()):m?(m.p(e,r),96&r&&ze(m,1)):(m=_o(e),m.c(),ze(m,1),m.m(t,null)),(!s||2&r)&&(t.hidden=e[1]),64&r&&ue(t,"has-password","password"==e[6]),g&&g.p&&(!s||4096&r)&&N(g,h,e,e[12],s?B(h,e[12],r,bo):j(e[12]),yo)},i(e){s||(ze(p,e),ze(m),ze(g,e),s=!0)},o(e){qe(p,e),qe(m),qe(g,e),s=!1},d(e){e&&G(t),p&&p.d(e),m&&m.d(),e&&G(u),g&&g.d(e),c=!1,E(l)}}}function Co(e,t,n){let r,{$$slots:o={},$$scope:i}=t;let a=!1,{autocomplete:u=null}=t,{form:s}=t,{hidden:c=!1}=t,{name:l=""}=t,{id:d=(l?"form_"+l:sn())}=t,{placeholder:f=""}=t,{readonly:p=!1}=t,{type:m="text"}=t;const h=s.field(l);F(e,h,(e=>n(8,r=e)));return e.$$set=e=>{"autocomplete"in e&&n(0,u=e.autocomplete),"form"in e&&n(11,s=e.form),"hidden"in e&&n(1,c=e.hidden),"name"in e&&n(2,l=e.name),"id"in e&&n(3,d=e.id),"placeholder"in e&&n(4,f=e.placeholder),"readonly"in e&&n(5,p=e.readonly),"type"in e&&n(6,m=e.type),"$$scope"in e&&n(12,i=e.$$scope)},[u,c,l,d,f,p,m,a,r,e=>{h.set(m.match(/^(number|range)$/)?parseInt(e.target.value,10):e.target.value)},h,s,i,o,function(t){we.call(this,e,t)},()=>{n(7,a=!a)}]}class ko extends nt{constructor(e){super(),tt(this,e,Co,Eo,k,{autocomplete:0,form:11,hidden:1,name:2,id:3,placeholder:4,readonly:5,type:6})}}function Ao(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return xo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xo(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function xo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Fo=jt("form");function So(e,t){return Zt.undefined(t)&&(t=Object.keys(e)),Zt.array(t)?t.reduce((function(t,n){return t[n]=e[n],t}),{}):e[t]}function Oo(e,t){return Object.keys(t).forEach((function(n){return e.field(n).set(Zt.stringable(t[n])?String(t[n]):t[n])})),e}function Bo(e,t){var n=[t];return e.push(n),function(){var t=e.indexOf(n);-1!=t&&e.splice(t,1)}}var No=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n={},r={},o=[];return r.field=function(e){if(n[e])return n[e];var r=pt("");return r.subscribe((function(n){Fo.debug(e,"=",n),t[e]=n;var r,i=Ao(o);try{for(i.s();!(r=i.n()).done;){r.value[0](t)}}catch(e){i.e(e)}finally{i.f()}})),n[e]=r},r.remove=function(e){e.forEach((function(e){return delete t[e],delete n[e],delete o[e]}));var r,i=Ao(o);try{for(i.s();!(r=i.n()).done;){r.value[0](t)}}catch(e){i.e(e)}finally{i.f()}},r.get=function(e){return So(t,e)},r.set=function(e){return Oo(r,e)},r.subscribe=function(e){return e(t),Bo(o,e)},Object.keys(e).forEach((function(t){return r.set(_t({},t,e[t]))})),r};function jo(e){let t,n,r=e[1]("Host and port")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("Host and port")+"")&&re(n,r)},d(e){e&&G(t)}}}function To(e){let t,n,r=e[1]("You cannot create custom connections.")+"";return{c(){t=Z("p"),n=V(r),te(t,"class","help"),te(t,"slot","help"),t.hidden=!e[5].forced_connection},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("You cannot create custom connections.")+"")&&re(n,r)},d(e){e&&G(t)}}}function Ro(e){let t,n,r=e[1]("Nickname")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("Nickname")+"")&&re(n,r)},d(e){e&&G(t)}}}function Lo(e){let t,n,r=e[1]("Your name")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("Your name")+"")&&re(n,r)},d(e){e&&G(t)}}}function Mo(e){let t,n;return t=new ko({props:{name:"conversation_id",form:e[4],placeholder:e[1]("Ex: #convos"),$$slots:{label:[Io]},$$scope:{ctx:e}}}),{c(){Je(t.$$.fragment)},m(e,r){Qe(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.placeholder=e[1]("Ex: #convos")),262146&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(ze(t.$$.fragment,e),n=!0)},o(e){qe(t.$$.fragment,e),n=!1},d(e){Xe(t,e)}}}function Po(e){let t,n;return t=new Xr({props:{name:"want_to_be_connected",form:e[4],$$slots:{label:[Uo]},$$scope:{ctx:e}}}),{c(){Je(t.$$.fragment)},m(e,r){Qe(t,e,r),n=!0},p(e,n){const r={};262146&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(ze(t.$$.fragment,e),n=!0)},o(e){qe(t.$$.fragment,e),n=!1},d(e){Xe(t,e)}}}function Io(e){let t,n,r=e[1]("Conversation name")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("Conversation name")+"")&&re(n,r)},d(e){e&&G(t)}}}function Uo(e){let t,n,r=e[1]("Want to be connected")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("Want to be connected")+"")&&re(n,r)},d(e){e&&G(t)}}}function Ho(e){let t,n,r=e[1]("Secure connection (TLS)")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("Secure connection (TLS)")+"")&&re(n,r)},d(e){e&&G(t)}}}function zo(e){let t,n,r=e[1]("Verify certificate (TLS)")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("Verify certificate (TLS)")+"")&&re(n,r)},d(e){e&&G(t)}}}function qo(e){let t,n,r=e[1]("Advanced settings")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("Advanced settings")+"")&&re(n,r)},d(e){e&&G(t)}}}function Wo(e){let t,n,r,o,i;n=new vo({props:{name:"on_connect_commands",form:e[4],placeholder:e[1]("Put each command on a new line."),$$slots:{label:[Ko]},$$scope:{ctx:e}}});let a=!e[5].forced_connection&&function(e){let t,n;return t=new ko({props:{name:"local_address",form:e[4],$$slots:{help:[Yo],label:[Go]},$$scope:{ctx:e}}}),{c(){Je(t.$$.fragment)},m(e,r){Qe(t,e,r),n=!0},p(e,n){const r={};262146&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(ze(t.$$.fragment,e),n=!0)},o(e){qe(t.$$.fragment,e),n=!1},d(e){Xe(t,e)}}}(e);return{c(){t=Z("div"),Je(n.$$.fragment),r=J(),a&&a.c(),te(t,"class","form-group")},m(e,o){K(e,t,o),Qe(n,t,null),z(t,r),a&&a.m(t,null),i=!0},p(e,t){const r={};2&t&&(r.placeholder=e[1]("Put each command on a new line.")),262146&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r),e[5].forced_connection||a.p(e,t)},i(e){i||(ze(n.$$.fragment,e),ze(a),Oe((()=>{o||(o=Ke(t,jr,{duration:150},!0)),o.run(1)})),i=!0)},o(e){qe(n.$$.fragment,e),qe(a),o||(o=Ke(t,jr,{duration:150},!1)),o.run(0),i=!1},d(e){e&&G(t),Xe(n),a&&a.d(),e&&o&&o.end()}}}function Ko(e){let t,n,r=e[1]("On-connect commands")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("On-connect commands")+"")&&re(n,r)},d(e){e&&G(t)}}}function Go(e){let t,n,r=e[1]("Source IP")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("Source IP")+"")&&re(n,r)},d(e){e&&G(t)}}}function Yo(e){let t,n,r=e[1]("Leave this blank, unless you know what you are doing.")+"";return{c(){t=Z("p"),n=V(r),te(t,"class","help"),te(t,"slot","help")},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("Leave this blank, unless you know what you are doing.")+"")&&re(n,r)},d(e){e&&G(t)}}}function Zo(e){let t,n,r=e[1]("Authentication settings")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("Authentication settings")+"")&&re(n,r)},d(e){e&&G(t)}}}function Vo(e){let t,n,r,o,i,a,u,s,c;n=new ko({props:{name:"username",form:e[4],placeholder:e[2].nick,$$slots:{help:[Qo],label:[Jo]},$$scope:{ctx:e}}});const l=[ei,Xo],d=[];function f(e,t){return"external"==e[2].sasl?0:1}return o=f(e),i=d[o]=l[o](e),u=new po({props:{name:"sasl",options:e[6],form:e[4],$$slots:{label:[ii]},$$scope:{ctx:e}}}),{c(){t=Z("div"),Je(n.$$.fragment),r=J(),i.c(),a=J(),Je(u.$$.fragment),te(t,"class","form-group")},m(e,i){K(e,t,i),Qe(n,t,null),z(t,r),d[o].m(t,null),z(t,a),Qe(u,t,null),c=!0},p(e,r){const s={};4&r&&(s.placeholder=e[2].nick),262146&r&&(s.$$scope={dirty:r,ctx:e}),n.$set(s);let c=o;o=f(e),o===c?d[o].p(e,r):(Ue(),qe(d[c],1,1,(()=>{d[c]=null})),He(),i=d[o],i?i.p(e,r):(i=d[o]=l[o](e),i.c()),ze(i,1),i.m(t,a));const p={};262146&r&&(p.$$scope={dirty:r,ctx:e}),u.$set(p)},i(e){c||(ze(n.$$.fragment,e),ze(i),ze(u.$$.fragment,e),Oe((()=>{s||(s=Ke(t,jr,{duration:150},!0)),s.run(1)})),c=!0)},o(e){qe(n.$$.fragment,e),qe(i),qe(u.$$.fragment,e),s||(s=Ke(t,jr,{duration:150},!1)),s.run(0),c=!1},d(e){e&&G(t),Xe(n),d[o].d(),Xe(u),e&&s&&s.end()}}}function Jo(e){let t,n,r=e[1]("Username")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("Username")+"")&&re(n,r)},d(e){e&&G(t)}}}function Qo(e){let t,n,r=e[1]("SASL and IRC server username.")+"";return{c(){t=Z("p"),n=V(r),te(t,"class","help"),te(t,"slot","help")},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("SASL and IRC server username.")+"")&&re(n,r)},d(e){e&&G(t)}}}function Xo(e){let t,n;return t=new ko({props:{type:"password",name:"password",form:e[4],$$slots:{help:[ni],label:[ti]},$$scope:{ctx:e}}}),{c(){Je(t.$$.fragment)},m(e,r){Qe(t,e,r),n=!0},p(e,n){const r={};262146&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(ze(t.$$.fragment,e),n=!0)},o(e){qe(t.$$.fragment,e),n=!1},d(e){Xe(t,e)}}}function ei(e){let t,n;return t=new ko({props:{type:"text",name:"fingerprint",form:e[4],readonly:!0,$$slots:{help:[oi],label:[ri]},$$scope:{ctx:e}}}),{c(){Je(t.$$.fragment)},m(e,r){Qe(t,e,r),n=!0},p(e,n){const r={};262146&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(ze(t.$$.fragment,e),n=!0)},o(e){qe(t.$$.fragment,e),n=!1},d(e){Xe(t,e)}}}function ti(e){let t,n,r=e[1]("Password")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("Password")+"")&&re(n,r)},d(e){e&&G(t)}}}function ni(e){let t,n,r=e[1]("SASL plain or IRC server password.")+"";return{c(){t=Z("p"),n=V(r),te(t,"class","help"),te(t,"slot","help")},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("SASL plain or IRC server password.")+"")&&re(n,r)},d(e){e&&G(t)}}}function ri(e){let t,n,r=e[1]("Fingerprint")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("Fingerprint")+"")&&re(n,r)},d(e){e&&G(t)}}}function oi(e){let t,n,r=e[1]("The certificate fingerprint is used for SASL external authentication.")+"";return{c(){t=Z("p"),n=V(r),te(t,"class","help"),te(t,"slot","help")},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("The certificate fingerprint is used for SASL external authentication.")+"")&&re(n,r)},d(e){e&&G(t)}}}function ii(e){let t,n,r=e[1]("SASL authentication mechanism")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("SASL authentication mechanism")+"")&&re(n,r)},d(e){e&&G(t)}}}function ai(e){let t,n;return t=new Gr({props:{icon:"plus-circle",op:e[7],$$slots:{default:[si]},$$scope:{ctx:e}}}),{c(){Je(t.$$.fragment)},m(e,r){Qe(t,e,r),n=!0},p(e,n){const r={};262146&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(ze(t.$$.fragment,e),n=!0)},o(e){qe(t.$$.fragment,e),n=!1},d(e){Xe(t,e)}}}function ui(e){let t,n;return t=new Gr({props:{icon:"save",op:e[9],$$slots:{default:[ci]},$$scope:{ctx:e}}}),{c(){Je(t.$$.fragment)},m(e,r){Qe(t,e,r),n=!0},p(e,n){const r={};262146&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(ze(t.$$.fragment,e),n=!0)},o(e){qe(t.$$.fragment,e),n=!1},d(e){Xe(t,e)}}}function si(e){let t,n,r=e[1]("Add")+"";return{c(){t=Z("span"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("Add")+"")&&re(n,r)},d(e){e&&G(t)}}}function ci(e){let t,n,r=e[1]("Update")+"";return{c(){t=Z("span"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("Update")+"")&&re(n,r)},d(e){e&&G(t)}}}function li(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h,g=e[1]("Delete")+"",$=e[1]("This will permanently remove chat logs and other connection related data.")+"",v=e[3]('Please confirm by entering "**%1**" before hitting **%2**.',e[0],e[1]("Delete"))+"";return c=new ko({props:{name:"confirm_connection_id",form:e[4],$$slots:{label:[di]},$$scope:{ctx:e}}}),f=new Gr({props:{icon:"trash",op:e[8],disabled:e[2].confirm_connection_id!=e[0],$$slots:{default:[fi]},$$scope:{ctx:e}}}),f.$on("click",e[10]),m=new io({props:{op:e[8],success:"Deleted."}}),{c(){t=Z("h3"),n=V(g),r=J(),o=Z("p"),i=V($),a=J(),u=new le,s=J(),Je(c.$$.fragment),l=J(),d=Z("div"),Je(f.$$.fragment),p=J(),Je(m.$$.fragment),u.a=null,te(d,"class","form-actions")},m(e,g){K(e,t,g),z(t,n),K(e,r,g),K(e,o,g),z(o,i),z(o,a),u.m(v,o),K(e,s,g),Qe(c,e,g),K(e,l,g),K(e,d,g),Qe(f,d,null),K(e,p,g),Qe(m,e,g),h=!0},p(e,t){(!h||2&t)&&g!==(g=e[1]("Delete")+"")&&re(n,g),(!h||2&t)&&$!==($=e[1]("This will permanently remove chat logs and other connection related data.")+"")&&re(i,$),(!h||11&t)&&v!==(v=e[3]('Please confirm by entering "**%1**" before hitting **%2**.',e[0],e[1]("Delete"))+"")&&u.p(v);const r={};262146&t&&(r.$$scope={dirty:t,ctx:e}),c.$set(r);const o={};5&t&&(o.disabled=e[2].confirm_connection_id!=e[0]),262146&t&&(o.$$scope={dirty:t,ctx:e}),f.$set(o)},i(e){h||(ze(c.$$.fragment,e),ze(f.$$.fragment,e),ze(m.$$.fragment,e),h=!0)},o(e){qe(c.$$.fragment,e),qe(f.$$.fragment,e),qe(m.$$.fragment,e),h=!1},d(e){e&&G(t),e&&G(r),e&&G(o),e&&G(s),Xe(c,e),e&&G(l),e&&G(d),Xe(f),e&&G(p),Xe(m,e)}}}function di(e){let t,n,r=e[1]("Confirm connection ID")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("Confirm connection ID")+"")&&re(n,r)},d(e){e&&G(t)}}}function fi(e){let t,n,r=e[1]("Delete")+"";return{c(){t=Z("span"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("Delete")+"")&&re(n,r)},d(e){e&&G(t)}}}function pi(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h,g,$,v,b,y,D,w,_,E,C,k,A,x,F;n=new ko({props:{name:"host",form:e[4],placeholder:e[1]("Ex: irc.libera.chat:6697"),readonly:e[5].forced_connection,$$slots:{help:[To],label:[jo]},$$scope:{ctx:e}}}),o=new ko({props:{name:"nick",form:e[4],placeholder:e[1]("Ex: superman"),$$slots:{label:[Ro]},$$scope:{ctx:e}}}),a=new ko({props:{name:"realname",form:e[4],placeholder:e[1]("Ex: Clark Kent"),$$slots:{label:[Lo]},$$scope:{ctx:e}}});const S=[Po,Mo],O=[];function B(e,t){return"add"!=e[0]?0:1}s=B(e),c=O[s]=S[s](e),d=new Xr({props:{name:"tls",form:e[4],$$slots:{label:[Ho]},$$scope:{ctx:e}}}),p=new Xr({props:{name:"tls_verify",form:e[4],disabled:!e[2].tls,hidden:!e[2].tls,$$slots:{label:[zo]},$$scope:{ctx:e}}}),h=new Xr({props:{icon:"caret",name:"show_advanced_settings",form:e[4],$$slots:{label:[qo]},$$scope:{ctx:e}}});let N=e[2].show_advanced_settings&&Wo(e),j=!e[5].forced_connection&&function(e){let t,n,r,o;t=new Xr({props:{icon:"caret",name:"show_auth_settings",form:e[4],$$slots:{label:[Zo]},$$scope:{ctx:e}}});let i=e[2].show_auth_settings&&Vo(e);return{c(){Je(t.$$.fragment),n=J(),i&&i.c(),r=Q()},m(e,a){Qe(t,e,a),K(e,n,a),i&&i.m(e,a),K(e,r,a),o=!0},p(e,n){const o={};262146&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o),e[2].show_auth_settings?i?(i.p(e,n),4&n&&ze(i,1)):(i=Vo(e),i.c(),ze(i,1),i.m(r.parentNode,r)):i&&(Ue(),qe(i,1,1,(()=>{i=null})),He())},i(e){o||(ze(t.$$.fragment,e),ze(i),o=!0)},o(e){qe(t.$$.fragment,e),qe(i),o=!1},d(e){Xe(t,e),e&&G(n),i&&i.d(e),e&&G(r)}}}(e);const T=[ui,ai],R=[];function L(e,t){return"add"!=e[0]?0:1}y=L(e),D=R[y]=T[y](e),_=new io({props:{op:e[7]}}),C=new io({props:{op:e[9]}});let M="add"!=e[0]&&li(e);return{c(){t=Z("form"),Je(n.$$.fragment),r=J(),Je(o.$$.fragment),i=J(),Je(a.$$.fragment),u=J(),c.c(),l=J(),Je(d.$$.fragment),f=J(),Je(p.$$.fragment),m=J(),Je(h.$$.fragment),g=J(),N&&N.c(),$=J(),j&&j.c(),v=J(),b=Z("div"),D.c(),w=J(),Je(_.$$.fragment),E=J(),Je(C.$$.fragment),k=J(),M&&M.c(),te(b,"class","form-actions"),te(t,"method","post")},m(c,D){K(c,t,D),Qe(n,t,null),z(t,r),Qe(o,t,null),z(t,i),Qe(a,t,null),z(t,u),O[s].m(t,null),z(t,l),Qe(d,t,null),z(t,f),Qe(p,t,null),z(t,m),Qe(h,t,null),z(t,g),N&&N.m(t,null),z(t,$),j&&j.m(t,null),z(t,v),z(t,b),R[y].m(b,null),z(t,w),Qe(_,t,null),z(t,E),Qe(C,t,null),z(t,k),M&&M.m(t,null),A=!0,x||(F=X(t,"submit",ee(e[11])),x=!0)},p(e,[r]){const i={};2&r&&(i.placeholder=e[1]("Ex: irc.libera.chat:6697")),262146&r&&(i.$$scope={dirty:r,ctx:e}),n.$set(i);const u={};2&r&&(u.placeholder=e[1]("Ex: superman")),262146&r&&(u.$$scope={dirty:r,ctx:e}),o.$set(u);const f={};2&r&&(f.placeholder=e[1]("Ex: Clark Kent")),262146&r&&(f.$$scope={dirty:r,ctx:e}),a.$set(f);let m=s;s=B(e),s===m?O[s].p(e,r):(Ue(),qe(O[m],1,1,(()=>{O[m]=null})),He(),c=O[s],c?c.p(e,r):(c=O[s]=S[s](e),c.c()),ze(c,1),c.m(t,l));const g={};262146&r&&(g.$$scope={dirty:r,ctx:e}),d.$set(g);const v={};4&r&&(v.disabled=!e[2].tls),4&r&&(v.hidden=!e[2].tls),262146&r&&(v.$$scope={dirty:r,ctx:e}),p.$set(v);const w={};262146&r&&(w.$$scope={dirty:r,ctx:e}),h.$set(w),e[2].show_advanced_settings?N?(N.p(e,r),4&r&&ze(N,1)):(N=Wo(e),N.c(),ze(N,1),N.m(t,$)):N&&(Ue(),qe(N,1,1,(()=>{N=null})),He()),e[5].forced_connection||j.p(e,r);let _=y;y=L(e),y===_?R[y].p(e,r):(Ue(),qe(R[_],1,1,(()=>{R[_]=null})),He(),D=R[y],D?D.p(e,r):(D=R[y]=T[y](e),D.c()),ze(D,1),D.m(b,null)),"add"!=e[0]?M?(M.p(e,r),1&r&&ze(M,1)):(M=li(e),M.c(),ze(M,1),M.m(t,null)):M&&(Ue(),qe(M,1,1,(()=>{M=null})),He())},i(e){A||(ze(n.$$.fragment,e),ze(o.$$.fragment,e),ze(a.$$.fragment,e),ze(c),ze(d.$$.fragment,e),ze(p.$$.fragment,e),ze(h.$$.fragment,e),ze(N),ze(j),ze(D),ze(_.$$.fragment,e),ze(C.$$.fragment,e),ze(M),A=!0)},o(e){qe(n.$$.fragment,e),qe(o.$$.fragment,e),qe(a.$$.fragment,e),qe(c),qe(d.$$.fragment,e),qe(p.$$.fragment,e),qe(h.$$.fragment,e),qe(N),qe(j),qe(D),qe(_.$$.fragment,e),qe(C.$$.fragment,e),qe(M),A=!1},d(e){e&&G(t),Xe(n),Xe(o),Xe(a),O[s].d(),Xe(d),Xe(p),Xe(h),N&&N.d(),j&&j.d(),R[y].d(),Xe(_),Xe(C),M&&M.d(),x=!1,F()}}}function mi(e,t,n){let r,o,i,a;F(e,ar,(e=>n(1,o=e))),F(e,ur,(e=>n(3,a=e)));let{id:u="add"}=t,{is_page:s=!1}=t;const c=De("api"),l=No();F(e,l,(e=>n(2,i=e)));const d=De("user");F(e,d,(e=>n(14,r=e)));const f=c("createConnection"),p=c("removeConnection"),m=c("updateConnection");let h={};function g(e){const t=e.url?e.url.toFields():{};Zt.array(e.on_connect_commands)&&(t.on_connect_commands=e.on_connect_commands.join("\n")),t.nick||(t.nick=d.email.replace(/@.*/,"").replace(/\W/g,"_")),t.want_to_be_connected="disconnected"!=e.wanted_state,l.set(t),l.set({fingerprint:e.certificate.fingerprint||""})}return ve((()=>{h="add"==u?{}:r.findConversation({connection_id:u})||{},h.connection_id?g(h):function(){const e=new eo(Hn.query.uri||d.default_connection||"irc://localhost").toFields();e.want_to_be_connected=!0,d.connections.size&&!Hn.query.uri&&(e.host="");e.nick||(e.nick=d.email.replace(/@.*/,"").replace(/\W/g,"_"));l.set(e)}()})),e.$$set=e=>{"id"in e&&n(0,u=e.id),"is_page"in e&&n(12,s=e.is_page)},[u,o,i,a,l,d,[["none","None"],["plain","Plain"],["external","External"]],f,p,m,async function(){await p.perform(h),d.removeConversation(h),Hn.go("/settings/connections")},async function(){const e=l.get();if(e.on_connect_commands=(e.on_connect_commands||"").split(/\n\r?/).filter((e=>e.length)),e.url=new eo("irc://localhost").fromFields(e).toString(),h.connection_id)e.connection_id=h.connection_id,e.wanted_state=e.want_to_be_connected?"connected":"disconnected",await m.perform(e),h=d.ensureConversation(m.res.body),g(h);else{await f.perform(e);const t=f.res.body;t.connection_id&&Hn.go(d.ensureConversation(t).path)}s&&Hn.go("/settings/connections")},s]}class hi extends nt{constructor(e){super(),tt(this,e,mi,pi,k,{id:0,is_page:12})}}function gi(e){let t,n,r=e[4]("Currently connecting to %1.",e[3])+"";return{c(){t=Z("p"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){24&t&&r!==(r=e[4]("Currently connecting to %1.",e[3])+"")&&re(n,r)},d(e){e&&G(t)}}}function $i(e){let t,n,r=e[4]("Currently connected to %1.",e[3])+"";return{c(){t=Z("p"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){24&t&&r!==(r=e[4]("Currently connected to %1.",e[3])+"")&&re(n,r)},d(e){e&&G(t)}}}function vi(e){let t,n,r=e[4]("Currently disconnected from %1.",e[3])+"";return{c(){t=Z("p"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){24&t&&r!==(r=e[4]("Currently disconnected from %1.",e[3])+"")&&re(n,r)},d(e){e&&G(t)}}}function bi(e){let t,n,r=e[4]("Connection not found.")+"";return{c(){t=Z("p"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){16&t&&r!==(r=e[4]("Connection not found.")+"")&&re(n,r)},d(e){e&&G(t)}}}function yi(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h=e[4]("Connection")+"";function g(e,t){return e[2].url?"disconnected"==e[2].state?vi:"connected"==e[2].state?$i:gi:bi}u=new ct({props:{name:"times"}});let $=g(e),v=$(e);return l=new hi({props:{id:e[0].connection_id}}),{c(){t=Z("div"),n=Z("div"),r=Z("h2"),o=V(h),i=J(),a=Z("a"),Je(u.$$.fragment),s=J(),v.c(),c=J(),Je(l.$$.fragment),te(a,"href","#settings"),te(a,"class","btn-hallow is-active"),te(n,"class","sidebar-header"),te(t,"class","sidebar-left")},m(e,d){K(e,t,d),z(t,n),z(n,r),z(r,o),z(n,i),z(n,a),Qe(u,a,null),z(t,s),v.m(t,null),z(t,c),Qe(l,t,null),f=!0,p||(m=X(a,"click",gt.toggle),p=!0)},p(n,[r]){e=n,(!f||16&r)&&h!==(h=e[4]("Connection")+"")&&re(o,h),$===($=g(e))&&v?v.p(e,r):(v.d(1),v=$(e),v&&(v.c(),v.m(t,c)));const i={};1&r&&(i.id=e[0].connection_id),l.$set(i)},i(n){f||(ze(u.$$.fragment,n),ze(l.$$.fragment,n),Oe((()=>{d||(d=Ke(t,Nr,e[1],!0)),d.run(1)})),f=!0)},o(n){qe(u.$$.fragment,n),qe(l.$$.fragment,n),d||(d=Ke(t,Nr,e[1],!1)),d.run(0),f=!1},d(e){e&&G(t),Xe(u),v.d(),Xe(l),e&&d&&d.end(),p=!1,m()}}}function Di(e,t,n){let r,o;F(e,ar,(e=>n(4,o=e)));let{conversation:i={}}=t,{transition:a}=t;const u=De("user");let s={};return ve((async()=>{n(2,s=u.findConversation({connection_id:i.connection_id})||{})})),e.$$set=e=>{"conversation"in e&&n(0,i=e.conversation),"transition"in e&&n(1,a=e.transition)},e.$$.update=()=>{4&e.$$.dirty&&n(3,r=s.real_host||s.url&&s.url.host)},[i,a,s,r,o]}class wi extends nt{constructor(e){super(),tt(this,e,Di,yi,k,{conversation:0,transition:1})}}function _i(e){let t,n,r,o;const i=e[9].default,a=S(i,e,e[8],null);return{c(){t=Z("a"),a&&a.c(),te(t,"href",e[2]),te(t,"class",e[0]),te(t,"style",e[1]),ue(t,"has-path",e[4])},m(i,u){K(i,t,u),a&&a.m(t,null),e[11](t),n=!0,r||(o=X(t,"click",e[10]),r=!0)},p(e,[r]){a&&a.p&&(!n||256&r)&&N(a,i,e,e[8],n?B(i,e[8],r,null):j(e[8]),null),(!n||4&r)&&te(t,"href",e[2]),(!n||1&r)&&te(t,"class",e[0]),(!n||2&r)&&te(t,"style",e[1]),17&r&&ue(t,"has-path",e[4])},i(e){n||(ze(a,e),n=!0)},o(e){qe(a,e),n=!1},d(n){n&&G(t),a&&a.d(n),e[11](null),r=!1,o()}}}function Ei(e,t,n){let r,o,i;F(e,Hn,(e=>n(7,i=e)));let a,{$$slots:u={},$$scope:s}=t,{class:c=""}=t,{href:l="/"}=t,{style:d=""}=t;return e.$$set=e=>{"class"in e&&n(0,c=e.class),"href"in e&&n(5,l=e.href),"style"in e&&n(1,d=e.style),"$$scope"in e&&n(8,s=e.$$scope)},e.$$.update=()=>{160&e.$$.dirty&&n(2,r=0==l.indexOf("/")?i.basePath+l:l),132&e.$$.dirty&&n(4,o=i.basePath+i.path==r.replace(/(#|\?).*/,""))},[c,d,r,a,o,l,()=>a.focus(),i,s,u,function(t){we.call(this,e,t)},function(e){Ee[e?"unshift":"push"]((()=>{a=e,n(3,a)}))}]}class Ci extends nt{constructor(e){super(),tt(this,e,Ei,_i,k,{class:0,href:5,style:1,focus:6})}get focus(){return this.$$.ctx[6]}}var ki={b:"channel_ban",C:"ctcp_block",c:"colour_filter",e:"ban_exemption",F:"enable_forwarding",f:"forward",g:"free_invite",i:"invite_only",I:"invite_exemption",j:"join_throttle",k:"password",l:"join_limit",L:"large_ban_list",m:"moderated",M:"login_to_talk",n:"prevent_external_send",P:"permanent",p:"privat",Q:"block_forwarded_users",q:"quiet",r:"block_unidentified",R:"login_to_join",s:"secret",S:"secure_connection_only",t:"topic_protection"};function Ai(e){return ki[e]?ki[e]:Object.keys(ki).filter((function(t){return e==ki[t]}))[0]||""}var xi={a:"admin",B:"bot",h:"half_operator",i:"invisible",I:"whois_hide_online",o:"operator",p:"whois_hide_channels",R:"privmsg_from_registered_only",r:"registered",S:"service_bot",T:"ctcp_block",t:"vhost",v:"voice",W:"whois_notifications",x:"cloaked_hostname",z:"secure_connection",Z:"secure_connection_only"};function Fi(e,t,n){const r=e.slice();return r[22]=t[n],r}function Si(e,t,n){const r=e.slice();return r[25]=t[n],r}function Oi(e){let t,n=e[8]("You are not a channel operator in %1.",e[0].name)+"";return{c(){t=V(n)},m(e,n){K(e,t,n)},p(e,r){257&r&&n!==(n=e[8]("You are not a channel operator in %1.",e[0].name)+"")&&re(t,n)},d(e){e&&G(t)}}}function Bi(e){let t,n=e[8]("You are channel operator in %1.",e[0].name)+"";return{c(){t=V(n)},m(e,n){K(e,t,n)},p(e,r){257&r&&n!==(n=e[8]("You are channel operator in %1.",e[0].name)+"")&&re(t,n)},d(e){e&&G(t)}}}function Ni(e){let t,n,r,o,i,a,u,s,c=e[10](...yr(e[9]))+"",l=e[8]("Update information")+"";return{c(){t=Z("span"),n=J(),r=Z("br"),o=Z("small"),i=Z("a"),a=V(l),ue(t,"fade-in",e[9].loading),te(i,"href","#update")},m(l,d){K(l,t,d),t.innerHTML=c,K(l,n,d),K(l,r,d),K(l,o,d),z(o,i),z(i,a),u||(s=X(i,"click",ee(e[18])),u=!0)},p(e,n){1536&n&&c!==(c=e[10](...yr(e[9]))+"")&&(t.innerHTML=c),512&n&&ue(t,"fade-in",e[9].loading),256&n&&l!==(l=e[8]("Update information")+"")&&re(a,l)},d(e){e&&G(t),e&&G(n),e&&G(r),e&&G(o),u=!1,s()}}}function ji(e){let t,n=e[8]("Conversation with %1 is frozen. Reason: %2",e[0].name,e[8](e[0].frozen))+"";return{c(){t=V(n)},m(e,n){K(e,t,n)},p(e,r){257&r&&n!==(n=e[8]("Conversation with %1 is frozen. Reason: %2",e[0].name,e[8](e[0].frozen))+"")&&re(t,n)},d(e){e&&G(t)}}}function Ti(e){let t,n,r,o;const i=[Li,Ri],a=[];function u(e,t){return e[5]||!e[4].modes.topic_protection?0:1}return t=u(e),n=a[t]=i[t](e),{c(){n.c(),r=Q()},m(e,n){a[t].m(e,n),K(e,r,n),o=!0},p(e,o){let s=t;t=u(e),t===s?a[t].p(e,o):(Ue(),qe(a[s],1,1,(()=>{a[s]=null})),He(),n=a[t],n?n.p(e,o):(n=a[t]=i[t](e),n.c()),ze(n,1),n.m(r.parentNode,r))},i(e){o||(ze(n),o=!0)},o(e){qe(n),o=!1},d(e){a[t].d(e),e&&G(r)}}}function Ri(e){let t,n,r,o,i,a=e[8]("Topic")+"",u=e[10](e[0].topic||"No topic is set.")+"";return{c(){t=Z("div"),n=Z("label"),r=V(a),o=J(),i=Z("div"),te(n,"for","nothing"),te(i,"class","input"),te(t,"class","text-field")},m(e,a){K(e,t,a),z(t,n),z(n,r),z(t,o),z(t,i),i.innerHTML=u},p(e,t){256&t&&a!==(a=e[8]("Topic")+"")&&re(r,a),1025&t&&u!==(u=e[10](e[0].topic||"No topic is set.")+"")&&(i.innerHTML=u)},i:y,o:y,d(e){e&&G(t)}}}function Li(e){let t,n;return t=new vo({props:{name:"topic",form:e[12],placeholder:e[8]("No topic is set."),$$slots:{label:[Mi]},$$scope:{ctx:e}}}),{c(){Je(t.$$.fragment)},m(e,r){Qe(t,e,r),n=!0},p(e,n){const r={};256&n&&(r.placeholder=e[8]("No topic is set.")),268435712&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(ze(t.$$.fragment,e),n=!0)},o(e){qe(t.$$.fragment,e),n=!1},d(e){Xe(t,e)}}}function Mi(e){let t,n,r=e[8]("Topic")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){256&t&&r!==(r=e[8]("Topic")+"")&&re(n,r)},d(e){e&&G(t)}}}function Pi(e){let t,n;return t=new Xr({props:{name:"want_notifications",form:e[12],$$slots:{label:[Ii]},$$scope:{ctx:e}}}),{c(){Je(t.$$.fragment)},m(e,r){Qe(t,e,r),n=!0},p(e,n){const r={};268435712&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(ze(t.$$.fragment,e),n=!0)},o(e){qe(t.$$.fragment,e),n=!1},d(e){Xe(t,e)}}}function Ii(e){let t,n,r=e[8]("Notify me on new messages")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){256&t&&r!==(r=e[8]("Notify me on new messages")+"")&&re(n,r)},d(e){e&&G(t)}}}function Ui(e){let t,n,r=e[8]("Show raw messages")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){256&t&&r!==(r=e[8]("Show raw messages")+"")&&re(n,r)},d(e){e&&G(t)}}}function Hi(e){let t,n,r,o,i,a,u=e[8]("Conversation modes")+"",s=e[15],c=[];for(let t=0;t<s.length;t+=1)c[t]=Ki(Si(e,s,t));const l=e=>qe(c[e],1,1,(()=>{c[e]=null}));let d=!e[5]&&Gi(e);return{c(){t=Z("nav"),n=Z("h3"),r=V(u),o=J();for(let e=0;e<c.length;e+=1)c[e].c();i=J(),d&&d.c(),te(t,"class","sidebar-left__nav")},m(e,u){K(e,t,u),z(t,n),z(n,r),z(t,o);for(let e=0;e<c.length;e+=1)c[e].m(t,null);z(t,i),d&&d.m(t,null),a=!0},p(e,n){if((!a||256&n)&&u!==(u=e[8]("Conversation modes")+"")&&re(r,u),37156&n){let r;for(s=e[15],r=0;r<s.length;r+=1){const o=Si(e,s,r);c[r]?(c[r].p(o,n),ze(c[r],1)):(c[r]=Ki(o),c[r].c(),ze(c[r],1),c[r].m(t,i))}for(Ue(),r=s.length;r<c.length;r+=1)l(r);He()}e[5]?d&&(d.d(1),d=null):d?d.p(e,n):(d=Gi(e),d.c(),d.m(t,null))},i(e){if(!a){for(let e=0;e<s.length;e+=1)ze(c[e]);a=!0}},o(e){c=c.filter(Boolean);for(let e=0;e<c.length;e+=1)qe(c[e]);a=!1},d(e){e&&G(t),Y(c,e),d&&d.d()}}}function zi(e){let t,n,r,o,i,a,u=e[8](un(e[25].replace(/_/g," ")))+"",s=e[2]["mode_"+e[25]]?"+":"-",c=Ai(e[25])+"";return{c(){t=Z("span"),n=V(u),r=J(),o=Z("b"),i=V(s),a=V(c),te(o,"class","badge"),te(t,"slot","label")},m(e,u){K(e,t,u),z(t,n),z(t,r),z(t,o),z(o,i),z(o,a)},p(e,t){256&t&&u!==(u=e[8](un(e[25].replace(/_/g," ")))+"")&&re(n,u),4&t&&s!==(s=e[2]["mode_"+e[25]]?"+":"-")&&re(i,s)},d(e){e&&G(t)}}}function qi(e){let t,n;return t=new ko({props:{type:"password",name:"password",form:e[12],$$slots:{label:[Wi]},$$scope:{ctx:e}}}),{c(){Je(t.$$.fragment)},m(e,r){Qe(t,e,r),n=!0},p(e,n){const r={};268435712&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(ze(t.$$.fragment,e),n=!0)},o(e){qe(t.$$.fragment,e),n=!1},d(e){Xe(t,e)}}}function Wi(e){let t,n,r=e[8]("Password")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){256&t&&r!==(r=e[8]("Password")+"")&&re(n,r)},d(e){e&&G(t)}}}function Ki(e){let t,n,r,o;t=new Xr({props:{badge:!0,name:"mode_"+e[25],form:e[12],disabled:!e[5],$$slots:{label:[zi]},$$scope:{ctx:e}}});let i="password"==e[25]&&e[2].mode_password&&qi(e);return{c(){Je(t.$$.fragment),n=J(),i&&i.c(),r=Q()},m(e,a){Qe(t,e,a),K(e,n,a),i&&i.m(e,a),K(e,r,a),o=!0},p(e,n){const o={};32&n&&(o.disabled=!e[5]),268435716&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o),"password"==e[25]&&e[2].mode_password?i?(i.p(e,n),4&n&&ze(i,1)):(i=qi(e),i.c(),ze(i,1),i.m(r.parentNode,r)):i&&(Ue(),qe(i,1,1,(()=>{i=null})),He())},i(e){o||(ze(t.$$.fragment,e),ze(i),o=!0)},o(e){qe(t.$$.fragment,e),qe(i),o=!1},d(e){Xe(t,e),e&&G(n),i&&i.d(e),e&&G(r)}}}function Gi(e){let t,n,r,o=e[8]("Only operators can change modes.")+"";return{c(){t=Z("p"),n=Z("i"),r=V(o)},m(e,o){K(e,t,o),z(t,n),z(n,r)},p(e,t){256&t&&o!==(o=e[8]("Only operators can change modes.")+"")&&re(r,o)},d(e){e&&G(t)}}}function Yi(e){let t,n,r=e[8]("Save")+"";return{c(){t=Z("span"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){256&t&&r!==(r=e[8]("Save")+"")&&re(n,r)},d(e){e&&G(t)}}}function Zi(e){let t,n,r=e[8]("Leave")+"";return{c(){t=Z("span"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){256&t&&r!==(r=e[8]("Leave")+"")&&re(n,r)},d(e){e&&G(t)}}}function Vi(e){let t,n,r,o,i,a=e[8]("Participants (%1)",e[3].length)+"",u=e[3].toArray(),s=[];for(let t=0;t<u.length;t+=1)s[t]=Qi(Fi(e,u,t));const c=e=>qe(s[e],1,1,(()=>{s[e]=null}));return{c(){t=Z("nav"),n=Z("h3"),r=V(a),o=J();for(let e=0;e<s.length;e+=1)s[e].c();te(t,"class","sidebar-left__nav")},m(e,a){K(e,t,a),z(t,n),z(n,r),z(t,o);for(let e=0;e<s.length;e+=1)s[e].m(t,null);i=!0},p(e,n){if((!i||264&n)&&a!==(a=e[8]("Participants (%1)",e[3].length)+"")&&re(r,a),9&n){let r;for(u=e[3].toArray(),r=0;r<u.length;r+=1){const o=Fi(e,u,r);s[r]?(s[r].p(o,n),ze(s[r],1)):(s[r]=Qi(o),s[r].c(),ze(s[r],1),s[r].m(t,null))}for(Ue(),r=u.length;r<s.length;r+=1)c(r);He()}},i(e){if(!i){for(let e=0;e<u.length;e+=1)ze(s[e]);i=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)qe(s[e]);i=!1},d(e){e&&G(t),Y(s,e)}}}function Ji(e){let t,n,r,o=e[22].nick+"";return{c(){t=Z("div"),n=V(o),r=J()},m(e,o){K(e,t,o),z(t,n),K(e,r,o)},p(e,t){8&t&&o!==(o=e[22].nick+"")&&re(n,o)},d(e){e&&G(t),e&&G(r)}}}function Qi(e){let t,n;return t=new Ci({props:{href:"/chat/"+e[0].connection_id+"/"+e[22].id,class:"participant "+Jt(e[22].modes),$$slots:{default:[Ji]},$$scope:{ctx:e}}}),{c(){Je(t.$$.fragment)},m(e,r){Qe(t,e,r),n=!0},p(e,n){const r={};9&n&&(r.href="/chat/"+e[0].connection_id+"/"+e[22].id),8&n&&(r.class="participant "+Jt(e[22].modes)),268435464&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(ze(t.$$.fragment,e),n=!0)},o(e){qe(t.$$.fragment,e),n=!1},d(e){Xe(t,e)}}}function Xi(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h,g,$,v,b,y,D,w,_,C,k,A,x,F=e[8]("Conversation")+"",S=e[0].hasOwnProperty("wantNotifications");function O(e,t){return e[0].frozen?ji:e[6]?Ni:e[5]?Bi:Oi}u=new ct({props:{name:"times"}});let B=O(e),N=B(e),j=!e[6]&&Ti(e),T=S&&Pi(e);m=new Xr({props:{name:"raw_messages",form:e[12],$$slots:{label:[Ui]},$$scope:{ctx:e}}});let R=!e[6]&&Hi(e);v=new Gr({props:{icon:"save",$$slots:{default:[Yi]},$$scope:{ctx:e}}}),y=new Gr({props:{type:"button",icon:"sign-out-alt",$$slots:{default:[Zi]},$$scope:{ctx:e}}}),y.$on("click",e[16]),w=new io({props:{op:e[14]}});let L=!e[0].frozen&&e[11].nColumns<3&&Vi(e);return{c(){t=Z("div"),n=Z("div"),r=Z("h2"),o=V(F),i=J(),a=Z("a"),Je(u.$$.fragment),s=J(),c=Z("p"),N.c(),l=J(),d=Z("form"),j&&j.c(),f=J(),T&&T.c(),p=J(),Je(m.$$.fragment),h=J(),R&&R.c(),g=J(),$=Z("div"),Je(v.$$.fragment),b=J(),Je(y.$$.fragment),D=J(),Je(w.$$.fragment),_=J(),L&&L.c(),te(a,"href","#settings"),te(a,"class","btn-hallow is-active"),te(n,"class","sidebar-header"),te($,"class","form-actions"),te(d,"method","post"),te(t,"class","sidebar-left")},m(E,C){K(E,t,C),z(t,n),z(n,r),z(r,o),z(n,i),z(n,a),Qe(u,a,null),z(t,s),z(t,c),N.m(c,null),z(t,l),z(t,d),j&&j.m(d,null),z(d,f),T&&T.m(d,null),z(d,p),Qe(m,d,null),z(d,h),R&&R.m(d,null),z(d,g),z(d,$),Qe(v,$,null),z($,b),Qe(y,$,null),z(d,D),Qe(w,d,null),z(t,_),L&&L.m(t,null),k=!0,A||(x=[X(a,"click",gt.toggle),X(d,"submit",ee(e[17]))],A=!0)},p(n,[r]){e=n,(!k||256&r)&&F!==(F=e[8]("Conversation")+"")&&re(o,F),B===(B=O(e))&&N?N.p(e,r):(N.d(1),N=B(e),N&&(N.c(),N.m(c,null))),e[6]?j&&(Ue(),qe(j,1,1,(()=>{j=null})),He()):j?(j.p(e,r),64&r&&ze(j,1)):(j=Ti(e),j.c(),ze(j,1),j.m(d,f)),1&r&&(S=e[0].hasOwnProperty("wantNotifications")),S?T?(T.p(e,r),1&r&&ze(T,1)):(T=Pi(e),T.c(),ze(T,1),T.m(d,p)):T&&(Ue(),qe(T,1,1,(()=>{T=null})),He());const i={};268435712&r&&(i.$$scope={dirty:r,ctx:e}),m.$set(i),e[6]?R&&(Ue(),qe(R,1,1,(()=>{R=null})),He()):R?(R.p(e,r),64&r&&ze(R,1)):(R=Hi(e),R.c(),ze(R,1),R.m(d,g));const a={};268435712&r&&(a.$$scope={dirty:r,ctx:e}),v.$set(a);const u={};268435712&r&&(u.$$scope={dirty:r,ctx:e}),y.$set(u),!e[0].frozen&&e[11].nColumns<3?L?(L.p(e,r),2049&r&&ze(L,1)):(L=Vi(e),L.c(),ze(L,1),L.m(t,null)):L&&(Ue(),qe(L,1,1,(()=>{L=null})),He())},i(n){k||(ze(u.$$.fragment,n),ze(j),ze(T),ze(m.$$.fragment,n),ze(R),ze(v.$$.fragment,n),ze(y.$$.fragment,n),ze(w.$$.fragment,n),ze(L),Oe((()=>{C||(C=Ke(t,Nr,e[1],!0)),C.run(1)})),k=!0)},o(n){qe(u.$$.fragment,n),qe(j),qe(T),qe(m.$$.fragment,n),qe(R),qe(v.$$.fragment,n),qe(y.$$.fragment,n),qe(w.$$.fragment,n),qe(L),C||(C=Ke(t,Nr,e[1],!1)),C.run(0),k=!1},d(e){e&&G(t),Xe(u),N.d(),j&&j.d(),T&&T.d(),Xe(m),R&&R.d(),Xe(v),Xe(y),Xe(w),L&&L.d(),e&&C&&C.end(),A=!1,E(x)}}}function ea(e,t,n){let r,o,i,a,u,s,c,l,d,f,p,m=y,h=y,g=()=>(h(),h=A($,(e=>n(4,c=e))),$);F(e,gt,(e=>n(19,a=e))),F(e,ar,(e=>n(8,l=e))),F(e,ur,(e=>n(10,f=e))),F(e,$t,(e=>n(11,p=e))),e.$$.on_destroy.push((()=>m())),e.$$.on_destroy.push((()=>h()));let{conversation:$}=t;g();let{transition:v}=t;const b=No({password:""});F(e,b,(e=>n(2,u=e)));const D=No({});F(e,D,(e=>n(9,d=e)));const w=new Gn({api:!1,id:"saveConversationSettings"}),_=["invite_only","moderated","password","prevent_external_send","topic_protection"];return ve((async()=>{b.set({topic:$.topic,want_notifications:$.wantNotifications}),D.set($.info),0!=Object.keys($.modes).length||o||await new Promise((e=>$.send("/mode",e))),await Se();const e={};for(const t of _)e["mode_"+t]=$.modes[t]||!1;b.set(e)})),e.$$set=e=>{"conversation"in e&&g(n(0,$=e.conversation)),"transition"in e&&n(1,v=e.transition)},e.$$.update=()=>{16&e.$$.dirty&&(n(7,r=c.participants),m(),m=A(r,(e=>n(3,s=e)))),16&e.$$.dirty&&n(6,o=c.is("private")),8&e.$$.dirty&&n(5,i=s.me().modes.operator),5&e.$$.dirty&&$.messages.update({raw:u.raw_messages})},[$,v,u,s,c,i,o,r,l,d,f,p,b,D,w,_,function(){$.send("/part",(e=>!e.errrors&&T(gt,a="",a)))},async function(){w.update({status:"loading"}),await w.on("update"),$.update({wantNotifications:b.get("want_notifications")||!1}),function(){const e=[];for(const t of _){const n=b.get("mode_"+t)||!1;if("password"==t&&n){const e=b.get("password");e&&$.send(i?"/mode +k "+e:"/join "+$.name+" "+e),b.set({password:""})}else n!=($.modes[t]||!1)&&e.push((n?"+":"-")+Ai(t))}i&&e.length&&$.send("/mode "+e.join(""))}(),(i||!$.modes.topic_protection)&&b.get("topic")!=$.topic&&$.send("/topic "+b.get("topic")),await Se(),w.update({status:"success"})},function(){D.get("loading")||(D.set({loading:!0}),$.send("/whois "+$.name,(e=>{e.stopPropagation(),setTimeout((()=>D.set({loading:!1})),1e3),D.set(e)})))}]}class ta extends nt{constructor(e){super(),tt(this,e,ea,Xi,k,{conversation:0,transition:1})}}var na=function(){function e(){var t=this;$(this,e),this.dragAndDropEvents={drag:this._preventDefault.bind(this),dragend:this.stop.bind(this),dragenter:this.start.bind(this),dragleave:this.stop.bind(this),dragover:this.start.bind(this),dragstart:this._preventDefault.bind(this),drop:this.drop.bind(this)},this.pasteEvents={paste:this.paste.bind(this)},this.dropIndicatorEl=document.createElement("div"),this.dropIndicatorEl.className="drop-area hidden",this.removeDragOverDebounced=Wt((function(){return t._removeDragOver()}),100)}return b(e,[{key:"attach",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;this.dropEl=e,this.uploader=t,this.targetEl=r,Object.keys(this.dragAndDropEvents).forEach((function(e){r.addEventListener(e,n.dragAndDropEvents[e])})),Object.keys(this.pasteEvents).forEach((function(e){document.addEventListener(e,n.pasteEvents[e])}))}},{key:"detach",value:function(){var e=this;Object.keys(this.dragAndDropEvents).forEach((function(t){e.targetEl.removeEventListener(t,e.dragAndDropEvents[t])})),Object.keys(this.pasteEvents).forEach((function(t){document.removeEventListener(t,e.pasteEvents[t])}))}},{key:"drop",value:function(e){this.stop(e),this.uploader&&this.uploader(e)}},{key:"paste",value:function(e){var t=(e.clipboardData||e.originalEvent.clipboardData).items;if(this.uploader)for(var n=0;n<t.length;n++)if("file"==t[n].kind)return this.uploader({dataTransfer:{files:[t[n].getAsFile()]}})}},{key:"stop",value:function(e){this._preventDefault(e),this.removeDragOverDebounced()}},{key:"start",value:function(e){if(this.dropEl){this._preventDefault(e);var t=this.dropIndicatorEl.style;t.height=this.dropEl.offsetHeight+"px",t.width=this.dropEl.offsetWidth+"px",t.top=this.dropEl.offsetTop+"px",t.left=this.dropEl.offsetLeft+"px",this.dropIndicatorEl.classList.remove("hidden"),this.dropEl.parentNode.appendChild(this.dropIndicatorEl)}}},{key:"_preventDefault",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"_removeDragOver",value:function(){this.dropIndicatorEl.classList.add("hidden")}}]),e}();function ra(e){let t,n,r,o,i,a,u;const s=e[6].default,c=S(s,e,e[5],null);return{c(){t=Z("main"),n=Z("div"),c&&c.c(),Oe((()=>e[7].call(n))),te(t,"class",o=e[1].join(" "))},m(o,s){K(o,t,s),z(t,n),c&&c.m(n,null),r=function(e,t){"static"===getComputedStyle(e).position&&(e.style.position="relative");var n=Z("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;var r,o=ae();return o?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=X(window,"message",(function(e){e.source===n.contentWindow&&t()}))):(n.src="about:blank",n.onload=function(){r=X(n.contentWindow,"resize",t)}),z(e,n),function(){(o||r&&n.contentWindow)&&r(),G(n)}}(n,e[7].bind(n)),i=!0,a||(u=R(e[2].call(null,t)),a=!0)},p(e,[n]){c&&c.p&&(!i||32&n)&&N(c,s,e,e[5],i?B(s,e[5],n,null):j(e[5]),null),(!i||2&n&&o!==(o=e[1].join(" ")))&&te(t,"class",o)},i(e){i||(ze(c,e),i=!0)},o(e){qe(c,e),i=!1},d(e){e&&G(t),c&&c.d(e),r(),a=!1,u()}}}function oa(e,t,n){let r,{$$slots:o={},$$scope:i}=t;const a=(u=$e(),function(e,t){var n=u.$$.callbacks[e];if(n){var r=se(e,t);n.slice().forEach((function(e){e.call(u,r)}))}});var u;const s={scrollDelay:80,scrollOffset:80,scrollTop:0,visibleEls:[]};let{class:c=""}=t,d=Date.now(),f=0,{pos:p="top"}=t;function m(){const e=s.infinityEl;if(!e)return;n(3,p=e.scrollTop>f-e.offsetHeight-s.scrollOffset?"bottom":e.scrollTop<s.scrollOffset?"top":"middle"),s.pos=p,s.scrollHeightChanged=s.scrollHeight!=f,s.scrollHeight=f,s.visibleElsChanged=!1;const t=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n=l(e.childNodes),r=[],o=0;o<n.length;)n[o].nodeType==Node.ELEMENT_NODE?(r.push([o,n[o]]),o++):n.splice(o,1);if(!n.length)return[];for(var i=t.scrollTop;r.length>1;){var a=Math.floor(r.length/2);r[a][1].offsetTop<=i?r.splice(0,a):r.splice(a)}r.length||r.push([0,n[0]]);for(var u=t.offsetHeight,s=r[0][0],c=s;c<n.length&&!(n[c].offsetTop>i+u);)c++;return n.slice(s,c).filter((function(e){return!e.getAttribute("aria-hidden")}))}(e.firstElementChild,e);t.length==s.visibleEls.length&&t[0]==s.visibleEls[0]||(s.visibleEls=t,s.visibleElsChanged=!0),(s.scrollHeightChanged||s.visibleElsChanged)&&a("visibility",s),s.scrollHeightChanged&&a("rendered",s)}function h(e){return!Zt.undefined(e)&&(-1==e&&(e=f),Zt.string(e)&&(e=s.infinityEl.querySelector(e)),e&&e.tagName&&(e=e.offsetTop),!Zt.undefined(e)&&(!(e<0)&&(d=Date.now(),s.infinityEl.scrollTop=e,s.scrollTop=s.infinityEl.scrollTop,!0)))}return e.$$set=e=>{"class"in e&&n(4,c=e.class),"pos"in e&&n(3,p=e.pos),"$$scope"in e&&n(5,i=e.$$scope)},e.$$.update=()=>{24&e.$$.dirty&&n(1,r=[c||"infinity-scroll"].concat(["has-pos-"+p])),1&e.$$.dirty&&f&&m()},[f,r,function(e){s.infinityEl=e,s.scrollTo=h,e.addEventListener("scroll",(()=>function(e){s.scrollTid&&clearTimeout(s.scrollTid);s.scrollTid=setTimeout((()=>function(e){d+500>Date.now()?(Math.abs(e.scrollTop-s.scrollTop)>40&&(e.scrollTop=s.scrollTop),s.scrollTid&&clearTimeout(s.scrollTid),m()):(s.scrollTop=e.scrollTop,m(),a("scrolled",s))}(e)),s.scrollDelay)}(e))),m()},p,c,i,o,function(){f=this.offsetHeight,n(0,f)}]}class ia extends nt{constructor(e){super(),tt(this,e,oa,ra,k,{class:4,pos:3})}}function aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ua(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aa(Object(n),!0).forEach((function(t){_t(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return g(this,r)}}var ca=function(e){p(n,e);var t=sa(n);function n(){var e;return $(this,n),(e=t.call(this)).Notification=window.Notification||{permission:"denied"},e.prop("persist","volume",0),e.prop("persist","notificationCloseDelay",5e3),e.prop("persist","wantNotifications",!!e.Notification.requestPermission&&null),e.prop("ro","appHasFocus",(function(){return document.hasFocus()})),e.prop("ro","volumeOptions",[["0","Muted"],["25","Low"],["50","Medium"],["100","Max"]]),e.prop("rw","desktopAccess",e.Notification.permission),e}return b(n,[{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=document.getElementById("audio_notification");t&&(t.muted=!1,t.volume=parseInt(e.volume,10)/100,t.play())}},{key:"requestDesktopAccess",value:function(){var e=this;return this.Notification.requestPermission?(this.Notification.requestPermission((function(t){return e.update({desktopAccess:t})})),this):this.update({desktopAccess:this.Notification.permission})}},{key:"show",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.title||(n.title=document.title),!this.wantNotifications)return this._showInConsole(e,n);if(this.volume&&this.play(),"granted"!=this.desktopAccess)return this.showInApp(e,n);var r=new Notification(n.title,ua(ua({},n),{},{body:e}));return r.onclick=function(e){return t._onClick(e,r,n)},setTimeout((function(){return r.close()}),this.notificationCloseDelay),r}},{key:"showInApp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.title||(t.title=document.title);var n=document.createElement("div"),r=ua(ua({},t),{},{body:e,close:function(){n.remove(),r.closed=!0},target:"app"});return n.className="notify-notification fade-in",n.innerHTML='<a href="#close" class="notify-notification__close"></a><h6 class="notify-notification__title"></h6><div class="notify-notification__content"></div>',n.querySelector("a").addEventListener("click",(function(e){e.preventDefault(),r.close()})),n.querySelector("h6").textContent=t.title,n.querySelector("div").textContent=e,-1==t.closeAfter?n.querySelector("a").remove():setTimeout((function(){return r.close()}),t.closeAfter||this.notificationCloseDelay),setTimeout((function(){return n.classList.add("is-visible")}),1),document.body.appendChild(n),r}},{key:"_onClick",value:function(e,t,n){t.close(),window.focus(),this.emit("click",ua(ua({},n),{},{sourceEvent:e}))}},{key:"_showInConsole",value:function(e,t){return console.info("[Notify]",e,t),ua(ua({},t),{},{body:e,close:function(){},target:"console"})}}]),n}(fn),la=new ca;function da(e,t,n){const r=e.slice();return r[40]=t[n],r}function fa(e,t,n){const r=e.slice();return r[43]=t[n],r[45]=n,r}function pa(e,t,n){const r=e.slice();return r[46]=t[n],r}function ma(e){let t,n,r,o,i,a,u;return n=new ct({props:{name:"users-cog"}}),o=new ct({props:{name:"times"}}),{c(){t=Z("a"),Je(n.$$.fragment),r=J(),Je(o.$$.fragment),te(t,"href","#settings"),te(t,"class","btn-hallow"),ue(t,"is-active","settings"==e[17])},m(e,s){K(e,t,s),Qe(n,t,null),z(t,r),Qe(o,t,null),i=!0,a||(u=X(t,"click",gt.toggle),a=!0)},p(e,n){131072&n[0]&&ue(t,"is-active","settings"==e[17])},i(e){i||(ze(n.$$.fragment,e),ze(o.$$.fragment,e),i=!0)},o(e){qe(n.$$.fragment,e),qe(o.$$.fragment,e),i=!1},d(e){e&&G(t),Xe(n),Xe(o),a=!1,u()}}}function ha(e){let t,n,r,o,i,a,u,s,c,l,d,f=e[15](e[1].name)+"",p=Fr(e[16],e[5])+"",m=!e[5].is("not_found"),h=m&&ma(e);return{c(){t=Z("h1"),n=Z("a"),r=V(f),o=J(),i=Z("span"),a=V(p),u=J(),h&&h.c(),s=Q(),te(n,"href","#settings"),te(t,"class","ellipsis"),te(i,"class","chat-header__topic ellipsis")},m(e,f){K(e,t,f),z(t,n),z(n,r),K(e,o,f),K(e,i,f),z(i,a),K(e,u,f),h&&h.m(e,f),K(e,s,f),c=!0,l||(d=X(n,"click",gt.toggle),l=!0)},p(e,t){(!c||32770&t[0])&&f!==(f=e[15](e[1].name)+"")&&re(r,f),(!c||65568&t[0])&&p!==(p=Fr(e[16],e[5])+"")&&re(a,p),32&t[0]&&(m=!e[5].is("not_found")),m?h?(h.p(e,t),32&t[0]&&ze(h,1)):(h=ma(e),h.c(),ze(h,1),h.m(s.parentNode,s)):h&&(Ue(),qe(h,1,1,(()=>{h=null})),He())},i(e){c||(ze(h),c=!0)},o(e){qe(h),c=!1},d(e){e&&G(t),e&&G(o),e&&G(i),e&&G(u),h&&h.d(e),e&&G(s),l=!1,d()}}}function ga(e){let t,n,r,o;const i=[va,$a],a=[];function u(e,t){return e[0]?0:1}return t=u(e),n=a[t]=i[t](e),{c(){n.c(),r=Q()},m(e,n){a[t].m(e,n),K(e,r,n),o=!0},p(e,o){let s=t;t=u(e),t===s?a[t].p(e,o):(Ue(),qe(a[s],1,1,(()=>{a[s]=null})),He(),n=a[t],n?n.p(e,o):(n=a[t]=i[t](e),n.c()),ze(n,1),n.m(r.parentNode,r))},i(e){o||(ze(n),o=!0)},o(e){qe(n),o=!1},d(e){a[t].d(e),e&&G(r)}}}function $a(e){let t,n;return t=new wi({props:{conversation:e[1],transition:{duration:250,x:e[18].nColumns>1?0:e[18].width}}}),{c(){Je(t.$$.fragment)},m(e,r){Qe(t,e,r),n=!0},p(e,n){const r={};2&n[0]&&(r.conversation=e[1]),262144&n[0]&&(r.transition={duration:250,x:e[18].nColumns>1?0:e[18].width}),t.$set(r)},i(e){n||(ze(t.$$.fragment,e),n=!0)},o(e){qe(t.$$.fragment,e),n=!1},d(e){Xe(t,e)}}}function va(e){let t,n;return t=new ta({props:{conversation:e[1],transition:{duration:250,x:e[18].nColumns>1?0:e[18].width}}}),{c(){Je(t.$$.fragment)},m(e,r){Qe(t,e,r),n=!0},p(e,n){const r={};2&n[0]&&(r.conversation=e[1]),262144&n[0]&&(r.transition={duration:250,x:e[18].nColumns>1?0:e[18].width}),t.$set(r)},i(e){n||(ze(t.$$.fragment,e),n=!0)},o(e){qe(t.$$.fragment,e),n=!1},d(e){Xe(t,e)}}}function ba(e){let t,n,r,o,i;const a=[Da,ya],u=[];function s(e,n){return(null==t||32&n[0])&&(t=!!e[5].is("private")),t?0:e[5].frozen?-1:1}return~(n=s(e,[-1,-1]))&&(r=u[n]=a[n](e)),{c(){r&&r.c(),o=Q()},m(e,t){~n&&u[n].m(e,t),K(e,o,t),i=!0},p(e,t){let i=n;n=s(e,t),n===i?~n&&u[n].p(e,t):(r&&(Ue(),qe(u[i],1,1,(()=>{u[i]=null})),He()),~n?(r=u[n],r?r.p(e,t):(r=u[n]=a[n](e),r.c()),ze(r,1),r.m(o.parentNode,o)):r=null)},i(e){i||(ze(r),i=!0)},o(e){qe(r),i=!1},d(e){~n&&u[n].d(e),e&&G(o)}}}function ya(e){let t,n,r,o,i,a,u,s,c,l=e[20](e[5].topic?"Topic for %1 is: %2":"No topic is set for %1.",e[5].name,e[5].topic)+"";function d(e,t){return 1==e[21].length?_a:wa}n=new ct({props:{name:"info-circle"}}),u=new ct({props:{name:"info-circle"}});let f=d(e),p=f(e);return{c(){t=Z("p"),Je(n.$$.fragment),r=J(),o=new le,i=J(),a=Z("p"),Je(u.$$.fragment),s=J(),p.c(),o.a=null},m(e,d){K(e,t,d),Qe(n,t,null),z(t,r),o.m(l,t),K(e,i,d),K(e,a,d),Qe(u,a,null),z(a,s),p.m(a,null),c=!0},p(e,t){(!c||1048608&t[0])&&l!==(l=e[20](e[5].topic?"Topic for %1 is: %2":"No topic is set for %1.",e[5].name,e[5].topic)+"")&&o.p(l),f===(f=d(e))&&p?p.p(e,t):(p.d(1),p=f(e),p&&(p.c(),p.m(a,null)))},i(e){c||(ze(n.$$.fragment,e),ze(u.$$.fragment,e),c=!0)},o(e){qe(n.$$.fragment,e),qe(u.$$.fragment,e),c=!1},d(e){e&&G(t),Xe(n),e&&G(i),e&&G(a),Xe(u),p.d()}}}function Da(e){let t,n,r,o,i,a=e[20]('This is a private conversation with "%1".',e[5].name)+"";return n=new ct({props:{name:"info-circle"}}),{c(){t=Z("p"),Je(n.$$.fragment),r=J(),o=new le,o.a=null},m(e,u){K(e,t,u),Qe(n,t,null),z(t,r),o.m(a,t),i=!0},p(e,t){(!i||1048608&t[0])&&a!==(a=e[20]('This is a private conversation with "%1".',e[5].name)+"")&&o.p(a)},i(e){i||(ze(n.$$.fragment,e),i=!0)},o(e){qe(n.$$.fragment,e),i=!1},d(e){e&&G(t),Xe(n)}}}function wa(e){let t,n,r=e[20]("There are %1 participants in this conversation.",e[21].length)+"";return{c(){t=new le,n=Q(),t.a=n},m(e,o){t.m(r,e,o),K(e,n,o)},p(e,n){3145728&n[0]&&r!==(r=e[20]("There are %1 participants in this conversation.",e[21].length)+"")&&t.p(r)},d(e){e&&G(n),e&&t.d()}}}function _a(e){let t,n=e[15]("You are the only participant in this conversation.")+"";return{c(){t=V(n)},m(e,n){K(e,t,n)},p(e,r){32768&r[0]&&n!==(n=e[15]("You are the only participant in this conversation.")+"")&&re(t,n)},d(e){e&&G(t)}}}function Ea(e){let t,n,r,o,i,a,u,s=e[15]("Loading...")+"";return r=new ct({props:{name:"spinner",animation:"spin"}}),{c(){t=Z("div"),n=Z("span"),Je(r.$$.fragment),o=J(),i=Z("i"),a=V(s),te(t,"class","message__status-line for-loading has-pos-top")},m(e,s){K(e,t,s),z(t,n),Qe(r,n,null),z(n,o),z(n,i),z(i,a),u=!0},p(e,t){(!u||32768&t[0])&&s!==(s=e[15]("Loading...")+"")&&re(a,s)},i(e){u||(ze(r.$$.fragment,e),u=!0)},o(e){qe(r.$$.fragment,e),u=!1},d(e){e&&G(t),Xe(r)}}}function Ca(e){let t,n,r,o,i,a,u,s=e[15]("Started chatting on %1",e[5].historyStartAt.getHumanDate())+"";return r=new ct({props:{name:"calendar-alt"}}),{c(){t=Z("div"),n=Z("span"),Je(r.$$.fragment),o=J(),i=Z("i"),a=V(s),te(t,"class","message__status-line for-start-of-history")},m(e,s){K(e,t,s),z(t,n),Qe(r,n,null),z(n,o),z(n,i),z(i,a),u=!0},p(e,t){(!u||32800&t[0])&&s!==(s=e[15]("Started chatting on %1",e[5].historyStartAt.getHumanDate())+"")&&re(a,s)},i(e){u||(ze(r.$$.fragment,e),u=!0)},o(e){qe(r.$$.fragment,e),u=!1},d(e){e&&G(t),Xe(r)}}}function ka(e){let t,n,r,o,i,a,u,s=e[43].ts.getHumanDate()+"";return r=new ct({props:{name:"calendar-alt"}}),{c(){t=Z("div"),n=Z("span"),Je(r.$$.fragment),o=J(),i=Z("i"),a=V(s),te(t,"class","message__status-line for-day-changed")},m(e,s){K(e,t,s),z(t,n),Qe(r,n,null),z(n,o),z(n,i),z(i,a),u=!0},p(e,t){(!u||524288&t[0])&&s!==(s=e[43].ts.getHumanDate()+"")&&re(a,s)},i(e){u||(ze(r.$$.fragment,e),u=!0)},o(e){qe(r.$$.fragment,e),u=!1},d(e){e&&G(t),Xe(r)}}}function Aa(e){let t,n,r,o,i,a,u=e[15]("New messages")+"";return r=new ct({props:{name:"comments"}}),{c(){t=Z("div"),n=Z("span"),Je(r.$$.fragment),o=J(),i=V(u),te(t,"class","message__status-line for-last-read")},m(e,u){K(e,t,u),z(t,n),Qe(r,n,null),z(n,o),z(n,i),a=!0},p(e,t){(!a||32768&t[0])&&u!==(u=e[15]("New messages")+"")&&re(i,u)},i(e){a||(ze(r.$$.fragment,e),a=!0)},o(e){qe(r.$$.fragment,e),a=!1},d(e){e&&G(t),Xe(r)}}}function xa(e){let t,n,r,o;return n=new ct({props:{name:e[43].showDetails?"caret-square-up":"caret-square-down"}}),{c(){t=Z("a"),Je(n.$$.fragment),te(t,"href",r="#action:details:"+e[43].index)},m(e,r){K(e,t,r),Qe(n,t,null),o=!0},p(e,i){const a={};524288&i[0]&&(a.name=e[43].showDetails?"caret-square-up":"caret-square-down"),n.$set(a),(!o||524288&i[0]&&r!==(r="#action:details:"+e[43].index))&&te(t,"href",r)},i(e){o||(ze(n.$$.fragment,e),o=!0)},o(e){qe(n.$$.fragment,e),o=!1},d(e){e&&G(t),Xe(n)}}}function Fa(e){let t,n,r,o,i,a,u,s,c,l,d=e[15]("Remove")+"",f=e[15]("Resend")+"";return n=new ct({props:{name:"times-circle"}}),u=new ct({props:{name:"sync-alt"}}),{c(){t=Z("a"),Je(n.$$.fragment),r=Z("span"),o=V(d),i=J(),a=Z("a"),Je(u.$$.fragment),s=Z("span"),c=V(f),te(r,"class","tooltip"),te(t,"href","#action:remove"),te(t,"class","pull-right has-tooltip"),te(s,"class","tooltip"),te(a,"href","#action:resend"),te(a,"class","pull-right has-tooltip ")},m(e,d){K(e,t,d),Qe(n,t,null),z(t,r),z(r,o),K(e,i,d),K(e,a,d),Qe(u,a,null),z(a,s),z(s,c),l=!0},p(e,t){(!l||32768&t[0])&&d!==(d=e[15]("Remove")+"")&&re(o,d),(!l||32768&t[0])&&f!==(f=e[15]("Resend")+"")&&re(c,f)},i(e){l||(ze(n.$$.fragment,e),ze(u.$$.fragment,e),l=!0)},o(e){qe(n.$$.fragment,e),qe(u.$$.fragment,e),l=!1},d(e){e&&G(t),Xe(n),e&&G(i),e&&G(a),Xe(u)}}}function Sa(e){return{c:y,m:y,p:y,d:y}}function Oa(e){let t,n,r,o,i;return{c(){t=Z("div"),te(t,"class",n="embed "+e[49].className)},m(n,a){K(n,t,a),o||(i=R(r=xr.call(null,t,e[49])),o=!0)},p(o,i){e=o,524288&i[0]&&n!==(n="embed "+e[49].className)&&te(t,"class",n),r&&C(r.update)&&524288&i[0]&&r.update.call(null,e[49])},d(e){e&&G(t),o=!1,i()}}}function Ba(e){return{c:y,m:y,p:y,d:y}}function Na(e){let t,n,r={ctx:e,current:null,token:null,hasCatch:!1,pending:Ba,then:Oa,catch:Sa,value:49};return Ge(n=e[46],r),{c(){t=Q(),r.block.c()},m(e,n){K(e,t,n),r.block.m(e,r.anchor=n),r.mount=()=>t.parentNode,r.anchor=t},p(t,o){e=t,r.ctx=e,524288&o[0]&&n!==(n=e[46])&&Ge(n,r)||Ye(r,e,o)},d(e){e&&G(t),r.block.d(e),r.token=null,r=null}}}function ja(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h,g,$,v,b,y,D,w,_=e[15]("Mention")+"",C=e[15]("Chat")+"",k=e[15]("Whois")+"";return r=new ct({props:{name:"quote-left"}}),c=new ct({props:{name:"comments"}}),h=new ct({props:{name:"address-card"}}),{c(){t=Z("div"),n=Z("a"),Je(r.$$.fragment),o=J(),i=V(_),u=J(),s=Z("a"),Je(c.$$.fragment),l=J(),d=V(C),p=J(),m=Z("a"),Je(h.$$.fragment),g=J(),$=V(k),te(n,"href",a="#action:mention:"+e[43].from),te(n,"class","on-hover"),te(s,"href",f="#action:join:"+e[43].from),te(s,"class","on-hover"),te(m,"href",v="#action:whois:"+e[43].from),te(m,"class","on-hover"),te(t,"class","popover")},m(a,f){K(a,t,f),z(t,n),Qe(r,n,null),z(n,o),z(n,i),z(t,u),z(t,s),Qe(c,s,null),z(s,l),z(s,d),z(t,p),z(t,m),Qe(h,m,null),z(m,g),z(m,$),y=!0,D||(w=[X(t,"blur",e[26]),X(t,"mouseout",e[26])],D=!0)},p(e,t){(!y||32768&t[0])&&_!==(_=e[15]("Mention")+"")&&re(i,_),(!y||524288&t[0]&&a!==(a="#action:mention:"+e[43].from))&&te(n,"href",a),(!y||32768&t[0])&&C!==(C=e[15]("Chat")+"")&&re(d,C),(!y||524288&t[0]&&f!==(f="#action:join:"+e[43].from))&&te(s,"href",f),(!y||32768&t[0])&&k!==(k=e[15]("Whois")+"")&&re($,k),(!y||524288&t[0]&&v!==(v="#action:whois:"+e[43].from))&&te(m,"href",v)},i(e){y||(ze(r.$$.fragment,e),ze(c.$$.fragment,e),ze(h.$$.fragment,e),Oe((()=>{b||(b=Ke(t,Br,{duration:200},!0)),b.run(1)})),y=!0)},o(e){qe(r.$$.fragment,e),qe(c.$$.fragment,e),qe(h.$$.fragment,e),b||(b=Ke(t,Br,{duration:200},!1)),b.run(0),y=!1},d(e){e&&G(t),Xe(r),Xe(c),Xe(h),e&&b&&b.end(),D=!1,E(w)}}}function Ta(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h,g,$,v,b,y,D,w,_,k,A,x,F,S,O,B,N=e[43].ts.format("%H:%M")+"",j=Qt(e[43].ts.toLocaleString())+"",T=e[43].from+"",R=e[43].markdown+"",L=e[43].dayChanged&&ka(e),M=e[45]&&e[45]==e[19].length-e[5].unread&&Aa(e);o=new ct({props:{name:"pick:"+e[43].from,color:e[43].color}});const P=[Fa,xa],I=[];function U(e,t){return!1===e[43].waitingForResponse?0:!e[43].waitingForResponse&&e[43].details?1:-1}~(v=U(e))&&(b=I[v]=P[v](e));let H=e[43].embeds,q=[];for(let t=0;t<H.length;t+=1)q[t]=Na(pa(e,H,t));let W=e[14]==e[43].id&&ja(e);return{c(){L&&L.c(),t=J(),M&&M.c(),n=J(),r=Z("div"),Je(o.$$.fragment),i=J(),a=Z("div"),u=Z("span"),s=V(N),c=J(),l=Z("span"),d=V(j),f=J(),p=Z("a"),m=V(T),g=J(),$=Z("div"),b&&b.c(),y=J(),D=new le,w=J();for(let e=0;e<q.length;e+=1)q[e].c();_=J(),W&&W.c(),k=J(),te(l,"class","tooltip"),te(a,"class","message__ts has-tooltip"),te(p,"href",h="#popover:"+e[43].id),te(p,"class","message__from"),ie(p,"color",e[43].color),te(p,"tabindex","-1"),D.a=null,te($,"class","message__text"),te(r,"class",A=e[43].className),te(r,"data-index",x=e[45]),te(r,"data-ts",F=e[43].ts.toISOString()),ue(r,"is-not-present",!e[21].get(e[43].from)),ue(r,"show-details",!!e[43].showDetails)},m(h,b){L&&L.m(h,b),K(h,t,b),M&&M.m(h,b),K(h,n,b),K(h,r,b),Qe(o,r,null),z(r,i),z(r,a),z(a,u),z(u,s),z(a,c),z(a,l),z(l,d),z(r,f),z(r,p),z(p,m),z(r,g),z(r,$),~v&&I[v].m($,null),z($,y),D.m(R,$),z(r,w);for(let e=0;e<q.length;e+=1)q[e].m(r,null);z(r,_),W&&W.m(r,null),z(r,k),S=!0,O||(B=[X(p,"blur",e[26]),X(p,"focus",e[26]),X(p,"mouseover",e[26]),X(p,"mouseout",e[26]),X(r,"click",(function(){C(e[11])&&e[11].apply(this,arguments)}))],O=!0)},p(i,a){(e=i)[43].dayChanged?L?(L.p(e,a),524288&a[0]&&ze(L,1)):(L=ka(e),L.c(),ze(L,1),L.m(t.parentNode,t)):L&&(Ue(),qe(L,1,1,(()=>{L=null})),He()),e[45]&&e[45]==e[19].length-e[5].unread?M?(M.p(e,a),524320&a[0]&&ze(M,1)):(M=Aa(e),M.c(),ze(M,1),M.m(n.parentNode,n)):M&&(Ue(),qe(M,1,1,(()=>{M=null})),He());const u={};524288&a[0]&&(u.name="pick:"+e[43].from),524288&a[0]&&(u.color=e[43].color),o.$set(u),(!S||524288&a[0])&&N!==(N=e[43].ts.format("%H:%M")+"")&&re(s,N),(!S||524288&a[0])&&j!==(j=Qt(e[43].ts.toLocaleString())+"")&&re(d,j),(!S||524288&a[0])&&T!==(T=e[43].from+"")&&re(m,T),(!S||524288&a[0]&&h!==(h="#popover:"+e[43].id))&&te(p,"href",h),(!S||524288&a[0])&&ie(p,"color",e[43].color);let c=v;if(v=U(e),v===c?~v&&I[v].p(e,a):(b&&(Ue(),qe(I[c],1,1,(()=>{I[c]=null})),He()),~v?(b=I[v],b?b.p(e,a):(b=I[v]=P[v](e),b.c()),ze(b,1),b.m($,y)):b=null),(!S||524288&a[0])&&R!==(R=e[43].markdown+"")&&D.p(R),524288&a[0]){let t;for(H=e[43].embeds,t=0;t<H.length;t+=1){const n=pa(e,H,t);q[t]?q[t].p(n,a):(q[t]=Na(n),q[t].c(),q[t].m(r,_))}for(;t<q.length;t+=1)q[t].d(1);q.length=H.length}e[14]==e[43].id?W?(W.p(e,a),540672&a[0]&&ze(W,1)):(W=ja(e),W.c(),ze(W,1),W.m(r,k)):W&&(Ue(),qe(W,1,1,(()=>{W=null})),He()),(!S||524288&a[0]&&A!==(A=e[43].className))&&te(r,"class",A),(!S||524288&a[0]&&F!==(F=e[43].ts.toISOString()))&&te(r,"data-ts",F),2621440&a[0]&&ue(r,"is-not-present",!e[21].get(e[43].from)),524288&a[0]&&ue(r,"show-details",!!e[43].showDetails)},i(e){S||(ze(L),ze(M),ze(o.$$.fragment,e),ze(b),ze(W),S=!0)},o(e){qe(L),qe(M),qe(o.$$.fragment,e),qe(b),qe(W),S=!1},d(e){L&&L.d(e),e&&G(t),M&&M.d(e),e&&G(n),e&&G(r),Xe(o),~v&&I[v].d(),Y(q,e),W&&W.d(),O=!1,E(B)}}}function Ra(e){let t,n,r,o,i,a,u=Fr(e[16],e[5])+"";return r=new ct({props:{name:"exclamation-triangle"}}),{c(){t=Z("div"),n=Z("div"),Je(r.$$.fragment),o=J(),i=V(u),te(n,"class","message__text"),te(t,"class","message is-highlighted")},m(e,u){K(e,t,u),z(t,n),Qe(r,n,null),z(n,o),z(n,i),a=!0},p(e,t){(!a||65568&t[0])&&u!==(u=Fr(e[16],e[5])+"")&&re(i,u)},i(e){a||(ze(r.$$.fragment,e),a=!0)},o(e){qe(r.$$.fragment,e),a=!1},d(e){e&&G(t),Xe(r)}}}function La(e){let t,n,r,o,i,a,u,s,c,l,d,f=e[15]("You are invited to join %1.",e[1].name)+"",p=e[15]("Do you want to join?")+"";return s=new Ci({props:{href:"#action:join",class:"btn",$$slots:{default:[Ua]},$$scope:{ctx:e}}}),s.$on("click",(function(){C(e[11])&&e[11].apply(this,arguments)})),l=new Ci({props:{href:"#action:close",class:"btn is-secondary",$$slots:{default:[Ha]},$$scope:{ctx:e}}}),l.$on("click",(function(){C(e[11])&&e[11].apply(this,arguments)})),{c(){t=Z("h2"),n=V(f),r=J(),o=Z("p"),i=V(p),a=J(),u=Z("p"),Je(s.$$.fragment),c=J(),Je(l.$$.fragment)},m(e,f){K(e,t,f),z(t,n),K(e,r,f),K(e,o,f),z(o,i),K(e,a,f),K(e,u,f),Qe(s,u,null),z(u,c),Qe(l,u,null),d=!0},p(t,r){e=t,(!d||32770&r[0])&&f!==(f=e[15]("You are invited to join %1.",e[1].name)+"")&&re(n,f),(!d||32768&r[0])&&p!==(p=e[15]("Do you want to join?")+"")&&re(i,p);const o={};32768&r[0]|524288&r[1]&&(o.$$scope={dirty:r,ctx:e}),s.$set(o);const a={};32768&r[0]|524288&r[1]&&(a.$$scope={dirty:r,ctx:e}),l.$set(a)},i(e){d||(ze(s.$$.fragment,e),ze(l.$$.fragment,e),d=!0)},o(e){qe(s.$$.fragment,e),qe(l.$$.fragment,e),d=!1},d(e){e&&G(t),e&&G(r),e&&G(o),e&&G(a),e&&G(u),Xe(s),Xe(l)}}}function Ma(e){let t,n,r,o,i,a,u,s,c=e[20]("Disconnected. Your connection %1 can be edited in [settings](%2).",e[16].name,"/chat/"+e[16].connection_id+"#settings")+"";return r=new ct({props:{name:"exclamation-triangle"}}),{c(){t=Z("div"),n=Z("div"),Je(r.$$.fragment),o=J(),i=new le,i.a=null,te(n,"class","message__text"),te(t,"class","message is-highlighted")},m(e,l){K(e,t,l),z(t,n),Qe(r,n,null),z(n,o),i.m(c,n),a=!0,u||(s=X(t,"click",gt.toggle),u=!0)},p(e,t){(!a||1114112&t[0])&&c!==(c=e[20]("Disconnected. Your connection %1 can be edited in [settings](%2).",e[16].name,"/chat/"+e[16].connection_id+"#settings")+"")&&i.p(c)},i(e){a||(ze(r.$$.fragment,e),a=!0)},o(e){qe(r.$$.fragment,e),a=!1},d(e){e&&G(t),Xe(r),u=!1,s()}}}function Pa(e){let t,n,r,o,i,a,u,s,c,l,d,f=e[15]("You are not part of this conversation.")+"",p=e[15]('Do you want to chat with "%1"?',e[5].name)+"";return s=new Ci({props:{href:"#action:join:"+e[5].name,class:"btn",$$slots:{default:[za]},$$scope:{ctx:e}}}),s.$on("click",(function(){C(e[11])&&e[11].apply(this,arguments)})),l=new Ci({props:{href:"/settings/conversation",class:"btn is-secondary",$$slots:{default:[qa]},$$scope:{ctx:e}}}),{c(){t=Z("h2"),n=V(f),r=J(),o=Z("p"),i=V(p),a=J(),u=Z("p"),Je(s.$$.fragment),c=J(),Je(l.$$.fragment)},m(e,f){K(e,t,f),z(t,n),K(e,r,f),K(e,o,f),z(o,i),K(e,a,f),K(e,u,f),Qe(s,u,null),z(u,c),Qe(l,u,null),d=!0},p(t,r){e=t,(!d||32768&r[0])&&f!==(f=e[15]("You are not part of this conversation.")+"")&&re(n,f),(!d||32800&r[0])&&p!==(p=e[15]('Do you want to chat with "%1"?',e[5].name)+"")&&re(i,p);const o={};32&r[0]&&(o.href="#action:join:"+e[5].name),32768&r[0]|524288&r[1]&&(o.$$scope={dirty:r,ctx:e}),s.$set(o);const a={};32768&r[0]|524288&r[1]&&(a.$$scope={dirty:r,ctx:e}),l.$set(a)},i(e){d||(ze(s.$$.fragment,e),ze(l.$$.fragment,e),d=!0)},o(e){qe(s.$$.fragment,e),qe(l.$$.fragment,e),d=!1},d(e){e&&G(t),e&&G(r),e&&G(o),e&&G(a),e&&G(u),Xe(s),Xe(l)}}}function Ia(e){let t,n,r,o,i,a,u,s,c,l,d,f=e[15]("Connection does not exist.")+"",p=e[15]('Do you want to create the connection "%1"?',e[16].connection_id)+"";return s=new Ci({props:{href:"/settings/connections?uri="+encodeURIComponent(e[24](e[5])),class:"btn",$$slots:{default:[Wa]},$$scope:{ctx:e}}}),l=new Ci({props:{href:"/settings/connections",class:"btn is-secondary",$$slots:{default:[Ka]},$$scope:{ctx:e}}}),{c(){t=Z("h2"),n=V(f),r=J(),o=Z("p"),i=V(p),a=J(),u=Z("p"),Je(s.$$.fragment),c=J(),Je(l.$$.fragment)},m(e,f){K(e,t,f),z(t,n),K(e,r,f),K(e,o,f),z(o,i),K(e,a,f),K(e,u,f),Qe(s,u,null),z(u,c),Qe(l,u,null),d=!0},p(e,t){(!d||32768&t[0])&&f!==(f=e[15]("Connection does not exist.")+"")&&re(n,f),(!d||98304&t[0])&&p!==(p=e[15]('Do you want to create the connection "%1"?',e[16].connection_id)+"")&&re(i,p);const r={};32&t[0]&&(r.href="/settings/connections?uri="+encodeURIComponent(e[24](e[5]))),32768&t[0]|524288&t[1]&&(r.$$scope={dirty:t,ctx:e}),s.$set(r);const o={};32768&t[0]|524288&t[1]&&(o.$$scope={dirty:t,ctx:e}),l.$set(o)},i(e){d||(ze(s.$$.fragment,e),ze(l.$$.fragment,e),d=!0)},o(e){qe(s.$$.fragment,e),qe(l.$$.fragment,e),d=!1},d(e){e&&G(t),e&&G(r),e&&G(o),e&&G(a),e&&G(u),Xe(s),Xe(l)}}}function Ua(e){let t,n,r,o,i,a=e[15]("Yes")+"";return t=new ct({props:{name:"thumbs-up"}}),{c(){Je(t.$$.fragment),n=J(),r=Z("span"),o=V(a)},m(e,a){Qe(t,e,a),K(e,n,a),K(e,r,a),z(r,o),i=!0},p(e,t){(!i||32768&t[0])&&a!==(a=e[15]("Yes")+"")&&re(o,a)},i(e){i||(ze(t.$$.fragment,e),i=!0)},o(e){qe(t.$$.fragment,e),i=!1},d(e){Xe(t,e),e&&G(n),e&&G(r)}}}function Ha(e){let t,n,r,o,i,a=e[15]("No")+"";return t=new ct({props:{name:"thumbs-down"}}),{c(){Je(t.$$.fragment),n=J(),r=Z("span"),o=V(a)},m(e,a){Qe(t,e,a),K(e,n,a),K(e,r,a),z(r,o),i=!0},p(e,t){(!i||32768&t[0])&&a!==(a=e[15]("No")+"")&&re(o,a)},i(e){i||(ze(t.$$.fragment,e),i=!0)},o(e){qe(t.$$.fragment,e),i=!1},d(e){Xe(t,e),e&&G(n),e&&G(r)}}}function za(e){let t,n,r,o,i,a=e[15]("Yes")+"";return t=new ct({props:{name:"thumbs-up"}}),{c(){Je(t.$$.fragment),n=J(),r=Z("span"),o=V(a)},m(e,a){Qe(t,e,a),K(e,n,a),K(e,r,a),z(r,o),i=!0},p(e,t){(!i||32768&t[0])&&a!==(a=e[15]("Yes")+"")&&re(o,a)},i(e){i||(ze(t.$$.fragment,e),i=!0)},o(e){qe(t.$$.fragment,e),i=!1},d(e){Xe(t,e),e&&G(n),e&&G(r)}}}function qa(e){let t,n,r,o,i,a=e[15]("No")+"";return t=new ct({props:{name:"thumbs-down"}}),{c(){Je(t.$$.fragment),n=J(),r=Z("span"),o=V(a)},m(e,a){Qe(t,e,a),K(e,n,a),K(e,r,a),z(r,o),i=!0},p(e,t){(!i||32768&t[0])&&a!==(a=e[15]("No")+"")&&re(o,a)},i(e){i||(ze(t.$$.fragment,e),i=!0)},o(e){qe(t.$$.fragment,e),i=!1},d(e){Xe(t,e),e&&G(n),e&&G(r)}}}function Wa(e){let t,n,r,o,i=e[15]("Yes")+"";return t=new ct({props:{name:"thumbs-up"}}),{c(){Je(t.$$.fragment),n=J(),r=V(i)},m(e,i){Qe(t,e,i),K(e,n,i),K(e,r,i),o=!0},p(e,t){(!o||32768&t[0])&&i!==(i=e[15]("Yes")+"")&&re(r,i)},i(e){o||(ze(t.$$.fragment,e),o=!0)},o(e){qe(t.$$.fragment,e),o=!1},d(e){Xe(t,e),e&&G(n),e&&G(r)}}}function Ka(e){let t,n,r,o,i=e[15]("No")+"";return t=new ct({props:{name:"thumbs-down"}}),{c(){Je(t.$$.fragment),n=J(),r=V(i)},m(e,i){Qe(t,e,i),K(e,n,i),K(e,r,i),o=!0},p(e,t){(!o||32768&t[0])&&i!==(i=e[15]("No")+"")&&re(r,i)},i(e){o||(ze(t.$$.fragment,e),o=!0)},o(e){qe(t.$$.fragment,e),o=!1},d(e){Xe(t,e),e&&G(n),e&&G(r)}}}function Ga(e){let t,n,r,o,i,a,u,s,c,l,d=e[15]("Uploading %1...",e[9].file.name)+"";return{c(){t=Z("div"),n=Z("div"),r=V(d),o=J(),i=Z("div"),a=Z("div"),u=V(e[10]),s=V("%"),te(a,"class","progress__bar"),ie(a,"width",e[10]+"%"),te(i,"class","progress"),te(t,"class","message")},m(e,c){K(e,t,c),z(t,n),z(n,r),z(t,o),z(t,i),z(i,a),z(a,u),z(a,s),l=!0},p(e,t){(!l||33280&t[0])&&d!==(d=e[15]("Uploading %1...",e[9].file.name)+"")&&re(r,d),(!l||1024&t[0])&&re(u,e[10]),(!l||1024&t[0])&&ie(a,"width",e[10]+"%")},i(e){l||(Oe((()=>{c||(c=Ke(t,Br,{duration:200},!0)),c.run(1)})),l=!0)},o(e){c||(c=Ke(t,Br,{duration:200},!1)),c.run(0),l=!1},d(e){e&&G(t),e&&c&&c.end()}}}function Ya(e){let t,n,r,o,i,a,u,s=e[15]("Loading...")+"";return r=new ct({props:{name:"spinner",animation:"spin"}}),{c(){t=Z("div"),n=Z("span"),Je(r.$$.fragment),o=J(),i=Z("i"),a=V(s),te(t,"class","message__status-line for-loading has-pos-bottom")},m(e,s){K(e,t,s),z(t,n),Qe(r,n,null),z(n,o),z(n,i),z(i,a),u=!0},p(e,t){(!u||32768&t[0])&&s!==(s=e[15]("Loading...")+"")&&re(a,s)},i(e){u||(ze(r.$$.fragment,e),u=!0)},o(e){qe(r.$$.fragment,e),u=!1},d(e){e&&G(t),Xe(r)}}}function Za(e){let t,n,r,o,i,a,u,s=e[15]("Jump to %1",e[8].format("%b %e %H:%M"))+"";return r=new ct({props:{name:"external-link-alt"}}),{c(){t=Z("div"),n=Z("a"),Je(r.$$.fragment),o=J(),i=V(s),te(n,"href",a=e[1].path),te(t,"class","message__status-line for-jump-to-now")},m(e,a){K(e,t,a),z(t,n),Qe(r,n,null),z(n,o),z(n,i),u=!0},p(e,t){(!u||33024&t[0])&&s!==(s=e[15]("Jump to %1",e[8].format("%b %e %H:%M"))+"")&&re(i,s),(!u||2&t[0]&&a!==(a=e[1].path))&&te(n,"href",a)},i(e){u||(ze(r.$$.fragment,e),u=!0)},o(e){qe(r.$$.fragment,e),u=!1},d(e){e&&G(t),Xe(r)}}}function Va(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h,g,$,v=e[19].length<10&&!e[5].is("not_found"),b=e[5].is("loading")&&e[19].length>10,y=e[5].historyStartAt&&!e[5].is("not_found")&&e[19].length,D=e[5].is("loading"),w=v&&ba(e),_=b&&Ea(e),E=y&&Ca(e),C=e[19].render(),k=[];for(let t=0;t<C.length;t+=1)k[t]=Ta(fa(e,C,t));const A=e=>qe(k[e],1,1,(()=>{k[e]=null})),x=[Ia,Pa,Ma,La,Ra],F=[];function S(e,t){return(null==i||65536&t[0])&&(i=!!e[16].is("not_found")),i?0:((null==a||32&t[0])&&(a=!!e[5].is("not_found")),a?1:((null==u||65536&t[0])&&(u=!(e[16].is("unreachable")||!e[16].frozen)),u?2:((null==s||32&t[0])&&(s=!(!e[5].frozen||!e[5].is("pending"))),s?3:((null==c||32&t[0])&&(c=!(!e[5].frozen||e[5].is("locked"))),c?4:-1))))}~(l=S(e,[-1,-1]))&&(d=F[l]=x[l](e));let O=e[10]&&Ga(e),B=null===la.wantNotifications&&function(e){let t,n,r,o,i,a,u=e[20]('Go to "[account settings](%1)" to enable or disable notifications.',"/settings/account")+"";return r=new ct({props:{name:"info-circle"}}),{c(){t=Z("div"),n=Z("div"),Je(r.$$.fragment),o=J(),i=new le,i.a=null,te(n,"class","message__text"),te(t,"class","message is-highlighted")},m(e,s){K(e,t,s),z(t,n),Qe(r,n,null),z(n,o),i.m(u,n),a=!0},p(e,t){(!a||1048576&t[0])&&u!==(u=e[20]('Go to "[account settings](%1)" to enable or disable notifications.',"/settings/account")+"")&&i.p(u)},i(e){a||(ze(r.$$.fragment,e),a=!0)},o(e){qe(r.$$.fragment,e),a=!1},d(e){e&&G(t),Xe(r)}}}(e),N=D&&Ya(e),j=!e[5].historyStopAt&&e[19].length&&Za(e);return{c(){w&&w.c(),t=J(),_&&_.c(),n=J(),E&&E.c(),r=J();for(let e=0;e<k.length;e+=1)k[e].c();o=J(),d&&d.c(),f=J(),O&&O.c(),p=J(),B&&B.c(),m=J(),N&&N.c(),h=J(),j&&j.c(),g=Q()},m(e,i){w&&w.m(e,i),K(e,t,i),_&&_.m(e,i),K(e,n,i),E&&E.m(e,i),K(e,r,i);for(let t=0;t<k.length;t+=1)k[t].m(e,i);K(e,o,i),~l&&F[l].m(e,i),K(e,f,i),O&&O.m(e,i),K(e,p,i),B&&B.m(e,i),K(e,m,i),N&&N.m(e,i),K(e,h,i),j&&j.m(e,i),K(e,g,i),$=!0},p(e,i){if(524320&i[0]&&(v=e[19].length<10&&!e[5].is("not_found")),v?w?(w.p(e,i),524320&i[0]&&ze(w,1)):(w=ba(e),w.c(),ze(w,1),w.m(t.parentNode,t)):w&&(Ue(),qe(w,1,1,(()=>{w=null})),He()),524320&i[0]&&(b=e[5].is("loading")&&e[19].length>10),b?_?(_.p(e,i),524320&i[0]&&ze(_,1)):(_=Ea(e),_.c(),ze(_,1),_.m(n.parentNode,n)):_&&(Ue(),qe(_,1,1,(()=>{_=null})),He()),524320&i[0]&&(y=e[5].historyStartAt&&!e[5].is("not_found")&&e[19].length),y?E?(E.p(e,i),524320&i[0]&&ze(E,1)):(E=Ca(e),E.c(),ze(E,1),E.m(r.parentNode,r)):E&&(Ue(),qe(E,1,1,(()=>{E=null})),He()),69781536&i[0]){let t;for(C=e[19].render(),t=0;t<C.length;t+=1){const n=fa(e,C,t);k[t]?(k[t].p(n,i),ze(k[t],1)):(k[t]=Ta(n),k[t].c(),ze(k[t],1),k[t].m(o.parentNode,o))}for(Ue(),t=C.length;t<k.length;t+=1)A(t);He()}let a=l;l=S(e,i),l===a?~l&&F[l].p(e,i):(d&&(Ue(),qe(F[a],1,1,(()=>{F[a]=null})),He()),~l?(d=F[l],d?d.p(e,i):(d=F[l]=x[l](e),d.c()),ze(d,1),d.m(f.parentNode,f)):d=null),e[10]?O?(O.p(e,i),1024&i[0]&&ze(O,1)):(O=Ga(e),O.c(),ze(O,1),O.m(p.parentNode,p)):O&&(Ue(),qe(O,1,1,(()=>{O=null})),He()),null===la.wantNotifications&&B.p(e,i),32&i[0]&&(D=e[5].is("loading")),D?N?(N.p(e,i),32&i[0]&&ze(N,1)):(N=Ya(e),N.c(),ze(N,1),N.m(h.parentNode,h)):N&&(Ue(),qe(N,1,1,(()=>{N=null})),He()),!e[5].historyStopAt&&e[19].length?j?(j.p(e,i),524320&i[0]&&ze(j,1)):(j=Za(e),j.c(),ze(j,1),j.m(g.parentNode,g)):j&&(Ue(),qe(j,1,1,(()=>{j=null})),He())},i(e){if(!$){ze(w),ze(_),ze(E);for(let e=0;e<C.length;e+=1)ze(k[e]);ze(d),ze(O),ze(B),ze(N),ze(j),$=!0}},o(e){qe(w),qe(_),qe(E),k=k.filter(Boolean);for(let e=0;e<k.length;e+=1)qe(k[e]);qe(d),qe(O),qe(B),qe(N),qe(j),$=!1},d(e){w&&w.d(e),e&&G(t),_&&_.d(e),e&&G(n),E&&E.d(e),e&&G(r),Y(k,e),e&&G(o),~l&&F[l].d(e),e&&G(f),O&&O.d(e),e&&G(p),B&&B.d(e),e&&G(m),N&&N.d(e),e&&G(h),j&&j.d(e),e&&G(g)}}}function Ja(e){let t,n,r,o,i,a,u,s,c,l=e[15]("Participants (%1)",e[21].length)+"",d=e[5].is("private")&&e[5].info.nick,f=e[21].toArray(),p=[];for(let t=0;t<f.length;t+=1)p[t]=Qa(da(e,f,t));const m=e=>qe(p[e],1,1,(()=>{p[e]=null}));let h=d&&Xa(e);return{c(){t=Z("div"),n=Z("h3"),r=V(l),o=J(),i=Z("nav");for(let e=0;e<p.length;e+=1)p[e].c();a=J(),h&&h.c(),te(i,"class","sidebar-right__nav"),te(t,"class","sidebar-right")},m(l,d){K(l,t,d),z(t,n),z(n,r),z(t,o),z(t,i);for(let e=0;e<p.length;e+=1)p[e].m(i,null);z(t,a),h&&h.m(t,null),u=!0,s||(c=X(i,"click",(function(){C(e[11])&&e[11].apply(this,arguments)})),s=!0)},p(n,o){if(e=n,(!u||2129920&o[0])&&l!==(l=e[15]("Participants (%1)",e[21].length)+"")&&re(r,l),2097152&o[0]){let t;for(f=e[21].toArray(),t=0;t<f.length;t+=1){const n=da(e,f,t);p[t]?(p[t].p(n,o),ze(p[t],1)):(p[t]=Qa(n),p[t].c(),ze(p[t],1),p[t].m(i,null))}for(Ue(),t=f.length;t<p.length;t+=1)m(t);He()}32&o[0]&&(d=e[5].is("private")&&e[5].info.nick),d?h?h.p(e,o):(h=Xa(e),h.c(),h.m(t,null)):h&&(h.d(1),h=null)},i(e){if(!u){for(let e=0;e<f.length;e+=1)ze(p[e]);u=!0}},o(e){p=p.filter(Boolean);for(let e=0;e<p.length;e+=1)qe(p[e]);u=!1},d(e){e&&G(t),Y(p,e),h&&h.d(),s=!1,c()}}}function Qa(e){let t,n,r,o,i,a,u,s,c,l=e[40].nick+"";return n=new ct({props:{name:"pick:"+e[40].id,family:"solid",color:e[40].color}}),{c(){t=Z("a"),Je(n.$$.fragment),r=J(),o=Z("span"),i=V(l),a=J(),te(t,"href",u="#action:join:"+e[40].id),te(t,"class",s="participant "+Jt(e[40].modes))},m(e,u){K(e,t,u),Qe(n,t,null),z(t,r),z(t,o),z(o,i),z(t,a),c=!0},p(e,r){const o={};2097152&r[0]&&(o.name="pick:"+e[40].id),2097152&r[0]&&(o.color=e[40].color),n.$set(o),(!c||2097152&r[0])&&l!==(l=e[40].nick+"")&&re(i,l),(!c||2097152&r[0]&&u!==(u="#action:join:"+e[40].id))&&te(t,"href",u),(!c||2097152&r[0]&&s!==(s="participant "+Jt(e[40].modes)))&&te(t,"class",s)},i(e){c||(ze(n.$$.fragment,e),c=!0)},o(e){qe(n.$$.fragment,e),c=!1},d(e){e&&G(t),Xe(n)}}}function Xa(e){let t,n,r,o,i=e[15]("Information")+"",a=e[20](...yr(e[5].info))+"";return{c(){t=Z("h3"),n=V(i),r=J(),o=Z("p")},m(e,i){K(e,t,i),z(t,n),K(e,r,i),K(e,o,i),o.innerHTML=a},p(e,t){32768&t[0]&&i!==(i=e[15]("Information")+"")&&re(n,i),1048608&t[0]&&a!==(a=e[20](...yr(e[5].info))+"")&&(o.innerHTML=a)},d(e){e&&G(t),e&&G(r),e&&G(o)}}}function eu(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h,g=e[18].nColumns>2&&e[21].length&&!e[5].is("not_found");t=new wt({props:{$$slots:{default:[ha]},$$scope:{ctx:e}}});let $="settings"==e[17]&&ga(e);function v(t){e[32](t)}function b(t){e[33](t)}function y(t){e[34](t)}function D(t){e[35](t)}o=new ia({props:{class:"main is-above-chat-input",$$slots:{default:[Va]},$$scope:{ctx:e}}}),o.$on("scrolled",(function(){C(e[13])&&e[13].apply(this,arguments)})),o.$on("visibility",(function(){C(e[12])&&e[12].apply(this,arguments)}));let w={conversation:e[1]};void 0!==e[4]&&(w.fillIn=e[4]),void 0!==e[3]&&(w.focus=e[3]),void 0!==e[9]&&(w.uploader=e[9]),void 0!==e[10]&&(w.uploadProgress=e[10]),a=new qr({props:w}),Ee.push((()=>Ve(a,"fillIn",v))),Ee.push((()=>Ve(a,"focus",b))),Ee.push((()=>Ve(a,"uploader",y))),Ee.push((()=>Ve(a,"uploadProgress",D)));let _=g&&Ja(e);return{c(){Je(t.$$.fragment),n=J(),$&&$.c(),r=J(),Je(o.$$.fragment),i=J(),Je(a.$$.fragment),d=J(),_&&_.c(),f=Q()},m(u,s){Qe(t,u,s),K(u,n,s),$&&$.m(u,s),K(u,r,s),Qe(o,u,s),K(u,i,s),Qe(a,u,s),K(u,d,s),_&&_.m(u,s),K(u,f,s),p=!0,m||(h=X(window,"focus",e[25]),m=!0)},p(n,i){e=n;const d={};229410&i[0]|524288&i[1]&&(d.$$scope={dirty:i,ctx:e}),t.$set(d),"settings"==e[17]?$?($.p(e,i),131072&i[0]&&ze($,1)):($=ga(e),$.c(),ze($,1),$.m(r.parentNode,r)):$&&(Ue(),qe($,1,1,(()=>{$=null})),He());const p={};3788578&i[0]|524288&i[1]&&(p.$$scope={dirty:i,ctx:e}),o.$set(p);const m={};2&i[0]&&(m.conversation=e[1]),!u&&16&i[0]&&(u=!0,m.fillIn=e[4],Be((()=>u=!1))),!s&&8&i[0]&&(s=!0,m.focus=e[3],Be((()=>s=!1))),!c&&512&i[0]&&(c=!0,m.uploader=e[9],Be((()=>c=!1))),!l&&1024&i[0]&&(l=!0,m.uploadProgress=e[10],Be((()=>l=!1))),a.$set(m),2359328&i[0]&&(g=e[18].nColumns>2&&e[21].length&&!e[5].is("not_found")),g?_?(_.p(e,i),2359328&i[0]&&ze(_,1)):(_=Ja(e),_.c(),ze(_,1),_.m(f.parentNode,f)):_&&(Ue(),qe(_,1,1,(()=>{_=null})),He())},i(e){p||(ze(t.$$.fragment,e),ze($),ze(o.$$.fragment,e),ze(a.$$.fragment,e),ze(_),p=!0)},o(e){qe(t.$$.fragment,e),qe($),qe(o.$$.fragment,e),qe(a.$$.fragment,e),qe(_),p=!1},d(e){Xe(t,e),e&&G(n),$&&$.d(e),e&&G(r),Xe(o,e),e&&G(i),Xe(a,e),e&&G(d),_&&_.d(e),e&&G(f),m=!1,h()}}}function tu(e,t,n){let r,o,i,a,u,s,c,l,d,f,p,m,h,g,$=y,v=()=>($(),$=A(R,(e=>n(5,u=e))),R),b=y,D=()=>(b(),b=A(j,(e=>n(16,d=e))),j),w=y,_=()=>(w(),w=A(L,(e=>n(19,m=e))),L),E=y,C=()=>(E(),E=A(M,(e=>n(21,g=e))),M);F(e,Hn,(e=>n(30,s=e))),F(e,ar,(e=>n(15,l=e))),F(e,gt,(e=>n(17,f=e))),F(e,$t,(e=>n(18,p=e))),F(e,ur,(e=>n(20,h=e))),e.$$.on_destroy.push((()=>$())),e.$$.on_destroy.push((()=>b())),e.$$.on_destroy.push((()=>w())),e.$$.on_destroy.push((()=>E()));let{connection_id:k=""}=t,{conversation_id:x=""}=t,{title:S="Chat"}=t;const O=new na,B=De("user");F(e,B,(e=>n(31,c=e)));const N=vt("chat:popoverTarget");F(e,N,(e=>n(14,a=e)));let j=B.notifications;D();let R=B.notifications;v();let L=R.messages;_();let M=R.participants;C();let P,I,U,H,z=new vr,q="",W={};function K(e){var t;if(e.activeConversation!=R)return W.conversation&&W.conversation(),W.unread&&W.unread(),v(n(1,R=e.activeConversation)),_(n(2,L=R.messages)),C(n(7,M=R.participants)),D(n(6,j=e.findConversation({connection_id:R.connection_id})||R)),n(8,z=new vr),W.conversation=R.subscribe((e=>{v(n(1,R=e))})),W.unread=()=>R.update({unread:0}),R.markAsRead(),n(29,(t=Hn.hash,q=!!String(t||"").match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)&&Hn.hash||"")),q?R.load({around:q}):R.historyStopAt?void 0:R.load({around:z.toISOString()})}return ve((()=>{N.set(""),O.attach(document.querySelector(".main"),U)})),be((()=>{Object.keys(W).forEach((e=>W[e]())),O.detach()})),e.$$set=e=>{"connection_id"in e&&n(28,k=e.connection_id),"conversation_id"in e&&n(0,x=e.conversation_id),"title"in e&&n(27,S=e.title)},e.$$.update=()=>{268435457&e.$$.dirty[0]&&function(e,t){R.connection_id==e&&R.conversation_id==t||(B.setActiveConversation({connection_id:e,conversation_id:t}),N.set(""))}(k,x),1&e.$$.dirty[1]&&K(c),4&e.$$.dirty[0]|1&e.$$.dirty[1]&&L.update({expandUrlToMedia:c.expandUrlToMedia}),32&e.$$.dirty[0]&&n(27,S=u.title),1073741858&e.$$.dirty[0]&&(s.hash||u.historyStopAt||R.load({})),2&e.$$.dirty[0]&&n(13,r=Dr("onInfinityScrolled",{conversation:R})),536870914&e.$$.dirty[0]&&n(12,o=Dr("onInfinityVisibility",{conversation:R,onLoadHash:q})),26&e.$$.dirty[0]&&n(11,i=Dr("onMessageClick",{conversation:R,fillIn:I,focusChatInput:P,popoverTarget:N,user:B}))},[x,R,L,P,I,u,j,M,z,U,H,i,o,r,a,l,d,f,p,m,h,g,B,N,function(){const[e,t]=u.connection_id.split("-");return e+"://"+t+"/"+encodeURIComponent(u.conversation_id)+"?tls=1"},function(){(R.notifications||R.unread)&&R.markAsRead()},function(e){const{relatedTarget:t,target:n,type:r}=e;setTimeout((()=>{"mouseout"==r||"blur"==r?t&&t.closest(".popover")||T(N,a=null,a):a||n.click()}),250)},S,k,q,s,c,function(e){I=e,n(4,I)},function(e){P=e,n(3,P)},function(e){U=e,n(9,U)},function(e){H=e,n(10,H)}]}class nu extends nt{constructor(e){super(),tt(this,e,tu,eu,k,{connection_id:28,conversation_id:0,title:27},null,[-1,-1])}}function ru(e){let t;const n=e[5].default,r=S(n,e,e[4],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,o){r&&r.p&&(!t||16&o)&&N(r,n,e,e[4],t?B(n,e[4],o,null):j(e[4]),null)},i(e){t||(ze(r,e),t=!0)},o(e){qe(r,e),t=!1},d(e){r&&r.d(e)}}}function ou(e){let t,n=e[3]("Loading...")+"";return{c(){t=V(n)},m(e,n){K(e,t,n)},p(e,r){8&r&&n!==(n=e[3]("Loading...")+"")&&re(t,n)},i:y,o:y,d(e){e&&G(t)}}}function iu(e){let t,n,r=e[3](e[2].error())+"";return{c(){t=Z("div"),n=V(r),te(t,"class","error")},m(e,r){K(e,t,r),z(t,n)},p(e,t){12&t&&r!==(r=e[3](e[2].error())+"")&&re(n,r)},i:y,o:y,d(e){e&&G(t)}}}function au(e){let t,n,r,o,i,a,u;const s=[iu,ou,ru],c=[];function l(e,t){return(null==r||4&t)&&(r=!!e[2].is("error")),r?0:((null==o||4&t)&&(o=!!e[2].is("loading")),o?1:2)}return i=l(e,-1),a=c[i]=s[i](e),{c(){t=Z("tr"),n=Z("td"),a.c(),te(n,"colspan",e[0])},m(e,r){K(e,t,r),z(t,n),c[i].m(n,null),u=!0},p(e,[t]){let r=i;i=l(e,t),i===r?c[i].p(e,t):(Ue(),qe(c[r],1,1,(()=>{c[r]=null})),He(),a=c[i],a?a.p(e,t):(a=c[i]=s[i](e),a.c()),ze(a,1),a.m(n,null)),(!u||1&t)&&te(n,"colspan",e[0])},i(e){u||(ze(a),u=!0)},o(e){qe(a),u=!1},d(e){e&&G(t),c[i].d()}}}function uu(e,t,n){let r,o,i=y,a=()=>(i(),i=A(l,(e=>n(2,r=e))),l);F(e,ar,(e=>n(3,o=e))),e.$$.on_destroy.push((()=>i()));let{$$slots:u={},$$scope:s}=t,{colspan:c=1}=t,{op:l}=t;return a(),e.$$set=e=>{"colspan"in e&&n(0,c=e.colspan),"op"in e&&a(n(1,l=e.op)),"$$scope"in e&&n(4,s=e.$$scope)},[c,l,r,o,s,u]}class su extends nt{constructor(e){super(),tt(this,e,uu,au,k,{colspan:0,op:1})}}function cu(e,t,n){const r=e.slice();return r[9]=t[n],r}function lu(e,t,n){const r=e.slice();return r[12]=t[n],r}function du(e){let t,n,r=e[2]("Connections")+"";return{c(){t=Z("h1"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Connections")+"")&&re(n,r)},d(e){e&&G(t)}}}function fu(e){let t,n=e[12].host.replace(/:\d+$/,"")+"";return{c(){t=V(n)},m(e,n){K(e,t,n)},p(e,r){1&r&&n!==(n=e[12].host.replace(/:\d+$/,"")+"")&&re(t,n)},d(e){e&&G(t)}}}function pu(e){let t,n,r,o,i,a,u,s,c,l,d,f=(Zt.true(e[12].tls_verify)?e[2]("Strict"):Zt.true(e[12].tls)?e[2]("Yes"):e[2]("No"))+"",p=e[12].nick+"";return r=new Ci({props:{href:"/settings/connection/"+e[12].connection_id,$$slots:{default:[fu]},$$scope:{ctx:e}}}),{c(){t=Z("tr"),n=Z("td"),Je(r.$$.fragment),o=J(),i=Z("td"),a=V(f),u=J(),s=Z("td"),c=V(p),l=J()},m(e,f){K(e,t,f),z(t,n),Qe(r,n,null),z(t,o),z(t,i),z(i,a),z(t,u),z(t,s),z(s,c),z(t,l),d=!0},p(e,t){const n={};1&t&&(n.href="/settings/connection/"+e[12].connection_id),32769&t&&(n.$$scope={dirty:t,ctx:e}),r.$set(n),(!d||5&t)&&f!==(f=(Zt.true(e[12].tls_verify)?e[2]("Strict"):Zt.true(e[12].tls)?e[2]("Yes"):e[2]("No"))+"")&&re(a,f),(!d||1&t)&&p!==(p=e[12].nick+"")&&re(c,p)},i(e){d||(ze(r.$$.fragment,e),d=!0)},o(e){qe(r.$$.fragment,e),d=!1},d(e){e&&G(t),Xe(r)}}}function mu(e){let t,n,r;return n=new Ci({props:{href:"/settings/connection/add",class:"btn",$$slots:{default:[hu]},$$scope:{ctx:e}}}),{c(){t=Z("div"),Je(n.$$.fragment),te(t,"class","form-actions")},m(e,o){K(e,t,o),Qe(n,t,null),r=!0},p(e,t){const r={};32772&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){r||(ze(n.$$.fragment,e),r=!0)},o(e){qe(n.$$.fragment,e),r=!1},d(e){e&&G(t),Xe(n)}}}function hu(e){let t,n,r,o,i,a=e[2]("Add")+"";return t=new ct({props:{name:"plus-circle"}}),{c(){Je(t.$$.fragment),n=J(),r=Z("span"),o=V(a)},m(e,a){Qe(t,e,a),K(e,n,a),K(e,r,a),z(r,o),i=!0},p(e,t){(!i||4&t)&&a!==(a=e[2]("Add")+"")&&re(o,a)},i(e){i||(ze(t.$$.fragment,e),i=!0)},o(e){qe(t.$$.fragment,e),i=!1},d(e){Xe(t,e),e&&G(n),e&&G(r)}}}function gu(e){let t,n=e[9].url.host.replace(/:\d+$/,"")+"";return{c(){t=V(n)},m(e,n){K(e,t,n)},p(e,r){8&r&&n!==(n=e[9].url.host.replace(/:\d+$/,"")+"")&&re(t,n)},d(e){e&&G(t)}}}function $u(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h=(Zt.true(e[9].tls_verify)?e[2]("Strict"):Zt.true(e[9].tls)?e[2]("Yes"):e[2]("No"))+"",g=(e[9].is_default?e[2]("Yes"):e[2]("No"))+"",$=(e[9].is_forced?e[2]("Yes"):e[2]("No"))+"";return r=new Ci({props:{href:"/settings/connection-profile/"+e[9].id,$$slots:{default:[gu]},$$scope:{ctx:e}}}),{c(){t=Z("tr"),n=Z("td"),Je(r.$$.fragment),o=J(),i=Z("td"),a=V(h),u=J(),s=Z("td"),c=V(g),l=J(),d=Z("td"),f=V($),p=J()},m(e,h){K(e,t,h),z(t,n),Qe(r,n,null),z(t,o),z(t,i),z(i,a),z(t,u),z(t,s),z(s,c),z(t,l),z(t,d),z(d,f),z(t,p),m=!0},p(e,t){const n={};8&t&&(n.href="/settings/connection-profile/"+e[9].id),32776&t&&(n.$$scope={dirty:t,ctx:e}),r.$set(n),(!m||12&t)&&h!==(h=(Zt.true(e[9].tls_verify)?e[2]("Strict"):Zt.true(e[9].tls)?e[2]("Yes"):e[2]("No"))+"")&&re(a,h),(!m||12&t)&&g!==(g=(e[9].is_default?e[2]("Yes"):e[2]("No"))+"")&&re(c,g),(!m||12&t)&&$!==($=(e[9].is_forced?e[2]("Yes"):e[2]("No"))+"")&&re(f,$)},i(e){m||(ze(r.$$.fragment,e),m=!0)},o(e){qe(r.$$.fragment,e),m=!1},d(e){e&&G(t),Xe(r)}}}function vu(e){let t,n,r;return n=new Ci({props:{href:"/settings/connection-profile/add",class:"btn",$$slots:{default:[bu]},$$scope:{ctx:e}}}),{c(){t=Z("div"),Je(n.$$.fragment),te(t,"class","form-actions")},m(e,o){K(e,t,o),Qe(n,t,null),r=!0},p(e,t){const r={};32772&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){r||(ze(n.$$.fragment,e),r=!0)},o(e){qe(n.$$.fragment,e),r=!1},d(e){e&&G(t),Xe(n)}}}function bu(e){let t,n,r,o,i,a=e[2]("Add")+"";return t=new ct({props:{name:"plus-circle"}}),{c(){Je(t.$$.fragment),n=J(),r=Z("span"),o=V(a)},m(e,a){Qe(t,e,a),K(e,n,a),K(e,r,a),z(r,o),i=!0},p(e,t){(!i||4&t)&&a!==(a=e[2]("Add")+"")&&re(o,a)},i(e){i||(ze(t.$$.fragment,e),i=!0)},o(e){qe(t.$$.fragment,e),i=!1},d(e){Xe(t,e),e&&G(n),e&&G(r)}}}function yu(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h,g,$,v,b,y,D,w,_,E,C,k,A,x,F,S,O,B,N,j,T,R,L,M,P,I,U,H,q,W,Q,X,ee,ne=e[2]("Connections")+"",oe=e[2]("Host")+"",ie=e[2]("Secure")+"",ae=e[2]("Nick")+"",ue=e[2]("Connection profiles")+"",se=e[2]("Connection profiles are used to set up global values for every connection that connect to the same host.")+"",ce=e[2]("Host")+"",le=e[2]("Secure")+"",de=e[2]("Default")+"",fe=e[2]("Forced")+"";t=new wt({props:{$$slots:{default:[du]},$$scope:{ctx:e}}});let pe=e[0],me=[];for(let t=0;t<pe.length;t+=1)me[t]=pu(lu(e,pe,t));const he=e=>qe(me[e],1,1,(()=>{me[e]=null}));let ge=(e[1]||!e[4].forced_connection)&&mu(e);W=new su({props:{op:e[5].op}});let $e=e[3].search(),ve=[];for(let t=0;t<$e.length;t+=1)ve[t]=$u(cu(e,$e,t));const be=e=>qe(ve[e],1,1,(()=>{ve[e]=null}));let ye=e[1]&&vu(e);return{c(){Je(t.$$.fragment),n=J(),r=Z("main"),o=Z("h2"),i=V(ne),a=J(),u=Z("table"),s=Z("thead"),c=Z("tr"),l=Z("th"),d=V(oe),f=J(),p=Z("th"),m=V(ie),h=J(),g=Z("th"),$=V(ae),v=J(),b=Z("tbody");for(let e=0;e<me.length;e+=1)me[e].c();y=J(),ge&&ge.c(),D=J(),w=Z("h2"),_=V(ue),E=J(),C=Z("p"),k=V(se),A=J(),x=Z("table"),F=Z("thead"),S=Z("tr"),O=Z("th"),B=V(ce),N=J(),j=Z("th"),T=V(le),R=J(),L=Z("th"),M=V(de),P=J(),I=Z("th"),U=V(fe),H=J(),q=Z("tbody"),Je(W.$$.fragment),Q=J();for(let e=0;e<ve.length;e+=1)ve[e].c();X=J(),ye&&ye.c(),te(r,"class","main")},m(e,G){Qe(t,e,G),K(e,n,G),K(e,r,G),z(r,o),z(o,i),z(r,a),z(r,u),z(u,s),z(s,c),z(c,l),z(l,d),z(c,f),z(c,p),z(p,m),z(c,h),z(c,g),z(g,$),z(u,v),z(u,b);for(let e=0;e<me.length;e+=1)me[e].m(b,null);z(r,y),ge&&ge.m(r,null),z(r,D),z(r,w),z(w,_),z(r,E),z(r,C),z(C,k),z(r,A),z(r,x),z(x,F),z(F,S),z(S,O),z(O,B),z(S,N),z(S,j),z(j,T),z(S,R),z(S,L),z(L,M),z(S,P),z(S,I),z(I,U),z(x,H),z(x,q),Qe(W,q,null),z(q,Q);for(let e=0;e<ve.length;e+=1)ve[e].m(q,null);z(r,X),ye&&ye.m(r,null),ee=!0},p(e,[n]){const o={};if(32772&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o),(!ee||4&n)&&ne!==(ne=e[2]("Connections")+"")&&re(i,ne),(!ee||4&n)&&oe!==(oe=e[2]("Host")+"")&&re(d,oe),(!ee||4&n)&&ie!==(ie=e[2]("Secure")+"")&&re(m,ie),(!ee||4&n)&&ae!==(ae=e[2]("Nick")+"")&&re($,ae),5&n){let t;for(pe=e[0],t=0;t<pe.length;t+=1){const r=lu(e,pe,t);me[t]?(me[t].p(r,n),ze(me[t],1)):(me[t]=pu(r),me[t].c(),ze(me[t],1),me[t].m(b,null))}for(Ue(),t=pe.length;t<me.length;t+=1)he(t);He()}if(e[1]||!e[4].forced_connection?ge?(ge.p(e,n),2&n&&ze(ge,1)):(ge=mu(e),ge.c(),ze(ge,1),ge.m(r,D)):ge&&(Ue(),qe(ge,1,1,(()=>{ge=null})),He()),(!ee||4&n)&&ue!==(ue=e[2]("Connection profiles")+"")&&re(_,ue),(!ee||4&n)&&se!==(se=e[2]("Connection profiles are used to set up global values for every connection that connect to the same host.")+"")&&re(k,se),(!ee||4&n)&&ce!==(ce=e[2]("Host")+"")&&re(B,ce),(!ee||4&n)&&le!==(le=e[2]("Secure")+"")&&re(T,le),(!ee||4&n)&&de!==(de=e[2]("Default")+"")&&re(M,de),(!ee||4&n)&&fe!==(fe=e[2]("Forced")+"")&&re(U,fe),12&n){let t;for($e=e[3].search(),t=0;t<$e.length;t+=1){const r=cu(e,$e,t);ve[t]?(ve[t].p(r,n),ze(ve[t],1)):(ve[t]=$u(r),ve[t].c(),ze(ve[t],1),ve[t].m(q,null))}for(Ue(),t=$e.length;t<ve.length;t+=1)be(t);He()}e[1]?ye?(ye.p(e,n),2&n&&ze(ye,1)):(ye=vu(e),ye.c(),ze(ye,1),ye.m(r,null)):ye&&(Ue(),qe(ye,1,1,(()=>{ye=null})),He())},i(e){if(!ee){ze(t.$$.fragment,e);for(let e=0;e<pe.length;e+=1)ze(me[e]);ze(ge),ze(W.$$.fragment,e);for(let e=0;e<$e.length;e+=1)ze(ve[e]);ze(ye),ee=!0}},o(e){qe(t.$$.fragment,e),me=me.filter(Boolean);for(let e=0;e<me.length;e+=1)qe(me[e]);qe(ge),qe(W.$$.fragment,e),ve=ve.filter(Boolean);for(let e=0;e<ve.length;e+=1)qe(ve[e]);qe(ye),ee=!1},d(e){Xe(t,e),e&&G(n),e&&G(r),Y(me,e),ge&&ge.d(),Xe(W),Y(ve,e),ye&&ye.d()}}}function Du(e,t,n){let r,o,i,a;F(e,ar,(e=>n(2,i=e)));const u=De("user");F(e,u,(e=>n(7,o=e)));const s=u.connectionProfiles;F(e,s,(e=>n(3,a=e)));const c=e=>e.url.toFields({connection_id:e.connection_id});let l=[];return ve((()=>s.load())),e.$$.update=()=>{129&e.$$.dirty&&o.is("success")&&!l.length&&n(0,l=u.connections.toArray().map(c))},n(1,r=u.roles.has("admin")),[l,r,i,a,u,s,"Connections",o]}class wu extends nt{constructor(e){super(),tt(this,e,Du,yu,k,{title:6})}get title(){return this.$$.ctx[6]}}function _u(e){let t,n,r,o,i,a,u=Qt(e[2]("See all connection profiles"))+"";return t=new ct({props:{name:"list"}}),n=new ct({props:{name:"times"}}),{c(){Je(t.$$.fragment),Je(n.$$.fragment),r=J(),o=Z("span"),i=V(u),te(o,"class","tooltip is-left")},m(e,u){Qe(t,e,u),Qe(n,e,u),K(e,r,u),K(e,o,u),z(o,i),a=!0},p(e,t){(!a||4&t)&&u!==(u=Qt(e[2]("See all connection profiles"))+"")&&re(i,u)},i(e){a||(ze(t.$$.fragment,e),ze(n.$$.fragment,e),a=!0)},o(e){qe(t.$$.fragment,e),qe(n.$$.fragment,e),a=!1},d(e){Xe(t,e),Xe(n,e),e&&G(r),e&&G(o)}}}function Eu(e){let t,n,r,o,i,a=("add"==e[0]?e[2]("Add connection profile"):e[2]("Edit connection profile"))+"";return o=new Ci({props:{href:"/settings/connections",class:"btn-hallow has-tooltip is-active",$$slots:{default:[_u]},$$scope:{ctx:e}}}),{c(){t=Z("h1"),n=V(a),r=J(),Je(o.$$.fragment)},m(e,a){K(e,t,a),z(t,n),K(e,r,a),Qe(o,e,a),i=!0},p(e,t){(!i||5&t)&&a!==(a=("add"==e[0]?e[2]("Add connection profile"):e[2]("Edit connection profile"))+"")&&re(n,a);const r={};16388&t&&(r.$$scope={dirty:t,ctx:e}),o.$set(r)},i(e){i||(ze(o.$$.fragment,e),i=!0)},o(e){qe(o.$$.fragment,e),i=!1},d(e){e&&G(t),e&&G(r),Xe(o,e)}}}function Cu(e){let t,n,r=e[2]("Host and port")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Host and port")+"")&&re(n,r)},d(e){e&&G(t)}}}function ku(e){let t,n,r=e[2]("Will match connections on hostname.")+"";return{c(){t=Z("p"),n=V(r),te(t,"class","help"),te(t,"slot","help")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Will match connections on hostname.")+"")&&re(n,r)},d(e){e&&G(t)}}}function Au(e){let t,n,r=e[2]("Secure connection (TLS)")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Secure connection (TLS)")+"")&&re(n,r)},d(e){e&&G(t)}}}function xu(e){let t,n,r=e[2]("Verify certificate (TLS)")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Verify certificate (TLS)")+"")&&re(n,r)},d(e){e&&G(t)}}}function Fu(e){let t,n,r=e[2]("Conversation name")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Conversation name")+"")&&re(n,r)},d(e){e&&G(t)}}}function Su(e){let t,n,r=e[2]("Service accounts")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Service accounts")+"")&&re(n,r)},d(e){e&&G(t)}}}function Ou(e){let t,n,r=e[2]("Messages from these nicks will be shown in the connection conversation.")+"";return{c(){t=Z("p"),n=V(r),te(t,"class","help"),te(t,"slot","help")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Messages from these nicks will be shown in the connection conversation.")+"")&&re(n,r)},d(e){e&&G(t)}}}function Bu(e){let t,n,r=e[2]("Default connection")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Default connection")+"")&&re(n,r)},d(e){e&&G(t)}}}function Nu(e){let t,n,r=e[2]("Force default connection")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Force default connection")+"")&&re(n,r)},d(e){e&&G(t)}}}function ju(e){let t,n,r,o=e[2]("Tick this box if you want to prevent users from creating custom connections.")+"";return{c(){t=Z("p"),n=V(o),te(t,"class","help"),t.hidden=r=!e[3].is_default},m(e,r){K(e,t,r),z(t,n)},p(e,i){4&i&&o!==(o=e[2]("Tick this box if you want to prevent users from creating custom connections.")+"")&&re(n,o),8&i&&r!==(r=!e[3].is_default)&&(t.hidden=r)},d(e){e&&G(t)}}}function Tu(e){let t,n,r=e[2]("Advanced settings")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Advanced settings")+"")&&re(n,r)},d(e){e&&G(t)}}}function Ru(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m=e[2]("This might result in flood ban.")+"";return n=new ko({props:{name:"max_bulk_message_size",form:e[5],type:"number",readonly:!e[1],$$slots:{help:[Mu],label:[Lu]},$$scope:{ctx:e}}}),o=new ko({props:{name:"max_message_length",form:e[5],type:"number",readonly:!e[1],$$slots:{help:[Iu],label:[Pu]},$$scope:{ctx:e}}}),a=new ko({props:{name:"webirc_password",form:e[5],type:"password",readonly:!e[1],$$slots:{label:[Uu]},$$scope:{ctx:e}}}),s=new Xr({props:{name:"skip_queue",form:e[5],disabled:!e[1],$$slots:{label:[Hu]},$$scope:{ctx:e}}}),{c(){t=Z("div"),Je(n.$$.fragment),r=J(),Je(o.$$.fragment),i=J(),Je(a.$$.fragment),u=J(),Je(s.$$.fragment),c=J(),l=Z("p"),d=V(m),te(l,"class","help"),te(t,"class","form-group")},m(e,f){K(e,t,f),Qe(n,t,null),z(t,r),Qe(o,t,null),z(t,i),Qe(a,t,null),z(t,u),Qe(s,t,null),z(t,c),z(t,l),z(l,d),p=!0},p(e,t){const r={};2&t&&(r.readonly=!e[1]),16388&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r);const i={};2&t&&(i.readonly=!e[1]),16388&t&&(i.$$scope={dirty:t,ctx:e}),o.$set(i);const u={};2&t&&(u.readonly=!e[1]),16388&t&&(u.$$scope={dirty:t,ctx:e}),a.$set(u);const c={};2&t&&(c.disabled=!e[1]),16388&t&&(c.$$scope={dirty:t,ctx:e}),s.$set(c),(!p||4&t)&&m!==(m=e[2]("This might result in flood ban.")+"")&&re(d,m)},i(e){p||(ze(n.$$.fragment,e),ze(o.$$.fragment,e),ze(a.$$.fragment,e),ze(s.$$.fragment,e),Oe((()=>{f||(f=Ke(t,jr,{duration:150},!0)),f.run(1)})),p=!0)},o(e){qe(n.$$.fragment,e),qe(o.$$.fragment,e),qe(a.$$.fragment,e),qe(s.$$.fragment,e),f||(f=Ke(t,jr,{duration:150},!1)),f.run(0),p=!1},d(e){e&&G(t),Xe(n),Xe(o),Xe(a),Xe(s),e&&f&&f.end()}}}function Lu(e){let t,n,r=e[2]("Max number of pasted lines")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Max number of pasted lines")+"")&&re(n,r)},d(e){e&&G(t)}}}function Mu(e){let t,n,r=e[2]("Setting this value too high might get you banned from the server.")+"";return{c(){t=Z("p"),n=V(r),te(t,"class","help"),te(t,"slot","help")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Setting this value too high might get you banned from the server.")+"")&&re(n,r)},d(e){e&&G(t)}}}function Pu(e){let t,n,r=e[2]("Max message length")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Max message length")+"")&&re(n,r)},d(e){e&&G(t)}}}function Iu(e){let t,n,r=e[2]("Messages longer than this will be split into multiple messages.")+"";return{c(){t=Z("p"),n=V(r),te(t,"class","help"),te(t,"slot","help")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Messages longer than this will be split into multiple messages.")+"")&&re(n,r)},d(e){e&&G(t)}}}function Uu(e){let t,n,r=e[2]("WEBIRC password")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("WEBIRC password")+"")&&re(n,r)},d(e){e&&G(t)}}}function Hu(e){let t,n,r=e[2]("Skip connection queue")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Skip connection queue")+"")&&re(n,r)},d(e){e&&G(t)}}}function zu(e){let t,n,r=e[2]("Only administrators can edit this section.")+"";return{c(){t=Z("p"),n=V(r),te(t,"class","error")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Only administrators can edit this section.")+"")&&re(n,r)},d(e){e&&G(t)}}}function qu(e){let t,n;return t=new Gr({props:{icon:"plus-circle",op:e[7],$$slots:{default:[Ku]},$$scope:{ctx:e}}}),{c(){Je(t.$$.fragment)},m(e,r){Qe(t,e,r),n=!0},p(e,n){const r={};16388&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(ze(t.$$.fragment,e),n=!0)},o(e){qe(t.$$.fragment,e),n=!1},d(e){Xe(t,e)}}}function Wu(e){let t,n,r,o;return t=new Gr({props:{icon:"save",op:e[7],disabled:!e[1],$$slots:{default:[Gu]},$$scope:{ctx:e}}}),r=new Gr({props:{icon:"trash",type:"button",op:e[6],disabled:!e[1],$$slots:{default:[Yu]},$$scope:{ctx:e}}}),r.$on("click",e[8]),{c(){Je(t.$$.fragment),n=J(),Je(r.$$.fragment)},m(e,i){Qe(t,e,i),K(e,n,i),Qe(r,e,i),o=!0},p(e,n){const o={};2&n&&(o.disabled=!e[1]),16388&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o);const i={};2&n&&(i.disabled=!e[1]),16388&n&&(i.$$scope={dirty:n,ctx:e}),r.$set(i)},i(e){o||(ze(t.$$.fragment,e),ze(r.$$.fragment,e),o=!0)},o(e){qe(t.$$.fragment,e),qe(r.$$.fragment,e),o=!1},d(e){Xe(t,e),e&&G(n),Xe(r,e)}}}function Ku(e){let t,n,r=e[2]("Add")+"";return{c(){t=Z("span"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Add")+"")&&re(n,r)},d(e){e&&G(t)}}}function Gu(e){let t,n,r=e[2]("Update")+"";return{c(){t=Z("span"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Update")+"")&&re(n,r)},d(e){e&&G(t)}}}function Yu(e){let t,n,r=e[2]("Delete")+"";return{c(){t=Z("span"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Delete")+"")&&re(n,r)},d(e){e&&G(t)}}}function Zu(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h,g,$,v,b,y,D,w,_,E,C,k,A,x,F,S,O,B,N;t=new wt({props:{$$slots:{default:[Eu]},$$scope:{ctx:e}}}),i=new ko({props:{name:"host",form:e[5],placeholder:e[2]("Ex: irc.libera.chat:6697"),readonly:!e[1],$$slots:{help:[ku],label:[Cu]},$$scope:{ctx:e}}}),u=new Xr({props:{name:"tls",form:e[5],disabled:!e[1],$$slots:{label:[Au]},$$scope:{ctx:e}}}),c=new Xr({props:{name:"tls_verify",form:e[5],disabled:!e[3].tls||!e[1],hidden:!e[3].tls,$$slots:{label:[xu]},$$scope:{ctx:e}}}),d=new ko({props:{name:"conversation_id",form:e[5],placeholder:e[2]("Ex: #convos"),readonly:!e[1],$$slots:{label:[Fu]},$$scope:{ctx:e}}}),p=new ko({props:{name:"service_accounts",form:e[5],placeholder:e[2]("chanserv, nickserv, ..."),readonly:!e[1],$$slots:{help:[Ou],label:[Su]},$$scope:{ctx:e}}}),h=new Xr({props:{name:"is_default",form:e[5],disabled:!e[1],$$slots:{label:[Bu]},$$scope:{ctx:e}}}),$=new Xr({props:{name:"is_forced",form:e[5],disabled:!e[1],hidden:!e[3].is_default,$$slots:{label:[Nu]},$$scope:{ctx:e}}});let j=e[1]&&ju(e);y=new Xr({props:{icon:"caret",name:"show_advanced_settings",form:e[5],$$slots:{label:[Tu]},$$scope:{ctx:e}}});let T=e[3].show_advanced_settings&&Ru(e),R=!e[1]&&zu(e);const L=[Wu,qu],M=[];function P(e,t){return"add"!=e[0]?0:1}return C=P(e),k=M[C]=L[C](e),x=new io({props:{op:e[6],success:"Deleted."}}),S=new io({props:{op:e[7]}}),{c(){Je(t.$$.fragment),n=J(),r=Z("main"),o=Z("form"),Je(i.$$.fragment),a=J(),Je(u.$$.fragment),s=J(),Je(c.$$.fragment),l=J(),Je(d.$$.fragment),f=J(),Je(p.$$.fragment),m=J(),Je(h.$$.fragment),g=J(),Je($.$$.fragment),v=J(),j&&j.c(),b=J(),Je(y.$$.fragment),D=J(),T&&T.c(),w=J(),R&&R.c(),_=J(),E=Z("div"),k.c(),A=J(),Je(x.$$.fragment),F=J(),Je(S.$$.fragment),te(E,"class","form-actions"),te(o,"method","post"),te(r,"class","main")},m(k,L){Qe(t,k,L),K(k,n,L),K(k,r,L),z(r,o),Qe(i,o,null),z(o,a),Qe(u,o,null),z(o,s),Qe(c,o,null),z(o,l),Qe(d,o,null),z(o,f),Qe(p,o,null),z(o,m),Qe(h,o,null),z(o,g),Qe($,o,null),z(o,v),j&&j.m(o,null),z(o,b),Qe(y,o,null),z(o,D),T&&T.m(o,null),z(o,w),R&&R.m(o,null),z(o,_),z(o,E),M[C].m(E,null),z(o,A),Qe(x,o,null),z(o,F),Qe(S,o,null),O=!0,B||(N=X(o,"submit",ee(e[9])),B=!0)},p(e,[n]){const r={};16389&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r);const a={};4&n&&(a.placeholder=e[2]("Ex: irc.libera.chat:6697")),2&n&&(a.readonly=!e[1]),16388&n&&(a.$$scope={dirty:n,ctx:e}),i.$set(a);const s={};2&n&&(s.disabled=!e[1]),16388&n&&(s.$$scope={dirty:n,ctx:e}),u.$set(s);const l={};10&n&&(l.disabled=!e[3].tls||!e[1]),8&n&&(l.hidden=!e[3].tls),16388&n&&(l.$$scope={dirty:n,ctx:e}),c.$set(l);const f={};4&n&&(f.placeholder=e[2]("Ex: #convos")),2&n&&(f.readonly=!e[1]),16388&n&&(f.$$scope={dirty:n,ctx:e}),d.$set(f);const m={};4&n&&(m.placeholder=e[2]("chanserv, nickserv, ...")),2&n&&(m.readonly=!e[1]),16388&n&&(m.$$scope={dirty:n,ctx:e}),p.$set(m);const g={};2&n&&(g.disabled=!e[1]),16388&n&&(g.$$scope={dirty:n,ctx:e}),h.$set(g);const v={};2&n&&(v.disabled=!e[1]),8&n&&(v.hidden=!e[3].is_default),16388&n&&(v.$$scope={dirty:n,ctx:e}),$.$set(v),e[1]?j?j.p(e,n):(j=ju(e),j.c(),j.m(o,b)):j&&(j.d(1),j=null);const D={};16388&n&&(D.$$scope={dirty:n,ctx:e}),y.$set(D),e[3].show_advanced_settings?T?(T.p(e,n),8&n&&ze(T,1)):(T=Ru(e),T.c(),ze(T,1),T.m(o,w)):T&&(Ue(),qe(T,1,1,(()=>{T=null})),He()),e[1]?R&&(R.d(1),R=null):R?R.p(e,n):(R=zu(e),R.c(),R.m(o,_));let A=C;C=P(e),C===A?M[C].p(e,n):(Ue(),qe(M[A],1,1,(()=>{M[A]=null})),He(),k=M[C],k?k.p(e,n):(k=M[C]=L[C](e),k.c()),ze(k,1),k.m(E,null))},i(e){O||(ze(t.$$.fragment,e),ze(i.$$.fragment,e),ze(u.$$.fragment,e),ze(c.$$.fragment,e),ze(d.$$.fragment,e),ze(p.$$.fragment,e),ze(h.$$.fragment,e),ze($.$$.fragment,e),ze(y.$$.fragment,e),ze(T),ze(k),ze(x.$$.fragment,e),ze(S.$$.fragment,e),O=!0)},o(e){qe(t.$$.fragment,e),qe(i.$$.fragment,e),qe(u.$$.fragment,e),qe(c.$$.fragment,e),qe(d.$$.fragment,e),qe(p.$$.fragment,e),qe(h.$$.fragment,e),qe($.$$.fragment,e),qe(y.$$.fragment,e),qe(T),qe(k),qe(x.$$.fragment,e),qe(S.$$.fragment,e),O=!1},d(e){Xe(t,e),e&&G(n),e&&G(r),Xe(i),Xe(u),Xe(c),Xe(d),Xe(p),Xe(h),Xe($),j&&j.d(),Xe(y),T&&T.d(),R&&R.d(),M[C].d(),Xe(x),Xe(S),B=!1,N()}}}function Vu(e,t,n){let r,o,i,a;F(e,ar,(e=>n(2,i=e)));let{profile_id:u="add"}=t;const s="add"==u?"Add connection profile":"Edit connection profile",c=De("api"),l=De("user"),d=l.connectionProfiles;F(e,d,(e=>n(11,o=e)));const f=No();F(e,f,(e=>n(3,a=e)));const p=c("removeConnectionProfile"),m=c("saveConnectionProfile");return ve((()=>d.load())),e.$$set=e=>{"profile_id"in e&&n(0,u=e.profile_id)},e.$$.update=()=>{2049&e.$$.dirty&&f.set(o.find(u)||o.defaultProfile())},n(1,r=l.roles.has("admin")),[u,r,i,a,d,f,p,m,async function(){await p.perform({id:u}),await d.load({force:!0}),await Se(),Hn.go("/settings/connections")},async function(){const e=f.get();["is_default","is_forced","skip_queue"].forEach((t=>e[t]=!!e[t])),e.service_accounts=rn(e.service_accounts),e.url=new eo("irc://localhost").fromFields(e).toString(),await m.perform(e),m.is("error")||(e.is_default&&l.update({default_connection:e.url,forced_connection:e.is_forced}),await d.load({force:!0}),await Se(),Hn.go("/settings/connections"))},s,o]}class Ju extends nt{constructor(e){super(),tt(this,e,Vu,Zu,k,{profile_id:0,title:10})}get title(){return this.$$.ctx[10]}}function Qu(e){let t,n,r,o,i,a,u=Qt(e[1]("See all connections"))+"";return t=new ct({props:{name:"list"}}),n=new ct({props:{name:"times"}}),{c(){Je(t.$$.fragment),Je(n.$$.fragment),r=J(),o=Z("span"),i=V(u),te(o,"class","tooltip is-left")},m(e,u){Qe(t,e,u),Qe(n,e,u),K(e,r,u),K(e,o,u),z(o,i),a=!0},p(e,t){(!a||2&t)&&u!==(u=Qt(e[1]("See all connections"))+"")&&re(i,u)},i(e){a||(ze(t.$$.fragment,e),ze(n.$$.fragment,e),a=!0)},o(e){qe(t.$$.fragment,e),qe(n.$$.fragment,e),a=!1},d(e){Xe(t,e),Xe(n,e),e&&G(r),e&&G(o)}}}function Xu(e){let t,n,r,o,i,a=("add"==e[0]?e[1]("Add connection"):e[1]("Edit connection"))+"";return o=new Ci({props:{href:"/settings/connections",class:"btn-hallow has-tooltip is-active",$$slots:{default:[Qu]},$$scope:{ctx:e}}}),{c(){t=Z("h1"),n=V(a),r=J(),Je(o.$$.fragment)},m(e,a){K(e,t,a),z(t,n),K(e,r,a),Qe(o,e,a),i=!0},p(e,t){(!i||3&t)&&a!==(a=("add"==e[0]?e[1]("Add connection"):e[1]("Edit connection"))+"")&&re(n,a);const r={};10&t&&(r.$$scope={dirty:t,ctx:e}),o.$set(r)},i(e){i||(ze(o.$$.fragment,e),i=!0)},o(e){qe(o.$$.fragment,e),i=!1},d(e){e&&G(t),e&&G(r),Xe(o,e)}}}function es(e){let t,n,r,o,i;return t=new wt({props:{$$slots:{default:[Xu]},$$scope:{ctx:e}}}),o=new hi({props:{id:e[0],is_page:!0}}),{c(){Je(t.$$.fragment),n=J(),r=Z("main"),Je(o.$$.fragment),te(r,"class","main")},m(e,a){Qe(t,e,a),K(e,n,a),K(e,r,a),Qe(o,r,null),i=!0},p(e,[n]){const r={};11&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r);const i={};1&n&&(i.id=e[0]),o.$set(i)},i(e){i||(ze(t.$$.fragment,e),ze(o.$$.fragment,e),i=!0)},o(e){qe(t.$$.fragment,e),qe(o.$$.fragment,e),i=!1},d(e){Xe(t,e),e&&G(n),e&&G(r),Xe(o)}}}function ts(e,t,n){let r;F(e,ar,(e=>n(1,r=e)));let{connection_id:o="add"}=t;const i="add"==o?"Add connection":"Edit connection";return e.$$set=e=>{"connection_id"in e&&n(0,o=e.connection_id)},[o,r,i]}class ns extends nt{constructor(e){super(),tt(this,e,ts,es,k,{connection_id:0,title:2})}get title(){return this.$$.ctx[2]}}function rs(e,t,n){const r=e.slice();return r[14]=t[n],r}function os(e){let t,n,r=e[3]("Add conversation")+"";return{c(){t=Z("h1"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){8&t&&r!==(r=e[3]("Add conversation")+"")&&re(n,r)},d(e){e&&G(t)}}}function is(e){let t,n,r=e[3]("Connection")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){8&t&&r!==(r=e[3]("Connection")+"")&&re(n,r)},d(e){e&&G(t)}}}function as(e){let t,n,r=e[3](e[1].conversations.length?"Refresh":"Load")+"";return{c(){t=Z("span"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){10&t&&r!==(r=e[3](e[1].conversations.length?"Refresh":"Load")+"")&&re(n,r)},d(e){e&&G(t)}}}function us(e){let t,n,r=e[3]("Conversation name")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){8&t&&r!==(r=e[3]("Conversation name")+"")&&re(n,r)},d(e){e&&G(t)}}}function ss(e){let t,n,r=e[3]("Add")+"";return{c(){t=Z("span"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){8&t&&r!==(r=e[3]("Add")+"")&&re(n,r)},d(e){e&&G(t)}}}function cs(e){let t,n,r,o,i=e[0].connection_id+"",a=e[1].error+"";return{c(){t=Z("p"),n=V(i),r=V(": "),o=V(a),te(t,"class","error")},m(e,i){K(e,t,i),z(t,n),z(t,r),z(t,o)},p(e,t){1&t&&i!==(i=e[0].connection_id+"")&&re(n,i),2&t&&a!==(a=e[1].error+"")&&re(o,a)},d(e){e&&G(t)}}}function ls(e){let t,n,r;function o(e,t){return e[1].done?fs:ds}let i=o(e),a=i(e),u=e[1].conversations,s=[];for(let t=0;t<u.length;t+=1)s[t]=ps(rs(e,u,t));return{c(){t=Z("p"),a.c(),n=J(),r=Z("div");for(let e=0;e<s.length;e+=1)s[e].c();te(r,"class","conversation-add-list")},m(e,o){K(e,t,o),a.m(t,null),K(e,n,o),K(e,r,o);for(let e=0;e<s.length;e+=1)s[e].m(r,null)},p(e,n){if(i===(i=o(e))&&a?a.p(e,n):(a.d(1),a=i(e),a&&(a.c(),a.m(t,null))),66&n){let t;for(u=e[1].conversations,t=0;t<u.length;t+=1){const o=rs(e,u,t);s[t]?s[t].p(o,n):(s[t]=ps(o),s[t].c(),s[t].m(r,null))}for(;t<s.length;t+=1)s[t].d(1);s.length=u.length}},d(e){e&&G(t),a.d(),e&&G(n),e&&G(r),Y(s,e)}}}function ds(e){let t,n=e[3]("Showing %1 of %2 conversations, but the list is still loading.",e[1].conversations.length,e[1].n_conversations)+"";return{c(){t=V(n)},m(e,n){K(e,t,n)},p(e,r){10&r&&n!==(n=e[3]("Showing %1 of %2 conversations, but the list is still loading.",e[1].conversations.length,e[1].n_conversations)+"")&&re(t,n)},d(e){e&&G(t)}}}function fs(e){let t,n=e[3]("Showing %1 of %2 conversations.",e[1].conversations.length,e[1].n_conversations)+"";return{c(){t=V(n)},m(e,n){K(e,t,n)},p(e,r){10&r&&n!==(n=e[3]("Showing %1 of %2 conversations.",e[1].conversations.length,e[1].n_conversations)+"")&&re(t,n)},d(e){e&&G(t)}}}function ps(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m=e[14].n_users+"",h=e[14].name+"",g=(e[14].topic||"No topic.")+"";return{c(){t=Z("a"),n=Z("span"),r=V(m),o=J(),i=Z("b"),a=V(h),u=J(),s=Z("i"),c=V(g),l=J(),te(n,"class","conversation-add-list__n-users"),te(i,"class","conversation-add-list__name"),te(s,"class","conversation-add-list__title"),te(t,"href",d="#add:"+e[14].name)},m(d,m){K(d,t,m),z(t,n),z(n,r),z(t,o),z(t,i),z(i,a),z(t,u),z(t,s),z(s,c),z(t,l),f||(p=X(t,"click",ee(e[6])),f=!0)},p(e,n){2&n&&m!==(m=e[14].n_users+"")&&re(r,m),2&n&&h!==(h=e[14].name+"")&&re(a,h),2&n&&g!==(g=(e[14].topic||"No topic.")+"")&&re(c,g),2&n&&d!==(d="#add:"+e[14].name)&&te(t,"href",d)},d(e){e&&G(t),f=!1,p()}}}function ms(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h,g,$,v,b,y,D,w,_,E=e[3]("Enter the name of an exising conversation, or create a new conversation.")+"";t=new wt({props:{$$slots:{default:[os]},$$scope:{ctx:e}}}),c=new po({props:{name:"connection_id",form:e[4],options:e[2],placeholder:e[3]("Select..."),$$slots:{label:[is]},$$scope:{ctx:e}}}),f=new Gr({props:{type:"button",icon:"sync-alt",disabled:!e[0].connection_id||!1===e[1].done,$$slots:{default:[as]},$$scope:{ctx:e}}}),f.$on("click",e[7]),h=new ko({props:{name:"conversation_id",form:e[4],placeholder:e[3]("#room or nick"),autocomplete:"off",$$slots:{label:[us]},$$scope:{ctx:e}}}),h.$on("keyup",e[8]),v=new Gr({props:{icon:"comment",disabled:!e[0].connection_id||!e[0].conversation_id,$$slots:{default:[ss]},$$scope:{ctx:e}}});let C=e[1].error&&cs(e),k=null!==e[1].done&&ls(e);return{c(){Je(t.$$.fragment),n=J(),r=Z("main"),o=Z("p"),i=V(E),a=J(),u=Z("form"),s=Z("div"),Je(c.$$.fragment),l=J(),d=Z("div"),Je(f.$$.fragment),p=J(),m=Z("div"),Je(h.$$.fragment),g=J(),$=Z("div"),Je(v.$$.fragment),b=J(),C&&C.c(),y=J(),k&&k.c(),te(d,"class","flex-basis-30"),te(s,"class","inputs-side-by-side"),te($,"class","flex-basis-30"),te(m,"class","inputs-side-by-side"),te(u,"method","post"),te(r,"class","main")},m(E,A){Qe(t,E,A),K(E,n,A),K(E,r,A),z(r,o),z(o,i),z(r,a),z(r,u),z(u,s),Qe(c,s,null),z(s,l),z(s,d),Qe(f,d,null),z(u,p),z(u,m),Qe(h,m,null),z(m,g),z(m,$),Qe(v,$,null),z(u,b),C&&C.m(u,null),z(u,y),k&&k.m(u,null),D=!0,w||(_=X(u,"submit",ee(e[6])),w=!0)},p(e,[n]){const r={};131080&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r),(!D||8&n)&&E!==(E=e[3]("Enter the name of an exising conversation, or create a new conversation.")+"")&&re(i,E);const o={};4&n&&(o.options=e[2]),8&n&&(o.placeholder=e[3]("Select...")),131080&n&&(o.$$scope={dirty:n,ctx:e}),c.$set(o);const a={};3&n&&(a.disabled=!e[0].connection_id||!1===e[1].done),131082&n&&(a.$$scope={dirty:n,ctx:e}),f.$set(a);const s={};8&n&&(s.placeholder=e[3]("#room or nick")),131080&n&&(s.$$scope={dirty:n,ctx:e}),h.$set(s);const l={};1&n&&(l.disabled=!e[0].connection_id||!e[0].conversation_id),131080&n&&(l.$$scope={dirty:n,ctx:e}),v.$set(l),e[1].error?C?C.p(e,n):(C=cs(e),C.c(),C.m(u,y)):C&&(C.d(1),C=null),null!==e[1].done?k?k.p(e,n):(k=ls(e),k.c(),k.m(u,null)):k&&(k.d(1),k=null)},i(e){D||(ze(t.$$.fragment,e),ze(c.$$.fragment,e),ze(f.$$.fragment,e),ze(h.$$.fragment,e),ze(v.$$.fragment,e),D=!0)},o(e){qe(t.$$.fragment,e),qe(c.$$.fragment,e),qe(f.$$.fragment,e),qe(h.$$.fragment,e),qe(v.$$.fragment,e),D=!1},d(e){Xe(t,e),e&&G(n),e&&G(r),Xe(c),Xe(f),Xe(h),Xe(v),C&&C.d(),k&&k.d(),w=!1,_()}}}function hs(e,t,n){let r,o,i,a;F(e,ar,(e=>n(3,a=e)));const u=No();F(e,u,(e=>n(0,o=e)));const s=De("socket"),c=De("user");F(e,c,(e=>n(10,i=e)));let l,d={conversations:[],done:null,n_conversations:0};async function f(e){const t=u.get("conversation_id")||"";let r="/list"+(t.length?" /"+t+"/":"");"click"==e.type&&d.done&&(r+=" refresh"),l&&clearTimeout(l);const o=u.get("connection_id");s.send({connection_id:o,message:r,method:"send"},(t=>{const r=Kt(t);n(1,d=r?{conversations:[],done:!0,n_conversations:0,error:r}:t);let o=e.interval?e.interval+500:500;o>2e3&&(o=2e3),r||t.done||(l=setTimeout((()=>f({interval:o})),o))}))}const p=Wt(f,250);return e.$$.update=()=>{1024&e.$$.dirty&&n(2,r=Array.from(i.connections.keys()).map((e=>[e]))),1&e.$$.dirty&&(o.connection_id||u.set({connection_id:Hn.param("connection_id")||r[0]||"",conversation_id:Hn.param("conversation_id")||""}))},[o,d,r,a,u,c,function(e){const t=e&&e.target&&e.target.closest("a");t&&t.href&&u.set({conversation_id:t.href.replace(/.*#add:/,"")});const n=c.findConversation({connection_id:u.get("connection_id")});n&&u.get("conversation_id")&&n.send("/join "+u.get("conversation_id"))},f,p,"Add conversation",i]}class gs extends nt{constructor(e){super(),tt(this,e,hs,ms,k,{title:9})}get title(){return this.$$.ctx[9]}}function $s(e){let t,n,r,o,i,a,u,s,c=e[4]("Yikes! we are so sorry for the inconvenience. Please submit an [issue](%1), if the problem does not go away.","https://github.com/convos-chat/convos/issues")+"",l=e[2]("Go to start page")+"";return i=new ct({props:{name:"play"}}),{c(){t=Z("p"),n=J(),r=Z("p"),o=Z("a"),Je(i.$$.fragment),a=J(),u=V(l),te(o,"href",e[1]),te(o,"target","_self"),te(o,"class","btn")},m(e,l){K(e,t,l),t.innerHTML=c,K(e,n,l),K(e,r,l),z(r,o),Qe(i,o,null),z(o,a),z(o,u),s=!0},p(e,n){(!s||16&n)&&c!==(c=e[4]("Yikes! we are so sorry for the inconvenience. Please submit an [issue](%1), if the problem does not go away.","https://github.com/convos-chat/convos/issues")+"")&&(t.innerHTML=c),(!s||4&n)&&l!==(l=e[2]("Go to start page")+"")&&re(u,l),(!s||2&n)&&te(o,"href",e[1])},i(e){s||(ze(i.$$.fragment,e),s=!0)},o(e){qe(i.$$.fragment,e),s=!1},d(e){e&&G(t),e&&G(n),e&&G(r),Xe(i)}}}function vs(e){let t,n,r,o,i,a,u,s,c,l=e[2]("The Convos Team have been searching and searching, but the requested page could not be found.")+"",d=e[2]("Go to start page")+"";return a=new ct({props:{name:"play"}}),{c(){t=Z("p"),n=V(l),r=J(),o=Z("p"),i=Z("a"),Je(a.$$.fragment),u=J(),s=V(d),te(i,"href",e[1]),te(i,"target","_self"),te(i,"class","btn")},m(e,l){K(e,t,l),z(t,n),K(e,r,l),K(e,o,l),z(o,i),Qe(a,i,null),z(i,u),z(i,s),c=!0},p(e,t){(!c||4&t)&&l!==(l=e[2]("The Convos Team have been searching and searching, but the requested page could not be found.")+"")&&re(n,l),(!c||4&t)&&d!==(d=e[2]("Go to start page")+"")&&re(s,d),(!c||2&t)&&te(i,"href",e[1])},i(e){c||(ze(a.$$.fragment,e),c=!0)},o(e){qe(a.$$.fragment,e),c=!1},d(e){e&&G(t),e&&G(r),e&&G(o),Xe(a)}}}function bs(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h,g,$,v,b,y,D=e[2]("Downloaded Convos.")+"",w=e[2]("Started Convos.")+"",_=e[2]("Contact admin")+"";n=new ct({props:{name:"download"}}),u=new ct({props:{name:"rocket"}});const E=[Ds,ys],C=[];function k(e,t){return e[3].error?0:1}d=k(e),f=C[d]=E[d](e),g=new ct({props:{name:"paper-plane"}});let A={ctx:e,current:null,token:null,hasCatch:!1,pending:Es,then:_s,catch:ws,blocks:[,,,]};return Ge(e[8],A),{c(){t=Z("p"),Je(n.$$.fragment),r=J(),o=V(D),i=J(),a=Z("p"),Je(u.$$.fragment),s=J(),c=V(w),l=J(),f.c(),p=J(),m=Z("p"),h=Z("a"),Je(g.$$.fragment),$=J(),v=V(_),b=J(),A.block.c(),te(h,"class","btn"),te(h,"href",tn("contact"))},m(e,f){K(e,t,f),Qe(n,t,null),z(t,r),z(t,o),K(e,i,f),K(e,a,f),Qe(u,a,null),z(a,s),z(a,c),K(e,l,f),C[d].m(e,f),K(e,p,f),K(e,m,f),z(m,h),Qe(g,h,null),z(h,$),z(h,v),z(m,b),A.block.m(m,A.anchor=null),A.mount=()=>m,A.anchor=null,y=!0},p(t,n){e=t,(!y||4&n)&&D!==(D=e[2]("Downloaded Convos.")+"")&&re(o,D),(!y||4&n)&&w!==(w=e[2]("Started Convos.")+"")&&re(c,w);let r=d;d=k(e),d===r?C[d].p(e,n):(Ue(),qe(C[r],1,1,(()=>{C[r]=null})),He(),f=C[d],f?f.p(e,n):(f=C[d]=E[d](e),f.c()),ze(f,1),f.m(p.parentNode,p)),(!y||4&n)&&_!==(_=e[2]("Contact admin")+"")&&re(v,_),Ye(A,e,n)},i(e){y||(ze(n.$$.fragment,e),ze(u.$$.fragment,e),ze(f),ze(g.$$.fragment,e),ze(A.block),y=!0)},o(e){qe(n.$$.fragment,e),qe(u.$$.fragment,e),qe(f),qe(g.$$.fragment,e);for(let e=0;e<3;e+=1){qe(A.blocks[e])}y=!1},d(e){e&&G(t),Xe(n),e&&G(i),e&&G(a),Xe(u),e&&G(l),C[d].d(e),e&&G(p),e&&G(m),Xe(g),A.block.d(),A.token=null,A=null}}}function ys(e){let t,n,r,o,i,a=e[2]("Loading user data...")+"";return n=new ct({props:{name:"spinner fa-spin"}}),{c(){t=Z("p"),Je(n.$$.fragment),r=J(),o=V(a)},m(e,a){K(e,t,a),Qe(n,t,null),z(t,r),z(t,o),i=!0},p(e,t){(!i||4&t)&&a!==(a=e[2]("Loading user data...")+"")&&re(o,a)},i(e){i||(ze(n.$$.fragment,e),i=!0)},o(e){qe(n.$$.fragment,e),i=!1},d(e){e&&G(t),Xe(n)}}}function Ds(e){let t,n,r,o,i,a=e[2]("Loading user data failed: %1",e[2](e[3].error))+"";return n=new ct({props:{name:"exclamation-triangle"}}),{c(){t=Z("p"),Je(n.$$.fragment),r=J(),o=V(a)},m(e,a){K(e,t,a),Qe(n,t,null),z(t,r),z(t,o),i=!0},p(e,t){(!i||12&t)&&a!==(a=e[2]("Loading user data failed: %1",e[2](e[3].error))+"")&&re(o,a)},i(e){i||(ze(n.$$.fragment,e),i=!0)},o(e){qe(n.$$.fragment,e),i=!1},d(e){e&&G(t),Xe(n)}}}function ws(e){return{c:y,m:y,p:y,i:y,o:y,d:y}}function _s(e){let t,n,r,o,i,a,u=e[2]("Retry")+"";return n=new ct({props:{name:"redo"}}),{c(){t=Z("a"),Je(n.$$.fragment),r=J(),o=V(u),te(t,"href",e[1]),te(t,"target","_self"),te(t,"class","btn is-secondary")},m(e,i){K(e,t,i),Qe(n,t,null),z(t,r),z(t,o),a=!0},p(e,n){(!a||4&n)&&u!==(u=e[2]("Retry")+"")&&re(o,u),(!a||2&n)&&te(t,"href",e[1])},i(e){a||(ze(n.$$.fragment,e),Oe((()=>{i||(i=Ke(t,Br,{},!0)),i.run(1)})),a=!0)},o(e){qe(n.$$.fragment,e),i||(i=Ke(t,Br,{},!1)),i.run(0),a=!1},d(e){e&&G(t),Xe(n),e&&i&&i.end()}}}function Es(e){return{c:y,m:y,p:y,i:y,o:y,d:y}}function Cs(e){let t,n,r,o,i,a,u,s=e[2](e[5][e[0]])+"";const c=[bs,vs,$s],l=[];function d(e,t){return"loading"==e[0]?0:"not_found"==e[0]?1:2}return i=d(e),a=l[i]=c[i](e),{c(){t=Z("main"),n=Z("h2"),r=V(s),o=J(),a.c(),te(t,"class","cms-main")},m(e,a){K(e,t,a),z(t,n),z(n,r),z(t,o),l[i].m(t,null),u=!0},p(e,[n]){(!u||5&n)&&s!==(s=e[2](e[5][e[0]])+"")&&re(r,s);let o=i;i=d(e),i===o?l[i].p(e,n):(Ue(),qe(l[o],1,1,(()=>{l[o]=null})),He(),a=l[i],a?a.p(e,n):(a=l[i]=c[i](e),a.c()),ze(a,1),a.m(t,null))},i(e){u||(ze(a),u=!0)},o(e){qe(a),u=!1},d(e){e&&G(t),l[i].d()}}}function ks(e,t,n){let r,o,i,a,u,s,c;F(e,Hn,(e=>n(11,a=e))),F(e,ar,(e=>n(2,u=e))),F(e,ur,(e=>n(4,c=e)));let{title:l="Loading..."}=t;const d={loading:"Loading...",not_found:"Not Found"},f=De("socket");F(e,f,(e=>n(3,s=e)));const p=De("user");F(e,p,(e=>n(10,i=e)));const m=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise((function(n,r){setTimeout((function(){"function"==typeof t?n(t()):"string"==typeof t?r(t):n(t)}),e)}))}(5e3);return e.$$set=e=>{"title"in e&&n(9,l=e.title)},e.$$.update=()=>{3072&e.$$.dirty&&n(0,r=function(e,t){const n=e.path.match(/\/err\/(\w+)/);return n?n[1]:t.is("pending")||t.is("loading")?"loading":"not_found"}(a,i)),1&e.$$.dirty&&n(9,l=d[r])},n(1,o=Hn.urlFor(p.email?"/chat":"/login")),[r,o,u,s,c,d,f,p,m,l,i,a]}class As extends nt{constructor(e){super(),tt(this,e,ks,Cs,k,{title:9})}}function xs(e,t,n){const r=e.slice();return r[5]=t[n],r}function Fs(e){let t,n,r,o,i,a,u,s=e[0]("Help")+"",c=tn("version")+"";return{c(){t=Z("h1"),n=V(s),r=J(),o=Z("small"),i=Z("a"),a=V("v"),u=V(c),te(i,"href",e[2]),te(i,"target","_blank")},m(e,s){K(e,t,s),z(t,n),z(t,r),z(t,o),z(o,i),z(i,a),z(i,u)},p(e,t){1&t&&s!==(s=e[0]("Help")+"")&&re(n,s)},d(e){e&&G(t)}}}function Ss(e){let t,n,r,o,i=e[5].example+"",a=e[0](e[5].description)+"";return{c(){t=Z("dt"),n=V(i),r=Z("dd"),o=V(a)},m(e,i){K(e,t,i),z(t,n),K(e,r,i),z(r,o)},p(e,t){1&t&&a!==(a=e[0](e[5].description)+"")&&re(o,a)},d(e){e&&G(t),e&&G(r)}}}function Os(e){let t;return{c(){t=V("Loading")},m(e,n){K(e,t,n)},d(e){e&&G(t)}}}function Bs(e){let t;return{c(){t=V("Not found")},m(e,n){K(e,t,n)},d(e){e&&G(t)}}}function Ns(e){let t;return{c(){t=V("Unknown")},m(e,n){K(e,t,n)},d(e){e&&G(t)}}}function js(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h,g,$,v,b,D,w,_,E,C,k,A,x,F,S,O,B,N,j,T,R,L,M,P,I,U,H,q,W,Q,X,ee,ne,oe,ie,ae,ue,se,ce,de,fe,pe,me,he,ge,$e,ve,be,ye,De,we,_e,Ee,Ce,ke,Ae,xe,Fe,Se,Oe,Be,Ne,je,Te,Re,Le,Me,Pe,Ie,Ue,He,We,Ke,Ge,Ye,Ze,Ve,et,tt,nt,rt,ot,it,at,ut,st,ct,lt,dt,ft,pt,mt,ht,gt,$t,vt,bt,yt,Dt,_t,Et,Ct,kt,At,xt=e[1]('Got any questions? Come and talk to us in the "#convos" channel on https://libera.chat.')+"",Ft=e[1]("More information can also be found on https://convos.chat.")+"",St=e[0]("Quick search")+"",Ot=e[0]("Pressing `shift+enter` will shift focus between chat input and search in sidebar.")+"",Bt=e[0]("Filter conversations with unread messages.")+"",Nt=e[0]("Filter private conversations with unread messages.")+"",jt=e[0]("Filter channels with unread messages.")+"",Tt=e[0]("Any other combination")+"",Rt=e[0]("Filter channels, private conversations or search for a string.")+"",Lt=e[0]("Autocomplete")+"",Mt=e[0]("The following rules apply when typing a message:")+"",Pt=e[0]('"@" followed by a character will show matching nicks in the current conversation.')+"",It=e[0]('":" followed by a character will show matching emojis.')+"",Ut=e[0]('"/" will show the available commands.')+"",Ht=e[0]('"#" will show the matching conversation names.')+"",zt=e[0]("Text formatting")+"",qt=e[0]("Convos supports some special way of formatting text:")+"",Wt=e[0]("Will be automatically converted into emojis.")+"",Kt=e[0]("> some text")+"",Gt=e[0]('A line starting with ">" will be converted into a quote.')+"",Yt=e[0]("*some text*, **some text**, ***some text***")+"",Zt=e[1]('Using "*" around some text, will convert it into *italic*, **bold** or ***italic bold***.')+"",Vt=e[0]("`some fragment`")+"",Jt=e[1]("Using backticks around some text, will format it as a `code fragment`.")+"",Qt=e[0]("URLs will be converted to links, and might be embedded in the chat.")+"",Xt=e[0]("Available commands")+"",en=e[1]('Any message starting with a-z is prefixed with "`/quote`", when sending from a connection conversation.')+"",nn=e[0]("Other resources")+"",rn=e[0]("Changelog for v%1",tn("version"))+"",on=e[0]("Project homepage")+"",an=e[0]("Bug/issue tracker")+"",un=e[0]("Source code")+"",sn="Convos"!=tn("organization_name")&&"https://convos.chat"!=tn("organization_url"),cn=e[0]("Contact admin")+"",ln=e[0]("Demo error pages")+"";t=new wt({props:{$$slots:{default:[Fs]},$$scope:{ctx:e}}});let dn=sr,fn=[];for(let t=0;t<dn.length;t+=1)fn[t]=Ss(xs(e,dn,t));let pn=sn&&function(e){let t,n,r,o,i=tn("organization_name")+"";return{c(){t=Z("li"),n=Z("a"),r=V(i),te(n,"href",o=tn("organization_url")),te(n,"target","_blank")},m(e,o){K(e,t,o),z(t,n),z(n,r)},p:y,d(e){e&&G(t)}}}();return bt=new Ci({props:{href:"/err/loading",$$slots:{default:[Os]},$$scope:{ctx:e}}}),_t=new Ci({props:{href:"/err/not_found",$$slots:{default:[Bs]},$$scope:{ctx:e}}}),kt=new Ci({props:{href:"/err/unknown",$$slots:{default:[Ns]},$$scope:{ctx:e}}}),{c(){Je(t.$$.fragment),n=J(),r=Z("main"),o=Z("p"),i=new le,a=J(),u=new le,s=J(),c=Z("h2"),l=V(St),d=J(),f=Z("p"),p=V(Ot),m=J(),h=Z("dl"),g=Z("dt"),g.textContent="+",$=Z("dd"),v=V(Bt),b=Z("dt"),b.textContent="+@",D=Z("dd"),w=V(Nt),_=Z("dt"),_.textContent="+#",E=Z("dd"),C=V(jt),k=Z("dt"),A=V(Tt),x=Z("dd"),F=V(Rt),S=J(),O=Z("h2"),B=V(Lt),N=J(),j=Z("p"),T=V(Mt),R=J(),L=Z("dl"),M=Z("dt"),M.textContent="@nick",P=Z("dd"),I=V(Pt),U=Z("dt"),U.textContent=":emoji_name",H=Z("dd"),q=V(It),W=Z("dt"),W.textContent="/command",Q=Z("dd"),X=V(Ut),ee=Z("dt"),ee.textContent="#conversation",ne=Z("dd"),oe=V(Ht),ie=J(),ae=Z("h2"),ue=V(zt),se=J(),ce=Z("p"),de=V(qt),fe=J(),pe=Z("dl"),me=Z("dt"),he=Z("dd"),ge=V(Wt),$e=Z("dt"),ve=V(Kt),be=Z("dd"),ye=V(Gt),De=Z("dt"),we=V(Yt),_e=Z("dd"),Ee=Z("dt"),Ce=V(Vt),ke=Z("dd"),Ae=Z("dt"),Ae.textContent="https://...",xe=Z("dd"),Fe=V(Qt),Se=J(),Oe=Z("h2"),Be=V(Xt),Ne=J(),je=Z("p"),Te=J(),Re=Z("dl");for(let e=0;e<fn.length;e+=1)fn[e].c();Le=J(),Me=Z("h2"),Pe=V(nn),Ie=J(),Ue=Z("ul"),He=Z("li"),We=Z("a"),Ke=V(rn),Ge=J(),Ye=Z("li"),Ze=Z("a"),Ve=V(on),et=J(),tt=Z("li"),nt=Z("a"),rt=V(an),ot=J(),it=Z("li"),at=Z("a"),ut=V(un),st=J(),pn&&pn.c(),ct=J(),lt=Z("li"),dt=Z("a"),ft=V(cn),pt=J(),mt=Z("h2"),ht=V(ln),gt=J(),$t=Z("ul"),vt=Z("li"),Je(bt.$$.fragment),yt=J(),Dt=Z("li"),Je(_t.$$.fragment),Et=J(),Ct=Z("li"),Je(kt.$$.fragment),i.a=a,u.a=null,te(c,"id","quick-search"),te(O,"id","autocomplete"),te(ae,"id","formatting"),te(Oe,"id","commands"),te(Me,"id","resources"),te(We,"href",e[2]),te(We,"target","_blank"),te(Ze,"href","https://convos.chat"),te(Ze,"target","_blank"),te(nt,"href","https://github.com/convos-chat/convos/issues"),te(nt,"target","_blank"),te(at,"href","https://github.com/convos-chat/convos"),te(at,"target","_blank"),te(dt,"href",tn("contact")),te(dt,"target","_blank"),te(mt,"id","fallback"),te(r,"class","main")},m(y,G){Qe(t,y,G),K(y,n,G),K(y,r,G),z(r,o),i.m(xt,o),z(o,a),u.m(Ft,o),z(r,s),z(r,c),z(c,l),z(r,d),z(r,f),z(f,p),z(r,m),z(r,h),z(h,g),z(h,$),z($,v),z(h,b),z(h,D),z(D,w),z(h,_),z(h,E),z(E,C),z(h,k),z(k,A),z(h,x),z(x,F),z(r,S),z(r,O),z(O,B),z(r,N),z(r,j),z(j,T),z(r,R),z(r,L),z(L,M),z(L,P),z(P,I),z(L,U),z(L,H),z(H,q),z(L,W),z(L,Q),z(Q,X),z(L,ee),z(L,ne),z(ne,oe),z(r,ie),z(r,ae),z(ae,ue),z(r,se),z(r,ce),z(ce,de),z(r,fe),z(r,pe),z(pe,me),me.innerHTML=e[3],z(pe,he),z(he,ge),z(pe,$e),z($e,ve),z(pe,be),z(be,ye),z(pe,De),z(De,we),z(pe,_e),_e.innerHTML=Zt,z(pe,Ee),z(Ee,Ce),z(pe,ke),ke.innerHTML=Jt,z(pe,Ae),z(pe,xe),z(xe,Fe),z(r,Se),z(r,Oe),z(Oe,Be),z(r,Ne),z(r,je),je.innerHTML=en,z(r,Te),z(r,Re);for(let e=0;e<fn.length;e+=1)fn[e].m(Re,null);z(r,Le),z(r,Me),z(Me,Pe),z(r,Ie),z(r,Ue),z(Ue,He),z(He,We),z(We,Ke),z(Ue,Ge),z(Ue,Ye),z(Ye,Ze),z(Ze,Ve),z(Ue,et),z(Ue,tt),z(tt,nt),z(nt,rt),z(Ue,ot),z(Ue,it),z(it,at),z(at,ut),z(Ue,st),pn&&pn.m(Ue,null),z(Ue,ct),z(Ue,lt),z(lt,dt),z(dt,ft),z(r,pt),z(r,mt),z(mt,ht),z(r,gt),z(r,$t),z($t,vt),Qe(bt,vt,null),z($t,yt),z($t,Dt),Qe(_t,Dt,null),z($t,Et),z($t,Ct),Qe(kt,Ct,null),At=!0},p(e,[n]){const r={};if(257&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r),(!At||2&n)&&xt!==(xt=e[1]('Got any questions? Come and talk to us in the "#convos" channel on https://libera.chat.')+"")&&i.p(xt),(!At||2&n)&&Ft!==(Ft=e[1]("More information can also be found on https://convos.chat.")+"")&&u.p(Ft),(!At||1&n)&&St!==(St=e[0]("Quick search")+"")&&re(l,St),(!At||1&n)&&Ot!==(Ot=e[0]("Pressing `shift+enter` will shift focus between chat input and search in sidebar.")+"")&&re(p,Ot),(!At||1&n)&&Bt!==(Bt=e[0]("Filter conversations with unread messages.")+"")&&re(v,Bt),(!At||1&n)&&Nt!==(Nt=e[0]("Filter private conversations with unread messages.")+"")&&re(w,Nt),(!At||1&n)&&jt!==(jt=e[0]("Filter channels with unread messages.")+"")&&re(C,jt),(!At||1&n)&&Tt!==(Tt=e[0]("Any other combination")+"")&&re(A,Tt),(!At||1&n)&&Rt!==(Rt=e[0]("Filter channels, private conversations or search for a string.")+"")&&re(F,Rt),(!At||1&n)&&Lt!==(Lt=e[0]("Autocomplete")+"")&&re(B,Lt),(!At||1&n)&&Mt!==(Mt=e[0]("The following rules apply when typing a message:")+"")&&re(T,Mt),(!At||1&n)&&Pt!==(Pt=e[0]('"@" followed by a character will show matching nicks in the current conversation.')+"")&&re(I,Pt),(!At||1&n)&&It!==(It=e[0]('":" followed by a character will show matching emojis.')+"")&&re(q,It),(!At||1&n)&&Ut!==(Ut=e[0]('"/" will show the available commands.')+"")&&re(X,Ut),(!At||1&n)&&Ht!==(Ht=e[0]('"#" will show the matching conversation names.')+"")&&re(oe,Ht),(!At||1&n)&&zt!==(zt=e[0]("Text formatting")+"")&&re(ue,zt),(!At||1&n)&&qt!==(qt=e[0]("Convos supports some special way of formatting text:")+"")&&re(de,qt),(!At||1&n)&&Wt!==(Wt=e[0]("Will be automatically converted into emojis.")+"")&&re(ge,Wt),(!At||1&n)&&Kt!==(Kt=e[0]("> some text")+"")&&re(ve,Kt),(!At||1&n)&&Gt!==(Gt=e[0]('A line starting with ">" will be converted into a quote.')+"")&&re(ye,Gt),(!At||1&n)&&Yt!==(Yt=e[0]("*some text*, **some text**, ***some text***")+"")&&re(we,Yt),(!At||2&n)&&Zt!==(Zt=e[1]('Using "*" around some text, will convert it into *italic*, **bold** or ***italic bold***.')+"")&&(_e.innerHTML=Zt),(!At||1&n)&&Vt!==(Vt=e[0]("`some fragment`")+"")&&re(Ce,Vt),(!At||2&n)&&Jt!==(Jt=e[1]("Using backticks around some text, will format it as a `code fragment`.")+"")&&(ke.innerHTML=Jt),(!At||1&n)&&Qt!==(Qt=e[0]("URLs will be converted to links, and might be embedded in the chat.")+"")&&re(Fe,Qt),(!At||1&n)&&Xt!==(Xt=e[0]("Available commands")+"")&&re(Be,Xt),(!At||2&n)&&en!==(en=e[1]('Any message starting with a-z is prefixed with "`/quote`", when sending from a connection conversation.')+"")&&(je.innerHTML=en),1&n){let t;for(dn=sr,t=0;t<dn.length;t+=1){const r=xs(e,dn,t);fn[t]?fn[t].p(r,n):(fn[t]=Ss(r),fn[t].c(),fn[t].m(Re,null))}for(;t<fn.length;t+=1)fn[t].d(1);fn.length=dn.length}(!At||1&n)&&nn!==(nn=e[0]("Other resources")+"")&&re(Pe,nn),(!At||1&n)&&rn!==(rn=e[0]("Changelog for v%1",tn("version"))+"")&&re(Ke,rn),(!At||1&n)&&on!==(on=e[0]("Project homepage")+"")&&re(Ve,on),(!At||1&n)&&an!==(an=e[0]("Bug/issue tracker")+"")&&re(rt,an),(!At||1&n)&&un!==(un=e[0]("Source code")+"")&&re(ut,un),sn&&pn.p(e,n),(!At||1&n)&&cn!==(cn=e[0]("Contact admin")+"")&&re(ft,cn),(!At||1&n)&&ln!==(ln=e[0]("Demo error pages")+"")&&re(ht,ln);const o={};256&n&&(o.$$scope={dirty:n,ctx:e}),bt.$set(o);const a={};256&n&&(a.$$scope={dirty:n,ctx:e}),_t.$set(a);const s={};256&n&&(s.$$scope={dirty:n,ctx:e}),kt.$set(s)},i(e){At||(ze(t.$$.fragment,e),ze(bt.$$.fragment,e),ze(_t.$$.fragment,e),ze(kt.$$.fragment,e),At=!0)},o(e){qe(t.$$.fragment,e),qe(bt.$$.fragment,e),qe(_t.$$.fragment,e),qe(kt.$$.fragment,e),At=!1},d(e){Xe(t,e),e&&G(n),e&&G(r),Y(fn,e),pn&&pn.d(),Xe(bt),Xe(_t),Xe(kt)}}}function Ts(e,t,n){let r,o;F(e,ar,(e=>n(0,r=e))),F(e,ur,(e=>n(1,o=e)));const i="https://github.com/convos-chat/convos/blob/v"+tn("version")+"/Changes#L3",a=Object.keys(ir.emojis.aliases).sort().join(", ");return[r,o,i,a,"Help"]}class Rs extends nt{constructor(e){super(),tt(this,e,Ts,js,k,{title:4})}get title(){return this.$$.ctx[4]}}function Ls(e){let t;return{c(){t=Z("input"),te(t,"type",e[2]),te(t,"id",e[1]),te(t,"name",e[0]),t.value=e[3]},m(e,n){K(e,t,n)},p(e,[n]){4&n&&te(t,"type",e[2]),2&n&&te(t,"id",e[1]),1&n&&te(t,"name",e[0]),8&n&&t.value!==e[3]&&(t.value=e[3])},i:y,o:y,d(e){e&&G(t)}}}function Ms(e,t,n){let r,{form:o}=t,{name:i=""}=t,{id:a=(i?"form_"+i:sn())}=t,{type:u="hidden"}=t;const s=o.field(i);return F(e,s,(e=>n(3,r=e))),e.$$set=e=>{"form"in e&&n(5,o=e.form),"name"in e&&n(0,i=e.name),"id"in e&&n(1,a=e.id),"type"in e&&n(2,u=e.type)},[i,a,u,r,s,o]}class Ps extends nt{constructor(e){super(),tt(this,e,Ms,Ls,k,{form:5,name:0,id:1,type:2})}}function Is(e,t,n){const r=e.slice();return r[16]=t[n],r}function Us(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h=e[1]("Sign up")+"",g=e[1]("Please ask your Convos admin for an invite link to sign up, or sign in if you already have an account.")+"",$=e[1]("Contact admin")+"";return c=new ct({props:{name:"paper-plane"}}),p=new Ci({props:{href:"/login",$$slots:{default:[Ws]},$$scope:{ctx:e}}}),{c(){t=Z("h2"),n=V(h),r=J(),o=Z("p"),i=V(g),a=J(),u=Z("div"),s=Z("a"),Je(c.$$.fragment),l=J(),d=V($),f=J(),Je(p.$$.fragment),te(s,"class","btn"),te(s,"href",tn("contact")),te(u,"class","form-actions")},m(e,h){K(e,t,h),z(t,n),K(e,r,h),K(e,o,h),z(o,i),K(e,a,h),K(e,u,h),z(u,s),Qe(c,s,null),z(s,l),z(s,d),z(u,f),Qe(p,u,null),m=!0},p(e,t){(!m||2&t)&&h!==(h=e[1]("Sign up")+"")&&re(n,h),(!m||2&t)&&g!==(g=e[1]("Please ask your Convos admin for an invite link to sign up, or sign in if you already have an account.")+"")&&re(i,g),(!m||2&t)&&$!==($=e[1]("Contact admin")+"")&&re(d,$);const r={};524290&t&&(r.$$scope={dirty:t,ctx:e}),p.$set(r)},i(e){m||(ze(c.$$.fragment,e),ze(p.$$.fragment,e),m=!0)},o(e){qe(c.$$.fragment,e),qe(p.$$.fragment,e),m=!1},d(e){e&&G(t),e&&G(r),e&&G(o),e&&G(a),e&&G(u),Xe(c),Xe(p)}}}function Hs(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h=e[1]("Sign in")+"";return o=new ko({props:{type:"email",name:"email",form:e[4],placeholder:e[1]("Ex: john@doe.com"),$$slots:{label:[Ks]},$$scope:{ctx:e}}}),a=new ko({props:{type:"password",name:"password",form:e[4],autocomplete:"current-password",$$slots:{help:[Ys],label:[Gs]},$$scope:{ctx:e}}}),c=new Gr({props:{icon:"sign-in-alt",op:e[6],$$slots:{default:[Zs]},$$scope:{ctx:e}}}),d=new Ci({props:{href:"/register",$$slots:{default:[Vs]},$$scope:{ctx:e}}}),p=new io({props:{op:e[6],success:"Loading Convos..."}}),{c(){t=Z("h2"),n=V(h),r=J(),Je(o.$$.fragment),i=J(),Je(a.$$.fragment),u=J(),s=Z("div"),Je(c.$$.fragment),l=J(),Je(d.$$.fragment),f=J(),Je(p.$$.fragment),te(s,"class","form-actions")},m(e,h){K(e,t,h),z(t,n),K(e,r,h),Qe(o,e,h),K(e,i,h),Qe(a,e,h),K(e,u,h),K(e,s,h),Qe(c,s,null),z(s,l),Qe(d,s,null),K(e,f,h),Qe(p,e,h),m=!0},p(e,t){(!m||2&t)&&h!==(h=e[1]("Sign in")+"")&&re(n,h);const r={};2&t&&(r.placeholder=e[1]("Ex: john@doe.com")),524290&t&&(r.$$scope={dirty:t,ctx:e}),o.$set(r);const i={};524294&t&&(i.$$scope={dirty:t,ctx:e}),a.$set(i);const u={};524290&t&&(u.$$scope={dirty:t,ctx:e}),c.$set(u);const s={};524290&t&&(s.$$scope={dirty:t,ctx:e}),d.$set(s)},i(e){m||(ze(o.$$.fragment,e),ze(a.$$.fragment,e),ze(c.$$.fragment,e),ze(d.$$.fragment,e),ze(p.$$.fragment,e),m=!0)},o(e){qe(o.$$.fragment,e),qe(a.$$.fragment,e),qe(c.$$.fragment,e),qe(d.$$.fragment,e),qe(p.$$.fragment,e),m=!1},d(e){e&&G(t),e&&G(r),Xe(o,e),e&&G(i),Xe(a,e),e&&G(u),e&&G(s),Xe(c),Xe(d),e&&G(f),Xe(p,e)}}}function zs(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h,g,$,v,b=("recover"==e[0]?e[1]("Recover account"):e[1]("Sign up"))+"",y=tn("first_user"),D=!tn("first_user"),w=y&&function(e){let t,n,r=e[1]('As you are the first user, you do not need any invitation link. Just fill in the form below, hit "Sign up" to start chatting.')+"";return{c(){t=Z("p"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]('As you are the first user, you do not need any invitation link. Just fill in the form below, hit "Sign up" to start chatting.')+"")&&re(n,r)},d(e){e&&G(t)}}}(e);i=new Ps({props:{name:"exp",form:e[4]}}),u=new Ps({props:{name:"token",form:e[4]}}),c=new ko({props:{type:"email",name:"email",form:e[4],placeholder:e[1]("Ex: john@doe.com"),readonly:"register"!=e[0],$$slots:{help:[Qs],label:[Js]},$$scope:{ctx:e}}}),d=new ko({props:{type:"password",name:"password",form:e[4],$$slots:{help:[ec],label:[Xs]},$$scope:{ctx:e}}}),m=new Gr({props:{icon:"save",op:e[7],$$slots:{default:[tc]},$$scope:{ctx:e}}});let _=D&&function(e){let t,n;return t=new Ci({props:{href:"/login",$$slots:{default:[nc]},$$scope:{ctx:e}}}),{c(){Je(t.$$.fragment)},m(e,r){Qe(t,e,r),n=!0},p(e,n){const r={};524290&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(ze(t.$$.fragment,e),n=!0)},o(e){qe(t.$$.fragment,e),n=!1},d(e){Xe(t,e)}}}(e);return $=new io({props:{op:e[7],success:"Loading Convos..."}}),{c(){t=Z("h2"),n=V(b),r=J(),w&&w.c(),o=J(),Je(i.$$.fragment),a=J(),Je(u.$$.fragment),s=J(),Je(c.$$.fragment),l=J(),Je(d.$$.fragment),f=J(),p=Z("div"),Je(m.$$.fragment),h=J(),_&&_.c(),g=J(),Je($.$$.fragment),te(p,"class","form-actions")},m(e,b){K(e,t,b),z(t,n),K(e,r,b),w&&w.m(e,b),K(e,o,b),Qe(i,e,b),K(e,a,b),Qe(u,e,b),K(e,s,b),Qe(c,e,b),K(e,l,b),Qe(d,e,b),K(e,f,b),K(e,p,b),Qe(m,p,null),z(p,h),_&&_.m(p,null),K(e,g,b),Qe($,e,b),v=!0},p(e,t){(!v||3&t)&&b!==(b=("recover"==e[0]?e[1]("Recover account"):e[1]("Sign up"))+"")&&re(n,b),y&&w.p(e,t);const r={};2&t&&(r.placeholder=e[1]("Ex: john@doe.com")),1&t&&(r.readonly="register"!=e[0]),524291&t&&(r.$$scope={dirty:t,ctx:e}),c.$set(r);const o={};524290&t&&(o.$$scope={dirty:t,ctx:e}),d.$set(o);const i={};524291&t&&(i.$$scope={dirty:t,ctx:e}),m.$set(i),D&&_.p(e,t)},i(e){v||(ze(i.$$.fragment,e),ze(u.$$.fragment,e),ze(c.$$.fragment,e),ze(d.$$.fragment,e),ze(m.$$.fragment,e),ze(_),ze($.$$.fragment,e),v=!0)},o(e){qe(i.$$.fragment,e),qe(u.$$.fragment,e),qe(c.$$.fragment,e),qe(d.$$.fragment,e),qe(m.$$.fragment,e),qe(_),qe($.$$.fragment,e),v=!1},d(e){e&&G(t),e&&G(r),w&&w.d(e),e&&G(o),Xe(i,e),e&&G(a),Xe(u,e),e&&G(s),Xe(c,e),e&&G(l),Xe(d,e),e&&G(f),e&&G(p),Xe(m),_&&_.d(),e&&G(g),Xe($,e)}}}function qs(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h,g=e[1]("Invalid invite/recover URL")+"",$=e[1](410==tn("status")?"The link has expired.":"The link is invalid.")+"",v=e[1]("Please ask your Convos admin for a new link.")+"",b=e[1]("Contact admin")+"";return m=new Ci({props:{href:"/login",$$slots:{default:[rc]},$$scope:{ctx:e}}}),{c(){t=Z("h2"),n=V(g),r=J(),o=Z("p"),i=V($),a=J(),u=Z("p"),s=V(v),c=J(),l=Z("p"),d=Z("a"),f=V(b),p=J(),Je(m.$$.fragment),te(d,"class","btn"),te(d,"href",tn("contact"))},m(e,g){K(e,t,g),z(t,n),K(e,r,g),K(e,o,g),z(o,i),K(e,a,g),K(e,u,g),z(u,s),K(e,c,g),K(e,l,g),z(l,d),z(d,f),z(l,p),Qe(m,l,null),h=!0},p(e,t){(!h||2&t)&&g!==(g=e[1]("Invalid invite/recover URL")+"")&&re(n,g),(!h||2&t)&&$!==($=e[1](410==tn("status")?"The link has expired.":"The link is invalid.")+"")&&re(i,$),(!h||2&t)&&v!==(v=e[1]("Please ask your Convos admin for a new link.")+"")&&re(s,v),(!h||2&t)&&b!==(b=e[1]("Contact admin")+"")&&re(f,b);const r={};524290&t&&(r.$$scope={dirty:t,ctx:e}),m.$set(r)},i(e){h||(ze(m.$$.fragment,e),h=!0)},o(e){qe(m.$$.fragment,e),h=!1},d(e){e&&G(t),e&&G(r),e&&G(o),e&&G(a),e&&G(u),e&&G(c),e&&G(l),Xe(m)}}}function Ws(e){let t,n=e[1]("Sign in")+"";return{c(){t=V(n)},m(e,n){K(e,t,n)},p(e,r){2&r&&n!==(n=e[1]("Sign in")+"")&&re(t,n)},d(e){e&&G(t)}}}function Ks(e){let t,n,r=e[1]("Email")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("Email")+"")&&re(n,r)},d(e){e&&G(t)}}}function Gs(e){let t,n,r=e[1]("Password")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("Password")+"")&&re(n,r)},d(e){e&&G(t)}}}function Ys(e){let t,n=e[2]("Contact your [Convos admin](%1) if you have forgotten your password.",tn("contact"))+"";return{c(){t=Z("p"),te(t,"class","help"),te(t,"slot","help")},m(e,r){K(e,t,r),t.innerHTML=n},p(e,r){4&r&&n!==(n=e[2]("Contact your [Convos admin](%1) if you have forgotten your password.",tn("contact"))+"")&&(t.innerHTML=n)},d(e){e&&G(t)}}}function Zs(e){let t,n,r=e[1]("Sign in")+"";return{c(){t=Z("span"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("Sign in")+"")&&re(n,r)},d(e){e&&G(t)}}}function Vs(e){let t,n=e[1]("Sign up")+"";return{c(){t=V(n)},m(e,n){K(e,t,n)},p(e,r){2&r&&n!==(n=e[1]("Sign up")+"")&&re(t,n)},d(e){e&&G(t)}}}function Js(e){let t,n,r=e[1]("Email")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("Email")+"")&&re(n,r)},d(e){e&&G(t)}}}function Qs(e){let t,n,r=("invitation"==e[0]?e[1]("Your email is from the invite link."):e[1]("Your email will be used if you forget your password."))+"";return{c(){t=Z("p"),n=V(r),te(t,"class","help"),te(t,"slot","help")},m(e,r){K(e,t,r),z(t,n)},p(e,t){3&t&&r!==(r=("invitation"==e[0]?e[1]("Your email is from the invite link."):e[1]("Your email will be used if you forget your password."))+"")&&re(n,r)},d(e){e&&G(t)}}}function Xs(e){let t,n,r=e[1]("Password")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("Password")+"")&&re(n,r)},d(e){e&&G(t)}}}function ec(e){let t,n,r=e[1]("Hint: Use a phrase from a book.")+"";return{c(){t=Z("p"),n=V(r),te(t,"class","help"),te(t,"slot","help")},m(e,r){K(e,t,r),z(t,n)},p(e,t){2&t&&r!==(r=e[1]("Hint: Use a phrase from a book.")+"")&&re(n,r)},d(e){e&&G(t)}}}function tc(e){let t,n,r=("recover"==e[0]?e[1]("Set new password"):e[1]("Sign up"))+"";return{c(){t=Z("span"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){3&t&&r!==(r=("recover"==e[0]?e[1]("Set new password"):e[1]("Sign up"))+"")&&re(n,r)},d(e){e&&G(t)}}}function nc(e){let t,n=e[1]("Sign in")+"";return{c(){t=V(n)},m(e,n){K(e,t,n)},p(e,r){2&r&&n!==(n=e[1]("Sign in")+"")&&re(t,n)},d(e){e&&G(t)}}}function rc(e){let t,n=e[1]("Sign in")+"";return{c(){t=V(n)},m(e,n){K(e,t,n)},p(e,r){2&r&&n!==(n=e[1]("Sign in")+"")&&re(t,n)},d(e){e&&G(t)}}}function oc(e){let t,n,r,o,i,a=e[16][1]+"";function u(){return e[12](e[16])}return{c(){t=Z("a"),n=V(a),te(t,"href",r="#"+e[16][0])},m(e,r){K(e,t,r),z(t,n),o||(i=X(t,"click",u),o=!0)},p(o,i){e=o,8&i&&a!==(a=e[16][1]+"")&&re(n,a),8&i&&r!==(r="#"+e[16][0])&&te(t,"href",r)},d(e){e&&G(t),o=!1,i()}}}function ic(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h;r=new Ps({props:{name:"mode",form:e[4]}});const g=[qs,zs,Hs,Us],$=[];function v(e,t){return"invalid_invitation"==e[0]?0:((null==i||1&t)&&(i=!(-1==["recover","invitation","register"].indexOf(e[0]))),i?1:"login"==e[0]?2:3)}a=v(e,-1),u=$[a]=g[a](e),d=new ct({props:{name:"globe"}});let b=e[3].languageOptions,y=[];for(let t=0;t<b.length;t+=1)y[t]=oc(Is(e,b,t));return{c(){t=Z("main"),n=Z("form"),Je(r.$$.fragment),o=J(),u.c(),s=J(),c=Z("div"),l=Z("footer"),Je(d.$$.fragment),f=J();for(let e=0;e<y.length;e+=1)y[e].c();te(n,"method","post"),te(t,"class","cms-main"),te(l,"class","footer language-selector"),te(c,"class","footer--wrapper is-small")},m(i,u){K(i,t,u),z(t,n),Qe(r,n,null),z(n,o),$[a].m(n,null),K(i,s,u),K(i,c,u),z(c,l),Qe(d,l,null),z(l,f);for(let e=0;e<y.length;e+=1)y[e].m(l,null);p=!0,m||(h=X(n,"submit",ee(e[8])),m=!0)},p(e,[t]){let r=a;if(a=v(e,t),a===r?$[a].p(e,t):(Ue(),qe($[r],1,1,(()=>{$[r]=null})),He(),u=$[a],u?u.p(e,t):(u=$[a]=g[a](e),u.c()),ze(u,1),u.m(n,null)),8&t){let n;for(b=e[3].languageOptions,n=0;n<b.length;n+=1){const r=Is(e,b,n);y[n]?y[n].p(r,t):(y[n]=oc(r),y[n].c(),y[n].m(l,null))}for(;n<y.length;n+=1)y[n].d(1);y.length=b.length}},i(e){p||(ze(r.$$.fragment,e),ze(u),ze(d.$$.fragment,e),p=!0)},o(e){qe(r.$$.fragment,e),qe(u),qe(d.$$.fragment,e),p=!1},d(e){e&&G(t),Xe(r),$[a].d(),e&&G(s),e&&G(c),Xe(d),Y(y,e),m=!1,h()}}}function ac(e,t,n){let r,o,i,a,u,s;F(e,Hn,(e=>n(10,o=e))),F(e,ar,(e=>n(1,a=e))),F(e,ur,(e=>n(2,u=e))),F(e,ir,(e=>n(3,s=e)));let{title:c="Sign in"}=t;const l=De("api"),d=No(),f=De("user");F(e,f,(e=>n(11,i=e)));const p=l("loginUser"),m=l("registerUser");return e.$$set=e=>{"title"in e&&n(9,c=e.title)},e.$$.update=()=>{2048&e.$$.dirty&&function(e){if(e.is("loading")||!e.email)return;const t=e.conversations()[0],n=e.lastUrl?e.lastUrl:t?t.path:"/settings/connections";Hn.go(n,{replace:!0})}(i),1024&e.$$.dirty&&n(0,r=function(e){const t=-1!=e.path.indexOf("register"),r=!d.get("mode")&&tn("status")>=400?"invalid_invitation":e.param("email")&&tn("existing_user")?"recover":e.param("email")?"invitation":tn("first_user")||t&&tn("open_to_public")?"register":t?"invalid":"login";return d.set({email:e.param("email")||d.get("email")||"",exp:e.param("exp")||"",mode:r,token:e.param("token")||""}),n(9,c="login"==r?"Sign in":"Sign up"),"ontouchstart"in window||setTimeout((()=>Xt(document,".text-field input").reverse().map((e=>e.readOnly||e.focus()))),1),r}(o))},[r,a,u,s,d,f,p,m,async function(){const e="login"==r?p:m;await e.perform(d.get()),"login"!=r&&Hn.update({lastUrl:""}),e.error()||await f.load()},c,o,i,e=>s.load(e[0])]}class uc extends nt{constructor(e){super(),tt(this,e,ac,ic,k,{title:9})}}function sc(e,t,n){const r=e.slice();return r[8]=t[n],r[10]=n,r}function cc(e){let t,n,r;return t=new ct({props:{name:"user-cog"}}),n=new ct({props:{name:"times"}}),{c(){Je(t.$$.fragment),Je(n.$$.fragment)},m(e,o){Qe(t,e,o),Qe(n,e,o),r=!0},p:y,i(e){r||(ze(t.$$.fragment,e),ze(n.$$.fragment,e),r=!0)},o(e){qe(t.$$.fragment,e),qe(n.$$.fragment,e),r=!1},d(e){Xe(t,e),Xe(n,e)}}}function lc(e){let t,n,r,o,i,a=e[3]("Notifications")+"";return o=new Ci({props:{href:"/settings/account",class:"btn-hallow",$$slots:{default:[cc]},$$scope:{ctx:e}}}),{c(){t=Z("h1"),n=V(a),r=J(),Je(o.$$.fragment)},m(e,a){K(e,t,a),z(t,n),K(e,r,a),Qe(o,e,a),i=!0},p(e,t){(!i||8&t)&&a!==(a=e[3]("Notifications")+"")&&re(n,a);const r={};2048&t&&(r.$$scope={dirty:t,ctx:e}),o.$set(r)},i(e){i||(ze(o.$$.fragment,e),i=!0)},o(e){qe(o.$$.fragment,e),i=!1},d(e){e&&G(t),e&&G(r),Xe(o,e)}}}function dc(e){let t,n,r=e[3]("No notifications.")+"";return{c(){t=Z("h2"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){8&t&&r!==(r=e[3]("No notifications.")+"")&&re(n,r)},d(e){e&&G(t)}}}function fc(e){let t,n,r,o,i,a,u,s=e[8].ts.getHumanDate()+"";return r=new ct({props:{name:"calendar-alt"}}),{c(){t=Z("div"),n=Z("span"),Je(r.$$.fragment),o=J(),i=Z("i"),a=V(s),te(t,"class","message__status-line for-day-changed")},m(e,s){K(e,t,s),z(t,n),Qe(r,n,null),z(n,o),z(n,i),z(i,a),u=!0},p(e,t){(!u||16&t)&&s!==(s=e[8].ts.getHumanDate()+"")&&re(a,s)},i(e){u||(ze(r.$$.fragment,e),u=!0)},o(e){qe(r.$$.fragment,e),u=!1},d(e){e&&G(t),Xe(r)}}}function pc(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h,g,$,v,b,y,D=e[8].ts.format("%H:%M")+"",w=Qt(e[8].ts.toLocaleString())+"",_=e[3]("%1 in %2",e[8].from,e[8].conversation_id)+"",E=e[8].markdown+"",C=(!e[10]||e[8].dayChanged)&&fc(e);return r=new ct({props:{name:"pick:"+e[8].from,color:e[8].color}}),{c(){C&&C.c(),t=J(),n=Z("div"),Je(r.$$.fragment),o=J(),i=Z("div"),a=Z("span"),u=V(D),s=J(),c=Z("span"),l=V(w),d=J(),f=Z("a"),p=V(_),h=J(),g=Z("div"),te(c,"class","tooltip"),te(i,"class","message__ts has-tooltip"),te(f,"href",m=wr(e[8])),te(f,"class","message__from"),ie(f,"color",e[8].color),te(g,"class","message__text"),te(n,"class",$=e[8].className)},m(e,m){C&&C.m(e,m),K(e,t,m),K(e,n,m),Qe(r,n,null),z(n,o),z(n,i),z(i,a),z(a,u),z(i,s),z(i,c),z(c,l),z(n,d),z(n,f),z(f,p),z(n,h),z(n,g),g.innerHTML=E,v=!0,b||(y=X(n,"click",_r),b=!0)},p(e,o){!e[10]||e[8].dayChanged?C?(C.p(e,o),16&o&&ze(C,1)):(C=fc(e),C.c(),ze(C,1),C.m(t.parentNode,t)):C&&(Ue(),qe(C,1,1,(()=>{C=null})),He());const i={};16&o&&(i.name="pick:"+e[8].from),16&o&&(i.color=e[8].color),r.$set(i),(!v||16&o)&&D!==(D=e[8].ts.format("%H:%M")+"")&&re(u,D),(!v||16&o)&&w!==(w=Qt(e[8].ts.toLocaleString())+"")&&re(l,w),(!v||24&o)&&_!==(_=e[3]("%1 in %2",e[8].from,e[8].conversation_id)+"")&&re(p,_),(!v||16&o&&m!==(m=wr(e[8])))&&te(f,"href",m),(!v||16&o)&&ie(f,"color",e[8].color),(!v||16&o)&&E!==(E=e[8].markdown+"")&&(g.innerHTML=E),(!v||16&o&&$!==($=e[8].className))&&te(n,"class",$)},i(e){v||(ze(C),ze(r.$$.fragment,e),v=!0)},o(e){qe(C),qe(r.$$.fragment,e),v=!1},d(e){C&&C.d(e),e&&G(t),e&&G(n),Xe(r),b=!1,y()}}}function mc(e){let t,n,r,o,i,a,u,s=e[3]("Loading...")+"";return r=new ct({props:{name:"spinner",animation:"spin"}}),{c(){t=Z("div"),n=Z("span"),Je(r.$$.fragment),o=J(),i=Z("i"),a=V(s),te(t,"class","message__status-line for-loading")},m(e,s){K(e,t,s),z(t,n),Qe(r,n,null),z(n,o),z(n,i),z(i,a),u=!0},p(e,t){(!u||8&t)&&s!==(s=e[3]("Loading...")+"")&&re(a,s)},i(e){u||(ze(r.$$.fragment,e),u=!0)},o(e){qe(r.$$.fragment,e),u=!1},d(e){e&&G(t),Xe(r)}}}function hc(e){let t,n,r,o,i=0==e[4].length&&!e[5].is("loading"),a=e[1].is("loading"),u=i&&dc(e),s=e[4].render(),c=[];for(let t=0;t<s.length;t+=1)c[t]=pc(sc(e,s,t));const l=e=>qe(c[e],1,1,(()=>{c[e]=null}));let d=a&&mc(e);return{c(){u&&u.c(),t=J();for(let e=0;e<c.length;e+=1)c[e].c();n=J(),d&&d.c(),r=Q()},m(e,i){u&&u.m(e,i),K(e,t,i);for(let t=0;t<c.length;t+=1)c[t].m(e,i);K(e,n,i),d&&d.m(e,i),K(e,r,i),o=!0},p(e,o){if(16&o&&(i=0==e[4].length&&!e[5].is("loading")),i?u?u.p(e,o):(u=dc(e),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null),24&o){let t;for(s=e[4].render(),t=0;t<s.length;t+=1){const r=sc(e,s,t);c[t]?(c[t].p(r,o),ze(c[t],1)):(c[t]=pc(r),c[t].c(),ze(c[t],1),c[t].m(n.parentNode,n))}for(Ue(),t=s.length;t<c.length;t+=1)l(t);He()}2&o&&(a=e[1].is("loading")),a?d?(d.p(e,o),2&o&&ze(d,1)):(d=mc(e),d.c(),ze(d,1),d.m(r.parentNode,r)):d&&(Ue(),qe(d,1,1,(()=>{d=null})),He())},i(e){if(!o){for(let e=0;e<s.length;e+=1)ze(c[e]);ze(d),o=!0}},o(e){c=c.filter(Boolean);for(let e=0;e<c.length;e+=1)qe(c[e]);qe(d),o=!1},d(e){u&&u.d(e),e&&G(t),Y(c,e),e&&G(n),d&&d.d(e),e&&G(r)}}}function gc(e){let t,n,r,o;return t=new wt({props:{$$slots:{default:[lc]},$$scope:{ctx:e}}}),r=new ia({props:{class:e[2].join(" "),$$slots:{default:[hc]},$$scope:{ctx:e}}}),r.$on("rendered",$c),{c(){Je(t.$$.fragment),n=J(),Je(r.$$.fragment)},m(e,i){Qe(t,e,i),K(e,n,i),Qe(r,e,i),o=!0},p(e,[n]){const o={};2056&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o);const i={};4&n&&(i.class=e[2].join(" ")),2074&n&&(i.$$scope={dirty:n,ctx:e}),r.$set(i)},i(e){o||(ze(t.$$.fragment,e),ze(r.$$.fragment,e),o=!0)},o(e){qe(t.$$.fragment,e),qe(r.$$.fragment,e),o=!1},d(e){Xe(t,e),e&&G(n),Xe(r,e)}}}const $c=e=>e.detail.scrollTo(-1);function vc(e,t,n){let r,o,i,a,u,s=y;F(e,ar,(e=>n(3,a=e))),e.$$.on_destroy.push((()=>s()));const c=De("user").notifications;return F(e,c,(e=>n(1,i=e))),ve((async()=>{await c.load(),await c.markAsRead()})),e.$$.update=()=>{2&e.$$.dirty&&(n(0,o=i.messages),s(),s=A(o,(e=>n(4,u=e)))),1&e.$$.dirty&&n(2,r=["main",o.length&&"has-results"].filter((e=>e)))},[o,i,r,a,u,c,"Notifications"]}class bc extends nt{constructor(e){super(),tt(this,e,vc,gc,k,{title:6})}get title(){return this.$$.ctx[6]}}function yc(e,t,n){const r=e.slice();return r[13]=t[n],r[15]=n,r}function Dc(e){let t,n,r,o,i,a,u=e[6]("Clear")+"";return t=new ct({props:{name:"search"}}),n=new ct({props:{name:"times"}}),{c(){Je(t.$$.fragment),Je(n.$$.fragment),r=J(),o=Z("span"),i=V(u),te(o,"class","tooltip is-left")},m(e,u){Qe(t,e,u),Qe(n,e,u),K(e,r,u),K(e,o,u),z(o,i),a=!0},p(e,t){(!a||64&t)&&u!==(u=e[6]("Clear")+"")&&re(i,u)},i(e){a||(ze(t.$$.fragment,e),ze(n.$$.fragment,e),a=!0)},o(e){qe(t.$$.fragment,e),qe(n.$$.fragment,e),a=!1},d(e){Xe(t,e),Xe(n,e),e&&G(r),e&&G(o)}}}function wc(e){let t,n,r,o,i,a=e[6](e[8].name)+"";return o=new Ci({props:{href:"/search",class:"btn-hallow "+(e[4]?"has-tooltip is-active":""),$$slots:{default:[Dc]},$$scope:{ctx:e}}}),o.$on("click",e[9]),{c(){t=Z("h1"),n=V(a),r=J(),Je(o.$$.fragment)},m(e,a){K(e,t,a),z(t,n),K(e,r,a),Qe(o,e,a),i=!0},p(e,t){(!i||64&t)&&a!==(a=e[6](e[8].name)+"")&&re(n,a);const r={};16&t&&(r.class="btn-hallow "+(e[4]?"has-tooltip is-active":"")),65600&t&&(r.$$scope={dirty:t,ctx:e}),o.$set(r)},i(e){i||(ze(o.$$.fragment,e),i=!0)},o(e){qe(o.$$.fragment,e),i=!1},d(e){e&&G(t),e&&G(r),Xe(o,e)}}}function _c(e){let t,n,r,o,i;const a=[Cc,Ec],u=[];function s(e,n){return(null==t||4&n)&&(t=!!e[2].param("q")),t?0:1}return n=s(e,-1),r=u[n]=a[n](e),{c(){r.c(),o=Q()},m(e,t){u[n].m(e,t),K(e,o,t),i=!0},p(e,t){let i=n;n=s(e,t),n===i?u[n].p(e,t):(Ue(),qe(u[i],1,1,(()=>{u[i]=null})),He(),r=u[n],r?r.p(e,t):(r=u[n]=a[n](e),r.c()),ze(r,1),r.m(o.parentNode,o))},i(e){i||(ze(r),i=!0)},o(e){qe(r),i=!1},d(e){u[n].d(e),e&&G(o)}}}function Ec(e){let t,n,r,o,i,a=e[7]("You can enter a channel name like #cool_beans to narrow down the search, or enter @some_nick to filter messages sent by a given user.")+"";return n=new ct({props:{name:"info-circle"}}),{c(){t=Z("p"),Je(n.$$.fragment),r=J(),o=new le,o.a=null},m(e,u){K(e,t,u),Qe(n,t,null),z(t,r),o.m(a,t),i=!0},p(e,t){(!i||128&t)&&a!==(a=e[7]("You can enter a channel name like #cool_beans to narrow down the search, or enter @some_nick to filter messages sent by a given user.")+"")&&o.p(a)},i(e){i||(ze(n.$$.fragment,e),i=!0)},o(e){qe(n.$$.fragment,e),i=!1},d(e){e&&G(t),Xe(n)}}}function Cc(e){let t,n,r,o,i,a=e[6]('No search results for "%1".',e[2].param("q"))+"";return n=new ct({props:{name:"info-circle"}}),{c(){t=Z("p"),Je(n.$$.fragment),r=J(),o=V(a)},m(e,a){K(e,t,a),Qe(n,t,null),z(t,r),z(t,o),i=!0},p(e,t){(!i||68&t)&&a!==(a=e[6]('No search results for "%1".',e[2].param("q"))+"")&&re(o,a)},i(e){i||(ze(n.$$.fragment,e),i=!0)},o(e){qe(n.$$.fragment,e),i=!1},d(e){e&&G(t),Xe(n)}}}function kc(e){let t,n,r,o,i,a,u,s=e[13].ts.getHumanDate()+"";return r=new ct({props:{name:"calendar-alt"}}),{c(){t=Z("div"),n=Z("span"),Je(r.$$.fragment),o=J(),i=Z("i"),a=V(s),te(t,"class","message__status-line for-day-changed")},m(e,s){K(e,t,s),z(t,n),Qe(r,n,null),z(n,o),z(n,i),z(i,a),u=!0},p(e,t){(!u||2&t)&&s!==(s=e[13].ts.getHumanDate()+"")&&re(a,s)},i(e){u||(ze(r.$$.fragment,e),u=!0)},o(e){qe(r.$$.fragment,e),u=!1},d(e){e&&G(t),Xe(r)}}}function Ac(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h,g,$,v,b,y,D,w=e[13].ts.format("%H:%M")+"",_=Qt(e[13].ts.toLocaleString())+"",E=e[6]("%1 in %2",e[13].from,e[13].conversation_id)+"",C=e[13].markdown+"",k=(!e[15]||e[13].dayChanged)&&kc(e);return r=new ct({props:{name:"pick:"+e[13].from,color:e[13].color}}),{c(){k&&k.c(),t=J(),n=Z("div"),Je(r.$$.fragment),o=J(),i=Z("div"),a=Z("span"),u=V(w),s=J(),c=Z("span"),l=V(_),d=J(),f=Z("a"),p=V(E),h=J(),g=Z("div"),$=J(),te(c,"class","tooltip"),te(i,"class","message__ts has-tooltip"),te(f,"href",m=wr(e[13])),te(f,"class","message__from"),ie(f,"color",e[13].color),te(g,"class","message__text"),te(n,"class",v=e[13].className)},m(e,m){k&&k.m(e,m),K(e,t,m),K(e,n,m),Qe(r,n,null),z(n,o),z(n,i),z(i,a),z(a,u),z(i,s),z(i,c),z(c,l),z(n,d),z(n,f),z(f,p),z(n,h),z(n,g),g.innerHTML=C,z(n,$),b=!0,y||(D=X(n,"click",_r),y=!0)},p(e,o){!e[15]||e[13].dayChanged?k?(k.p(e,o),2&o&&ze(k,1)):(k=kc(e),k.c(),ze(k,1),k.m(t.parentNode,t)):k&&(Ue(),qe(k,1,1,(()=>{k=null})),He());const i={};2&o&&(i.name="pick:"+e[13].from),2&o&&(i.color=e[13].color),r.$set(i),(!b||2&o)&&w!==(w=e[13].ts.format("%H:%M")+"")&&re(u,w),(!b||2&o)&&_!==(_=Qt(e[13].ts.toLocaleString())+"")&&re(l,_),(!b||66&o)&&E!==(E=e[6]("%1 in %2",e[13].from,e[13].conversation_id)+"")&&re(p,E),(!b||2&o&&m!==(m=wr(e[13])))&&te(f,"href",m),(!b||2&o)&&ie(f,"color",e[13].color),(!b||2&o)&&C!==(C=e[13].markdown+"")&&(g.innerHTML=C),(!b||2&o&&v!==(v=e[13].className))&&te(n,"class",v)},i(e){b||(ze(k),ze(r.$$.fragment,e),b=!0)},o(e){qe(k),qe(r.$$.fragment,e),b=!1},d(e){k&&k.d(e),e&&G(t),e&&G(n),Xe(r),y=!1,D()}}}function xc(e){let t,n,r,o,i,a,u,s=e[6]("Loading...")+"";return r=new ct({props:{name:"spinner",animation:"spin"}}),{c(){t=Z("div"),n=Z("span"),Je(r.$$.fragment),o=J(),i=Z("i"),a=V(s),te(t,"class","message__status-line for-loading")},m(e,s){K(e,t,s),z(t,n),Qe(r,n,null),z(n,o),z(n,i),z(i,a),u=!0},p(e,t){(!u||64&t)&&s!==(s=e[6]("Loading...")+"")&&re(a,s)},i(e){u||(ze(r.$$.fragment,e),u=!0)},o(e){qe(r.$$.fragment,e),u=!1},d(e){e&&G(t),Xe(r)}}}function Fc(e){let t,n,r,o,i=0==e[1].length&&!e[8].is("loading"),a=e[3].is("loading"),u=i&&_c(e),s=e[1].render(),c=[];for(let t=0;t<s.length;t+=1)c[t]=Ac(yc(e,s,t));const l=e=>qe(c[e],1,1,(()=>{c[e]=null}));let d=a&&xc(e);return{c(){u&&u.c(),t=J();for(let e=0;e<c.length;e+=1)c[e].c();n=J(),d&&d.c(),r=Q()},m(e,i){u&&u.m(e,i),K(e,t,i);for(let t=0;t<c.length;t+=1)c[t].m(e,i);K(e,n,i),d&&d.m(e,i),K(e,r,i),o=!0},p(e,o){if(2&o&&(i=0==e[1].length&&!e[8].is("loading")),i?u?(u.p(e,o),2&o&&ze(u,1)):(u=_c(e),u.c(),ze(u,1),u.m(t.parentNode,t)):u&&(Ue(),qe(u,1,1,(()=>{u=null})),He()),66&o){let t;for(s=e[1].render(),t=0;t<s.length;t+=1){const r=yc(e,s,t);c[t]?(c[t].p(r,o),ze(c[t],1)):(c[t]=Ac(r),c[t].c(),ze(c[t],1),c[t].m(n.parentNode,n))}for(Ue(),t=s.length;t<c.length;t+=1)l(t);He()}8&o&&(a=e[3].is("loading")),a?d?(d.p(e,o),8&o&&ze(d,1)):(d=xc(e),d.c(),ze(d,1),d.m(r.parentNode,r)):d&&(Ue(),qe(d,1,1,(()=>{d=null})),He())},i(e){if(!o){ze(u);for(let e=0;e<s.length;e+=1)ze(c[e]);ze(d),o=!0}},o(e){qe(u),c=c.filter(Boolean);for(let e=0;e<c.length;e+=1)qe(c[e]);qe(d),o=!1},d(e){u&&u.d(e),e&&G(t),Y(c,e),e&&G(n),d&&d.d(e),e&&G(r)}}}function Sc(e){let t,n,r,o,i,a,u=e[8].is("search");t=new wt({props:{$$slots:{default:[wc]},$$scope:{ctx:e}}}),r=new ia({props:{class:e[5].join(" "),$$slots:{default:[Fc]},$$scope:{ctx:e}}}),r.$on("rendered",Oc);let s=u&&function(e){let t,n;return t=new qr({props:{conversation:e[8]}}),{c(){Je(t.$$.fragment)},m(e,r){Qe(t,e,r),n=!0},p:y,i(e){n||(ze(t.$$.fragment,e),n=!0)},o(e){qe(t.$$.fragment,e),n=!1},d(e){Xe(t,e)}}}(e);return{c(){Je(t.$$.fragment),n=J(),Je(r.$$.fragment),o=J(),s&&s.c(),i=Q()},m(e,u){Qe(t,e,u),K(e,n,u),Qe(r,e,u),K(e,o,u),s&&s.m(e,u),K(e,i,u),a=!0},p(e,[n]){const o={};65616&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o);const i={};32&n&&(i.class=e[5].join(" ")),65742&n&&(i.$$scope={dirty:n,ctx:e}),r.$set(i),u&&s.p(e,n)},i(e){a||(ze(t.$$.fragment,e),ze(r.$$.fragment,e),ze(s),a=!0)},o(e){qe(t.$$.fragment,e),qe(r.$$.fragment,e),qe(s),a=!1},d(e){Xe(t,e),e&&G(n),Xe(r,e),e&&G(o),s&&s.d(e),e&&G(i)}}}const Oc=e=>e.detail.scrollTo(-1);function Bc(e,t,n){let r,o,i,a,u,s,c,l,d=y;F(e,Hn,(e=>n(2,u=e))),F(e,ar,(e=>n(6,c=e))),F(e,ur,(e=>n(7,l=e))),e.$$.on_destroy.push((()=>d()));const f=De("user"),p=f.search;function m(e){const t=e.message;return p.update({userInput:t}),Hn.go("/search?q="+encodeURIComponent(t),{replace:!0}),t?p.load({match:t}):r.clear()}return F(e,p,(e=>n(3,s=e))),ve((()=>{f.search.on("send",m),Hn.param("q")&&m({message:Hn.param("q")})})),e.$$.update=()=>{8&e.$$.dirty&&(n(0,r=s.messages),d(),d=A(r,(e=>n(1,a=e)))),9&e.$$.dirty&&n(5,o=["main",r.length&&"has-results",s.is("search")&&"is-above-chat-input"].filter((e=>e))),6&e.$$.dirty&&n(4,i=u.param("q")||a.length)},[r,a,u,s,i,o,c,l,p,function(e){if(i)return a.clear();e.preventDefault(),document.querySelector(".is-primary-input").focus()},"Search"]}class Nc extends nt{constructor(e){super(),tt(this,e,Bc,Sc,k,{title:10})}get title(){return this.$$.ctx[10]}}function jc(e){let t,n,r=e[2]("Account")+"";return{c(){t=Z("h1"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Account")+"")&&re(n,r)},d(e){e&&G(t)}}}function Tc(e){let t,n,r=e[2]("Email")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Email")+"")&&re(n,r)},d(e){e&&G(t)}}}function Rc(e){let t,n,r=e[2]("Notification keywords")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Notification keywords")+"")&&re(n,r)},d(e){e&&G(t)}}}function Lc(e){let t,n,r=e[2]("Enable notifications")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Enable notifications")+"")&&re(n,r)},d(e){e&&G(t)}}}function Mc(e){let t,n,r=e[2]("Notification sound volume")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Notification sound volume")+"")&&re(n,r)},d(e){e&&G(t)}}}function Pc(e){let t,n,r=e[2]("Test")+"";return{c(){t=Z("span"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Test")+"")&&re(n,r)},d(e){e&&G(t)}}}function Ic(e){let t,n,r=e[2]("Ignore join/part messages")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Ignore join/part messages")+"")&&re(n,r)},d(e){e&&G(t)}}}function Uc(e){let t,n,r=e[2]("Expand URL to media")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Expand URL to media")+"")&&re(n,r)},d(e){e&&G(t)}}}function Hc(e){let t,n,r=e[2]("Enable compact message display")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Enable compact message display")+"")&&re(n,r)},d(e){e&&G(t)}}}function zc(e){let t,n,r=e[2]("Theme")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Theme")+"")&&re(n,r)},d(e){e&&G(t)}}}function qc(e){let t,n,r=e[2]("Color scheme")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Color scheme")+"")&&re(n,r)},d(e){e&&G(t)}}}function Wc(e){let t,n,r,o,i,a=e[2]("Language")+"";return o=new ct({props:{name:"globe"}}),{c(){t=Z("span"),n=V(a),r=J(),Je(o.$$.fragment),te(t,"slot","label")},m(e,a){K(e,t,a),z(t,n),z(t,r),Qe(o,t,null),i=!0},p(e,t){(!i||4&t)&&a!==(a=e[2]("Language")+"")&&re(n,a)},i(e){i||(ze(o.$$.fragment,e),i=!0)},o(e){qe(o.$$.fragment,e),i=!1},d(e){e&&G(t),Xe(o)}}}function Kc(e){let t,n,r=e[2]("Password")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Password")+"")&&re(n,r)},d(e){e&&G(t)}}}function Gc(e){let t,n,r=e[2]("Repeat password")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Repeat password")+"")&&re(n,r)},d(e){e&&G(t)}}}function Yc(e){let t,n,r=e[2]("Save settings")+"";return{c(){t=Z("span"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("Save settings")+"")&&re(n,r)},d(e){e&&G(t)}}}function Zc(e){let t,n,r=e[2]("irc://")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("irc://")+"")&&re(n,r)},d(e){e&&G(t)}}}function Vc(e){let t,n,r=e[2]("ircs://")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){4&t&&r!==(r=e[2]("ircs://")+"")&&re(n,r)},d(e){e&&G(t)}}}function Jc(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h,g,$,v,b,y,D,w,_,E,C,k,A,x,F,S,O,B,N,j,T,R,L,M,P,I,U,H,q,W,Y,Q=e[3]('Leave this unchecked, and hit "Save" to disable notifications.')+"",ne=e[2]("Leave the password fields empty to keep the current password.")+"";t=new wt({props:{$$slots:{default:[jc]},$$scope:{ctx:e}}}),i=new ko({props:{type:"email",name:"email",form:e[5],readonly:!0,$$slots:{label:[Tc]},$$scope:{ctx:e}}}),u=new ko({props:{name:"highlightKeywords",form:e[5],placeholder:e[2]("whatever, keywords"),$$slots:{label:[Rc]},$$scope:{ctx:e}}}),c=new Xr({props:{name:"wantNotifications",form:e[5],$$slots:{label:[Lc]},$$scope:{ctx:e}}}),m=new po({props:{name:"volume",form:e[5],options:la.volumeOptions,$$slots:{label:[Mc]},$$scope:{ctx:e}}}),$=new Gr({props:{icon:"play",disabled:!parseInt(e[0].volume,10),type:"button",$$slots:{default:[Pc]},$$scope:{ctx:e}}}),$.$on("click",e[13]),b=new Xr({props:{name:"ignoreStatuses",form:e[5],$$slots:{label:[Ic]},$$scope:{ctx:e}}}),D=new Xr({props:{name:"expandUrlToMedia",form:e[5],$$slots:{label:[Uc]},$$scope:{ctx:e}}}),_=new Xr({props:{name:"compactDisplay",form:e[5],$$slots:{label:[Hc]},$$scope:{ctx:e}}}),C=new po({props:{name:"activeTheme",form:e[5],options:e[7].themeOptions,$$slots:{label:[zc]},$$scope:{ctx:e}}}),A=new po({props:{name:"colorScheme",form:e[5],readonly:e[1],options:e[7].colorSchemeOptions,$$slots:{label:[qc]},$$scope:{ctx:e}}}),F=new po({props:{name:"lang",form:e[5],options:e[4].languageOptions,$$slots:{label:[Wc]},$$scope:{ctx:e}}}),O=new ko({props:{type:"password",name:"password",form:e[5],autocomplete:"new-password",$$slots:{label:[Kc]},$$scope:{ctx:e}}}),N=new ko({props:{type:"password",name:"password_again",form:e[5],autocomplete:"new-password",$$slots:{label:[Gc]},$$scope:{ctx:e}}}),P=new Gr({props:{icon:"save",op:e[8],$$slots:{default:[Yc]},$$scope:{ctx:e}}}),U=new io({props:{op:e[8]}});let oe=e[6]&&function(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h,g,$,v,b=e[2]("Mark the protocols below that you want %1 to handle, and a popup should ask you for confirmation.",e[2]("Convos"))+"",y=e[2]("If you do not see any popup, then it probably means %1 already handles the protocol.",e[2]("Convos"))+"",D=e[3]("Test it by clicking on %1.","irc://localhost:6667")+"",w=e[3]("Test it by clicking on %1.","ircs://irc.libera.chat:6697/%23convos")+"";return c=new Xr({props:{name:"handle_protocol_irc",form:e[5],$$slots:{label:[Zc]},$$scope:{ctx:e}}}),p=new Xr({props:{name:"handle_protocol_ircs",form:e[5],$$slots:{label:[Vc]},$$scope:{ctx:e}}}),{c(){t=Z("form"),n=Z("h2"),n.textContent="Protocol handlers",r=J(),o=Z("p"),i=V(b),a=J(),u=V(y),s=J(),Je(c.$$.fragment),l=J(),d=Z("p"),f=J(),Je(p.$$.fragment),m=J(),h=Z("p"),te(d,"class","help"),te(h,"class","help")},m(b,y){K(b,t,y),z(t,n),z(t,r),z(t,o),z(o,i),z(o,a),z(o,u),z(t,s),Qe(c,t,null),z(t,l),z(t,d),d.innerHTML=D,z(t,f),Qe(p,t,null),z(t,m),z(t,h),h.innerHTML=w,g=!0,$||(v=X(t,"submit",ee(e[12])),$=!0)},p(e,t){(!g||4&t)&&b!==(b=e[2]("Mark the protocols below that you want %1 to handle, and a popup should ask you for confirmation.",e[2]("Convos"))+"")&&re(i,b),(!g||4&t)&&y!==(y=e[2]("If you do not see any popup, then it probably means %1 already handles the protocol.",e[2]("Convos"))+"")&&re(u,y);const n={};131076&t&&(n.$$scope={dirty:t,ctx:e}),c.$set(n),(!g||8&t)&&D!==(D=e[3]("Test it by clicking on %1.","irc://localhost:6667")+"")&&(d.innerHTML=D);const r={};131076&t&&(r.$$scope={dirty:t,ctx:e}),p.$set(r),(!g||8&t)&&w!==(w=e[3]("Test it by clicking on %1.","ircs://irc.libera.chat:6697/%23convos")+"")&&(h.innerHTML=w)},i(e){g||(ze(c.$$.fragment,e),ze(p.$$.fragment,e),g=!0)},o(e){qe(c.$$.fragment,e),qe(p.$$.fragment,e),g=!1},d(e){e&&G(t),Xe(c),Xe(p),$=!1,v()}}}(e);return{c(){Je(t.$$.fragment),n=J(),r=Z("main"),o=Z("form"),Je(i.$$.fragment),a=J(),Je(u.$$.fragment),s=J(),Je(c.$$.fragment),l=J(),d=Z("p"),f=J(),p=Z("div"),Je(m.$$.fragment),h=J(),g=Z("div"),Je($.$$.fragment),v=J(),Je(b.$$.fragment),y=J(),Je(D.$$.fragment),w=J(),Je(_.$$.fragment),E=J(),Je(C.$$.fragment),k=J(),Je(A.$$.fragment),x=J(),Je(F.$$.fragment),S=J(),Je(O.$$.fragment),B=J(),Je(N.$$.fragment),j=J(),T=Z("p"),R=V(ne),L=J(),M=Z("div"),Je(P.$$.fragment),I=J(),Je(U.$$.fragment),H=J(),oe&&oe.c(),te(d,"class","help"),te(g,"class","flex-basis-30"),te(p,"class","inputs-side-by-side"),te(M,"class","form-actions"),te(o,"method","post"),te(r,"class","main")},m(G,Z){Qe(t,G,Z),K(G,n,Z),K(G,r,Z),z(r,o),Qe(i,o,null),z(o,a),Qe(u,o,null),z(o,s),Qe(c,o,null),z(o,l),z(o,d),d.innerHTML=Q,z(o,f),z(o,p),Qe(m,p,null),z(p,h),z(p,g),Qe($,g,null),z(o,v),Qe(b,o,null),z(o,y),Qe(D,o,null),z(o,w),Qe(_,o,null),z(o,E),Qe(C,o,null),z(o,k),Qe(A,o,null),z(o,x),Qe(F,o,null),z(o,S),Qe(O,o,null),z(o,B),Qe(N,o,null),z(o,j),z(o,T),z(T,R),z(o,L),z(o,M),Qe(P,M,null),z(o,I),Qe(U,o,null),z(r,H),oe&&oe.m(r,null),q=!0,W||(Y=X(o,"submit",ee(e[9])),W=!0)},p(e,[n]){const r={};131076&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r);const o={};131076&n&&(o.$$scope={dirty:n,ctx:e}),i.$set(o);const a={};4&n&&(a.placeholder=e[2]("whatever, keywords")),131076&n&&(a.$$scope={dirty:n,ctx:e}),u.$set(a);const s={};131076&n&&(s.$$scope={dirty:n,ctx:e}),c.$set(s),(!q||8&n)&&Q!==(Q=e[3]('Leave this unchecked, and hit "Save" to disable notifications.')+"")&&(d.innerHTML=Q);const l={};131076&n&&(l.$$scope={dirty:n,ctx:e}),m.$set(l);const f={};1&n&&(f.disabled=!parseInt(e[0].volume,10)),131076&n&&(f.$$scope={dirty:n,ctx:e}),$.$set(f);const p={};131076&n&&(p.$$scope={dirty:n,ctx:e}),b.$set(p);const h={};131076&n&&(h.$$scope={dirty:n,ctx:e}),D.$set(h);const g={};131076&n&&(g.$$scope={dirty:n,ctx:e}),_.$set(g);const v={};131076&n&&(v.$$scope={dirty:n,ctx:e}),C.$set(v);const y={};2&n&&(y.readonly=e[1]),131076&n&&(y.$$scope={dirty:n,ctx:e}),A.$set(y);const w={};16&n&&(w.options=e[4].languageOptions),131076&n&&(w.$$scope={dirty:n,ctx:e}),F.$set(w);const E={};131076&n&&(E.$$scope={dirty:n,ctx:e}),O.$set(E);const k={};131076&n&&(k.$$scope={dirty:n,ctx:e}),N.$set(k),(!q||4&n)&&ne!==(ne=e[2]("Leave the password fields empty to keep the current password.")+"")&&re(R,ne);const x={};131076&n&&(x.$$scope={dirty:n,ctx:e}),P.$set(x),e[6]&&oe.p(e,n)},i(e){q||(ze(t.$$.fragment,e),ze(i.$$.fragment,e),ze(u.$$.fragment,e),ze(c.$$.fragment,e),ze(m.$$.fragment,e),ze($.$$.fragment,e),ze(b.$$.fragment,e),ze(D.$$.fragment,e),ze(_.$$.fragment,e),ze(C.$$.fragment,e),ze(A.$$.fragment,e),ze(F.$$.fragment,e),ze(O.$$.fragment,e),ze(N.$$.fragment,e),ze(P.$$.fragment,e),ze(U.$$.fragment,e),ze(oe),q=!0)},o(e){qe(t.$$.fragment,e),qe(i.$$.fragment,e),qe(u.$$.fragment,e),qe(c.$$.fragment,e),qe(m.$$.fragment,e),qe($.$$.fragment,e),qe(b.$$.fragment,e),qe(D.$$.fragment,e),qe(_.$$.fragment,e),qe(C.$$.fragment,e),qe(A.$$.fragment,e),qe(F.$$.fragment,e),qe(O.$$.fragment,e),qe(N.$$.fragment,e),qe(P.$$.fragment,e),qe(U.$$.fragment,e),qe(oe),q=!1},d(e){Xe(t,e),e&&G(n),e&&G(r),Xe(i),Xe(u),Xe(c),Xe(m),Xe($),Xe(b),Xe(D),Xe(_),Xe(C),Xe(A),Xe(F),Xe(O),Xe(N),Xe(P),Xe(U),oe&&oe.d(),W=!1,Y()}}}function Qc(e,t,n){let r,o,i,a,u,s;F(e,ar,(e=>n(2,i=e))),F(e,ur,(e=>n(3,u=e))),F(e,ir,(e=>n(4,s=e)));const c=De("api"),l=No();F(e,l,(e=>n(0,o=e)));const d="registerProtocolHandler"in navigator,f=De("themeManager");F(e,f,(e=>n(11,a=e)));const p=De("user"),m=c("updateUser");function h(e){navigator.registerProtocolHandler(e,Hn.urlFor("/register?uri=%s"),i("Convos %1 handler",e))}l.set({activeTheme:f.activeTheme,colorScheme:f.colorScheme,compactDisplay:f.compactDisplay,email:p.email,expandUrlToMedia:p.expandUrlToMedia,highlightKeywords:p.highlightKeywords.join(", "),ignoreStatuses:p.ignoreStatuses,lang:ir.lang,volume:la.volume,wantNotifications:la.wantNotifications}),be(la.on("update",((e,t)=>{(t.wantNotifications||t.desktopAccess)&&e.wantNotifications&&e.show(i("You have enabled notifications."))})));return e.$$.update=()=>{2049&e.$$.dirty&&n(1,r=!a.hasColorScheme(o.activeTheme)),1&e.$$.dirty&&ir.load(o.lang),1&e.$$.dirty&&o.handle_protocol_irc&&h("irc"),1&e.$$.dirty&&o.handle_protocol_ircs&&h("ircs")},[o,r,i,u,s,l,d,f,m,function(){const e=[o.password,o.password_again];if(e.join("").length&&e[0]!=e[1])return m.error("Passwords does not match.");o.wantNotifications||l.set({wantNotifications:!1}),o.wantNotifications&&la.requestDesktopAccess(),la.update(l.get(["volume","wantNotifications"])),r&&l.set({colorScheme:"auto"}),f.update(l.get(["activeTheme","colorScheme","compactDisplay"]));const t=rn(l.get("highlightKeywords")),n={email:p.email,highlight_keywords:t};e[0]&&(n.password=e[0]),p.update(l.get(["expandUrlToMedia","ignoreStatuses"])).update({highlightKeywords:t}),m.perform(n)},"Account",a,function(t){we.call(this,e,t)},()=>la.play({volume:o.volume})]}class Xc extends nt{constructor(e){super(),tt(this,e,Qc,Jc,k,{title:10})}get title(){return this.$$.ctx[10]}}function el(e){let t,n,r=e[4]("Global settings")+"";return{c(){t=Z("h1"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){16&t&&r!==(r=e[4]("Global settings")+"")&&re(n,r)},d(e){e&&G(t)}}}function tl(e){let t,n,r=e[4]("Organization name")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){16&t&&r!==(r=e[4]("Organization name")+"")&&re(n,r)},d(e){e&&G(t)}}}function nl(e){let t,n,r=e[4]("Can be changed if you want to add a touch of your organization.")+"";return{c(){t=Z("p"),n=V(r),te(t,"class","help"),te(t,"slot","help")},m(e,r){K(e,t,r),z(t,n)},p(e,t){16&t&&r!==(r=e[4]("Can be changed if you want to add a touch of your organization.")+"")&&re(n,r)},d(e){e&&G(t)}}}function rl(e){let t,n,r=e[4]("Organization URL")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){16&t&&r!==(r=e[4]("Organization URL")+"")&&re(n,r)},d(e){e&&G(t)}}}function ol(e){let t,n,r=e[4]('Used together with "Organization name" to add a link to your organization on the login screen.')+"";return{c(){t=Z("p"),n=V(r),te(t,"class","help"),te(t,"slot","help")},m(e,r){K(e,t,r),z(t,n)},p(e,t){16&t&&r!==(r=e[4]('Used together with "Organization name" to add a link to your organization on the login screen.')+"")&&re(n,r)},d(e){e&&G(t)}}}function il(e){let t,n,r=e[4]("Admin email")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){16&t&&r!==(r=e[4]("Admin email")+"")&&re(n,r)},d(e){e&&G(t)}}}function al(e){let t,n,r=e[4]("This email can be used by users to get in touch with the Convos admin.")+"";return{c(){t=Z("p"),n=V(r),te(t,"class","help"),te(t,"slot","help")},m(e,r){K(e,t,r),z(t,n)},p(e,t){16&t&&r!==(r=e[4]("This email can be used by users to get in touch with the Convos admin.")+"")&&re(n,r)},d(e){e&&G(t)}}}function ul(e){let t,n,r=e[4]("Video service")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){16&t&&r!==(r=e[4]("Video service")+"")&&re(n,r)},d(e){e&&G(t)}}}function sl(e){let t,n=e[5]("This should point to a [%1](%2) instance.","https://meet.jit.si/","https://github.com/jitsi/jitsi-meet")+"";return{c(){t=Z("p"),te(t,"class","help"),te(t,"slot","help")},m(e,r){K(e,t,r),t.innerHTML=n},p(e,r){32&r&&n!==(n=e[5]("This should point to a [%1](%2) instance.","https://meet.jit.si/","https://github.com/jitsi/jitsi-meet")+"")&&(t.innerHTML=n)},d(e){e&&G(t)}}}function cl(e){let t,n,r=e[4]("Registration is open to public")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){16&t&&r!==(r=e[4]("Registration is open to public")+"")&&re(n,r)},d(e){e&&G(t)}}}function ll(e){let t,n,r=e[4]("Save settings")+"";return{c(){t=Z("span"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){16&t&&r!==(r=e[4]("Save settings")+"")&&re(n,r)},d(e){e&&G(t)}}}function dl(e){let t,n,r=e[5]("You currently have Convos v%1 installed.",tn("version"))+"";return{c(){t=Z("p"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){32&t&&r!==(r=e[5]("You currently have Convos v%1 installed.",tn("version"))+"")&&re(n,r)},d(e){e&&G(t)}}}function fl(e){let t,n,r=e[5](e[3]?"You have Convos v%1, which is the latest version.":"Convos v%1 is available.",e[0])+"";return{c(){t=Z("p"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){41&t&&r!==(r=e[5](e[3]?"You have Convos v%1, which is the latest version.":"Convos v%1 is available.",e[0])+"")&&re(n,r)},d(e){e&&G(t)}}}function pl(e){let t,n,r=e[4](e[1].error())+"";return{c(){t=Z("div"),n=V(r),te(t,"class","error")},m(e,r){K(e,t,r),z(t,n)},p(e,t){18&t&&r!==(r=e[4](e[1].error())+"")&&re(n,r)},d(e){e&&G(t)}}}function ml(e){let t,n,r=e[4]("Check for updates")+"";return{c(){t=Z("span"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){16&t&&r!==(r=e[4]("Check for updates")+"")&&re(n,r)},d(e){e&&G(t)}}}function hl(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h,g,$,v,b,y,D,w,_,E,C,k,A,x=e[4]("Disk usage")+"",F=e[2].blocks_pct+"",S=e[4]("Disk usage")+"",O=e[2].blocks_used+"",B=e[2].blocks_total+"",N=e[2].inodes_pct+"",j=e[4]("Inode usage")+"",T=e[2].inodes_used+"",R=e[2].inodes_total+"";return{c(){t=Z("div"),n=Z("h2"),r=V(x),o=J(),i=Z("div"),a=Z("div"),u=V(F),s=V("%"),c=J(),l=Z("p"),d=V(S),f=V(": "),p=V(O),m=V(" / "),h=V(B),g=J(),$=Z("div"),v=Z("div"),b=V(N),y=V("%"),D=J(),w=Z("p"),_=V(j),E=V(": "),C=V(T),k=V(" / "),A=V(R),te(a,"class","progress__bar"),ie(a,"width",e[2].blocks_pct+"%"),te(i,"class","progress"),te(l,"class","help"),te(v,"class","progress__bar"),ie(v,"width",e[2].inodes_pct+"%"),te($,"class","progress"),te(w,"class","help"),te(t,"id","disk-usage")},m(e,x){K(e,t,x),z(t,n),z(n,r),z(t,o),z(t,i),z(i,a),z(a,u),z(a,s),z(t,c),z(t,l),z(l,d),z(l,f),z(l,p),z(l,m),z(l,h),z(t,g),z(t,$),z($,v),z(v,b),z(v,y),z(t,D),z(t,w),z(w,_),z(w,E),z(w,C),z(w,k),z(w,A)},p(e,t){16&t&&x!==(x=e[4]("Disk usage")+"")&&re(r,x),4&t&&F!==(F=e[2].blocks_pct+"")&&re(u,F),4&t&&ie(a,"width",e[2].blocks_pct+"%"),16&t&&S!==(S=e[4]("Disk usage")+"")&&re(d,S),4&t&&O!==(O=e[2].blocks_used+"")&&re(p,O),4&t&&B!==(B=e[2].blocks_total+"")&&re(h,B),4&t&&N!==(N=e[2].inodes_pct+"")&&re(b,N),4&t&&ie(v,"width",e[2].inodes_pct+"%"),16&t&&j!==(j=e[4]("Inode usage")+"")&&re(_,j),4&t&&T!==(T=e[2].inodes_used+"")&&re(C,T),4&t&&R!==(R=e[2].inodes_total+"")&&re(A,R)},d(e){e&&G(t)}}}function gl(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h,g,$,v,b,y,D,w,_,C,k,A,x,F,S,O,B,N,j,T,R,L,M,P,I,U=e[4]("Convos settings")+"",H=e[5]("These settings control what users experience when they visit [%1](%1).",tn("base_url"))+"",q=e[4]("Tick this box if you want users to be able to register without an invite URL.")+"",W=e[4]("Check for updates")+"";function Y(e,t){return(null==N||2&t)&&(N=!!e[1].is("error")),N?pl:((null==j||2&t)&&(j=!!e[1].is("success")),j?fl:dl)}t=new wt({props:{$$slots:{default:[el]},$$scope:{ctx:e}}}),l=new ko({props:{name:"organization_name",form:e[6],$$slots:{help:[nl],label:[tl]},$$scope:{ctx:e}}}),f=new ko({props:{name:"organization_url",form:e[6],placeholder:e[4]("https://convos.chat"),$$slots:{help:[ol],label:[rl]},$$scope:{ctx:e}}}),m=new ko({props:{name:"contact",form:e[6],placeholder:e[4]("Ex: jhthorsen@cpan.org"),$$slots:{help:[al],label:[il]},$$scope:{ctx:e}}}),g=new ko({props:{name:"video_service",form:e[6],placeholder:e[4]("Ex: https://meet.jit.si/"),$$slots:{help:[sl],label:[ul]},$$scope:{ctx:e}}}),v=new Xr({props:{name:"open_to_public",form:e[6],$$slots:{label:[cl]},$$scope:{ctx:e}}}),C=new Gr({props:{icon:"save",op:e[8],$$slots:{default:[ll]},$$scope:{ctx:e}}}),A=new io({props:{op:e[8]}});let Q=Y(e,-1),ne=Q(e);R=new Gr({props:{icon:"sync-alt",op:e[7],$$slots:{default:[ml]},$$scope:{ctx:e}}});let oe=e[2]&&hl(e);return{c(){Je(t.$$.fragment),n=J(),r=Z("main"),o=Z("form"),i=Z("h2"),a=V(U),u=J(),s=Z("p"),c=J(),Je(l.$$.fragment),d=J(),Je(f.$$.fragment),p=J(),Je(m.$$.fragment),h=J(),Je(g.$$.fragment),$=J(),Je(v.$$.fragment),b=J(),y=Z("p"),D=V(q),w=J(),_=Z("div"),Je(C.$$.fragment),k=J(),Je(A.$$.fragment),x=J(),F=Z("h2"),S=V(W),O=J(),B=Z("form"),ne.c(),T=J(),Je(R.$$.fragment),L=J(),oe&&oe.c(),te(y,"class","help"),te(_,"class","form-actions"),te(o,"id","convos-settings"),te(o,"method","post"),te(B,"id","convos-updates"),te(B,"method","post"),te(r,"class","main")},m(E,N){Qe(t,E,N),K(E,n,N),K(E,r,N),z(r,o),z(o,i),z(i,a),z(o,u),z(o,s),s.innerHTML=H,z(o,c),Qe(l,o,null),z(o,d),Qe(f,o,null),z(o,p),Qe(m,o,null),z(o,h),Qe(g,o,null),z(o,$),Qe(v,o,null),z(o,b),z(o,y),z(y,D),z(o,w),z(o,_),Qe(C,_,null),z(o,k),Qe(A,o,null),z(r,x),z(r,F),z(F,S),z(r,O),z(r,B),ne.m(B,null),z(B,T),Qe(R,B,null),z(r,L),oe&&oe.m(r,null),M=!0,P||(I=[X(o,"submit",ee(e[9])),X(B,"submit",ee(e[11]))],P=!0)},p(e,[n]){const o={};65552&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o),(!M||16&n)&&U!==(U=e[4]("Convos settings")+"")&&re(a,U),(!M||32&n)&&H!==(H=e[5]("These settings control what users experience when they visit [%1](%1).",tn("base_url"))+"")&&(s.innerHTML=H);const i={};65552&n&&(i.$$scope={dirty:n,ctx:e}),l.$set(i);const u={};16&n&&(u.placeholder=e[4]("https://convos.chat")),65552&n&&(u.$$scope={dirty:n,ctx:e}),f.$set(u);const c={};16&n&&(c.placeholder=e[4]("Ex: jhthorsen@cpan.org")),65552&n&&(c.$$scope={dirty:n,ctx:e}),m.$set(c);const d={};16&n&&(d.placeholder=e[4]("Ex: https://meet.jit.si/")),65584&n&&(d.$$scope={dirty:n,ctx:e}),g.$set(d);const p={};65552&n&&(p.$$scope={dirty:n,ctx:e}),v.$set(p),(!M||16&n)&&q!==(q=e[4]("Tick this box if you want users to be able to register without an invite URL.")+"")&&re(D,q);const h={};65552&n&&(h.$$scope={dirty:n,ctx:e}),C.$set(h),(!M||16&n)&&W!==(W=e[4]("Check for updates")+"")&&re(S,W),Q===(Q=Y(e,n))&&ne?ne.p(e,n):(ne.d(1),ne=Q(e),ne&&(ne.c(),ne.m(B,T)));const $={};65552&n&&($.$$scope={dirty:n,ctx:e}),R.$set($),e[2]?oe?oe.p(e,n):(oe=hl(e),oe.c(),oe.m(r,null)):oe&&(oe.d(1),oe=null)},i(e){M||(ze(t.$$.fragment,e),ze(l.$$.fragment,e),ze(f.$$.fragment,e),ze(m.$$.fragment,e),ze(g.$$.fragment,e),ze(v.$$.fragment,e),ze(C.$$.fragment,e),ze(A.$$.fragment,e),ze(R.$$.fragment,e),M=!0)},o(e){qe(t.$$.fragment,e),qe(l.$$.fragment,e),qe(f.$$.fragment,e),qe(m.$$.fragment,e),qe(g.$$.fragment,e),qe(v.$$.fragment,e),qe(C.$$.fragment,e),qe(A.$$.fragment,e),qe(R.$$.fragment,e),M=!1},d(e){Xe(t,e),e&&G(n),e&&G(r),Xe(l),Xe(f),Xe(m),Xe(g),Xe(v),Xe(C),Xe(A),ne.d(),Xe(R),oe&&oe.d(),P=!1,E(I)}}}function $l(e,t,n){let r,o,i,a,u;F(e,ar,(e=>n(4,a=e))),F(e,ur,(e=>n(5,u=e)));const s=De("api"),c=No(),l=De("user"),d=s("checkForUpdates");F(e,d,(e=>n(1,i=e)));const f=s("getSettings"),p=s("updateSettings");let m=null;ve((async()=>{await f.perform();const e=f.res.body;n(2,m=function(e){if(!e)return null;const t=e.block_size||1024;return{blocks_pct:Math.ceil(e.blocks_used/e.blocks_total*100),blocks_total:Yt(t*e.blocks_total,"B"),blocks_used:Yt(t*e.blocks_used,"B"),inodes_pct:Math.ceil(e.inodes_used/e.inodes_total*100),inodes_total:Yt(e.inodes_total),inodes_used:Yt(e.inodes_used)}}(e.disk_usage)),delete e.disk_usage,e.contact=e.contact.replace(/mailto:/,""),c.set(e)}));return e.$$.update=()=>{2&e.$$.dirty&&n(0,r=i.res.body.available),1&e.$$.dirty&&n(3,o=r==tn("version"))},[r,i,m,o,a,u,c,d,p,function(){const e=c.get();e.contact&&(e.contact="mailto:"+e.contact),tn("contact",e.contact),tn("open_to_public",e.open_to_public),tn("organization_name",e.organization_name),tn("organization_url",e.organization_url),l.update({videoService:e.video_service}),p.perform(e)},"Global settings",()=>d.perform()]}class vl extends nt{constructor(e){super(),tt(this,e,$l,gl,k,{title:10})}get title(){return this.$$.ctx[10]}}function bl(e,t,n){const r=e.slice();return r[21]=t[n],r}function yl(e){let t,n,r,o,i,a,u=Qt(e[3]("See all users"))+"";return t=new ct({props:{name:"list"}}),n=new ct({props:{name:"times"}}),{c(){Je(t.$$.fragment),Je(n.$$.fragment),r=J(),o=Z("span"),i=V(u),te(o,"class","tooltip is-left")},m(e,u){Qe(t,e,u),Qe(n,e,u),K(e,r,u),K(e,o,u),z(o,i),a=!0},p(e,t){(!a||8&t)&&u!==(u=Qt(e[3]("See all users"))+"")&&re(i,u)},i(e){a||(ze(t.$$.fragment,e),ze(n.$$.fragment,e),a=!0)},o(e){qe(t.$$.fragment,e),qe(n.$$.fragment,e),a=!1},d(e){Xe(t,e),Xe(n,e),e&&G(r),e&&G(o)}}}function Dl(e){let t,n,r,o,i,a=e[3](e[1].uid?"Account":"Users")+"";return o=new Ci({props:{href:"/settings/users",class:"btn-hallow has-tooltip "+(e[1].uid?"is-active":""),$$slots:{default:[yl]},$$scope:{ctx:e}}}),{c(){t=Z("h1"),n=V(a),r=J(),Je(o.$$.fragment)},m(e,a){K(e,t,a),z(t,n),K(e,r,a),Qe(o,e,a),i=!0},p(e,t){(!i||10&t)&&a!==(a=e[3](e[1].uid?"Account":"Users")+"")&&re(n,a);const r={};2&t&&(r.class="btn-hallow has-tooltip "+(e[1].uid?"is-active":"")),16777224&t&&(r.$$scope={dirty:t,ctx:e}),o.$set(r)},i(e){i||(ze(o.$$.fragment,e),i=!0)},o(e){qe(o.$$.fragment,e),i=!1},d(e){e&&G(t),e&&G(r),Xe(o,e)}}}function wl(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h,g,$,v,b,y,D,w,_,E,C,k,A,x,F,S,O,B,N,j,T,R,L,M,P=e[3]("Invite or recover password")+"",I=e[3]("Users")+"",U=e[0].length+"",H=e[3]("Email")+"",q=e[3]("Roles")+"",W=e[3]("Registered")+"";i=new ko({props:{type:"email",name:"email",form:e[6],placeholder:e[3]("user@example.com"),$$slots:{help:[Cl],label:[El]},$$scope:{ctx:e}}});let Q=e[2].url&&kl(e);c=new Gr({props:{icon:"save",op:e[9],disabled:!e[1].email,$$slots:{default:[Al]},$$scope:{ctx:e}}}),d=new io({props:{op:e[9],success:"Link generated."}}),j=new su({props:{colspan:"3",op:e[5]}});let ne=e[0],oe=[];for(let t=0;t<ne.length;t+=1)oe[t]=xl(bl(e,ne,t));return{c(){t=Z("form"),n=Z("h2"),r=V(P),o=J(),Je(i.$$.fragment),a=J(),Q&&Q.c(),u=J(),s=Z("div"),Je(c.$$.fragment),l=J(),Je(d.$$.fragment),f=J(),p=Z("h2"),m=V(I),h=J(),g=Z("small"),$=V("("),v=V(U),b=V(")"),y=J(),D=Z("table"),w=Z("thead"),_=Z("tr"),E=Z("th"),C=V(H),k=J(),A=Z("th"),x=V(q),F=J(),S=Z("th"),O=V(W),B=J(),N=Z("tbody"),Je(j.$$.fragment),T=J();for(let e=0;e<oe.length;e+=1)oe[e].c();te(s,"class","form-actions"),te(t,"id","invite"),te(t,"method","post")},m(P,I){K(P,t,I),z(t,n),z(n,r),z(t,o),Qe(i,t,null),z(t,a),Q&&Q.m(t,null),z(t,u),z(t,s),Qe(c,s,null),z(t,l),Qe(d,t,null),K(P,f,I),K(P,p,I),z(p,m),z(p,h),z(p,g),z(g,$),z(g,v),z(g,b),K(P,y,I),K(P,D,I),z(D,w),z(w,_),z(_,E),z(E,C),z(_,k),z(_,A),z(A,x),z(_,F),z(_,S),z(S,O),z(D,B),z(D,N),Qe(j,N,null),z(N,T);for(let e=0;e<oe.length;e+=1)oe[e].m(N,null);R=!0,L||(M=X(t,"submit",ee(e[13])),L=!0)},p(e,n){(!R||8&n)&&P!==(P=e[3]("Invite or recover password")+"")&&re(r,P);const o={};8&n&&(o.placeholder=e[3]("user@example.com")),16777224&n&&(o.$$scope={dirty:n,ctx:e}),i.$set(o),e[2].url?Q?Q.p(e,n):(Q=kl(e),Q.c(),Q.m(t,u)):Q&&(Q.d(1),Q=null);const a={};2&n&&(a.disabled=!e[1].email),16777224&n&&(a.$$scope={dirty:n,ctx:e}),c.$set(a),(!R||8&n)&&I!==(I=e[3]("Users")+"")&&re(m,I),(!R||1&n)&&U!==(U=e[0].length+"")&&re(v,U),(!R||8&n)&&H!==(H=e[3]("Email")+"")&&re(C,H),(!R||8&n)&&q!==(q=e[3]("Roles")+"")&&re(x,q),(!R||8&n)&&W!==(W=e[3]("Registered")+"")&&re(O,W);const s={};if(32&n&&(s.op=e[5]),j.$set(s),1&n){let t;for(ne=e[0],t=0;t<ne.length;t+=1){const r=bl(e,ne,t);oe[t]?oe[t].p(r,n):(oe[t]=xl(r),oe[t].c(),oe[t].m(N,null))}for(;t<oe.length;t+=1)oe[t].d(1);oe.length=ne.length}},i(e){R||(ze(i.$$.fragment,e),ze(c.$$.fragment,e),ze(d.$$.fragment,e),ze(j.$$.fragment,e),R=!0)},o(e){qe(i.$$.fragment,e),qe(c.$$.fragment,e),qe(d.$$.fragment,e),qe(j.$$.fragment,e),R=!1},d(e){e&&G(t),Xe(i),Q&&Q.d(),Xe(c),Xe(d),e&&G(f),e&&G(p),e&&G(y),e&&G(D),Xe(j),Y(oe,e),L=!1,M()}}}function _l(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h,g,$,v,b,y,D,w,_,C,k,A,x,F,S,O=e[3]("This will permanently remove user settings, chat logs, uploaded files and other user related data.")+"",B=e[4]('Please confirm by entering "**%1**" before hitting **%2**.',e[1].email,e[3]("Delete user"))+"";return n=new Ps({props:{name:"uid",form:e[6]}}),o=new ko({props:{name:"email",form:e[6],readonly:!0,$$slots:{label:[Fl]},$$scope:{ctx:e}}}),a=new ko({props:{name:"roles",form:e[6],placeholder:e[3]("admin, bot, ..."),$$slots:{help:[Ol],label:[Sl]},$$scope:{ctx:e}}}),c=new Gr({props:{icon:"save",op:e[10],$$slots:{default:[Bl]},$$scope:{ctx:e}}}),d=new io({props:{op:e[10]}}),D=new ko({props:{name:"confirm_email",form:e[6],$$slots:{label:[Nl]},$$scope:{ctx:e}}}),C=new Gr({props:{icon:"trash",op:e[7],disabled:e[1].confirm_email!=e[1].email,$$slots:{default:[jl]},$$scope:{ctx:e}}}),A=new io({props:{op:e[7],success:"Deleted."}}),{c(){t=Z("form"),Je(n.$$.fragment),r=J(),Je(o.$$.fragment),i=J(),Je(a.$$.fragment),u=J(),s=Z("div"),Je(c.$$.fragment),l=J(),Je(d.$$.fragment),f=J(),p=Z("h2"),p.textContent="Delete account",m=J(),h=Z("form"),g=Z("p"),$=V(O),v=J(),b=new le,y=J(),Je(D.$$.fragment),w=J(),_=Z("div"),Je(C.$$.fragment),k=J(),Je(A.$$.fragment),te(s,"class","form-actions"),te(t,"id","edit"),te(t,"method","post"),b.a=null,te(_,"class","form-actions"),te(h,"id","delete"),te(h,"method","post")},m(E,O){K(E,t,O),Qe(n,t,null),z(t,r),Qe(o,t,null),z(t,i),Qe(a,t,null),z(t,u),z(t,s),Qe(c,s,null),z(t,l),Qe(d,t,null),K(E,f,O),K(E,p,O),K(E,m,O),K(E,h,O),z(h,g),z(g,$),z(g,v),b.m(B,g),z(h,y),Qe(D,h,null),z(h,w),z(h,_),Qe(C,_,null),z(h,k),Qe(A,h,null),x=!0,F||(S=[X(t,"submit",ee(e[14])),X(h,"submit",ee(e[12]))],F=!0)},p(e,t){const n={};16777224&t&&(n.$$scope={dirty:t,ctx:e}),o.$set(n);const r={};8&t&&(r.placeholder=e[3]("admin, bot, ...")),16777224&t&&(r.$$scope={dirty:t,ctx:e}),a.$set(r);const i={};16777224&t&&(i.$$scope={dirty:t,ctx:e}),c.$set(i),(!x||8&t)&&O!==(O=e[3]("This will permanently remove user settings, chat logs, uploaded files and other user related data.")+"")&&re($,O),(!x||26&t)&&B!==(B=e[4]('Please confirm by entering "**%1**" before hitting **%2**.',e[1].email,e[3]("Delete user"))+"")&&b.p(B);const u={};16777224&t&&(u.$$scope={dirty:t,ctx:e}),D.$set(u);const s={};2&t&&(s.disabled=e[1].confirm_email!=e[1].email),16777224&t&&(s.$$scope={dirty:t,ctx:e}),C.$set(s)},i(e){x||(ze(n.$$.fragment,e),ze(o.$$.fragment,e),ze(a.$$.fragment,e),ze(c.$$.fragment,e),ze(d.$$.fragment,e),ze(D.$$.fragment,e),ze(C.$$.fragment,e),ze(A.$$.fragment,e),x=!0)},o(e){qe(n.$$.fragment,e),qe(o.$$.fragment,e),qe(a.$$.fragment,e),qe(c.$$.fragment,e),qe(d.$$.fragment,e),qe(D.$$.fragment,e),qe(C.$$.fragment,e),qe(A.$$.fragment,e),x=!1},d(e){e&&G(t),Xe(n),Xe(o),Xe(a),Xe(c),Xe(d),e&&G(f),e&&G(p),e&&G(m),e&&G(h),Xe(D),Xe(C),Xe(A),F=!1,E(S)}}}function El(e){let t,n,r=e[3]("User email")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){8&t&&r!==(r=e[3]("User email")+"")&&re(n,r)},d(e){e&&G(t)}}}function Cl(e){let t,n,r=e[3]("Using this form, you can generate a forgotten password or invite link for a user.")+"";return{c(){t=Z("p"),n=V(r),te(t,"class","help"),te(t,"slot","help")},m(e,r){K(e,t,r),z(t,n)},p(e,t){8&t&&r!==(r=e[3]("Using this form, you can generate a forgotten password or invite link for a user.")+"")&&re(n,r)},d(e){e&&G(t)}}}function kl(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h,g,$,v=e[3]("A link was generated")+"",b=e[4](e[2].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"",y=e[4]("The link is valid until **%1**.",new Date(e[2].expires).toLocaleString())+"",D=e[2].url+"",w=e[3]("Tip: Clicking on the link will copy it to your clipboard.")+"";return{c(){t=Z("h3"),n=V(v),r=J(),o=Z("p"),i=new le,a=J(),u=new le,s=J(),c=Z("a"),l=V(D),f=J(),p=Z("p"),m=Z("small"),h=V(w),i.a=a,u.a=null,te(c,"href",d=e[2].url)},m(d,v){K(d,t,v),z(t,n),K(d,r,v),K(d,o,v),i.m(b,o),z(o,a),u.m(y,o),K(d,s,v),K(d,c,v),z(c,l),K(d,f,v),K(d,p,v),z(p,m),z(m,h),g||($=X(c,"click",ee(e[11])),g=!0)},p(e,t){8&t&&v!==(v=e[3]("A link was generated")+"")&&re(n,v),20&t&&b!==(b=e[4](e[2].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"")&&i.p(b),20&t&&y!==(y=e[4]("The link is valid until **%1**.",new Date(e[2].expires).toLocaleString())+"")&&u.p(y),4&t&&D!==(D=e[2].url+"")&&re(l,D),4&t&&d!==(d=e[2].url)&&te(c,"href",d),8&t&&w!==(w=e[3]("Tip: Clicking on the link will copy it to your clipboard.")+"")&&re(h,w)},d(e){e&&G(t),e&&G(r),e&&G(o),e&&G(s),e&&G(c),e&&G(f),e&&G(p),g=!1,$()}}}function Al(e){let t,n,r=e[3]("Generate link")+"";return{c(){t=Z("span"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){8&t&&r!==(r=e[3]("Generate link")+"")&&re(n,r)},d(e){e&&G(t)}}}function xl(e){let t,n,r,o,i,a,u,s,c,l,d,f,p=e[21].email+"",m=e[21].roles.join(", ")+"",h=new vr(e[21].registered).getHumanDate({year:!0})+"";return{c(){t=Z("tr"),n=Z("td"),r=Z("a"),o=V(p),a=J(),u=Z("td"),s=V(m),c=J(),l=Z("td"),d=V(h),f=J(),te(r,"href",i="#"+e[21].uid)},m(e,i){K(e,t,i),z(t,n),z(n,r),z(r,o),z(t,a),z(t,u),z(u,s),z(t,c),z(t,l),z(l,d),z(t,f)},p(e,t){1&t&&p!==(p=e[21].email+"")&&re(o,p),1&t&&i!==(i="#"+e[21].uid)&&te(r,"href",i),1&t&&m!==(m=e[21].roles.join(", ")+"")&&re(s,m),1&t&&h!==(h=new vr(e[21].registered).getHumanDate({year:!0})+"")&&re(d,h)},d(e){e&&G(t)}}}function Fl(e){let t,n,r=e[3]("Email")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){8&t&&r!==(r=e[3]("Email")+"")&&re(n,r)},d(e){e&&G(t)}}}function Sl(e){let t,n,r=e[3]("Roles")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){8&t&&r!==(r=e[3]("Roles")+"")&&re(n,r)},d(e){e&&G(t)}}}function Ol(e){let t,n,r=e[3]("Roles must be separated by comma.")+"";return{c(){t=Z("p"),n=V(r),te(t,"class","help"),te(t,"slot","help")},m(e,r){K(e,t,r),z(t,n)},p(e,t){8&t&&r!==(r=e[3]("Roles must be separated by comma.")+"")&&re(n,r)},d(e){e&&G(t)}}}function Bl(e){let t,n,r=e[3]("Save user")+"";return{c(){t=Z("span"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){8&t&&r!==(r=e[3]("Save user")+"")&&re(n,r)},d(e){e&&G(t)}}}function Nl(e){let t,n,r=e[3]("Confirm email")+"";return{c(){t=Z("span"),n=V(r),te(t,"slot","label")},m(e,r){K(e,t,r),z(t,n)},p(e,t){8&t&&r!==(r=e[3]("Confirm email")+"")&&re(n,r)},d(e){e&&G(t)}}}function jl(e){let t,n,r=e[3]("Delete user")+"";return{c(){t=Z("span"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){8&t&&r!==(r=e[3]("Delete user")+"")&&re(n,r)},d(e){e&&G(t)}}}function Tl(e){let t,n,r,o,i,a;t=new wt({props:{$$slots:{default:[Dl]},$$scope:{ctx:e}}});const u=[_l,wl],s=[];function c(e,t){return e[1].uid?0:1}return o=c(e),i=s[o]=u[o](e),{c(){Je(t.$$.fragment),n=J(),r=Z("main"),i.c(),te(r,"class","main")},m(e,i){Qe(t,e,i),K(e,n,i),K(e,r,i),s[o].m(r,null),a=!0},p(e,[n]){const a={};16777226&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a);let l=o;o=c(e),o===l?s[o].p(e,n):(Ue(),qe(s[l],1,1,(()=>{s[l]=null})),He(),i=s[o],i?i.p(e,n):(i=s[o]=u[o](e),i.c()),ze(i,1),i.m(r,null))},i(e){a||(ze(t.$$.fragment,e),ze(i),a=!0)},o(e){qe(t.$$.fragment,e),qe(i),a=!1},d(e){Xe(t,e),e&&G(n),e&&G(r),s[o].d()}}}function Rl(e,t,n){let r,o,i,a,u,s,c;F(e,ar,(e=>n(3,o=e))),F(e,Hn,(e=>n(17,u=e))),F(e,ur,(e=>n(4,s=e)));let{title:l="Users"}=t;const d=De("api"),f=No();F(e,f,(e=>n(1,i=e)));const p=d("deleteUser"),m=d("getUsers");F(e,m,(e=>n(5,c=e)));const h=d("inviteUser");F(e,h,(e=>n(16,a=e)));const g=d("updateUser");let $=[];async function v(){await m.perform(),n(0,$=m.res.body.users||[]),m.reset()}return ve(v),e.$$set=e=>{"title"in e&&n(15,l=e.title)},e.$$.update=()=>{131073&e.$$.dirty&&function(e,t){const n=e.hash,r=n&&t.filter((e=>e.uid==n))[0];if(!r)return f.set({confirm_email:"",uid:""});f.set({confirm_email:""}).set(r)}(u,$),65536&e.$$.dirty&&n(2,r=a.res.body||{}),2&e.$$.dirty&&n(15,l=i.uid?i.email:"Users")},[$,i,r,o,s,c,f,p,m,h,g,function(e){const t=qt(e.target);t&&la.showInApp(t,{title:o("Invite link copied")})},async function(){p.reset(),g.reset(),f.get("confirm_email")==f.get("email")&&(await p.perform(f.get()),p.is("success")&&(v(),Hn.go("/settings/users",{replace:!0})))},function(){h.perform(f.get(["email"]))},function(){p.reset(),g.perform({email:f.get("email"),roles:rn(f.get("roles"))})},l,a,u]}class Ll extends nt{constructor(e){super(),tt(this,e,Rl,Tl,k,{title:15})}}function Ml(e,t,n){const r=e.slice();return r[19]=t[n],r}function Pl(e){let t,n,r=e[5]("Files")+"";return{c(){t=Z("h1"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){32&t&&r!==(r=e[5]("Files")+"")&&re(n,r)},d(e){e&&G(t)}}}function Il(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h,g,$,v,b=new vr(e[19].saved).getHumanDate({year:!0})+"",y=e[19].name+"",D=Yt(e[19].size,"B")+"";return a=new ct({props:{name:"copy"}}),a.$on("click",e[12]),$=new Xr({props:{form:e[11],id:"form_"+e[19].id,name:e[19].id}}),{c(){t=Z("tr"),n=Z("td"),r=V(b),o=J(),i=Z("td"),Je(a.$$.fragment),u=J(),s=Z("td"),c=Z("a"),l=V(y),f=J(),p=Z("td"),m=V(D),h=J(),g=Z("td"),Je($.$$.fragment),te(c,"href",d=Hn.urlFor("/file/"+e[8].id+"/"+e[19].id)),te(c,"target","convos_files_file"),te(p,"class","text-right"),te(g,"class","text-right")},m(e,d){K(e,t,d),z(t,n),z(n,r),z(t,o),z(t,i),Qe(a,i,null),z(t,u),z(t,s),z(s,c),z(c,l),z(t,f),z(t,p),z(p,m),z(t,h),z(t,g),Qe($,g,null),v=!0},p(e,t){(!v||2&t)&&b!==(b=new vr(e[19].saved).getHumanDate({year:!0})+"")&&re(r,b),(!v||2&t)&&y!==(y=e[19].name+"")&&re(l,y),(!v||2&t&&d!==(d=Hn.urlFor("/file/"+e[8].id+"/"+e[19].id)))&&te(c,"href",d),(!v||2&t)&&D!==(D=Yt(e[19].size,"B")+"")&&re(m,D);const n={};2&t&&(n.id="form_"+e[19].id),2&t&&(n.name=e[19].id),$.$set(n)},i(e){v||(ze(a.$$.fragment,e),ze($.$$.fragment,e),v=!0)},o(e){qe(a.$$.fragment,e),qe($.$$.fragment,e),v=!1},d(e){e&&G(t),Xe(a),Xe($)}}}function Ul(e){let t,n,r,o=e[5]("No files.")+"";return{c(){t=Z("tr"),n=Z("td"),r=V(o),te(n,"colspan","5")},m(e,o){K(e,t,o),z(t,n),z(n,r)},p(e,t){32&t&&o!==(o=e[5]("No files.")+"")&&re(r,o)},d(e){e&&G(t)}}}function Hl(e){let t,n;return t=new su({props:{colspan:"5",op:e[10],$$slots:{default:[zl]},$$scope:{ctx:e}}}),{c(){Je(t.$$.fragment)},m(e,r){Qe(t,e,r),n=!0},p(e,n){const r={};4194304&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(ze(t.$$.fragment,e),n=!0)},o(e){qe(t.$$.fragment,e),n=!1},d(e){Xe(t,e)}}}function zl(e){let t;return{c(){t=Z("div"),t.textContent=" "},m(e,n){K(e,t,n)},d(e){e&&G(t)}}}function ql(e){let t,n,r=e[5]("Previous")+"";return{c(){t=Z("span"),n=V(r),te(t,"class","disabled")},m(e,r){K(e,t,r),z(t,n)},p(e,t){32&t&&r!==(r=e[5]("Previous")+"")&&re(n,r)},i:y,o:y,d(e){e&&G(t)}}}function Wl(e){let t,n;return t=new Ci({props:{href:"/settings/files?after="+e[3],$$slots:{default:[Kl]},$$scope:{ctx:e}}}),{c(){Je(t.$$.fragment)},m(e,r){Qe(t,e,r),n=!0},p(e,n){const r={};8&n&&(r.href="/settings/files?after="+e[3]),4194336&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(ze(t.$$.fragment,e),n=!0)},o(e){qe(t.$$.fragment,e),n=!1},d(e){Xe(t,e)}}}function Kl(e){let t,n=e[5]("Previous")+"";return{c(){t=V(n)},m(e,n){K(e,t,n)},p(e,r){32&r&&n!==(n=e[5]("Previous")+"")&&re(t,n)},d(e){e&&G(t)}}}function Gl(e){let t,n,r=e[5]("Next")+"";return{c(){t=Z("span"),n=V(r),te(t,"class","disabled")},m(e,r){K(e,t,r),z(t,n)},p(e,t){32&t&&r!==(r=e[5]("Next")+"")&&re(n,r)},i:y,o:y,d(e){e&&G(t)}}}function Yl(e){let t,n;return t=new Ci({props:{href:"/settings/files?after="+e[2],$$slots:{default:[Zl]},$$scope:{ctx:e}}}),{c(){Je(t.$$.fragment)},m(e,r){Qe(t,e,r),n=!0},p(e,n){const r={};4&n&&(r.href="/settings/files?after="+e[2]),4194336&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(ze(t.$$.fragment,e),n=!0)},o(e){qe(t.$$.fragment,e),n=!1},d(e){Xe(t,e)}}}function Zl(e){let t,n=e[5]("Next")+"";return{c(){t=V(n)},m(e,n){K(e,t,n)},p(e,r){32&r&&n!==(n=e[5]("Next")+"")&&re(t,n)},d(e){e&&G(t)}}}function Vl(e){let t,n,r=e[5]("Delete selected files")+"";return{c(){t=Z("span"),n=V(r)},m(e,r){K(e,t,r),z(t,n)},p(e,t){32&t&&r!==(r=e[5]("Delete selected files")+"")&&re(n,r)},d(e){e&&G(t)}}}function Jl(e){let t,n=e[7]("By deleting the files, you and everyone with the link *should* lose access to the file: Aggressive caching in browsers or proxies between Convos and other users might keep the file around for some time.")+"";return{c(){t=Z("p")},m(e,r){K(e,t,r),t.innerHTML=n},p(e,r){128&r&&n!==(n=e[7]("By deleting the files, you and everyone with the link *should* lose access to the file: Aggressive caching in browsers or proxies between Convos and other users might keep the file around for some time.")+"")&&(t.innerHTML=n)},d(e){e&&G(t)}}}function Ql(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h,g,$,v,b,y,D,w,_,E,C,k,A,x,F,S,O,B,N,j,T,R,L,M=e[5]("Uploaded")+"",P=e[5]("Name")+"",I=e[5]("Size")+"",U=!e[6].is("loading");t=new wt({props:{$$slots:{default:[Pl]},$$scope:{ctx:e}}}),b=new Xr({props:{form:e[11],name:"ALL_SELECTED"}});let H=e[1],q=[];for(let t=0;t<H.length;t+=1)q[t]=Il(Ml(e,H,t));const W=e=>qe(q[e],1,1,(()=>{q[e]=null}));let Q=0==e[1].length&&Ul(e);E=new su({props:{colspan:"5",op:e[9]}});let X=U&&Hl(e);const ee=[Wl,ql],ne=[];function oe(e,t){return e[3]||e[0].query.after?0:1}x=oe(e),F=ne[x]=ee[x](e);const ie=[Yl,Gl],ae=[];function ue(e,t){return e[2]?0:1}O=ue(e),B=ae[O]=ie[O](e),T=new Gr({props:{icon:"trash",op:e[9],disabled:!e[4].length,$$slots:{default:[Vl]},$$scope:{ctx:e}}}),T.$on("click",e[13]);let se=(e[1].length||e[0].query.after)&&Jl(e);return{c(){Je(t.$$.fragment),n=J(),r=Z("main"),o=Z("table"),i=Z("thead"),a=Z("tr"),u=Z("th"),s=V(M),c=J(),l=Z("th"),l.textContent=" ",d=J(),f=Z("th"),p=V(P),m=J(),h=Z("th"),g=V(I),$=J(),v=Z("th"),Je(b.$$.fragment),y=J(),D=Z("tbody");for(let e=0;e<q.length;e+=1)q[e].c();w=J(),Q&&Q.c(),_=J(),Je(E.$$.fragment),C=J(),X&&X.c(),k=J(),A=Z("div"),F.c(),S=J(),B.c(),N=J(),j=Z("div"),Je(T.$$.fragment),R=J(),se&&se.c(),te(h,"class","text-right"),te(v,"class","text-right"),te(A,"class","pagination"),te(j,"class","form-actions"),te(r,"class","main")},m(e,F){Qe(t,e,F),K(e,n,F),K(e,r,F),z(r,o),z(o,i),z(i,a),z(a,u),z(u,s),z(a,c),z(a,l),z(a,d),z(a,f),z(f,p),z(a,m),z(a,h),z(h,g),z(a,$),z(a,v),Qe(b,v,null),z(o,y),z(o,D);for(let e=0;e<q.length;e+=1)q[e].m(D,null);z(D,w),Q&&Q.m(D,null),z(D,_),Qe(E,D,null),z(D,C),X&&X.m(D,null),z(r,k),z(r,A),ne[x].m(A,null),z(A,S),ae[O].m(A,null),z(r,N),z(r,j),Qe(T,j,null),z(r,R),se&&se.m(r,null),L=!0},p(e,[n]){const o={};if(4194336&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o),(!L||32&n)&&M!==(M=e[5]("Uploaded")+"")&&re(s,M),(!L||32&n)&&P!==(P=e[5]("Name")+"")&&re(p,P),(!L||32&n)&&I!==(I=e[5]("Size")+"")&&re(g,I),6402&n){let t;for(H=e[1],t=0;t<H.length;t+=1){const r=Ml(e,H,t);q[t]?(q[t].p(r,n),ze(q[t],1)):(q[t]=Il(r),q[t].c(),ze(q[t],1),q[t].m(D,w))}for(Ue(),t=H.length;t<q.length;t+=1)W(t);He()}0==e[1].length?Q?Q.p(e,n):(Q=Ul(e),Q.c(),Q.m(D,_)):Q&&(Q.d(1),Q=null),64&n&&(U=!e[6].is("loading")),U?X?(X.p(e,n),64&n&&ze(X,1)):(X=Hl(e),X.c(),ze(X,1),X.m(D,null)):X&&(Ue(),qe(X,1,1,(()=>{X=null})),He());let i=x;x=oe(e),x===i?ne[x].p(e,n):(Ue(),qe(ne[i],1,1,(()=>{ne[i]=null})),He(),F=ne[x],F?F.p(e,n):(F=ne[x]=ee[x](e),F.c()),ze(F,1),F.m(A,S));let a=O;O=ue(e),O===a?ae[O].p(e,n):(Ue(),qe(ae[a],1,1,(()=>{ae[a]=null})),He(),B=ae[O],B?B.p(e,n):(B=ae[O]=ie[O](e),B.c()),ze(B,1),B.m(A,null));const u={};16&n&&(u.disabled=!e[4].length),4194336&n&&(u.$$scope={dirty:n,ctx:e}),T.$set(u),e[1].length||e[0].query.after?se?se.p(e,n):(se=Jl(e),se.c(),se.m(r,null)):se&&(se.d(1),se=null)},i(e){if(!L){ze(t.$$.fragment,e),ze(b.$$.fragment,e);for(let e=0;e<H.length;e+=1)ze(q[e]);ze(E.$$.fragment,e),ze(X),ze(F),ze(B),ze(T.$$.fragment,e),L=!0}},o(e){qe(t.$$.fragment,e),qe(b.$$.fragment,e),q=q.filter(Boolean);for(let e=0;e<q.length;e+=1)qe(q[e]);qe(E.$$.fragment,e),qe(X),qe(F),qe(B),qe(T.$$.fragment,e),L=!1},d(e){Xe(t,e),e&&G(n),e&&G(r),Xe(b),Y(q,e),Q&&Q.d(),Xe(E),X&&X.d(),ne[x].d(),ae[O].d(),Xe(T),se&&se.d()}}}function Xl(e){return Object.keys(e).filter((e=>"ALL_SELECTED"!=e))}function ed(e,t,n){let r,o,i,a,u,s,c;F(e,ar,(e=>n(5,i=e))),F(e,Hn,(e=>n(0,u=e))),F(e,ur,(e=>n(7,c=e)));const l=De("api"),d=De("user"),f=l("deleteFiles");F(e,f,(e=>n(6,s=e)));const p=l("getFiles");F(e,p,(e=>n(16,o=e)));const m=No();F(e,m,(e=>n(15,a=e)));let h=[],g="",$="";async function v(e){const t=e.query.after||"";await p.perform({after:t,limit:20}),m.remove(Xl(m.get())),n(1,h=p.res.body.files||[]),!h.length&&t||(n(2,g=o.res.body.next&&h.slice(-1)[0].id||""),n(3,$=o.res.body.prev||"")),m.set({ALL_SELECTED:n(14,b.selected=!1,b)})}function b(e){if(b.selected==e.ALL_SELECTED)return m.set({ALL_SELECTED:n(14,b.selected=!1,b)});n(14,b.selected=m.get("ALL_SELECTED"),b);const t={};Xl(m.get()).forEach((e=>t[e]=b.selected)),m.set(t)}return e.$$.update=()=>{1&e.$$.dirty&&v(u),49152&e.$$.dirty&&b(a),32768&e.$$.dirty&&n(4,r=Xl(a).filter((e=>!!a[e])))},[u,h,g,$,r,i,s,c,d,f,p,m,function(e){const t=qt({value:e.target.closest("tr").querySelector('[target="convos_files_file"]').href});t&&la.showInApp(t,{closeAfter:3e3,title:i("File URL copied")})},async function(){await f.perform({fid:r.join(","),uid:d.id}),m.remove(r),m.set({ALL_SELECTED:n(14,b.selected=!1,b)}),n(1,h=h.filter((e=>-1==r.indexOf(e.id)))),0==h.length&&v(Hn)},b,a]}class td extends nt{constructor(e){super(),tt(this,e,ed,Ql,k,{})}}function nd(e,t,n){const r=e.slice();return r[23]=t[n],r}function rd(e,t,n){const r=e.slice();return r[26]=t[n],r}function od(e){let t,n,r,o,i,a,u=kd(e[8])+"";return t=new ct({props:{family:"regular",name:"bell"}}),{c(){Je(t.$$.fragment),n=J(),r=Z("small"),o=V(u),te(r,"class","badge is-important"),r.hidden=i=!e[8].unread},m(e,i){Qe(t,e,i),K(e,n,i),K(e,r,i),z(r,o),a=!0},p(e,t){(!a||256&t)&&u!==(u=kd(e[8])+"")&&re(o,u),(!a||256&t&&i!==(i=!e[8].unread))&&(r.hidden=i)},i(e){a||(ze(t.$$.fragment,e),a=!0)},o(e){qe(t.$$.fragment,e),a=!1},d(e){Xe(t,e),e&&G(n),e&&G(r)}}}function id(e){let t,n;return t=new Ci({props:{href:"/settings/connections",$$slots:{default:[ad]},$$scope:{ctx:e}}}),{c(){Je(t.$$.fragment)},m(e,r){Qe(t,e,r),n=!0},p(e,n){const r={};536871040&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(ze(t.$$.fragment,e),n=!0)},o(e){qe(t.$$.fragment,e),n=!1},d(e){Xe(t,e)}}}function ad(e){let t,n,r,o,i,a=e[7]("No conversations")+"";return t=new ct({props:{name:"exclamation-circle"}}),{c(){Je(t.$$.fragment),n=J(),r=Z("span"),o=V(a)},m(e,a){Qe(t,e,a),K(e,n,a),K(e,r,a),z(r,o),i=!0},p(e,t){(!i||128&t)&&a!==(a=e[7]("No conversations")+"")&&re(o,a)},i(e){i||(ze(t.$$.fragment,e),i=!0)},o(e){qe(t.$$.fragment,e),i=!1},d(e){Xe(t,e),e&&G(n),e&&G(r)}}}function ud(e){let t,n,r,o,i,a,u,s,c,l,d,f,p=(e[23].name||e[23].connection_id)+"",m=e[7](e[23].frozen)+"",h=kd(e[23])+"";return t=new ct({props:{name:"network-wired"}}),{c(){Je(t.$$.fragment),n=J(),r=Z("span"),o=V(p),i=J(),a=Z("span"),u=V(m),s=J(),c=Z("b"),l=V(h),te(a,"class","tooltip"),te(c,"class","badge"),c.hidden=d=!e[23].unread},m(e,d){Qe(t,e,d),K(e,n,d),K(e,r,d),z(r,o),K(e,i,d),K(e,a,d),z(a,u),K(e,s,d),K(e,c,d),z(c,l),f=!0},p(e,t){(!f||8&t)&&p!==(p=(e[23].name||e[23].connection_id)+"")&&re(o,p),(!f||136&t)&&m!==(m=e[7](e[23].frozen)+"")&&re(u,m),(!f||8&t)&&h!==(h=kd(e[23])+"")&&re(l,h),(!f||8&t&&d!==(d=!e[23].unread))&&(c.hidden=d)},i(e){f||(ze(t.$$.fragment,e),f=!0)},o(e){qe(t.$$.fragment,e),f=!1},d(e){Xe(t,e),e&&G(n),e&&G(r),e&&G(i),e&&G(a),e&&G(s),e&&G(c)}}}function sd(e){let t,n;return t=new ct({props:{name:e[26].is("private")?"user":"user-friends"}}),{c(){Je(t.$$.fragment)},m(e,r){Qe(t,e,r),n=!0},p(e,n){const r={};8&n&&(r.name=e[26].is("private")?"user":"user-friends"),t.$set(r)},i(e){n||(ze(t.$$.fragment,e),n=!0)},o(e){qe(t.$$.fragment,e),n=!1},d(e){Xe(t,e)}}}function cd(e){let t,n;return t=new ct({props:{name:"exclamation-triangle"}}),{c(){Je(t.$$.fragment)},m(e,r){Qe(t,e,r),n=!0},p:y,i(e){n||(ze(t.$$.fragment,e),n=!0)},o(e){qe(t.$$.fragment,e),n=!1},d(e){Xe(t,e)}}}function ld(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h=e[26].name+"",g=e[7](e[26].frozen)+"",$=kd(e[26])+"";const v=[cd,sd],b=[];function y(e,n){return(null==t||8&n)&&(t=!(!e[26].frozen||e[26].is("private"))),t?0:1}return n=y(e,-1),r=b[n]=v[n](e),{c(){r.c(),o=J(),i=Z("span"),a=V(h),u=J(),s=Z("span"),c=V(g),l=J(),d=Z("b"),f=V($),te(s,"class","tooltip"),te(d,"class","badge"),d.hidden=p=!e[26].unread},m(e,t){b[n].m(e,t),K(e,o,t),K(e,i,t),z(i,a),K(e,u,t),K(e,s,t),z(s,c),K(e,l,t),K(e,d,t),z(d,f),m=!0},p(e,t){let i=n;n=y(e,t),n===i?b[n].p(e,t):(Ue(),qe(b[i],1,1,(()=>{b[i]=null})),He(),r=b[n],r?r.p(e,t):(r=b[n]=v[n](e),r.c()),ze(r,1),r.m(o.parentNode,o)),(!m||8&t)&&h!==(h=e[26].name+"")&&re(a,h),(!m||136&t)&&g!==(g=e[7](e[26].frozen)+"")&&re(c,g),(!m||8&t)&&$!==($=kd(e[26])+"")&&re(f,$),(!m||8&t&&p!==(p=!e[26].unread))&&(d.hidden=p)},i(e){m||(ze(r),m=!0)},o(e){qe(r),m=!1},d(e){b[n].d(e),e&&G(o),e&&G(i),e&&G(u),e&&G(s),e&&G(l),e&&G(d)}}}function dd(e){let t,n;return t=new Ci({props:{href:e[26].path,class:Cd(e[23],e[26]),$$slots:{default:[ld]},$$scope:{ctx:e}}}),{c(){Je(t.$$.fragment)},m(e,r){Qe(t,e,r),n=!0},p(e,n){const r={};8&n&&(r.href=e[26].path),8&n&&(r.class=Cd(e[23],e[26])),536871048&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(ze(t.$$.fragment,e),n=!0)},o(e){qe(t.$$.fragment,e),n=!1},d(e){Xe(t,e)}}}function fd(e){let t,n,r,o;t=new Ci({props:{href:e[23].path,class:Cd(e[23],e[23]),$$slots:{default:[ud]},$$scope:{ctx:e}}});let i=e[23].conversations.toArray(),a=[];for(let t=0;t<i.length;t+=1)a[t]=dd(rd(e,i,t));const u=e=>qe(a[e],1,1,(()=>{a[e]=null}));return{c(){Je(t.$$.fragment),n=J();for(let e=0;e<a.length;e+=1)a[e].c();r=Q()},m(e,i){Qe(t,e,i),K(e,n,i);for(let t=0;t<a.length;t+=1)a[t].m(e,i);K(e,r,i),o=!0},p(e,n){const o={};if(8&n&&(o.href=e[23].path),8&n&&(o.class=Cd(e[23],e[23])),536871048&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o),136&n){let t;for(i=e[23].conversations.toArray(),t=0;t<i.length;t+=1){const o=rd(e,i,t);a[t]?(a[t].p(o,n),ze(a[t],1)):(a[t]=dd(o),a[t].c(),ze(a[t],1),a[t].m(r.parentNode,r))}for(Ue(),t=i.length;t<a.length;t+=1)u(t);He()}},i(e){if(!o){ze(t.$$.fragment,e);for(let e=0;e<i.length;e+=1)ze(a[e]);o=!0}},o(e){qe(t.$$.fragment,e),a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)qe(a[e]);o=!1},d(e){Xe(t,e),e&&G(n),Y(a,e),e&&G(r)}}}function pd(e){let t,n,r,o,i,a,u,s,c,l=e[7]("Notifications")+"",d=kd(e[8])+"";return t=new ct({props:{name:"bell"}}),{c(){Je(t.$$.fragment),n=J(),r=Z("span"),o=V(l),i=J(),a=Z("b"),u=V(d),te(a,"class","badge"),a.hidden=s=!e[8].unread},m(e,s){Qe(t,e,s),K(e,n,s),K(e,r,s),z(r,o),K(e,i,s),K(e,a,s),z(a,u),c=!0},p(e,t){(!c||128&t)&&l!==(l=e[7]("Notifications")+"")&&re(o,l),(!c||256&t)&&d!==(d=kd(e[8])+"")&&re(u,d),(!c||256&t&&s!==(s=!e[8].unread))&&(a.hidden=s)},i(e){c||(ze(t.$$.fragment,e),c=!0)},o(e){qe(t.$$.fragment,e),c=!1},d(e){Xe(t,e),e&&G(n),e&&G(r),e&&G(i),e&&G(a)}}}function md(e){let t,n,r,o,i,a=e[7]("Search")+"";return t=new ct({props:{name:"search"}}),{c(){Je(t.$$.fragment),n=J(),r=Z("span"),o=V(a)},m(e,a){Qe(t,e,a),K(e,n,a),K(e,r,a),z(r,o),i=!0},p(e,t){(!i||128&t)&&a!==(a=e[7]("Search")+"")&&re(o,a)},i(e){i||(ze(t.$$.fragment,e),i=!0)},o(e){qe(t.$$.fragment,e),i=!1},d(e){Xe(t,e),e&&G(n),e&&G(r)}}}function hd(e){let t,n,r,o,i,a=e[7]("Add conversation")+"";return t=new ct({props:{name:"comment"}}),{c(){Je(t.$$.fragment),n=J(),r=Z("span"),o=V(a)},m(e,a){Qe(t,e,a),K(e,n,a),K(e,r,a),z(r,o),i=!0},p(e,t){(!i||128&t)&&a!==(a=e[7]("Add conversation")+"")&&re(o,a)},i(e){i||(ze(t.$$.fragment,e),i=!0)},o(e){qe(t.$$.fragment,e),i=!1},d(e){Xe(t,e),e&&G(n),e&&G(r)}}}function gd(e){let t,n,r,o,i,a=e[7]("Connections")+"";return t=new ct({props:{name:"network-wired"}}),{c(){Je(t.$$.fragment),n=J(),r=Z("span"),o=V(a)},m(e,a){Qe(t,e,a),K(e,n,a),K(e,r,a),z(r,o),i=!0},p(e,t){(!i||128&t)&&a!==(a=e[7]("Connections")+"")&&re(o,a)},i(e){i||(ze(t.$$.fragment,e),i=!0)},o(e){qe(t.$$.fragment,e),i=!1},d(e){Xe(t,e),e&&G(n),e&&G(r)}}}function $d(e){let t,n,r,o,i,a=e[7]("Account")+"";return t=new ct({props:{name:"user-cog"}}),{c(){Je(t.$$.fragment),n=J(),r=Z("span"),o=V(a)},m(e,a){Qe(t,e,a),K(e,n,a),K(e,r,a),z(r,o),i=!0},p(e,t){(!i||128&t)&&a!==(a=e[7]("Account")+"")&&re(o,a)},i(e){i||(ze(t.$$.fragment,e),i=!0)},o(e){qe(t.$$.fragment,e),i=!1},d(e){Xe(t,e),e&&G(n),e&&G(r)}}}function vd(e){let t,n,r,o,i,a=e[7]("Files")+"";return t=new ct({props:{name:"folder-open"}}),{c(){Je(t.$$.fragment),n=J(),r=Z("span"),o=V(a)},m(e,a){Qe(t,e,a),K(e,n,a),K(e,r,a),z(r,o),i=!0},p(e,t){(!i||128&t)&&a!==(a=e[7]("Files")+"")&&re(o,a)},i(e){i||(ze(t.$$.fragment,e),i=!0)},o(e){qe(t.$$.fragment,e),i=!1},d(e){Xe(t,e),e&&G(n),e&&G(r)}}}function bd(e){let t,n,r,o;return t=new Ci({props:{href:"/settings",$$slots:{default:[yd]},$$scope:{ctx:e}}}),r=new Ci({props:{href:"/settings/users",$$slots:{default:[Dd]},$$scope:{ctx:e}}}),{c(){Je(t.$$.fragment),n=J(),Je(r.$$.fragment)},m(e,i){Qe(t,e,i),K(e,n,i),Qe(r,e,i),o=!0},p(e,n){const o={};536871040&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o);const i={};536871040&n&&(i.$$scope={dirty:n,ctx:e}),r.$set(i)},i(e){o||(ze(t.$$.fragment,e),ze(r.$$.fragment,e),o=!0)},o(e){qe(t.$$.fragment,e),qe(r.$$.fragment,e),o=!1},d(e){Xe(t,e),e&&G(n),Xe(r,e)}}}function yd(e){let t,n,r,o,i,a=e[7]("Settings")+"";return t=new ct({props:{name:"tools"}}),{c(){Je(t.$$.fragment),n=J(),r=Z("span"),o=V(a)},m(e,a){Qe(t,e,a),K(e,n,a),K(e,r,a),z(r,o),i=!0},p(e,t){(!i||128&t)&&a!==(a=e[7]("Settings")+"")&&re(o,a)},i(e){i||(ze(t.$$.fragment,e),i=!0)},o(e){qe(t.$$.fragment,e),i=!1},d(e){Xe(t,e),e&&G(n),e&&G(r)}}}function Dd(e){let t,n,r,o,i,a=e[7]("Users")+"";return t=new ct({props:{name:"users"}}),{c(){Je(t.$$.fragment),n=J(),r=Z("span"),o=V(a)},m(e,a){Qe(t,e,a),K(e,n,a),K(e,r,a),z(r,o),i=!0},p(e,t){(!i||128&t)&&a!==(a=e[7]("Users")+"")&&re(o,a)},i(e){i||(ze(t.$$.fragment,e),i=!0)},o(e){qe(t.$$.fragment,e),i=!1},d(e){Xe(t,e),e&&G(n),e&&G(r)}}}function wd(e){let t,n,r,o,i,a=e[7]("Help")+"";return t=new ct({props:{name:"question-circle"}}),{c(){Je(t.$$.fragment),n=J(),r=Z("span"),o=V(a)},m(e,a){Qe(t,e,a),K(e,n,a),K(e,r,a),z(r,o),i=!0},p(e,t){(!i||128&t)&&a!==(a=e[7]("Help")+"")&&re(o,a)},i(e){i||(ze(t.$$.fragment,e),i=!0)},o(e){qe(t.$$.fragment,e),i=!1},d(e){Xe(t,e),e&&G(n),e&&G(r)}}}function _d(e){let t,n,r,o,i,a=e[7]('Search for "%1"',e[5])+"";return t=new ct({props:{name:"search"}}),{c(){Je(t.$$.fragment),n=J(),r=Z("span"),o=V(a)},m(e,a){Qe(t,e,a),K(e,n,a),K(e,r,a),z(r,o),i=!0},p(e,t){(!i||160&t)&&a!==(a=e[7]('Search for "%1"',e[5])+"")&&re(o,a)},i(e){i||(ze(t.$$.fragment,e),i=!0)},o(e){qe(t.$$.fragment,e),i=!1},d(e){Xe(t,e),e&&G(n),e&&G(r)}}}function Ed(e){let t,n,r,o,i,a,u,s,c,l,d,f,p,m,h,g,$,v,b,y,D,w,_,C,k,A,x,F,S,O,B,N,j,T,R,L,M,P,I,U,H,q,W,Q,ee,ne,ie=e[7]("Conversations")+"",ae=(e[3].email||e[7]("Account"))+"",se=e[3].is("admin"),ce=e[7]("Log out")+"";s=new ct({props:{name:"search"}}),l=new Ci({props:{href:"/chat",class:"btn-hallow for-notifications",$$slots:{default:[od]},$$scope:{ctx:e}}});let le=!e[3].connections.size&&id(e),de=e[3].connections.toArray(),fe=[];for(let t=0;t<de.length;t+=1)fe[t]=fd(nd(e,de,t));const pe=e=>qe(fe[e],1,1,(()=>{fe[e]=null}));D=new Ci({props:{href:"/chat",$$slots:{default:[pd]},$$scope:{ctx:e}}}),_=new Ci({props:{href:"/search",$$slots:{default:[md]},$$scope:{ctx:e}}}),k=new Ci({props:{href:e[6],$$slots:{default:[hd]},$$scope:{ctx:e}}}),x=new Ci({props:{href:"/settings/connections",$$slots:{default:[gd]},$$scope:{ctx:e}}}),S=new Ci({props:{href:"/settings/account",$$slots:{default:[$d]},$$scope:{ctx:e}}}),B=new Ci({props:{href:"/settings/files",$$slots:{default:[vd]},$$scope:{ctx:e}}});let me=se&&bd(e);return T=new Ci({props:{href:"/help",$$slots:{default:[wd]},$$scope:{ctx:e}}}),M=new ct({props:{name:"power-off"}}),q=new Ci({props:{href:"/search?q="+encodeURIComponent(e[5]),class:"for-search hidden",$$slots:{default:[_d]},$$scope:{ctx:e}}}),{c(){t=Z("div"),n=Z("div"),r=Z("form"),o=Z("input"),a=J(),u=Z("label"),Je(s.$$.fragment),c=J(),Je(l.$$.fragment),d=J(),f=Z("nav"),p=Z("h3"),m=V(ie),h=J(),le&&le.c(),g=J();for(let e=0;e<fe.length;e+=1)fe[e].c();$=J(),v=Z("h3"),b=V(ae),y=J(),Je(D.$$.fragment),w=J(),Je(_.$$.fragment),C=J(),Je(k.$$.fragment),A=J(),Je(x.$$.fragment),F=J(),Je(S.$$.fragment),O=J(),Je(B.$$.fragment),N=J(),me&&me.c(),j=J(),Je(T.$$.fragment),R=J(),L=Z("a"),Je(M.$$.fragment),P=J(),I=Z("span"),U=V(ce),H=J(),Je(q.$$.fragment),te(o,"type","text"),te(o,"id","search_input"),te(o,"class","is-primary-menu-item"),te(o,"placeholder",i=e[4]?e[7]("Search..."):e[7]("Convos")),te(u,"for","search_input"),te(u,"class","btn-hallow"),te(r,"class","sidebar-header"),ue(r,"has-focus",e[4]),te(n,"class","sidebar-header__wrapper"),te(L,"href",Hn.urlFor("/logout")+"?csrf="+tn("csrf")),te(L,"target","_self"),te(f,"class","sidebar-left__nav"),ue(f,"is-filtering",e[1].length>0),te(t,"class","sidebar-left")},m(i,E){K(i,t,E),z(t,n),z(n,r),z(r,o),oe(o,e[1]),z(r,a),z(r,u),Qe(s,u,null),z(r,c),Qe(l,r,null),z(t,d),z(t,f),z(f,p),z(p,m),z(f,h),le&&le.m(f,null),z(f,g);for(let e=0;e<fe.length;e+=1)fe[e].m(f,null);z(f,$),z(f,v),z(v,b),z(f,y),Qe(D,f,null),z(f,w),Qe(_,f,null),z(f,C),Qe(k,f,null),z(f,A),Qe(x,f,null),z(f,F),Qe(S,f,null),z(f,O),Qe(B,f,null),z(f,N),me&&me.m(f,null),z(f,j),Qe(T,f,null),z(f,R),z(f,L),Qe(M,L,null),z(L,P),z(L,I),z(I,U),z(f,H),Qe(q,f,null),e[19](f),Q=!0,ee||(ne=[X(o,"input",e[18]),X(o,"blur",e[11]),X(o,"focus",e[12]),X(o,"keydown",e[14]),X(r,"submit",Ad),X(f,"click",e[13])],ee=!0)},p(t,[n]){e=t,(!Q||144&n&&i!==(i=e[4]?e[7]("Search..."):e[7]("Convos")))&&te(o,"placeholder",i),2&n&&o.value!==e[1]&&oe(o,e[1]);const a={};if(536871168&n&&(a.$$scope={dirty:n,ctx:e}),l.$set(a),16&n&&ue(r,"has-focus",e[4]),(!Q||128&n)&&ie!==(ie=e[7]("Conversations")+"")&&re(m,ie),e[3].connections.size?le&&(Ue(),qe(le,1,1,(()=>{le=null})),He()):le?(le.p(e,n),8&n&&ze(le,1)):(le=id(e),le.c(),ze(le,1),le.m(f,g)),136&n){let t;for(de=e[3].connections.toArray(),t=0;t<de.length;t+=1){const r=nd(e,de,t);fe[t]?(fe[t].p(r,n),ze(fe[t],1)):(fe[t]=fd(r),fe[t].c(),ze(fe[t],1),fe[t].m(f,$))}for(Ue(),t=de.length;t<fe.length;t+=1)pe(t);He()}(!Q||136&n)&&ae!==(ae=(e[3].email||e[7]("Account"))+"")&&re(b,ae);const u={};536871296&n&&(u.$$scope={dirty:n,ctx:e}),D.$set(u);const s={};536871040&n&&(s.$$scope={dirty:n,ctx:e}),_.$set(s);const c={};64&n&&(c.href=e[6]),536871040&n&&(c.$$scope={dirty:n,ctx:e}),k.$set(c);const d={};536871040&n&&(d.$$scope={dirty:n,ctx:e}),x.$set(d);const p={};536871040&n&&(p.$$scope={dirty:n,ctx:e}),S.$set(p);const h={};536871040&n&&(h.$$scope={dirty:n,ctx:e}),B.$set(h),8&n&&(se=e[3].is("admin")),se?me?(me.p(e,n),8&n&&ze(me,1)):(me=bd(e),me.c(),ze(me,1),me.m(f,j)):me&&(Ue(),qe(me,1,1,(()=>{me=null})),He());const v={};536871040&n&&(v.$$scope={dirty:n,ctx:e}),T.$set(v),(!Q||128&n)&&ce!==(ce=e[7]("Log out")+"")&&re(U,ce);const y={};32&n&&(y.href="/search?q="+encodeURIComponent(e[5])),536871072&n&&(y.$$scope={dirty:n,ctx:e}),q.$set(y),2&n&&ue(f,"is-filtering",e[1].length>0)},i(n){if(!Q){ze(s.$$.fragment,n),ze(l.$$.fragment,n),ze(le);for(let e=0;e<de.length;e+=1)ze(fe[e]);ze(D.$$.fragment,n),ze(_.$$.fragment,n),ze(k.$$.fragment,n),ze(x.$$.fragment,n),ze(S.$$.fragment,n),ze(B.$$.fragment,n),ze(me),ze(T.$$.fragment,n),ze(M.$$.fragment,n),ze(q.$$.fragment,n),Oe((()=>{W||(W=Ke(t,Nr,e[0],!0)),W.run(1)})),Q=!0}},o(n){qe(s.$$.fragment,n),qe(l.$$.fragment,n),qe(le),fe=fe.filter(Boolean);for(let e=0;e<fe.length;e+=1)qe(fe[e]);qe(D.$$.fragment,n),qe(_.$$.fragment,n),qe(k.$$.fragment,n),qe(x.$$.fragment,n),qe(S.$$.fragment,n),qe(B.$$.fragment,n),qe(me),qe(T.$$.fragment,n),qe(M.$$.fragment,n),qe(q.$$.fragment,n),W||(W=Ke(t,Nr,e[0],!1)),W.run(0),Q=!1},d(n){n&&G(t),Xe(s),Xe(l),le&&le.d(),Y(fe,n),Xe(D),Xe(_),Xe(k),Xe(x),Xe(S),Xe(B),me&&me.d(),Xe(T),Xe(M),Xe(q),e[19](null),n&&W&&W.end(),ee=!1,E(ne)}}}function Cd(e,t){const n=[t.conversation_id?"for-conversation":"for-connection"];return(t.frozen||"connected"!=e.state)&&n.push("is-frozen"),t.frozen&&n.push("has-tooltip"),t.errors&&n.push("has-errors"),t.notifications&&n.push("has-notifications"),n.join(" ")}function kd(e,t=60){return e.unread>t?t+"+":e.unread||0}const Ad=e=>e.preventDefault();function xd(e,t,n){let r,o,i,a,u,s,c;F(e,gt,(e=>n(20,i=e))),F(e,Hn,(e=>n(17,a=e))),F(e,ar,(e=>n(7,s=e)));let{transition:l}=t;const d=De("user");F(e,d,(e=>n(3,u=e)));const f=d.notifications;F(e,f,(e=>n(8,c=e)));let p,m=0,h="",g=!1,$=[];function v(){Xt(p,"a",(e=>e.classList.remove("has-focus"))),setTimeout((()=>{if(!p)return;n(1,h="");const e=document.activeElement;e&&zt(e,p)&&Xt(p,"a.has-path",(e=>e.focus()))}),100)}return e.$$set=e=>{"transition"in e&&n(0,l=e.transition)},e.$$.update=()=>{2&e.$$.dirty&&function(){if(!p)return;n(15,m=0),n(16,$=[]);const e=[h.match(/^\W+/)?"":"\\b\\W*"];e[0]&&e.push("");for(let t=0;t<e.length;t++){const r="+"==h?new RegExp(/[1-9]\d*\+?\s*$/):"+@"==h?new RegExp(/^\s*\w.*[1-9]\d*\+?\s*$/):"+#"==h?new RegExp(/^\s*#.*[1-9]\d*\+?\s*$/):new RegExp(e[t]+en(h),"i"),o={};if(Xt(p,"a",((e,t)=>{const i=e.classList;!h.length&&i.contains("has-path")&&n(15,m=t),i.remove("has-focus");const a=!h.length||!e.href.match(/\/search$/)&&!o[e.href]&&e.textContent.match(r);a&&$.push(e),e.classList[a?"remove":"add"]("hidden"),o[e.href]=!0})),$.length)break}Xt(p,".for-connection",(e=>{let t=e;for(;(t=t.nextElementSibling)&&t.classList.contains("for-conversation");)if(!t.classList.contains("hidden"))return e.classList.remove("hidden")}));const t=p.querySelector(".for-search");t.classList[h?"remove":"add"]("hidden"),t.classList.contains("hidden")||$.push(t),Xt(p,"h3",(e=>{let t=e;for(;(t=t.nextElementSibling)&&!an(t,"h3");)if(!t.classList.contains("hidden"))return e.classList.remove("hidden");e.classList.add("hidden")}))}(),8&e.$$.dirty&&n(6,r="/settings/conversation?connection_id="+(u.activeConversation.connection_id||"")),2&e.$$.dirty&&n(5,o=h.replace(/^\//,"")),131076&e.$$.dirty&&p&&v(),98304&e.$$.dirty&&$[m]&&$[m].classList.add("has-focus")},[l,h,p,u,g,o,r,s,c,d,f,function(){n(4,g=!1),0!=h.indexOf("+")&&v()},function(){n(4,g=!0)},function(e){return(e.target.className||"").match(/(network|user)/)?setTimeout((()=>{T(gt,i="settings",i)}),50):e.target.closest("a")?setTimeout((()=>{T(gt,i="",i)}),50):void 0},function(e){if(13==e.keyCode)return e.preventDefault(),v(),void($[m]&&Hn.go($[m].href));const t=38==e.keyCode?-1:40==e.keyCode?1:0;t&&(e.preventDefault(),$[m]&&$[m].classList.remove("has-focus"),n(15,m+=e.ctrlKey?4*t:t)),m<0&&n(15,m=$.length-1),m>=$.length&&n(15,m=0)},m,$,a,function(){h=this.value,n(1,h)},function(e){Ee[e?"unshift":"push"]((()=>{p=e,n(2,p)}))}]}class Fd extends nt{constructor(e){super(),tt(this,e,xd,Ed,k,{transition:0})}}function Sd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return g(this,r)}}var Od=function(e){p(r,e);var t=Sd(r);function r(){var e;return $(this,r),(e=t.call(this)).prop("cookie","activeTheme","convos",{key:"theme"}),e.prop("cookie","colorScheme","auto"),e.prop("cookie","compactDisplay",!1),e.prop("ro","colorSchemeOptions",["Auto","Light","Dark"].map((function(e){return[e.toLowerCase(),e]}))),e.prop("ro","themeOptions",(function(){return Array.from(e._stylesheets.entries())})),e.prop("rw","osColorScheme",""),e._stylesheets=new Map([]),e}return b(r,[{key:"hasColorScheme",value:function(e){return Xt(document,'link[id$="-'+e+'"]').length>1}},{key:"start",value:function(){var e=this;Xt(document,'link[rel="alternate stylesheet"][title]',(function(t){var n=t.title.replace(/\s\([a-z]+\)$/,"");e._stylesheets.set(t.id.replace(/^theme_alt__[a-z]+-/,""),n)}));var t=this.osColorScheme;return this._matchMedia||(this._matchMedia=window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):{addListener:function(){}},this._matchMedia.addListener((function(t){return e.update({osColorScheme:t.matches?"dark":"light"})})),t=this._matchMedia.matches?"dark":"light"),this.update({compactDisplay:this.compactDisplay,osColorScheme:t})}},{key:"update",value:function(e){return(e.activeTheme||e.colorScheme||e.osColorScheme)&&this._activateTheme(e),f(n(r.prototype),"update",this).call(this,e)}},{key:"_activateTheme",value:function(e){for(var t,n=e.activeTheme||this.activeTheme,r=e.colorScheme||this.colorScheme,o=e.osColorScheme||this.osColorScheme,i=["auto"==r?o:r,"normal","light"],a=0;a<i.length&&!(t=document.getElementById("theme_alt__"+i[a]+"-"+n));a++);Xt(document,'link[rel*="style"][title]',(function(e){t||(t=e),e.disabled=!0,e.disabled=e.href!=t.href,e.setAttribute("media",e==t?"":"none"),e.setAttribute("rel",e==t?"stylesheet":"alternate stylesheet")}))}}]),r}(fn);function Bd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return g(this,r)}}var Nd={exports:{}};function jd(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach((function(t){var n=e[t];"object"!=m(n)||Object.isFrozen(n)||jd(n)})),e}Nd.exports=jd,Nd.exports.default=jd;var Td=Nd.exports,Rd=function(){function e(t){$(this,e),void 0===t.data&&(t.data={}),this.data=t.data,this.isMatchIgnored=!1}return b(e,[{key:"ignoreMatch",value:function(){this.isMatchIgnored=!0}}]),e}();function Ld(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Md(e){var t=Object.create(null);for(var n in e)t[n]=e[n];for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return o.forEach((function(e){for(var n in e)t[n]=e[n]})),t}var Pd=function(e){return!!e.kind},Id=function(){function e(t,n){$(this,e),this.buffer="",this.classPrefix=n.classPrefix,t.walk(this)}return b(e,[{key:"addText",value:function(e){this.buffer+=Ld(e)}},{key:"openNode",value:function(e){if(Pd(e)){var t=e.kind;t=e.sublanguage?"language-".concat(t):function(e,t){var n=t.prefix;if(e.includes(".")){var r=e.split(".");return["".concat(n).concat(r.shift())].concat(l(r.map((function(e,t){return"".concat(e).concat("_".repeat(t+1))})))).join(" ")}return"".concat(n).concat(e)}(t,{prefix:this.classPrefix}),this.span(t)}}},{key:"closeNode",value:function(e){Pd(e)&&(this.buffer+="</span>")}},{key:"value",value:function(){return this.buffer}},{key:"span",value:function(e){this.buffer+='<span class="'.concat(e,'">')}}]),e}(),Ud=function(e){p(n,e);var t=Bd(n);function n(e){var r;return $(this,n),(r=t.call(this)).options=e,r}return b(n,[{key:"addKeyword",value:function(e,t){""!==e&&(this.openNode(t),this.addText(e),this.closeNode())}},{key:"addText",value:function(e){""!==e&&this.add(e)}},{key:"addSublanguage",value:function(e,t){var n=e.root;n.kind=t,n.sublanguage=!0,this.add(n)}},{key:"toHTML",value:function(){return new Id(this,this.options).value()}},{key:"finalize",value:function(){return!0}}]),n}(function(){function e(){$(this,e),this.rootNode={children:[]},this.stack=[this.rootNode]}return b(e,[{key:"top",get:function(){return this.stack[this.stack.length-1]}},{key:"root",get:function(){return this.rootNode}},{key:"add",value:function(e){this.top.children.push(e)}},{key:"openNode",value:function(e){var t={kind:e,children:[]};this.add(t),this.stack.push(t)}},{key:"closeNode",value:function(){if(this.stack.length>1)return this.stack.pop()}},{key:"closeAllNodes",value:function(){for(;this.closeNode(););}},{key:"toJSON",value:function(){return JSON.stringify(this.rootNode,null,4)}},{key:"walk",value:function(e){return this.constructor._walk(e,this.rootNode)}}],[{key:"_walk",value:function(e,t){var n=this;return"string"==typeof t?e.addText(t):t.children&&(e.openNode(t),t.children.forEach((function(t){return n._walk(e,t)})),e.closeNode(t)),e}},{key:"_collapse",value:function(t){"string"!=typeof t&&t.children&&(t.children.every((function(e){return"string"==typeof e}))?t.children=[t.children.join("")]:t.children.forEach((function(t){e._collapse(t)})))}}]),e}());function Hd(e){return e?"string"==typeof e?e:e.source:null}function zd(e){return Kd("(?=",e,")")}function qd(e){return Kd("(?:",e,")*")}function Wd(e){return Kd("(?:",e,")?")}function Kd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.map((function(e){return Hd(e)})).join("");return r}function Gd(e){var t=e[e.length-1];return"object"===m(t)&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function Yd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Gd(t),o="("+(r.capture?"":"?:")+t.map((function(e){return Hd(e)})).join("|")+")";return o}function Zd(e){return new RegExp(e.toString()+"|").exec("").length-1}var Vd=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function Jd(e,t){var n=t.joinWith,r=0;return e.map((function(e){for(var t=r+=1,n=Hd(e),o="";n.length>0;){var i=Vd.exec(n);if(!i){o+=n;break}o+=n.substring(0,i.index),n=n.substring(i.index+i[0].length),"\\"===i[0][0]&&i[1]?o+="\\"+String(Number(i[1])+t):(o+=i[0],"("===i[0]&&r++)}return o})).map((function(e){return"(".concat(e,")")})).join(n)}var Qd="[a-zA-Z]\\w*",Xd="[a-zA-Z_]\\w*",ef="\\b\\d+(\\.\\d+)?",tf="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",nf="\\b(0b[01]+)",rf={begin:"\\\\[\\s\\S]",relevance:0},of={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[rf]},af={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[rf]},uf=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Md({scope:"comment",begin:e,end:t,contains:[]},n);r.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});var o=Yd("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return r.contains.push({begin:Kd(/[ ]+/,"(",o,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),r},sf=uf("//","$"),cf=uf("/\\*","\\*/"),lf=uf("#","$"),df={scope:"number",begin:ef,relevance:0},ff={scope:"number",begin:tf,relevance:0},pf={scope:"number",begin:nf,relevance:0},mf={begin:/(?=\/[^/\n]*\/)/,contains:[{scope:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[rf,{begin:/\[/,end:/\]/,relevance:0,contains:[rf]}]}]},hf={scope:"title",begin:Qd,relevance:0},gf={scope:"title",begin:Xd,relevance:0},$f={begin:"\\.\\s*[a-zA-Z_]\\w*",relevance:0},vf=Object.freeze({__proto__:null,MATCH_NOTHING_RE:/\b\B/,IDENT_RE:Qd,UNDERSCORE_IDENT_RE:Xd,NUMBER_RE:ef,C_NUMBER_RE:tf,BINARY_NUMBER_RE:nf,RE_STARTERS_RE:"!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",SHEBANG:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=/^#![ ]*\//;return e.binary&&(e.begin=Kd(t,/.*\b/,e.binary,/\b.*/)),Md({scope:"meta",begin:t,end:/$/,relevance:0,"on:begin":function(e,t){0!==e.index&&t.ignoreMatch()}},e)},BACKSLASH_ESCAPE:rf,APOS_STRING_MODE:of,QUOTE_STRING_MODE:af,PHRASAL_WORDS_MODE:{begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},COMMENT:uf,C_LINE_COMMENT_MODE:sf,C_BLOCK_COMMENT_MODE:cf,HASH_COMMENT_MODE:lf,NUMBER_MODE:df,C_NUMBER_MODE:ff,BINARY_NUMBER_MODE:pf,REGEXP_MODE:mf,TITLE_MODE:hf,UNDERSCORE_TITLE_MODE:gf,METHOD_GUARD:$f,END_SAME_AS_BEGIN:function(e){return Object.assign(e,{"on:begin":function(e,t){t.data._beginMatch=e[1]},"on:end":function(e,t){t.data._beginMatch!==e[1]&&t.ignoreMatch()}})}});function bf(e,t){"."===e.input[e.index-1]&&t.ignoreMatch()}function yf(e,t){void 0!==e.className&&(e.scope=e.className,delete e.className)}function Df(e,t){t&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=bf,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,void 0===e.relevance&&(e.relevance=0))}function wf(e,t){Array.isArray(e.illegal)&&(e.illegal=Yd.apply(void 0,l(e.illegal)))}function _f(e,t){if(e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function Ef(e,t){void 0===e.relevance&&(e.relevance=1)}var Cf=function(e,t){if(e.beforeMatch){if(e.starts)throw new Error("beforeMatch cannot be used with starts");var n=Object.assign({},e);Object.keys(e).forEach((function(t){delete e[t]})),e.keywords=n.keywords,e.begin=Kd(n.beforeMatch,zd(n.begin)),e.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},e.relevance=0,delete n.beforeMatch}},kf=["of","and","for","in","not","or","if","then","parent","list","value"],Af="keyword";function xf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Af,r=Object.create(null);return"string"==typeof e?o(n,e.split(" ")):Array.isArray(e)?o(n,e):Object.keys(e).forEach((function(n){Object.assign(r,xf(e[n],t,n))})),r;function o(e,n){t&&(n=n.map((function(e){return e.toLowerCase()}))),n.forEach((function(t){var n=t.split("|");r[n[0]]=[e,Ff(n[0],n[1])]}))}}function Ff(e,t){return t?Number(t):function(e){return kf.includes(e.toLowerCase())}(e)?0:1}var Sf={},Of=function(e){console.error(e)},Bf=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=console).log.apply(t,["WARN: ".concat(e)].concat(r))},Nf=function(e,t){Sf["".concat(e,"/").concat(t)]||(console.log("Deprecated as of ".concat(e,". ").concat(t)),Sf["".concat(e,"/").concat(t)]=!0)},jf=new Error;function Tf(e,t,n){for(var r=n.key,o=0,i=e[r],a={},u={},s=1;s<=t.length;s++)u[s+o]=i[s],a[s+o]=!0,o+=Zd(t[s-1]);e[r]=u,e[r]._emit=a,e[r]._multi=!0}function Rf(e){!function(e){e.scope&&"object"===m(e.scope)&&null!==e.scope&&(e.beginScope=e.scope,delete e.scope)}(e),"string"==typeof e.beginScope&&(e.beginScope={_wrap:e.beginScope}),"string"==typeof e.endScope&&(e.endScope={_wrap:e.endScope}),function(e){if(Array.isArray(e.begin)){if(e.skip||e.excludeBegin||e.returnBegin)throw Of("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),jf;if("object"!==m(e.beginScope)||null===e.beginScope)throw Of("beginScope must be object"),jf;Tf(e,e.begin,{key:"beginScope"}),e.begin=Jd(e.begin,{joinWith:""})}}(e),function(e){if(Array.isArray(e.end)){if(e.skip||e.excludeEnd||e.returnEnd)throw Of("skip, excludeEnd, returnEnd not compatible with endScope: {}"),jf;if("object"!==m(e.endScope)||null===e.endScope)throw Of("endScope must be object"),jf;Tf(e,e.end,{key:"endScope"}),e.end=Jd(e.end,{joinWith:""})}}(e)}function Lf(e){function t(t,n){return new RegExp(Hd(t),"m"+(e.case_insensitive?"i":"")+(e.unicodeRegex?"u":"")+(n?"g":""))}var n=function(){function e(){$(this,e),this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}return b(e,[{key:"addRule",value:function(e,t){t.position=this.position++,this.matchIndexes[this.matchAt]=t,this.regexes.push([t,e]),this.matchAt+=Zd(e)+1}},{key:"compile",value:function(){0===this.regexes.length&&(this.exec=function(){return null});var e=this.regexes.map((function(e){return e[1]}));this.matcherRe=t(Jd(e,{joinWith:"|"}),!0),this.lastIndex=0}},{key:"exec",value:function(e){this.matcherRe.lastIndex=this.lastIndex;var t=this.matcherRe.exec(e);if(!t)return null;var n=t.findIndex((function(e,t){return t>0&&void 0!==e})),r=this.matchIndexes[n];return t.splice(0,n),Object.assign(t,r)}}]),e}(),r=function(){function e(){$(this,e),this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}return b(e,[{key:"getMatcher",value:function(e){if(this.multiRegexes[e])return this.multiRegexes[e];var t=new n;return this.rules.slice(e).forEach((function(e){var n=xt(e,2),r=n[0],o=n[1];return t.addRule(r,o)})),t.compile(),this.multiRegexes[e]=t,t}},{key:"resumingScanAtSamePosition",value:function(){return 0!==this.regexIndex}},{key:"considerAll",value:function(){this.regexIndex=0}},{key:"addRule",value:function(e,t){this.rules.push([e,t]),"begin"===t.type&&this.count++}},{key:"exec",value:function(e){var t=this.getMatcher(this.regexIndex);t.lastIndex=this.lastIndex;var n=t.exec(e);if(this.resumingScanAtSamePosition())if(n&&n.index===this.lastIndex);else{var r=this.getMatcher(0);r.lastIndex=this.lastIndex+1,n=r.exec(e)}return n&&(this.regexIndex+=n.position+1,this.regexIndex===this.count&&this.considerAll()),n}}]),e}();if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=Md(e.classNameAliases||{}),function n(o,i){var a,u=o;if(o.isCompiled)return u;[yf,_f,Rf,Cf].forEach((function(e){return e(o,i)})),e.compilerExtensions.forEach((function(e){return e(o,i)})),o.__beforeBegin=null,[Df,wf,Ef].forEach((function(e){return e(o,i)})),o.isCompiled=!0;var s=null;return"object"===m(o.keywords)&&o.keywords.$pattern&&(o.keywords=Object.assign({},o.keywords),s=o.keywords.$pattern,delete o.keywords.$pattern),s=s||/\w+/,o.keywords&&(o.keywords=xf(o.keywords,e.case_insensitive)),u.keywordPatternRe=t(s,!0),i&&(o.begin||(o.begin=/\B|\b/),u.beginRe=t(u.begin),o.end||o.endsWithParent||(o.end=/\B|\b/),o.end&&(u.endRe=t(u.end)),u.terminatorEnd=Hd(u.end)||"",o.endsWithParent&&i.terminatorEnd&&(u.terminatorEnd+=(o.end?"|":"")+i.terminatorEnd)),o.illegal&&(u.illegalRe=t(o.illegal)),o.contains||(o.contains=[]),o.contains=(a=[]).concat.apply(a,l(o.contains.map((function(e){return function(e){e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map((function(t){return Md(e,{variants:null},t)})));if(e.cachedVariants)return e.cachedVariants;if(Mf(e))return Md(e,{starts:e.starts?Md(e.starts):null});if(Object.isFrozen(e))return Md(e);return e}("self"===e?o:e)})))),o.contains.forEach((function(e){n(e,u)})),o.starts&&n(o.starts,i),u.matcher=function(e){var t=new r;return e.contains.forEach((function(e){return t.addRule(e.begin,{rule:e,type:"begin"})})),e.terminatorEnd&&t.addRule(e.terminatorEnd,{type:"end"}),e.illegal&&t.addRule(e.illegal,{type:"illegal"}),t}(u),u}(e)}function Mf(e){return!!e&&(e.endsWithParent||Mf(e.starts))}var Pf=function(e){p(n,e);var t=Bd(n);function n(e,r){var o;return $(this,n),(o=t.call(this,e)).name="HTMLInjectionError",o.html=r,o}return b(n)}(a(Error)),If=Ld,Uf=Md,Hf=Symbol("nomatch"),zf=function(e){var t=Object.create(null),n=Object.create(null),r=[],o=!0,i="Could not find the language '{}', did you forget to load/include a language module?",a={disableAutodetect:!0,name:"Plain text",contains:[]},u={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:Ud};function s(e){return u.noHighlightRe.test(e)}function c(e,t,n){var r="",o="";"object"===m(t)?(r=e,n=t.ignoreIllegals,o=t.language):(Nf("10.7.0","highlight(lang, code, ...args) has been deprecated."),Nf("10.7.0","Please use highlight(code, options) instead.\nhttps://github.com/highlightjs/highlight.js/issues/2277"),o=e,r=t),void 0===n&&(n=!0);var i={code:r,language:o};b("before:highlight",i);var a=i.result?i.result:l(i.language,i.code,n);return a.code=i.code,b("after:highlight",a),a}function l(e,n,r,a){var s=Object.create(null);function c(){if(E.keywords){var e=0;E.keywordPatternRe.lastIndex=0;for(var t,n=E.keywordPatternRe.exec(A),r="";n;){r+=A.substring(e,n.index);var o=D.case_insensitive?n[0].toLowerCase():n[0],i=(t=o,E.keywords[t]);if(i){var a=xt(i,2),u=a[0],c=a[1];if(k.addText(r),r="",s[o]=(s[o]||0)+1,s[o]<=7&&(x+=c),u.startsWith("_"))r+=n[0];else{var l=D.classNameAliases[u]||u;k.addKeyword(n[0],l)}}else r+=n[0];e=E.keywordPatternRe.lastIndex,n=E.keywordPatternRe.exec(A)}r+=A.substr(e),k.addText(r)}else k.addText(A)}function f(){null!=E.subLanguage?function(){if(""!==A){var e=null;if("string"==typeof E.subLanguage){if(!t[E.subLanguage])return void k.addText(A);e=l(E.subLanguage,A,!0,C[E.subLanguage]),C[E.subLanguage]=e._top}else e=d(A,E.subLanguage.length?E.subLanguage:null);E.relevance>0&&(x+=e.relevance),k.addSublanguage(e._emitter,e.language)}}():c(),A=""}function p(e,t){for(var n=1;void 0!==t[n];)if(e._emit[n]){var r=D.classNameAliases[e[n]]||e[n],o=t[n];r?k.addKeyword(o,r):(A=o,c(),A=""),n++}else n++}function m(e,t){return e.scope&&"string"==typeof e.scope&&k.openNode(D.classNameAliases[e.scope]||e.scope),e.beginScope&&(e.beginScope._wrap?(k.addKeyword(A,D.classNameAliases[e.beginScope._wrap]||e.beginScope._wrap),A=""):e.beginScope._multi&&(p(e.beginScope,t),A="")),E=Object.create(e,{parent:{value:E}})}function h(e,t,n){var r=function(e,t){var n=e&&e.exec(t);return n&&0===n.index}(e.endRe,n);if(r){if(e["on:end"]){var o=new Rd(e);e["on:end"](t,o),o.isMatchIgnored&&(r=!1)}if(r){for(;e.endsParent&&e.parent;)e=e.parent;return e}}if(e.endsWithParent)return h(e.parent,t,n)}function $(e){return 0===E.matcher.regexIndex?(A+=e[0],1):(O=!0,0)}function v(e){var t=e[0],r=n.substr(e.index),o=h(E,e,r);if(!o)return Hf;var i=E;E.endScope&&E.endScope._wrap?(f(),k.addKeyword(t,E.endScope._wrap)):E.endScope&&E.endScope._multi?(f(),p(E.endScope,e)):i.skip?A+=t:(i.returnEnd||i.excludeEnd||(A+=t),f(),i.excludeEnd&&(A=t));do{E.scope&&k.closeNode(),E.skip||E.subLanguage||(x+=E.relevance),E=E.parent}while(E!==o.parent);return o.starts&&m(o.starts,e),i.returnEnd?0:t.length}var b={};function y(t,i){var a=i&&i[0];if(A+=t,null==a)return f(),0;if("begin"===b.type&&"end"===i.type&&b.index===i.index&&""===a){if(A+=n.slice(i.index,i.index+1),!o){var u=new Error("0 width match regex (".concat(e,")"));throw u.languageName=e,u.badRule=b.rule,u}return 1}if(b=i,"begin"===i.type)return function(e){for(var t=e[0],n=e.rule,r=new Rd(n),o=0,i=[n.__beforeBegin,n["on:begin"]];o<i.length;o++){var a=i[o];if(a&&(a(e,r),r.isMatchIgnored))return $(t)}return n.skip?A+=t:(n.excludeBegin&&(A+=t),f(),n.returnBegin||n.excludeBegin||(A=t)),m(n,e),n.returnBegin?0:t.length}(i);if("illegal"===i.type&&!r){var s=new Error('Illegal lexeme "'+a+'" for mode "'+(E.scope||"<unnamed>")+'"');throw s.mode=E,s}if("end"===i.type){var c=v(i);if(c!==Hf)return c}if("illegal"===i.type&&""===a)return 1;if(S>1e5&&S>3*i.index)throw new Error("potential infinite loop, way more iterations than matches");return A+=a,a.length}var D=g(e);if(!D)throw Of(i.replace("{}",e)),new Error('Unknown language: "'+e+'"');var w=Lf(D),_="",E=a||w,C={},k=new u.__emitter(u);!function(){for(var e=[],t=E;t!==D;t=t.parent)t.scope&&e.unshift(t.scope);e.forEach((function(e){return k.openNode(e)}))}();var A="",x=0,F=0,S=0,O=!1;try{for(E.matcher.considerAll();;){S++,O?O=!1:E.matcher.considerAll(),E.matcher.lastIndex=F;var B=E.matcher.exec(n);if(!B)break;var N=y(n.substring(F,B.index),B);F=B.index+N}return y(n.substr(F)),k.closeAllNodes(),k.finalize(),_=k.toHTML(),{language:e,value:_,relevance:x,illegal:!1,_emitter:k,_top:E}}catch(t){if(t.message&&t.message.includes("Illegal"))return{language:e,value:If(n),illegal:!0,relevance:0,_illegalBy:{message:t.message,index:F,context:n.slice(F-100,F+100),mode:t.mode,resultSoFar:_},_emitter:k};if(o)return{language:e,value:If(n),illegal:!1,relevance:0,errorRaised:t,_emitter:k,_top:E};throw t}}function d(e,n){n=n||u.languages||Object.keys(t);var r=function(e){var t={value:If(e),illegal:!1,relevance:0,_top:a,_emitter:new u.__emitter(u)};return t._emitter.addText(e),t}(e),o=n.filter(g).filter(v).map((function(t){return l(t,e,!1)}));o.unshift(r);var i=xt(o.sort((function(e,t){if(e.relevance!==t.relevance)return t.relevance-e.relevance;if(e.language&&t.language){if(g(e.language).supersetOf===t.language)return 1;if(g(t.language).supersetOf===e.language)return-1}return 0})),2),s=i[0],c=i[1],d=s;return d.secondBest=c,d}function f(e){var t=function(e){var t=e.className+" ";t+=e.parentNode?e.parentNode.className:"";var n=u.languageDetectRe.exec(t);if(n){var r=g(n[1]);return r||(Bf(i.replace("{}",n[1])),Bf("Falling back to no-highlight mode for this block.",e)),r?n[1]:"no-highlight"}return t.split(/\s+/).find((function(e){return s(e)||g(e)}))}(e);if(!s(t)){if(b("before:highlightElement",{el:e,language:t}),e.children.length>0)if(u.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/issues/2886"),console.warn(e)),u.throwUnescapedHTML)throw new Pf("One of your code blocks includes unescaped HTML.",e.innerHTML);var r=e.textContent,o=t?c(r,{language:t,ignoreIllegals:!0}):d(r);e.innerHTML=o.value,function(e,t,r){var o=t&&n[t]||r;e.classList.add("hljs"),e.classList.add("language-".concat(o))}(e,t,o.language),e.result={language:o.language,re:o.relevance,relevance:o.relevance},o.secondBest&&(e.secondBest={language:o.secondBest.language,relevance:o.secondBest.relevance}),b("after:highlightElement",{el:e,result:o,text:r})}}var p=!1;function h(){"loading"!==document.readyState?document.querySelectorAll(u.cssSelector).forEach(f):p=!0}function g(e){return e=(e||"").toLowerCase(),t[e]||t[n[e]]}function $(e,t){var r=t.languageName;"string"==typeof e&&(e=[e]),e.forEach((function(e){n[e.toLowerCase()]=r}))}function v(e){var t=g(e);return t&&!t.disableAutodetect}function b(e,t){var n=e;r.forEach((function(e){e[n]&&e[n](t)}))}for(var y in"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("DOMContentLoaded",(function(){p&&h()}),!1),Object.assign(e,{highlight:c,highlightAuto:d,highlightAll:h,highlightElement:f,highlightBlock:function(e){return Nf("10.7.0","highlightBlock will be removed entirely in v12.0"),Nf("10.7.0","Please use highlightElement now."),f(e)},configure:function(e){u=Uf(u,e)},initHighlighting:function(){h(),Nf("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")},initHighlightingOnLoad:function(){h(),Nf("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")},registerLanguage:function(n,r){var i=null;try{i=r(e)}catch(e){if(Of("Language definition for '{}' could not be registered.".replace("{}",n)),!o)throw e;Of(e),i=a}i.name||(i.name=n),t[n]=i,i.rawDefinition=r.bind(null,e),i.aliases&&$(i.aliases,{languageName:n})},unregisterLanguage:function(e){delete t[e];for(var r=0,o=Object.keys(n);r<o.length;r++){var i=o[r];n[i]===e&&delete n[i]}},listLanguages:function(){return Object.keys(t)},getLanguage:g,registerAliases:$,autoDetection:v,inherit:Uf,addPlugin:function(e){!function(e){e["before:highlightBlock"]&&!e["before:highlightElement"]&&(e["before:highlightElement"]=function(t){e["before:highlightBlock"](Object.assign({block:t.el},t))}),e["after:highlightBlock"]&&!e["after:highlightElement"]&&(e["after:highlightElement"]=function(t){e["after:highlightBlock"](Object.assign({block:t.el},t))})}(e),r.push(e)}}),e.debugMode=function(){o=!1},e.safeMode=function(){o=!0},e.versionString="11.3.1",e.regex={concat:Kd,lookahead:zd,either:Yd,optional:Wd,anyNumberOfTimes:qd},vf)"object"===m(vf[y])&&Td(vf[y]);return Object.assign(e,vf),e}({}),qf=zf;zf.HighlightJS=zf,zf.default=zf;var Wf="hljs-ln",Kf="hljs-ln-line",Gf="hljs-ln-code",Yf="hljs-ln-numbers",Zf="hljs-ln-n",Vf="data-line-number",Jf=/\r\n|\r|\n/g;function Qf(e){var t=e.childNodes;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];tp(r.textContent)>0&&(r.childNodes.length>0?Qf(r):Xf(r.parentNode))}}function Xf(e){var t=e.className;if(/hljs-/.test(t)){for(var n=ep(e.innerHTML),r=0,o="";r<n.length;r++){var i=n[r].length>0?n[r]:" ";o+='<span class="'.concat(t,'">').concat(i,"</span>\n")}e.innerHTML=o.trim()}}function ep(e){return 0===e.length?[]:e.split(Jf)}function tp(e){return(e.trim().match(Jf)||[]).length}document.addEventListener("copy",(function(e){var t,n=window.getSelection();(function(e){for(var t=e;t;){if(t.className&&-1!==t.className.indexOf("hljs-ln-code"))return!0;t=t.parentNode}return!1})(n.anchorNode)&&(t=-1!==window.navigator.userAgent.indexOf("Edge")?function(e){for(var t=e.toString(),n=e.anchorNode;"TD"!==n.nodeName;)n=n.parentNode;for(var r=e.focusNode;"TD"!==r.nodeName;)r=r.parentNode;var o=parseInt(n.dataset.lineNumber,10),i=parseInt(r.dataset.lineNumber,10);if(o!=i){var a=n.textContent,u=r.textContent;if(o>i){var s=o;o=i,i=s,s=a,a=u,u=s}for(;0!==t.indexOf(a);)a=a.slice(1);for(;-1===t.lastIndexOf(u);)u=u.slice(0,-1);for(var c=a,l=function(e){for(var t=e;"TABLE"!==t.nodeName;)t=t.parentNode;return t}(n),d=o+1;d<i;++d){var f=".".concat(Gf,"[").concat(Vf,'="').concat(d,'"]');c+="\n"+l.querySelector(f).textContent}return c+"\n"+u}return t}(n):n.toString(),e.clipboardData.setData("text/plain",t),e.preventDefault())}));var np="[A-Za-z$_][0-9A-Za-z$_]*",rp=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],op=["true","false","null","undefined","NaN","Infinity"],ip=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],ap=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],up=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],sp=["arguments","this","super","console","window","document","localStorage","module","global"],cp=[].concat(up,ip,ap);var lp=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],dp=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],fp=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],pp=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],mp=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-height","max-width","min-height","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();var hp,gp=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],$p=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],vp=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],bp=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],yp=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-height","max-width","min-height","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();qf.registerLanguage("css",(function(e){var t=e.regex,n=function(e){return{IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z][A-Za-z0-9_-]*/}}}(e),r=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,{begin:/-(webkit|moz|ms|o)-(?=[a-z])/},n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\.[a-zA-Z-][a-zA-Z0-9_-]*",relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+vp.join("|")+")"},{begin:":(:)?("+bp.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+yp.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE].concat(r,[{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH])},{begin:t.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:/@-?\w[\w]*(-\w+)*/},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:"and or not only",attribute:$p.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"}].concat(r,[n.CSS_NUMBER_MODE])}]},{className:"selector-tag",begin:"\\b("+gp.join("|")+")\\b"}]}})),qf.registerLanguage("diff",(function(e){var t=e.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:t.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:t.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}})),qf.registerLanguage("dockerfile",(function(e){return{name:"Dockerfile",aliases:["docker"],case_insensitive:!0,keywords:["from","maintainer","expose","env","arg","user","onbuild","stopsignal"],contains:[e.HASH_COMMENT_MODE,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,e.NUMBER_MODE,{beginKeywords:"run cmd entrypoint volume add copy workdir label healthcheck shell",starts:{end:/[^\\]$/,subLanguage:"bash"}}],illegal:"</"}})),qf.registerLanguage("go",(function(e){var t={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:t,illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"string",variants:[e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{begin:e.C_NUMBER_RE+"[i]",relevance:1},e.C_NUMBER_MODE]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[e.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:t,illegal:/["']/}]}]}})),qf.registerLanguage("http",(function(e){var t="HTTP/(2|1\\.[01])",n={className:"attribute",begin:e.regex.concat("^",/[A-Za-z][A-Za-z0-9-]*/,"(?=\\:\\s)"),starts:{contains:[{className:"punctuation",begin:/: /,relevance:0,starts:{end:"$",relevance:0}}]}},r=[n,{begin:"\\n\\n",starts:{subLanguage:[],endsWithParent:!0}}];return{name:"HTTP",aliases:["https"],illegal:/\S/,contains:[{begin:"^(?="+t+" \\d{3})",end:/$/,contains:[{className:"meta",begin:t},{className:"number",begin:"\\b\\d{3}\\b"}],starts:{end:/\b\B/,illegal:/\S/,contains:r}},{begin:"(?=^[A-Z]+ (.*?) "+t+"$)",end:/$/,contains:[{className:"string",begin:" ",end:" ",excludeBegin:!0,excludeEnd:!0},{className:"meta",begin:t},{className:"keyword",begin:"[A-Z]+"}],starts:{end:/\b\B/,illegal:/\S/,contains:r}},e.inherit(n,{relevance:0})]}})),qf.registerLanguage("javascript",(function(e){var t=e.regex,n=np,r="<>",o="</>",i={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:function(e,t){var n,r=e[0].length+e.index,o=e.input[r];"<"!==o&&","!==o?(">"===o&&(function(e,t){var n=t.after,r="</"+e[0].slice(1);return-1!==e.input.indexOf(r,n)}(e,{after:r})||t.ignoreMatch()),(n=e.input.substr(r).match(/^\s+extends\s+/))&&0===n.index&&t.ignoreMatch()):t.ignoreMatch()}},a={$pattern:np,keyword:rp,literal:op,built_in:cp,"variable.language":sp},u="[0-9](_?[0-9])*",s="\\.(".concat(u,")"),c="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",l={className:"number",variants:[{begin:"(\\b(".concat(c,")((").concat(s,")|\\.)?|(").concat(s,"))")+"[eE][+-]?(".concat(u,")\\b")},{begin:"\\b(".concat(c,")\\b((").concat(s,")\\b|\\.)?|(").concat(s,")\\b")},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},d={className:"subst",begin:"\\$\\{",end:"\\}",keywords:a,contains:[]},f={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,d],subLanguage:"xml"}},p={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,d],subLanguage:"css"}},m={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,d]},h={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:n+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},g=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,f,p,m,l];d.contains=g.concat({begin:/\{/,end:/\}/,keywords:a,contains:["self"].concat(g)});var $,v=[].concat(h,d.contains),b=v.concat([{begin:/\(/,end:/\)/,keywords:a,contains:["self"].concat(v)}]),y={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:b},D={variants:[{match:[/class/,/\s+/,n,/\s+/,/extends/,/\s+/,t.concat(n,"(",t.concat(/\./,n),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,n],scope:{1:"keyword",3:"title.class"}}]},w={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]+|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+/),className:"title.class",keywords:{_:[].concat(ip,ap)}},_={variants:[{match:[/function/,/\s+/,n,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[y],illegal:/%/},E={match:t.concat(/\b/,($=[].concat(up,["super"]),t.concat("(?!",$.join("|"),")")),n,t.lookahead(/\(/)),className:"title.function",relevance:0},C={begin:t.concat(/\./,t.lookahead(t.concat(n,/(?![0-9A-Za-z$_(])/))),end:n,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},k={match:[/get|set/,/\s+/,n,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},y]},A="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",x={match:[/const|var|let/,/\s+/,n,/\s*/,/=\s*/,t.lookahead(A)],className:{1:"keyword",3:"title.function"},contains:[y]};return{name:"Javascript",aliases:["js","jsx","mjs","cjs"],keywords:a,exports:{PARAMS_CONTAINS:b,CLASS_REFERENCE:w},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),{label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,f,p,m,h,l,w,{className:"attr",begin:n+t.lookahead(":"),relevance:0},x,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[h,e.REGEXP_MODE,{className:"function",begin:A,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:b}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:r,end:o},{match:/<[A-Za-z0-9\\._:-]+\s*\/>/},{begin:i.begin,"on:begin":i.isTrulyOpeningTag,end:i.end}],subLanguage:"xml",contains:[{begin:i.begin,end:i.end,skip:!0,contains:["self"]}]}]},_,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[y,e.inherit(e.TITLE_MODE,{begin:n,className:"title.function"})]},{match:/\.\.\./,relevance:0},C,{match:"\\$"+n,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[y]},E,{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},D,k,{match:/\$[(.]/}]}})),qf.registerLanguage("markdown",(function(e){var t={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},n={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:e.regex.concat(/\[.+?\]\(/,/[A-Za-z][A-Za-z0-9+.-]*/,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},r={className:"strong",contains:[],variants:[{begin:/_{2}/,end:/_{2}/},{begin:/\*{2}/,end:/\*{2}/}]},o={className:"emphasis",contains:[],variants:[{begin:/\*(?!\*)/,end:/\*/},{begin:/_(?!_)/,end:/_/,relevance:0}]};r.contains.push(o),o.contains.push(r);var i=[t,n];return r.contains=r.contains.concat(i),o.contains=o.contains.concat(i),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:i=i.concat(r,o)},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:i}]}]},t,{className:"bullet",begin:"^[ \t]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},r,o,{className:"quote",begin:"^>\\s+",contains:i,end:"$"},{className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},{begin:"^[-\\*]{3,}",end:"$"},n,{begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]}]}})),qf.registerLanguage("mojolicious",(function(e){return{name:"Mojolicious",subLanguage:"xml",contains:[{className:"meta",begin:"^__(END|DATA)__$"},{begin:"^\\s*%{1,2}={0,2}",end:"$",subLanguage:"perl"},{begin:"<%{1,2}={0,2}",end:"={0,1}%>",subLanguage:"perl",excludeBegin:!0,excludeEnd:!0}]}})),qf.registerLanguage("nginx",(function(e){var t=e.regex,n={className:"variable",variants:[{begin:/\$\d+/},{begin:/\$\{\w+\}/},{begin:t.concat(/[$@]/,e.UNDERSCORE_IDENT_RE)}]},r={endsWithParent:!0,keywords:{$pattern:/[a-z_]{2,}|\/dev\/poll/,literal:["on","off","yes","no","true","false","none","blocked","debug","info","notice","warn","error","crit","select","break","last","permanent","redirect","kqueue","rtsig","epoll","poll","/dev/poll"]},relevance:0,illegal:"=>",contains:[e.HASH_COMMENT_MODE,{className:"string",contains:[e.BACKSLASH_ESCAPE,n],variants:[{begin:/"/,end:/"/},{begin:/'/,end:/'/}]},{begin:"([a-z]+):/",end:"\\s",endsWithParent:!0,excludeEnd:!0,contains:[n]},{className:"regexp",contains:[e.BACKSLASH_ESCAPE,n],variants:[{begin:"\\s\\^",end:"\\s|\\{|;",returnEnd:!0},{begin:"~\\*?\\s+",end:"\\s|\\{|;",returnEnd:!0},{begin:"\\*(\\.[a-z\\-]+)+"},{begin:"([a-z\\-]+\\.)+\\*"}]},{className:"number",begin:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{className:"number",begin:"\\b\\d+[kKmMgGdshdwy]?\\b",relevance:0},n]};return{name:"Nginx config",aliases:["nginxconf"],contains:[e.HASH_COMMENT_MODE,{beginKeywords:"upstream location",end:/;|\{/,contains:r.contains,keywords:{section:"upstream location"}},{className:"section",begin:t.concat(e.UNDERSCORE_IDENT_RE+t.lookahead(/\s+\{/)),relevance:0},{begin:t.lookahead(e.UNDERSCORE_IDENT_RE+"\\s"),end:";|\\{",contains:[{className:"attribute",begin:e.UNDERSCORE_IDENT_RE,starts:r}],relevance:0}],illegal:"[^\\s\\}\\{]"}})),qf.registerLanguage("perl",(function(e){var t=e.regex,n=/[dualxmsipngr]{0,12}/,r={$pattern:/[\w.]+/,keyword:["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"].join(" ")},o={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:r},i={begin:/->\{/,end:/\}/},a={variants:[{begin:/\$\d/},{begin:t.concat(/[$%@](\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@][^\s\w{]/,relevance:0}]},u=[e.BACKSLASH_ESCAPE,o,a],s=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],c=function(e,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\\1",i="\\1"===o?o:t.concat(o,r);return t.concat(t.concat("(?:",e,")"),r,/(?:\\.|[^\\\/])*?/,i,/(?:\\.|[^\\\/])*?/,o,n)},l=function(e,r,o){return t.concat(t.concat("(?:",e,")"),r,/(?:\\.|[^\\\/])*?/,o,n)},d=[a,e.HASH_COMMENT_MODE,e.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),i,{className:"string",contains:u,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},{className:"number",begin:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",relevance:0},{begin:"(\\/\\/|"+e.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[e.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:c("s|tr|y",t.either.apply(t,s.concat([{capture:!0}])))},{begin:c("s|tr|y","\\(","\\)")},{begin:c("s|tr|y","\\[","\\]")},{begin:c("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:l("(?:m|qr)?",/\//,/\//)},{begin:l("m|qr",t.either.apply(t,s.concat([{capture:!0}])),/\1/)},{begin:l("m|qr",/\(/,/\)/)},{begin:l("m|qr",/\[/,/\]/)},{begin:l("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return o.contains=d,i.contains=d,{name:"Perl",aliases:["pl","pm"],keywords:r,contains:d}})),qf.registerLanguage("python",(function(e){var t=e.regex,n=/(?:[A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037B-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFC5D\uFC64-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDF9\uFE71\uFE73\uFE77\uFE79\uFE7B\uFE7D\uFE7F-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])(?:[0-9A-Z_a-z\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037B-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u0870-\u0887\u0889-\u088E\u0898-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1715\u171F-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B4C\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA827\uA82C\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFC5D\uFC64-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDF9\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE71\uFE73\uFE77\uFE79\uFE7B\uFE7D\uFE7F-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDE80-\uDEA9\uDEAB\uDEAC\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDF70-\uDF85\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC75\uDC7F-\uDCBA\uDCC2\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD47\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDCE-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E-\uDC61\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39\uDF40-\uDF46]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD35\uDD37\uDD38\uDD3B-\uDD43\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3\uDFE4\uDFF0\uDFF1]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAE\uDEC0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A]|\uDB40[\uDD00-\uDDEF])*/,r={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:["and","as","assert","async","await","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},o={className:"meta",begin:/^(>>>|\.\.\.) /},i={className:"subst",begin:/\{/,end:/\}/,keywords:r,illegal:/#/},a={begin:/\{\{/,relevance:0},u={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,o],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,o],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,o,a,i]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,o,a,i]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[e.BACKSLASH_ESCAPE,a,i]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,a,i]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},s="[0-9](_?[0-9])*",c="(\\b(".concat(s,"))?\\.(").concat(s,")|\\b(").concat(s,")\\."),l={className:"number",relevance:0,variants:[{begin:"(\\b(".concat(s,")|(").concat(c,"))[eE][+-]?(").concat(s,")[jJ]?\\b")},{begin:"(".concat(c,")[jJ]?")},{begin:"\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?\\b"},{begin:"\\b0[bB](_?[01])+[lL]?\\b"},{begin:"\\b0[oO](_?[0-7])+[lL]?\\b"},{begin:"\\b0[xX](_?[0-9a-fA-F])+[lL]?\\b"},{begin:"\\b(".concat(s,")[jJ]\\b")}]},d={className:"comment",begin:t.lookahead(/# type:/),end:/$/,keywords:r,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},f={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:r,contains:["self",o,l,u,e.HASH_COMMENT_MODE]}]};return i.contains=[u,l,o],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:r,illegal:/(<\/|->|\?)|=>/,contains:[o,l,{begin:/\bself\b/},{beginKeywords:"if",relevance:0},u,d,e.HASH_COMMENT_MODE,{match:[/def/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[f]},{variants:[{match:[/class/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/class/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[l,f,u]}]}})),qf.registerLanguage("scss",(function(e){var t=function(e){return{IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z][A-Za-z0-9_-]*/}}}(e),n=pp,r=fp,o="@[a-z-]+",i={className:"variable",begin:"(\\$[a-zA-Z-][a-zA-Z0-9_-]*)\\b"};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,t.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+lp.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+r.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n.join("|")+")"},i,{begin:/\(/,end:/\)/,contains:[t.CSS_NUMBER_MODE]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+mp.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,contains:[t.BLOCK_COMMENT,i,t.HEXCOLOR,t.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.IMPORTANT]},{begin:"@(page|font-face)",keywords:{$pattern:o,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:"and or not only",attribute:dp.join(" ")},contains:[{begin:o,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},i,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.HEXCOLOR,t.CSS_NUMBER_MODE]},t.FUNCTION_DISPATCH]}})),qf.registerLanguage("shell",(function(e){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}})),qf.registerLanguage("xml",(function(e){var t=e.regex,n=t.concat(/[A-Z_]/,t.optional(/[A-Z0-9_.-]*:/),/[A-Z0-9_.-]*/),r={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},o={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},i=e.inherit(o,{begin:/\(/,end:/\)/}),a=e.inherit(e.APOS_STRING_MODE,{className:"string"}),u=e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),s={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:/[A-Za-z0-9._:-]+/,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[r]},{begin:/'/,end:/'/,contains:[r]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[o,u,a,i,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[o,i,u,a]}]}]},e.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},r,{className:"meta",begin:/<\?xml/,end:/\?>/,relevance:10},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[s],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[s],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:t.concat(/</,t.lookahead(t.concat(n,t.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:s}]},{className:"tag",begin:t.concat(/<\//,t.lookahead(t.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}})),qf.registerLanguage("yaml",(function(e){var t="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",r={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[e.BACKSLASH_ESCAPE,{className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]}]},o=e.inherit(r,{variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),i={className:"number",begin:"\\b[0-9]{4}(-[0-9][0-9]){0,2}([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?(\\.[0-9]*)?([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?\\b"},a={end:",",endsWithParent:!0,excludeEnd:!0,keywords:t,relevance:0},u={begin:/\{/,end:/\}/,contains:[a],illegal:"\\n",relevance:0},s={begin:"\\[",end:"\\]",contains:[a],illegal:"\\n",relevance:0},c=[{className:"attr",variants:[{begin:"\\w[\\w :\\/.-]*:(?=[ \t]|$)"},{begin:'"\\w[\\w :\\/.-]*":(?=[ \t]|$)'},{begin:"'\\w[\\w :\\/.-]*':(?=[ \t]|$)"}]},{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+e.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+e.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},e.HASH_COMMENT_MODE,{beginKeywords:t,keywords:{literal:t}},i,{className:"number",begin:e.C_NUMBER_RE+"\\b",relevance:0},u,s,r],l=[].concat(c);return l.pop(),l.push(o),a.contains=l,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:c}})),(hp=qf).lineNumbersBlock=function(e,t){hp.highlightBlock(e,t),e.innerHTML=function(e,t){var n=(t=t||{singleLine:!1}).singleLine?0:1;return Qf(e),function(e,t){var n=ep(e);if(""===n[n.length-1].trim()&&n.pop(),n.length>t){for(var r="",o=0,i=n.length;o<i;o++){var a=o+1;r+="<tr>"+'<td class="'.concat(Kf," ").concat(Yf,'" ').concat(Vf,'="').concat(a,'">')+'<div class="'.concat(Zf,'" ').concat(Vf,'="').concat(a,'"></div>')+"</td>"+'<td class="'.concat(Kf," ").concat(Gf,'" ').concat(Vf,'="').concat(a,'">')+(n[o].length>0?n[o]:" ")+"</td></tr>"}return'<table class="'.concat(Wf,'">').concat(r,"</table>")}return e}(e.innerHTML,n)}(e,t)};var Dp={exports:{}};function wp(e){for(var t=document.createElement("div"),n=[[e,t]],r=[];n.length;){var o=xt(n.shift(),2),i=o[0],a=o[1],u=void 0,s=void 0,c=m(i);if(null===i||"undefined"==c?c="null":Array.isArray(i)&&(c="array"),"array"==c?(s=function(e){return e},s.len=i.length,(u=document.createElement("div")).className="json-array "+(s.len?"has-items":"is-empty")):"object"==c?function(){var e=Object.keys(i).sort();s=function(t){return e[t]},s.len=e.length,(u=document.createElement("div")).className="json-object "+(s.len?"has-items":"is-empty")}():((u=document.createElement("span")).className="json-"+c,u.textContent="null"==c?"null":"boolean"!=c?i:i?"true":"false"),s){var l=document.createElement("span");if(l.className="json-type",l.textContent=s.len?c+"["+s.len+"]":"{}",a.appendChild(l),-1!=r.indexOf(i))t.classList.add("has-recursive-items"),u.classList.add("is-seen");else{for(var d=0;d<s.len;d++){var f=s(d),p=document.createElement("div"),h=document.createElement("span");h.className="json-key",h.textContent=f,p.appendChild(h),u.appendChild(p),n.push([i[f],p])}r.push(i)}}a.className="json-item "+u.className.replace(/^json-/,"contains-"),a.appendChild(u)}return t}try{Dp.exports={jsonhtmlify:wp}}catch(e){window.jsonhtmlify=wp}function _p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ep(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_p(Object(n),!0).forEach((function(t){_t(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return g(this,r)}}var kp={},Ap=0,xp=function(e){p(o,e);var t,r=Cp(o);function o(){var e;return $(this,o),(e=r.call(this)).prop("ro","length",(function(){return e.messages.length})),e.prop("ro","messages",[]),e.prop("rw","expandUrlToMedia",!0),e.prop("rw","raw",!1),e.embedCache=kp,e}return b(o,[{key:"clear",value:function(){return this.messages.length=0,this.update({messages:!0})}},{key:"get",value:function(e){return e<0?this.messages.slice(e)[0]:this.messages[e]}},{key:"push",value:function(e){return[].push.apply(this.messages,this._fill(e)),this.update({messages:!0})}},{key:"render",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(-1!=t){var n=this.get(t);return n&&!n.rendered&&(n.embeds=this._embeds(n),n.rendered=!0,this.update({messages:!0})),this.messages}var r={};return this.messages.map((function(t,n){return t.index=n,t.className||(t.dayChanged=e._dayChanged(t,r),t.className=e._className(t,r),t.embeds=[],t.markdown=t.vars?ir.l.apply(ir,[t.message].concat(l(t.vars))):t.message,t.markdown=e.raw?ir.raw(t.markdown):ir.md(t.markdown)),r=t}))}},{key:"toArray",value:function(){return this.messages}},{key:"update",value:function(e){return e.hasOwnProperty("expandUrlToMedia")&&e.expandUrlToMedia!=this.expandUrlToMedia&&this.messages.forEach((function(e){return delete e.rendered})),e.hasOwnProperty("raw")&&e.raw!=this.raw&&this.messages.forEach((function(e){return delete e.className})),f(n(o.prototype),"update",this).call(this,e)}},{key:"unshift",value:function(e){return[].unshift.apply(this.messages,this._fill(e)),this.update({messages:!0})}},{key:"_className",value:function(e,t){var n=["message"];e.type&&n.push("is-type-"+e.type),e.highlight&&n.push("is-highlighted");var r=e.from==t.from&&e.conversation_id==t.conversation_id&&e.connection_id==t.connection_id;return n.push(!e.dayChanged&&r?"has-same-from":"has-not-same-from"),n.join(" ")}},{key:"_dayChanged",value:function(e,t){return!(!t.ts||e.ts.getDate()==t.ts.getDate())}},{key:"_embeds",value:function(e){var t=this,n=[];return this._msgDetails(e)&&n.push(Promise.resolve({className:"le-details",details:!0,nodes:[Dp.exports.jsonhtmlify(e.details).lastChild]})),this.expandUrlToMedia&&"notice"!=e.type?((e.message.match(/https?:\/\/(\S+)/g)||[]).forEach((function(r){r=r.replace(/(\W)?$/,""),t.embedCache[r]||(t.embedCache[r]=t._loadEmbed(e,r)),n.push(t.embedCache[r])})),n.map((function(t){return t.catch((function(t){return console.error("[Messages:embed]",e,t)}))}))):n}},{key:"_fill",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];if(!n.from){var r=[!0,"Convos"];n.internal=r[0],n.from=r[1]}n.type||(n.type="notice"),n.color="Convos"==n.from?"inherit":on(n.from.toLowerCase()),n.ts=new vr(n.ts),n.id=++Ap}return e}},{key:"_loadEmbed",value:(t=gn(vn.mark((function e(t,n){var r,o,i;return vn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zn("/api","embed",{url:n}).perform();case 2:if(r=e.sent,(o=r.res.body).nodes=[],o.provider=(o.provider_name||"").toLowerCase(),o.html){e.next=8;break}return e.abrupt("return",o);case 8:if(i=document.createRange().createContextualFragment(o.html).firstChild){e.next=11;break}return e.abrupt("return",o);case 11:return Xt(i=this._renderVideoChat(t,o,i)||this._renderPaste(t,o,i)||i,"img",["error",function(e){return e.target.style.display="none"}]),Xt(i,".le-goto-link",(function(e){return 1==e.parentNode.children.length&&e.parentNode.remove()})),delete o.html,o.className=i.className,o.nodes="iframe"==i.tagName.toLowerCase()?[i]:[].slice.call(i.childNodes,0),e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"_msgDetails",value:function(e){if(e.hasOwnProperty("details"))return e.details;if("error"!=e.type&&"notice"!=e.type)return e.details=null;var t=Ep({},e.sent||e);return["bubbles","className","command","connection_id","dispatchTo","color","dayChanged","embeds","event","fresh","highlight","id","index","internal","markdown","method","rendered","silent","stopPropagation","ts"].forEach((function(e){return delete t[e]})),"from:message:type"==Object.keys(t).sort().join(":")?e.details=null:e.details=t}},{key:"_renderPaste",value:function(e,t,n){var r=n.querySelector("pre");return r&&[n,qf.lineNumbersBlock(r)][0]}},{key:"_renderVideoChat",value:function(e,t,n){var r=new URL(t.url).pathname.replace(/\/+$/,"").split("/");if(r.length&&(n.classList.contains("le-video-chat")||r.includes("video"))){var o=decodeURIComponent(r.slice(-1)[0]).replace(/\s-\s[\w-]+$/,"").replace(/[_.-]+/g," ").replace(/([a-z ])([A-Z])/g,(function(e,t,n){return t+" "+n.toUpperCase()})).replace(/((?:^|[ ])\w)/g,(function(e){return e.toUpperCase()})),i=ir.l('Do you want to join the %1 video chat with "%2"?',t.provider_name,o);return(n=document.createElement("div")).className="le-card le-rich le-join-request le-provider-"+t.provider,n.innerHTML='<a class="le-thumbnail" href="'+t.url+'" target="convos_video"><i class="fas fa-video"></i></a><h3>'+i+'</h3><p class="le-description"><a href="'+t.url+'" target="convos_video">'+ir.l("Yes, I want to join.")+"</a></p>",e.fresh&&this.emit("notify",Ep(Ep({},e),{},{message:i})),n}}}]),o}(fn);function Fp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return g(this,r)}}var Sp=function(e,t){return e.name.localeCompare(t.name)},Op=function(e){p(r,e);var t=Fp(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return $(this,r),(e=t.call(this,n)).sorter=o.sorter||Sp,e._sort(),e}return b(r,[{key:"filter",value:function(e){return Array.from(this.values()).filter(e)}},{key:"set",value:function(e,t){f(n(r.prototype),"set",this).call(this,e,t),this._sort()}},{key:"toArray",value:function(){return Array.from(this.values())}},{key:"_sort",value:function(){var e=this,t=Array.from(this.entries()),o=this.sorter;return this.clear(),t.sort((function(e,t){return o(e[1],t[1])})).forEach((function(t){var o=xt(t,2),i=o[0],a=o[1];return f(n(r.prototype),"set",e).call(e,i,a)})),t}}]),r}(a(Map));function Bp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return g(this,r)}}var Np=function(e){p(n,e);var t=Bp(n);function n(){var e;return $(this,n),(e=t.call(this)).prop("ro","length",(function(){return e._map.size})),e.prop("ro","_map",new Op([],{sorter:function(e,t){return t.modes.operator||!1-e.modes.operator||t.modes.voice||!1-e.modes.voice||e.nick.localeCompare(t.nick)}})),e}return b(n,[{key:"clear",value:function(){var e=this.me();return this._map.clear(),this.add(e),this}},{key:"delete",value:function(e){return this._map.delete(this._id(e)),this.update({})}},{key:"get",value:function(e){return this._map.get(this._id(e))}},{key:"has",value:function(e){return this._map.has(this._id(e))}},{key:"me",value:function(){return Array.from(this._map.values()).filter((function(e){return e.me}))[0]||this._defaultParticipant()}},{key:"nicks",value:function(){return Array.from(this._map.values()).map((function(e){return e.nick}))}},{key:"rename",value:function(e,t){var n=this.get(e)||{};return delete n.id,n.nick=t,this.delete(e),this.add(n)}},{key:"add",value:function(e){var t=this;if(Array.isArray(e))return e.forEach((function(e){return t.add(e)})),this;e.id=this._id(e.nick),e.color=on(e.id),Zt.string(e.mode)&&(e.modes=Ht(xi,e.mode));var n=this._map.get(e.id);return n&&Object.keys(n).forEach((function(t){return e[t]||(e[t]=n[t])})),e.modes||(e.modes={}),e.nick||(e.nick=e.name),this._map.set(e.id,e),this.update({length:!0})}},{key:"toArray",value:function(){return this._map.toArray()}},{key:"_defaultParticipant",value:function(){return{color:"#000000",id:"",modes:{},nick:""}}},{key:"_id",value:function(e){return e.toLowerCase()}}]),n}(fn);function jp(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Tp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tp(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Tp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rp(Object(n),!0).forEach((function(t){_t(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return g(this,r)}}var Pp=jt("socket"),Ip=function e(t){return e.singletons[t]||(e.singletons[t]=new Hp)};Ip.singletons={};var Up=[];Up[WebSocket.CONNECTING]="connecting",Up[WebSocket.OPEN]="open",Up[WebSocket.CLOSING]="closing",Up[WebSocket.CLOSED]="closed";var Hp=function(e){p(n,e);var t=Mp(n);function n(){var e;return $(this,n),(e=t.call(this)).prop("ro","readyState",(function(){return e.ws.readyState})),e.prop("ro","readyStateHuman",(function(){return Up[e.ws.readyState]})),e.prop("ro","waiting",new Map),e.prop("rw","closed",0),e.prop("rw","error",""),e.prop("rw","keepaliveInterval",1e4),e.prop("rw","url",""),e.id=0,e.queue=[],e.keepClosed=!0,e._resetWebSocket(),e}return b(n,[{key:"close",value:function(e,t){if("number"!=typeof e){var n=[1e3,e];e=n[0],t=n[1]}return this.ws.close&&this.ws.close(e,t),this.keepClosed=!0,this._keepAliveStop(),this._reconnectStop(),this._resetWebSocket(),this}},{key:"deflateMessage",value:function(e){return JSON.stringify(e)}},{key:"deleteWaitingMessage",value:function(e){this.waiting.delete(e),this.update({waiting:!0})}},{key:"getWaitingMessages",value:function(e){var t=this;return 0==arguments.length?Array.from(this.waiting.values()):e.map((function(e){return t.waiting.get(e)}))}},{key:"inflateMessage",value:function(e){return JSON.parse(e)}},{key:"is",value:function(e){return this.ws.readyState==WebSocket[e.toUpperCase()]}},{key:"open",value:function(){var e=this;if(this.ws.close)return this;try{if(!this.url)throw"Can't open WebSocket connection without URL.";this.ws=new WebSocket(this.url),this.ws.onclose=function(t){return e._onClose(t)},this.ws.onerror=function(t){return e._onError(t)},this.ws.onmessage=function(t){return e._onMessage(t)},this.ws.onopen=function(t){return e._onOpen(t)},this.keepClosed=!1,this._keepAliveStart(),this._reconnectStop(),this.update({error:"",readyState:!0})}catch(e){this._onError(e.message?e:{message:String(e)})}return this}},{key:"reconnectIn",value:function(e){return 1008!==e.code&&1011!==e.code&&(this.closed<=1?1e3:this.closed>5?1e4:2*this.closed*1e3)}},{key:"send",value:function(e,t){var n=e.id||String(++this.id);return this.queue.push(Lp(Lp({},e),{},{id:n})),this.open(),this._dequeue(),t&&this.on("message_"+n,t),this}},{key:"_dequeue",value:function(){var e=this.queue;for(e.length&&this.update({waiting:!0});e.length;){if(this.ws.readyState!=WebSocket.OPEN)return;var t=e.shift();Pp.trace("<<<",t),this.ws.send(this.deflateMessage(t)),t.waitingForResponse=!0,t.ts||(t.ts=new vr),this.waiting.set(t.id,t)}}},{key:"_keepAliveStart",value:function(){var e=this;this._keepAliveStop(),this.keepaliveTid=setInterval((function(){return e.ws.readyState==WebSocket.OPEN&&e.ws.send("{}")}),this.keepaliveInterval)}},{key:"_keepAliveStop",value:function(){this.keepaliveTid&&clearTimeout(this.keepaliveTid),delete this.keepaliveTid}},{key:"_onClose",value:function(e){Pp.debug("close",e);var t,n=jp(this.waiting);try{for(n.s();!(t=n.n()).done;){var r=xt(t.value,2),o=r[0],i=r[1];Object.keys(i).length<=1&&this.waiting.delete(o),i.waitingForResponse=!1}}catch(e){n.e(e)}finally{n.f()}this._keepAliveStop(),this._resetWebSocket(),this.update({closed:this.closed+1,readyState:!0,waiting:!0}),this._reconnectStart(this.reconnectIn(e))}},{key:"_onError",value:function(e){var t=String(e.message||e);t&&0!=t.indexOf("[")||(t="Could not connect."),Pp.error("error",t,e),this.update({error:t})}},{key:"_onMessage",value:function(e){var t=this.inflateMessage(e.data);if(Pp.trace(">>>",t),t.bubbles=!0,t.stopPropagation=function(){t.bubbles=!1},t.id&&(this.emit("message_"+t.id,t),this.waiting.delete(t.id)),t.bubbles&&this.emit("message",t),this.update({waiting:!0}),t.errors&&!t.id){var n,r=jp(this.waiting.keys());try{for(r.s();!(n=r.n()).done;){var o=n.value;this.emit("message_"+o,t)}}catch(e){r.e(e)}finally{r.f()}this.waiting.clear()}}},{key:"_onOpen",value:function(e){Pp.info("open",e),this.update({closed:0,error:"",readyState:!0}),this._dequeue()}},{key:"_reconnectStart",value:function(e){var t=this;return this._reconnectStop(),Pp.info("reconnect in",e),!0===e?this.open():"number"!=typeof e?this.keepClosed=!0:void(this.reconnectTid=setTimeout((function(){return t.open()}),e))}},{key:"_reconnectStop",value:function(){this.reconnectTid&&clearTimeout(this.reconnectTid),delete this.reconnectTid}},{key:"_resetWebSocket",value:function(){this.ws={readyState:WebSocket.CLOSED}}}]),n}(fn);function zp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zp(Object(n),!0).forEach((function(t){_t(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return g(this,r)}}var Kp=new RegExp("^[#&]"),Gp=function(e){p(i,e);var t,r,o=Wp(i);function i(e){var t;$(this,i),t=o.call(this);var n=[e.connection_id,e.conversation_id,""].filter(Zt.defined).join(":");return t.prop("persist","userInput","",{key:n+"userInput"}),t.prop("ro","color",on(e.conversation_id||e.connection_id||"")),t.prop("ro","connection_id",e.connection_id||""),t.prop("ro","messages",new xp({})),t.prop("ro","participants",new Np),t.prop("ro","path",Hn.conversationPath(e)),t.prop("rw","historyStartAt",null),t.prop("rw","historyStopAt",null),t.prop("rw","info",e.info||{}),t.prop("rw","modes",{}),t.prop("rw","name",e.name||e.conversation_id||e.connection_id||"ERR"),t.prop("rw","notifications",e.notifications||0),t.prop("rw","status","pending"),t.prop("rw","topic",e.topic||""),t.prop("rw","unread",e.unread||0),e.hasOwnProperty("conversation_id")?(t.prop("ro","conversation_id",e.conversation_id),t.prop("ro","title",(function(){return[t.name,t.connection_id.replace(/^\w+-/,"")].join(" - ")})),t.prop("rw","frozen",e.frozen||"")):(t.prop("ro","frozen",(function(){return t._calculateFrozen()})),t.prop("ro","title",(function(){return t.name}))),e.conversation_id&&t.prop("persist","wantNotifications",t.is("private"),{key:e.conversation_id+":wantNotifications"}),t.socket=e.socket||Ip("/events"),t.messages.on("notify",(function(e){return t.notify(e)})),t._addOperations(),t}return b(i,[{key:"addMessages",value:function(e,t){if(!Array.isArray(e)){if(this._maybeIncreaseUnread(e),this._maybeNotify(e),!this.historyStopAt&&-1!=["action","private"].indexOf(e.type))return;e.fresh=!0,e=[e]}return this.messages[t||"push"](e),this}},{key:"is",value:function(e){return"connection"==e?!this.conversation_id:"conversation"==e?this.conversation_id&&!this.is("notifications"):"frozen"==e?this.frozen&&!0:"locked"==e?"Invalid password."==this.frozen:"not_found"==e?"Not found."==this.frozen:"notifications"!=e&&("pending"==e?this.frozen.match(/pending invitation/i):"private"==e?this.conversation_id&&!Kp.test(this.conversation_id)||!1:"search"!=e&&("unread"==e?this.unread&&!0:this.status==e))}},{key:"load",value:(r=gn(vn.mark((function e(){var t,n,r,o,i=arguments;return vn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:{},!this._skipLoad(t)){e.next=3;break}return e.abrupt("return",this);case 3:return this.update({status:"loading"}),t.limit||(t.limit=40),n=qp(qp({},t),{},{connection_id:this.connection_id,conversation_id:this.conversation_id}),e.next=8,this.messagesOp.perform(n);case 8:return this.update({status:this.messagesOp.status}),(r=this.messagesOp.res.body).messages||(r.messages=[]),o=[],(t.around||!t.after&&!t.before)&&(o.push.apply(o,this.messages.toArray().filter((function(e){return e.internal}))),this.messages.clear()),this.addMessages(r.messages,t.before?"unshift":"push"),this.addMessages(o,"push"),this._setEndOfStream(t,r),e.abrupt("return",this);case 17:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"notify",value:function(e){if(!la.appHasFocus){var t=e.from==this.name?e.from:ir.l("%1 in %2",e.from,this.name);this.lastNotification=la.show(e.message,{path:this.path,title:t})}}},{key:"send",value:function(e,t){return Zt.string(e)&&(e={message:e}),this.socket.send(qp({method:"send",connection_id:this.connection_id,conversation_id:this.conversation_id||""},e),t)}},{key:"markAsRead",value:(t=gn(vn.mark((function e(){return vn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.markAsReadOp){e.next=2;break}return e.abrupt("return");case 2:return this.update({notifications:0}),e.next=5,this.markAsReadOp.perform({connection_id:this.connection_id,conversation_id:this.conversation_id});case 5:return e.abrupt("return",this);case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"update",value:function(e){return this._loadInformation(),f(n(i.prototype),"update",this).call(this,e),(e.hasOwnProperty("notifications")||e.hasOwnProperty("unread"))&&this.emit("unread",e),this}},{key:"wsEventMode",value:function(e){var t=["banlist","exceptlist","invitelist","quietlist"].filter((function(t){return e[t]}))[0];if(t){var n=e[t].length,r=1==n?"entry":"entries";this.addMessages(qp(qp({},e),{},{message:"%1 has %2 "+r+" in %3.",vars:[this.name,n,ir.l(t)]}))}else e.nick?(this.participants.add({nick:e.nick,mode:e.mode}),this.addMessages(qp(qp({},e),{},{message:"%1 got mode %2 from %3.",vars:[e.nick,e.mode,e.from]}))):e.mode_changed?(this.addMessages(qp(qp({},e),{},{message:"%1 received mode %2.",vars:[this.name,e.mode]})),this.update({modes:Object.assign({},this.modes,Ht(ki,e.mode))})):(this.addMessages(qp(qp({},e),{},{message:"%1 got mode %2.",vars:[this.name,e.mode]})),this.update({modes:Object.assign({},this.modes,Ht(ki,e.mode))}))}},{key:"wsEventNickChange",value:function(e){if(this.participants.has(e.old_nick)&&e.old_nick!=e.new_nick){this.participants.rename(e.old_nick,e.new_nick);var t="me"==e.type?"You (%1) changed nick to %2.":"%1 changed nick to %2.";this.addMessages({message:t,vars:[e.old_nick,e.new_nick]})}}},{key:"wsEventPart",value:function(e){var t=this.participants.get(e.nick);t&&!t.me&&(this.participants.delete(e.nick),this.update({participants:!0}),e.silent||this.addMessages(this._partMessage(e)))}},{key:"wsEventSentClear",value:function(e){e.errors||(this.messages.clear(),this.addMessages({message:"History was cleared for %1.",vars:[this.name]}))}},{key:"wsEventSentNames",value:function(e){this.participants.add(e.participants);var t=qp(qp({},e),{},{message:"Participants (%1): %2",vars:[]}),n=this.participants.nicks();n.length>1&&(t.message+=" and %3.",t.vars[2]=n.pop()),t.vars[0]=n.length,t.vars[1]=n.join(", "),this.addMessages(t)}},{key:"wsEventSentTopic",value:function(e){var t=e.topic?"Topic for %1 is: %2":"No topic is set for %1.";this.addMessages({message:t,vars:[this.name,e.topic]}),this.update({topic:e.topic})}},{key:"_addOperations",value:function(){this.prop("ro","messagesOp",Zn("/api","conversationMessages")),this.prop("ro","markAsReadOp",Zn("/api","markConversationAsRead"))}},{key:"_calculateFrozen",value:function(){return""}},{key:"_loadInformation",value:function(){var e=this;if(!this.participantsLoaded&&this.conversation_id&&this.messagesOp&&!this.is("frozen")&&this.messagesOp.is("success"))if(this.participantsLoaded=!0,this.is("private")){if(this.info.ts&&this.info.ts>(new vr).toEpoch()-300)return;this.send("/whois "+this.conversation_id,(function(t){t.stopPropagation(),e.update({frozen:t.errors&&t.errors.length?t.errors[0].message:""})}))}else this.send("/names "+this.conversation_id,(function(t){t.stopPropagation(),e.participants.clear(),t.participants&&e.participants.add(t.participants)}))}},{key:"_maybeIncreaseUnread",value:function(e){return!e.from||e.yourself||-1==["action","error","private"].indexOf(e.type)?this:void this.update({unread:this.unread+1})}},{key:"_maybeNotify",value:function(e){e.from&&!e.yourself&&-1!=["action","error","private"].indexOf(e.type)&&(e.highlight||this.wantNotifications)&&this.notify(e)}},{key:"_noop",value:function(){}},{key:"_partMessage",value:function(e){var t={message:"%1 parted.",vars:[e.nick]};return e.kicker?(t.message="%1 was kicked by %2"+(e.message?": %3":""),t.vars.push(e.kicker),t.vars.push(e.message)):e.message&&(t.message+=" Reason: %2",t.vars.push(e.message)),t}},{key:"_setEndOfStream",value:function(e,t){if(!e.before&&!t.after){var n=t.messages.slice(-1)[0];this.update({historyStopAt:new vr(n&&n.ts)})}if(!e.after&&!t.before){var r=t.messages[0];this.update({historyStartAt:new vr(r&&r.ts)})}t.after&&this.update({historyStopAt:null}),t.before&&this.update({historyStartAt:null}),t.messages&&t.messages.length<=1&&this.update({historyStartAt:new vr,historyStopAt:new vr})}},{key:"_skipLoad",value:function(e){return!(this.messagesOp&&!this.is("loading"))||(this.messages.length?e.around?!!this.messages.toArray().find((function(t){return t.ts.toISOString()==e.around})):!(!e.before||!this.historyStartAt)||!(!e.after||!this.historyStopAt):this.is("success"))}}]),i}(fn);function Yp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yp(Object(n),!0).forEach((function(t){_t(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return g(this,r)}}var Jp=function(e,t){return e.is("private")-t.is("private")||e.name.localeCompare(t.name)},Qp=function(e){p(r,e);var t=Vp(r);function r(e){var n;$(this,r),(n=t.call(this,e)).prop("rw","certificate",{}),n.prop("ro","conversations",new Op([],{sorter:Jp})),n.prop("rw","on_connect_commands",e.on_connect_commands||[]),n.prop("rw","state",e.state||"disconnected"),n.prop("rw","wanted_state",e.wanted_state||"connected"),n.prop("rw","url",Zt.string(e.url)?new eo(e.url):e.url||new eo("irc://localhost"));var o=n.url.searchParams.get("nick")||"guest";return n.prop("rw","nick",o),n.prop("rw","real_host",n.url.hostname),n.prop("rw","server_op",!1),n.participants.add((e.service_accounts||[]).map((function(e){return{nick:e}})).concat({nick:o})),e.info&&n.wsEventInfo(e.info),n}return b(r,[{key:"ensureConversation",value:function(e){var t=this,n=this.conversations.get(e.conversation_id);return n?n.update(e):((n=new Gp(Zp(Zp({},e),{},{connection_id:this.connection_id}))).on("message",(function(e){return t.emit("message",e)})),n.on("update",(function(){return t.update({conversations:!0})})),n.on("unread",(function(){return t.emit("unread")})),this._addDefaultParticipants(n),this.conversations.set(n.conversation_id,n),this.update({conversations:!0}),this.emit("conversationadd",n),n)}},{key:"findConversation",value:function(e){return this.conversations.get(e.conversation_id)||null}},{key:"is",value:function(e){return this.state==e||f(n(r.prototype),"is",this).call(this,e)}},{key:"removeConversation",value:function(e){var t=this.findConversation(e)||e;return this.conversations.delete(t.conversation_id),this.emit("conversationremove",t),this.update({conversations:!0})}},{key:"send",value:function(e){Zt.string(e)&&(e={message:e});var t=new RegExp("^"+this.participants.toArray().map((function(e){return en(e.id)})).join("|")+":","i");return 0==e.message.indexOf("/")||e.message.match(t)||(e.message="/quote "+e.message),f(n(r.prototype),"send",this).call(this,e)}},{key:"update",value:function(e){return e.url&&Zt.string(e.url)&&(e.url=new eo(e.url)),f(n(r.prototype),"update",this).call(this,e)}},{key:"wsEventSentAway",value:function(e){(this.findConversation(e)||this).addMessages({message:e.reason,sent:e,type:"notice"})}},{key:"wsEventConnection",value:function(e){this.update({state:e.state})}},{key:"wsEventFrozen",value:function(e){var t=this.findConversation(e),n=t&&t.frozen,r=this.ensureConversation(e);r.participants.add({nick:this.nick,me:!0}),n&&!e.frozen&&t.addMessages({message:"Connected.",vars:[]}),e.frozen&&r.is("pending")&&la.show(e.frozen,{title:e.name})}},{key:"wsEventInfo",value:function(e){e.nick&&this.wsEventNickChange(e),e.server_op&&this.addMessages({message:"You are an IRC operator.",vars:[],highlight:!0}),e.real_host&&this.participants.add({nick:e.real_host}),this.update(e)}},{key:"wsEventMessage",value:function(e){return e.yourself=e.from==this.nick,e.conversation_id?this.ensureConversation(e).addMessages(e):this.addMessages(e)}},{key:"wsEventNickChange",value:function(e){var t={old_nick:e.old_nick||this.nick,new_nick:e.new_nick||e.nick,type:e.type};e.old_nick==this.nick&&(t.me=!0),f(n(r.prototype),"wsEventNickChange",this).call(this,t),this.conversations.forEach((function(e){return e.wsEventNickChange(t)}))}},{key:"wsEventError",value:function(e){var t={message:Kt(e)||e.frozen||"Unknown error from %1.",sent:e,type:"error",vars:e.command||[e.message]},n=(e.message||"").match(/^\/j(oin)? (\S+)/);if(n)return this.ensureConversation(Zp(Zp({},e),{},{conversation_id:n[2]}));var r=e.conversation_id&&e.frozen?this.ensureConversation(e):this.findConversation(e)||this;console.error(r.conversation_id,t),r.addMessages(t)}},{key:"wsEventJoin",value:function(e){var t=this.ensureConversation({connection_id:e.connection_id,conversation_id:e.conversation_id}),n=e.nick||this.nick;n==this.nick||e.silent||t.addMessages({message:"%1 joined.",vars:[n]}),t.participants.add({nick:n})}},{key:"wsEventPart",value:function(e){if(e.nick==this.nick)return this.removeConversation(e);e.conversation_id||this.conversations.forEach((function(t){return t.wsEventPart(e)}))}},{key:"wsEventQuit",value:function(e){this.wsEventPart(e)}},{key:"wsEventSentJoin",value:function(e){this.wsEventJoin(e)}},{key:"wsEventSentList",value:function(e){var t=e.args||"/*/";this.addMessages(e.done?{message:"Found %1 of %2 conversations from %3.",vars:[e.conversations.length,e.n_conversations,t]}:{message:"Found %1 of %2 conversations from %3, but conversations are still loading.",vars:[e.conversations.length,e.n_conversations,t]})}},{key:"wsEventSentMode",value:function(e){var t=this.findConversation(e);return t?t.wsEventMode(e):this.addMessages({message:"%1 received mode %2.",vars:[e.target,e.mode]})}},{key:"wsEventSentQuery",value:function(e){this.ensureConversation(e)}},{key:"wsEventSentWhois",value:function(e){var t,n=yr(e),r=kt(t=n)||s(t)||c(t)||At(),o=r[0],i=r.slice(1);(this.findConversation(e)||this).addMessages({message:o,vars:i,sent:e})}},{key:"wsEventSentNames",value:function(){}},{key:"_addDefaultParticipants",value:function(e){var t=[{nick:this.nick,me:!0}];e.is("private")&&t.push({nick:e.name}),e.participants.add(t)}},{key:"_addOperations",value:function(){this.prop("ro","markAsReadOp",Zn("/api","markConnectionAsRead")),this.prop("ro","messagesOp",Zn("/api","connectionMessages"))}},{key:"_calculateFrozen",value:function(){switch(this.state){case"connected":return"";case"connecting":default:return"Connecting...";case"disconnected":return"Disconnected.";case"disconnecting":return"Disconnecting...";case"unreachable":return"Unreachable."}}}]),r}(Gp);function Xp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return g(this,r)}}var em=function(e){p(r,e);var t,n=Xp(r);function r(e){var t;return $(this,r),(t=n.call(this,e)).prop("ro","op",Zn("/api","listConnectionProfiles")),t.prop("rw","profiles",[]),t.prop("rw","status","pending"),t}return b(r,[{key:"find",value:function(e){return this.search((function(t){return t.id==e}))[0]}},{key:"defaultProfile",value:function(){return{max_bulk_message_size:3,max_message_length:512,url:new eo("irc://0.0.0.0")}}},{key:"is",value:function(e){return this.status==e}},{key:"load",value:(t=gn(vn.mark((function e(){var t,n=this,r=arguments;return vn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:{},!this.is("loading")){e.next=3;break}return e.abrupt("return",this);case 3:if(t.force||!this.profiles.length){e.next=5;break}return e.abrupt("return",this);case 5:return this.update({status:"loading"}),e.next=8,this.op.perform();case 8:return this.update({status:this.op.status}),this.is("success")&&this.update({profiles:this.op.res.body.profiles.map((function(e){return n._expand(e)}))}),e.abrupt("return",this);case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!0};return this.profiles.filter(e)}},{key:"_expand",value:function(e){e.url=new eo(e.url),e.service_accounts=e.service_accounts.join(", "),e.url.toFields(e);var t=this.defaultProfile();return Object.keys(t).forEach((function(n){return e.hasOwnProperty(n)||(e[n]=t[n])})),e}}]),r}(fn);function tm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tm(Object(n),!0).forEach((function(t){_t(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return g(this,r)}}var om=function(e){p(o,e);var t,r=rm(o);function o(e){return $(this,o),r.call(this,nm(nm({},e),{},{connection_id:"",conversation_id:"notifications",name:"Notifications"}))}return b(o,[{key:"addMessages",value:function(e,t){return Array.isArray(e)||(e=[e]),this.messages.push(e),this}},{key:"markAsRead",value:(t=gn(vn.mark((function e(){return vn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(n(o.prototype),"markAsRead",this).call(this);case 2:return this.emit("cleared"),e.abrupt("return",this);case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"is",value:function(e){return"notifications"==e||f(n(o.prototype),"is",this).call(this,e)}},{key:"send",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Promise.resolve(e)}},{key:"_addOperations",value:function(){this.prop("ro","markAsReadOp",Zn("/api","markNotificationsAsRead")),this.prop("ro","messagesOp",Zn("/api","notificationMessages"))}},{key:"_skipLoad",value:function(){return!1}}]),o}(Gp);function im(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function am(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?im(Object(n),!0).forEach((function(t){_t(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):im(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function um(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return g(this,r)}}var sm=function(e){p(o,e);var t,r=um(o);function o(e){var t;return $(this,o),(t=r.call(this,am(am({},e),{},{connection_id:"",conversation_id:"search",name:"Search"}))).prop("rw","query",""),t.update({status:"success"}),t}return b(o,[{key:"is",value:function(e){return"conversation"!=e&&("search"==e||f(n(o.prototype),"is",this).call(this,e))}},{key:"load",value:(t=gn(vn.mark((function e(){var t,n,r,o=arguments;return vn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:{},!this.is("loading")){e.next=3;break}return e.abrupt("return",this);case 3:if((n=am({},t)).match=t.match||t.message,(n.match||"").match(/\S/)){e.next=7;break}return e.abrupt("return",this.messages.clear().push([{message:'Search query "%1" does not contain anything to search for.',vars:[t.message]}]));case 7:return this.update({query:n.match,status:"loading"}),this.messages.clear(),e.next=11,this.messagesOp.perform(n);case 11:return r=this.messagesOp.res.body,this.messages[n.before?"unshift":"push"](r.messages||[]),e.abrupt("return",this.update({status:this.messagesOp.status}));case 14:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"send",value:function(e){return Zt.string(e)&&(e={message:e}),this.emit("send",e),Promise.resolve(e)}},{key:"_addOperations",value:function(){this.prop("ro","messagesOp",Zn("/api","searchMessages")),this.prop("ro","markAsReadOp",null)}},{key:"_loadInformation",value:function(){}}]),o}(Gp);function cm(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return lm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lm(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function lm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dm(Object(n),!0).forEach((function(t){_t(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return g(this,r)}}var mm=function(e){p(o,e);var t,r=pm(o);function o(e){var t;return $(this,o),(t=r.call(this)).prop("ro","connections",new Op),t.prop("ro","connectionProfiles",new em),t.prop("ro","notifications",new om({})),t.prop("ro","search",new sm({})),t.prop("ro","roles",new Set),t.prop("persist","expandUrlToMedia",!0),t.prop("persist","ignoreStatuses",!1),t.prop("persist","lastUrl",""),t.prop("rw","activeConversation",t.notifications),t.prop("rw","email",""),t.prop("rw","forced_connection",!1),t.prop("rw","default_connection","irc://irc.libera.chat:6697/%23convos"),t.prop("rw","highlightKeywords",[]),t.prop("rw","id",""),t.prop("rw","status","pending"),t.prop("rw","unreadIncludePrivateMessages",!1),t.prop("rw","videoService",e.videoService||""),t.socket=e.socket||Ip("/events"),t.socket.on("message",(function(e){return t._dispatchMessage(e)})),t.socket.on("update",(function(e){return t._onConnectionChange(e)})),t.notifications.on("cleared",(function(){return t._calculateUnread("clear")})),t._calculateUnreadDebounced=Wt(t._calculateUnread,25),t}return b(o,[{key:"conversations",value:function(e){var t=[];return this.connections.toArray().forEach((function(n){n.conversations.toArray().forEach((function(n){e&&!e(n)||t.push(n)}))})),t}},{key:"ensureConversation",value:function(e,t){var n=this;if((e=fm(fm({},e),{},{videoService:this.videoService})).conversation_id){var r=this.ensureConversation({connection_id:e.connection_id},!0);return this._maybeUpgradeActiveConversation(r.ensureConversation(e))}var o=this.findConversation(e);return o?o.update(e):((o=new Qp(fm({},e))).on("conversationadd",(function(e){return n._maybeUpgradeActiveConversation(e)})),o.on("conversationremove",(function(e){return e==n.activeConversation&&n.setActiveConversation(e)})),o.on("update",(function(){return n.update({connections:!0})})),o.on("unread",(function(){return n._calculateUnreadDebounced()})),this.connections.set(o.connection_id,o),this.update({connections:!0}),t?o:this._maybeUpgradeActiveConversation(o))}},{key:"findConversation",value:function(e){var t=this.connections.get(e.connection_id);return e.conversation_id?t&&t.findConversation(e)||null:t}},{key:"is",value:function(e){var t=this;return Array.isArray(e)?!!e.filter((function(e){return t.is(e)})).length:!!this.roles.has(e)||this.status==e}},{key:"load",value:(t=gn(vn.mark((function e(){var t,n,r,o=this;return vn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.is("loading")){e.next=2;break}return e.abrupt("return",this);case 2:return this.roles.clear(),this.update({status:"loading"}),t=new Promise((function(e){return o.socket.send({method:"load",object:"user",params:{connections:!0,conversations:!0}},e)})),e.next=7,t;case 7:if(!(n=e.sent).errors){e.next=10;break}return e.abrupt("return",this.update({email:"",roles:!0,status:n.errors?"error":"success"}));case 10:return r=n.user||{},this.connections.clear(),(r.connections||[]).forEach((function(e){return o.ensureConversation(fm(fm({},e),{},{status:"pending"}))})),(r.conversations||[]).forEach((function(e){return o.ensureConversation(fm(fm({},e),{},{status:"pending"}))})),(r.roles||[]).forEach((function(e){return o.roles.add(e)})),this.notifications.update({unread:r.unread||0}),e.abrupt("return",this.update({email:r.email||"",default_connection:r.default_connection||"",forced_connection:r.forced_connection||!1,highlightKeywords:r.highlight_keywords||[],roles:!0,status:n.errors?"error":"success",id:r.uid||"",videoService:r.video_service||""}));case 17:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"removeConversation",value:function(e){var t=this.findConversation({connection_id:e.connection_id});if(e.conversation_id)return t&&t.removeConversation(e);this.connections.delete(e.connection_id),t==this.activeConversation&&this.setActiveConversation(t),this.update({connections:!0})}},{key:"setActiveConversation",value:function(e){var t=!e.connection_id&&!e.conversation_id&&this.notifications;if(t)return this.update({activeConversation:t});if(t=this.findConversation(e))return this.update({activeConversation:t});var n=fm(fm({},e),{},{connection_id:e.connection_id||"",frozen:"Not found."});return["conversation_id","name"].forEach((function(t){return e.hasOwnProperty(t)&&(n[t]=e[t])})),this.update({activeConversation:n.conversation_id?new Gp(n):new Qp(n)})}},{key:"update",value:function(e){return e.videoService&&this.connections.forEach((function(t){return t.update({videoService:e.videoService})})),f(n(o.prototype),"update",this).call(this,e),e.hasOwnProperty("unreadIncludePrivateMessages")&&this._calculateUnreadDebounced(),this}},{key:"_calculateUnread",value:function(e){var t,n=0,r=0,o=cm(this.connections.toArray());try{for(o.s();!(t=o.n()).done;){var i,a=cm(t.value.conversations.toArray());try{for(a.s();!(i=a.n()).done;){var u=i.value;e&&u.update({notifications:0}),n+=u.is("private")?this.unreadIncludePrivateMessages?u.unread:0:u.notifications,r+=u.is("private")?0:u.notifications}}catch(e){a.e(e)}finally{a.f()}}}catch(e){o.e(e)}finally{o.f()}e||(this.notifications.update({notifications:n,unread:r}),this.update({notifications:!0}))}},{key:"_dispatchMessage",value:function(e){e.dispatchTo=("wsEvent_"+this._getEventNameFromMessage(e)).replace(/_(\w)/g,(function(e,t){return t.toUpperCase()})),e.silent=this.ignoreStatuses,this.emit(e.dispatchTo,e);var t=this.findConversation({connection_id:e.connection_id});if(t&&(t[e.dispatchTo]&&t[e.dispatchTo](e),e.bubbles)){var n=t.findConversation(e);n&&n[e.dispatchTo]&&n[e.dispatchTo](e),e.highlight&&!n.is("private")&&(this.notifications.addMessages(e),n==this.activeConversation&&la.appHasFocus?n.markAsRead():n.update({notifications:n.notifications+1}))}}},{key:"_getEventNameFromMessage",value:function(e){return e.errors?"error":"state"==e.event?e.type:"sent"==e.event&&e.message.match(/\/\S+/)?(e.command=e.message.split(/\s+/).filter((function(e){return e.length})),e.command[0]=e.command[0].substring(1),"sent_"+e.command[0].toLowerCase()):e.event}},{key:"_maybeUpgradeActiveConversation",value:function(e){var t=this.activeConversation;return e.conversation_id?(e.connection_id&&e.connection_id!=t.connection_id||e.conversation_id&&e.conversation_id!=t.conversation_id||this.update({activeConversation:e}),e):e}},{key:"_onConnectionChange",value:function(e){if(e.is("open")&&this.is("pending"))return this.load();e.is("closed")&&(this.connections.forEach((function(e){return e.update({state:"unreachable"})})),this.is(["error","loading"])||this.update({status:"pending"}))}}]),o}(fn);const{window:hm}=Ze;function gm(e){let t,n,r;function o(t){e[27](t)}let i={};return void 0!==e[1]&&(i.title=e[1]),t=new uc({props:i}),Ee.push((()=>Ve(t,"title",o))),{c(){Je(t.$$.fragment)},m(e,n){Qe(t,e,n),r=!0},p(e,r){const o={};!n&&2&r[0]&&(n=!0,o.title=e[1],Be((()=>n=!1))),t.$set(o)},i(e){r||(ze(t.$$.fragment,e),r=!0)},o(e){qe(t.$$.fragment,e),r=!1},d(e){Xe(t,e)}}}function $m(e){let t,n,r,o,i,a,u,s,c,l,d=("nav"==e[5]||e[2].nColumns>1)&&bm(e);const f=[Nm,Bm,Om,Sm,Fm,xm,Am,km,Cm,Em,_m,wm,Dm,ym],p=[];function m(e,t){return(null==n||16&t[0])&&(n=!!e[4].path.match(/\/chat\/./)),n?0:((null==r||16&t[0])&&(r=!(0!=e[4].path.indexOf("/chat"))),r?1:"/help"==e[4].path?2:"/search"==e[4].path?3:"/settings"==e[4].path?4:"/settings/account"==e[4].path?5:"/settings/connections"==e[4].path?6:"/settings/files"==e[4].path?7:((null==o||16&t[0])&&(o=!(0!=e[4].path.indexOf("/settings/connection/"))),o?8:((null==i||16&t[0])&&(i=!(0!=e[4].path.indexOf("/settings/connection-profile/"))),i?9:"/settings/conversation"==e[4].path?10:"/settings/users"==e[4].path?11:"/login"==e[4].path||"/register"==e[4].path?12:13)))}a=m(e,[-1,-1]),u=p[a]=f[a](e);let h=e[5]&&1==e[2].nColumns&&jm(e);return{c(){d&&d.c(),t=J(),u.c(),s=J(),h&&h.c(),c=Q()},m(e,n){d&&d.m(e,n),K(e,t,n),p[a].m(e,n),K(e,s,n),h&&h.m(e,n),K(e,c,n),l=!0},p(e,n){"nav"==e[5]||e[2].nColumns>1?d?(d.p(e,n),36&n[0]&&ze(d,1)):(d=bm(e),d.c(),ze(d,1),d.m(t.parentNode,t)):d&&(Ue(),qe(d,1,1,(()=>{d=null})),He());let r=a;a=m(e,n),a===r?p[a].p(e,n):(Ue(),qe(p[r],1,1,(()=>{p[r]=null})),He(),u=p[a],u?u.p(e,n):(u=p[a]=f[a](e),u.c()),ze(u,1),u.m(s.parentNode,s)),e[5]&&1==e[2].nColumns?h?(h.p(e,n),36&n[0]&&ze(h,1)):(h=jm(e),h.c(),ze(h,1),h.m(c.parentNode,c)):h&&(Ue(),qe(h,1,1,(()=>{h=null})),He())},i(e){l||(ze(d),ze(u),ze(h),l=!0)},o(e){qe(d),qe(u),qe(h),l=!1},d(e){d&&d.d(e),e&&G(t),p[a].d(e),e&&G(s),h&&h.d(e),e&&G(c)}}}function vm(e){let t,n;return t=new As({}),{c(){Je(t.$$.fragment)},m(e,r){Qe(t,e,r),n=!0},p:y,i(e){n||(ze(t.$$.fragment,e),n=!0)},o(e){qe(t.$$.fragment,e),n=!1},d(e){Xe(t,e)}}}function bm(e){let t,n;return t=new Fd({props:{transition:{duration:e[2].nColumns>1?0:250,x:e[0]}}}),{c(){Je(t.$$.fragment)},m(e,r){Qe(t,e,r),n=!0},p(e,n){const r={};5&n[0]&&(r.transition={duration:e[2].nColumns>1?0:250,x:e[0]}),t.$set(r)},i(e){n||(ze(t.$$.fragment,e),n=!0)},o(e){qe(t.$$.fragment,e),n=!1},d(e){Xe(t,e)}}}function ym(e){let t,n,r;function o(t){e[25](t)}let i={};return void 0!==e[1]&&(i.title=e[1]),t=new As({props:i}),Ee.push((()=>Ve(t,"title",o))),{c(){Je(t.$$.fragment)},m(e,n){Qe(t,e,n),r=!0},p(e,r){const o={};!n&&2&r[0]&&(n=!0,o.title=e[1],Be((()=>n=!1))),t.$set(o)},i(e){r||(ze(t.$$.fragment,e),r=!0)},o(e){qe(t.$$.fragment,e),r=!1},d(e){Xe(t,e)}}}function Dm(e){let t,n,r;function o(t){e[24](t)}let i={};return void 0!==e[1]&&(i.title=e[1]),t=new uc({props:i}),Ee.push((()=>Ve(t,"title",o))),{c(){Je(t.$$.fragment)},m(e,n){Qe(t,e,n),r=!0},p(e,r){const o={};!n&&2&r[0]&&(n=!0,o.title=e[1],Be((()=>n=!1))),t.$set(o)},i(e){r||(ze(t.$$.fragment,e),r=!0)},o(e){qe(t.$$.fragment,e),r=!1},d(e){Xe(t,e)}}}function wm(e){let t,n,r;function o(t){e[23](t)}let i={};return void 0!==e[1]&&(i.title=e[1]),t=new Ll({props:i}),Ee.push((()=>Ve(t,"title",o))),{c(){Je(t.$$.fragment)},m(e,n){Qe(t,e,n),r=!0},p(e,r){const o={};!n&&2&r[0]&&(n=!0,o.title=e[1],Be((()=>n=!1))),t.$set(o)},i(e){r||(ze(t.$$.fragment,e),r=!0)},o(e){qe(t.$$.fragment,e),r=!1},d(e){Xe(t,e)}}}function _m(e){let t,n,r;function o(t){e[22](t)}let i={};return void 0!==e[1]&&(i.title=e[1]),t=new gs({props:i}),Ee.push((()=>Ve(t,"title",o))),{c(){Je(t.$$.fragment)},m(e,n){Qe(t,e,n),r=!0},p(e,r){const o={};!n&&2&r[0]&&(n=!0,o.title=e[1],Be((()=>n=!1))),t.$set(o)},i(e){r||(ze(t.$$.fragment,e),r=!0)},o(e){qe(t.$$.fragment,e),r=!1},d(e){Xe(t,e)}}}function Em(e){let t,n,r;function o(t){e[21](t)}let i={profile_id:e[4].pathParts[2]};return void 0!==e[1]&&(i.title=e[1]),t=new Ju({props:i}),Ee.push((()=>Ve(t,"title",o))),{c(){Je(t.$$.fragment)},m(e,n){Qe(t,e,n),r=!0},p(e,r){const o={};16&r[0]&&(o.profile_id=e[4].pathParts[2]),!n&&2&r[0]&&(n=!0,o.title=e[1],Be((()=>n=!1))),t.$set(o)},i(e){r||(ze(t.$$.fragment,e),r=!0)},o(e){qe(t.$$.fragment,e),r=!1},d(e){Xe(t,e)}}}function Cm(e){let t,n,r;function o(t){e[20](t)}let i={connection_id:e[4].pathParts[2]};return void 0!==e[1]&&(i.title=e[1]),t=new ns({props:i}),Ee.push((()=>Ve(t,"title",o))),{c(){Je(t.$$.fragment)},m(e,n){Qe(t,e,n),r=!0},p(e,r){const o={};16&r[0]&&(o.connection_id=e[4].pathParts[2]),!n&&2&r[0]&&(n=!0,o.title=e[1],Be((()=>n=!1))),t.$set(o)},i(e){r||(ze(t.$$.fragment,e),r=!0)},o(e){qe(t.$$.fragment,e),r=!1},d(e){Xe(t,e)}}}function km(e){let t,n,r;function o(t){e[19](t)}let i={};return void 0!==e[1]&&(i.title=e[1]),t=new td({props:i}),Ee.push((()=>Ve(t,"title",o))),{c(){Je(t.$$.fragment)},m(e,n){Qe(t,e,n),r=!0},p(e,r){const o={};!n&&2&r[0]&&(n=!0,o.title=e[1],Be((()=>n=!1))),t.$set(o)},i(e){r||(ze(t.$$.fragment,e),r=!0)},o(e){qe(t.$$.fragment,e),r=!1},d(e){Xe(t,e)}}}function Am(e){let t,n,r;function o(t){e[18](t)}let i={};return void 0!==e[1]&&(i.title=e[1]),t=new wu({props:i}),Ee.push((()=>Ve(t,"title",o))),{c(){Je(t.$$.fragment)},m(e,n){Qe(t,e,n),r=!0},p(e,r){const o={};!n&&2&r[0]&&(n=!0,o.title=e[1],Be((()=>n=!1))),t.$set(o)},i(e){r||(ze(t.$$.fragment,e),r=!0)},o(e){qe(t.$$.fragment,e),r=!1},d(e){Xe(t,e)}}}function xm(e){let t,n,r;function o(t){e[17](t)}let i={};return void 0!==e[1]&&(i.title=e[1]),t=new Xc({props:i}),Ee.push((()=>Ve(t,"title",o))),{c(){Je(t.$$.fragment)},m(e,n){Qe(t,e,n),r=!0},p(e,r){const o={};!n&&2&r[0]&&(n=!0,o.title=e[1],Be((()=>n=!1))),t.$set(o)},i(e){r||(ze(t.$$.fragment,e),r=!0)},o(e){qe(t.$$.fragment,e),r=!1},d(e){Xe(t,e)}}}function Fm(e){let t,n,r;function o(t){e[16](t)}let i={};return void 0!==e[1]&&(i.title=e[1]),t=new vl({props:i}),Ee.push((()=>Ve(t,"title",o))),{c(){Je(t.$$.fragment)},m(e,n){Qe(t,e,n),r=!0},p(e,r){const o={};!n&&2&r[0]&&(n=!0,o.title=e[1],Be((()=>n=!1))),t.$set(o)},i(e){r||(ze(t.$$.fragment,e),r=!0)},o(e){qe(t.$$.fragment,e),r=!1},d(e){Xe(t,e)}}}function Sm(e){let t,n,r;function o(t){e[15](t)}let i={};return void 0!==e[1]&&(i.title=e[1]),t=new Nc({props:i}),Ee.push((()=>Ve(t,"title",o))),{c(){Je(t.$$.fragment)},m(e,n){Qe(t,e,n),r=!0},p(e,r){const o={};!n&&2&r[0]&&(n=!0,o.title=e[1],Be((()=>n=!1))),t.$set(o)},i(e){r||(ze(t.$$.fragment,e),r=!0)},o(e){qe(t.$$.fragment,e),r=!1},d(e){Xe(t,e)}}}function Om(e){let t,n,r;function o(t){e[14](t)}let i={};return void 0!==e[1]&&(i.title=e[1]),t=new Rs({props:i}),Ee.push((()=>Ve(t,"title",o))),{c(){Je(t.$$.fragment)},m(e,n){Qe(t,e,n),r=!0},p(e,r){const o={};!n&&2&r[0]&&(n=!0,o.title=e[1],Be((()=>n=!1))),t.$set(o)},i(e){r||(ze(t.$$.fragment,e),r=!0)},o(e){qe(t.$$.fragment,e),r=!1},d(e){Xe(t,e)}}}function Bm(e){let t,n,r;function o(t){e[13](t)}let i={};return void 0!==e[1]&&(i.title=e[1]),t=new bc({props:i}),Ee.push((()=>Ve(t,"title",o))),{c(){Je(t.$$.fragment)},m(e,n){Qe(t,e,n),r=!0},p(e,r){const o={};!n&&2&r[0]&&(n=!0,o.title=e[1],Be((()=>n=!1))),t.$set(o)},i(e){r||(ze(t.$$.fragment,e),r=!0)},o(e){qe(t.$$.fragment,e),r=!1},d(e){Xe(t,e)}}}function Nm(e){let t,n,r;function o(t){e[12](t)}let i={connection_id:e[4].pathParts[1],conversation_id:e[4].pathParts[2]};return void 0!==e[1]&&(i.title=e[1]),t=new nu({props:i}),Ee.push((()=>Ve(t,"title",o))),{c(){Je(t.$$.fragment)},m(e,n){Qe(t,e,n),r=!0},p(e,r){const o={};16&r[0]&&(o.connection_id=e[4].pathParts[1]),16&r[0]&&(o.conversation_id=e[4].pathParts[2]),!n&&2&r[0]&&(n=!0,o.title=e[1],Be((()=>n=!1))),t.$set(o)},i(e){r||(ze(t.$$.fragment,e),r=!0)},o(e){qe(t.$$.fragment,e),r=!1},d(e){Xe(t,e)}}}function jm(e){let t,n,r,o,i;return{c(){t=Z("div"),t.textContent=" ",te(t,"class","overlay")},m(n,a){K(n,t,a),r=!0,o||(i=X(t,"click",e[26]),o=!0)},p:y,i(e){r||(Oe((()=>{n||(n=Ke(t,Br,{duration:200},!0)),n.run(1)})),r=!0)},o(e){n||(n=Ke(t,Br,{duration:200},!1)),n.run(0),r=!1},d(e){e&&G(t),e&&n&&n.end(),o=!1,i()}}}function Tm(e){let t,n,r,o,i,a,u;Oe(e[11]);const s=[vm,$m,gm],c=[];function l(e,n){return(null==t||8&n[0])&&(t=!!e[3].is(["loading","pending"])),t?0:e[3].email?1:2}return n=l(e,[-1,-1]),r=c[n]=s[n](e),{c(){r.c(),o=Q()},m(t,r){c[n].m(t,r),K(t,o,r),i=!0,a||(u=[X(hm,"focus",e[10]),X(hm,"resize",e[11])],a=!0)},p(e,t){let i=n;n=l(e,t),n===i?c[n].p(e,t):(Ue(),qe(c[i],1,1,(()=>{c[i]=null})),He(),r=c[n],r?r.p(e,t):(r=c[n]=s[n](e),r.c()),ze(r,1),r.m(o.parentNode,o))},i(e){i||(ze(r),i=!0)},o(e){qe(r),i=!1},d(e){c[n].d(e),e&&G(o),a=!1,E(u)}}}function Rm(t,n,r){let o,i,a,u,s;F(t,$t,(e=>r(2,o=e))),F(t,Hn,(e=>r(4,a=e))),F(t,gt,(e=>r(5,s=e)));const c=Ip("/events"),l=(new Od).start();F(t,l,(e=>r(9,u=e)));const d=new mm({});F(t,d,(e=>r(3,i=e)));let f=0,p={closed:!0},m=ir.l("Chat");c.update({debug:"WebSocket"}),window.convosWebSockeet=c,Hn.update({baseUrl:tn("base_url"),enabled:!0}),c.update({url:Hn.wsUrlFor("/events")}),d.on("wsEventSentJoin",(e=>Hn.go(Hn.conversationPath(e)))),async function(){if(!navigator.serviceWorker)return{};const e=await navigator.serviceWorker.register(Hn.urlFor("/sw.js")),t=await fetch(Hn.urlFor("/sw/info")),n=200==t.status&&await t.json()||{mode:"",version:"0.00"};if(n.version==tn("version"))return{};console.info("[serviceWorker.update]",tn("version"),n),e.update()}().catch((e=>console.error("[serviceWorker]",e))),ye("api",Zn("/api").update({url:Hn.urlFor("/api")}).toFunction()),ye("socket",c),ye("themeManager",l),ye("user",d),la.on("click",(e=>e.path&&Hn.go(e.path))),c.on("update",(function(e){if(e.is("open"))return p.close&&p.close();const t=!1===navigator.onLine?ir.l("You seem to be offline."):e.error?ir.l(e.error):e.is("connecting")?ir.l("Connecting to Convos..."):ir.l("Connection to Convos is %1.",ir.l(e.readyStateHuman));if(p.body==t)return;p.close&&p.close();p=la.showInApp(t,{closeAfter:-1,title:ir.l("Status")})})),ir.load().then((()=>d.load()));return t.$$.update=()=>{512&t.$$.dirty[0]&&e[u.compactDisplay?"add":"remove"]("compact-display"),24&t.$$.dirty[0]&&async function(t,n){n.email&&ir.emojis.load(),e[n.email?"add":"remove"]("notify"),await Se();const r=n.is(["loading","pending"])||document.querySelector(".cms-main")?"cms":"app";if(document.body.className=document.body.className.replace(/for-\w+/,"for-"+r),0==t.pathParts.length){const e=n.email?n.lastUrl||"/chat":"/login";t.go(e,{replace:!0})}else n.email&&n.update({lastUrl:location.href})}(a,i),10&t.$$.dirty[0]&&function(e,t){if(!document)return;const n=tn("organization_name"),r=t.notifications.notifications?"("+t.notifications.notifications+") ":"";document.title="Convos"==n?ir.l("%1 - Convos",r+ir.l(e)):ir.l("%1 - Convos for %2",r+ir.l(e),n)}(m,i),1&t.$$.dirty[0]&&$t.set({width:f,nColumns:f>1200?3:f>800?2:1}),4&t.$$.dirty[0]&&d.update({unreadIncludePrivateMessages:1==o.nColumns})},[f,m,o,i,a,s,c,l,d,u,()=>d.email&&c.open(),function(){r(0,f=hm.innerWidth)},function(e){m=e,r(1,m)},function(e){m=e,r(1,m)},function(e){m=e,r(1,m)},function(e){m=e,r(1,m)},function(e){m=e,r(1,m)},function(e){m=e,r(1,m)},function(e){m=e,r(1,m)},function(e){m=e,r(1,m)},function(e){m=e,r(1,m)},function(e){m=e,r(1,m)},function(e){m=e,r(1,m)},function(e){m=e,r(1,m)},function(e){m=e,r(1,m)},function(e){m=e,r(1,m)},()=>{T(gt,s="",s)},function(e){m=e,r(1,m)}]}class Lm extends nt{constructor(e){super(),tt(this,e,Rm,Tm,k,{},null,[-1,-1])}}function Mm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return g(this,r)}}var Pm=function(e){p(o,e);var t,n,r=Mm(o);function o(e){var t;return $(this,o),(t=r.call(this)).prop("ro","domain",e.domain||"meet.jit.si"),t.prop("ro","email",e.email||""),t.prop("rw","nick",e.nick||""),t.prop("rw","roomName",e.roomName||"convos-default"),t.prop("persist","disableAudioLevels",!0,{key:"video:disableAudioLevels"}),t.prop("persist","disableH264",!0,{key:"video:disableH264"}),t.prop("persist","resolution",720,{key:"video:resolution"}),t}return b(o,[{key:"render",value:(n=gn(vn.mark((function e(t){var n,r,o=this;return vn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=[].slice.call(t.children,0),this.targetEl=t,e.next=5,this._load();case 5:this.jitsi=e.sent,n.forEach((function(e){return e.remove()})),t.className=t.className.replace(/cms-main/,"video-chat--wrapper"),document.querySelector(".cms-navbar").classList.add("is-full-width"),e.next=18;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("[Jitsi]",{err:e.t0}),(r=document.querySelector(".video-error")).querySelector("span").textContent=String(e.t0).substring(0,350),r.classList.remove("hidden"),Xt(document,".cms-main .fa-spin",(function(e){return e.parentNode.classList.add("hidden")}));case 18:if(this.jitsi){e.next=20;break}return e.abrupt("return",this);case 20:return document.addEventListener("keydown",(function(e){"KeyC"==e.code&&o.jitsi.executeCommand("toggleChat"),"KeyD"==e.code&&o.jitsi.executeCommand("toggleShareScreen"),"KeyF"==e.code&&o.jitsi.executeCommand("toggleFilmStrip"),"KeyM"==e.code&&o.jitsi.executeCommand("toggleAudio"),"KeyR"==e.code&&o.jitsi.executeCommand("toggleRaiseHand"),"KeyV"==e.code&&o.jitsi.executeCommand("toggleVideo"),"KeyW"==e.code&&o.jitsi.executeCommand("toggleTileView"),"Space"==e.code&&o.jitsi.isAudioMuted().then((function(e){return e&&o.jitsi.executeCommand("toggleAudio")}))})),document.addEventListener("keyup",(function(e){"Space"==e.code&&o.jitsi.isAudioMuted().then((function(e){return e||o.jitsi.executeCommand("toggleAudio")}))})),e.abrupt("return",this);case 23:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(e){return n.apply(this,arguments)})},{key:"_configOverwrite",value:function(){return{disableAudioLevels:this.disableAudioLevels,disableH264:this.disableH264,enableWelcomePage:!this.nick,prejoinPageEnabled:!this.nick,minParticipants:1,resolution:this.resolution,analytics:{googleAnalyticsTrackingId:"",scriptURLs:[]},e2eping:{analyticsInterval:-1,pingInterval:-1}}}},{key:"_interfaceConfigOverwrite",value:function(){return{DEFAULT_BACKGROUND:window.getComputedStyle(document.querySelector(".cms-navbar--wrapper")).backgroundColor||"#222222",DISABLE_FOCUS_INDICATOR:!0,DISABLE_DOMINANT_SPEAKER_INDICATOR:!0,DISABLE_VIDEO_BACKGROUND:!0,INITIAL_TOOLBAR_TIMEOUT:1e3,SHOW_CHROME_EXTENSION_BANNER:!0,TOOLBAR_ALWAYS_VISIBLE:!1,TOOLBAR_BUTTONS:["camera","chat","closedcaptions","desktop","etherpad","fodeviceselection","fullscreen","hangup","help","microphone","mute-everyone","profile","raisehand","security","settings","sharedvideo","shortcuts","stats","tileview"],TOOLBAR_TIMEOUT:2e3,VERTICAL_FILMSTRIP:!1,VIDEO_QUALITY_LABEL_DISABLED:!0}}},{key:"_load",value:(t=gn(vn.mark((function e(){return vn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vt("https://"+this.domain+"/external_api.js");case 2:return e.abrupt("return",new JitsiMeetExternalAPI(this.domain,this._options()));case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_options",value:function(){var e={};return this.email&&(e.email=this.email),this.nick&&(e.displayName=this.nick),{configOverwrite:this._configOverwrite(),interfaceConfigOverwrite:this._interfaceConfigOverwrite(),parentNode:this.targetEl,roomName:this.roomName,userInfo:e,height:"100%",width:"100%"}}}]),o}(fn);if(Xt(document,"#hamburger_checkbox_toggle",(function(e){e.checked=!1})),Xt(document,".js-close-window",(function(e){e.addEventListener("click",(function(e){window.opener&&(e.preventDefault(),setTimeout((function(){return window.close()}),1),window.opener.focus())}))})),document.querySelector('meta[name="convos:start_app"][content="chat"]'))document.querySelector(".footer--wrapper").remove(),document.querySelector(".cms-main").remove(),new Lm({target:document.body});else if(document.querySelector('meta[name="convos:start_app"][content="jitsi"]')){document.querySelector(".footer--wrapper").remove();var Im=document.querySelector(".cms-main");new Pm(Im.dataset).render(Im)}else document.addEventListener("DOMContentLoaded",(function(e){Xt(document,"pre",(function(e){return qf.lineNumbersBlock(e)}))}));function Um(e){if(!("ontouchstart"in window)){var t=function(e){for(var t=0;t<e.length;t++){var n=document.querySelector(e[t]);if(n&&-1!=n.tabIndex)return n}return null},n=e&&t(["input.is-primary-menu-item","a.is-primary-menu-item"]),r=document.activeElement;if(an(r,["a","input","textarea"])&&n&&r!=n)return n.focus();var o=t([".is-primary-input",'main input[type="text"], article input[type="text"]',"main a, article a"]);return o?o.focus():n?n.focus():void 0}}document.addEventListener("keydown",(function(e){27==e.keyCode&&(Xt(document,".fullscreen",(function(e){return e.click()})),Um()),13==e.keyCode&&e.shiftKey&&(e.preventDefault(),Um("toggle"))}))}();
//# sourceMappingURL=convos.61d59507.js.map
