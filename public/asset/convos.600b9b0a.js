!function(){"use strict";function n(n,e){return n(e={exports:{}},e.exports),e.exports}var e=n((function(n){function e(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?n.exports=e=function(n){return typeof n}:n.exports=e=function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e(t)}n.exports=e})),t=n((function(n){var t=function(n){var t=Object.prototype,r=t.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(n,e,t,r){var o=e&&e.prototype instanceof l?e:l,i=Object.create(o.prototype),a=new k(r||[]);return i._invoke=function(n,e,t){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return E()}for(t.method=o,t.arg=i;;){var a=t.delegate;if(a){var c=b(a,t);if(c){if(c===f)continue;return c}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===r)throw r="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);r="executing";var u=s(n,e,t);if("normal"===u.type){if(r=t.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:t.done}}"throw"===u.type&&(r="completed",t.method="throw",t.arg=u.arg)}}}(n,t,a),i}function s(n,e,t){try{return{type:"normal",arg:n.call(e,t)}}catch(n){return{type:"throw",arg:n}}}n.wrap=u;var f={};function l(){}function d(){}function p(){}var h={};h[i]=function(){return this};var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==t&&r.call(v,i)&&(h=v);var g=p.prototype=l.prototype=Object.create(h);function $(n){["next","throw","return"].forEach((function(e){n[e]=function(n){return this._invoke(e,n)}}))}function y(n,t){var o;this._invoke=function(i,a){function c(){return new t((function(o,c){!function o(i,a,c,u){var f=s(n[i],n,a);if("throw"!==f.type){var l=f.arg,d=l.value;return d&&"object"===e(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(n){o("next",n,c,u)}),(function(n){o("throw",n,c,u)})):t.resolve(d).then((function(n){l.value=n,c(l)}),(function(n){return o("throw",n,c,u)}))}u(f.arg)}(i,a,o,c)}))}return o=o?o.then(c,c):c()}}function b(n,e){var t=n.iterator[e.method];if(void 0===t){if(e.delegate=null,"throw"===e.method){if(n.iterator.return&&(e.method="return",e.arg=void 0,b(n,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=s(t,n.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,f;var o=r.arg;return o?o.done?(e[n.resultName]=o.value,e.next=n.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function w(n){var e={tryLoc:n[0]};1 in n&&(e.catchLoc=n[1]),2 in n&&(e.finallyLoc=n[2],e.afterLoc=n[3]),this.tryEntries.push(e)}function _(n){var e=n.completion||{};e.type="normal",delete e.arg,n.completion=e}function k(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(w,this),this.reset(!0)}function x(n){if(n){var e=n[i];if(e)return e.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var t=-1,o=function e(){for(;++t<n.length;)if(r.call(n,t))return e.value=n[t],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=g.constructor=p,p.constructor=d,p[c]=d.displayName="GeneratorFunction",n.isGeneratorFunction=function(n){var e="function"==typeof n&&n.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,p):(n.__proto__=p,c in n||(n[c]="GeneratorFunction")),n.prototype=Object.create(g),n},n.awrap=function(n){return{__await:n}},$(y.prototype),y.prototype[a]=function(){return this},n.AsyncIterator=y,n.async=function(e,t,r,o,i){void 0===i&&(i=Promise);var a=new y(u(e,t,r,o),i);return n.isGeneratorFunction(t)?a:a.next().then((function(n){return n.done?n.value:a.next()}))},$(g),g[c]="Generator",g[i]=function(){return this},g.toString=function(){return"[object Generator]"},n.keys=function(n){var e=[];for(var t in n)e.push(t);return e.reverse(),function t(){for(;e.length;){var r=e.pop();if(r in n)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=x,k.prototype={constructor:k,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!n)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var e=this;function t(t,r){return a.type="throw",a.arg=n,e.next=t,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(n,e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===n||"continue"===n)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=n,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(n,e){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&e&&(this.next=e),f},finish:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===n)return this.complete(t.completion,t.afterLoc),_(t),f}},catch:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===n){var r=t.completion;if("throw"===r.type){var o=r.arg;_(t)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(n,e,t){return this.delegate={iterator:x(n),resultName:e,nextLoc:t},"next"===this.method&&(this.arg=void 0),f}},n}(n.exports);try{regeneratorRuntime=t}catch(n){Function("r","regeneratorRuntime = r")(t)}}));var r=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")};var o=function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n};var i=function(n,t){return!t||"object"!==e(t)&&"function"!=typeof t?o(n):t},a=n((function(n){function e(t){return n.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},e(t)}n.exports=e})),c=n((function(n){function e(t,r){return n.exports=e=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n},e(t,r)}n.exports=e}));var u=function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&c(n,e)};function s(n,e,t,r,o,i,a){try{var c=n[i](a),u=c.value}catch(n){return void t(n)}c.done?e(u):Promise.resolve(u).then(r,o)}var f=function(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function a(n){s(i,r,o,a,c,"next",n)}function c(n){s(i,r,o,a,c,"throw",n)}a(void 0)}))}};var l=function(n){if(Array.isArray(n))return n};var d=function(n,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n)){var t=[],r=!0,o=!1,i=void 0;try{for(var a,c=n[Symbol.iterator]();!(r=(a=c.next()).done)&&(t.push(a.value),!e||t.length!==e);r=!0);}catch(n){o=!0,i=n}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return t}};var p=function(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r};var h=function(n,e){if(n){if("string"==typeof n)return p(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?p(n,e):void 0}};var m=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var v=function(n,e){return l(n)||d(n,e)||h(n,e)||m()};var g=function(n,e){for(;!Object.prototype.hasOwnProperty.call(n,e)&&null!==(n=a(n)););return n},$=n((function(n){function e(t,r,o){return"undefined"!=typeof Reflect&&Reflect.get?n.exports=e=Reflect.get:n.exports=e=function(n,e,t){var r=g(n,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(t):o.value}},e(t,r,o||t)}n.exports=e}));var y=function(n){return-1!==Function.toString.call(n).indexOf("[native code]")};var b=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}},w=n((function(n){function e(t,r,o){return b()?n.exports=e=Reflect.construct:n.exports=e=function(n,e,t){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(n,r));return t&&c(o,t.prototype),o},e.apply(null,arguments)}n.exports=e})),_=n((function(n){function e(t){var r="function"==typeof Map?new Map:void 0;return n.exports=e=function(n){if(null===n||!y(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(n))return r.get(n);r.set(n,e)}function e(){return w(n,arguments,a(this).constructor)}return e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),c(e,n)},e(t)}n.exports=e}));var k=function(n){if(Array.isArray(n))return p(n)};var x=function(n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)};var E=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var O=function(n){return k(n)||x(n)||h(n)||E()};function S(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var C=function(n,e,t){return e&&S(n.prototype,e),t&&S(n,t),n};function R(){}var N=function(n){return n};function A(n){return n()}function D(){return Object.create(null)}function M(n){n.forEach(A)}function j(n){return"function"==typeof n}function T(n,t){return n!=n?t==t:n!==t||n&&"object"===e(n)||"function"==typeof n}function P(n){if(null==n)return R;for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];var o=n.subscribe.apply(n,t);return o.unsubscribe?function(){return o.unsubscribe()}:o}function L(n,e,t){n.$$.on_destroy.push(P(e,t))}function I(n,e,t,r){if(n){var o=U(n,e,t,r);return n[0](o)}}function U(n,e,t,r){return n[1]&&r?function(n,e){for(var t in e)n[t]=e[t];return n}(t.ctx.slice(),n[1](r(e))):t.ctx}function B(n,t,r,o){if(n[2]&&o){var i=n[2](o(r));if(void 0===t.dirty)return i;if("object"===e(i)){for(var a=[],c=Math.max(t.dirty.length,i.length),u=0;u<c;u+=1)a[u]=t.dirty[u]|i[u];return a}return t.dirty|i}return t.dirty}function z(n){return n&&j(n.destroy)?n.destroy:R}var H="undefined"!=typeof window,q=H?function(){return window.performance.now()}:function(){return Date.now()},F=H?function(n){return requestAnimationFrame(n)}:R,K=new Set;function W(n){K.forEach((function(e){e.c(n)||(K.delete(e),e.f())})),0!==K.size&&F(W)}function G(n,e){n.appendChild(e)}function Y(n,e,t){n.insertBefore(e,t||null)}function V(n){n.parentNode.removeChild(n)}function J(n,e){for(var t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function Z(n){return document.createElement(n)}function Q(n){return document.createTextNode(n)}function X(){return Q(" ")}function nn(){return Q("")}function en(n,e,t,r){return n.addEventListener(e,t,r),function(){return n.removeEventListener(e,t,r)}}function tn(n){return function(e){return e.preventDefault(),n.call(this,e)}}function rn(n,e,t){null==t?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function on(n){return Array.from(n.childNodes)}function an(n,e){e=""+e,n.data!==e&&(n.data=e)}function cn(n,e){(null!=e||n.value)&&(n.value=e)}function un(n,e,t,r){n.style.setProperty(e,t,r?"important":"")}function sn(n,e,t){n.classList[t?"add":"remove"](e)}function fn(n,e){var t=document.createEvent("CustomEvent");return t.initCustomEvent(n,!1,!1,e),t}var ln,dn=function(){function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r(this,n),this.e=Z("div"),this.a=t,this.u(e)}return C(n,[{key:"m",value:function(n){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=0;t<this.n.length;t+=1)Y(n,this.n[t],e);this.t=n}},{key:"u",value:function(n){this.e.innerHTML=n,this.n=Array.from(this.e.childNodes)}},{key:"p",value:function(n){this.d(),this.u(n),this.m(this.t,this.a)}},{key:"d",value:function(){this.n.forEach(V)}}]),n}(),pn=new Set,hn=0;function mn(n){for(var e=5381,t=n.length;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function vn(n,e,t,r,o,i,a){for(var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=16.666/r,s="{\n",f=0;f<=1;f+=u){var l=e+(t-e)*i(f);s+=100*f+"%{".concat(a(l,1-l),"}\n")}var d=s+"100% {".concat(a(t,1-t),"}\n}"),p="__svelte_".concat(mn(d),"_").concat(c),h=n.ownerDocument;pn.add(h);var m=h.__svelte_stylesheet||(h.__svelte_stylesheet=h.head.appendChild(Z("style")).sheet),v=h.__svelte_rules||(h.__svelte_rules={});v[p]||(v[p]=!0,m.insertRule("@keyframes ".concat(p," ").concat(d),m.cssRules.length));var g=n.style.animation||"";return n.style.animation="".concat(g?"".concat(g,", "):"").concat(p," ").concat(r,"ms linear ").concat(o,"ms 1 both"),hn+=1,p}function gn(n,e){var t=(n.style.animation||"").split(", "),r=t.filter(e?function(n){return n.indexOf(e)<0}:function(n){return-1===n.indexOf("__svelte")}),o=t.length-r.length;o&&(n.style.animation=r.join(", "),(hn-=o)||F((function(){hn||(pn.forEach((function(n){for(var e=n.__svelte_stylesheet,t=e.cssRules.length;t--;)e.deleteRule(t);n.__svelte_rules={}})),pn.clear())})))}function $n(n){ln=n}function yn(){if(!ln)throw new Error("Function called outside component initialization");return ln}function bn(n){yn().$$.on_mount.push(n)}function wn(n){yn().$$.on_destroy.push(n)}function _n(n,e){yn().$$.context.set(n,e)}function kn(n){return yn().$$.context.get(n)}function xn(n,e){var t=n.$$.callbacks[e.type];t&&t.slice().forEach((function(n){return n(e)}))}var En=[],On=[],Sn=[],Cn=[],Rn=Promise.resolve(),Nn=!1;function An(n){Sn.push(n)}function Dn(n){Cn.push(n)}var Mn,jn=!1,Tn=new Set;function Pn(){if(!jn){jn=!0;do{for(var n=0;n<En.length;n+=1){var e=En[n];$n(e),Ln(e.$$)}for(En.length=0;On.length;)On.pop()();for(var t=0;t<Sn.length;t+=1){var r=Sn[t];Tn.has(r)||(Tn.add(r),r())}Sn.length=0}while(En.length);for(;Cn.length;)Cn.pop()();Nn=!1,jn=!1,Tn.clear()}}function Ln(n){if(null!==n.fragment){n.update(),M(n.before_update);var e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(An)}}function In(n,e,t){n.dispatchEvent(fn("".concat(e?"intro":"outro").concat(t)))}var Un,Bn=new Set;function zn(){Un={r:0,c:[],p:Un}}function Hn(){Un.r||M(Un.c),Un=Un.p}function qn(n,e){n&&n.i&&(Bn.delete(n),n.i(e))}function Fn(n,e,t,r){if(n&&n.o){if(Bn.has(n))return;Bn.add(n),Un.c.push((function(){Bn.delete(n),r&&(t&&n.d(1),r())})),n.o(e)}}var Kn={duration:0};function Wn(n,e,t,r){var o=e(n,t),i=r?0:1,a=null,c=null,u=null;function s(){u&&gn(n,u)}function f(n,e){var t=n.b-i;return e*=Math.abs(t),{a:i,b:n.b,d:t,duration:e,start:n.start,end:n.start+e,group:n.group}}function l(e){var t,r=o||Kn,l=r.delay,d=void 0===l?0:l,p=r.duration,h=void 0===p?300:p,m=r.easing,v=void 0===m?N:m,g=r.tick,$=void 0===g?R:g,y=r.css,b={start:q()+d,b:e};e||(b.group=Un,Un.r+=1),a?c=b:(y&&(s(),u=vn(n,i,e,h,d,v,y)),e&&$(0,1),a=f(b,h),An((function(){return In(n,e,"start")})),t=function(e){if(c&&e>c.start&&(a=f(c,h),c=null,In(n,a.b,"start"),y&&(s(),u=vn(n,i,a.b,a.duration,0,v,o.css))),a)if(e>=a.end)$(i=a.b,1-i),In(n,a.b,"end"),c||(a.b?s():--a.group.r||M(a.group.c)),a=null;else if(e>=a.start){var t=e-a.start;i=a.a+a.d*v(t/a.duration),$(i,1-i)}return!(!a&&!c)},0===K.size&&F(W),new Promise((function(n){K.add({c:t,f:n})})))}return{run:function(n){j(o)?(Mn||(Mn=Promise.resolve()).then((function(){Mn=null})),Mn).then((function(){o=o(),l(n)})):l(n)},end:function(){s(),a=c=null}}}function Gn(n,t){var r,o=t.token={};function i(n,e,r,i){if(t.token===o){t.resolved=i;var a=t.ctx;void 0!==r&&((a=a.slice())[r]=i);var c=n&&(t.current=n)(a),u=!1;t.block&&(t.blocks?t.blocks.forEach((function(n,r){r!==e&&n&&(zn(),Fn(n,1,1,(function(){t.blocks[r]=null})),Hn())})):t.block.d(1),c.c(),qn(c,1),c.m(t.mount(),t.anchor),u=!0),t.block=c,t.blocks&&(t.blocks[e]=c),u&&Pn()}}if((r=n)&&"object"===e(r)&&"function"==typeof r.then){var a=yn();if(n.then((function(n){$n(a),i(t.then,1,t.value,n),$n(null)}),(function(n){$n(a),i(t.catch,2,t.error,n),$n(null)})),t.current!==t.pending)return i(t.pending,0),!0}else{if(t.current!==t.then)return i(t.then,1,t.value,n),!0;t.resolved=n}}var Yn="undefined"!=typeof window?window:global;function Vn(n,e,t){var r=n.$$.props[e];void 0!==r&&(n.$$.bound[r]=t,t(n.$$.ctx[r]))}function Jn(n){n&&n.c()}function Zn(n,e,t){var r=n.$$,o=r.fragment,i=r.on_mount,a=r.on_destroy,c=r.after_update;o&&o.m(e,t),An((function(){var e=i.map(A).filter(j);a?a.push.apply(a,O(e)):M(e),n.$$.on_mount=[]})),c.forEach(An)}function Qn(n,e){var t=n.$$;null!==t.fragment&&(M(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Xn(n,e){-1===n.$$.dirty[0]&&(En.push(n),Nn||(Nn=!0,Rn.then(Pn)),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function ne(n,e,t,r,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[-1],c=ln;$n(n);var u=e.props||{},s=n.$$={fragment:null,ctx:null,props:i,update:R,not_equal:o,bound:D(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:D(),dirty:a},f=!1;if(s.ctx=t?t(n,u,(function(e,t){var r=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:t;return s.ctx&&o(s.ctx[e],s.ctx[e]=r)&&(s.bound[e]&&s.bound[e](r),f&&Xn(n,e)),t})):[],s.update(),f=!0,M(s.before_update),s.fragment=!!r&&r(s.ctx),e.target){if(e.hydrate){var l=on(e.target);s.fragment&&s.fragment.l(l),l.forEach(V)}else s.fragment&&s.fragment.c();e.intro&&qn(n.$$.fragment),Zn(n,e.target,e.anchor),Pn()}$n(c)}var ee=function(){function n(){r(this,n)}return C(n,[{key:"$destroy",value:function(){Qn(this,1),this.$destroy=R}},{key:"$on",value:function(n,e){var t=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return t.push(e),function(){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}},{key:"$set",value:function(){}}]),n}();var te=function(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n},re=n((function(n,e){var t;t=function(){function n(){for(var n=0,e={};n<arguments.length;n++){var t=arguments[n];for(var r in t)e[r]=t[r]}return e}function e(n){return n.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function t(r){function o(){}function i(e,t,i){if("undefined"!=typeof document){"number"==typeof(i=n({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(t);/^[\{\[]/.test(a)&&(t=a)}catch(n){}t=r.write?r.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var c="";for(var u in i)i[u]&&(c+="; "+u,!0!==i[u]&&(c+="="+i[u].split(";")[0]));return document.cookie=e+"="+t+c}}function a(n,t){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var c=i[a].split("="),u=c.slice(1).join("=");t||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var s=e(c[0]);if(u=(r.read||r)(u,s)||e(u),t)try{u=JSON.parse(u)}catch(n){}if(o[s]=u,n===s)break}catch(n){}}return n?o[n]:o}}return o.set=i,o.get=function(n){return a(n,!1)},o.getJSON=function(n){return a(n,!0)},o.remove=function(e,t){i(e,"",n(t,{expires:-1}))},o.defaults={},o.withConverter=t,o}((function(){}))},n.exports=t()})),oe=1e3,ie=1e6,ae=1e3*ie;function ce(n,e){for(;n;){if(e.tagName?n==e:n.matches&&n.matches(e))return n;n=n.parentNode}return null}function ue(n,e){var t=function t(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var a=this;t.isQueued=!0,t.debounceTid&&clearTimeout(t.debounceTid),t.debounceTid=setTimeout((function(){n.apply(a,o),t.debounceTid=0}),e)};return t.debounceTid=0,t}function se(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"message",t=n.errors||n;return t&&t[0]?t[0][e]||"Unknown error.":""}function fe(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.95,r=Math.floor(6*n),o=6*n-r,i=t*(1-e),a=t*(1-o*e),c=t*(1-(1-o)*e),u=255,s=255,f=255;switch(r){case 0:u=t,s=c,f=i;break;case 1:u=a,s=t,f=i;break;case 2:u=i,s=t,f=c;break;case 3:u=i,s=a,f=t;break;case 4:u=c,s=i,f=t;break;case 5:u=t,s=i,f=a}return[Math.floor(255*u),Math.floor(255*s),Math.floor(255*f)]}function le(n,e){var t=n<oe?[n,""]:n<ie?[n/oe,"k"]:n<ae?[n/ie,"M"]:[n/ae,"G"],r=String(Math.round(10*t[0])/10);return(r.match(/\./)?r:r+".0")+t[1]+(e||"")}function de(n,t){return"array"==t?Array.isArray(n):"object"==t?"object"==e(n)&&null!==n:"undef"==t?null==n:e(n)==t}function pe(n){var e=document,t=n.replace(/\W/g,"_");if(!e.getElementById(t)){var r=e.createElement("script"),o=[t,n];return r.id=o[0],r.src=o[1],e.getElementsByTagName("head")[0].appendChild(r),new Promise((function(n,e){r.addEventListener("error",e),r.addEventListener("load",n)}))}}function he(n){return Object.keys(n).filter((function(e){return n[e]})).sort().map((function(n){return"has-mode-"+n})).join(" ")}function me(n,e,t){var r=":children"==e?n.children:n.querySelectorAll(e);if(!t)return[].slice.call(r,0);if(Array.isArray(t))return[].forEach.call(r,(function(n){return n.addEventListener(t[0],t[1])}));for(var o=[],i=0;i<r.length;i++)o.push(t(r[i],i));return o}function ve(n){return n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function ge(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function $e(n,e,t){var r=document.querySelector(n);r.className=r.className.replace(e,(function(n,e){return e+t}))}function ye(n,e){var t=function(n){return document.querySelector('meta[name="convos:'+n+'"]')||document.querySelector('meta[name="'+n+'"]')};if(1==arguments.length){if("app_mode"==n)return document.body.classList.contains("for-app");if("notify_enabled"==n)return document.body.classList.contains("notify-enabled");"organization_name"==n&&(n="contactorganization"),"organization_url"==n&&(n="contactnetworkaddress");var r=t(n);if(!r)throw'Cannot get settings for "'+n+'".';var o={no:!1,yes:!0};return"contact"==n?atob(r.content||""):o.hasOwnProperty(r.content)?o[r.content]:r.content}return"app_mode"==n?$e("body",/(for-)(app|cms)/,e?"app":"cms"):"notify_enabled"==n?$e("body",/(notify-)(disabled)/,e?"enabled":"disabled"):("organization_name"==n&&(n="contactorganization"),"organization_url"==n&&(n="contactnetworkaddress"),"contact"==n&&(e=btoa(e)),"boolean"==typeof e&&(e=e?"yes":"no"),void(t(n).content=e))}function be(n,e){n&&n.preventDefault&&n.preventDefault();var t,r,o,i,a=(t=document.body,r="fullscreen-wrapper",o=function(n){n.addEventListener("click",(function(e){return e.target==n&&n.hide()})),n.hide=function(){return a.classList.add("hidden")}},(i=t&&t.querySelector("."+r.split(" ").join(".")))||((i=document.createElement("div")).className=r,t&&t.appendChild(i),o&&o(i),i));return ge(a),e?(a.classList.remove("hidden"),a.appendChild(e.cloneNode(!0)),a):a.hide()}function we(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;if(0==n.length)return"#000";for(var t=0,r=0;r<n.length;r++)t=n.charCodeAt(r)+((t<<5)-t),t&=t;return"#"+fe(((t=Math.abs(t%e/e))+.618033988749)%1,.4,.7).map((function(n){return n.toString(16)})).join("")}function _e(n,e){return de(e,"array")?e.find((function(e){return _e(n,e)}))||!1:n&&n.tagName&&n.tagName.toLowerCase()===e||!1}function ke(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var e=16*Math.random()|0;return("x"==n?e:3&e|8).toString(16)}))}function xe(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function Ee(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?xe(Object(t),!0).forEach((function(e){te(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):xe(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var Oe=function(){function n(){r(this,n),this.cookieName="convos_js",this._on={},this._props={}}return C(n,[{key:"emit",value:function(n){for(var e=this._on[n],t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];for(var i=0;i<(e||[]).length;i++){var a;(a=e[i])[0].apply(a,r)}return this}},{key:"on",value:function(n,e){var t=e?null:new Promise((function(n){e=n})),r=this._on[n]||(this._on[n]=[]),o=[e];r.push(o);var i=function(){var n=r.indexOf(o);-1!=n&&r.splice(n,1)};return t?t.finally(i):i}},{key:"prop",value:function(n,e,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=Ee({},r,{defaultValue:t,name:e,type:n,value:t});switch(this._props[e]=o,o.updateable=-1!=["cookie","persist","rw"].indexOf(n),n){case"cookie":return this._cookieProp(o);case"persist":return this._localStorageProp(o);case"ro":return this._readOnlyProp(o);case"rw":return this._updateableProp(o)}throw"["+this.constructor.name+'] Unknown prop type "'+n+'" for prop "'+e+'".'}},{key:"subscribe",value:function(n){return n(this),this.on("update",n)}},{key:"update",value:function(n){var e=this;return Object.keys(n).forEach((function(t){var r=e._props[t];r&&(r.hasOwnProperty("prev")||(r.prev="ro"==r.type?void 0:r.value),r.updateable&&(r.value=n[t]))})),this._updatedTid||(this._updatedTid=setTimeout(this._delayedUpdate.bind(this),1)),this}},{key:"_cookie",value:function(n,e){var t=n.key||n.name,r=document.decodedB64JSONCookies||(document.decodedB64JSONCookies={});if(!r[this.cookieName])try{var o=re.get(this.cookieName);r[this.cookieName]=JSON.parse(o?atob(o):"{}")}catch(n){console.error("[Reactive:cookie]",te({},t,n))}var i=r[this.cookieName]||{};if(1==arguments.length)return i[t];e===n.defaultValue?delete i[t]:i[t]=e;var a=0==location.href.indexOf("https:");re.set(this.cookieName,btoa(JSON.stringify(i)),{expires:365,SameSite:"Lax",secure:a})}},{key:"_cookieProp",value:function(n){var e=this._cookie(n);de(e,"undef")||(n.value=e),de(e,"undef")&&this._cookie(n,n.value),this._updateableProp(n)}},{key:"_delayedUpdate",value:function(){var n=this,e={};return Object.keys(this._props).forEach((function(t){var r=n._props[t];if(r.hasOwnProperty("prev")){var o=r.prev;delete r.prev,r.value!==o&&("cookie"==r.type&&n._cookie(r,r.value),"persist"==r.type&&n._localStorage(r,r.value),e[t]="ro"!=r.type)}})),delete this._updatedTid,Object.keys(e).length&&this.emit("update",this,e),e}},{key:"_localStorage",value:function(n,e){var t="convos:"+(n.key||n.name);if(2==arguments.length)return e===n.defaultValue?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(e));try{return localStorage.hasOwnProperty(t)?JSON.parse(localStorage.getItem(t)):void 0}catch(n){return void console.error("[Reactive:localStorage]",te({},t,localStorage.getItem(t)),n)}}},{key:"_localStorageProp",value:function(n){var e=this._localStorage(n);de(e,"undef")||(n.value=e),de(e,"undef")&&this._localStorage(n,n.value),this._updateableProp(n)}},{key:"_readOnlyProp",value:function(n){if(void 0===n.value)throw"["+this.constructor.name+'] Read-only attribute "'+n.name+'" cannot be undefined';var e="function"==typeof n.value?n.value:function(){return n.value};Object.defineProperty(this,n.name,{get:e})}},{key:"_updateableProp",value:function(n){Object.defineProperty(this,n.name,{get:function(){return n.value}})}}]),n}();function Se(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Ce=function(n){u(o,n);var e,t=(e=o,function(){var n,t=a(e);if(Se()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function o(){var n;return r(this,o),(n=t.call(this)).prop("cookie","activeTheme","convos",{key:"theme"}),n.prop("cookie","colorScheme","auto"),n.prop("cookie","compactDisplay",!1),n.prop("ro","colorSchemeOptions",["Auto","Light","Dark"].map((function(n){return[n.toLowerCase(),n]}))),n.prop("ro","themeOptions",(function(){return Array.from(n._stylesheets.entries())})),n.prop("rw","osColorScheme",""),n._stylesheets=new Map([]),n}return C(o,[{key:"hasColorScheme",value:function(n){return me(document,'link[id$="-'+n+'"]').length>1}},{key:"start",value:function(){var n=this;me(document,'link[rel="alternate stylesheet"][title]',(function(e){var t=e.title.replace(/\s\([a-z]+\)$/,"");n._stylesheets.set(e.id.replace(/^theme_alt__[a-z]+-/,""),t)}));var e=this.osColorScheme;return this._matchMedia||(this._matchMedia=window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):{addListener:function(){}},this._matchMedia.addListener((function(e){return n.update({osColorScheme:e.matches?"dark":"light"})})),e=this._matchMedia.matches?"dark":"light"),this.update({compactDisplay:this.compactDisplay,osColorScheme:e})}},{key:"update",value:function(n){return n.hasOwnProperty("compactDisplay")&&document.body.classList[n.compactDisplay?"add":"remove"]("is-compact"),(n.activeTheme||n.colorScheme||n.osColorScheme)&&this._activateTheme(n),$(a(o.prototype),"update",this).call(this,n)}},{key:"_activateTheme",value:function(n){for(var e,t=n.activeTheme||this.activeTheme,r=n.colorScheme||this.colorScheme,o=n.osColorScheme||this.osColorScheme,i=["auto"==r?o:r,"normal","light"],a=0;a<i.length&&!(e=document.getElementById("theme_alt__"+i[a]+"-"+t));a++);me(document,'link[rel*="style"][title]',(function(n){e||(e=n),n.disabled=!0,n.disabled=n.href!=e.href,n.setAttribute("media",n==e?"":"none"),n.setAttribute("rel",n==e?"stylesheet":"alternate stylesheet")}))}}]),o}(Oe),Re=function(){function n(e){var t=this;r(this,n),this._url=new URL("http://localhost"),Object.defineProperty(this,"href",{get:function(){return t._url.href.replace(/^http:/,t.protocol)},set:function(n){t._url.href=n.replace(/^\w+:/,"http:"),t.protocol=n.match(/^\w+:/)[0]}}),["host","pathname","password","searchParams","username"].forEach((function(n){Object.defineProperty(t,n,{get:function(){return t._url[n]},set:function(e){t._url[n]=e}})})),this.href=e}return C(n,[{key:"fromForm",value:function(n){var e=n.server.value;return n.nick.value.length&&this.searchParams.append("nick",n.nick.value),n.realname.value.length&&this.searchParams.append("realname",n.realname.value),this.searchParams.append("sasl",n.sasl.value||"none"),this.searchParams.append("tls",n.tls.checked?"1":"0"),this.searchParams.append("tls_verify",n.tls_verify&&n.tls_verify.checked?"1":"0"),this.host=e.match(/:\d+$/)?e:e+":6667",this.password=n.password.value,this.username=n.username.value,this}},{key:"toString",value:function(){return this.href.replace(/^http:/,this.protocol)}}]),n}();function Ne(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Ae=function(n,e){return n.name.localeCompare(e.name)},De=function(n){u(o,n);var e,t=(e=o,function(){var n,t=a(e);if(Ne()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function o(){var n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,o),(n=t.call(this,e)).sorter=i.sorter||Ae,n._sort(),n}return C(o,[{key:"filter",value:function(n){return Array.from(this.values()).filter(n)}},{key:"set",value:function(n,e){$(a(o.prototype),"set",this).call(this,n,e),this._sort()}},{key:"toArray",value:function(){return Array.from(this.values())}},{key:"_sort",value:function(){var n=this,e=Array.from(this.entries()),t=this.sorter;return this.clear(),e.sort((function(n,e){return t(n[1],e[1])})).forEach((function(e){var t=v(e,2),r=t[0],i=t[1];return $(a(o.prototype),"set",n).call(n,r,i)})),e}}]),o}(_(Map));function Me(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var je={0:"Jan",1:"Feb",2:"March",3:"Apr",4:"May",5:"Jun",6:"July",7:"Aug",8:"Sept",9:"Oct",10:"Nov",11:"Dec"},Te={H:"_getPaddedHours",M:"_getPaddedMinutes",S:"_getPaddedSeconds",b:"_getMonthAbbr",e:"getDate",Y:"getFullYear"},Pe=function(n){u(o,n);var e,t=(e=o,function(){var n,t=a(e);if(Me()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function o(n){return r(this,o),"string"!=typeof n||n.match(/Z$/)||(n+="Z"),t.call(this,n||new Date)}return C(o,[{key:"format",value:function(n){var e=this;return n.replace(/%(\w)/g,(function(n,t){return Te[t]?e[Te[t]]():t}))}},{key:"getHumanDate",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.format("%b %e"),t=new o,r=this.getYear()==t.getYear();return r&&!n.year||(e+=", "+this.getFullYear()),e}},{key:"setDate",value:function(n,e){return e?$(a(o.prototype),"setUTCDate",this).call(this,n):$(a(o.prototype),"setDate",this).call(this,n),this}},{key:"setFullYear",value:function(n,e){return e?$(a(o.prototype),"setUTCFullYear",this).call(this,n):$(a(o.prototype),"setFullYear",this).call(this,n),this}},{key:"setHours",value:function(n,e){return e?$(a(o.prototype),"setUTCHours",this).call(this,n):$(a(o.prototype),"setHours",this).call(this,n),this}},{key:"setMilliseconds",value:function(n,e){return e?$(a(o.prototype),"setUTCMilliseconds",this).call(this,n):$(a(o.prototype),"setMilliseconds",this).call(this,n),this}},{key:"setMinutes",value:function(n,e){return e?$(a(o.prototype),"setUTCMinutes",this).call(this,n):$(a(o.prototype),"setMinutes",this).call(this,n),this}},{key:"setMonth",value:function(n,e){return e?$(a(o.prototype),"setUTCMonth",this).call(this,n):$(a(o.prototype),"setMonth",this).call(this,n),this}},{key:"setSeconds",value:function(n,e){return e?$(a(o.prototype),"setUTCSeconds",this).call(this,n):$(a(o.prototype),"setSeconds",this).call(this,n),this}},{key:"setTime",value:function(n){return $(a(o.prototype),"setTime",this).call(this,n),this}},{key:"setYear",value:function(n){return this.setYear(n),this}},{key:"toEpoch",value:function(){return this.getTime()/1e3}},{key:"_getMonthAbbr",value:function(){return je[this.getMonth()]||""}},{key:"_getPaddedHours",value:function(){return String(this.getHours()).padStart(2,"0")}},{key:"_getPaddedMinutes",value:function(){return String(this.getMinutes()).padStart(2,"0")}},{key:"_getPaddedSeconds",value:function(){return String(this.getSeconds()).padStart(2,"0")}}]),o}(_(Date));function Le(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Ie=function(n){u(o,n);var e,t=(e=o,function(){var n,t=a(e);if(Le()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function o(n){var e;return r(this,o),(e=t.call(this)).prop("ro","api",n.api),e.prop("ro","defaultParams",n.defaultParams||{}),e.prop("ro","id",n.id),e.prop("ro","req",{body:null,headers:{}}),e.prop("ro","res",{body:{},headers:{}}),e.prop("rw","err",null),e.prop("rw","status","pending"),e}return C(o,[{key:"error",value:function(n,e){if(n)return this.update({err:Array.isArray(n)?n:[{message:n,source:e}],status:"error"});if(!this.err||!this.err.length)return"";var t=this.err[0],r=t.path&&t.path.match(/\w$/)&&t.path.split("/").pop();return r?r+": "+t.message:t.message}},{key:"perform",value:function(n){var e=this;return this._promise||(this._promise=new Promise((function(t){e.api.spec(e.id).then((function(t){if(!t)throw'Unknown operationId "'+e.id+'".';var r=e._paramsToRequest(t,n||e.defaultParams),o=v(r,2),i=o[0],a=o[1];if(!i)throw a;return e.update({status:"loading"}).emit("start",a),de(a.body,"object")&&"function"!=typeof a.body.has&&(a.body=JSON.stringify(a.body)),fetch(i,a)})).then((function(n){return Promise.all([n,n.json()])})).then((function(n){var r=v(n,2),o=r[0],i=r[1];delete e._promise,t(e.parse(o,i))})).catch((function(n){delete e._promise,t(e.error(Array.isArray(n)?n:'Failed fetching operationId "'+e.id+'": '+n,"fetch"))}))})))}},{key:"is",value:function(n){return this.status==n}},{key:"parse",value:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.body;this.res.body=e||n,this.res.status=n.status||"201",n.headers&&(this.res.headers=n.headers);var t=null;return String(this.res.status).match(/^[23]/)||(t=e&&e.errors?e.errors:[{message:n.statusText||"Unknown error."}]),this.update({err:t,status:t?"error":"success"})}},{key:"reset",value:function(){return this.res.body={},this.res.headers={},this.res.status=0,this.update({err:null,status:"pending"})}},{key:"_extractValue",value:function(n,e){if(e.schema&&"form"==(n.tagName||"").toLowerCase())return Object.keys(e.schema.properties).reduce((function(e,t){var r=n[t];return r&&("checkbox"!=r.type||r.checked)?(e[t]=r.value,e):e}),{});if(n[e.name]&&n[e.name].tagName)return n[e.name].value;if(e.schema){var t={};return Object.keys(e.schema.properties).forEach((function(e){t[e]=n[e]})),t}return n[e.name]}},{key:"_hasProperty",value:function(n,e){return"body"==e.in||("formData"==e.in?n.formData.has(e.name):"form"==(n.tagName||"").toLowerCase()?!!n[e.name]:n.hasOwnProperty(e.name))}},{key:"_paramsToRequest",value:function(n,e){var t=this,r={headers:this.req.headers,method:n.method},o=new URL(n.url),i=[];return(n.parameters||[]).forEach((function(n){if(!t._hasProperty(e,n)&&n.required)i.push({message:"Missing property.",path:"/"+n.name});else{if(!t._hasProperty(e,n)&&!n.required)return;if("path"==n.in){var a=new RegExp("(%7B|\\{)"+ve(n.name)+"(%7D|\\})","i");o.pathname=o.pathname.replace(a,encodeURIComponent(t._extractValue(e,n)))}else if("query"==n.in)o.searchParams.set(n.name,t._extractValue(e,n));else if("formData"==n.in)delete r.headers["Content-Type"],r.body=e.formData;else if("body"==n.in)r.body=t._extractValue(e,n);else{if("header"!=n.in)throw"[Api] Parameter in:"+n.in+" is not supported.";r.header[n.name]=t._extractValue(e,n.name)}}})),i.length?[null,i]:[o,r]}}]),o}(Oe);function Ue(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Be=function n(e,t,r){var o=n.singletons[e]||(n.singletons[e]=new ze);return t?o.operation(t,r):o};Be.singletons={};var ze=function(n){u(s,n);var e,o,c=(e=s,function(){var n,t=a(e);if(Ue()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function s(){var n;return r(this,s),(n=c.call(this)).prop("rw","protocol",location.protocol||"http"),n.prop("rw","url",""),n}return C(s,[{key:"operation",value:function(n,e){var t=new Ie({api:this,id:n,defaultParams:e});return t.req.headers={"Content-Type":"application/json"},t}},{key:"spec",value:(o=f(t.mark((function n(e){var r,o,i=this;return t.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this._ops||!e){n.next=2;break}return n.abrupt("return",this._ops[e]);case 2:if(!this._spec){n.next=4;break}return n.abrupt("return",this._spec);case 4:return n.next=6,fetch(this.url);case 6:return r=n.sent,n.next=9,r.json();case 9:if(o=n.sent,this._ops={},this._spec=o,Object.keys(o.paths).forEach((function(n){Object.keys(o.paths[n]).forEach((function(e){var t=o.paths[n][e],r=t.operationId;r&&(t.method=e.toUpperCase(),t.url=i.protocol+"//"+o.host+o.basePath+n+".json",t.parameters=(t.parameters||[]).map((function(n){return i._resolveRef(n)})),i._ops[r]=t)}))})),!this._ops||!e){n.next=15;break}return n.abrupt("return",this._ops[e]);case 15:if(!this._spec){n.next=17;break}return n.abrupt("return",this._spec);case 17:case"end":return n.stop()}}),n,this)}))),function(n){return o.apply(this,arguments)})},{key:"toFunction",value:function(){var n=this;return function(e,t){return e?n.operation(e,t):n}}},{key:"_resolveRef",value:function(n){var e=this,t=n;if(n.$ref){var r=n.$ref.replace(/^#\//,"").split("/");for(t=this._spec;r.length;)t=t[r.shift()]}return de(t,"object")&&Object.keys(t).forEach((function(n){t[n]=e._resolveRef(t[n])})),t}}]),s}(Oe),He={b:"channel_ban",C:"ctcp_block",c:"colour_filter",e:"ban_exemption",F:"enable_forwarding",f:"forward",g:"free_invite",I:"invite_exemption",j:"join_throttle",k:"password",l:"join_limit",L:"large_ban_list",m:"moderated",n:"prevent_external_send",P:"permanent",p:"privat",Q:"block_forwarded_users",q:"quiet",r:"block_unidentified",s:"secret",S:"secure_connection_only",t:"ops_topic"},qe={a:"&",h:"%",o:"@",q:"~",v:"+"},Fe={a:"admin",B:"bot",h:"half_operator",i:"invisible",I:"whois_hide_online",o:"operator",p:"whois_hide_channels",R:"privmsg_from_registered_only",r:"registered",S:"service_bot",T:"ctcp_block",t:"vhost",v:"voice",W:"whois_notifications",x:"cloaked_hostname",z:"secure_connection",Z:"secure_connection_only"},Ke=[];function We(n){var e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R,r=[];function o(t){if(T(n,t)&&(n=t,e)){for(var o=!Ke.length,i=0;i<r.length;i+=1){var a=r[i];a[1](),Ke.push(a,n)}if(o){for(var c=0;c<Ke.length;c+=2)Ke[c][0](Ke[c+1]);Ke.length=0}}}function i(e){o(e(n))}function a(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R,c=[i,a];return r.push(c),1===r.length&&(e=t(o)||R),i(n),function(){var n=r.indexOf(c);-1!==n&&r.splice(n,1),0===r.length&&(e(),e=null)}}return{set:o,update:i,subscribe:a}}function Ge(n,e,t){var r=!Array.isArray(n),o=r?[n]:n,i=e.length<2;return{subscribe:We(t,(function(n){var t=!1,a=[],c=0,u=R,s=function(){if(!c){u();var t=e(r?a[0]:a,n);i?n(t):u=j(t)?t:R}},f=o.map((function(n,e){return P(n,(function(n){a[e]=n,c&=~(1<<e),t&&s()}),(function(){c|=1<<e}))}));return t=!0,s(),function(){M(f),u()}})).subscribe}}
/*! Copyright Twitter Inc. and other contributors. Licensed under MIT */var Ye=function(){var n={base:"https://twemoji.maxcdn.com/v/12.1.5/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:function(n){var e="string"==typeof n?parseInt(n,16):n;if(e<65536)return c(e);return c(55296+((e-=65536)>>10),56320+(1023&e))},toCodePoint:v},onerror:function(){this.parentNode&&this.parentNode.replaceChild(u(this.alt,!1),this)},parse:function(e,t){t&&"function"!=typeof t||(t={callback:t});return("string"==typeof e?d:l)(e,{callback:t.callback||s,attributes:"function"==typeof t.attributes?t.attributes:h,base:"string"==typeof t.base?t.base:n.base,ext:t.ext||n.ext,size:t.folder||(r=t.size||n.size,"number"==typeof r?r+"x"+r:r),className:t.className||n.className,onerror:t.onerror||n.onerror});var r},replace:m,test:function(n){t.lastIndex=0;var e=t.test(n);return t.lastIndex=0,e}},e={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},t=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[#*0-9]\ufe0f?\u20e3|(?:[©®\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5\udeeb\udeec\udef4-\udefa\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd71\udd73-\udd76\udd7a-\udda2\udda5-\uddaa\uddae-\uddb4\uddb7\uddba\uddbc-\uddca\uddd0\uddde-\uddff\ude70-\ude73\ude78-\ude7a\ude80-\ude82\ude90-\ude95]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,r=/\uFE0F/g,o=String.fromCharCode(8205),i=/[&<>'"]/g,a=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,c=String.fromCharCode;return n;function u(n,e){return document.createTextNode(e?n.replace(r,""):n)}function s(n,e){return"".concat(e.base,e.size,"/",n,e.ext)}function f(n){return v(n.indexOf(o)<0?n.replace(r,""):n)}function l(n,e){for(var r,o,i,c,s,l,d,p,h,m,v,g,$,y=function n(e,t){for(var r,o,i=e.childNodes,c=i.length;c--;)3===(o=(r=i[c]).nodeType)?t.push(r):1!==o||"ownerSVGElement"in r||a.test(r.nodeName.toLowerCase())||n(r,t);return t}(n,[]),b=y.length;b--;){for(i=!1,c=document.createDocumentFragment(),l=(s=y[b]).nodeValue,p=0;d=t.exec(l);){if((h=d.index)!==p&&c.appendChild(u(l.slice(p,h),!0)),g=f(v=d[0]),p=h+v.length,$=e.callback(g,e),g&&$){for(o in(m=new Image).onerror=e.onerror,m.setAttribute("draggable","false"),r=e.attributes(v,g))r.hasOwnProperty(o)&&0!==o.indexOf("on")&&!m.hasAttribute(o)&&m.setAttribute(o,r[o]);m.className=e.className,m.alt=v,m.src=$,i=!0,c.appendChild(m)}m||c.appendChild(u(v,!1)),m=null}i&&(p<l.length&&c.appendChild(u(l.slice(p),!0)),s.parentNode.replaceChild(c,s))}return n}function d(n,e){return m(n,(function(n){var t,r,o=n,a=f(n),c=e.callback(a,e);if(a&&c){for(r in o="<img ".concat('class="',e.className,'" ','draggable="false" ','alt="',n,'"',' src="',c,'"'),t=e.attributes(n,a))t.hasOwnProperty(r)&&0!==r.indexOf("on")&&-1===o.indexOf(" "+r+"=")&&(o=o.concat(" ",r,'="',t[r].replace(i,p),'"'));o=o.concat("/>")}return o}))}function p(n){return e[n]}function h(){return null}function m(n,e){return String(n).replace(t,e)}function v(n,e){for(var t=[],r=0,o=0,i=0;i<n.length;)r=n.charCodeAt(i++),o?(t.push((65536+(o-55296<<10)+(r-56320)).toString(16)),o=0):55296<=r&&r<=56319?o=r:t.push(r.toString(16));return t.join(e||"-")}}(),Ve=Object.prototype.hasOwnProperty,Je=function(){for(var n=[],e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n}(),Ze=function(n,e){for(var t=e&&e.plainObjects?Object.create(null):{},r=0;r<n.length;++r)void 0!==n[r]&&(t[r]=n[r]);return t},Qe={arrayToObject:Ze,assign:function(n,e){return Object.keys(e).reduce((function(n,t){return n[t]=e[t],n}),n)},compact:function(n){for(var t=[{obj:{o:n},prop:"o"}],r=[],o=0;o<t.length;++o)for(var i=t[o],a=i.obj[i.prop],c=Object.keys(a),u=0;u<c.length;++u){var s=c[u],f=a[s];"object"===e(f)&&null!==f&&-1===r.indexOf(f)&&(t.push({obj:a,prop:s}),r.push(f))}return function(n){for(var e;n.length;){var t=n.pop();if(e=t.obj[t.prop],Array.isArray(e)){for(var r=[],o=0;o<e.length;++o)void 0!==e[o]&&r.push(e[o]);t.obj[t.prop]=r}}return e}(t)},decode:function(n){try{return decodeURIComponent(n.replace(/\+/g," "))}catch(e){return n}},encode:function(n){if(0===n.length)return n;for(var e="string"==typeof n?n:String(n),t="",r=0;r<e.length;++r){var o=e.charCodeAt(r);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?t+=e.charAt(r):o<128?t+=Je[o]:o<2048?t+=Je[192|o>>6]+Je[128|63&o]:o<55296||o>=57344?t+=Je[224|o>>12]+Je[128|o>>6&63]+Je[128|63&o]:(r+=1,o=65536+((1023&o)<<10|1023&e.charCodeAt(r)),t+=Je[240|o>>18]+Je[128|o>>12&63]+Je[128|o>>6&63]+Je[128|63&o])}return t},isBuffer:function(n){return null!=n&&!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))},isRegExp:function(n){return"[object RegExp]"===Object.prototype.toString.call(n)},merge:function n(t,r,o){if(!r)return t;if("object"!==e(r)){if(Array.isArray(t))t.push(r);else{if("object"!==e(t))return[t,r];(o.plainObjects||o.allowPrototypes||!Ve.call(Object.prototype,r))&&(t[r]=!0)}return t}if("object"!==e(t))return[t].concat(r);var i=t;return Array.isArray(t)&&!Array.isArray(r)&&(i=Ze(t,o)),Array.isArray(t)&&Array.isArray(r)?(r.forEach((function(r,i){Ve.call(t,i)?t[i]&&"object"===e(t[i])?t[i]=n(t[i],r,o):t.push(r):t[i]=r})),t):Object.keys(r).reduce((function(e,t){var i=r[t];return Ve.call(e,t)?e[t]=n(e[t],i,o):e[t]=i,e}),i)}},Xe=(String.prototype.replace,Date.prototype.toISOString,Object.prototype.hasOwnProperty),nt={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:Qe.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},et=function(n,e,t){if(n){var r=t.allowDots?n.replace(/\.([^.[]+)/g,"[$1]"):n,o=/(\[[^[\]]*])/g,i=/(\[[^[\]]*])/.exec(r),a=i?r.slice(0,i.index):r,c=[];if(a){if(!t.plainObjects&&Xe.call(Object.prototype,a)&&!t.allowPrototypes)return;c.push(a)}for(var u=0;null!==(i=o.exec(r))&&u<t.depth;){if(u+=1,!t.plainObjects&&Xe.call(Object.prototype,i[1].slice(1,-1))&&!t.allowPrototypes)return;c.push(i[1])}return i&&c.push("["+r.slice(i.index)+"]"),function(n,e,t){for(var r=e,o=n.length-1;o>=0;--o){var i,a=n[o];if("[]"===a)i=(i=[]).concat(r);else{i=t.plainObjects?Object.create(null):{};var c="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,u=parseInt(c,10);!isNaN(u)&&a!==c&&String(u)===c&&u>=0&&t.parseArrays&&u<=t.arrayLimit?(i=[])[u]=r:i[c]=r}r=i}return r}(c,e,t)}},tt=function(n,e){var t=e?Qe.assign({},e):{};if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(t.ignoreQueryPrefix=!0===t.ignoreQueryPrefix,t.delimiter="string"==typeof t.delimiter||Qe.isRegExp(t.delimiter)?t.delimiter:nt.delimiter,t.depth="number"==typeof t.depth?t.depth:nt.depth,t.arrayLimit="number"==typeof t.arrayLimit?t.arrayLimit:nt.arrayLimit,t.parseArrays=!1!==t.parseArrays,t.decoder="function"==typeof t.decoder?t.decoder:nt.decoder,t.allowDots="boolean"==typeof t.allowDots?t.allowDots:nt.allowDots,t.plainObjects="boolean"==typeof t.plainObjects?t.plainObjects:nt.plainObjects,t.allowPrototypes="boolean"==typeof t.allowPrototypes?t.allowPrototypes:nt.allowPrototypes,t.parameterLimit="number"==typeof t.parameterLimit?t.parameterLimit:nt.parameterLimit,t.strictNullHandling="boolean"==typeof t.strictNullHandling?t.strictNullHandling:nt.strictNullHandling,""===n||null==n)return t.plainObjects?Object.create(null):{};for(var r="string"==typeof n?function(n,e){for(var t={},r=e.ignoreQueryPrefix?n.replace(/^\?/,""):n,o=e.parameterLimit===1/0?void 0:e.parameterLimit,i=r.split(e.delimiter,o),a=0;a<i.length;++a){var c,u,s=i[a],f=s.indexOf("]="),l=-1===f?s.indexOf("="):f+1;-1===l?(c=e.decoder(s,nt.decoder),u=e.strictNullHandling?null:""):(c=e.decoder(s.slice(0,l),nt.decoder),u=e.decoder(s.slice(l+1),nt.decoder)),Xe.call(t,c)?t[c]=[].concat(t[c]).concat(u):t[c]=u}return t}(n,t):n,o=t.plainObjects?Object.create(null):{},i=Object.keys(r),a=0;a<i.length;++a){var c=i[a],u=et(c,r[c],t);o=Qe.merge(o,u,t)}return Qe.compact(o)};function rt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var ot=new(function(n){u(s,n);var t,c=(t=s,function(){var n,e=a(t);if(rt()){var r=a(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return i(this,n)});function s(){var n;return r(this,s),(n=c.call(this)).prop("ro","basePath",(function(){return n._basePath})),n.prop("ro","hash",(function(){return(n._location.hash||"").replace(/^#/,"")})),n.prop("ro","path",(function(){return n._path})),n.prop("ro","params",(function(){return n._params})),n.prop("ro","query",(function(){return n._query})),n.prop("rw","activeMenu",""),n.prop("rw","baseUrl",""),n.prop("rw","component",null),n.prop("rw","match",""),n.prop("rw","requireLogin",!1),n.prop("rw","state",{}),n.prop("rw","title",document.title||""),n.prop("persist","lastUrl",""),n._history=window.history,n._location=window.location,n._onClick=n._onClick.bind(o(n)),n._onpopstate=n._onpopstate.bind(o(n)),n._basePath="",n._params={},n._path="/",n._query={},n._routes=[],n}return C(s,[{key:"conversationPath",value:function(n){var e=["","chat"];return n.connection_id&&e.push(n.connection_id),n.conversation_id&&e.push(n.conversation_id),e.map((function(n){return encodeURIComponent(n)})).join("/")}},{key:"go",value:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.replace){var r=[!0,this.state];t=r[0],e=r[1]}0==n.indexOf(this.baseUrl)&&(n=n.substr(this.baseUrl.length));var o=this.baseUrl+n;if(o==this._location.href)return this;this._history[t?"replaceState":"pushState"](e,this.title,o),this.render(o,e)}},{key:"param",value:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=this.params;if(t.hasOwnProperty(n))return t[n];var r=this.query;return r.hasOwnProperty(n)?r[n]:e}},{key:"render",value:function(n,t){var r=this;this._started||(window.addEventListener("click",this._onClick),window.addEventListener("popstate",this._onpopstate),this._started=!0),n||(n=this._location.href),t||(t=this.state),this._urlToProps(n),this._params={};for(var o=function(n){var e=r._routes[n],o=r._path.match(e.re);if(!o)return"continue";for(var i=0;i<e.names.length;i++)r._params[e.names[i]]=decodeURIComponent(o[i+1]);r.update({activeMenu:"",match:e.path,state:t}),e.cb(r);var a=document.createEvent("CustomEvent");return a.initCustomEvent("routerender",!1,!1,{}),setTimeout((function(){return document.dispatchEvent(a)}),1),{v:r}},i=0;i<this._routes.length;i++){var a=o(i);switch(a){case"continue":continue;default:if("object"===e(a))return a.v}}throw console.log({abs:n,routes:this._routes}),'[Route] No route for "'+n+'".'}},{key:"subscribe",value:function(n){return n(this),this.on("update",n)}},{key:"to",value:function(n,e){var t=[],r=[];n.split("/").forEach((function(n,e){var o=n;0==n.indexOf("*")?(o="(.*)",t.push(String(n.slice(1)||e))):0==n.indexOf(":")&&(o="([^/]+)",t.push(String(n.slice(1)||e))),r.push(o)})),this._routes.push({cb:e,names:t,path:n,re:new RegExp("^"+r.join("/")+"$")})}},{key:"update",value:function(n){return n.baseUrl&&(n.baseUrl=n.baseUrl.replace(/\/+$/,""),this._basePath=new URL(n.baseUrl).pathname.replace(/\/+$/,"")),$(a(s.prototype),"update",this).call(this,n),n.baseUrl&&this._urlToProps(location.href),this}},{key:"urlFor",value:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.match(/^\w+:/)||n.match(/^#/)?n:this.basePath+n,r=Object.keys(e).sort().filter((function(n){return!de(e[n],"undef")})).map((function(n){return n+"="+encodeURIComponent(e[n])})).join("&");return t+(r?"?"+r:"")}},{key:"urlToForm",value:function(n){var e=this;Object.keys(this.query).forEach((function(t){var r=e.query[t],o=n[t];o&&o.tagName&&("checkbox"==o.type?o.checked=!!r:o.value=r,o.syncValue&&o.syncValue())}))}},{key:"wsUrlFor",value:function(n){return(n.match(/^\w+:/)?n:this.baseUrl+n).replace(/^http/,"ws")}},{key:"_onClick",value:function(n){if(!(n.metaKey||n.ctrlKey||n.shiftKey||n.defaultPrevented)){var e=n.target&&n.target.closest("a");if(e&&e.href){if("_self"==e.target)if((0==e.href.indexOf("/")?this.baseUrl+e.href:e.href)==location.href)return location.reload();if(!e.hasAttribute("download")&&!e.hasAttribute("target")){var t=e&&e.href.match(/#activeMenu:(\w*)/);if(t){if(ce(n.target,".sidebar-left")&&!e)return;this.update({activeMenu:t[1]==this.activeMenu?"":t[1]}),n.preventDefault()}var r=e.getAttribute("href")||"";0==r.indexOf(this.baseUrl)&&(r=r.substr(this.baseUrl.length)),0==r.indexOf(this.basePath)&&(r=r.substr(this.basePath.length)),0==r.indexOf("/")&&(this.go(r,{},e.hasAttribute("replace")),n.preventDefault())}}}}},{key:"_onpopstate",value:function(n){this.render(this._location.href,n.state)}},{key:"_pathWithoutPrefix",value:function(n){return 0==n.indexOf(this.basePath)?n.substr(this.basePath.length):n}},{key:"_urlToProps",value:function(n){var e=n.substr(this.baseUrl.length).split("#")[0].split("?");this._query=2==e.length?tt(e.pop()):{},this._path=e[0]}}]),s}(Oe)),it={},at={},ct=new RegExp("\\b[a-z]{2,5}://\\S+","g"),ut={":confused:":":/",":disappointed:":":(",":grin:":";D",":heart:":"&lt;3",":kissing:":":-*",":open_mouth:":":O",":slight_smile:":":)",":smiley:":":D",":stuck_out_tongue:":":P",":thumbsup:":"(Y)",":wink:":";)"},st=new RegExp("(^|\\s)(:\\w+:|"+Object.keys(ut).map((function(n){return ve(ut[n])})).join("|")+")(?=\\W|$)","gi");function ft(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"single";return window.__emojiList&&(window.__emojiList.forEach((function(n){if(":"==(n.shortname||"")[0]){if(ut[n.shortname]&&(at[ut[n.shortname]]=n),at[n.shortname]=n,n.category){var e=":"+n.category;it[e]||(it[e]=[]),it[e].push(n)}n.shortname.match(/(_|:)\w/g).forEach((function(e){it[e]||(it[e]=[]),it[e].push(n)})),delete n.category,delete n.html,delete n.order,delete n.unicode}})),delete window.__emojiList),"group"==e?it[n]||[]:at[n]||{}}function lt(n){var e={};return[$t,vt,gt,pt,mt,ht,dt].forEach((function(t){n=t(n,e)})),n}function dt(n){return n.replace(/^&gt;\s(.*)/,(function(n,e){return"<blockquote>"+e+"</blockquote>"}))}function pt(n){return n.replace(/(\\?)`([^`]+)`/g,(function(n,e,t){return e?n.replace(/^\\/,""):"<code>"+t+"</code>"}))}function ht(n){return Ye.parse(n.replace(st,(function(n,e,t){return e+(ft(t).emoji||t)})))}function mt(n){return n.replace(/(^|\s)(\\?)(\*+)(\w[^<]*?)\3/g,(function(n,e,t,r,o){return 1==r.length?t?n.replace(/^\\/,""):e+"<em>"+o+"</em>":2==r.length?t?n.replace(/^\\/,""):e+"<strong>"+o+"</strong>":3==r.length?t?n.replace(/^\\/,""):e+"<em><strong>"+o+"</strong></em>":n}))}function vt(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.replace(/\[([a-zA-Z][^\]]+)\]\(([^)]+)\)/g,(function(n,t,r){var o=r.match(/^\s*(\w+):/)||["",""];if(o[1]&&-1==["http","https","mailto"].indexOf(o[1]))return n;e.mdLinks=!0;var i=r.substring(0,1),a=-1!=["/","#"].indexOf(i)?"":' target="_blank"';return'<a href="'+ot.urlFor(r)+'"'+a+">"+t+"</a>"}))}function gt(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.mdLinks?n:n.replace(ct,(function(n){var e=n.match(/^(.*?)(&\w+;|\W)?$/);return'<a href="'+e[1]+'" target="_blank">'+e[1]+"</a>"+(e[2]||"")})).replace(/mailto:(\S+)/,(function(n,e){return-1!=n.indexOf('">')?n:'<a href="'+n+'" target="_blank">'+e+"</a>"}))}function $t(n){var e={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"};return n.replace(/[&<>"']/g,(function(n){return e[n]}))}function yt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var bt=new(function(n){u(s,n);var e,o,c=(e=s,function(){var n,t=a(e);if(yt()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function s(){var n;return r(this,s),(n=c.call(this)).prop("cookie","lang",""),n.prop("ro","dictionaries",{}),n.prop("ro","languages",(function(){return n._languages})),n.prop("ro","languageOptions",(function(){return n._languageOptions})),n._languages=[],n._languageOptions=[],n}return C(s,[{key:"l",value:function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];var o=this.dictionaries[this.lang]||{},i=String(o[n]||n);return i.replace(/(%?)%(\d+)/g,(function(n,e,r){return"%"==e?e+r:t[r-1]}))}},{key:"load",value:(o=f(t.mark((function n(e){var r,o=this;return t.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e||(e=this.lang||document.documentElement.getAttribute("lang")),n.next=3,Be("/api","getDictionary",{lang:e}).perform();case 3:return r=n.sent,this.dictionaries[e]=r.res.body.dictionary,this._languages=r.res.body.available_languages||{},this._languageOptions=Object.keys(this._languages).sort().map((function(n){return[n,o._languages[n].language_team.replace(/\s*<.*/,"")]})),n.abrupt("return",this.update({lang:e}));case 8:case"end":return n.stop()}}),n,this)}))),function(n){return o.apply(this,arguments)})},{key:"md",value:function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return lt(this.l.apply(this,[n].concat(t)))}}]),s}(Oe)),wt=Ge(bt,(function(n){return function(){return n.l.apply(n,arguments)}})),_t=Ge(bt,(function(n){return function(){return n.md.apply(n,arguments)}}));function kt(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function xt(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?kt(Object(t),!0).forEach((function(e){te(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):kt(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function Et(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Ot=new(function(n){u(o,n);var e,t=(e=o,function(){var n,t=a(e);if(Et()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function o(){var n;return r(this,o),(n=t.call(this)).Notification=window.Notification||{permission:"denied"},n.prop("persist","notificationCloseDelay",5e3),n.prop("persist","wantNotifications",null),n.prop("ro","appHasFocus",(function(){return document.hasFocus()})),n.prop("rw","desktopAccess",n.Notification.permission),n}return C(o,[{key:"requestDesktopAccess",value:function(){var n=this;return this.Notification.requestPermission?(this.Notification.requestPermission((function(e){return n.update({desktopAccess:e})})),this):this.update({desktopAccess:this.Notification.permission})}},{key:"show",value:function(n){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.title||(t.title=document.title),!this.wantNotifications)return this._showInConsole(n,t);if("granted"!=this.desktopAccess)return this.showInApp(n,t);var r=new Notification(t.title,xt({},t,{body:n}));return r.onclick=function(n){return e._onClick(n,r,t)},setTimeout((function(){return r.close()}),this.notificationCloseDelay),r}},{key:"showInApp",value:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.title||(e.title=document.title);var t=document.createElement("div"),r=xt({},e,{body:n,close:function(){t.remove(),r.closed=!0},target:"app"});return t.className="notify-notification fade-in",t.innerHTML='<a href="#close" class="notify-notification__close"></a><h6 class="notify-notification__title"></h6><div class="notify-notification__content"></div>',t.querySelector("a").addEventListener("click",(function(n){n.preventDefault(),r.close()})),t.querySelector("h6").textContent=e.title,t.querySelector("div").textContent=n,-1==e.closeAfter?t.querySelector("a").remove():setTimeout((function(){return r.close()}),e.closeAfter||this.notificationCloseDelay),setTimeout((function(){return t.classList.add("is-visible")}),1),document.body.insertBefore(t,document.body.querySelector(".notify-notification")),r}},{key:"_onClick",value:function(n,e,t){e.close(),window.focus(),this.emit("click",xt({},t,{sourceEvent:n}))}},{key:"_showInConsole",value:function(n,e){return console.info("[Notify]",n,e),xt({},e,{body:n,close:function(){},target:"console"})}}]),o}(Oe));function St(n){if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(n=function(n,e){if(!n)return;if("string"==typeof n)return Ct(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ct(n,e)}(n))){var e=0,t=function(){};return{s:t,n:function(){return e>=n.length?{done:!0}:{done:!1,value:n[e++]}},e:function(n){throw n},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,a=!1;return{s:function(){r=n[Symbol.iterator]()},n:function(){var n=r.next();return i=n.done,n},e:function(n){a=!0,o=n},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}function Ct(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Rt(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function Nt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var At=function n(e){return n.singletons[e]||(n.singletons[e]=new Mt)};At.singletons={};var Dt=[];Dt[WebSocket.CONNECTING]="connecting",Dt[WebSocket.OPEN]="open",Dt[WebSocket.CLOSING]="closing",Dt[WebSocket.CLOSED]="closed";var Mt=function(n){u(o,n);var e,t=(e=o,function(){var n,t=a(e);if(Nt()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function o(n){var e;return r(this,o),(e=t.call(this)).prop("persist","debug",""),e.prop("ro","readyState",(function(){return e.ws.readyState})),e.prop("ro","readyStateHuman",(function(){return Dt[e.ws.readyState]})),e.prop("ro","waiting",new Map),e.prop("rw","closed",0),e.prop("rw","error",""),e.prop("rw","keepaliveInterval",1e4),e.prop("rw","url",""),e.id=0,e.queue=[],e.keepClosed=!0,e._resetWebSocket(),e}return C(o,[{key:"close",value:function(n,e){if("number"!=typeof n){var t=[1e3,n];n=t[0],e=t[1]}return this.ws.close&&this.ws.close(n,e),this.keepClosed=!0,this._keepAliveStop(),this._reconnectStop(),this._resetWebSocket(),this}},{key:"deflateMessage",value:function(n){return JSON.stringify(n)}},{key:"deleteWaitingMessage",value:function(n){this.waiting.delete(n),this.update({waiting:!0})}},{key:"getWaitingMessages",value:function(n){var e=this;return 0==arguments.length?Array.from(this.waiting.values()):n.map((function(n){return e.waiting.get(n)}))}},{key:"inflateMessage",value:function(n){return JSON.parse(n)}},{key:"is",value:function(n){return this.ws.readyState==WebSocket[n.toUpperCase()]}},{key:"open",value:function(){var n=this;if(this.ws.close)return this;try{if(!this.url)throw"Can't open WebSocket connection without URL.";this.ws=new WebSocket(this.url),this.ws.onclose=function(e){return n._onClose(e)},this.ws.onerror=function(e){return n._onError(e)},this.ws.onmessage=function(e){return n._onMessage(e)},this.ws.onopen=function(e){return n._onOpen(e)},this.keepClosed=!1,this._keepAliveStart(),this._reconnectStop(),this.update({error:"",readyState:!0})}catch(n){this._onError(n.message?n:{message:String(n)})}return this}},{key:"reconnectIn",value:function(n){return 1008!==n.code&&1011!==n.code&&(this.closed<=1?1e3:this.closed>5?1e4:2*this.closed*1e3)}},{key:"send",value:function(n){var e=n.id||String(++this.id);return this.queue.push(function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Rt(Object(t),!0).forEach((function(e){te(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Rt(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}({},n,{id:e})),this.open(),this._dequeue(),this.on("message_"+e)}},{key:"_dequeue",value:function(){var n=this.queue;for(n.length&&this.update({waiting:!0});n.length;){if(this.ws.readyState!=WebSocket.OPEN)return;var e=n.shift();this.ws.send(this.deflateMessage(e)),e.waitingForResponse=!0,e.ts||(e.ts=new Pe),this.waiting.set(e.id,e)}}},{key:"_keepAliveStart",value:function(){var n=this;this._keepAliveStop(),this.keepaliveTid=setInterval((function(){return n.ws.readyState==WebSocket.OPEN&&n.ws.send("{}")}),this.keepaliveInterval)}},{key:"_keepAliveStop",value:function(){this.keepaliveTid&&clearTimeout(this.keepaliveTid),delete this.keepaliveTid}},{key:"_onClose",value:function(n){this.debug&&console.log("[Socket:close]",(new Pe).toISOString(),n);var e,t=St(this.waiting);try{for(t.s();!(e=t.n()).done;){var r=v(e.value,2),o=r[0],i=r[1];Object.keys(i).length<=1&&this.waiting.delete(o),i.waitingForResponse=!1}}catch(n){t.e(n)}finally{t.f()}this._keepAliveStop(),this._resetWebSocket(),this.update({closed:this.closed+1,readyState:!0,waiting:!0}),this._reconnectStart(this.reconnectIn(n))}},{key:"_onError",value:function(n){var e=String(n.message||n);e&&0!=e.indexOf("[")||(e="Could not connect."),this.debug&&console.log("[Socket:error]",(new Pe).toISOString(),e,n),this.update({error:e})}},{key:"_onMessage",value:function(n){var e=this.inflateMessage(n.data);if(e.id&&(this.emit("message_"+e.id,e),this.waiting.delete(e.id)),this.emit("message",e),this.update({waiting:!0}),e.errors&&!e.id){var t,r=St(this.waiting.keys());try{for(r.s();!(t=r.n()).done;){var o=t.value;this.emit("message_"+o,e)}}catch(n){r.e(n)}finally{r.f()}this.waiting.clear()}}},{key:"_onOpen",value:function(n){this.debug&&console.log("[Socket:open]",(new Pe).toISOString(),n),this.update({closed:0,error:"",readyState:!0}),this._dequeue()}},{key:"_reconnectStart",value:function(n){var e=this;return this._reconnectStop(),this.debug&&console.log("[Socket:reconnect]",(new Pe).toISOString(),n),!0===n?this.open():"number"!=typeof n?this.keepClosed=!0:void(this.reconnectTid=setTimeout((function(){return e.open()}),n))}},{key:"_reconnectStop",value:function(){this.reconnectTid&&clearTimeout(this.reconnectTid),delete this.reconnectTid}},{key:"_resetWebSocket",value:function(){this.ws={readyState:WebSocket.CLOSED}}}]),o}(Oe);function jt(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function Tt(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?jt(Object(t),!0).forEach((function(e){te(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):jt(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function Pt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Lt=new RegExp("^[#&]"),It=function(n,e){return e.modes.operator||!1-n.modes.operator||e.modes.voice||!1-n.modes.voice||n.name.localeCompare(e.name)},Ut=0,Bt=function(n){u(l,n);var e,o,c,s=(e=l,function(){var n,t=a(e);if(Pt()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function l(n){var e;r(this,l),e=s.call(this);var t=[n.connection_id,n.conversation_id,""].filter((function(n){return void 0!==n})).join(":");return e.prop("persist","userInput","",{key:t+"userInput"}),e.prop("ro","_participants",new De([],{sorter:It})),e.prop("ro","color",we(n.conversation_id||n.connection_id||"")),e.prop("ro","connection_id",n.connection_id||""),e.prop("ro","is_private",(function(){return e.conversation_id&&!Lt.test(e.name)})),e.prop("ro","nParticipants",(function(){return e.participants().length})),e.prop("ro","path",ot.conversationPath(n)),e.prop("rw","errors",0),e.prop("rw","historyStartAt",null),e.prop("rw","historyStopAt",null),e.prop("rw","messages",[]),e.prop("rw","modes",{}),e.prop("rw","name",n.name||n.conversation_id||n.connection_id||"ERR"),e.prop("rw","status","pending"),e.prop("rw","topic",n.topic||""),e.prop("rw","unread",n.unread||0),e.prop("rw","videoService",n.videoService||""),e.prop("rw","window",null),n.hasOwnProperty("conversation_id")?(e.prop("ro","conversation_id",n.conversation_id),e.prop("ro","title",(function(){return[e.name,e.connection_id].join(" - ")})),e.prop("rw","frozen",n.frozen||"")):(e.prop("ro","frozen",(function(){return e._calculateFrozen()})),e.prop("ro","title",(function(){return e.name}))),n.conversation_id&&e.prop("persist","wantNotifications",e.is_private,{key:n.conversation_id+":wantNotifications"}),e.socket=n.socket||At("/events"),e._addOperations(),e}return C(l,[{key:"addMessage",value:function(n){if(this._maybeIncreaseUnread(n),this._maybeNotify(n),this.historyStopAt||"private"!=n.type)return this.addMessages("push",[n])}},{key:"addMessages",value:function(n,e){var t=0,r=e.length;switch(n){case"push":t=this.messages.length,r=(e=this.messages.concat(e)).length;break;case"unshift":e=e.concat(this.messages)}for(var o=t;o<r;o++){var i=e[o];if(!i.hasOwnProperty("markdown")){if(!i.from){var a=[!0,this.connection_id||"Convos","Convos"];i.internal=a[0],i.from=a[1],i.fromId=a[2]}i.fromId||(i.fromId=i.from.toLowerCase()),i.type||(i.type="notice"),i.vars&&(i.message=bt.l.apply(bt,[i.message].concat(O(i.vars)))),i.id="msg_"+ ++Ut,i.color="Convos"==i.fromId?"inherit":we(i.from.toLowerCase()),i.ts=new Pe(i.ts),i.embeds=(i.message.match(/https?:\/\/(\S+)/g)||[]).map((function(n){return n.replace(/(\W)?$/,"")})),i.markdown=lt(i.message)}}return this.update({messages:e}),this}},{key:"is",value:function(n){return"connection"==n?!this.conversation_id:"conversation"==n?this.conversation_id&&!this.is("notifications"):"frozen"==n?this.frozen&&!0:"locked"==n?"Invalid password."==this.frozen:"not_found"==n?"Not found."==this.frozen:"notifications"!=n&&("private"==n?this.is_private:"search"!=n&&("unread"==n?this.unread&&!0:this.status==n))}},{key:"load",value:(c=f(t.mark((function n(){var e,r,o,i=arguments;return t.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=i.length>0&&void 0!==i[0]?i[0]:{},!this._skipLoad(e)){n.next=3;break}return n.abrupt("return",this);case 3:return this.update({status:"loading"}),e.limit||(e.limit=e.around?30:40),n.next=7,this.messagesOp.perform(Tt({},e,{connection_id:this.connection_id,conversation_id:this.conversation_id}));case 7:return this.update({status:this.messagesOp.status}),r=this.messagesOp.res.body,o=[],(e.around||!e.after&&!e.before)&&(o.push.apply(o,this.messages.filter((function(n){return n.internal}))),this.update({messages:[]})),this.addMessages(e.before?"unshift":"push",r.messages||[]),this.addMessages("push",o),this._setEndOfStream(e,r),n.abrupt("return",this);case 15:case"end":return n.stop()}}),n,this)}))),function(){return c.apply(this,arguments)})},{key:"findParticipant",value:function(n){return this._participants.get(this._participantId(de(n,"undef")?"":n))}},{key:"openWindow",value:function(n,e){var t=this,r=window.open(n,e||this.path.replace(/\W/g,"_").replace(/^_+/,""),"");return["beforeunload","close"].forEach((function(n){return r.addEventListener(n,(function(){return t.update({window:null})}))})),this.update({window:r})}},{key:"participants",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.forEach((function(e){e.nick||(e.nick=e.name||"");var t=n._participantId(e.nick),r=n._participants.get(t);r&&(Object.keys(e).forEach((function(n){r[n]=e[n]})),e=r),e.modes||(e.modes={}),n._calculateModes(Fe,e.mode,e.modes),n._participants.set(t,Tt({name:e.nick},e,{color:we(t),id:t,ts:new Pe}))})),e.length&&this.update({_participants:!0}),this._participants.toArray()}},{key:"send",value:function(n){return"string"==typeof n&&(n={message:n}),this.socket.send(Tt({method:"send",connection_id:this.connection_id,conversation_id:this.conversation_id||""},n))}},{key:"markAsRead",value:(o=f(t.mark((function n(){return t.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.markAsReadOp){n.next=2;break}return n.abrupt("return");case 2:return this.update({errors:0,unread:0}),n.next=5,this.markAsReadOp.perform({connection_id:this.connection_id,conversation_id:this.conversation_id});case 5:return n.abrupt("return",this.update({unread:0}));case 6:case"end":return n.stop()}}),n,this)}))),function(){return o.apply(this,arguments)})},{key:"update",value:function(n){return this._loadParticipants(),$(a(l.prototype),"update",this).call(this,n)}},{key:"videoInfo",value:function(){var n=encodeURIComponent([this.connection_id,this.conversation_id].join("-")),e={icon:this.window?"video-slash":"video",roomName:n};if(!this.conversation_id||!this.videoService)return e;try{var t=this._participants.toArray().find((function(n){return n.me})),r=new URL(this.videoService).host;e.convosUrl=ot.urlFor("/video/"+r+"/"+n,{nick:t&&t.nick||void 0}),e.realUrl=this.videoService.replace(/\/*$/,"/")+n}catch(n){console.error("videoInfo",n)}return e}},{key:"wsEventMode",value:function(n){n.nick?(this.participants([{nick:n.nick,mode:n.mode}]),this.addMessage({message:"%1 got mode %2 from %3.",vars:[n.nick,n.mode,n.from]})):this.update({modes:this._calculateModes(He,n.mode,this.modes)})}},{key:"wsEventNickChange",value:function(n){var e=this._participantId(n.old_nick);if(this._participants.has(e)&&n.old_nick!=n.new_nick){this._participants.delete(e),this.participants([{nick:n.new_nick}]);var t="me"==n.type?"You (%1) changed nick to %2.":"%1 changed nick to %2.";this.addMessage({message:t,vars:[n.old_nick,n.new_nick]})}}},{key:"wsEventPart",value:function(n){var e=this.findParticipant(n.nick);e&&!e.me&&(this._participants.delete(this._participantId(n.nick)),this.update({_participants:!0}),n.silent||this.addMessage(this._partMessage(n)))}},{key:"wsEventSentClear",value:function(n){n.errors||(this.update({messages:[]}),this.addMessage({message:"History was cleared for %1.",vars:[this.name]}))}},{key:"wsEventSentNames",value:function(n){this._updateParticipants(n);var e={message:"Participants (%1): %2",vars:[]},t=this._participants.toArray().map((function(n){return(qe[n.mode]||n.mode||"")+n.name}));t.length>1&&(e.message+=" and %3.",e.vars[2]=t.pop()),e.vars[0]=t.length,e.vars[1]=t.join(", "),this.addMessage(e)}},{key:"wsEventSentTopic",value:function(n){var e=n.topic?"Topic for %1 is: %2":"No topic is set for %1.";this.addMessage({message:e,vars:[this.name,n.topic]}),this.update({topic:n.topic})}},{key:"_addOperations",value:function(){this.prop("ro","messagesOp",Be("/api","conversationMessages")),this.prop("ro","markAsReadOp",Be("/api","markConversationAsRead"))}},{key:"_calculateModes",value:function(n,e,t){var r=(e||"").match(/^(\+|-)?(.*)/)||["","+",""],o=v(r,3),i=(o[0],o[1]);o[2].split("").forEach((function(e){t[n[e]||e]="-"!=i}))}},{key:"_calculateFrozen",value:function(){return""}},{key:"_loadParticipants",value:function(){if(!this.participantsLoaded&&this.conversation_id&&this.messagesOp&&!this.is("frozen")&&this.messagesOp.is("success"))return this.participantsLoaded=!0,this.is_private?this.send("/whois "+this.conversation_id):this.send("/names").then(this._updateParticipants.bind(this))}},{key:"_maybeIncreaseUnread",value:function(n){n.from&&!n.yourself&&-1!=["action","error","private"].indexOf(n.type)&&this.update({unread:this.unread+1})}},{key:"_maybeNotify",value:function(n){if(!Ot.appHasFocus&&n.from&&!n.yourself&&-1!=["action","error","private"].indexOf(n.type)){var e=-1!=n.message.indexOf(this.videoInfo().realUrl)||-1!=n.message.indexOf(ot.urlFor("/video/"));if(e||n.highlight||this.wantNotifications){var t=n.from==this.name?n.from:bt.l("%1 in %2",n.from,this.name),r=e?bt.l('Do you want to join the %1 video chat with "%2"?',"Jitsi",this.name):n.message;this.lastNotification=Ot.show(r,{path:this.path,title:t})}}}},{key:"_noop",value:function(){}},{key:"_participantId",value:function(n){return n.toLowerCase()}},{key:"_partMessage",value:function(n){var e={message:"%1 parted.",vars:[n.nick]};return n.kicker?(e.message="%1 was kicked by %2"+(n.message?": %3":""),e.vars.push(n.kicker),e.vars.push(n.message)):n.message&&(e.message+=" Reason: %2",e.vars.push(n.message)),e}},{key:"_realMessage",value:function(n){for(var e=-1==n?-1:1,t=this.messages,r=-1==n?this.messages.length-1:0;t[r];){if(!t[r].internal)return t[r];r+=e}return null}},{key:"_setEndOfStream",value:function(n,e){if(!n.before&&!e.after){var t=e.messages.slice(-1)[0];this.update({historyStopAt:new Pe(t&&t.ts)})}if(!n.after&&!e.before){var r=e.messages[0];this.update({historyStartAt:new Pe(r&&r.ts)})}e.after&&this.update({historyStopAt:null}),e.before&&this.update({historyStartAt:null}),e.messages&&e.messages.length<=1&&this.update({historyStartAt:new Pe,historyStopAt:new Pe})}},{key:"_skipLoad",value:function(n){return!(this.messagesOp&&!this.is("loading"))||(this.messages.length?n.around?!!this.messages.find((function(e){return e.ts.toISOString()==n.around})):!(!n.before||!this.historyStartAt)||!(!n.after||!this.historyStopAt):this.is("success"))}},{key:"_updateParticipants",value:function(n){this._participants.clear(),this.participants(n.participants),n.stopPropagation()}}]),l}(Oe);function zt(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function Ht(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?zt(Object(t),!0).forEach((function(e){te(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):zt(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function qt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Ft=function(n,e){return(n.is_private||0)-(e.is_private||0)||n.name.localeCompare(e.name)},Kt=function(n){u(o,n);var e,t=(e=o,function(){var n,t=a(e);if(qt()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function o(n){var e;r(this,o),(e=t.call(this,n)).prop("ro","conversations",new De([],{sorter:Ft})),e.prop("rw","on_connect_commands",n.on_connect_commands||""),e.prop("rw","state",n.state||"queued"),e.prop("rw","wanted_state",n.wanted_state||"connected"),e.prop("rw","url","string"==typeof n.url?new Re(n.url):n.url||new Re("convos://loopback"));var i=n.me||{},a=i.nick||e.url.searchParams.get("nick")||"";return e.prop("rw","nick",a),e.prop("rw","real_host",i.real_host||e.url.hostname),e.prop("rw","server_op",i.server_op||!1),e.participants((n.service_accounts||[]).map((function(n){return{nick:n}})).concat({nick:a})),e}return C(o,[{key:"ensureConversation",value:function(n){var e=this,t=this.conversations.get(n.conversation_id);return t?t.update(n):((t=new Bt(Ht({},n,{connection_id:this.connection_id}))).on("message",(function(n){return e.emit("message",n)})),t.on("update",(function(){return e.update({conversations:!0})})),this._addDefaultParticipants(t),this.conversations.set(t.conversation_id,t),this.update({conversations:!0}),this.emit("conversationadd",t),t)}},{key:"findConversation",value:function(n){return this.conversations.get(n.conversation_id)||null}},{key:"is",value:function(n){return this.state==n||$(a(o.prototype),"is",this).call(this,n)}},{key:"removeConversation",value:function(n){var e=this.findConversation(n)||n;return this.conversations.delete(e.conversation_id),this.emit("conversationremove",e),this.update({conversations:!0})}},{key:"send",value:function(n){"string"==typeof n&&(n={message:n});var e=new RegExp("^"+this.participants().map((function(n){return n.id})).join("|")+":","i");return 0==n.message.indexOf("/")||n.message.match(e)||(n.message="/quote "+n.message),$(a(o.prototype),"send",this).call(this,n)}},{key:"update",value:function(n){return n.url&&"string"==typeof n.url&&(n.url=new Re(n.url)),n.videoService&&this.conversations.forEach((function(e){return e.update({videoService:n.videoService})})),$(a(o.prototype),"update",this).call(this,n)}},{key:"wsEventConnection",value:function(n){this.update({state:n.state}),this.addMessage(n.message?{message:"Connection state changed to %1: %2",vars:[n.state,n.message]}:{message:"Connection state changed to %1.",vars:[n.state]})}},{key:"wsEventFrozen",value:function(n){var e=this.findConversation(n),t=e&&e.frozen;this.ensureConversation(n).participants([{nick:this.nick,me:!0}]),n.frozen&&(e||this).addMessage({message:n.frozen,vars:[]}),t&&!n.frozen&&e.addMessage({message:"Connected.",vars:[]})}},{key:"wsEventMe",value:function(n){this.wsEventNickChange(n),n.server_op&&this.addMessage({message:"You are an IRC operator.",vars:[],highlight:!0}),this.update(n)}},{key:"wsEventMessage",value:function(n){return n.yourself=n.from==this.nick,n.conversation_id?this.ensureConversation(n).addMessage(n):this.addMessage(n)}},{key:"wsEventNickChange",value:function(n){var e={old_nick:n.old_nick||this.nick,new_nick:n.new_nick||n.nick,type:n.type};n.old_nick==this.nick&&(e.me=!0),$(a(o.prototype),"wsEventNickChange",this).call(this,e),this.conversations.forEach((function(n){return n.wsEventNickChange(e)}))}},{key:"wsEventError",value:function(n){var e={message:se(n)||n.frozen||"Unknown error from %1.",sent:n,type:"error",vars:n.command||[n.message]},t=(n.message||"").match(/^\/j(oin)? (\S+)/);if(t)return this.ensureConversation(Ht({},n,{conversation_id:t[2]}));var r=n.conversation_id&&n.frozen?this.ensureConversation(n):this.findConversation(n)||this;r.update({errors:this.errors+1}),r.addMessage(e)}},{key:"wsEventJoin",value:function(n){var e=this.ensureConversation(n),t=n.nick||this.nick;t==this.nick||n.silent||e.addMessage({message:"%1 joined.",vars:[t]}),e.participants([{nick:t}])}},{key:"wsEventPart",value:function(n){if(n.nick==this.nick)return this.removeConversation(n);n.conversation_id||this.conversations.forEach((function(e){return e.wsEventPart(n)}))}},{key:"wsEventQuit",value:function(n){this.wsEventPart(n)}},{key:"wsEventSentJoin",value:function(n){this.wsEventJoin(n)}},{key:"wsEventSentList",value:function(n){var e=n.args||"/*/";this.addMessage(n.done?{message:"Found %1 of %2 conversations from %3.",vars:[n.conversations.length,n.n_conversations,e]}:{message:"Found %1 of %2 conversations from %3, but conversations are still loading.",vars:[n.conversations.length,n.n_conversations,e]})}},{key:"wsEventSentMode",value:function(n){var e=this.findConversation(n)||this,t=(n.command[1]||"").match(/(\W*)(\w)$/);if(!t)return console.log("[wsEventSentMode] Unable to handle message:",n);switch(t.shift(),t[1]){case"":return e.addMessage({message:"%s has mode %s",vars:[n.conversation_id,n.mode]});case"k":return e.addMessage({message:"+"==t[0]?"Key was set.":"Key was unset."});case"b":return this._wsEventSentModeB(n,t)}}},{key:"_wsEventSentModeB",value:function(n,e){var t=this.findConversation(n)||this;if(n.banlist)n.banlist.length||t.addMessage({message:"Ban list is empty."}),n.banlist.forEach((function(n){t.addMessage({message:"Ban mask %1 set by %2 at %3.",vars:[n.mask,n.by,new Date(1e3*n.ts).toLocaleString()]})}));else{var r="+"==e[0]?"set":"removed";t.addMessage({message:"Ban mask %1 ".concat(r,"."),vars:[n.command[2]]})}}},{key:"wsEventSentQuery",value:function(n){this.ensureConversation(n)}},{key:"wsEventSentWhois",value:function(n){var e="%1 (%2@%3, %4)",t=[n.nick,n.user,n.host,n.name],r=Object.keys(n.channels).sort().map((function(e){return(qe[n.channels[e].mode]||"")+e}));n.channels=r,n.idle_for&&r.length?(e+=" has been idle for %5s in %6.",t.push(n.idle_for),t.push(r.join(", "))):n.idle_for&&!r.length?(e+="has been idle for %5s, and is not in any channels.",t.push(n.idle_for)):r.length?(e+=" is active in %5.",t.push(r.join(", "))):e+=" is not in any channels.",(this.findConversation(n)||this).addMessage({message:e,vars:t,sent:n})}},{key:"_addDefaultParticipants",value:function(n){var e=[{nick:this.nick,me:!0}];n.is_private&&e.push({nick:n.name}),n.participants(e)}},{key:"_addOperations",value:function(){this.prop("ro","markAsReadOp",Be("/api","markConnectionAsRead")),this.prop("ro","messagesOp",Be("/api","connectionMessages"))}},{key:"_calculateFrozen",value:function(){switch(this.state){case"connected":return"";case"disconnected":return"Disconnected.";case"unreachable":return"Unreachable.";default:return"Connecting..."}}}]),o}(Bt);function Wt(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function Gt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Yt=function(n){u(o,n);var e,t=(e=o,function(){var n,t=a(e);if(Gt()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function o(n){return r(this,o),t.call(this,function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Wt(Object(t),!0).forEach((function(e){te(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Wt(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}({},n,{connection_id:"",conversation_id:"notifications",is_private:!0,name:"Notifications"}))}return C(o,[{key:"addMessage",value:function(n){return this.update({unread:this.unread+1}),this.addMessages("push",[n])}},{key:"is",value:function(n){return"notifications"==n||$(a(o.prototype),"is",this).call(this,n)}},{key:"send",value:function(){return Promise.resolve({})}},{key:"_addOperations",value:function(){this.prop("ro","messagesOp",Be("/api","notificationMessages")),this.prop("ro","markAsReadOp",Be("/api","markNotificationsAsRead"))}}]),o}(Bt);function Vt(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function Jt(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Vt(Object(t),!0).forEach((function(e){te(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Vt(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function Zt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Qt=function(n){u(s,n);var e,o,c=(e=s,function(){var n,t=a(e);if(Zt()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function s(n){var e;return r(this,s),(e=c.call(this,Jt({},n,{connection_id:"",conversation_id:"search",is_private:!0,name:"Search"}))).prop("rw","query",""),e.update({status:"success"}),e}return C(s,[{key:"is",value:function(n){return"conversation"!=n&&("search"==n||$(a(s.prototype),"is",this).call(this,n))}},{key:"load",value:(o=f(t.mark((function n(e){var r,o;return t.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.is("loading")){n.next=2;break}return n.abrupt("return",this);case 2:if((r=Jt({},e)).match=e.match||e.message,null==r.match&&(r.match=""),r.match=r.match.replace(/\s*conversation:(\S+)\s*/,(function(n,e){return[" ",r.conversation_id=e][0]})).replace(/\s*from:(\S+)\s*/,(function(n,e){return[" ",r.from=e][0]})).replace(/\s*([&#]\S+)\s*/,(function(n,e){return[" ",r.conversation_id=e][0]})),r.match=r.match.trim(),r.match.match(/\S/)){n.next=9;break}return n.abrupt("return",this.update({messages:[]}).addMessages([{message:'Search query "%1" does not contain anything to search for.',vars:[e.message]}]));case 9:return this.update({messages:[],query:r.match,status:"loading"}),n.next=12,this.messagesOp.perform(r);case 12:return o=this.messagesOp.res.body,this.addMessages(r.before?"unshift":"push",o.messages||[]),n.abrupt("return",this.update({status:this.messagesOp.status}));case 15:case"end":return n.stop()}}),n,this)}))),function(n){return o.apply(this,arguments)})},{key:"send",value:function(n){return"string"==typeof n&&(n={message:n}),this.emit("send",n),Promise.resolve(n)}},{key:"_addOperations",value:function(){this.prop("ro","messagesOp",Be("/api","searchMessages")),this.prop("ro","markAsReadOp",null)}},{key:"_loadParticipants",value:function(){}}]),s}(Bt);function Xt(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function nr(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Xt(Object(t),!0).forEach((function(e){te(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Xt(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function er(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var tr=function(n){u(s,n);var e,o,c=(e=s,function(){var n,t=a(e);if(er()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function s(n){var e;return r(this,s),(e=c.call(this)).prop("ro","connections",new De),e.prop("ro","notifications",new Yt({})),e.prop("ro","search",new Qt({})),e.prop("ro","roles",new Set),e.prop("ro","unread",(function(){return e._calculateUnread()})),e.prop("persist","expandUrlToMedia",!0),e.prop("persist","ignoreStatuses",!1),e.prop("rw","activeConversation",e.notifications),e.prop("rw","email",""),e.prop("rw","forced_connection",!1),e.prop("rw","default_connection","irc://chat.freenode.net:6697/%23convos"),e.prop("rw","highlightKeywords",[]),e.prop("rw","status","pending"),e.prop("rw","videoService",""),e.socket=n.socket||At("/events"),e.socket.on("message",(function(n){return e._dispatchMessage(n)})),e.socket.on("update",(function(n){return e._onConnectionChange(n)})),e}return C(s,[{key:"conversations",value:function(n){var e=[];return this.connections.toArray().forEach((function(t){t.conversations.toArray().forEach((function(t){n&&!n(t)||e.push(t)}))})),e}},{key:"ensureConversation",value:function(n,e){var t=this;if((n=nr({},n,{videoService:this.videoService})).conversation_id){var r=this.ensureConversation({connection_id:n.connection_id},!0);return this._maybeUpgradeActiveConversation(r.ensureConversation(n))}var o=this.findConversation(n);return o?o.update(n):((o=new Kt(nr({},n))).on("conversationadd",(function(n){return t._maybeUpgradeActiveConversation(n)})),o.on("conversationremove",(function(n){return n==t.activeConversation&&t.setActiveConversation(n)})),o.on("update",(function(n){return t.update({connections:!0})})),this.connections.set(o.connection_id,o),this.update({connections:!0}),e?o:this._maybeUpgradeActiveConversation(o))}},{key:"findConversation",value:function(n){var e=this.connections.get(n.connection_id);return n.conversation_id?e&&e.findConversation(n)||null:e}},{key:"is",value:function(n){var e=this;return Array.isArray(n)?!!n.filter((function(n){return e.is(n)})).length:!!this.roles.has(n)||this.status==n}},{key:"load",value:(o=f(t.mark((function n(){var e,r,o=this;return t.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.is("loading")){n.next=2;break}return n.abrupt("return",this);case 2:return this.update({status:"loading"}),n.next=5,this.socket.send({method:"load",object:"user",params:{connections:!0,conversations:!0}});case 5:if(!(e=n.sent).errors){n.next=9;break}return this.roles.add("anonymous"),n.abrupt("return",this.update({roles:!0,status:e.errors?"error":"success"}));case 9:return r=e.user||{},this.connections.clear(),(r.connections||[]).forEach((function(n){return o.ensureConversation(nr({},n,{status:"pending"}))})),(r.conversations||[]).forEach((function(n){return o.ensureConversation(nr({},n,{status:"pending"}))})),this.notifications.update({unread:r.unread||0}),this.roles.clear(),this.roles.add(r.email?"authenticated":"anonymous"),(r.roles||[]).forEach((function(n){return o.roles.add(n)})),n.abrupt("return",this.update({email:r.email||"",default_connection:r.default_connection||"",forced_connection:r.forced_connection||!1,highlightKeywords:r.highlight_keywords||[],roles:!0,status:e.errors?"error":"success",videoService:r.video_service||""}));case 18:case"end":return n.stop()}}),n,this)}))),function(){return o.apply(this,arguments)})},{key:"removeConversation",value:function(n){var e=this.findConversation({connection_id:n.connection_id});if(n.conversation_id)return e&&e.removeConversation(n);this.connections.delete(n.connection_id),e==this.activeConversation&&this.setActiveConversation(e),this.update({connections:!0})}},{key:"setActiveConversation",value:function(n){var e=!n.connection_id&&!n.conversation_id&&this.notifications;if(e)return this.update({activeConversation:e});if(e=this.findConversation(n))return this.update({activeConversation:e});var t=nr({},n,{connection_id:n.connection_id||"",frozen:"Not found."});return["conversation_id","name"].forEach((function(e){return n.hasOwnProperty(e)&&(t[e]=n[e])})),this.update({activeConversation:t.conversation_id?new Bt(t):new Kt(t)})}},{key:"update",value:function(n){return n.videoService&&this.connections.forEach((function(e){return e.update({videoService:n.videoService})})),$(a(s.prototype),"update",this).call(this,n)}},{key:"_calculateUnread",value:function(){var n=this.activeConversation;return this.notifications.unread+this.conversations((function(n){return n.is_private})).reduce((function(e,t){return e+(t==n?0:t.unread)}),0)}},{key:"_dispatchMessage",value:function(n){n.dispatchTo=("wsEvent_"+this._getEventNameFromMessage(n)).replace(/_(\w)/g,(function(n,e){return e.toUpperCase()})),n.bubbles=!0,n.stopPropagation=function(){n.bubbles=!1},n.silent=this.ignoreStatuses,this.emit(n.dispatchTo,n),n.highlight&&this.notifications.addMessage(n);var e=this.findConversation({connection_id:n.connection_id});if(e&&(e[n.dispatchTo]&&e[n.dispatchTo](n),n.bubbles)){var t=e.findConversation(n);t&&t[n.dispatchTo]&&t[n.dispatchTo](n)}}},{key:"_getEventNameFromMessage",value:function(n){return n.errors?"error":"state"==n.event?n.type:"sent"==n.event&&n.message.match(/\/\S+/)?(n.command=n.message.split(/\s+/).filter((function(n){return n.length})),n.command[0]=n.command[0].substring(1),"sent_"+n.command[0]):n.event}},{key:"_maybeUpgradeActiveConversation",value:function(n){var e=this.activeConversation;return n.connection_id&&n.connection_id!=e.connection_id||n.conversation_id&&n.conversation_id!=e.conversation_id||this.update({activeConversation:n}),n}},{key:"_onConnectionChange",value:function(n){if(n.is("open")&&this.is("pending"))return this.load();n.is("closed")&&(this.connections.forEach((function(n){return n.update({state:"unreachable"})})),this.is("loading")||this.update({status:"pending"}))}}]),s}(Oe);function rr(n){var e=n-1;return e*e*e+1}function or(n,e){var t=e.delay,r=void 0===t?0:t,o=e.duration,i=void 0===o?400:o,a=e.easing,c=void 0===a?N:a,u=+getComputedStyle(n).opacity;return{delay:r,duration:i,easing:c,css:function(n){return"opacity: ".concat(n*u)}}}function ir(n,e){var t=e.delay,r=void 0===t?0:t,o=e.duration,i=void 0===o?400:o,a=e.easing,c=void 0===a?rr:a,u=e.x,s=void 0===u?0:u,f=e.y,l=void 0===f?0:f,d=e.opacity,p=void 0===d?0:d,h=getComputedStyle(n),m=+h.opacity,v="none"===h.transform?"":h.transform,g=m*(1-p);return{delay:r,duration:i,easing:c,css:function(n,e){return"\n\t\t\ttransform: ".concat(v," translate(").concat((1-n)*s,"px, ").concat((1-n)*l,"px);\n\t\t\topacity: ").concat(m-g*e)}}}function ar(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function cr(n){var e,t,r,o,i;return{c:function(){rn(e=Z("i"),"class",t=n[3](n[2],n[1],lr)),rn(e,"style",r=dr(n[2],n[1],n[0])),e.hidden=o=!n[2]},m:function(t,r,o){Y(t,e,r),o&&i(),i=en(e,"click",n[6])},p:function(n,i){var a=v(i,1)[0];6&a&&t!==(t=n[3](n[2],n[1],lr))&&rn(e,"class",t),7&a&&r!==(r=dr(n[2],n[1],n[0]))&&rn(e,"style",r),4&a&&o!==(o=!n[2])&&(e.hidden=o)},i:R,o:R,d:function(n){n&&V(e),i()}}}var ur={brand:"fab",regular:"far",solid:"fas"},sr={batman:"https://www.gravatar.com/avatar/ab1839667863f31e359d98364cfdef61",marcusr:"https://www.gravatar.com/avatar/6c056546d802b1a9ac186ab63f9fb632"},fr=["fas fa-anchor","fas fa-atom","fas fa-award","fas fa-balance-scale","fas fa-baseball-ball","fas fa-basketball-ball","fas fa-bicycle","fas fa-bolt","fas fa-book-reader","fas fa-candy-cane","fas fa-carrot","fas fa-cat","fas fa-chess-knight","fas fa-child","fas fa-coffee","fas fa-cookie-bite","fas fa-crow","fas fa-dice","fas fa-dog","fas fa-dove","fas fa-feather","fas fa-fish","fas fa-gem","fas fa-ghost","fas fa-hard-hat","fas fa-hat-cowboy","fas fa-hat-wizard","fas fa-hiking","fas fa-horse-head","fas fa-horse","fas fa-id-badge","fas fa-igloo","fas fa-mask","fas fa-meteor","fas fa-paint-brush","fas fa-paw","fas fa-pepper-hot","fas fa-pizza-slice","fas fa-portrait","fas fa-puzzle-piece","fas fa-rainbow","fas fa-robot","fas fa-rocket","fas fa-running","fas fa-seedling","fas fa-skating","fas fa-skiing","fas fa-smile","fas fa-snowboarding","fas fa-snowflake","fas fa-snowman","fas fa-swimmer","fas fa-umbrella","fas fa-user-astronaut","fas fa-user-graduate","fas fa-user-ninja","fas fa-user-secret","fas fa-walking","fas fa-yin-yang"],lr=!1;function dr(n,e,t,r){var o=[],i="color:",a=n.match(/^pick:(.+)$/);return a&&sr[a[1]]&&(i="background-color:",o.push('background-image:url("'+sr[a[1]]+'")')),t&&o.push(i+t),o.join(";")}function pr(n,e,t){var r=e.class,o=void 0===r?"":r,i=e.animation,a=void 0===i?"":i,c=e.color,u=void 0===c?"":c,s=e.family,f=void 0===s?"":s,l=e.name;return n.$set=function(n){"class"in n&&t(4,o=n.class),"animation"in n&&t(5,a=n.animation),"color"in n&&t(0,u=n.color),"family"in n&&t(1,f=n.family),"name"in n&&t(2,l=n.name)},[u,f,l,function(n,e,t){var r=[],i=n.match(/^pick:(.+)$/);if(i){if("Convos"==i[1])return"fas fa-info-circle";if(sr[i[1]])return"fas fa-contributor for-"+i[1].toLowerCase();r.push(function(n){if(n.match(/^\d+$/)&&console.log(fr[n]),n.match(/^\d+$/))return fr[n];for(var e=0,t=0;t<n.length;t++)e=n.charCodeAt(t)+((e<<5)-e),e&=e;return e=Math.abs(e),fr[e%fr.length]}(i[1]))}else r.push(ur[e]||"fas"),r.push("fa-"+n);return a&&r.push(a.split(" ").map((function(n){return"fa-"+n}))),o&&r.push(o.split(" ")),r.join(" ")},o,a,function(e){xn(n,e)}]}var hr=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(ar()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,pr,cr,T,{class:4,animation:5,color:0,family:1,name:2}),e}return c}(ee);function mr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function vr(n){var e,t,r,o,i,a=new hr({props:{animation:n[4],name:n[0]}}),c=n[14].default,u=I(c,n,n[13],null);return{c:function(){e=Z("button"),Jn(a.$$.fragment),t=X(),u&&u.c(),rn(e,"class",r=n[5].join(" ")),e.disabled=n[6],rn(e,"type",n[3]),rn(e,"data-tooltip",n[2]),sn(e,"has-tooltip",!!n[2].length)},m:function(r,c,s){Y(r,e,c),Zn(a,e,null),G(e,t),u&&u.m(e,null),o=!0,s&&i(),i=en(e,"click",n[15])},p:function(n,t){var i=v(t,1)[0],s={};16&i&&(s.animation=n[4]),1&i&&(s.name=n[0]),a.$set(s),u&&u.p&&8192&i&&u.p(U(c,n,n[13],null),B(c,n[13],i,null)),(!o||32&i&&r!==(r=n[5].join(" ")))&&rn(e,"class",r),(!o||64&i)&&(e.disabled=n[6]),(!o||8&i)&&rn(e,"type",n[3]),(!o||4&i)&&rn(e,"data-tooltip",n[2]),36&i&&sn(e,"has-tooltip",!!n[2].length)},i:function(n){o||(qn(a.$$.fragment,n),qn(u,n),o=!0)},o:function(n){Fn(a.$$.fragment,n),Fn(u,n),o=!1},d:function(n){n&&V(e),Qn(a),u&&u.d(n),i()}}}function gr(n,e,t){var r,o=R,i=function(){return o(),o=P(g,(function(n){return t(11,r=n)})),g};n.$$.on_destroy.push((function(){return o()}));var a="",c=e.class,u=void 0===c?"":c,s=[],f=!1,l=0,d=e.disabled,p=void 0!==d&&d,h=e.icon,m=void 0===h?"":h,v=e.op,g=void 0===v?new Ie({api:!1,id:""}):v;i();var $=e.tooltip,y=void 0===$?"":$,b=e.type,w=void 0===b?"":b;function _(n){n&&t(10,l=(new Pe).toEpoch()),t(4,a=n?"spin":""),t(9,f=n)}var k,x=e.$$slots,E=void 0===x?{}:x,O=e.$$scope;return n.$set=function(n){"class"in n&&t(7,u=n.class),"disabled"in n&&t(8,p=n.disabled),"icon"in n&&t(0,m=n.icon),"op"in n&&i(t(1,g=n.op)),"tooltip"in n&&t(2,y=n.tooltip),"type"in n&&t(3,w=n.type),"$$scope"in n&&t(13,O=n.$$scope)},n.$$.update=function(){2048&n.$$.dirty&&r.is("loading")&&_(!0),3072&n.$$.dirty&&(r.is("loading")||setTimeout((function(){return _(!1)}),700-((new Pe).toEpoch()-l))),129&n.$$.dirty&&t(5,s=["btn","for-"+(m||"default")].concat(u)),768&n.$$.dirty&&t(6,k=p||f)},[m,g,y,w,a,s,k,u,p,f,l,r,_,O,E,function(e){xn(n,e)}]}var $r=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(mr()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,gr,vr,T,{class:7,disabled:8,icon:0,op:1,tooltip:2,type:3}),e}return c}(ee);function yr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function br(n){var e,t,r,o,i,a,c=n[2]("Convos")+"",u=new hr({props:{name:"pick:Convos",color:"inherit"}});return{c:function(){Jn(u.$$.fragment),e=X(),(t=Z("b")).textContent="".concat(n[3].format("%H:%M")),r=X(),o=Z("a"),i=Q(c),rn(t,"class","message__ts"),rn(o,"href","/settings/account"),rn(o,"class","message__from"),rn(o,"color","inherit")},m:function(n,c){Zn(u,n,c),Y(n,e,c),Y(n,t,c),Y(n,r,c),Y(n,o,c),G(o,i),a=!0},p:function(n,e){(!a||4&e)&&c!==(c=n[2]("Convos")+"")&&an(i,c)},i:function(n){a||(qn(u.$$.fragment,n),a=!0)},o:function(n){Fn(u.$$.fragment,n),a=!1},d:function(n){Qn(u,n),n&&V(e),n&&V(t),n&&V(r),n&&V(o)}}}function wr(n){var e,t,r,o,i,a=!n[0]&&br(n),c=n[5].default,u=I(c,n,n[4],null);return{c:function(){e=Z("div"),a&&a.c(),t=X(),r=Z("div"),u&&u.c(),rn(r,"class","message__text"),rn(e,"class",o="message is-type-"+n[1])},m:function(n,o){Y(n,e,o),a&&a.m(e,null),G(e,t),G(e,r),u&&u.m(r,null),i=!0},p:function(n,r){var s=v(r,1)[0];n[0]?a&&(zn(),Fn(a,1,1,(function(){a=null})),Hn()):a?(a.p(n,s),qn(a,1)):((a=br(n)).c(),qn(a,1),a.m(e,t)),u&&u.p&&16&s&&u.p(U(c,n,n[4],null),B(c,n[4],s,null)),(!i||2&s&&o!==(o="message is-type-"+n[1]))&&rn(e,"class",o)},i:function(n){i||(qn(a),qn(u,n),i=!0)},o:function(n){Fn(a),Fn(u,n),i=!1},d:function(n){n&&V(e),a&&a.d(),u&&u.d(n)}}}function _r(n,e,t){var r;L(n,wt,(function(n){return t(2,r=n)}));var o=e.same,i=void 0!==o&&o,a=e.type,c=void 0===a?"notice":a,u=new Pe,s=e.$$slots,f=void 0===s?{}:s,l=e.$$scope;return n.$set=function(n){"same"in n&&t(0,i=n.same),"type"in n&&t(1,c=n.type),"$$scope"in n&&t(4,l=n.$$scope)},[i,c,r,u,l,f]}var kr=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(yr()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,_r,wr,T,{same:0,type:1}),e}return c}(ee);function xr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Er(n){var e,t,r,o,i,a,c,u,s,f=n[1].unread+"",l=n[4].default,d=I(l,n,n[3],null),p=new hr({props:{name:"bars"}}),h=new hr({props:{name:"times"}});return{c:function(){e=Z("header"),d&&d.c(),t=X(),r=Z("a"),Jn(p.$$.fragment),o=X(),Jn(h.$$.fragment),i=X(),a=Z("small"),c=Q(f),rn(a,"class","chat-header__unread"),a.hidden=u=!n[1].unread,rn(r,"href","#activeMenu:nav"),rn(r,"class","btn is-hamburger can-toggle"),sn(r,"is-toggled","nav"==n[0].activeMenu),rn(e,"class","chat-header")},m:function(n,u){Y(n,e,u),d&&d.m(e,null),G(e,t),G(e,r),Zn(p,r,null),G(r,o),Zn(h,r,null),G(r,i),G(r,a),G(a,c),s=!0},p:function(n,e){var t=v(e,1)[0];d&&d.p&&8&t&&d.p(U(l,n,n[3],null),B(l,n[3],t,null)),(!s||2&t)&&f!==(f=n[1].unread+"")&&an(c,f),(!s||2&t&&u!==(u=!n[1].unread))&&(a.hidden=u),1&t&&sn(r,"is-toggled","nav"==n[0].activeMenu)},i:function(n){s||(qn(d,n),qn(p.$$.fragment,n),qn(h.$$.fragment,n),s=!0)},o:function(n){Fn(d,n),Fn(p.$$.fragment,n),Fn(h.$$.fragment,n),s=!1},d:function(n){n&&V(e),d&&d.d(n),Qn(p),Qn(h)}}}function Or(n,e,t){var r,o;L(n,ot,(function(n){return t(0,r=n)}));var i=kn("user");L(n,i,(function(n){return t(1,o=n)}));var a=e.$$slots,c=void 0===a?{}:a,u=e.$$scope;return n.$set=function(n){"$$scope"in n&&t(3,u=n.$$scope)},[r,o,i,u,c]}var Sr=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(xr()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,Or,Er,T,{}),e}return c}(ee);function Cr(n){if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(n=function(n,e){if(!n)return;if("string"==typeof n)return Rr(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Rr(n,e)}(n))){var e=0,t=function(){};return{s:t,n:function(){return e>=n.length?{done:!0}:{done:!1,value:n[e++]}},e:function(n){throw n},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,a=!1;return{s:function(){r=n[Symbol.iterator]()},n:function(){var n=r.next();return i=n.done,n},e:function(n){a=!0,o=n},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}function Rr(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var Nr=[];function Ar(n,e){return Ar[n]?Ar[n](e):[]}function Dr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Mr(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function jr(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Mr(Object(t),!0).forEach((function(e){te(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Mr(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function Tr(n,e,t){var r=n.slice();return r[26]=e[t],r[28]=t,r}function Pr(n){var e,t,r=(n[26].text||n[26].val)+"";return{c:function(){rn(e=Z("a"),"href","#index:"+n[28]),rn(e,"tabindex","-1"),sn(e,"has-focus",n[28]==n[1])},m:function(o,i,a){Y(o,e,i),e.innerHTML=r,a&&t(),t=en(e,"click",tn(n[7]))},p:function(n,t){4&t&&r!==(r=(n[26].text||n[26].val)+"")&&(e.innerHTML=r),2&t&&sn(e,"has-focus",n[28]==n[1])},d:function(n){n&&V(e),t()}}}function Lr(n){for(var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,g=new hr({props:{name:"cloud-upload-alt"}}),$=new hr({props:{name:n[5]}}),y=n[2],b=[],w=0;w<y.length;w+=1)b[w]=Pr(Tr(n,y,w));return{c:function(){e=Z("form"),t=Z("textarea"),r=X(),o=Z("label"),i=Z("input"),a=X(),Jn(g.$$.fragment),u=X(),s=Z("button"),Jn($.$$.fragment),f=X(),l=Z("div");for(var h=0;h<b.length;h+=1)b[h].c();rn(t,"class","is-primary-input"),rn(t,"placeholder",n[4]),rn(i,"type","file"),rn(o,"class","upload is-hallow"),o.hidden=c=!n[0].is("conversation"),rn(s,"type","buttton"),rn(s,"class","btn chat-input__send"),rn(l,"class",d="chat-input_autocomplete chat-input_autocomplete_"+n[3]),l.hidden=p=!n[2].length,rn(e,"class","chat-input")},m:function(c,d,p){Y(c,e,d),G(e,t),G(e,r),G(e,o),G(o,i),G(o,a),Zn(g,o,null),G(e,u),G(e,s),Zn($,s,null),G(e,f),G(e,l);for(var v=0;v<b.length;v+=1)b[v].m(l,null);h=!0,p&&M(m),m=[z(n[6].call(null,t)),en(i,"change",n[9]),en(s,"click",n[8]),en(e,"submit",tn(n[25]))]},p:function(n,e){var r=v(e,1)[0];(!h||16&r)&&rn(t,"placeholder",n[4]),(!h||1&r&&c!==(c=!n[0].is("conversation")))&&(o.hidden=c);var i={};if(32&r&&(i.name=n[5]),$.$set(i),134&r){var a;for(y=n[2],a=0;a<y.length;a+=1){var u=Tr(n,y,a);b[a]?b[a].p(u,r):(b[a]=Pr(u),b[a].c(),b[a].m(l,null))}for(;a<b.length;a+=1)b[a].d(1);b.length=y.length}(!h||8&r&&d!==(d="chat-input_autocomplete chat-input_autocomplete_"+n[3]))&&rn(l,"class",d),(!h||4&r&&p!==(p=!n[2].length))&&(l.hidden=p)},i:function(n){h||(qn(g.$$.fragment,n),qn($.$$.fragment,n),h=!0)},o:function(n){Fn(g.$$.fragment,n),Fn($.$$.fragment,n),h=!1},d:function(n){n&&V(e),Qn(g),Qn($),J(b,n),M(m)}}}function Ir(n,e,t){var r;L(n,wt,(function(n){return t(16,r=n)}));var o,i,a,c,u,s=E,f=e.conversation,l=0,d=[],p="none",h=0,m=kn("api"),v=kn("user");function g(n,e){var t=function(n,e){n&&n.hasOwnProperty("val")&&(n=n.val);var t=e.append?e.value.length:e.cursorPos,r=[e.value.substring(0,t),e.value.substring(t)],o=r[0],i=r[1];return void 0===n?{before:o,middle:"",after:i}:(e.append&&(o=o.replace(/[ ]$/,"")).length&&(n=" "+n),e.padBefore&&(o=o.replace(/[ ]$/,"")).length&&(n=" "+n),e.padAfter&&(i=i.replace(/^[ ]/,""),n+=" "),e.replace&&(o=o.replace(/\S*\s?$/,"")),{before:o,middle:n,after:i})}(n,jr({},e,{cursorPos:o.selectionStart,value:o.value})),r=t.before,i=t.middle;_(r+i+t.after),o.selectionStart=o.selectionEnd=(r+i).length}function $(n,e){d.length&&(n.preventDefault(),t(1,l+=e),l<0&&t(1,l=d.length-1),l>=d.length&&t(1,l=0),g(d[l],{replace:!0}))}function y(n){n.errors&&f&&n.conversation_id!=f.conversation_id&&f.addMessage(jr({},n,{message:'Message "%1" failed: %2',type:"error",vars:[n.message,se(n.errors)]}))}function b(n){t(1,l=0),t(12,h=n.selectionStart),f.update({userInput:n.value})}function w(n){if(d[l])n.preventDefault(),g(d[l],{replace:!0}),t(12,h=o.selectionStart+1);else if(!(n.altKey||n.ctrlKey||n.metaKey||n.shiftKey)){n.preventDefault();var e={method:"send"};e.message=o.value,e.message=e.message.replace(/^\/close/i,"/part"),e.message=e.message.replace(/^\/j\b/i,"/join"),e.message=e.message.replace(/^\/raw/i,"/quote"),e.message.length&&f.send(e).then(y),f.is("search")||_("")}}function _(n){o&&(o.value=n),f.update({userInput:n})}function k(n){o&&(t(2,d=n>o.value.length?[]:function(n,e,t){var r=t.conversation,o=t.user,i="",a="",c=n.substring(0,e).replace(/(\S)(\S*)$/,(function(n,e,t){return i=e,a=t,""})),u=":"==i&&a.length?"emojis":"/"!=i||c.length?"@"==i&&a.length?"nicks":"#"==i||"&"==i?"conversations":"none":"commands",s=Ar(u,{conversation:r,query:i+a,user:o});return s.length&&s.unshift({autocompleteCategory:u,val:i+a}),s}(o.value,n,{conversation:f,user:v})),t(3,p=d.length&&d[0].autocompleteCategory||"none"))}function x(n){x.lock!=n.path&&(t(13,x.lock=n.path,x),_(void 0===n.userInput?"":n.userInput))}function E(n){var e=n.target&&n.target.files||n.dataTransfer&&n.dataTransfer.files;if(e&&e.length){if(e.length>1)return f.addMessage({message:"Cannot upload more than one file.",type:"error"});var t=new FormData;t.append("file",e[0]),m("uploadFile").perform({formData:t}).then((function(n){var e=n.res.body;if(e.files&&e.files.length)return g(e.files[0].url,{append:!0});e.errors&&f.addMessage({message:"Could not upload file: %1",vars:[r(se(e.errors))],type:"error"})}))}}return n.$set=function(n){"conversation"in n&&t(0,f=n.conversation)},n.$$.update=function(){1&n.$$.dirty&&t(14,i=v.findConversation({connection_id:f.connection_id})),16384&n.$$.dirty&&t(15,a=i&&i.nick),114689&n.$$.dirty&&t(4,c=f.is("search")?r("What are you looking for?"):i&&i.is("unreachable")?r("Connecting..."):r("What is on your mind %1?",a)),1&n.$$.dirty&&t(5,u=f.is("search")?"search":"paper-plane"),4096&n.$$.dirty&&k(h),8193&n.$$.dirty&&x(f)},[f,l,d,p,c,u,function(n){(o=n).addEventListener("focus",(function(){return t(12,h=o.value.length+1)})),o.addEventListener("change",(function(){return b(o)})),o.addEventListener("keyup",(function(n){1!=n.key.length&&-1==["ArrowLeft","ArrowRight","Backspace"].indexOf(n.key)||b(o)})),o.addEventListener("keydown",(function(n){return"ArrowDown"==n.key?$(n,n.shiftKey?4:1):"ArrowUp"==n.key?$(n,n.shiftKey?-4:-1):"Enter"==n.key?w(n):"Tab"==n.key?$(n,n.shiftKey?-1:1):void 0})),_(void 0===f.userInput?"":f.userInput)},function(n){t(1,l=parseInt(n.target.closest("a").href.replace(/.*index:/,""),10)),g(d[l],{padAfter:!0,replace:!0}),setTimeout((function(){return o.focus()}),1)},w,E,s,o,h,x,i,a,r,m,v,g,$,y,b,_,k,function(e){xn(n,e)}]}Ar.commands=function(n){for(var e=n.query,t=[],r=0;r<Nr.length;r++)if(0==Nr[r].cmd.indexOf(e)){var o=Nr[r].alias||Nr[r].cmd,i=Nr[r].example.replace(/</g,"&lt;");t.push({text:i,val:o})}return t},Ar.conversations=function(n){for(var e=n.conversation,t=n.query,r=n.user,o=r.findConversation({connection_id:e.connection_id}),i=o?o.conversations.toArray():r.conversations(),a=[],c=0;c<i.length&&!(-1!=i[c].name.toLowerCase().indexOf(t)&&(a.push({text:i[c].name,val:i[c].conversation_id}),a.length>=20));c++);return a},Ar.emojis=function(n){var e=n.query,t=[];return[":","_"].map((function(n){return n+e.slice(1,2)})).forEach((function(n){for(var r=ft(n,"group"),o=0;o<r.length&&(r[o].shortname.indexOf(e)>=0&&t.push({val:r[o].emoji,text:lt(r[o].emoji)}),!(t.length>=20));o++);})),t},Ar.nicks=function(n){var e,t=n.conversation,r=n.query,o=t.participants(),i=new RegExp("^"+ve(r.slice(1)),"i"),a=[],c=Cr(o);try{for(c.s();!(e=c.n()).done;){var u=e.value;if(a.length>=20)break;u.nick.match(i)&&a.push({val:u.nick})}}catch(n){c.e(n)}finally{c.f()}return a},Nr.push({cmd:"/me",example:"/me <msg>",description:"Send message as an action."}),Nr.push({cmd:"/say",example:"/say <msg>",description:'Used when you want to send a message starting with "/".'}),Nr.push({cmd:"/topic",example:"/topic or /topic <new topic>",description:"Show current topic, or set a new one."}),Nr.push({cmd:"/whois",example:"/whois <nick>",description:"Show information about a user."}),Nr.push({cmd:"/query",example:"/query <nick>",description:"Open up a new chat window with nick."}),Nr.push({cmd:"/msg",example:"/msg <nick> <msg>",description:"Send a direct message to nick."}),Nr.push({cmd:"/names",example:"/names",description:"Show participants in the channel."}),Nr.push({cmd:"/join",example:"/join <#channel>",description:"Join channel and open up a chat window."}),Nr.push({cmd:"/nick",example:"/nick <nick>",description:"Change your wanted nick."}),Nr.push({cmd:"/part",example:"/part",description:"Leave channel, and close window."}),Nr.push({cmd:"/close",example:"/close <nick>",description:"Close conversation with nick, defaults to current active."}),Nr.push({cmd:"/kick",example:"/kick <nick>",description:"Kick a user from the current channel."}),Nr.push({cmd:"/mode",example:"/mode [+|-][b|o|v] <user>",description:"Change mode of yourself or a user"}),Nr.push({cmd:"/reconnect",example:"/reconnect",description:"Restart the current connection."}),Nr.push({cmd:"/clear",example:"/clear history <#channel> or /clear history <nick>",description:"Delete all history for the given conversation."}),Nr.push({cmd:"/oper",example:"/oper <msg>",description:"Send server operator messages."}),Nr.push({cmd:"/quote",example:"/quote <irc-command>",description:"Allow you to send any raw IRC message."});var Ur=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(Dr()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,Ir,Lr,T,{uploader:10,conversation:0}),e}return C(c,[{key:"uploader",get:function(){return this.$$.ctx[10]}}]),c}(ee);function Br(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function zr(n){var e,t,r,o=n[9].default,i=I(o,n,n[8],null);return{c:function(){e=Z("a"),i&&i.c(),rn(e,"href",n[3]),rn(e,"class",n[0]),rn(e,"style",n[1]),sn(e,"has-path",n[4])},m:function(o,a,c){Y(o,e,a),i&&i.m(e,null),n[11](e),t=!0,c&&r(),r=en(e,"click",n[10])},p:function(n,r){var a=v(r,1)[0];i&&i.p&&256&a&&i.p(U(o,n,n[8],null),B(o,n[8],a,null)),(!t||8&a)&&rn(e,"href",n[3]),(!t||1&a)&&rn(e,"class",n[0]),(!t||2&a)&&rn(e,"style",n[1]),17&a&&sn(e,"has-path",n[4])},i:function(n){t||(qn(i,n),t=!0)},o:function(n){Fn(i,n),t=!1},d:function(t){t&&V(e),i&&i.d(t),n[11](null),r()}}}function Hr(n,e,t){var r;L(n,ot,(function(n){return t(7,r=n)}));var o,i,a,c=e.class,u=void 0===c?"":c,s=e.href,f=void 0===s?"/":s,l=e.style,d=void 0===l?"":l,p=e.$$slots,h=void 0===p?{}:p,m=e.$$scope;return n.$set=function(n){"class"in n&&t(0,u=n.class),"href"in n&&t(5,f=n.href),"style"in n&&t(1,d=n.style),"$$scope"in n&&t(8,m=n.$$scope)},n.$$.update=function(){160&n.$$.dirty&&t(3,i=0==f.indexOf("/")?r.basePath+f:f),136&n.$$.dirty&&t(4,a=r.basePath+r.path==i.replace(/(#|\?).*/,""))},[u,d,o,i,a,f,function(){return o.focus()},r,m,h,function(e){xn(n,e)},function(n){On[n?"unshift":"push"]((function(){t(2,o=n)}))}]}var qr=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(Br()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,Hr,zr,T,{class:0,href:5,style:1,focus:6}),e}return C(c,[{key:"focus",get:function(){return this.$$.ctx[6]}}]),c}(ee);function Fr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Kr(n,e,t){var r=n.slice();return r[6]=e[t],r}function Wr(n){for(var e,t,r,o,i,a,c,u,s=n[1]("Participants (%1)",n[0].participants().length)+"",f=n[0].participants(),l=[],d=0;d<f.length;d+=1)l[d]=Yr(Kr(n,f,d));var p=function(n){return Fn(l[n],1,1,(function(){l[n]=null}))};return{c:function(){e=Z("div"),t=Z("nav"),r=Z("h3"),o=Q(s),i=X();for(var n=0;n<l.length;n+=1)l[n].c();a=X(),c=Z("nav"),rn(t,"class","sidebar-right__nav"),rn(e,"class","sidebar-right")},m:function(n,s){Y(n,e,s),G(e,t),G(t,r),G(r,o),G(t,i);for(var f=0;f<l.length;f+=1)l[f].m(t,null);G(t,a),G(t,c),u=!0},p:function(n,e){if((!u||3&e)&&s!==(s=n[1]("Participants (%1)",n[0].participants().length)+"")&&an(o,s),5&e){var r;for(f=n[0].participants(),r=0;r<f.length;r+=1){var i=Kr(n,f,r);l[r]?(l[r].p(i,e),qn(l[r],1)):(l[r]=Yr(i),l[r].c(),qn(l[r],1),l[r].m(t,a))}for(zn(),r=f.length;r<l.length;r+=1)p(r);Hn()}},i:function(n){if(!u){for(var e=0;e<f.length;e+=1)qn(l[e]);u=!0}},o:function(n){l=l.filter(Boolean);for(var e=0;e<l.length;e+=1)Fn(l[e]);u=!1},d:function(n){n&&V(e),J(l,n)}}}function Gr(n){var e,t,r,o,i=n[6].nick+"",a=new hr({props:{name:"pick:"+n[6].id,family:"solid",color:n[6].color}});return{c:function(){Jn(a.$$.fragment),e=X(),t=Z("span"),r=Q(i)},m:function(n,i){Zn(a,n,i),Y(n,e,i),Y(n,t,i),G(t,r),o=!0},p:function(n,e){var t={};1&e&&(t.name="pick:"+n[6].id),1&e&&(t.color=n[6].color),a.$set(t),(!o||1&e)&&i!==(i=n[6].nick+"")&&an(r,i)},i:function(n){o||(qn(a.$$.fragment,n),o=!0)},o:function(n){Fn(a.$$.fragment,n),o=!1},d:function(n){Qn(a,n),n&&V(e),n&&V(t)}}}function Yr(n){var e;var t=new qr({props:{href:"/chat/"+n[0].connection_id+"/"+n[6].id,class:"participant "+he(n[6].modes),$$slots:{default:[Gr]},$$scope:{ctx:n}}});return t.$on("click",(function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=n)[5].apply(e,[n[6]].concat(r))})),{c:function(){Jn(t.$$.fragment)},m:function(n,r){Zn(t,n,r),e=!0},p:function(e,r){n=e;var o={};1&r&&(o.href="/chat/"+n[0].connection_id+"/"+n[6].id),1&r&&(o.class="participant "+he(n[6].modes)),513&r&&(o.$$scope={dirty:r,ctx:n}),t.$set(o)},i:function(n){e||(qn(t.$$.fragment,n),e=!0)},o:function(n){Fn(t.$$.fragment,n),e=!1},d:function(n){Qn(t,n)}}}function Vr(n){var e,t,r=n[0].participants().length,o=r&&Wr(n);return{c:function(){o&&o.c(),e=nn()},m:function(n,r){o&&o.m(n,r),Y(n,e,r),t=!0},p:function(n,t){var i=v(t,1)[0];1&i&&(r=n[0].participants().length),r?o?(o.p(n,i),qn(o,1)):((o=Wr(n)).c(),qn(o,1),o.m(e.parentNode,e)):o&&(zn(),Fn(o,1,1,(function(){o=null})),Hn())},i:function(n){t||(qn(o),t=!0)},o:function(n){Fn(o),t=!1},d:function(n){o&&o.d(n),n&&V(e)}}}function Jr(n,e,t){var r;L(n,wt,(function(n){return t(1,r=n)}));var o=kn("user"),i=e.conversation;function a(n,e){n.preventDefault(),i.send("/join "+e.id)}var c;return n.$set=function(n){"conversation"in n&&t(0,i=n.conversation)},n.$$.update=function(){1&n.$$.dirty&&(c=o.findConversation({connection_id:i.connection_id}))},[i,r,a,c,o,function(n,e){return a(e,n)}]}var Zr=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(Fr()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,Jr,Vr,T,{conversation:0}),e}return c}(ee),Qr=function(){function n(){var e=this;r(this,n),this.dragAndDropEvents={drag:this._preventDefault.bind(this),dragend:this.stop.bind(this),dragenter:this.start.bind(this),dragleave:this.stop.bind(this),dragover:this.start.bind(this),dragstart:this._preventDefault.bind(this),drop:this.drop.bind(this)},this.pasteEvents={paste:this.paste.bind(this)},this.dropIndicatorEl=document.createElement("div"),this.dropIndicatorEl.className="drop-area hidden",this.removeDragOverDebounced=ue((function(){return e._removeDragOver()}),100)}return C(n,[{key:"attach",value:function(n,e){var t=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;this.dropEl=n,this.uploader=e,this.targetEl=r,Object.keys(this.dragAndDropEvents).forEach((function(n){r.addEventListener(n,t.dragAndDropEvents[n])})),Object.keys(this.pasteEvents).forEach((function(n){document.addEventListener(n,t.pasteEvents[n])}))}},{key:"detach",value:function(){var n=this;Object.keys(this.dragAndDropEvents).forEach((function(e){n.targetEl.removeEventListener(e,n.dragAndDropEvents[e])})),Object.keys(this.pasteEvents).forEach((function(e){document.removeEventListener(e,n.pasteEvents[e])}))}},{key:"drop",value:function(n){this.stop(n),this.uploader&&this.uploader(n)}},{key:"paste",value:function(n){var e=(n.clipboardData||n.originalEvent.clipboardData).items;if(this.uploader)for(var t=0;t<e.length;t++)if("file"==e[t].kind)return this.uploader({dataTransfer:{files:[e[t].getAsFile()]}})}},{key:"stop",value:function(n){this._preventDefault(n),this.removeDragOverDebounced()}},{key:"start",value:function(n){if(this.dropEl){this._preventDefault(n);var e=this.dropIndicatorEl.style;e.height=this.dropEl.offsetHeight+"px",e.width=this.dropEl.offsetWidth+"px",e.top=this.dropEl.offsetTop+"px",e.left=this.dropEl.offsetLeft+"px",this.dropIndicatorEl.classList.remove("hidden"),this.dropEl.parentNode.appendChild(this.dropIndicatorEl)}}},{key:"_preventDefault",value:function(n){n.preventDefault(),n.stopPropagation()}},{key:"_removeDragOver",value:function(){this.dropIndicatorEl.classList.add("hidden")}}]),n}();function Xr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function no(n){var e,t,r,o,i,a,c,u=n[14].default,s=I(u,n,n[13],null);return{c:function(){e=Z("main"),t=Z("div"),s&&s.c(),An((function(){return n[15].call(t)})),rn(e,"class",o=n[1].join(" "))},m:function(o,u,f){Y(o,e,u),G(e,t),s&&s.m(t,null),r=function(n,e){"static"===getComputedStyle(n).position&&(n.style.position="relative");var t,r=document.createElement("object");return r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.type="text/html",r.tabIndex=-1,r.onload=function(){(t=r.contentDocument.defaultView).addEventListener("resize",e)},/Trident/.test(navigator.userAgent)?(n.appendChild(r),r.data="about:blank"):(r.data="about:blank",n.appendChild(r)),{cancel:function(){t&&t.removeEventListener&&t.removeEventListener("resize",e),n.removeChild(r)}}}(t,n[15].bind(t)),a=!0,f&&c(),c=z(i=n[2].call(null,e,{scrollHeight:n[0]}))},p:function(n,t){var r=v(t,1)[0];s&&s.p&&8192&r&&s.p(U(u,n,n[13],null),B(u,n[13],r,null)),(!a||2&r&&o!==(o=n[1].join(" ")))&&rn(e,"class",o),i&&j(i.update)&&1&r&&i.update.call(null,{scrollHeight:n[0]})},i:function(n){a||(qn(s,n),a=!0)},o:function(n){Fn(s,n),a=!1},d:function(n){n&&V(e),s&&s.d(n),r.cancel(),c()}}}function eo(n,e,t){var r,o=(r=yn(),function(n,e){var t=r.$$.callbacks[n];if(t){var o=fn(n,e);t.slice().forEach((function(n){n.call(r,o)}))}}),i={scrollDelay:80,scrollOffset:80,scrollTop:0},a=!0,c=e.class,u=void 0===c?"":c,s=0,f=e.pos,l=void 0===f?"top":f;function d(n){t(3,l=n.scrollTop>s-n.offsetHeight-i.scrollOffset?"bottom":n.scrollTop<i.scrollOffset?"top":"middle"),i.pos=l,i.visibleEls=function(n){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,t=O(n.childNodes),r=[],o=0;o<t.length;)t[o].nodeType==Node.ELEMENT_NODE?(r.push([o,t[o]]),o++):t.splice(o,1);if(!t.length)return[];for(var i=e.scrollTop;r.length>1;){var a=Math.floor(r.length/2);r[a][1].offsetTop<=i?r.splice(0,a):r.splice(a)}r.length||r.push([0,t[0]]);for(var c=e.offsetHeight,u=r[0][0],s=u;s<t.length&&!(t[s].offsetTop>i+c);)s++;return t.slice(u,s).filter((function(n){return!n.getAttribute("aria-hidden")}))}(n.firstElementChild,n)}function p(n){i.scrollTid&&clearTimeout(i.scrollTid),i.scrollTid=setTimeout((function(){return h(n)}),i.scrollDelay)}function h(n){if(a)return(a=Math.abs(n.scrollTop-i.scrollTop)>40)&&(n.scrollTop=i.scrollTop),void(i.scrollTid&&clearTimeout(i.scrollTid));i.scrollTop=n.scrollTop,d(n),o("scrolled",i)}function m(n,e){var t=e.scrollHeight,r=i.scrollHeight!=t;i.scrollHeight=t,d(n),r&&o("rendered",i)}function v(n){return!de(n,"undef")&&(-1==n&&(n=s),de(n,"string")&&(n=i.infinityEl.querySelector(n)),n&&n.tagName&&(n=n.offsetTop),!de(n,"undef")&&(!(n<0)&&(a=!0,i.infinityEl.scrollTop=n,i.scrollTop=i.infinityEl.scrollTop,!0)))}var g,$=e.$$slots,y=void 0===$?{}:$,b=e.$$scope;return n.$set=function(n){"class"in n&&t(4,u=n.class),"pos"in n&&t(3,l=n.pos),"$$scope"in n&&t(13,b=n.$$scope)},n.$$.update=function(){24&n.$$.dirty&&t(1,g=[u||"infinity-scroll"].concat(["has-pos-"+l])),n.$$.dirty},[s,g,function(n,e){return i.infinityEl=n,i.scrollTo=v,n.addEventListener("scroll",(function(){return p(n)})),d(n),m(n,e),{update:function(e){return m(n,e)}}},l,u,i,a,o,d,p,h,m,v,b,y,function(){s=this.offsetHeight,t(0,s)}]}var to=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(Xr()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,eo,no,T,{class:4,pos:3}),e}return c}(ee),ro=n((function(n,t){var r,o;r=function(n){var t=[],r=Object.keys,o={},i={},a=!0,c=/^(no-?highlight|plain|text)$/i,u=/\blang(?:uage)?-([\w-]+)\b/i,s=/((^(<[^>]+>|\t|)+|(?:\n)))/gm,f="Could not find the language '{}', did you forget to load/include a language module?",l={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},d="of and for in not or if then".split(" ");function p(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function h(n){return n.nodeName.toLowerCase()}function m(n){return c.test(n)}function v(n){var e,t={},r=Array.prototype.slice.call(arguments,1);for(e in n)t[e]=n[e];return r.forEach((function(n){for(e in n)t[e]=n[e]})),t}function g(n){var e=[];return function n(t,r){for(var o=t.firstChild;o;o=o.nextSibling)3===o.nodeType?r+=o.nodeValue.length:1===o.nodeType&&(e.push({event:"start",offset:r,node:o}),r=n(o,r),h(o).match(/br|hr|img|input/)||e.push({event:"stop",offset:r,node:o}));return r}(n,0),e}function $(n){return n.variants&&!n.cached_variants&&(n.cached_variants=n.variants.map((function(e){return v(n,{variants:null},e)}))),n.cached_variants?n.cached_variants:function n(e){return!!e&&(e.endsWithParent||n(e.starts))}(n)?[v(n,{starts:n.starts?v(n.starts):null})]:Object.isFrozen(n)?[v(n)]:[n]}function y(n,e){return e?Number(e):(t=n,-1!=d.indexOf(t.toLowerCase())?0:1);var t}function b(n){function e(n){return n&&n.source||n}function t(t,r){return new RegExp(e(t),"m"+(n.case_insensitive?"i":"")+(r?"g":""))}function o(n){var r,o,i={},a=[],c={},u=1;function s(n,e){i[u]=n,a.push([n,e]),u+=function(n){return new RegExp(n.toString()+"|").exec("").length-1}(e)+1}for(var f=0;f<n.contains.length;f++)s(o=n.contains[f],o.beginKeywords?"\\.?(?:"+o.begin+")\\.?":o.begin);n.terminator_end&&s("end",n.terminator_end),n.illegal&&s("illegal",n.illegal);var l=a.map((function(n){return n[1]}));return r=t(function(n,t){for(var r=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./,o=0,i="",a=0;a<n.length;a++){var c=o+=1,u=e(n[a]);for(a>0&&(i+=t),i+="(";u.length>0;){var s=r.exec(u);if(null==s){i+=u;break}i+=u.substring(0,s.index),u=u.substring(s.index+s[0].length),"\\"==s[0][0]&&s[1]?i+="\\"+String(Number(s[1])+c):(i+=s[0],"("==s[0]&&o++)}i+=")"}return i}(l,"|"),!0),c.lastIndex=0,c.exec=function(e){var t;if(0===a.length)return null;r.lastIndex=c.lastIndex;var o=r.exec(e);if(!o)return null;for(var u=0;u<o.length;u++)if(null!=o[u]&&null!=i[""+u]){t=i[""+u];break}return"string"==typeof t?(o.type=t,o.extra=[n.illegal,n.terminator_end]):(o.type="begin",o.rule=t),o},c}if(n.contains&&-1!=n.contains.indexOf("self")){if(!a)throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");n.contains=n.contains.filter((function(n){return"self"!=n}))}!function i(a,c){a.compiled||(a.compiled=!0,a.keywords=a.keywords||a.beginKeywords,a.keywords&&(a.keywords=function(n,e){var t={};return"string"==typeof n?o("keyword",n):r(n).forEach((function(e){o(e,n[e])})),t;function o(n,r){e&&(r=r.toLowerCase()),r.split(" ").forEach((function(e){var r=e.split("|");t[r[0]]=[n,y(r[0],r[1])]}))}}(a.keywords,n.case_insensitive)),a.lexemesRe=t(a.lexemes||/\w+/,!0),c&&(a.beginKeywords&&(a.begin="\\b("+a.beginKeywords.split(" ").join("|")+")\\b"),a.begin||(a.begin=/\B|\b/),a.beginRe=t(a.begin),a.endSameAsBegin&&(a.end=a.begin),a.end||a.endsWithParent||(a.end=/\B|\b/),a.end&&(a.endRe=t(a.end)),a.terminator_end=e(a.end)||"",a.endsWithParent&&c.terminator_end&&(a.terminator_end+=(a.end?"|":"")+c.terminator_end)),a.illegal&&(a.illegalRe=t(a.illegal)),null==a.relevance&&(a.relevance=1),a.contains||(a.contains=[]),a.contains=Array.prototype.concat.apply([],a.contains.map((function(n){return $("self"===n?a:n)}))),a.contains.forEach((function(n){i(n,a)})),a.starts&&i(a.starts,c),a.terminators=o(a))}(n)}function w(n,e,t,r){var i=e;function c(n,e){var t=$.case_insensitive?e[0].toLowerCase():e[0];return n.keywords.hasOwnProperty(t)&&n.keywords[t]}function u(n,e,t,r){if(!t&&""===e)return"";if(!n)return e;var o='<span class="'+(r?"":l.classPrefix);return(o+=n+'">')+e+(t?"":"</span>")}function s(){E+=null!=k.subLanguage?function(){var n="string"==typeof k.subLanguage;if(n&&!o[k.subLanguage])return p(O);var e=n?w(k.subLanguage,O,!0,x[k.subLanguage]):_(O,k.subLanguage.length?k.subLanguage:void 0);return k.relevance>0&&(C+=e.relevance),n&&(x[k.subLanguage]=e.top),u(e.language,e.value,!1,!0)}():function(){var n,e,t,r;if(!k.keywords)return p(O);for(r="",e=0,k.lexemesRe.lastIndex=0,t=k.lexemesRe.exec(O);t;)r+=p(O.substring(e,t.index)),(n=c(k,t))?(C+=n[1],r+=u(n[0],p(t[0]))):r+=p(t[0]),e=k.lexemesRe.lastIndex,t=k.lexemesRe.exec(O);return r+p(O.substr(e))}(),O=""}function d(n){E+=n.className?u(n.className,"",!0):"",k=Object.create(n,{parent:{value:k}})}function h(n){var e=n[0],t=n.rule;return t&&t.endSameAsBegin&&(t.endRe=new RegExp(e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")),t.skip?O+=e:(t.excludeBegin&&(O+=e),s(),t.returnBegin||t.excludeBegin||(O=e)),d(t),t.returnBegin?0:e.length}function m(n){var e=n[0],t=i.substr(n.index),r=function n(e,t){if(function(n,e){var t=n&&n.exec(e);return t&&0===t.index}(e.endRe,t)){for(;e.endsParent&&e.parent;)e=e.parent;return e}if(e.endsWithParent)return n(e.parent,t)}(k,t);if(r){var o=k;o.skip?O+=e:(o.returnEnd||o.excludeEnd||(O+=e),s(),o.excludeEnd&&(O=e));do{k.className&&(E+="</span>"),k.skip||k.subLanguage||(C+=k.relevance),k=k.parent}while(k!==r.parent);return r.starts&&(r.endSameAsBegin&&(r.starts.endRe=r.endRe),d(r.starts)),o.returnEnd?0:e.length}}var v={};function g(n,e){var r=e&&e[0];if(O+=n,null==r)return s(),0;if("begin"==v.type&&"end"==e.type&&v.index==e.index&&""===r)return O+=i.slice(e.index,e.index+1),1;if(v=e,"begin"===e.type)return h(e);if("illegal"===e.type&&!t)throw new Error('Illegal lexeme "'+r+'" for mode "'+(k.className||"<unnamed>")+'"');if("end"===e.type){var o=m(e);if(null!=o)return o}return O+=r,r.length}var $=S(n);if(!$)throw console.error(f.replace("{}",n)),new Error('Unknown language: "'+n+'"');b($);var y,k=r||$,x={},E="";for(y=k;y!==$;y=y.parent)y.className&&(E=u(y.className,"",!0)+E);var O="",C=0;try{for(var R,N,A=0;k.terminators.lastIndex=A,R=k.terminators.exec(i);)N=g(i.substring(A,R.index),R),A=R.index+N;for(g(i.substr(A)),y=k;y.parent;y=y.parent)y.className&&(E+="</span>");return{relevance:C,value:E,illegal:!1,language:n,top:k}}catch(e){if(e.message&&-1!==e.message.indexOf("Illegal"))return{illegal:!0,relevance:0,value:p(i)};if(a)return{relevance:0,value:p(i),language:n,top:k,errorRaised:e};throw e}}function _(n,e){e=e||l.languages||r(o);var t={relevance:0,value:p(n)},i=t;return e.filter(S).filter(C).forEach((function(e){var r=w(e,n,!1);r.language=e,r.relevance>i.relevance&&(i=r),r.relevance>t.relevance&&(i=t,t=r)})),i.language&&(t.second_best=i),t}function k(n){return l.tabReplace||l.useBR?n.replace(s,(function(n,e){return l.useBR&&"\n"===n?"<br>":l.tabReplace?e.replace(/\t/g,l.tabReplace):""})):n}function x(n){var e,r,o,a,c,s=function(n){var e,t,r,o,i=n.className+" ";if(i+=n.parentNode?n.parentNode.className:"",t=u.exec(i)){var a=S(t[1]);return a||(console.warn(f.replace("{}",t[1])),console.warn("Falling back to no-highlight mode for this block.",n)),a?t[1]:"no-highlight"}for(e=0,r=(i=i.split(/\s+/)).length;e<r;e++)if(m(o=i[e])||S(o))return o}(n);m(s)||(l.useBR?(e=document.createElement("div")).innerHTML=n.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n"):e=n,c=e.textContent,o=s?w(s,c,!0):_(c),(r=g(e)).length&&((a=document.createElement("div")).innerHTML=o.value,o.value=function(n,e,r){var o=0,i="",a=[];function c(){return n.length&&e.length?n[0].offset!==e[0].offset?n[0].offset<e[0].offset?n:e:"start"===e[0].event?n:e:n.length?n:e}function u(n){i+="<"+h(n)+t.map.call(n.attributes,(function(n){return" "+n.nodeName+'="'+p(n.value).replace(/"/g,"&quot;")+'"'})).join("")+">"}function s(n){i+="</"+h(n)+">"}function f(n){("start"===n.event?u:s)(n.node)}for(;n.length||e.length;){var l=c();if(i+=p(r.substring(o,l[0].offset)),o=l[0].offset,l===n){a.reverse().forEach(s);do{f(l.splice(0,1)[0]),l=c()}while(l===n&&l.length&&l[0].offset===o);a.reverse().forEach(u)}else"start"===l[0].event?a.push(l[0].node):a.pop(),f(l.splice(0,1)[0])}return i+p(r.substr(o))}(r,g(a),c)),o.value=k(o.value),n.innerHTML=o.value,n.className=function(n,e,t){var r=e?i[e]:t,o=[n.trim()];return n.match(/\bhljs\b/)||o.push("hljs"),-1===n.indexOf(r)&&o.push(r),o.join(" ").trim()}(n.className,s,o.language),n.result={language:o.language,re:o.relevance},o.second_best&&(n.second_best={language:o.second_best.language,re:o.second_best.relevance}))}function E(){if(!E.called){E.called=!0;var n=document.querySelectorAll("pre code");t.forEach.call(n,x)}}var O={disableAutodetect:!0};function S(n){return n=(n||"").toLowerCase(),o[n]||o[i[n]]}function C(n){var e=S(n);return e&&!e.disableAutodetect}return n.highlight=w,n.highlightAuto=_,n.fixMarkup=k,n.highlightBlock=x,n.configure=function(n){l=v(l,n)},n.initHighlighting=E,n.initHighlightingOnLoad=function(){window.addEventListener("DOMContentLoaded",E,!1),window.addEventListener("load",E,!1)},n.registerLanguage=function(e,t){var r;try{r=t(n)}catch(n){if(console.error("Language definition for '{}' could not be registered.".replace("{}",e)),!a)throw n;console.error(n),r=O}o[e]=r,r.rawDefinition=t.bind(null,n),r.aliases&&r.aliases.forEach((function(n){i[n]=e}))},n.listLanguages=function(){return r(o)},n.getLanguage=S,n.requireLanguage=function(n){var e=S(n);if(e)return e;throw new Error("The '{}' language is required, but not loaded.".replace("{}",n))},n.autoDetection=C,n.inherit=v,n.debugMode=function(){a=!1},n.IDENT_RE="[a-zA-Z]\\w*",n.UNDERSCORE_IDENT_RE="[a-zA-Z_]\\w*",n.NUMBER_RE="\\b\\d+(\\.\\d+)?",n.C_NUMBER_RE="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",n.BINARY_NUMBER_RE="\\b(0b[01]+)",n.RE_STARTERS_RE="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",n.BACKSLASH_ESCAPE={begin:"\\\\[\\s\\S]",relevance:0},n.APOS_STRING_MODE={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[n.BACKSLASH_ESCAPE]},n.QUOTE_STRING_MODE={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[n.BACKSLASH_ESCAPE]},n.PHRASAL_WORDS_MODE={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},n.COMMENT=function(e,t,r){var o=n.inherit({className:"comment",begin:e,end:t,contains:[]},r||{});return o.contains.push(n.PHRASAL_WORDS_MODE),o.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|XXX):",relevance:0}),o},n.C_LINE_COMMENT_MODE=n.COMMENT("//","$"),n.C_BLOCK_COMMENT_MODE=n.COMMENT("/\\*","\\*/"),n.HASH_COMMENT_MODE=n.COMMENT("#","$"),n.NUMBER_MODE={className:"number",begin:n.NUMBER_RE,relevance:0},n.C_NUMBER_MODE={className:"number",begin:n.C_NUMBER_RE,relevance:0},n.BINARY_NUMBER_MODE={className:"number",begin:n.BINARY_NUMBER_RE,relevance:0},n.CSS_NUMBER_MODE={className:"number",begin:n.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},n.REGEXP_MODE={className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[n.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[n.BACKSLASH_ESCAPE]}]},n.TITLE_MODE={className:"title",begin:n.IDENT_RE,relevance:0},n.UNDERSCORE_TITLE_MODE={className:"title",begin:n.UNDERSCORE_IDENT_RE,relevance:0},n.METHOD_GUARD={begin:"\\.\\s*"+n.UNDERSCORE_IDENT_RE,relevance:0},[n.BACKSLASH_ESCAPE,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.PHRASAL_WORDS_MODE,n.COMMENT,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,n.HASH_COMMENT_MODE,n.NUMBER_MODE,n.C_NUMBER_MODE,n.BINARY_NUMBER_MODE,n.CSS_NUMBER_MODE,n.REGEXP_MODE,n.TITLE_MODE,n.UNDERSCORE_TITLE_MODE,n.METHOD_GUARD].forEach((function(n){!function n(t){Object.freeze(t);var r="function"==typeof t;return Object.getOwnPropertyNames(t).forEach((function(o){!t.hasOwnProperty(o)||null===t[o]||"object"!==e(t[o])&&"function"!=typeof t[o]||r&&("caller"===o||"callee"===o||"arguments"===o)||Object.isFrozen(t[o])||n(t[o])})),t}(n)})),n},o="object"===("undefined"==typeof window?"undefined":e(window))&&window||"object"===("undefined"==typeof self?"undefined":e(self))&&self,t.nodeType?o&&(o.hljs=r({})):r(t)}));var oo=/\r\n|\r|\n/g;function io(n){var e=n.className;if(/hljs-/.test(e)){for(var t=ao(n.innerHTML),r=0,o="";r<t.length;r++){var i=t[r].length>0?t[r]:" ";o+='<span class="'.concat(e,'">').concat(i,"</span>\n")}n.innerHTML=o.trim()}}function ao(n){return 0===n.length?[]:n.split(oo)}function co(n){return(n.trim().match(oo)||[]).length}document.addEventListener("copy",(function(n){var e,t=window.getSelection();(function(n){for(var e=n;e;){if(e.className&&-1!==e.className.indexOf("hljs-ln-code"))return!0;e=e.parentNode}return!1})(t.anchorNode)&&(e=-1!==window.navigator.userAgent.indexOf("Edge")?function(n){for(var e=n.toString(),t=n.anchorNode;"TD"!==t.nodeName;)t=t.parentNode;for(var r=n.focusNode;"TD"!==r.nodeName;)r=r.parentNode;var o=parseInt(t.dataset.lineNumber,10),i=parseInt(r.dataset.lineNumber,10);if(o!=i){var a=t.textContent,c=r.textContent;if(o>i){var u=o;o=i,i=u,u=a,a=c,c=u}for(;0!==e.indexOf(a);)a=a.slice(1);for(;-1===e.lastIndexOf(c);)c=c.slice(0,-1);for(var s=a,f=function(n){for(var e=n;"TABLE"!==e.nodeName;)e=e.parentNode;return e}(t),l=o+1;l<i;++l){var d=".".concat("hljs-ln-code","[").concat("data-line-number",'="').concat(l,'"]');s+="\n"+f.querySelector(d).textContent}return s+="\n"+c}return e}(t):t.toString(),n.clipboardData.setData("text/plain",e),n.preventDefault())}));var uo;ro.registerLanguage("css",(function(n){var e={begin:/(?:[A-Z\_\.\-]+|--[a-zA-Z0-9_-]+)\s*:/,returnBegin:!0,end:";",endsWithParent:!0,contains:[{className:"attribute",begin:/\S/,end:":",excludeEnd:!0,starts:{endsWithParent:!0,excludeEnd:!0,contains:[{begin:/[\w-]+\(/,returnBegin:!0,contains:[{className:"built_in",begin:/[\w-]+/},{begin:/\(/,end:/\)/,contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.CSS_NUMBER_MODE]}]},n.CSS_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,n.C_BLOCK_COMMENT_MODE,{className:"number",begin:"#[0-9A-Fa-f]+"},{className:"meta",begin:"!important"}]}}]};return{case_insensitive:!0,illegal:/[=\/|'\$]/,contains:[n.C_BLOCK_COMMENT_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/},{className:"selector-class",begin:/\.[A-Za-z0-9_-]+/},{className:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},{className:"selector-pseudo",begin:/:(:)?[a-zA-Z0-9\_\-\+\(\)"'.]+/},{begin:"@(page|font-face)",lexemes:"@[a-z-]+",keywords:"@page @font-face"},{begin:"@",end:"[{;]",illegal:/:/,returnBegin:!0,contains:[{className:"keyword",begin:/@\-?\w[\w]*(\-\w+)*/},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:"and or not only",contains:[{begin:/[a-z-]+:/,className:"attribute"},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"[a-zA-Z-][a-zA-Z0-9_-]*",relevance:0},{begin:"{",end:"}",illegal:/\S/,contains:[n.C_BLOCK_COMMENT_MODE,e]}]}})),ro.registerLanguage("diff",(function(n){return{aliases:["patch"],contains:[{className:"meta",relevance:10,variants:[{begin:/^@@ +\-\d+,\d+ +\+\d+,\d+ +@@$/},{begin:/^\*\*\* +\d+,\d+ +\*\*\*\*$/},{begin:/^\-\-\- +\d+,\d+ +\-\-\-\-$/}]},{className:"comment",variants:[{begin:/Index: /,end:/$/},{begin:/={3,}/,end:/$/},{begin:/^\-{3}/,end:/$/},{begin:/^\*{3} /,end:/$/},{begin:/^\+{3}/,end:/$/},{begin:/^\*{15}$/}]},{className:"addition",begin:"^\\+",end:"$"},{className:"deletion",begin:"^\\-",end:"$"},{className:"addition",begin:"^\\!",end:"$"}]}})),ro.registerLanguage("dockerfile",(function(n){return{aliases:["docker"],case_insensitive:!0,keywords:"from maintainer expose env arg user onbuild stopsignal",contains:[n.HASH_COMMENT_MODE,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.NUMBER_MODE,{beginKeywords:"run cmd entrypoint volume add copy workdir label healthcheck shell",starts:{end:/[^\\]$/,subLanguage:"bash"}}],illegal:"</"}})),ro.registerLanguage("go",(function(n){var e={keyword:"break default func interface select case map struct chan else goto package switch const fallthrough if range type continue for import return var go defer bool byte complex64 complex128 float32 float64 int8 int16 int32 int64 string uint8 uint16 uint32 uint64 int uint uintptr rune",literal:"true false iota nil",built_in:"append cap close complex copy imag len make new panic print println real recover delete"};return{aliases:["golang"],keywords:e,illegal:"</",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,{className:"string",variants:[n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{begin:n.C_NUMBER_RE+"[i]",relevance:1},n.C_NUMBER_MODE]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[n.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,keywords:e,illegal:/["']/}]}]}})),ro.registerLanguage("http",(function(n){return{aliases:["https"],illegal:"\\S",contains:[{begin:"^HTTP/[0-9\\.]+",end:"$",contains:[{className:"number",begin:"\\b\\d{3}\\b"}]},{begin:"^[A-Z]+ (.*?) HTTP/[0-9\\.]+$",returnBegin:!0,end:"$",contains:[{className:"string",begin:" ",end:" ",excludeBegin:!0,excludeEnd:!0},{begin:"HTTP/[0-9\\.]+"},{className:"keyword",begin:"[A-Z]+"}]},{className:"attribute",begin:"^\\w",end:": ",excludeEnd:!0,illegal:"\\n|\\s|=",starts:{end:"$",relevance:0}},{begin:"\\n\\n",starts:{subLanguage:[],endsWithParent:!0}}]}})),ro.registerLanguage("javascript",(function(n){var e="<>",t="</>",r={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/},o="[A-Za-z$_][0-9A-Za-z$_]*",i={keyword:"in of if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const export super debugger as async await static import from as",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document Symbol Set Map WeakSet WeakMap Proxy Reflect Promise"},a={className:"number",variants:[{begin:"\\b(0[bB][01]+)n?"},{begin:"\\b(0[oO][0-7]+)n?"},{begin:n.C_NUMBER_RE+"n?"}],relevance:0},c={className:"subst",begin:"\\$\\{",end:"\\}",keywords:i,contains:[]},u={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,c],subLanguage:"xml"}},s={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,c],subLanguage:"css"}},f={className:"string",begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE,c]};c.contains=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,u,s,f,a,n.REGEXP_MODE];var l=c.contains.concat([n.C_BLOCK_COMMENT_MODE,n.C_LINE_COMMENT_MODE]);return{aliases:["js","jsx","mjs","cjs"],keywords:i,contains:[{className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},{className:"meta",begin:/^#!/,end:/$/},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,u,s,f,n.C_LINE_COMMENT_MODE,n.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+",contains:[{className:"type",begin:"\\{",end:"\\}",relevance:0},{className:"variable",begin:o+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),n.C_BLOCK_COMMENT_MODE,a,{begin:/[{,\n]\s*/,relevance:0,contains:[{begin:o+"\\s*:",returnBegin:!0,relevance:0,contains:[{className:"attr",begin:o,relevance:0}]}]},{begin:"("+n.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,n.REGEXP_MODE,{className:"function",begin:"(\\(.*?\\)|"+o+")\\s*=>",returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:o},{begin:/\(\s*\)/},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:i,contains:l}]}]},{className:"",begin:/\s/,end:/\s*/,skip:!0},{variants:[{begin:e,end:t},{begin:r.begin,end:r.end}],subLanguage:"xml",contains:[{begin:r.begin,end:r.end,skip:!0,contains:["self"]}]}],relevance:0},{className:"function",beginKeywords:"function",end:/\{/,excludeEnd:!0,contains:[n.inherit(n.TITLE_MODE,{begin:o}),{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,contains:l}],illegal:/\[|%/},{begin:/\$[(.]/},n.METHOD_GUARD,{className:"class",beginKeywords:"class",end:/[{;=]/,excludeEnd:!0,illegal:/[:"\[\]]/,contains:[{beginKeywords:"extends"},n.UNDERSCORE_TITLE_MODE]},{beginKeywords:"constructor get set",end:/\{/,excludeEnd:!0}],illegal:/#(?!!)/}})),ro.registerLanguage("markdown",(function(n){return{aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$"},{begin:"^.+?\\n[=-]{2,}$"}]},{begin:"<",end:">",subLanguage:"xml",relevance:0},{className:"bullet",begin:"^\\s*([*+-]|(\\d+\\.))\\s+"},{className:"strong",begin:"[*_]{2}.+?[*_]{2}"},{className:"emphasis",variants:[{begin:"\\*.+?\\*"},{begin:"_.+?_",relevance:0}]},{className:"quote",begin:"^>\\s+",end:"$"},{className:"code",variants:[{begin:"^```\\w*\\s*$",end:"^```[ ]*$"},{begin:"`.+?`"},{begin:"^( {4}|\\t)",end:"$",relevance:0}]},{begin:"^[-\\*]{3,}",end:"$"},{begin:"\\[.+?\\][\\(\\[].*?[\\)\\]]",returnBegin:!0,contains:[{className:"string",begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0,relevance:0},{className:"link",begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}],relevance:10},{begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]}]}})),ro.registerLanguage("mojolicious",(function(n){return{subLanguage:"xml",contains:[{className:"meta",begin:"^__(END|DATA)__$"},{begin:"^\\s*%{1,2}={0,2}",end:"$",subLanguage:"perl"},{begin:"<%{1,2}={0,2}",end:"={0,1}%>",subLanguage:"perl",excludeBegin:!0,excludeEnd:!0}]}})),ro.registerLanguage("nginx",(function(n){var e={className:"variable",variants:[{begin:/\$\d+/},{begin:/\$\{/,end:/}/},{begin:"[\\$\\@]"+n.UNDERSCORE_IDENT_RE}]},t={endsWithParent:!0,lexemes:"[a-z/_]+",keywords:{literal:"on off yes no true false none blocked debug info notice warn error crit select break last permanent redirect kqueue rtsig epoll poll /dev/poll"},relevance:0,illegal:"=>",contains:[n.HASH_COMMENT_MODE,{className:"string",contains:[n.BACKSLASH_ESCAPE,e],variants:[{begin:/"/,end:/"/},{begin:/'/,end:/'/}]},{begin:"([a-z]+):/",end:"\\s",endsWithParent:!0,excludeEnd:!0,contains:[e]},{className:"regexp",contains:[n.BACKSLASH_ESCAPE,e],variants:[{begin:"\\s\\^",end:"\\s|{|;",returnEnd:!0},{begin:"~\\*?\\s+",end:"\\s|{|;",returnEnd:!0},{begin:"\\*(\\.[a-z\\-]+)+"},{begin:"([a-z\\-]+\\.)+\\*"}]},{className:"number",begin:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{className:"number",begin:"\\b\\d+[kKmMgGdshdwy]*\\b",relevance:0},e]};return{aliases:["nginxconf"],contains:[n.HASH_COMMENT_MODE,{begin:n.UNDERSCORE_IDENT_RE+"\\s+{",returnBegin:!0,end:"{",contains:[{className:"section",begin:n.UNDERSCORE_IDENT_RE}],relevance:0},{begin:n.UNDERSCORE_IDENT_RE+"\\s",end:";|{",returnBegin:!0,contains:[{className:"attribute",begin:n.UNDERSCORE_IDENT_RE,starts:t}],relevance:0}],illegal:"[^\\s\\}]"}})),ro.registerLanguage("perl",(function(n){var e="getpwent getservent quotemeta msgrcv scalar kill dbmclose undef lc ma syswrite tr send umask sysopen shmwrite vec qx utime local oct semctl localtime readpipe do return format read sprintf dbmopen pop getpgrp not getpwnam rewinddir qqfileno qw endprotoent wait sethostent bless s|0 opendir continue each sleep endgrent shutdown dump chomp connect getsockname die socketpair close flock exists index shmgetsub for endpwent redo lstat msgctl setpgrp abs exit select print ref gethostbyaddr unshift fcntl syscall goto getnetbyaddr join gmtime symlink semget splice x|0 getpeername recv log setsockopt cos last reverse gethostbyname getgrnam study formline endhostent times chop length gethostent getnetent pack getprotoent getservbyname rand mkdir pos chmod y|0 substr endnetent printf next open msgsnd readdir use unlink getsockopt getpriority rindex wantarray hex system getservbyport endservent int chr untie rmdir prototype tell listen fork shmread ucfirst setprotoent else sysseek link getgrgid shmctl waitpid unpack getnetbyname reset chdir grep split require caller lcfirst until warn while values shift telldir getpwuid my getprotobynumber delete and sort uc defined srand accept package seekdir getprotobyname semop our rename seek if q|0 chroot sysread setpwent no crypt getc chown sqrt write setnetent setpriority foreach tie sin msgget map stat getlogin unless elsif truncate exec keys glob tied closedirioctl socket readlink eval xor readline binmode setservent eof ord bind alarm pipe atan2 getgrent exp time push setgrent gt lt or ne m|0 break given say state when",t={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:e},r={begin:"->{",end:"}"},o={variants:[{begin:/\$\d/},{begin:/[\$%@](\^\w\b|#\w+(::\w+)*|{\w+}|\w+(::\w*)*)/},{begin:/[\$%@][^\s\w{]/,relevance:0}]},i=[n.BACKSLASH_ESCAPE,t,o],a=[o,n.HASH_COMMENT_MODE,n.COMMENT("^\\=\\w","\\=cut",{endsWithParent:!0}),r,{className:"string",contains:i,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*\\<",end:"\\>",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[n.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE]},{begin:"{\\w+}",contains:[],relevance:0},{begin:"-?\\w+\\s*\\=\\>",contains:[],relevance:0}]},{className:"number",begin:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",relevance:0},{begin:"(\\/\\/|"+n.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[n.HASH_COMMENT_MODE,{className:"regexp",begin:"(s|tr|y)/(\\\\.|[^/])*/(\\\\.|[^/])*/[a-z]*",relevance:10},{className:"regexp",begin:"(m|qr)?/",end:"/[a-z]*",contains:[n.BACKSLASH_ESCAPE],relevance:0}]},{className:"function",beginKeywords:"sub",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[n.TITLE_MODE]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return t.contains=a,r.contains=a,{aliases:["pl","pm"],lexemes:/[\w\.]+/,keywords:e,contains:a}})),ro.registerLanguage("python",(function(n){var e={keyword:"and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del or def lambda async await nonlocal|10",built_in:"Ellipsis NotImplemented",literal:"False None True"},t={className:"meta",begin:/^(>>>|\.\.\.) /},r={className:"subst",begin:/\{/,end:/\}/,keywords:e,illegal:/#/},o={begin:/\{\{/,relevance:0},i={className:"string",contains:[n.BACKSLASH_ESCAPE],variants:[{begin:/(u|b)?r?'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,t],relevance:10},{begin:/(u|b)?r?"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,t],relevance:10},{begin:/(fr|rf|f)'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,t,o,r]},{begin:/(fr|rf|f)"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,t,o,r]},{begin:/(u|r|ur)'/,end:/'/,relevance:10},{begin:/(u|r|ur)"/,end:/"/,relevance:10},{begin:/(b|br)'/,end:/'/},{begin:/(b|br)"/,end:/"/},{begin:/(fr|rf|f)'/,end:/'/,contains:[n.BACKSLASH_ESCAPE,o,r]},{begin:/(fr|rf|f)"/,end:/"/,contains:[n.BACKSLASH_ESCAPE,o,r]},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},a={className:"number",relevance:0,variants:[{begin:n.BINARY_NUMBER_RE+"[lLjJ]?"},{begin:"\\b(0o[0-7]+)[lLjJ]?"},{begin:n.C_NUMBER_RE+"[lLjJ]?"}]},c={className:"params",begin:/\(/,end:/\)/,contains:["self",t,a,i,n.HASH_COMMENT_MODE]};return r.contains=[i,a,t],{aliases:["py","gyp","ipython"],keywords:e,illegal:/(<\/|->|\?)|=>/,contains:[t,a,{beginKeywords:"if",relevance:0},i,n.HASH_COMMENT_MODE,{variants:[{className:"function",beginKeywords:"def"},{className:"class",beginKeywords:"class"}],end:/:/,illegal:/[${=;\n,]/,contains:[n.UNDERSCORE_TITLE_MODE,c,{begin:/->/,endsWithParent:!0,keywords:"None"}]},{className:"meta",begin:/^[\t ]*@/,end:/$/},{begin:/\b(print|exec)\(/}]}})),ro.registerLanguage("scss",(function(n){var e={className:"variable",begin:"(\\$[a-zA-Z-][a-zA-Z0-9_-]*)\\b"},t={className:"number",begin:"#[0-9A-Fa-f]+"};n.CSS_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,n.C_BLOCK_COMMENT_MODE;return{case_insensitive:!0,illegal:"[=/|']",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,{className:"selector-id",begin:"\\#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},{className:"selector-attr",begin:"\\[",end:"\\]",illegal:"$"},{className:"selector-tag",begin:"\\b(a|abbr|acronym|address|area|article|aside|audio|b|base|big|blockquote|body|br|button|canvas|caption|cite|code|col|colgroup|command|datalist|dd|del|details|dfn|div|dl|dt|em|embed|fieldset|figcaption|figure|footer|form|frame|frameset|(h[1-6])|head|header|hgroup|hr|html|i|iframe|img|input|ins|kbd|keygen|label|legend|li|link|map|mark|meta|meter|nav|noframes|noscript|object|ol|optgroup|option|output|p|param|pre|progress|q|rp|rt|ruby|samp|script|section|select|small|span|strike|strong|style|sub|sup|table|tbody|td|textarea|tfoot|th|thead|time|title|tr|tt|ul|var|video)\\b",relevance:0},{className:"selector-pseudo",begin:":(visited|valid|root|right|required|read-write|read-only|out-range|optional|only-of-type|only-child|nth-of-type|nth-last-of-type|nth-last-child|nth-child|not|link|left|last-of-type|last-child|lang|invalid|indeterminate|in-range|hover|focus|first-of-type|first-line|first-letter|first-child|first|enabled|empty|disabled|default|checked|before|after|active)"},{className:"selector-pseudo",begin:"::(after|before|choices|first-letter|first-line|repeat-index|repeat-item|selection|value)"},e,{className:"attribute",begin:"\\b(src|z-index|word-wrap|word-spacing|word-break|width|widows|white-space|visibility|vertical-align|unicode-bidi|transition-timing-function|transition-property|transition-duration|transition-delay|transition|transform-style|transform-origin|transform|top|text-underline-position|text-transform|text-shadow|text-rendering|text-overflow|text-indent|text-decoration-style|text-decoration-line|text-decoration-color|text-decoration|text-align-last|text-align|tab-size|table-layout|right|resize|quotes|position|pointer-events|perspective-origin|perspective|page-break-inside|page-break-before|page-break-after|padding-top|padding-right|padding-left|padding-bottom|padding|overflow-y|overflow-x|overflow-wrap|overflow|outline-width|outline-style|outline-offset|outline-color|outline|orphans|order|opacity|object-position|object-fit|normal|none|nav-up|nav-right|nav-left|nav-index|nav-down|min-width|min-height|max-width|max-height|mask|marks|margin-top|margin-right|margin-left|margin-bottom|margin|list-style-type|list-style-position|list-style-image|list-style|line-height|letter-spacing|left|justify-content|initial|inherit|ime-mode|image-orientation|image-resolution|image-rendering|icon|hyphens|height|font-weight|font-variant-ligatures|font-variant|font-style|font-stretch|font-size-adjust|font-size|font-language-override|font-kerning|font-feature-settings|font-family|font|float|flex-wrap|flex-shrink|flex-grow|flex-flow|flex-direction|flex-basis|flex|filter|empty-cells|display|direction|cursor|counter-reset|counter-increment|content|column-width|column-span|column-rule-width|column-rule-style|column-rule-color|column-rule|column-gap|column-fill|column-count|columns|color|clip-path|clip|clear|caption-side|break-inside|break-before|break-after|box-sizing|box-shadow|box-decoration-break|bottom|border-width|border-top-width|border-top-style|border-top-right-radius|border-top-left-radius|border-top-color|border-top|border-style|border-spacing|border-right-width|border-right-style|border-right-color|border-right|border-radius|border-left-width|border-left-style|border-left-color|border-left|border-image-width|border-image-source|border-image-slice|border-image-repeat|border-image-outset|border-image|border-color|border-collapse|border-bottom-width|border-bottom-style|border-bottom-right-radius|border-bottom-left-radius|border-bottom-color|border-bottom|border|background-size|background-repeat|background-position|background-origin|background-image|background-color|background-clip|background-attachment|background-blend-mode|background|backface-visibility|auto|animation-timing-function|animation-play-state|animation-name|animation-iteration-count|animation-fill-mode|animation-duration|animation-direction|animation-delay|animation|align-self|align-items|align-content)\\b",illegal:"[^\\s]"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:":",end:";",contains:[e,t,n.CSS_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,{className:"meta",begin:"!important"}]},{begin:"@(page|font-face)",lexemes:"@[a-z-]+",keywords:"@page @font-face"},{begin:"@",end:"[{;]",returnBegin:!0,keywords:"and or not only",contains:[{begin:"@[a-z-]+",className:"keyword"},e,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,t,n.CSS_NUMBER_MODE]}]}})),ro.registerLanguage("shell",(function(n){return{aliases:["console"],contains:[{className:"meta",begin:"^\\s{0,3}[/\\w\\d\\[\\]()@-]*[>%$#]",starts:{end:"$",subLanguage:"bash"}}]}})),ro.registerLanguage("xml",(function(n){var e={className:"symbol",begin:"&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;"},t={begin:"\\s",contains:[{className:"meta-keyword",begin:"#?[a-z_][a-z1-9_-]+",illegal:"\\n"}]},r=n.inherit(t,{begin:"\\(",end:"\\)"}),o=n.inherit(n.APOS_STRING_MODE,{className:"meta-string"}),i=n.inherit(n.QUOTE_STRING_MODE,{className:"meta-string"}),a={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:"[A-Za-z0-9\\._:-]+",relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[e]},{begin:/'/,end:/'/,contains:[e]},{begin:/[^\s"'=<>`]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,contains:[{className:"meta",begin:"<![a-z]",end:">",relevance:10,contains:[t,i,o,r,{begin:"\\[",end:"\\]",contains:[{className:"meta",begin:"<![a-z]",end:">",contains:[t,r,i,o]}]}]},n.COMMENT("\x3c!--","--\x3e",{relevance:10}),{begin:"<\\!\\[CDATA\\[",end:"\\]\\]>",relevance:10},e,{className:"meta",begin:/<\?xml/,end:/\?>/,relevance:10},{begin:/<\?(php)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},n.inherit(n.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),n.inherit(n.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]},{className:"tag",begin:"<style(?=\\s|>)",end:">",keywords:{name:"style"},contains:[a],starts:{end:"</style>",returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:"<script(?=\\s|>)",end:">",keywords:{name:"script"},contains:[a],starts:{end:"<\/script>",returnEnd:!0,subLanguage:["actionscript","javascript","handlebars","xml"]}},{className:"tag",begin:"</?",end:"/?>",contains:[{className:"name",begin:/[^\/><\s]+/,relevance:0},a]}]}})),ro.registerLanguage("yaml",(function(n){var e={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[n.BACKSLASH_ESCAPE,{className:"template-variable",variants:[{begin:"{{",end:"}}"},{begin:"%{",end:"}"}]}]};return{case_insensitive:!0,aliases:["yml","YAML","yaml"],contains:[{className:"attr",variants:[{begin:"\\w[\\w :\\/.-]*:(?=[ \t]|$)"},{begin:'"\\w[\\w :\\/.-]*":(?=[ \t]|$)'},{begin:"'\\w[\\w :\\/.-]*':(?=[ \t]|$)"}]},{className:"meta",begin:"^---s*$",relevance:10},{className:"string",begin:"[\\|>]([0-9]?[+-])?[ ]*\\n( *)[\\S ]+\\n(\\2[\\S ]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!"+n.UNDERSCORE_IDENT_RE},{className:"type",begin:"!!"+n.UNDERSCORE_IDENT_RE},{className:"meta",begin:"&"+n.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+n.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"\\-(?=[ ]|$)",relevance:0},n.HASH_COMMENT_MODE,{beginKeywords:"true false yes no null",keywords:{literal:"true false yes no null"}},{className:"number",begin:n.C_NUMBER_RE+"\\b"},e]}})),(uo=ro).lineNumbersBlock=function(n,e){uo.highlightBlock(n,e),n.innerHTML=function(n,e){var t=(e=e||{singleLine:!1}).singleLine?0:1;return function n(e){var t=e.childNodes;for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];co(o.textContent)>0&&(o.childNodes.length>0?n(o):io(o.parentNode))}}(n),function(n,e){var t=ao(n);if(""===t[t.length-1].trim()&&t.pop(),t.length>e){for(var r="",o=0,i=t.length;o<i;o++){var a=o+1;r+="<tr>"+'<td class="'.concat("hljs-ln-line"," ").concat("hljs-ln-numbers",'" ').concat("data-line-number",'="').concat(a,'">')+'<div class="'.concat("hljs-ln-n",'" ').concat("data-line-number",'="').concat(a,'"></div>')+"</td>"+'<td class="'.concat("hljs-ln-line"," ").concat("hljs-ln-code",'" ').concat("data-line-number",'="').concat(a,'">')+(t[o].length>0?t[o]:" ")+"</td></tr>"}return'<table class="'.concat("hljs-ln",'">').concat(r,"</table>")}return n}(n.innerHTML,t)}(n,e)};var so=n((function(n){function t(n){for(var t=document.createElement("div"),r=[[n,t]],o=[];r.length;){var i=r.shift(),a=v(i,2),c=a[0],u=a[1],s=void 0,f=void 0,l=e(c);if(null===c||"undefined"==l?l="null":Array.isArray(c)&&(l="array"),"array"==l?((f=function(n){return n}).len=c.length,(s=document.createElement("div")).className="json-array "+(f.len?"has-items":"is-empty")):"object"==l?function(){var n=Object.keys(c).sort();(f=function(e){return n[e]}).len=n.length,(s=document.createElement("div")).className="json-object "+(f.len?"has-items":"is-empty")}():((s=document.createElement("span")).className="json-"+l,s.textContent="null"==l?"null":"boolean"!=l?c:c?"true":"false"),f){var d=document.createElement("span");if(d.className="json-type",d.textContent=f.len?l+"["+f.len+"]":"{}",u.appendChild(d),-1!=o.indexOf(c))t.classList.add("has-recursive-items"),s.classList.add("is-seen");else{for(var p=0;p<f.len;p++){var h=f(p),m=document.createElement("div"),g=document.createElement("span");g.className="json-key",g.textContent=h,m.appendChild(g),s.appendChild(m),r.push([c[h],m])}o.push(c)}}u.className="json-item "+s.className.replace(/^json-/,"contains-"),u.appendChild(s)}return t}try{n.exports={jsonhtmlify:t}}catch(n){window.jsonhtmlify=t}})).jsonhtmlify;function fo(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function lo(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?fo(Object(t),!0).forEach((function(e){te(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):fo(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var po={},ho=function(n){var e=n.conversation,t=n.expandUrlToMedia,r=void 0!==t&&t,o=n.from,i=void 0===o?"Convos":o,a=n.groupBy,c=void 0===a?["fromId"]:a,u=n.waiting,s=void 0===u?[]:u,f=new Pe,l={};return e.messages.map((function(n,t){return(n=lo({color:"inherit",from:"Convos",fromId:"Convos",type:"notice",ts:f},n)).canToggleDetails="error"==n.type||"notice"==n.type,n.groupBy=c.map((function(e){return n[e]||""})).join(":"),n.index=t,n.isOnline=function(n,e){return!e.connection_id||("Convos"==n.fromId||(n.fromId==e.connection_id||!!e.findParticipant(n.fromId)))}(n,e),n.dayChanged=function(n,e){return e.ts&&n.ts.getDate()!=e.ts.getDate()}(n,l),n.embeds=function(n,e){var t=e.conversation,r=e.expandUrlToMedia,o=e.from,i="notice"!=n.type&&r?(n.embeds||[]).map((function(e){return po[e]||(po[e]=function(n,e){return vo.apply(this,arguments)}(e,{conversation:t,from:o,msg:n}))})):[];if(n.canToggleDetails){var a=["details",t.path,n.ts.valueOf()].join(":");i.unshift(po[a]||(po[a]=function(n,e){return mo.apply(this,arguments)}(a,n)))}return i.filter((function(n){return n})).map((function(e){return e.catch((function(e){return console.error(n,e)})),e}))}(n,{conversation:e,expandUrlToMedia:r,from:i}),n.className=go(n,l),l=n,n})).concat(function(n){n.conversation;var e=n.from,t=n.waiting,r={};return t.filter((function(n){return"send"==n.method&&n.message})).map((function(n,t){return(n=lo({color:"inherit",from:e,fromId:e.toLowerCase()},n)).canToggleDetails=!0,n.dayChanged=!1,n.groupBy="fromId",n.index=t,n.isOnline=!0,n.type=n.waitingForResponse?"notice":"error",n.embeds=[],n.className=go(n,r)+" is-waiting",n.markdown=n.waitingForResponse?n.message:$lmd('Could not send message "%1".',n.message),r=n,n}))}({conversation:e,from:i,waiting:s}))};function mo(){return(mo=f(t.mark((function n(e,r){var o;return t.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=lo({},r.sent||r),["bubbles","canToggleDetails","className","color","command","connection_id","dayChanged","embeds","event","groupBy","id","index","isOnline","markdown","method","stopPropagation"].forEach((function(n){return delete o[n]})),n.abrupt("return",{className:"for-jsonhtmlify hidden",html:so(o).outerHTML});case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function vo(){return(vo=f(t.mark((function n(e,r){var o,i,a,c;return t.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Be("/api","embed",{url:e}).perform();case 2:return o=n.sent,(i=o.res.body).html||(i.html=""),a=i.provider_name&&i.provider_name.toLowerCase()||"",i.className=a?"for-"+a:i.html?"for-unknown":"hidden",me(c=document.createRange().createContextualFragment(i.html).firstChild,"img",[["error",function(n){return n.target.style.display="none"}]]),-1!=(c&&c.className||"").split(/\s+/).indexOf("le-paste")&&yo(i,c),"jitsi"==a&&$o(i,c,r),n.abrupt("return",i);case 13:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function go(n,e){var t=["message"];return n.type&&t.push("is-type-"+n.type),n.highlight&&t.push("is-highlighted"),t.push(n.dayChanged||n.groupBy!=e.groupBy?"has-not-same-from":"has-same-from"),t.push(n.isOnline?"is-present":"is-not-present"),t.join(" ")}function $o(n,e,t){t.from;var r,o=t.conversation,i=new URL(n.url).pathname.replace(/^\//,"");i&&-1==i.indexOf("/")&&(r=0==i.indexOf(o.connection_id+"-")?i.substring(o.connection_id.length+1):i.replace(/[_-]+/g," ").replace(/([a-z ])([A-Z])/g,(function(n,e,t){return e+" "+t.toUpperCase()})).replace(/([ ]\w)/g,(function(n){return n.toUpperCase()})),r=decodeURIComponent(r),n.html='<div class="le-card le-rich le-join-request"><a class="le-thumbnail" href="'+n.url+'" target="'+i+'"><i class="fas fa-video"></i></a><h3>'+bt.l('Do you want to join the %1 video chat with "%2"?',"Jitsi",r)+'</h3><p class="le-description"><a href="'+n.url+'" target="'+i+'">'+bt.l("Yes, I want to join.")+"</a></p></div>")}function yo(n,e){var t=e.querySelector("pre");t&&(ro.lineNumbersBlock(t),n.html=e.outerHTML)}function bo(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function wo(n,e,t){var r=n.slice();return r[32]=e[t],r}function _o(n,e,t){var r=n.slice();return r[29]=e[t],r[31]=t,r}function ko(n){var e,t,r,o,i,a,c,u=new hr({props:{name:n[8].icon}});return{c:function(){e=Z("a"),Jn(u.$$.fragment),rn(e,"href",t=n[8].convosUrl),rn(e,"target",r=n[8].roomName),rn(e,"data-handle-link",o=n[8].realUrl),rn(e,"class","btn has-tooltip"),rn(e,"tooltip",i=n[9]("Start video conference"))},m:function(t,r,o){Y(t,e,r),Zn(u,e,null),a=!0,o&&c(),c=en(e,"click",n[16])},p:function(n,c){var s={};256&c[0]&&(s.name=n[8].icon),u.$set(s),(!a||256&c[0]&&t!==(t=n[8].convosUrl))&&rn(e,"href",t),(!a||256&c[0]&&r!==(r=n[8].roomName))&&rn(e,"target",r),(!a||256&c[0]&&o!==(o=n[8].realUrl))&&rn(e,"data-handle-link",o),(!a||512&c[0]&&i!==(i=n[9]("Start video conference")))&&rn(e,"tooltip",i)},i:function(n){a||(qn(u.$$.fragment,n),a=!0)},o:function(n){Fn(u.$$.fragment,n),a=!1},d:function(n){n&&V(e),Qn(u),c()}}}function xo(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h=n[9](n[1].name)+"",m=n[17](n[0],n[1])+"",v=n[8].convosUrl&&ko(n),g=new hr({props:{name:"tools"}}),$=new hr({props:{name:"times"}});return{c:function(){e=Z("h1"),t=Z("a"),r=Q(h),i=X(),a=Z("span"),c=Q(m),u=X(),v&&v.c(),s=X(),f=Z("a"),Jn(g.$$.fragment),Jn($.$$.fragment),rn(t,"href",o="#activeMenu:"+(n[1].connection_id?"settings":"nav")),rn(t,"tabindex","-1"),rn(a,"class","chat-header__topic"),rn(f,"href",l="#activeMenu:"+(n[1].connection_id?"settings":"nav")),rn(f,"class","btn has-tooltip can-toggle"),rn(f,"data-tooltip",d=n[9]("Settings")),sn(f,"is-toggled","settings"==n[4].activeMenu)},m:function(n,o){Y(n,e,o),G(e,t),G(t,r),Y(n,i,o),Y(n,a,o),G(a,c),Y(n,u,o),v&&v.m(n,o),Y(n,s,o),Y(n,f,o),Zn(g,f,null),Zn($,f,null),p=!0},p:function(n,e){(!p||514&e[0])&&h!==(h=n[9](n[1].name)+"")&&an(r,h),(!p||2&e[0]&&o!==(o="#activeMenu:"+(n[1].connection_id?"settings":"nav")))&&rn(t,"href",o),(!p||3&e[0])&&m!==(m=n[17](n[0],n[1])+"")&&an(c,m),n[8].convosUrl?v?(v.p(n,e),qn(v,1)):((v=ko(n)).c(),qn(v,1),v.m(s.parentNode,s)):v&&(zn(),Fn(v,1,1,(function(){v=null})),Hn()),(!p||2&e[0]&&l!==(l="#activeMenu:"+(n[1].connection_id?"settings":"nav")))&&rn(f,"href",l),(!p||512&e[0]&&d!==(d=n[9]("Settings")))&&rn(f,"data-tooltip",d),16&e[0]&&sn(f,"is-toggled","settings"==n[4].activeMenu)},i:function(n){p||(qn(v),qn(g.$$.fragment,n),qn($.$$.fragment,n),p=!0)},o:function(n){Fn(v),Fn(g.$$.fragment,n),Fn($.$$.fragment,n),p=!1},d:function(n){n&&V(e),n&&V(i),n&&V(a),n&&V(u),v&&v.d(n),n&&V(s),n&&V(f),Qn(g),Qn($)}}}function Eo(n){var e,t,r,o,i,a,c=n[9]("Loading...")+"",u=new hr({props:{name:"spinner",animation:"spin"}});return{c:function(){e=Z("div"),t=Z("span"),Jn(u.$$.fragment),r=X(),o=Z("i"),i=Q(c),rn(e,"class","message__status-line for-loading has-pos-top")},m:function(n,c){Y(n,e,c),G(e,t),Zn(u,t,null),G(t,r),G(t,o),G(o,i),a=!0},p:function(n,e){(!a||512&e[0])&&c!==(c=n[9]("Loading...")+"")&&an(i,c)},i:function(n){a||(qn(u.$$.fragment,n),a=!0)},o:function(n){Fn(u.$$.fragment,n),a=!1},d:function(n){n&&V(e),Qn(u)}}}function Oo(n){var e,t,r,o,i,a,c=n[9]("Started chatting on %1",n[6].historyStartAt.getHumanDate())+"",u=new hr({props:{name:"calendar-alt"}});return{c:function(){e=Z("div"),t=Z("span"),Jn(u.$$.fragment),r=X(),o=Z("i"),i=Q(c),rn(e,"class","message__status-line for-start-of-history")},m:function(n,c){Y(n,e,c),G(e,t),Zn(u,t,null),G(t,r),G(t,o),G(o,i),a=!0},p:function(n,e){(!a||576&e[0])&&c!==(c=n[9]("Started chatting on %1",n[6].historyStartAt.getHumanDate())+"")&&an(i,c)},i:function(n){a||(qn(u.$$.fragment,n),a=!0)},o:function(n){Fn(u.$$.fragment,n),a=!1},d:function(n){n&&V(e),Qn(u)}}}function So(n){var e,t,r,o,i=[Ro,Co],a=[];function c(n,e){return n[6].is_private?0:1}return e=c(n),t=a[e]=i[e](n),{c:function(){t.c(),r=nn()},m:function(n,t){a[e].m(n,t),Y(n,r,t),o=!0},p:function(n,o){var u=e;(e=c(n))===u?a[e].p(n,o):(zn(),Fn(a[u],1,1,(function(){a[u]=null})),Hn(),(t=a[e])||(t=a[e]=i[e](n)).c(),qn(t,1),t.m(r.parentNode,r))},i:function(n){o||(qn(t),o=!0)},o:function(n){Fn(t),o=!1},d:function(n){a[e].d(n),n&&V(r)}}}function Co(n){var e,t,r,o,i,a=new kr({props:{$$slots:{default:[No]},$$scope:{ctx:n}}}),c=[Do,Ao],u=[];function s(n,e){return 1==n[6].nParticipants?0:1}return t=s(n),r=u[t]=c[t](n),{c:function(){Jn(a.$$.fragment),e=X(),r.c(),o=nn()},m:function(n,r){Zn(a,n,r),Y(n,e,r),u[t].m(n,r),Y(n,o,r),i=!0},p:function(n,e){var i={};1088&e[0]|32&e[1]&&(i.$$scope={dirty:e,ctx:n}),a.$set(i);var f=t;(t=s(n))===f?u[t].p(n,e):(zn(),Fn(u[f],1,1,(function(){u[f]=null})),Hn(),(r=u[t])||(r=u[t]=c[t](n)).c(),qn(r,1),r.m(o.parentNode,o))},i:function(n){i||(qn(a.$$.fragment,n),qn(r),i=!0)},o:function(n){Fn(a.$$.fragment,n),Fn(r),i=!1},d:function(n){Qn(a,n),n&&V(e),u[t].d(n),n&&V(o)}}}function Ro(n){var e,t=new kr({props:{$$slots:{default:[To]},$$scope:{ctx:n}}});return{c:function(){Jn(t.$$.fragment)},m:function(n,r){Zn(t,n,r),e=!0},p:function(n,e){var r={};1088&e[0]|32&e[1]&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(qn(t.$$.fragment,n),e=!0)},o:function(n){Fn(t.$$.fragment,n),e=!1},d:function(n){Qn(t,n)}}}function No(n){var e,t=n[10](n[6].topic?"Topic for %1 is: %2":"No topic is set for %1.",n[6].name,n[6].topic)+"";return{c:function(){e=new dn(t,null)},m:function(n,t){e.m(n,t)},p:function(n,r){1088&r[0]&&t!==(t=n[10](n[6].topic?"Topic for %1 is: %2":"No topic is set for %1.",n[6].name,n[6].topic)+"")&&e.p(t)},d:function(n){n&&e.d()}}}function Ao(n){var e,t=new kr({props:{same:!0,$$slots:{default:[Mo]},$$scope:{ctx:n}}});return{c:function(){Jn(t.$$.fragment)},m:function(n,r){Zn(t,n,r),e=!0},p:function(n,e){var r={};1088&e[0]|32&e[1]&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(qn(t.$$.fragment,n),e=!0)},o:function(n){Fn(t.$$.fragment,n),e=!1},d:function(n){Qn(t,n)}}}function Do(n){var e,t=new kr({props:{same:!0,$$slots:{default:[jo]},$$scope:{ctx:n}}});return{c:function(){Jn(t.$$.fragment)},m:function(n,r){Zn(t,n,r),e=!0},p:function(n,e){var r={};512&e[0]|32&e[1]&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(qn(t.$$.fragment,n),e=!0)},o:function(n){Fn(t.$$.fragment,n),e=!1},d:function(n){Qn(t,n)}}}function Mo(n){var e,t=n[10]("There are %1 [participants](%2) in this conversation.",n[6].nParticipants,n[6].path+"#activeMenu:settings")+"";return{c:function(){e=new dn(t,null)},m:function(n,t){e.m(n,t)},p:function(n,r){1088&r[0]&&t!==(t=n[10]("There are %1 [participants](%2) in this conversation.",n[6].nParticipants,n[6].path+"#activeMenu:settings")+"")&&e.p(t)},d:function(n){n&&e.d()}}}function jo(n){var e,t=n[9]("You are the only participant in this conversation.")+"";return{c:function(){e=Q(t)},m:function(n,t){Y(n,e,t)},p:function(n,r){512&r[0]&&t!==(t=n[9]("You are the only participant in this conversation.")+"")&&an(e,t)},d:function(n){n&&V(e)}}}function To(n){var e,t=n[10]('This is a private conversation with "%1".',n[6].name)+"";return{c:function(){e=new dn(t,null)},m:function(n,t){e.m(n,t)},p:function(n,r){1088&r[0]&&t!==(t=n[10]('This is a private conversation with "%1".',n[6].name)+"")&&e.p(t)},d:function(n){n&&e.d()}}}function Po(n){var e,t,r,o,i,a,c=n[29].ts.getHumanDate()+"",u=new hr({props:{name:"calendar-alt"}});return{c:function(){e=Z("div"),t=Z("span"),Jn(u.$$.fragment),r=X(),o=Z("i"),i=Q(c),rn(e,"class","message__status-line for-day-changed")},m:function(n,c){Y(n,e,c),G(e,t),Zn(u,t,null),G(t,r),G(t,o),G(o,i),a=!0},p:function(n,e){(!a||32&e[0])&&c!==(c=n[29].ts.getHumanDate()+"")&&an(i,c)},i:function(n){a||(qn(u.$$.fragment,n),a=!0)},o:function(n){Fn(u.$$.fragment,n),a=!1},d:function(n){n&&V(e),Qn(u)}}}function Lo(n){var e,t,r,o,i,a=n[9]("New messages")+"",c=new hr({props:{name:"comments"}});return{c:function(){e=Z("div"),t=Z("span"),Jn(c.$$.fragment),r=X(),o=Q(a),rn(e,"class","message__status-line for-last-read")},m:function(n,a){Y(n,e,a),G(e,t),Zn(c,t,null),G(t,r),G(t,o),i=!0},p:function(n,e){(!i||512&e[0])&&a!==(a=n[9]("New messages")+"")&&an(o,a)},i:function(n){i||(qn(c.$$.fragment,n),i=!0)},o:function(n){Fn(c.$$.fragment,n),i=!1},d:function(n){n&&V(e),Qn(c)}}}function Io(n){var e,t,r=new hr({props:{name:"error"==n[29].type?"exclamation-circle":"info-circle"}});return{c:function(){e=Z("a"),Jn(r.$$.fragment),rn(e,"href","#action:toggleDetails")},m:function(n,o){Y(n,e,o),Zn(r,e,null),t=!0},p:function(n,e){var t={};32&e[0]&&(t.name="error"==n[29].type?"exclamation-circle":"info-circle"),r.$set(t)},i:function(n){t||(qn(r.$$.fragment,n),t=!0)},o:function(n){Fn(r.$$.fragment,n),t=!1},d:function(n){n&&V(e),Qn(r)}}}function Uo(n){var e,t,r,o,i,a,c=new hr({props:{name:"times-circle"}}),u=new hr({props:{name:"sync-alt"}});return{c:function(){e=Z("a"),Jn(c.$$.fragment),r=X(),o=Z("a"),Jn(u.$$.fragment),rn(e,"href","#action:remove"),rn(e,"class","pull-right has-tooltip"),rn(e,"data-tooltip",t=n[9]("Remove")),rn(o,"href","#action:resend"),rn(o,"class","pull-right has-tooltip "),rn(o,"data-tooltip",i=n[9]("Resend"))},m:function(n,t){Y(n,e,t),Zn(c,e,null),Y(n,r,t),Y(n,o,t),Zn(u,o,null),a=!0},p:function(n,r){(!a||512&r[0]&&t!==(t=n[9]("Remove")))&&rn(e,"data-tooltip",t),(!a||512&r[0]&&i!==(i=n[9]("Resend")))&&rn(o,"data-tooltip",i)},i:function(n){a||(qn(c.$$.fragment,n),qn(u.$$.fragment,n),a=!0)},o:function(n){Fn(c.$$.fragment,n),Fn(u.$$.fragment,n),a=!1},d:function(n){n&&V(e),Qn(c),n&&V(r),n&&V(o),Qn(u)}}}function Bo(n){return{c:R,m:R,p:R,d:R}}function zo(n){var e,t,r=n[35].html+"";return{c:function(){rn(e=Z("div"),"class",t="embed "+n[35].className)},m:function(n,t){Y(n,e,t),e.innerHTML=r},p:function(n,o){32&o[0]&&r!==(r=n[35].html+"")&&(e.innerHTML=r),32&o[0]&&t!==(t="embed "+n[35].className)&&rn(e,"class",t)},d:function(n){n&&V(e)}}}function Ho(n){return{c:R,m:R,p:R,d:R}}function qo(n){var e,t,r={ctx:n,current:null,token:null,pending:Ho,then:zo,catch:Bo,value:35};return Gn(t=n[32],r),{c:function(){e=nn(),r.block.c()},m:function(n,t){Y(n,e,t),r.block.m(n,r.anchor=t),r.mount=function(){return e.parentNode},r.anchor=e},p:function(e,o){if(n=e,r.ctx=n,32&o[0]&&t!==(t=n[32])&&Gn(t,r));else{var i=n.slice();i[35]=r.resolved,r.block.p(i,o)}},d:function(n){n&&V(e),r.block.d(n),r.token=null,r=null}}}function Fo(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,$,y,b,w,_,k,x,E=n[29].ts.toLocaleString()+"",O=n[29].from+"",S=n[29].markdown+"",C=n[29].dayChanged&&Po(n),R=n[31]&&n[31]==n[6].messages.length-n[6].unread&&Lo(n),N=new hr({props:{name:"pick:"+n[29].fromId,color:n[29].color}}),A=[Uo,Io],D=[];function M(n,e){return!1===n[29].waitingForResponse?0:!n[29].waitingForResponse&&n[29].canToggleDetails?1:-1}~(m=M(n))&&(v=D[m]=A[m](n));for(var j=n[29].embeds,T=[],P=0;P<j.length;P+=1)T[P]=qo(wo(n,j,P));return{c:function(){C&&C.c(),e=X(),R&&R.c(),t=X(),r=Z("div"),Jn(N.$$.fragment),o=X(),i=Z("div"),a=Z("div"),c=Q(E),s=X(),f=Z("a"),l=Q(O),p=X(),h=Z("div"),v&&v.c(),g=X(),y=X();for(var m=0;m<T.length;m+=1)T[m].c();b=X(),rn(i,"class","message__ts has-tooltip"),rn(i,"data-content",u=n[29].ts.format("%H:%M")),rn(f,"href",d="#action:join:"+n[29].from),rn(f,"class","message__from"),un(f,"color",n[29].color),rn(f,"tabindex","-1"),$=new dn(S,null),rn(h,"class","message__text"),rn(r,"class",w=n[29].className),rn(r,"data-index",n[31]),rn(r,"data-ts",_=n[29].ts.toISOString())},m:function(u,d,v){C&&C.m(u,d),Y(u,e,d),R&&R.m(u,d),Y(u,t,d),Y(u,r,d),Zn(N,r,null),G(r,o),G(r,i),G(i,a),G(a,c),G(r,s),G(r,f),G(f,l),G(r,p),G(r,h),~m&&D[m].m(h,null),G(h,g),$.m(h),G(r,y);for(var w=0;w<T.length;w+=1)T[w].m(r,null);G(r,b),k=!0,v&&x(),x=en(r,"click",n[13])},p:function(n,o){n[29].dayChanged?C?(C.p(n,o),qn(C,1)):((C=Po(n)).c(),qn(C,1),C.m(e.parentNode,e)):C&&(zn(),Fn(C,1,1,(function(){C=null})),Hn()),n[31]&&n[31]==n[6].messages.length-n[6].unread?R?(R.p(n,o),qn(R,1)):((R=Lo(n)).c(),qn(R,1),R.m(t.parentNode,t)):R&&(zn(),Fn(R,1,1,(function(){R=null})),Hn());var a={};32&o[0]&&(a.name="pick:"+n[29].fromId),32&o[0]&&(a.color=n[29].color),N.$set(a),(!k||32&o[0])&&E!==(E=n[29].ts.toLocaleString()+"")&&an(c,E),(!k||32&o[0]&&u!==(u=n[29].ts.format("%H:%M")))&&rn(i,"data-content",u),(!k||32&o[0])&&O!==(O=n[29].from+"")&&an(l,O),(!k||32&o[0]&&d!==(d="#action:join:"+n[29].from))&&rn(f,"href",d),(!k||32&o[0])&&un(f,"color",n[29].color);var s=m;if((m=M(n))===s?~m&&D[m].p(n,o):(v&&(zn(),Fn(D[s],1,1,(function(){D[s]=null})),Hn()),~m?((v=D[m])||(v=D[m]=A[m](n)).c(),qn(v,1),v.m(h,g)):v=null),(!k||32&o[0])&&S!==(S=n[29].markdown+"")&&$.p(S),32&o[0]){var p;for(j=n[29].embeds,p=0;p<j.length;p+=1){var y=wo(n,j,p);T[p]?T[p].p(y,o):(T[p]=qo(y),T[p].c(),T[p].m(r,b))}for(;p<T.length;p+=1)T[p].d(1);T.length=j.length}(!k||32&o[0]&&w!==(w=n[29].className))&&rn(r,"class",w),(!k||32&o[0]&&_!==(_=n[29].ts.toISOString()))&&rn(r,"data-ts",_)},i:function(n){k||(qn(C),qn(R),qn(N.$$.fragment,n),qn(v),k=!0)},o:function(n){Fn(C),Fn(R),Fn(N.$$.fragment,n),Fn(v),k=!1},d:function(n){C&&C.d(n),n&&V(e),R&&R.d(n),n&&V(t),n&&V(r),Qn(N),~m&&D[m].d(),J(T,n),x()}}}function Ko(n){var e,t=new kr({props:{type:"error",$$slots:{default:[Vo]},$$scope:{ctx:n}}});return{c:function(){Jn(t.$$.fragment)},m:function(n,r){Zn(t,n,r),e=!0},p:function(n,e){var r={};704&e[0]|32&e[1]&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(qn(t.$$.fragment,n),e=!0)},o:function(n){Fn(t.$$.fragment,n),e=!1},d:function(n){Qn(t,n)}}}function Wo(n){var e,t=new kr({props:{type:"error",$$slots:{default:[Jo]},$$scope:{ctx:n}}});return{c:function(){Jn(t.$$.fragment)},m:function(n,r){Zn(t,n,r),e=!0},p:function(n,e){var r={};1152&e[0]|32&e[1]&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(qn(t.$$.fragment,n),e=!0)},o:function(n){Fn(t.$$.fragment,n),e=!1},d:function(n){Qn(t,n)}}}function Go(n){var e,t,r,o,i,a,c,u,s,f=n[9]("You are not part of this conversation.")+"",l=n[9]('Do you want to chat with "%1"?',n[6].conversation_id)+"",d=new $r({props:{type:"button",icon:"thumbs-up",$$slots:{default:[Zo]},$$scope:{ctx:n}}});d.$on("click",n[27]);var p=new qr({props:{href:"/chat",class:"btn",$$slots:{default:[Qo]},$$scope:{ctx:n}}});return{c:function(){e=Z("h2"),t=Q(f),r=X(),o=Z("p"),i=Q(l),a=X(),c=Z("p"),Jn(d.$$.fragment),u=X(),Jn(p.$$.fragment)},m:function(n,f){Y(n,e,f),G(e,t),Y(n,r,f),Y(n,o,f),G(o,i),Y(n,a,f),Y(n,c,f),Zn(d,c,null),G(c,u),Zn(p,c,null),s=!0},p:function(n,e){(!s||512&e[0])&&f!==(f=n[9]("You are not part of this conversation.")+"")&&an(t,f),(!s||576&e[0])&&l!==(l=n[9]('Do you want to chat with "%1"?',n[6].conversation_id)+"")&&an(i,l);var r={};512&e[0]|32&e[1]&&(r.$$scope={dirty:e,ctx:n}),d.$set(r);var o={};512&e[0]|32&e[1]&&(o.$$scope={dirty:e,ctx:n}),p.$set(o)},i:function(n){s||(qn(d.$$.fragment,n),qn(p.$$.fragment,n),s=!0)},o:function(n){Fn(d.$$.fragment,n),Fn(p.$$.fragment,n),s=!1},d:function(n){n&&V(e),n&&V(r),n&&V(o),n&&V(a),n&&V(c),Qn(d),Qn(p)}}}function Yo(n){var e,t,r,o,i,a,c,u,s,f=n[9]("Connection does not exist.")+"",l=n[9]('Do you want to create the connection "%1"?',n[7].connection_id)+"",d=new qr({props:{href:"/settings/connection?server="+encodeURIComponent(n[6].connection_id)+"&conversation="+encodeURIComponent(n[6].conversation_id),class:"btn",$$slots:{default:[Xo]},$$scope:{ctx:n}}}),p=new qr({props:{href:"/chat",class:"btn",$$slots:{default:[ni]},$$scope:{ctx:n}}});return{c:function(){e=Z("h2"),t=Q(f),r=X(),o=Z("p"),i=Q(l),a=X(),c=Z("p"),Jn(d.$$.fragment),u=X(),Jn(p.$$.fragment)},m:function(n,f){Y(n,e,f),G(e,t),Y(n,r,f),Y(n,o,f),G(o,i),Y(n,a,f),Y(n,c,f),Zn(d,c,null),G(c,u),Zn(p,c,null),s=!0},p:function(n,e){(!s||512&e[0])&&f!==(f=n[9]("Connection does not exist.")+"")&&an(t,f),(!s||640&e[0])&&l!==(l=n[9]('Do you want to create the connection "%1"?',n[7].connection_id)+"")&&an(i,l);var r={};64&e[0]&&(r.href="/settings/connection?server="+encodeURIComponent(n[6].connection_id)+"&conversation="+encodeURIComponent(n[6].conversation_id)),512&e[0]|32&e[1]&&(r.$$scope={dirty:e,ctx:n}),d.$set(r);var o={};512&e[0]|32&e[1]&&(o.$$scope={dirty:e,ctx:n}),p.$set(o)},i:function(n){s||(qn(d.$$.fragment,n),qn(p.$$.fragment,n),s=!0)},o:function(n){Fn(d.$$.fragment,n),Fn(p.$$.fragment,n),s=!1},d:function(n){n&&V(e),n&&V(r),n&&V(o),n&&V(a),n&&V(c),Qn(d),Qn(p)}}}function Vo(n){var e,t=(n[17](n[7],n[6]).replace(/\.$/,"")||n[9](n[6].frozen))+"";return{c:function(){e=Q(t)},m:function(n,t){Y(n,e,t)},p:function(n,r){704&r[0]&&t!==(t=(n[17](n[7],n[6]).replace(/\.$/,"")||n[9](n[6].frozen))+"")&&an(e,t)},d:function(n){n&&V(e)}}}function Jo(n){var e,t=n[10]("Disconnected. Your connection %1 can be edited in [settings](%2).",n[7].name,"#activeMenu:settings")+"";return{c:function(){e=new dn(t,null)},m:function(n,t){e.m(n,t)},p:function(n,r){1152&r[0]&&t!==(t=n[10]("Disconnected. Your connection %1 can be edited in [settings](%2).",n[7].name,"#activeMenu:settings")+"")&&e.p(t)},d:function(n){n&&e.d()}}}function Zo(n){var e,t,r=n[9]("Yes")+"";return{c:function(){e=Z("span"),t=Q(r)},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){512&e[0]&&r!==(r=n[9]("Yes")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Qo(n){var e,t,r,o=n[9]("No")+"",i=new hr({props:{name:"thumbs-down"}});return{c:function(){Jn(i.$$.fragment),e=Z("span"),t=Q(o)},m:function(n,o){Zn(i,n,o),Y(n,e,o),G(e,t),r=!0},p:function(n,e){(!r||512&e[0])&&o!==(o=n[9]("No")+"")&&an(t,o)},i:function(n){r||(qn(i.$$.fragment,n),r=!0)},o:function(n){Fn(i.$$.fragment,n),r=!1},d:function(n){Qn(i,n),n&&V(e)}}}function Xo(n){var e,t,r,o=n[9]("Yes")+"",i=new hr({props:{name:"thumbs-up"}});return{c:function(){Jn(i.$$.fragment),e=X(),t=Q(o)},m:function(n,o){Zn(i,n,o),Y(n,e,o),Y(n,t,o),r=!0},p:function(n,e){(!r||512&e[0])&&o!==(o=n[9]("Yes")+"")&&an(t,o)},i:function(n){r||(qn(i.$$.fragment,n),r=!0)},o:function(n){Fn(i.$$.fragment,n),r=!1},d:function(n){Qn(i,n),n&&V(e),n&&V(t)}}}function ni(n){var e,t,r,o=n[9]("No")+"",i=new hr({props:{name:"thumbs-down"}});return{c:function(){Jn(i.$$.fragment),e=X(),t=Q(o)},m:function(n,o){Zn(i,n,o),Y(n,e,o),Y(n,t,o),r=!0},p:function(n,e){(!r||512&e[0])&&o!==(o=n[9]("No")+"")&&an(t,o)},i:function(n){r||(qn(i.$$.fragment,n),r=!0)},o:function(n){Fn(i.$$.fragment,n),r=!1},d:function(n){Qn(i,n),n&&V(e),n&&V(t)}}}function ei(n){var e,t,r,o,i,a,c=n[9]("Loading...")+"",u=new hr({props:{name:"spinner",animation:"spin"}});return{c:function(){e=Z("div"),t=Z("span"),Jn(u.$$.fragment),r=X(),o=Z("i"),i=Q(c),rn(e,"class","message__status-line for-loading has-pos-bottom")},m:function(n,c){Y(n,e,c),G(e,t),Zn(u,t,null),G(t,r),G(t,o),G(o,i),a=!0},p:function(n,e){(!a||512&e[0])&&c!==(c=n[9]("Loading...")+"")&&an(i,c)},i:function(n){a||(qn(u.$$.fragment,n),a=!0)},o:function(n){Fn(u.$$.fragment,n),a=!1},d:function(n){n&&V(e),Qn(u)}}}function ti(n){var e,t,r,o,i,a,c=n[9]("Jump to %1",n[2].format("%b %e %H:%M"))+"",u=new hr({props:{name:"external-link-alt"}});return{c:function(){e=Z("div"),t=Z("a"),Jn(u.$$.fragment),r=X(),o=Q(c),rn(t,"href",i=n[1].path),rn(e,"class","message__status-line for-jump-to-now")},m:function(n,i){Y(n,e,i),G(e,t),Zn(u,t,null),G(t,r),G(t,o),a=!0},p:function(n,e){(!a||516&e[0])&&c!==(c=n[9]("Jump to %1",n[2].format("%b %e %H:%M"))+"")&&an(o,c),(!a||2&e[0]&&i!==(i=n[1].path))&&rn(t,"href",i)},i:function(n){a||(qn(u.$$.fragment,n),a=!0)},o:function(n){Fn(u.$$.fragment,n),a=!1},d:function(n){n&&V(e),Qn(u)}}}function ri(n){for(var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m=n[6].is("loading"),v=n[6].historyStartAt&&!n[6].is("not_found"),g=n[6].messages.length<10&&!n[6].is("not_found"),$=n[6].is("loading"),y=m&&Eo(n),b=v&&Oo(n),w=g&&So(n),_=n[5],k=[],x=0;x<_.length;x+=1)k[x]=Fo(_o(n,_,x));var E=function(n){return Fn(k[n],1,1,(function(){k[n]=null}))},O=[Yo,Go,Wo,Ko],S=[];function C(n,e){return 192&e[0]&&(i=!(!n[7].is("not_found")||n[6].conversation_id)),i?0:(64&e[0]&&(a=!!n[6].is("not_found")),a?1:(128&e[0]&&(c=!(n[7].is("unreachable")||!n[7].frozen)),c?2:(64&e[0]&&(u=!(!n[6].frozen||n[6].is("locked"))),u?3:-1)))}~(s=C(n,[-1]))&&(f=S[s]=O[s](n));var R=$&&ei(n),N=!n[6].historyStopAt&&n[6].messages.length&&ti(n);return{c:function(){y&&y.c(),e=X(),b&&b.c(),t=X(),w&&w.c(),r=X();for(var n=0;n<k.length;n+=1)k[n].c();o=X(),f&&f.c(),l=X(),R&&R.c(),d=X(),N&&N.c(),p=nn()},m:function(n,i){y&&y.m(n,i),Y(n,e,i),b&&b.m(n,i),Y(n,t,i),w&&w.m(n,i),Y(n,r,i);for(var a=0;a<k.length;a+=1)k[a].m(n,i);Y(n,o,i),~s&&S[s].m(n,i),Y(n,l,i),R&&R.m(n,i),Y(n,d,i),N&&N.m(n,i),Y(n,p,i),h=!0},p:function(n,i){if(64&i[0]&&(m=n[6].is("loading")),m?y?(y.p(n,i),qn(y,1)):((y=Eo(n)).c(),qn(y,1),y.m(e.parentNode,e)):y&&(zn(),Fn(y,1,1,(function(){y=null})),Hn()),64&i[0]&&(v=n[6].historyStartAt&&!n[6].is("not_found")),v?b?(b.p(n,i),qn(b,1)):((b=Oo(n)).c(),qn(b,1),b.m(t.parentNode,t)):b&&(zn(),Fn(b,1,1,(function(){b=null})),Hn()),64&i[0]&&(g=n[6].messages.length<10&&!n[6].is("not_found")),g?w?(w.p(n,i),qn(w,1)):((w=So(n)).c(),qn(w,1),w.m(r.parentNode,r)):w&&(zn(),Fn(w,1,1,(function(){w=null})),Hn()),8800&i[0]){var a;for(_=n[5],a=0;a<_.length;a+=1){var c=_o(n,_,a);k[a]?(k[a].p(c,i),qn(k[a],1)):(k[a]=Fo(c),k[a].c(),qn(k[a],1),k[a].m(o.parentNode,o))}for(zn(),a=_.length;a<k.length;a+=1)E(a);Hn()}var u=s;(s=C(n,i))===u?~s&&S[s].p(n,i):(f&&(zn(),Fn(S[u],1,1,(function(){S[u]=null})),Hn()),~s?((f=S[s])||(f=S[s]=O[s](n)).c(),qn(f,1),f.m(l.parentNode,l)):f=null),64&i[0]&&($=n[6].is("loading")),$?R?(R.p(n,i),qn(R,1)):((R=ei(n)).c(),qn(R,1),R.m(d.parentNode,d)):R&&(zn(),Fn(R,1,1,(function(){R=null})),Hn()),!n[6].historyStopAt&&n[6].messages.length?N?(N.p(n,i),qn(N,1)):((N=ti(n)).c(),qn(N,1),N.m(p.parentNode,p)):N&&(zn(),Fn(N,1,1,(function(){N=null})),Hn())},i:function(n){if(!h){qn(y),qn(b),qn(w);for(var e=0;e<_.length;e+=1)qn(k[e]);qn(f),qn(R),qn(N),h=!0}},o:function(n){Fn(y),Fn(b),Fn(w),k=k.filter(Boolean);for(var e=0;e<k.length;e+=1)Fn(k[e]);Fn(f),Fn(R),Fn(N),h=!1},d:function(n){y&&y.d(n),n&&V(e),b&&b.d(n),n&&V(t),w&&w.d(n),n&&V(r),J(k,n),n&&V(o),~s&&S[s].d(n),n&&V(l),R&&R.d(n),n&&V(d),N&&N.d(n),n&&V(p)}}}function oi(n){var e,t,r,o,i,a=new Sr({props:{$$slots:{default:[xo]},$$scope:{ctx:n}}}),c=new to({props:{class:"main is-above-chat-input",$$slots:{default:[ri]},$$scope:{ctx:n}}});function u(e){n[28].call(null,e)}c.$on("rendered",n[14]),c.$on("scrolled",n[15]);var s={conversation:n[1]};void 0!==n[3]&&(s.uploader=n[3]);var f=new Ur({props:s});On.push((function(){return Vn(f,"uploader",u)}));var l=new Zr({props:{conversation:n[1]}});return{c:function(){Jn(a.$$.fragment),e=X(),Jn(c.$$.fragment),t=X(),Jn(f.$$.fragment),o=X(),Jn(l.$$.fragment)},m:function(n,r){Zn(a,n,r),Y(n,e,r),Zn(c,n,r),Y(n,t,r),Zn(f,n,r),Y(n,o,r),Zn(l,n,r),i=!0},p:function(n,e){var t={};787&e[0]|32&e[1]&&(t.$$scope={dirty:e,ctx:n}),a.$set(t);var o={};1766&e[0]|32&e[1]&&(o.$$scope={dirty:e,ctx:n}),c.$set(o);var i={};2&e[0]&&(i.conversation=n[1]),!r&&8&e[0]&&(r=!0,i.uploader=n[3],Dn((function(){return r=!1}))),f.$set(i);var u={};2&e[0]&&(u.conversation=n[1]),l.$set(u)},i:function(n){i||(qn(a.$$.fragment,n),qn(c.$$.fragment,n),qn(f.$$.fragment,n),qn(l.$$.fragment,n),i=!0)},o:function(n){Fn(a.$$.fragment,n),Fn(c.$$.fragment,n),Fn(f.$$.fragment,n),Fn(l.$$.fragment,n),i=!1},d:function(n){Qn(a,n),n&&V(e),Qn(c,n),n&&V(t),Qn(f,n),n&&V(o),Qn(l,n)}}}function ii(n,e,t){var r,o,i,a,c,u,s,f=R,l=function(){return f(),f=P(y,(function(n){return t(6,i=n)})),y},d=R,p=function(){return d(),d=P($,(function(n){return t(7,a=n)})),$};L(n,ot,(function(n){return t(4,r=n)})),L(n,wt,(function(n){return t(9,u=n)})),L(n,_t,(function(n){return t(10,s=n)})),n.$$.on_destroy.push((function(){return f()})),n.$$.on_destroy.push((function(){return d()}));var h=kn("socket");L(n,h,(function(n){return t(21,c=n)}));var m=kn("user");L(n,m,(function(n){return t(20,o=n)}));var g=new Qr,$=m.notifications;p();var y=m.notifications;l();var b,w=new Pe,_="",k={};function x(n,e){if("activeMenu"==e[0])return!0;n.preventDefault();var t=n.target.closest(".message"),r=t&&S[t.dataset.index];return"join"==e[1]?y.send("/join "+r.from):"remove"==e[1]?h.deleteWaitingMessage(r.id):"resend"==e[1]?h.send(h.getWaitingMessages([r.id])[0]):"toggleDetails"==e[1]?me(t,".embed.for-jsonhtmlify",(function(n){return n.classList.toggle("hidden")})):void 0}function E(n){var e=["connection_id","conversation_id"].map((function(e){return n.param(e)})),t=v(e,2),r=t[0],o=t[1];y.connection_id==r&&y.conversation_id==o||m.setActiveConversation({connection_id:r,conversation_id:o})}function O(n){var e;if(n.activeConversation!=y)return k.conversation&&k.conversation(),k.markAsRead&&k.markAsRead(),l(t(1,y=n.activeConversation)),p(t(0,$=n.findConversation({connection_id:y.connection_id})||y)),t(2,w=new Pe),k.conversation=y.subscribe((function(n){l(t(1,y=n))})),k.markAsRead=y.markAsRead.bind(y),ot.update({title:y.title}),e=ot.hash,(_=!!String(e||"").match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)&&ot.hash||"")?y.load({around:_}):y.historyStopAt?void 0:y.load({around:w.toISOString()})}bn((function(){g.attach(document.querySelector(".main"),b)})),wn((function(){Object.keys(k).forEach((function(n){return k[n]()})),g.detach()}));var S,C,N;return n.$$.update=function(){16&n.$$.dirty[0]&&E(r),1048576&n.$$.dirty[0]&&O(o),3145920&n.$$.dirty[0]&&t(5,S=ho({conversation:i,expandUrlToMedia:o.expandUrlToMedia,from:a.nick,waiting:Array.from(c.waiting.values())})),64&n.$$.dirty[0]&&(C=!!i.frozen),64&n.$$.dirty[0]&&t(8,N=i.videoInfo()),82&n.$$.dirty[0]&&(r.hash||i.historyStopAt||y.load({}))},[$,y,w,b,r,S,i,a,N,u,s,h,m,function(n){var e=n.target.closest("a");e&&!e.target&&n.target.closest(".embed")&&(e.target="_blank");var t=n.target.closest(".message"),r=e&&t&&document.querySelector('[data-handle-link="'+e.href+'"]');if(r)return[n.preventDefault(),r.click()];var o=n.target.closest(".le-meta");if(o)return e||o.parentNode.classList.toggle("is-expanded");var i=e&&e.href.match(/#(activeMenu|action:[\w:]+)/);return i?x(n,i[1].split(":",3)):_e(n.target,"img")?be(n,n.target):e&&e.classList.contains("le-thumbnail")?be(n,e.querySelector("img")):void 0},function(n){var e=n.detail,t=e.infinityEl;(0,e.scrollTo)(ot.hash?'.message[data-ts="'+ot.hash+'"]':-1),function(n,e){var t=e&&ot.hash&&n.querySelector('.message[data-ts="'+ot.hash+'"]');me(n,".has-focus",(function(n){return n.classList.remove("has-focus")})),t&&t.classList.add("has-focus")}(t,_==ot.hash)},function(n){if(y.messages.length){var e=n.detail,t=e.pos,r=e.visibleEls,o=r[0],i=r.slice(-1)[0];if("top"==t){var a=y.messages[0].ts.toISOString();ot.go(y.path+"#"+a,{replace:!0}),y.historyStartAt||y.load({before:a})}else if("bottom"==t){var c=y.messages.slice(-1)[0].ts.toISOString();ot.go(y.path+(y.historyStopAt?"":"#"+i.dataset.ts),{replace:!0}),y.historyStopAt||y.load({after:c})}else o&&o.dataset.ts&&ot.go(y.path+"#"+o.dataset.ts,{replace:!0})}},function(n){if(n.preventDefault(),y.window)return y.window.close();y.openWindow(N.convosUrl,N.roomName);var e=y.messages.slice(-30).reverse().find((function(n){return-1!=n.message.indexOf(N.realUrl)}));(!e||e.ts.toEpoch()<(new Pe).toEpoch()-600)&&y.send({method:"send",message:N.realUrl})},function(n,e){return e.is("not_found")?"":n.frozen?u(n.frozen):n==e?u("Connection messages."):(e.frozen?u(e.frozen):e.topic)||e.is_private&&u("Private conversation.")||u("No topic is set.")},_,k,o,c,C,g,x,E,O,function(){return y.send("/join "+i.conversation_id)},function(n){t(3,b=n)}]}var ai=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(bo()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,ii,oi,T,{},[-1,-1]),e}return c}(ee);function ci(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var ui=function(n){return{}},si=function(n){return{}};function fi(n){var e,t,r,o,i,a,c,u=new hr({props:{family:"regular",name:n[7]}});u.$on("click",n[14]);var s,f=n[9].label,l=I(f,n,n[8],si),d=l||{c:function(){s=Q("Label")},m:function(n,e){Y(n,s,e)},d:function(n){n&&V(s)}};return{c:function(){e=Z("div"),t=Z("input"),r=X(),Jn(u.$$.fragment),o=X(),i=Z("label"),d&&d.c(),rn(t,"type","checkbox"),rn(t,"id",n[4]),rn(t,"name",n[3]),t.__value=n[1],t.value=t.__value,t.disabled=n[2],rn(i,"for",n[4]),rn(e,"class","checkbox"),sn(e,"has-focus",n[6]),sn(e,"is-disabled",n[2])},m:function(s,f,l){Y(s,e,f),G(e,t),t.checked=n[0],n[11](t),G(e,r),Zn(u,e,null),G(e,o),G(e,i),d&&d.m(i,null),a=!0,l&&M(c),c=[en(t,"change",n[10]),en(t,"blur",n[12]),en(t,"focus",n[13])]},p:function(n,r){var o=v(r,1)[0];(!a||16&o)&&rn(t,"id",n[4]),(!a||8&o)&&rn(t,"name",n[3]),(!a||2&o)&&(t.__value=n[1]),t.value=t.__value,(!a||4&o)&&(t.disabled=n[2]),1&o&&(t.checked=n[0]);var c={};128&o&&(c.name=n[7]),u.$set(c),l&&l.p&&256&o&&l.p(U(f,n,n[8],si),B(f,n[8],o,ui)),(!a||16&o)&&rn(i,"for",n[4]),64&o&&sn(e,"has-focus",n[6]),4&o&&sn(e,"is-disabled",n[2])},i:function(n){a||(qn(u.$$.fragment,n),qn(d,n),a=!0)},o:function(n){Fn(u.$$.fragment,n),Fn(d,n),a=!1},d:function(t){t&&V(e),n[11](null),Qn(u),d&&d.d(t),M(c)}}}function li(n,e,t){var r,o=e.checked,i=void 0!==o&&o,a=e.disabled,c=void 0!==a&&a,u=e.name,s=void 0===u?"":u,f=e.id,l=void 0===f?s?"form_"+s:ke():f,d=e.value,p=void 0===d?1:d,h=!1,m=e.$$slots,v=void 0===m?{}:m,g=e.$$scope;var $;return n.$set=function(n){"checked"in n&&t(0,i=n.checked),"disabled"in n&&t(2,c=n.disabled),"name"in n&&t(3,s=n.name),"id"in n&&t(4,l=n.id),"value"in n&&t(1,p=n.value),"$$scope"in n&&t(8,g=n.$$scope)},n.$$.update=function(){32&n.$$.dirty&&r&&!r.syncValue&&(t(5,r.syncValue=function(){var n;t(0,(n=[this.checked,this.value],i=n[0],p=n[1],n),i,(t(1,p),t(5,r)))},r),r.syncValue()),1&n.$$.dirty&&t(7,$=i?"check-square":"square")},[i,p,c,s,l,r,h,$,g,v,function(){i=this.checked,t(0,i),t(5,r)},function(n){On[n?"unshift":"push"]((function(){t(5,r=n)}))},function(){t(6,h=!1)},function(){t(6,h=!0)},function(){c||t(0,i=!i)}]}var di=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(ci()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,li,fi,T,{checked:0,disabled:2,name:3,id:4,value:1}),e}return c}(ee);function pi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function hi(n){var e,t,r,o=n[4]("Loading...")+"";return{c:function(){e=Z("div"),t=Z("div"),r=Q(o),rn(t,"class","progress__bar"),un(t,"width",n[2]+"%"),rn(e,"class","progress")},m:function(n,o){Y(n,e,o),G(e,t),G(t,r)},p:function(n,e){16&e&&o!==(o=n[4]("Loading...")+"")&&an(r,o),4&e&&un(t,"width",n[2]+"%")},d:function(n){n&&V(e)}}}function mi(n){var e,t,r=n[4](n[3].error())+"";return{c:function(){e=Z("div"),t=Q(r),rn(e,"class","error")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){24&e&&r!==(r=n[4](n[3].error())+"")&&an(t,r)},d:function(n){n&&V(e)}}}function vi(n){var e,t,r;function o(n,r){return(null==e||8&r)&&(e=!!n[3].is("error")),e?mi:((null==t||9&r)&&(t=!(!1===n[0]||!n[3].is("loading"))),t?hi:void 0)}var i=o(n,-1),a=i&&i(n);return{c:function(){a&&a.c(),r=nn()},m:function(n,e){a&&a.m(n,e),Y(n,r,e)},p:function(n,e){var t=v(e,1)[0];i===(i=o(n,t))&&a?a.p(n,t):(a&&a.d(1),(a=i&&i(n))&&(a.c(),a.m(r.parentNode,r)))},i:R,o:R,d:function(n){a&&a.d(n),n&&V(r)}}}function gi(n,e,t){var r,o,i=R,a=function(){return i(),i=P(f,(function(n){return t(3,r=n)})),f};L(n,wt,(function(n){return t(4,o=n)})),n.$$.on_destroy.push((function(){return i()}));var c=e.progress,u=void 0!==c&&c,s=e.op,f=void 0===s?new Ie({}):s;a();var l,d=0;return wn((function(){return l&&clearTimeout(l)})),n.$set=function(n){"progress"in n&&t(0,u=n.progress),"op"in n&&a(t(1,f=n.op))},n.$$.update=function(){9&n.$$.dirty&&function(n,e){if(l&&clearTimeout(l),n.is("loading")){if("number"==typeof e)return t(2,d=e);t(2,d=0),l=setInterval((function(){return t(2,++d)}),500)}}(r,u)},[u,f,d,r,o]}var $i=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(pi()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,gi,vi,T,{progress:0,op:1}),e}return c}(ee);function yi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function bi(n,e,t){var r=n.slice();return r[28]=e[t],r[30]=t,r}var wi=function(n){return{}},_i=function(n){return{}};function ki(n){var e,t,r,o,i=(n[28].length>1?n[28][1]:n[28][0])+"";function a(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=n)[26].apply(e,[n[30]].concat(r))}return{c:function(){e=Z("a"),t=Q(i),rn(e,"href",r="#"+n[30]+":"+n[28][0]),rn(e,"class","select-field__option"),rn(e,"tabindex","-1"),sn(e,"is-active",n[30]==n[6])},m:function(n,r,i){Y(n,e,r),G(e,t),i&&o(),o=en(e,"mouseover",a)},p:function(o,a){n=o,2048&a&&i!==(i=(n[28].length>1?n[28][1]:n[28][0])+"")&&an(t,i),2048&a&&r!==(r="#"+n[30]+":"+n[28][0])&&rn(e,"href",r),64&a&&sn(e,"is-active",n[30]==n[6])},d:function(n){n&&V(e),o()}}}function xi(n){for(var e,t,r,o,i,a,c,u,s,f,l,d=n[22].label,p=I(d,n,n[21],_i),h=p||{c:function(){l=Q("Label")},m:function(n,e){Y(n,l,e)},d:function(n){n&&V(l)}},m=n[11],g=[],$=0;$<m.length;$+=1)g[$]=ki(bi(n,m,$));return{c:function(){e=Z("div"),t=Z("label"),h&&h.c(),r=X(),o=Z("input"),i=X(),a=Z("input"),c=X(),u=Z("div");for(var s=0;s<g.length;s+=1)g[s].c();rn(t,"for",n[3]),rn(o,"type","hidden"),rn(o,"name",n[2]),rn(a,"type","text"),rn(a,"placeholder",n[4]),rn(a,"id",n[3]),a.readOnly=n[5],rn(a,"autocomplete","off"),rn(u,"class","select-field__options"),rn(e,"class","select-field text-field"),e.hidden=n[1],sn(e,"is-open",n[9]),sn(e,"is-readonly",n[5])},m:function(l,d,p){Y(l,e,d),G(e,t),h&&h.m(t,null),G(e,r),G(e,o),n[23](o),cn(o,n[0]),G(e,i),G(e,a),n[25](a),G(e,c),G(e,u);for(var m=0;m<g.length;m+=1)g[m].m(u,null);n[27](e),s=!0,p&&M(f),f=[en(o,"input",n[24]),en(o,"keydown",n[12]),en(a,"keydown",n[12]),en(a,"keyup",n[13]),en(a,"click",tn(n[14])),en(u,"click",tn(n[14]))]},p:function(n,r){var i=v(r,1)[0];if(p&&p.p&&2097152&i&&p.p(U(d,n,n[21],_i),B(d,n[21],i,wi)),(!s||8&i)&&rn(t,"for",n[3]),(!s||4&i)&&rn(o,"name",n[2]),1&i&&cn(o,n[0]),(!s||16&i)&&rn(a,"placeholder",n[4]),(!s||8&i)&&rn(a,"id",n[3]),(!s||32&i)&&(a.readOnly=n[5]),2112&i){var c;for(m=n[11],c=0;c<m.length;c+=1){var f=bi(n,m,c);g[c]?g[c].p(f,i):(g[c]=ki(f),g[c].c(),g[c].m(u,null))}for(;c<g.length;c+=1)g[c].d(1);g.length=m.length}(!s||2&i)&&(e.hidden=n[1]),512&i&&sn(e,"is-open",n[9]),32&i&&sn(e,"is-readonly",n[5])},i:function(n){s||(qn(h,n),s=!0)},o:function(n){Fn(h,n),s=!1},d:function(t){t&&V(e),h&&h.d(t),n[23](null),n[25](null),J(g,t),n[27](null),M(f)}}}function Ei(n,e,t){var r,o,i,a=["ArrowDown","ArrowUp","Enter"],c=0,u=!1,s="",f=[],l=e.hidden,d=void 0!==l&&l,p=e.name,h=void 0===p?"":p,m=e.id,v=void 0===m?h?"form_"+h:ke():m,g=e.options,$=e.placeholder,y=void 0===$?"":$,b=e.readonly,w=void 0!==b&&b,_=e.value;function k(n,e){var r=new RegExp("(?:^|\\s|-)"+ve(e),"i"),o=n.filter((function(n){return n[0]==e}));o.length||(o=n.filter((function(n){return n[0].match(r)})));for(var i=0;i<n.length;i++){var a=n[i];a.length>1&&-1!=o.indexOf(a)&&a[1].match(r)&&-1==n.map((function(n){return n[0]})).indexOf(a[0])&&o.push(a)}t(6,c=0),t(11,f=o)}function x(n){var e;if("keydown"==n.type)e=f.length&&f[c]||g.filter((function(n){return n[0]==_}))[0];else{var r=ce(n.target,".select-field__option").href.replace(/^.*?#\d+:/,"");e=f.filter((function(n){return n[0]==r}))[0]||[]}e&&e.length||(e=[""]),t(0,_=e[0]),t(9,u=!1)}function E(n){var e=f.filter((function(e){return e[0]==n}))[0]||[];t(8,o.value=e.length>1?e[1]:e.length?e[0]:n,o)}function O(n){if(!w){var e=n&&n.target&&ce(n.target,".select-field__option");return u||(t(6,c=f.map((function(n){return n[0]})).indexOf(_)),o.setSelectionRange(0,9999)),e?x(n):t(9,u=!u)}}bn((function(){t(0,_=r.value),o.addEventListener("blur",(function(){setTimeout((function(){return document.activeElement.closest(".select-field__option")||t(9,u=!1)}),100),E(_)}))}));var S=e.$$slots,C=void 0===S?{}:S,R=e.$$scope;return n.$set=function(n){"hidden"in n&&t(1,d=n.hidden),"name"in n&&t(2,h=n.name),"id"in n&&t(3,v=n.id),"options"in n&&t(15,g=n.options),"placeholder"in n&&t(4,y=n.placeholder),"readonly"in n&&t(5,w=n.readonly),"value"in n&&t(0,_=n.value),"$$scope"in n&&t(21,R=n.$$scope)},n.$$.update=function(){if(512&n.$$.dirty&&0==u&&t(16,s=""),98304&n.$$.dirty&&k(g,s),128&n.$$.dirty&&r&&!r.syncValue&&(t(7,r.syncValue=function(){t(0,_=this.value)},r),r.syncValue()),33152&n.$$.dirty&&o&&!o.value&&o!=document.activeElement){var e=g.find((function(n){return n[0]==r.value}));e&&t(8,o.value=e[1]||e[0],o)}257&n.$$.dirty&&o&&E(_)},[_,d,h,v,y,w,c,r,o,u,i,f,function(n){if(-1!=a.indexOf(n.key)&&n.preventDefault(),"Tab"!=n.key){if(!u)return O(n);"ArrowDown"==n.key&&t(6,c++,c),"ArrowUp"==n.key&&t(6,c--,c),"Enter"==n.key&&x(n),c>=g.length&&t(6,c=0),c<0&&t(6,c=g.length-1)}else u&&x(n)},function(n){1!=n.key.length&&"Backspace"!=n.key||t(16,s=o.value)},O,g,s,a,k,x,E,R,C,function(n){On[n?"unshift":"push"]((function(){t(7,r=n)}))},function(){_=this.value,t(0,_),t(7,r)},function(n){On[n?"unshift":"push"]((function(){t(8,o=n)}))},function(n){t(6,c=n)},function(n){On[n?"unshift":"push"]((function(){t(10,i=n)}))}]}var Oi=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(yi()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,Ei,xi,T,{hidden:1,name:2,id:3,options:15,placeholder:4,readonly:5,value:0}),e}return c}(ee);function Si(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Ci=function(n){return{}},Ri=function(n){return{}};function Ni(n){var e,t,r,o,i,a,c=n[8].label,u=I(c,n,n[7],Ri),s=u||function(n){var e;return{c:function(){e=Q("Label")},m:function(n,t){Y(n,e,t)},d:function(n){n&&V(e)}}}();return{c:function(){e=Z("div"),t=Z("label"),s&&s.c(),r=X(),o=Z("textarea"),rn(t,"for",n[3]),rn(o,"name",n[2]),rn(o,"placeholder",n[4]),rn(o,"id",n[3]),o.readOnly=n[5],rn(e,"class","text-area"),e.hidden=n[1]},m:function(c,u,f){Y(c,e,u),G(e,t),s&&s.m(t,null),G(e,r),G(e,o),n[9](o),cn(o,n[0]),i=!0,f&&a(),a=en(o,"input",n[10])},p:function(n,r){var a=v(r,1)[0];u&&u.p&&128&a&&u.p(U(c,n,n[7],Ri),B(c,n[7],a,Ci)),(!i||8&a)&&rn(t,"for",n[3]),(!i||4&a)&&rn(o,"name",n[2]),(!i||16&a)&&rn(o,"placeholder",n[4]),(!i||8&a)&&rn(o,"id",n[3]),(!i||32&a)&&(o.readOnly=n[5]),1&a&&cn(o,n[0]),(!i||2&a)&&(e.hidden=n[1])},i:function(n){i||(qn(s,n),i=!0)},o:function(n){Fn(s,n),i=!1},d:function(t){t&&V(e),s&&s.d(t),n[9](null),a()}}}function Ai(n,e,t){var r,o=e.hidden,i=void 0!==o&&o,a=e.name,c=void 0===a?"":a,u=e.id,s=void 0===u?c?"form_"+c:ke():u,f=e.placeholder,l=void 0===f?"":f,d=e.readonly,p=void 0!==d&&d,h=e.value,m=void 0===h?"":h,v=e.$$slots,g=void 0===v?{}:v,$=e.$$scope;return n.$set=function(n){"hidden"in n&&t(1,i=n.hidden),"name"in n&&t(2,c=n.name),"id"in n&&t(3,s=n.id),"placeholder"in n&&t(4,l=n.placeholder),"readonly"in n&&t(5,p=n.readonly),"value"in n&&t(0,m=n.value),"$$scope"in n&&t(7,$=n.$$scope)},n.$$.update=function(){64&n.$$.dirty&&r&&!r.syncValue&&(t(6,r.syncValue=function(){t(0,m=this.value)},r),r.syncValue())},[m,i,c,s,l,p,r,$,g,function(n){On[n?"unshift":"push"]((function(){t(6,r=n)}))},function(){m=this.value,t(0,m),t(6,r)}]}var Di=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(Si()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,Ai,Ni,T,{hidden:1,name:2,id:3,placeholder:4,readonly:5,value:0}),e}return c}(ee);function Mi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var ji=function(n){return{}},Ti=function(n){return{}},Pi=function(n){return{}},Li=function(n){return{}};function Ii(n){var e,t,r,o,i,a,c,u,s=n[11].label,f=I(s,n,n[10],Li),l=f||{c:function(){u=Q("Label")},m:function(n,e){Y(n,u,e)},d:function(n){n&&V(u)}},d=n[11].help,p=I(d,n,n[10],Ti);return{c:function(){e=Z("div"),t=Z("label"),l&&l.c(),r=X(),o=Z("input"),i=X(),p&&p.c(),rn(t,"for",n[4]),rn(o,"type",n[7]),rn(o,"name",n[3]),rn(o,"id",n[4]),rn(o,"autocomplete",n[1]),rn(o,"placeholder",n[5]),o.readOnly=n[6],o.value=n[0],rn(e,"class","text-field"),e.hidden=n[2],sn(e,"has-password","password"==n[7])},m:function(u,s,f){Y(u,e,s),G(e,t),l&&l.m(t,null),G(e,r),G(e,o),n[13](o),G(e,i),p&&p.m(e,null),a=!0,f&&M(c),c=[en(o,"input",n[9]),en(o,"keyup",n[12])]},p:function(n,r){var i=v(r,1)[0];f&&f.p&&1024&i&&f.p(U(s,n,n[10],Li),B(s,n[10],i,Pi)),(!a||16&i)&&rn(t,"for",n[4]),(!a||128&i)&&rn(o,"type",n[7]),(!a||8&i)&&rn(o,"name",n[3]),(!a||16&i)&&rn(o,"id",n[4]),(!a||2&i)&&rn(o,"autocomplete",n[1]),(!a||32&i)&&rn(o,"placeholder",n[5]),(!a||64&i)&&(o.readOnly=n[6]),(!a||1&i&&o.value!==n[0])&&(o.value=n[0]),p&&p.p&&1024&i&&p.p(U(d,n,n[10],Ti),B(d,n[10],i,ji)),(!a||4&i)&&(e.hidden=n[2]),128&i&&sn(e,"has-password","password"==n[7])},i:function(n){a||(qn(l,n),qn(p,n),a=!0)},o:function(n){Fn(l,n),Fn(p,n),a=!1},d:function(t){t&&V(e),l&&l.d(t),n[13](null),p&&p.d(t),M(c)}}}function Ui(n,e,t){var r,o=e.autocomplete,i=void 0===o?null:o,a=e.hidden,c=void 0!==a&&a,u=e.name,s=void 0===u?"":u,f=e.id,l=void 0===f?s?"form_"+s:ke():f,d=e.placeholder,p=void 0===d?"":d,h=e.readonly,m=void 0!==h&&h,v=e.type,g=void 0===v?"text":v,$=e.value,y=void 0===$?"":$,b=e.$$slots,w=void 0===b?{}:b,_=e.$$scope;return n.$set=function(n){"autocomplete"in n&&t(1,i=n.autocomplete),"hidden"in n&&t(2,c=n.hidden),"name"in n&&t(3,s=n.name),"id"in n&&t(4,l=n.id),"placeholder"in n&&t(5,p=n.placeholder),"readonly"in n&&t(6,m=n.readonly),"type"in n&&t(7,g=n.type),"value"in n&&t(0,y=n.value),"$$scope"in n&&t(10,_=n.$$scope)},n.$$.update=function(){256&n.$$.dirty&&r&&!r.syncValue&&(t(8,r.syncValue=function(){t(0,y=this.value)},r),r.syncValue())},[y,i,c,s,l,p,m,g,r,function(n){t(0,y=g.match(/^(number|range)$/)?parseInt(n.target.value,10):n.target.value)},_,w,function(e){xn(n,e)},function(n){On[n?"unshift":"push"]((function(){t(8,r=n)}))}]}var Bi=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(Mi()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,Ui,Ii,T,{autocomplete:1,hidden:2,name:3,id:4,placeholder:5,readonly:6,type:7,value:0}),e}return c}(ee);function zi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Hi(n){var e,t;return{c:function(){rn(e=Z("input"),"type","hidden"),rn(e,"name","connection_id"),e.value=t=n[0].connection_id},m:function(n,t){Y(n,e,t)},p:function(n,r){1&r&&t!==(t=n[0].connection_id)&&(e.value=t)},d:function(n){n&&V(e)}}}function qi(n){var e,t,r=n[7]("Host and port")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){128&e&&r!==(r=n[7]("Host and port")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Fi(n){var e,t=n[8](n[9].forced_connection?"You cannot create custom connections.":"Example: %1","chat.freenode.net:6697")+"";return{c:function(){rn(e=Z("p"),"class","help"),rn(e,"slot","help")},m:function(n,r){Y(n,e,r),e.innerHTML=t},p:function(n,r){256&r&&t!==(t=n[8](n[9].forced_connection?"You cannot create custom connections.":"Example: %1","chat.freenode.net:6697")+"")&&(e.innerHTML=t)},d:function(n){n&&V(e)}}}function Ki(n){var e;return{c:function(){e=X()},m:function(n,t){Y(n,e,t)},p:R,d:function(n){n&&V(e)}}}function Wi(n){var e,t,r=n[7]("Nickname")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){128&e&&r!==(r=n[7]("Nickname")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Gi(n){var e,t,r=n[7]("Your name")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){128&e&&r!==(r=n[7]("Your name")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Yi(n){var e;return{c:function(){(e=Z("p")).textContent="Visible in WHOIS response",rn(e,"class","help"),rn(e,"slot","help")},m:function(n,t){Y(n,e,t)},d:function(n){n&&V(e)}}}function Vi(n){var e;return{c:function(){e=X()},m:function(n,t){Y(n,e,t)},p:R,d:function(n){n&&V(e)}}}function Ji(n){var e,t=new Bi({props:{name:"conversation_id",placeholder:n[7]("Ex: #convos"),$$slots:{label:[Qi]},$$scope:{ctx:n}}});return{c:function(){Jn(t.$$.fragment)},m:function(n,r){Zn(t,n,r),e=!0},p:function(n,e){var r={};128&e&&(r.placeholder=n[7]("Ex: #convos")),67108992&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(qn(t.$$.fragment,n),e=!0)},o:function(n){Fn(t.$$.fragment,n),e=!1},d:function(n){Qn(t,n)}}}function Zi(n){var e,t;function r(e){n[20].call(null,e)}var o={$$slots:{label:[Xi]},$$scope:{ctx:n}};void 0!==n[6]&&(o.checked=n[6]);var i=new di({props:o});return On.push((function(){return Vn(i,"checked",r)})),{c:function(){Jn(i.$$.fragment)},m:function(n,e){Zn(i,n,e),t=!0},p:function(n,t){var r={};67108992&t&&(r.$$scope={dirty:t,ctx:n}),!e&&64&t&&(e=!0,r.checked=n[6],Dn((function(){return e=!1}))),i.$set(r)},i:function(n){t||(qn(i.$$.fragment,n),t=!0)},o:function(n){Fn(i.$$.fragment,n),t=!1},d:function(n){Qn(i,n)}}}function Qi(n){var e,t,r=n[7]("Conversation name")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){128&e&&r!==(r=n[7]("Conversation name")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Xi(n){var e,t,r=n[7]("Want to be connected")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){128&e&&r!==(r=n[7]("Want to be connected")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function na(n){var e,t,r=n[7]("Secure connection (TLS)")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){128&e&&r!==(r=n[7]("Secure connection (TLS)")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function ea(n){var e,t;function r(e){n[22].call(null,e)}var o={name:"tls_verify",$$slots:{label:[ta]},$$scope:{ctx:n}};void 0!==n[5]&&(o.checked=n[5]);var i=new di({props:o});return On.push((function(){return Vn(i,"checked",r)})),{c:function(){Jn(i.$$.fragment)},m:function(n,e){Zn(i,n,e),t=!0},p:function(n,t){var r={};67108992&t&&(r.$$scope={dirty:t,ctx:n}),!e&&32&t&&(e=!0,r.checked=n[5],Dn((function(){return e=!1}))),i.$set(r)},i:function(n){t||(qn(i.$$.fragment,n),t=!0)},o:function(n){Fn(i.$$.fragment,n),t=!1},d:function(n){Qn(i,n)}}}function ta(n){var e,t,r=n[7]("Verify certificate (TLS)")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){128&e&&r!==(r=n[7]("Verify certificate (TLS)")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function ra(n){var e,t,r=n[7]("Show advanced settings")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){128&e&&r!==(r=n[7]("Show advanced settings")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function oa(n){var e,t,r=n[7]("Username")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){128&e&&r!==(r=n[7]("Username")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function ia(n){var e,t,r=n[7]("Password")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){128&e&&r!==(r=n[7]("Password")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function aa(n){var e,t,r=n[7]("SASL authentication mechanism")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){128&e&&r!==(r=n[7]("SASL authentication mechanism")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function ca(n){var e,t,r=n[7]("On-connect commands")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){128&e&&r!==(r=n[7]("On-connect commands")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function ua(n){var e,t=new $r({props:{icon:"save",op:n[11],$$slots:{default:[fa]},$$scope:{ctx:n}}});return{c:function(){Jn(t.$$.fragment)},m:function(n,r){Zn(t,n,r),e=!0},p:function(n,e){var r={};67108992&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(qn(t.$$.fragment,n),e=!0)},o:function(n){Fn(t.$$.fragment,n),e=!1},d:function(n){Qn(t,n)}}}function sa(n){var e,t,r=new $r({props:{icon:"save",op:n[13],$$slots:{default:[la]},$$scope:{ctx:n}}}),o=new $r({props:{icon:"trash",type:"button",op:n[12],$$slots:{default:[da]},$$scope:{ctx:n}}});return o.$on("click",n[14]),{c:function(){Jn(r.$$.fragment),e=X(),Jn(o.$$.fragment)},m:function(n,i){Zn(r,n,i),Y(n,e,i),Zn(o,n,i),t=!0},p:function(n,e){var t={};67108992&e&&(t.$$scope={dirty:e,ctx:n}),r.$set(t);var i={};67108992&e&&(i.$$scope={dirty:e,ctx:n}),o.$set(i)},i:function(n){t||(qn(r.$$.fragment,n),qn(o.$$.fragment,n),t=!0)},o:function(n){Fn(r.$$.fragment,n),Fn(o.$$.fragment,n),t=!1},d:function(n){Qn(r,n),n&&V(e),Qn(o,n)}}}function fa(n){var e,t,r=n[7]("Create")+"";return{c:function(){e=Z("span"),t=Q(r)},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){128&e&&r!==(r=n[7]("Create")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function la(n){var e,t,r=n[7]("Update")+"";return{c:function(){e=Z("span"),t=Q(r)},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){128&e&&r!==(r=n[7]("Update")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function da(n){var e,t,r=n[7]("Delete")+"";return{c:function(){e=Z("span"),t=Q(r)},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){128&e&&r!==(r=n[7]("Delete")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function pa(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,g,$,y,b,w,_,k,x,E,O,S,C,R,N,A,D=n[0].connection_id&&Hi(n),M=new Bi({props:{name:"server",placeholder:n[7]("Ex: chat.freenode.net:6697"),readonly:n[9].forced_connection,$$slots:{default:[Ki],help:[Fi],label:[qi]},$$scope:{ctx:n}}}),j=new Bi({props:{name:"nick",placeholder:n[7]("Ex: superman"),$$slots:{label:[Wi]},$$scope:{ctx:n}}}),T=new Bi({props:{name:"realname",placeholder:n[7]("Ex: Clark Kent"),$$slots:{default:[Vi],help:[Yi],label:[Gi]},$$scope:{ctx:n}}}),P=[Zi,Ji],L=[];function I(n,e){return n[0].url?0:1}function U(e){n[21].call(null,e)}f=I(n),l=L[f]=P[f](n);var B={name:"tls",$$slots:{label:[na]},$$scope:{ctx:n}};void 0!==n[4]&&(B.checked=n[4]);var z=new di({props:B});On.push((function(){return Vn(z,"checked",U)}));var H=n[4]&&ea(n);function q(e){n[23].call(null,e)}var F={$$slots:{label:[ra]},$$scope:{ctx:n}};void 0!==n[3]&&(F.checked=n[3]);var K=new di({props:F});On.push((function(){return Vn(K,"checked",q)}));var W=new Bi({props:{name:"username",hidden:!n[3],$$slots:{label:[oa]},$$scope:{ctx:n}}}),J=new Bi({props:{type:"password",name:"password",hidden:!n[3],$$slots:{label:[ia]},$$scope:{ctx:n}}});function Q(e){n[24].call(null,e)}var nn={name:"sasl",options:n[10],hidden:!n[3],$$slots:{label:[aa]},$$scope:{ctx:n}};void 0!==n[2]&&(nn.value=n[2]);var on=new Oi({props:nn});On.push((function(){return Vn(on,"value",Q)}));var an=new Di({props:{name:"on_connect_commands",placeholder:n[7]("Put each command on a new line."),hidden:!n[3],$$slots:{label:[ca]},$$scope:{ctx:n}}}),cn=[sa,ua],un=[];function sn(n,e){return n[0].url?0:1}E=sn(n),O=un[E]=cn[E](n);var fn=new $i({props:{op:n[11]}}),ln=new $i({props:{op:n[12]}}),dn=new $i({props:{op:n[13]}});return{c:function(){e=Z("form"),D&&D.c(),t=X(),r=Z("input"),o=X(),i=Z("input"),a=X(),Jn(M.$$.fragment),c=X(),Jn(j.$$.fragment),u=X(),Jn(T.$$.fragment),s=X(),l.c(),d=X(),Jn(z.$$.fragment),h=X(),H&&H.c(),m=X(),Jn(K.$$.fragment),$=X(),Jn(W.$$.fragment),y=X(),Jn(J.$$.fragment),b=X(),Jn(on.$$.fragment),_=X(),Jn(an.$$.fragment),k=X(),x=Z("div"),O.c(),S=X(),Jn(fn.$$.fragment),C=X(),Jn(ln.$$.fragment),R=X(),Jn(dn.$$.fragment),rn(r,"type","hidden"),rn(r,"name","url"),rn(i,"type","hidden"),rn(i,"name","wanted_state"),rn(x,"class","form-actions"),rn(e,"method","post")},m:function(l,p,v){Y(l,e,p),D&&D.m(e,null),G(e,t),G(e,r),G(e,o),G(e,i),G(e,a),Zn(M,e,null),G(e,c),Zn(j,e,null),G(e,u),Zn(T,e,null),G(e,s),L[f].m(e,null),G(e,d),Zn(z,e,null),G(e,h),H&&H.m(e,null),G(e,m),Zn(K,e,null),G(e,$),Zn(W,e,null),G(e,y),Zn(J,e,null),G(e,b),Zn(on,e,null),G(e,_),Zn(an,e,null),G(e,k),G(e,x),un[E].m(x,null),G(e,S),Zn(fn,e,null),G(e,C),Zn(ln,e,null),G(e,R),Zn(dn,e,null),n[25](e),N=!0,v&&A(),A=en(e,"submit",tn(n[15]))},p:function(n,r){var o=v(r,1)[0];n[0].connection_id?D?D.p(n,o):((D=Hi(n)).c(),D.m(e,t)):D&&(D.d(1),D=null);var i={};128&o&&(i.placeholder=n[7]("Ex: chat.freenode.net:6697")),67109248&o&&(i.$$scope={dirty:o,ctx:n}),M.$set(i);var a={};128&o&&(a.placeholder=n[7]("Ex: superman")),67108992&o&&(a.$$scope={dirty:o,ctx:n}),j.$set(a);var c={};128&o&&(c.placeholder=n[7]("Ex: Clark Kent")),67108992&o&&(c.$$scope={dirty:o,ctx:n}),T.$set(c);var u=f;(f=I(n))===u?L[f].p(n,o):(zn(),Fn(L[u],1,1,(function(){L[u]=null})),Hn(),(l=L[f])||(l=L[f]=P[f](n)).c(),qn(l,1),l.m(e,d));var s={};67108992&o&&(s.$$scope={dirty:o,ctx:n}),!p&&16&o&&(p=!0,s.checked=n[4],Dn((function(){return p=!1}))),z.$set(s),n[4]?H?(H.p(n,o),qn(H,1)):((H=ea(n)).c(),qn(H,1),H.m(e,m)):H&&(zn(),Fn(H,1,1,(function(){H=null})),Hn());var h={};67108992&o&&(h.$$scope={dirty:o,ctx:n}),!g&&8&o&&(g=!0,h.checked=n[3],Dn((function(){return g=!1}))),K.$set(h);var $={};8&o&&($.hidden=!n[3]),67108992&o&&($.$$scope={dirty:o,ctx:n}),W.$set($);var y={};8&o&&(y.hidden=!n[3]),67108992&o&&(y.$$scope={dirty:o,ctx:n}),J.$set(y);var b={};8&o&&(b.hidden=!n[3]),67108992&o&&(b.$$scope={dirty:o,ctx:n}),!w&&4&o&&(w=!0,b.value=n[2],Dn((function(){return w=!1}))),on.$set(b);var _={};128&o&&(_.placeholder=n[7]("Put each command on a new line.")),8&o&&(_.hidden=!n[3]),67108992&o&&(_.$$scope={dirty:o,ctx:n}),an.$set(_);var k=E;(E=sn(n))===k?un[E].p(n,o):(zn(),Fn(un[k],1,1,(function(){un[k]=null})),Hn(),(O=un[E])||(O=un[E]=cn[E](n)).c(),qn(O,1),O.m(x,null))},i:function(n){N||(qn(M.$$.fragment,n),qn(j.$$.fragment,n),qn(T.$$.fragment,n),qn(l),qn(z.$$.fragment,n),qn(H),qn(K.$$.fragment,n),qn(W.$$.fragment,n),qn(J.$$.fragment,n),qn(on.$$.fragment,n),qn(an.$$.fragment,n),qn(O),qn(fn.$$.fragment,n),qn(ln.$$.fragment,n),qn(dn.$$.fragment,n),N=!0)},o:function(n){Fn(M.$$.fragment,n),Fn(j.$$.fragment,n),Fn(T.$$.fragment,n),Fn(l),Fn(z.$$.fragment,n),Fn(H),Fn(K.$$.fragment,n),Fn(W.$$.fragment,n),Fn(J.$$.fragment,n),Fn(on.$$.fragment,n),Fn(an.$$.fragment,n),Fn(O),Fn(fn.$$.fragment,n),Fn(ln.$$.fragment,n),Fn(dn.$$.fragment,n),N=!1},d:function(t){t&&V(e),D&&D.d(),Qn(M),Qn(j),Qn(T),L[f].d(),Qn(z),H&&H.d(),Qn(K),Qn(W),Qn(J),Qn(on),Qn(an),un[E].d(),Qn(fn),Qn(ln),Qn(dn),n[25](null),A()}}}function ha(n,e,r){var o,i;L(n,wt,(function(n){return r(7,o=n)})),L(n,_t,(function(n){return r(8,i=n)}));var a=e.conversation,c=void 0===a?{}:a,u=kn("api"),s=kn("user"),l=u("createConnection"),d=u("removeConnection"),p=u("updateConnection");[l,p].forEach((function(n){n.on("start",(function(n){n.body.on_connect_commands=n.body.on_connect_commands.split("\n").map((function(n){return n.trim()}))}))}));var h,m={},v="none",g=!1,$=!1,y=!1,b=!1;function w(){if(s.forced_connection&&r(1,h.server.value=s.default_connection,h),r(1,h.nick.value=s.email.replace(/@.*/,"").replace(/\W/g,"_"),h),r(2,v="none"),r(4,$=!0),r(6,b=!0),!ot.query.uri)return ot.urlToForm(h);var n=new Re(ot.query.uri),e=n.searchParams;n.host&&r(1,h.server.value=n.host,h),n.password&&r(1,h.password.value=n.password,h),n.username&&r(1,h.username.value=n.username,h),e.get("nick")&&r(1,h.nick.value=e.get("nick"),h),e.get("realname")&&r(1,h.realname.value=e.get("realname"),h),n.pathname&&h.conversation&&r(1,h.conversation.value=decodeURIComponent(n.pathname.split("/").filter((function(n){return n.length}))[0]||""),h),e.get("sasl")&&r(2,v=e.get("sasl")),Number(e.get("tls")||0)&&r(4,$=!0),Number(e.get("tls_verify")||0)&&r(5,y=!0)}function _(){m.url&&(r(1,h.server.value=m.url.host,h),r(1,h.nick.value=m.url.searchParams.get("nick")||"",h),r(1,h.realname.value=m.url.searchParams.get("realname")||"",h),r(1,h.on_connect_commands.value=m.on_connect_commands.join("\n"),h),r(1,h.password.value=m.url.password,h),r(1,h.username.value=m.url.username,h),r(1,h.url.value=m.url.toString(),h),r(2,v=m.url.searchParams.get("sasl")||"none"),r(4,$="1"==m.url.searchParams.get("tls")),r(5,y="1"==m.url.searchParams.get("tls_verify")),r(6,b="connected"==m.wanted_state))}function k(){return(k=f(t.mark((function n(e){return t.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.perform(m);case 2:s.removeConversation(m),ot.go("/settings/connection");case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function x(){return(x=f(t.mark((function n(e){var o;return t.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(h.server.value){n.next=2;break}return n.abrupt("return");case 2:if(r(1,h.url.value=new Re("irc://localhost:6667").fromForm(e.target).toString(),h),!m.connection_id){n.next=10;break}return n.next=6,p.perform(e.target);case 6:r(0,m=s.ensureConversation(p.res.body)),_(),n.next=14;break;case 10:return n.next=12,l.perform(e.target);case 12:o=s.ensureConversation(l.res.body),ot.go(o.path);case 14:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return bn(f(t.mark((function n(){return t.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(h){n.next=2;break}return n.abrupt("return");case 2:return r(0,m=s.findConversation({connection_id:c.connection_id})||{}),n.abrupt("return",m.url?_():w());case 4:case"end":return n.stop()}}),n)})))),n.$set=function(n){"conversation"in n&&r(16,c=n.conversation)},n.$$.update=function(){66&n.$$.dirty&&h&&r(1,h.wanted_state.value=b?"connected":"disconnected",h)},[m,h,v,g,$,y,b,o,i,s,[["none","None"],["plain","Plain"],["external","External"]],l,d,p,function(n){return k.apply(this,arguments)},function(n){return x.apply(this,arguments)},c,u,w,_,function(n){r(6,b=n)},function(n){r(4,$=n)},function(n){r(5,y=n)},function(n){r(3,g=n)},function(n){r(2,v=n)},function(n){On[n?"unshift":"push"]((function(){r(1,h=n)}))}]}var ma=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(zi()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,ha,pa,T,{conversation:16}),e}return c}(ee);function va(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function ga(n){var e,t,r=n[0]("Add connection")+"";return{c:function(){e=Z("h1"),t=Q(r)},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){1&e&&r!==(r=n[0]("Add connection")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function $a(n){var e,t,r,o=new Sr({props:{$$slots:{default:[ga]},$$scope:{ctx:n}}}),i=new ma({});return{c:function(){Jn(o.$$.fragment),e=X(),t=Z("main"),Jn(i.$$.fragment),rn(t,"class","main")},m:function(n,a){Zn(o,n,a),Y(n,e,a),Y(n,t,a),Zn(i,t,null),r=!0},p:function(n,e){var t=v(e,1)[0],r={};3&t&&(r.$$scope={dirty:t,ctx:n}),o.$set(r)},i:function(n){r||(qn(o.$$.fragment,n),qn(i.$$.fragment,n),r=!0)},o:function(n){Fn(o.$$.fragment,n),Fn(i.$$.fragment,n),r=!1},d:function(n){Qn(o,n),n&&V(e),n&&V(t),Qn(i)}}}function ya(n,e,t){var r;return L(n,wt,(function(n){return t(0,r=n)})),ot.update({title:"Add connection"}),[r]}var ba=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(va()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,ya,$a,T,{}),e}return c}(ee);function wa(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function _a(n,e,t){var r=n.slice();return r[16]=e[t],r}function ka(n){var e,t,r=n[5]("Add conversation")+"";return{c:function(){e=Z("h1"),t=Q(r)},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){32&e&&r!==(r=n[5]("Add conversation")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function xa(n){var e,t,r=n[5]("Connection")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){32&e&&r!==(r=n[5]("Connection")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Ea(n){var e,t,r=n[5](n[0].conversations.length?"Refresh":"Load")+"";return{c:function(){e=Z("span"),t=Q(r)},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){33&e&&r!==(r=n[5](n[0].conversations.length?"Refresh":"Load")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Oa(n){var e,t,r=n[5]("Conversation name")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){32&e&&r!==(r=n[5]("Conversation name")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Sa(n){var e,t,r=n[5]("Add")+"";return{c:function(){e=Z("span"),t=Q(r)},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){32&e&&r!==(r=n[5]("Add")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Ca(n){var e,t,r,o,i=n[0].error+"";return{c:function(){e=Z("p"),t=Q(n[1]),r=Q(": "),o=Q(i),rn(e,"class","error")},m:function(n,i){Y(n,e,i),G(e,t),G(e,r),G(e,o)},p:function(n,e){2&e&&an(t,n[1]),1&e&&i!==(i=n[0].error+"")&&an(o,i)},d:function(n){n&&V(e)}}}function Ra(n){var e,t,r;function o(n,e){return n[0].done?Aa:Na}for(var i=o(n),a=i(n),c=n[0].conversations,u=[],s=0;s<c.length;s+=1)u[s]=Da(_a(n,c,s));return{c:function(){e=Z("p"),a.c(),t=X(),r=Z("div");for(var n=0;n<u.length;n+=1)u[n].c();rn(r,"class","conversation-add-list")},m:function(n,o){Y(n,e,o),a.m(e,null),Y(n,t,o),Y(n,r,o);for(var i=0;i<u.length;i+=1)u[i].m(r,null)},p:function(n,t){if(i===(i=o(n))&&a?a.p(n,t):(a.d(1),(a=i(n))&&(a.c(),a.m(e,null))),129&t){var s;for(c=n[0].conversations,s=0;s<c.length;s+=1){var f=_a(n,c,s);u[s]?u[s].p(f,t):(u[s]=Da(f),u[s].c(),u[s].m(r,null))}for(;s<u.length;s+=1)u[s].d(1);u.length=c.length}},d:function(n){n&&V(e),a.d(),n&&V(t),n&&V(r),J(u,n)}}}function Na(n){var e,t=n[5]("Showing %1 of %2 conversations, but the list is still loading.",n[0].conversations.length,n[0].n_conversations)+"";return{c:function(){e=Q(t)},m:function(n,t){Y(n,e,t)},p:function(n,r){33&r&&t!==(t=n[5]("Showing %1 of %2 conversations, but the list is still loading.",n[0].conversations.length,n[0].n_conversations)+"")&&an(e,t)},d:function(n){n&&V(e)}}}function Aa(n){var e,t=n[5]("Showing %1 of %2 conversations.",n[0].conversations.length,n[0].n_conversations)+"";return{c:function(){e=Q(t)},m:function(n,t){Y(n,e,t)},p:function(n,r){33&r&&t!==(t=n[5]("Showing %1 of %2 conversations.",n[0].conversations.length,n[0].n_conversations)+"")&&an(e,t)},d:function(n){n&&V(e)}}}function Da(n){var e,t,r,o,i,a,c,u,s,f,l,d,p=n[16].n_users+"",h=n[16].name+"",m=(n[16].topic||"No topic.")+"";return{c:function(){e=Z("a"),t=Z("span"),r=Q(p),o=X(),i=Z("b"),a=Q(h),c=X(),u=Z("i"),s=Q(m),f=X(),rn(t,"class","conversation-add-list__n-users"),rn(i,"class","conversation-add-list__name"),rn(u,"class","conversation-add-list__title"),rn(e,"href",l="#add:"+n[16].name)},m:function(l,p,h){Y(l,e,p),G(e,t),G(t,r),G(e,o),G(e,i),G(i,a),G(e,c),G(e,u),G(u,s),G(e,f),h&&d(),d=en(e,"click",tn(n[7]))},p:function(n,t){1&t&&p!==(p=n[16].n_users+"")&&an(r,p),1&t&&h!==(h=n[16].name+"")&&an(a,h),1&t&&m!==(m=(n[16].topic||"No topic.")+"")&&an(s,m),1&t&&l!==(l="#add:"+n[16].name)&&rn(e,"href",l)},d:function(n){n&&V(e),d()}}}function Ma(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,g,$,y,b,w=n[5]("Enter the name of an exising conversation, or create a new conversation.")+"",_=new Sr({props:{$$slots:{default:[ka]},$$scope:{ctx:n}}});function k(e){n[13].call(null,e)}var x={name:"connection_id",options:n[4],placeholder:n[5]("Select..."),$$slots:{label:[xa]},$$scope:{ctx:n}};void 0!==n[1]&&(x.value=n[1]);var E=new Oi({props:x});On.push((function(){return Vn(E,"value",k)}));var O=new $r({props:{type:"button",icon:"sync-alt",disabled:!n[1]||!1===n[0].done,$$slots:{default:[Ea]},$$scope:{ctx:n}}});function S(e){n[14].call(null,e)}O.$on("click",n[8]);var C={name:"conversation_id",placeholder:n[5]("#room or nick"),autocomplete:"off",$$slots:{label:[Oa]},$$scope:{ctx:n}};void 0!==n[2]&&(C.value=n[2]);var R=new Bi({props:C});On.push((function(){return Vn(R,"value",S)})),R.$on("keyup",n[9]);var N=new $r({props:{icon:"comment",disabled:!n[1]||!n[2],$$slots:{default:[Sa]},$$scope:{ctx:n}}}),A=n[0].error&&Ca(n),D=null!==n[0].done&&Ra(n);return{c:function(){Jn(_.$$.fragment),e=X(),t=Z("main"),r=Z("p"),o=Q(w),i=X(),a=Z("form"),c=Z("div"),Jn(E.$$.fragment),s=X(),f=Z("div"),Jn(O.$$.fragment),l=X(),d=Z("div"),Jn(R.$$.fragment),h=X(),m=Z("div"),Jn(N.$$.fragment),g=X(),A&&A.c(),$=X(),D&&D.c(),rn(f,"class","has-remaining-space"),rn(c,"class","inputs-side-by-side"),rn(m,"class","has-remaining-space"),rn(d,"class","inputs-side-by-side"),rn(a,"method","post"),rn(t,"class","main")},m:function(u,p,v){Zn(_,u,p),Y(u,e,p),Y(u,t,p),G(t,r),G(r,o),G(t,i),G(t,a),G(a,c),Zn(E,c,null),G(c,s),G(c,f),Zn(O,f,null),G(a,l),G(a,d),Zn(R,d,null),G(d,h),G(d,m),Zn(N,m,null),G(a,g),A&&A.m(a,null),G(a,$),D&&D.m(a,null),n[15](a),y=!0,v&&b(),b=en(a,"submit",tn(n[7]))},p:function(n,e){var t=v(e,1)[0],r={};524320&t&&(r.$$scope={dirty:t,ctx:n}),_.$set(r),(!y||32&t)&&w!==(w=n[5]("Enter the name of an exising conversation, or create a new conversation.")+"")&&an(o,w);var i={};16&t&&(i.options=n[4]),32&t&&(i.placeholder=n[5]("Select...")),524320&t&&(i.$$scope={dirty:t,ctx:n}),!u&&2&t&&(u=!0,i.value=n[1],Dn((function(){return u=!1}))),E.$set(i);var c={};3&t&&(c.disabled=!n[1]||!1===n[0].done),524321&t&&(c.$$scope={dirty:t,ctx:n}),O.$set(c);var s={};32&t&&(s.placeholder=n[5]("#room or nick")),524320&t&&(s.$$scope={dirty:t,ctx:n}),!p&&4&t&&(p=!0,s.value=n[2],Dn((function(){return p=!1}))),R.$set(s);var f={};6&t&&(f.disabled=!n[1]||!n[2]),524320&t&&(f.$$scope={dirty:t,ctx:n}),N.$set(f),n[0].error?A?A.p(n,t):((A=Ca(n)).c(),A.m(a,$)):A&&(A.d(1),A=null),null!==n[0].done?D?D.p(n,t):((D=Ra(n)).c(),D.m(a,null)):D&&(D.d(1),D=null)},i:function(n){y||(qn(_.$$.fragment,n),qn(E.$$.fragment,n),qn(O.$$.fragment,n),qn(R.$$.fragment,n),qn(N.$$.fragment,n),y=!0)},o:function(n){Fn(_.$$.fragment,n),Fn(E.$$.fragment,n),Fn(O.$$.fragment,n),Fn(R.$$.fragment,n),Fn(N.$$.fragment,n),y=!1},d:function(r){Qn(_,r),r&&V(e),r&&V(t),Qn(E),Qn(O),Qn(R),Qn(N),A&&A.d(),D&&D.d(),n[15](null),b()}}}function ja(n,e,r){var o,i;L(n,wt,(function(n){return r(5,i=n)}));var a=kn("socket"),c=kn("user");L(n,c,(function(n){return r(11,o=n)}));var u,s,l={conversations:[],done:null,n_conversations:0},d="",p="";function h(n){return m.apply(this,arguments)}function m(){return(m=f(t.mark((function n(e){var o,i,c,u;return t.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o="/list"+(p.length?" /"+p+"/":""),"click"==e.type&&l.done&&(o+=" refresh"),s&&clearTimeout(s),n.next=5,a.send({connection_id:d,message:o,method:"send"});case 5:i=n.sent,c=se(i),r(0,l=c?{conversations:[],done:!0,n_conversations:0,error:c}:i),(u=e.interval?e.interval+500:500)>2e3&&(u=2e3),c||i.done||(s=setTimeout((function(){return h({interval:u})}),u));case 11:case"end":return n.stop()}}),n)})))).apply(this,arguments)}ot.update({title:"Add conversation"}),bn((function(){return ot.urlToForm(u)}));var v,g=ue(h,250);return n.$$.update=function(){2048&n.$$.dirty&&r(4,v=Array.from(o.connections.keys()).map((function(n){return[n]}))),18&n.$$.dirty&&(d||r(1,d=v[0]?v[0][0]:""))},[l,d,p,u,v,i,c,function(n){var e=n&&n.target&&n.target.closest("a");e&&e.href&&r(2,p=e.href.replace(/.*#add:/,"")),d&&p&&c.findConversation({connection_id:d}).send("/join "+p)},h,g,s,o,a,function(n){r(1,d=n),r(4,v),r(11,o)},function(n){r(2,p=n)},function(n){On[n?"unshift":"push"]((function(){r(3,u=n)}))}]}var Ta=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(wa()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,ja,Ma,T,{}),e}return c}(ee);function Pa(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function La(n){var e,t,r,o,i,a,c,u,s=n[4]("Yikes! we are so sorry for the inconvenience. Please submit an [issue](%1), if the problem does not go away.","https://github.com/nordaaker/convos/issues")+"",f=n[2]("Go to start page")+"",l=new hr({props:{name:"play"}});return{c:function(){e=Z("p"),t=X(),r=Z("p"),o=Z("a"),Jn(l.$$.fragment),i=X(),a=Q(f),rn(o,"href",c=n[1].baseUrl),rn(o,"target","_self"),rn(o,"class","btn")},m:function(n,c){Y(n,e,c),e.innerHTML=s,Y(n,t,c),Y(n,r,c),G(r,o),Zn(l,o,null),G(o,i),G(o,a),u=!0},p:function(n,t){(!u||16&t)&&s!==(s=n[4]("Yikes! we are so sorry for the inconvenience. Please submit an [issue](%1), if the problem does not go away.","https://github.com/nordaaker/convos/issues")+"")&&(e.innerHTML=s),(!u||4&t)&&f!==(f=n[2]("Go to start page")+"")&&an(a,f),(!u||2&t&&c!==(c=n[1].baseUrl))&&rn(o,"href",c)},i:function(n){u||(qn(l.$$.fragment,n),u=!0)},o:function(n){Fn(l.$$.fragment,n),u=!1},d:function(n){n&&V(e),n&&V(t),n&&V(r),Qn(l)}}}function Ia(n){var e,t,r,o,i,a,c,u,s,f=n[2]("The Convos Team have been searching and searching, but the requested page could not be found.")+"",l=n[2]("Go to start page")+"",d=new hr({props:{name:"play"}});return{c:function(){e=Z("p"),t=Q(f),r=X(),o=Z("p"),i=Z("a"),Jn(d.$$.fragment),a=X(),c=Q(l),rn(i,"href",u=n[1].baseUrl),rn(i,"target","_self"),rn(i,"class","btn")},m:function(n,u){Y(n,e,u),G(e,t),Y(n,r,u),Y(n,o,u),G(o,i),Zn(d,i,null),G(i,a),G(i,c),s=!0},p:function(n,e){(!s||4&e)&&f!==(f=n[2]("The Convos Team have been searching and searching, but the requested page could not be found.")+"")&&an(t,f),(!s||4&e)&&l!==(l=n[2]("Go to start page")+"")&&an(c,l),(!s||2&e&&u!==(u=n[1].baseUrl))&&rn(i,"href",u)},i:function(n){s||(qn(d.$$.fragment,n),s=!0)},o:function(n){Fn(d.$$.fragment,n),s=!1},d:function(n){n&&V(e),n&&V(r),n&&V(o),Qn(d)}}}function Ua(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g=n[2]("Downloaded Convos.")+"",$=n[2]("Started Convos.")+"",y=n[2]("Contact admin")+"",b=new hr({props:{name:"download"}}),w=new hr({props:{name:"rocket"}}),_=[za,Ba],k=[];function x(n,e){return n[3].error?0:1}s=x(n),f=k[s]=_[s](n);var E=new hr({props:{name:"paper-plane"}});return{c:function(){e=Z("p"),Jn(b.$$.fragment),t=X(),r=Q(g),o=X(),i=Z("p"),Jn(w.$$.fragment),a=X(),c=Q($),u=X(),f.c(),l=X(),d=Z("p"),p=Z("a"),Jn(E.$$.fragment),h=X(),m=Q(y),rn(p,"class","btn"),rn(p,"href",ye("contact"))},m:function(n,f){Y(n,e,f),Zn(b,e,null),G(e,t),G(e,r),Y(n,o,f),Y(n,i,f),Zn(w,i,null),G(i,a),G(i,c),Y(n,u,f),k[s].m(n,f),Y(n,l,f),Y(n,d,f),G(d,p),Zn(E,p,null),G(p,h),G(p,m),v=!0},p:function(n,e){(!v||4&e)&&g!==(g=n[2]("Downloaded Convos.")+"")&&an(r,g),(!v||4&e)&&$!==($=n[2]("Started Convos.")+"")&&an(c,$);var t=s;(s=x(n))===t?k[s].p(n,e):(zn(),Fn(k[t],1,1,(function(){k[t]=null})),Hn(),(f=k[s])||(f=k[s]=_[s](n)).c(),qn(f,1),f.m(l.parentNode,l)),(!v||4&e)&&y!==(y=n[2]("Contact admin")+"")&&an(m,y)},i:function(n){v||(qn(b.$$.fragment,n),qn(w.$$.fragment,n),qn(f),qn(E.$$.fragment,n),v=!0)},o:function(n){Fn(b.$$.fragment,n),Fn(w.$$.fragment,n),Fn(f),Fn(E.$$.fragment,n),v=!1},d:function(n){n&&V(e),Qn(b),n&&V(o),n&&V(i),Qn(w),n&&V(u),k[s].d(n),n&&V(l),n&&V(d),Qn(E)}}}function Ba(n){var e,t,r,o,i=n[2]("Loading user data...")+"",a=new hr({props:{name:"spinner fa-spin"}});return{c:function(){e=Z("p"),Jn(a.$$.fragment),t=X(),r=Q(i)},m:function(n,i){Y(n,e,i),Zn(a,e,null),G(e,t),G(e,r),o=!0},p:function(n,e){(!o||4&e)&&i!==(i=n[2]("Loading user data...")+"")&&an(r,i)},i:function(n){o||(qn(a.$$.fragment,n),o=!0)},o:function(n){Fn(a.$$.fragment,n),o=!1},d:function(n){n&&V(e),Qn(a)}}}function za(n){var e,t,r,o,i=n[2]("Loading user data failed: %1",wt(n[3].error))+"",a=new hr({props:{name:"exclamation-triangle"}});return{c:function(){e=Z("p"),Jn(a.$$.fragment),t=X(),r=Q(i)},m:function(n,i){Y(n,e,i),Zn(a,e,null),G(e,t),G(e,r),o=!0},p:function(n,e){(!o||12&e)&&i!==(i=n[2]("Loading user data failed: %1",wt(n[3].error))+"")&&an(r,i)},i:function(n){o||(qn(a.$$.fragment,n),o=!0)},o:function(n){Fn(a.$$.fragment,n),o=!1},d:function(n){n&&V(e),Qn(a)}}}function Ha(n){var e,t,r,o,i,a,c,u=n[2](n[5][n[0]])+"",s=[Ua,Ia,La],f=[];function l(n,e){return"loading"==n[0]?0:"not_found"==n[0]?1:2}return i=l(n),a=f[i]=s[i](n),{c:function(){e=Z("main"),t=Z("h2"),r=Q(u),o=X(),a.c()},m:function(n,a){Y(n,e,a),G(e,t),G(t,r),G(e,o),f[i].m(e,null),c=!0},p:function(n,t){var o=v(t,1)[0];(!c||5&o)&&u!==(u=n[2](n[5][n[0]])+"")&&an(r,u);var d=i;(i=l(n))===d?f[i].p(n,o):(zn(),Fn(f[d],1,1,(function(){f[d]=null})),Hn(),(a=f[i])||(a=f[i]=s[i](n)).c(),qn(a,1),a.m(e,null))},i:function(n){c||(qn(a),c=!0)},o:function(n){Fn(a),c=!1},d:function(n){n&&V(e),f[i].d()}}}function qa(n,e,t){var r,o,i,a,c;L(n,ot,(function(n){return t(1,r=n)})),L(n,wt,(function(n){return t(2,i=n)})),L(n,_t,(function(n){return t(4,c=n)}));var u={loading:"Loading...",not_found:"Not Found"},s=kn("socket");L(n,s,(function(n){return t(3,a=n)}));var f,l=kn("user");return L(n,l,(function(n){return t(8,o=n)})),n.$$.update=function(){258&n.$$.dirty&&t(0,f=function(n,e){var t=n.path.match(/\/err\/(\w+)/);return t?t[1]:!n.component||e.is("loading")?"loading":"not_found"}(r,o)),1&n.$$.dirty&&ot.update({title:u[f]})},[f,r,i,a,c,u,s,l]}var Fa=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(Pa()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,qa,Ha,T,{}),e}return c}(ee);function Ka(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Wa(n,e,t){var r=n.slice();return r[4]=e[t],r}function Ga(n){var e,t,r,o,i,a,c,u=n[0]("Help")+"",s=ye("version")+"";return{c:function(){e=Z("h1"),t=Q(u),r=X(),o=Z("small"),i=Z("a"),a=Q("v"),c=Q(s),rn(i,"href",n[2]),rn(i,"target","_blank")},m:function(n,u){Y(n,e,u),G(e,t),G(e,r),G(e,o),G(o,i),G(i,a),G(i,c)},p:function(n,e){1&e&&u!==(u=n[0]("Help")+"")&&an(t,u)},d:function(n){n&&V(e)}}}function Ya(n){var e,t,r,o,i=n[4].example+"",a=n[0](n[4].description)+"";return{c:function(){e=Z("dt"),t=Q(i),r=Z("dd"),o=Q(a)},m:function(n,i){Y(n,e,i),G(e,t),Y(n,r,i),G(r,o)},p:function(n,e){1&e&&a!==(a=n[0](n[4].description)+"")&&an(o,a)},d:function(n){n&&V(e),n&&V(r)}}}function Va(n){var e;return{c:function(){e=Q("Loading")},m:function(n,t){Y(n,e,t)},d:function(n){n&&V(e)}}}function Ja(n){var e;return{c:function(){e=Q("Not found")},m:function(n,t){Y(n,e,t)},d:function(n){n&&V(e)}}}function Za(n){var e;return{c:function(){e=Q("Unknown")},m:function(n,t){Y(n,e,t)},d:function(n){n&&V(e)}}}function Qa(n){for(var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,g,$,y,b,w,_,k,x,E,O,S,C,N,A,D,M,j,T,P,L,I,U,B,z,H,q,F,K,W,nn,en,tn,on,cn,un,sn,fn,ln,pn,hn,mn,vn,gn,$n,yn,bn,wn,_n,kn,xn,En,On,Sn,Cn,Rn,Nn,An,Dn,Mn,jn,Tn,Pn,Ln,In,Un,Bn,zn,Hn,Kn,Wn,Gn,Yn,Vn,Xn,ne,ee,te,re,oe,ie,ae,ce,ue,se,fe,le,de,pe,he,me,ve,ge=n[1]('Got any questions? Come and talk to us in the "#convos" channel on https://freenode.net.')+"",$e=n[1]("More information can also be found on https://convos.chat.")+"",be=n[0]("Shortcuts")+"",we=n[0]("shift+enter")+"",_e=n[0]("Shift focus between chat input and search in sidebar.")+"",ke=n[0]("Open conversation or connection settings")+"",xe=n[0]("Clicking on the icon next to the conversation name will take you to settings.")+"",Ee=n[0]("Autocomplete")+"",Oe=n[0]("The following rules apply when typing a message:")+"",Se=n[0]('"@" followed by a character will show matching nicks in the current conversation.')+"",Ce=n[0]('":" followed by a character will show matching emojis.')+"",Re=n[0]('"/" will show the available commands.')+"",Ne=n[0]('"#" will show the matching conversation names.')+"",Ae=n[0]("Text formatting")+"",De=n[0]("Convos supports some special way of formatting text:")+"",Me=n[0]("Will be automatically converted into emojis.")+"",je=n[0]("> some text")+"",Te=n[0]('A line starting with ">" will be converted into a quote.')+"",Pe=n[0]("*some text*, **some text**, ***some text***")+"",Le=n[1]('Using "*" around some text, will convert it into *italic*, **bold** or ***italic bold***.')+"",Ie=n[0]("`some fragment`")+"",Ue=n[1]("Using backticks around some text, will format it as a `code fragment`.")+"",Be=n[0]("URLs will be converted to links, and might be embedded in the chat.")+"",ze=n[0]("Available commands")+"",He=n[1]('Any message starting with a-z is prefixed with "`/quote`", when sending from a connection conversation.')+"",qe=n[0]("Other resources")+"",Fe=n[0]("Changelog for v%1",ye("version"))+"",Ke=n[0]("Project homepage")+"",We=n[0]("Bug/issue tracker")+"",Ge=n[0]("Source code")+"",Ye="Convos"!=ye("organization_name")&&"https://convos.chat"!=ye("organization_url"),Ve=n[0]("Contact admin")+"",Je=n[0]("Demo error pages")+"",Ze=new Sr({props:{$$slots:{default:[Ga]},$$scope:{ctx:n}}}),Qe=Nr,Xe=[],nt=0;nt<Qe.length;nt+=1)Xe[nt]=Ya(Wa(n,Qe,nt));var et,tt,rt,ot,it=Ye&&(ot=ye("organization_name")+"",{c:function(){et=Z("li"),tt=Z("a"),rt=Q(ot),rn(tt,"href",ye("organization_url")),rn(tt,"target","_blank")},m:function(n,e){Y(n,et,e),G(et,tt),G(tt,rt)},p:R,d:function(n){n&&V(et)}}),at=new qr({props:{href:"/err/loading",$$slots:{default:[Va]},$$scope:{ctx:n}}}),ct=new qr({props:{href:"/err/not_found",$$slots:{default:[Ja]},$$scope:{ctx:n}}}),st=new qr({props:{href:"/err/unknown",$$slots:{default:[Za]},$$scope:{ctx:n}}});return{c:function(){Jn(Ze.$$.fragment),e=X(),t=Z("main"),r=Z("p"),i=X(),c=X(),u=Z("h2"),s=Q(be),f=X(),l=Z("dl"),d=Z("dt"),p=Q(we),h=Z("dd"),m=Q(_e),g=Z("dt"),$=Q(ke),y=Z("dd"),b=Q(xe),w=X(),_=Z("h2"),k=Q(Ee),x=X(),E=Z("p"),O=Q(Oe),S=X(),C=Z("dl"),(N=Z("dt")).textContent="@nick",A=Z("dd"),D=Q(Se),(M=Z("dt")).textContent=":emoji_name",j=Z("dd"),T=Q(Ce),(P=Z("dt")).textContent="/command",L=Z("dd"),I=Q(Re),(U=Z("dt")).textContent="#conversation",B=Z("dd"),z=Q(Ne),H=X(),q=Z("h2"),F=Q(Ae),K=X(),W=Z("p"),nn=Q(De),en=X(),tn=Z("dl"),(on=Z("dt")).textContent="".concat(Object.keys(ut).sort().map(n[3]).join(", ")),cn=Z("dd"),un=Q(Me),sn=Z("dt"),fn=Q(je),ln=Z("dd"),pn=Q(Te),hn=Z("dt"),mn=Q(Pe),vn=Z("dd"),gn=Z("dt"),$n=Q(Ie),yn=Z("dd"),(bn=Z("dt")).textContent="https://...",wn=Z("dd"),_n=Q(Be),kn=X(),xn=Z("h2"),En=Q(ze),On=X(),Sn=Z("p"),Cn=X(),Rn=Z("dl");for(var v=0;v<Xe.length;v+=1)Xe[v].c();Nn=X(),An=Z("h2"),Dn=Q(qe),Mn=X(),jn=Z("ul"),Tn=Z("li"),Pn=Z("a"),Ln=Q(Fe),In=X(),Un=Z("li"),Bn=Z("a"),zn=Q(Ke),Hn=X(),Kn=Z("li"),Wn=Z("a"),Gn=Q(We),Yn=X(),Vn=Z("li"),Xn=Z("a"),ne=Q(Ge),ee=X(),it&&it.c(),te=X(),re=Z("li"),oe=Z("a"),ie=Q(Ve),ae=X(),ce=Z("h2"),ue=Q(Je),se=X(),fe=Z("ul"),le=Z("li"),Jn(at.$$.fragment),de=X(),pe=Z("li"),Jn(ct.$$.fragment),he=X(),me=Z("li"),Jn(st.$$.fragment),o=new dn(ge,i),a=new dn($e,null),rn(u,"id","shortcuts"),rn(_,"id","autocomplete"),rn(q,"id","formatting"),rn(xn,"id","commands"),rn(An,"id","resources"),rn(Pn,"href",n[2]),rn(Pn,"target","_blank"),rn(Bn,"href","https://convos.chat"),rn(Bn,"target","_blank"),rn(Wn,"href","https://github.com/Nordaaker/convos/issues"),rn(Wn,"target","_blank"),rn(Xn,"href","https://github.com/Nordaaker/convos"),rn(Xn,"target","_blank"),rn(oe,"href",ye("contact")),rn(oe,"target","_blank"),rn(ce,"id","fallback"),rn(t,"class","main")},m:function(n,v){Zn(Ze,n,v),Y(n,e,v),Y(n,t,v),G(t,r),o.m(r),G(r,i),a.m(r),G(t,c),G(t,u),G(u,s),G(t,f),G(t,l),G(l,d),G(d,p),G(l,h),G(h,m),G(l,g),G(g,$),G(l,y),G(y,b),G(t,w),G(t,_),G(_,k),G(t,x),G(t,E),G(E,O),G(t,S),G(t,C),G(C,N),G(C,A),G(A,D),G(C,M),G(C,j),G(j,T),G(C,P),G(C,L),G(L,I),G(C,U),G(C,B),G(B,z),G(t,H),G(t,q),G(q,F),G(t,K),G(t,W),G(W,nn),G(t,en),G(t,tn),G(tn,on),G(tn,cn),G(cn,un),G(tn,sn),G(sn,fn),G(tn,ln),G(ln,pn),G(tn,hn),G(hn,mn),G(tn,vn),vn.innerHTML=Le,G(tn,gn),G(gn,$n),G(tn,yn),yn.innerHTML=Ue,G(tn,bn),G(tn,wn),G(wn,_n),G(t,kn),G(t,xn),G(xn,En),G(t,On),G(t,Sn),Sn.innerHTML=He,G(t,Cn),G(t,Rn);for(var R=0;R<Xe.length;R+=1)Xe[R].m(Rn,null);G(t,Nn),G(t,An),G(An,Dn),G(t,Mn),G(t,jn),G(jn,Tn),G(Tn,Pn),G(Pn,Ln),G(jn,In),G(jn,Un),G(Un,Bn),G(Bn,zn),G(jn,Hn),G(jn,Kn),G(Kn,Wn),G(Wn,Gn),G(jn,Yn),G(jn,Vn),G(Vn,Xn),G(Xn,ne),G(jn,ee),it&&it.m(jn,null),G(jn,te),G(jn,re),G(re,oe),G(oe,ie),G(t,ae),G(t,ce),G(ce,ue),G(t,se),G(t,fe),G(fe,le),Zn(at,le,null),G(fe,de),G(fe,pe),Zn(ct,pe,null),G(fe,he),G(fe,me),Zn(st,me,null),ve=!0},p:function(n,e){var t=v(e,1)[0],r={};if(129&t&&(r.$$scope={dirty:t,ctx:n}),Ze.$set(r),(!ve||2&t)&&ge!==(ge=n[1]('Got any questions? Come and talk to us in the "#convos" channel on https://freenode.net.')+"")&&o.p(ge),(!ve||2&t)&&$e!==($e=n[1]("More information can also be found on https://convos.chat.")+"")&&a.p($e),(!ve||1&t)&&be!==(be=n[0]("Shortcuts")+"")&&an(s,be),(!ve||1&t)&&we!==(we=n[0]("shift+enter")+"")&&an(p,we),(!ve||1&t)&&_e!==(_e=n[0]("Shift focus between chat input and search in sidebar.")+"")&&an(m,_e),(!ve||1&t)&&ke!==(ke=n[0]("Open conversation or connection settings")+"")&&an($,ke),(!ve||1&t)&&xe!==(xe=n[0]("Clicking on the icon next to the conversation name will take you to settings.")+"")&&an(b,xe),(!ve||1&t)&&Ee!==(Ee=n[0]("Autocomplete")+"")&&an(k,Ee),(!ve||1&t)&&Oe!==(Oe=n[0]("The following rules apply when typing a message:")+"")&&an(O,Oe),(!ve||1&t)&&Se!==(Se=n[0]('"@" followed by a character will show matching nicks in the current conversation.')+"")&&an(D,Se),(!ve||1&t)&&Ce!==(Ce=n[0]('":" followed by a character will show matching emojis.')+"")&&an(T,Ce),(!ve||1&t)&&Re!==(Re=n[0]('"/" will show the available commands.')+"")&&an(I,Re),(!ve||1&t)&&Ne!==(Ne=n[0]('"#" will show the matching conversation names.')+"")&&an(z,Ne),(!ve||1&t)&&Ae!==(Ae=n[0]("Text formatting")+"")&&an(F,Ae),(!ve||1&t)&&De!==(De=n[0]("Convos supports some special way of formatting text:")+"")&&an(nn,De),(!ve||1&t)&&Me!==(Me=n[0]("Will be automatically converted into emojis.")+"")&&an(un,Me),(!ve||1&t)&&je!==(je=n[0]("> some text")+"")&&an(fn,je),(!ve||1&t)&&Te!==(Te=n[0]('A line starting with ">" will be converted into a quote.')+"")&&an(pn,Te),(!ve||1&t)&&Pe!==(Pe=n[0]("*some text*, **some text**, ***some text***")+"")&&an(mn,Pe),(!ve||2&t)&&Le!==(Le=n[1]('Using "*" around some text, will convert it into *italic*, **bold** or ***italic bold***.')+"")&&(vn.innerHTML=Le),(!ve||1&t)&&Ie!==(Ie=n[0]("`some fragment`")+"")&&an($n,Ie),(!ve||2&t)&&Ue!==(Ue=n[1]("Using backticks around some text, will format it as a `code fragment`.")+"")&&(yn.innerHTML=Ue),(!ve||1&t)&&Be!==(Be=n[0]("URLs will be converted to links, and might be embedded in the chat.")+"")&&an(_n,Be),(!ve||1&t)&&ze!==(ze=n[0]("Available commands")+"")&&an(En,ze),(!ve||2&t)&&He!==(He=n[1]('Any message starting with a-z is prefixed with "`/quote`", when sending from a connection conversation.')+"")&&(Sn.innerHTML=He),1&t){var i;for(Qe=Nr,i=0;i<Qe.length;i+=1){var c=Wa(n,Qe,i);Xe[i]?Xe[i].p(c,t):(Xe[i]=Ya(c),Xe[i].c(),Xe[i].m(Rn,null))}for(;i<Xe.length;i+=1)Xe[i].d(1);Xe.length=Qe.length}(!ve||1&t)&&qe!==(qe=n[0]("Other resources")+"")&&an(Dn,qe),(!ve||1&t)&&Fe!==(Fe=n[0]("Changelog for v%1",ye("version"))+"")&&an(Ln,Fe),(!ve||1&t)&&Ke!==(Ke=n[0]("Project homepage")+"")&&an(zn,Ke),(!ve||1&t)&&We!==(We=n[0]("Bug/issue tracker")+"")&&an(Gn,We),(!ve||1&t)&&Ge!==(Ge=n[0]("Source code")+"")&&an(ne,Ge),Ye&&it.p(n,t),(!ve||1&t)&&Ve!==(Ve=n[0]("Contact admin")+"")&&an(ie,Ve),(!ve||1&t)&&Je!==(Je=n[0]("Demo error pages")+"")&&an(ue,Je);var u={};128&t&&(u.$$scope={dirty:t,ctx:n}),at.$set(u);var f={};128&t&&(f.$$scope={dirty:t,ctx:n}),ct.$set(f);var l={};128&t&&(l.$$scope={dirty:t,ctx:n}),st.$set(l)},i:function(n){ve||(qn(Ze.$$.fragment,n),qn(at.$$.fragment,n),qn(ct.$$.fragment,n),qn(st.$$.fragment,n),ve=!0)},o:function(n){Fn(Ze.$$.fragment,n),Fn(at.$$.fragment,n),Fn(ct.$$.fragment,n),Fn(st.$$.fragment,n),ve=!1},d:function(n){Qn(Ze,n),n&&V(e),n&&V(t),J(Xe,n),it&&it.d(),Qn(at),Qn(ct),Qn(st)}}}function Xa(n,e,t){var r,o;L(n,wt,(function(n){return t(0,r=n)})),L(n,_t,(function(n){return t(1,o=n)}));var i="https://github.com/Nordaaker/convos/blob/"+ye("version")+"/Changes#L3";ot.update({title:"Help"});return[r,o,i,function(n){return ut[n]}]}var nc=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(Ka()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,Xa,Qa,T,{}),e}return c}(ee);function ec(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function tc(n,e,t){var r=n.slice();return r[21]=e[t],r}function rc(n){var e,t,r,o,i,a,c,u,s,f,l,d=n[2]("Sign up")+"",p=n[2]("Please ask your Convos admin for an invite link to sign up, or sign in if you already have an account.")+"",h=n[2]("Contact admin")+"",m=new hr({props:{name:"paper-plane"}});return{c:function(){e=Z("h2"),t=Q(d),r=X(),o=Z("p"),i=Q(p),a=X(),c=Z("div"),u=Z("a"),Jn(m.$$.fragment),s=X(),f=Q(h),rn(u,"class","btn"),rn(u,"href",ye("contact")),rn(c,"class","form-actions")},m:function(n,d){Y(n,e,d),G(e,t),Y(n,r,d),Y(n,o,d),G(o,i),Y(n,a,d),Y(n,c,d),G(c,u),Zn(m,u,null),G(u,s),G(u,f),l=!0},p:function(n,e){(!l||4&e)&&d!==(d=n[2]("Sign up")+"")&&an(t,d),(!l||4&e)&&p!==(p=n[2]("Please ask your Convos admin for an invite link to sign up, or sign in if you already have an account.")+"")&&an(i,p),(!l||4&e)&&h!==(h=n[2]("Contact admin")+"")&&an(f,h)},i:function(n){l||(qn(m.$$.fragment,n),l=!0)},o:function(n){Fn(m.$$.fragment,n),l=!1},d:function(n){n&&V(e),n&&V(r),n&&V(o),n&&V(a),n&&V(c),Qn(m)}}}function oc(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g=n[2](ye("existing_user")?"Recover account":"Sign up")+"",$=ye("first_user"),y=$&&function(n){var e,t,r=n[2]('As you are the first user, you do not need any invitation link. Just fill in the form below, hit "Sign up" to start chatting.')+"";return{c:function(){e=Z("p"),t=Q(r)},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){4&e&&r!==(r=n[2]('As you are the first user, you do not need any invitation link. Just fill in the form below, hit "Sign up" to start chatting.')+"")&&an(t,r)},d:function(n){n&&V(e)}}}(n);function b(e){n[15].call(null,e)}var w={type:"email",name:"email",placeholder:n[2]("Ex: john@doe.com"),readonly:n[5],$$slots:{default:[fc],help:[sc],label:[ac]},$$scope:{ctx:n}};void 0!==n[0].formEmail&&(w.value=n[0].formEmail);var _=new Bi({props:w});On.push((function(){return Vn(_,"value",b)}));var k=new Bi({props:{type:"password",name:"password",$$slots:{default:[pc],help:[dc],label:[lc]},$$scope:{ctx:n}}}),x=new $r({props:{icon:"save",op:n[7],$$slots:{default:[hc]},$$scope:{ctx:n}}}),E=new $i({props:{op:n[7]}});return{c:function(){e=Z("form"),t=Z("h2"),r=Q(g),o=X(),y&&y.c(),i=X(),a=Z("input"),c=X(),u=Z("input"),s=X(),Jn(_.$$.fragment),l=X(),Jn(k.$$.fragment),d=X(),p=Z("div"),Jn(x.$$.fragment),h=X(),Jn(E.$$.fragment),rn(a,"type","hidden"),rn(a,"name","exp"),rn(u,"type","hidden"),rn(u,"name","token"),rn(p,"class","form-actions"),rn(e,"method","post")},m:function(f,g,$){Y(f,e,g),G(e,t),G(t,r),G(e,o),y&&y.m(e,null),G(e,i),G(e,a),G(e,c),G(e,u),G(e,s),Zn(_,e,null),G(e,l),Zn(k,e,null),G(e,d),G(e,p),Zn(x,p,null),G(e,h),Zn(E,e,null),n[17](e),m=!0,$&&v(),v=en(e,"submit",tn(n[16]))},p:function(n,e){(!m||4&e)&&g!==(g=n[2](ye("existing_user")?"Recover account":"Sign up")+"")&&an(r,g),$&&y.p(n,e);var t={};4&e&&(t.placeholder=n[2]("Ex: john@doe.com")),16777220&e&&(t.$$scope={dirty:e,ctx:n}),!f&&1&e&&(f=!0,t.value=n[0].formEmail,Dn((function(){return f=!1}))),_.$set(t);var o={};16777220&e&&(o.$$scope={dirty:e,ctx:n}),k.$set(o);var i={};16777220&e&&(i.$$scope={dirty:e,ctx:n}),x.$set(i)},i:function(n){m||(qn(_.$$.fragment,n),qn(k.$$.fragment,n),qn(x.$$.fragment,n),qn(E.$$.fragment,n),m=!0)},o:function(n){Fn(_.$$.fragment,n),Fn(k.$$.fragment,n),Fn(x.$$.fragment,n),Fn(E.$$.fragment,n),m=!1},d:function(t){t&&V(e),y&&y.d(),Qn(_),Qn(k),Qn(x),Qn(E),n[17](null),v()}}}function ic(n){var e,t,r,o,i,a,c,u,s,f,l,d,p=n[2]("Invalid invite/recover URL")+"",h=n[2](410==ye("status")?"The link has expired.":"The link is invalid.")+"",m=n[2]("Please ask your Convos admin for a new link.")+"",v=n[2]("Contact admin")+"";return{c:function(){e=Z("h2"),t=Q(p),r=X(),o=Z("p"),i=Q(h),a=X(),c=Z("p"),u=Q(m),s=X(),f=Z("p"),l=Z("a"),d=Q(v),rn(l,"class","btn"),rn(l,"href",ye("contact"))},m:function(n,p){Y(n,e,p),G(e,t),Y(n,r,p),Y(n,o,p),G(o,i),Y(n,a,p),Y(n,c,p),G(c,u),Y(n,s,p),Y(n,f,p),G(f,l),G(l,d)},p:function(n,e){4&e&&p!==(p=n[2]("Invalid invite/recover URL")+"")&&an(t,p),4&e&&h!==(h=n[2](410==ye("status")?"The link has expired.":"The link is invalid.")+"")&&an(i,h),4&e&&m!==(m=n[2]("Please ask your Convos admin for a new link.")+"")&&an(u,m),4&e&&v!==(v=n[2]("Contact admin")+"")&&an(d,v)},i:R,o:R,d:function(n){n&&V(e),n&&V(r),n&&V(o),n&&V(a),n&&V(c),n&&V(s),n&&V(f)}}}function ac(n){var e,t,r=n[2]("Email")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){4&e&&r!==(r=n[2]("Email")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function cc(n){var e,t=n[2]("Your email will be used if you forget your password.")+"";return{c:function(){e=Q(t)},m:function(n,t){Y(n,e,t)},p:function(n,r){4&r&&t!==(t=n[2]("Your email will be used if you forget your password.")+"")&&an(e,t)},d:function(n){n&&V(e)}}}function uc(n){var e,t=n[2]("Your email is from the invite link.")+"";return{c:function(){e=Q(t)},m:function(n,t){Y(n,e,t)},p:function(n,r){4&r&&t!==(t=n[2]("Your email is from the invite link.")+"")&&an(e,t)},d:function(n){n&&V(e)}}}function sc(n){var e;var t=function(n,e){return n[5]?uc:cc}(n)(n);return{c:function(){e=Z("p"),t.c(),rn(e,"class","help"),rn(e,"slot","help")},m:function(n,r){Y(n,e,r),t.m(e,null)},p:function(n,e){t.p(n,e)},d:function(n){n&&V(e),t.d()}}}function fc(n){var e;return{c:function(){e=X()},m:function(n,t){Y(n,e,t)},p:R,d:function(n){n&&V(e)}}}function lc(n){var e,t,r=n[2]("Password")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){4&e&&r!==(r=n[2]("Password")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function dc(n){var e,t,r=n[2]("Hint: Use a phrase from a book.")+"";return{c:function(){e=Z("p"),t=Q(r),rn(e,"class","help"),rn(e,"slot","help")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){4&e&&r!==(r=n[2]("Hint: Use a phrase from a book.")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function pc(n){var e;return{c:function(){e=X()},m:function(n,t){Y(n,e,t)},p:R,d:function(n){n&&V(e)}}}function hc(n){var e,t,r=n[2](ye("existing_user")?"Set new password":"Sign up")+"";return{c:function(){e=Z("span"),t=Q(r)},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){4&e&&r!==(r=n[2](ye("existing_user")?"Set new password":"Sign up")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function mc(n){var e,t,r=n[2]("Email")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){4&e&&r!==(r=n[2]("Email")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function vc(n){var e,t,r=n[2]("Password")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){4&e&&r!==(r=n[2]("Password")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function gc(n){var e,t=n[3]("Contact your [Convos admin](%1) if you have forgotten your password.",ye("contact"))+"";return{c:function(){rn(e=Z("p"),"class","help"),rn(e,"slot","help")},m:function(n,r){Y(n,e,r),e.innerHTML=t},p:function(n,r){8&r&&t!==(t=n[3]("Contact your [Convos admin](%1) if you have forgotten your password.",ye("contact"))+"")&&(e.innerHTML=t)},d:function(n){n&&V(e)}}}function $c(n){var e;return{c:function(){e=X()},m:function(n,t){Y(n,e,t)},p:R,d:function(n){n&&V(e)}}}function yc(n){var e,t,r=n[2]("Sign in")+"";return{c:function(){e=Z("span"),t=Q(r)},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){4&e&&r!==(r=n[2]("Sign in")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function bc(n){var e,t,r,o,i=n[21][1]+"";function a(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=n)[20].apply(e,[n[21]].concat(r))}return{c:function(){e=Z("a"),t=Q(i),rn(e,"href",r="#"+n[21][0])},m:function(n,r,i){Y(n,e,r),G(e,t),i&&o(),o=en(e,"click",a)},p:function(o,a){n=o,16&a&&i!==(i=n[21][1]+"")&&an(t,i),16&a&&r!==(r="#"+n[21][0])&&rn(e,"href",r)},d:function(n){n&&V(e),o()}}}function wc(n){var e,t,r,o,i,a,c,u,s,f=!ye("first_user"),l=[ic,oc,rc],d=[];t=function(n,e){return ye("status")>=400?0:n[5]||ye("open_to_public")||ye("first_user")?1:2}(n),r=d[t]=l[t](n);for(var p=f&&function(n){var e,t,r,o,i,a,c,u,s,f,l,d,p=n[2]("Sign in")+"";function h(e){n[18].call(null,e)}var m={type:"email",name:"email",placeholder:n[2]("Ex: john@doe.com"),$$slots:{label:[mc]},$$scope:{ctx:n}};void 0!==n[0].formEmail&&(m.value=n[0].formEmail);var v=new Bi({props:m});On.push((function(){return Vn(v,"value",h)}));var g=new Bi({props:{type:"password",name:"password",autocomplete:"current-password",$$slots:{default:[$c],help:[gc],label:[vc]},$$scope:{ctx:n}}}),$=new $r({props:{icon:"sign-in-alt",op:n[6],$$slots:{default:[yc]},$$scope:{ctx:n}}}),y=new $i({props:{op:n[6]}});return{c:function(){e=Z("main"),t=Z("form"),r=Z("h2"),o=Q(p),i=X(),Jn(v.$$.fragment),c=X(),Jn(g.$$.fragment),u=X(),s=Z("div"),Jn($.$$.fragment),f=X(),Jn(y.$$.fragment),rn(s,"class","form-actions"),rn(t,"method","post"),rn(e,"id","signin")},m:function(a,p,h){Y(a,e,p),G(e,t),G(t,r),G(r,o),G(t,i),Zn(v,t,null),G(t,c),Zn(g,t,null),G(t,u),G(t,s),Zn($,s,null),G(t,f),Zn(y,t,null),l=!0,h&&d(),d=en(t,"submit",tn(n[19]))},p:function(n,e){(!l||4&e)&&p!==(p=n[2]("Sign in")+"")&&an(o,p);var t={};4&e&&(t.placeholder=n[2]("Ex: john@doe.com")),16777220&e&&(t.$$scope={dirty:e,ctx:n}),!a&&1&e&&(a=!0,t.value=n[0].formEmail,Dn((function(){return a=!1}))),v.$set(t);var r={};16777228&e&&(r.$$scope={dirty:e,ctx:n}),g.$set(r);var i={};16777220&e&&(i.$$scope={dirty:e,ctx:n}),$.$set(i)},i:function(n){l||(qn(v.$$.fragment,n),qn(g.$$.fragment,n),qn($.$$.fragment,n),qn(y.$$.fragment,n),l=!0)},o:function(n){Fn(v.$$.fragment,n),Fn(g.$$.fragment,n),Fn($.$$.fragment,n),Fn(y.$$.fragment,n),l=!1},d:function(n){n&&V(e),Qn(v),Qn(g),Qn($),Qn(y),d()}}}(n),h=new hr({props:{name:"globe"}}),m=n[4].languageOptions,g=[],$=0;$<m.length;$+=1)g[$]=bc(tc(n,m,$));return{c:function(){e=Z("main"),r.c(),o=X(),p&&p.c(),i=X(),a=Z("div"),c=Z("footer"),Jn(h.$$.fragment),u=X();for(var n=0;n<g.length;n+=1)g[n].c();rn(e,"id","signup"),rn(c,"class","footer language-selector"),rn(a,"class","footer-wrapper is-small")},m:function(n,r){Y(n,e,r),d[t].m(e,null),Y(n,o,r),p&&p.m(n,r),Y(n,i,r),Y(n,a,r),G(a,c),Zn(h,c,null),G(c,u);for(var f=0;f<g.length;f+=1)g[f].m(c,null);s=!0},p:function(n,e){var t=v(e,1)[0];if(r.p(n,t),f&&p.p(n,t),16&t){var o;for(m=n[4].languageOptions,o=0;o<m.length;o+=1){var i=tc(n,m,o);g[o]?g[o].p(i,t):(g[o]=bc(i),g[o].c(),g[o].m(c,null))}for(;o<g.length;o+=1)g[o].d(1);g.length=m.length}},i:function(n){s||(qn(r),qn(p),qn(h.$$.fragment,n),s=!0)},o:function(n){Fn(r),Fn(p),Fn(h.$$.fragment,n),s=!1},d:function(n){n&&V(e),d[t].d(),n&&V(o),p&&p.d(n),n&&V(i),n&&V(a),Qn(h),J(g,n)}}}function _c(n,e,r){var o,i,a,c,u,s,l;L(n,ot,(function(n){return r(9,i=n)})),L(n,wt,(function(n){return r(2,u=n)})),L(n,_t,(function(n){return r(3,s=n)})),L(n,bt,(function(n){return r(4,l=n)}));var d=kn("api"),p=kn("user");L(n,p,(function(n){return r(8,o=n)}));var h=-1!=location.href.indexOf("email="),m=d("loginUser");L(n,m,(function(n){return r(10,a=n)}));var v,g=d("registerUser");function $(n){return y.apply(this,arguments)}function y(){return(y=f(t.mark((function n(e){return t.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.reset(),n.next=3,p.load();case 3:return n.abrupt("return",p.is("authenticated")?ot.go("/"):location.reload());case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function b(){ot.update({lastUrl:""}),$(g)}L(n,g,(function(n){return r(11,c=n)})),bn((function(){v&&ot.urlToForm(v)}));return n.$$.update=function(){256&n.$$.dirty&&function(n){var e=n.conversations()[0],t=ot.lastUrl?ot.lastUrl:e?e.path:"/settings/connection";!n.is("loading")&&n.is("authenticated")&&ot.go(t)}(o),512&n.$$.dirty&&ot.update({title:i.path.match(/register/)?"Register":"Login"}),1024&n.$$.dirty&&a.is("success")&&$(m),2048&n.$$.dirty&&c.is("success")&&b()},[p,v,u,s,l,h,m,g,o,i,a,c,d,$,b,function(n){p.formEmail=n,r(0,p)},function(n){return g.perform(n.target)},function(n){On[n?"unshift":"push"]((function(){r(1,v=n)}))},function(n){p.formEmail=n,r(0,p)},function(n){return m.perform(n.target)},function(n){return l.load(n[0])}]}var kc=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(ec()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,_c,wc,T,{}),e}return c}(ee);function xc(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Ec(n,e,t){var r=n.slice();return r[10]=e[t],r[12]=t,r}function Oc(n){var e,t,r=new hr({props:{name:"bell"}});return{c:function(){e=Z("a"),Jn(r.$$.fragment),rn(e,"href","/settings/account"),rn(e,"class","btn")},m:function(n,o){Y(n,e,o),Zn(r,e,null),t=!0},i:function(n){t||(qn(r.$$.fragment,n),t=!0)},o:function(n){Fn(r.$$.fragment,n),t=!1},d:function(n){n&&V(e),Qn(r)}}}function Sc(n){var e,t,r=new hr({props:{name:"search"}});return{c:function(){e=Z("a"),Jn(r.$$.fragment),rn(e,"href","/search"),rn(e,"class","btn")},m:function(n,o){Y(n,e,o),Zn(r,e,null),t=!0},i:function(n){t||(qn(r.$$.fragment,n),t=!0)},o:function(n){Fn(r.$$.fragment,n),t=!1},d:function(n){n&&V(e),Qn(r)}}}function Cc(n){var e,t,r,o,i,a,c,u,s,f,l=n[5](n[0].name)+"",d=[Sc,Oc],p=[];function h(n,e){return 8&e&&(a=!!n[3].is("search")),a?0:1}return c=h(n,-1),u=p[c]=d[c](n),{c:function(){e=Z("h1"),t=Z("a"),r=Z("span"),o=Q(l),i=X(),u.c(),s=nn(),rn(t,"href","#activeMenu:nav"),rn(t,"tabindex","-1")},m:function(n,a){Y(n,e,a),G(e,t),G(t,r),G(r,o),Y(n,i,a),p[c].m(n,a),Y(n,s,a),f=!0},p:function(n,e){(!f||33&e)&&l!==(l=n[5](n[0].name)+"")&&an(o,l);var t=c;(c=h(n,e))!==t&&(zn(),Fn(p[t],1,1,(function(){p[t]=null})),Hn(),(u=p[c])||(u=p[c]=d[c](n)).c(),qn(u,1),u.m(s.parentNode,s))},i:function(n){f||(qn(u),f=!0)},o:function(n){Fn(u),f=!1},d:function(n){n&&V(e),n&&V(i),p[c].d(n),n&&V(s)}}}function Rc(n){var e,t,r,o,i,a,c,u=[Dc,Ac,Nc],s=[];function f(n,o){return 1&o&&(e=!!n[0].is("notifications")),e?0:(2&o&&(t=!!n[1].param("q")),t?1:(1&o&&(r=!!n[0].is("search")),r?2:-1))}return~(o=f(n,-1))&&(i=s[o]=u[o](n)),{c:function(){i&&i.c(),a=nn()},m:function(n,e){~o&&s[o].m(n,e),Y(n,a,e),c=!0},p:function(n,e){var t=o;(o=f(n,e))===t?~o&&s[o].p(n,e):(i&&(zn(),Fn(s[t],1,1,(function(){s[t]=null})),Hn()),~o?((i=s[o])||(i=s[o]=u[o](n)).c(),qn(i,1),i.m(a.parentNode,a)):i=null)},i:function(n){c||(qn(i),c=!0)},o:function(n){Fn(i),c=!1},d:function(n){~o&&s[o].d(n),n&&V(a)}}}function Nc(n){var e,t=new kr({props:{$$slots:{default:[Mc]},$$scope:{ctx:n}}});return{c:function(){Jn(t.$$.fragment)},m:function(n,r){Zn(t,n,r),e=!0},p:function(n,e){var r={};8256&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(qn(t.$$.fragment,n),e=!0)},o:function(n){Fn(t.$$.fragment,n),e=!1},d:function(n){Qn(t,n)}}}function Ac(n){var e,t=new kr({props:{$$slots:{default:[jc]},$$scope:{ctx:n}}});return{c:function(){Jn(t.$$.fragment)},m:function(n,r){Zn(t,n,r),e=!0},p:function(n,e){var r={};8226&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(qn(t.$$.fragment,n),e=!0)},o:function(n){Fn(t.$$.fragment,n),e=!1},d:function(n){Qn(t,n)}}}function Dc(n){var e,t,r=n[5]("No notifications.")+"";return{c:function(){e=Z("h2"),t=Q(r)},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){32&e&&r!==(r=n[5]("No notifications.")+"")&&an(t,r)},i:R,o:R,d:function(n){n&&V(e)}}}function Mc(n){var e,t,r,o,i,a=n[6]("Search for messages sent by you or others the last %1 days by writing a message in the input field below.",90)+"",c=n[6]('You can enter a channel name, or use `"conversation:#channel"` to narrow down the search.')+"",u=n[6]('It is also possible to use `"from:some_nick"` to filter out messages from a given user.')+"";return{c:function(){t=X(),o=X(),e=new dn(a,t),r=new dn(c,o),i=new dn(u,null)},m:function(n,a){e.m(n,a),Y(n,t,a),r.m(n,a),Y(n,o,a),i.m(n,a)},p:function(n,t){64&t&&a!==(a=n[6]("Search for messages sent by you or others the last %1 days by writing a message in the input field below.",90)+"")&&e.p(a),64&t&&c!==(c=n[6]('You can enter a channel name, or use `"conversation:#channel"` to narrow down the search.')+"")&&r.p(c),64&t&&u!==(u=n[6]('It is also possible to use `"from:some_nick"` to filter out messages from a given user.')+"")&&i.p(u)},d:function(n){n&&e.d(),n&&V(t),n&&r.d(),n&&V(o),n&&i.d()}}}function jc(n){var e,t=n[5]('No search results for "%1".',n[1].param("q"))+"";return{c:function(){e=Q(t)},m:function(n,t){Y(n,e,t)},p:function(n,r){34&r&&t!==(t=n[5]('No search results for "%1".',n[1].param("q"))+"")&&an(e,t)},d:function(n){n&&V(e)}}}function Tc(n){var e,t,r,o,i,a,c=n[10].ts.getHumanDate()+"",u=new hr({props:{name:"calendar-alt"}});return{c:function(){e=Z("div"),t=Z("span"),Jn(u.$$.fragment),r=X(),o=Z("i"),i=Q(c),rn(e,"class","message__status-line for-day-changed")},m:function(n,c){Y(n,e,c),G(e,t),Zn(u,t,null),G(t,r),G(t,o),G(o,i),a=!0},p:function(n,e){(!a||4&e)&&c!==(c=n[10].ts.getHumanDate()+"")&&an(i,c)},i:function(n){a||(qn(u.$$.fragment,n),a=!0)},o:function(n){Fn(u.$$.fragment,n),a=!1},d:function(n){n&&V(e),Qn(u)}}}function Pc(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,$=n[10].ts.toLocaleString()+"",y=n[5]("%1 in %2",n[10].from,n[10].conversation_id)+"",b=n[10].markdown+"",w=(!n[12]||n[10].dayChanged)&&Tc(n),_=new hr({props:{name:"pick:"+n[10].fromId,color:n[10].color}});return{c:function(){w&&w.c(),e=X(),t=Z("div"),Jn(_.$$.fragment),r=X(),o=Z("div"),i=Z("div"),a=Q($),u=X(),s=Z("a"),f=Q(y),d=X(),p=Z("div"),h=X(),rn(o,"class","message__ts has-tooltip"),rn(o,"data-content",c=n[10].ts.format("%H:%M")),rn(s,"href",l=zc(n[10])),rn(s,"class","message__from"),un(s,"color",n[10].color),rn(p,"class","message__text"),rn(t,"class",m=n[10].className)},m:function(n,c,l){w&&w.m(n,c),Y(n,e,c),Y(n,t,c),Zn(_,t,null),G(t,r),G(t,o),G(o,i),G(i,a),G(t,u),G(t,s),G(s,f),G(t,d),G(t,p),p.innerHTML=b,G(t,h),v=!0,l&&g(),g=en(t,"click",Hc)},p:function(n,r){!n[12]||n[10].dayChanged?w?(w.p(n,r),qn(w,1)):((w=Tc(n)).c(),qn(w,1),w.m(e.parentNode,e)):w&&(zn(),Fn(w,1,1,(function(){w=null})),Hn());var i={};4&r&&(i.name="pick:"+n[10].fromId),4&r&&(i.color=n[10].color),_.$set(i),(!v||4&r)&&$!==($=n[10].ts.toLocaleString()+"")&&an(a,$),(!v||4&r&&c!==(c=n[10].ts.format("%H:%M")))&&rn(o,"data-content",c),(!v||36&r)&&y!==(y=n[5]("%1 in %2",n[10].from,n[10].conversation_id)+"")&&an(f,y),(!v||4&r&&l!==(l=zc(n[10])))&&rn(s,"href",l),(!v||4&r)&&un(s,"color",n[10].color),(!v||4&r)&&b!==(b=n[10].markdown+"")&&(p.innerHTML=b),(!v||4&r&&m!==(m=n[10].className))&&rn(t,"class",m)},i:function(n){v||(qn(w),qn(_.$$.fragment,n),v=!0)},o:function(n){Fn(w),Fn(_.$$.fragment,n),v=!1},d:function(n){w&&w.d(n),n&&V(e),n&&V(t),Qn(_),g()}}}function Lc(n){var e,t,r,o,i,a,c=n[5]("Loading...")+"",u=new hr({props:{name:"spinner",animation:"spin"}});return{c:function(){e=Z("div"),t=Z("span"),Jn(u.$$.fragment),r=X(),o=Z("i"),i=Q(c),rn(e,"class","message__status-line for-loading")},m:function(n,c){Y(n,e,c),G(e,t),Zn(u,t,null),G(t,r),G(t,o),G(o,i),a=!0},p:function(n,e){(!a||32&e)&&c!==(c=n[5]("Loading...")+"")&&an(i,c)},i:function(n){a||(qn(u.$$.fragment,n),a=!0)},o:function(n){Fn(u.$$.fragment,n),a=!1},d:function(n){n&&V(e),Qn(u)}}}function Ic(n){for(var e,t,r,o,i=0==n[2].length&&!n[0].is("loading"),a=n[3].is("loading"),c=i&&Rc(n),u=n[2],s=[],f=0;f<u.length;f+=1)s[f]=Pc(Ec(n,u,f));var l=function(n){return Fn(s[n],1,1,(function(){s[n]=null}))},d=a&&Lc(n);return{c:function(){c&&c.c(),e=X();for(var n=0;n<s.length;n+=1)s[n].c();t=X(),d&&d.c(),r=nn()},m:function(n,i){c&&c.m(n,i),Y(n,e,i);for(var a=0;a<s.length;a+=1)s[a].m(n,i);Y(n,t,i),d&&d.m(n,i),Y(n,r,i),o=!0},p:function(n,o){if(5&o&&(i=0==n[2].length&&!n[0].is("loading")),i?c?(c.p(n,o),qn(c,1)):((c=Rc(n)).c(),qn(c,1),c.m(e.parentNode,e)):c&&(zn(),Fn(c,1,1,(function(){c=null})),Hn()),36&o){var f;for(u=n[2],f=0;f<u.length;f+=1){var p=Ec(n,u,f);s[f]?(s[f].p(p,o),qn(s[f],1)):(s[f]=Pc(p),s[f].c(),qn(s[f],1),s[f].m(t.parentNode,t))}for(zn(),f=u.length;f<s.length;f+=1)l(f);Hn()}8&o&&(a=n[3].is("loading")),a?d?(d.p(n,o),qn(d,1)):((d=Lc(n)).c(),qn(d,1),d.m(r.parentNode,r)):d&&(zn(),Fn(d,1,1,(function(){d=null})),Hn())},i:function(n){if(!o){qn(c);for(var e=0;e<u.length;e+=1)qn(s[e]);qn(d),o=!0}},o:function(n){Fn(c),s=s.filter(Boolean);for(var e=0;e<s.length;e+=1)Fn(s[e]);Fn(d),o=!1},d:function(n){c&&c.d(n),n&&V(e),J(s,n),n&&V(t),d&&d.d(n),n&&V(r)}}}function Uc(n){var e,t=new Ur({props:{conversation:n[0]}});return{c:function(){Jn(t.$$.fragment)},m:function(n,r){Zn(t,n,r),e=!0},p:function(n,e){var r={};1&e&&(r.conversation=n[0]),t.$set(r)},i:function(n){e||(qn(t.$$.fragment,n),e=!0)},o:function(n){Fn(t.$$.fragment,n),e=!1},d:function(n){Qn(t,n)}}}function Bc(n){var e,t,r,o,i=n[0].is("search"),a=new Sr({props:{$$slots:{default:[Cc]},$$scope:{ctx:n}}}),c=new to({props:{class:n[4].join(" "),$$slots:{default:[Ic]},$$scope:{ctx:n}}});c.$on("rendered",qc);var u=i&&Uc(n);return{c:function(){Jn(a.$$.fragment),e=X(),Jn(c.$$.fragment),t=X(),u&&u.c(),r=nn()},m:function(n,i){Zn(a,n,i),Y(n,e,i),Zn(c,n,i),Y(n,t,i),u&&u.m(n,i),Y(n,r,i),o=!0},p:function(n,e){var t=v(e,1)[0],o={};8233&t&&(o.$$scope={dirty:t,ctx:n}),a.$set(o);var s={};16&t&&(s.class=n[4].join(" ")),8303&t&&(s.$$scope={dirty:t,ctx:n}),c.$set(s),1&t&&(i=n[0].is("search")),i?u?(u.p(n,t),qn(u,1)):((u=Uc(n)).c(),qn(u,1),u.m(r.parentNode,r)):u&&(zn(),Fn(u,1,1,(function(){u=null})),Hn())},i:function(n){o||(qn(a.$$.fragment,n),qn(c.$$.fragment,n),qn(u),o=!0)},o:function(n){Fn(a.$$.fragment,n),Fn(c.$$.fragment,n),Fn(u),o=!1},d:function(n){Qn(a,n),n&&V(e),Qn(c,n),n&&V(t),u&&u.d(n),n&&V(r)}}}function zc(n){var e=["","chat",n.connection_id,n.conversation_id].map(encodeURIComponent).join("/");return ot.urlFor(e+"#"+n.ts.toISOString())}function Hc(n){n.target.closest("a")||(n.preventDefault(),ot.go(n.target.closest(".message").querySelector("a").href))}var qc=function(n){return n.detail.scrollTo(-1)};function Fc(n,e,t){var r,o,i,a,c=R,u=function(){return c(),c=P(d,(function(n){return t(3,o=n)})),d};L(n,ot,(function(n){return t(1,r=n)})),L(n,wt,(function(n){return t(5,i=n)})),L(n,_t,(function(n){return t(6,a=n)})),n.$$.on_destroy.push((function(){return c()}));var s,f,l=kn("user"),d=-1==r.path.indexOf("search")?l.notifications:l.search;function p(n){var e=n.message;return d.update({userInput:e}),ot.go("/search?q="+encodeURIComponent(e),{replace:!0}),e?d.load({match:e}):d.update({messages:[]})}return u(),bn((function(){return l.search.on("send",p)})),wn((function(){return d.markAsRead()})),n.$$.update=function(){8&n.$$.dirty&&t(2,s=ho({conversation:o})),12&n.$$.dirty&&t(4,f=["main",s.length&&"has-results",o.is("search")&&"is-above-chat-input"].filter((function(n){return n}))),2&n.$$.dirty&&function(n){var e=-1==n.path.indexOf("search")?l.notifications:l.search;e!=d&&u(t(0,d=e.update({conversation_id:!0}))),d.is("search")?p({message:n.param("q")}):d.load()}(r)},[d,r,s,o,f,i,a]}var Kc=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(xc()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,Fc,Bc,T,{}),e}return c}(ee);function Wc(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Gc(n){var e,t,r=n[9]("Account")+"";return{c:function(){e=Z("h1"),t=Q(r)},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){512&e&&r!==(r=n[9]("Account")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Yc(n){var e,t,r=n[9]("Email")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){512&e&&r!==(r=n[9]("Email")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Vc(n){var e,t,r=n[9]("Notification keywords")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){512&e&&r!==(r=n[9]("Notification keywords")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Jc(n){var e,t,r=n[9]("Enable notifications")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){512&e&&r!==(r=n[9]("Enable notifications")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Zc(n){var e,t,r=n[9]("Ignore join/part messages")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){512&e&&r!==(r=n[9]("Ignore join/part messages")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Qc(n){var e,t,r=n[9]("Expand URL to media")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){512&e&&r!==(r=n[9]("Expand URL to media")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Xc(n){var e,t,r=n[9]("Theme")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){512&e&&r!==(r=n[9]("Theme")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function nu(n){var e,t,r=n[9]("Color scheme")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){512&e&&r!==(r=n[9]("Color scheme")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function eu(n){var e,t,r=n[9]("Enable compact message display")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){512&e&&r!==(r=n[9]("Enable compact message display")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function tu(n){var e,t,r,o,i=n[9]("Language")+"",a=new hr({props:{name:"globe"}});return{c:function(){e=Z("span"),t=Q(i),r=X(),Jn(a.$$.fragment),rn(e,"slot","label")},m:function(n,i){Y(n,e,i),G(e,t),G(e,r),Zn(a,e,null),o=!0},p:function(n,e){(!o||512&e)&&i!==(i=n[9]("Language")+"")&&an(t,i)},i:function(n){o||(qn(a.$$.fragment,n),o=!0)},o:function(n){Fn(a.$$.fragment,n),o=!1},d:function(n){n&&V(e),Qn(a)}}}function ru(n){var e,t,r=n[9]("Password")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){512&e&&r!==(r=n[9]("Password")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function ou(n){var e,t,r=n[9]("Repeat password")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){512&e&&r!==(r=n[9]("Repeat password")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function iu(n){var e,t,r=n[9]("Save settings")+"";return{c:function(){e=Z("span"),t=Q(r)},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){512&e&&r!==(r=n[9]("Save settings")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function au(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,g,$,y,b,w,_,k,x,E,O,S,C,R,N=n[9]("Leave the password fields empty to keep the current password.")+"",A=new Sr({props:{$$slots:{default:[Gc]},$$scope:{ctx:n}}}),D=new Bi({props:{type:"email",name:"email",value:n[10].email,readonly:!0,$$slots:{label:[Yc]},$$scope:{ctx:n}}}),M=new Bi({props:{name:"highlight_keywords",placeholder:n[9]("whatever, keywords"),value:n[15],$$slots:{label:[Vc]},$$scope:{ctx:n}}});function j(e){n[20].call(null,e)}var T={name:"notifications",$$slots:{label:[Jc]},$$scope:{ctx:n}};void 0!==n[7]&&(T.checked=n[7]);var P=new di({props:T});function L(e){n[21].call(null,e)}On.push((function(){return Vn(P,"checked",j)}));var I={name:"statuses",$$slots:{label:[Zc]},$$scope:{ctx:n}};void 0!==n[6]&&(I.checked=n[6]);var U=new di({props:I});function B(e){n[22].call(null,e)}On.push((function(){return Vn(U,"checked",L)}));var z={name:"expand_url",$$slots:{label:[Qc]},$$scope:{ctx:n}};void 0!==n[5]&&(z.checked=n[5]);var H=new di({props:z});function q(e){n[23].call(null,e)}On.push((function(){return Vn(H,"checked",B)}));var F={name:"theme",options:n[12].themeOptions,$$slots:{label:[Xc]},$$scope:{ctx:n}};void 0!==n[1]&&(F.value=n[1]);var K=new Oi({props:F});function W(e){n[24].call(null,e)}On.push((function(){return Vn(K,"value",q)}));var J={name:"color_scheme",readonly:n[8],options:n[12].colorSchemeOptions,$$slots:{label:[nu]},$$scope:{ctx:n}};void 0!==n[2]&&(J.value=n[2]);var nn=new Oi({props:J});function on(e){n[25].call(null,e)}On.push((function(){return Vn(nn,"value",W)}));var cn={name:"compact",$$slots:{label:[eu]},$$scope:{ctx:n}};void 0!==n[4]&&(cn.checked=n[4]);var un=new di({props:cn});function sn(e){n[26].call(null,e)}On.push((function(){return Vn(un,"checked",on)}));var fn={name:"lang",options:n[11].languageOptions,$$slots:{label:[tu]},$$scope:{ctx:n}};void 0!==n[3]&&(fn.value=n[3]);var ln=new Oi({props:fn});On.push((function(){return Vn(ln,"value",sn)}));var dn=new Bi({props:{type:"password",name:"password",autocomplete:"new-password",$$slots:{label:[ru]},$$scope:{ctx:n}}}),pn=new Bi({props:{type:"password",name:"password_again",autocomplete:"new-password",$$slots:{label:[ou]},$$scope:{ctx:n}}}),hn=new $r({props:{icon:"save",op:n[14],$$slots:{default:[iu]},$$scope:{ctx:n}}}),mn=new $i({props:{op:n[14]}});return{c:function(){Jn(A.$$.fragment),e=X(),t=Z("main"),r=Z("form"),Jn(D.$$.fragment),o=X(),Jn(M.$$.fragment),i=X(),Jn(P.$$.fragment),c=X(),Jn(U.$$.fragment),s=X(),Jn(H.$$.fragment),l=X(),Jn(K.$$.fragment),p=X(),Jn(nn.$$.fragment),m=X(),Jn(un.$$.fragment),$=X(),Jn(ln.$$.fragment),b=X(),Jn(dn.$$.fragment),w=X(),Jn(pn.$$.fragment),_=X(),k=Z("p"),x=Q(N),E=X(),O=Z("div"),Jn(hn.$$.fragment),S=X(),Jn(mn.$$.fragment),rn(O,"class","form-actions"),rn(r,"method","post"),rn(t,"class","main")},m:function(a,u,f){Zn(A,a,u),Y(a,e,u),Y(a,t,u),G(t,r),Zn(D,r,null),G(r,o),Zn(M,r,null),G(r,i),Zn(P,r,null),G(r,c),Zn(U,r,null),G(r,s),Zn(H,r,null),G(r,l),Zn(K,r,null),G(r,p),Zn(nn,r,null),G(r,m),Zn(un,r,null),G(r,$),Zn(ln,r,null),G(r,b),Zn(dn,r,null),G(r,w),Zn(pn,r,null),G(r,_),G(r,k),G(k,x),G(r,E),G(r,O),Zn(hn,O,null),G(r,S),Zn(mn,r,null),n[27](r),C=!0,f&&R(),R=en(r,"submit",tn(n[16]))},p:function(n,e){var t=v(e,1)[0],r={};268435968&t&&(r.$$scope={dirty:t,ctx:n}),A.$set(r);var o={};1024&t&&(o.value=n[10].email),268435968&t&&(o.$$scope={dirty:t,ctx:n}),D.$set(o);var i={};512&t&&(i.placeholder=n[9]("whatever, keywords")),268435968&t&&(i.$$scope={dirty:t,ctx:n}),M.$set(i);var c={};268435968&t&&(c.$$scope={dirty:t,ctx:n}),!a&&128&t&&(a=!0,c.checked=n[7],Dn((function(){return a=!1}))),P.$set(c);var s={};268435968&t&&(s.$$scope={dirty:t,ctx:n}),!u&&64&t&&(u=!0,s.checked=n[6],Dn((function(){return u=!1}))),U.$set(s);var l={};268435968&t&&(l.$$scope={dirty:t,ctx:n}),!f&&32&t&&(f=!0,l.checked=n[5],Dn((function(){return f=!1}))),H.$set(l);var p={};268435968&t&&(p.$$scope={dirty:t,ctx:n}),!d&&2&t&&(d=!0,p.value=n[1],Dn((function(){return d=!1}))),K.$set(p);var m={};256&t&&(m.readonly=n[8]),268435968&t&&(m.$$scope={dirty:t,ctx:n}),!h&&4&t&&(h=!0,m.value=n[2],Dn((function(){return h=!1}))),nn.$set(m);var $={};268435968&t&&($.$$scope={dirty:t,ctx:n}),!g&&16&t&&(g=!0,$.checked=n[4],Dn((function(){return g=!1}))),un.$set($);var b={};2048&t&&(b.options=n[11].languageOptions),268435968&t&&(b.$$scope={dirty:t,ctx:n}),!y&&8&t&&(y=!0,b.value=n[3],Dn((function(){return y=!1}))),ln.$set(b);var w={};268435968&t&&(w.$$scope={dirty:t,ctx:n}),dn.$set(w);var _={};268435968&t&&(_.$$scope={dirty:t,ctx:n}),pn.$set(_),(!C||512&t)&&N!==(N=n[9]("Leave the password fields empty to keep the current password.")+"")&&an(x,N);var k={};268435968&t&&(k.$$scope={dirty:t,ctx:n}),hn.$set(k)},i:function(n){C||(qn(A.$$.fragment,n),qn(D.$$.fragment,n),qn(M.$$.fragment,n),qn(P.$$.fragment,n),qn(U.$$.fragment,n),qn(H.$$.fragment,n),qn(K.$$.fragment,n),qn(nn.$$.fragment,n),qn(un.$$.fragment,n),qn(ln.$$.fragment,n),qn(dn.$$.fragment,n),qn(pn.$$.fragment,n),qn(hn.$$.fragment,n),qn(mn.$$.fragment,n),C=!0)},o:function(n){Fn(A.$$.fragment,n),Fn(D.$$.fragment,n),Fn(M.$$.fragment,n),Fn(P.$$.fragment,n),Fn(U.$$.fragment,n),Fn(H.$$.fragment,n),Fn(K.$$.fragment,n),Fn(nn.$$.fragment,n),Fn(un.$$.fragment,n),Fn(ln.$$.fragment,n),Fn(dn.$$.fragment,n),Fn(pn.$$.fragment,n),Fn(hn.$$.fragment,n),Fn(mn.$$.fragment,n),C=!1},d:function(r){Qn(A,r),r&&V(e),r&&V(t),Qn(D),Qn(M),Qn(P),Qn(U),Qn(H),Qn(K),Qn(nn),Qn(un),Qn(ln),Qn(dn),Qn(pn),Qn(hn),Qn(mn),n[27](null),R()}}}function cu(n,e,t){var r,o,i,a;L(n,wt,(function(n){return t(9,o=n)})),L(n,bt,(function(n){return t(11,a=n)}));var c=kn("api"),u=kn("themeManager");L(n,u,(function(n){return t(17,r=n)}));var s=kn("user");L(n,s,(function(n){return t(10,i=n)}));var f,l,d=c("updateUser"),p=u.activeTheme,h=u.colorScheme,m=bt.lang,v=u.compactDisplay,g=s.expandUrlToMedia,$=s.highlightKeywords.join(", "),y=s.ignoreStatuses,b=Ot.wantNotifications;function w(n,e){(e.wantNotifications||e.desktopAccess)&&n.wantNotifications&&n.show(o("You have enabled notifications."))}return ot.update({title:"Account"}),d.on("start",(function(n){n.body.password||delete n.body.password,n.body.highlight_keywords=n.body.highlight_keywords.split(/[.,\s]+/).map((function(n){return n.trim()})),s.update({highlightKeywords:n.body.highlight_keywords})})),wn(Ot.on("update",w)),n.$$.update=function(){131074&n.$$.dirty&&t(8,l=!r.hasColorScheme(p)),8&n.$$.dirty&&bt.load(m)},[f,p,h,m,v,g,y,b,l,o,i,a,u,s,d,$,function(n){var e=n.target,r=[e.password.value,e.password_again.value];if(r.join("").length&&r[0]!=r[1])return d.error("Passwords does not match.");l&&t(2,h="auto"),b&&Ot.requestDesktopAccess(),Ot.update({wantNotifications:b}),u.update({activeTheme:p,colorScheme:h,compactDisplay:v}),s.update({expandUrlToMedia:g,ignoreStatuses:y}),d.perform(n.target)},r,c,w,function(n){t(7,b=n)},function(n){t(6,y=n)},function(n){t(5,g=n)},function(n){t(1,p=n)},function(n){t(2,h=n)},function(n){t(4,v=n)},function(n){t(3,m=n)},function(n){On[n?"unshift":"push"]((function(){t(0,f=n)}))}]}var uu=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(Wc()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,cu,au,T,{}),e}return c}(ee);function su(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function fu(n){var e,t,r=n[2]("Global settings")+"";return{c:function(){e=Z("h1"),t=Q(r)},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){4&e&&r!==(r=n[2]("Global settings")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function lu(n){var e,t,r=n[2]("Organization name")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){4&e&&r!==(r=n[2]("Organization name")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function du(n){var e,t,r=n[2]("Can be changed if you want to add a touch of your organization.")+"";return{c:function(){e=Z("p"),t=Q(r),rn(e,"class","help"),rn(e,"slot","help")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){4&e&&r!==(r=n[2]("Can be changed if you want to add a touch of your organization.")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function pu(n){var e;return{c:function(){e=X()},m:function(n,t){Y(n,e,t)},p:R,d:function(n){n&&V(e)}}}function hu(n){var e,t,r=n[2]("Organization URL")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){4&e&&r!==(r=n[2]("Organization URL")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function mu(n){var e,t,r=n[2]('Used together with "Organization name" to add a link to your organization on the login screen.')+"";return{c:function(){e=Z("p"),t=Q(r),rn(e,"class","help"),rn(e,"slot","help")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){4&e&&r!==(r=n[2]('Used together with "Organization name" to add a link to your organization on the login screen.')+"")&&an(t,r)},d:function(n){n&&V(e)}}}function vu(n){var e;return{c:function(){e=X()},m:function(n,t){Y(n,e,t)},p:R,d:function(n){n&&V(e)}}}function gu(n){var e,t,r=n[2]("Admin email")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){4&e&&r!==(r=n[2]("Admin email")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function $u(n){var e,t,r=n[2]("This email can be used by users to get in touch with the Convos admin.")+"";return{c:function(){e=Z("p"),t=Q(r),rn(e,"class","help"),rn(e,"slot","help")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){4&e&&r!==(r=n[2]("This email can be used by users to get in touch with the Convos admin.")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function yu(n){var e;return{c:function(){e=X()},m:function(n,t){Y(n,e,t)},p:R,d:function(n){n&&V(e)}}}function bu(n){var e,t,r=n[2]("Default connection URL")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){4&e&&r!==(r=n[2]("Default connection URL")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function wu(n){var e,t,r,o,i=n[2]("This is the default connection new users will connect to.")+"",a=n[2]('The path part is the default channel to join. "%%23convos" means "#convos".')+"";return{c:function(){e=Z("p"),t=Q(i),r=X(),o=Q(a),rn(e,"class","help"),rn(e,"slot","help")},m:function(n,i){Y(n,e,i),G(e,t),G(e,r),G(e,o)},p:function(n,e){4&e&&i!==(i=n[2]("This is the default connection new users will connect to.")+"")&&an(t,i),4&e&&a!==(a=n[2]('The path part is the default channel to join. "%%23convos" means "#convos".')+"")&&an(o,a)},d:function(n){n&&V(e)}}}function _u(n){var e;return{c:function(){e=X()},m:function(n,t){Y(n,e,t)},p:R,d:function(n){n&&V(e)}}}function ku(n){var e,t,r=n[2]("Force default connection")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){4&e&&r!==(r=n[2]("Force default connection")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function xu(n){var e,t,r=n[2]("Registration is open to public")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){4&e&&r!==(r=n[2]("Registration is open to public")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Eu(n){var e,t,r=n[2]("Video service")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){4&e&&r!==(r=n[2]("Video service")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Ou(n){var e,t,r=n[2]("This should point to a %1 instance.","https://meet.jit.si/")+"";return{c:function(){e=Z("p"),t=Q(r),rn(e,"class","help"),rn(e,"slot","help")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){4&e&&r!==(r=n[2]("This should point to a %1 instance.","https://meet.jit.si/")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Su(n){var e;return{c:function(){e=X()},m:function(n,t){Y(n,e,t)},p:R,d:function(n){n&&V(e)}}}function Cu(n){var e,t,r=n[2]("Save settings")+"";return{c:function(){e=Z("span"),t=Q(r)},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){4&e&&r!==(r=n[2]("Save settings")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Ru(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,$,y,b,w,_,k,x,E,O,S,C=n[2]("Disk usage")+"",R=n[1].blocks_pct+"",N=n[2]("Disk usage")+"",A=n[1].blocks_used+"",D=n[1].blocks_total+"",M=n[1].inodes_pct+"",j=n[2]("Inode usage")+"",T=n[1].inodes_used+"",P=n[1].inodes_total+"";return{c:function(){e=Z("div"),t=Z("h2"),r=Q(C),o=X(),i=Z("div"),a=Z("div"),c=Q(R),u=Q("%"),s=X(),f=Z("p"),l=Q(N),d=Q(": "),p=Q(A),h=Q(" / "),m=Q(D),v=X(),g=Z("div"),$=Z("div"),y=Q(M),b=Q("%"),w=X(),_=Z("p"),k=Q(j),x=Q(": "),E=Q(T),O=Q(" / "),S=Q(P),rn(a,"class","progress__bar"),un(a,"width",n[1].blocks_pct+"%"),rn(i,"class","progress"),rn(f,"class","help"),rn($,"class","progress__bar"),un($,"width",n[1].inodes_pct+"%"),rn(g,"class","progress"),rn(_,"class","help"),rn(e,"id","disk-usage")},m:function(n,C){Y(n,e,C),G(e,t),G(t,r),G(e,o),G(e,i),G(i,a),G(a,c),G(a,u),G(e,s),G(e,f),G(f,l),G(f,d),G(f,p),G(f,h),G(f,m),G(e,v),G(e,g),G(g,$),G($,y),G($,b),G(e,w),G(e,_),G(_,k),G(_,x),G(_,E),G(_,O),G(_,S)},p:function(n,e){4&e&&C!==(C=n[2]("Disk usage")+"")&&an(r,C),2&e&&R!==(R=n[1].blocks_pct+"")&&an(c,R),2&e&&un(a,"width",n[1].blocks_pct+"%"),4&e&&N!==(N=n[2]("Disk usage")+"")&&an(l,N),2&e&&A!==(A=n[1].blocks_used+"")&&an(p,A),2&e&&D!==(D=n[1].blocks_total+"")&&an(m,D),2&e&&M!==(M=n[1].inodes_pct+"")&&an(y,M),2&e&&un($,"width",n[1].inodes_pct+"%"),4&e&&j!==(j=n[2]("Inode usage")+"")&&an(k,j),2&e&&T!==(T=n[1].inodes_used+"")&&an(E,T),2&e&&P!==(P=n[1].inodes_total+"")&&an(S,P)},d:function(n){n&&V(e)}}}function Nu(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,g,$,y,b,w,_,k,x,E,O,S,C,R,N,A,D,M=n[2]("Convos settings")+"",j=n[3]("These settings control what users experience when they visit [%1](%1).",ye("base_url"))+"",T=n[2]("Tick this box if you want to prevent users from creating custom connections.")+"",P=n[2]("Tick this box if you want users to be able to register without an invite URL.")+"",L=new Sr({props:{$$slots:{default:[fu]},$$scope:{ctx:n}}});function I(e){n[9].call(null,e)}var U={name:"organization_name",placeholder:n[2]("Nordaaker"),$$slots:{default:[pu],help:[du],label:[lu]},$$scope:{ctx:n}};void 0!==n[0].organization_name&&(U.value=n[0].organization_name);var B=new Bi({props:U});function z(e){n[10].call(null,e)}On.push((function(){return Vn(B,"value",I)}));var H={name:"organization_url",placeholder:n[2]("https://convos.chat"),$$slots:{default:[vu],help:[mu],label:[hu]},$$scope:{ctx:n}};void 0!==n[0].organization_url&&(H.value=n[0].organization_url);var q=new Bi({props:H});function F(e){n[11].call(null,e)}On.push((function(){return Vn(q,"value",z)}));var K={name:"contact",placeholder:n[2]("Ex: jhthorsen@cpan.org"),$$slots:{default:[yu],help:[$u],label:[gu]},$$scope:{ctx:n}};void 0!==n[0].contact&&(K.value=n[0].contact);var W=new Bi({props:K});function J(e){n[12].call(null,e)}On.push((function(){return Vn(W,"value",F)}));var nn={name:"default_connection",placeholder:n[2]("irc://chat.freenode.net:6697/%%23convos"),$$slots:{default:[_u],help:[wu],label:[bu]},$$scope:{ctx:n}};void 0!==n[0].default_connection&&(nn.value=n[0].default_connection);var on=new Bi({props:nn});On.push((function(){return Vn(on,"value",J)}));var cn=new di({props:{name:"forced_connection",checked:n[0].forced_connection,$$slots:{label:[ku]},$$scope:{ctx:n}}}),un=new di({props:{name:"open_to_public",checked:n[0].open_to_public,$$slots:{label:[xu]},$$scope:{ctx:n}}});function sn(e){n[13].call(null,e)}var fn={name:"video_service",placeholder:n[2]("Ex: https://meet.jit.si/"),$$slots:{default:[Su],help:[Ou],label:[Eu]},$$scope:{ctx:n}};void 0!==n[0].video_service&&(fn.value=n[0].video_service);var ln=new Bi({props:fn});On.push((function(){return Vn(ln,"value",sn)}));var dn=new $r({props:{icon:"save",op:n[4],$$slots:{default:[Cu]},$$scope:{ctx:n}}}),pn=new $i({props:{op:n[4]}}),hn=n[1]&&Ru(n);return{c:function(){Jn(L.$$.fragment),e=X(),t=Z("main"),r=Z("form"),o=Z("h2"),i=Q(M),a=X(),c=Z("p"),u=X(),Jn(B.$$.fragment),f=X(),Jn(q.$$.fragment),d=X(),Jn(W.$$.fragment),h=X(),Jn(on.$$.fragment),g=X(),Jn(cn.$$.fragment),$=X(),y=Z("p"),b=Q(T),w=X(),Jn(un.$$.fragment),_=X(),k=Z("p"),x=Q(P),E=X(),Jn(ln.$$.fragment),S=X(),C=Z("div"),Jn(dn.$$.fragment),R=X(),Jn(pn.$$.fragment),N=X(),hn&&hn.c(),rn(y,"class","help"),rn(k,"class","help"),rn(C,"class","form-actions"),rn(r,"id","convos-settings"),rn(r,"method","post"),rn(t,"class","main")},m:function(s,l,p){Zn(L,s,l),Y(s,e,l),Y(s,t,l),G(t,r),G(r,o),G(o,i),G(r,a),G(r,c),c.innerHTML=j,G(r,u),Zn(B,r,null),G(r,f),Zn(q,r,null),G(r,d),Zn(W,r,null),G(r,h),Zn(on,r,null),G(r,g),Zn(cn,r,null),G(r,$),G(r,y),G(y,b),G(r,w),Zn(un,r,null),G(r,_),G(r,k),G(k,x),G(r,E),Zn(ln,r,null),G(r,S),G(r,C),Zn(dn,C,null),G(r,R),Zn(pn,r,null),G(t,N),hn&&hn.m(t,null),A=!0,p&&D(),D=en(r,"submit",tn(n[5]))},p:function(n,e){var r=v(e,1)[0],o={};16388&r&&(o.$$scope={dirty:r,ctx:n}),L.$set(o),(!A||4&r)&&M!==(M=n[2]("Convos settings")+"")&&an(i,M),(!A||8&r)&&j!==(j=n[3]("These settings control what users experience when they visit [%1](%1).",ye("base_url"))+"")&&(c.innerHTML=j);var a={};4&r&&(a.placeholder=n[2]("Nordaaker")),16388&r&&(a.$$scope={dirty:r,ctx:n}),!s&&1&r&&(s=!0,a.value=n[0].organization_name,Dn((function(){return s=!1}))),B.$set(a);var u={};4&r&&(u.placeholder=n[2]("https://convos.chat")),16388&r&&(u.$$scope={dirty:r,ctx:n}),!l&&1&r&&(l=!0,u.value=n[0].organization_url,Dn((function(){return l=!1}))),q.$set(u);var f={};4&r&&(f.placeholder=n[2]("Ex: jhthorsen@cpan.org")),16388&r&&(f.$$scope={dirty:r,ctx:n}),!p&&1&r&&(p=!0,f.value=n[0].contact,Dn((function(){return p=!1}))),W.$set(f);var d={};4&r&&(d.placeholder=n[2]("irc://chat.freenode.net:6697/%%23convos")),16388&r&&(d.$$scope={dirty:r,ctx:n}),!m&&1&r&&(m=!0,d.value=n[0].default_connection,Dn((function(){return m=!1}))),on.$set(d);var h={};1&r&&(h.checked=n[0].forced_connection),16388&r&&(h.$$scope={dirty:r,ctx:n}),cn.$set(h),(!A||4&r)&&T!==(T=n[2]("Tick this box if you want to prevent users from creating custom connections.")+"")&&an(b,T);var g={};1&r&&(g.checked=n[0].open_to_public),16388&r&&(g.$$scope={dirty:r,ctx:n}),un.$set(g),(!A||4&r)&&P!==(P=n[2]("Tick this box if you want users to be able to register without an invite URL.")+"")&&an(x,P);var $={};4&r&&($.placeholder=n[2]("Ex: https://meet.jit.si/")),16388&r&&($.$$scope={dirty:r,ctx:n}),!O&&1&r&&(O=!0,$.value=n[0].video_service,Dn((function(){return O=!1}))),ln.$set($);var y={};16388&r&&(y.$$scope={dirty:r,ctx:n}),dn.$set(y),n[1]?hn?hn.p(n,r):((hn=Ru(n)).c(),hn.m(t,null)):hn&&(hn.d(1),hn=null)},i:function(n){A||(qn(L.$$.fragment,n),qn(B.$$.fragment,n),qn(q.$$.fragment,n),qn(W.$$.fragment,n),qn(on.$$.fragment,n),qn(cn.$$.fragment,n),qn(un.$$.fragment,n),qn(ln.$$.fragment,n),qn(dn.$$.fragment,n),qn(pn.$$.fragment,n),A=!0)},o:function(n){Fn(L.$$.fragment,n),Fn(B.$$.fragment,n),Fn(q.$$.fragment,n),Fn(W.$$.fragment,n),Fn(on.$$.fragment,n),Fn(cn.$$.fragment,n),Fn(un.$$.fragment,n),Fn(ln.$$.fragment,n),Fn(dn.$$.fragment,n),Fn(pn.$$.fragment,n),A=!1},d:function(n){Qn(L,n),n&&V(e),n&&V(t),Qn(B),Qn(q),Qn(W),Qn(on),Qn(cn),Qn(un),Qn(ln),Qn(dn),Qn(pn),hn&&hn.d(),D()}}}function Au(n,e,r){var o,i;L(n,wt,(function(n){return r(2,o=n)})),L(n,_t,(function(n){return r(3,i=n)}));var a,c=kn("api"),u=kn("user"),s=c("getSettings"),l=c("updateSettings"),d={};return l.on("start",(function(n){n.body.contact&&(n.body.contact="mailto:"+n.body.contact),n.body.forced_connection=!!n.body.forced_connection,n.body.open_to_public=!!n.body.open_to_public,ye("contact",n.body.contact),ye("open_to_public",n.body.open_to_public),ye("organization_name",n.body.organization_name),ye("organization_url",n.body.organization_url),u.update({default_connection:n.body.default_connection,forced_connection:n.body.forced_connection,videoService:n.body.video_service})})),ot.update({title:"Global settings"}),bn(f(t.mark((function n(){var e;return t.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.perform();case 2:(e=s.res.body).contact=e.contact.replace(/mailto:/,""),r(0,d=e);case 5:case"end":return n.stop()}}),n)})))),n.$$.update=function(){1&n.$$.dirty&&r(1,a=function(n){if(!n)return null;var e=n.block_size||1024;return{blocks_pct:Math.ceil(n.blocks_used/n.blocks_total*100),blocks_total:le(e*n.blocks_total,"B"),blocks_used:le(e*n.blocks_used,"B"),inodes_pct:Math.ceil(n.inodes_used/n.inodes_total*100),inodes_total:le(n.inodes_total),inodes_used:le(n.inodes_used)}}(d.disk_usage))},[d,a,o,i,l,function(n){l.perform(n.target)},c,u,s,function(n){d.organization_name=n,r(0,d)},function(n){d.organization_url=n,r(0,d)},function(n){d.contact=n,r(0,d)},function(n){d.default_connection=n,r(0,d)},function(n){d.video_service=n,r(0,d)}]}var Du=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(su()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,Au,Nu,T,{}),e}return c}(ee);function Mu(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function ju(n,e,t){var r=n.slice();return r[14]=e[t],r}function Tu(n){var e,t=new hr({props:{name:"list"}}),r=new hr({props:{name:"times"}});return{c:function(){Jn(t.$$.fragment),Jn(r.$$.fragment)},m:function(n,o){Zn(t,n,o),Zn(r,n,o),e=!0},p:R,i:function(n){e||(qn(t.$$.fragment,n),qn(r.$$.fragment,n),e=!0)},o:function(n){Fn(t.$$.fragment,n),Fn(r.$$.fragment,n),e=!1},d:function(n){Qn(t,n),Qn(r,n)}}}function Pu(n){var e,t,r,o,i=n[4](n[2]?"Account":"Users")+"",a=new qr({props:{href:"/settings/users",class:"btn can-toggle "+(n[2]?"is-toggled":""),"data-tooltip":n[4]("See all users"),$$slots:{default:[Tu]},$$scope:{ctx:n}}});return{c:function(){e=Z("h1"),t=Q(i),r=X(),Jn(a.$$.fragment)},m:function(n,i){Y(n,e,i),G(e,t),Y(n,r,i),Zn(a,n,i),o=!0},p:function(n,e){(!o||20&e)&&i!==(i=n[4](n[2]?"Account":"Users")+"")&&an(t,i);var r={};4&e&&(r.class="btn can-toggle "+(n[2]?"is-toggled":"")),16&e&&(r["data-tooltip"]=n[4]("See all users")),4194304&e&&(r.$$scope={dirty:e,ctx:n}),a.$set(r)},i:function(n){o||(qn(a.$$.fragment,n),o=!0)},o:function(n){Fn(a.$$.fragment,n),o=!1},d:function(n){n&&V(e),n&&V(r),Qn(a,n)}}}function Lu(n){for(var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,$,y,b,w,_,k,x,E,O,S,C,R,N,A,D,M,j=n[4]("Invite or recover password")+"",T=n[4]("Users")+"",P=n[1].length+"",L=n[4]("Email")+"",I=n[4]("Roles")+"",U=n[4]("Registered")+"",B=new Bi({props:{type:"email",name:"email",placeholder:n[4]("user@example.com"),$$slots:{default:[zu],help:[Bu],label:[Uu]},$$scope:{ctx:n}}}),z=n[3].url&&Hu(n),H=new $r({props:{icon:"save",op:n[8],$$slots:{default:[qu]},$$scope:{ctx:n}}}),q=new $i({props:{op:n[8]}}),F=new $i({props:{op:n[7],progress:!0}}),K=n[1],W=[],nn=0;nn<K.length;nn+=1)W[nn]=Fu(ju(n,K,nn));return{c:function(){e=Z("form"),t=Z("h2"),r=Q(j),o=X(),Jn(B.$$.fragment),i=X(),z&&z.c(),a=X(),c=Z("div"),Jn(H.$$.fragment),u=X(),Jn(q.$$.fragment),s=X(),f=Z("h2"),l=Q(T),d=X(),p=Z("small"),h=Q("("),m=Q(P),v=Q(")"),g=X(),Jn(F.$$.fragment),$=X(),y=Z("table"),b=Z("thead"),w=Z("tr"),_=Z("th"),k=Q(L),x=X(),E=Z("th"),O=Q(I),S=X(),C=Z("th"),R=Q(U),N=X(),A=Z("tbody");for(var n=0;n<W.length;n+=1)W[n].c();rn(c,"class","form-actions"),rn(e,"id","invite"),rn(e,"method","post")},m:function(j,T,P){Y(j,e,T),G(e,t),G(t,r),G(e,o),Zn(B,e,null),G(e,i),z&&z.m(e,null),G(e,a),G(e,c),Zn(H,c,null),G(e,u),Zn(q,e,null),Y(j,s,T),Y(j,f,T),G(f,l),G(f,d),G(f,p),G(p,h),G(p,m),G(p,v),Y(j,g,T),Zn(F,j,T),Y(j,$,T),Y(j,y,T),G(y,b),G(b,w),G(w,_),G(_,k),G(w,x),G(w,E),G(E,O),G(w,S),G(w,C),G(C,R),G(y,N),G(y,A);for(var L=0;L<W.length;L+=1)W[L].m(A,null);D=!0,P&&M(),M=en(e,"submit",tn(n[12]))},p:function(n,t){(!D||16&t)&&j!==(j=n[4]("Invite or recover password")+"")&&an(r,j);var o={};16&t&&(o.placeholder=n[4]("user@example.com")),4194320&t&&(o.$$scope={dirty:t,ctx:n}),B.$set(o),n[3].url?z?z.p(n,t):((z=Hu(n)).c(),z.m(e,a)):z&&(z.d(1),z=null);var i={};if(4194320&t&&(i.$$scope={dirty:t,ctx:n}),H.$set(i),(!D||16&t)&&T!==(T=n[4]("Users")+"")&&an(l,T),(!D||2&t)&&P!==(P=n[1].length+"")&&an(m,P),(!D||16&t)&&L!==(L=n[4]("Email")+"")&&an(k,L),(!D||16&t)&&I!==(I=n[4]("Roles")+"")&&an(O,I),(!D||16&t)&&U!==(U=n[4]("Registered")+"")&&an(R,U),2&t){var c;for(K=n[1],c=0;c<K.length;c+=1){var u=ju(n,K,c);W[c]?W[c].p(u,t):(W[c]=Fu(u),W[c].c(),W[c].m(A,null))}for(;c<W.length;c+=1)W[c].d(1);W.length=K.length}},i:function(n){D||(qn(B.$$.fragment,n),qn(H.$$.fragment,n),qn(q.$$.fragment,n),qn(F.$$.fragment,n),D=!0)},o:function(n){Fn(B.$$.fragment,n),Fn(H.$$.fragment,n),Fn(q.$$.fragment,n),Fn(F.$$.fragment,n),D=!1},d:function(n){n&&V(e),Qn(B),z&&z.d(),Qn(H),Qn(q),n&&V(s),n&&V(f),n&&V(g),Qn(F,n),n&&V($),n&&V(y),J(W,n),M()}}}function Iu(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,$,y,b,w=n[4]("This will permanently remove user settings, chat logs, uploaded files and other user related data.")+"",_=n[5]("Please confirm by entering **%1** before hitting **%2**.",n[2].email,n[4]("Delete user"))+"",k=new Bi({props:{name:"email",value:n[2].email,readonly:!0,$$slots:{label:[Ku]},$$scope:{ctx:n}}}),x=new Bi({props:{name:"roles",value:n[2].roles.join(", "),placeholder:n[4]("admin, bot, ..."),$$slots:{default:[Yu],help:[Gu],label:[Wu]},$$scope:{ctx:n}}}),E=new $r({props:{icon:"save",op:n[9],$$slots:{default:[Vu]},$$scope:{ctx:n}}}),O=new $i({props:{op:n[9]}});function S(e){n[19].call(null,e)}var C={name:"email",$$slots:{label:[Ju]},$$scope:{ctx:n}};void 0!==n[0]&&(C.value=n[0]);var R=new Bi({props:C});On.push((function(){return Vn(R,"value",S)}));var N=new $r({props:{icon:"trash",op:n[6],disabled:n[0]!=n[2].email,$$slots:{default:[Zu]},$$scope:{ctx:n}}}),A=new $i({props:{op:n[6]}});return{c:function(){e=Z("form"),Jn(k.$$.fragment),t=X(),Jn(x.$$.fragment),r=X(),o=Z("div"),Jn(E.$$.fragment),i=X(),Jn(O.$$.fragment),a=X(),(c=Z("h2")).textContent="Delete account",u=X(),s=Z("form"),f=Z("p"),l=Q(w),d=X(),h=X(),Jn(R.$$.fragment),v=X(),g=Z("div"),Jn(N.$$.fragment),$=X(),Jn(A.$$.fragment),rn(o,"class","form-actions"),rn(e,"id","edit"),rn(e,"method","post"),p=new dn(_,null),rn(g,"class","form-actions"),rn(s,"id","delete"),rn(s,"method","post")},m:function(m,w,_){Y(m,e,w),Zn(k,e,null),G(e,t),Zn(x,e,null),G(e,r),G(e,o),Zn(E,o,null),G(e,i),Zn(O,e,null),Y(m,a,w),Y(m,c,w),Y(m,u,w),Y(m,s,w),G(s,f),G(f,l),G(f,d),p.m(f),G(s,h),Zn(R,s,null),G(s,v),G(s,g),Zn(N,g,null),G(s,$),Zn(A,s,null),y=!0,_&&M(b),b=[en(e,"submit",tn(n[13])),en(s,"submit",tn(n[11]))]},p:function(n,e){var t={};4&e&&(t.value=n[2].email),4194320&e&&(t.$$scope={dirty:e,ctx:n}),k.$set(t);var r={};4&e&&(r.value=n[2].roles.join(", ")),16&e&&(r.placeholder=n[4]("admin, bot, ...")),4194320&e&&(r.$$scope={dirty:e,ctx:n}),x.$set(r);var o={};4194320&e&&(o.$$scope={dirty:e,ctx:n}),E.$set(o),(!y||16&e)&&w!==(w=n[4]("This will permanently remove user settings, chat logs, uploaded files and other user related data.")+"")&&an(l,w),(!y||52&e)&&_!==(_=n[5]("Please confirm by entering **%1** before hitting **%2**.",n[2].email,n[4]("Delete user"))+"")&&p.p(_);var i={};4194320&e&&(i.$$scope={dirty:e,ctx:n}),!m&&1&e&&(m=!0,i.value=n[0],Dn((function(){return m=!1}))),R.$set(i);var a={};5&e&&(a.disabled=n[0]!=n[2].email),4194320&e&&(a.$$scope={dirty:e,ctx:n}),N.$set(a)},i:function(n){y||(qn(k.$$.fragment,n),qn(x.$$.fragment,n),qn(E.$$.fragment,n),qn(O.$$.fragment,n),qn(R.$$.fragment,n),qn(N.$$.fragment,n),qn(A.$$.fragment,n),y=!0)},o:function(n){Fn(k.$$.fragment,n),Fn(x.$$.fragment,n),Fn(E.$$.fragment,n),Fn(O.$$.fragment,n),Fn(R.$$.fragment,n),Fn(N.$$.fragment,n),Fn(A.$$.fragment,n),y=!1},d:function(n){n&&V(e),Qn(k),Qn(x),Qn(E),Qn(O),n&&V(a),n&&V(c),n&&V(u),n&&V(s),Qn(R),Qn(N),Qn(A),M(b)}}}function Uu(n){var e,t,r=n[4]("User email")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){16&e&&r!==(r=n[4]("User email")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Bu(n){var e,t,r=n[4]("Using this form, you can generate a forgotten password or invite link for a user.")+"";return{c:function(){e=Z("p"),t=Q(r),rn(e,"class","help"),rn(e,"slot","help")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){16&e&&r!==(r=n[4]("Using this form, you can generate a forgotten password or invite link for a user.")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function zu(n){var e;return{c:function(){e=X()},m:function(n,t){Y(n,e,t)},p:R,d:function(n){n&&V(e)}}}function Hu(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g=n[4]("A link was generated")+"",$=n[5](n[3].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"",y=n[5]("The link is valid until **%1**.",new Date(n[3].expires).toLocaleString())+"",b=n[3].url+"",w=n[4]("Tip: Clicking on the link will copy it to your clipboard.")+"";return{c:function(){e=Z("h3"),t=Q(g),r=X(),o=Z("p"),a=X(),u=X(),s=Z("a"),f=Q(b),d=X(),p=Z("p"),h=Z("small"),m=Q(w),i=new dn($,a),c=new dn(y,null),rn(s,"href",l=n[3].url)},m:function(l,g,$){Y(l,e,g),G(e,t),Y(l,r,g),Y(l,o,g),i.m(o),G(o,a),c.m(o),Y(l,u,g),Y(l,s,g),G(s,f),Y(l,d,g),Y(l,p,g),G(p,h),G(h,m),$&&v(),v=en(s,"click",tn(n[10]))},p:function(n,e){16&e&&g!==(g=n[4]("A link was generated")+"")&&an(t,g),40&e&&$!==($=n[5](n[3].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"")&&i.p($),40&e&&y!==(y=n[5]("The link is valid until **%1**.",new Date(n[3].expires).toLocaleString())+"")&&c.p(y),8&e&&b!==(b=n[3].url+"")&&an(f,b),8&e&&l!==(l=n[3].url)&&rn(s,"href",l),16&e&&w!==(w=n[4]("Tip: Clicking on the link will copy it to your clipboard.")+"")&&an(m,w)},d:function(n){n&&V(e),n&&V(r),n&&V(o),n&&V(u),n&&V(s),n&&V(d),n&&V(p),v()}}}function qu(n){var e,t,r=n[4]("Generate link")+"";return{c:function(){e=Z("span"),t=Q(r)},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){16&e&&r!==(r=n[4]("Generate link")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Fu(n){var e,t,r,o,i,a,c,u,s,f,l,d,p=n[14].email+"",h=n[14].roles.join(", ")+"",m=new Pe(n[14].registered).getHumanDate({year:!0})+"";return{c:function(){e=Z("tr"),t=Z("td"),r=Z("a"),o=Q(p),a=X(),c=Z("td"),u=Q(h),s=X(),f=Z("td"),l=Q(m),d=X(),rn(r,"href",i="#"+n[14].uid)},m:function(n,i){Y(n,e,i),G(e,t),G(t,r),G(r,o),G(e,a),G(e,c),G(c,u),G(e,s),G(e,f),G(f,l),G(e,d)},p:function(n,e){2&e&&p!==(p=n[14].email+"")&&an(o,p),2&e&&i!==(i="#"+n[14].uid)&&rn(r,"href",i),2&e&&h!==(h=n[14].roles.join(", ")+"")&&an(u,h),2&e&&m!==(m=new Pe(n[14].registered).getHumanDate({year:!0})+"")&&an(l,m)},d:function(n){n&&V(e)}}}function Ku(n){var e,t,r=n[4]("Email")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){16&e&&r!==(r=n[4]("Email")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Wu(n){var e,t,r=n[4]("Roles")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){16&e&&r!==(r=n[4]("Roles")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Gu(n){var e,t,r=n[4]("Roles must be separated by comma.")+"";return{c:function(){e=Z("p"),t=Q(r),rn(e,"class","help"),rn(e,"slot","help")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){16&e&&r!==(r=n[4]("Roles must be separated by comma.")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Yu(n){var e;return{c:function(){e=X()},m:function(n,t){Y(n,e,t)},p:R,d:function(n){n&&V(e)}}}function Vu(n){var e,t,r=n[4]("Save user")+"";return{c:function(){e=Z("span"),t=Q(r)},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){16&e&&r!==(r=n[4]("Save user")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Ju(n){var e,t,r=n[4]("Confirm email")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){16&e&&r!==(r=n[4]("Confirm email")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Zu(n){var e,t,r=n[4]("Delete user")+"";return{c:function(){e=Z("span"),t=Q(r)},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){16&e&&r!==(r=n[4]("Delete user")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Qu(n){var e,t,r,o,i,a=new Sr({props:{$$slots:{default:[Pu]},$$scope:{ctx:n}}}),c=[Iu,Lu],u=[];function s(n,e){return n[2]?0:1}return r=s(n),o=u[r]=c[r](n),{c:function(){Jn(a.$$.fragment),e=X(),t=Z("main"),o.c(),rn(t,"class","main")},m:function(n,o){Zn(a,n,o),Y(n,e,o),Y(n,t,o),u[r].m(t,null),i=!0},p:function(n,e){var i=v(e,1)[0],f={};4194324&i&&(f.$$scope={dirty:i,ctx:n}),a.$set(f);var l=r;(r=s(n))===l?u[r].p(n,i):(zn(),Fn(u[l],1,1,(function(){u[l]=null})),Hn(),(o=u[r])||(o=u[r]=c[r](n)).c(),qn(o,1),o.m(t,null))},i:function(n){i||(qn(a.$$.fragment,n),qn(o),i=!0)},o:function(n){Fn(a.$$.fragment,n),Fn(o),i=!1},d:function(n){Qn(a,n),n&&V(e),n&&V(t),u[r].d()}}}function Xu(n,e,r){var o,i,a,c;L(n,ot,(function(n){return r(15,o=n)})),L(n,wt,(function(n){return r(4,a=n)})),L(n,_t,(function(n){return r(5,c=n)}));var u=kn("api"),s=kn("user"),l=u("deleteUser"),d=u("getUsers"),p=u("inviteUser");L(n,p,(function(n){return r(16,i=n)}));var h,m,v=u("updateUser"),g="",$=[];function y(){return(y=f(t.mark((function n(e){return t.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.preventDefault(),l.reset(),v.reset(),g==h.email){n.next=5;break}return n.abrupt("return");case 5:return n.next=7,l.perform(e.target);case 7:if(l.is("success")){n.next=9;break}return n.abrupt("return");case 9:return n.next=11,d.perform();case 11:ot.go("/settings/users",{replace:!0});case 12:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function b(n,e){var t=n.hash;return r(0,g=""),e.filter((function(n){return n.uid==t}))[0]}return ot.update({title:"Users"}),v.on("start",(function(n){r(2,h.roles=n.body.roles.split(/[.,\s]+/).map((function(n){return n.trim()})),h),n.body.roles=h.roles})),bn(f(t.mark((function n(){return t.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.perform();case 2:r(1,$=d.res.body.users||[]);case 3:case"end":return n.stop()}}),n)})))),n.$$.update=function(){32770&n.$$.dirty&&r(2,h=b(o,$)),65536&n.$$.dirty&&r(3,m=i.res.body||{})},[g,$,h,m,a,c,l,d,p,v,function(n){var e=function(n){var e=document.createElement("textarea");e.value=n.textContent||n.value,e.style.opacity=0,e.style.position="absolute",document.body.appendChild(e);try{e.focus(),e.select(),document.execCommand("copy")}catch(n){e.value="",console.log("copyToClipboard() failed:",n)}return document.body.removeChild(e),e.value}(n.target);e&&Ot.showInApp(e,{title:a("Invite link copied")})},function(n){return y.apply(this,arguments)},function(n){p.perform(n.target)},function(n){l.reset(),v.perform(n.target)},s,o,i,u,b,function(n){r(0,g=n)}]}var ns=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(Mu()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,Xu,Qu,T,{}),e}return c}(ee);function es(n){return function(e){for(var t=document.querySelectorAll(".js-remove"),r=0;r<t.length;r++)t[r].remove();var o=-1==[Fa,kc].indexOf(n);e.update({component:n,requireLogin:o}),o&&e.update({lastUrl:location.href})}}function ts(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function rs(n){var e,t,r,o,i,a=n[1](n[0].conversation_id?"Conversation":"Connection")+"",c=new hr({props:{name:"times-circle"}});return{c:function(){e=Z("a"),t=Z("h2"),r=Q(a),o=X(),Jn(c.$$.fragment),rn(e,"href","#activeMenu:"),rn(e,"class","sidebar__header for-settings")},m:function(n,a){Y(n,e,a),G(e,t),G(t,r),G(e,o),Zn(c,e,null),i=!0},p:function(n,e){var t=v(e,1)[0];(!i||3&t)&&a!==(a=n[1](n[0].conversation_id?"Conversation":"Connection")+"")&&an(r,a)},i:function(n){i||(qn(c.$$.fragment,n),i=!0)},o:function(n){Fn(c.$$.fragment,n),i=!1},d:function(n){n&&V(e),Qn(c)}}}function os(n,e,t){var r;L(n,wt,(function(n){return t(1,r=n)}));var o=e.conversation,i=void 0===o?{}:o;return n.$set=function(n){"conversation"in n&&t(0,i=n.conversation)},[i,r]}var is=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(ts()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,os,rs,T,{conversation:0}),e}return c}(ee);function as(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function cs(n){var e,t,r=n[4]("Currently connecting to %1.",n[3])+"";return{c:function(){e=Z("p"),t=Q(r)},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){24&e&&r!==(r=n[4]("Currently connecting to %1.",n[3])+"")&&an(t,r)},d:function(n){n&&V(e)}}}function us(n){var e,t,r=n[4]("Currently connected to %1.",n[3])+"";return{c:function(){e=Z("p"),t=Q(r)},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){24&e&&r!==(r=n[4]("Currently connected to %1.",n[3])+"")&&an(t,r)},d:function(n){n&&V(e)}}}function ss(n){var e,t,r=n[4]("Currently disconnected from %1.",n[3])+"";return{c:function(){e=Z("p"),t=Q(r)},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){24&e&&r!==(r=n[4]("Currently disconnected from %1.",n[3])+"")&&an(t,r)},d:function(n){n&&V(e)}}}function fs(n){var e,t,r=n[4]("Connection not found.")+"";return{c:function(){e=Z("p"),t=Q(r)},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){16&e&&r!==(r=n[4]("Connection not found.")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function ls(n){var e,t,r,o,i,a=new is({props:{conversation:n[0]}});function c(n,e){return n[2].url?"disconnected"==n[2].state?ss:"connected"==n[2].state?us:cs:fs}var u=c(n),s=u(n),f=new ma({props:{conversation:n[0]}});return{c:function(){e=Z("div"),Jn(a.$$.fragment),t=X(),s.c(),r=X(),Jn(f.$$.fragment),rn(e,"class","sidebar-left")},m:function(n,o){Y(n,e,o),Zn(a,e,null),G(e,t),s.m(e,null),G(e,r),Zn(f,e,null),i=!0},p:function(n,t){var o=v(t,1)[0],i={};1&o&&(i.conversation=n[0]),a.$set(i),u===(u=c(n))&&s?s.p(n,o):(s.d(1),(s=u(n))&&(s.c(),s.m(e,r)));var l={};1&o&&(l.conversation=n[0]),f.$set(l)},i:function(t){i||(qn(a.$$.fragment,t),qn(f.$$.fragment,t),An((function(){o||(o=Wn(e,ir,n[1],!0)),o.run(1)})),i=!0)},o:function(t){Fn(a.$$.fragment,t),Fn(f.$$.fragment,t),o||(o=Wn(e,ir,n[1],!1)),o.run(0),i=!1},d:function(n){n&&V(e),Qn(a),s.d(),Qn(f),n&&o&&o.end()}}}function ds(n,e,r){var o;L(n,wt,(function(n){return r(4,o=n)}));var i,a=e.conversation,c=void 0===a?{}:a,u=e.transition,s=kn("user"),l={};return bn(f(t.mark((function n(){return t.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r(2,l=s.findConversation({connection_id:c.connection_id})||{});case 1:case"end":return n.stop()}}),n)})))),n.$set=function(n){"conversation"in n&&r(0,c=n.conversation),"transition"in n&&r(1,u=n.transition)},n.$$.update=function(){4&n.$$.dirty&&r(3,i=l.real_host||l.url&&l.url.host)},[c,u,l,i,o]}var ps=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(as()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,ds,ls,T,{conversation:0,transition:1}),e}return c}(ee);function hs(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function ms(n,e,t){var r=n.slice();return r[17]=e[t],r}function vs(n){var e,t=n[7]("You are not a channel operator in %1.",n[0].name)+"";return{c:function(){e=Q(t)},m:function(n,t){Y(n,e,t)},p:function(n,r){129&r&&t!==(t=n[7]("You are not a channel operator in %1.",n[0].name)+"")&&an(e,t)},d:function(n){n&&V(e)}}}function gs(n){var e,t=n[7]("You are channel operator in %1.",n[0].name)+"";return{c:function(){e=Q(t)},m:function(n,t){Y(n,e,t)},p:function(n,r){129&r&&t!==(t=n[7]("You are channel operator in %1.",n[0].name)+"")&&an(e,t)},d:function(n){n&&V(e)}}}function $s(n){var e,t=n[7]("Private conversation with %1.",n[0].name)+"";return{c:function(){e=Q(t)},m:function(n,t){Y(n,e,t)},p:function(n,r){129&r&&t!==(t=n[7]("Private conversation with %1.",n[0].name)+"")&&an(e,t)},d:function(n){n&&V(e)}}}function ys(n){var e,t=n[7]("Conversation with %1 is frozen. Reason: %2",n[0].name,n[7](n[0].frozen))+"";return{c:function(){e=Q(t)},m:function(n,t){Y(n,e,t)},p:function(n,r){129&r&&t!==(t=n[7]("Conversation with %1 is frozen. Reason: %2",n[0].name,n[7](n[0].frozen))+"")&&an(e,t)},d:function(n){n&&V(e)}}}function bs(n){var e,t,r,o,i,a,c,u,s,f,l,d=[_s,ws],p=[];function h(n,e){return n[6]?0:1}function m(e){n[14].call(null,e)}c=h(n),u=p[c]=d[c](n);var v={type:"password",name:"password",readonly:!n[0].is("locked")&&!n[6],$$slots:{label:[xs]},$$scope:{ctx:n}};void 0!==n[2]&&(v.value=n[2]);var g=new Bi({props:v});return On.push((function(){return Vn(g,"value",m)})),{c:function(){e=Z("input"),r=X(),o=Z("input"),a=X(),u.c(),s=X(),Jn(g.$$.fragment),rn(e,"type","hidden"),rn(e,"name","connection_id"),e.value=t=n[0].connection_id,rn(o,"type","hidden"),rn(o,"name","conversation_id"),o.value=i=n[0].conversation_id},m:function(n,t){Y(n,e,t),Y(n,r,t),Y(n,o,t),Y(n,a,t),p[c].m(n,t),Y(n,s,t),Zn(g,n,t),l=!0},p:function(n,r){(!l||1&r&&t!==(t=n[0].connection_id))&&(e.value=t),(!l||1&r&&i!==(i=n[0].conversation_id))&&(o.value=i);var a=c;(c=h(n))===a?p[c].p(n,r):(zn(),Fn(p[a],1,1,(function(){p[a]=null})),Hn(),(u=p[c])||(u=p[c]=d[c](n)).c(),qn(u,1),u.m(s.parentNode,s));var m={};65&r&&(m.readonly=!n[0].is("locked")&&!n[6]),1048704&r&&(m.$$scope={dirty:r,ctx:n}),!f&&4&r&&(f=!0,m.value=n[2],Dn((function(){return f=!1}))),g.$set(m)},i:function(n){l||(qn(u),qn(g.$$.fragment,n),l=!0)},o:function(n){Fn(u),Fn(g.$$.fragment,n),l=!1},d:function(n){n&&V(e),n&&V(r),n&&V(o),n&&V(a),p[c].d(n),n&&V(s),Qn(g,n)}}}function ws(n){var e,t,r,o,i,a=n[7]("Topic")+"",c=n[8](n[3]||"No topic is set.")+"";return{c:function(){e=Z("div"),t=Z("label"),r=Q(a),o=X(),rn(i=Z("div"),"class","input"),rn(e,"class","text-field")},m:function(n,a){Y(n,e,a),G(e,t),G(t,r),G(e,o),G(e,i),i.innerHTML=c},p:function(n,e){128&e&&a!==(a=n[7]("Topic")+"")&&an(r,a),264&e&&c!==(c=n[8](n[3]||"No topic is set.")+"")&&(i.innerHTML=c)},i:R,o:R,d:function(n){n&&V(e)}}}function _s(n){var e,t;function r(e){n[13].call(null,e)}var o={name:"topic",placeholder:n[7]("No topic is set."),$$slots:{label:[ks]},$$scope:{ctx:n}};void 0!==n[3]&&(o.value=n[3]);var i=new Di({props:o});return On.push((function(){return Vn(i,"value",r)})),{c:function(){Jn(i.$$.fragment)},m:function(n,e){Zn(i,n,e),t=!0},p:function(n,t){var r={};128&t&&(r.placeholder=n[7]("No topic is set.")),1048704&t&&(r.$$scope={dirty:t,ctx:n}),!e&&8&t&&(e=!0,r.value=n[3],Dn((function(){return e=!1}))),i.$set(r)},i:function(n){t||(qn(i.$$.fragment,n),t=!0)},o:function(n){Fn(i.$$.fragment,n),t=!1},d:function(n){Qn(i,n)}}}function ks(n){var e,t,r=n[7]("Topic")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){128&e&&r!==(r=n[7]("Topic")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function xs(n){var e,t,r=n[7]("Password")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){128&e&&r!==(r=n[7]("Password")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Es(n){var e,t;function r(e){n[15].call(null,e)}var o={$$slots:{label:[Os]},$$scope:{ctx:n}};void 0!==n[5]&&(o.checked=n[5]);var i=new di({props:o});return On.push((function(){return Vn(i,"checked",r)})),{c:function(){Jn(i.$$.fragment)},m:function(n,e){Zn(i,n,e),t=!0},p:function(n,t){var r={};1048704&t&&(r.$$scope={dirty:t,ctx:n}),!e&&32&t&&(e=!0,r.checked=n[5],Dn((function(){return e=!1}))),i.$set(r)},i:function(n){t||(qn(i.$$.fragment,n),t=!0)},o:function(n){Fn(i.$$.fragment,n),t=!1},d:function(n){Qn(i,n)}}}function Os(n){var e,t,r=n[7]("Notify me on new messages")+"";return{c:function(){e=Z("span"),t=Q(r),rn(e,"slot","label")},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){128&e&&r!==(r=n[7]("Notify me on new messages")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Ss(n){var e,t=new $r({props:{icon:"save",$$slots:{default:[Cs]},$$scope:{ctx:n}}});return{c:function(){Jn(t.$$.fragment)},m:function(n,r){Zn(t,n,r),e=!0},p:function(n,e){var r={};1048704&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(qn(t.$$.fragment,n),e=!0)},o:function(n){Fn(t.$$.fragment,n),e=!1},d:function(n){Qn(t,n)}}}function Cs(n){var e,t,r=n[7]("Update")+"";return{c:function(){e=Z("span"),t=Q(r)},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){128&e&&r!==(r=n[7]("Update")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Rs(n){var e,t,r=n[7]("Leave")+"";return{c:function(){e=Z("span"),t=Q(r)},m:function(n,r){Y(n,e,r),G(e,t)},p:function(n,e){128&e&&r!==(r=n[7]("Leave")+"")&&an(t,r)},d:function(n){n&&V(e)}}}function Ns(n){for(var e,t,r,o,i,a=n[7]("Participants (%1)",n[0].participants().length)+"",c=n[0].participants(),u=[],s=0;s<c.length;s+=1)u[s]=Ds(ms(n,c,s));var f=function(n){return Fn(u[n],1,1,(function(){u[n]=null}))};return{c:function(){e=Z("nav"),t=Z("h3"),r=Q(a),o=X();for(var n=0;n<u.length;n+=1)u[n].c();rn(e,"class","sidebar-left__nav")},m:function(n,a){Y(n,e,a),G(e,t),G(t,r),G(e,o);for(var c=0;c<u.length;c+=1)u[c].m(e,null);i=!0},p:function(n,t){if((!i||129&t)&&a!==(a=n[7]("Participants (%1)",n[0].participants().length)+"")&&an(r,a),1&t){var o;for(c=n[0].participants(),o=0;o<c.length;o+=1){var s=ms(n,c,o);u[o]?(u[o].p(s,t),qn(u[o],1)):(u[o]=Ds(s),u[o].c(),qn(u[o],1),u[o].m(e,null))}for(zn(),o=c.length;o<u.length;o+=1)f(o);Hn()}},i:function(n){if(!i){for(var e=0;e<c.length;e+=1)qn(u[e]);i=!0}},o:function(n){u=u.filter(Boolean);for(var e=0;e<u.length;e+=1)Fn(u[e]);i=!1},d:function(n){n&&V(e),J(u,n)}}}function As(n){var e,t,r,o=n[17].nick+"";return{c:function(){e=Z("span"),t=Q(o),r=X()},m:function(n,o){Y(n,e,o),G(e,t),Y(n,r,o)},p:function(n,e){1&e&&o!==(o=n[17].nick+"")&&an(t,o)},d:function(n){n&&V(e),n&&V(r)}}}function Ds(n){var e,t=new qr({props:{href:"/chat/"+n[0].connection_id+"/"+n[17].id,class:"participant "+he(n[17].modes),$$slots:{default:[As]},$$scope:{ctx:n}}});return{c:function(){Jn(t.$$.fragment)},m:function(n,r){Zn(t,n,r),e=!0},p:function(n,e){var r={};1&e&&(r.href="/chat/"+n[0].connection_id+"/"+n[17].id),1&e&&(r.class="participant "+he(n[17].modes)),1048577&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(qn(t.$$.fragment,n),e=!0)},o:function(n){Fn(t.$$.fragment,n),e=!1},d:function(n){Qn(t,n)}}}function Ms(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m=!n[0].is("private"),g=n[0].hasOwnProperty("wantNotifications"),$=!n[0].is("private"),y=new is({props:{conversation:n[0]}});function b(n,e){return n[0].frozen?ys:((null==o||1&e)&&(o=!!n[0].is("private")),o?$s:n[6]?gs:vs)}var w=b(n,-1),_=w(n),k=m&&bs(n),x=g&&Es(n),E=$&&Ss(n),O=new $r({props:{type:"button",icon:"sign-out-alt",$$slots:{default:[Rs]},$$scope:{ctx:n}}});O.$on("click",n[9]);var S=!n[0].frozen&&Ns(n);return{c:function(){e=Z("div"),Jn(y.$$.fragment),t=X(),r=Z("p"),_.c(),i=X(),a=Z("form"),k&&k.c(),c=X(),x&&x.c(),u=X(),s=Z("div"),E&&E.c(),f=X(),Jn(O.$$.fragment),l=X(),S&&S.c(),rn(s,"class","form-actions"),rn(a,"method","post"),rn(e,"class","sidebar-left")},m:function(o,d,m){Y(o,e,d),Zn(y,e,null),G(e,t),G(e,r),_.m(r,null),G(e,i),G(e,a),k&&k.m(a,null),G(a,c),x&&x.m(a,null),G(a,u),G(a,s),E&&E.m(s,null),G(s,f),Zn(O,s,null),n[16](a),G(e,l),S&&S.m(e,null),p=!0,m&&h(),h=en(a,"submit",tn(n[10]))},p:function(n,t){var o=v(t,1)[0],i={};1&o&&(i.conversation=n[0]),y.$set(i),w===(w=b(n,o))&&_?_.p(n,o):(_.d(1),(_=w(n))&&(_.c(),_.m(r,null))),1&o&&(m=!n[0].is("private")),m?k?(k.p(n,o),qn(k,1)):((k=bs(n)).c(),qn(k,1),k.m(a,c)):k&&(zn(),Fn(k,1,1,(function(){k=null})),Hn()),1&o&&(g=n[0].hasOwnProperty("wantNotifications")),g?x?(x.p(n,o),qn(x,1)):((x=Es(n)).c(),qn(x,1),x.m(a,u)):x&&(zn(),Fn(x,1,1,(function(){x=null})),Hn()),1&o&&($=!n[0].is("private")),$?E?(E.p(n,o),qn(E,1)):((E=Ss(n)).c(),qn(E,1),E.m(s,f)):E&&(zn(),Fn(E,1,1,(function(){E=null})),Hn());var l={};1048704&o&&(l.$$scope={dirty:o,ctx:n}),O.$set(l),n[0].frozen?S&&(zn(),Fn(S,1,1,(function(){S=null})),Hn()):S?(S.p(n,o),qn(S,1)):((S=Ns(n)).c(),qn(S,1),S.m(e,null))},i:function(t){p||(qn(y.$$.fragment,t),qn(k),qn(x),qn(E),qn(O.$$.fragment,t),qn(S),An((function(){d||(d=Wn(e,ir,n[1],!0)),d.run(1)})),p=!0)},o:function(t){Fn(y.$$.fragment,t),Fn(k),Fn(x),Fn(E),Fn(O.$$.fragment,t),Fn(S),d||(d=Wn(e,ir,n[1],!1)),d.run(0),p=!1},d:function(t){t&&V(e),Qn(y),_.d(),k&&k.d(),x&&x.d(),E&&E.d(),Qn(O),n[16](null),S&&S.d(),t&&d&&d.end(),h()}}}function js(n,e,t){var r,o;L(n,wt,(function(n){return t(7,r=n)})),L(n,_t,(function(n){return t(8,o=n)}));var i,a,c=e.conversation,u=e.transition,s=kn("user"),f="",l=c.topic,d=c.wantNotifications;function p(n){var e=s.findConversation({connection_id:n.connection_id}),t=n.findParticipant(e&&e.nick);return t&&t.modes.operator}return n.$set=function(n){"conversation"in n&&t(0,c=n.conversation),"transition"in n&&t(1,u=n.transition)},n.$$.update=function(){1&n.$$.dirty&&t(6,a=p(c)),33&n.$$.dirty&&c.update({wantNotifications:d}),17&n.$$.dirty&&i&&i.topic&&t(4,i.topic.value=c.topic||"",i)},[c,u,f,l,i,d,a,r,o,function(n){c.send("/part")},function(n){f&&(c.send(a?"/mode +k "+f:"/join "+c.name+" "+f),t(2,f="")),a&&l!=c.topic&&c.send("/topic "+l)},s,p,function(n){t(3,l=n)},function(n){t(2,f=n)},function(n){t(5,d=n)},function(n){On[n?"unshift":"push"]((function(){t(4,i=n)}))}]}var Ts=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(hs()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,js,Ms,T,{conversation:0,transition:1}),e}return c}(ee);function Ps(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Ls(n,e,t){var r=n.slice();return r[21]=e[t],r}function Is(n,e,t){var r=n.slice();return r[18]=e[t],r}function Us(n){var e,t,r,o,i,a=af(n[7],10)+"",c=new hr({props:{name:"bell"}});return{c:function(){Jn(c.$$.fragment),e=X(),t=Z("small"),r=Q(a),rn(t,"class","chat-header__unread"),t.hidden=o=!n[7].unread},m:function(n,o){Zn(c,n,o),Y(n,e,o),Y(n,t,o),G(t,r),i=!0},p:function(n,e){(!i||128&e)&&a!==(a=af(n[7],10)+"")&&an(r,a),(!i||128&e&&o!==(o=!n[7].unread))&&(t.hidden=o)},i:function(n){i||(qn(c.$$.fragment,n),i=!0)},o:function(n){Fn(c.$$.fragment,n),i=!1},d:function(n){Qn(c,n),n&&V(e),n&&V(t)}}}function Bs(n){var e,t=new qr({props:{href:"/settings/connection",$$slots:{default:[zs]},$$scope:{ctx:n}}});return{c:function(){Jn(t.$$.fragment)},m:function(n,r){Zn(t,n,r),e=!0},p:function(n,e){var r={};16777280&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(qn(t.$$.fragment,n),e=!0)},o:function(n){Fn(t.$$.fragment,n),e=!1},d:function(n){Qn(t,n)}}}function zs(n){var e,t,r,o,i=n[6]("No conversations")+"",a=new hr({props:{name:"exclamation-circle"}});return{c:function(){Jn(a.$$.fragment),e=X(),t=Z("span"),r=Q(i)},m:function(n,i){Zn(a,n,i),Y(n,e,i),Y(n,t,i),G(t,r),o=!0},p:function(n,e){(!o||64&e)&&i!==(i=n[6]("No conversations")+"")&&an(r,i)},i:function(n){o||(qn(a.$$.fragment,n),o=!0)},o:function(n){Fn(a.$$.fragment,n),o=!1},d:function(n){Qn(a,n),n&&V(e),n&&V(t)}}}function Hs(n){var e,t,r,o,i,a,c,u,s=(n[18].name||n[18].connection_id)+"",f=af(n[18])+"",l=new hr({props:{name:"network-wired"}});return{c:function(){Jn(l.$$.fragment),e=X(),t=Z("span"),r=Q(s),o=X(),i=Z("b"),a=Q(f),rn(i,"class","unread"),i.hidden=c=!n[18].unread},m:function(n,c){Zn(l,n,c),Y(n,e,c),Y(n,t,c),G(t,r),Y(n,o,c),Y(n,i,c),G(i,a),u=!0},p:function(n,e){(!u||16&e)&&s!==(s=(n[18].name||n[18].connection_id)+"")&&an(r,s),(!u||16&e)&&f!==(f=af(n[18])+"")&&an(a,f),(!u||16&e&&c!==(c=!n[18].unread))&&(i.hidden=c)},i:function(n){u||(qn(l.$$.fragment,n),u=!0)},o:function(n){Fn(l.$$.fragment,n),u=!1},d:function(n){Qn(l,n),n&&V(e),n&&V(t),n&&V(o),n&&V(i)}}}function qs(n){var e,t,r,o,i,a,c,u,s=n[21].name+"",f=af(n[21])+"",l=new hr({props:{name:n[21].is_private?"user":"user-friends"}});return{c:function(){Jn(l.$$.fragment),e=X(),t=Z("span"),r=Q(s),o=X(),i=Z("b"),a=Q(f),rn(i,"class","unread"),i.hidden=c=!n[21].unread},m:function(n,c){Zn(l,n,c),Y(n,e,c),Y(n,t,c),G(t,r),Y(n,o,c),Y(n,i,c),G(i,a),u=!0},p:function(n,e){var t={};16&e&&(t.name=n[21].is_private?"user":"user-friends"),l.$set(t),(!u||16&e)&&s!==(s=n[21].name+"")&&an(r,s),(!u||16&e)&&f!==(f=af(n[21])+"")&&an(a,f),(!u||16&e&&c!==(c=!n[21].unread))&&(i.hidden=c)},i:function(n){u||(qn(l.$$.fragment,n),u=!0)},o:function(n){Fn(l.$$.fragment,n),u=!1},d:function(n){Qn(l,n),n&&V(e),n&&V(t),n&&V(o),n&&V(i)}}}function Fs(n){var e,t=new qr({props:{href:n[21].path,class:rf(n[18],n[21]),$$slots:{default:[qs]},$$scope:{ctx:n}}});return{c:function(){Jn(t.$$.fragment)},m:function(n,r){Zn(t,n,r),e=!0},p:function(n,e){var r={};16&e&&(r.href=n[21].path),16&e&&(r.class=rf(n[18],n[21])),16777232&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(qn(t.$$.fragment,n),e=!0)},o:function(n){Fn(t.$$.fragment,n),e=!1},d:function(n){Qn(t,n)}}}function Ks(n){for(var e,t,r,o=new qr({props:{href:n[18].path,class:rf(n[18],n[18]),$$slots:{default:[Hs]},$$scope:{ctx:n}}}),i=n[18].conversations.toArray(),a=[],c=0;c<i.length;c+=1)a[c]=Fs(Ls(n,i,c));var u=function(n){return Fn(a[n],1,1,(function(){a[n]=null}))};return{c:function(){Jn(o.$$.fragment),e=X();for(var n=0;n<a.length;n+=1)a[n].c();t=nn()},m:function(n,i){Zn(o,n,i),Y(n,e,i);for(var c=0;c<a.length;c+=1)a[c].m(n,i);Y(n,t,i),r=!0},p:function(n,e){var r={};if(16&e&&(r.href=n[18].path),16&e&&(r.class=rf(n[18],n[18])),16777232&e&&(r.$$scope={dirty:e,ctx:n}),o.$set(r),16&e){var c;for(i=n[18].conversations.toArray(),c=0;c<i.length;c+=1){var s=Ls(n,i,c);a[c]?(a[c].p(s,e),qn(a[c],1)):(a[c]=Fs(s),a[c].c(),qn(a[c],1),a[c].m(t.parentNode,t))}for(zn(),c=i.length;c<a.length;c+=1)u(c);Hn()}},i:function(n){if(!r){qn(o.$$.fragment,n);for(var e=0;e<i.length;e+=1)qn(a[e]);r=!0}},o:function(n){Fn(o.$$.fragment,n),a=a.filter(Boolean);for(var e=0;e<a.length;e+=1)Fn(a[e]);r=!1},d:function(n){Qn(o,n),n&&V(e),J(a,n),n&&V(t)}}}function Ws(n){var e,t,r,o,i,a,c,u,s=n[6]("Notifications")+"",f=af(n[7])+"",l=new hr({props:{name:"bell"}});return{c:function(){Jn(l.$$.fragment),e=X(),t=Z("span"),r=Q(s),o=X(),i=Z("b"),a=Q(f),rn(i,"class","unread"),i.hidden=c=!n[7].unread},m:function(n,c){Zn(l,n,c),Y(n,e,c),Y(n,t,c),G(t,r),Y(n,o,c),Y(n,i,c),G(i,a),u=!0},p:function(n,e){(!u||64&e)&&s!==(s=n[6]("Notifications")+"")&&an(r,s),(!u||128&e)&&f!==(f=af(n[7])+"")&&an(a,f),(!u||128&e&&c!==(c=!n[7].unread))&&(i.hidden=c)},i:function(n){u||(qn(l.$$.fragment,n),u=!0)},o:function(n){Fn(l.$$.fragment,n),u=!1},d:function(n){Qn(l,n),n&&V(e),n&&V(t),n&&V(o),n&&V(i)}}}function Gs(n){var e,t,r,o,i=n[6]("Search")+"",a=new hr({props:{name:"search"}});return{c:function(){Jn(a.$$.fragment),e=X(),t=Z("span"),r=Q(i)},m:function(n,i){Zn(a,n,i),Y(n,e,i),Y(n,t,i),G(t,r),o=!0},p:function(n,e){(!o||64&e)&&i!==(i=n[6]("Search")+"")&&an(r,i)},i:function(n){o||(qn(a.$$.fragment,n),o=!0)},o:function(n){Fn(a.$$.fragment,n),o=!1},d:function(n){Qn(a,n),n&&V(e),n&&V(t)}}}function Ys(n){var e,t,r,o,i=n[6]("Add conversation")+"",a=new hr({props:{name:"comment"}});return{c:function(){Jn(a.$$.fragment),e=X(),t=Z("span"),r=Q(i)},m:function(n,i){Zn(a,n,i),Y(n,e,i),Y(n,t,i),G(t,r),o=!0},p:function(n,e){(!o||64&e)&&i!==(i=n[6]("Add conversation")+"")&&an(r,i)},i:function(n){o||(qn(a.$$.fragment,n),o=!0)},o:function(n){Fn(a.$$.fragment,n),o=!1},d:function(n){Qn(a,n),n&&V(e),n&&V(t)}}}function Vs(n){var e,t,r,o,i=n[6]("Add connection")+"",a=new hr({props:{name:"network-wired"}});return{c:function(){Jn(a.$$.fragment),e=X(),t=Z("span"),r=Q(i)},m:function(n,i){Zn(a,n,i),Y(n,e,i),Y(n,t,i),G(t,r),o=!0},p:function(n,e){(!o||64&e)&&i!==(i=n[6]("Add connection")+"")&&an(r,i)},i:function(n){o||(qn(a.$$.fragment,n),o=!0)},o:function(n){Fn(a.$$.fragment,n),o=!1},d:function(n){Qn(a,n),n&&V(e),n&&V(t)}}}function Js(n){var e,t,r,o,i=n[6]("Account")+"",a=new hr({props:{name:"user-cog"}});return{c:function(){Jn(a.$$.fragment),e=X(),t=Z("span"),r=Q(i)},m:function(n,i){Zn(a,n,i),Y(n,e,i),Y(n,t,i),G(t,r),o=!0},p:function(n,e){(!o||64&e)&&i!==(i=n[6]("Account")+"")&&an(r,i)},i:function(n){o||(qn(a.$$.fragment,n),o=!0)},o:function(n){Fn(a.$$.fragment,n),o=!1},d:function(n){Qn(a,n),n&&V(e),n&&V(t)}}}function Zs(n){var e,t,r,o,i=n[6]("Help")+"",a=new hr({props:{name:"question-circle"}});return{c:function(){Jn(a.$$.fragment),e=X(),t=Z("span"),r=Q(i)},m:function(n,i){Zn(a,n,i),Y(n,e,i),Y(n,t,i),G(t,r),o=!0},p:function(n,e){(!o||64&e)&&i!==(i=n[6]("Help")+"")&&an(r,i)},i:function(n){o||(qn(a.$$.fragment,n),o=!0)},o:function(n){Fn(a.$$.fragment,n),o=!1},d:function(n){Qn(a,n),n&&V(e),n&&V(t)}}}function Qs(n){var e,t,r=new qr({props:{href:"/settings",$$slots:{default:[Xs]},$$scope:{ctx:n}}}),o=new qr({props:{href:"/settings/users",$$slots:{default:[nf]},$$scope:{ctx:n}}});return{c:function(){Jn(r.$$.fragment),e=X(),Jn(o.$$.fragment)},m:function(n,i){Zn(r,n,i),Y(n,e,i),Zn(o,n,i),t=!0},p:function(n,e){var t={};16777280&e&&(t.$$scope={dirty:e,ctx:n}),r.$set(t);var i={};16777280&e&&(i.$$scope={dirty:e,ctx:n}),o.$set(i)},i:function(n){t||(qn(r.$$.fragment,n),qn(o.$$.fragment,n),t=!0)},o:function(n){Fn(r.$$.fragment,n),Fn(o.$$.fragment,n),t=!1},d:function(n){Qn(r,n),n&&V(e),Qn(o,n)}}}function Xs(n){var e,t,r,o,i=n[6]("Settings")+"",a=new hr({props:{name:"tools"}});return{c:function(){Jn(a.$$.fragment),e=X(),t=Z("span"),r=Q(i)},m:function(n,i){Zn(a,n,i),Y(n,e,i),Y(n,t,i),G(t,r),o=!0},p:function(n,e){(!o||64&e)&&i!==(i=n[6]("Settings")+"")&&an(r,i)},i:function(n){o||(qn(a.$$.fragment,n),o=!0)},o:function(n){Fn(a.$$.fragment,n),o=!1},d:function(n){Qn(a,n),n&&V(e),n&&V(t)}}}function nf(n){var e,t,r,o,i=n[6]("Users")+"",a=new hr({props:{name:"users"}});return{c:function(){Jn(a.$$.fragment),e=X(),t=Z("span"),r=Q(i)},m:function(n,i){Zn(a,n,i),Y(n,e,i),Y(n,t,i),G(t,r),o=!0},p:function(n,e){(!o||64&e)&&i!==(i=n[6]("Users")+"")&&an(r,i)},i:function(n){o||(qn(a.$$.fragment,n),o=!0)},o:function(n){Fn(a.$$.fragment,n),o=!1},d:function(n){Qn(a,n),n&&V(e),n&&V(t)}}}function ef(n){var e,t,r,o,i=n[6]('Search for "%1"',n[5])+"",a=new hr({props:{name:"search"}});return{c:function(){Jn(a.$$.fragment),e=X(),t=Z("span"),r=Q(i)},m:function(n,i){Zn(a,n,i),Y(n,e,i),Y(n,t,i),G(t,r),o=!0},p:function(n,e){(!o||96&e)&&i!==(i=n[6]('Search for "%1"',n[5])+"")&&an(r,i)},i:function(n){o||(qn(a.$$.fragment,n),o=!0)},o:function(n){Fn(a.$$.fragment,n),o=!1},d:function(n){Qn(a,n),n&&V(e),n&&V(t)}}}function tf(n){for(var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,g,$,y,b,w,_,k,x,E,O,S,C,R,N,A,D,j,T=n[6]("Conversations")+"",P=(n[4].email||n[6]("Account"))+"",L=n[4].is("admin"),I=n[6]("Log out")+"",U=new qr({props:{href:"/chat",class:"sidebar__header__notification",$$slots:{default:[Us]},$$scope:{ctx:n}}}),B=new hr({props:{name:"search"}}),z=!n[4].connections.size&&Bs(n),H=n[4].connections.toArray(),q=[],F=0;F<H.length;F+=1)q[F]=Ks(Is(n,H,F));var K=function(n){return Fn(q[n],1,1,(function(){q[n]=null}))},W=new qr({props:{href:"/chat",$$slots:{default:[Ws]},$$scope:{ctx:n}}}),nn=new qr({props:{href:"/search",$$slots:{default:[Gs]},$$scope:{ctx:n}}}),tn=new qr({props:{href:"/settings/conversation",$$slots:{default:[Ys]},$$scope:{ctx:n}}}),on=new qr({props:{href:"/settings/connection",$$slots:{default:[Vs]},$$scope:{ctx:n}}}),un=new qr({props:{href:"/settings/account",$$slots:{default:[Js]},$$scope:{ctx:n}}}),fn=new qr({props:{href:"/help",$$slots:{default:[Zs]},$$scope:{ctx:n}}}),ln=L&&Qs(n),dn=new hr({props:{name:"power-off"}}),pn=new qr({props:{href:"/search?q="+encodeURIComponent(n[5]),class:"for-search hidden",$$slots:{default:[ef]},$$scope:{ctx:n}}});return{c:function(){e=Z("div"),t=Z("form"),r=Z("input"),i=X(),Jn(U.$$.fragment),a=X(),c=Z("label"),Jn(B.$$.fragment),u=X(),s=Z("nav"),f=Z("h3"),l=Q(T),d=X(),z&&z.c(),p=X();for(var v=0;v<q.length;v+=1)q[v].c();h=X(),m=Z("h3"),g=Q(P),$=X(),Jn(W.$$.fragment),y=X(),Jn(nn.$$.fragment),b=X(),Jn(tn.$$.fragment),w=X(),Jn(on.$$.fragment),_=X(),Jn(un.$$.fragment),k=X(),Jn(fn.$$.fragment),x=X(),ln&&ln.c(),E=X(),O=Z("a"),Jn(dn.$$.fragment),S=X(),C=Z("span"),R=Q(I),N=X(),Jn(pn.$$.fragment),rn(r,"type","text"),rn(r,"id","search_input"),rn(r,"class","is-primary-menu-item"),rn(r,"placeholder",o=n[3]?n[6]("Search..."):n[6]("Convos")),rn(c,"for","search_input"),rn(t,"class","sidebar__header is-below"),sn(t,"has-focus",n[3]),rn(O,"href",ot.urlFor("/logout")),rn(O,"target","_self"),rn(s,"class","sidebar-left__nav"),sn(s,"is-filtering",n[1].length>0),rn(e,"class","sidebar-left")},m:function(o,v,A){Y(o,e,v),G(e,t),G(t,r),cn(r,n[1]),G(t,i),Zn(U,t,null),G(t,a),G(t,c),Zn(B,c,null),G(e,u),G(e,s),G(s,f),G(f,l),G(s,d),z&&z.m(s,null),G(s,p);for(var T=0;T<q.length;T+=1)q[T].m(s,null);G(s,h),G(s,m),G(m,g),G(s,$),Zn(W,s,null),G(s,y),Zn(nn,s,null),G(s,b),Zn(tn,s,null),G(s,w),Zn(on,s,null),G(s,_),Zn(un,s,null),G(s,k),Zn(fn,s,null),G(s,x),ln&&ln.m(s,null),G(s,E),G(s,O),Zn(dn,O,null),G(O,S),G(O,C),G(C,R),G(s,N),Zn(pn,s,null),n[17](s),D=!0,A&&M(j),j=[en(r,"input",n[16]),en(r,"blur",n[10]),en(r,"focus",n[11]),en(r,"keydown",n[12]),en(t,"submit",cf),en(s,"click",of)]},p:function(n,e){var i=v(e,1)[0];(!D||72&i&&o!==(o=n[3]?n[6]("Search..."):n[6]("Convos")))&&rn(r,"placeholder",o),2&i&&r.value!==n[1]&&cn(r,n[1]);var a={};if(16777344&i&&(a.$$scope={dirty:i,ctx:n}),U.$set(a),8&i&&sn(t,"has-focus",n[3]),(!D||64&i)&&T!==(T=n[6]("Conversations")+"")&&an(l,T),n[4].connections.size?z&&(zn(),Fn(z,1,1,(function(){z=null})),Hn()):z?(z.p(n,i),qn(z,1)):((z=Bs(n)).c(),qn(z,1),z.m(s,p)),16&i){var c;for(H=n[4].connections.toArray(),c=0;c<H.length;c+=1){var u=Is(n,H,c);q[c]?(q[c].p(u,i),qn(q[c],1)):(q[c]=Ks(u),q[c].c(),qn(q[c],1),q[c].m(s,h))}for(zn(),c=H.length;c<q.length;c+=1)K(c);Hn()}(!D||80&i)&&P!==(P=(n[4].email||n[6]("Account"))+"")&&an(g,P);var f={};16777408&i&&(f.$$scope={dirty:i,ctx:n}),W.$set(f);var d={};16777280&i&&(d.$$scope={dirty:i,ctx:n}),nn.$set(d);var m={};16777280&i&&(m.$$scope={dirty:i,ctx:n}),tn.$set(m);var $={};16777280&i&&($.$$scope={dirty:i,ctx:n}),on.$set($);var y={};16777280&i&&(y.$$scope={dirty:i,ctx:n}),un.$set(y);var b={};16777280&i&&(b.$$scope={dirty:i,ctx:n}),fn.$set(b),16&i&&(L=n[4].is("admin")),L?ln?(ln.p(n,i),qn(ln,1)):((ln=Qs(n)).c(),qn(ln,1),ln.m(s,E)):ln&&(zn(),Fn(ln,1,1,(function(){ln=null})),Hn()),(!D||64&i)&&I!==(I=n[6]("Log out")+"")&&an(R,I);var w={};32&i&&(w.href="/search?q="+encodeURIComponent(n[5])),16777312&i&&(w.$$scope={dirty:i,ctx:n}),pn.$set(w),2&i&&sn(s,"is-filtering",n[1].length>0)},i:function(t){if(!D){qn(U.$$.fragment,t),qn(B.$$.fragment,t),qn(z);for(var r=0;r<H.length;r+=1)qn(q[r]);qn(W.$$.fragment,t),qn(nn.$$.fragment,t),qn(tn.$$.fragment,t),qn(on.$$.fragment,t),qn(un.$$.fragment,t),qn(fn.$$.fragment,t),qn(ln),qn(dn.$$.fragment,t),qn(pn.$$.fragment,t),An((function(){A||(A=Wn(e,ir,n[0],!0)),A.run(1)})),D=!0}},o:function(t){Fn(U.$$.fragment,t),Fn(B.$$.fragment,t),Fn(z),q=q.filter(Boolean);for(var r=0;r<q.length;r+=1)Fn(q[r]);Fn(W.$$.fragment,t),Fn(nn.$$.fragment,t),Fn(tn.$$.fragment,t),Fn(on.$$.fragment,t),Fn(un.$$.fragment,t),Fn(fn.$$.fragment,t),Fn(ln),Fn(dn.$$.fragment,t),Fn(pn.$$.fragment,t),A||(A=Wn(e,ir,n[0],!1)),A.run(0),D=!1},d:function(t){t&&V(e),Qn(U),Qn(B),z&&z.d(),J(q,t),Qn(W),Qn(nn),Qn(tn),Qn(on),Qn(un),Qn(fn),ln&&ln.d(),Qn(dn),Qn(pn),n[17](null),t&&A&&A.end(),M(j)}}}function rf(n,e){var t=[e.conversation_id?"for-conversation":"for-connection"];return(e.frozen||"connected"!=n.state)&&t.push("is-frozen"),e.errors&&t.push("has-errors"),t.join(" ")}function of(n){(n.target.className||"").match(/(network|user)/)&&setTimeout((function(){return ot.update({activeMenu:"settings"})}),50)}function af(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;return n.unread>e?"60+":n.unread||0}var cf=function(n){return n.preventDefault()};function uf(n,e,t){var r,o,i,a;L(n,ot,(function(n){return t(15,o=n)})),L(n,wt,(function(n){return t(6,i=n)}));var c=e.transition,u=kn("user");L(n,u,(function(n){return t(4,r=n)}));var s=r.notifications;L(n,s,(function(n){return t(7,a=n)}));var f,l,d=0,p="",h=!1,m=[];function v(){me(f,"a",(function(n){return n.classList.remove("has-focus")})),setTimeout((function(){if(f){t(1,p="");var n=document.activeElement;n&&ce(n,f)&&me(f,"a.has-path",(function(n){return n.focus()})),t(3,h=!1)}}),100)}function g(){if(f){t(13,d=0),t(3,h=!0),t(14,m=[]);var n=[p.match(/^\W+/)?"":"\\b\\W*"];n[0]&&n.push("");for(var e=function(e){var r=new RegExp(n[e]+ve(p),"i"),o={};if(me(f,"a",(function(n,e){var i=n.classList;!p.length&&i.contains("has-path")&&t(13,d=e),i.remove("has-focus");var a=!p.length||!n.href.match(/\/search$/)&&!o[n.href]&&n.textContent.match(r);a&&m.push(n),n.classList[a?"remove":"add"]("hidden"),o[n.href]=!0})),m.length)return"break"},r=0;r<n.length;r++){if("break"===e(r))break}me(f,".for-connection",(function(n){for(var e=n;(e=e.nextElementSibling)&&e.classList.contains("for-conversation");)if(!e.classList.contains("hidden"))return n.classList.remove("hidden")}));var o=f.querySelector(".for-search");o.classList[p?"remove":"add"]("hidden"),o.classList.contains("hidden")||m.push(o),me(f,"h3",(function(n){for(var e=n;(e=e.nextElementSibling)&&!_e(e,"h3");)if(!e.classList.contains("hidden"))return n.classList.remove("hidden");n.classList.add("hidden")}))}}return n.$set=function(n){"transition"in n&&t(0,c=n.transition)},n.$$.update=function(){2&n.$$.dirty&&g(),2&n.$$.dirty&&t(5,l=p.replace(/^\//,"")),32772&n.$$.dirty&&f&&v(),24576&n.$$.dirty&&m[d]&&m[d].classList.add("has-focus")},[c,p,f,h,r,l,i,a,u,s,v,g,function(n){if(13==n.keyCode)return n.preventDefault(),v(),void(m[d]&&ot.go(m[d].href));var e=38==n.keyCode?-1:40==n.keyCode?1:0;e&&(n.preventDefault(),m[d]&&m[d].classList.remove("has-focus"),t(13,d+=n.ctrlKey?4*e:e)),d<0&&t(13,d=m.length-1),d>=m.length&&t(13,d=0)},d,m,o,function(){p=this.value,t(1,p)},function(n){On[n?"unshift":"push"]((function(){t(2,f=n)}))}]}var sf=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(Ps()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,uf,tf,T,{transition:0}),e}return c}(ee);function ff(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var lf=Yn.window;function df(n){var e,t,r=n[4].component||Fa;if(r)var o=new r({});return{c:function(){o&&Jn(o.$$.fragment),e=nn()},m:function(n,r){o&&Zn(o,n,r),Y(n,e,r),t=!0},p:function(n,t){if(r!==(r=n[4].component||Fa)){if(o){zn();var i=o;Fn(i.$$.fragment,1,0,(function(){Qn(i,1)})),Hn()}r?(Jn((o=new r({})).$$.fragment),qn(o.$$.fragment,1),Zn(o,e.parentNode,e)):o=null}},i:function(n){t||(o&&qn(o.$$.fragment,n),t=!0)},o:function(n){o&&Fn(o.$$.fragment,n),t=!1},d:function(n){n&&V(e),o&&Qn(o,n)}}}function pf(n){var e,t=new kc({});return{c:function(){Jn(t.$$.fragment)},m:function(n,r){Zn(t,n,r),e=!0},p:R,i:function(n){e||(qn(t.$$.fragment,n),e=!0)},o:function(n){Fn(t.$$.fragment,n),e=!1},d:function(n){Qn(t,n)}}}function hf(n){var e,t,r,o,i,a=("nav"==n[4].activeMenu||n[2])&&"default"!=n[4].activeMenu&&mf(n),c="settings"==n[4].activeMenu&&vf(n),u=n[4].component;if(u)var s=new u({});var f=n[4].activeMenu&&!n[2]&&gf(n);return{c:function(){a&&a.c(),e=X(),c&&c.c(),t=X(),s&&Jn(s.$$.fragment),r=X(),f&&f.c(),o=nn()},m:function(n,u){a&&a.m(n,u),Y(n,e,u),c&&c.m(n,u),Y(n,t,u),s&&Zn(s,n,u),Y(n,r,u),f&&f.m(n,u),Y(n,o,u),i=!0},p:function(n,i){if("nav"!=n[4].activeMenu&&!n[2]||"default"==n[4].activeMenu?a&&(zn(),Fn(a,1,1,(function(){a=null})),Hn()):a?(a.p(n,i),qn(a,1)):((a=mf(n)).c(),qn(a,1),a.m(e.parentNode,e)),"settings"==n[4].activeMenu?c?(c.p(n,i),qn(c,1)):((c=vf(n)).c(),qn(c,1),c.m(t.parentNode,t)):c&&(zn(),Fn(c,1,1,(function(){c=null})),Hn()),u!==(u=n[4].component)){if(s){zn();var l=s;Fn(l.$$.fragment,1,0,(function(){Qn(l,1)})),Hn()}u?(Jn((s=new u({})).$$.fragment),qn(s.$$.fragment,1),Zn(s,r.parentNode,r)):s=null}n[4].activeMenu&&!n[2]?f?(f.p(n,i),qn(f,1)):((f=gf(n)).c(),qn(f,1),f.m(o.parentNode,o)):f&&(zn(),Fn(f,1,1,(function(){f=null})),Hn())},i:function(n){i||(qn(a),qn(c),s&&qn(s.$$.fragment,n),qn(f),i=!0)},o:function(n){Fn(a),Fn(c),s&&Fn(s.$$.fragment,n),Fn(f),i=!1},d:function(n){a&&a.d(n),n&&V(e),c&&c.d(n),n&&V(t),s&&Qn(s,n),n&&V(r),f&&f.d(n),n&&V(o)}}}function mf(n){var e,t=new sf({props:{transition:{duration:n[2]?0:250,x:n[1]}}});return{c:function(){Jn(t.$$.fragment)},m:function(n,r){Zn(t,n,r),e=!0},p:function(n,e){var r={};6&e&&(r.transition={duration:n[2]?0:250,x:n[1]}),t.$set(r)},i:function(n){e||(qn(t.$$.fragment,n),e=!0)},o:function(n){Fn(t.$$.fragment,n),e=!1},d:function(n){Qn(t,n)}}}function vf(n){var e,t,r=n[5];function o(n){return{props:{conversation:n[6].activeConversation,transition:{duration:250,x:n[2]?0:n[1]}}}}if(r)var i=new r(o(n));return{c:function(){i&&Jn(i.$$.fragment),e=nn()},m:function(n,r){i&&Zn(i,n,r),Y(n,e,r),t=!0},p:function(n,t){var a={};if(64&t&&(a.conversation=n[6].activeConversation),6&t&&(a.transition={duration:250,x:n[2]?0:n[1]}),r!==(r=n[5])){if(i){zn();var c=i;Fn(c.$$.fragment,1,0,(function(){Qn(c,1)})),Hn()}r?(Jn((i=new r(o(n))).$$.fragment),qn(i.$$.fragment,1),Zn(i,e.parentNode,e)):i=null}else r&&i.$set(a)},i:function(n){t||(i&&qn(i.$$.fragment,n),t=!0)},o:function(n){i&&Fn(i.$$.fragment,n),t=!1},d:function(n){n&&V(e),i&&Qn(i,n)}}}function gf(n){var e,t,r,o;return{c:function(){(e=Z("div")).textContent=" ",rn(e,"class","overlay")},m:function(t,i,a){Y(t,e,i),r=!0,a&&o(),o=en(e,"click",n[13])},p:R,i:function(n){r||(An((function(){t||(t=Wn(e,or,{duration:200},!0)),t.run(1)})),r=!0)},o:function(n){t||(t=Wn(e,or,{duration:200},!1)),t.run(0),r=!1},d:function(n){n&&V(e),n&&t&&t.end(),o()}}}function $f(n){var e,t,r,o,i;An(n[12]);var a=[hf,pf,df],c=[];function u(n,e){return n[3]?0:n[4].requireLogin?1:2}return e=u(n),t=c[e]=a[e](n),{c:function(){t.c(),r=nn()},m:function(t,a,u){c[e].m(t,a),Y(t,r,a),o=!0,u&&M(i),i=[en(lf,"focus",n[11]),en(lf,"resize",n[12])]},p:function(n,o){var i=v(o,1)[0],s=e;(e=u(n))===s?c[e].p(n,i):(zn(),Fn(c[s],1,1,(function(){c[s]=null})),Hn(),(t=c[e])||(t=c[e]=a[e](n)).c(),qn(t,1),t.m(r.parentNode,r))},i:function(n){o||(qn(t),o=!0)},o:function(n){Fn(t),o=!1},d:function(n){c[e].d(n),n&&V(r),M(i)}}}function yf(){return(yf=f(t.mark((function n(){var e,r,o;return t.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(navigator.serviceWorker){n.next=2;break}return n.abrupt("return",{});case 2:return n.next=4,navigator.serviceWorker.register(ot.urlFor("/sw.js"));case 4:return e=n.sent,n.next=7,fetch(ot.urlFor("/sw/info"));case 7:if(r=n.sent,n.t1=200==r.status,!n.t1){n.next=13;break}return n.next=12,r.json();case 12:n.t1=n.sent;case 13:if(n.t0=n.t1,n.t0){n.next=16;break}n.t0={mode:"",version:"0.00"};case 16:if((o=n.t0).version!=ye("version")){n.next=19;break}return n.abrupt("return",{});case 19:console.info("[serviceWorker.update]",ye("version"),o),e.update();case 21:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function bf(n,e,t){var r,o;L(n,ot,(function(n){return t(4,r=n)}));var i=At("/events"),a=new tr({});L(n,a,(function(n){return t(6,o=n)}));var c=0,u=0,s={closed:!0};function f(n){if(n.is("open"))return s.close&&s.close();var e=!1===navigator.onLine?bt.l("You seem to be offline."):n.error?bt.l(n.error):n.is("connecting")?bt.l("Connecting to Convos..."):bt.l("Connection to Convos is %1.",bt.l(n.readyStateHuman));s.body!=e&&(s.close&&s.close(),s=Ot.showInApp(e,{closeAfter:-1,title:bt.l("Status")}))}i.update({debug:"WebSocket"}),window.convosWebSockeet=i,ot.update({baseUrl:ye("base_url")}),i.update({url:ot.wsUrlFor("/events")}),function(){return yf.apply(this,arguments)}().catch((function(n){return console.error("[serviceWorker]",n)})),function(n,e){n.to("/login",es(kc)),n.to("/register",es(kc)),n.to("/help",es(nc)),n.to("/settings/account",es(uu)),n.to("/settings/connection",es(ba)),n.to("/settings/conversation",es(Ta)),n.to("/settings/users",es(ns)),n.to("/settings",es(Du)),n.to("/search",es(Kc)),n.to("/chat",es(Kc)),n.to("/chat/:connection_id",es(ai)),n.to("/chat/:connection_id/:conversation_id",es(ai));var t=function(){};n.to("/doc/*",t),n.to("/file/*",t),n.to("/paste/*",t),n.to("/",es(kc)),n.to("*",es(Fa)),function(n,e){e.on("wsEventSentJoin",(function(e){n.go(n.conversationPath(e))})),e.on("wsEventSentPart",(function(t){var r=e.findConversation({connection_id:t.connection_id});if(!r)return n.go("/settings/connection");var o=r.conversations.toArray()[0];n.go(o?o.path:"/settings/conversation")}))}(n,e)}(ot,a),pe(ot.urlFor("/images/emojis.js")),_n("api",Be("/api").update({url:ot.urlFor("/api")}).toFunction()),_n("socket",i),_n("themeManager",(new Ce).start()),_n("user",a),Ot.on("click",(function(n){return n.path&&ot.go(n.path)})),i.on("update",f),a.on("update",(function(n,e){return e.hasOwnProperty("roles")&&ot.render()})),bt.load().then((function(){return a.load()}));var l,d,p;return n.$$.update=function(){2&n.$$.dirty&&t(2,l=u>800),16&n.$$.dirty&&t(3,d=!!(r.component&&r.requireLogin&&a.is("authenticated"))),64&n.$$.dirty&&t(5,p=o.activeConversation.connection_id?o.activeConversation.conversation_id?Ts:ps:null),8&n.$$.dirty&&ye("app_mode",d),8&n.$$.dirty&&ye("notify_enabled",d),80&n.$$.dirty&&function(n,e){if(document){var t=ye("organization_name"),r=e.unread?"("+e.unread+") "+n.title:n.title;document.title="Convos"==t?bt.l("%1 - Convos",r):bt.l("%1 - Convos for %2",r,t)}}(r,o)},[c,u,l,d,r,p,o,i,a,s,f,function(){return a.email&&i.open()},function(){t(0,c=lf.innerHeight),t(1,u=lf.innerWidth)},function(){return r.update({activeMenu:""})}]}var wf=function(n){u(c,n);var e,t=(e=c,function(){var n,t=a(e);if(ff()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function c(n){var e;return r(this,c),e=t.call(this),ne(o(e),n,bf,$f,T,{}),e}return c}(ee);function _f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var kf=function(n){u(s,n);var e,o,c=(e=s,function(){var n,t=a(e);if(_f()){var r=a(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return i(this,n)});function s(n){var e;return r(this,s),(e=c.call(this)).prop("ro","domain",n.domain||"meet.jit.si"),e.prop("ro","email",n.email||""),e.prop("rw","nick",n.nick||""),e.prop("rw","roomName",n.roomName||"convos-default"),e.prop("persist","disableAudioLevels",!0,{key:"video:disableAudioLevels"}),e.prop("persist","disableH264",!0,{key:"video:disableH264"}),e.prop("persist","resolution",720,{key:"video:resolution"}),e}return C(s,[{key:"render",value:(o=f(t.mark((function n(e){var r=this;return t.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.targetEl=e,n.next=3,pe("https://"+this.domain+"/external_api.js");case 3:ge(this.targetEl),document.body.classList.add("has-video-chat"),this.jitsi=new JitsiMeetExternalAPI(this.domain,this._options()),document.addEventListener("keydown",(function(n){"KeyC"==n.code&&r.jitsi.executeCommand("toggleChat"),"KeyD"==n.code&&r.jitsi.executeCommand("toggleShareScreen"),"KeyF"==n.code&&r.jitsi.executeCommand("toggleFilmStrip"),"KeyM"==n.code&&r.jitsi.executeCommand("toggleAudio"),"KeyR"==n.code&&r.jitsi.executeCommand("toggleRaiseHand"),"KeyV"==n.code&&r.jitsi.executeCommand("toggleVideo"),"KeyW"==n.code&&r.jitsi.executeCommand("toggleTileView"),"Space"==n.code&&r.jitsi.isAudioMuted().then((function(n){return n&&r.jitsi.executeCommand("toggleAudio")}))})),document.addEventListener("keyup",(function(n){"Space"==n.code&&r.jitsi.isAudioMuted().then((function(n){return n||r.jitsi.executeCommand("toggleAudio")}))}));case 8:case"end":return n.stop()}}),n,this)}))),function(n){return o.apply(this,arguments)})},{key:"_configOverwrite",value:function(){return{disableAudioLevels:this.disableAudioLevels,disableH264:this.disableH264,enableWelcomePage:!this.nick,prejoinPageEnabled:!this.nick,minParticipants:1,resolution:this.resolution,analytics:{googleAnalyticsTrackingId:"",scriptURLs:[]},e2eping:{analyticsInterval:-1,pingInterval:-1}}}},{key:"_interfaceConfigOverwrite",value:function(){return{DEFAULT_BACKGROUND:window.getComputedStyle(document.querySelector(".cms-navbar-wrapper")).backgroundColor||"#222222",DISABLE_FOCUS_INDICATOR:!0,DISABLE_DOMINANT_SPEAKER_INDICATOR:!0,DISABLE_VIDEO_BACKGROUND:!0,INITIAL_TOOLBAR_TIMEOUT:1e3,SHOW_CHROME_EXTENSION_BANNER:!0,TOOLBAR_ALWAYS_VISIBLE:!1,TOOLBAR_BUTTONS:["camera","chat","closedcaptions","desktop","etherpad","fodeviceselection","fullscreen","hangup","help","microphone","mute-everyone","profile","raisehand","security","settings","sharedvideo","shortcuts","stats","tileview"],TOOLBAR_TIMEOUT:2e3,VERTICAL_FILMSTRIP:!1,VIDEO_QUALITY_LABEL_DISABLED:!0}}},{key:"_options",value:function(){var n={};return this.email&&(n.email=this.email),this.nick&&(n.displayName=this.nick),{configOverwrite:this._configOverwrite(),interfaceConfigOverwrite:this._interfaceConfigOverwrite(),parentNode:this.targetEl,roomName:this.roomName,userInfo:n,height:"100%",width:"100%"}}}]),s}(Oe);if(document.body.className=document.body.className.replace(/no-js/,"has-js"),me(document,"#hamburger_checkbox_toggle",(function(n){n.checked=!1})),me(document,".js-close-window",(function(n){n.addEventListener("click",(function(n){window.opener&&(n.preventDefault(),setTimeout((function(){return window.close()}),1),window.opener.focus())}))})),document.querySelector('meta[name="convos:start_app"][content="chat"]')){document.querySelector(".footer-wrapper").remove(),document.querySelector("main").remove();new wf({target:document.body})}else if(document.querySelector('meta[name="convos:start_app"][content="jitsi"]')){document.querySelector(".footer-wrapper").remove();var xf=document.querySelector(".video-chat-wrapper");new kf(xf.dataset).render(xf)}else document.addEventListener("DOMContentLoaded",(function(n){me(document,"pre",(function(n){return ro.lineNumbersBlock(n)}))}));function Ef(n){if(!("ontouchstart"in window)){var e=function(n){for(var e=0;e<n.length;e++){var t=document.querySelector(n[e]);if(t&&-1!=t.tabIndex)return t}return null},t=n&&e(["input.is-primary-menu-item","a.is-primary-menu-item"]),r=document.activeElement;if(_e(r,["a","input","textarea"])&&t&&r!=t)return t.focus();var o=e([".is-primary-input",'main input[type="text"], article input[type="text"]',"main a, article a"]);return o?o.focus():t?t.focus():void 0}}document.addEventListener("keydown",(function(n){27==n.keyCode&&(me(document,".fullscreen-wrapper",(function(n){return n.click()})),Ef()),13==n.keyCode&&n.shiftKey&&(n.preventDefault(),Ef("toggle"))})),document.addEventListener("routerender",(function(){return Ef()}))}();
//# sourceMappingURL=convos.600b9b0a.js.map
