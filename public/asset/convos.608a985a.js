!function(){"use strict";var n={add:function(n){document.body.classList.remove("no-"+n),document.body.classList.add("has-"+n)},has:function(n){return document.body.classList.contains("has-"+n)},remove:function(n){document.body.classList.add("no-"+n),document.body.classList.remove("has-"+n)}};function e(e,t){document.addEventListener(e,(function r(o){"mousemove"!=e&&n.add(t),"mousemove"!=e||n.has("touch")||n.add(t),document.removeEventListener(e,r)}))}e("mousemove","mouse"),e("touchstart","touch"),n.add("js");var t=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")};var r=function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n};function o(n,e){return n(e={exports:{}},e.exports),e.exports}var i=o((function(n){function e(t,r){return n.exports=e=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n},e(t,r)}n.exports=e}));var a=function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&i(n,e)},c=o((function(n){function e(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?n.exports=e=function(n){return typeof n}:n.exports=e=function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e(t)}n.exports=e}));var u=function(n,e){return!e||"object"!==c(e)&&"function"!=typeof e?r(n):e},s=o((function(n){function e(t){return n.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},e(t)}n.exports=e})),f=o((function(n){var e=function(n){var e=Object.prototype,t=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function u(n,e,t,r){var o=e&&e.prototype instanceof l?e:l,i=Object.create(o.prototype),a=new k(r||[]);return i._invoke=function(n,e,t){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return E()}for(t.method=o,t.arg=i;;){var a=t.delegate;if(a){var c=b(a,t);if(c){if(c===f)continue;return c}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===r)throw r="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);r="executing";var u=s(n,e,t);if("normal"===u.type){if(r=t.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:t.done}}"throw"===u.type&&(r="completed",t.method="throw",t.arg=u.arg)}}}(n,t,a),i}function s(n,e,t){try{return{type:"normal",arg:n.call(e,t)}}catch(n){return{type:"throw",arg:n}}}n.wrap=u;var f={};function l(){}function d(){}function p(){}var h={};h[o]=function(){return this};var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==e&&t.call(v,o)&&(h=v);var g=p.prototype=l.prototype=Object.create(h);function $(n){["next","throw","return"].forEach((function(e){n[e]=function(n){return this._invoke(e,n)}}))}function y(n,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,u){var f=s(n[o],n,i);if("throw"!==f.type){var l=f.arg,d=l.value;return d&&"object"===c(d)&&t.call(d,"__await")?e.resolve(d.__await).then((function(n){r("next",n,a,u)}),(function(n){r("throw",n,a,u)})):e.resolve(d).then((function(n){l.value=n,a(l)}),(function(n){return r("throw",n,a,u)}))}u(f.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function b(n,e){var t=n.iterator[e.method];if(void 0===t){if(e.delegate=null,"throw"===e.method){if(n.iterator.return&&(e.method="return",e.arg=void 0,b(n,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=s(t,n.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,f;var o=r.arg;return o?o.done?(e[n.resultName]=o.value,e.next=n.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function w(n){var e={tryLoc:n[0]};1 in n&&(e.catchLoc=n[1]),2 in n&&(e.finallyLoc=n[2],e.afterLoc=n[3]),this.tryEntries.push(e)}function _(n){var e=n.completion||{};e.type="normal",delete e.arg,n.completion=e}function k(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(w,this),this.reset(!0)}function x(n){if(n){var e=n[o];if(e)return e.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,i=function e(){for(;++r<n.length;)if(t.call(n,r))return e.value=n[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=g.constructor=p,p.constructor=d,p[a]=d.displayName="GeneratorFunction",n.isGeneratorFunction=function(n){var e="function"==typeof n&&n.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,p):(n.__proto__=p,a in n||(n[a]="GeneratorFunction")),n.prototype=Object.create(g),n},n.awrap=function(n){return{__await:n}},$(y.prototype),y.prototype[i]=function(){return this},n.AsyncIterator=y,n.async=function(e,t,r,o,i){void 0===i&&(i=Promise);var a=new y(u(e,t,r,o),i);return n.isGeneratorFunction(t)?a:a.next().then((function(n){return n.done?n.value:a.next()}))},$(g),g[a]="Generator",g[o]=function(){return this},g.toString=function(){return"[object Generator]"},n.keys=function(n){var e=[];for(var t in n)e.push(t);return e.reverse(),function t(){for(;e.length;){var r=e.pop();if(r in n)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=x,k.prototype={constructor:k,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!n)for(var e in this)"t"===e.charAt(0)&&t.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var e=this;function r(t,r){return a.type="throw",a.arg=n,e.next=t,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=t.call(i,"catchLoc"),u=t.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(n,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&t.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===n||"continue"===n)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=n,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(n,e){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&e&&(this.next=e),f},finish:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===n)return this.complete(t.completion,t.afterLoc),_(t),f}},catch:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===n){var r=t.completion;if("throw"===r.type){var o=r.arg;_(t)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(n,e,t){return this.delegate={iterator:x(n),resultName:e,nextLoc:t},"next"===this.method&&(this.arg=void 0),f}},n}(n.exports);try{regeneratorRuntime=e}catch(n){Function("r","regeneratorRuntime = r")(e)}}));function l(n,e,t,r,o,i,a){try{var c=n[i](a),u=c.value}catch(n){return void t(n)}c.done?e(u):Promise.resolve(u).then(r,o)}var d=function(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function a(n){l(i,r,o,a,c,"next",n)}function c(n){l(i,r,o,a,c,"throw",n)}a(void 0)}))}};var p=function(n){if(Array.isArray(n))return n};var h=function(n,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n)){var t=[],r=!0,o=!1,i=void 0;try{for(var a,c=n[Symbol.iterator]();!(r=(a=c.next()).done)&&(t.push(a.value),!e||t.length!==e);r=!0);}catch(n){o=!0,i=n}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return t}};var m=function(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r};var v=function(n,e){if(n){if("string"==typeof n)return m(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?m(n,e):void 0}};var g=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var $=function(n,e){return p(n)||h(n,e)||v(n,e)||g()};var y=function(n,e){for(;!Object.prototype.hasOwnProperty.call(n,e)&&null!==(n=s(n)););return n},b=o((function(n){function e(t,r,o){return"undefined"!=typeof Reflect&&Reflect.get?n.exports=e=Reflect.get:n.exports=e=function(n,e,t){var r=y(n,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(t):o.value}},e(t,r,o||t)}n.exports=e}));var w=function(n){return-1!==Function.toString.call(n).indexOf("[native code]")};var _=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}},k=o((function(n){function e(t,r,o){return _()?n.exports=e=Reflect.construct:n.exports=e=function(n,e,t){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(n,r));return t&&i(o,t.prototype),o},e.apply(null,arguments)}n.exports=e})),x=o((function(n){function e(t){var r="function"==typeof Map?new Map:void 0;return n.exports=e=function(n){if(null===n||!w(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(n))return r.get(n);r.set(n,e)}function e(){return k(n,arguments,s(this).constructor)}return e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i(e,n)},e(t)}n.exports=e}));var E=function(n){if(Array.isArray(n))return m(n)};var O=function(n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)};var S=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var C=function(n){return E(n)||O(n)||v(n)||S()};function N(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var R=function(n,e,t){return e&&N(n.prototype,e),t&&N(n,t),n};function A(){}var j=function(n){return n};function T(n){return n()}function L(){return Object.create(null)}function P(n){n.forEach(T)}function M(n){return"function"==typeof n}function D(n,e){return n!=n?e==e:n!==e||n&&"object"===c(n)||"function"==typeof n}function B(n){if(null==n)return A;for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];var o=n.subscribe.apply(n,t);return o.unsubscribe?function(){return o.unsubscribe()}:o}function I(n){var e;return B(n,(function(n){return e=n}))(),e}function U(n,e,t){n.$$.on_destroy.push(B(e,t))}function H(n,e,t,r){if(n){var o=q(n,e,t,r);return n[0](o)}}function q(n,e,t,r){return n[1]&&r?function(n,e){for(var t in e)n[t]=e[t];return n}(t.ctx.slice(),n[1](r(e))):t.ctx}function z(n,e,t,r,o,i,a){var u=function(n,e,t,r){if(n[2]&&r){var o=n[2](r(t));if(void 0===e.dirty)return o;if("object"===c(o)){for(var i=[],a=Math.max(e.dirty.length,o.length),u=0;u<a;u+=1)i[u]=e.dirty[u]|o[u];return i}return e.dirty|o}return e.dirty}(e,r,o,i);if(u){var s=q(e,t,r,a);n.p(s,u)}}function F(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return n.set(t),e}function K(n){return n&&M(n.destroy)?n.destroy:A}var W,G="undefined"!=typeof window,Y=G?function(){return window.performance.now()}:function(){return Date.now()},V=G?function(n){return requestAnimationFrame(n)}:A,J=new Set;function Q(n){J.forEach((function(e){e.c(n)||(J.delete(e),e.f())})),0!==J.size&&V(Q)}function Z(n,e){n.appendChild(e)}function X(n,e,t){n.insertBefore(e,t||null)}function nn(n){n.parentNode.removeChild(n)}function en(n,e){for(var t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function tn(n){return document.createElement(n)}function rn(n){return document.createTextNode(n)}function on(){return rn(" ")}function an(){return rn("")}function cn(n,e,t,r){return n.addEventListener(e,t,r),function(){return n.removeEventListener(e,t,r)}}function un(n){return function(e){return e.preventDefault(),n.call(this,e)}}function sn(n,e,t){null==t?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function fn(n){return Array.from(n.childNodes)}function ln(n,e){e=""+e,n.wholeText!==e&&(n.data=e)}function dn(n,e){n.value=null==e?"":e}function pn(n,e,t,r){n.style.setProperty(e,t,r?"important":"")}function hn(){if(void 0===W){W=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(n){W=!0}}return W}function mn(n,e,t){n.classList[t?"add":"remove"](e)}function vn(n,e){var t=document.createEvent("CustomEvent");return t.initCustomEvent(n,!1,!1,e),t}var gn,$n=function(){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t(this,n),this.a=e,this.e=this.n=null}return R(n,[{key:"m",value:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.e||(this.e=tn(e.nodeName),this.t=e,this.h(n)),this.i(t)}},{key:"h",value:function(n){this.e.innerHTML=n,this.n=Array.from(this.e.childNodes)}},{key:"i",value:function(n){for(var e=0;e<this.n.length;e+=1)X(this.t,this.n[e],n)}},{key:"p",value:function(n){this.d(),this.h(n),this.i(this.a)}},{key:"d",value:function(){this.n.forEach(nn)}}]),n}(),yn=new Set,bn=0;function wn(n){for(var e=5381,t=n.length;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function _n(n,e,t,r,o,i,a){for(var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=16.666/r,s="{\n",f=0;f<=1;f+=u){var l=e+(t-e)*i(f);s+=100*f+"%{".concat(a(l,1-l),"}\n")}var d=s+"100% {".concat(a(t,1-t),"}\n}"),p="__svelte_".concat(wn(d),"_").concat(c),h=n.ownerDocument;yn.add(h);var m=h.__svelte_stylesheet||(h.__svelte_stylesheet=h.head.appendChild(tn("style")).sheet),v=h.__svelte_rules||(h.__svelte_rules={});v[p]||(v[p]=!0,m.insertRule("@keyframes ".concat(p," ").concat(d),m.cssRules.length));var g=n.style.animation||"";return n.style.animation="".concat(g?"".concat(g,", "):"").concat(p," ").concat(r,"ms linear ").concat(o,"ms 1 both"),bn+=1,p}function kn(n,e){var t=(n.style.animation||"").split(", "),r=t.filter(e?function(n){return n.indexOf(e)<0}:function(n){return-1===n.indexOf("__svelte")}),o=t.length-r.length;o&&(n.style.animation=r.join(", "),(bn-=o)||V((function(){bn||(yn.forEach((function(n){for(var e=n.__svelte_stylesheet,t=e.cssRules.length;t--;)e.deleteRule(t);n.__svelte_rules={}})),yn.clear())})))}function xn(n){gn=n}function En(){if(!gn)throw new Error("Function called outside component initialization");return gn}function On(n){En().$$.on_mount.push(n)}function Sn(n){En().$$.on_destroy.push(n)}function Cn(n,e){En().$$.context.set(n,e)}function Nn(n){return En().$$.context.get(n)}function Rn(n,e){var t=n.$$.callbacks[e.type];t&&t.slice().forEach((function(n){return n(e)}))}var An=[],jn=[],Tn=[],Ln=[],Pn=Promise.resolve(),Mn=!1;function Dn(n){Tn.push(n)}function Bn(n){Ln.push(n)}var In,Un=!1,Hn=new Set;function qn(){if(!Un){Un=!0;do{for(var n=0;n<An.length;n+=1){var e=An[n];xn(e),zn(e.$$)}for(xn(null),An.length=0;jn.length;)jn.pop()();for(var t=0;t<Tn.length;t+=1){var r=Tn[t];Hn.has(r)||(Hn.add(r),r())}Tn.length=0}while(An.length);for(;Ln.length;)Ln.pop()();Mn=!1,Un=!1,Hn.clear()}}function zn(n){if(null!==n.fragment){n.update(),P(n.before_update);var e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Dn)}}function Fn(n,e,t){n.dispatchEvent(vn("".concat(e?"intro":"outro").concat(t)))}var Kn,Wn=new Set;function Gn(){Kn={r:0,c:[],p:Kn}}function Yn(){Kn.r||P(Kn.c),Kn=Kn.p}function Vn(n,e){n&&n.i&&(Wn.delete(n),n.i(e))}function Jn(n,e,t,r){if(n&&n.o){if(Wn.has(n))return;Wn.add(n),Kn.c.push((function(){Wn.delete(n),r&&(t&&n.d(1),r())})),n.o(e)}}var Qn={duration:0};function Zn(n,e,t,r){var o=e(n,t),i=r?0:1,a=null,c=null,u=null;function s(){u&&kn(n,u)}function f(n,e){var t=n.b-i;return e*=Math.abs(t),{a:i,b:n.b,d:t,duration:e,start:n.start,end:n.start+e,group:n.group}}function l(e){var t,r=o||Qn,l=r.delay,d=void 0===l?0:l,p=r.duration,h=void 0===p?300:p,m=r.easing,v=void 0===m?j:m,g=r.tick,$=void 0===g?A:g,y=r.css,b={start:Y()+d,b:e};e||(b.group=Kn,Kn.r+=1),a||c?c=b:(y&&(s(),u=_n(n,i,e,h,d,v,y)),e&&$(0,1),a=f(b,h),Dn((function(){return Fn(n,e,"start")})),t=function(e){if(c&&e>c.start&&(a=f(c,h),c=null,Fn(n,a.b,"start"),y&&(s(),u=_n(n,i,a.b,a.duration,0,v,o.css))),a)if(e>=a.end)$(i=a.b,1-i),Fn(n,a.b,"end"),c||(a.b?s():--a.group.r||P(a.group.c)),a=null;else if(e>=a.start){var t=e-a.start;i=a.a+a.d*v(t/a.duration),$(i,1-i)}return!(!a&&!c)},0===J.size&&V(Q),new Promise((function(n){J.add({c:t,f:n})})))}return{run:function(n){M(o)?(In||(In=Promise.resolve()).then((function(){In=null})),In).then((function(){o=o(),l(n)})):l(n)},end:function(){s(),a=c=null}}}function Xn(n,e){var t,r=e.token={};function o(n,t,o,i){if(e.token===r){e.resolved=i;var a=e.ctx;void 0!==o&&((a=a.slice())[o]=i);var c=n&&(e.current=n)(a),u=!1;e.block&&(e.blocks?e.blocks.forEach((function(n,r){r!==t&&n&&(Gn(),Jn(n,1,1,(function(){e.blocks[r]===n&&(e.blocks[r]=null)})),Yn())})):e.block.d(1),c.c(),Vn(c,1),c.m(e.mount(),e.anchor),u=!0),e.block=c,e.blocks&&(e.blocks[t]=c),u&&qn()}}if((t=n)&&"object"===c(t)&&"function"==typeof t.then){var i=En();if(n.then((function(n){xn(i),o(e.then,1,e.value,n),xn(null)}),(function(n){if(xn(i),o(e.catch,2,e.error,n),xn(null),!e.hasCatch)throw n})),e.current!==e.pending)return o(e.pending,0),!0}else{if(e.current!==e.then)return o(e.then,1,e.value,n),!0;e.resolved=n}}var ne="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function ee(n,e,t){var r=n.$$.props[e];void 0!==r&&(n.$$.bound[r]=t,t(n.$$.ctx[r]))}function te(n){n&&n.c()}function re(n,e,t){var r=n.$$,o=r.fragment,i=r.on_mount,a=r.on_destroy,c=r.after_update;o&&o.m(e,t),Dn((function(){var e=i.map(T).filter(M);a?a.push.apply(a,C(e)):P(e),n.$$.on_mount=[]})),c.forEach(Dn)}function oe(n,e){var t=n.$$;null!==t.fragment&&(P(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function ie(n,e){-1===n.$$.dirty[0]&&(An.push(n),Mn||(Mn=!0,Pn.then(qn)),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function ae(n,e,t,r,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[-1],c=gn;xn(n);var u=n.$$={fragment:null,ctx:null,props:i,update:A,not_equal:o,bound:L(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:L(),dirty:a,skip_bound:!1},s=!1;if(u.ctx=t?t(n,e.props||{},(function(e,t){var r=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:t;return u.ctx&&o(u.ctx[e],u.ctx[e]=r)&&(!u.skip_bound&&u.bound[e]&&u.bound[e](r),s&&ie(n,e)),t})):[],u.update(),s=!0,P(u.before_update),u.fragment=!!r&&r(u.ctx),e.target){if(e.hydrate){var f=fn(e.target);u.fragment&&u.fragment.l(f),f.forEach(nn)}else u.fragment&&u.fragment.c();e.intro&&Vn(n.$$.fragment),re(n,e.target,e.anchor),qn()}xn(c)}var ce=function(){function n(){t(this,n)}return R(n,[{key:"$destroy",value:function(){oe(this,1),this.$destroy=A}},{key:"$on",value:function(n,e){var t=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return t.push(e),function(){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}},{key:"$set",value:function(n){var e;this.$$set&&(e=n,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}]),n}();var ue=function(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n},se=o((function(n,e){var t;t=function(){function n(){for(var n=0,e={};n<arguments.length;n++){var t=arguments[n];for(var r in t)e[r]=t[r]}return e}function e(n){return n.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function t(r){function o(){}function i(e,t,i){if("undefined"!=typeof document){"number"==typeof(i=n({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(t);/^[\{\[]/.test(a)&&(t=a)}catch(n){}t=r.write?r.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var c="";for(var u in i)i[u]&&(c+="; "+u,!0!==i[u]&&(c+="="+i[u].split(";")[0]));return document.cookie=e+"="+t+c}}function a(n,t){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var c=i[a].split("="),u=c.slice(1).join("=");t||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var s=e(c[0]);if(u=(r.read||r)(u,s)||e(u),t)try{u=JSON.parse(u)}catch(n){}if(o[s]=u,n===s)break}catch(n){}}return n?o[n]:o}}return o.set=i,o.get=function(n){return a(n,!1)},o.getJSON=function(n){return a(n,!0)},o.remove=function(e,t){i(e,"",n(t,{expires:-1}))},o.defaults={},o.withConverter=t,o}((function(){}))},n.exports=t()})),fe=1e3,le=1e6,de=1e3*le;function pe(n,e){var t=(e||"").match(/^(\+|-)?(.*)/)||["","+",""],r=$(t,3),o=(r[0],r[1]),i=r[2],a={};return i.split("").forEach((function(e){return a[n[e]||e]="-"!=o})),a}function he(n,e){for(;n;){if(e.tagName?n==e:n.matches&&n.matches(e))return n;n=n.parentNode}return null}function me(n,e){var t=function t(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var a=this;t.debounceTid&&clearTimeout(t.debounceTid),t.debounceTid=setTimeout((function(){n.apply(a,o),t.debounceTid=0}),e)};return t.debounceTid=0,t}function ve(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"message",t=n.errors||n;return t&&t[0]?t[0][e]||"Unknown error.":""}function ge(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.95,r=Math.floor(6*n),o=6*n-r,i=t*(1-e),a=t*(1-o*e),c=t*(1-(1-o)*e),u=255,s=255,f=255;switch(r){case 0:u=t,s=c,f=i;break;case 1:u=a,s=t,f=i;break;case 2:u=i,s=t,f=c;break;case 3:u=i,s=a,f=t;break;case 4:u=c,s=i,f=t;break;case 5:u=t,s=i,f=a}return[Math.floor(255*u),Math.floor(255*s),Math.floor(255*f)]}function $e(n,e){var t=n<fe?[n,""]:n<le?[n/fe,"k"]:n<de?[n/le,"M"]:[n/de,"G"],r=String(Math.round(10*t[0])/10);return(r.match(/\./)?r:r+".0")+t[1]+(e||"")}var ye={array:function(n){return Array.isArray(n)},defined:function(n){return!ye.undefined(n)},false:function(n){return!ye.true(n)},function:function(n){return"function"==typeof n},number:function(n){return"number"==typeof n},object:function(n){return"object"===c(n)&&null!==n},string:function(n){return"string"==typeof n},stringable:function(n){return"number"==typeof n||"string"==typeof n},true:function(n){return ye.string(n)?!!n.length&&"0"!=n:!!n},undefined:function(n){return null==n}};function be(n){var e=document,t=n.replace(/\W/g,"_");if(!e.getElementById(t)){var r=e.createElement("script"),o=[t,n];return r.id=o[0],r.src=o[1],e.getElementsByTagName("head")[0].appendChild(r),new Promise((function(n,e){r.addEventListener("error",e),r.addEventListener("load",n)}))}}function we(n){return Object.keys(n).filter((function(e){return n[e]})).sort().map((function(n){return"has-mode-"+n})).join(" ")}function _e(n,e,t){var r=":children"==e?n.children:n.querySelectorAll(e);if(!t)return[].slice.call(r,0);if(Array.isArray(t))return[].forEach.call(r,(function(n){return n.addEventListener(t[0],t[1])}));for(var o=[],i=0;i<r.length;i++)o.push(t(r[i],i));return o}function ke(n){return n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function xe(n,e){var t=function(n){return document.querySelector('meta[name="convos:'+n+'"]')||document.querySelector('meta[name="'+n+'"]')};if(1==arguments.length){"organization_name"==n&&(n="contactorganization"),"organization_url"==n&&(n="contactnetworkaddress");var r=t(n);if(!r)throw'Cannot get settings for "'+n+'".';var o={no:!1,yes:!0};return"contact"==n?atob(r.content||""):o.hasOwnProperty(r.content)?o[r.content]:r.content}"organization_name"==n&&(n="contactorganization"),"organization_url"==n&&(n="contactnetworkaddress"),"contact"==n&&(e=btoa(e)),"boolean"==typeof e&&(e=e?"yes":"no"),t(n).content=e}function Ee(n,e){n&&n.preventDefault&&n.preventDefault();var t,r,o,i,a=(t=document.body,r="fullscreen",o=function(n){n.addEventListener("click",(function(e){return e.target==n&&n.hide()})),n.hide=function(){return a.classList.add("hidden")}},(i=t&&t.querySelector("."+r.split(" ").join(".")))||((i=document.createElement("div")).className=r,t&&t.appendChild(i),o&&o(i),i));return function(n){for(;n.firstChild;)n.removeChild(n.firstChild)}(a),e?(a.classList.remove("hidden"),a.appendChild(e.cloneNode(!0)),a):a.hide()}function Oe(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;if(0==n.length)return"#000";for(var t=0,r=0;r<n.length;r++)t=n.charCodeAt(r)+((t<<5)-t),t&=t;return"#"+ge(((t=Math.abs(t%e/e))+.618033988749)%1,.4,.7).map((function(n){return n.toString(16)})).join("")}function Se(n,e){return ye.array(e)?e.find((function(e){return Se(n,e)}))||!1:n&&n.tagName&&n.tagName.toLowerCase()===e||!1}function Ce(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var e=16*Math.random()|0;return("x"==n?e:3&e|8).toString(16)}))}function Ne(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function Re(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Ne(Object(t),!0).forEach((function(e){ue(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ne(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var Ae=function(){function n(){t(this,n),this.cookieName="convos_js",this._on={},this._props={}}return R(n,[{key:"emit",value:function(n){for(var e=this._on[n],t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];for(var i=0;i<(e||[]).length;i++){var a;(a=e[i])[0].apply(a,r)}return this}},{key:"on",value:function(n,e){var t=e?null:new Promise((function(n){e=n})),r=this._on[n]||(this._on[n]=[]),o=[e];r.push(o);var i=function(){var n=r.indexOf(o);-1!=n&&r.splice(n,1)};return t?t.finally(i):i}},{key:"prop",value:function(n,e,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=Re(Re({},r),{},{defaultValue:t,name:e,type:n,value:t});switch(this._props[e]=o,o.updateable=-1!=["cookie","persist","rw"].indexOf(n),n){case"cookie":return this._cookieProp(o);case"persist":return this._localStorageProp(o);case"ro":return this._readOnlyProp(o);case"rw":return this._updateableProp(o)}throw"["+this.constructor.name+'] Unknown prop type "'+n+'" for prop "'+e+'".'}},{key:"subscribe",value:function(n){return n(this),this.on("update",n)}},{key:"update",value:function(n){var e=this;return Object.keys(n).forEach((function(t){var r=e._props[t];r&&(r.hasOwnProperty("prev")||(r.prev="ro"==r.type?void 0:r.value),r.updateable&&(r.value=n[t]))})),this._updatedTid||(this._updatedTid=setTimeout(this._delayedUpdate.bind(this),1)),this}},{key:"_cookie",value:function(n,e){var t=n.key||n.name,r=document.decodedB64JSONCookies||(document.decodedB64JSONCookies={});if(!r[this.cookieName])try{var o=se.get(this.cookieName);r[this.cookieName]=JSON.parse(o?atob(o):"{}")}catch(n){console.error("[Reactive:cookie]",ue({},t,n))}var i=r[this.cookieName]||{};if(1==arguments.length)return i[t];e===n.defaultValue?delete i[t]:i[t]=e;var a=0==location.href.indexOf("https:");se.set(this.cookieName,btoa(JSON.stringify(i)),{expires:365,SameSite:"Lax",secure:a})}},{key:"_cookieProp",value:function(n){var e=this._cookie(n);ye.defined(e)&&(n.value=e),ye.undefined(e)&&this._cookie(n,n.value),this._updateableProp(n)}},{key:"_delayedUpdate",value:function(){var n=this,e={};return Object.keys(this._props).forEach((function(t){var r=n._props[t];if(r.hasOwnProperty("prev")){var o=r.prev;delete r.prev,r.value!==o&&("cookie"==r.type&&n._cookie(r,r.value),"persist"==r.type&&n._localStorage(r,r.value),e[t]="ro"!=r.type)}})),delete this._updatedTid,Object.keys(e).length&&this.emit("update",this,e),e}},{key:"_localStorage",value:function(n,e){var t="convos:"+(n.key||n.name);if(2==arguments.length)return e===n.defaultValue?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(e));try{return localStorage.hasOwnProperty(t)?JSON.parse(localStorage.getItem(t)):void 0}catch(n){return void console.error("[Reactive:localStorage]",ue({},t,localStorage.getItem(t)),n)}}},{key:"_localStorageProp",value:function(n){var e=this._localStorage(n);ye.defined(e)&&(n.value=e),ye.undefined(e)&&this._localStorage(n,n.value),this._updateableProp(n)}},{key:"_readOnlyProp",value:function(n){if(void 0===n.value)throw"["+this.constructor.name+'] Read-only attribute "'+n.name+'" cannot be undefined';var e=ye.function(n.value)?n.value:function(){return n.value};Object.defineProperty(this,n.name,{get:e})}},{key:"_updateableProp",value:function(n){Object.defineProperty(this,n.name,{get:function(){return n.value}})}}]),n}();function je(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}var Te=function(n){a(r,n);var e=je(r);function r(){var n;return t(this,r),(n=e.call(this)).prop("cookie","activeTheme","convos",{key:"theme"}),n.prop("cookie","colorScheme","auto"),n.prop("cookie","compactDisplay",!1),n.prop("ro","colorSchemeOptions",["Auto","Light","Dark"].map((function(n){return[n.toLowerCase(),n]}))),n.prop("ro","themeOptions",(function(){return Array.from(n._stylesheets.entries())})),n.prop("rw","osColorScheme",""),n._stylesheets=new Map([]),n}return R(r,[{key:"hasColorScheme",value:function(n){return _e(document,'link[id$="-'+n+'"]').length>1}},{key:"start",value:function(){var n=this;_e(document,'link[rel="alternate stylesheet"][title]',(function(e){var t=e.title.replace(/\s\([a-z]+\)$/,"");n._stylesheets.set(e.id.replace(/^theme_alt__[a-z]+-/,""),t)}));var e=this.osColorScheme;return this._matchMedia||(this._matchMedia=window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):{addListener:function(){}},this._matchMedia.addListener((function(e){return n.update({osColorScheme:e.matches?"dark":"light"})})),e=this._matchMedia.matches?"dark":"light"),this.update({compactDisplay:this.compactDisplay,osColorScheme:e})}},{key:"update",value:function(n){return(n.activeTheme||n.colorScheme||n.osColorScheme)&&this._activateTheme(n),b(s(r.prototype),"update",this).call(this,n)}},{key:"_activateTheme",value:function(n){for(var e,t=n.activeTheme||this.activeTheme,r=n.colorScheme||this.colorScheme,o=n.osColorScheme||this.osColorScheme,i=["auto"==r?o:r,"normal","light"],a=0;a<i.length&&!(e=document.getElementById("theme_alt__"+i[a]+"-"+t));a++);_e(document,'link[rel*="style"][title]',(function(n){e||(e=n),n.disabled=!0,n.disabled=n.href!=e.href,n.setAttribute("media",n==e?"":"none"),n.setAttribute("rel",n==e?"stylesheet":"alternate stylesheet")}))}}]),r}(Ae),Le=function(){function n(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http://localhost";t(this,n),this._url=new URL("http://localhost"),Object.defineProperty(this,"href",{get:function(){return e._url.href.replace(/^http:/,e.protocol)},set:function(n){e._url.href=n.replace(/^\w+:/,"http:"),e.protocol=n.match(/^\w+:/)[0]}}),["host","pathname","password","searchParams","username"].forEach((function(n){Object.defineProperty(e,n,{get:function(){return e._url[n]},set:function(t){e._url[n]=t}})})),this.href=r}return R(n,[{key:"fromFields",value:function(n){ye.string(n.protocol)&&(this.protocol=n.protocol),ye.string(n.host)&&(this.host=n.host),ye.string(n.password)&&(this.password=n.password),ye.string(n.username)&&(this.username=n.username),ye.string(n.conversation_id)&&(this.pathname=encodeURIComponent(n.conversation_id));var e=this.searchParams;return ye.string(n.nick)&&e.append("nick",n.nick.trim()),ye.string(n.realname)&&n.realname.length&&e.append("realname",n.realname.trim()),ye.string(n.sasl)&&e.append("sasl",n.sasl||"none"),e.append("tls",ye.true(n.tls)?"1":"0"),e.append("tls_verify",ye.true(n.tls)&&ye.true(n.tls_verify)?"1":"0"),this}},{key:"toFields",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.protocol=this.protocol,n.host=this.host,n.password=ye.string(this.password)?this.password:"",n.username=ye.string(this.username)?this.username:"",n.conversation_id=decodeURIComponent(this.pathname.split("/").filter((function(n){return n.length}))[0]||"");var e=this.searchParams;return n.nick=e.get("nick")||n.nick||"",n.realname=e.get("realname")||n.realname||"",n.sasl=e.get("sasl")||n.sasl||"none",n.realname=e.get("realname")||n.realname||"",n.tls=ye.true(e.get("tls")),n.tls_verify=ye.true(e.get("tls_verify")),n}},{key:"toString",value:function(){return this.href.replace(/^http:/,this.protocol)}}]),n}(),Pe=o((function(n,e){var t,r;t=function(n){var e=[],t=Object.keys,r={},o={},i=!0,a=/^(no-?highlight|plain|text)$/i,u=/\blang(?:uage)?-([\w-]+)\b/i,s=/((^(<[^>]+>|\t|)+|(?:\n)))/gm,f="Could not find the language '{}', did you forget to load/include a language module?",l={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},d="of and for in not or if then".split(" ");function p(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function h(n){return n.nodeName.toLowerCase()}function m(n){return a.test(n)}function v(n){var e,t={},r=Array.prototype.slice.call(arguments,1);for(e in n)t[e]=n[e];return r.forEach((function(n){for(e in n)t[e]=n[e]})),t}function g(n){var e=[];return function n(t,r){for(var o=t.firstChild;o;o=o.nextSibling)3===o.nodeType?r+=o.nodeValue.length:1===o.nodeType&&(e.push({event:"start",offset:r,node:o}),r=n(o,r),h(o).match(/br|hr|img|input/)||e.push({event:"stop",offset:r,node:o}));return r}(n,0),e}function $(n){return n.variants&&!n.cached_variants&&(n.cached_variants=n.variants.map((function(e){return v(n,{variants:null},e)}))),n.cached_variants?n.cached_variants:function n(e){return!!e&&(e.endsWithParent||n(e.starts))}(n)?[v(n,{starts:n.starts?v(n.starts):null})]:Object.isFrozen(n)?[v(n)]:[n]}function y(n,e){return e?Number(e):(t=n,-1!=d.indexOf(t.toLowerCase())?0:1);var t}function b(n){function e(n){return n&&n.source||n}function r(t,r){return new RegExp(e(t),"m"+(n.case_insensitive?"i":"")+(r?"g":""))}function o(n){var t,o,i={},a=[],c={},u=1;function s(n,e){i[u]=n,a.push([n,e]),u+=function(n){return new RegExp(n.toString()+"|").exec("").length-1}(e)+1}for(var f=0;f<n.contains.length;f++)s(o=n.contains[f],o.beginKeywords?"\\.?(?:"+o.begin+")\\.?":o.begin);n.terminator_end&&s("end",n.terminator_end),n.illegal&&s("illegal",n.illegal);var l=a.map((function(n){return n[1]}));return t=r(function(n,t){for(var r=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./,o=0,i="",a=0;a<n.length;a++){var c=o+=1,u=e(n[a]);for(a>0&&(i+=t),i+="(";u.length>0;){var s=r.exec(u);if(null==s){i+=u;break}i+=u.substring(0,s.index),u=u.substring(s.index+s[0].length),"\\"==s[0][0]&&s[1]?i+="\\"+String(Number(s[1])+c):(i+=s[0],"("==s[0]&&o++)}i+=")"}return i}(l,"|"),!0),c.lastIndex=0,c.exec=function(e){var r;if(0===a.length)return null;t.lastIndex=c.lastIndex;var o=t.exec(e);if(!o)return null;for(var u=0;u<o.length;u++)if(null!=o[u]&&null!=i[""+u]){r=i[""+u];break}return"string"==typeof r?(o.type=r,o.extra=[n.illegal,n.terminator_end]):(o.type="begin",o.rule=r),o},c}if(n.contains&&-1!=n.contains.indexOf("self")){if(!i)throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");n.contains=n.contains.filter((function(n){return"self"!=n}))}!function i(a,c){a.compiled||(a.compiled=!0,a.keywords=a.keywords||a.beginKeywords,a.keywords&&(a.keywords=function(n,e){var r={};return"string"==typeof n?o("keyword",n):t(n).forEach((function(e){o(e,n[e])})),r;function o(n,t){e&&(t=t.toLowerCase()),t.split(" ").forEach((function(e){var t=e.split("|");r[t[0]]=[n,y(t[0],t[1])]}))}}(a.keywords,n.case_insensitive)),a.lexemesRe=r(a.lexemes||/\w+/,!0),c&&(a.beginKeywords&&(a.begin="\\b("+a.beginKeywords.split(" ").join("|")+")\\b"),a.begin||(a.begin=/\B|\b/),a.beginRe=r(a.begin),a.endSameAsBegin&&(a.end=a.begin),a.end||a.endsWithParent||(a.end=/\B|\b/),a.end&&(a.endRe=r(a.end)),a.terminator_end=e(a.end)||"",a.endsWithParent&&c.terminator_end&&(a.terminator_end+=(a.end?"|":"")+c.terminator_end)),a.illegal&&(a.illegalRe=r(a.illegal)),null==a.relevance&&(a.relevance=1),a.contains||(a.contains=[]),a.contains=Array.prototype.concat.apply([],a.contains.map((function(n){return $("self"===n?a:n)}))),a.contains.forEach((function(n){i(n,a)})),a.starts&&i(a.starts,c),a.terminators=o(a))}(n)}function w(n,e,t,o){var a=e;function c(n,e){var t=$.case_insensitive?e[0].toLowerCase():e[0];return n.keywords.hasOwnProperty(t)&&n.keywords[t]}function u(n,e,t,r){if(!t&&""===e)return"";if(!n)return e;var o='<span class="'+(r?"":l.classPrefix);return(o+=n+'">')+e+(t?"":"</span>")}function s(){E+=null!=k.subLanguage?function(){var n="string"==typeof k.subLanguage;if(n&&!r[k.subLanguage])return p(O);var e=n?w(k.subLanguage,O,!0,x[k.subLanguage]):_(O,k.subLanguage.length?k.subLanguage:void 0);return k.relevance>0&&(C+=e.relevance),n&&(x[k.subLanguage]=e.top),u(e.language,e.value,!1,!0)}():function(){var n,e,t,r;if(!k.keywords)return p(O);for(r="",e=0,k.lexemesRe.lastIndex=0,t=k.lexemesRe.exec(O);t;)r+=p(O.substring(e,t.index)),(n=c(k,t))?(C+=n[1],r+=u(n[0],p(t[0]))):r+=p(t[0]),e=k.lexemesRe.lastIndex,t=k.lexemesRe.exec(O);return r+p(O.substr(e))}(),O=""}function d(n){E+=n.className?u(n.className,"",!0):"",k=Object.create(n,{parent:{value:k}})}function h(n){var e=n[0],t=n.rule;return t&&t.endSameAsBegin&&(t.endRe=new RegExp(e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")),t.skip?O+=e:(t.excludeBegin&&(O+=e),s(),t.returnBegin||t.excludeBegin||(O=e)),d(t),t.returnBegin?0:e.length}function m(n){var e=n[0],t=a.substr(n.index),r=function n(e,t){if(function(n,e){var t=n&&n.exec(e);return t&&0===t.index}(e.endRe,t)){for(;e.endsParent&&e.parent;)e=e.parent;return e}if(e.endsWithParent)return n(e.parent,t)}(k,t);if(r){var o=k;o.skip?O+=e:(o.returnEnd||o.excludeEnd||(O+=e),s(),o.excludeEnd&&(O=e));do{k.className&&(E+="</span>"),k.skip||k.subLanguage||(C+=k.relevance),k=k.parent}while(k!==r.parent);return r.starts&&(r.endSameAsBegin&&(r.starts.endRe=r.endRe),d(r.starts)),o.returnEnd?0:e.length}}var v={};function g(n,e){var r=e&&e[0];if(O+=n,null==r)return s(),0;if("begin"==v.type&&"end"==e.type&&v.index==e.index&&""===r)return O+=a.slice(e.index,e.index+1),1;if(v=e,"begin"===e.type)return h(e);if("illegal"===e.type&&!t)throw new Error('Illegal lexeme "'+r+'" for mode "'+(k.className||"<unnamed>")+'"');if("end"===e.type){var o=m(e);if(null!=o)return o}return O+=r,r.length}var $=S(n);if(!$)throw console.error(f.replace("{}",n)),new Error('Unknown language: "'+n+'"');b($);var y,k=o||$,x={},E="";for(y=k;y!==$;y=y.parent)y.className&&(E=u(y.className,"",!0)+E);var O="",C=0;try{for(var N,R,A=0;k.terminators.lastIndex=A,N=k.terminators.exec(a);)R=g(a.substring(A,N.index),N),A=N.index+R;for(g(a.substr(A)),y=k;y.parent;y=y.parent)y.className&&(E+="</span>");return{relevance:C,value:E,illegal:!1,language:n,top:k}}catch(e){if(e.message&&-1!==e.message.indexOf("Illegal"))return{illegal:!0,relevance:0,value:p(a)};if(i)return{relevance:0,value:p(a),language:n,top:k,errorRaised:e};throw e}}function _(n,e){e=e||l.languages||t(r);var o={relevance:0,value:p(n)},i=o;return e.filter(S).filter(C).forEach((function(e){var t=w(e,n,!1);t.language=e,t.relevance>i.relevance&&(i=t),t.relevance>o.relevance&&(i=o,o=t)})),i.language&&(o.second_best=i),o}function k(n){return l.tabReplace||l.useBR?n.replace(s,(function(n,e){return l.useBR&&"\n"===n?"<br>":l.tabReplace?e.replace(/\t/g,l.tabReplace):""})):n}function x(n){var t,r,i,a,c,s=function(n){var e,t,r,o,i=n.className+" ";if(i+=n.parentNode?n.parentNode.className:"",t=u.exec(i)){var a=S(t[1]);return a||(console.warn(f.replace("{}",t[1])),console.warn("Falling back to no-highlight mode for this block.",n)),a?t[1]:"no-highlight"}for(e=0,r=(i=i.split(/\s+/)).length;e<r;e++)if(m(o=i[e])||S(o))return o}(n);m(s)||(l.useBR?(t=document.createElement("div")).innerHTML=n.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n"):t=n,c=t.textContent,i=s?w(s,c,!0):_(c),(r=g(t)).length&&((a=document.createElement("div")).innerHTML=i.value,i.value=function(n,t,r){var o=0,i="",a=[];function c(){return n.length&&t.length?n[0].offset!==t[0].offset?n[0].offset<t[0].offset?n:t:"start"===t[0].event?n:t:n.length?n:t}function u(n){i+="<"+h(n)+e.map.call(n.attributes,(function(n){return" "+n.nodeName+'="'+p(n.value).replace(/"/g,"&quot;")+'"'})).join("")+">"}function s(n){i+="</"+h(n)+">"}function f(n){("start"===n.event?u:s)(n.node)}for(;n.length||t.length;){var l=c();if(i+=p(r.substring(o,l[0].offset)),o=l[0].offset,l===n){a.reverse().forEach(s);do{f(l.splice(0,1)[0]),l=c()}while(l===n&&l.length&&l[0].offset===o);a.reverse().forEach(u)}else"start"===l[0].event?a.push(l[0].node):a.pop(),f(l.splice(0,1)[0])}return i+p(r.substr(o))}(r,g(a),c)),i.value=k(i.value),n.innerHTML=i.value,n.className=function(n,e,t){var r=e?o[e]:t,i=[n.trim()];return n.match(/\bhljs\b/)||i.push("hljs"),-1===n.indexOf(r)&&i.push(r),i.join(" ").trim()}(n.className,s,i.language),n.result={language:i.language,re:i.relevance},i.second_best&&(n.second_best={language:i.second_best.language,re:i.second_best.relevance}))}function E(){if(!E.called){E.called=!0;var n=document.querySelectorAll("pre code");e.forEach.call(n,x)}}var O={disableAutodetect:!0};function S(n){return n=(n||"").toLowerCase(),r[n]||r[o[n]]}function C(n){var e=S(n);return e&&!e.disableAutodetect}return n.highlight=w,n.highlightAuto=_,n.fixMarkup=k,n.highlightBlock=x,n.configure=function(n){l=v(l,n)},n.initHighlighting=E,n.initHighlightingOnLoad=function(){window.addEventListener("DOMContentLoaded",E,!1),window.addEventListener("load",E,!1)},n.registerLanguage=function(e,t){var a;try{a=t(n)}catch(n){if(console.error("Language definition for '{}' could not be registered.".replace("{}",e)),!i)throw n;console.error(n),a=O}r[e]=a,a.rawDefinition=t.bind(null,n),a.aliases&&a.aliases.forEach((function(n){o[n]=e}))},n.listLanguages=function(){return t(r)},n.getLanguage=S,n.requireLanguage=function(n){var e=S(n);if(e)return e;throw new Error("The '{}' language is required, but not loaded.".replace("{}",n))},n.autoDetection=C,n.inherit=v,n.debugMode=function(){i=!1},n.IDENT_RE="[a-zA-Z]\\w*",n.UNDERSCORE_IDENT_RE="[a-zA-Z_]\\w*",n.NUMBER_RE="\\b\\d+(\\.\\d+)?",n.C_NUMBER_RE="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",n.BINARY_NUMBER_RE="\\b(0b[01]+)",n.RE_STARTERS_RE="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",n.BACKSLASH_ESCAPE={begin:"\\\\[\\s\\S]",relevance:0},n.APOS_STRING_MODE={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[n.BACKSLASH_ESCAPE]},n.QUOTE_STRING_MODE={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[n.BACKSLASH_ESCAPE]},n.PHRASAL_WORDS_MODE={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},n.COMMENT=function(e,t,r){var o=n.inherit({className:"comment",begin:e,end:t,contains:[]},r||{});return o.contains.push(n.PHRASAL_WORDS_MODE),o.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|XXX):",relevance:0}),o},n.C_LINE_COMMENT_MODE=n.COMMENT("//","$"),n.C_BLOCK_COMMENT_MODE=n.COMMENT("/\\*","\\*/"),n.HASH_COMMENT_MODE=n.COMMENT("#","$"),n.NUMBER_MODE={className:"number",begin:n.NUMBER_RE,relevance:0},n.C_NUMBER_MODE={className:"number",begin:n.C_NUMBER_RE,relevance:0},n.BINARY_NUMBER_MODE={className:"number",begin:n.BINARY_NUMBER_RE,relevance:0},n.CSS_NUMBER_MODE={className:"number",begin:n.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},n.REGEXP_MODE={className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[n.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[n.BACKSLASH_ESCAPE]}]},n.TITLE_MODE={className:"title",begin:n.IDENT_RE,relevance:0},n.UNDERSCORE_TITLE_MODE={className:"title",begin:n.UNDERSCORE_IDENT_RE,relevance:0},n.METHOD_GUARD={begin:"\\.\\s*"+n.UNDERSCORE_IDENT_RE,relevance:0},[n.BACKSLASH_ESCAPE,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.PHRASAL_WORDS_MODE,n.COMMENT,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,n.HASH_COMMENT_MODE,n.NUMBER_MODE,n.C_NUMBER_MODE,n.BINARY_NUMBER_MODE,n.CSS_NUMBER_MODE,n.REGEXP_MODE,n.TITLE_MODE,n.UNDERSCORE_TITLE_MODE,n.METHOD_GUARD].forEach((function(n){!function n(e){Object.freeze(e);var t="function"==typeof e;return Object.getOwnPropertyNames(e).forEach((function(r){!e.hasOwnProperty(r)||null===e[r]||"object"!==c(e[r])&&"function"!=typeof e[r]||t&&("caller"===r||"callee"===r||"arguments"===r)||Object.isFrozen(e[r])||n(e[r])})),e}(n)})),n},r="object"===("undefined"==typeof window?"undefined":c(window))&&window||"object"===("undefined"==typeof self?"undefined":c(self))&&self,e.nodeType?r&&(r.hljs=t({})):t(e)}));var Me=/\r\n|\r|\n/g;function De(n){var e=n.className;if(/hljs-/.test(e)){for(var t=Be(n.innerHTML),r=0,o="";r<t.length;r++){var i=t[r].length>0?t[r]:" ";o+='<span class="'.concat(e,'">').concat(i,"</span>\n")}n.innerHTML=o.trim()}}function Be(n){return 0===n.length?[]:n.split(Me)}function Ie(n){return(n.trim().match(Me)||[]).length}document.addEventListener("copy",(function(n){var e,t=window.getSelection();(function(n){for(var e=n;e;){if(e.className&&-1!==e.className.indexOf("hljs-ln-code"))return!0;e=e.parentNode}return!1})(t.anchorNode)&&(e=-1!==window.navigator.userAgent.indexOf("Edge")?function(n){for(var e=n.toString(),t=n.anchorNode;"TD"!==t.nodeName;)t=t.parentNode;for(var r=n.focusNode;"TD"!==r.nodeName;)r=r.parentNode;var o=parseInt(t.dataset.lineNumber,10),i=parseInt(r.dataset.lineNumber,10);if(o!=i){var a=t.textContent,c=r.textContent;if(o>i){var u=o;o=i,i=u,u=a,a=c,c=u}for(;0!==e.indexOf(a);)a=a.slice(1);for(;-1===e.lastIndexOf(c);)c=c.slice(0,-1);for(var s=a,f=function(n){for(var e=n;"TABLE"!==e.nodeName;)e=e.parentNode;return e}(t),l=o+1;l<i;++l){var d=".".concat("hljs-ln-code","[").concat("data-line-number",'="').concat(l,'"]');s+="\n"+f.querySelector(d).textContent}return s+="\n"+c}return e}(t):t.toString(),n.clipboardData.setData("text/plain",e),n.preventDefault())}));var Ue;function He(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}Pe.registerLanguage("css",(function(n){var e={begin:/(?:[A-Z\_\.\-]+|--[a-zA-Z0-9_-]+)\s*:/,returnBegin:!0,end:";",endsWithParent:!0,contains:[{className:"attribute",begin:/\S/,end:":",excludeEnd:!0,starts:{endsWithParent:!0,excludeEnd:!0,contains:[{begin:/[\w-]+\(/,returnBegin:!0,contains:[{className:"built_in",begin:/[\w-]+/},{begin:/\(/,end:/\)/,contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.CSS_NUMBER_MODE]}]},n.CSS_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,n.C_BLOCK_COMMENT_MODE,{className:"number",begin:"#[0-9A-Fa-f]+"},{className:"meta",begin:"!important"}]}}]};return{case_insensitive:!0,illegal:/[=\/|'\$]/,contains:[n.C_BLOCK_COMMENT_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/},{className:"selector-class",begin:/\.[A-Za-z0-9_-]+/},{className:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},{className:"selector-pseudo",begin:/:(:)?[a-zA-Z0-9\_\-\+\(\)"'.]+/},{begin:"@(page|font-face)",lexemes:"@[a-z-]+",keywords:"@page @font-face"},{begin:"@",end:"[{;]",illegal:/:/,returnBegin:!0,contains:[{className:"keyword",begin:/@\-?\w[\w]*(\-\w+)*/},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:"and or not only",contains:[{begin:/[a-z-]+:/,className:"attribute"},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"[a-zA-Z-][a-zA-Z0-9_-]*",relevance:0},{begin:"{",end:"}",illegal:/\S/,contains:[n.C_BLOCK_COMMENT_MODE,e]}]}})),Pe.registerLanguage("diff",(function(n){return{aliases:["patch"],contains:[{className:"meta",relevance:10,variants:[{begin:/^@@ +\-\d+,\d+ +\+\d+,\d+ +@@$/},{begin:/^\*\*\* +\d+,\d+ +\*\*\*\*$/},{begin:/^\-\-\- +\d+,\d+ +\-\-\-\-$/}]},{className:"comment",variants:[{begin:/Index: /,end:/$/},{begin:/={3,}/,end:/$/},{begin:/^\-{3}/,end:/$/},{begin:/^\*{3} /,end:/$/},{begin:/^\+{3}/,end:/$/},{begin:/^\*{15}$/}]},{className:"addition",begin:"^\\+",end:"$"},{className:"deletion",begin:"^\\-",end:"$"},{className:"addition",begin:"^\\!",end:"$"}]}})),Pe.registerLanguage("dockerfile",(function(n){return{aliases:["docker"],case_insensitive:!0,keywords:"from maintainer expose env arg user onbuild stopsignal",contains:[n.HASH_COMMENT_MODE,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.NUMBER_MODE,{beginKeywords:"run cmd entrypoint volume add copy workdir label healthcheck shell",starts:{end:/[^\\]$/,subLanguage:"bash"}}],illegal:"</"}})),Pe.registerLanguage("go",(function(n){var e={keyword:"break default func interface select case map struct chan else goto package switch const fallthrough if range type continue for import return var go defer bool byte complex64 complex128 float32 float64 int8 int16 int32 int64 string uint8 uint16 uint32 uint64 int uint uintptr rune",literal:"true false iota nil",built_in:"append cap close complex copy imag len make new panic print println real recover delete"};return{aliases:["golang"],keywords:e,illegal:"</",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,{className:"string",variants:[n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{begin:n.C_NUMBER_RE+"[i]",relevance:1},n.C_NUMBER_MODE]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[n.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,keywords:e,illegal:/["']/}]}]}})),Pe.registerLanguage("http",(function(n){return{aliases:["https"],illegal:"\\S",contains:[{begin:"^HTTP/[0-9\\.]+",end:"$",contains:[{className:"number",begin:"\\b\\d{3}\\b"}]},{begin:"^[A-Z]+ (.*?) HTTP/[0-9\\.]+$",returnBegin:!0,end:"$",contains:[{className:"string",begin:" ",end:" ",excludeBegin:!0,excludeEnd:!0},{begin:"HTTP/[0-9\\.]+"},{className:"keyword",begin:"[A-Z]+"}]},{className:"attribute",begin:"^\\w",end:": ",excludeEnd:!0,illegal:"\\n|\\s|=",starts:{end:"$",relevance:0}},{begin:"\\n\\n",starts:{subLanguage:[],endsWithParent:!0}}]}})),Pe.registerLanguage("javascript",(function(n){var e="<>",t="</>",r={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/},o="[A-Za-z$_][0-9A-Za-z$_]*",i={keyword:"in of if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const export super debugger as async await static import from as",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document Symbol Set Map WeakSet WeakMap Proxy Reflect Promise"},a={className:"number",variants:[{begin:"\\b(0[bB][01]+)n?"},{begin:"\\b(0[oO][0-7]+)n?"},{begin:n.C_NUMBER_RE+"n?"}],relevance:0},c={className:"subst",begin:"\\$\\{",end:"\\}",keywords:i,contains:[]},u={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,c],subLanguage:"xml"}},s={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,c],subLanguage:"css"}},f={className:"string",begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE,c]};c.contains=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,u,s,f,a,n.REGEXP_MODE];var l=c.contains.concat([n.C_BLOCK_COMMENT_MODE,n.C_LINE_COMMENT_MODE]);return{aliases:["js","jsx","mjs","cjs"],keywords:i,contains:[{className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},{className:"meta",begin:/^#!/,end:/$/},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,u,s,f,n.C_LINE_COMMENT_MODE,n.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+",contains:[{className:"type",begin:"\\{",end:"\\}",relevance:0},{className:"variable",begin:o+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),n.C_BLOCK_COMMENT_MODE,a,{begin:/[{,\n]\s*/,relevance:0,contains:[{begin:o+"\\s*:",returnBegin:!0,relevance:0,contains:[{className:"attr",begin:o,relevance:0}]}]},{begin:"("+n.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,n.REGEXP_MODE,{className:"function",begin:"(\\(.*?\\)|"+o+")\\s*=>",returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:o},{begin:/\(\s*\)/},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:i,contains:l}]}]},{className:"",begin:/\s/,end:/\s*/,skip:!0},{variants:[{begin:e,end:t},{begin:r.begin,end:r.end}],subLanguage:"xml",contains:[{begin:r.begin,end:r.end,skip:!0,contains:["self"]}]}],relevance:0},{className:"function",beginKeywords:"function",end:/\{/,excludeEnd:!0,contains:[n.inherit(n.TITLE_MODE,{begin:o}),{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,contains:l}],illegal:/\[|%/},{begin:/\$[(.]/},n.METHOD_GUARD,{className:"class",beginKeywords:"class",end:/[{;=]/,excludeEnd:!0,illegal:/[:"\[\]]/,contains:[{beginKeywords:"extends"},n.UNDERSCORE_TITLE_MODE]},{beginKeywords:"constructor get set",end:/\{/,excludeEnd:!0}],illegal:/#(?!!)/}})),Pe.registerLanguage("markdown",(function(n){return{aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$"},{begin:"^.+?\\n[=-]{2,}$"}]},{begin:"<",end:">",subLanguage:"xml",relevance:0},{className:"bullet",begin:"^\\s*([*+-]|(\\d+\\.))\\s+"},{className:"strong",begin:"[*_]{2}.+?[*_]{2}"},{className:"emphasis",variants:[{begin:"\\*.+?\\*"},{begin:"_.+?_",relevance:0}]},{className:"quote",begin:"^>\\s+",end:"$"},{className:"code",variants:[{begin:"^```\\w*\\s*$",end:"^```[ ]*$"},{begin:"`.+?`"},{begin:"^( {4}|\\t)",end:"$",relevance:0}]},{begin:"^[-\\*]{3,}",end:"$"},{begin:"\\[.+?\\][\\(\\[].*?[\\)\\]]",returnBegin:!0,contains:[{className:"string",begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0,relevance:0},{className:"link",begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}],relevance:10},{begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]}]}})),Pe.registerLanguage("mojolicious",(function(n){return{subLanguage:"xml",contains:[{className:"meta",begin:"^__(END|DATA)__$"},{begin:"^\\s*%{1,2}={0,2}",end:"$",subLanguage:"perl"},{begin:"<%{1,2}={0,2}",end:"={0,1}%>",subLanguage:"perl",excludeBegin:!0,excludeEnd:!0}]}})),Pe.registerLanguage("nginx",(function(n){var e={className:"variable",variants:[{begin:/\$\d+/},{begin:/\$\{/,end:/}/},{begin:"[\\$\\@]"+n.UNDERSCORE_IDENT_RE}]},t={endsWithParent:!0,lexemes:"[a-z/_]+",keywords:{literal:"on off yes no true false none blocked debug info notice warn error crit select break last permanent redirect kqueue rtsig epoll poll /dev/poll"},relevance:0,illegal:"=>",contains:[n.HASH_COMMENT_MODE,{className:"string",contains:[n.BACKSLASH_ESCAPE,e],variants:[{begin:/"/,end:/"/},{begin:/'/,end:/'/}]},{begin:"([a-z]+):/",end:"\\s",endsWithParent:!0,excludeEnd:!0,contains:[e]},{className:"regexp",contains:[n.BACKSLASH_ESCAPE,e],variants:[{begin:"\\s\\^",end:"\\s|{|;",returnEnd:!0},{begin:"~\\*?\\s+",end:"\\s|{|;",returnEnd:!0},{begin:"\\*(\\.[a-z\\-]+)+"},{begin:"([a-z\\-]+\\.)+\\*"}]},{className:"number",begin:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{className:"number",begin:"\\b\\d+[kKmMgGdshdwy]*\\b",relevance:0},e]};return{aliases:["nginxconf"],contains:[n.HASH_COMMENT_MODE,{begin:n.UNDERSCORE_IDENT_RE+"\\s+{",returnBegin:!0,end:"{",contains:[{className:"section",begin:n.UNDERSCORE_IDENT_RE}],relevance:0},{begin:n.UNDERSCORE_IDENT_RE+"\\s",end:";|{",returnBegin:!0,contains:[{className:"attribute",begin:n.UNDERSCORE_IDENT_RE,starts:t}],relevance:0}],illegal:"[^\\s\\}]"}})),Pe.registerLanguage("perl",(function(n){var e="getpwent getservent quotemeta msgrcv scalar kill dbmclose undef lc ma syswrite tr send umask sysopen shmwrite vec qx utime local oct semctl localtime readpipe do return format read sprintf dbmopen pop getpgrp not getpwnam rewinddir qqfileno qw endprotoent wait sethostent bless s|0 opendir continue each sleep endgrent shutdown dump chomp connect getsockname die socketpair close flock exists index shmgetsub for endpwent redo lstat msgctl setpgrp abs exit select print ref gethostbyaddr unshift fcntl syscall goto getnetbyaddr join gmtime symlink semget splice x|0 getpeername recv log setsockopt cos last reverse gethostbyname getgrnam study formline endhostent times chop length gethostent getnetent pack getprotoent getservbyname rand mkdir pos chmod y|0 substr endnetent printf next open msgsnd readdir use unlink getsockopt getpriority rindex wantarray hex system getservbyport endservent int chr untie rmdir prototype tell listen fork shmread ucfirst setprotoent else sysseek link getgrgid shmctl waitpid unpack getnetbyname reset chdir grep split require caller lcfirst until warn while values shift telldir getpwuid my getprotobynumber delete and sort uc defined srand accept package seekdir getprotobyname semop our rename seek if q|0 chroot sysread setpwent no crypt getc chown sqrt write setnetent setpriority foreach tie sin msgget map stat getlogin unless elsif truncate exec keys glob tied closedirioctl socket readlink eval xor readline binmode setservent eof ord bind alarm pipe atan2 getgrent exp time push setgrent gt lt or ne m|0 break given say state when",t={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:e},r={begin:"->{",end:"}"},o={variants:[{begin:/\$\d/},{begin:/[\$%@](\^\w\b|#\w+(::\w+)*|{\w+}|\w+(::\w*)*)/},{begin:/[\$%@][^\s\w{]/,relevance:0}]},i=[n.BACKSLASH_ESCAPE,t,o],a=[o,n.HASH_COMMENT_MODE,n.COMMENT("^\\=\\w","\\=cut",{endsWithParent:!0}),r,{className:"string",contains:i,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*\\<",end:"\\>",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[n.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE]},{begin:"{\\w+}",contains:[],relevance:0},{begin:"-?\\w+\\s*\\=\\>",contains:[],relevance:0}]},{className:"number",begin:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",relevance:0},{begin:"(\\/\\/|"+n.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[n.HASH_COMMENT_MODE,{className:"regexp",begin:"(s|tr|y)/(\\\\.|[^/])*/(\\\\.|[^/])*/[a-z]*",relevance:10},{className:"regexp",begin:"(m|qr)?/",end:"/[a-z]*",contains:[n.BACKSLASH_ESCAPE],relevance:0}]},{className:"function",beginKeywords:"sub",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[n.TITLE_MODE]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return t.contains=a,r.contains=a,{aliases:["pl","pm"],lexemes:/[\w\.]+/,keywords:e,contains:a}})),Pe.registerLanguage("python",(function(n){var e={keyword:"and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del or def lambda async await nonlocal|10",built_in:"Ellipsis NotImplemented",literal:"False None True"},t={className:"meta",begin:/^(>>>|\.\.\.) /},r={className:"subst",begin:/\{/,end:/\}/,keywords:e,illegal:/#/},o={begin:/\{\{/,relevance:0},i={className:"string",contains:[n.BACKSLASH_ESCAPE],variants:[{begin:/(u|b)?r?'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,t],relevance:10},{begin:/(u|b)?r?"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,t],relevance:10},{begin:/(fr|rf|f)'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,t,o,r]},{begin:/(fr|rf|f)"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,t,o,r]},{begin:/(u|r|ur)'/,end:/'/,relevance:10},{begin:/(u|r|ur)"/,end:/"/,relevance:10},{begin:/(b|br)'/,end:/'/},{begin:/(b|br)"/,end:/"/},{begin:/(fr|rf|f)'/,end:/'/,contains:[n.BACKSLASH_ESCAPE,o,r]},{begin:/(fr|rf|f)"/,end:/"/,contains:[n.BACKSLASH_ESCAPE,o,r]},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},a={className:"number",relevance:0,variants:[{begin:n.BINARY_NUMBER_RE+"[lLjJ]?"},{begin:"\\b(0o[0-7]+)[lLjJ]?"},{begin:n.C_NUMBER_RE+"[lLjJ]?"}]},c={className:"params",begin:/\(/,end:/\)/,contains:["self",t,a,i,n.HASH_COMMENT_MODE]};return r.contains=[i,a,t],{aliases:["py","gyp","ipython"],keywords:e,illegal:/(<\/|->|\?)|=>/,contains:[t,a,{beginKeywords:"if",relevance:0},i,n.HASH_COMMENT_MODE,{variants:[{className:"function",beginKeywords:"def"},{className:"class",beginKeywords:"class"}],end:/:/,illegal:/[${=;\n,]/,contains:[n.UNDERSCORE_TITLE_MODE,c,{begin:/->/,endsWithParent:!0,keywords:"None"}]},{className:"meta",begin:/^[\t ]*@/,end:/$/},{begin:/\b(print|exec)\(/}]}})),Pe.registerLanguage("scss",(function(n){var e={className:"variable",begin:"(\\$[a-zA-Z-][a-zA-Z0-9_-]*)\\b"},t={className:"number",begin:"#[0-9A-Fa-f]+"};n.CSS_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,n.C_BLOCK_COMMENT_MODE;return{case_insensitive:!0,illegal:"[=/|']",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,{className:"selector-id",begin:"\\#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},{className:"selector-attr",begin:"\\[",end:"\\]",illegal:"$"},{className:"selector-tag",begin:"\\b(a|abbr|acronym|address|area|article|aside|audio|b|base|big|blockquote|body|br|button|canvas|caption|cite|code|col|colgroup|command|datalist|dd|del|details|dfn|div|dl|dt|em|embed|fieldset|figcaption|figure|footer|form|frame|frameset|(h[1-6])|head|header|hgroup|hr|html|i|iframe|img|input|ins|kbd|keygen|label|legend|li|link|map|mark|meta|meter|nav|noframes|noscript|object|ol|optgroup|option|output|p|param|pre|progress|q|rp|rt|ruby|samp|script|section|select|small|span|strike|strong|style|sub|sup|table|tbody|td|textarea|tfoot|th|thead|time|title|tr|tt|ul|var|video)\\b",relevance:0},{className:"selector-pseudo",begin:":(visited|valid|root|right|required|read-write|read-only|out-range|optional|only-of-type|only-child|nth-of-type|nth-last-of-type|nth-last-child|nth-child|not|link|left|last-of-type|last-child|lang|invalid|indeterminate|in-range|hover|focus|first-of-type|first-line|first-letter|first-child|first|enabled|empty|disabled|default|checked|before|after|active)"},{className:"selector-pseudo",begin:"::(after|before|choices|first-letter|first-line|repeat-index|repeat-item|selection|value)"},e,{className:"attribute",begin:"\\b(src|z-index|word-wrap|word-spacing|word-break|width|widows|white-space|visibility|vertical-align|unicode-bidi|transition-timing-function|transition-property|transition-duration|transition-delay|transition|transform-style|transform-origin|transform|top|text-underline-position|text-transform|text-shadow|text-rendering|text-overflow|text-indent|text-decoration-style|text-decoration-line|text-decoration-color|text-decoration|text-align-last|text-align|tab-size|table-layout|right|resize|quotes|position|pointer-events|perspective-origin|perspective|page-break-inside|page-break-before|page-break-after|padding-top|padding-right|padding-left|padding-bottom|padding|overflow-y|overflow-x|overflow-wrap|overflow|outline-width|outline-style|outline-offset|outline-color|outline|orphans|order|opacity|object-position|object-fit|normal|none|nav-up|nav-right|nav-left|nav-index|nav-down|min-width|min-height|max-width|max-height|mask|marks|margin-top|margin-right|margin-left|margin-bottom|margin|list-style-type|list-style-position|list-style-image|list-style|line-height|letter-spacing|left|justify-content|initial|inherit|ime-mode|image-orientation|image-resolution|image-rendering|icon|hyphens|height|font-weight|font-variant-ligatures|font-variant|font-style|font-stretch|font-size-adjust|font-size|font-language-override|font-kerning|font-feature-settings|font-family|font|float|flex-wrap|flex-shrink|flex-grow|flex-flow|flex-direction|flex-basis|flex|filter|empty-cells|display|direction|cursor|counter-reset|counter-increment|content|column-width|column-span|column-rule-width|column-rule-style|column-rule-color|column-rule|column-gap|column-fill|column-count|columns|color|clip-path|clip|clear|caption-side|break-inside|break-before|break-after|box-sizing|box-shadow|box-decoration-break|bottom|border-width|border-top-width|border-top-style|border-top-right-radius|border-top-left-radius|border-top-color|border-top|border-style|border-spacing|border-right-width|border-right-style|border-right-color|border-right|border-radius|border-left-width|border-left-style|border-left-color|border-left|border-image-width|border-image-source|border-image-slice|border-image-repeat|border-image-outset|border-image|border-color|border-collapse|border-bottom-width|border-bottom-style|border-bottom-right-radius|border-bottom-left-radius|border-bottom-color|border-bottom|border|background-size|background-repeat|background-position|background-origin|background-image|background-color|background-clip|background-attachment|background-blend-mode|background|backface-visibility|auto|animation-timing-function|animation-play-state|animation-name|animation-iteration-count|animation-fill-mode|animation-duration|animation-direction|animation-delay|animation|align-self|align-items|align-content)\\b",illegal:"[^\\s]"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:":",end:";",contains:[e,t,n.CSS_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,{className:"meta",begin:"!important"}]},{begin:"@(page|font-face)",lexemes:"@[a-z-]+",keywords:"@page @font-face"},{begin:"@",end:"[{;]",returnBegin:!0,keywords:"and or not only",contains:[{begin:"@[a-z-]+",className:"keyword"},e,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,t,n.CSS_NUMBER_MODE]}]}})),Pe.registerLanguage("shell",(function(n){return{aliases:["console"],contains:[{className:"meta",begin:"^\\s{0,3}[/\\w\\d\\[\\]()@-]*[>%$#]",starts:{end:"$",subLanguage:"bash"}}]}})),Pe.registerLanguage("xml",(function(n){var e={className:"symbol",begin:"&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;"},t={begin:"\\s",contains:[{className:"meta-keyword",begin:"#?[a-z_][a-z1-9_-]+",illegal:"\\n"}]},r=n.inherit(t,{begin:"\\(",end:"\\)"}),o=n.inherit(n.APOS_STRING_MODE,{className:"meta-string"}),i=n.inherit(n.QUOTE_STRING_MODE,{className:"meta-string"}),a={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:"[A-Za-z0-9\\._:-]+",relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[e]},{begin:/'/,end:/'/,contains:[e]},{begin:/[^\s"'=<>`]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,contains:[{className:"meta",begin:"<![a-z]",end:">",relevance:10,contains:[t,i,o,r,{begin:"\\[",end:"\\]",contains:[{className:"meta",begin:"<![a-z]",end:">",contains:[t,r,i,o]}]}]},n.COMMENT("\x3c!--","--\x3e",{relevance:10}),{begin:"<\\!\\[CDATA\\[",end:"\\]\\]>",relevance:10},e,{className:"meta",begin:/<\?xml/,end:/\?>/,relevance:10},{begin:/<\?(php)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},n.inherit(n.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),n.inherit(n.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]},{className:"tag",begin:"<style(?=\\s|>)",end:">",keywords:{name:"style"},contains:[a],starts:{end:"</style>",returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:"<script(?=\\s|>)",end:">",keywords:{name:"script"},contains:[a],starts:{end:"<\/script>",returnEnd:!0,subLanguage:["actionscript","javascript","handlebars","xml"]}},{className:"tag",begin:"</?",end:"/?>",contains:[{className:"name",begin:/[^\/><\s]+/,relevance:0},a]}]}})),Pe.registerLanguage("yaml",(function(n){var e={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[n.BACKSLASH_ESCAPE,{className:"template-variable",variants:[{begin:"{{",end:"}}"},{begin:"%{",end:"}"}]}]};return{case_insensitive:!0,aliases:["yml","YAML","yaml"],contains:[{className:"attr",variants:[{begin:"\\w[\\w :\\/.-]*:(?=[ \t]|$)"},{begin:'"\\w[\\w :\\/.-]*":(?=[ \t]|$)'},{begin:"'\\w[\\w :\\/.-]*':(?=[ \t]|$)"}]},{className:"meta",begin:"^---s*$",relevance:10},{className:"string",begin:"[\\|>]([0-9]?[+-])?[ ]*\\n( *)[\\S ]+\\n(\\2[\\S ]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!"+n.UNDERSCORE_IDENT_RE},{className:"type",begin:"!!"+n.UNDERSCORE_IDENT_RE},{className:"meta",begin:"&"+n.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+n.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"\\-(?=[ ]|$)",relevance:0},n.HASH_COMMENT_MODE,{beginKeywords:"true false yes no null",keywords:{literal:"true false yes no null"}},{className:"number",begin:n.C_NUMBER_RE+"\\b"},e]}})),(Ue=Pe).lineNumbersBlock=function(n,e){Ue.highlightBlock(n,e),n.innerHTML=function(n,e){var t=(e=e||{singleLine:!1}).singleLine?0:1;return function n(e){var t=e.childNodes;for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];Ie(o.textContent)>0&&(o.childNodes.length>0?n(o):De(o.parentNode))}}(n),function(n,e){var t=Be(n);if(""===t[t.length-1].trim()&&t.pop(),t.length>e){for(var r="",o=0,i=t.length;o<i;o++){var a=o+1;r+="<tr>"+'<td class="'.concat("hljs-ln-line"," ").concat("hljs-ln-numbers",'" ').concat("data-line-number",'="').concat(a,'">')+'<div class="'.concat("hljs-ln-n",'" ').concat("data-line-number",'="').concat(a,'"></div>')+"</td>"+'<td class="'.concat("hljs-ln-line"," ").concat("hljs-ln-code",'" ').concat("data-line-number",'="').concat(a,'">')+(t[o].length>0?t[o]:" ")+"</td></tr>"}return'<table class="'.concat("hljs-ln",'">').concat(r,"</table>")}return n}(n.innerHTML,t)}(n,e)};var qe={0:"Jan",1:"Feb",2:"March",3:"Apr",4:"May",5:"Jun",6:"July",7:"Aug",8:"Sept",9:"Oct",10:"Nov",11:"Dec"},ze={H:"_getPaddedHours",M:"_getPaddedMinutes",S:"_getPaddedSeconds",b:"_getMonthAbbr",e:"getDate",Y:"getFullYear"},Fe=function(n){a(r,n);var e=He(r);function r(n){return t(this,r),"string"!=typeof n||n.match(/Z$/)||(n+="Z"),e.call(this,n||new Date)}return R(r,[{key:"format",value:function(n){var e=this;return n.replace(/%(\w)/g,(function(n,t){return ze[t]?e[ze[t]]():t}))}},{key:"getHumanDate",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.format("%b %e"),t=new r,o=this.getYear()==t.getYear();return o&&!n.year||(e+=", "+this.getFullYear()),e}},{key:"setDate",value:function(n,e){return e?b(s(r.prototype),"setUTCDate",this).call(this,n):b(s(r.prototype),"setDate",this).call(this,n),this}},{key:"setFullYear",value:function(n,e){return e?b(s(r.prototype),"setUTCFullYear",this).call(this,n):b(s(r.prototype),"setFullYear",this).call(this,n),this}},{key:"setHours",value:function(n,e){return e?b(s(r.prototype),"setUTCHours",this).call(this,n):b(s(r.prototype),"setHours",this).call(this,n),this}},{key:"setMilliseconds",value:function(n,e){return e?b(s(r.prototype),"setUTCMilliseconds",this).call(this,n):b(s(r.prototype),"setMilliseconds",this).call(this,n),this}},{key:"setMinutes",value:function(n,e){return e?b(s(r.prototype),"setUTCMinutes",this).call(this,n):b(s(r.prototype),"setMinutes",this).call(this,n),this}},{key:"setMonth",value:function(n,e){return e?b(s(r.prototype),"setUTCMonth",this).call(this,n):b(s(r.prototype),"setMonth",this).call(this,n),this}},{key:"setSeconds",value:function(n,e){return e?b(s(r.prototype),"setUTCSeconds",this).call(this,n):b(s(r.prototype),"setSeconds",this).call(this,n),this}},{key:"setTime",value:function(n){return b(s(r.prototype),"setTime",this).call(this,n),this}},{key:"setYear",value:function(n){return this.setYear(n),this}},{key:"toEpoch",value:function(){return this.getTime()/1e3}},{key:"_getMonthAbbr",value:function(){return qe[this.getMonth()]||""}},{key:"_getPaddedHours",value:function(){return String(this.getHours()).padStart(2,"0")}},{key:"_getPaddedMinutes",value:function(){return String(this.getMinutes()).padStart(2,"0")}},{key:"_getPaddedSeconds",value:function(){return String(this.getSeconds()).padStart(2,"0")}}]),r}(x(Date));function Ke(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}var We=function(n){a(r,n);var e=Ke(r);function r(n){var o;return t(this,r),(o=e.call(this)).prop("ro","api",n.api),o.prop("ro","defaultParams",n.defaultParams||{}),o.prop("ro","id",n.id),o.prop("ro","req",{body:null,headers:{}}),o.prop("ro","res",{body:{},headers:{}}),o.prop("rw","err",null),o.prop("rw","status","pending"),o}return R(r,[{key:"error",value:function(n,e){if(n)return this.update({err:Array.isArray(n)?n:[{message:n,source:e}],status:"error"});if(!this.err||!this.err.length)return"";var t=this.err[0],r=t.path&&t.path.match(/\w$/)&&t.path.split("/").pop();return r?r+": "+t.message:t.message}},{key:"perform",value:function(n){var e=this;return this._promise||(this._promise=new Promise((function(t){e.api.spec(e.id).then((function(t){if(!t)throw'Unknown operationId "'+e.id+'".';var r=e._paramsToRequest(t,n||e.defaultParams),o=$(r,2),i=o[0],a=o[1];if(!i)throw a;return e.update({status:"loading"}).emit("start",a),ye.object(a.body)&&!ye.function(a.body.has)&&(a.body=JSON.stringify(a.body)),fetch(i,a)})).then((function(n){return Promise.all([n,n.json()])})).then((function(n){var r=$(n,2),o=r[0],i=r[1];delete e._promise,t(e.parse(o,i))})).catch((function(n){delete e._promise,t(e.error(Array.isArray(n)?n:'Failed fetching operationId "'+e.id+'": '+n,"fetch"))}))})))}},{key:"is",value:function(n){return this.status==n}},{key:"parse",value:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.body;this.res.body=e||n,this.res.status=n.status||"201",n.headers&&(this.res.headers=n.headers);var t=null;return String(this.res.status).match(/^[23]/)||(t=e&&e.errors?e.errors:[{message:n.statusText||"Unknown error."}]),this.update({err:t,status:t?"error":"success"})}},{key:"reset",value:function(){return this.res.body={},this.res.headers={},this.res.status=0,this.update({err:null,status:"pending"})}},{key:"_extractValue",value:function(n,e){if(e.schema&&"form"==(n.tagName||"").toLowerCase())return Object.keys(e.schema.properties).reduce((function(e,t){var r=n[t];return r&&("checkbox"!=r.type||r.checked)?(e[t]=r.value,e):e}),{});if(n[e.name]&&n[e.name].tagName)return n[e.name].value;if(e.schema){var t={};return Object.keys(e.schema.properties).forEach((function(e){t[e]=n[e]})),t}return n[e.name]}},{key:"_hasProperty",value:function(n,e){return"body"==e.in||("formData"==e.in?n.formData.has(e.name):"form"==(n.tagName||"").toLowerCase()?!!n[e.name]:n.hasOwnProperty(e.name))}},{key:"_paramsToRequest",value:function(n,e){var t=this,r={headers:this.req.headers,method:n.method},o=new URL(n.url),i=[];return(n.parameters||[]).forEach((function(n){if(!t._hasProperty(e,n)&&n.required)i.push({message:"Missing property.",path:"/"+n.name});else{if(!t._hasProperty(e,n)&&!n.required)return;if("path"==n.in){var a=new RegExp("(%7B|\\{)"+ke(n.name)+"(%7D|\\})","i");o.pathname=o.pathname.replace(a,encodeURIComponent(t._extractValue(e,n)))}else if("query"==n.in)o.searchParams.set(n.name,t._extractValue(e,n));else if("formData"==n.in)delete r.headers["Content-Type"],r.body=e.formData;else if("body"==n.in)r.body=t._extractValue(e,n);else{if("header"!=n.in)throw"[Api] Parameter in:"+n.in+" is not supported.";r.header[n.name]=t._extractValue(e,n.name)}}})),i.length?[null,i]:[o,r]}}]),r}(Ae);function Ge(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}var Ye=function n(e,t,r){var o=n.singletons[e]||(n.singletons[e]=new Ve);return t?o.operation(t,r):o};Ye.singletons={};var Ve=function(n){a(o,n);var e,r=Ge(o);function o(){var n;return t(this,o),(n=r.call(this)).prop("rw","protocol",location.protocol||"http"),n.prop("rw","url",""),n}return R(o,[{key:"operation",value:function(n,e){var t=new We({api:this,id:n,defaultParams:e});return t.req.headers={"Content-Type":"application/json"},t}},{key:"spec",value:(e=d(f.mark((function n(e){var t,r,o=this;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this._ops||!e){n.next=2;break}return n.abrupt("return",this._ops[e]);case 2:if(!this._spec){n.next=4;break}return n.abrupt("return",this._spec);case 4:return n.next=6,fetch(this.url);case 6:return t=n.sent,n.next=9,t.json();case 9:if(r=n.sent,this._ops={},this._spec=r,Object.keys(r.paths).forEach((function(n){Object.keys(r.paths[n]).forEach((function(e){var t=r.paths[n][e],i=t.operationId;i&&(t.method=e.toUpperCase(),t.url=o.protocol+"//"+r.host+r.basePath+n+".json",t.parameters=(t.parameters||[]).map((function(n){return o._resolveRef(n)})),o._ops[i]=t)}))})),!this._ops||!e){n.next=15;break}return n.abrupt("return",this._ops[e]);case 15:if(!this._spec){n.next=17;break}return n.abrupt("return",this._spec);case 17:case"end":return n.stop()}}),n,this)}))),function(n){return e.apply(this,arguments)})},{key:"toFunction",value:function(){var n=this;return function(e,t){return e?n.operation(e,t):n}}},{key:"_resolveRef",value:function(n){var e=this,t=n;if(n.$ref){var r=n.$ref.replace(/^#\//,"").split("/");for(t=this._spec;r.length;)t=t[r.shift()]}return ye.object(t)&&Object.keys(t).forEach((function(n){t[n]=e._resolveRef(t[n])})),t}}]),o}(Ae),Je=function(){var n={base:"https://twemoji.maxcdn.com/v/12.1.5/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:function(n){var e="string"==typeof n?parseInt(n,16):n;if(e<65536)return c(e);return c(55296+((e-=65536)>>10),56320+(1023&e))},toCodePoint:v},onerror:function(){this.parentNode&&this.parentNode.replaceChild(u(this.alt,!1),this)},parse:function(e,t){t&&"function"!=typeof t||(t={callback:t});return("string"==typeof e?d:l)(e,{callback:t.callback||s,attributes:"function"==typeof t.attributes?t.attributes:h,base:"string"==typeof t.base?t.base:n.base,ext:t.ext||n.ext,size:t.folder||(r=t.size||n.size,"number"==typeof r?r+"x"+r:r),className:t.className||n.className,onerror:t.onerror||n.onerror});var r},replace:m,test:function(n){t.lastIndex=0;var e=t.test(n);return t.lastIndex=0,e}},e={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},t=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[#*0-9]\ufe0f?\u20e3|(?:[©®\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5\udeeb\udeec\udef4-\udefa\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd71\udd73-\udd76\udd7a-\udda2\udda5-\uddaa\uddae-\uddb4\uddb7\uddba\uddbc-\uddca\uddd0\uddde-\uddff\ude70-\ude73\ude78-\ude7a\ude80-\ude82\ude90-\ude95]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,r=/\uFE0F/g,o=String.fromCharCode(8205),i=/[&<>'"]/g,a=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,c=String.fromCharCode;return n;function u(n,e){return document.createTextNode(e?n.replace(r,""):n)}function s(n,e){return"".concat(e.base,e.size,"/",n,e.ext)}function f(n){return v(n.indexOf(o)<0?n.replace(r,""):n)}function l(n,e){for(var r,o,i,c,s,l,d,p,h,m,v,g,$,y=function n(e,t){for(var r,o,i=e.childNodes,c=i.length;c--;)3===(o=(r=i[c]).nodeType)?t.push(r):1!==o||"ownerSVGElement"in r||a.test(r.nodeName.toLowerCase())||n(r,t);return t}(n,[]),b=y.length;b--;){for(i=!1,c=document.createDocumentFragment(),l=(s=y[b]).nodeValue,p=0;d=t.exec(l);){if((h=d.index)!==p&&c.appendChild(u(l.slice(p,h),!0)),g=f(v=d[0]),p=h+v.length,$=e.callback(g,e),g&&$){for(o in(m=new Image).onerror=e.onerror,m.setAttribute("draggable","false"),r=e.attributes(v,g))r.hasOwnProperty(o)&&0!==o.indexOf("on")&&!m.hasAttribute(o)&&m.setAttribute(o,r[o]);m.className=e.className,m.alt=v,m.src=$,i=!0,c.appendChild(m)}m||c.appendChild(u(v,!1)),m=null}i&&(p<l.length&&c.appendChild(u(l.slice(p),!0)),s.parentNode.replaceChild(c,s))}return n}function d(n,e){return m(n,(function(n){var t,r,o=n,a=f(n),c=e.callback(a,e);if(a&&c){for(r in o="<img ".concat('class="',e.className,'" ','draggable="false" ','alt="',n,'"',' src="',c,'"'),t=e.attributes(n,a))t.hasOwnProperty(r)&&0!==r.indexOf("on")&&-1===o.indexOf(" "+r+"=")&&(o=o.concat(" ",r,'="',t[r].replace(i,p),'"'));o=o.concat("/>")}return o}))}function p(n){return e[n]}function h(){return null}function m(n,e){return String(n).replace(t,e)}function v(n,e){for(var t=[],r=0,o=0,i=0;i<n.length;)r=n.charCodeAt(i++),o?(t.push((65536+(o-55296<<10)+(r-56320)).toString(16)),o=0):55296<=r&&r<=56319?o=r:t.push(r.toString(16));return t.join(e||"-")}}(),Qe=Object.prototype.hasOwnProperty,Ze=function(){for(var n=[],e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n}(),Xe=function(n,e){for(var t=e&&e.plainObjects?Object.create(null):{},r=0;r<n.length;++r)void 0!==n[r]&&(t[r]=n[r]);return t},nt={arrayToObject:Xe,assign:function(n,e){return Object.keys(e).reduce((function(n,t){return n[t]=e[t],n}),n)},compact:function(n){for(var e=[{obj:{o:n},prop:"o"}],t=[],r=0;r<e.length;++r)for(var o=e[r],i=o.obj[o.prop],a=Object.keys(i),u=0;u<a.length;++u){var s=a[u],f=i[s];"object"===c(f)&&null!==f&&-1===t.indexOf(f)&&(e.push({obj:i,prop:s}),t.push(f))}return function(n){for(var e;n.length;){var t=n.pop();if(e=t.obj[t.prop],Array.isArray(e)){for(var r=[],o=0;o<e.length;++o)void 0!==e[o]&&r.push(e[o]);t.obj[t.prop]=r}}return e}(e)},decode:function(n){try{return decodeURIComponent(n.replace(/\+/g," "))}catch(e){return n}},encode:function(n){if(0===n.length)return n;for(var e="string"==typeof n?n:String(n),t="",r=0;r<e.length;++r){var o=e.charCodeAt(r);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?t+=e.charAt(r):o<128?t+=Ze[o]:o<2048?t+=Ze[192|o>>6]+Ze[128|63&o]:o<55296||o>=57344?t+=Ze[224|o>>12]+Ze[128|o>>6&63]+Ze[128|63&o]:(r+=1,o=65536+((1023&o)<<10|1023&e.charCodeAt(r)),t+=Ze[240|o>>18]+Ze[128|o>>12&63]+Ze[128|o>>6&63]+Ze[128|63&o])}return t},isBuffer:function(n){return null!=n&&!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))},isRegExp:function(n){return"[object RegExp]"===Object.prototype.toString.call(n)},merge:function n(e,t,r){if(!t)return e;if("object"!==c(t)){if(Array.isArray(e))e.push(t);else{if("object"!==c(e))return[e,t];(r.plainObjects||r.allowPrototypes||!Qe.call(Object.prototype,t))&&(e[t]=!0)}return e}if("object"!==c(e))return[e].concat(t);var o=e;return Array.isArray(e)&&!Array.isArray(t)&&(o=Xe(e,r)),Array.isArray(e)&&Array.isArray(t)?(t.forEach((function(t,o){Qe.call(e,o)?e[o]&&"object"===c(e[o])?e[o]=n(e[o],t,r):e.push(t):e[o]=t})),e):Object.keys(t).reduce((function(e,o){var i=t[o];return Qe.call(e,o)?e[o]=n(e[o],i,r):e[o]=i,e}),o)}},et=(String.prototype.replace,Date.prototype.toISOString,Object.prototype.hasOwnProperty),tt={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:nt.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},rt=function(n,e,t){if(n){var r=t.allowDots?n.replace(/\.([^.[]+)/g,"[$1]"):n,o=/(\[[^[\]]*])/g,i=/(\[[^[\]]*])/.exec(r),a=i?r.slice(0,i.index):r,c=[];if(a){if(!t.plainObjects&&et.call(Object.prototype,a)&&!t.allowPrototypes)return;c.push(a)}for(var u=0;null!==(i=o.exec(r))&&u<t.depth;){if(u+=1,!t.plainObjects&&et.call(Object.prototype,i[1].slice(1,-1))&&!t.allowPrototypes)return;c.push(i[1])}return i&&c.push("["+r.slice(i.index)+"]"),function(n,e,t){for(var r=e,o=n.length-1;o>=0;--o){var i,a=n[o];if("[]"===a)i=(i=[]).concat(r);else{i=t.plainObjects?Object.create(null):{};var c="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,u=parseInt(c,10);!isNaN(u)&&a!==c&&String(u)===c&&u>=0&&t.parseArrays&&u<=t.arrayLimit?(i=[])[u]=r:i[c]=r}r=i}return r}(c,e,t)}},ot=function(n,e){var t=e?nt.assign({},e):{};if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(t.ignoreQueryPrefix=!0===t.ignoreQueryPrefix,t.delimiter="string"==typeof t.delimiter||nt.isRegExp(t.delimiter)?t.delimiter:tt.delimiter,t.depth="number"==typeof t.depth?t.depth:tt.depth,t.arrayLimit="number"==typeof t.arrayLimit?t.arrayLimit:tt.arrayLimit,t.parseArrays=!1!==t.parseArrays,t.decoder="function"==typeof t.decoder?t.decoder:tt.decoder,t.allowDots="boolean"==typeof t.allowDots?t.allowDots:tt.allowDots,t.plainObjects="boolean"==typeof t.plainObjects?t.plainObjects:tt.plainObjects,t.allowPrototypes="boolean"==typeof t.allowPrototypes?t.allowPrototypes:tt.allowPrototypes,t.parameterLimit="number"==typeof t.parameterLimit?t.parameterLimit:tt.parameterLimit,t.strictNullHandling="boolean"==typeof t.strictNullHandling?t.strictNullHandling:tt.strictNullHandling,""===n||null==n)return t.plainObjects?Object.create(null):{};for(var r="string"==typeof n?function(n,e){for(var t={},r=e.ignoreQueryPrefix?n.replace(/^\?/,""):n,o=e.parameterLimit===1/0?void 0:e.parameterLimit,i=r.split(e.delimiter,o),a=0;a<i.length;++a){var c,u,s=i[a],f=s.indexOf("]="),l=-1===f?s.indexOf("="):f+1;-1===l?(c=e.decoder(s,tt.decoder),u=e.strictNullHandling?null:""):(c=e.decoder(s.slice(0,l),tt.decoder),u=e.decoder(s.slice(l+1),tt.decoder)),et.call(t,c)?t[c]=[].concat(t[c]).concat(u):t[c]=u}return t}(n,t):n,o=t.plainObjects?Object.create(null):{},i=Object.keys(r),a=0;a<i.length;++a){var c=i[a],u=rt(c,r[c],t);o=nt.merge(o,u,t)}return nt.compact(o)},it=[];
/*! Copyright Twitter Inc. and other contributors. Licensed under MIT */function at(n){var e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A,r=[];function o(t){if(D(n,t)&&(n=t,e)){for(var o=!it.length,i=0;i<r.length;i+=1){var a=r[i];a[1](),it.push(a,n)}if(o){for(var c=0;c<it.length;c+=2)it[c][0](it[c+1]);it.length=0}}}function i(e){o(e(n))}function a(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A,c=[i,a];return r.push(c),1===r.length&&(e=t(o)||A),i(n),function(){var n=r.indexOf(c);-1!==n&&r.splice(n,1),0===r.length&&(e(),e=null)}}return{set:o,update:i,subscribe:a}}function ct(n,e,t){var r=!Array.isArray(n),o=r?[n]:n,i=e.length<2;return{subscribe:at(t,(function(n){var t=!1,a=[],c=0,u=A,s=function(){if(!c){u();var t=e(r?a[0]:a,n);i?n(t):u=M(t)?t:A}},f=o.map((function(n,e){return B(n,(function(n){a[e]=n,c&=~(1<<e),t&&s()}),(function(){c|=1<<e}))}));return t=!0,s(),function(){P(f),u()}})).subscribe}}var ut={},st=lt("menu"),ft=at(1);function lt(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(ut[n])return ut[n];var t=ut[n]=at(e);return t.toggle=function(n){var r=n.target.closest("a");if(!r)return setTimeout((function(){return t.set(e)}),50);n.preventDefault();var o=r.href.replace(/.*#/,"");0==r.href.indexOf("#")||0==r.href.indexOf(location.href)?t.set(I(t)==o?"":o):setTimeout((function(){return t.set(o)}),100)},t}function dt(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}var pt=new(function(n){a(o,n);var e=dt(o);function o(){var n;return t(this,o),(n=e.call(this)).prop("ro","basePath",(function(){return n._basePath})),n.prop("ro","hash",(function(){return(n._location.hash||"").replace(/^#/,"")})),n.prop("ro","path",(function(){return n._path})),n.prop("ro","params",(function(){return n._params})),n.prop("ro","query",(function(){return n._query})),n.prop("rw","baseUrl",""),n.prop("rw","component",null),n.prop("rw","match",""),n.prop("rw","requireLogin",!1),n.prop("rw","state",{}),n.prop("rw","title",document.title||""),n.prop("persist","lastUrl",""),n._history=window.history,n._location=window.location,n._onClick=n._onClick.bind(r(n)),n._onpopstate=n._onpopstate.bind(r(n)),n._basePath="",n._params={},n._path="/",n._query={},n._routes=[],n}return R(o,[{key:"conversationPath",value:function(n){var e=["","chat"];return n.connection_id&&e.push(n.connection_id),n.conversation_id&&e.push(n.conversation_id),e.map((function(n){return encodeURIComponent(n)})).join("/")}},{key:"go",value:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.replace){var r=[!0,this.state];t=r[0],e=r[1]}0==n.indexOf(this.baseUrl)&&(n=n.substr(this.baseUrl.length));var o=this.baseUrl+n;if(o==this._location.href)return this;this._history[t?"replaceState":"pushState"](e,this.title,o),t||st.set(""),this.update({path:!0}).render(o,e)}},{key:"param",value:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=this.params;if(t.hasOwnProperty(n))return t[n];var r=this.query;return r.hasOwnProperty(n)?r[n]:e}},{key:"render",value:function(n,e){var t=this;this._started||(window.addEventListener("click",this._onClick),window.addEventListener("popstate",this._onpopstate),this._started=!0),n||(n=this._location.href),e||(e=this.state),this._urlToProps(n),this._params={};for(var r=function(n){var e=t._routes[n],r=t._path.match(e.re);if(!r)return"continue";for(var o=0;o<e.names.length;o++)t._params[e.names[o]]=decodeURIComponent(r[o+1]);e.cb(t);var i=document.createEvent("CustomEvent");return i.initCustomEvent("routerender",!1,!1,{}),setTimeout((function(){return document.dispatchEvent(i)}),1),{v:t}},o=0;o<this._routes.length;o++){var i=r(o);if("continue"!==i&&"object"===c(i))return i.v}throw console.log({abs:n,routes:this._routes}),'[Route] No route for "'+n+'".'}},{key:"subscribe",value:function(n){return n(this),this.on("update",n)}},{key:"to",value:function(n,e){var t=[],r=[];n.split("/").forEach((function(n,e){var o=n;0==n.indexOf("*")?(o="(.*)",t.push(String(n.slice(1)||e))):0==n.indexOf(":")&&(o="([^/]+)",t.push(String(n.slice(1)||e))),r.push(o)})),this._routes.push({cb:e,names:t,path:n,re:new RegExp("^"+r.join("/")+"$")})}},{key:"update",value:function(n){return n.baseUrl&&(n.baseUrl=n.baseUrl.replace(/\/+$/,""),this._basePath=new URL(n.baseUrl).pathname.replace(/\/+$/,"")),b(s(o.prototype),"update",this).call(this,n),n.baseUrl&&this._urlToProps(location.href),this}},{key:"urlFor",value:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.match(/^\w+:/)||n.match(/^#/)?n:this.basePath+n,r=Object.keys(e).sort().filter((function(n){return ye.defined(e[n])})).map((function(n){return n+"="+encodeURIComponent(e[n])})).join("&");return t+(r?"?"+r:"")}},{key:"urlToForm",value:function(n){var e=this;Object.keys(this.query).forEach((function(t){var r=e.query[t],o=n[t];o&&o.tagName&&("checkbox"==o.type?o.checked=!!r:o.value=r,o.syncValue&&o.syncValue())}))}},{key:"wsUrlFor",value:function(n){return(n.match(/^\w+:/)?n:this.baseUrl+n).replace(/^http/,"ws")}},{key:"_onClick",value:function(n){if(!(n.metaKey||n.ctrlKey||n.shiftKey||n.defaultPrevented)){var e=n.target&&n.target.closest("a");if(e&&e.href){if("_self"==e.target)if((0==e.href.indexOf("/")?this.baseUrl+e.href:e.href)==location.href)return location.reload();if(!e.hasAttribute("download")&&!e.hasAttribute("target")){var t=e.getAttribute("href")||"";0==t.indexOf("#")&&(t=this.path+t),0==t.indexOf(this.baseUrl)&&(t=t.substr(this.baseUrl.length)),0==t.indexOf(this.basePath)&&(t=t.substr(this.basePath.length)),0==t.indexOf("/")&&(this.go(t,{},e.hasAttribute("replace")),n.preventDefault())}}}}},{key:"_onpopstate",value:function(n){st.set(""),this.render(this._location.href,n.state)}},{key:"_pathWithoutPrefix",value:function(n){return 0==n.indexOf(this.basePath)?n.substr(this.basePath.length):n}},{key:"_urlToProps",value:function(n){var e=n.substr(this.baseUrl.length).split("#")[0].split("?");this._query=2==e.length?ot(e.pop()):{},this._path=e[0]}}]),o}(Ae));function ht(n,e){var t="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=function(n,e){if(!n)return;if("string"==typeof n)return mt(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return mt(n,e)}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,o=function(){};return{s:o,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(n){throw n},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){t=t.call(n)},n:function(){var n=t.next();return a=n.done,n},e:function(n){c=!0,i=n},f:function(){try{a||null==t.return||t.return()}finally{if(c)throw i}}}}function mt(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var vt=function(){function n(){t(this,n),this.aliases=this._buildAliases(),this.re=this._buildRe(),this.byShortName={},this.grouped={}}var e;return R(n,[{key:"load",value:(e=d(f.mark((function n(){var e,t;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(pt.urlFor("/emojis/0bf11a9aff0d6da7b46f1490f86a71eb.json"));case 2:return e=n.sent,n.next=5,e.json();case 5:t=n.sent,this._load(t.emojis);case 7:case"end":return n.stop()}}),n,this)}))),function(){return e.apply(this,arguments)})},{key:"markup",value:function(n){var e=this;return Je.parse(n.replace(this.re,(function(n,t,r){var o=e.aliases[r]||r,i=e.byShortName[o];return t+(i&&i.emoji||r)})))}},{key:"search",value:function(n){var e=this;n=n.toLowerCase();var t=this.grouped[n]||this.grouped[n.substring(0,2)]||{};return Object.keys(t).sort((function(n,e){return t[n]-t[e]})).map((function(n){return e.byShortName[n]})).filter((function(e){return-1!=(e.shortname+e.name).toLowerCase().indexOf(n)}))}},{key:"_buildAliases",value:function(){return{"&lt;3":":heart:","(Y)":":thumbsup:",":(":":disappointed:",":)":":slight_smile:",":-*":":kissing:",":/":":confused:",":D":":smiley:",":O":":open_mouth:",":P":":stuck_out_tongue:",";)":":wink:",";D":":grin:"}}},{key:"_buildRe",value:function(){var n=Object.keys(this.aliases).sort().map(ke).join("|");return new RegExp("(^|\\s)(:\\w+:|"+n+")(?=\\s|\\,|\\.|$)","gi")}},{key:"_load",value:function(n){this.grouped={};var e,t=ht(n);try{for(t.s();!(e=t.n()).done;){var r=e.value;r.emoji&&r.shortname&&(r.name||(r.name=r.shortname),delete r.category,delete r.html,delete r.order,delete r.unicode,this.byShortName[r.shortname]=r,this._toGrouped(r))}}catch(n){t.e(n)}finally{t.f()}}},{key:"_toGrouped",value:function(n){var e=this.grouped;([n.shortname,n.name].join("-").replace(/\W+/," ").match(/\W(\w{2})/g)||[]).forEach((function(t,r){t=t.substring(1).toLowerCase(),e[t]||(e[t]={}),e[t][n.shortname]=r,t=t[0],e[t]||(e[t]={}),e[t][n.shortname]=r}))}}]),n}();function gt(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}var $t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"},yt=new(function(n){a(o,n);var e,r=gt(o);function o(){var n;return t(this,o),(n=r.call(this)).prop("cookie","lang",""),n.prop("ro","dictionaries",{}),n.prop("ro","emojis",new vt),n.prop("ro","languages",(function(){return n._languages})),n.prop("ro","languageOptions",(function(){return n._languageOptions})),n._languages=[],n._languageOptions=[],n}return R(o,[{key:"l",value:function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];var o=this.dictionaries[this.lang]||{},i=String(o[n]||n);return i.replace(/(%?)%(\d+)/g,(function(n,e,r){return"%"==e?e+r:t[r-1]}))}},{key:"load",value:(e=d(f.mark((function n(e){var t,r=this;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e||(e=this.lang||document.documentElement.getAttribute("lang")),n.next=3,Ye("/api","getDictionary",{lang:e}).perform();case 3:return t=n.sent,this.dictionaries[e]=t.res.body.dictionary,this._languages=t.res.body.available_languages||{},this._languageOptions=Object.keys(this._languages).sort().map((function(n){return[n,r._languages[n].language_team.replace(/\s*<.*/,"")]})),n.abrupt("return",this.update({lang:e}));case 8:case"end":return n.stop()}}),n,this)}))),function(n){return e.apply(this,arguments)})},{key:"lmd",value:function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return this.md(this.l.apply(this,[n].concat(t)))}},{key:"md",value:function(n){return this._state={},n=this._xmlEscape(n),n=this._nbsp(n),n=this._mdLink(n),n=this._plainUrlToLink(n),n=this._mdCode(n),n=this._mdEmStrong(n),n=this.emojis.markup(n),n=this._mdBlockQuote(n)}},{key:"_mdBlockQuote",value:function(n){return n.replace(/^&gt;\s(.*)/,(function(n,e){return"<blockquote>"+e+"</blockquote>"}))}},{key:"_mdCode",value:function(n){return n.replace(/(\\?)`(\S[^`]+)`/g,(function(n,e,t){return e?n.replace(/^\\/,""):"<code>"+t+"</code>"}))}},{key:"_mdEmStrong",value:function(n){return n.replace(/(^|\s)(\\?)(\*+)(\w[^<]*?)\3/g,(function(n,e,t,r,o){return 1==r.length?t?n.replace(/^\\/,""):e+"<em>"+o+"</em>":2==r.length?t?n.replace(/^\\/,""):e+"<strong>"+o+"</strong>":3==r.length?t?n.replace(/^\\/,""):e+"<em><strong>"+o+"</strong></em>":n}))}},{key:"_mdLink",value:function(n){var e=this;return n.replace(/\[([a-zA-Z][^\]]+)\]\(([^)]+)\)/g,(function(n,t,r){var o=r.match(/^\s*(\w+):/)||["",""];if(o[1]&&-1==["http","https","mailto"].indexOf(o[1]))return n;e._state.md=!0;var i=r.substring(0,1),a=-1!=["/","#"].indexOf(i)?"":' target="_blank"';return'<a href="'+pt.urlFor(r)+'"'+a+">"+t+"</a>"}))}},{key:"_nbsp",value:function(n){return n.length?n.replace(/^\s/,"&nbsp;").replace(/\s{2}/g," &nbsp;"):"&nbsp;"}},{key:"_plainUrlToLink",value:function(n){return this._state.md?n:n.replace(/\b[a-z]{2,5}:\/\S+/g,(function(n){var e=n.match(/^(.*?)(&\w+;|\W)?$/);return'<a href="'+e[1]+'" target="_blank">'+e[1]+"</a>"+(e[2]||"")})).replace(/mailto:(\S+)/,(function(n,e){return-1!=n.indexOf('">')?n:'<a href="'+n+'" target="_blank">'+e+"</a>"}))}},{key:"_xmlEscape",value:function(n){return n.replace(/[&<>"']/g,(function(n){return $t[n]}))}}]),o}(Ae)),bt=ct(yt,(function(n){return function(){return n.l.apply(n,arguments)}})),wt=ct(yt,(function(n){return function(){return n.lmd.apply(n,arguments)}})),_t=o((function(n){function e(n){for(var e=document.createElement("div"),t=[[n,e]],r=[];t.length;){var o=t.shift(),i=$(o,2),a=i[0],u=i[1],s=void 0,f=void 0,l=c(a);if(null===a||"undefined"==l?l="null":Array.isArray(a)&&(l="array"),"array"==l?((f=function(n){return n}).len=a.length,(s=document.createElement("div")).className="json-array "+(f.len?"has-items":"is-empty")):"object"==l?function(){var n=Object.keys(a).sort();(f=function(e){return n[e]}).len=n.length,(s=document.createElement("div")).className="json-object "+(f.len?"has-items":"is-empty")}():((s=document.createElement("span")).className="json-"+l,s.textContent="null"==l?"null":"boolean"!=l?a:a?"true":"false"),f){var d=document.createElement("span");if(d.className="json-type",d.textContent=f.len?l+"["+f.len+"]":"{}",u.appendChild(d),-1!=r.indexOf(a))e.classList.add("has-recursive-items"),s.classList.add("is-seen");else{for(var p=0;p<f.len;p++){var h=f(p),m=document.createElement("div"),v=document.createElement("span");v.className="json-key",v.textContent=h,m.appendChild(v),s.appendChild(m),t.push([a[h],m])}r.push(a)}}u.className="json-item "+s.className.replace(/^json-/,"contains-"),u.appendChild(s)}return e}try{n.exports={jsonhtmlify:e}}catch(n){window.jsonhtmlify=e}})).jsonhtmlify;function kt(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function xt(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?kt(Object(t),!0).forEach((function(e){ue(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):kt(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function Et(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}var Ot={},St=function(n){a(o,n);var e,r=Et(o);function o(){var n;return t(this,o),(n=r.call(this)).prop("ro","length",(function(){return n.messages.length})),n.prop("ro","messages",[]),n.prop("rw","expandUrlToMedia",!0),n.embedCache=Ot,n}return R(o,[{key:"clear",value:function(){return this.messages.length=0,this.update({messages:!0})}},{key:"get",value:function(n){return n<0?this.messages.slice(n)[0]:this.messages[n]}},{key:"push",value:function(n){return[].push.apply(this.messages,this._fill(n)),this.update({messages:!0})}},{key:"render",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(-1!=e){var t=this.get(e);return t&&!t.rendered&&(t.embeds=this._embeds(t),t.rendered=!0,this.update({messages:!0})),this.messages}var r={};return this.messages.map((function(e,t){return e.index=t,e.className||(e.dayChanged=n._dayChanged(e,r),e.className=n._className(e,r),e.embeds=[],e.markdown=e.vars?yt.lmd.apply(yt,[e.message].concat(C(e.vars))):yt.md(e.message)),r=e}))}},{key:"toArray",value:function(){return this.messages}},{key:"update",value:function(n){return n.hasOwnProperty("expandUrlToMedia")&&n.expandUrlToMedia!=this.expandUrlToMedia&&this.messages.forEach((function(n){return delete n.rendered})),b(s(o.prototype),"update",this).call(this,n)}},{key:"unshift",value:function(n){return[].unshift.apply(this.messages,this._fill(n)),this.update({messages:!0})}},{key:"_className",value:function(n,e){var t=["message"];return n.type&&t.push("is-type-"+n.type),n.highlight&&t.push("is-highlighted"),t.push(n.dayChanged||n.from!=e.from?"has-not-same-from":"has-same-from"),t.join(" ")}},{key:"_dayChanged",value:function(n,e){return!(!e.ts||n.ts.getDate()==e.ts.getDate())}},{key:"_embeds",value:function(n){var e=this,t=[];return this._msgDetails(n)&&t.push(Promise.resolve({className:"le-details",details:!0,nodes:[_t(n.details).lastChild]})),this.expandUrlToMedia&&"notice"!=n.type?((n.message.match(/https?:\/\/(\S+)/g)||[]).forEach((function(r){r=r.replace(/(\W)?$/,""),e.embedCache[r]||(e.embedCache[r]=e._loadEmbed(n,r)),t.push(e.embedCache[r])})),t.map((function(e){return e.catch((function(e){return console.error("[Messages:embed]",n,e)}))}))):t}},{key:"_fill",value:function(n){for(var e=0;e<n.length;e++){var t=n[e];if(!t.from){var r=[!0,"Convos"];t.internal=r[0],t.from=r[1]}t.type||(t.type="notice"),t.color="Convos"==t.from?"inherit":Oe(t.from.toLowerCase()),t.ts=new Fe(t.ts)}return n}},{key:"_loadEmbed",value:(e=d(f.mark((function n(e,t){var r,o,i;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ye("/api","embed",{url:t}).perform();case 2:if(r=n.sent,(o=r.res.body).nodes=[],o.provider=(o.provider_name||"").toLowerCase(),o.html){n.next=8;break}return n.abrupt("return",o);case 8:if(i=document.createRange().createContextualFragment(o.html).firstChild){n.next=11;break}return n.abrupt("return",o);case 11:return _e(i=this._renderVideoChat(e,o,i)||this._renderPaste(e,o,i)||i,"img",["error",function(n){return n.target.style.display="none"}]),_e(i,".le-goto-link",(function(n){return 1==n.parentNode.children.length&&n.parentNode.remove()})),delete o.html,o.className=i.className,o.nodes="iframe"==i.tagName.toLowerCase()?[i]:[].slice.call(i.childNodes,0),n.abrupt("return",o);case 18:case"end":return n.stop()}}),n,this)}))),function(n,t){return e.apply(this,arguments)})},{key:"_msgDetails",value:function(n){if(n.hasOwnProperty("details"))return n.details;if("error"!=n.type&&"notice"!=n.type)return n.details=null;var e=xt({},n.sent||n);return["bubbles","className","command","connection_id","dispatchTo","color","dayChanged","embeds","event","fresh","highlight","id","index","internal","markdown","method","rendered","silent","stopPropagation","ts"].forEach((function(n){return delete e[n]})),"from:message:type"==Object.keys(e).sort().join(":")?n.details=null:n.details=e}},{key:"_renderPaste",value:function(n,e,t){var r=t.querySelector("pre");return r&&[t,Pe.lineNumbersBlock(r)][0]}},{key:"_renderVideoChat",value:function(n,e,t){var r=new URL(e.url).pathname.replace(/\/+$/,"").split("/");if(r.length&&(t.classList.contains("le-video-chat")||r.includes("video"))){var o=decodeURIComponent(r.slice(-1)[0]).replace(/\s-\s[\w-]+$/,"").replace(/[_.-]+/g," ").replace(/([a-z ])([A-Z])/g,(function(n,e,t){return e+" "+t.toUpperCase()})).replace(/((?:^|[ ])\w)/g,(function(n){return n.toUpperCase()})),i=yt.l('Do you want to join the %1 video chat with "%2"?',e.provider_name,o);return(t=document.createElement("div")).className="le-card le-rich le-join-request le-provider-"+e.provider,t.innerHTML='<a class="le-thumbnail" href="'+e.url+'" target="convos_video"><i class="fas fa-video"></i></a><h3>'+i+'</h3><p class="le-description"><a href="'+e.url+'" target="convos_video">'+yt.l("Yes, I want to join.")+"</a></p>",n.fresh&&this.emit("notify",xt(xt({},n),{},{message:i})),t}}}]),o}(Ae);function Ct(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}var Nt=function(n,e){return n.name.localeCompare(e.name)},Rt=function(n){a(r,n);var e=Ct(r);function r(){var n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(this,r),(n=e.call(this,o)).sorter=i.sorter||Nt,n._sort(),n}return R(r,[{key:"filter",value:function(n){return Array.from(this.values()).filter(n)}},{key:"set",value:function(n,e){b(s(r.prototype),"set",this).call(this,n,e),this._sort()}},{key:"toArray",value:function(){return Array.from(this.values())}},{key:"_sort",value:function(){var n=this,e=Array.from(this.entries()),t=this.sorter;return this.clear(),e.sort((function(n,e){return t(n[1],e[1])})).forEach((function(e){var t=$(e,2),o=t[0],i=t[1];return b(s(r.prototype),"set",n).call(n,o,i)})),e}}]),r}(x(Map)),At={b:"channel_ban",C:"ctcp_block",c:"colour_filter",e:"ban_exemption",F:"enable_forwarding",f:"forward",g:"free_invite",I:"invite_exemption",j:"join_throttle",k:"password",l:"join_limit",L:"large_ban_list",m:"moderated",n:"prevent_external_send",P:"permanent",p:"privat",Q:"block_forwarded_users",q:"quiet",r:"block_unidentified",s:"secret",S:"secure_connection_only",t:"ops_topic"},jt={a:"&",h:"%",o:"@",q:"~",v:"+"},Tt={a:"admin",B:"bot",h:"half_operator",i:"invisible",I:"whois_hide_online",o:"operator",p:"whois_hide_channels",R:"privmsg_from_registered_only",r:"registered",S:"service_bot",T:"ctcp_block",t:"vhost",v:"voice",W:"whois_notifications",x:"cloaked_hostname",z:"secure_connection",Z:"secure_connection_only"};function Lt(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}var Pt=function(n){a(r,n);var e=Lt(r);function r(){var n;return t(this,r),(n=e.call(this)).prop("ro","length",(function(){return n._map.size})),n.prop("ro","_map",new Rt([],{sorter:function(n,e){return e.modes.operator||!1-n.modes.operator||e.modes.voice||!1-n.modes.voice||n.nick.localeCompare(e.nick)}})),n}return R(r,[{key:"clear",value:function(){var n=this.me();return this._map.clear(),this.add(n),this}},{key:"delete",value:function(n){return this._map.delete(this._id(n)),this.update({})}},{key:"get",value:function(n){return this._map.get(this._id(n))}},{key:"has",value:function(n){return this._map.has(this._id(n))}},{key:"me",value:function(){return Array.from(this._map.values()).filter((function(n){return n.me}))[0]||this._defaultParticipant()}},{key:"nicks",value:function(){return Array.from(this._map.values()).map((function(n){return n.nick}))}},{key:"rename",value:function(n,e){var t=this.get(n)||{};return delete t.id,t.nick=e,this.delete(n),this.add(t)}},{key:"add",value:function(n){var e=this;if(Array.isArray(n))return n.forEach((function(n){return e.add(n)})),this;n.id=this._id(n.nick),n.color=Oe(n.id),ye.string(n.mode)&&(n.modes=pe(Tt,n.mode)),n.modes||(n.modes={}),n.nick||(n.nick=n.name);var t=this._map.get(n.id);return t&&Object.keys(t).forEach((function(e){return n[e]||(n[e]=t[e])})),this._map.set(n.id,n),this.update({length:!0})}},{key:"toArray",value:function(){return this._map.toArray()}},{key:"_defaultParticipant",value:function(){return{color:"#000000",id:"",modes:{},nick:""}}},{key:"_id",value:function(n){return n.toLowerCase()}}]),r}(Ae);function Mt(n,e){var t="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=function(n,e){if(!n)return;if("string"==typeof n)return Dt(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Dt(n,e)}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,o=function(){};return{s:o,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(n){throw n},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){t=t.call(n)},n:function(){var n=t.next();return a=n.done,n},e:function(n){c=!0,i=n},f:function(){try{a||null==t.return||t.return()}finally{if(c)throw i}}}}function Dt(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Bt(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function It(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Bt(Object(t),!0).forEach((function(e){ue(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Bt(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function Ut(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}var Ht=function n(e){return n.singletons[e]||(n.singletons[e]=new zt)};Ht.singletons={};var qt=[];qt[WebSocket.CONNECTING]="connecting",qt[WebSocket.OPEN]="open",qt[WebSocket.CLOSING]="closing",qt[WebSocket.CLOSED]="closed";var zt=function(n){a(r,n);var e=Ut(r);function r(n){var o;return t(this,r),(o=e.call(this)).prop("persist","debug",""),o.prop("ro","readyState",(function(){return o.ws.readyState})),o.prop("ro","readyStateHuman",(function(){return qt[o.ws.readyState]})),o.prop("ro","waiting",new Map),o.prop("rw","closed",0),o.prop("rw","error",""),o.prop("rw","keepaliveInterval",1e4),o.prop("rw","url",""),o.id=0,o.queue=[],o.keepClosed=!0,o._resetWebSocket(),o}return R(r,[{key:"close",value:function(n,e){if("number"!=typeof n){var t=[1e3,n];n=t[0],e=t[1]}return this.ws.close&&this.ws.close(n,e),this.keepClosed=!0,this._keepAliveStop(),this._reconnectStop(),this._resetWebSocket(),this}},{key:"deflateMessage",value:function(n){return JSON.stringify(n)}},{key:"deleteWaitingMessage",value:function(n){this.waiting.delete(n),this.update({waiting:!0})}},{key:"getWaitingMessages",value:function(n){var e=this;return 0==arguments.length?Array.from(this.waiting.values()):n.map((function(n){return e.waiting.get(n)}))}},{key:"inflateMessage",value:function(n){return JSON.parse(n)}},{key:"is",value:function(n){return this.ws.readyState==WebSocket[n.toUpperCase()]}},{key:"open",value:function(){var n=this;if(this.ws.close)return this;try{if(!this.url)throw"Can't open WebSocket connection without URL.";this.ws=new WebSocket(this.url),this.ws.onclose=function(e){return n._onClose(e)},this.ws.onerror=function(e){return n._onError(e)},this.ws.onmessage=function(e){return n._onMessage(e)},this.ws.onopen=function(e){return n._onOpen(e)},this.keepClosed=!1,this._keepAliveStart(),this._reconnectStop(),this.update({error:"",readyState:!0})}catch(n){this._onError(n.message?n:{message:String(n)})}return this}},{key:"reconnectIn",value:function(n){return 1008!==n.code&&1011!==n.code&&(this.closed<=1?1e3:this.closed>5?1e4:2*this.closed*1e3)}},{key:"send",value:function(n,e){var t=n.id||String(++this.id);return this.queue.push(It(It({},n),{},{id:t})),this.open(),this._dequeue(),e&&this.on("message_"+t,e),this}},{key:"_dequeue",value:function(){var n=this.queue;for(n.length&&this.update({waiting:!0});n.length;){if(this.ws.readyState!=WebSocket.OPEN)return;var e=n.shift();this.ws.send(this.deflateMessage(e)),e.waitingForResponse=!0,e.ts||(e.ts=new Fe),this.waiting.set(e.id,e)}}},{key:"_keepAliveStart",value:function(){var n=this;this._keepAliveStop(),this.keepaliveTid=setInterval((function(){return n.ws.readyState==WebSocket.OPEN&&n.ws.send("{}")}),this.keepaliveInterval)}},{key:"_keepAliveStop",value:function(){this.keepaliveTid&&clearTimeout(this.keepaliveTid),delete this.keepaliveTid}},{key:"_onClose",value:function(n){this.debug&&console.log("[Socket:close]",(new Fe).toISOString(),n);var e,t=Mt(this.waiting);try{for(t.s();!(e=t.n()).done;){var r=$(e.value,2),o=r[0],i=r[1];Object.keys(i).length<=1&&this.waiting.delete(o),i.waitingForResponse=!1}}catch(n){t.e(n)}finally{t.f()}this._keepAliveStop(),this._resetWebSocket(),this.update({closed:this.closed+1,readyState:!0,waiting:!0}),this._reconnectStart(this.reconnectIn(n))}},{key:"_onError",value:function(n){var e=String(n.message||n);e&&0!=e.indexOf("[")||(e="Could not connect."),this.debug&&console.log("[Socket:error]",(new Fe).toISOString(),e,n),this.update({error:e})}},{key:"_onMessage",value:function(n){var e=this.inflateMessage(n.data);if(e.bubbles=!0,e.stopPropagation=function(){e.bubbles=!1},e.id&&(this.emit("message_"+e.id,e),this.waiting.delete(e.id)),e.bubbles&&this.emit("message",e),this.update({waiting:!0}),e.errors&&!e.id){var t,r=Mt(this.waiting.keys());try{for(r.s();!(t=r.n()).done;){var o=t.value;this.emit("message_"+o,e)}}catch(n){r.e(n)}finally{r.f()}this.waiting.clear()}}},{key:"_onOpen",value:function(n){this.debug&&console.log("[Socket:open]",(new Fe).toISOString(),n),this.update({closed:0,error:"",readyState:!0}),this._dequeue()}},{key:"_reconnectStart",value:function(n){var e=this;return this._reconnectStop(),this.debug&&console.log("[Socket:reconnect]",(new Fe).toISOString(),n),!0===n?this.open():"number"!=typeof n?this.keepClosed=!0:void(this.reconnectTid=setTimeout((function(){return e.open()}),n))}},{key:"_reconnectStop",value:function(){this.reconnectTid&&clearTimeout(this.reconnectTid),delete this.reconnectTid}},{key:"_resetWebSocket",value:function(){this.ws={readyState:WebSocket.CLOSED}}}]),r}(Ae);function Ft(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function Kt(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Ft(Object(t),!0).forEach((function(e){ue(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ft(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function Wt(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}var Gt=new(function(n){a(r,n);var e=Wt(r);function r(){var n;return t(this,r),(n=e.call(this)).Notification=window.Notification||{permission:"denied"},n.prop("persist","notificationCloseDelay",5e3),n.prop("persist","wantNotifications",!!n.Notification.requestPermission&&null),n.prop("ro","appHasFocus",(function(){return document.hasFocus()})),n.prop("rw","desktopAccess",n.Notification.permission),n}return R(r,[{key:"requestDesktopAccess",value:function(){var n=this;return this.Notification.requestPermission?(this.Notification.requestPermission((function(e){return n.update({desktopAccess:e})})),this):this.update({desktopAccess:this.Notification.permission})}},{key:"show",value:function(n){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.title||(t.title=document.title),!this.wantNotifications)return this._showInConsole(n,t);if("granted"!=this.desktopAccess)return this.showInApp(n,t);var r=new Notification(t.title,Kt(Kt({},t),{},{body:n}));return r.onclick=function(n){return e._onClick(n,r,t)},setTimeout((function(){return r.close()}),this.notificationCloseDelay),r}},{key:"showInApp",value:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.title||(e.title=document.title);var t=document.createElement("div"),r=Kt(Kt({},e),{},{body:n,close:function(){t.remove(),r.closed=!0},target:"app"});return t.className="notify-notification fade-in",t.innerHTML='<a href="#close" class="notify-notification__close"></a><h6 class="notify-notification__title"></h6><div class="notify-notification__content"></div>',t.querySelector("a").addEventListener("click",(function(n){n.preventDefault(),r.close()})),t.querySelector("h6").textContent=e.title,t.querySelector("div").textContent=n,-1==e.closeAfter?t.querySelector("a").remove():setTimeout((function(){return r.close()}),e.closeAfter||this.notificationCloseDelay),setTimeout((function(){return t.classList.add("is-visible")}),1),document.body.insertBefore(t,document.body.querySelector(".notify-notification")),r}},{key:"_onClick",value:function(n,e,t){e.close(),window.focus(),this.emit("click",Kt(Kt({},t),{},{sourceEvent:n}))}},{key:"_showInConsole",value:function(n,e){return console.info("[Notify]",n,e),Kt(Kt({},e),{},{body:n,close:function(){},target:"console"})}}]),r}(Ae));function Yt(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function Vt(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Yt(Object(t),!0).forEach((function(e){ue(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Yt(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function Jt(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}var Qt=new RegExp("^[#&]"),Zt=function(n){a(i,n);var e,r,o=Jt(i);function i(n){var e;t(this,i),e=o.call(this);var r=[n.connection_id,n.conversation_id,""].filter(ye.defined).join(":");return e.prop("persist","userInput","",{key:r+"userInput"}),e.prop("ro","color",Oe(n.conversation_id||n.connection_id||"")),e.prop("ro","connection_id",n.connection_id||""),e.prop("ro","messages",new St({})),e.prop("ro","participants",new Pt),e.prop("ro","path",pt.conversationPath(n)),e.prop("rw","historyStartAt",null),e.prop("rw","historyStopAt",null),e.prop("rw","modes",{}),e.prop("rw","name",n.name||n.conversation_id||n.connection_id||"ERR"),e.prop("rw","status","pending"),e.prop("rw","topic",n.topic||""),e.prop("rw","unread",n.unread||0),n.hasOwnProperty("conversation_id")?(e.prop("ro","conversation_id",n.conversation_id),e.prop("ro","title",(function(){return[e.name,e.connection_id.replace(/^\w+-/,"")].join(" - ")})),e.prop("rw","frozen",n.frozen||"")):(e.prop("ro","frozen",(function(){return e._calculateFrozen()})),e.prop("ro","title",(function(){return e.name}))),n.conversation_id&&e.prop("persist","wantNotifications",e.is("private"),{key:n.conversation_id+":wantNotifications"}),e.socket=n.socket||Ht("/events"),e.messages.on("notify",(function(n){return e.notify(n)})),e._addOperations(),e}return R(i,[{key:"addMessages",value:function(n,e){if(!Array.isArray(n)){if(this._maybeIncreaseUnread(n),this._maybeNotify(n),!this.historyStopAt&&-1!=["action","private"].indexOf(n.type))return;n.fresh=!0,n=[n]}return this.messages[e||"push"](n),this}},{key:"is",value:function(n){return"connection"==n?!this.conversation_id:"conversation"==n?this.conversation_id&&!this.is("notifications"):"frozen"==n?this.frozen&&!0:"locked"==n?"Invalid password."==this.frozen:"not_found"==n?"Not found."==this.frozen:"notifications"!=n&&("pending"==n?this.frozen.match(/pending invitation/i):"private"==n?this.conversation_id&&!Qt.test(this.conversation_id)||!1:"search"!=n&&("unread"==n?this.unread&&!0:this.status==n))}},{key:"load",value:(r=d(f.mark((function n(){var e,t,r,o,i=arguments;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=i.length>0&&void 0!==i[0]?i[0]:{},!this._skipLoad(e)){n.next=3;break}return n.abrupt("return",this);case 3:return this.update({status:"loading"}),e.limit||(e.limit=40),t=Vt(Vt({},e),{},{connection_id:this.connection_id,conversation_id:this.conversation_id}),n.next=8,this.messagesOp.perform(t);case 8:return this.update({status:this.messagesOp.status}),r=this.messagesOp.res.body,o=[],(e.around||!e.after&&!e.before)&&(o.push.apply(o,this.messages.toArray().filter((function(n){return n.internal}))),this.messages.clear()),this.addMessages(r.messages||[],e.before?"unshift":"push"),this.addMessages(o,"push"),this._setEndOfStream(e,r),n.abrupt("return",this);case 16:case"end":return n.stop()}}),n,this)}))),function(){return r.apply(this,arguments)})},{key:"notify",value:function(n){if(!Gt.appHasFocus){var e=n.from==this.name?n.from:yt.l("%1 in %2",n.from,this.name);this.lastNotification=Gt.show(n.message,{path:this.path,title:e})}}},{key:"send",value:function(n,e){return ye.string(n)&&(n={message:n}),this.socket.send(Vt({method:"send",connection_id:this.connection_id,conversation_id:this.conversation_id||""},n),e)}},{key:"markAsRead",value:(e=d(f.mark((function n(){return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.markAsReadOp){n.next=2;break}return n.abrupt("return");case 2:return this.update({unread:0}),n.next=5,this.markAsReadOp.perform({connection_id:this.connection_id,conversation_id:this.conversation_id});case 5:return n.abrupt("return",this);case 6:case"end":return n.stop()}}),n,this)}))),function(){return e.apply(this,arguments)})},{key:"update",value:function(n){return this._loadParticipants(),b(s(i.prototype),"update",this).call(this,n)}},{key:"wsEventMode",value:function(n){var e=["banlist","exceptlist","invitelist","quietlist"].filter((function(e){return n[e]}))[0];if(e){var t=n[e].length,r=1==t?"entry":"entries";this.addMessages(Vt(Vt({},n),{},{message:"%1 has %2 "+r+" in %3.",vars:[this.name,t,yt.l(e)]}))}else n.nick?(this.participants.add({nick:n.nick,modes:n.mode}),this.addMessages(Vt(Vt({},n),{},{message:"%1 got mode %2 from %3.",vars:[n.nick,n.mode,n.from]}))):n.mode_changed?this.addMessages(Vt(Vt({},n),{},{message:"%1 received mode %2.",vars:[this.name,n.mode]})):(this.addMessages(Vt(Vt({},n),{},{message:"%1 got mode %2.",vars:[this.name,n.mode]})),this.update({modes:pe(At,n.mode)}))}},{key:"wsEventNickChange",value:function(n){if(this.participants.has(n.old_nick)&&n.old_nick!=n.new_nick){this.participants.rename(n.old_nick,n.new_nick);var e="me"==n.type?"You (%1) changed nick to %2.":"%1 changed nick to %2.";this.addMessages({message:e,vars:[n.old_nick,n.new_nick]})}}},{key:"wsEventPart",value:function(n){var e=this.participants.get(n.nick);e&&!e.me&&(this.participants.delete(n.nick),this.update({participants:!0}),n.silent||this.addMessages(this._partMessage(n)))}},{key:"wsEventSentClear",value:function(n){n.errors||(this.messages.clear(),this.addMessages({message:"History was cleared for %1.",vars:[this.name]}))}},{key:"wsEventSentNames",value:function(n){this.participants.add(n.participants);var e=Vt(Vt({},n),{},{message:"Participants (%1): %2",vars:[]}),t=this.participants.nicks();t.length>1&&(e.message+=" and %3.",e.vars[2]=t.pop()),e.vars[0]=t.length,e.vars[1]=t.join(", "),this.addMessages(e)}},{key:"wsEventSentTopic",value:function(n){var e=n.topic?"Topic for %1 is: %2":"No topic is set for %1.";this.addMessages({message:e,vars:[this.name,n.topic]}),this.update({topic:n.topic})}},{key:"_addOperations",value:function(){this.prop("ro","messagesOp",Ye("/api","conversationMessages")),this.prop("ro","markAsReadOp",Ye("/api","markConversationAsRead"))}},{key:"_calculateFrozen",value:function(){return""}},{key:"_loadParticipants",value:function(){var n=this;!this.participantsLoaded&&this.conversation_id&&this.messagesOp&&!this.is("frozen")&&this.messagesOp.is("success")&&(this.participantsLoaded=!0,this.is("private")?this.send("/whois "+this.conversation_id,(function(e){e.stopPropagation(),n.update({frozen:e.errors&&e.errors.length?e.errors[0].message:""})})):this.send("/names "+this.conversation_id,(function(e){e.stopPropagation(),n.participants.clear(),e.participants&&n.participants.add(e.participants)})))}},{key:"_maybeIncreaseUnread",value:function(n){return!n.from||n.yourself||-1==["action","error","private"].indexOf(n.type)?this:void this.update({unread:this.unread+1})}},{key:"_maybeNotify",value:function(n){n.from&&!n.yourself&&-1!=["action","error","private"].indexOf(n.type)&&(n.highlight||this.wantNotifications)&&this.notify(n)}},{key:"_noop",value:function(){}},{key:"_partMessage",value:function(n){var e={message:"%1 parted.",vars:[n.nick]};return n.kicker?(e.message="%1 was kicked by %2"+(n.message?": %3":""),e.vars.push(n.kicker),e.vars.push(n.message)):n.message&&(e.message+=" Reason: %2",e.vars.push(n.message)),e}},{key:"_setEndOfStream",value:function(n,e){if(!n.before&&!e.after){var t=e.messages.slice(-1)[0];this.update({historyStopAt:new Fe(t&&t.ts)})}if(!n.after&&!e.before){var r=e.messages[0];this.update({historyStartAt:new Fe(r&&r.ts)})}e.after&&this.update({historyStopAt:null}),e.before&&this.update({historyStartAt:null}),e.messages&&e.messages.length<=1&&this.update({historyStartAt:new Fe,historyStopAt:new Fe})}},{key:"_skipLoad",value:function(n){return!(this.messagesOp&&!this.is("loading"))||(this.messages.length?n.around?!!this.messages.toArray().find((function(e){return e.ts.toISOString()==n.around})):!(!n.before||!this.historyStartAt)||!(!n.after||!this.historyStopAt):this.is("success"))}}]),i}(Ae);function Xt(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function nr(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Xt(Object(t),!0).forEach((function(e){ue(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Xt(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function er(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}var tr=function(n,e){return n.is("private")-e.is("private")||n.name.localeCompare(e.name)},rr=function(n){a(r,n);var e=er(r);function r(n){var o;t(this,r),(o=e.call(this,n)).prop("ro","conversations",new Rt([],{sorter:tr})),o.prop("rw","on_connect_commands",n.on_connect_commands||[]),o.prop("rw","state",n.state||"queued"),o.prop("rw","wanted_state",n.wanted_state||"connected"),o.prop("rw","url",ye.string(n.url)?new Le(n.url):n.url||new Le("irc://localhost"));var i=o.url.searchParams.get("nick")||"guest";return o.prop("rw","nick",i),o.prop("rw","real_host",o.url.hostname),o.prop("rw","server_op",!1),o.participants.add((n.service_accounts||[]).map((function(n){return{nick:n}})).concat({nick:i})),n.me&&o.wsEventMe(n.me),o}return R(r,[{key:"ensureConversation",value:function(n){var e=this,t=this.conversations.get(n.conversation_id);return t?t.update(n):((t=new Zt(nr(nr({},n),{},{connection_id:this.connection_id}))).on("message",(function(n){return e.emit("message",n)})),t.on("update",(function(){return e.update({conversations:!0})})),this._addDefaultParticipants(t),this.conversations.set(t.conversation_id,t),this.update({conversations:!0}),this.emit("conversationadd",t),t)}},{key:"findConversation",value:function(n){return this.conversations.get(n.conversation_id)||null}},{key:"is",value:function(n){return this.state==n||b(s(r.prototype),"is",this).call(this,n)}},{key:"removeConversation",value:function(n){var e=this.findConversation(n)||n;return this.conversations.delete(e.conversation_id),this.emit("conversationremove",e),this.update({conversations:!0})}},{key:"send",value:function(n){ye.string(n)&&(n={message:n});var e=new RegExp("^"+this.participants.toArray().map((function(n){return n.id})).join("|")+":","i");return 0==n.message.indexOf("/")||n.message.match(e)||(n.message="/quote "+n.message),b(s(r.prototype),"send",this).call(this,n)}},{key:"update",value:function(n){return n.url&&ye.string(n.url)&&(n.url=new Le(n.url)),b(s(r.prototype),"update",this).call(this,n)}},{key:"wsEventConnection",value:function(n){this.update({state:n.state}),this.addMessages(n.message?{message:"Connection state changed to %1: %2",vars:[n.state,n.message]}:{message:"Connection state changed to %1.",vars:[n.state]})}},{key:"wsEventFrozen",value:function(n){var e=this.findConversation(n),t=e&&e.frozen,r=this.ensureConversation(n);r.participants.add({nick:this.nick,me:!0}),t&&!n.frozen&&e.addMessages({message:"Connected.",vars:[]}),n.frozen&&r.is("pending")&&Gt.show(n.frozen,{title:n.name})}},{key:"wsEventMe",value:function(n){n.nick&&this.wsEventNickChange(n),n.server_op&&this.addMessages({message:"You are an IRC operator.",vars:[],highlight:!0}),n.real_host&&this.participants.add({nick:n.real_host}),this.update(n)}},{key:"wsEventMessage",value:function(n){return n.yourself=n.from==this.nick,n.conversation_id?this.ensureConversation(n).addMessages(n):this.addMessages(n)}},{key:"wsEventNickChange",value:function(n){var e={old_nick:n.old_nick||this.nick,new_nick:n.new_nick||n.nick,type:n.type};n.old_nick==this.nick&&(e.me=!0),b(s(r.prototype),"wsEventNickChange",this).call(this,e),this.conversations.forEach((function(n){return n.wsEventNickChange(e)}))}},{key:"wsEventError",value:function(n){var e={message:ve(n)||n.frozen||"Unknown error from %1.",sent:n,type:"error",vars:n.command||[n.message]},t=(n.message||"").match(/^\/j(oin)? (\S+)/);if(t)return this.ensureConversation(nr(nr({},n),{},{conversation_id:t[2]}));var r=n.conversation_id&&n.frozen?this.ensureConversation(n):this.findConversation(n)||this;console.error(r.conversation_id,e),r.addMessages(e)}},{key:"wsEventJoin",value:function(n){var e=this.ensureConversation({connection_id:n.connection_id,conversation_id:n.conversation_id}),t=n.nick||this.nick;t==this.nick||n.silent||e.addMessages({message:"%1 joined.",vars:[t]}),e.participants.add({nick:t})}},{key:"wsEventPart",value:function(n){if(n.nick==this.nick)return this.removeConversation(n);n.conversation_id||this.conversations.forEach((function(e){return e.wsEventPart(n)}))}},{key:"wsEventQuit",value:function(n){this.wsEventPart(n)}},{key:"wsEventSentJoin",value:function(n){this.wsEventJoin(n)}},{key:"wsEventSentList",value:function(n){var e=n.args||"/*/";this.addMessages(n.done?{message:"Found %1 of %2 conversations from %3.",vars:[n.conversations.length,n.n_conversations,e]}:{message:"Found %1 of %2 conversations from %3, but conversations are still loading.",vars:[n.conversations.length,n.n_conversations,e]})}},{key:"wsEventSentMode",value:function(n){var e=this.findConversation(n);return e?e.wsEventMode(n):this.addMessages({message:"%1 received mode %2.",vars:[n.target,n.mode]})}},{key:"wsEventSentQuery",value:function(n){this.ensureConversation(n)}},{key:"wsEventSentWhois",value:function(n){var e="%1 (%2@%3, %4)",t=[n.nick,n.user,n.host,n.name],r=Object.keys(n.channels).sort().map((function(e){return(jt[n.channels[e].mode]||"")+e}));n.channels=r,n.idle_for&&r.length?(e+=" has been idle for %5s in %6.",t.push(n.idle_for),t.push(r.join(", "))):n.idle_for&&!r.length?(e+="has been idle for %5s, and is not in any channels.",t.push(n.idle_for)):r.length?(e+=" is active in %5.",t.push(r.join(", "))):e+=" is not in any channels.",(this.findConversation(n)||this).addMessages({message:e,vars:t,sent:n})}},{key:"wsEventSentNames",value:function(){}},{key:"_addDefaultParticipants",value:function(n){var e=[{nick:this.nick,me:!0}];n.is("private")&&e.push({nick:n.name}),n.participants.add(e)}},{key:"_addOperations",value:function(){this.prop("ro","markAsReadOp",Ye("/api","markConnectionAsRead")),this.prop("ro","messagesOp",Ye("/api","connectionMessages"))}},{key:"_calculateFrozen",value:function(){switch(this.state){case"connected":return"";case"disconnected":return"Disconnected.";case"unreachable":return"Unreachable.";default:return"Connecting..."}}}]),r}(Zt);function or(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function ir(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?or(Object(t),!0).forEach((function(e){ue(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):or(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function ar(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}var cr=function(n){a(r,n);var e=ar(r);function r(n){return t(this,r),e.call(this,ir(ir({},n),{},{connection_id:"",conversation_id:"notifications",name:"Notifications"}))}return R(r,[{key:"addMessages",value:function(n,e){return Array.isArray(n)||(n=[n],this.update({unread:this.unread+1})),this.messages.push(n),this}},{key:"is",value:function(n){return"notifications"==n||b(s(r.prototype),"is",this).call(this,n)}},{key:"send",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Promise.resolve(n)}},{key:"_addOperations",value:function(){this.prop("ro","markAsReadOp",Ye("/api","markNotificationsAsRead")),this.prop("ro","messagesOp",Ye("/api","notificationMessages"))}},{key:"_skipLoad",value:function(){return!1}}]),r}(Zt);function ur(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function sr(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?ur(Object(t),!0).forEach((function(e){ue(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ur(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function fr(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}var lr=function(n){a(o,n);var e,r=fr(o);function o(n){var e;return t(this,o),(e=r.call(this,sr(sr({},n),{},{connection_id:"",conversation_id:"search",name:"Search"}))).prop("rw","query",""),e.update({status:"success"}),e}return R(o,[{key:"is",value:function(n){return"conversation"!=n&&("search"==n||b(s(o.prototype),"is",this).call(this,n))}},{key:"load",value:(e=d(f.mark((function n(){var e,t,r,o=arguments;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=o.length>0&&void 0!==o[0]?o[0]:{},!this.is("loading")){n.next=3;break}return n.abrupt("return",this);case 3:if((t=sr({},e)).match=e.match||e.message,(t.match||"").match(/\S/)){n.next=7;break}return n.abrupt("return",this.messages.clear().push([{message:'Search query "%1" does not contain anything to search for.',vars:[e.message]}]));case 7:return this.update({query:t.match,status:"loading"}),this.messages.clear(),n.next=11,this.messagesOp.perform(t);case 11:return r=this.messagesOp.res.body,this.messages[t.before?"unshift":"push"](r.messages||[]),n.abrupt("return",this.update({status:this.messagesOp.status}));case 14:case"end":return n.stop()}}),n,this)}))),function(){return e.apply(this,arguments)})},{key:"send",value:function(n){return ye.string(n)&&(n={message:n}),this.emit("send",n),Promise.resolve(n)}},{key:"_addOperations",value:function(){this.prop("ro","messagesOp",Ye("/api","searchMessages")),this.prop("ro","markAsReadOp",null)}},{key:"_loadParticipants",value:function(){}}]),o}(Zt);function dr(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function pr(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?dr(Object(t),!0).forEach((function(e){ue(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):dr(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function hr(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}var mr=function(n){a(o,n);var e,r=hr(o);function o(n){var e;return t(this,o),(e=r.call(this)).prop("ro","connections",new Rt),e.prop("ro","notifications",new cr({})),e.prop("ro","search",new lr({})),e.prop("ro","roles",new Set),e.prop("ro","unread",(function(){return e._calculateUnread()})),e.prop("persist","expandUrlToMedia",!0),e.prop("persist","ignoreStatuses",!1),e.prop("rw","activeConversation",e.notifications),e.prop("rw","email",""),e.prop("rw","forced_connection",!1),e.prop("rw","default_connection","irc://chat.freenode.net:6697/%23convos"),e.prop("rw","highlightKeywords",[]),e.prop("rw","status","pending"),e.prop("rw","videoService",n.videoService||""),e.socket=n.socket||Ht("/events"),e.socket.on("message",(function(n){return e._dispatchMessage(n)})),e.socket.on("update",(function(n){return e._onConnectionChange(n)})),e}return R(o,[{key:"conversations",value:function(n){var e=[];return this.connections.toArray().forEach((function(t){t.conversations.toArray().forEach((function(t){n&&!n(t)||e.push(t)}))})),e}},{key:"ensureConversation",value:function(n,e){var t=this;if((n=pr(pr({},n),{},{videoService:this.videoService})).conversation_id){var r=this.ensureConversation({connection_id:n.connection_id},!0);return this._maybeUpgradeActiveConversation(r.ensureConversation(n))}var o=this.findConversation(n);return o?o.update(n):((o=new rr(pr({},n))).on("conversationadd",(function(n){return t._maybeUpgradeActiveConversation(n)})),o.on("conversationremove",(function(n){return n==t.activeConversation&&t.setActiveConversation(n)})),o.on("update",(function(n){return t.update({connections:!0})})),this.connections.set(o.connection_id,o),this.update({connections:!0}),e?o:this._maybeUpgradeActiveConversation(o))}},{key:"findConversation",value:function(n){var e=this.connections.get(n.connection_id);return n.conversation_id?e&&e.findConversation(n)||null:e}},{key:"is",value:function(n){var e=this;return Array.isArray(n)?!!n.filter((function(n){return e.is(n)})).length:!!this.roles.has(n)||this.status==n}},{key:"load",value:(e=d(f.mark((function n(){var e,t,r,o=this;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.is("loading")){n.next=2;break}return n.abrupt("return",this);case 2:return this.update({status:"loading"}),e=new Promise((function(n){return o.socket.send({method:"load",object:"user",params:{connections:!0,conversations:!0}},n)})),n.next=6,e;case 6:if(!(t=n.sent).errors){n.next=10;break}return this.roles.add("anonymous"),n.abrupt("return",this.update({roles:!0,status:t.errors?"error":"success"}));case 10:return r=t.user||{},this.connections.clear(),(r.connections||[]).forEach((function(n){return o.ensureConversation(pr(pr({},n),{},{status:"pending"}))})),(r.conversations||[]).forEach((function(n){return o.ensureConversation(pr(pr({},n),{},{status:"pending"}))})),this.notifications.update({unread:r.unread||0}),this.roles.clear(),this.roles.add(r.email?"authenticated":"anonymous"),(r.roles||[]).forEach((function(n){return o.roles.add(n)})),n.abrupt("return",this.update({email:r.email||"",default_connection:r.default_connection||"",forced_connection:r.forced_connection||!1,highlightKeywords:r.highlight_keywords||[],roles:!0,status:t.errors?"error":"success",videoService:r.video_service||""}));case 19:case"end":return n.stop()}}),n,this)}))),function(){return e.apply(this,arguments)})},{key:"removeConversation",value:function(n){var e=this.findConversation({connection_id:n.connection_id});if(n.conversation_id)return e&&e.removeConversation(n);this.connections.delete(n.connection_id),e==this.activeConversation&&this.setActiveConversation(e),this.update({connections:!0})}},{key:"setActiveConversation",value:function(n){var e=!n.connection_id&&!n.conversation_id&&this.notifications;if(e)return this.update({activeConversation:e});if(e=this.findConversation(n))return this.update({activeConversation:e});var t=pr(pr({},n),{},{connection_id:n.connection_id||"",frozen:"Not found."});return["conversation_id","name"].forEach((function(e){return n.hasOwnProperty(e)&&(t[e]=n[e])})),this.update({activeConversation:t.conversation_id?new Zt(t):new rr(t)})}},{key:"update",value:function(n){return n.videoService&&this.connections.forEach((function(e){return e.update({videoService:n.videoService})})),b(s(o.prototype),"update",this).call(this,n)}},{key:"_calculateUnread",value:function(){var n=this.activeConversation;return this.notifications.unread+this.conversations((function(n){return n.is("private")})).reduce((function(e,t){return e+(t==n?0:t.unread)}),0)}},{key:"_dispatchMessage",value:function(n){n.dispatchTo=("wsEvent_"+this._getEventNameFromMessage(n)).replace(/_(\w)/g,(function(n,e){return e.toUpperCase()})),n.silent=this.ignoreStatuses,this.emit(n.dispatchTo,n),n.highlight&&this.notifications.addMessages(n);var e=this.findConversation({connection_id:n.connection_id});if(e&&(e[n.dispatchTo]&&e[n.dispatchTo](n),n.bubbles)){var t=e.findConversation(n);t&&t[n.dispatchTo]&&t[n.dispatchTo](n)}}},{key:"_getEventNameFromMessage",value:function(n){return n.errors?"error":"state"==n.event?n.type:"sent"==n.event&&n.message.match(/\/\S+/)?(n.command=n.message.split(/\s+/).filter((function(n){return n.length})),n.command[0]=n.command[0].substring(1),"sent_"+n.command[0].toLowerCase()):n.event}},{key:"_maybeUpgradeActiveConversation",value:function(n){var e=this.activeConversation;return n.conversation_id?(n.connection_id&&n.connection_id!=e.connection_id||n.conversation_id&&n.conversation_id!=e.conversation_id||this.update({activeConversation:n}),n):n}},{key:"_onConnectionChange",value:function(n){if(n.is("open")&&this.is("pending"))return this.load();n.is("closed")&&(this.connections.forEach((function(n){return n.update({state:"unreachable"})})),this.is("loading")||this.update({status:"pending"}))}}]),o}(Ae);function vr(n){var e=n-1;return e*e*e+1}function gr(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.delay,r=void 0===t?0:t,o=e.duration,i=void 0===o?400:o,a=e.easing,c=void 0===a?j:a,u=+getComputedStyle(n).opacity;return{delay:r,duration:i,easing:c,css:function(n){return"opacity: ".concat(n*u)}}}function $r(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.delay,r=void 0===t?0:t,o=e.duration,i=void 0===o?400:o,a=e.easing,c=void 0===a?vr:a,u=e.x,s=void 0===u?0:u,f=e.y,l=void 0===f?0:f,d=e.opacity,p=void 0===d?0:d,h=getComputedStyle(n),m=+h.opacity,v="none"===h.transform?"":h.transform,g=m*(1-p);return{delay:r,duration:i,easing:c,css:function(n,e){return"\n\t\t\ttransform: ".concat(v," translate(").concat((1-n)*s,"px, ").concat((1-n)*l,"px);\n\t\t\topacity: ").concat(m-g*e)}}}function yr(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.delay,r=void 0===t?0:t,o=e.duration,i=void 0===o?400:o,a=e.easing,c=void 0===a?vr:a,u=getComputedStyle(n),s=+u.opacity,f=parseFloat(u.height),l=parseFloat(u.paddingTop),d=parseFloat(u.paddingBottom),p=parseFloat(u.marginTop),h=parseFloat(u.marginBottom),m=parseFloat(u.borderTopWidth),v=parseFloat(u.borderBottomWidth);return{delay:r,duration:i,easing:c,css:function(n){return"overflow: hidden;"+"opacity: ".concat(Math.min(20*n,1)*s,";")+"height: ".concat(n*f,"px;")+"padding-top: ".concat(n*l,"px;")+"padding-bottom: ".concat(n*d,"px;")+"margin-top: ".concat(n*p,"px;")+"margin-bottom: ".concat(n*h,"px;")+"border-top-width: ".concat(n*m,"px;")+"border-bottom-width: ".concat(n*v,"px;")}}}function br(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}function wr(n){var e,t,r,o,i,a;return{c:function(){sn(e=tn("i"),"class",t=n[3](n[2],n[1],Er)),sn(e,"style",r=Or(n[2],n[1],n[0])),e.hidden=o=!n[2]},m:function(t,r){X(t,e,r),i||(a=cn(e,"click",n[6]),i=!0)},p:function(n,i){var a=$(i,1)[0];6&a&&t!==(t=n[3](n[2],n[1],Er))&&sn(e,"class",t),7&a&&r!==(r=Or(n[2],n[1],n[0]))&&sn(e,"style",r),4&a&&o!==(o=!n[2])&&(e.hidden=o)},i:A,o:A,d:function(n){n&&nn(e),i=!1,a()}}}var _r={brand:"fab",regular:"far",solid:"fas"},kr={batman:"https://www.gravatar.com/avatar/ab1839667863f31e359d98364cfdef61",marcusr:"https://www.gravatar.com/avatar/6c056546d802b1a9ac186ab63f9fb632"},xr=["fas fa-anchor","fas fa-atom","fas fa-award","fas fa-balance-scale","fas fa-baseball-ball","fas fa-basketball-ball","fas fa-bicycle","fas fa-bolt","fas fa-book-reader","fas fa-candy-cane","fas fa-carrot","fas fa-cat","fas fa-chess-knight","fas fa-child","fas fa-coffee","fas fa-cookie-bite","fas fa-crow","fas fa-dice","fas fa-dog","fas fa-dove","fas fa-feather","fas fa-fish","fas fa-gem","fas fa-ghost","fas fa-hard-hat","fas fa-hat-cowboy","fas fa-hat-wizard","fas fa-hiking","fas fa-horse-head","fas fa-horse","fas fa-id-badge","fas fa-igloo","fas fa-mask","fas fa-meteor","fas fa-paint-brush","fas fa-paw","fas fa-pepper-hot","fas fa-pizza-slice","fas fa-portrait","fas fa-puzzle-piece","fas fa-rainbow","fas fa-robot","fas fa-rocket","fas fa-running","fas fa-seedling","fas fa-skating","fas fa-skiing","fas fa-smile","fas fa-snowboarding","fas fa-snowflake","fas fa-snowman","fas fa-swimmer","fas fa-umbrella","fas fa-user-astronaut","fas fa-user-graduate","fas fa-user-ninja","fas fa-user-secret","fas fa-walking","fas fa-yin-yang"],Er=!1;function Or(n,e,t,r){var o=[],i="color:",a=n.match(/^pick:(.+)$/);return a&&kr[a[1]]&&(i="background-color:",o.push('background-image:url("'+kr[a[1]]+'")')),t&&o.push(i+t),o.join(";")}function Sr(n,e,t){var r=e.class,o=void 0===r?"":r,i=e.animation,a=void 0===i?"":i,c=e.color,u=void 0===c?"":c,s=e.family,f=void 0===s?"":s,l=e.name;return n.$$set=function(n){"class"in n&&t(4,o=n.class),"animation"in n&&t(5,a=n.animation),"color"in n&&t(0,u=n.color),"family"in n&&t(1,f=n.family),"name"in n&&t(2,l=n.name)},[u,f,l,function(n,e,t){var r=[],i=n.match(/^pick:(.+)$/);if(i){if("Convos"==i[1])return"fas fa-info-circle";if(kr[i[1]])return"fas fa-contributor for-"+i[1].toLowerCase();r.push(function(n){if(n.match(/^\d+$/))return xr[n];for(var e=0,t=0;t<n.length;t++)e=n.charCodeAt(t)+((e<<5)-e),e&=e;return e=Math.abs(e),xr[e%xr.length]}(i[1]))}else r.push(_r[e]||"fas"),r.push("fa-"+n);return a&&r.push(a.split(" ").map((function(n){return"fa-"+n}))),o&&r.push(o.split(" ")),r.join(" ")},o,a,function(e){Rn(n,e)}]}var Cr=function(n){a(o,n);var e=br(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,Sr,wr,D,{class:4,animation:5,color:0,family:1,name:2}),i}return o}(ce);function Nr(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}function Rr(n){var e,t,r,o,i,a,c;t=new Cr({props:{animation:n[4],name:n[0]}});var u=n[13].default,s=H(u,n,n[12],null);return{c:function(){e=tn("button"),te(t.$$.fragment),r=on(),s&&s.c(),sn(e,"class",o=n[5].join(" ")),e.disabled=n[6],sn(e,"type",n[3]),sn(e,"data-tooltip",n[2]),mn(e,"has-tooltip",!!n[2].length)},m:function(o,u){X(o,e,u),re(t,e,null),Z(e,r),s&&s.m(e,null),i=!0,a||(c=cn(e,"click",n[14]),a=!0)},p:function(n,r){var a=$(r,1)[0],c={};16&a&&(c.animation=n[4]),1&a&&(c.name=n[0]),t.$set(c),s&&s.p&&4096&a&&z(s,u,n,n[12],a,null,null),(!i||32&a&&o!==(o=n[5].join(" ")))&&sn(e,"class",o),(!i||64&a)&&(e.disabled=n[6]),(!i||8&a)&&sn(e,"type",n[3]),(!i||4&a)&&sn(e,"data-tooltip",n[2]),36&a&&mn(e,"has-tooltip",!!n[2].length)},i:function(n){i||(Vn(t.$$.fragment,n),Vn(s,n),i=!0)},o:function(n){Jn(t.$$.fragment,n),Jn(s,n),i=!1},d:function(n){n&&nn(e),oe(t),s&&s.d(n),a=!1,c()}}}function Ar(n,e,t){var r,o,i=A,a=function(){return i(),i=B(w,(function(n){return t(11,o=n)})),w};n.$$.on_destroy.push((function(){return i()}));var c=e.$$slots,u=void 0===c?{}:c,s=e.$$scope,f="",l=e.class,d=void 0===l?"":l,p=[],h=!1,m=0,v=e.disabled,g=void 0!==v&&v,$=e.icon,y=void 0===$?"":$,b=e.op,w=void 0===b?new We({api:!1,id:""}):b;a();var _=e.tooltip,k=void 0===_?"":_,x=e.type,E=void 0===x?"":x;function O(n){n&&t(10,m=(new Fe).toEpoch()),t(4,f=n?"spin":""),t(9,h=n)}return n.$$set=function(n){"class"in n&&t(7,d=n.class),"disabled"in n&&t(8,g=n.disabled),"icon"in n&&t(0,y=n.icon),"op"in n&&a(t(1,w=n.op)),"tooltip"in n&&t(2,k=n.tooltip),"type"in n&&t(3,E=n.type),"$$scope"in n&&t(12,s=n.$$scope)},n.$$.update=function(){2048&n.$$.dirty&&o.is("loading")&&O(!0),3072&n.$$.dirty&&(o.is("loading")||setTimeout((function(){return O(!1)}),700-((new Fe).toEpoch()-m))),129&n.$$.dirty&&t(5,p=["btn","for-"+(y||"default")].concat(d)),768&n.$$.dirty&&t(6,r=g||h)},[y,w,k,E,f,p,r,d,g,h,m,o,s,u,function(e){Rn(n,e)}]}var jr=function(n){a(o,n);var e=Nr(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,Ar,Rr,D,{class:7,disabled:8,icon:0,op:1,tooltip:2,type:3}),i}return o}(ce);function Tr(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}function Lr(n){var e,t,r,o,i,a,c,u,s,f,l,d=n[2].unread+"";return t=new Cr({props:{name:"bars"}}),o=new Cr({props:{name:"times"}}),{c:function(){e=tn("a"),te(t.$$.fragment),r=on(),te(o.$$.fragment),i=on(),a=tn("small"),c=rn(d),sn(a,"class","badge is-important"),a.hidden=u=!n[2].unread,sn(e,"href","#nav"),sn(e,"class","btn-hallow"),mn(e,"is-active","nav"==n[1])},m:function(n,u){X(n,e,u),re(t,e,null),Z(e,r),re(o,e,null),Z(e,i),Z(e,a),Z(a,c),s=!0,f||(l=cn(e,"click",st.toggle),f=!0)},p:function(n,t){(!s||4&t)&&d!==(d=n[2].unread+"")&&ln(c,d),(!s||4&t&&u!==(u=!n[2].unread))&&(a.hidden=u),2&t&&mn(e,"is-active","nav"==n[1])},i:function(n){s||(Vn(t.$$.fragment,n),Vn(o.$$.fragment,n),s=!0)},o:function(n){Jn(t.$$.fragment,n),Jn(o.$$.fragment,n),s=!1},d:function(n){n&&nn(e),oe(t),oe(o),f=!1,l()}}}function Pr(n){var e,t,r,o=n[5].default,i=H(o,n,n[4],null),a=n[0]<=1&&Lr(n);return{c:function(){e=tn("header"),i&&i.c(),t=on(),a&&a.c(),sn(e,"class","chat-header")},m:function(n,o){X(n,e,o),i&&i.m(e,null),Z(e,t),a&&a.m(e,null),r=!0},p:function(n,t){var r=$(t,1)[0];i&&i.p&&16&r&&z(i,o,n,n[4],r,null,null),n[0]<=1?a?(a.p(n,r),1&r&&Vn(a,1)):((a=Lr(n)).c(),Vn(a,1),a.m(e,null)):a&&(Gn(),Jn(a,1,1,(function(){a=null})),Yn())},i:function(n){r||(Vn(i,n),Vn(a),r=!0)},o:function(n){Jn(i,n),Jn(a),r=!1},d:function(n){n&&nn(e),i&&i.d(n),a&&a.d()}}}function Mr(n,e,t){var r,o,i;U(n,ft,(function(n){return t(0,r=n)})),U(n,st,(function(n){return t(1,o=n)}));var a=e.$$slots,c=void 0===a?{}:a,u=e.$$scope,s=Nn("user");return U(n,s,(function(n){return t(2,i=n)})),n.$$set=function(n){"$$scope"in n&&t(4,u=n.$$scope)},[r,o,i,s,u,c]}var Dr=function(n){a(o,n);var e=Tr(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,Mr,Pr,D,{}),i}return o}(ce),Br=[],Ir={};var Ur=function(n,e,t){return Br.push({cmd:n,description:t,example:e})};Ur("/me","/me <msg>","Send message as an action."),Ur("/say","/say <msg>",'Used when you want to send a message starting with "/".'),Ur("/whois","/whois <nick>","Show information about a user."),Ur("/query","/query <nick>","Open up a new chat window with nick."),Ur("/msg","/msg <nick> <msg>","Send a direct message to nick."),Ur("/shrug","/shrug <msg>","Add a shrug to end of message. Message is optional."),Ur("/join","/join <#channel>","Join channel and open up a chat window."),Ur("/close","/close [nick|#channel]","Close conversation."),Ur("/nick","/nick <nick>","Change your wanted nick."),Ur("/kick","/kick <nick>","Kick a user from the current channel."),Ur("/mode","/mode [+|-][b|o|v] <user>","Change mode of yourself or a user"),Ur("/topic","/topic or /topic <new topic>","Show current topic, or set a new one."),Ur("/names","/names","Show participants in the channel."),Ur("/invite","/invite <nick> [#channel]","Invite a user to a channel."),Ur("/reconnect","/reconnect","Restart the current connection."),Ur("/clear","/clear history <#channel> or /clear history <nick>","Delete all history for the given conversation."),Ur("/oper","/oper <nick> <password>","Gain operator status on a network."),Ur("/cs","/cs <msg>","Send a message to chanserv."),Ur("/ns","/ns <msg>","Send a message to nickserv."),Ur("/ms","/ms <msg>","Send a message to memoserv."),Ur("/hs","/hs <msg>","Send a message to hostserv."),Ur("/bs","/bs <msg>","Send a message to botserv."),Ur("/os","/os <msg>","Send a message to operserv."),Ur("/quote","/quote <irc-command>","Allow you to send any raw IRC message.");var Hr=function(n,e){return Ir[n]=e};function qr(n,e){var t="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=function(n,e){if(!n)return;if("string"==typeof n)return zr(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return zr(n,e)}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,o=function(){};return{s:o,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(n){throw n},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){t=t.call(n)},n:function(){var n=t.next();return a=n.done,n},e:function(n){c=!0,i=n},f:function(){try{a||null==t.return||t.return()}finally{if(c)throw i}}}}function zr(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Fr(n,e){return Fr[n]?Fr[n](e):[]}Hr("/close","/part"),Hr("/shrug",(function(n){return"/say "+n.concat("¯\\_(ツ)_/¯").join(" ")})),Hr("/cs","/quote chanserv"),Hr("/ns","/quote nickserv"),Hr("/ms","/quote memoserv"),Hr("/hs","/quote hotserv"),Hr("/bs","/quote botserv"),Hr("/os","/quote operserv"),Hr("/j","/join"),Hr("/raw","/quote"),Fr.commands=function(n){return function(n){for(var e=n.query,t=[],r=0;r<Br.length;r++)if(0==Br[r].cmd.indexOf(e)){var o=Br[r].alias||Br[r].cmd;t.push({val:o,text:yt.md(Br[r].example)})}return t}({query:n.query})},Fr.conversations=function(n){for(var e=n.conversation,t=n.query,r=n.user,o=r.findConversation({connection_id:e.connection_id}),i=o?o.conversations.toArray():r.conversations(),a=[],c=0;c<i.length&&!(-1!=i[c].name.toLowerCase().indexOf(t)&&(a.push({text:i[c].name,val:i[c].conversation_id}),a.length>=20));c++);return a},Fr.emojis=function(n){var e,t=n.query,r=yt.emojis,o=[],i=qr(r.search(t.substring(1)));try{for(i.s();!(e=i.n()).done;){var a=e.value;if(o.push({val:a.emoji,text:r.markup(a.emoji)}),o.length>=30)break}}catch(n){i.e(n)}finally{i.f()}return o},Fr.nicks=function(n){var e,t=n.conversation,r=n.query,o=new RegExp("^"+ke(r.slice(1)),"i"),i=[],a=qr(t.participants.toArray());try{for(a.s();!(e=a.n()).done;){var c=e.value;if(i.length>=20)break;c.nick.match(o)&&i.push({val:c.nick})}}catch(n){a.e(n)}finally{a.f()}return i};var Kr=at(null);function Wr(n,e){return"onInfinityScrolled"==n?function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return Vr.apply(void 0,[e].concat(t))}:"onInfinityVisibility"==n?function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return Jr.apply(void 0,[e].concat(t))}:"onMessageClick"==n?function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return Qr.apply(void 0,[e].concat(t))}:"onVideoLinkClick"==n?function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return Zr.apply(void 0,[e].concat(t))}:void 0}function Gr(n){var e=["","chat",n.connection_id];return n.conversation_id&&e.push(n.conversation_id),pt.urlFor(e.map(encodeURIComponent).join("/")+"#"+n.ts.toISOString())}function Yr(n){n.target.closest("a")||(n.preventDefault(),pt.go(n.target.closest(".message").querySelector("a").href))}function Vr(n,e){var t=n.conversation,r=e.detail.visibleEls.filter((function(n){return n.dataset.ts}));if(r.length){var o=function(n){return pt.go(t.path+(n.length?"#"+n:""),{replace:!0})},i=e.detail.pos;if("top"==i){var a=r[0].dataset.ts;t.historyStartAt||t.load({before:a}),o(a)}else if("bottom"==i){var c=r.slice(-1)[0].dataset.ts;t.historyStopAt||t.load({after:c}),o(t.historyStopAt?"":c)}else o(r[0].dataset.ts)}}function Jr(n,e){var t=n.conversation,r=n.onLoadHash,o=e.detail,i=o.infinityEl,a=o.scrollHeightChanged,c=o.scrollTo,u=o.visibleEls,s=o.visibleElsChanged,f=t.messages;!(i.scrollHeight>i.offsetHeight)&&f.length&&t.load({before:f.get(0).ts.toISOString()}),a&&(c(pt.hash?'.message[data-ts="'+pt.hash+'"]':-1),function(n,e){var t=e&&pt.hash&&n.querySelector('.message[data-ts="'+pt.hash+'"]');_e(n,".has-focus",(function(n){return n.classList.remove("has-focus")})),t&&t.classList.add("has-focus")}(i,r==pt.hash)),s&&u.forEach((function(n){return f.render(n.dataset.index)}))}function Qr(n,e){var t=n.conversation,r=n.user,o=e.target.closest("a");o&&!o.target&&e.target.closest(".embed")&&(o.target="_blank");var i=o&&document.querySelector('[target="convos_video"][href="'+o.href+'"]');if(i)return Zr({conversation:t,user:r},e,i);var a=e.target.closest(".le-meta");if(a)return o||a.parentNode.classList.toggle("is-expanded");var c=o&&o.href.match(/#(action:.+)/);return c?function(n,e,t){var r=n.conversation;if(e.preventDefault(),"details"==t[1]){var o=r.messages.get(t[2]);o.showDetails=!o.showDetails,r.messages.update({messages:!0})}else"close"==t[1]?(r.send("/close "+(t[2]?decodeURIComponent(t[2]):r.conversation_id)),pt.go("/settings/conversation")):"join"==t[1]?r.send("/join "+(t[2]?decodeURIComponent(t[2]):r.conversation_id)):console.warn("Unhandled onMessageActionClick",t)}({conversation:t},e,c[1].split(":",3)):Se(e.target,"img")?Ee(e,e.target):o&&o.classList.contains("le-thumbnail")?Ee(e,o.querySelector("img")):void 0}function Zr(n,e,t){var r=n.conversation,o=n.user;t||(t=e.target.closest("a"));var i=-1!=t.href.indexOf("#action:video");if(Kr.close()&&i)return e.preventDefault();var a=t.closest(".le-provider-convosapp")||t.closest(".le-provider-jitsi"),c={nick:r.participants.me().nick};if(i){var u=new URL(o.videoService);u.pathname+="/"+eo(r),u.pathname=u.pathname.replace(/\/+/g,"/"),function(n,e){e=new URL(e,location.href).href;var t=n.messages.toArray().slice(-20).reverse().find((function(n){return-1!=n.message.indexOf(e)}));t&&t.ts.toEpoch()>(new Fe).toEpoch()-600||n.send({method:"send",message:e})}(r,u.toString()),e.preventDefault(),Kr.open(pt.urlFor("/video/"+u.hostname+"/"+eo(r),c))}else if(-1!=t.href.indexOf("/video/")){var s=new URL(t.href);e.preventDefault(),Kr.open(pt.urlFor(s.pathname.replace(/.*?\/video\//,"/video/"),c))}else if(a){var f=new URL(t.href);e.preventDefault(),Kr.open(pt.urlFor("/video/"+f.hostname+f.pathname,c))}}function Xr(n,e){var t=e.nodes[0]&&e.nodes[0].parentNode;if(t&&t.classList){var r=t.classList.contains("embed")?"add":"remove";t.classList[r]("hidden")}e.nodes.forEach((function(e){return n.appendChild(e)}))}function no(n,e){return e.is("not_found")?"":n.frozen?n.frozen:n==e?"Connection messages.":(e.frozen?e.frozen:e.topic)||(e.is("private")?"Private conversation.":"No topic is set.")}function eo(n){var e=n.is("private")?n.participants.nicks().sort().join("-and-"):n.title;return encodeURIComponent(e)}function to(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}function ro(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function oo(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?ro(Object(t),!0).forEach((function(e){ue(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ro(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function io(n,e,t){var r=n.slice();return r[37]=e[t],r[39]=t,r}function ao(n){var e,t,r,o,i;t=new Cr({props:{name:"cloud-upload-alt"}});var a=n[12].videoService&&co(n);return{c:function(){e=tn("label"),te(t.$$.fragment),r=on(),a&&a.c(),o=an(),sn(e,"for","upload_files"),sn(e,"class","btn-hallow upload")},m:function(n,c){X(n,e,c),re(t,e,null),X(n,r,c),a&&a.m(n,c),X(n,o,c),i=!0},p:function(n,e){n[12].videoService?a?(a.p(n,e),4096&e[0]&&Vn(a,1)):((a=co(n)).c(),Vn(a,1),a.m(o.parentNode,o)):a&&(Gn(),Jn(a,1,1,(function(){a=null})),Yn())},i:function(n){i||(Vn(t.$$.fragment,n),Vn(a),i=!0)},o:function(n){Jn(t.$$.fragment,n),Jn(a),i=!1},d:function(n){n&&nn(e),oe(t),n&&nn(r),a&&a.d(n),n&&nn(o)}}}function co(n){var e,t,r,o,i,a;return t=new Cr({props:{name:n[13]?"video-slash":"video"}}),{c:function(){e=tn("a"),te(t.$$.fragment),sn(e,"href","#action:video"),sn(e,"class","btn-hallow has-tooltip"),sn(e,"tooltip",r=n[1]("Start a video conference"))},m:function(r,c){X(r,e,c),re(t,e,null),o=!0,i||(a=cn(e,"click",(function(){M(n[9])&&n[9].apply(this,arguments)})),i=!0)},p:function(i,a){n=i;var c={};8192&a[0]&&(c.name=n[13]?"video-slash":"video"),t.$set(c),(!o||2&a[0]&&r!==(r=n[1]("Start a video conference")))&&sn(e,"tooltip",r)},i:function(n){o||(Vn(t.$$.fragment,n),o=!0)},o:function(n){Jn(t.$$.fragment,n),o=!1},d:function(n){n&&nn(e),oe(t),i=!1,a()}}}function uo(n){var e,t,r,o,i,a,c;return t=new Cr({props:{name:"plus-circle"}}),o=new Cr({props:{name:"times"}}),{c:function(){e=tn("a"),te(t.$$.fragment),r=on(),te(o.$$.fragment),sn(e,"href","#actions"),sn(e,"class","btn-hallow"),mn(e,"is-active","actions"==n[6])},m:function(u,s){X(u,e,s),re(t,e,null),Z(e,r),re(o,e,null),i=!0,a||(c=cn(e,"click",n[16].toggle),a=!0)},p:function(n,t){64&t[0]&&mn(e,"is-active","actions"==n[6])},i:function(n){i||(Vn(t.$$.fragment,n),Vn(o.$$.fragment,n),i=!0)},o:function(n){Jn(t.$$.fragment,n),Jn(o.$$.fragment,n),i=!1},d:function(n){n&&nn(e),oe(t),oe(o),a=!1,c()}}}function so(n){for(var e,t,r,o,i=n[3],a=[],c=0;c<i.length;c+=1)a[c]=lo(io(n,i,c));return{c:function(){e=tn("div");for(var r=0;r<a.length;r+=1)a[r].c();sn(e,"class",t="chat-input_menu for-"+n[4])},m:function(n,t){X(n,e,t);for(var r=0;r<a.length;r+=1)a[r].m(e,null);o=!0},p:function(r,c){if(n=r,262156&c[0]){var u;for(i=n[3],u=0;u<i.length;u+=1){var s=io(n,i,u);a[u]?a[u].p(s,c):(a[u]=lo(s),a[u].c(),a[u].m(e,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=i.length}(!o||16&c[0]&&t!==(t="chat-input_menu for-"+n[4]))&&sn(e,"class",t)},i:function(t){o||(Dn((function(){r||(r=Zn(e,$r,n[14],!0)),r.run(1)})),o=!0)},o:function(t){r||(r=Zn(e,$r,n[14],!1)),r.run(0),o=!1},d:function(n){n&&nn(e),en(a,n),n&&r&&r.end()}}}function fo(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m=n[1]("Start a video conference")+"",v=n[1]("Attach a file")+"";return r=new Cr({props:{name:n[13]?"video-slash":"video"}}),u=new Cr({props:{name:"cloud-upload-alt"}}),{c:function(){e=tn("div"),t=tn("a"),te(r.$$.fragment),o=on(),i=rn(m),a=on(),c=tn("label"),te(u.$$.fragment),s=on(),f=rn(v),sn(t,"href","#action:video"),sn(c,"for","upload_files"),sn(e,"class","chat-input_menu for-actions")},m:function(l,m){X(l,e,m),Z(e,t),re(r,t,null),Z(t,o),Z(t,i),Z(e,a),Z(e,c),re(u,c,null),Z(c,s),Z(c,f),d=!0,p||(h=[cn(t,"click",(function(){M(n[9])&&n[9].apply(this,arguments)})),cn(e,"click",n[16].toggle)],p=!0)},p:function(e,t){n=e;var o={};8192&t[0]&&(o.name=n[13]?"video-slash":"video"),r.$set(o),(!d||2&t[0])&&m!==(m=n[1]("Start a video conference")+"")&&ln(i,m),(!d||2&t[0])&&v!==(v=n[1]("Attach a file")+"")&&ln(f,v)},i:function(t){d||(Vn(r.$$.fragment,t),Vn(u.$$.fragment,t),Dn((function(){l||(l=Zn(e,$r,n[14],!0)),l.run(1)})),d=!0)},o:function(t){Jn(r.$$.fragment,t),Jn(u.$$.fragment,t),l||(l=Zn(e,$r,n[14],!1)),l.run(0),d=!1},d:function(n){n&&nn(e),oe(r),oe(u),n&&l&&l.end(),p=!1,P(h)}}}function lo(n){var e,t,r,o=(n[37].text||n[37].val)+"";return{c:function(){sn(e=tn("a"),"href","#index:"+n[39]),sn(e,"tabindex","-1"),mn(e,"has-focus",n[39]==n[2])},m:function(i,a){X(i,e,a),e.innerHTML=o,t||(r=cn(e,"click",un(n[18])),t=!0)},p:function(n,t){8&t[0]&&o!==(o=(n[37].text||n[37].val)+"")&&(e.innerHTML=o),4&t[0]&&mn(e,"has-focus",n[39]==n[2])},d:function(n){n&&nn(e),t=!1,r()}}}function po(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,$,y=n[10]>1&&n[11].is("conversation"),b=1==n[10]&&n[0].is("conversation"),w=y&&ao(n),_=b&&uo(n);l=new Cr({props:{name:n[8]}});var k=[fo,so],x=[];function E(n,e){return 65&e[0]&&(p=!("actions"!=n[6]||!n[0].is("conversation"))),p?0:n[3].length?1:-1}return~(h=E(n,[-1]))&&(m=x[h]=k[h](n)),{c:function(){e=tn("form"),t=tn("input"),r=on(),o=tn("textarea"),i=on(),a=tn("textarea"),c=on(),w&&w.c(),u=on(),_&&_.c(),s=on(),f=tn("button"),te(l.$$.fragment),d=on(),m&&m.c(),sn(t,"type","file"),sn(t,"id","upload_files"),sn(t,"name","upload_files"),sn(t,"class","non-interactive"),sn(o,"class","non-interactive"),sn(o,"placeholder",n[7]),sn(a,"class","is-primary-input"),sn(a,"placeholder",n[7]),sn(f,"type","buttton"),sn(f,"class","btn-hallow chat-input__send"),sn(e,"class","chat-input")},m:function(p,m){X(p,e,m),Z(e,t),Z(e,r),Z(e,o),n[27](o),Z(e,i),Z(e,a),Z(e,c),w&&w.m(e,null),Z(e,u),_&&_.m(e,null),Z(e,s),Z(e,f),re(l,f,null),Z(e,d),~h&&x[h].m(e,null),v=!0,g||($=[cn(t,"change",n[20]),K(n[17].call(null,a)),cn(f,"click",n[19]),cn(e,"submit",un(n[26]))],g=!0)},p:function(n,t){(!v||128&t[0])&&sn(o,"placeholder",n[7]),(!v||128&t[0])&&sn(a,"placeholder",n[7]),3072&t[0]&&(y=n[10]>1&&n[11].is("conversation")),y?w?(w.p(n,t),3072&t[0]&&Vn(w,1)):((w=ao(n)).c(),Vn(w,1),w.m(e,u)):w&&(Gn(),Jn(w,1,1,(function(){w=null})),Yn()),1025&t[0]&&(b=1==n[10]&&n[0].is("conversation")),b?_?(_.p(n,t),1025&t[0]&&Vn(_,1)):((_=uo(n)).c(),Vn(_,1),_.m(e,s)):_&&(Gn(),Jn(_,1,1,(function(){_=null})),Yn());var r={};256&t[0]&&(r.name=n[8]),l.$set(r);var i=h;(h=E(n,t))===i?~h&&x[h].p(n,t):(m&&(Gn(),Jn(x[i],1,1,(function(){x[i]=null})),Yn()),~h?((m=x[h])?m.p(n,t):(m=x[h]=k[h](n)).c(),Vn(m,1),m.m(e,null)):m=null)},i:function(n){v||(Vn(w),Vn(_),Vn(l.$$.fragment,n),Vn(m),v=!0)},o:function(n){Jn(w),Jn(_),Jn(l.$$.fragment,n),Jn(m),v=!1},d:function(t){t&&nn(e),n[27](null),w&&w.d(),_&&_.d(),oe(l),~h&&x[h].d(),g=!1,P($)}}}function ho(n,e,t){var r,o,i,a,c,u,s,f,l,d,p,h=A,m=function(){return h(),h=B(g,(function(n){return t(11,l=n)})),g};U(n,bt,(function(n){return t(1,s=n)})),U(n,ft,(function(n){return t(10,f=n)})),U(n,Kr,(function(n){return t(13,p=n)})),n.$$.on_destroy.push((function(){return h()}));var v=D,g=e.conversation;m();var $,y,b=0,w=[],_="none",k=0,x=Nn("api"),E=Nn("user");U(n,E,(function(n){return t(12,d=n)}));var O=lt("activeChatMenu");function S(n,e){var t=function(n,e){n&&n.hasOwnProperty("val")&&(n=n.val);var t=e.append?e.value.length:e.cursorPos,r=[e.value.substring(0,t),e.value.substring(t)],o=r[0],i=r[1];return ye.undefined(n)?{before:o,middle:"",after:i}:(e.append&&(o=o.replace(/[ ]$/,"")).length&&(n=" "+n),e.padBefore&&(o=o.replace(/[ ]$/,"")).length&&(n=" "+n),e.padAfter&&(i=i.replace(/^[ ]/,""),n+=" "),e.replace&&(o=o.replace(/\S*\s?$/,"")),{before:o,middle:n,after:i})}(n,oo(oo({},e),{},{cursorPos:$.selectionStart,value:$.value})),r=t.before,o=t.middle;L(r+o+t.after),$.selectionStart=$.selectionEnd=(r+o).length}function C(n,e){w.length&&(n.preventDefault(),t(2,b+=e),b<0&&t(2,b=w.length-1),b>=w.length&&t(2,b=0),S(w[b],{replace:!0}))}function N(n){!n.conversation_id&&g.conversation_id&&(n.conversation_id=g.conversation_id)}function R(n){t(2,b=0),t(22,k=n.selectionStart),g.update({userInput:n.value})}function j(){y.maxHeight||t(5,y.maxHeight=y.parentNode.offsetHeight,y),t(5,y.value=$.value,y),t(5,y.style.width=$.offsetWidth+"px",y),$.style.height=(y.maxHeight>y.scrollHeight?y.scrollHeight:y.maxHeight)+"px"}function T(n){var e,r,o;if(w[b])n.preventDefault(),S(w[b],{replace:!0}),t(22,k=$.selectionStart+1);else if(!(n.altKey||n.ctrlKey||n.metaKey||n.shiftKey)){n.preventDefault();var i={method:"send"};i.message=(e=$.value,r=e.split(/\s/),o=Ir[r[0].toLowerCase()],ye.function(o)?o(r.slice(1)):o?[o].concat(r.slice(1)).filter((function(n){return ye.defined(n)&&n.length})).join(" "):e),i.message.length&&g.send(i,N),g.is("search")||L(""),setTimeout(j,10)}}function L(n){$&&($.value=n),g.update({userInput:n})}function P(n){$&&(t(3,w=n>$.value.length?[]:function(n,e,t){var r=t.conversation,o=t.user,i="",a="",c=n.substring(0,e).replace(/(\S)(\S*)$/,(function(n,e,t){return i=e,a=t,""})),u=":"==i&&a.length?"emojis":"/"!=i||c.length?"@"==i&&a.length?"nicks":"#"==i||"&"==i?"conversations":"none":"commands",s=Fr(u,{conversation:r,query:i+a,user:o});return s.length&&s.unshift({autocompleteCategory:u,val:i+a}),s}($.value,n,{conversation:g,user:E})),t(4,_=w.length&&w[0].autocompleteCategory||"none"))}function M(n){M.lock!=n.path&&(t(23,M.lock=n.path,M),L(ye.undefined(n.userInput)?"":n.userInput))}function D(n){var e=n.target&&n.target.files||n.dataTransfer&&n.dataTransfer.files;if(e&&e.length){if(e.length>1)return g.addMessages({message:"Cannot upload more than one file.",type:"error"});var t=new FormData;t.append("file",e[0]),x("uploadFile").perform({formData:t}).then((function(n){var e=n.res.body;if(e.files&&e.files.length)return S(e.files[0].url,{append:!0});e.errors&&g.addMessages({message:"Could not upload file: %1",vars:[s(ve(e.errors))],type:"error"})}))}}return U(n,O,(function(n){return t(6,u=n)})),n.$$set=function(n){"conversation"in n&&m(t(0,g=n.conversation))},n.$$.update=function(){1&n.$$.dirty[0]&&t(24,r=E.findConversation({connection_id:g.connection_id})),1&n.$$.dirty[0]&&g&&F(O,u="",u),16777216&n.$$.dirty[0]&&t(25,o=r&&r.nick),50331651&n.$$.dirty[0]&&t(7,i=g.is("search")?s("What are you looking for?"):r&&r.is("unreachable")?s("Connecting..."):s("What is on your mind %1?",o)),1&n.$$.dirty[0]&&t(8,a=g.is("search")?"search":"paper-plane"),1&n.$$.dirty[0]&&t(9,c=Wr("onVideoLinkClick",{conversation:g,user:E})),4194304&n.$$.dirty[0]&&P(k),8388609&n.$$.dirty[0]&&M(g)},[g,s,b,w,_,y,u,i,a,c,f,l,d,p,{y:-10,duration:200},E,O,function(n){($=n).addEventListener("focus",(function(){return t(22,k=$.value.length+1)})),$.addEventListener("change",(function(){return R($)})),$.addEventListener("input",j),$.addEventListener("keyup",(function(n){1!=n.key.length&&-1==["ArrowLeft","ArrowRight","Backspace"].indexOf(n.key)||R($)})),$.addEventListener("keydown",(function(n){return"ArrowDown"==n.key?C(n,n.shiftKey?4:1):"ArrowUp"==n.key?C(n,n.shiftKey?-4:-1):"Enter"==n.key?T(n):"Tab"==n.key?C(n,n.shiftKey?-1:1):void 0})),L(ye.undefined(g.userInput)?"":g.userInput)},function(n){t(2,b=parseInt(n.target.closest("a").href.replace(/.*index:/,""),10)),S(w[b],{padAfter:!0,replace:!0}),setTimeout((function(){return $.focus()}),1)},T,D,v,k,M,r,o,function(e){Rn(n,e)},function(n){jn[n?"unshift":"push"]((function(){t(5,y=n)}))}]}Kr.close=function(){var n=I(this);return!!n&&[!0,n.close(),this.set(null)][0]},Kr.open=function(n){var e=this,t=window.open(n.toString(),"convos_video");["beforeunload","close"].forEach((function(n){return t.addEventListener(n,(function(){return e.set(null)}))})),this.set(t)};var mo=function(n){a(o,n);var e=to(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,ho,po,D,{uploader:21,conversation:0},[-1,-1]),i}return R(o,[{key:"uploader",get:function(){return this.$$.ctx[21]}}]),o}(ce),vo=function(){function n(){var e=this;t(this,n),this.dragAndDropEvents={drag:this._preventDefault.bind(this),dragend:this.stop.bind(this),dragenter:this.start.bind(this),dragleave:this.stop.bind(this),dragover:this.start.bind(this),dragstart:this._preventDefault.bind(this),drop:this.drop.bind(this)},this.pasteEvents={paste:this.paste.bind(this)},this.dropIndicatorEl=document.createElement("div"),this.dropIndicatorEl.className="drop-area hidden",this.removeDragOverDebounced=me((function(){return e._removeDragOver()}),100)}return R(n,[{key:"attach",value:function(n,e){var t=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;this.dropEl=n,this.uploader=e,this.targetEl=r,Object.keys(this.dragAndDropEvents).forEach((function(n){r.addEventListener(n,t.dragAndDropEvents[n])})),Object.keys(this.pasteEvents).forEach((function(n){document.addEventListener(n,t.pasteEvents[n])}))}},{key:"detach",value:function(){var n=this;Object.keys(this.dragAndDropEvents).forEach((function(e){n.targetEl.removeEventListener(e,n.dragAndDropEvents[e])})),Object.keys(this.pasteEvents).forEach((function(e){document.removeEventListener(e,n.pasteEvents[e])}))}},{key:"drop",value:function(n){this.stop(n),this.uploader&&this.uploader(n)}},{key:"paste",value:function(n){var e=(n.clipboardData||n.originalEvent.clipboardData).items;if(this.uploader)for(var t=0;t<e.length;t++)if("file"==e[t].kind)return this.uploader({dataTransfer:{files:[e[t].getAsFile()]}})}},{key:"stop",value:function(n){this._preventDefault(n),this.removeDragOverDebounced()}},{key:"start",value:function(n){if(this.dropEl){this._preventDefault(n);var e=this.dropIndicatorEl.style;e.height=this.dropEl.offsetHeight+"px",e.width=this.dropEl.offsetWidth+"px",e.top=this.dropEl.offsetTop+"px",e.left=this.dropEl.offsetLeft+"px",this.dropIndicatorEl.classList.remove("hidden"),this.dropEl.parentNode.appendChild(this.dropIndicatorEl)}}},{key:"_preventDefault",value:function(n){n.preventDefault(),n.stopPropagation()}},{key:"_removeDragOver",value:function(){this.dropIndicatorEl.classList.add("hidden")}}]),n}();function go(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}function $o(n){var e,t,r,o,i,a,c,u=n[6].default,s=H(u,n,n[5],null);return{c:function(){e=tn("main"),t=tn("div"),s&&s.c(),Dn((function(){return n[7].call(t)})),sn(e,"class",o=n[1].join(" "))},m:function(o,u){X(o,e,u),Z(e,t),s&&s.m(t,null),r=function(n,e){"static"===getComputedStyle(n).position&&(n.style.position="relative");var t=tn("iframe");t.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),t.setAttribute("aria-hidden","true"),t.tabIndex=-1;var r,o=hn();return o?(t.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=cn(window,"message",(function(n){n.source===t.contentWindow&&e()}))):(t.src="about:blank",t.onload=function(){r=cn(t.contentWindow,"resize",e)}),Z(n,t),function(){(o||r&&t.contentWindow)&&r(),nn(t)}}(t,n[7].bind(t)),i=!0,a||(c=K(n[2].call(null,e)),a=!0)},p:function(n,t){var r=$(t,1)[0];s&&s.p&&32&r&&z(s,u,n,n[5],r,null,null),(!i||2&r&&o!==(o=n[1].join(" ")))&&sn(e,"class",o)},i:function(n){i||(Vn(s,n),i=!0)},o:function(n){Jn(s,n),i=!1},d:function(n){n&&nn(e),s&&s.d(n),r(),a=!1,c()}}}function yo(n,e,t){var r,o,i=e.$$slots,a=void 0===i?{}:i,c=e.$$scope,u=(o=En(),function(n,e){var t=o.$$.callbacks[n];if(t){var r=vn(n,e);t.slice().forEach((function(n){n.call(o,r)}))}}),s={scrollDelay:80,scrollOffset:80,scrollTop:0,visibleEls:[]},f=e.class,l=void 0===f?"":f,d=Date.now(),p=0,h=e.pos,m=void 0===h?"top":h;function v(){var n=s.infinityEl;if(n){t(3,m=n.scrollTop>p-n.offsetHeight-s.scrollOffset?"bottom":n.scrollTop<s.scrollOffset?"top":"middle"),s.pos=m,s.scrollHeightChanged=s.scrollHeight!=p,s.scrollHeight=p,s.visibleElsChanged=!1;var e=function(n){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,t=C(n.childNodes),r=[],o=0;o<t.length;)t[o].nodeType==Node.ELEMENT_NODE?(r.push([o,t[o]]),o++):t.splice(o,1);if(!t.length)return[];for(var i=e.scrollTop;r.length>1;){var a=Math.floor(r.length/2);r[a][1].offsetTop<=i?r.splice(0,a):r.splice(a)}r.length||r.push([0,t[0]]);for(var c=e.offsetHeight,u=r[0][0],s=u;s<t.length&&!(t[s].offsetTop>i+c);)s++;return t.slice(u,s).filter((function(n){return!n.getAttribute("aria-hidden")}))}(n.firstElementChild,n);e.length==s.visibleEls.length&&e[0]==s.visibleEls[0]||(s.visibleEls=e,s.visibleElsChanged=!0),(s.scrollHeightChanged||s.visibleElsChanged)&&u("visibility",s),s.scrollHeightChanged&&u("rendered",s)}}function g(n){return!ye.undefined(n)&&(-1==n&&(n=p),ye.string(n)&&(n=s.infinityEl.querySelector(n)),n&&n.tagName&&(n=n.offsetTop),!ye.undefined(n)&&(!(n<0)&&(d=Date.now(),s.infinityEl.scrollTop=n,s.scrollTop=s.infinityEl.scrollTop,!0)))}return n.$$set=function(n){"class"in n&&t(4,l=n.class),"pos"in n&&t(3,m=n.pos),"$$scope"in n&&t(5,c=n.$$scope)},n.$$.update=function(){24&n.$$.dirty&&t(1,r=[l||"infinity-scroll"].concat(["has-pos-"+m])),1&n.$$.dirty&&p&&v()},[p,r,function(n){s.infinityEl=n,s.scrollTo=g,n.addEventListener("scroll",(function(){return function(n){s.scrollTid&&clearTimeout(s.scrollTid);s.scrollTid=setTimeout((function(){return function(n){d+500>Date.now()?(Math.abs(n.scrollTop-s.scrollTop)>40&&(n.scrollTop=s.scrollTop),s.scrollTid&&clearTimeout(s.scrollTid),v()):(s.scrollTop=n.scrollTop,v(),u("scrolled",s))}(n)}),s.scrollDelay)}(n)})),v()},m,l,c,a,function(){p=this.offsetHeight,t(0,p)}]}var bo=function(n){a(o,n);var e=go(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,yo,$o,D,{class:4,pos:3}),i}return o}(ce);function wo(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}function _o(n){var e,t,r,o,i=n[9].default,a=H(i,n,n[8],null);return{c:function(){e=tn("a"),a&&a.c(),sn(e,"href",n[2]),sn(e,"class",n[0]),sn(e,"style",n[1]),mn(e,"has-path",n[4])},m:function(i,c){X(i,e,c),a&&a.m(e,null),n[11](e),t=!0,r||(o=cn(e,"click",n[10]),r=!0)},p:function(n,r){var o=$(r,1)[0];a&&a.p&&256&o&&z(a,i,n,n[8],o,null,null),(!t||4&o)&&sn(e,"href",n[2]),(!t||1&o)&&sn(e,"class",n[0]),(!t||2&o)&&sn(e,"style",n[1]),17&o&&mn(e,"has-path",n[4])},i:function(n){t||(Vn(a,n),t=!0)},o:function(n){Jn(a,n),t=!1},d:function(t){t&&nn(e),a&&a.d(t),n[11](null),r=!1,o()}}}function ko(n,e,t){var r,o,i;U(n,pt,(function(n){return t(7,i=n)}));var a,c=e.$$slots,u=void 0===c?{}:c,s=e.$$scope,f=e.class,l=void 0===f?"":f,d=e.href,p=void 0===d?"/":d,h=e.style,m=void 0===h?"":h;return n.$$set=function(n){"class"in n&&t(0,l=n.class),"href"in n&&t(5,p=n.href),"style"in n&&t(1,m=n.style),"$$scope"in n&&t(8,s=n.$$scope)},n.$$.update=function(){160&n.$$.dirty&&t(2,r=0==p.indexOf("/")?i.basePath+p:p),132&n.$$.dirty&&t(4,o=i.basePath+i.path==r.replace(/(#|\?).*/,""))},[l,m,r,a,o,p,function(){return a.focus()},i,s,u,function(e){Rn(n,e)},function(n){jn[n?"unshift":"push"]((function(){t(3,a=n)}))}]}var xo=function(n){a(o,n);var e=wo(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,ko,_o,D,{class:0,href:5,style:1,focus:6}),i}return R(o,[{key:"focus",get:function(){return this.$$.ctx[6]}}]),o}(ce);function Eo(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}function Oo(n,e,t){var r=n.slice();return r[30]=e[t],r}function So(n,e,t){var r=n.slice();return r[33]=e[t],r[35]=t,r}function Co(n,e,t){var r=n.slice();return r[36]=e[t],r}function No(n){var e,t,r,o,i,a,c;return t=new Cr({props:{name:"users-cog"}}),o=new Cr({props:{name:"times"}}),{c:function(){e=tn("a"),te(t.$$.fragment),r=on(),te(o.$$.fragment),sn(e,"href","#settings"),sn(e,"class","btn-hallow"),mn(e,"is-active","settings"==n[12])},m:function(n,u){X(n,e,u),re(t,e,null),Z(e,r),re(o,e,null),i=!0,a||(c=cn(e,"click",st.toggle),a=!0)},p:function(n,t){4096&t[0]&&mn(e,"is-active","settings"==n[12])},i:function(n){i||(Vn(t.$$.fragment,n),Vn(o.$$.fragment,n),i=!0)},o:function(n){Jn(t.$$.fragment,n),Jn(o.$$.fragment,n),i=!1},d:function(n){n&&nn(e),oe(t),oe(o),a=!1,c()}}}function Ro(n){var e,t,r,o,i,a,c,u,s,f,l,d=n[10](n[0].name)+"",p=no(n[11],n[2])+"",h=!n[2].is("not_found"),m=h&&No(n);return{c:function(){e=tn("h1"),t=tn("a"),r=rn(d),o=on(),i=tn("span"),a=rn(p),c=on(),m&&m.c(),u=an(),sn(t,"href","#settings"),sn(e,"class","ellipsis"),sn(i,"class","chat-header__topic ellipsis")},m:function(n,d){X(n,e,d),Z(e,t),Z(t,r),X(n,o,d),X(n,i,d),Z(i,a),X(n,c,d),m&&m.m(n,d),X(n,u,d),s=!0,f||(l=cn(t,"click",st.toggle),f=!0)},p:function(n,e){(!s||1025&e[0])&&d!==(d=n[10](n[0].name)+"")&&ln(r,d),(!s||2052&e[0])&&p!==(p=no(n[11],n[2])+"")&&ln(a,p),4&e[0]&&(h=!n[2].is("not_found")),h?m?(m.p(n,e),4&e[0]&&Vn(m,1)):((m=No(n)).c(),Vn(m,1),m.m(u.parentNode,u)):m&&(Gn(),Jn(m,1,1,(function(){m=null})),Yn())},i:function(n){s||(Vn(m),s=!0)},o:function(n){Jn(m),s=!1},d:function(n){n&&nn(e),n&&nn(o),n&&nn(i),n&&nn(c),m&&m.d(n),n&&nn(u),f=!1,l()}}}function Ao(n){var e,t,r,o,i,a=[To,jo],c=[];function u(n,t){return 4&t[0]&&(e=!!n[2].is("private")),e?0:n[2].frozen?-1:1}return~(t=u(n,[-1]))&&(r=c[t]=a[t](n)),{c:function(){r&&r.c(),o=an()},m:function(n,e){~t&&c[t].m(n,e),X(n,o,e),i=!0},p:function(n,e){var i=t;(t=u(n,e))===i?~t&&c[t].p(n,e):(r&&(Gn(),Jn(c[i],1,1,(function(){c[i]=null})),Yn()),~t?((r=c[t])?r.p(n,e):(r=c[t]=a[t](n)).c(),Vn(r,1),r.m(o.parentNode,o)):r=null)},i:function(n){i||(Vn(r),i=!0)},o:function(n){Jn(r),i=!1},d:function(n){~t&&c[t].d(n),n&&nn(o)}}}function jo(n){var e,t,r,o,i,a,c,u,s,f=n[14](n[2].topic?"Topic for %1 is: %2":"No topic is set for %1.",n[2].name,n[2].topic)+"";function l(n,e){return 1==n[15].length?Po:Lo}t=new Cr({props:{name:"info-circle"}}),c=new Cr({props:{name:"info-circle"}});var d=l(n),p=d(n);return{c:function(){e=tn("p"),te(t.$$.fragment),r=on(),i=on(),a=tn("p"),te(c.$$.fragment),u=on(),p.c(),o=new $n(null)},m:function(n,l){X(n,e,l),re(t,e,null),Z(e,r),o.m(f,e),X(n,i,l),X(n,a,l),re(c,a,null),Z(a,u),p.m(a,null),s=!0},p:function(n,e){(!s||16388&e[0])&&f!==(f=n[14](n[2].topic?"Topic for %1 is: %2":"No topic is set for %1.",n[2].name,n[2].topic)+"")&&o.p(f),d===(d=l(n))&&p?p.p(n,e):(p.d(1),(p=d(n))&&(p.c(),p.m(a,null)))},i:function(n){s||(Vn(t.$$.fragment,n),Vn(c.$$.fragment,n),s=!0)},o:function(n){Jn(t.$$.fragment,n),Jn(c.$$.fragment,n),s=!1},d:function(n){n&&nn(e),oe(t),n&&nn(i),n&&nn(a),oe(c),p.d()}}}function To(n){var e,t,r,o,i,a=n[14]('This is a private conversation with "%1".',n[2].name)+"";return t=new Cr({props:{name:"info-circle"}}),{c:function(){e=tn("p"),te(t.$$.fragment),r=on(),o=new $n(null)},m:function(n,c){X(n,e,c),re(t,e,null),Z(e,r),o.m(a,e),i=!0},p:function(n,e){(!i||16388&e[0])&&a!==(a=n[14]('This is a private conversation with "%1".',n[2].name)+"")&&o.p(a)},i:function(n){i||(Vn(t.$$.fragment,n),i=!0)},o:function(n){Jn(t.$$.fragment,n),i=!1},d:function(n){n&&nn(e),oe(t)}}}function Lo(n){var e,t,r=n[14]("There are %1 participants in this conversation.",n[15].length)+"";return{c:function(){t=an(),e=new $n(t)},m:function(n,o){e.m(r,n,o),X(n,t,o)},p:function(n,t){49152&t[0]&&r!==(r=n[14]("There are %1 participants in this conversation.",n[15].length)+"")&&e.p(r)},d:function(n){n&&nn(t),n&&e.d()}}}function Po(n){var e,t=n[10]("You are the only participant in this conversation.")+"";return{c:function(){e=rn(t)},m:function(n,t){X(n,e,t)},p:function(n,r){1024&r[0]&&t!==(t=n[10]("You are the only participant in this conversation.")+"")&&ln(e,t)},d:function(n){n&&nn(e)}}}function Mo(n){var e,t,r,o,i,a,c,u=n[10]("Loading...")+"";return r=new Cr({props:{name:"spinner",animation:"spin"}}),{c:function(){e=tn("div"),t=tn("span"),te(r.$$.fragment),o=on(),i=tn("i"),a=rn(u),sn(e,"class","message__status-line for-loading has-pos-top")},m:function(n,u){X(n,e,u),Z(e,t),re(r,t,null),Z(t,o),Z(t,i),Z(i,a),c=!0},p:function(n,e){(!c||1024&e[0])&&u!==(u=n[10]("Loading...")+"")&&ln(a,u)},i:function(n){c||(Vn(r.$$.fragment,n),c=!0)},o:function(n){Jn(r.$$.fragment,n),c=!1},d:function(n){n&&nn(e),oe(r)}}}function Do(n){var e,t,r,o,i,a,c,u=n[10]("Started chatting on %1",n[2].historyStartAt.getHumanDate())+"";return r=new Cr({props:{name:"calendar-alt"}}),{c:function(){e=tn("div"),t=tn("span"),te(r.$$.fragment),o=on(),i=tn("i"),a=rn(u),sn(e,"class","message__status-line for-start-of-history")},m:function(n,u){X(n,e,u),Z(e,t),re(r,t,null),Z(t,o),Z(t,i),Z(i,a),c=!0},p:function(n,e){(!c||1028&e[0])&&u!==(u=n[10]("Started chatting on %1",n[2].historyStartAt.getHumanDate())+"")&&ln(a,u)},i:function(n){c||(Vn(r.$$.fragment,n),c=!0)},o:function(n){Jn(r.$$.fragment,n),c=!1},d:function(n){n&&nn(e),oe(r)}}}function Bo(n){var e,t,r,o,i,a,c,u=n[33].ts.getHumanDate()+"";return r=new Cr({props:{name:"calendar-alt"}}),{c:function(){e=tn("div"),t=tn("span"),te(r.$$.fragment),o=on(),i=tn("i"),a=rn(u),sn(e,"class","message__status-line for-day-changed")},m:function(n,u){X(n,e,u),Z(e,t),re(r,t,null),Z(t,o),Z(t,i),Z(i,a),c=!0},p:function(n,e){(!c||8192&e[0])&&u!==(u=n[33].ts.getHumanDate()+"")&&ln(a,u)},i:function(n){c||(Vn(r.$$.fragment,n),c=!0)},o:function(n){Jn(r.$$.fragment,n),c=!1},d:function(n){n&&nn(e),oe(r)}}}function Io(n){var e,t,r,o,i,a,c=n[10]("New messages")+"";return r=new Cr({props:{name:"comments"}}),{c:function(){e=tn("div"),t=tn("span"),te(r.$$.fragment),o=on(),i=rn(c),sn(e,"class","message__status-line for-last-read")},m:function(n,c){X(n,e,c),Z(e,t),re(r,t,null),Z(t,o),Z(t,i),a=!0},p:function(n,e){(!a||1024&e[0])&&c!==(c=n[10]("New messages")+"")&&ln(i,c)},i:function(n){a||(Vn(r.$$.fragment,n),a=!0)},o:function(n){Jn(r.$$.fragment,n),a=!1},d:function(n){n&&nn(e),oe(r)}}}function Uo(n){var e,t,r,o;return t=new Cr({props:{name:n[33].showDetails?"caret-square-up":"caret-square-down"}}),{c:function(){e=tn("a"),te(t.$$.fragment),sn(e,"href",r="#action:details:"+n[33].index)},m:function(n,r){X(n,e,r),re(t,e,null),o=!0},p:function(n,i){var a={};8192&i[0]&&(a.name=n[33].showDetails?"caret-square-up":"caret-square-down"),t.$set(a),(!o||8192&i[0]&&r!==(r="#action:details:"+n[33].index))&&sn(e,"href",r)},i:function(n){o||(Vn(t.$$.fragment,n),o=!0)},o:function(n){Jn(t.$$.fragment,n),o=!1},d:function(n){n&&nn(e),oe(t)}}}function Ho(n){var e,t,r,o,i,a,c,u;return t=new Cr({props:{name:"times-circle"}}),a=new Cr({props:{name:"sync-alt"}}),{c:function(){e=tn("a"),te(t.$$.fragment),o=on(),i=tn("a"),te(a.$$.fragment),sn(e,"href","#action:remove"),sn(e,"class","pull-right has-tooltip"),sn(e,"data-tooltip",r=n[10]("Remove")),sn(i,"href","#action:resend"),sn(i,"class","pull-right has-tooltip "),sn(i,"data-tooltip",c=n[10]("Resend"))},m:function(n,r){X(n,e,r),re(t,e,null),X(n,o,r),X(n,i,r),re(a,i,null),u=!0},p:function(n,t){(!u||1024&t[0]&&r!==(r=n[10]("Remove")))&&sn(e,"data-tooltip",r),(!u||1024&t[0]&&c!==(c=n[10]("Resend")))&&sn(i,"data-tooltip",c)},i:function(n){u||(Vn(t.$$.fragment,n),Vn(a.$$.fragment,n),u=!0)},o:function(n){Jn(t.$$.fragment,n),Jn(a.$$.fragment,n),u=!1},d:function(n){n&&nn(e),oe(t),n&&nn(o),n&&nn(i),oe(a)}}}function qo(n){return{c:A,m:A,p:A,d:A}}function zo(n){var e,t,r,o,i;return{c:function(){sn(e=tn("div"),"class",t="embed "+n[39].className)},m:function(t,a){X(t,e,a),o||(i=K(r=Xr.call(null,e,n[39])),o=!0)},p:function(o,i){n=o,8192&i[0]&&t!==(t="embed "+n[39].className)&&sn(e,"class",t),r&&M(r.update)&&8192&i[0]&&r.update.call(null,n[39])},d:function(n){n&&nn(e),o=!1,i()}}}function Fo(n){return{c:A,m:A,p:A,d:A}}function Ko(n){var e,t,r={ctx:n,current:null,token:null,hasCatch:!1,pending:Fo,then:zo,catch:qo,value:39};return Xn(t=n[36],r),{c:function(){e=an(),r.block.c()},m:function(n,t){X(n,e,t),r.block.m(n,r.anchor=t),r.mount=function(){return e.parentNode},r.anchor=e},p:function(e,o){if(n=e,r.ctx=n,8192&o[0]&&t!==(t=n[36])&&Xn(t,r));else{var i=n.slice();i[39]=r.resolved,r.block.p(i,o)}},d:function(n){n&&nn(e),r.block.d(n),r.token=null,r=null}}}function Wo(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,$,y,b,w,_,k,x,E,O,S=n[33].ts.toLocaleString()+"",C=n[33].from+"",N=n[33].markdown+"",R=n[33].dayChanged&&Bo(n),A=n[35]&&n[35]==n[13].length-n[2].unread&&Io(n);o=new Cr({props:{name:"pick:"+n[33].from,color:n[33].color}});var j=[Ho,Uo],T=[];function L(n,e){return!1===n[33].waitingForResponse?0:!n[33].waitingForResponse&&n[33].details?1:-1}~(v=L(n))&&(g=T[v]=j[v](n));for(var P=n[33].embeds,D=[],B=0;B<P.length;B+=1)D[B]=Ko(Co(n,P,B));return{c:function(){R&&R.c(),e=on(),A&&A.c(),t=on(),r=tn("div"),te(o.$$.fragment),i=on(),a=tn("div"),c=tn("div"),u=rn(S),f=on(),l=tn("a"),d=rn(C),h=on(),m=tn("div"),g&&g.c(),$=on(),b=on();for(var v=0;v<D.length;v+=1)D[v].c();w=on(),sn(a,"class","message__ts has-tooltip"),sn(a,"data-content",s=n[33].ts.format("%H:%M")),sn(l,"href",p="#action:join:"+n[33].from),sn(l,"class","message__from"),pn(l,"color",n[33].color),sn(l,"tabindex","-1"),y=new $n(null),sn(m,"class","message__text"),sn(r,"class",_=n[33].className),sn(r,"data-index",n[35]),sn(r,"data-ts",k=n[33].ts.toISOString()),mn(r,"is-not-present",!n[15].get(n[33].from)),mn(r,"show-details",!!n[33].showDetails)},m:function(s,p){R&&R.m(s,p),X(s,e,p),A&&A.m(s,p),X(s,t,p),X(s,r,p),re(o,r,null),Z(r,i),Z(r,a),Z(a,c),Z(c,u),Z(r,f),Z(r,l),Z(l,d),Z(r,h),Z(r,m),~v&&T[v].m(m,null),Z(m,$),y.m(N,m),Z(r,b);for(var g=0;g<D.length;g+=1)D[g].m(r,null);Z(r,w),x=!0,E||(O=cn(r,"click",(function(){M(n[9])&&n[9].apply(this,arguments)})),E=!0)},p:function(i,c){(n=i)[33].dayChanged?R?(R.p(n,c),8192&c[0]&&Vn(R,1)):((R=Bo(n)).c(),Vn(R,1),R.m(e.parentNode,e)):R&&(Gn(),Jn(R,1,1,(function(){R=null})),Yn()),n[35]&&n[35]==n[13].length-n[2].unread?A?(A.p(n,c),8196&c[0]&&Vn(A,1)):((A=Io(n)).c(),Vn(A,1),A.m(t.parentNode,t)):A&&(Gn(),Jn(A,1,1,(function(){A=null})),Yn());var f={};8192&c[0]&&(f.name="pick:"+n[33].from),8192&c[0]&&(f.color=n[33].color),o.$set(f),(!x||8192&c[0])&&S!==(S=n[33].ts.toLocaleString()+"")&&ln(u,S),(!x||8192&c[0]&&s!==(s=n[33].ts.format("%H:%M")))&&sn(a,"data-content",s),(!x||8192&c[0])&&C!==(C=n[33].from+"")&&ln(d,C),(!x||8192&c[0]&&p!==(p="#action:join:"+n[33].from))&&sn(l,"href",p),(!x||8192&c[0])&&pn(l,"color",n[33].color);var h=v;if((v=L(n))===h?~v&&T[v].p(n,c):(g&&(Gn(),Jn(T[h],1,1,(function(){T[h]=null})),Yn()),~v?((g=T[v])?g.p(n,c):(g=T[v]=j[v](n)).c(),Vn(g,1),g.m(m,$)):g=null),(!x||8192&c[0])&&N!==(N=n[33].markdown+"")&&y.p(N),8192&c[0]){var b;for(P=n[33].embeds,b=0;b<P.length;b+=1){var E=Co(n,P,b);D[b]?D[b].p(E,c):(D[b]=Ko(E),D[b].c(),D[b].m(r,w))}for(;b<D.length;b+=1)D[b].d(1);D.length=P.length}(!x||8192&c[0]&&_!==(_=n[33].className))&&sn(r,"class",_),(!x||8192&c[0]&&k!==(k=n[33].ts.toISOString()))&&sn(r,"data-ts",k),40960&c[0]&&mn(r,"is-not-present",!n[15].get(n[33].from)),8192&c[0]&&mn(r,"show-details",!!n[33].showDetails)},i:function(n){x||(Vn(R),Vn(A),Vn(o.$$.fragment,n),Vn(g),x=!0)},o:function(n){Jn(R),Jn(A),Jn(o.$$.fragment,n),Jn(g),x=!1},d:function(n){R&&R.d(n),n&&nn(e),A&&A.d(n),n&&nn(t),n&&nn(r),oe(o),~v&&T[v].d(),en(D,n),E=!1,O()}}}function Go(n){var e,t,r,o,i,a,c=no(n[11],n[2])+"";return r=new Cr({props:{name:"exclamation-triangle"}}),{c:function(){e=tn("div"),t=tn("div"),te(r.$$.fragment),o=on(),i=rn(c),sn(t,"class","message__text"),sn(e,"class","message is-highlighted")},m:function(n,c){X(n,e,c),Z(e,t),re(r,t,null),Z(t,o),Z(t,i),a=!0},p:function(n,e){(!a||2052&e[0])&&c!==(c=no(n[11],n[2])+"")&&ln(i,c)},i:function(n){a||(Vn(r.$$.fragment,n),a=!0)},o:function(n){Jn(r.$$.fragment,n),a=!1},d:function(n){n&&nn(e),oe(r)}}}function Yo(n){var e,t,r,o,i,a,c,u,s,f,l,d=n[10]("You are invited to join %1.",n[0].name)+"",p=n[10]("Do you want to join?")+"";return(u=new xo({props:{href:"#action:join",class:"btn",$$slots:{default:[Zo]},$$scope:{ctx:n}}})).$on("click",(function(){M(n[9])&&n[9].apply(this,arguments)})),(f=new xo({props:{href:"#action:close",class:"btn is-secondary",$$slots:{default:[Xo]},$$scope:{ctx:n}}})).$on("click",(function(){M(n[9])&&n[9].apply(this,arguments)})),{c:function(){e=tn("h2"),t=rn(d),r=on(),o=tn("p"),i=rn(p),a=on(),c=tn("p"),te(u.$$.fragment),s=on(),te(f.$$.fragment)},m:function(n,d){X(n,e,d),Z(e,t),X(n,r,d),X(n,o,d),Z(o,i),X(n,a,d),X(n,c,d),re(u,c,null),Z(c,s),re(f,c,null),l=!0},p:function(e,r){n=e,(!l||1025&r[0])&&d!==(d=n[10]("You are invited to join %1.",n[0].name)+"")&&ln(t,d),(!l||1024&r[0])&&p!==(p=n[10]("Do you want to join?")+"")&&ln(i,p);var o={};1024&r[0]|512&r[1]&&(o.$$scope={dirty:r,ctx:n}),u.$set(o);var a={};1024&r[0]|512&r[1]&&(a.$$scope={dirty:r,ctx:n}),f.$set(a)},i:function(n){l||(Vn(u.$$.fragment,n),Vn(f.$$.fragment,n),l=!0)},o:function(n){Jn(u.$$.fragment,n),Jn(f.$$.fragment,n),l=!1},d:function(n){n&&nn(e),n&&nn(r),n&&nn(o),n&&nn(a),n&&nn(c),oe(u),oe(f)}}}function Vo(n){var e,t,r,o,i,a,c,u,s=n[14]("Disconnected. Your connection %1 can be edited in [settings](%2).",n[11].name,"/chat/"+n[11].connection_id+"#settings")+"";return r=new Cr({props:{name:"exclamation-triangle"}}),{c:function(){e=tn("div"),t=tn("div"),te(r.$$.fragment),o=on(),i=new $n(null),sn(t,"class","message__text"),sn(e,"class","message is-highlighted")},m:function(n,f){X(n,e,f),Z(e,t),re(r,t,null),Z(t,o),i.m(s,t),a=!0,c||(u=cn(e,"click",st.toggle),c=!0)},p:function(n,e){(!a||18432&e[0])&&s!==(s=n[14]("Disconnected. Your connection %1 can be edited in [settings](%2).",n[11].name,"/chat/"+n[11].connection_id+"#settings")+"")&&i.p(s)},i:function(n){a||(Vn(r.$$.fragment,n),a=!0)},o:function(n){Jn(r.$$.fragment,n),a=!1},d:function(n){n&&nn(e),oe(r),c=!1,u()}}}function Jo(n){var e,t,r,o,i,a,c,u,s,f,l,d=n[10]("You are not part of this conversation.")+"",p=n[10]('Do you want to chat with "%1"?',n[2].name)+"";return(u=new xo({props:{href:"#action:join:"+n[2].name,class:"btn",$$slots:{default:[ni]},$$scope:{ctx:n}}})).$on("click",(function(){M(n[9])&&n[9].apply(this,arguments)})),f=new xo({props:{href:"/settings/conversation",class:"btn is-secondary",$$slots:{default:[ei]},$$scope:{ctx:n}}}),{c:function(){e=tn("h2"),t=rn(d),r=on(),o=tn("p"),i=rn(p),a=on(),c=tn("p"),te(u.$$.fragment),s=on(),te(f.$$.fragment)},m:function(n,d){X(n,e,d),Z(e,t),X(n,r,d),X(n,o,d),Z(o,i),X(n,a,d),X(n,c,d),re(u,c,null),Z(c,s),re(f,c,null),l=!0},p:function(e,r){n=e,(!l||1024&r[0])&&d!==(d=n[10]("You are not part of this conversation.")+"")&&ln(t,d),(!l||1028&r[0])&&p!==(p=n[10]('Do you want to chat with "%1"?',n[2].name)+"")&&ln(i,p);var o={};4&r[0]&&(o.href="#action:join:"+n[2].name),1024&r[0]|512&r[1]&&(o.$$scope={dirty:r,ctx:n}),u.$set(o);var a={};1024&r[0]|512&r[1]&&(a.$$scope={dirty:r,ctx:n}),f.$set(a)},i:function(n){l||(Vn(u.$$.fragment,n),Vn(f.$$.fragment,n),l=!0)},o:function(n){Jn(u.$$.fragment,n),Jn(f.$$.fragment,n),l=!1},d:function(n){n&&nn(e),n&&nn(r),n&&nn(o),n&&nn(a),n&&nn(c),oe(u),oe(f)}}}function Qo(n){var e,t,r,o,i,a,c,u,s,f,l,d=n[10]("Connection does not exist.")+"",p=n[10]('Do you want to create the connection "%1"?',n[11].connection_id)+"";return u=new xo({props:{href:"/settings/connections?uri="+encodeURIComponent(n[18](n[2])),class:"btn",$$slots:{default:[ti]},$$scope:{ctx:n}}}),f=new xo({props:{href:"/settings/connections",class:"btn is-secondary",$$slots:{default:[ri]},$$scope:{ctx:n}}}),{c:function(){e=tn("h2"),t=rn(d),r=on(),o=tn("p"),i=rn(p),a=on(),c=tn("p"),te(u.$$.fragment),s=on(),te(f.$$.fragment)},m:function(n,d){X(n,e,d),Z(e,t),X(n,r,d),X(n,o,d),Z(o,i),X(n,a,d),X(n,c,d),re(u,c,null),Z(c,s),re(f,c,null),l=!0},p:function(n,e){(!l||1024&e[0])&&d!==(d=n[10]("Connection does not exist.")+"")&&ln(t,d),(!l||3072&e[0])&&p!==(p=n[10]('Do you want to create the connection "%1"?',n[11].connection_id)+"")&&ln(i,p);var r={};4&e[0]&&(r.href="/settings/connections?uri="+encodeURIComponent(n[18](n[2]))),1024&e[0]|512&e[1]&&(r.$$scope={dirty:e,ctx:n}),u.$set(r);var o={};1024&e[0]|512&e[1]&&(o.$$scope={dirty:e,ctx:n}),f.$set(o)},i:function(n){l||(Vn(u.$$.fragment,n),Vn(f.$$.fragment,n),l=!0)},o:function(n){Jn(u.$$.fragment,n),Jn(f.$$.fragment,n),l=!1},d:function(n){n&&nn(e),n&&nn(r),n&&nn(o),n&&nn(a),n&&nn(c),oe(u),oe(f)}}}function Zo(n){var e,t,r,o,i,a=n[10]("Yes")+"";return e=new Cr({props:{name:"thumbs-up"}}),{c:function(){te(e.$$.fragment),t=on(),r=tn("span"),o=rn(a)},m:function(n,a){re(e,n,a),X(n,t,a),X(n,r,a),Z(r,o),i=!0},p:function(n,e){(!i||1024&e[0])&&a!==(a=n[10]("Yes")+"")&&ln(o,a)},i:function(n){i||(Vn(e.$$.fragment,n),i=!0)},o:function(n){Jn(e.$$.fragment,n),i=!1},d:function(n){oe(e,n),n&&nn(t),n&&nn(r)}}}function Xo(n){var e,t,r,o,i,a=n[10]("No")+"";return e=new Cr({props:{name:"thumbs-down"}}),{c:function(){te(e.$$.fragment),t=on(),r=tn("span"),o=rn(a)},m:function(n,a){re(e,n,a),X(n,t,a),X(n,r,a),Z(r,o),i=!0},p:function(n,e){(!i||1024&e[0])&&a!==(a=n[10]("No")+"")&&ln(o,a)},i:function(n){i||(Vn(e.$$.fragment,n),i=!0)},o:function(n){Jn(e.$$.fragment,n),i=!1},d:function(n){oe(e,n),n&&nn(t),n&&nn(r)}}}function ni(n){var e,t,r,o,i,a=n[10]("Yes")+"";return e=new Cr({props:{name:"thumbs-up"}}),{c:function(){te(e.$$.fragment),t=on(),r=tn("span"),o=rn(a)},m:function(n,a){re(e,n,a),X(n,t,a),X(n,r,a),Z(r,o),i=!0},p:function(n,e){(!i||1024&e[0])&&a!==(a=n[10]("Yes")+"")&&ln(o,a)},i:function(n){i||(Vn(e.$$.fragment,n),i=!0)},o:function(n){Jn(e.$$.fragment,n),i=!1},d:function(n){oe(e,n),n&&nn(t),n&&nn(r)}}}function ei(n){var e,t,r,o,i,a=n[10]("No")+"";return e=new Cr({props:{name:"thumbs-down"}}),{c:function(){te(e.$$.fragment),t=on(),r=tn("span"),o=rn(a)},m:function(n,a){re(e,n,a),X(n,t,a),X(n,r,a),Z(r,o),i=!0},p:function(n,e){(!i||1024&e[0])&&a!==(a=n[10]("No")+"")&&ln(o,a)},i:function(n){i||(Vn(e.$$.fragment,n),i=!0)},o:function(n){Jn(e.$$.fragment,n),i=!1},d:function(n){oe(e,n),n&&nn(t),n&&nn(r)}}}function ti(n){var e,t,r,o,i=n[10]("Yes")+"";return e=new Cr({props:{name:"thumbs-up"}}),{c:function(){te(e.$$.fragment),t=on(),r=rn(i)},m:function(n,i){re(e,n,i),X(n,t,i),X(n,r,i),o=!0},p:function(n,e){(!o||1024&e[0])&&i!==(i=n[10]("Yes")+"")&&ln(r,i)},i:function(n){o||(Vn(e.$$.fragment,n),o=!0)},o:function(n){Jn(e.$$.fragment,n),o=!1},d:function(n){oe(e,n),n&&nn(t),n&&nn(r)}}}function ri(n){var e,t,r,o,i=n[10]("No")+"";return e=new Cr({props:{name:"thumbs-down"}}),{c:function(){te(e.$$.fragment),t=on(),r=rn(i)},m:function(n,i){re(e,n,i),X(n,t,i),X(n,r,i),o=!0},p:function(n,e){(!o||1024&e[0])&&i!==(i=n[10]("No")+"")&&ln(r,i)},i:function(n){o||(Vn(e.$$.fragment,n),o=!0)},o:function(n){Jn(e.$$.fragment,n),o=!1},d:function(n){oe(e,n),n&&nn(t),n&&nn(r)}}}function oi(n){var e,t,r,o,i,a,c,u=n[10]("Loading...")+"";return r=new Cr({props:{name:"spinner",animation:"spin"}}),{c:function(){e=tn("div"),t=tn("span"),te(r.$$.fragment),o=on(),i=tn("i"),a=rn(u),sn(e,"class","message__status-line for-loading has-pos-bottom")},m:function(n,u){X(n,e,u),Z(e,t),re(r,t,null),Z(t,o),Z(t,i),Z(i,a),c=!0},p:function(n,e){(!c||1024&e[0])&&u!==(u=n[10]("Loading...")+"")&&ln(a,u)},i:function(n){c||(Vn(r.$$.fragment,n),c=!0)},o:function(n){Jn(r.$$.fragment,n),c=!1},d:function(n){n&&nn(e),oe(r)}}}function ii(n){var e,t,r,o,i,a,c,u=n[10]("Jump to %1",n[5].format("%b %e %H:%M"))+"";return r=new Cr({props:{name:"external-link-alt"}}),{c:function(){e=tn("div"),t=tn("a"),te(r.$$.fragment),o=on(),i=rn(u),sn(t,"href",a=n[0].path),sn(e,"class","message__status-line for-jump-to-now")},m:function(n,a){X(n,e,a),Z(e,t),re(r,t,null),Z(t,o),Z(t,i),c=!0},p:function(n,e){(!c||1056&e[0])&&u!==(u=n[10]("Jump to %1",n[5].format("%b %e %H:%M"))+"")&&ln(i,u),(!c||1&e[0]&&a!==(a=n[0].path))&&sn(t,"href",a)},i:function(n){c||(Vn(r.$$.fragment,n),c=!0)},o:function(n){Jn(r.$$.fragment,n),c=!1},d:function(n){n&&nn(e),oe(r)}}}function ai(n){for(var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g=n[13].length<10&&!n[2].is("not_found"),$=n[2].is("loading")&&n[13].length>10,y=n[2].historyStartAt&&!n[2].is("not_found")&&n[13].length,b=n[2].is("loading"),w=g&&Ao(n),_=$&&Mo(n),k=y&&Do(n),x=n[13].render(),E=[],O=0;O<x.length;O+=1)E[O]=Wo(So(n,x,O));var S=function(n){return Jn(E[n],1,1,(function(){E[n]=null}))},C=[Qo,Jo,Vo,Yo,Go],N=[];function R(n,e){return 2048&e[0]&&(i=!!n[11].is("not_found")),i?0:(4&e[0]&&(a=!!n[2].is("not_found")),a?1:(2048&e[0]&&(c=!(n[11].is("unreachable")||!n[11].frozen)),c?2:(4&e[0]&&(u=!(!n[2].frozen||!n[2].is("pending"))),u?3:(4&e[0]&&(s=!(!n[2].frozen||n[2].is("locked"))),s?4:-1))))}~(f=R(n,[-1]))&&(l=N[f]=C[f](n));var A=null===Gt.wantNotifications&&function(n){var e,t,r,o,i,a,c=n[14]('Go to "[account settings](%1)" to enable or disable notifications.',"/settings/account")+"";return r=new Cr({props:{name:"info-circle"}}),{c:function(){e=tn("div"),t=tn("div"),te(r.$$.fragment),o=on(),i=new $n(null),sn(t,"class","message__text"),sn(e,"class","message is-highlighted")},m:function(n,u){X(n,e,u),Z(e,t),re(r,t,null),Z(t,o),i.m(c,t),a=!0},p:function(n,e){(!a||16384&e[0])&&c!==(c=n[14]('Go to "[account settings](%1)" to enable or disable notifications.',"/settings/account")+"")&&i.p(c)},i:function(n){a||(Vn(r.$$.fragment,n),a=!0)},o:function(n){Jn(r.$$.fragment,n),a=!1},d:function(n){n&&nn(e),oe(r)}}}(n),j=b&&oi(n),T=!n[2].historyStopAt&&n[13].length&&ii(n);return{c:function(){w&&w.c(),e=on(),_&&_.c(),t=on(),k&&k.c(),r=on();for(var n=0;n<E.length;n+=1)E[n].c();o=on(),l&&l.c(),d=on(),A&&A.c(),p=on(),j&&j.c(),h=on(),T&&T.c(),m=an()},m:function(n,i){w&&w.m(n,i),X(n,e,i),_&&_.m(n,i),X(n,t,i),k&&k.m(n,i),X(n,r,i);for(var a=0;a<E.length;a+=1)E[a].m(n,i);X(n,o,i),~f&&N[f].m(n,i),X(n,d,i),A&&A.m(n,i),X(n,p,i),j&&j.m(n,i),X(n,h,i),T&&T.m(n,i),X(n,m,i),v=!0},p:function(n,i){if(8196&i[0]&&(g=n[13].length<10&&!n[2].is("not_found")),g?w?(w.p(n,i),8196&i[0]&&Vn(w,1)):((w=Ao(n)).c(),Vn(w,1),w.m(e.parentNode,e)):w&&(Gn(),Jn(w,1,1,(function(){w=null})),Yn()),8196&i[0]&&($=n[2].is("loading")&&n[13].length>10),$?_?(_.p(n,i),8196&i[0]&&Vn(_,1)):((_=Mo(n)).c(),Vn(_,1),_.m(t.parentNode,t)):_&&(Gn(),Jn(_,1,1,(function(){_=null})),Yn()),8196&i[0]&&(y=n[2].historyStartAt&&!n[2].is("not_found")&&n[13].length),y?k?(k.p(n,i),8196&i[0]&&Vn(k,1)):((k=Do(n)).c(),Vn(k,1),k.m(r.parentNode,r)):k&&(Gn(),Jn(k,1,1,(function(){k=null})),Yn()),42500&i[0]){var a;for(x=n[13].render(),a=0;a<x.length;a+=1){var c=So(n,x,a);E[a]?(E[a].p(c,i),Vn(E[a],1)):(E[a]=Wo(c),E[a].c(),Vn(E[a],1),E[a].m(o.parentNode,o))}for(Gn(),a=x.length;a<E.length;a+=1)S(a);Yn()}var u=f;(f=R(n,i))===u?~f&&N[f].p(n,i):(l&&(Gn(),Jn(N[u],1,1,(function(){N[u]=null})),Yn()),~f?((l=N[f])?l.p(n,i):(l=N[f]=C[f](n)).c(),Vn(l,1),l.m(d.parentNode,d)):l=null),null===Gt.wantNotifications&&A.p(n,i),4&i[0]&&(b=n[2].is("loading")),b?j?(j.p(n,i),4&i[0]&&Vn(j,1)):((j=oi(n)).c(),Vn(j,1),j.m(h.parentNode,h)):j&&(Gn(),Jn(j,1,1,(function(){j=null})),Yn()),!n[2].historyStopAt&&n[13].length?T?(T.p(n,i),8196&i[0]&&Vn(T,1)):((T=ii(n)).c(),Vn(T,1),T.m(m.parentNode,m)):T&&(Gn(),Jn(T,1,1,(function(){T=null})),Yn())},i:function(n){if(!v){Vn(w),Vn(_),Vn(k);for(var e=0;e<x.length;e+=1)Vn(E[e]);Vn(l),Vn(A),Vn(j),Vn(T),v=!0}},o:function(n){Jn(w),Jn(_),Jn(k),E=E.filter(Boolean);for(var e=0;e<E.length;e+=1)Jn(E[e]);Jn(l),Jn(A),Jn(j),Jn(T),v=!1},d:function(n){w&&w.d(n),n&&nn(e),_&&_.d(n),n&&nn(t),k&&k.d(n),n&&nn(r),en(E,n),n&&nn(o),~f&&N[f].d(n),n&&nn(d),A&&A.d(n),n&&nn(p),j&&j.d(n),n&&nn(h),T&&T.d(n),n&&nn(m)}}}function ci(n){for(var e,t,r,o,i,a,c,u,s,f,l=n[10]("Participants (%1)",n[15].length)+"",d=n[15].toArray(),p=[],h=0;h<d.length;h+=1)p[h]=ui(Oo(n,d,h));var m=function(n){return Jn(p[n],1,1,(function(){p[n]=null}))};return{c:function(){e=tn("div"),t=tn("nav"),r=tn("h3"),o=rn(l),i=on();for(var n=0;n<p.length;n+=1)p[n].c();a=on(),c=tn("nav"),sn(t,"class","sidebar-right__nav"),sn(e,"class","sidebar-right")},m:function(l,d){X(l,e,d),Z(e,t),Z(t,r),Z(r,o),Z(t,i);for(var h=0;h<p.length;h+=1)p[h].m(t,null);Z(t,a),Z(t,c),u=!0,s||(f=cn(t,"click",(function(){M(n[9])&&n[9].apply(this,arguments)})),s=!0)},p:function(e,r){if(n=e,(!u||33792&r[0])&&l!==(l=n[10]("Participants (%1)",n[15].length)+"")&&ln(o,l),32768&r[0]){var i;for(d=n[15].toArray(),i=0;i<d.length;i+=1){var c=Oo(n,d,i);p[i]?(p[i].p(c,r),Vn(p[i],1)):(p[i]=ui(c),p[i].c(),Vn(p[i],1),p[i].m(t,a))}for(Gn(),i=d.length;i<p.length;i+=1)m(i);Yn()}},i:function(n){if(!u){for(var e=0;e<d.length;e+=1)Vn(p[e]);u=!0}},o:function(n){p=p.filter(Boolean);for(var e=0;e<p.length;e+=1)Jn(p[e]);u=!1},d:function(n){n&&nn(e),en(p,n),s=!1,f()}}}function ui(n){var e,t,r,o,i,a,c,u,s=n[30].nick+"";return t=new Cr({props:{name:"pick:"+n[30].id,family:"solid",color:n[30].color}}),{c:function(){e=tn("a"),te(t.$$.fragment),r=on(),o=tn("span"),i=rn(s),sn(e,"href",a="#action:join:"+n[30].id),sn(e,"class",c="participant "+we(n[30].modes))},m:function(n,a){X(n,e,a),re(t,e,null),Z(e,r),Z(e,o),Z(o,i),u=!0},p:function(n,r){var o={};32768&r[0]&&(o.name="pick:"+n[30].id),32768&r[0]&&(o.color=n[30].color),t.$set(o),(!u||32768&r[0])&&s!==(s=n[30].nick+"")&&ln(i,s),(!u||32768&r[0]&&a!==(a="#action:join:"+n[30].id))&&sn(e,"href",a),(!u||32768&r[0]&&c!==(c="participant "+we(n[30].modes)))&&sn(e,"class",c)},i:function(n){u||(Vn(t.$$.fragment,n),u=!0)},o:function(n){Jn(t.$$.fragment,n),u=!1},d:function(n){n&&nn(e),oe(t)}}}function si(n){var e,t,r,o,i,a,c,u,s,f=n[16]>2&&n[15].length&&!n[2].is("not_found");function l(e){n[23](e)}e=new Dr({props:{$$slots:{default:[Ro]},$$scope:{ctx:n}}}),(r=new bo({props:{class:"main is-above-chat-input",$$slots:{default:[ai]},$$scope:{ctx:n}}})).$on("scrolled",(function(){M(n[7])&&n[7].apply(this,arguments)})),r.$on("visibility",(function(){M(n[8])&&n[8].apply(this,arguments)}));var d={conversation:n[0]};void 0!==n[6]&&(d.uploader=n[6]),i=new mo({props:d}),jn.push((function(){return ee(i,"uploader",l)}));var p=f&&ci(n);return{c:function(){te(e.$$.fragment),t=on(),te(r.$$.fragment),o=on(),te(i.$$.fragment),c=on(),p&&p.c(),u=an()},m:function(n,a){re(e,n,a),X(n,t,a),re(r,n,a),X(n,o,a),re(i,n,a),X(n,c,a),p&&p.m(n,a),X(n,u,a),s=!0},p:function(t,o){n=t;var c={};7173&o[0]|512&o[1]&&(c.$$scope={dirty:o,ctx:n}),e.$set(c);var s={};60965&o[0]|512&o[1]&&(s.$$scope={dirty:o,ctx:n}),r.$set(s);var l={};1&o[0]&&(l.conversation=n[0]),!a&&64&o[0]&&(a=!0,l.uploader=n[6],Bn((function(){return a=!1}))),i.$set(l),98308&o[0]&&(f=n[16]>2&&n[15].length&&!n[2].is("not_found")),f?p?(p.p(n,o),98308&o[0]&&Vn(p,1)):((p=ci(n)).c(),Vn(p,1),p.m(u.parentNode,u)):p&&(Gn(),Jn(p,1,1,(function(){p=null})),Yn())},i:function(n){s||(Vn(e.$$.fragment,n),Vn(r.$$.fragment,n),Vn(i.$$.fragment,n),Vn(p),s=!0)},o:function(n){Jn(e.$$.fragment,n),Jn(r.$$.fragment,n),Jn(i.$$.fragment,n),Jn(p),s=!1},d:function(n){oe(e,n),n&&nn(t),oe(r,n),n&&nn(o),oe(i,n),n&&nn(c),p&&p.d(n),n&&nn(u)}}}function fi(n,e,t){var r,o,i,a,c,u,s,f,l,d,p,h,m,v=A,g=function(){return v(),v=B(R,(function(n){return t(2,u=n)})),R},y=A,b=function(){return y(),y=B(N,(function(n){return t(11,f=n)})),N},w=A,_=function(){return w(),w=B(j,(function(n){return t(13,d=n)})),j},k=A,x=function(){return k(),k=B(T,(function(n){return t(15,h=n)})),T};U(n,pt,(function(n){return t(21,a=n)})),U(n,bt,(function(n){return t(10,s=n)})),U(n,st,(function(n){return t(12,l=n)})),U(n,wt,(function(n){return t(14,p=n)})),U(n,ft,(function(n){return t(16,m=n)})),n.$$.on_destroy.push((function(){return v()})),n.$$.on_destroy.push((function(){return y()})),n.$$.on_destroy.push((function(){return w()})),n.$$.on_destroy.push((function(){return k()}));var E=e.title,O=void 0===E?"Chat":E,S=new vo,C=(Nn("socket"),Nn("user"));U(n,C,(function(n){return t(22,c=n)}));var N=C.notifications;b();var R=C.notifications;g();var j=R.messages;_();var T=R.participants;x();var L,P=new Fe,M="",D={};function I(n){var e;if(n.activeConversation!=R)return D.conversation&&D.conversation(),D.markAsRead&&D.markAsRead(),g(t(0,R=n.activeConversation)),_(t(1,j=R.messages)),x(t(4,T=R.participants)),b(t(3,N=n.findConversation({connection_id:R.connection_id})||R)),t(5,P=new Fe),D.conversation=R.subscribe((function(n){g(t(0,R=n))})),D.markAsRead=R.markAsRead.bind(R),t(20,(e=pt.hash,M=!!String(e||"").match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)&&pt.hash||"")),M?R.load({around:M}):R.historyStopAt?void 0:R.load({around:P.toISOString()})}return On((function(){S.attach(document.querySelector(".main"),L)})),Sn((function(){Object.keys(D).forEach((function(n){return D[n]()})),S.detach()})),n.$$set=function(n){"title"in n&&t(19,O=n.title)},n.$$.update=function(){2097152&n.$$.dirty[0]&&function(n){var e=["connection_id","conversation_id"].map((function(e){return n.param(e)})),t=$(e,2),r=t[0],o=t[1];R.connection_id==r&&R.conversation_id==o||C.setActiveConversation({connection_id:r,conversation_id:o})}(a),4194304&n.$$.dirty[0]&&I(c),4194306&n.$$.dirty[0]&&j.update({expandUrlToMedia:c.expandUrlToMedia}),4&n.$$.dirty[0]&&!!u.frozen,4&n.$$.dirty[0]&&t(19,O=u.title),2097157&n.$$.dirty[0]&&(a.hash||u.historyStopAt||R.load({})),1&n.$$.dirty[0]&&t(7,r=Wr("onInfinityScrolled",{conversation:R})),1048577&n.$$.dirty[0]&&t(8,o=Wr("onInfinityVisibility",{conversation:R,onLoadHash:M})),1&n.$$.dirty[0]&&t(9,i=Wr("onMessageClick",{conversation:R,user:C}))},[R,j,u,N,T,P,L,r,o,i,s,f,l,d,p,h,m,C,function(){var n=u.connection_id.split("-"),e=$(n,2);return e[0]+"://"+e[1]+"/"+encodeURIComponent(u.conversation_id)+"?tls=1"},O,M,a,c,function(n){t(6,L=n)}]}var li=function(n){a(o,n);var e=Eo(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,fi,si,D,{title:19},[-1,-1]),i}return o}(ce);function di(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}var pi=function(n){return{}},hi=function(n){return{}};function mi(n){var e,t,r,o,i,a,c,u,s;(o=new Cr({props:{family:"regular",name:n[8]}})).$on("click",n[15]);var f,l=n[10].label,d=H(l,n,n[9],hi),p=d||{c:function(){f=rn("Label")},m:function(n,e){X(n,f,e)},d:function(n){n&&nn(f)}};return{c:function(){e=tn("div"),t=tn("input"),r=on(),te(o.$$.fragment),i=on(),a=tn("label"),p&&p.c(),sn(t,"type","checkbox"),sn(t,"id",n[5]),sn(t,"name",n[4]),t.__value=n[1],t.value=t.__value,t.disabled=n[2],sn(a,"for",n[5]),sn(e,"class","checkbox"),e.hidden=n[3],mn(e,"has-focus",n[7]),mn(e,"is-disabled",n[2])},m:function(f,l){X(f,e,l),Z(e,t),t.checked=n[0],n[12](t),Z(e,r),re(o,e,null),Z(e,i),Z(e,a),p&&p.m(a,null),c=!0,u||(s=[cn(t,"change",n[11]),cn(t,"blur",n[13]),cn(t,"focus",n[14])],u=!0)},p:function(n,r){var i=$(r,1)[0];(!c||32&i)&&sn(t,"id",n[5]),(!c||16&i)&&sn(t,"name",n[4]),(!c||2&i)&&(t.__value=n[1],t.value=t.__value),(!c||4&i)&&(t.disabled=n[2]),1&i&&(t.checked=n[0]);var u={};256&i&&(u.name=n[8]),o.$set(u),d&&d.p&&512&i&&z(d,l,n,n[9],i,pi,hi),(!c||32&i)&&sn(a,"for",n[5]),(!c||8&i)&&(e.hidden=n[3]),128&i&&mn(e,"has-focus",n[7]),4&i&&mn(e,"is-disabled",n[2])},i:function(n){c||(Vn(o.$$.fragment,n),Vn(p,n),c=!0)},o:function(n){Jn(o.$$.fragment,n),Jn(p,n),c=!1},d:function(t){t&&nn(e),n[12](null),oe(o),p&&p.d(t),u=!1,P(s)}}}function vi(n,e,t){var r,o,i=e.$$slots,a=void 0===i?{}:i,c=e.$$scope,u=e.checked,s=void 0!==u&&u,f=e.disabled,l=void 0!==f&&f,d=e.hidden,p=void 0!==d&&d,h=e.name,m=void 0===h?"":h,v=e.id,g=void 0===v?m?"form_"+m:Ce():v,$=e.value,y=void 0===$?1:$,b=!1;return n.$$set=function(n){"checked"in n&&t(0,s=n.checked),"disabled"in n&&t(2,l=n.disabled),"hidden"in n&&t(3,p=n.hidden),"name"in n&&t(4,m=n.name),"id"in n&&t(5,g=n.id),"value"in n&&t(1,y=n.value),"$$scope"in n&&t(9,c=n.$$scope)},n.$$.update=function(){64&n.$$.dirty&&o&&!o.syncValue&&(t(6,o.syncValue=function(){var n;t(0,(n=[this.checked,this.value],s=n[0],y=n[1],n),s,(t(1,y),t(6,o)))},o),o.syncValue()),1&n.$$.dirty&&t(8,r=s?"check-square":"square")},[s,y,l,p,m,g,o,b,r,c,a,function(){s=this.checked,t(0,s),t(6,o)},function(n){jn[n?"unshift":"push"]((function(){t(6,o=n)}))},function(){t(7,b=!1)},function(){t(7,b=!0)},function(){l||t(0,s=!s)}]}var gi=function(n){a(o,n);var e=di(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,vi,mi,D,{checked:0,disabled:2,hidden:3,name:4,id:5,value:1}),i}return o}(ce);function $i(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}var yi=function(n){return{}},bi=function(n){return{}},wi=function(n){return{}},_i=function(n){return{}};function ki(n){var e,t,r,o,i;return t=new Cr({props:{name:n[9]?"eye-slash":"eye"}}),{c:function(){e=tn("a"),te(t.$$.fragment),sn(e,"href","#toggle"),sn(e,"class","text-field__toggle")},m:function(a,c){X(a,e,c),re(t,e,null),r=!0,o||(i=cn(e,"click",un(n[15])),o=!0)},p:function(n,e){var r={};512&e&&(r.name=n[9]?"eye-slash":"eye"),t.$set(r)},i:function(n){r||(Vn(t.$$.fragment,n),r=!0)},o:function(n){Jn(t.$$.fragment,n),r=!1},d:function(n){n&&nn(e),oe(t),o=!1,i()}}}function xi(n){var e,t,r,o,i,a,c,u,s,f,l,d=n[12].label,p=H(d,n,n[11],_i),h=p||{c:function(){l=rn("Label")},m:function(n,e){X(n,l,e)},d:function(n){n&&nn(l)}},m="password"==n[7]&&!n[6]&&ki(n),v=n[12].help,g=H(v,n,n[11],bi);return{c:function(){e=tn("div"),t=tn("label"),h&&h.c(),r=on(),o=tn("input"),a=on(),m&&m.c(),c=on(),g&&g.c(),sn(t,"for",n[4]),sn(o,"type",i=n[9]?"text":n[7]),sn(o,"name",n[3]),sn(o,"id",n[4]),sn(o,"autocomplete",n[1]),sn(o,"placeholder",n[5]),o.readOnly=n[6],o.value=n[0],sn(e,"class","text-field"),e.hidden=n[2],mn(e,"has-password","password"==n[7])},m:function(i,l){X(i,e,l),Z(e,t),h&&h.m(t,null),Z(e,r),Z(e,o),n[14](o),Z(e,a),m&&m.m(e,null),X(i,c,l),g&&g.m(i,l),u=!0,s||(f=[cn(o,"input",n[10]),cn(o,"keyup",n[13])],s=!0)},p:function(n,r){var a=$(r,1)[0];p&&p.p&&2048&a&&z(p,d,n,n[11],a,wi,_i),(!u||16&a)&&sn(t,"for",n[4]),(!u||640&a&&i!==(i=n[9]?"text":n[7]))&&sn(o,"type",i),(!u||8&a)&&sn(o,"name",n[3]),(!u||16&a)&&sn(o,"id",n[4]),(!u||2&a)&&sn(o,"autocomplete",n[1]),(!u||32&a)&&sn(o,"placeholder",n[5]),(!u||64&a)&&(o.readOnly=n[6]),(!u||1&a&&o.value!==n[0])&&(o.value=n[0]),"password"!=n[7]||n[6]?m&&(Gn(),Jn(m,1,1,(function(){m=null})),Yn()):m?(m.p(n,a),192&a&&Vn(m,1)):((m=ki(n)).c(),Vn(m,1),m.m(e,null)),(!u||4&a)&&(e.hidden=n[2]),128&a&&mn(e,"has-password","password"==n[7]),g&&g.p&&2048&a&&z(g,v,n,n[11],a,yi,bi)},i:function(n){u||(Vn(h,n),Vn(m),Vn(g,n),u=!0)},o:function(n){Jn(h,n),Jn(m),Jn(g,n),u=!1},d:function(t){t&&nn(e),h&&h.d(t),n[14](null),m&&m.d(),t&&nn(c),g&&g.d(t),s=!1,P(f)}}}function Ei(n,e,t){var r,o=e.$$slots,i=void 0===o?{}:o,a=e.$$scope,c=!1,u=e.autocomplete,s=void 0===u?null:u,f=e.hidden,l=void 0!==f&&f,d=e.name,p=void 0===d?"":d,h=e.id,m=void 0===h?p?"form_"+p:Ce():h,v=e.placeholder,g=void 0===v?"":v,$=e.readonly,y=void 0!==$&&$,b=e.type,w=void 0===b?"text":b,_=e.value,k=void 0===_?"":_;return n.$$set=function(n){"autocomplete"in n&&t(1,s=n.autocomplete),"hidden"in n&&t(2,l=n.hidden),"name"in n&&t(3,p=n.name),"id"in n&&t(4,m=n.id),"placeholder"in n&&t(5,g=n.placeholder),"readonly"in n&&t(6,y=n.readonly),"type"in n&&t(7,w=n.type),"value"in n&&t(0,k=n.value),"$$scope"in n&&t(11,a=n.$$scope)},n.$$.update=function(){256&n.$$.dirty&&r&&!r.syncValue&&(t(8,r.syncValue=function(){t(0,k=this.value)},r),r.syncValue())},[k,s,l,p,m,g,y,w,r,c,function(n){t(0,k=w.match(/^(number|range)$/)?parseInt(n.target.value,10):n.target.value)},a,i,function(e){Rn(n,e)},function(n){jn[n?"unshift":"push"]((function(){t(8,r=n)}))},function(){t(9,c=!c)}]}var Oi=function(n){a(o,n);var e=$i(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,Ei,xi,D,{autocomplete:1,hidden:2,name:3,id:4,placeholder:5,readonly:6,type:7,value:0}),i}return o}(ce);function Si(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}function Ci(n){var e,t,r,o=n[6]("Loading...")+"";return{c:function(){e=tn("div"),t=tn("div"),r=rn(o),sn(t,"class","progress__bar"),pn(t,"width",n[4]+"%"),sn(e,"class","progress")},m:function(n,o){X(n,e,o),Z(e,t),Z(t,r)},p:function(n,e){64&e&&o!==(o=n[6]("Loading...")+"")&&ln(r,o),16&e&&pn(t,"width",n[4]+"%")},i:A,o:A,d:function(n){n&&nn(e)}}}function Ni(n){var e,t,r,o,i=n[6](n[2])+"";return{c:function(){e=tn("div"),t=rn(i),sn(e,"class","success")},m:function(n,r){X(n,e,r),Z(e,t),o=!0},p:function(n,e){(!o||68&e)&&i!==(i=n[6](n[2])+"")&&ln(t,i)},i:function(n){o||(Dn((function(){r||(r=Zn(e,gr,{},!0)),r.run(1)})),o=!0)},o:function(n){r||(r=Zn(e,gr,{},!1)),r.run(0),o=!1},d:function(n){n&&nn(e),n&&r&&r.end()}}}function Ri(n){var e,t,r,o,i=n[6](n[3].error())+"";return{c:function(){e=tn("div"),t=rn(i),sn(e,"class","error")},m:function(n,r){X(n,e,r),Z(e,t),o=!0},p:function(n,e){(!o||72&e)&&i!==(i=n[6](n[3].error())+"")&&ln(t,i)},i:function(n){o||(Dn((function(){r||(r=Zn(e,gr,{},!0)),r.run(1)})),o=!0)},o:function(n){r||(r=Zn(e,gr,{},!1)),r.run(0),o=!1},d:function(n){n&&nn(e),n&&r&&r.end()}}}function Ai(n){var e,t,r,o,i,a,c,u=[Ri,Ni,Ci],s=[];function f(n,o){return 8&o&&(e=!!n[3].is("error")),e?0:(40&o&&(t=!(!n[3].is("success")||!n[5])),t?1:(9&o&&(r=!(!1===n[0]||!n[3].is("loading"))),r?2:-1))}return~(o=f(n,-1))&&(i=s[o]=u[o](n)),{c:function(){i&&i.c(),a=an()},m:function(n,e){~o&&s[o].m(n,e),X(n,a,e),c=!0},p:function(n,e){var t=$(e,1)[0],r=o;(o=f(n,t))===r?~o&&s[o].p(n,t):(i&&(Gn(),Jn(s[r],1,1,(function(){s[r]=null})),Yn()),~o?((i=s[o])?i.p(n,t):(i=s[o]=u[o](n)).c(),Vn(i,1),i.m(a.parentNode,a)):i=null)},i:function(n){c||(Vn(i),c=!0)},o:function(n){Jn(i),c=!1},d:function(n){~o&&s[o].d(n),n&&nn(a)}}}function ji(n,e,t){var r,o,i=A,a=function(){return i(),i=B(f,(function(n){return t(3,r=n)})),f};U(n,bt,(function(n){return t(6,o=n)})),n.$$.on_destroy.push((function(){return i()}));var c=e.progress,u=void 0!==c&&c,s=e.op,f=void 0===s?new We({}):s;a();var l,d=e.success,p=void 0===d?"Saved.":d,h=0,m=!1;return Sn((function(){return l&&clearTimeout(l)})),n.$$set=function(n){"progress"in n&&t(0,u=n.progress),"op"in n&&a(t(1,f=n.op)),"success"in n&&t(2,p=n.success)},n.$$.update=function(){9&n.$$.dirty&&function(n,e){if(l&&clearTimeout(l),n.is("loading")){if(ye.number(e))return t(4,h=e);t(4,h=0),l=setInterval((function(){return t(4,++h)}),500)}}(r,u),8&n.$$.dirty&&function(n){if(!n.is("success"))return t(5,m=!1);m||(t(5,m=!0),l=setTimeout((function(){return t(5,m=!1)}),2e3))}(r)},[u,f,p,r,h,m,o]}var Ti=function(n){a(o,n);var e=Si(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,ji,Ai,D,{progress:0,op:1,success:2}),i}return o}(ce);function Li(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function Pi(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Li(Object(t),!0).forEach((function(e){ue(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Li(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var Mi=function(n,e){n.addEventListener("change",(function(n){var t=n.target;if(t&&t.name){var r="checkbox"==t.type?t.checked?t.value:void 0:t.value,o=e.changed(t.name,r);o&&e.set(Pi(Pi({},I(e)),o))}})),n.addEventListener("submit",(function(n){n.preventDefault(),e.submit().catch((function(n){console.error("formAction.submit() failed:",n),e.set(Pi(Pi({},I(e)),{},{error:n}))}))})),e.formEl=n,e.render()},Di=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{error:""},e=at(n);return e.changed=function(n,e){return ue({},n,e)},e.renderOnNextTick=function(n){var e=this;setTimeout((function(){return e.render(n)}),1)},e.submit=function(){return Promise.resolve()},e.render=function(n){var e=this;return n&&this.set(Pi(Pi({},I(this)),n)),this.formEl?(n||(n=I(this)),Object.keys(n).filter((function(n){return"error"!=n})).map((function(t){var r=e.formEl.querySelector('[name="'+t+'"]');return r&&void 0!==n[t]?("checkbox"==r.type?r.checked=!!n[t]:r.value=n[t],r.syncValue&&r.syncValue(),t):null}))):null},e};function Bi(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}function Ii(n,e,t){var r=n.slice();return r[18]=e[t],r}function Ui(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,$,y,b,w,_,k,x,E,O,S,C=n[6]("Connection profiles")+"",N=n[6]("Connection profiles are used to set up global values for every connection that connect to the same host.")+"",R=n[6]("Host")+"",A=n[6]("Secure")+"",j=n[6]("Default")+"",T=n[6]("Forced")+"";c=new Ti({props:{op:n[8],progress:!0}});for(var L=n[3],P=[],M=0;M<L.length;M+=1)P[M]=qi(Ii(n,L,M));var D=n[4]&&zi(n);return{c:function(){e=tn("h2"),t=rn(C),r=on(),o=tn("p"),i=rn(N),a=on(),te(c.$$.fragment),u=on(),s=tn("table"),f=tn("thead"),l=tn("tr"),d=tn("th"),p=rn(R),h=on(),m=tn("th"),v=rn(A),g=on(),$=tn("th"),y=rn(j),b=on(),w=tn("th"),_=rn(T),k=on(),x=tn("tbody");for(var n=0;n<P.length;n+=1)P[n].c();E=on(),D&&D.c(),O=an()},m:function(n,C){X(n,e,C),Z(e,t),X(n,r,C),X(n,o,C),Z(o,i),X(n,a,C),re(c,n,C),X(n,u,C),X(n,s,C),Z(s,f),Z(f,l),Z(l,d),Z(d,p),Z(l,h),Z(l,m),Z(m,v),Z(l,g),Z(l,$),Z($,y),Z(l,b),Z(l,w),Z(w,_),Z(s,k),Z(s,x);for(var N=0;N<P.length;N+=1)P[N].m(x,null);X(n,E,C),D&&D.m(n,C),X(n,O,C),S=!0},p:function(n,e){if((!S||64&e)&&C!==(C=n[6]("Connection profiles")+"")&&ln(t,C),(!S||64&e)&&N!==(N=n[6]("Connection profiles are used to set up global values for every connection that connect to the same host.")+"")&&ln(i,N),(!S||64&e)&&R!==(R=n[6]("Host")+"")&&ln(p,R),(!S||64&e)&&A!==(A=n[6]("Secure")+"")&&ln(v,A),(!S||64&e)&&j!==(j=n[6]("Default")+"")&&ln(y,j),(!S||64&e)&&T!==(T=n[6]("Forced")+"")&&ln(_,T),72&e){var r;for(L=n[3],r=0;r<L.length;r+=1){var o=Ii(n,L,r);P[r]?P[r].p(o,e):(P[r]=qi(o),P[r].c(),P[r].m(x,null))}for(;r<P.length;r+=1)P[r].d(1);P.length=L.length}n[4]?D?(D.p(n,e),16&e&&Vn(D,1)):((D=zi(n)).c(),Vn(D,1),D.m(O.parentNode,O)):D&&(Gn(),Jn(D,1,1,(function(){D=null})),Yn())},i:function(n){S||(Vn(c.$$.fragment,n),Vn(D),S=!0)},o:function(n){Jn(c.$$.fragment,n),Jn(D),S=!1},d:function(n){n&&nn(e),n&&nn(r),n&&nn(o),n&&nn(a),oe(c,n),n&&nn(u),n&&nn(s),en(P,n),n&&nn(E),D&&D.d(n),n&&nn(O)}}}function Hi(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,$,y,b,w,_,k,x,E,O,S,C,N,R;t=new Oi({props:{name:"host",placeholder:n[6]("Ex: chat.freenode.net:6697"),readonly:!n[4],$$slots:{default:[Wi],help:[Ki],label:[Fi]},$$scope:{ctx:n}}}),o=new gi({props:{name:"tls",disabled:!n[4],$$slots:{label:[Gi]},$$scope:{ctx:n}}}),a=new gi({props:{name:"tls_verify",disabled:!n[5].tls||!n[4],hidden:!n[5].tls,$$slots:{label:[Yi]},$$scope:{ctx:n}}}),u=new Oi({props:{name:"conversation_id",placeholder:n[6]("Ex: #convos"),readonly:!n[4],$$slots:{label:[Vi]},$$scope:{ctx:n}}}),f=new Oi({props:{name:"service_accounts",placeholder:n[6]("chanserv, nickserv, ..."),readonly:!n[4],$$slots:{default:[Zi],help:[Qi],label:[Ji]},$$scope:{ctx:n}}}),d=new gi({props:{name:"is_default",disabled:!n[4],$$slots:{label:[Xi]},$$scope:{ctx:n}}}),h=new gi({props:{name:"is_forced",disabled:!n[4],hidden:!n[5].is_default,$$slots:{label:[na]},$$scope:{ctx:n}}});var A=n[4]&&ea(n);function j(e){n[11](e)}var T={$$slots:{label:[ta]},$$scope:{ctx:n}};void 0!==n[2]&&(T.checked=n[2]),g=new gi({props:T}),jn.push((function(){return ee(g,"checked",j)}));var L=n[2]&&ra(n),P=!n[4]&&da(n);k=new jr({props:{icon:"save",op:n[9],disabled:!n[4],$$slots:{default:[pa]},$$scope:{ctx:n}}});var D=n[5].error&&ha(n);return O=new Ti({props:{op:n[9]}}),{c:function(){e=tn("form"),te(t.$$.fragment),r=on(),te(o.$$.fragment),i=on(),te(a.$$.fragment),c=on(),te(u.$$.fragment),s=on(),te(f.$$.fragment),l=on(),te(d.$$.fragment),p=on(),te(h.$$.fragment),m=on(),A&&A.c(),v=on(),te(g.$$.fragment),y=on(),L&&L.c(),b=on(),P&&P.c(),w=on(),_=tn("div"),te(k.$$.fragment),x=on(),D&&D.c(),E=on(),te(O.$$.fragment),sn(_,"class","form-actions"),sn(e,"method","post")},m:function($,j){X($,e,j),re(t,e,null),Z(e,r),re(o,e,null),Z(e,i),re(a,e,null),Z(e,c),re(u,e,null),Z(e,s),re(f,e,null),Z(e,l),re(d,e,null),Z(e,p),re(h,e,null),Z(e,m),A&&A.m(e,null),Z(e,v),re(g,e,null),Z(e,y),L&&L.m(e,null),Z(e,b),P&&P.m(e,null),Z(e,w),Z(e,_),re(k,_,null),Z(e,x),D&&D.m(e,null),Z(e,E),re(O,e,null),C=!0,N||(R=K(S=Mi.call(null,e,n[1])),N=!0)},p:function(n,r){var i={};64&r&&(i.placeholder=n[6]("Ex: chat.freenode.net:6697")),16&r&&(i.readonly=!n[4]),2097216&r&&(i.$$scope={dirty:r,ctx:n}),t.$set(i);var c={};16&r&&(c.disabled=!n[4]),2097216&r&&(c.$$scope={dirty:r,ctx:n}),o.$set(c);var s={};48&r&&(s.disabled=!n[5].tls||!n[4]),32&r&&(s.hidden=!n[5].tls),2097216&r&&(s.$$scope={dirty:r,ctx:n}),a.$set(s);var l={};64&r&&(l.placeholder=n[6]("Ex: #convos")),16&r&&(l.readonly=!n[4]),2097216&r&&(l.$$scope={dirty:r,ctx:n}),u.$set(l);var p={};64&r&&(p.placeholder=n[6]("chanserv, nickserv, ...")),16&r&&(p.readonly=!n[4]),2097216&r&&(p.$$scope={dirty:r,ctx:n}),f.$set(p);var m={};16&r&&(m.disabled=!n[4]),2097216&r&&(m.$$scope={dirty:r,ctx:n}),d.$set(m);var y={};16&r&&(y.disabled=!n[4]),32&r&&(y.hidden=!n[5].is_default),2097216&r&&(y.$$scope={dirty:r,ctx:n}),h.$set(y),n[4]?A?A.p(n,r):((A=ea(n)).c(),A.m(e,v)):A&&(A.d(1),A=null);var _={};2097216&r&&(_.$$scope={dirty:r,ctx:n}),!$&&4&r&&($=!0,_.checked=n[2],Bn((function(){return $=!1}))),g.$set(_),n[2]?L?(L.p(n,r),4&r&&Vn(L,1)):((L=ra(n)).c(),Vn(L,1),L.m(e,b)):L&&(Gn(),Jn(L,1,1,(function(){L=null})),Yn()),n[4]?P&&(P.d(1),P=null):P?P.p(n,r):((P=da(n)).c(),P.m(e,w));var x={};16&r&&(x.disabled=!n[4]),2097217&r&&(x.$$scope={dirty:r,ctx:n}),k.$set(x),n[5].error?D?D.p(n,r):((D=ha(n)).c(),D.m(e,E)):D&&(D.d(1),D=null),S&&M(S.update)&&2&r&&S.update.call(null,n[1])},i:function(n){C||(Vn(t.$$.fragment,n),Vn(o.$$.fragment,n),Vn(a.$$.fragment,n),Vn(u.$$.fragment,n),Vn(f.$$.fragment,n),Vn(d.$$.fragment,n),Vn(h.$$.fragment,n),Vn(g.$$.fragment,n),Vn(L),Vn(k.$$.fragment,n),Vn(O.$$.fragment,n),C=!0)},o:function(n){Jn(t.$$.fragment,n),Jn(o.$$.fragment,n),Jn(a.$$.fragment,n),Jn(u.$$.fragment,n),Jn(f.$$.fragment,n),Jn(d.$$.fragment,n),Jn(h.$$.fragment,n),Jn(g.$$.fragment,n),Jn(L),Jn(k.$$.fragment,n),Jn(O.$$.fragment,n),C=!1},d:function(n){n&&nn(e),oe(t),oe(o),oe(a),oe(u),oe(f),oe(d),oe(h),A&&A.d(),oe(g),L&&L.d(),P&&P.d(),oe(k),D&&D.d(),oe(O),N=!1,R()}}}function qi(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v=n[18].url.host.replace(/:\d+$/,"")+"",g=(ye.true(n[18].tls_verify)?n[6]("Strict"):ye.true(n[18].tls)?n[6]("Yes"):n[6]("No"))+"",$=(n[18].is_default?n[6]("Yes"):n[6]("No"))+"",y=(n[18].is_forced?n[6]("Yes"):n[6]("No"))+"";return{c:function(){e=tn("tr"),t=tn("td"),r=tn("a"),o=rn(v),a=on(),c=tn("td"),u=rn(g),s=on(),f=tn("td"),l=rn($),d=on(),p=tn("td"),h=rn(y),m=on(),sn(r,"href",i="#profile-"+n[18].id)},m:function(n,i){X(n,e,i),Z(e,t),Z(t,r),Z(r,o),Z(e,a),Z(e,c),Z(c,u),Z(e,s),Z(e,f),Z(f,l),Z(e,d),Z(e,p),Z(p,h),Z(e,m)},p:function(n,e){8&e&&v!==(v=n[18].url.host.replace(/:\d+$/,"")+"")&&ln(o,v),8&e&&i!==(i="#profile-"+n[18].id)&&sn(r,"href",i),72&e&&g!==(g=(ye.true(n[18].tls_verify)?n[6]("Strict"):ye.true(n[18].tls)?n[6]("Yes"):n[6]("No"))+"")&&ln(u,g),72&e&&$!==($=(n[18].is_default?n[6]("Yes"):n[6]("No"))+"")&&ln(l,$),72&e&&y!==(y=(n[18].is_forced?n[6]("Yes"):n[6]("No"))+"")&&ln(h,y)},d:function(n){n&&nn(e)}}}function zi(n){var e,t,r,o,i,a,c,u=n[6]("Add")+"";return r=new Cr({props:{name:"plus-circle"}}),{c:function(){e=tn("div"),t=tn("a"),te(r.$$.fragment),o=on(),i=tn("span"),a=rn(u),sn(t,"href","#profile-add"),sn(t,"class","btn"),sn(e,"class","form-actions")},m:function(n,u){X(n,e,u),Z(e,t),re(r,t,null),Z(t,o),Z(t,i),Z(i,a),c=!0},p:function(n,e){(!c||64&e)&&u!==(u=n[6]("Add")+"")&&ln(a,u)},i:function(n){c||(Vn(r.$$.fragment,n),c=!0)},o:function(n){Jn(r.$$.fragment,n),c=!1},d:function(n){n&&nn(e),oe(r)}}}function Fi(n){var e,t,r=n[6]("Host and port")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){64&e&&r!==(r=n[6]("Host and port")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Ki(n){var e,t,r=n[6]("Will match connections on hostname.")+"";return{c:function(){e=tn("p"),t=rn(r),sn(e,"class","help"),sn(e,"slot","help")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){64&e&&r!==(r=n[6]("Will match connections on hostname.")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Wi(n){var e;return{c:function(){e=on()},m:function(n,t){X(n,e,t)},p:A,d:function(n){n&&nn(e)}}}function Gi(n){var e,t,r=n[6]("Secure connection (TLS)")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){64&e&&r!==(r=n[6]("Secure connection (TLS)")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Yi(n){var e,t,r=n[6]("Verify certificate (TLS)")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){64&e&&r!==(r=n[6]("Verify certificate (TLS)")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Vi(n){var e,t,r=n[6]("Conversation name")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){64&e&&r!==(r=n[6]("Conversation name")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Ji(n){var e,t,r=n[6]("Service accounts")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){64&e&&r!==(r=n[6]("Service accounts")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Qi(n){var e,t,r=n[6]("Messages from these nicks will be shown in the connection conversation.")+"";return{c:function(){e=tn("p"),t=rn(r),sn(e,"class","help"),sn(e,"slot","help")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){64&e&&r!==(r=n[6]("Messages from these nicks will be shown in the connection conversation.")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Zi(n){var e;return{c:function(){e=on()},m:function(n,t){X(n,e,t)},p:A,d:function(n){n&&nn(e)}}}function Xi(n){var e,t,r=n[6]("Default connection")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){64&e&&r!==(r=n[6]("Default connection")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function na(n){var e,t,r=n[6]("Force default connection")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){64&e&&r!==(r=n[6]("Force default connection")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function ea(n){var e,t,r,o=n[6]("Tick this box if you want to prevent users from creating custom connections.")+"";return{c:function(){e=tn("p"),t=rn(o),sn(e,"class","help"),e.hidden=r=!n[5].is_default},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,i){64&i&&o!==(o=n[6]("Tick this box if you want to prevent users from creating custom connections.")+"")&&ln(t,o),32&i&&r!==(r=!n[5].is_default)&&(e.hidden=r)},d:function(n){n&&nn(e)}}}function ta(n){var e,t,r=n[6]("Show advanced settings")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){64&e&&r!==(r=n[6]("Show advanced settings")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function ra(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h=n[6]("This might result in flood ban.")+"";return t=new Oi({props:{name:"max_bulk_message_size",type:"number",readonly:!n[4],$$slots:{default:[aa],help:[ia],label:[oa]},$$scope:{ctx:n}}}),o=new Oi({props:{name:"max_message_length",type:"number",readonly:!n[4],$$slots:{default:[sa],help:[ua],label:[ca]},$$scope:{ctx:n}}}),a=new Oi({props:{name:"webirc_password",type:"password",readonly:!n[4],$$slots:{label:[fa]},$$scope:{ctx:n}}}),u=new gi({props:{name:"skip_queue",disabled:!n[4],$$slots:{label:[la]},$$scope:{ctx:n}}}),{c:function(){e=tn("div"),te(t.$$.fragment),r=on(),te(o.$$.fragment),i=on(),te(a.$$.fragment),c=on(),te(u.$$.fragment),s=on(),f=tn("p"),l=rn(h),sn(f,"class","help"),sn(e,"class","form-group")},m:function(n,d){X(n,e,d),re(t,e,null),Z(e,r),re(o,e,null),Z(e,i),re(a,e,null),Z(e,c),re(u,e,null),Z(e,s),Z(e,f),Z(f,l),p=!0},p:function(n,e){var r={};16&e&&(r.readonly=!n[4]),2097216&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r);var i={};16&e&&(i.readonly=!n[4]),2097216&e&&(i.$$scope={dirty:e,ctx:n}),o.$set(i);var c={};16&e&&(c.readonly=!n[4]),2097216&e&&(c.$$scope={dirty:e,ctx:n}),a.$set(c);var s={};16&e&&(s.disabled=!n[4]),2097216&e&&(s.$$scope={dirty:e,ctx:n}),u.$set(s),(!p||64&e)&&h!==(h=n[6]("This might result in flood ban.")+"")&&ln(l,h)},i:function(n){p||(Vn(t.$$.fragment,n),Vn(o.$$.fragment,n),Vn(a.$$.fragment,n),Vn(u.$$.fragment,n),Dn((function(){d||(d=Zn(e,yr,{duration:150},!0)),d.run(1)})),p=!0)},o:function(n){Jn(t.$$.fragment,n),Jn(o.$$.fragment,n),Jn(a.$$.fragment,n),Jn(u.$$.fragment,n),d||(d=Zn(e,yr,{duration:150},!1)),d.run(0),p=!1},d:function(n){n&&nn(e),oe(t),oe(o),oe(a),oe(u),n&&d&&d.end()}}}function oa(n){var e,t,r=n[6]("Max number of pasted lines")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){64&e&&r!==(r=n[6]("Max number of pasted lines")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function ia(n){var e,t,r=n[6]("Setting this value too high might get you banned from the server.")+"";return{c:function(){e=tn("p"),t=rn(r),sn(e,"class","help"),sn(e,"slot","help")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){64&e&&r!==(r=n[6]("Setting this value too high might get you banned from the server.")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function aa(n){var e;return{c:function(){e=on()},m:function(n,t){X(n,e,t)},p:A,d:function(n){n&&nn(e)}}}function ca(n){var e,t,r=n[6]("Max message length")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){64&e&&r!==(r=n[6]("Max message length")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function ua(n){var e,t,r=n[6]("Messages longer than this will be split into multiple messages.")+"";return{c:function(){e=tn("p"),t=rn(r),sn(e,"class","help"),sn(e,"slot","help")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){64&e&&r!==(r=n[6]("Messages longer than this will be split into multiple messages.")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function sa(n){var e;return{c:function(){e=on()},m:function(n,t){X(n,e,t)},p:A,d:function(n){n&&nn(e)}}}function fa(n){var e,t,r=n[6]("WEBIRC password")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){64&e&&r!==(r=n[6]("WEBIRC password")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function la(n){var e,t,r=n[6]("Skip connection queue")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){64&e&&r!==(r=n[6]("Skip connection queue")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function da(n){var e,t,r=n[6]("Only administrators can edit this section.")+"";return{c:function(){e=tn("p"),t=rn(r),sn(e,"class","error")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){64&e&&r!==(r=n[6]("Only administrators can edit this section.")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function pa(n){var e,t,r=(n[0].id?n[6]("Update"):n[6]("Add"))+"";return{c:function(){e=tn("span"),t=rn(r)},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){65&e&&r!==(r=(n[0].id?n[6]("Update"):n[6]("Add"))+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function ha(n){var e,t,r=n[6](n[5].error)+"";return{c:function(){e=tn("div"),t=rn(r),sn(e,"class","error")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){96&e&&r!==(r=n[6](n[5].error)+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function ma(n){var e,t,r,o,i=[Hi,Ui],a=[];function c(n,e){return n[0]?0:1}return e=c(n),t=a[e]=i[e](n),{c:function(){t.c(),r=an()},m:function(n,t){a[e].m(n,t),X(n,r,t),o=!0},p:function(n,o){var u=$(o,1)[0],s=e;(e=c(n))===s?a[e].p(n,u):(Gn(),Jn(a[s],1,1,(function(){a[s]=null})),Yn(),(t=a[e])?t.p(n,u):(t=a[e]=i[e](n)).c(),Vn(t,1),t.m(r.parentNode,r))},i:function(n){o||(Vn(t),o=!0)},o:function(n){Jn(t),o=!1},d:function(n){a[e].d(n),n&&nn(r)}}}function va(n,e,t){var r,o,i,a,c;U(n,pt,(function(n){return t(10,o=n)})),U(n,bt,(function(n){return t(6,c=n)}));var u=e.editProfile,s=void 0===u?null:u,l=Nn("api"),p=Nn("user"),h=lt("connectionProfiles",[]);U(n,h,(function(n){return t(3,i=n)}));var m=Di();U(n,m,(function(n){return t(5,a=n)}));var v=l("listConnectionProfiles"),g=(l("removeConnectionProfileOp"),l("saveConnectionProfile")),$=!1;function y(n){return n.url=new Le(n.url),n.service_accounts=n.service_accounts.join(", "),n.url.toFields(n),n}function b(){return w.apply(this,arguments)}function w(){return(w=d(f.mark((function n(){var e,r;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e={},["is_default","is_forced","skip_queue"].forEach((function(n){return e[n]=!!a[n]})),["max_bulk_message_size","max_message_length","webirc_password"].forEach((function(n){return e[n]=a[n]})),e.service_accounts=a.service_accounts.split(/\s*,\s*/).map((function(n){return n.trim()})).filter((function(n){return n.length})),e.url=new Le("irc://localhost").fromFields(a).toString(),n.next=7,g.perform(e);case 7:if(!g.is("error")){n.next=9;break}return n.abrupt("return");case 9:r=y(g.res.body),F(h,i=i.filter((function(n){return n.id!=r.id})).concat(r).sort((function(n,e){return n.id.localeCompare(e.id)})).map((function(n){return r.is_default&&n.id!=r.id&&(n.is_default=n.is_forced=!1),n})),i),r.is_default&&p.update({default_connection:r.url.toString(),forced_connection:r.is_forced}),t(2,$=!1),pt.go("/settings/connections");case 14:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return On(d(f.mark((function n(){return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t(1,m.submit=b,m),!i.length){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,v.perform();case 5:F(h,i=v.res.body.profiles.map(y),i);case 6:case"end":return n.stop()}}),n)})))),n.$$set=function(n){"editProfile"in n&&t(0,s=n.editProfile)},n.$$.update=function(){1032&n.$$.dirty&&function(n,e){var r=n.hash.replace(/^profile-/,"");t(0,s="add"==r?{max_bulk_message_size:3,max_message_length:512,url:new Le("irc://0.0.0.0")}:e.filter((function(n){return n.id==r}))[0]||null),s&&(s.url.toFields(s),"0.0.0.0"==s.host&&t(0,s.host="",s),m.renderOnNextTick(s))}(o,i),6&n.$$.dirty&&$&&m.renderOnNextTick()},t(4,r=p.roles.has("admin")),[s,m,$,i,r,a,c,h,v,g,o,function(n){t(2,$=n)}]}var ga=function(n){a(o,n);var e=Bi(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,va,ma,D,{editProfile:0}),i}return o}(ce);function $a(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}function ya(n,e,t){var r=n.slice();return r[28]=e[t],r[30]=t,r}var ba=function(n){return{}},wa=function(n){return{}};function _a(n){var e,t,r,o,i,a=(n[28].length>1?n[28][1]:n[28][0])+"";function c(){return n[22](n[30])}return{c:function(){e=tn("a"),t=rn(a),sn(e,"href",r="#"+n[30]+":"+n[28][0]),sn(e,"class","select-field__option"),sn(e,"tabindex","-1"),mn(e,"is-active",n[30]==n[9])},m:function(n,r){X(n,e,r),Z(e,t),o||(i=cn(e,"mouseover",c),o=!0)},p:function(o,i){n=o,2048&i&&a!==(a=(n[28].length>1?n[28][1]:n[28][0])+"")&&ln(t,a),2048&i&&r!==(r="#"+n[30]+":"+n[28][0])&&sn(e,"href",r),512&i&&mn(e,"is-active",n[30]==n[9])},d:function(n){n&&nn(e),o=!1,i()}}}function ka(n){for(var e,t,r,o,i,a,c,u,s,f,l,d,p=n[18].label,h=H(p,n,n[17],wa),m=h||{c:function(){d=rn("Label")},m:function(n,e){X(n,d,e)},d:function(n){n&&nn(d)}},v=n[11],g=[],y=0;y<v.length;y+=1)g[y]=_a(ya(n,v,y));return{c:function(){e=tn("div"),t=tn("label"),m&&m.c(),r=on(),o=tn("input"),i=on(),a=tn("input"),c=on(),u=tn("div");for(var s=0;s<g.length;s+=1)g[s].c();sn(t,"for",n[3]),sn(o,"type","hidden"),sn(o,"name",n[2]),sn(a,"type","text"),sn(a,"placeholder",n[4]),sn(a,"id",n[3]),a.readOnly=n[5],sn(a,"autocomplete","off"),sn(u,"class","select-field__options"),sn(e,"class","select-field text-field"),e.hidden=n[1],mn(e,"is-open",n[8]),mn(e,"is-readonly",n[5])},m:function(d,p){X(d,e,p),Z(e,t),m&&m.m(t,null),Z(e,r),Z(e,o),n[19](o),dn(o,n[0]),Z(e,i),Z(e,a),n[21](a),Z(e,c),Z(e,u);for(var h=0;h<g.length;h+=1)g[h].m(u,null);n[23](e),s=!0,f||(l=[cn(o,"input",n[20]),cn(o,"keydown",n[12]),cn(a,"keydown",n[12]),cn(a,"keyup",n[13]),cn(a,"click",un(n[14])),cn(u,"click",un(n[14]))],f=!0)},p:function(n,r){var i=$(r,1)[0];if(h&&h.p&&131072&i&&z(h,p,n,n[17],i,ba,wa),(!s||8&i)&&sn(t,"for",n[3]),(!s||4&i)&&sn(o,"name",n[2]),1&i&&dn(o,n[0]),(!s||16&i)&&sn(a,"placeholder",n[4]),(!s||8&i)&&sn(a,"id",n[3]),(!s||32&i)&&(a.readOnly=n[5]),2560&i){var c;for(v=n[11],c=0;c<v.length;c+=1){var f=ya(n,v,c);g[c]?g[c].p(f,i):(g[c]=_a(f),g[c].c(),g[c].m(u,null))}for(;c<g.length;c+=1)g[c].d(1);g.length=v.length}(!s||2&i)&&(e.hidden=n[1]),256&i&&mn(e,"is-open",n[8]),32&i&&mn(e,"is-readonly",n[5])},i:function(n){s||(Vn(m,n),s=!0)},o:function(n){Jn(m,n),s=!1},d:function(t){t&&nn(e),m&&m.d(t),n[19](null),n[21](null),en(g,t),n[23](null),f=!1,P(l)}}}function xa(n,e,t){var r,o,i,a=e.$$slots,c=void 0===a?{}:a,u=e.$$scope,s=["ArrowDown","ArrowUp","Enter"],f=0,l=!1,d="",p=[],h=e.hidden,m=void 0!==h&&h,v=e.name,g=void 0===v?"":v,$=e.id,y=void 0===$?g?"form_"+g:Ce():$,b=e.options,w=e.placeholder,_=void 0===w?"":w,k=e.readonly,x=void 0!==k&&k,E=e.value;function O(n){var e;if("keydown"==n.type)e=p.length&&p[f]||b.filter((function(n){return n[0]==E}))[0];else{var o=he(n.target,".select-field__option").href.replace(/^.*?#\d+:/,"");e=p.filter((function(n){return n[0]==o}))[0]||[]}e&&e.length||(e=[""]),t(0,E=e[0]),t(8,l=!1),setTimeout((function(){return r.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0}))}),1)}function S(n){var e=p.filter((function(e){return e[0]==n}))[0]||[];t(7,o.value=e.length>1?e[1]:e.length?e[0]:n,o)}function C(n){if(!x){var e=n&&n.target&&he(n.target,".select-field__option");return l||(t(9,f=p.map((function(n){return n[0]})).indexOf(E)),o.setSelectionRange(0,9999)),e?O(n):t(8,l=!l)}}On((function(){t(0,E=r.value),o.addEventListener("blur",(function(){setTimeout((function(){return document.activeElement.closest(".select-field__option")||t(8,l=!1)}),100),S(E)}))}));return n.$$set=function(n){"hidden"in n&&t(1,m=n.hidden),"name"in n&&t(2,g=n.name),"id"in n&&t(3,y=n.id),"options"in n&&t(15,b=n.options),"placeholder"in n&&t(4,_=n.placeholder),"readonly"in n&&t(5,x=n.readonly),"value"in n&&t(0,E=n.value),"$$scope"in n&&t(17,u=n.$$scope)},n.$$.update=function(){if(256&n.$$.dirty&&0==l&&t(16,d=""),98304&n.$$.dirty&&function(n,e){var r=new RegExp("(?:^|\\s|-)"+ke(e),"i"),o=n.filter((function(n){return n[0]==e}));o.length||(o=n.filter((function(n){return n[0].match(r)})));for(var i=0;i<n.length;i++){var a=n[i];a.length>1&&-1!=o.indexOf(a)&&a[1].match(r)&&-1==n.map((function(n){return n[0]})).indexOf(a[0])&&o.push(a)}t(9,f=0),t(11,p=o)}(b,d),64&n.$$.dirty&&r&&!r.syncValue&&(t(6,r.syncValue=function(){t(0,E=this.value)},r),r.syncValue()),32960&n.$$.dirty&&o&&!o.value&&o!=document.activeElement){var e=b.find((function(n){return n[0]==r.value}));e&&t(7,o.value=e[1]||e[0],o)}129&n.$$.dirty&&o&&S(E)},[E,m,g,y,_,x,r,o,l,f,i,p,function(n){if(-1!=s.indexOf(n.key)&&n.preventDefault(),"Tab"!=n.key){if(!l)return C(n);"ArrowDown"==n.key&&t(9,f++,f),"ArrowUp"==n.key&&t(9,f--,f),"Enter"==n.key&&O(n),f>=b.length&&t(9,f=0),f<0&&t(9,f=b.length-1)}else l&&O(n)},function(n){1!=n.key.length&&"Backspace"!=n.key||t(16,d=o.value)},C,b,d,u,c,function(n){jn[n?"unshift":"push"]((function(){t(6,r=n)}))},function(){E=this.value,t(0,E),t(6,r)},function(n){jn[n?"unshift":"push"]((function(){t(7,o=n),t(15,b),t(6,r)}))},function(n){t(9,f=n)},function(n){jn[n?"unshift":"push"]((function(){t(10,i=n)}))}]}var Ea=function(n){a(o,n);var e=$a(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,xa,ka,D,{hidden:1,name:2,id:3,options:15,placeholder:4,readonly:5,value:0}),i}return o}(ce);function Oa(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}var Sa=function(n){return{}},Ca=function(n){return{}};function Na(n){var e,t,r,o,i,a,c,u=n[8].label,s=H(u,n,n[7],Ca),f=s||function(n){var e;return{c:function(){e=rn("Label")},m:function(n,t){X(n,e,t)},d:function(n){n&&nn(e)}}}();return{c:function(){e=tn("div"),t=tn("label"),f&&f.c(),r=on(),o=tn("textarea"),sn(t,"for",n[3]),sn(o,"name",n[2]),sn(o,"placeholder",n[4]),sn(o,"id",n[3]),o.readOnly=n[5],sn(e,"class","text-area"),e.hidden=n[1]},m:function(u,s){X(u,e,s),Z(e,t),f&&f.m(t,null),Z(e,r),Z(e,o),n[9](o),dn(o,n[0]),i=!0,a||(c=cn(o,"input",n[10]),a=!0)},p:function(n,r){var a=$(r,1)[0];s&&s.p&&128&a&&z(s,u,n,n[7],a,Sa,Ca),(!i||8&a)&&sn(t,"for",n[3]),(!i||4&a)&&sn(o,"name",n[2]),(!i||16&a)&&sn(o,"placeholder",n[4]),(!i||8&a)&&sn(o,"id",n[3]),(!i||32&a)&&(o.readOnly=n[5]),1&a&&dn(o,n[0]),(!i||2&a)&&(e.hidden=n[1])},i:function(n){i||(Vn(f,n),i=!0)},o:function(n){Jn(f,n),i=!1},d:function(t){t&&nn(e),f&&f.d(t),n[9](null),a=!1,c()}}}function Ra(n,e,t){var r,o=e.$$slots,i=void 0===o?{}:o,a=e.$$scope,c=e.hidden,u=void 0!==c&&c,s=e.name,f=void 0===s?"":s,l=e.id,d=void 0===l?f?"form_"+f:Ce():l,p=e.placeholder,h=void 0===p?"":p,m=e.readonly,v=void 0!==m&&m,g=e.value,$=void 0===g?"":g;return n.$$set=function(n){"hidden"in n&&t(1,u=n.hidden),"name"in n&&t(2,f=n.name),"id"in n&&t(3,d=n.id),"placeholder"in n&&t(4,h=n.placeholder),"readonly"in n&&t(5,v=n.readonly),"value"in n&&t(0,$=n.value),"$$scope"in n&&t(7,a=n.$$scope)},n.$$.update=function(){64&n.$$.dirty&&r&&!r.syncValue&&(t(6,r.syncValue=function(){t(0,$=this.value)},r),r.syncValue())},[$,u,f,d,h,v,r,a,i,function(n){jn[n?"unshift":"push"]((function(){t(6,r=n)}))},function(){$=this.value,t(0,$),t(6,r)}]}var Aa=function(n){a(o,n);var e=Oa(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,Ra,Na,D,{hidden:1,name:2,id:3,placeholder:4,readonly:5,value:0}),i}return o}(ce);function ja(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}function Ta(n){var e,t,r=n[5]("Host and port")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){32&e&&r!==(r=n[5]("Host and port")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function La(n){var e,t,r=n[5]("You cannot create custom connections.")+"";return{c:function(){e=tn("p"),t=rn(r),sn(e,"class","help"),sn(e,"slot","help"),e.hidden=!n[6].forced_connection},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){32&e&&r!==(r=n[5]("You cannot create custom connections.")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Pa(n){var e;return{c:function(){e=on()},m:function(n,t){X(n,e,t)},p:A,d:function(n){n&&nn(e)}}}function Ma(n){var e,t,r=n[5]("Nickname")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){32&e&&r!==(r=n[5]("Nickname")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Da(n){var e,t,r=n[5]("Your name")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){32&e&&r!==(r=n[5]("Your name")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Ba(n){var e,t;return e=new Oi({props:{name:"conversation_id",placeholder:n[5]("Ex: #convos"),$$slots:{label:[Ua]},$$scope:{ctx:n}}}),{c:function(){te(e.$$.fragment)},m:function(n,r){re(e,n,r),t=!0},p:function(n,t){var r={};32&t&&(r.placeholder=n[5]("Ex: #convos")),524320&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Vn(e.$$.fragment,n),t=!0)},o:function(n){Jn(e.$$.fragment,n),t=!1},d:function(n){oe(e,n)}}}function Ia(n){var e,t;return e=new gi({props:{name:"want_to_be_connected",$$slots:{label:[Ha]},$$scope:{ctx:n}}}),{c:function(){te(e.$$.fragment)},m:function(n,r){re(e,n,r),t=!0},p:function(n,t){var r={};524320&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Vn(e.$$.fragment,n),t=!0)},o:function(n){Jn(e.$$.fragment,n),t=!1},d:function(n){oe(e,n)}}}function Ua(n){var e,t,r=n[5]("Conversation name")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){32&e&&r!==(r=n[5]("Conversation name")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Ha(n){var e,t,r=n[5]("Want to be connected")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){32&e&&r!==(r=n[5]("Want to be connected")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function qa(n){var e,t,r=n[5]("Secure connection (TLS)")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){32&e&&r!==(r=n[5]("Secure connection (TLS)")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function za(n){var e,t,r=n[5]("Verify certificate (TLS)")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){32&e&&r!==(r=n[5]("Verify certificate (TLS)")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Fa(n){var e,t,r=n[5]("Show advanced settings")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){32&e&&r!==(r=n[5]("Show advanced settings")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Ka(n){var e,t,r,o,i,a;return t=new Aa({props:{name:"on_connect_commands",placeholder:n[5]("Put each command on a new line."),$$slots:{label:[Wa]},$$scope:{ctx:n}}}),o=new Oi({props:{name:"local_address",$$slots:{default:[Va],help:[Ya],label:[Ga]},$$scope:{ctx:n}}}),{c:function(){e=tn("div"),te(t.$$.fragment),r=on(),te(o.$$.fragment),sn(e,"class","form-group")},m:function(n,i){X(n,e,i),re(t,e,null),Z(e,r),re(o,e,null),a=!0},p:function(n,e){var r={};32&e&&(r.placeholder=n[5]("Put each command on a new line.")),524320&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r);var i={};524320&e&&(i.$$scope={dirty:e,ctx:n}),o.$set(i)},i:function(n){a||(Vn(t.$$.fragment,n),Vn(o.$$.fragment,n),Dn((function(){i||(i=Zn(e,yr,{duration:150},!0)),i.run(1)})),a=!0)},o:function(n){Jn(t.$$.fragment,n),Jn(o.$$.fragment,n),i||(i=Zn(e,yr,{duration:150},!1)),i.run(0),a=!1},d:function(n){n&&nn(e),oe(t),oe(o),n&&i&&i.end()}}}function Wa(n){var e,t,r=n[5]("On-connect commands")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){32&e&&r!==(r=n[5]("On-connect commands")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Ga(n){var e,t,r=n[5]("Source IP")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){32&e&&r!==(r=n[5]("Source IP")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Ya(n){var e,t,r=n[5]("Leave this blank, unless you know what you are doing.")+"";return{c:function(){e=tn("p"),t=rn(r),sn(e,"class","help"),sn(e,"slot","help")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){32&e&&r!==(r=n[5]("Leave this blank, unless you know what you are doing.")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Va(n){var e;return{c:function(){e=on()},m:function(n,t){X(n,e,t)},p:A,d:function(n){n&&nn(e)}}}function Ja(n){var e,t,r=n[5]("Show authentication settings")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){32&e&&r!==(r=n[5]("Show authentication settings")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Qa(n){var e,t,r,o,i,a,c,u;return t=new Oi({props:{name:"username",$$slots:{label:[Za]},$$scope:{ctx:n}}}),o=new Oi({props:{type:"password",name:"password",$$slots:{label:[Xa]},$$scope:{ctx:n}}}),a=new Ea({props:{name:"sasl",options:n[7],$$slots:{label:[nc]},$$scope:{ctx:n}}}),{c:function(){e=tn("div"),te(t.$$.fragment),r=on(),te(o.$$.fragment),i=on(),te(a.$$.fragment),sn(e,"class","form-group")},m:function(n,c){X(n,e,c),re(t,e,null),Z(e,r),re(o,e,null),Z(e,i),re(a,e,null),u=!0},p:function(n,e){var r={};524320&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r);var i={};524320&e&&(i.$$scope={dirty:e,ctx:n}),o.$set(i);var c={};524320&e&&(c.$$scope={dirty:e,ctx:n}),a.$set(c)},i:function(n){u||(Vn(t.$$.fragment,n),Vn(o.$$.fragment,n),Vn(a.$$.fragment,n),Dn((function(){c||(c=Zn(e,yr,{duration:150},!0)),c.run(1)})),u=!0)},o:function(n){Jn(t.$$.fragment,n),Jn(o.$$.fragment,n),Jn(a.$$.fragment,n),c||(c=Zn(e,yr,{duration:150},!1)),c.run(0),u=!1},d:function(n){n&&nn(e),oe(t),oe(o),oe(a),n&&c&&c.end()}}}function Za(n){var e,t,r=n[5]("Username")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){32&e&&r!==(r=n[5]("Username")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Xa(n){var e,t,r=n[5]("Password")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){32&e&&r!==(r=n[5]("Password")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function nc(n){var e,t,r=n[5]("SASL authentication mechanism")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){32&e&&r!==(r=n[5]("SASL authentication mechanism")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function ec(n){var e,t;return e=new jr({props:{icon:"network-wired",op:n[8],$$slots:{default:[rc]},$$scope:{ctx:n}}}),{c:function(){te(e.$$.fragment)},m:function(n,r){re(e,n,r),t=!0},p:function(n,t){var r={};524320&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Vn(e.$$.fragment,n),t=!0)},o:function(n){Jn(e.$$.fragment,n),t=!1},d:function(n){oe(e,n)}}}function tc(n){var e,t,r,o;return e=new jr({props:{icon:"save",op:n[10],$$slots:{default:[oc]},$$scope:{ctx:n}}}),(r=new jr({props:{icon:"trash",type:"button",op:n[9],$$slots:{default:[ic]},$$scope:{ctx:n}}})).$on("click",n[11]),{c:function(){te(e.$$.fragment),t=on(),te(r.$$.fragment)},m:function(n,i){re(e,n,i),X(n,t,i),re(r,n,i),o=!0},p:function(n,t){var o={};524320&t&&(o.$$scope={dirty:t,ctx:n}),e.$set(o);var i={};524320&t&&(i.$$scope={dirty:t,ctx:n}),r.$set(i)},i:function(n){o||(Vn(e.$$.fragment,n),Vn(r.$$.fragment,n),o=!0)},o:function(n){Jn(e.$$.fragment,n),Jn(r.$$.fragment,n),o=!1},d:function(n){oe(e,n),n&&nn(t),oe(r,n)}}}function rc(n){var e,t,r=n[5]("Add")+"";return{c:function(){e=tn("span"),t=rn(r)},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){32&e&&r!==(r=n[5]("Add")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function oc(n){var e,t,r=n[5]("Update")+"";return{c:function(){e=tn("span"),t=rn(r)},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){32&e&&r!==(r=n[5]("Update")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function ic(n){var e,t,r=n[5]("Delete")+"";return{c:function(){e=tn("span"),t=rn(r)},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){32&e&&r!==(r=n[5]("Delete")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function ac(n){var e,t,r=n[5](n[4].error)+"";return{c:function(){e=tn("div"),t=rn(r),sn(e,"class","error")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){48&e&&r!==(r=n[5](n[4].error)+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function cc(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,y,b,w,_,k,x,E,O,S,C,N,R,A,j,T,L,P,D,B;t=new Oi({props:{name:"host",placeholder:n[5]("Ex: chat.freenode.net:6697"),readonly:n[6].forced_connection,$$slots:{default:[Pa],help:[La],label:[Ta]},$$scope:{ctx:n}}}),o=new Oi({props:{name:"nick",placeholder:n[5]("Ex: superman"),$$slots:{label:[Ma]},$$scope:{ctx:n}}}),a=new Oi({props:{name:"realname",placeholder:n[5]("Ex: Clark Kent"),$$slots:{label:[Da]},$$scope:{ctx:n}}});var I=[Ia,Ba],U=[];function H(n,e){return n[3].connection_id?0:1}function q(e){n[13](e)}u=H(n),s=U[u]=I[u](n),l=new gi({props:{name:"tls",$$slots:{label:[qa]},$$scope:{ctx:n}}}),p=new gi({props:{name:"tls_verify",disabled:!n[4].tls,hidden:!n[4].tls,$$slots:{label:[za]},$$scope:{ctx:n}}});var z={$$slots:{label:[Fa]},$$scope:{ctx:n}};void 0!==n[1]&&(z.checked=n[1]),m=new gi({props:z}),jn.push((function(){return ee(m,"checked",q)}));var F=n[1]&&Ka(n);function W(e){n[14](e)}var G={$$slots:{label:[Ja]},$$scope:{ctx:n}};void 0!==n[2]&&(G.checked=n[2]),b=new gi({props:G}),jn.push((function(){return ee(b,"checked",W)}));var Y=n[2]&&Qa(n),V=[tc,ec],J=[];function Q(n,e){return n[3].connection_id?0:1}E=Q(n),O=J[E]=V[E](n);var en=n[4].error&&ac(n);return N=new Ti({props:{op:n[8]}}),A=new Ti({props:{op:n[9],success:"Deleted."}}),T=new Ti({props:{op:n[10]}}),{c:function(){e=tn("form"),te(t.$$.fragment),r=on(),te(o.$$.fragment),i=on(),te(a.$$.fragment),c=on(),s.c(),f=on(),te(l.$$.fragment),d=on(),te(p.$$.fragment),h=on(),te(m.$$.fragment),g=on(),F&&F.c(),y=on(),te(b.$$.fragment),_=on(),Y&&Y.c(),k=on(),x=tn("div"),O.c(),S=on(),en&&en.c(),C=on(),te(N.$$.fragment),R=on(),te(A.$$.fragment),j=on(),te(T.$$.fragment),sn(x,"class","form-actions"),sn(e,"method","post")},m:function(s,v){X(s,e,v),re(t,e,null),Z(e,r),re(o,e,null),Z(e,i),re(a,e,null),Z(e,c),U[u].m(e,null),Z(e,f),re(l,e,null),Z(e,d),re(p,e,null),Z(e,h),re(m,e,null),Z(e,g),F&&F.m(e,null),Z(e,y),re(b,e,null),Z(e,_),Y&&Y.m(e,null),Z(e,k),Z(e,x),J[E].m(x,null),Z(e,S),en&&en.m(e,null),Z(e,C),re(N,e,null),Z(e,R),re(A,e,null),Z(e,j),re(T,e,null),P=!0,D||(B=K(L=Mi.call(null,e,n[0])),D=!0)},p:function(n,r){var i=$(r,1)[0],c={};32&i&&(c.placeholder=n[5]("Ex: chat.freenode.net:6697")),524320&i&&(c.$$scope={dirty:i,ctx:n}),t.$set(c);var d={};32&i&&(d.placeholder=n[5]("Ex: superman")),524320&i&&(d.$$scope={dirty:i,ctx:n}),o.$set(d);var h={};32&i&&(h.placeholder=n[5]("Ex: Clark Kent")),524320&i&&(h.$$scope={dirty:i,ctx:n}),a.$set(h);var g=u;(u=H(n))===g?U[u].p(n,i):(Gn(),Jn(U[g],1,1,(function(){U[g]=null})),Yn(),(s=U[u])?s.p(n,i):(s=U[u]=I[u](n)).c(),Vn(s,1),s.m(e,f));var _={};524320&i&&(_.$$scope={dirty:i,ctx:n}),l.$set(_);var S={};16&i&&(S.disabled=!n[4].tls),16&i&&(S.hidden=!n[4].tls),524320&i&&(S.$$scope={dirty:i,ctx:n}),p.$set(S);var N={};524320&i&&(N.$$scope={dirty:i,ctx:n}),!v&&2&i&&(v=!0,N.checked=n[1],Bn((function(){return v=!1}))),m.$set(N),n[1]?F?(F.p(n,i),2&i&&Vn(F,1)):((F=Ka(n)).c(),Vn(F,1),F.m(e,y)):F&&(Gn(),Jn(F,1,1,(function(){F=null})),Yn());var R={};524320&i&&(R.$$scope={dirty:i,ctx:n}),!w&&4&i&&(w=!0,R.checked=n[2],Bn((function(){return w=!1}))),b.$set(R),n[2]?Y?(Y.p(n,i),4&i&&Vn(Y,1)):((Y=Qa(n)).c(),Vn(Y,1),Y.m(e,k)):Y&&(Gn(),Jn(Y,1,1,(function(){Y=null})),Yn());var A=E;(E=Q(n))===A?J[E].p(n,i):(Gn(),Jn(J[A],1,1,(function(){J[A]=null})),Yn(),(O=J[E])?O.p(n,i):(O=J[E]=V[E](n)).c(),Vn(O,1),O.m(x,null)),n[4].error?en?en.p(n,i):((en=ac(n)).c(),en.m(e,C)):en&&(en.d(1),en=null),L&&M(L.update)&&1&i&&L.update.call(null,n[0])},i:function(n){P||(Vn(t.$$.fragment,n),Vn(o.$$.fragment,n),Vn(a.$$.fragment,n),Vn(s),Vn(l.$$.fragment,n),Vn(p.$$.fragment,n),Vn(m.$$.fragment,n),Vn(F),Vn(b.$$.fragment,n),Vn(Y),Vn(O),Vn(N.$$.fragment,n),Vn(A.$$.fragment,n),Vn(T.$$.fragment,n),P=!0)},o:function(n){Jn(t.$$.fragment,n),Jn(o.$$.fragment,n),Jn(a.$$.fragment,n),Jn(s),Jn(l.$$.fragment,n),Jn(p.$$.fragment,n),Jn(m.$$.fragment,n),Jn(F),Jn(b.$$.fragment,n),Jn(Y),Jn(O),Jn(N.$$.fragment,n),Jn(A.$$.fragment,n),Jn(T.$$.fragment,n),P=!1},d:function(n){n&&nn(e),oe(t),oe(o),oe(a),U[u].d(),oe(l),oe(p),oe(m),F&&F.d(),oe(b),Y&&Y.d(),J[E].d(),en&&en.d(),oe(N),oe(A),oe(T),D=!1,B()}}}function uc(n,e,t){var r,o;U(n,bt,(function(n){return t(5,o=n)}));var i=e.id,a=void 0===i?null:i,c=Nn("api"),u=Di();U(n,u,(function(n){return t(4,r=n)}));var s=Nn("user"),l=c("createConnection"),p=c("removeConnection"),h=c("updateConnection"),m={},v=!1,g=!1;function $(n){var e=n.url?n.url.toFields():{};ye.array(n.on_connect_commands)&&(e.on_connect_commands=n.on_connect_commands.join("\n")),e.nick||(e.nick=s.email.replace(/@.*/,"").replace(/\W/g,"_")),e.want_to_be_connected="disconnected"!=n.wanted_state,u.renderOnNextTick(e)}function y(){return(y=d(f.mark((function n(e){return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p.perform(m);case 2:s.removeConversation(m),pt.go("/settings/connections");case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function b(){return w.apply(this,arguments)}function w(){return(w=d(f.mark((function n(){var e,o;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((e={}).on_connect_commands=(r.on_connect_commands||"").split(/\n\r?/),e.url=new Le("irc://localhost").fromFields(r).toString(),!m.connection_id){n.next=12;break}return e.connection_id=m.connection_id,e.wanted_state=r.want_to_be_connected?"connected":"disconnected",n.next=8,h.perform(e);case 8:t(3,m=s.ensureConversation(h.res.body)),$(m),n.next=16;break;case 12:return n.next=14,l.perform(e);case 14:(o=l.res.body).connection_id&&pt.go(s.ensureConversation(o).path);case 16:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return On((function(){t(0,u.submit=b,u),t(3,m=s.findConversation({connection_id:a})||{}),m.connection_id?$(m):function(){var n=new Le(pt.query.uri||s.default_connection||"irc://localhost").toFields();n.want_to_be_connected=!0,s.connections.size&&!pt.query.uri&&(n.host="");n.nick||(n.nick=s.email.replace(/@.*/,"").replace(/\W/g,"_"));u.renderOnNextTick(n)}()})),n.$$set=function(n){"id"in n&&t(12,a=n.id)},n.$$.update=function(){7&n.$$.dirty&&(v||g)&&u.renderOnNextTick()},[u,v,g,m,r,o,s,[["none","None"],["plain","Plain"],["external","External"]],l,p,h,function(n){return y.apply(this,arguments)},a,function(n){t(1,v=n)},function(n){t(2,g=n)}]}var sc=function(n){a(o,n);var e=ja(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,uc,cc,D,{id:12}),i}return o}(ce);function fc(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}function lc(n,e,t){var r=n.slice();return r[7]=e[t],r}function dc(n){for(var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,$,y,b=n[3]("Connections")+"",w=n[3]("Host")+"",_=n[3]("Secure")+"",k=n[3]("Nick")+"",x=n[1],E=[],O=0;O<x.length;O+=1)E[O]=hc(lc(n,x,O));var S=n[2]&&mc(n);return{c:function(){e=tn("h2"),t=rn(b),r=on(),o=tn("table"),i=tn("thead"),a=tn("tr"),c=tn("th"),u=rn(w),s=on(),f=tn("th"),l=rn(_),d=on(),p=tn("th"),h=rn(k),m=on(),v=tn("tbody");for(var n=0;n<E.length;n+=1)E[n].c();g=on(),S&&S.c(),$=an()},m:function(n,b){X(n,e,b),Z(e,t),X(n,r,b),X(n,o,b),Z(o,i),Z(i,a),Z(a,c),Z(c,u),Z(a,s),Z(a,f),Z(f,l),Z(a,d),Z(a,p),Z(p,h),Z(o,m),Z(o,v);for(var w=0;w<E.length;w+=1)E[w].m(v,null);X(n,g,b),S&&S.m(n,b),X(n,$,b),y=!0},p:function(n,e){if((!y||8&e)&&b!==(b=n[3]("Connections")+"")&&ln(t,b),(!y||8&e)&&w!==(w=n[3]("Host")+"")&&ln(u,w),(!y||8&e)&&_!==(_=n[3]("Secure")+"")&&ln(l,_),(!y||8&e)&&k!==(k=n[3]("Nick")+"")&&ln(h,k),10&e){var r;for(x=n[1],r=0;r<x.length;r+=1){var o=lc(n,x,r);E[r]?E[r].p(o,e):(E[r]=hc(o),E[r].c(),E[r].m(v,null))}for(;r<E.length;r+=1)E[r].d(1);E.length=x.length}n[2]?S?(S.p(n,e),4&e&&Vn(S,1)):((S=mc(n)).c(),Vn(S,1),S.m($.parentNode,$)):S&&(Gn(),Jn(S,1,1,(function(){S=null})),Yn())},i:function(n){y||(Vn(S),y=!0)},o:function(n){Jn(S),y=!1},d:function(n){n&&nn(e),n&&nn(r),n&&nn(o),en(E,n),n&&nn(g),S&&S.d(n),n&&nn($)}}}function pc(n){var e,t;return e=new sc({props:{id:n[0]&&n[0].connection_id}}),{c:function(){te(e.$$.fragment)},m:function(n,r){re(e,n,r),t=!0},p:function(n,t){var r={};1&t&&(r.id=n[0]&&n[0].connection_id),e.$set(r)},i:function(n){t||(Vn(e.$$.fragment,n),t=!0)},o:function(n){Jn(e.$$.fragment,n),t=!1},d:function(n){oe(e,n)}}}function hc(n){var e,t,r,o,i,a,c,u,s,f,l,d,p=n[7].host.replace(/:\d+$/,"")+"",h=(ye.true(n[7].tls_verify)?n[3]("Strict"):ye.true(n[7].tls)?n[3]("Yes"):n[3]("No"))+"",m=n[7].nick+"";return{c:function(){e=tn("tr"),t=tn("td"),r=tn("a"),o=rn(p),a=on(),c=tn("td"),u=rn(h),s=on(),f=tn("td"),l=rn(m),d=on(),sn(r,"href",i="#connection-"+n[7].connection_id)},m:function(n,i){X(n,e,i),Z(e,t),Z(t,r),Z(r,o),Z(e,a),Z(e,c),Z(c,u),Z(e,s),Z(e,f),Z(f,l),Z(e,d)},p:function(n,e){2&e&&p!==(p=n[7].host.replace(/:\d+$/,"")+"")&&ln(o,p),2&e&&i!==(i="#connection-"+n[7].connection_id)&&sn(r,"href",i),10&e&&h!==(h=(ye.true(n[7].tls_verify)?n[3]("Strict"):ye.true(n[7].tls)?n[3]("Yes"):n[3]("No"))+"")&&ln(u,h),2&e&&m!==(m=n[7].nick+"")&&ln(l,m)},d:function(n){n&&nn(e)}}}function mc(n){var e,t,r,o,i,a,c,u=n[3]("Add")+"";return r=new Cr({props:{name:"plus-circle"}}),{c:function(){e=tn("div"),t=tn("a"),te(r.$$.fragment),o=on(),i=tn("span"),a=rn(u),sn(t,"href","#add-connection"),sn(t,"class","btn"),sn(e,"class","form-actions")},m:function(n,u){X(n,e,u),Z(e,t),re(r,t,null),Z(t,o),Z(t,i),Z(i,a),c=!0},p:function(n,e){(!c||8&e)&&u!==(u=n[3]("Add")+"")&&ln(a,u)},i:function(n){c||(Vn(r.$$.fragment,n),c=!0)},o:function(n){Jn(r.$$.fragment,n),c=!1},d:function(n){n&&nn(e),oe(r)}}}function vc(n){var e,t,r,o,i=[pc,dc],a=[];function c(n,e){return n[0]?0:1}return e=c(n),t=a[e]=i[e](n),{c:function(){t.c(),r=an()},m:function(n,t){a[e].m(n,t),X(n,r,t),o=!0},p:function(n,o){var u=$(o,1)[0],s=e;(e=c(n))===s?a[e].p(n,u):(Gn(),Jn(a[s],1,1,(function(){a[s]=null})),Yn(),(t=a[e])?t.p(n,u):(t=a[e]=i[e](n)).c(),Vn(t,1),t.m(r.parentNode,r))},i:function(n){o||(Vn(t),o=!0)},o:function(n){Jn(t),o=!1},d:function(n){a[e].d(n),n&&nn(r)}}}function gc(n){return n.url.toFields({connection_id:n.connection_id})}function $c(n,e,t){var r,o,i;U(n,pt,(function(n){return t(4,o=n)})),U(n,bt,(function(n){return t(3,i=n)}));var a=e.editConnection,c=void 0===a?null:a,u=Nn("user"),s=[];return n.$$set=function(n){"editConnection"in n&&t(0,c=n.editConnection)},n.$$.update=function(){2&n.$$.dirty&&u.is("success")&&!s.length&&t(1,s=u.connections.toArray().map(gc)),18&n.$$.dirty&&function(n,e){var r=n.hash.replace(/^connection-/,"");t(0,c=e.filter((function(n){return n.connection_id==r}))[0]||null),"add-connection"==n.hash&&t(0,c={}),n.query.uri&&t(0,c={})}(o,s)},t(2,r=u.roles.has("admin")),[c,s,r,i,o]}var yc=function(n){a(o,n);var e=fc(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,$c,vc,D,{editConnection:0}),i}return o}(ce);function bc(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}function wc(n){var e,t,r;return e=new Cr({props:{name:"list"}}),t=new Cr({props:{name:"times"}}),{c:function(){te(e.$$.fragment),te(t.$$.fragment)},m:function(n,o){re(e,n,o),re(t,n,o),r=!0},p:A,i:function(n){r||(Vn(e.$$.fragment,n),Vn(t.$$.fragment,n),r=!0)},o:function(n){Jn(e.$$.fragment,n),Jn(t.$$.fragment,n),r=!1},d:function(n){oe(e,n),oe(t,n)}}}function _c(n){var e,t,r,o,i,a=(n[0]?n[2]("Connection"):n[1]?n[2]("Connection profile",n[1].id):n[2]("Connections"))+"";return o=new xo({props:{href:"/settings/connections",class:"btn-hallow "+(n[0]||n[1]?"is-active":""),"data-tooltip":n[2]("See all profiles"),$$slots:{default:[wc]},$$scope:{ctx:n}}}),{c:function(){e=tn("h1"),t=rn(a),r=on(),te(o.$$.fragment)},m:function(n,a){X(n,e,a),Z(e,t),X(n,r,a),re(o,n,a),i=!0},p:function(n,e){(!i||7&e)&&a!==(a=(n[0]?n[2]("Connection"):n[1]?n[2]("Connection profile",n[1].id):n[2]("Connections"))+"")&&ln(t,a);var r={};3&e&&(r.class="btn-hallow "+(n[0]||n[1]?"is-active":"")),4&e&&(r["data-tooltip"]=n[2]("See all profiles")),64&e&&(r.$$scope={dirty:e,ctx:n}),o.$set(r)},i:function(n){i||(Vn(o.$$.fragment,n),i=!0)},o:function(n){Jn(o.$$.fragment,n),i=!1},d:function(n){n&&nn(e),n&&nn(r),oe(o,n)}}}function kc(n){var e,t,r;function o(e){n[4](e)}var i={};return void 0!==n[0]&&(i.editConnection=n[0]),e=new yc({props:i}),jn.push((function(){return ee(e,"editConnection",o)})),{c:function(){te(e.$$.fragment)},m:function(n,t){re(e,n,t),r=!0},p:function(n,r){var o={};!t&&1&r&&(t=!0,o.editConnection=n[0],Bn((function(){return t=!1}))),e.$set(o)},i:function(n){r||(Vn(e.$$.fragment,n),r=!0)},o:function(n){Jn(e.$$.fragment,n),r=!1},d:function(n){oe(e,n)}}}function xc(n){var e,t,r;function o(e){n[5](e)}var i={};return void 0!==n[1]&&(i.editProfile=n[1]),e=new ga({props:i}),jn.push((function(){return ee(e,"editProfile",o)})),{c:function(){te(e.$$.fragment)},m:function(n,t){re(e,n,t),r=!0},p:function(n,r){var o={};!t&&2&r&&(t=!0,o.editProfile=n[1],Bn((function(){return t=!1}))),e.$set(o)},i:function(n){r||(Vn(e.$$.fragment,n),r=!0)},o:function(n){Jn(e.$$.fragment,n),r=!1},d:function(n){oe(e,n)}}}function Ec(n){var e,t,r,o,i;e=new Dr({props:{$$slots:{default:[_c]},$$scope:{ctx:n}}});var a=!n[1]&&kc(n),c=!n[0]&&xc(n);return{c:function(){te(e.$$.fragment),t=on(),r=tn("main"),a&&a.c(),o=on(),c&&c.c(),sn(r,"class","main")},m:function(n,u){re(e,n,u),X(n,t,u),X(n,r,u),a&&a.m(r,null),Z(r,o),c&&c.m(r,null),i=!0},p:function(n,t){var i=$(t,1)[0],u={};71&i&&(u.$$scope={dirty:i,ctx:n}),e.$set(u),n[1]?a&&(Gn(),Jn(a,1,1,(function(){a=null})),Yn()):a?(a.p(n,i),2&i&&Vn(a,1)):((a=kc(n)).c(),Vn(a,1),a.m(r,o)),n[0]?c&&(Gn(),Jn(c,1,1,(function(){c=null})),Yn()):c?(c.p(n,i),1&i&&Vn(c,1)):((c=xc(n)).c(),Vn(c,1),c.m(r,null))},i:function(n){i||(Vn(e.$$.fragment,n),Vn(a),Vn(c),i=!0)},o:function(n){Jn(e.$$.fragment,n),Jn(a),Jn(c),i=!1},d:function(n){oe(e,n),n&&nn(t),n&&nn(r),a&&a.d(),c&&c.d()}}}function Oc(n,e,t){var r;U(n,bt,(function(n){return t(2,r=n)}));var o=null,i=null;return[o,i,r,"Connections",function(n){t(0,o=n)},function(n){t(1,i=n)}]}var Sc=function(n){a(o,n);var e=bc(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,Oc,Ec,D,{title:3}),i}return R(o,[{key:"title",get:function(){return this.$$.ctx[3]}}]),o}(ce);function Cc(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}function Nc(n,e,t){var r=n.slice();return r[17]=e[t],r}function Rc(n){var e,t,r=n[5]("Add conversation")+"";return{c:function(){e=tn("h1"),t=rn(r)},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){32&e&&r!==(r=n[5]("Add conversation")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Ac(n){var e,t,r=n[5]("Connection")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){32&e&&r!==(r=n[5]("Connection")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function jc(n){var e,t,r=n[5](n[2].conversations.length?"Refresh":"Load")+"";return{c:function(){e=tn("span"),t=rn(r)},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){36&e&&r!==(r=n[5](n[2].conversations.length?"Refresh":"Load")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Tc(n){var e,t,r=n[5]("Conversation name")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){32&e&&r!==(r=n[5]("Conversation name")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Lc(n){var e,t,r=n[5]("Add")+"";return{c:function(){e=tn("span"),t=rn(r)},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){32&e&&r!==(r=n[5]("Add")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Pc(n){var e,t,r,o,i=n[2].error+"";return{c:function(){e=tn("p"),t=rn(n[0]),r=rn(": "),o=rn(i),sn(e,"class","error")},m:function(n,i){X(n,e,i),Z(e,t),Z(e,r),Z(e,o)},p:function(n,e){1&e&&ln(t,n[0]),4&e&&i!==(i=n[2].error+"")&&ln(o,i)},d:function(n){n&&nn(e)}}}function Mc(n){var e,t,r;function o(n,e){return n[2].done?Bc:Dc}for(var i=o(n),a=i(n),c=n[2].conversations,u=[],s=0;s<c.length;s+=1)u[s]=Ic(Nc(n,c,s));return{c:function(){e=tn("p"),a.c(),t=on(),r=tn("div");for(var n=0;n<u.length;n+=1)u[n].c();sn(r,"class","conversation-add-list")},m:function(n,o){X(n,e,o),a.m(e,null),X(n,t,o),X(n,r,o);for(var i=0;i<u.length;i+=1)u[i].m(r,null)},p:function(n,t){if(i===(i=o(n))&&a?a.p(n,t):(a.d(1),(a=i(n))&&(a.c(),a.m(e,null))),132&t){var s;for(c=n[2].conversations,s=0;s<c.length;s+=1){var f=Nc(n,c,s);u[s]?u[s].p(f,t):(u[s]=Ic(f),u[s].c(),u[s].m(r,null))}for(;s<u.length;s+=1)u[s].d(1);u.length=c.length}},d:function(n){n&&nn(e),a.d(),n&&nn(t),n&&nn(r),en(u,n)}}}function Dc(n){var e,t=n[5]("Showing %1 of %2 conversations, but the list is still loading.",n[2].conversations.length,n[2].n_conversations)+"";return{c:function(){e=rn(t)},m:function(n,t){X(n,e,t)},p:function(n,r){36&r&&t!==(t=n[5]("Showing %1 of %2 conversations, but the list is still loading.",n[2].conversations.length,n[2].n_conversations)+"")&&ln(e,t)},d:function(n){n&&nn(e)}}}function Bc(n){var e,t=n[5]("Showing %1 of %2 conversations.",n[2].conversations.length,n[2].n_conversations)+"";return{c:function(){e=rn(t)},m:function(n,t){X(n,e,t)},p:function(n,r){36&r&&t!==(t=n[5]("Showing %1 of %2 conversations.",n[2].conversations.length,n[2].n_conversations)+"")&&ln(e,t)},d:function(n){n&&nn(e)}}}function Ic(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h=n[17].n_users+"",m=n[17].name+"",v=(n[17].topic||"No topic.")+"";return{c:function(){e=tn("a"),t=tn("span"),r=rn(h),o=on(),i=tn("b"),a=rn(m),c=on(),u=tn("i"),s=rn(v),f=on(),sn(t,"class","conversation-add-list__n-users"),sn(i,"class","conversation-add-list__name"),sn(u,"class","conversation-add-list__title"),sn(e,"href",l="#add:"+n[17].name)},m:function(l,h){X(l,e,h),Z(e,t),Z(t,r),Z(e,o),Z(e,i),Z(i,a),Z(e,c),Z(e,u),Z(u,s),Z(e,f),d||(p=cn(e,"click",un(n[7])),d=!0)},p:function(n,t){4&t&&h!==(h=n[17].n_users+"")&&ln(r,h),4&t&&m!==(m=n[17].name+"")&&ln(a,m),4&t&&v!==(v=(n[17].topic||"No topic.")+"")&&ln(s,v),4&t&&l!==(l="#add:"+n[17].name)&&sn(e,"href",l)},d:function(n){n&&nn(e),d=!1,p()}}}function Uc(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,y,b,w,_,k,x,E,O,S=n[5]("Enter the name of an exising conversation, or create a new conversation.")+"";function C(e){n[12](e)}e=new Dr({props:{$$slots:{default:[Rc]},$$scope:{ctx:n}}});var N={name:"connection_id",options:n[1],placeholder:n[5]("Select..."),$$slots:{label:[Ac]},$$scope:{ctx:n}};function R(e){n[13](e)}void 0!==n[0]&&(N.value=n[0]),s=new Ea({props:N}),jn.push((function(){return ee(s,"value",C)})),(p=new jr({props:{type:"button",icon:"sync-alt",disabled:!n[0]||!1===n[2].done,$$slots:{default:[jc]},$$scope:{ctx:n}}})).$on("click",n[8]);var A={name:"conversation_id",placeholder:n[5]("#room or nick"),autocomplete:"off",$$slots:{label:[Tc]},$$scope:{ctx:n}};void 0!==n[3]&&(A.value=n[3]),v=new Oi({props:A}),jn.push((function(){return ee(v,"value",R)})),v.$on("keyup",n[9]),w=new jr({props:{icon:"comment",disabled:!n[0]||!n[3],$$slots:{default:[Lc]},$$scope:{ctx:n}}});var j=n[2].error&&Pc(n),T=null!==n[2].done&&Mc(n);return{c:function(){te(e.$$.fragment),t=on(),r=tn("main"),o=tn("p"),i=rn(S),a=on(),c=tn("form"),u=tn("div"),te(s.$$.fragment),l=on(),d=tn("div"),te(p.$$.fragment),h=on(),m=tn("div"),te(v.$$.fragment),y=on(),b=tn("div"),te(w.$$.fragment),_=on(),j&&j.c(),k=on(),T&&T.c(),sn(d,"class","flex-basis-30"),sn(u,"class","inputs-side-by-side"),sn(b,"class","flex-basis-30"),sn(m,"class","inputs-side-by-side"),sn(c,"method","post"),sn(r,"class","main")},m:function(f,g){re(e,f,g),X(f,t,g),X(f,r,g),Z(r,o),Z(o,i),Z(r,a),Z(r,c),Z(c,u),re(s,u,null),Z(u,l),Z(u,d),re(p,d,null),Z(c,h),Z(c,m),re(v,m,null),Z(m,y),Z(m,b),re(w,b,null),Z(c,_),j&&j.m(c,null),Z(c,k),T&&T.m(c,null),n[14](c),x=!0,E||(O=cn(c,"submit",un(n[7])),E=!0)},p:function(n,t){var r=$(t,1)[0],o={};1048608&r&&(o.$$scope={dirty:r,ctx:n}),e.$set(o),(!x||32&r)&&S!==(S=n[5]("Enter the name of an exising conversation, or create a new conversation.")+"")&&ln(i,S);var a={};2&r&&(a.options=n[1]),32&r&&(a.placeholder=n[5]("Select...")),1048608&r&&(a.$$scope={dirty:r,ctx:n}),!f&&1&r&&(f=!0,a.value=n[0],Bn((function(){return f=!1}))),s.$set(a);var u={};5&r&&(u.disabled=!n[0]||!1===n[2].done),1048612&r&&(u.$$scope={dirty:r,ctx:n}),p.$set(u);var l={};32&r&&(l.placeholder=n[5]("#room or nick")),1048608&r&&(l.$$scope={dirty:r,ctx:n}),!g&&8&r&&(g=!0,l.value=n[3],Bn((function(){return g=!1}))),v.$set(l);var d={};9&r&&(d.disabled=!n[0]||!n[3]),1048608&r&&(d.$$scope={dirty:r,ctx:n}),w.$set(d),n[2].error?j?j.p(n,r):((j=Pc(n)).c(),j.m(c,k)):j&&(j.d(1),j=null),null!==n[2].done?T?T.p(n,r):((T=Mc(n)).c(),T.m(c,null)):T&&(T.d(1),T=null)},i:function(n){x||(Vn(e.$$.fragment,n),Vn(s.$$.fragment,n),Vn(p.$$.fragment,n),Vn(v.$$.fragment,n),Vn(w.$$.fragment,n),x=!0)},o:function(n){Jn(e.$$.fragment,n),Jn(s.$$.fragment,n),Jn(p.$$.fragment,n),Jn(v.$$.fragment,n),Jn(w.$$.fragment,n),x=!1},d:function(o){oe(e,o),o&&nn(t),o&&nn(r),oe(s),oe(p),oe(v),oe(w),j&&j.d(),T&&T.d(),n[14](null),E=!1,O()}}}function Hc(n,e,t){var r,o,i;U(n,bt,(function(n){return t(5,i=n)}));var a=Nn("socket"),c=Nn("user");U(n,c,(function(n){return t(11,o=n)}));var u,s,l={conversations:[],done:null,n_conversations:0},p="",h="";function m(n){return v.apply(this,arguments)}function v(){return(v=d(f.mark((function n(e){var r;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r="/list"+(h.length?" /"+h+"/":""),"click"==e.type&&l.done&&(r+=" refresh"),s&&clearTimeout(s),a.send({connection_id:p,message:r,method:"send"},(function(n){var r=ve(n);t(2,l=r?{conversations:[],done:!0,n_conversations:0,error:r}:n);var o=e.interval?e.interval+500:500;o>2e3&&(o=2e3),r||n.done||(s=setTimeout((function(){return m({interval:o})}),o))}));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}On((function(){return pt.urlToForm(u)}));var g=me(m,250);return n.$$.update=function(){2048&n.$$.dirty&&t(1,r=Array.from(o.connections.keys()).map((function(n){return[n]}))),3&n.$$.dirty&&(p||t(0,p=r[0]?r[0][0]:""))},[p,r,l,h,u,i,c,function(n){var e=n&&n.target&&n.target.closest("a");e&&e.href&&t(3,h=e.href.replace(/.*#add:/,"")),p&&h&&c.findConversation({connection_id:p}).send("/join "+h)},m,g,"Add conversation",o,function(n){t(0,p=n),t(1,r),t(11,o)},function(n){t(3,h=n)},function(n){jn[n?"unshift":"push"]((function(){t(4,u=n)}))}]}var qc=function(n){a(o,n);var e=Cc(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,Hc,Uc,D,{title:10}),i}return R(o,[{key:"title",get:function(){return this.$$.ctx[10]}}]),o}(ce);function zc(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}function Fc(n){var e,t,r,o,i,a,c,u,s,f=n[4]("Yikes! we are so sorry for the inconvenience. Please submit an [issue](%1), if the problem does not go away.","https://github.com/convos-chat/convos/issues")+"",l=n[2]("Go to start page")+"";return i=new Cr({props:{name:"play"}}),{c:function(){e=tn("p"),t=on(),r=tn("p"),o=tn("a"),te(i.$$.fragment),a=on(),c=rn(l),sn(o,"href",u=n[1].baseUrl),sn(o,"target","_self"),sn(o,"class","btn")},m:function(n,u){X(n,e,u),e.innerHTML=f,X(n,t,u),X(n,r,u),Z(r,o),re(i,o,null),Z(o,a),Z(o,c),s=!0},p:function(n,t){(!s||16&t)&&f!==(f=n[4]("Yikes! we are so sorry for the inconvenience. Please submit an [issue](%1), if the problem does not go away.","https://github.com/convos-chat/convos/issues")+"")&&(e.innerHTML=f),(!s||4&t)&&l!==(l=n[2]("Go to start page")+"")&&ln(c,l),(!s||2&t&&u!==(u=n[1].baseUrl))&&sn(o,"href",u)},i:function(n){s||(Vn(i.$$.fragment,n),s=!0)},o:function(n){Jn(i.$$.fragment,n),s=!1},d:function(n){n&&nn(e),n&&nn(t),n&&nn(r),oe(i)}}}function Kc(n){var e,t,r,o,i,a,c,u,s,f,l=n[2]("The Convos Team have been searching and searching, but the requested page could not be found.")+"",d=n[2]("Go to start page")+"";return a=new Cr({props:{name:"play"}}),{c:function(){e=tn("p"),t=rn(l),r=on(),o=tn("p"),i=tn("a"),te(a.$$.fragment),c=on(),u=rn(d),sn(i,"href",s=n[1].baseUrl),sn(i,"target","_self"),sn(i,"class","btn")},m:function(n,s){X(n,e,s),Z(e,t),X(n,r,s),X(n,o,s),Z(o,i),re(a,i,null),Z(i,c),Z(i,u),f=!0},p:function(n,e){(!f||4&e)&&l!==(l=n[2]("The Convos Team have been searching and searching, but the requested page could not be found.")+"")&&ln(t,l),(!f||4&e)&&d!==(d=n[2]("Go to start page")+"")&&ln(u,d),(!f||2&e&&s!==(s=n[1].baseUrl))&&sn(i,"href",s)},i:function(n){f||(Vn(a.$$.fragment,n),f=!0)},o:function(n){Jn(a.$$.fragment,n),f=!1},d:function(n){n&&nn(e),n&&nn(r),n&&nn(o),oe(a)}}}function Wc(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,$,y,b=n[2]("Downloaded Convos.")+"",w=n[2]("Started Convos.")+"",_=n[2]("Contact admin")+"";t=new Cr({props:{name:"download"}}),c=new Cr({props:{name:"rocket"}});var k=[Yc,Gc],x=[];function E(n,e){return n[3].error?0:1}return l=E(n),d=x[l]=k[l](n),v=new Cr({props:{name:"paper-plane"}}),{c:function(){e=tn("p"),te(t.$$.fragment),r=on(),o=rn(b),i=on(),a=tn("p"),te(c.$$.fragment),u=on(),s=rn(w),f=on(),d.c(),p=on(),h=tn("p"),m=tn("a"),te(v.$$.fragment),g=on(),$=rn(_),sn(m,"class","btn"),sn(m,"href",xe("contact"))},m:function(n,d){X(n,e,d),re(t,e,null),Z(e,r),Z(e,o),X(n,i,d),X(n,a,d),re(c,a,null),Z(a,u),Z(a,s),X(n,f,d),x[l].m(n,d),X(n,p,d),X(n,h,d),Z(h,m),re(v,m,null),Z(m,g),Z(m,$),y=!0},p:function(n,e){(!y||4&e)&&b!==(b=n[2]("Downloaded Convos.")+"")&&ln(o,b),(!y||4&e)&&w!==(w=n[2]("Started Convos.")+"")&&ln(s,w);var t=l;(l=E(n))===t?x[l].p(n,e):(Gn(),Jn(x[t],1,1,(function(){x[t]=null})),Yn(),(d=x[l])?d.p(n,e):(d=x[l]=k[l](n)).c(),Vn(d,1),d.m(p.parentNode,p)),(!y||4&e)&&_!==(_=n[2]("Contact admin")+"")&&ln($,_)},i:function(n){y||(Vn(t.$$.fragment,n),Vn(c.$$.fragment,n),Vn(d),Vn(v.$$.fragment,n),y=!0)},o:function(n){Jn(t.$$.fragment,n),Jn(c.$$.fragment,n),Jn(d),Jn(v.$$.fragment,n),y=!1},d:function(n){n&&nn(e),oe(t),n&&nn(i),n&&nn(a),oe(c),n&&nn(f),x[l].d(n),n&&nn(p),n&&nn(h),oe(v)}}}function Gc(n){var e,t,r,o,i,a=n[2]("Loading user data...")+"";return t=new Cr({props:{name:"spinner fa-spin"}}),{c:function(){e=tn("p"),te(t.$$.fragment),r=on(),o=rn(a)},m:function(n,a){X(n,e,a),re(t,e,null),Z(e,r),Z(e,o),i=!0},p:function(n,e){(!i||4&e)&&a!==(a=n[2]("Loading user data...")+"")&&ln(o,a)},i:function(n){i||(Vn(t.$$.fragment,n),i=!0)},o:function(n){Jn(t.$$.fragment,n),i=!1},d:function(n){n&&nn(e),oe(t)}}}function Yc(n){var e,t,r,o,i,a=n[2]("Loading user data failed: %1",n[2](n[3].error))+"";return t=new Cr({props:{name:"exclamation-triangle"}}),{c:function(){e=tn("p"),te(t.$$.fragment),r=on(),o=rn(a)},m:function(n,a){X(n,e,a),re(t,e,null),Z(e,r),Z(e,o),i=!0},p:function(n,e){(!i||12&e)&&a!==(a=n[2]("Loading user data failed: %1",n[2](n[3].error))+"")&&ln(o,a)},i:function(n){i||(Vn(t.$$.fragment,n),i=!0)},o:function(n){Jn(t.$$.fragment,n),i=!1},d:function(n){n&&nn(e),oe(t)}}}function Vc(n){var e,t,r,o,i,a,c,u=n[2](n[5][n[0]])+"",s=[Wc,Kc,Fc],f=[];function l(n,e){return"loading"==n[0]?0:"not_found"==n[0]?1:2}return i=l(n),a=f[i]=s[i](n),{c:function(){e=tn("main"),t=tn("h2"),r=rn(u),o=on(),a.c(),sn(e,"class","cms-main")},m:function(n,a){X(n,e,a),Z(e,t),Z(t,r),Z(e,o),f[i].m(e,null),c=!0},p:function(n,t){var o=$(t,1)[0];(!c||5&o)&&u!==(u=n[2](n[5][n[0]])+"")&&ln(r,u);var d=i;(i=l(n))===d?f[i].p(n,o):(Gn(),Jn(f[d],1,1,(function(){f[d]=null})),Yn(),(a=f[i])?a.p(n,o):(a=f[i]=s[i](n)).c(),Vn(a,1),a.m(e,null))},i:function(n){c||(Vn(a),c=!0)},o:function(n){Jn(a),c=!1},d:function(n){n&&nn(e),f[i].d()}}}function Jc(n,e,t){var r,o,i,a,c,u;U(n,pt,(function(n){return t(1,o=n)})),U(n,bt,(function(n){return t(2,a=n)})),U(n,wt,(function(n){return t(4,u=n)}));var s=e.title,f=void 0===s?"Loading...":s,l={loading:"Loading...",not_found:"Not Found"},d=Nn("socket");U(n,d,(function(n){return t(3,c=n)}));var p=Nn("user");return U(n,p,(function(n){return t(9,i=n)})),n.$$set=function(n){"title"in n&&t(8,f=n.title)},n.$$.update=function(){514&n.$$.dirty&&t(0,r=function(n,e){var t=n.path.match(/\/err\/(\w+)/);return t?t[1]:!n.component||e.is("loading")?"loading":"not_found"}(o,i)),1&n.$$.dirty&&t(8,f=l[r])},[r,o,a,c,u,l,d,p,f,i]}var Qc=function(n){a(o,n);var e=zc(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,Jc,Vc,D,{title:8}),i}return o}(ce);function Zc(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}function Xc(n,e,t){var r=n.slice();return r[5]=e[t],r}function nu(n){var e,t,r,o,i,a,c,u=n[0]("Help")+"",s=xe("version")+"";return{c:function(){e=tn("h1"),t=rn(u),r=on(),o=tn("small"),i=tn("a"),a=rn("v"),c=rn(s),sn(i,"href",n[2]),sn(i,"target","_blank")},m:function(n,u){X(n,e,u),Z(e,t),Z(e,r),Z(e,o),Z(o,i),Z(i,a),Z(i,c)},p:function(n,e){1&e&&u!==(u=n[0]("Help")+"")&&ln(t,u)},d:function(n){n&&nn(e)}}}function eu(n){var e,t,r,o,i=n[5].example+"",a=n[0](n[5].description)+"";return{c:function(){e=tn("dt"),t=rn(i),r=tn("dd"),o=rn(a)},m:function(n,i){X(n,e,i),Z(e,t),X(n,r,i),Z(r,o)},p:function(n,e){1&e&&a!==(a=n[0](n[5].description)+"")&&ln(o,a)},d:function(n){n&&nn(e),n&&nn(r)}}}function tu(n){var e;return{c:function(){e=rn("Loading")},m:function(n,t){X(n,e,t)},d:function(n){n&&nn(e)}}}function ru(n){var e;return{c:function(){e=rn("Not found")},m:function(n,t){X(n,e,t)},d:function(n){n&&nn(e)}}}function ou(n){var e;return{c:function(){e=rn("Unknown")},m:function(n,t){X(n,e,t)},d:function(n){n&&nn(e)}}}function iu(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,y,b,w,_,k,x,E,O,S,C,N,R,j,T,L,P,M,D,B,I,U,H,q,z,F,K,W,G,Y,V,J,Q,an,cn,un,fn,dn,pn,hn,mn,vn,gn,yn,bn,wn,_n,kn,xn,En,On,Sn,Cn,Nn,Rn,An,jn,Tn,Ln,Pn,Mn,Dn,Bn,In,Un,Hn,qn,zn,Fn,Kn,Wn,Gn,Yn,Qn,Zn,Xn,ne,ee,ie,ae,ce,ue,se,fe,le,de,pe,he,me,ve,ge,$e,ye,be,we,_e,ke,Ee,Oe,Se,Ce,Ne,Re=n[1]('Got any questions? Come and talk to us in the "#convos" channel on https://freenode.net.')+"",Ae=n[1]("More information can also be found on https://convos.chat.")+"",je=n[0]("Quick search")+"",Te=n[0]("Pressing `shift+enter` will shift focus between chat input and search in sidebar.")+"",Le=n[0]("Filter conversations with unread messages.")+"",Pe=n[0]("Filter private conversations with unread messages.")+"",Me=n[0]("Filter channels with unread messages.")+"",De=n[0]("Any other combination")+"",Be=n[0]("Filter channels, private conversations or search for a string.")+"",Ie=n[0]("Autocomplete")+"",Ue=n[0]("The following rules apply when typing a message:")+"",He=n[0]('"@" followed by a character will show matching nicks in the current conversation.')+"",qe=n[0]('":" followed by a character will show matching emojis.')+"",ze=n[0]('"/" will show the available commands.')+"",Fe=n[0]('"#" will show the matching conversation names.')+"",Ke=n[0]("Text formatting")+"",We=n[0]("Convos supports some special way of formatting text:")+"",Ge=n[0]("Will be automatically converted into emojis.")+"",Ye=n[0]("> some text")+"",Ve=n[0]('A line starting with ">" will be converted into a quote.')+"",Je=n[0]("*some text*, **some text**, ***some text***")+"",Qe=n[1]('Using "*" around some text, will convert it into *italic*, **bold** or ***italic bold***.')+"",Ze=n[0]("`some fragment`")+"",Xe=n[1]("Using backticks around some text, will format it as a `code fragment`.")+"",nt=n[0]("URLs will be converted to links, and might be embedded in the chat.")+"",et=n[0]("Available commands")+"",tt=n[1]('Any message starting with a-z is prefixed with "`/quote`", when sending from a connection conversation.')+"",rt=n[0]("Other resources")+"",ot=n[0]("Changelog for v%1",xe("version"))+"",it=n[0]("Project homepage")+"",at=n[0]("Bug/issue tracker")+"",ct=n[0]("Source code")+"",ut="Convos"!=xe("organization_name")&&"https://convos.chat"!=xe("organization_url"),st=n[0]("Contact admin")+"",ft=n[0]("Demo error pages")+"";e=new Dr({props:{$$slots:{default:[nu]},$$scope:{ctx:n}}});for(var lt=Br,dt=[],pt=0;pt<lt.length;pt+=1)dt[pt]=eu(Xc(n,lt,pt));var ht,mt,vt,gt,$t=ut&&(gt=xe("organization_name")+"",{c:function(){ht=tn("li"),mt=tn("a"),vt=rn(gt),sn(mt,"href",xe("organization_url")),sn(mt,"target","_blank")},m:function(n,e){X(n,ht,e),Z(ht,mt),Z(mt,vt)},p:A,d:function(n){n&&nn(ht)}});return we=new xo({props:{href:"/err/loading",$$slots:{default:[tu]},$$scope:{ctx:n}}}),Ee=new xo({props:{href:"/err/not_found",$$slots:{default:[ru]},$$scope:{ctx:n}}}),Ce=new xo({props:{href:"/err/unknown",$$slots:{default:[ou]},$$scope:{ctx:n}}}),{c:function(){te(e.$$.fragment),t=on(),r=tn("main"),o=tn("p"),a=on(),u=on(),s=tn("h2"),f=rn(je),l=on(),d=tn("p"),p=rn(Te),h=on(),m=tn("dl"),(v=tn("dt")).textContent="+",g=tn("dd"),y=rn(Le),(b=tn("dt")).textContent="+@",w=tn("dd"),_=rn(Pe),(k=tn("dt")).textContent="+#",x=tn("dd"),E=rn(Me),O=tn("dt"),S=rn(De),C=tn("dd"),N=rn(Be),R=on(),j=tn("h2"),T=rn(Ie),L=on(),P=tn("p"),M=rn(Ue),D=on(),B=tn("dl"),(I=tn("dt")).textContent="@nick",U=tn("dd"),H=rn(He),(q=tn("dt")).textContent=":emoji_name",z=tn("dd"),F=rn(qe),(K=tn("dt")).textContent="/command",W=tn("dd"),G=rn(ze),(Y=tn("dt")).textContent="#conversation",V=tn("dd"),J=rn(Fe),Q=on(),an=tn("h2"),cn=rn(Ke),un=on(),fn=tn("p"),dn=rn(We),pn=on(),hn=tn("dl"),mn=tn("dt"),vn=tn("dd"),gn=rn(Ge),yn=tn("dt"),bn=rn(Ye),wn=tn("dd"),_n=rn(Ve),kn=tn("dt"),xn=rn(Je),En=tn("dd"),On=tn("dt"),Sn=rn(Ze),Cn=tn("dd"),(Nn=tn("dt")).textContent="https://...",Rn=tn("dd"),An=rn(nt),jn=on(),Tn=tn("h2"),Ln=rn(et),Pn=on(),Mn=tn("p"),Dn=on(),Bn=tn("dl");for(var $=0;$<dt.length;$+=1)dt[$].c();In=on(),Un=tn("h2"),Hn=rn(rt),qn=on(),zn=tn("ul"),Fn=tn("li"),Kn=tn("a"),Wn=rn(ot),Gn=on(),Yn=tn("li"),Qn=tn("a"),Zn=rn(it),Xn=on(),ne=tn("li"),ee=tn("a"),ie=rn(at),ae=on(),ce=tn("li"),ue=tn("a"),se=rn(ct),fe=on(),$t&&$t.c(),le=on(),de=tn("li"),pe=tn("a"),he=rn(st),me=on(),ve=tn("h2"),ge=rn(ft),$e=on(),ye=tn("ul"),be=tn("li"),te(we.$$.fragment),_e=on(),ke=tn("li"),te(Ee.$$.fragment),Oe=on(),Se=tn("li"),te(Ce.$$.fragment),i=new $n(a),c=new $n(null),sn(s,"id","quick-search"),sn(j,"id","autocomplete"),sn(an,"id","formatting"),sn(Tn,"id","commands"),sn(Un,"id","resources"),sn(Kn,"href",n[2]),sn(Kn,"target","_blank"),sn(Qn,"href","https://convos.chat"),sn(Qn,"target","_blank"),sn(ee,"href","https://github.com/convos-chat/convos/issues"),sn(ee,"target","_blank"),sn(ue,"href","https://github.com/convos-chat/convos"),sn(ue,"target","_blank"),sn(pe,"href",xe("contact")),sn(pe,"target","_blank"),sn(ve,"id","fallback"),sn(r,"class","main")},m:function($,A){re(e,$,A),X($,t,A),X($,r,A),Z(r,o),i.m(Re,o),Z(o,a),c.m(Ae,o),Z(r,u),Z(r,s),Z(s,f),Z(r,l),Z(r,d),Z(d,p),Z(r,h),Z(r,m),Z(m,v),Z(m,g),Z(g,y),Z(m,b),Z(m,w),Z(w,_),Z(m,k),Z(m,x),Z(x,E),Z(m,O),Z(O,S),Z(m,C),Z(C,N),Z(r,R),Z(r,j),Z(j,T),Z(r,L),Z(r,P),Z(P,M),Z(r,D),Z(r,B),Z(B,I),Z(B,U),Z(U,H),Z(B,q),Z(B,z),Z(z,F),Z(B,K),Z(B,W),Z(W,G),Z(B,Y),Z(B,V),Z(V,J),Z(r,Q),Z(r,an),Z(an,cn),Z(r,un),Z(r,fn),Z(fn,dn),Z(r,pn),Z(r,hn),Z(hn,mn),mn.innerHTML=n[3],Z(hn,vn),Z(vn,gn),Z(hn,yn),Z(yn,bn),Z(hn,wn),Z(wn,_n),Z(hn,kn),Z(kn,xn),Z(hn,En),En.innerHTML=Qe,Z(hn,On),Z(On,Sn),Z(hn,Cn),Cn.innerHTML=Xe,Z(hn,Nn),Z(hn,Rn),Z(Rn,An),Z(r,jn),Z(r,Tn),Z(Tn,Ln),Z(r,Pn),Z(r,Mn),Mn.innerHTML=tt,Z(r,Dn),Z(r,Bn);for(var nn=0;nn<dt.length;nn+=1)dt[nn].m(Bn,null);Z(r,In),Z(r,Un),Z(Un,Hn),Z(r,qn),Z(r,zn),Z(zn,Fn),Z(Fn,Kn),Z(Kn,Wn),Z(zn,Gn),Z(zn,Yn),Z(Yn,Qn),Z(Qn,Zn),Z(zn,Xn),Z(zn,ne),Z(ne,ee),Z(ee,ie),Z(zn,ae),Z(zn,ce),Z(ce,ue),Z(ue,se),Z(zn,fe),$t&&$t.m(zn,null),Z(zn,le),Z(zn,de),Z(de,pe),Z(pe,he),Z(r,me),Z(r,ve),Z(ve,ge),Z(r,$e),Z(r,ye),Z(ye,be),re(we,be,null),Z(ye,_e),Z(ye,ke),re(Ee,ke,null),Z(ye,Oe),Z(ye,Se),re(Ce,Se,null),Ne=!0},p:function(n,t){var r=$(t,1)[0],o={};if(257&r&&(o.$$scope={dirty:r,ctx:n}),e.$set(o),(!Ne||2&r)&&Re!==(Re=n[1]('Got any questions? Come and talk to us in the "#convos" channel on https://freenode.net.')+"")&&i.p(Re),(!Ne||2&r)&&Ae!==(Ae=n[1]("More information can also be found on https://convos.chat.")+"")&&c.p(Ae),(!Ne||1&r)&&je!==(je=n[0]("Quick search")+"")&&ln(f,je),(!Ne||1&r)&&Te!==(Te=n[0]("Pressing `shift+enter` will shift focus between chat input and search in sidebar.")+"")&&ln(p,Te),(!Ne||1&r)&&Le!==(Le=n[0]("Filter conversations with unread messages.")+"")&&ln(y,Le),(!Ne||1&r)&&Pe!==(Pe=n[0]("Filter private conversations with unread messages.")+"")&&ln(_,Pe),(!Ne||1&r)&&Me!==(Me=n[0]("Filter channels with unread messages.")+"")&&ln(E,Me),(!Ne||1&r)&&De!==(De=n[0]("Any other combination")+"")&&ln(S,De),(!Ne||1&r)&&Be!==(Be=n[0]("Filter channels, private conversations or search for a string.")+"")&&ln(N,Be),(!Ne||1&r)&&Ie!==(Ie=n[0]("Autocomplete")+"")&&ln(T,Ie),(!Ne||1&r)&&Ue!==(Ue=n[0]("The following rules apply when typing a message:")+"")&&ln(M,Ue),(!Ne||1&r)&&He!==(He=n[0]('"@" followed by a character will show matching nicks in the current conversation.')+"")&&ln(H,He),(!Ne||1&r)&&qe!==(qe=n[0]('":" followed by a character will show matching emojis.')+"")&&ln(F,qe),(!Ne||1&r)&&ze!==(ze=n[0]('"/" will show the available commands.')+"")&&ln(G,ze),(!Ne||1&r)&&Fe!==(Fe=n[0]('"#" will show the matching conversation names.')+"")&&ln(J,Fe),(!Ne||1&r)&&Ke!==(Ke=n[0]("Text formatting")+"")&&ln(cn,Ke),(!Ne||1&r)&&We!==(We=n[0]("Convos supports some special way of formatting text:")+"")&&ln(dn,We),(!Ne||1&r)&&Ge!==(Ge=n[0]("Will be automatically converted into emojis.")+"")&&ln(gn,Ge),(!Ne||1&r)&&Ye!==(Ye=n[0]("> some text")+"")&&ln(bn,Ye),(!Ne||1&r)&&Ve!==(Ve=n[0]('A line starting with ">" will be converted into a quote.')+"")&&ln(_n,Ve),(!Ne||1&r)&&Je!==(Je=n[0]("*some text*, **some text**, ***some text***")+"")&&ln(xn,Je),(!Ne||2&r)&&Qe!==(Qe=n[1]('Using "*" around some text, will convert it into *italic*, **bold** or ***italic bold***.')+"")&&(En.innerHTML=Qe),(!Ne||1&r)&&Ze!==(Ze=n[0]("`some fragment`")+"")&&ln(Sn,Ze),(!Ne||2&r)&&Xe!==(Xe=n[1]("Using backticks around some text, will format it as a `code fragment`.")+"")&&(Cn.innerHTML=Xe),(!Ne||1&r)&&nt!==(nt=n[0]("URLs will be converted to links, and might be embedded in the chat.")+"")&&ln(An,nt),(!Ne||1&r)&&et!==(et=n[0]("Available commands")+"")&&ln(Ln,et),(!Ne||2&r)&&tt!==(tt=n[1]('Any message starting with a-z is prefixed with "`/quote`", when sending from a connection conversation.')+"")&&(Mn.innerHTML=tt),1&r){var a;for(lt=Br,a=0;a<lt.length;a+=1){var u=Xc(n,lt,a);dt[a]?dt[a].p(u,r):(dt[a]=eu(u),dt[a].c(),dt[a].m(Bn,null))}for(;a<dt.length;a+=1)dt[a].d(1);dt.length=lt.length}(!Ne||1&r)&&rt!==(rt=n[0]("Other resources")+"")&&ln(Hn,rt),(!Ne||1&r)&&ot!==(ot=n[0]("Changelog for v%1",xe("version"))+"")&&ln(Wn,ot),(!Ne||1&r)&&it!==(it=n[0]("Project homepage")+"")&&ln(Zn,it),(!Ne||1&r)&&at!==(at=n[0]("Bug/issue tracker")+"")&&ln(ie,at),(!Ne||1&r)&&ct!==(ct=n[0]("Source code")+"")&&ln(se,ct),ut&&$t.p(n,r),(!Ne||1&r)&&st!==(st=n[0]("Contact admin")+"")&&ln(he,st),(!Ne||1&r)&&ft!==(ft=n[0]("Demo error pages")+"")&&ln(ge,ft);var s={};256&r&&(s.$$scope={dirty:r,ctx:n}),we.$set(s);var l={};256&r&&(l.$$scope={dirty:r,ctx:n}),Ee.$set(l);var d={};256&r&&(d.$$scope={dirty:r,ctx:n}),Ce.$set(d)},i:function(n){Ne||(Vn(e.$$.fragment,n),Vn(we.$$.fragment,n),Vn(Ee.$$.fragment,n),Vn(Ce.$$.fragment,n),Ne=!0)},o:function(n){Jn(e.$$.fragment,n),Jn(we.$$.fragment,n),Jn(Ee.$$.fragment,n),Jn(Ce.$$.fragment,n),Ne=!1},d:function(n){oe(e,n),n&&nn(t),n&&nn(r),en(dt,n),$t&&$t.d(),oe(we),oe(Ee),oe(Ce)}}}function au(n,e,t){var r,o;U(n,bt,(function(n){return t(0,r=n)})),U(n,wt,(function(n){return t(1,o=n)}));var i="https://github.com/convos-chat/convos/blob/v"+xe("version")+"/Changes#L3",a=Object.keys(yt.emojis.aliases).sort().join(", ");return[r,o,i,a,"Help"]}var cu=function(n){a(o,n);var e=Zc(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,au,iu,D,{title:4}),i}return R(o,[{key:"title",get:function(){return this.$$.ctx[4]}}]),o}(ce);function uu(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}function su(n,e,t){var r=n.slice();return r[29]=e[t],r}function fu(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v=n[4]("Sign up")+"",g=n[4]("Please ask your Convos admin for an invite link to sign up, or sign in if you already have an account.")+"",$=n[4]("Contact admin")+"",y=n[4]("Sign in")+"";return s=new Cr({props:{name:"paper-plane"}}),{c:function(){e=tn("h2"),t=rn(v),r=on(),o=tn("p"),i=rn(g),a=on(),c=tn("div"),u=tn("a"),te(s.$$.fragment),f=on(),l=rn($),d=on(),p=tn("a"),h=rn(y),sn(u,"class","btn"),sn(u,"href",xe("contact")),sn(p,"href","#signin"),sn(p,"replace",""),sn(c,"class","form-actions")},m:function(n,v){X(n,e,v),Z(e,t),X(n,r,v),X(n,o,v),Z(o,i),X(n,a,v),X(n,c,v),Z(c,u),re(s,u,null),Z(u,f),Z(u,l),Z(c,d),Z(c,p),Z(p,h),m=!0},p:function(n,e){(!m||16&e[0])&&v!==(v=n[4]("Sign up")+"")&&ln(t,v),(!m||16&e[0])&&g!==(g=n[4]("Please ask your Convos admin for an invite link to sign up, or sign in if you already have an account.")+"")&&ln(i,g),(!m||16&e[0])&&$!==($=n[4]("Contact admin")+"")&&ln(l,$),(!m||16&e[0])&&y!==(y=n[4]("Sign in")+"")&&ln(h,y)},i:function(n){m||(Vn(s.$$.fragment,n),m=!0)},o:function(n){Jn(s.$$.fragment,n),m=!1},d:function(n){n&&nn(e),n&&nn(r),n&&nn(o),n&&nn(a),n&&nn(c),oe(s)}}}function lu(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,$,y,b,w,_,k,x,E,O=n[4](xe("existing_user")?"Recover account":"Sign up")+"",S=xe("first_user"),C=n[4]("Sign in")+"",N=S&&function(n){var e,t,r=n[4]('As you are the first user, you do not need any invitation link. Just fill in the form below, hit "Sign up" to start chatting.')+"";return{c:function(){e=tn("p"),t=rn(r)},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){16&e[0]&&r!==(r=n[4]('As you are the first user, you do not need any invitation link. Just fill in the form below, hit "Sign up" to start chatting.')+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}(n);function R(e){n[15](e)}var A={type:"email",name:"email",placeholder:n[4]("Ex: john@doe.com"),readonly:n[7],$$slots:{default:[gu],help:[vu],label:[pu]},$$scope:{ctx:n}};function j(e){n[16](e)}void 0!==n[0].formEmail&&(A.value=n[0].formEmail),f=new Oi({props:A}),jn.push((function(){return ee(f,"value",R)}));var T={type:"password",name:"password",$$slots:{default:[bu],help:[yu],label:[$u]},$$scope:{ctx:n}};return void 0!==n[1]&&(T.value=n[1]),p=new Oi({props:T}),jn.push((function(){return ee(p,"value",j)})),g=new jr({props:{icon:"save",op:n[9],$$slots:{default:[wu]},$$scope:{ctx:n}}}),_=new Ti({props:{op:n[9],success:"Loading Convos..."}}),{c:function(){e=tn("form"),t=tn("h2"),r=rn(O),o=on(),N&&N.c(),i=on(),a=tn("input"),c=on(),u=tn("input"),s=on(),te(f.$$.fragment),d=on(),te(p.$$.fragment),m=on(),v=tn("div"),te(g.$$.fragment),$=on(),y=tn("a"),b=rn(C),w=on(),te(_.$$.fragment),sn(a,"type","hidden"),sn(a,"name","exp"),sn(u,"type","hidden"),sn(u,"name","token"),sn(y,"href","#signin"),sn(y,"replace",""),sn(v,"class","form-actions"),sn(e,"method","post")},m:function(l,h){X(l,e,h),Z(e,t),Z(t,r),Z(e,o),N&&N.m(e,null),Z(e,i),Z(e,a),Z(e,c),Z(e,u),Z(e,s),re(f,e,null),Z(e,d),re(p,e,null),Z(e,m),Z(e,v),re(g,v,null),Z(v,$),Z(v,y),Z(y,b),Z(e,w),re(_,e,null),n[18](e),k=!0,x||(E=cn(e,"submit",un(n[17])),x=!0)},p:function(n,e){(!k||16&e[0])&&O!==(O=n[4](xe("existing_user")?"Recover account":"Sign up")+"")&&ln(r,O),S&&N.p(n,e);var t={};16&e[0]&&(t.placeholder=n[4]("Ex: john@doe.com")),16&e[0]|2&e[1]&&(t.$$scope={dirty:e,ctx:n}),!l&&1&e[0]&&(l=!0,t.value=n[0].formEmail,Bn((function(){return l=!1}))),f.$set(t);var o={};16&e[0]|2&e[1]&&(o.$$scope={dirty:e,ctx:n}),!h&&2&e[0]&&(h=!0,o.value=n[1],Bn((function(){return h=!1}))),p.$set(o);var i={};16&e[0]|2&e[1]&&(i.$$scope={dirty:e,ctx:n}),g.$set(i),(!k||16&e[0])&&C!==(C=n[4]("Sign in")+"")&&ln(b,C)},i:function(n){k||(Vn(f.$$.fragment,n),Vn(p.$$.fragment,n),Vn(g.$$.fragment,n),Vn(_.$$.fragment,n),k=!0)},o:function(n){Jn(f.$$.fragment,n),Jn(p.$$.fragment,n),Jn(g.$$.fragment,n),Jn(_.$$.fragment,n),k=!1},d:function(t){t&&nn(e),N&&N.d(),oe(f),oe(p),oe(g),oe(_),n[18](null),x=!1,E()}}}function du(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v=n[4]("Invalid invite/recover URL")+"",g=n[4](410==xe("status")?"The link has expired.":"The link is invalid.")+"",$=n[4]("Please ask your Convos admin for a new link.")+"",y=n[4]("Contact admin")+"",b=n[4]("Sign in")+"";return{c:function(){e=tn("h2"),t=rn(v),r=on(),o=tn("p"),i=rn(g),a=on(),c=tn("p"),u=rn($),s=on(),f=tn("p"),l=tn("a"),d=rn(y),p=on(),h=tn("a"),m=rn(b),sn(l,"class","btn"),sn(l,"href",xe("contact")),sn(h,"href","#signin"),sn(h,"replace","")},m:function(n,v){X(n,e,v),Z(e,t),X(n,r,v),X(n,o,v),Z(o,i),X(n,a,v),X(n,c,v),Z(c,u),X(n,s,v),X(n,f,v),Z(f,l),Z(l,d),Z(f,p),Z(f,h),Z(h,m)},p:function(n,e){16&e[0]&&v!==(v=n[4]("Invalid invite/recover URL")+"")&&ln(t,v),16&e[0]&&g!==(g=n[4](410==xe("status")?"The link has expired.":"The link is invalid.")+"")&&ln(i,g),16&e[0]&&$!==($=n[4]("Please ask your Convos admin for a new link.")+"")&&ln(u,$),16&e[0]&&y!==(y=n[4]("Contact admin")+"")&&ln(d,y),16&e[0]&&b!==(b=n[4]("Sign in")+"")&&ln(m,b)},i:A,o:A,d:function(n){n&&nn(e),n&&nn(r),n&&nn(o),n&&nn(a),n&&nn(c),n&&nn(s),n&&nn(f)}}}function pu(n){var e,t,r=n[4]("Email")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){16&e[0]&&r!==(r=n[4]("Email")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function hu(n){var e,t=n[4]("Your email will be used if you forget your password.")+"";return{c:function(){e=rn(t)},m:function(n,t){X(n,e,t)},p:function(n,r){16&r[0]&&t!==(t=n[4]("Your email will be used if you forget your password.")+"")&&ln(e,t)},d:function(n){n&&nn(e)}}}function mu(n){var e,t=n[4]("Your email is from the invite link.")+"";return{c:function(){e=rn(t)},m:function(n,t){X(n,e,t)},p:function(n,r){16&r[0]&&t!==(t=n[4]("Your email is from the invite link.")+"")&&ln(e,t)},d:function(n){n&&nn(e)}}}function vu(n){var e;var t=function(n,e){return n[7]?mu:hu}(n)(n);return{c:function(){e=tn("p"),t.c(),sn(e,"class","help"),sn(e,"slot","help")},m:function(n,r){X(n,e,r),t.m(e,null)},p:function(n,e){t.p(n,e)},d:function(n){n&&nn(e),t.d()}}}function gu(n){var e;return{c:function(){e=on()},m:function(n,t){X(n,e,t)},p:A,d:function(n){n&&nn(e)}}}function $u(n){var e,t,r=n[4]("Password")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){16&e[0]&&r!==(r=n[4]("Password")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function yu(n){var e,t,r=n[4]("Hint: Use a phrase from a book.")+"";return{c:function(){e=tn("p"),t=rn(r),sn(e,"class","help"),sn(e,"slot","help")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){16&e[0]&&r!==(r=n[4]("Hint: Use a phrase from a book.")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function bu(n){var e;return{c:function(){e=on()},m:function(n,t){X(n,e,t)},p:A,d:function(n){n&&nn(e)}}}function wu(n){var e,t,r=n[4](xe("existing_user")?"Set new password":"Sign up")+"";return{c:function(){e=tn("span"),t=rn(r)},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){16&e[0]&&r!==(r=n[4](xe("existing_user")?"Set new password":"Sign up")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function _u(n){var e,t,r=n[4]("Email")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){16&e[0]&&r!==(r=n[4]("Email")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function ku(n){var e,t,r=n[4]("Password")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){16&e[0]&&r!==(r=n[4]("Password")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function xu(n){var e,t=n[5]("Contact your [Convos admin](%1) if you have forgotten your password.",xe("contact"))+"";return{c:function(){sn(e=tn("p"),"class","help"),sn(e,"slot","help")},m:function(n,r){X(n,e,r),e.innerHTML=t},p:function(n,r){32&r[0]&&t!==(t=n[5]("Contact your [Convos admin](%1) if you have forgotten your password.",xe("contact"))+"")&&(e.innerHTML=t)},d:function(n){n&&nn(e)}}}function Eu(n){var e;return{c:function(){e=on()},m:function(n,t){X(n,e,t)},p:A,d:function(n){n&&nn(e)}}}function Ou(n){var e,t,r=n[4]("Sign in")+"";return{c:function(){e=tn("span"),t=rn(r)},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){16&e[0]&&r!==(r=n[4]("Sign in")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Su(n){var e,t,r,o,i,a=n[29][1]+"";function c(){return n[23](n[29])}return{c:function(){e=tn("a"),t=rn(a),sn(e,"href",r="#"+n[29][0])},m:function(n,r){X(n,e,r),Z(e,t),o||(i=cn(e,"click",c),o=!0)},p:function(o,i){n=o,64&i[0]&&a!==(a=n[29][1]+"")&&ln(t,a),64&i[0]&&r!==(r="#"+n[29][0])&&sn(e,"href",r)},d:function(n){n&&nn(e),o=!1,i()}}}function Cu(n){var e,t,r,o,i,a,c,u,s,f,l,d=!xe("first_user"),p=[du,lu,fu],h=[];r=function(n,e){return xe("status")>=400?0:n[7]||xe("open_to_public")||xe("first_user")?1:2}(n),o=h[r]=p[r](n);var m=d&&function(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,$,y,b,w,_=n[4]("Sign in")+"",k=n[4]("Sign up")+"";function x(e){n[19](e)}var E={type:"email",name:"email",placeholder:n[4]("Ex: john@doe.com"),$$slots:{label:[_u]},$$scope:{ctx:n}};function O(e){n[20](e)}void 0!==n[0].formEmail&&(E.value=n[0].formEmail),a=new Oi({props:E}),jn.push((function(){return ee(a,"value",x)}));var S={type:"password",name:"password",autocomplete:"current-password",$$slots:{default:[Eu],help:[xu],label:[ku]},$$scope:{ctx:n}};return void 0!==n[1]&&(S.value=n[1]),s=new Oi({props:S}),jn.push((function(){return ee(s,"value",O)})),p=new jr({props:{icon:"sign-in-alt",op:n[8],$$slots:{default:[Ou]},$$scope:{ctx:n}}}),$=new Ti({props:{op:n[8],success:"Loading Convos..."}}),{c:function(){e=tn("div"),t=tn("form"),r=tn("h2"),o=rn(_),i=on(),te(a.$$.fragment),u=on(),te(s.$$.fragment),l=on(),d=tn("div"),te(p.$$.fragment),h=on(),m=tn("a"),v=rn(k),g=on(),te($.$$.fragment),sn(m,"href","#signup"),sn(d,"class","form-actions"),sn(t,"method","post"),sn(e,"id","signin"),mn(e,"hidden","signin"!=n[3])},m:function(c,f){X(c,e,f),Z(e,t),Z(t,r),Z(r,o),Z(t,i),re(a,t,null),Z(t,u),re(s,t,null),Z(t,l),Z(t,d),re(p,d,null),Z(d,h),Z(d,m),Z(m,v),Z(t,g),re($,t,null),n[22](t),y=!0,b||(w=cn(t,"submit",un(n[21])),b=!0)},p:function(n,t){(!y||16&t[0])&&_!==(_=n[4]("Sign in")+"")&&ln(o,_);var r={};16&t[0]&&(r.placeholder=n[4]("Ex: john@doe.com")),16&t[0]|2&t[1]&&(r.$$scope={dirty:t,ctx:n}),!c&&1&t[0]&&(c=!0,r.value=n[0].formEmail,Bn((function(){return c=!1}))),a.$set(r);var i={};48&t[0]|2&t[1]&&(i.$$scope={dirty:t,ctx:n}),!f&&2&t[0]&&(f=!0,i.value=n[1],Bn((function(){return f=!1}))),s.$set(i);var u={};16&t[0]|2&t[1]&&(u.$$scope={dirty:t,ctx:n}),p.$set(u),(!y||16&t[0])&&k!==(k=n[4]("Sign up")+"")&&ln(v,k),8&t[0]&&mn(e,"hidden","signin"!=n[3])},i:function(n){y||(Vn(a.$$.fragment,n),Vn(s.$$.fragment,n),Vn(p.$$.fragment,n),Vn($.$$.fragment,n),y=!0)},o:function(n){Jn(a.$$.fragment,n),Jn(s.$$.fragment,n),Jn(p.$$.fragment,n),Jn($.$$.fragment,n),y=!1},d:function(t){t&&nn(e),oe(a),oe(s),oe(p),oe($),n[22](null),b=!1,w()}}}(n);s=new Cr({props:{name:"globe"}});for(var v=n[6].languageOptions,g=[],$=0;$<v.length;$+=1)g[$]=Su(su(n,v,$));return{c:function(){e=tn("main"),t=tn("div"),o.c(),i=on(),m&&m.c(),a=on(),c=tn("div"),u=tn("footer"),te(s.$$.fragment),f=on();for(var r=0;r<g.length;r+=1)g[r].c();sn(t,"id","signup"),mn(t,"hidden","signup"!=n[3]),sn(e,"class","cms-main"),sn(u,"class","footer language-selector"),sn(c,"class","footer--wrapper is-small")},m:function(n,o){X(n,e,o),Z(e,t),h[r].m(t,null),Z(e,i),m&&m.m(e,null),X(n,a,o),X(n,c,o),Z(c,u),re(s,u,null),Z(u,f);for(var d=0;d<g.length;d+=1)g[d].m(u,null);l=!0},p:function(n,e){if(o.p(n,e),8&e[0]&&mn(t,"hidden","signup"!=n[3]),d&&m.p(n,e),64&e[0]){var r;for(v=n[6].languageOptions,r=0;r<v.length;r+=1){var i=su(n,v,r);g[r]?g[r].p(i,e):(g[r]=Su(i),g[r].c(),g[r].m(u,null))}for(;r<g.length;r+=1)g[r].d(1);g.length=v.length}},i:function(n){l||(Vn(o),Vn(m),Vn(s.$$.fragment,n),l=!0)},o:function(n){Jn(o),Jn(m),Jn(s.$$.fragment,n),l=!1},d:function(n){n&&nn(e),h[r].d(),m&&m.d(),n&&nn(a),n&&nn(c),oe(s),en(g,n)}}}function Nu(n,e,t){var r,o,i,a,c,u,s,l;U(n,pt,(function(n){return t(14,c=n)})),U(n,bt,(function(n){return t(4,u=n)})),U(n,wt,(function(n){return t(5,s=n)})),U(n,yt,(function(n){return t(6,l=n)}));var p=e.title,h=void 0===p?"Login":p,m=Nn("api"),v=Nn("user");U(n,v,(function(n){return t(11,o=n)}));var g=-1!=location.href.indexOf("email="),$=m("loginUser");U(n,$,(function(n){return t(12,i=n)}));var y=m("registerUser");U(n,y,(function(n){return t(13,a=n)}));var b,w="";function _(n){return k.apply(this,arguments)}function k(){return(k=d(f.mark((function n(e){return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.reset(),n.next=3,v.load();case 3:return n.abrupt("return",v.is("authenticated")?pt.go("/"):location.reload());case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}On((function(){b&&pt.urlToForm(b),b&&!("ontouchstart"in window)&&b.querySelector("input").focus()}));return n.$$set=function(n){"title"in n&&t(10,h=n.title)},n.$$.update=function(){2048&n.$$.dirty[0]&&function(n){var e=n.conversations()[0],t=pt.lastUrl?pt.lastUrl:e?e.path:"/settings/connections";!n.is("loading")&&n.is("authenticated")&&pt.go(t)}(o),4096&n.$$.dirty[0]&&i.is("success")&&_($),8192&n.$$.dirty[0]&&a.is("success")&&(pt.update({lastUrl:""}),_(y)),16384&n.$$.dirty[0]&&t(3,r=c.hash&&-1!=["signin","signup"].indexOf(c.hash)?c.hash:xe("first_user")||xe("open_to_public")?"signup":"signin"),16384&n.$$.dirty[0]&&t(10,h=c.path.match(/register/)?"Register":"Login")},[v,w,b,r,u,s,l,g,$,y,h,o,i,a,c,function(e){n.$$.not_equal(v.formEmail,e)&&(v.formEmail=e,t(0,v))},function(n){t(1,w=n)},function(n){return y.perform(n.target)},function(n){jn[n?"unshift":"push"]((function(){t(2,b=n)}))},function(e){n.$$.not_equal(v.formEmail,e)&&(v.formEmail=e,t(0,v))},function(n){t(1,w=n)},function(n){return $.perform(n.target)},function(n){jn[n?"unshift":"push"]((function(){t(2,b=n)}))},function(n){return l.load(n[0])}]}var Ru=function(n){a(o,n);var e=uu(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,Nu,Cu,D,{title:10},[-1,-1]),i}return o}(ce);function Au(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}function ju(n,e,t){var r=n.slice();return r[8]=e[t],r[10]=t,r}function Tu(n){var e,t,r=n[3]("Notifications")+"";return{c:function(){e=tn("h1"),t=rn(r)},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){8&e&&r!==(r=n[3]("Notifications")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Lu(n){var e,t,r=n[3]("No notifications.")+"";return{c:function(){e=tn("h2"),t=rn(r)},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){8&e&&r!==(r=n[3]("No notifications.")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Pu(n){var e,t,r,o,i,a,c,u=n[8].ts.getHumanDate()+"";return r=new Cr({props:{name:"calendar-alt"}}),{c:function(){e=tn("div"),t=tn("span"),te(r.$$.fragment),o=on(),i=tn("i"),a=rn(u),sn(e,"class","message__status-line for-day-changed")},m:function(n,u){X(n,e,u),Z(e,t),re(r,t,null),Z(t,o),Z(t,i),Z(i,a),c=!0},p:function(n,e){(!c||16&e)&&u!==(u=n[8].ts.getHumanDate()+"")&&ln(a,u)},i:function(n){c||(Vn(r.$$.fragment,n),c=!0)},o:function(n){Jn(r.$$.fragment,n),c=!1},d:function(n){n&&nn(e),oe(r)}}}function Mu(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,$,y=n[8].ts.toLocaleString()+"",b=n[3]("%1 in %2",n[8].from,n[8].conversation_id)+"",w=n[8].markdown+"",_=(!n[10]||n[8].dayChanged)&&Pu(n);return r=new Cr({props:{name:"pick:"+n[8].from,color:n[8].color}}),{c:function(){_&&_.c(),e=on(),t=tn("div"),te(r.$$.fragment),o=on(),i=tn("div"),a=tn("div"),c=rn(y),s=on(),f=tn("a"),l=rn(b),p=on(),h=tn("div"),sn(i,"class","message__ts has-tooltip"),sn(i,"data-content",u=n[8].ts.format("%H:%M")),sn(f,"href",d=Gr(n[8])),sn(f,"class","message__from"),pn(f,"color",n[8].color),sn(h,"class","message__text"),sn(t,"class",m=n[8].className)},m:function(n,u){_&&_.m(n,u),X(n,e,u),X(n,t,u),re(r,t,null),Z(t,o),Z(t,i),Z(i,a),Z(a,c),Z(t,s),Z(t,f),Z(f,l),Z(t,p),Z(t,h),h.innerHTML=w,v=!0,g||($=cn(t,"click",Yr),g=!0)},p:function(n,o){!n[10]||n[8].dayChanged?_?(_.p(n,o),16&o&&Vn(_,1)):((_=Pu(n)).c(),Vn(_,1),_.m(e.parentNode,e)):_&&(Gn(),Jn(_,1,1,(function(){_=null})),Yn());var a={};16&o&&(a.name="pick:"+n[8].from),16&o&&(a.color=n[8].color),r.$set(a),(!v||16&o)&&y!==(y=n[8].ts.toLocaleString()+"")&&ln(c,y),(!v||16&o&&u!==(u=n[8].ts.format("%H:%M")))&&sn(i,"data-content",u),(!v||24&o)&&b!==(b=n[3]("%1 in %2",n[8].from,n[8].conversation_id)+"")&&ln(l,b),(!v||16&o&&d!==(d=Gr(n[8])))&&sn(f,"href",d),(!v||16&o)&&pn(f,"color",n[8].color),(!v||16&o)&&w!==(w=n[8].markdown+"")&&(h.innerHTML=w),(!v||16&o&&m!==(m=n[8].className))&&sn(t,"class",m)},i:function(n){v||(Vn(_),Vn(r.$$.fragment,n),v=!0)},o:function(n){Jn(_),Jn(r.$$.fragment,n),v=!1},d:function(n){_&&_.d(n),n&&nn(e),n&&nn(t),oe(r),g=!1,$()}}}function Du(n){var e,t,r,o,i,a,c,u=n[3]("Loading...")+"";return r=new Cr({props:{name:"spinner",animation:"spin"}}),{c:function(){e=tn("div"),t=tn("span"),te(r.$$.fragment),o=on(),i=tn("i"),a=rn(u),sn(e,"class","message__status-line for-loading")},m:function(n,u){X(n,e,u),Z(e,t),re(r,t,null),Z(t,o),Z(t,i),Z(i,a),c=!0},p:function(n,e){(!c||8&e)&&u!==(u=n[3]("Loading...")+"")&&ln(a,u)},i:function(n){c||(Vn(r.$$.fragment,n),c=!0)},o:function(n){Jn(r.$$.fragment,n),c=!1},d:function(n){n&&nn(e),oe(r)}}}function Bu(n){for(var e,t,r,o,i=0==n[4].length&&!n[5].is("loading"),a=n[1].is("loading"),c=i&&Lu(n),u=n[4].render(),s=[],f=0;f<u.length;f+=1)s[f]=Mu(ju(n,u,f));var l=function(n){return Jn(s[n],1,1,(function(){s[n]=null}))},d=a&&Du(n);return{c:function(){c&&c.c(),e=on();for(var n=0;n<s.length;n+=1)s[n].c();t=on(),d&&d.c(),r=an()},m:function(n,i){c&&c.m(n,i),X(n,e,i);for(var a=0;a<s.length;a+=1)s[a].m(n,i);X(n,t,i),d&&d.m(n,i),X(n,r,i),o=!0},p:function(n,o){if(16&o&&(i=0==n[4].length&&!n[5].is("loading")),i?c?c.p(n,o):((c=Lu(n)).c(),c.m(e.parentNode,e)):c&&(c.d(1),c=null),24&o){var f;for(u=n[4].render(),f=0;f<u.length;f+=1){var p=ju(n,u,f);s[f]?(s[f].p(p,o),Vn(s[f],1)):(s[f]=Mu(p),s[f].c(),Vn(s[f],1),s[f].m(t.parentNode,t))}for(Gn(),f=u.length;f<s.length;f+=1)l(f);Yn()}2&o&&(a=n[1].is("loading")),a?d?(d.p(n,o),2&o&&Vn(d,1)):((d=Du(n)).c(),Vn(d,1),d.m(r.parentNode,r)):d&&(Gn(),Jn(d,1,1,(function(){d=null})),Yn())},i:function(n){if(!o){for(var e=0;e<u.length;e+=1)Vn(s[e]);Vn(d),o=!0}},o:function(n){s=s.filter(Boolean);for(var e=0;e<s.length;e+=1)Jn(s[e]);Jn(d),o=!1},d:function(n){c&&c.d(n),n&&nn(e),en(s,n),n&&nn(t),d&&d.d(n),n&&nn(r)}}}function Iu(n){var e,t,r,o;return e=new Dr({props:{$$slots:{default:[Tu]},$$scope:{ctx:n}}}),(r=new bo({props:{class:n[2].join(" "),$$slots:{default:[Bu]},$$scope:{ctx:n}}})).$on("rendered",Uu),{c:function(){te(e.$$.fragment),t=on(),te(r.$$.fragment)},m:function(n,i){re(e,n,i),X(n,t,i),re(r,n,i),o=!0},p:function(n,t){var o=$(t,1)[0],i={};2056&o&&(i.$$scope={dirty:o,ctx:n}),e.$set(i);var a={};4&o&&(a.class=n[2].join(" ")),2074&o&&(a.$$scope={dirty:o,ctx:n}),r.$set(a)},i:function(n){o||(Vn(e.$$.fragment,n),Vn(r.$$.fragment,n),o=!0)},o:function(n){Jn(e.$$.fragment,n),Jn(r.$$.fragment,n),o=!1},d:function(n){oe(e,n),n&&nn(t),oe(r,n)}}}var Uu=function(n){return n.detail.scrollTo(-1)};function Hu(n,e,t){var r,o,i,a,c,u=A;U(n,bt,(function(n){return t(3,a=n)})),n.$$.on_destroy.push((function(){return u()}));var s=Nn("user").notifications;return U(n,s,(function(n){return t(1,i=n)})),Sn((function(){return s.markAsRead()})),On((function(){return s.load()})),n.$$.update=function(){2&n.$$.dirty&&(t(0,o=i.messages),u(),u=B(o,(function(n){return t(4,c=n)}))),1&n.$$.dirty&&t(2,r=["main",o.length&&"has-results"].filter((function(n){return n})))},[o,i,r,a,c,s,"Notifications"]}var qu=function(n){a(o,n);var e=Au(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,Hu,Iu,D,{title:6}),i}return R(o,[{key:"title",get:function(){return this.$$.ctx[6]}}]),o}(ce);function zu(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}function Fu(n,e,t){var r=n.slice();return r[11]=e[t],r[13]=t,r}function Ku(n){var e,t,r=n[3](n[7].name)+"";return{c:function(){e=tn("h1"),t=rn(r)},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){8&e&&r!==(r=n[3](n[7].name)+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Wu(n){var e,t,r,o,i,a=[Yu,Gu],c=[];function u(n,t){return 32&t&&(e=!!n[5].param("q")),e?0:1}return t=u(n,-1),r=c[t]=a[t](n),{c:function(){r.c(),o=an()},m:function(n,e){c[t].m(n,e),X(n,o,e),i=!0},p:function(n,e){var i=t;(t=u(n,e))===i?c[t].p(n,e):(Gn(),Jn(c[i],1,1,(function(){c[i]=null})),Yn(),(r=c[t])?r.p(n,e):(r=c[t]=a[t](n)).c(),Vn(r,1),r.m(o.parentNode,o))},i:function(n){i||(Vn(r),i=!0)},o:function(n){Jn(r),i=!1},d:function(n){c[t].d(n),n&&nn(o)}}}function Gu(n){var e,t,r,o,i,a=n[6]("You can enter a channel name like #cool_beans to narrow down the search, or enter @some_nick to filter messages sent by a given user.")+"";return t=new Cr({props:{name:"info-circle"}}),{c:function(){e=tn("p"),te(t.$$.fragment),r=on(),o=new $n(null)},m:function(n,c){X(n,e,c),re(t,e,null),Z(e,r),o.m(a,e),i=!0},p:function(n,e){(!i||64&e)&&a!==(a=n[6]("You can enter a channel name like #cool_beans to narrow down the search, or enter @some_nick to filter messages sent by a given user.")+"")&&o.p(a)},i:function(n){i||(Vn(t.$$.fragment,n),i=!0)},o:function(n){Jn(t.$$.fragment,n),i=!1},d:function(n){n&&nn(e),oe(t)}}}function Yu(n){var e,t,r,o,i,a=n[3]('No search results for "%1".',n[5].param("q"))+"";return t=new Cr({props:{name:"info-circle"}}),{c:function(){e=tn("p"),te(t.$$.fragment),r=on(),o=rn(a)},m:function(n,a){X(n,e,a),re(t,e,null),Z(e,r),Z(e,o),i=!0},p:function(n,e){(!i||40&e)&&a!==(a=n[3]('No search results for "%1".',n[5].param("q"))+"")&&ln(o,a)},i:function(n){i||(Vn(t.$$.fragment,n),i=!0)},o:function(n){Jn(t.$$.fragment,n),i=!1},d:function(n){n&&nn(e),oe(t)}}}function Vu(n){var e,t,r,o,i,a,c,u=n[11].ts.getHumanDate()+"";return r=new Cr({props:{name:"calendar-alt"}}),{c:function(){e=tn("div"),t=tn("span"),te(r.$$.fragment),o=on(),i=tn("i"),a=rn(u),sn(e,"class","message__status-line for-day-changed")},m:function(n,u){X(n,e,u),Z(e,t),re(r,t,null),Z(t,o),Z(t,i),Z(i,a),c=!0},p:function(n,e){(!c||16&e)&&u!==(u=n[11].ts.getHumanDate()+"")&&ln(a,u)},i:function(n){c||(Vn(r.$$.fragment,n),c=!0)},o:function(n){Jn(r.$$.fragment,n),c=!1},d:function(n){n&&nn(e),oe(r)}}}function Ju(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,$,y,b=n[11].ts.toLocaleString()+"",w=n[3]("%1 in %2",n[11].from,n[11].conversation_id)+"",_=n[11].markdown+"",k=(!n[13]||n[11].dayChanged)&&Vu(n);return r=new Cr({props:{name:"pick:"+n[11].from,color:n[11].color}}),{c:function(){k&&k.c(),e=on(),t=tn("div"),te(r.$$.fragment),o=on(),i=tn("div"),a=tn("div"),c=rn(b),s=on(),f=tn("a"),l=rn(w),p=on(),h=tn("div"),m=on(),sn(i,"class","message__ts has-tooltip"),sn(i,"data-content",u=n[11].ts.format("%H:%M")),sn(f,"href",d=Gr(n[11])),sn(f,"class","message__from"),pn(f,"color",n[11].color),sn(h,"class","message__text"),sn(t,"class",v=n[11].className)},m:function(n,u){k&&k.m(n,u),X(n,e,u),X(n,t,u),re(r,t,null),Z(t,o),Z(t,i),Z(i,a),Z(a,c),Z(t,s),Z(t,f),Z(f,l),Z(t,p),Z(t,h),h.innerHTML=_,Z(t,m),g=!0,$||(y=cn(t,"click",Yr),$=!0)},p:function(n,o){!n[13]||n[11].dayChanged?k?(k.p(n,o),16&o&&Vn(k,1)):((k=Vu(n)).c(),Vn(k,1),k.m(e.parentNode,e)):k&&(Gn(),Jn(k,1,1,(function(){k=null})),Yn());var a={};16&o&&(a.name="pick:"+n[11].from),16&o&&(a.color=n[11].color),r.$set(a),(!g||16&o)&&b!==(b=n[11].ts.toLocaleString()+"")&&ln(c,b),(!g||16&o&&u!==(u=n[11].ts.format("%H:%M")))&&sn(i,"data-content",u),(!g||24&o)&&w!==(w=n[3]("%1 in %2",n[11].from,n[11].conversation_id)+"")&&ln(l,w),(!g||16&o&&d!==(d=Gr(n[11])))&&sn(f,"href",d),(!g||16&o)&&pn(f,"color",n[11].color),(!g||16&o)&&_!==(_=n[11].markdown+"")&&(h.innerHTML=_),(!g||16&o&&v!==(v=n[11].className))&&sn(t,"class",v)},i:function(n){g||(Vn(k),Vn(r.$$.fragment,n),g=!0)},o:function(n){Jn(k),Jn(r.$$.fragment,n),g=!1},d:function(n){k&&k.d(n),n&&nn(e),n&&nn(t),oe(r),$=!1,y()}}}function Qu(n){var e,t,r,o,i,a,c,u=n[3]("Loading...")+"";return r=new Cr({props:{name:"spinner",animation:"spin"}}),{c:function(){e=tn("div"),t=tn("span"),te(r.$$.fragment),o=on(),i=tn("i"),a=rn(u),sn(e,"class","message__status-line for-loading")},m:function(n,u){X(n,e,u),Z(e,t),re(r,t,null),Z(t,o),Z(t,i),Z(i,a),c=!0},p:function(n,e){(!c||8&e)&&u!==(u=n[3]("Loading...")+"")&&ln(a,u)},i:function(n){c||(Vn(r.$$.fragment,n),c=!0)},o:function(n){Jn(r.$$.fragment,n),c=!1},d:function(n){n&&nn(e),oe(r)}}}function Zu(n){for(var e,t,r,o,i=0==n[4].length&&!n[7].is("loading"),a=n[1].is("loading"),c=i&&Wu(n),u=n[4].render(),s=[],f=0;f<u.length;f+=1)s[f]=Ju(Fu(n,u,f));var l=function(n){return Jn(s[n],1,1,(function(){s[n]=null}))},d=a&&Qu(n);return{c:function(){c&&c.c(),e=on();for(var n=0;n<s.length;n+=1)s[n].c();t=on(),d&&d.c(),r=an()},m:function(n,i){c&&c.m(n,i),X(n,e,i);for(var a=0;a<s.length;a+=1)s[a].m(n,i);X(n,t,i),d&&d.m(n,i),X(n,r,i),o=!0},p:function(n,o){if(16&o&&(i=0==n[4].length&&!n[7].is("loading")),i?c?(c.p(n,o),16&o&&Vn(c,1)):((c=Wu(n)).c(),Vn(c,1),c.m(e.parentNode,e)):c&&(Gn(),Jn(c,1,1,(function(){c=null})),Yn()),24&o){var f;for(u=n[4].render(),f=0;f<u.length;f+=1){var p=Fu(n,u,f);s[f]?(s[f].p(p,o),Vn(s[f],1)):(s[f]=Ju(p),s[f].c(),Vn(s[f],1),s[f].m(t.parentNode,t))}for(Gn(),f=u.length;f<s.length;f+=1)l(f);Yn()}2&o&&(a=n[1].is("loading")),a?d?(d.p(n,o),2&o&&Vn(d,1)):((d=Qu(n)).c(),Vn(d,1),d.m(r.parentNode,r)):d&&(Gn(),Jn(d,1,1,(function(){d=null})),Yn())},i:function(n){if(!o){Vn(c);for(var e=0;e<u.length;e+=1)Vn(s[e]);Vn(d),o=!0}},o:function(n){Jn(c),s=s.filter(Boolean);for(var e=0;e<s.length;e+=1)Jn(s[e]);Jn(d),o=!1},d:function(n){c&&c.d(n),n&&nn(e),en(s,n),n&&nn(t),d&&d.d(n),n&&nn(r)}}}function Xu(n){var e,t,r,o,i,a,c=n[7].is("search");e=new Dr({props:{$$slots:{default:[Ku]},$$scope:{ctx:n}}}),(r=new bo({props:{class:n[2].join(" "),$$slots:{default:[Zu]},$$scope:{ctx:n}}})).$on("rendered",ns);var u=c&&function(n){var e,t;return e=new mo({props:{conversation:n[7]}}),{c:function(){te(e.$$.fragment)},m:function(n,r){re(e,n,r),t=!0},p:A,i:function(n){t||(Vn(e.$$.fragment,n),t=!0)},o:function(n){Jn(e.$$.fragment,n),t=!1},d:function(n){oe(e,n)}}}(n);return{c:function(){te(e.$$.fragment),t=on(),te(r.$$.fragment),o=on(),u&&u.c(),i=an()},m:function(n,c){re(e,n,c),X(n,t,c),re(r,n,c),X(n,o,c),u&&u.m(n,c),X(n,i,c),a=!0},p:function(n,t){var o=$(t,1)[0],i={};16392&o&&(i.$$scope={dirty:o,ctx:n}),e.$set(i);var a={};4&o&&(a.class=n[2].join(" ")),16506&o&&(a.$$scope={dirty:o,ctx:n}),r.$set(a),c&&u.p(n,o)},i:function(n){a||(Vn(e.$$.fragment,n),Vn(r.$$.fragment,n),Vn(u),a=!0)},o:function(n){Jn(e.$$.fragment,n),Jn(r.$$.fragment,n),Jn(u),a=!1},d:function(n){oe(e,n),n&&nn(t),oe(r,n),n&&nn(o),u&&u.d(n),n&&nn(i)}}}var ns=function(n){return n.detail.scrollTo(-1)};function es(n,e,t){var r,o,i,a,c,u,s,f=A;U(n,bt,(function(n){return t(3,a=n)})),U(n,pt,(function(n){return t(5,u=n)})),U(n,wt,(function(n){return t(6,s=n)})),n.$$.on_destroy.push((function(){return f()}));var l=Nn("user"),d=l.search;function p(n){var e=n.message;return d.update({userInput:e}),pt.go("/search?q="+encodeURIComponent(e),{replace:!0}),e?d.load({match:e}):o.clear()}return U(n,d,(function(n){return t(1,i=n)})),On((function(){return l.search.on("send",p)})),n.$$.update=function(){2&n.$$.dirty&&(t(0,o=i.messages),f(),f=B(o,(function(n){return t(4,c=n)}))),3&n.$$.dirty&&t(2,r=["main",o.length&&"has-results",i.is("search")&&"is-above-chat-input"].filter((function(n){return n})))},pt.param("q")&&p({message:pt.param("q")}),[o,i,r,a,c,u,s,d,"Search"]}var ts=function(n){a(o,n);var e=zu(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,es,Xu,D,{title:8}),i}return R(o,[{key:"title",get:function(){return this.$$.ctx[8]}}]),o}(ce);function rs(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}function os(n){var e,t,r=n[9]("Account")+"";return{c:function(){e=tn("h1"),t=rn(r)},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){512&e&&r!==(r=n[9]("Account")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function is(n){var e,t,r=n[9]("Email")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){512&e&&r!==(r=n[9]("Email")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function as(n){var e,t,r=n[9]("Notification keywords")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){512&e&&r!==(r=n[9]("Notification keywords")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function cs(n){var e,t,r=n[9]("Enable notifications")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){512&e&&r!==(r=n[9]("Enable notifications")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function us(n){var e,t,r=n[9]("Ignore join/part messages")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){512&e&&r!==(r=n[9]("Ignore join/part messages")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function ss(n){var e,t,r=n[9]("Expand URL to media")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){512&e&&r!==(r=n[9]("Expand URL to media")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function fs(n){var e,t,r=n[9]("Theme")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){512&e&&r!==(r=n[9]("Theme")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function ls(n){var e,t,r=n[9]("Color scheme")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){512&e&&r!==(r=n[9]("Color scheme")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function ds(n){var e,t,r=n[9]("Enable compact message display")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){512&e&&r!==(r=n[9]("Enable compact message display")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function ps(n){var e,t,r,o,i,a=n[9]("Language")+"";return o=new Cr({props:{name:"globe"}}),{c:function(){e=tn("span"),t=rn(a),r=on(),te(o.$$.fragment),sn(e,"slot","label")},m:function(n,a){X(n,e,a),Z(e,t),Z(e,r),re(o,e,null),i=!0},p:function(n,e){(!i||512&e)&&a!==(a=n[9]("Language")+"")&&ln(t,a)},i:function(n){i||(Vn(o.$$.fragment,n),i=!0)},o:function(n){Jn(o.$$.fragment,n),i=!1},d:function(n){n&&nn(e),oe(o)}}}function hs(n){var e,t,r=n[9]("Password")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){512&e&&r!==(r=n[9]("Password")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function ms(n){var e,t,r=n[9]("Repeat password")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){512&e&&r!==(r=n[9]("Repeat password")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function vs(n){var e,t,r=n[9]("Save settings")+"";return{c:function(){e=tn("span"),t=rn(r)},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){512&e&&r!==(r=n[9]("Save settings")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function gs(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,y,b,w,_,k,x,E,O,S,C,N,R,A,j,T,L,P,M,D,B,I,U,H,q,z,F,K=n[9]("Leave the password fields empty to keep the current password.")+"";function W(e){n[19](e)}e=new Dr({props:{$$slots:{default:[os]},$$scope:{ctx:n}}}),i=new Oi({props:{type:"email",name:"email",value:n[10].email,readonly:!0,$$slots:{label:[is]},$$scope:{ctx:n}}}),c=new Oi({props:{name:"highlight_keywords",placeholder:n[9]("whatever, keywords"),value:n[15],$$slots:{label:[as]},$$scope:{ctx:n}}});var G={name:"notifications",$$slots:{label:[cs]},$$scope:{ctx:n}};function Y(e){n[20](e)}void 0!==n[7]&&(G.checked=n[7]),s=new gi({props:G}),jn.push((function(){return ee(s,"checked",W)}));var V={name:"statuses",$$slots:{label:[us]},$$scope:{ctx:n}};function J(e){n[21](e)}void 0!==n[6]&&(V.checked=n[6]),d=new gi({props:V}),jn.push((function(){return ee(d,"checked",Y)}));var Q={name:"expand_url",$$slots:{label:[ss]},$$scope:{ctx:n}};function en(e){n[22](e)}void 0!==n[5]&&(Q.checked=n[5]),m=new gi({props:Q}),jn.push((function(){return ee(m,"checked",J)}));var an={name:"theme",options:n[12].themeOptions,$$slots:{label:[fs]},$$scope:{ctx:n}};function fn(e){n[23](e)}void 0!==n[0]&&(an.value=n[0]),y=new Ea({props:an}),jn.push((function(){return ee(y,"value",en)}));var dn={name:"color_scheme",readonly:n[8],options:n[12].colorSchemeOptions,$$slots:{label:[ls]},$$scope:{ctx:n}};function pn(e){n[24](e)}void 0!==n[3]&&(dn.value=n[3]),_=new Ea({props:dn}),jn.push((function(){return ee(_,"value",fn)}));var hn={name:"compact",$$slots:{label:[ds]},$$scope:{ctx:n}};function mn(e){n[25](e)}void 0!==n[4]&&(hn.checked=n[4]),E=new gi({props:hn}),jn.push((function(){return ee(E,"checked",pn)}));var vn={name:"lang",options:n[11].languageOptions,$$slots:{label:[ps]},$$scope:{ctx:n}};return void 0!==n[1]&&(vn.value=n[1]),C=new Ea({props:vn}),jn.push((function(){return ee(C,"value",mn)})),A=new Oi({props:{type:"password",name:"password",autocomplete:"new-password",$$slots:{label:[hs]},$$scope:{ctx:n}}}),T=new Oi({props:{type:"password",name:"password_again",autocomplete:"new-password",$$slots:{label:[ms]},$$scope:{ctx:n}}}),I=new jr({props:{icon:"save",op:n[14],$$slots:{default:[vs]},$$scope:{ctx:n}}}),H=new Ti({props:{op:n[14]}}),{c:function(){te(e.$$.fragment),t=on(),r=tn("main"),o=tn("form"),te(i.$$.fragment),a=on(),te(c.$$.fragment),u=on(),te(s.$$.fragment),l=on(),te(d.$$.fragment),h=on(),te(m.$$.fragment),g=on(),te(y.$$.fragment),w=on(),te(_.$$.fragment),x=on(),te(E.$$.fragment),S=on(),te(C.$$.fragment),R=on(),te(A.$$.fragment),j=on(),te(T.$$.fragment),L=on(),P=tn("p"),M=rn(K),D=on(),B=tn("div"),te(I.$$.fragment),U=on(),te(H.$$.fragment),sn(B,"class","form-actions"),sn(o,"method","post"),sn(r,"class","main")},m:function(f,p){re(e,f,p),X(f,t,p),X(f,r,p),Z(r,o),re(i,o,null),Z(o,a),re(c,o,null),Z(o,u),re(s,o,null),Z(o,l),re(d,o,null),Z(o,h),re(m,o,null),Z(o,g),re(y,o,null),Z(o,w),re(_,o,null),Z(o,x),re(E,o,null),Z(o,S),re(C,o,null),Z(o,R),re(A,o,null),Z(o,j),re(T,o,null),Z(o,L),Z(o,P),Z(P,M),Z(o,D),Z(o,B),re(I,B,null),Z(o,U),re(H,o,null),n[26](o),q=!0,z||(F=cn(o,"submit",un(n[16])),z=!0)},p:function(n,t){var r=$(t,1)[0],o={};536871424&r&&(o.$$scope={dirty:r,ctx:n}),e.$set(o);var a={};1024&r&&(a.value=n[10].email),536871424&r&&(a.$$scope={dirty:r,ctx:n}),i.$set(a);var u={};512&r&&(u.placeholder=n[9]("whatever, keywords")),536871424&r&&(u.$$scope={dirty:r,ctx:n}),c.$set(u);var l={};536871424&r&&(l.$$scope={dirty:r,ctx:n}),!f&&128&r&&(f=!0,l.checked=n[7],Bn((function(){return f=!1}))),s.$set(l);var h={};536871424&r&&(h.$$scope={dirty:r,ctx:n}),!p&&64&r&&(p=!0,h.checked=n[6],Bn((function(){return p=!1}))),d.$set(h);var g={};536871424&r&&(g.$$scope={dirty:r,ctx:n}),!v&&32&r&&(v=!0,g.checked=n[5],Bn((function(){return v=!1}))),m.$set(g);var w={};536871424&r&&(w.$$scope={dirty:r,ctx:n}),!b&&1&r&&(b=!0,w.value=n[0],Bn((function(){return b=!1}))),y.$set(w);var x={};256&r&&(x.readonly=n[8]),536871424&r&&(x.$$scope={dirty:r,ctx:n}),!k&&8&r&&(k=!0,x.value=n[3],Bn((function(){return k=!1}))),_.$set(x);var S={};536871424&r&&(S.$$scope={dirty:r,ctx:n}),!O&&16&r&&(O=!0,S.checked=n[4],Bn((function(){return O=!1}))),E.$set(S);var R={};2048&r&&(R.options=n[11].languageOptions),536871424&r&&(R.$$scope={dirty:r,ctx:n}),!N&&2&r&&(N=!0,R.value=n[1],Bn((function(){return N=!1}))),C.$set(R);var j={};536871424&r&&(j.$$scope={dirty:r,ctx:n}),A.$set(j);var L={};536871424&r&&(L.$$scope={dirty:r,ctx:n}),T.$set(L),(!q||512&r)&&K!==(K=n[9]("Leave the password fields empty to keep the current password.")+"")&&ln(M,K);var P={};536871424&r&&(P.$$scope={dirty:r,ctx:n}),I.$set(P)},i:function(n){q||(Vn(e.$$.fragment,n),Vn(i.$$.fragment,n),Vn(c.$$.fragment,n),Vn(s.$$.fragment,n),Vn(d.$$.fragment,n),Vn(m.$$.fragment,n),Vn(y.$$.fragment,n),Vn(_.$$.fragment,n),Vn(E.$$.fragment,n),Vn(C.$$.fragment,n),Vn(A.$$.fragment,n),Vn(T.$$.fragment,n),Vn(I.$$.fragment,n),Vn(H.$$.fragment,n),q=!0)},o:function(n){Jn(e.$$.fragment,n),Jn(i.$$.fragment,n),Jn(c.$$.fragment,n),Jn(s.$$.fragment,n),Jn(d.$$.fragment,n),Jn(m.$$.fragment,n),Jn(y.$$.fragment,n),Jn(_.$$.fragment,n),Jn(E.$$.fragment,n),Jn(C.$$.fragment,n),Jn(A.$$.fragment,n),Jn(T.$$.fragment,n),Jn(I.$$.fragment,n),Jn(H.$$.fragment,n),q=!1},d:function(o){oe(e,o),o&&nn(t),o&&nn(r),oe(i),oe(c),oe(s),oe(d),oe(m),oe(y),oe(_),oe(E),oe(C),oe(A),oe(T),oe(I),oe(H),n[26](null),z=!1,F()}}}function $s(n,e,t){var r,o,i,a,c;U(n,bt,(function(n){return t(9,i=n)})),U(n,yt,(function(n){return t(11,c=n)}));var u=Nn("api"),s=Nn("themeManager");U(n,s,(function(n){return t(18,o=n)}));var f=Nn("user");U(n,f,(function(n){return t(10,a=n)}));var l,d=u("updateUser"),p=s.activeTheme,h=s.colorScheme,m=yt.lang,v=s.compactDisplay,g=f.expandUrlToMedia,$=f.highlightKeywords.join(", "),y=f.ignoreStatuses,b=Gt.wantNotifications;return d.on("start",(function(n){n.body.password||delete n.body.password,n.body.highlight_keywords=n.body.highlight_keywords.split(/[.,\s]+/).map((function(n){return n.trim()})),f.update({highlightKeywords:n.body.highlight_keywords})})),Sn(Gt.on("update",(function(n,e){if(!e.wantNotifications&&!e.desktopAccess)return;n.wantNotifications&&n.show(i("You have enabled notifications."))}))),n.$$.update=function(){262145&n.$$.dirty&&t(8,r=!o.hasColorScheme(p)),2&n.$$.dirty&&yt.load(m)},[p,m,l,h,v,g,y,b,r,i,a,c,s,f,d,$,function(n){var e=n.target,o=[e.password.value,e.password_again.value];if(o.join("").length&&o[0]!=o[1])return d.error("Passwords does not match.");r&&t(3,h="auto"),b&&Gt.requestDesktopAccess(),Gt.update({wantNotifications:b}),s.update({activeTheme:p,colorScheme:h,compactDisplay:v}),f.update({expandUrlToMedia:g,ignoreStatuses:y}),d.perform(n.target)},"Account",o,function(n){t(7,b=n)},function(n){t(6,y=n)},function(n){t(5,g=n)},function(n){t(0,p=n)},function(n){t(3,h=n)},function(n){t(4,v=n)},function(n){t(1,m=n)},function(n){jn[n?"unshift":"push"]((function(){t(2,l=n)}))}]}var ys=function(n){a(o,n);var e=rs(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,$s,gs,D,{title:17}),i}return R(o,[{key:"title",get:function(){return this.$$.ctx[17]}}]),o}(ce);function bs(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}function ws(n){var e,t,r=n[2]("Global settings")+"";return{c:function(){e=tn("h1"),t=rn(r)},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){4&e&&r!==(r=n[2]("Global settings")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function _s(n){var e,t,r=n[2]("Organization name")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){4&e&&r!==(r=n[2]("Organization name")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function ks(n){var e,t,r=n[2]("Can be changed if you want to add a touch of your organization.")+"";return{c:function(){e=tn("p"),t=rn(r),sn(e,"class","help"),sn(e,"slot","help")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){4&e&&r!==(r=n[2]("Can be changed if you want to add a touch of your organization.")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function xs(n){var e;return{c:function(){e=on()},m:function(n,t){X(n,e,t)},p:A,d:function(n){n&&nn(e)}}}function Es(n){var e,t,r=n[2]("Organization URL")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){4&e&&r!==(r=n[2]("Organization URL")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Os(n){var e,t,r=n[2]('Used together with "Organization name" to add a link to your organization on the login screen.')+"";return{c:function(){e=tn("p"),t=rn(r),sn(e,"class","help"),sn(e,"slot","help")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){4&e&&r!==(r=n[2]('Used together with "Organization name" to add a link to your organization on the login screen.')+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Ss(n){var e;return{c:function(){e=on()},m:function(n,t){X(n,e,t)},p:A,d:function(n){n&&nn(e)}}}function Cs(n){var e,t,r=n[2]("Admin email")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){4&e&&r!==(r=n[2]("Admin email")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Ns(n){var e,t,r=n[2]("This email can be used by users to get in touch with the Convos admin.")+"";return{c:function(){e=tn("p"),t=rn(r),sn(e,"class","help"),sn(e,"slot","help")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){4&e&&r!==(r=n[2]("This email can be used by users to get in touch with the Convos admin.")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Rs(n){var e;return{c:function(){e=on()},m:function(n,t){X(n,e,t)},p:A,d:function(n){n&&nn(e)}}}function As(n){var e,t,r=n[2]("Video service")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){4&e&&r!==(r=n[2]("Video service")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function js(n){var e,t=n[3]("This should point to a [%1](%2) instance.","https://meet.jit.si/","https://github.com/jitsi/jitsi-meet")+"";return{c:function(){sn(e=tn("p"),"class","help"),sn(e,"slot","help")},m:function(n,r){X(n,e,r),e.innerHTML=t},p:function(n,r){8&r&&t!==(t=n[3]("This should point to a [%1](%2) instance.","https://meet.jit.si/","https://github.com/jitsi/jitsi-meet")+"")&&(e.innerHTML=t)},d:function(n){n&&nn(e)}}}function Ts(n){var e;return{c:function(){e=on()},m:function(n,t){X(n,e,t)},p:A,d:function(n){n&&nn(e)}}}function Ls(n){var e,t,r=n[2]("Registration is open to public")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){4&e&&r!==(r=n[2]("Registration is open to public")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Ps(n){var e,t,r=n[2]("Save settings")+"";return{c:function(){e=tn("span"),t=rn(r)},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){4&e&&r!==(r=n[2]("Save settings")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Ms(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,$,y,b,w,_,k,x,E,O,S,C=n[2]("Disk usage")+"",N=n[1].blocks_pct+"",R=n[2]("Disk usage")+"",A=n[1].blocks_used+"",j=n[1].blocks_total+"",T=n[1].inodes_pct+"",L=n[2]("Inode usage")+"",P=n[1].inodes_used+"",M=n[1].inodes_total+"";return{c:function(){e=tn("div"),t=tn("h2"),r=rn(C),o=on(),i=tn("div"),a=tn("div"),c=rn(N),u=rn("%"),s=on(),f=tn("p"),l=rn(R),d=rn(": "),p=rn(A),h=rn(" / "),m=rn(j),v=on(),g=tn("div"),$=tn("div"),y=rn(T),b=rn("%"),w=on(),_=tn("p"),k=rn(L),x=rn(": "),E=rn(P),O=rn(" / "),S=rn(M),sn(a,"class","progress__bar"),pn(a,"width",n[1].blocks_pct+"%"),sn(i,"class","progress"),sn(f,"class","help"),sn($,"class","progress__bar"),pn($,"width",n[1].inodes_pct+"%"),sn(g,"class","progress"),sn(_,"class","help"),sn(e,"id","disk-usage")},m:function(n,C){X(n,e,C),Z(e,t),Z(t,r),Z(e,o),Z(e,i),Z(i,a),Z(a,c),Z(a,u),Z(e,s),Z(e,f),Z(f,l),Z(f,d),Z(f,p),Z(f,h),Z(f,m),Z(e,v),Z(e,g),Z(g,$),Z($,y),Z($,b),Z(e,w),Z(e,_),Z(_,k),Z(_,x),Z(_,E),Z(_,O),Z(_,S)},p:function(n,e){4&e&&C!==(C=n[2]("Disk usage")+"")&&ln(r,C),2&e&&N!==(N=n[1].blocks_pct+"")&&ln(c,N),2&e&&pn(a,"width",n[1].blocks_pct+"%"),4&e&&R!==(R=n[2]("Disk usage")+"")&&ln(l,R),2&e&&A!==(A=n[1].blocks_used+"")&&ln(p,A),2&e&&j!==(j=n[1].blocks_total+"")&&ln(m,j),2&e&&T!==(T=n[1].inodes_pct+"")&&ln(y,T),2&e&&pn($,"width",n[1].inodes_pct+"%"),4&e&&L!==(L=n[2]("Inode usage")+"")&&ln(k,L),2&e&&P!==(P=n[1].inodes_used+"")&&ln(E,P),2&e&&M!==(M=n[1].inodes_total+"")&&ln(S,M)},d:function(n){n&&nn(e)}}}function Ds(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,y,b,w,_,k,x,E,O,S,C,N,R,A,j,T,L,P,M=n[2]("Convos settings")+"",D=n[3]("These settings control what users experience when they visit [%1](%1).",xe("base_url"))+"",B=n[2]("Tick this box if you want users to be able to register without an invite URL.")+"";function I(e){n[7](e)}e=new Dr({props:{$$slots:{default:[ws]},$$scope:{ctx:n}}});var U={name:"organization_name",$$slots:{default:[xs],help:[ks],label:[_s]},$$scope:{ctx:n}};function H(e){n[8](e)}void 0!==n[0].organization_name&&(U.value=n[0].organization_name),f=new Oi({props:U}),jn.push((function(){return ee(f,"value",I)}));var q={name:"organization_url",placeholder:n[2]("https://convos.chat"),$$slots:{default:[Ss],help:[Os],label:[Es]},$$scope:{ctx:n}};function z(e){n[9](e)}void 0!==n[0].organization_url&&(q.value=n[0].organization_url),p=new Oi({props:q}),jn.push((function(){return ee(p,"value",H)}));var F={name:"contact",placeholder:n[2]("Ex: jhthorsen@cpan.org"),$$slots:{default:[Rs],help:[Ns],label:[Cs]},$$scope:{ctx:n}};function K(e){n[10](e)}void 0!==n[0].contact&&(F.value=n[0].contact),v=new Oi({props:F}),jn.push((function(){return ee(v,"value",z)}));var W={name:"video_service",placeholder:n[2]("Ex: https://meet.jit.si/"),$$slots:{default:[Ts],help:[js],label:[As]},$$scope:{ctx:n}};void 0!==n[0].video_service&&(W.value=n[0].video_service),b=new Oi({props:W}),jn.push((function(){return ee(b,"value",K)})),k=new gi({props:{name:"open_to_public",checked:n[0].open_to_public,$$slots:{label:[Ls]},$$scope:{ctx:n}}}),N=new jr({props:{icon:"save",op:n[4],$$slots:{default:[Ps]},$$scope:{ctx:n}}}),A=new Ti({props:{op:n[4]}});var G=n[1]&&Ms(n);return{c:function(){te(e.$$.fragment),t=on(),r=tn("main"),o=tn("form"),i=tn("h2"),a=rn(M),c=on(),u=tn("p"),s=on(),te(f.$$.fragment),d=on(),te(p.$$.fragment),m=on(),te(v.$$.fragment),y=on(),te(b.$$.fragment),_=on(),te(k.$$.fragment),x=on(),E=tn("p"),O=rn(B),S=on(),C=tn("div"),te(N.$$.fragment),R=on(),te(A.$$.fragment),j=on(),G&&G.c(),sn(E,"class","help"),sn(C,"class","form-actions"),sn(o,"id","convos-settings"),sn(o,"method","post"),sn(r,"class","main")},m:function(l,h){re(e,l,h),X(l,t,h),X(l,r,h),Z(r,o),Z(o,i),Z(i,a),Z(o,c),Z(o,u),u.innerHTML=D,Z(o,s),re(f,o,null),Z(o,d),re(p,o,null),Z(o,m),re(v,o,null),Z(o,y),re(b,o,null),Z(o,_),re(k,o,null),Z(o,x),Z(o,E),Z(E,O),Z(o,S),Z(o,C),re(N,C,null),Z(o,R),re(A,o,null),Z(r,j),G&&G.m(r,null),T=!0,L||(P=cn(o,"submit",un(n[5])),L=!0)},p:function(n,t){var o=$(t,1)[0],i={};32772&o&&(i.$$scope={dirty:o,ctx:n}),e.$set(i),(!T||4&o)&&M!==(M=n[2]("Convos settings")+"")&&ln(a,M),(!T||8&o)&&D!==(D=n[3]("These settings control what users experience when they visit [%1](%1).",xe("base_url"))+"")&&(u.innerHTML=D);var c={};32772&o&&(c.$$scope={dirty:o,ctx:n}),!l&&1&o&&(l=!0,c.value=n[0].organization_name,Bn((function(){return l=!1}))),f.$set(c);var s={};4&o&&(s.placeholder=n[2]("https://convos.chat")),32772&o&&(s.$$scope={dirty:o,ctx:n}),!h&&1&o&&(h=!0,s.value=n[0].organization_url,Bn((function(){return h=!1}))),p.$set(s);var d={};4&o&&(d.placeholder=n[2]("Ex: jhthorsen@cpan.org")),32772&o&&(d.$$scope={dirty:o,ctx:n}),!g&&1&o&&(g=!0,d.value=n[0].contact,Bn((function(){return g=!1}))),v.$set(d);var m={};4&o&&(m.placeholder=n[2]("Ex: https://meet.jit.si/")),32780&o&&(m.$$scope={dirty:o,ctx:n}),!w&&1&o&&(w=!0,m.value=n[0].video_service,Bn((function(){return w=!1}))),b.$set(m);var y={};1&o&&(y.checked=n[0].open_to_public),32772&o&&(y.$$scope={dirty:o,ctx:n}),k.$set(y),(!T||4&o)&&B!==(B=n[2]("Tick this box if you want users to be able to register without an invite URL.")+"")&&ln(O,B);var _={};32772&o&&(_.$$scope={dirty:o,ctx:n}),N.$set(_),n[1]?G?G.p(n,o):((G=Ms(n)).c(),G.m(r,null)):G&&(G.d(1),G=null)},i:function(n){T||(Vn(e.$$.fragment,n),Vn(f.$$.fragment,n),Vn(p.$$.fragment,n),Vn(v.$$.fragment,n),Vn(b.$$.fragment,n),Vn(k.$$.fragment,n),Vn(N.$$.fragment,n),Vn(A.$$.fragment,n),T=!0)},o:function(n){Jn(e.$$.fragment,n),Jn(f.$$.fragment,n),Jn(p.$$.fragment,n),Jn(v.$$.fragment,n),Jn(b.$$.fragment,n),Jn(k.$$.fragment,n),Jn(N.$$.fragment,n),Jn(A.$$.fragment,n),T=!1},d:function(n){oe(e,n),n&&nn(t),n&&nn(r),oe(f),oe(p),oe(v),oe(b),oe(k),oe(N),oe(A),G&&G.d(),L=!1,P()}}}function Bs(n,e,t){var r,o,i;U(n,bt,(function(n){return t(2,o=n)})),U(n,wt,(function(n){return t(3,i=n)}));var a=Nn("api"),c=Nn("user"),u=a("getSettings"),s=a("updateSettings"),l={};return s.on("start",(function(n){n.body.contact&&(n.body.contact="mailto:"+n.body.contact),n.body.open_to_public=!!n.body.open_to_public,xe("contact",n.body.contact),xe("open_to_public",n.body.open_to_public),xe("organization_name",n.body.organization_name),xe("organization_url",n.body.organization_url),c.update({videoService:n.body.video_service})})),On(d(f.mark((function n(){var e;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.perform();case 2:(e=u.res.body).contact=e.contact.replace(/mailto:/,""),t(0,l=e);case 5:case"end":return n.stop()}}),n)})))),n.$$.update=function(){1&n.$$.dirty&&t(1,r=function(n){if(!n)return null;var e=n.block_size||1024;return{blocks_pct:Math.ceil(n.blocks_used/n.blocks_total*100),blocks_total:$e(e*n.blocks_total,"B"),blocks_used:$e(e*n.blocks_used,"B"),inodes_pct:Math.ceil(n.inodes_used/n.inodes_total*100),inodes_total:$e(n.inodes_total),inodes_used:$e(n.inodes_used)}}(l.disk_usage))},[l,r,o,i,s,function(n){s.perform(n.target)},"Global settings",function(e){n.$$.not_equal(l.organization_name,e)&&(l.organization_name=e,t(0,l))},function(e){n.$$.not_equal(l.organization_url,e)&&(l.organization_url=e,t(0,l))},function(e){n.$$.not_equal(l.contact,e)&&(l.contact=e,t(0,l))},function(e){n.$$.not_equal(l.video_service,e)&&(l.video_service=e,t(0,l))}]}var Is=function(n){a(o,n);var e=bs(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,Bs,Ds,D,{title:6}),i}return R(o,[{key:"title",get:function(){return this.$$.ctx[6]}}]),o}(ce);function Us(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}function Hs(n,e,t){var r=n.slice();return r[14]=e[t],r}function qs(n){var e,t,r;return e=new Cr({props:{name:"list"}}),t=new Cr({props:{name:"times"}}),{c:function(){te(e.$$.fragment),te(t.$$.fragment)},m:function(n,o){re(e,n,o),re(t,n,o),r=!0},p:A,i:function(n){r||(Vn(e.$$.fragment,n),Vn(t.$$.fragment,n),r=!0)},o:function(n){Jn(e.$$.fragment,n),Jn(t.$$.fragment,n),r=!1},d:function(n){oe(e,n),oe(t,n)}}}function zs(n){var e,t,r,o,i,a=n[4](n[1]?"Account":"Users")+"";return o=new xo({props:{href:"/settings/users",class:"btn-hallow "+(n[1]?"is-active":""),"data-tooltip":n[4]("See all users"),$$slots:{default:[qs]},$$scope:{ctx:n}}}),{c:function(){e=tn("h1"),t=rn(a),r=on(),te(o.$$.fragment)},m:function(n,a){X(n,e,a),Z(e,t),X(n,r,a),re(o,n,a),i=!0},p:function(n,e){(!i||18&e)&&a!==(a=n[4](n[1]?"Account":"Users")+"")&&ln(t,a);var r={};2&e&&(r.class="btn-hallow "+(n[1]?"is-active":"")),16&e&&(r["data-tooltip"]=n[4]("See all users")),8388608&e&&(r.$$scope={dirty:e,ctx:n}),o.$set(r)},i:function(n){i||(Vn(o.$$.fragment,n),i=!0)},o:function(n){Jn(o.$$.fragment,n),i=!1},d:function(n){n&&nn(e),n&&nn(r),oe(o,n)}}}function Fs(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,$,y,b,w,_,k,x,E,O,S,C,N,R,A,j,T,L,P,M,D,B,I=n[4]("Invite or recover password")+"",U=n[4]("Users")+"",H=n[0].length+"",q=n[4]("Email")+"",z=n[4]("Roles")+"",F=n[4]("Registered")+"";i=new Oi({props:{type:"email",name:"email",placeholder:n[4]("user@example.com"),$$slots:{default:[Ys],help:[Gs],label:[Ws]},$$scope:{ctx:n}}});var K=n[3].url&&Vs(n);s=new jr({props:{icon:"save",op:n[8],$$slots:{default:[Js]},$$scope:{ctx:n}}}),l=new Ti({props:{op:n[8],success:"Link generated."}}),w=new Ti({props:{op:n[7],progress:!0}});for(var W=n[0],G=[],Y=0;Y<W.length;Y+=1)G[Y]=Qs(Hs(n,W,Y));return{c:function(){e=tn("form"),t=tn("h2"),r=rn(I),o=on(),te(i.$$.fragment),a=on(),K&&K.c(),c=on(),u=tn("div"),te(s.$$.fragment),f=on(),te(l.$$.fragment),d=on(),p=tn("h2"),h=rn(U),m=on(),v=tn("small"),g=rn("("),$=rn(H),y=rn(")"),b=on(),te(w.$$.fragment),_=on(),k=tn("table"),x=tn("thead"),E=tn("tr"),O=tn("th"),S=rn(q),C=on(),N=tn("th"),R=rn(z),A=on(),j=tn("th"),T=rn(F),L=on(),P=tn("tbody");for(var n=0;n<G.length;n+=1)G[n].c();sn(u,"class","form-actions"),sn(e,"id","invite"),sn(e,"method","post")},m:function(I,U){X(I,e,U),Z(e,t),Z(t,r),Z(e,o),re(i,e,null),Z(e,a),K&&K.m(e,null),Z(e,c),Z(e,u),re(s,u,null),Z(e,f),re(l,e,null),X(I,d,U),X(I,p,U),Z(p,h),Z(p,m),Z(p,v),Z(v,g),Z(v,$),Z(v,y),X(I,b,U),re(w,I,U),X(I,_,U),X(I,k,U),Z(k,x),Z(x,E),Z(E,O),Z(O,S),Z(E,C),Z(E,N),Z(N,R),Z(E,A),Z(E,j),Z(j,T),Z(k,L),Z(k,P);for(var H=0;H<G.length;H+=1)G[H].m(P,null);M=!0,D||(B=cn(e,"submit",un(n[12])),D=!0)},p:function(n,t){(!M||16&t)&&I!==(I=n[4]("Invite or recover password")+"")&&ln(r,I);var o={};16&t&&(o.placeholder=n[4]("user@example.com")),8388624&t&&(o.$$scope={dirty:t,ctx:n}),i.$set(o),n[3].url?K?K.p(n,t):((K=Vs(n)).c(),K.m(e,c)):K&&(K.d(1),K=null);var a={};if(8388624&t&&(a.$$scope={dirty:t,ctx:n}),s.$set(a),(!M||16&t)&&U!==(U=n[4]("Users")+"")&&ln(h,U),(!M||1&t)&&H!==(H=n[0].length+"")&&ln($,H),(!M||16&t)&&q!==(q=n[4]("Email")+"")&&ln(S,q),(!M||16&t)&&z!==(z=n[4]("Roles")+"")&&ln(R,z),(!M||16&t)&&F!==(F=n[4]("Registered")+"")&&ln(T,F),1&t){var u;for(W=n[0],u=0;u<W.length;u+=1){var f=Hs(n,W,u);G[u]?G[u].p(f,t):(G[u]=Qs(f),G[u].c(),G[u].m(P,null))}for(;u<G.length;u+=1)G[u].d(1);G.length=W.length}},i:function(n){M||(Vn(i.$$.fragment,n),Vn(s.$$.fragment,n),Vn(l.$$.fragment,n),Vn(w.$$.fragment,n),M=!0)},o:function(n){Jn(i.$$.fragment,n),Jn(s.$$.fragment,n),Jn(l.$$.fragment,n),Jn(w.$$.fragment,n),M=!1},d:function(n){n&&nn(e),oe(i),K&&K.d(),oe(s),oe(l),n&&nn(d),n&&nn(p),n&&nn(b),oe(w,n),n&&nn(_),n&&nn(k),en(G,n),D=!1,B()}}}function Ks(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,$,y,b,w,_,k,x,E,O,S,C,N=n[4]("This will permanently remove user settings, chat logs, uploaded files and other user related data.")+"",R=n[5]("Please confirm by entering **%1** before hitting **%2**.",n[1].email,n[4]("Delete user"))+"";function A(e){n[18](e)}t=new Oi({props:{name:"email",value:n[1].email,readonly:!0,$$slots:{label:[Zs]},$$scope:{ctx:n}}}),o=new Oi({props:{name:"roles",value:n[1].roles.join(", "),placeholder:n[4]("admin, bot, ..."),$$slots:{default:[ef],help:[nf],label:[Xs]},$$scope:{ctx:n}}}),c=new jr({props:{icon:"save",op:n[9],$$slots:{default:[tf]},$$scope:{ctx:n}}}),s=new Ti({props:{op:n[9]}});var j={name:"email",$$slots:{label:[rf]},$$scope:{ctx:n}};return void 0!==n[2]&&(j.value=n[2]),y=new Oi({props:j}),jn.push((function(){return ee(y,"value",A)})),k=new jr({props:{icon:"trash",op:n[6],disabled:n[2]!=n[1].email,$$slots:{default:[of]},$$scope:{ctx:n}}}),E=new Ti({props:{op:n[6],success:"Deleted."}}),{c:function(){e=tn("form"),te(t.$$.fragment),r=on(),te(o.$$.fragment),i=on(),a=tn("div"),te(c.$$.fragment),u=on(),te(s.$$.fragment),f=on(),(l=tn("h2")).textContent="Delete account",d=on(),p=tn("form"),h=tn("p"),m=rn(N),v=on(),$=on(),te(y.$$.fragment),w=on(),_=tn("div"),te(k.$$.fragment),x=on(),te(E.$$.fragment),sn(a,"class","form-actions"),sn(e,"id","edit"),sn(e,"method","post"),g=new $n(null),sn(_,"class","form-actions"),sn(p,"id","delete"),sn(p,"method","post")},m:function(b,N){X(b,e,N),re(t,e,null),Z(e,r),re(o,e,null),Z(e,i),Z(e,a),re(c,a,null),Z(e,u),re(s,e,null),X(b,f,N),X(b,l,N),X(b,d,N),X(b,p,N),Z(p,h),Z(h,m),Z(h,v),g.m(R,h),Z(p,$),re(y,p,null),Z(p,w),Z(p,_),re(k,_,null),Z(p,x),re(E,p,null),O=!0,S||(C=[cn(e,"submit",un(n[13])),cn(p,"submit",un(n[11]))],S=!0)},p:function(n,e){var r={};2&e&&(r.value=n[1].email),8388624&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r);var i={};2&e&&(i.value=n[1].roles.join(", ")),16&e&&(i.placeholder=n[4]("admin, bot, ...")),8388624&e&&(i.$$scope={dirty:e,ctx:n}),o.$set(i);var a={};8388624&e&&(a.$$scope={dirty:e,ctx:n}),c.$set(a),(!O||16&e)&&N!==(N=n[4]("This will permanently remove user settings, chat logs, uploaded files and other user related data.")+"")&&ln(m,N),(!O||50&e)&&R!==(R=n[5]("Please confirm by entering **%1** before hitting **%2**.",n[1].email,n[4]("Delete user"))+"")&&g.p(R);var u={};8388624&e&&(u.$$scope={dirty:e,ctx:n}),!b&&4&e&&(b=!0,u.value=n[2],Bn((function(){return b=!1}))),y.$set(u);var s={};6&e&&(s.disabled=n[2]!=n[1].email),8388624&e&&(s.$$scope={dirty:e,ctx:n}),k.$set(s)},i:function(n){O||(Vn(t.$$.fragment,n),Vn(o.$$.fragment,n),Vn(c.$$.fragment,n),Vn(s.$$.fragment,n),Vn(y.$$.fragment,n),Vn(k.$$.fragment,n),Vn(E.$$.fragment,n),O=!0)},o:function(n){Jn(t.$$.fragment,n),Jn(o.$$.fragment,n),Jn(c.$$.fragment,n),Jn(s.$$.fragment,n),Jn(y.$$.fragment,n),Jn(k.$$.fragment,n),Jn(E.$$.fragment,n),O=!1},d:function(n){n&&nn(e),oe(t),oe(o),oe(c),oe(s),n&&nn(f),n&&nn(l),n&&nn(d),n&&nn(p),oe(y),oe(k),oe(E),S=!1,P(C)}}}function Ws(n){var e,t,r=n[4]("User email")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){16&e&&r!==(r=n[4]("User email")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Gs(n){var e,t,r=n[4]("Using this form, you can generate a forgotten password or invite link for a user.")+"";return{c:function(){e=tn("p"),t=rn(r),sn(e,"class","help"),sn(e,"slot","help")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){16&e&&r!==(r=n[4]("Using this form, you can generate a forgotten password or invite link for a user.")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Ys(n){var e;return{c:function(){e=on()},m:function(n,t){X(n,e,t)},p:A,d:function(n){n&&nn(e)}}}function Vs(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,$=n[4]("A link was generated")+"",y=n[5](n[3].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"",b=n[5]("The link is valid until **%1**.",new Date(n[3].expires).toLocaleString())+"",w=n[3].url+"",_=n[4]("Tip: Clicking on the link will copy it to your clipboard.")+"";return{c:function(){e=tn("h3"),t=rn($),r=on(),o=tn("p"),a=on(),u=on(),s=tn("a"),f=rn(w),d=on(),p=tn("p"),h=tn("small"),m=rn(_),i=new $n(a),c=new $n(null),sn(s,"href",l=n[3].url)},m:function(l,$){X(l,e,$),Z(e,t),X(l,r,$),X(l,o,$),i.m(y,o),Z(o,a),c.m(b,o),X(l,u,$),X(l,s,$),Z(s,f),X(l,d,$),X(l,p,$),Z(p,h),Z(h,m),v||(g=cn(s,"click",un(n[10])),v=!0)},p:function(n,e){16&e&&$!==($=n[4]("A link was generated")+"")&&ln(t,$),40&e&&y!==(y=n[5](n[3].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"")&&i.p(y),40&e&&b!==(b=n[5]("The link is valid until **%1**.",new Date(n[3].expires).toLocaleString())+"")&&c.p(b),8&e&&w!==(w=n[3].url+"")&&ln(f,w),8&e&&l!==(l=n[3].url)&&sn(s,"href",l),16&e&&_!==(_=n[4]("Tip: Clicking on the link will copy it to your clipboard.")+"")&&ln(m,_)},d:function(n){n&&nn(e),n&&nn(r),n&&nn(o),n&&nn(u),n&&nn(s),n&&nn(d),n&&nn(p),v=!1,g()}}}function Js(n){var e,t,r=n[4]("Generate link")+"";return{c:function(){e=tn("span"),t=rn(r)},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){16&e&&r!==(r=n[4]("Generate link")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Qs(n){var e,t,r,o,i,a,c,u,s,f,l,d,p=n[14].email+"",h=n[14].roles.join(", ")+"",m=new Fe(n[14].registered).getHumanDate({year:!0})+"";return{c:function(){e=tn("tr"),t=tn("td"),r=tn("a"),o=rn(p),a=on(),c=tn("td"),u=rn(h),s=on(),f=tn("td"),l=rn(m),d=on(),sn(r,"href",i="#"+n[14].uid)},m:function(n,i){X(n,e,i),Z(e,t),Z(t,r),Z(r,o),Z(e,a),Z(e,c),Z(c,u),Z(e,s),Z(e,f),Z(f,l),Z(e,d)},p:function(n,e){1&e&&p!==(p=n[14].email+"")&&ln(o,p),1&e&&i!==(i="#"+n[14].uid)&&sn(r,"href",i),1&e&&h!==(h=n[14].roles.join(", ")+"")&&ln(u,h),1&e&&m!==(m=new Fe(n[14].registered).getHumanDate({year:!0})+"")&&ln(l,m)},d:function(n){n&&nn(e)}}}function Zs(n){var e,t,r=n[4]("Email")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){16&e&&r!==(r=n[4]("Email")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Xs(n){var e,t,r=n[4]("Roles")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){16&e&&r!==(r=n[4]("Roles")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function nf(n){var e,t,r=n[4]("Roles must be separated by comma.")+"";return{c:function(){e=tn("p"),t=rn(r),sn(e,"class","help"),sn(e,"slot","help")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){16&e&&r!==(r=n[4]("Roles must be separated by comma.")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function ef(n){var e;return{c:function(){e=on()},m:function(n,t){X(n,e,t)},p:A,d:function(n){n&&nn(e)}}}function tf(n){var e,t,r=n[4]("Save user")+"";return{c:function(){e=tn("span"),t=rn(r)},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){16&e&&r!==(r=n[4]("Save user")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function rf(n){var e,t,r=n[4]("Confirm email")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){16&e&&r!==(r=n[4]("Confirm email")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function of(n){var e,t,r=n[4]("Delete user")+"";return{c:function(){e=tn("span"),t=rn(r)},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){16&e&&r!==(r=n[4]("Delete user")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function af(n){var e,t,r,o,i,a;e=new Dr({props:{$$slots:{default:[zs]},$$scope:{ctx:n}}});var c=[Ks,Fs],u=[];function s(n,e){return n[1]?0:1}return o=s(n),i=u[o]=c[o](n),{c:function(){te(e.$$.fragment),t=on(),r=tn("main"),i.c(),sn(r,"class","main")},m:function(n,i){re(e,n,i),X(n,t,i),X(n,r,i),u[o].m(r,null),a=!0},p:function(n,t){var a=$(t,1)[0],f={};8388626&a&&(f.$$scope={dirty:a,ctx:n}),e.$set(f);var l=o;(o=s(n))===l?u[o].p(n,a):(Gn(),Jn(u[l],1,1,(function(){u[l]=null})),Yn(),(i=u[o])?i.p(n,a):(i=u[o]=c[o](n)).c(),Vn(i,1),i.m(r,null))},i:function(n){a||(Vn(e.$$.fragment,n),Vn(i),a=!0)},o:function(n){Jn(e.$$.fragment,n),Jn(i),a=!1},d:function(n){oe(e,n),n&&nn(t),n&&nn(r),u[o].d()}}}function cf(n,e,t){var r,o,i,a,c,u;U(n,pt,(function(n){return t(16,i=n)})),U(n,bt,(function(n){return t(4,c=n)})),U(n,wt,(function(n){return t(5,u=n)}));var s=e.title,l=void 0===s?"Users":s,p=Nn("api"),h=Nn("user"),m=p("deleteUser"),v=p("getUsers"),g=p("inviteUser");U(n,g,(function(n){return t(17,a=n)}));var $=p("updateUser"),y="",b=[];function w(){return(w=d(f.mark((function n(e){return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.preventDefault(),m.reset(),$.reset(),y==r.email){n.next=5;break}return n.abrupt("return");case 5:return n.next=7,m.perform(e.target);case 7:if(m.is("success")){n.next=9;break}return n.abrupt("return");case 9:return n.next=11,v.perform();case 11:pt.go("/settings/users",{replace:!0});case 12:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return $.on("start",(function(n){t(1,r.roles=n.body.roles.split(/[.,\s]+/).map((function(n){return n.trim()})),r),n.body.roles=r.roles})),On(d(f.mark((function n(){return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.perform();case 2:t(0,b=v.res.body.users||[]);case 3:case"end":return n.stop()}}),n)})))),n.$$set=function(n){"title"in n&&t(15,l=n.title)},n.$$.update=function(){65537&n.$$.dirty&&t(1,r=function(n,e){var r=n.hash;return t(2,y=""),e.filter((function(n){return n.uid==r}))[0]}(i,b)),131072&n.$$.dirty&&t(3,o=a.res.body||{}),2&n.$$.dirty&&t(15,l=r?r.email:"Users")},[b,r,y,o,c,u,m,v,g,$,function(n){var e=function(n){var e=document.createElement("textarea");e.value=n.textContent||n.value,e.style.opacity=0,e.style.position="absolute",document.body.appendChild(e);try{e.focus(),e.select(),document.execCommand("copy")}catch(n){e.value="",console.log("copyToClipboard() failed:",n)}return document.body.removeChild(e),e.value}(n.target);e&&Gt.showInApp(e,{title:c("Invite link copied")})},function(n){return w.apply(this,arguments)},function(n){g.perform(n.target)},function(n){m.reset(),$.perform(n.target)},h,l,i,a,function(n){t(2,y=n)}]}var uf=function(n){a(o,n);var e=Us(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,cf,af,D,{title:15}),i}return o}(ce);function sf(n){return function(e){for(var t=document.querySelectorAll(".js-remove"),r=0;r<t.length;r++)t[r].remove();var o=-1==[Qc,Ru].indexOf(n);e.update({component:n,requireLogin:o}),o&&e.update({lastUrl:location.href})}}function ff(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}function lf(n){var e,t,r=n[4]("Currently connecting to %1.",n[3])+"";return{c:function(){e=tn("p"),t=rn(r)},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){24&e&&r!==(r=n[4]("Currently connecting to %1.",n[3])+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function df(n){var e,t,r=n[4]("Currently connected to %1.",n[3])+"";return{c:function(){e=tn("p"),t=rn(r)},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){24&e&&r!==(r=n[4]("Currently connected to %1.",n[3])+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function pf(n){var e,t,r=n[4]("Currently disconnected from %1.",n[3])+"";return{c:function(){e=tn("p"),t=rn(r)},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){24&e&&r!==(r=n[4]("Currently disconnected from %1.",n[3])+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function hf(n){var e,t,r=n[4]("Connection not found.")+"";return{c:function(){e=tn("p"),t=rn(r)},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){16&e&&r!==(r=n[4]("Connection not found.")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function mf(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m=n[4]("Connection")+"";function v(n,e){return n[2].url?"disconnected"==n[2].state?pf:"connected"==n[2].state?df:lf:hf}c=new Cr({props:{name:"times"}});var g=v(n),y=g(n);return f=new sc({props:{id:n[0].connection_id}}),{c:function(){e=tn("div"),t=tn("div"),r=tn("h2"),o=rn(m),i=on(),a=tn("a"),te(c.$$.fragment),u=on(),y.c(),s=on(),te(f.$$.fragment),sn(a,"href","#settings"),sn(a,"class","btn-hallow is-active"),sn(t,"class","sidebar-header"),sn(e,"class","sidebar-left")},m:function(n,l){X(n,e,l),Z(e,t),Z(t,r),Z(r,o),Z(t,i),Z(t,a),re(c,a,null),Z(e,u),y.m(e,null),Z(e,s),re(f,e,null),d=!0,p||(h=cn(a,"click",st.toggle),p=!0)},p:function(t,r){var i=$(r,1)[0];n=t,(!d||16&i)&&m!==(m=n[4]("Connection")+"")&&ln(o,m),g===(g=v(n))&&y?y.p(n,i):(y.d(1),(y=g(n))&&(y.c(),y.m(e,s)));var a={};1&i&&(a.id=n[0].connection_id),f.$set(a)},i:function(t){d||(Vn(c.$$.fragment,t),Vn(f.$$.fragment,t),Dn((function(){l||(l=Zn(e,$r,n[1],!0)),l.run(1)})),d=!0)},o:function(t){Jn(c.$$.fragment,t),Jn(f.$$.fragment,t),l||(l=Zn(e,$r,n[1],!1)),l.run(0),d=!1},d:function(n){n&&nn(e),oe(c),y.d(),oe(f),n&&l&&l.end(),p=!1,h()}}}function vf(n,e,t){var r,o;U(n,bt,(function(n){return t(4,o=n)}));var i=e.conversation,a=void 0===i?{}:i,c=e.transition,u=Nn("user"),s={};return On(d(f.mark((function n(){return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t(2,s=u.findConversation({connection_id:a.connection_id})||{});case 1:case"end":return n.stop()}}),n)})))),n.$$set=function(n){"conversation"in n&&t(0,a=n.conversation),"transition"in n&&t(1,c=n.transition)},n.$$.update=function(){4&n.$$.dirty&&t(3,r=s.real_host||s.url&&s.url.host)},[a,c,s,r,o]}var gf=function(n){a(o,n);var e=ff(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,vf,mf,D,{conversation:0,transition:1}),i}return o}(ce);function $f(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}function yf(n,e,t){var r=n.slice();return r[21]=e[t],r}function bf(n){var e,t=n[8]("You are not a channel operator in %1.",n[0].name)+"";return{c:function(){e=rn(t)},m:function(n,t){X(n,e,t)},p:function(n,r){257&r&&t!==(t=n[8]("You are not a channel operator in %1.",n[0].name)+"")&&ln(e,t)},d:function(n){n&&nn(e)}}}function wf(n){var e,t=n[8]("You are channel operator in %1.",n[0].name)+"";return{c:function(){e=rn(t)},m:function(n,t){X(n,e,t)},p:function(n,r){257&r&&t!==(t=n[8]("You are channel operator in %1.",n[0].name)+"")&&ln(e,t)},d:function(n){n&&nn(e)}}}function _f(n){var e,t=n[8]("Private conversation with %1.",n[0].name)+"";return{c:function(){e=rn(t)},m:function(n,t){X(n,e,t)},p:function(n,r){257&r&&t!==(t=n[8]("Private conversation with %1.",n[0].name)+"")&&ln(e,t)},d:function(n){n&&nn(e)}}}function kf(n){var e,t=n[8]("Conversation with %1 is frozen. Reason: %2",n[0].name,n[8](n[0].frozen))+"";return{c:function(){e=rn(t)},m:function(n,t){X(n,e,t)},p:function(n,r){257&r&&t!==(t=n[8]("Conversation with %1 is frozen. Reason: %2",n[0].name,n[8](n[0].frozen))+"")&&ln(e,t)},d:function(n){n&&nn(e)}}}function xf(n){var e,t,r,o,i,a,c,u,s,f,l,d,p=[Of,Ef],h=[];function m(n,e){return n[6]?0:1}function v(e){n[15](e)}c=m(n),u=h[c]=p[c](n);var g={type:"password",name:"password",readonly:!n[0].is("locked")&&!n[6],$$slots:{label:[Cf]},$$scope:{ctx:n}};return void 0!==n[4]&&(g.value=n[4]),f=new Oi({props:g}),jn.push((function(){return ee(f,"value",v)})),{c:function(){e=tn("input"),r=on(),o=tn("input"),a=on(),u.c(),s=on(),te(f.$$.fragment),sn(e,"type","hidden"),sn(e,"name","connection_id"),e.value=t=n[0].connection_id,sn(o,"type","hidden"),sn(o,"name","conversation_id"),o.value=i=n[0].conversation_id},m:function(n,t){X(n,e,t),X(n,r,t),X(n,o,t),X(n,a,t),h[c].m(n,t),X(n,s,t),re(f,n,t),d=!0},p:function(n,r){(!d||1&r&&t!==(t=n[0].connection_id))&&(e.value=t),(!d||1&r&&i!==(i=n[0].conversation_id))&&(o.value=i);var a=c;(c=m(n))===a?h[c].p(n,r):(Gn(),Jn(h[a],1,1,(function(){h[a]=null})),Yn(),(u=h[c])?u.p(n,r):(u=h[c]=p[c](n)).c(),Vn(u,1),u.m(s.parentNode,s));var v={};65&r&&(v.readonly=!n[0].is("locked")&&!n[6]),16777472&r&&(v.$$scope={dirty:r,ctx:n}),!l&&16&r&&(l=!0,v.value=n[4],Bn((function(){return l=!1}))),f.$set(v)},i:function(n){d||(Vn(u),Vn(f.$$.fragment,n),d=!0)},o:function(n){Jn(u),Jn(f.$$.fragment,n),d=!1},d:function(n){n&&nn(e),n&&nn(r),n&&nn(o),n&&nn(a),h[c].d(n),n&&nn(s),oe(f,n)}}}function Ef(n){var e,t,r,o,i,a=n[8]("Topic")+"",c=n[9](n[5]||"No topic is set.")+"";return{c:function(){e=tn("div"),t=tn("label"),r=rn(a),o=on(),i=tn("div"),sn(t,"for","nothing"),sn(i,"class","input"),sn(e,"class","text-field")},m:function(n,a){X(n,e,a),Z(e,t),Z(t,r),Z(e,o),Z(e,i),i.innerHTML=c},p:function(n,e){256&e&&a!==(a=n[8]("Topic")+"")&&ln(r,a),544&e&&c!==(c=n[9](n[5]||"No topic is set.")+"")&&(i.innerHTML=c)},i:A,o:A,d:function(n){n&&nn(e)}}}function Of(n){var e,t,r;function o(e){n[14](e)}var i={name:"topic",placeholder:n[8]("No topic is set."),$$slots:{label:[Sf]},$$scope:{ctx:n}};return void 0!==n[5]&&(i.value=n[5]),e=new Aa({props:i}),jn.push((function(){return ee(e,"value",o)})),{c:function(){te(e.$$.fragment)},m:function(n,t){re(e,n,t),r=!0},p:function(n,r){var o={};256&r&&(o.placeholder=n[8]("No topic is set.")),16777472&r&&(o.$$scope={dirty:r,ctx:n}),!t&&32&r&&(t=!0,o.value=n[5],Bn((function(){return t=!1}))),e.$set(o)},i:function(n){r||(Vn(e.$$.fragment,n),r=!0)},o:function(n){Jn(e.$$.fragment,n),r=!1},d:function(n){oe(e,n)}}}function Sf(n){var e,t,r=n[8]("Topic")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){256&e&&r!==(r=n[8]("Topic")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Cf(n){var e,t,r=n[8]("Password")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){256&e&&r!==(r=n[8]("Password")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Nf(n){var e,t,r;function o(e){n[16](e)}var i={$$slots:{label:[Rf]},$$scope:{ctx:n}};return void 0!==n[3]&&(i.checked=n[3]),e=new gi({props:i}),jn.push((function(){return ee(e,"checked",o)})),{c:function(){te(e.$$.fragment)},m:function(n,t){re(e,n,t),r=!0},p:function(n,r){var o={};16777472&r&&(o.$$scope={dirty:r,ctx:n}),!t&&8&r&&(t=!0,o.checked=n[3],Bn((function(){return t=!1}))),e.$set(o)},i:function(n){r||(Vn(e.$$.fragment,n),r=!0)},o:function(n){Jn(e.$$.fragment,n),r=!1},d:function(n){oe(e,n)}}}function Rf(n){var e,t,r=n[8]("Notify me on new messages")+"";return{c:function(){e=tn("span"),t=rn(r),sn(e,"slot","label")},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){256&e&&r!==(r=n[8]("Notify me on new messages")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Af(n){var e,t;return e=new jr({props:{icon:"save",$$slots:{default:[jf]},$$scope:{ctx:n}}}),{c:function(){te(e.$$.fragment)},m:function(n,r){re(e,n,r),t=!0},p:function(n,t){var r={};16777472&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Vn(e.$$.fragment,n),t=!0)},o:function(n){Jn(e.$$.fragment,n),t=!1},d:function(n){oe(e,n)}}}function jf(n){var e,t,r=n[8]("Update")+"";return{c:function(){e=tn("span"),t=rn(r)},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){256&e&&r!==(r=n[8]("Update")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Tf(n){var e,t,r=n[8]("Leave")+"";return{c:function(){e=tn("span"),t=rn(r)},m:function(n,r){X(n,e,r),Z(e,t)},p:function(n,e){256&e&&r!==(r=n[8]("Leave")+"")&&ln(t,r)},d:function(n){n&&nn(e)}}}function Lf(n){for(var e,t,r,o,i,a=n[8]("Participants (%1)",n[11].length)+"",c=n[11].toArray(),u=[],s=0;s<c.length;s+=1)u[s]=Mf(yf(n,c,s));var f=function(n){return Jn(u[n],1,1,(function(){u[n]=null}))};return{c:function(){e=tn("nav"),t=tn("h3"),r=rn(a),o=on();for(var n=0;n<u.length;n+=1)u[n].c();sn(e,"class","sidebar-left__nav")},m:function(n,a){X(n,e,a),Z(e,t),Z(t,r),Z(e,o);for(var c=0;c<u.length;c+=1)u[c].m(e,null);i=!0},p:function(n,t){if((!i||2304&t)&&a!==(a=n[8]("Participants (%1)",n[11].length)+"")&&ln(r,a),2049&t){var o;for(c=n[11].toArray(),o=0;o<c.length;o+=1){var s=yf(n,c,o);u[o]?(u[o].p(s,t),Vn(u[o],1)):(u[o]=Mf(s),u[o].c(),Vn(u[o],1),u[o].m(e,null))}for(Gn(),o=c.length;o<u.length;o+=1)f(o);Yn()}},i:function(n){if(!i){for(var e=0;e<c.length;e+=1)Vn(u[e]);i=!0}},o:function(n){u=u.filter(Boolean);for(var e=0;e<u.length;e+=1)Jn(u[e]);i=!1},d:function(n){n&&nn(e),en(u,n)}}}function Pf(n){var e,t,r,o=n[21].nick+"";return{c:function(){e=tn("span"),t=rn(o),r=on()},m:function(n,o){X(n,e,o),Z(e,t),X(n,r,o)},p:function(n,e){2048&e&&o!==(o=n[21].nick+"")&&ln(t,o)},d:function(n){n&&nn(e),n&&nn(r)}}}function Mf(n){var e,t;return e=new xo({props:{href:"/chat/"+n[0].connection_id+"/"+n[21].id,class:"participant "+we(n[21].modes),$$slots:{default:[Pf]},$$scope:{ctx:n}}}),{c:function(){te(e.$$.fragment)},m:function(n,r){re(e,n,r),t=!0},p:function(n,t){var r={};2049&t&&(r.href="/chat/"+n[0].connection_id+"/"+n[21].id),2048&t&&(r.class="participant "+we(n[21].modes)),16779264&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Vn(e.$$.fragment,n),t=!0)},o:function(n){Jn(e.$$.fragment,n),t=!1},d:function(n){oe(e,n)}}}function Df(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,y,b,w,_,k,x=n[8]("Conversation")+"",E=!n[0].is("private"),O=n[0].hasOwnProperty("wantNotifications"),S=!n[0].is("private");function C(n,e){return n[0].frozen?kf:((null==f||1&e)&&(f=!!n[0].is("private")),f?_f:n[6]?wf:bf)}c=new Cr({props:{name:"times"}});var N=C(n,-1),R=N(n),A=E&&xf(n),j=O&&Nf(n),T=S&&Af(n);(g=new jr({props:{type:"button",icon:"sign-out-alt",$$slots:{default:[Tf]},$$scope:{ctx:n}}})).$on("click",n[12]);var L=!n[0].frozen&&n[10]<3&&Lf(n);return{c:function(){e=tn("div"),t=tn("div"),r=tn("h2"),o=rn(x),i=on(),a=tn("a"),te(c.$$.fragment),u=on(),s=tn("p"),R.c(),l=on(),d=tn("form"),A&&A.c(),p=on(),j&&j.c(),h=on(),m=tn("div"),T&&T.c(),v=on(),te(g.$$.fragment),y=on(),L&&L.c(),sn(a,"href","#settings"),sn(a,"class","btn-hallow is-active"),sn(t,"class","sidebar-header"),sn(m,"class","form-actions"),sn(d,"method","post"),sn(e,"class","sidebar-left")},m:function(f,$){X(f,e,$),Z(e,t),Z(t,r),Z(r,o),Z(t,i),Z(t,a),re(c,a,null),Z(e,u),Z(e,s),R.m(s,null),Z(e,l),Z(e,d),A&&A.m(d,null),Z(d,p),j&&j.m(d,null),Z(d,h),Z(d,m),T&&T.m(m,null),Z(m,v),re(g,m,null),n[17](d),Z(e,y),L&&L.m(e,null),w=!0,_||(k=[cn(a,"click",st.toggle),cn(d,"submit",un(n[13]))],_=!0)},p:function(t,r){var i=$(r,1)[0];n=t,(!w||256&i)&&x!==(x=n[8]("Conversation")+"")&&ln(o,x),N===(N=C(n,i))&&R?R.p(n,i):(R.d(1),(R=N(n))&&(R.c(),R.m(s,null))),1&i&&(E=!n[0].is("private")),E?A?(A.p(n,i),1&i&&Vn(A,1)):((A=xf(n)).c(),Vn(A,1),A.m(d,p)):A&&(Gn(),Jn(A,1,1,(function(){A=null})),Yn()),1&i&&(O=n[0].hasOwnProperty("wantNotifications")),O?j?(j.p(n,i),1&i&&Vn(j,1)):((j=Nf(n)).c(),Vn(j,1),j.m(d,h)):j&&(Gn(),Jn(j,1,1,(function(){j=null})),Yn()),1&i&&(S=!n[0].is("private")),S?T?(T.p(n,i),1&i&&Vn(T,1)):((T=Af(n)).c(),Vn(T,1),T.m(m,v)):T&&(Gn(),Jn(T,1,1,(function(){T=null})),Yn());var a={};16777472&i&&(a.$$scope={dirty:i,ctx:n}),g.$set(a),!n[0].frozen&&n[10]<3?L?(L.p(n,i),1025&i&&Vn(L,1)):((L=Lf(n)).c(),Vn(L,1),L.m(e,null)):L&&(Gn(),Jn(L,1,1,(function(){L=null})),Yn())},i:function(t){w||(Vn(c.$$.fragment,t),Vn(A),Vn(j),Vn(T),Vn(g.$$.fragment,t),Vn(L),Dn((function(){b||(b=Zn(e,$r,n[1],!0)),b.run(1)})),w=!0)},o:function(t){Jn(c.$$.fragment,t),Jn(A),Jn(j),Jn(T),Jn(g.$$.fragment,t),Jn(L),b||(b=Zn(e,$r,n[1],!1)),b.run(0),w=!1},d:function(t){t&&nn(e),oe(c),R.d(),A&&A.d(),j&&j.d(),T&&T.d(),oe(g),n[17](null),L&&L.d(),t&&b&&b.end(),_=!1,P(k)}}}function Bf(n,e,t){var r,o,i,a,c,u,s,f=A;U(n,st,(function(n){return t(18,i=n)})),U(n,bt,(function(n){return t(8,a=n)})),U(n,wt,(function(n){return t(9,c=n)})),U(n,ft,(function(n){return t(10,u=n)})),n.$$.on_destroy.push((function(){return f()}));var l,d=e.conversation,p=e.transition,h=Nn("user"),m="",v=d.topic,g=d.wantNotifications;return n.$$set=function(n){"conversation"in n&&t(0,d=n.conversation),"transition"in n&&t(1,p=n.transition)},n.$$.update=function(){1&n.$$.dirty&&t(6,r=function(n){var e=h.findConversation({connection_id:n.connection_id}),t=n.participants.get(e&&e.nick);return t&&t.modes.operator}(d)),9&n.$$.dirty&&d.update({wantNotifications:g}),1&n.$$.dirty&&(t(7,o=d.participants),f(),f=B(o,(function(n){return t(11,s=n)}))),5&n.$$.dirty&&l&&l.topic&&t(2,l.topic.value=d.topic||"",l)},[d,p,l,g,m,v,r,o,a,c,u,s,function(n){d.send("/part",(function(n){return!n.errrors&&F(st,i="",i)}))},function(n){m&&(d.send(r?"/mode +k "+m:"/join "+d.name+" "+m),t(4,m="")),r&&v!=d.topic&&d.send("/topic "+v)},function(n){t(5,v=n)},function(n){t(4,m=n)},function(n){t(3,g=n)},function(n){jn[n?"unshift":"push"]((function(){t(2,l=n),t(0,d)}))}]}var If=function(n){a(o,n);var e=$f(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,Bf,Df,D,{conversation:0,transition:1}),i}return o}(ce);function Uf(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}function Hf(n,e,t){var r=n.slice();return r[20]=e[t],r}function qf(n,e,t){var r=n.slice();return r[23]=e[t],r}function zf(n){var e,t,r,o,i,a,c=fl(n[7])+"";return e=new Cr({props:{family:"regular",name:"bell"}}),{c:function(){te(e.$$.fragment),t=on(),r=tn("small"),o=rn(c),sn(r,"class","badge is-important"),r.hidden=i=!n[7].unread},m:function(n,i){re(e,n,i),X(n,t,i),X(n,r,i),Z(r,o),a=!0},p:function(n,e){(!a||128&e)&&c!==(c=fl(n[7])+"")&&ln(o,c),(!a||128&e&&i!==(i=!n[7].unread))&&(r.hidden=i)},i:function(n){a||(Vn(e.$$.fragment,n),a=!0)},o:function(n){Jn(e.$$.fragment,n),a=!1},d:function(n){oe(e,n),n&&nn(t),n&&nn(r)}}}function Ff(n){var e,t;return e=new xo({props:{href:"/settings/connections",$$slots:{default:[Kf]},$$scope:{ctx:n}}}),{c:function(){te(e.$$.fragment)},m:function(n,r){re(e,n,r),t=!0},p:function(n,t){var r={};67108928&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Vn(e.$$.fragment,n),t=!0)},o:function(n){Jn(e.$$.fragment,n),t=!1},d:function(n){oe(e,n)}}}function Kf(n){var e,t,r,o,i,a=n[6]("No conversations")+"";return e=new Cr({props:{name:"exclamation-circle"}}),{c:function(){te(e.$$.fragment),t=on(),r=tn("span"),o=rn(a)},m:function(n,a){re(e,n,a),X(n,t,a),X(n,r,a),Z(r,o),i=!0},p:function(n,e){(!i||64&e)&&a!==(a=n[6]("No conversations")+"")&&ln(o,a)},i:function(n){i||(Vn(e.$$.fragment,n),i=!0)},o:function(n){Jn(e.$$.fragment,n),i=!1},d:function(n){oe(e,n),n&&nn(t),n&&nn(r)}}}function Wf(n){var e,t,r,o,i,a,c,u,s,f=(n[20].name||n[20].connection_id)+"",l=fl(n[20])+"";return e=new Cr({props:{name:"network-wired"}}),{c:function(){te(e.$$.fragment),t=on(),r=tn("span"),o=rn(f),i=on(),a=tn("b"),c=rn(l),sn(a,"class","badge"),a.hidden=u=!n[20].unread},m:function(n,u){re(e,n,u),X(n,t,u),X(n,r,u),Z(r,o),X(n,i,u),X(n,a,u),Z(a,c),s=!0},p:function(n,e){(!s||16&e)&&f!==(f=(n[20].name||n[20].connection_id)+"")&&ln(o,f),(!s||16&e)&&l!==(l=fl(n[20])+"")&&ln(c,l),(!s||16&e&&u!==(u=!n[20].unread))&&(a.hidden=u)},i:function(n){s||(Vn(e.$$.fragment,n),s=!0)},o:function(n){Jn(e.$$.fragment,n),s=!1},d:function(n){oe(e,n),n&&nn(t),n&&nn(r),n&&nn(i),n&&nn(a)}}}function Gf(n){var e,t;return e=new Cr({props:{name:n[23].is("private")?"user":"user-friends"}}),{c:function(){te(e.$$.fragment)},m:function(n,r){re(e,n,r),t=!0},p:function(n,t){var r={};16&t&&(r.name=n[23].is("private")?"user":"user-friends"),e.$set(r)},i:function(n){t||(Vn(e.$$.fragment,n),t=!0)},o:function(n){Jn(e.$$.fragment,n),t=!1},d:function(n){oe(e,n)}}}function Yf(n){var e,t;return e=new Cr({props:{name:"exclamation-triangle"}}),{c:function(){te(e.$$.fragment)},m:function(n,r){re(e,n,r),t=!0},p:A,i:function(n){t||(Vn(e.$$.fragment,n),t=!0)},o:function(n){Jn(e.$$.fragment,n),t=!1},d:function(n){oe(e,n)}}}function Vf(n){var e,t,r,o,i,a,c,u,s,f,l,d=n[23].name+"",p=fl(n[23])+"",h=[Yf,Gf],m=[];function v(n,t){return 16&t&&(e=!(!n[23].frozen||n[23].is("private"))),e?0:1}return t=v(n,-1),r=m[t]=h[t](n),{c:function(){r.c(),o=on(),i=tn("span"),a=rn(d),c=on(),u=tn("b"),s=rn(p),sn(u,"class","badge"),u.hidden=f=!n[23].unread},m:function(n,e){m[t].m(n,e),X(n,o,e),X(n,i,e),Z(i,a),X(n,c,e),X(n,u,e),Z(u,s),l=!0},p:function(n,e){var i=t;(t=v(n,e))===i?m[t].p(n,e):(Gn(),Jn(m[i],1,1,(function(){m[i]=null})),Yn(),(r=m[t])?r.p(n,e):(r=m[t]=h[t](n)).c(),Vn(r,1),r.m(o.parentNode,o)),(!l||16&e)&&d!==(d=n[23].name+"")&&ln(a,d),(!l||16&e)&&p!==(p=fl(n[23])+"")&&ln(s,p),(!l||16&e&&f!==(f=!n[23].unread))&&(u.hidden=f)},i:function(n){l||(Vn(r),l=!0)},o:function(n){Jn(r),l=!1},d:function(n){m[t].d(n),n&&nn(o),n&&nn(i),n&&nn(c),n&&nn(u)}}}function Jf(n){var e,t;return e=new xo({props:{href:n[23].path,class:sl(n[20],n[23]),$$slots:{default:[Vf]},$$scope:{ctx:n}}}),{c:function(){te(e.$$.fragment)},m:function(n,r){re(e,n,r),t=!0},p:function(n,t){var r={};16&t&&(r.href=n[23].path),16&t&&(r.class=sl(n[20],n[23])),67108880&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Vn(e.$$.fragment,n),t=!0)},o:function(n){Jn(e.$$.fragment,n),t=!1},d:function(n){oe(e,n)}}}function Qf(n){var e,t,r,o;e=new xo({props:{href:n[20].path,class:sl(n[20],n[20]),$$slots:{default:[Wf]},$$scope:{ctx:n}}});for(var i=n[20].conversations.toArray(),a=[],c=0;c<i.length;c+=1)a[c]=Jf(qf(n,i,c));var u=function(n){return Jn(a[n],1,1,(function(){a[n]=null}))};return{c:function(){te(e.$$.fragment),t=on();for(var n=0;n<a.length;n+=1)a[n].c();r=an()},m:function(n,i){re(e,n,i),X(n,t,i);for(var c=0;c<a.length;c+=1)a[c].m(n,i);X(n,r,i),o=!0},p:function(n,t){var o={};if(16&t&&(o.href=n[20].path),16&t&&(o.class=sl(n[20],n[20])),67108880&t&&(o.$$scope={dirty:t,ctx:n}),e.$set(o),16&t){var c;for(i=n[20].conversations.toArray(),c=0;c<i.length;c+=1){var s=qf(n,i,c);a[c]?(a[c].p(s,t),Vn(a[c],1)):(a[c]=Jf(s),a[c].c(),Vn(a[c],1),a[c].m(r.parentNode,r))}for(Gn(),c=i.length;c<a.length;c+=1)u(c);Yn()}},i:function(n){if(!o){Vn(e.$$.fragment,n);for(var t=0;t<i.length;t+=1)Vn(a[t]);o=!0}},o:function(n){Jn(e.$$.fragment,n),a=a.filter(Boolean);for(var t=0;t<a.length;t+=1)Jn(a[t]);o=!1},d:function(n){oe(e,n),n&&nn(t),en(a,n),n&&nn(r)}}}function Zf(n){var e,t,r,o,i,a,c,u,s,f=n[6]("Notifications")+"",l=fl(n[7])+"";return e=new Cr({props:{name:"bell"}}),{c:function(){te(e.$$.fragment),t=on(),r=tn("span"),o=rn(f),i=on(),a=tn("b"),c=rn(l),sn(a,"class","badge"),a.hidden=u=!n[7].unread},m:function(n,u){re(e,n,u),X(n,t,u),X(n,r,u),Z(r,o),X(n,i,u),X(n,a,u),Z(a,c),s=!0},p:function(n,e){(!s||64&e)&&f!==(f=n[6]("Notifications")+"")&&ln(o,f),(!s||128&e)&&l!==(l=fl(n[7])+"")&&ln(c,l),(!s||128&e&&u!==(u=!n[7].unread))&&(a.hidden=u)},i:function(n){s||(Vn(e.$$.fragment,n),s=!0)},o:function(n){Jn(e.$$.fragment,n),s=!1},d:function(n){oe(e,n),n&&nn(t),n&&nn(r),n&&nn(i),n&&nn(a)}}}function Xf(n){var e,t,r,o,i,a=n[6]("Search")+"";return e=new Cr({props:{name:"search"}}),{c:function(){te(e.$$.fragment),t=on(),r=tn("span"),o=rn(a)},m:function(n,a){re(e,n,a),X(n,t,a),X(n,r,a),Z(r,o),i=!0},p:function(n,e){(!i||64&e)&&a!==(a=n[6]("Search")+"")&&ln(o,a)},i:function(n){i||(Vn(e.$$.fragment,n),i=!0)},o:function(n){Jn(e.$$.fragment,n),i=!1},d:function(n){oe(e,n),n&&nn(t),n&&nn(r)}}}function nl(n){var e,t,r,o,i,a=n[6]("Add conversation")+"";return e=new Cr({props:{name:"comment"}}),{c:function(){te(e.$$.fragment),t=on(),r=tn("span"),o=rn(a)},m:function(n,a){re(e,n,a),X(n,t,a),X(n,r,a),Z(r,o),i=!0},p:function(n,e){(!i||64&e)&&a!==(a=n[6]("Add conversation")+"")&&ln(o,a)},i:function(n){i||(Vn(e.$$.fragment,n),i=!0)},o:function(n){Jn(e.$$.fragment,n),i=!1},d:function(n){oe(e,n),n&&nn(t),n&&nn(r)}}}function el(n){var e,t,r,o,i,a=n[6]("Connections")+"";return e=new Cr({props:{name:"network-wired"}}),{c:function(){te(e.$$.fragment),t=on(),r=tn("span"),o=rn(a)},m:function(n,a){re(e,n,a),X(n,t,a),X(n,r,a),Z(r,o),i=!0},p:function(n,e){(!i||64&e)&&a!==(a=n[6]("Connections")+"")&&ln(o,a)},i:function(n){i||(Vn(e.$$.fragment,n),i=!0)},o:function(n){Jn(e.$$.fragment,n),i=!1},d:function(n){oe(e,n),n&&nn(t),n&&nn(r)}}}function tl(n){var e,t,r,o,i,a=n[6]("Account")+"";return e=new Cr({props:{name:"user-cog"}}),{c:function(){te(e.$$.fragment),t=on(),r=tn("span"),o=rn(a)},m:function(n,a){re(e,n,a),X(n,t,a),X(n,r,a),Z(r,o),i=!0},p:function(n,e){(!i||64&e)&&a!==(a=n[6]("Account")+"")&&ln(o,a)},i:function(n){i||(Vn(e.$$.fragment,n),i=!0)},o:function(n){Jn(e.$$.fragment,n),i=!1},d:function(n){oe(e,n),n&&nn(t),n&&nn(r)}}}function rl(n){var e,t,r,o,i,a=n[6]("Help")+"";return e=new Cr({props:{name:"question-circle"}}),{c:function(){te(e.$$.fragment),t=on(),r=tn("span"),o=rn(a)},m:function(n,a){re(e,n,a),X(n,t,a),X(n,r,a),Z(r,o),i=!0},p:function(n,e){(!i||64&e)&&a!==(a=n[6]("Help")+"")&&ln(o,a)},i:function(n){i||(Vn(e.$$.fragment,n),i=!0)},o:function(n){Jn(e.$$.fragment,n),i=!1},d:function(n){oe(e,n),n&&nn(t),n&&nn(r)}}}function ol(n){var e,t,r,o;return e=new xo({props:{href:"/settings",$$slots:{default:[il]},$$scope:{ctx:n}}}),r=new xo({props:{href:"/settings/users",$$slots:{default:[al]},$$scope:{ctx:n}}}),{c:function(){te(e.$$.fragment),t=on(),te(r.$$.fragment)},m:function(n,i){re(e,n,i),X(n,t,i),re(r,n,i),o=!0},p:function(n,t){var o={};67108928&t&&(o.$$scope={dirty:t,ctx:n}),e.$set(o);var i={};67108928&t&&(i.$$scope={dirty:t,ctx:n}),r.$set(i)},i:function(n){o||(Vn(e.$$.fragment,n),Vn(r.$$.fragment,n),o=!0)},o:function(n){Jn(e.$$.fragment,n),Jn(r.$$.fragment,n),o=!1},d:function(n){oe(e,n),n&&nn(t),oe(r,n)}}}function il(n){var e,t,r,o,i,a=n[6]("Settings")+"";return e=new Cr({props:{name:"tools"}}),{c:function(){te(e.$$.fragment),t=on(),r=tn("span"),o=rn(a)},m:function(n,a){re(e,n,a),X(n,t,a),X(n,r,a),Z(r,o),i=!0},p:function(n,e){(!i||64&e)&&a!==(a=n[6]("Settings")+"")&&ln(o,a)},i:function(n){i||(Vn(e.$$.fragment,n),i=!0)},o:function(n){Jn(e.$$.fragment,n),i=!1},d:function(n){oe(e,n),n&&nn(t),n&&nn(r)}}}function al(n){var e,t,r,o,i,a=n[6]("Users")+"";return e=new Cr({props:{name:"users"}}),{c:function(){te(e.$$.fragment),t=on(),r=tn("span"),o=rn(a)},m:function(n,a){re(e,n,a),X(n,t,a),X(n,r,a),Z(r,o),i=!0},p:function(n,e){(!i||64&e)&&a!==(a=n[6]("Users")+"")&&ln(o,a)},i:function(n){i||(Vn(e.$$.fragment,n),i=!0)},o:function(n){Jn(e.$$.fragment,n),i=!1},d:function(n){oe(e,n),n&&nn(t),n&&nn(r)}}}function cl(n){var e,t,r,o,i,a=n[6]('Search for "%1"',n[5])+"";return e=new Cr({props:{name:"search"}}),{c:function(){te(e.$$.fragment),t=on(),r=tn("span"),o=rn(a)},m:function(n,a){re(e,n,a),X(n,t,a),X(n,r,a),Z(r,o),i=!0},p:function(n,e){(!i||96&e)&&a!==(a=n[6]('Search for "%1"',n[5])+"")&&ln(o,a)},i:function(n){i||(Vn(e.$$.fragment,n),i=!0)},o:function(n){Jn(e.$$.fragment,n),i=!1},d:function(n){oe(e,n),n&&nn(t),n&&nn(r)}}}function ul(n){var e,t,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,y,b,w,_,k,x,E,O,S,C,N,R,A,j,T,L,M,D,B,I,U,H,q,z,F,K,W=n[6]("Conversations")+"",G=(n[4].email||n[6]("Account"))+"",Y=n[4].is("admin"),V=n[6]("Log out")+"";c=new Cr({props:{name:"search"}}),s=new xo({props:{href:"/chat",class:"btn-hallow for-notifications",$$slots:{default:[zf]},$$scope:{ctx:n}}});for(var J=!n[4].connections.size&&Ff(n),Q=n[4].connections.toArray(),an=[],un=0;un<Q.length;un+=1)an[un]=Qf(Hf(n,Q,un));var fn=function(n){return Jn(an[n],1,1,(function(){an[n]=null}))};w=new xo({props:{href:"/chat",$$slots:{default:[Zf]},$$scope:{ctx:n}}}),k=new xo({props:{href:"/search",$$slots:{default:[Xf]},$$scope:{ctx:n}}}),E=new xo({props:{href:"/settings/conversation",$$slots:{default:[nl]},$$scope:{ctx:n}}}),S=new xo({props:{href:"/settings/connections",$$slots:{default:[el]},$$scope:{ctx:n}}}),N=new xo({props:{href:"/settings/account",$$slots:{default:[tl]},$$scope:{ctx:n}}}),A=new xo({props:{href:"/help",$$slots:{default:[rl]},$$scope:{ctx:n}}});var pn=Y&&ol(n);return M=new Cr({props:{name:"power-off"}}),H=new xo({props:{href:"/search?q="+encodeURIComponent(n[5]),class:"for-search hidden",$$slots:{default:[cl]},$$scope:{ctx:n}}}),{c:function(){e=tn("div"),t=tn("form"),r=tn("input"),i=on(),a=tn("label"),te(c.$$.fragment),u=on(),te(s.$$.fragment),f=on(),l=tn("nav"),d=tn("h3"),p=rn(W),h=on(),J&&J.c(),m=on();for(var $=0;$<an.length;$+=1)an[$].c();v=on(),g=tn("h3"),y=rn(G),b=on(),te(w.$$.fragment),_=on(),te(k.$$.fragment),x=on(),te(E.$$.fragment),O=on(),te(S.$$.fragment),C=on(),te(N.$$.fragment),R=on(),te(A.$$.fragment),j=on(),pn&&pn.c(),T=on(),L=tn("a"),te(M.$$.fragment),D=on(),B=tn("span"),I=rn(V),U=on(),te(H.$$.fragment),sn(r,"type","text"),sn(r,"id","search_input"),sn(r,"class","is-primary-menu-item"),sn(r,"placeholder",o=n[3]?n[6]("Search..."):n[6]("Convos")),sn(a,"for","search_input"),sn(a,"class","btn-hallow"),sn(t,"class","sidebar-header"),mn(t,"has-focus",n[3]),sn(L,"href",pt.urlFor("/logout")),sn(L,"target","_self"),sn(l,"class","sidebar-left__nav"),mn(l,"is-filtering",n[1].length>0),sn(e,"class","sidebar-left")},m:function(o,$){X(o,e,$),Z(e,t),Z(t,r),dn(r,n[1]),Z(t,i),Z(t,a),re(c,a,null),Z(t,u),re(s,t,null),Z(e,f),Z(e,l),Z(l,d),Z(d,p),Z(l,h),J&&J.m(l,null),Z(l,m);for(var P=0;P<an.length;P+=1)an[P].m(l,null);Z(l,v),Z(l,g),Z(g,y),Z(l,b),re(w,l,null),Z(l,_),re(k,l,null),Z(l,x),re(E,l,null),Z(l,O),re(S,l,null),Z(l,C),re(N,l,null),Z(l,R),re(A,l,null),Z(l,j),pn&&pn.m(l,null),Z(l,T),Z(l,L),re(M,L,null),Z(L,D),Z(L,B),Z(B,I),Z(l,U),re(H,l,null),n[18](l),z=!0,F||(K=[cn(r,"input",n[17]),cn(r,"blur",n[10]),cn(r,"focus",n[11]),cn(r,"keydown",n[13]),cn(t,"submit",ll),cn(l,"click",n[12])],F=!0)},p:function(e,i){var a=$(i,1)[0];n=e,(!z||72&a&&o!==(o=n[3]?n[6]("Search..."):n[6]("Convos")))&&sn(r,"placeholder",o),2&a&&r.value!==n[1]&&dn(r,n[1]);var c={};if(67108992&a&&(c.$$scope={dirty:a,ctx:n}),s.$set(c),8&a&&mn(t,"has-focus",n[3]),(!z||64&a)&&W!==(W=n[6]("Conversations")+"")&&ln(p,W),n[4].connections.size?J&&(Gn(),Jn(J,1,1,(function(){J=null})),Yn()):J?(J.p(n,a),16&a&&Vn(J,1)):((J=Ff(n)).c(),Vn(J,1),J.m(l,m)),16&a){var u;for(Q=n[4].connections.toArray(),u=0;u<Q.length;u+=1){var f=Hf(n,Q,u);an[u]?(an[u].p(f,a),Vn(an[u],1)):(an[u]=Qf(f),an[u].c(),Vn(an[u],1),an[u].m(l,v))}for(Gn(),u=Q.length;u<an.length;u+=1)fn(u);Yn()}(!z||80&a)&&G!==(G=(n[4].email||n[6]("Account"))+"")&&ln(y,G);var d={};67109056&a&&(d.$$scope={dirty:a,ctx:n}),w.$set(d);var h={};67108928&a&&(h.$$scope={dirty:a,ctx:n}),k.$set(h);var g={};67108928&a&&(g.$$scope={dirty:a,ctx:n}),E.$set(g);var b={};67108928&a&&(b.$$scope={dirty:a,ctx:n}),S.$set(b);var _={};67108928&a&&(_.$$scope={dirty:a,ctx:n}),N.$set(_);var x={};67108928&a&&(x.$$scope={dirty:a,ctx:n}),A.$set(x),16&a&&(Y=n[4].is("admin")),Y?pn?(pn.p(n,a),16&a&&Vn(pn,1)):((pn=ol(n)).c(),Vn(pn,1),pn.m(l,T)):pn&&(Gn(),Jn(pn,1,1,(function(){pn=null})),Yn()),(!z||64&a)&&V!==(V=n[6]("Log out")+"")&&ln(I,V);var O={};32&a&&(O.href="/search?q="+encodeURIComponent(n[5])),67108960&a&&(O.$$scope={dirty:a,ctx:n}),H.$set(O),2&a&&mn(l,"is-filtering",n[1].length>0)},i:function(t){if(!z){Vn(c.$$.fragment,t),Vn(s.$$.fragment,t),Vn(J);for(var r=0;r<Q.length;r+=1)Vn(an[r]);Vn(w.$$.fragment,t),Vn(k.$$.fragment,t),Vn(E.$$.fragment,t),Vn(S.$$.fragment,t),Vn(N.$$.fragment,t),Vn(A.$$.fragment,t),Vn(pn),Vn(M.$$.fragment,t),Vn(H.$$.fragment,t),Dn((function(){q||(q=Zn(e,$r,n[0],!0)),q.run(1)})),z=!0}},o:function(t){Jn(c.$$.fragment,t),Jn(s.$$.fragment,t),Jn(J),an=an.filter(Boolean);for(var r=0;r<an.length;r+=1)Jn(an[r]);Jn(w.$$.fragment,t),Jn(k.$$.fragment,t),Jn(E.$$.fragment,t),Jn(S.$$.fragment,t),Jn(N.$$.fragment,t),Jn(A.$$.fragment,t),Jn(pn),Jn(M.$$.fragment,t),Jn(H.$$.fragment,t),q||(q=Zn(e,$r,n[0],!1)),q.run(0),z=!1},d:function(t){t&&nn(e),oe(c),oe(s),J&&J.d(),en(an,t),oe(w),oe(k),oe(E),oe(S),oe(N),oe(A),pn&&pn.d(),oe(M),oe(H),n[18](null),t&&q&&q.end(),F=!1,P(K)}}}function sl(n,e){var t=[e.conversation_id?"for-conversation":"for-connection"];return(e.frozen||"connected"!=n.state)&&t.push("is-frozen"),e.errors&&t.push("has-errors"),t.join(" ")}function fl(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;return n.unread>e?e+"+":n.unread||0}var ll=function(n){return n.preventDefault()};function dl(n,e,t){var r,o,i,a,c,u;U(n,pt,(function(n){return t(16,i=n)})),U(n,st,(function(n){return t(19,a=n)})),U(n,bt,(function(n){return t(6,c=n)}));var s=e.transition,f=Nn("user");U(n,f,(function(n){return t(4,o=n)}));var l=o.notifications;U(n,l,(function(n){return t(7,u=n)}));var d,p=0,h="",m=!1,v=[];function g(){_e(d,"a",(function(n){return n.classList.remove("has-focus")})),setTimeout((function(){if(d){t(1,h="");var n=document.activeElement;n&&he(n,d)&&_e(d,"a.has-path",(function(n){return n.focus()})),t(3,m=!1)}}),100)}function $(){if(d){t(14,p=0),t(3,m=!0),t(15,v=[]);var n=[h.match(/^\W+/)?"":"\\b\\W*"];n[0]&&n.push("");for(var e=function(e){var r="+"==h?new RegExp(/[1-9]\d*\s*$/):"+@"==h?new RegExp(/^\s*\w.*[1-9]\d*\s*$/):"+#"==h?new RegExp(/^\s*#.*[1-9]\d*\s*$/):new RegExp(n[e]+ke(h),"i"),o={};if(_e(d,"a",(function(n,e){var i=n.classList;!h.length&&i.contains("has-path")&&t(14,p=e),i.remove("has-focus");var a=!h.length||!n.href.match(/\/search$/)&&!o[n.href]&&n.textContent.match(r);a&&v.push(n),n.classList[a?"remove":"add"]("hidden"),o[n.href]=!0})),v.length)return"break"},r=0;r<n.length;r++){if("break"===e(r))break}_e(d,".for-connection",(function(n){for(var e=n;(e=e.nextElementSibling)&&e.classList.contains("for-conversation");)if(!e.classList.contains("hidden"))return n.classList.remove("hidden")}));var o=d.querySelector(".for-search");o.classList[h?"remove":"add"]("hidden"),o.classList.contains("hidden")||v.push(o),_e(d,"h3",(function(n){for(var e=n;(e=e.nextElementSibling)&&!Se(e,"h3");)if(!e.classList.contains("hidden"))return n.classList.remove("hidden");n.classList.add("hidden")}))}}return n.$$set=function(n){"transition"in n&&t(0,s=n.transition)},n.$$.update=function(){2&n.$$.dirty&&$(),2&n.$$.dirty&&t(5,r=h.replace(/^\//,"")),65540&n.$$.dirty&&d&&g(),49152&n.$$.dirty&&v[p]&&v[p].classList.add("has-focus")},[s,h,d,m,o,r,c,u,f,l,g,$,function(n){return(n.target.className||"").match(/(network|user)/)?setTimeout((function(){F(st,a="settings",a)}),50):n.target.closest("a")?setTimeout((function(){F(st,a="",a)}),50):void 0},function(n){if(13==n.keyCode)return n.preventDefault(),g(),void(v[p]&&pt.go(v[p].href));var e=38==n.keyCode?-1:40==n.keyCode?1:0;e&&(n.preventDefault(),v[p]&&v[p].classList.remove("has-focus"),t(14,p+=n.ctrlKey?4*e:e)),p<0&&t(14,p=v.length-1),p>=v.length&&t(14,p=0)},p,v,i,function(){h=this.value,t(1,h)},function(n){jn[n?"unshift":"push"]((function(){t(2,d=n)}))}]}var pl=function(n){a(o,n);var e=Uf(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,dl,ul,D,{transition:0}),i}return o}(ce);function hl(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}var ml=ne.window;function vl(n){var e,t,r,o;function i(e){n[18](e)}var a=n[3].component||Qc;function c(n){var e={};return void 0!==n[1]&&(e.title=n[1]),{props:e}}return a&&(e=new a(c(n)),jn.push((function(){return ee(e,"title",i)}))),{c:function(){e&&te(e.$$.fragment),r=an()},m:function(n,t){e&&re(e,n,t),X(n,r,t),o=!0},p:function(n,o){var u={};if(!t&&2&o&&(t=!0,u.title=n[1],Bn((function(){return t=!1}))),a!==(a=n[3].component||Qc)){if(e){Gn();var s=e;Jn(s.$$.fragment,1,0,(function(){oe(s,1)})),Yn()}a?(e=new a(c(n)),jn.push((function(){return ee(e,"title",i)})),te(e.$$.fragment),Vn(e.$$.fragment,1),re(e,r.parentNode,r)):e=null}else a&&e.$set(u)},i:function(n){o||(e&&Vn(e.$$.fragment,n),o=!0)},o:function(n){e&&Jn(e.$$.fragment,n),o=!1},d:function(n){n&&nn(r),e&&oe(e,n)}}}function gl(n){var e,t,r;function o(e){n[17](e)}var i={};return void 0!==n[1]&&(i.title=n[1]),e=new Ru({props:i}),jn.push((function(){return ee(e,"title",o)})),{c:function(){te(e.$$.fragment)},m:function(n,t){re(e,n,t),r=!0},p:function(n,r){var o={};!t&&2&r&&(t=!0,o.title=n[1],Bn((function(){return t=!1}))),e.$set(o)},i:function(n){r||(Vn(e.$$.fragment,n),r=!0)},o:function(n){Jn(e.$$.fragment,n),r=!1},d:function(n){oe(e,n)}}}function $l(n){var e,t,r,o,i,a,c,u=("nav"==n[8]||n[7]>1)&&yl(n),s="settings"==n[8]&&bl(n);function f(e){n[15](e)}var l=n[3].component;function d(n){var e={};return void 0!==n[1]&&(e.title=n[1]),{props:e}}l&&(r=new l(d(n)),jn.push((function(){return ee(r,"title",f)})));var p=n[8]&&1==n[7]&&wl(n);return{c:function(){u&&u.c(),e=on(),s&&s.c(),t=on(),r&&te(r.$$.fragment),i=on(),p&&p.c(),a=an()},m:function(n,o){u&&u.m(n,o),X(n,e,o),s&&s.m(n,o),X(n,t,o),r&&re(r,n,o),X(n,i,o),p&&p.m(n,o),X(n,a,o),c=!0},p:function(n,c){"nav"==n[8]||n[7]>1?u?(u.p(n,c),384&c&&Vn(u,1)):((u=yl(n)).c(),Vn(u,1),u.m(e.parentNode,e)):u&&(Gn(),Jn(u,1,1,(function(){u=null})),Yn()),"settings"==n[8]?s?(s.p(n,c),256&c&&Vn(s,1)):((s=bl(n)).c(),Vn(s,1),s.m(t.parentNode,t)):s&&(Gn(),Jn(s,1,1,(function(){s=null})),Yn());var h={};if(!o&&2&c&&(o=!0,h.title=n[1],Bn((function(){return o=!1}))),l!==(l=n[3].component)){if(r){Gn();var m=r;Jn(m.$$.fragment,1,0,(function(){oe(m,1)})),Yn()}l?(r=new l(d(n)),jn.push((function(){return ee(r,"title",f)})),te(r.$$.fragment),Vn(r.$$.fragment,1),re(r,i.parentNode,i)):r=null}else l&&r.$set(h);n[8]&&1==n[7]?p?(p.p(n,c),384&c&&Vn(p,1)):((p=wl(n)).c(),Vn(p,1),p.m(a.parentNode,a)):p&&(Gn(),Jn(p,1,1,(function(){p=null})),Yn())},i:function(n){c||(Vn(u),Vn(s),r&&Vn(r.$$.fragment,n),Vn(p),c=!0)},o:function(n){Jn(u),Jn(s),r&&Jn(r.$$.fragment,n),Jn(p),c=!1},d:function(n){u&&u.d(n),n&&nn(e),s&&s.d(n),n&&nn(t),r&&oe(r,n),n&&nn(i),p&&p.d(n),n&&nn(a)}}}function yl(n){var e,t;return e=new pl({props:{transition:{duration:n[7]>1?0:250,x:n[0]}}}),{c:function(){te(e.$$.fragment)},m:function(n,r){re(e,n,r),t=!0},p:function(n,t){var r={};129&t&&(r.transition={duration:n[7]>1?0:250,x:n[0]}),e.$set(r)},i:function(n){t||(Vn(e.$$.fragment,n),t=!0)},o:function(n){Jn(e.$$.fragment,n),t=!1},d:function(n){oe(e,n)}}}function bl(n){var e,t,r,o=n[6];function i(n){return{props:{conversation:n[4].activeConversation,transition:{duration:250,x:n[7]>1?0:n[0]}}}}return o&&(e=new o(i(n))),{c:function(){e&&te(e.$$.fragment),t=an()},m:function(n,o){e&&re(e,n,o),X(n,t,o),r=!0},p:function(n,r){var a={};if(16&r&&(a.conversation=n[4].activeConversation),129&r&&(a.transition={duration:250,x:n[7]>1?0:n[0]}),o!==(o=n[6])){if(e){Gn();var c=e;Jn(c.$$.fragment,1,0,(function(){oe(c,1)})),Yn()}o?(te((e=new o(i(n))).$$.fragment),Vn(e.$$.fragment,1),re(e,t.parentNode,t)):e=null}else o&&e.$set(a)},i:function(n){r||(e&&Vn(e.$$.fragment,n),r=!0)},o:function(n){e&&Jn(e.$$.fragment,n),r=!1},d:function(n){n&&nn(t),e&&oe(e,n)}}}function wl(n){var e,t,r,o,i;return{c:function(){(e=tn("div")).textContent=" ",sn(e,"class","overlay")},m:function(t,a){X(t,e,a),r=!0,o||(i=cn(e,"click",n[16]),o=!0)},p:A,i:function(n){r||(Dn((function(){t||(t=Zn(e,gr,{duration:200},!0)),t.run(1)})),r=!0)},o:function(n){t||(t=Zn(e,gr,{duration:200},!1)),t.run(0),r=!1},d:function(n){n&&nn(e),n&&t&&t.end(),o=!1,i()}}}function _l(n){var e,t,r,o,i,a;Dn(n[14]);var c=[$l,gl,vl],u=[];function s(n,e){return n[2]?0:n[3].requireLogin?1:2}return e=s(n),t=u[e]=c[e](n),{c:function(){t.c(),r=an()},m:function(t,c){u[e].m(t,c),X(t,r,c),o=!0,i||(a=[cn(ml,"focus",n[13]),cn(ml,"resize",n[14])],i=!0)},p:function(n,o){var i=$(o,1)[0],a=e;(e=s(n))===a?u[e].p(n,i):(Gn(),Jn(u[a],1,1,(function(){u[a]=null})),Yn(),(t=u[e])?t.p(n,i):(t=u[e]=c[e](n)).c(),Vn(t,1),t.m(r.parentNode,r))},i:function(n){o||(Vn(t),o=!0)},o:function(n){Jn(t),o=!1},d:function(n){u[e].d(n),n&&nn(r),i=!1,P(a)}}}function kl(e,t,r){var o,i,a,c,u,s,l;U(e,pt,(function(n){return r(3,a=n)})),U(e,ft,(function(n){return r(7,s=n)})),U(e,st,(function(n){return r(8,l=n)}));var p=Ht("/events"),h=(new Te).start();U(e,h,(function(n){return r(12,u=n)}));var m=new mr({});U(e,m,(function(n){return r(4,c=n)}));var v=0,g=0,$={closed:!0},y=yt.l("Chat");function b(){return(b=d(f.mark((function n(){var e,t,r;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(navigator.serviceWorker){n.next=2;break}return n.abrupt("return",{});case 2:return n.next=4,navigator.serviceWorker.register(pt.urlFor("/sw.js"));case 4:return e=n.sent,n.next=7,fetch(pt.urlFor("/sw/info"));case 7:if(t=n.sent,n.t1=200==t.status,!n.t1){n.next=13;break}return n.next=12,t.json();case 12:n.t1=n.sent;case 13:if(n.t0=n.t1,n.t0){n.next=16;break}n.t0={mode:"",version:"0.00"};case 16:if((r=n.t0).version!=xe("version")){n.next=19;break}return n.abrupt("return",{});case 19:console.info("[serviceWorker.update]",xe("version"),r),e.update();case 21:case"end":return n.stop()}}),n)})))).apply(this,arguments)}p.update({debug:"WebSocket"}),window.convosWebSockeet=p,pt.update({baseUrl:xe("base_url")}),p.update({url:pt.wsUrlFor("/events")}),function(){return b.apply(this,arguments)}().catch((function(n){return console.error("[serviceWorker]",n)})),function(n,e){n.to("/login",sf(Ru)),n.to("/register",sf(Ru)),n.to("/help",sf(cu)),n.to("/settings/account",sf(ys)),n.to("/settings/connections",sf(Sc)),n.to("/settings/conversation",sf(qc)),n.to("/settings/users",sf(uf)),n.to("/settings",sf(Is)),n.to("/search",sf(ts)),n.to("/chat",sf(qu)),n.to("/chat/:connection_id",sf(li)),n.to("/chat/:connection_id/:conversation_id",sf(li));var t=function(){};n.to("/doc/*",t),n.to("/file/*",t),n.to("/paste/*",t),n.to("/",sf(Ru)),n.to("*",sf(Qc)),e.on("wsEventSentJoin",(function(e){n.go(n.conversationPath(e))}))}(pt,m),Cn("api",Ye("/api").update({url:pt.urlFor("/api")}).toFunction()),Cn("socket",p),Cn("themeManager",h),Cn("user",m),Gt.on("click",(function(n){return n.path&&pt.go(n.path)})),p.on("update",(function(n){if(n.is("open"))return $.close&&$.close();var e=!1===navigator.onLine?yt.l("You seem to be offline."):n.error?yt.l(n.error):n.is("connecting")?yt.l("Connecting to Convos..."):yt.l("Connection to Convos is %1.",yt.l(n.readyStateHuman));if($.body==e)return;$.close&&$.close();$=Gt.showInApp(e,{closeAfter:-1,title:yt.l("Status")})})),m.on("update",(function(n,e){return e.hasOwnProperty("roles")&&pt.render()})),yt.load().then((function(){return m.load()}));return e.$$.update=function(){8&e.$$.dirty&&r(2,o=!!(a.component&&a.requireLogin&&m.is("authenticated"))),4&e.$$.dirty&&o&&yt.emojis.load(),16&e.$$.dirty&&r(6,i=c.activeConversation.connection_id?c.activeConversation.conversation_id?If:gf:null),4&e.$$.dirty&&(document.body.className=document.body.className.replace(/for-\w+/,"for-"+(o?"app":"cms"))),4&e.$$.dirty&&n[o?"add":"remove"]("notify"),4096&e.$$.dirty&&n[u.compactDisplay?"add":"remove"]("compact-display"),18&e.$$.dirty&&function(n,e){if(document){var t=xe("organization_name");n=e.unread?"("+e.unread+") "+yt.l(n):yt.l(n),document.title="Convos"==t?yt.l("%1 - Convos",n):yt.l("%1 - Convos for %2",n,t)}}(y,c),1&e.$$.dirty&&F(ft,s=g>1200?3:g>800?2:1,s)},[g,y,o,a,c,v,i,s,l,p,h,m,u,function(){return m.email&&p.open()},function(){r(5,v=ml.innerHeight),r(0,g=ml.innerWidth)},function(n){r(1,y=n)},function(){F(st,l="",l)},function(n){r(1,y=n)},function(n){r(1,y=n)}]}var xl=function(n){a(o,n);var e=hl(o);function o(n){var i;return t(this,o),i=e.call(this),ae(r(i),n,kl,_l,D,{}),i}return o}(ce);function El(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=s(n);if(e){var o=s(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}var Ol=function(n){a(i,n);var e,r,o=El(i);function i(n){var e;return t(this,i),(e=o.call(this)).prop("ro","domain",n.domain||"meet.jit.si"),e.prop("ro","email",n.email||""),e.prop("rw","nick",n.nick||""),e.prop("rw","roomName",n.roomName||"convos-default"),e.prop("persist","disableAudioLevels",!0,{key:"video:disableAudioLevels"}),e.prop("persist","disableH264",!0,{key:"video:disableH264"}),e.prop("persist","resolution",720,{key:"video:resolution"}),e}return R(i,[{key:"render",value:(r=d(f.mark((function n(e){var t,r,o=this;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=[].slice.call(e.children,0),this.targetEl=e,n.next=5,this._load();case 5:this.jitsi=n.sent,t.forEach((function(n){return n.remove()})),e.className=e.className.replace(/cms-main/,"video-chat--wrapper"),document.querySelector(".cms-navbar").classList.add("is-full-width"),n.next=18;break;case 11:n.prev=11,n.t0=n.catch(0),console.error("[Jitsi]",{err:n.t0}),(r=document.querySelector(".video-error")).querySelector("span").textContent=String(n.t0).substring(0,350),r.classList.remove("hidden"),_e(document,".cms-main .fa-spin",(function(n){return n.parentNode.classList.add("hidden")}));case 18:if(this.jitsi){n.next=20;break}return n.abrupt("return",this);case 20:return document.addEventListener("keydown",(function(n){"KeyC"==n.code&&o.jitsi.executeCommand("toggleChat"),"KeyD"==n.code&&o.jitsi.executeCommand("toggleShareScreen"),"KeyF"==n.code&&o.jitsi.executeCommand("toggleFilmStrip"),"KeyM"==n.code&&o.jitsi.executeCommand("toggleAudio"),"KeyR"==n.code&&o.jitsi.executeCommand("toggleRaiseHand"),"KeyV"==n.code&&o.jitsi.executeCommand("toggleVideo"),"KeyW"==n.code&&o.jitsi.executeCommand("toggleTileView"),"Space"==n.code&&o.jitsi.isAudioMuted().then((function(n){return n&&o.jitsi.executeCommand("toggleAudio")}))})),document.addEventListener("keyup",(function(n){"Space"==n.code&&o.jitsi.isAudioMuted().then((function(n){return n||o.jitsi.executeCommand("toggleAudio")}))})),n.abrupt("return",this);case 23:case"end":return n.stop()}}),n,this,[[0,11]])}))),function(n){return r.apply(this,arguments)})},{key:"_configOverwrite",value:function(){return{disableAudioLevels:this.disableAudioLevels,disableH264:this.disableH264,enableWelcomePage:!this.nick,prejoinPageEnabled:!this.nick,minParticipants:1,resolution:this.resolution,analytics:{googleAnalyticsTrackingId:"",scriptURLs:[]},e2eping:{analyticsInterval:-1,pingInterval:-1}}}},{key:"_interfaceConfigOverwrite",value:function(){return{DEFAULT_BACKGROUND:window.getComputedStyle(document.querySelector(".cms-navbar--wrapper")).backgroundColor||"#222222",DISABLE_FOCUS_INDICATOR:!0,DISABLE_DOMINANT_SPEAKER_INDICATOR:!0,DISABLE_VIDEO_BACKGROUND:!0,INITIAL_TOOLBAR_TIMEOUT:1e3,SHOW_CHROME_EXTENSION_BANNER:!0,TOOLBAR_ALWAYS_VISIBLE:!1,TOOLBAR_BUTTONS:["camera","chat","closedcaptions","desktop","etherpad","fodeviceselection","fullscreen","hangup","help","microphone","mute-everyone","profile","raisehand","security","settings","sharedvideo","shortcuts","stats","tileview"],TOOLBAR_TIMEOUT:2e3,VERTICAL_FILMSTRIP:!1,VIDEO_QUALITY_LABEL_DISABLED:!0}}},{key:"_load",value:(e=d(f.mark((function n(){return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,be("https://"+this.domain+"/external_api.js");case 2:return n.abrupt("return",new JitsiMeetExternalAPI(this.domain,this._options()));case 3:case"end":return n.stop()}}),n,this)}))),function(){return e.apply(this,arguments)})},{key:"_options",value:function(){var n={};return this.email&&(n.email=this.email),this.nick&&(n.displayName=this.nick),{configOverwrite:this._configOverwrite(),interfaceConfigOverwrite:this._interfaceConfigOverwrite(),parentNode:this.targetEl,roomName:this.roomName,userInfo:n,height:"100%",width:"100%"}}}]),i}(Ae);if(_e(document,"#hamburger_checkbox_toggle",(function(n){n.checked=!1})),_e(document,".js-close-window",(function(n){n.addEventListener("click",(function(n){window.opener&&(n.preventDefault(),setTimeout((function(){return window.close()}),1),window.opener.focus())}))})),document.querySelector('meta[name="convos:start_app"][content="chat"]')){document.querySelector(".footer--wrapper").remove(),document.querySelector(".cms-main").remove();new xl({target:document.body})}else if(document.querySelector('meta[name="convos:start_app"][content="jitsi"]')){document.querySelector(".footer--wrapper").remove();var Sl=document.querySelector(".cms-main");new Ol(Sl.dataset).render(Sl)}else document.addEventListener("DOMContentLoaded",(function(n){_e(document,"pre",(function(n){return Pe.lineNumbersBlock(n)}))}));function Cl(n){if(!("ontouchstart"in window)){var e=function(n){for(var e=0;e<n.length;e++){var t=document.querySelector(n[e]);if(t&&-1!=t.tabIndex)return t}return null},t=n&&e(["input.is-primary-menu-item","a.is-primary-menu-item"]),r=document.activeElement;if(Se(r,["a","input","textarea"])&&t&&r!=t)return t.focus();var o=e([".is-primary-input",'main input[type="text"], article input[type="text"]',"main a, article a"]);return o?o.focus():t?t.focus():void 0}}document.addEventListener("keydown",(function(n){27==n.keyCode&&(_e(document,".fullscreen",(function(n){return n.click()})),Cl()),13==n.keyCode&&n.shiftKey&&(n.preventDefault(),Cl("toggle"))})),document.addEventListener("routerender",(function(){return Cl()}))}();
//# sourceMappingURL=convos.608a985a.js.map
