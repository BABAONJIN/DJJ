!function(){"use strict";var n=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")};var t=function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n};function e(n,t){return n(t={exports:{}},t.exports),t.exports}var r=e((function(n){function t(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?n.exports=t=function(n){return typeof n}:n.exports=t=function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},t(e)}n.exports=t}));var o=function(n,e){return!e||"object"!==r(e)&&"function"!=typeof e?t(n):e},i=e((function(n){function t(e){return n.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},t(e)}n.exports=t})),a=e((function(n){function t(e,r){return n.exports=t=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},t(e,r)}n.exports=t}));var c=function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&a(n,t)};var u=function(n){if(Array.isArray(n))return n};var s=function(n,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n)){var e=[],r=!0,o=!1,i=void 0;try{for(var a,c=n[Symbol.iterator]();!(r=(a=c.next()).done)&&(e.push(a.value),!t||e.length!==t);r=!0);}catch(n){o=!0,i=n}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return e}};var f=function(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r};var l=function(n,t){if(n){if("string"==typeof n)return f(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?f(n,t):void 0}};var d=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var p=function(n,t){return u(n)||s(n,t)||l(n,t)||d()};var h=function(n,t){for(;!Object.prototype.hasOwnProperty.call(n,t)&&null!==(n=i(n)););return n},m=e((function(n){function t(e,r,o){return"undefined"!=typeof Reflect&&Reflect.get?n.exports=t=Reflect.get:n.exports=t=function(n,t,e){var r=h(n,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(e):o.value}},t(e,r,o||e)}n.exports=t}));var v=function(n){return-1!==Function.toString.call(n).indexOf("[native code]")};var g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}},$=e((function(n){function t(e,r,o){return g()?n.exports=t=Reflect.construct:n.exports=t=function(n,t,e){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(n,r));return e&&a(o,e.prototype),o},t.apply(null,arguments)}n.exports=t})),y=e((function(n){function t(e){var r="function"==typeof Map?new Map:void 0;return n.exports=t=function(n){if(null===n||!v(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(n))return r.get(n);r.set(n,t)}function t(){return $(n,arguments,i(this).constructor)}return t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a(t,n)},t(e)}n.exports=t}));var b=function(n){if(Array.isArray(n))return f(n)};var w=function(n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)};var _=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var x=function(n){return b(n)||w(n)||l(n)||_()};function k(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var E=function(n,t,e){return t&&k(n.prototype,t),e&&k(n,e),n};function O(){}var C=function(n){return n};function S(n){return n()}function N(){return Object.create(null)}function R(n){n.forEach(S)}function D(n){return"function"==typeof n}function A(n,t){return n!=n?t==t:n!==t||n&&"object"===r(n)||"function"==typeof n}function M(n){if(null==n)return O;for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];var o=n.subscribe.apply(n,e);return o.unsubscribe?function(){return o.unsubscribe()}:o}function j(n,t,e){n.$$.on_destroy.push(M(t,e))}function P(n,t,e,r){if(n){var o=T(n,t,e,r);return n[0](o)}}function T(n,t,e,r){return n[1]&&r?function(n,t){for(var e in t)n[e]=t[e];return n}(e.ctx.slice(),n[1](r(t))):e.ctx}function L(n,t,e,o){if(n[2]&&o){var i=n[2](o(e));if(void 0===t.dirty)return i;if("object"===r(i)){for(var a=[],c=Math.max(t.dirty.length,i.length),u=0;u<c;u+=1)a[u]=t.dirty[u]|i[u];return a}return t.dirty|i}return t.dirty}function I(n){return n&&D(n.destroy)?n.destroy:O}var U="undefined"!=typeof window,B=U?function(){return window.performance.now()}:function(){return Date.now()},z=U?function(n){return requestAnimationFrame(n)}:O,H=new Set;function q(n){H.forEach((function(t){t.c(n)||(H.delete(t),t.f())})),0!==H.size&&z(q)}function F(n,t){n.appendChild(t)}function K(n,t,e){n.insertBefore(t,e||null)}function W(n){n.parentNode.removeChild(n)}function G(n,t){for(var e=0;e<n.length;e+=1)n[e]&&n[e].d(t)}function Y(n){return document.createElement(n)}function V(n){return document.createTextNode(n)}function J(){return V(" ")}function Z(){return V("")}function Q(n,t,e,r){return n.addEventListener(t,e,r),function(){return n.removeEventListener(t,e,r)}}function X(n){return function(t){return t.preventDefault(),n.call(this,t)}}function nn(n,t,e){null==e?n.removeAttribute(t):n.getAttribute(t)!==e&&n.setAttribute(t,e)}function tn(n){return Array.from(n.childNodes)}function en(n,t){t=""+t,n.data!==t&&(n.data=t)}function rn(n,t){(null!=t||n.value)&&(n.value=t)}function on(n,t,e,r){n.style.setProperty(t,e,r?"important":"")}function an(n,t,e){n.classList[e?"add":"remove"](t)}function cn(n,t){var e=document.createEvent("CustomEvent");return e.initCustomEvent(n,!1,!1,t),e}var un,sn=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n(this,t),this.e=Y("div"),this.a=r,this.u(e)}return E(t,[{key:"m",value:function(n){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=0;e<this.n.length;e+=1)K(n,this.n[e],t);this.t=n}},{key:"u",value:function(n){this.e.innerHTML=n,this.n=Array.from(this.e.childNodes)}},{key:"p",value:function(n){this.d(),this.u(n),this.m(this.t,this.a)}},{key:"d",value:function(){this.n.forEach(W)}}]),t}(),fn=new Set,ln=0;function dn(n){for(var t=5381,e=n.length;e--;)t=(t<<5)-t^n.charCodeAt(e);return t>>>0}function pn(n,t,e,r,o,i,a){for(var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=16.666/r,s="{\n",f=0;f<=1;f+=u){var l=t+(e-t)*i(f);s+=100*f+"%{".concat(a(l,1-l),"}\n")}var d=s+"100% {".concat(a(e,1-e),"}\n}"),p="__svelte_".concat(dn(d),"_").concat(c),h=n.ownerDocument;fn.add(h);var m=h.__svelte_stylesheet||(h.__svelte_stylesheet=h.head.appendChild(Y("style")).sheet),v=h.__svelte_rules||(h.__svelte_rules={});v[p]||(v[p]=!0,m.insertRule("@keyframes ".concat(p," ").concat(d),m.cssRules.length));var g=n.style.animation||"";return n.style.animation="".concat(g?"".concat(g,", "):"").concat(p," ").concat(r,"ms linear ").concat(o,"ms 1 both"),ln+=1,p}function hn(n,t){var e=(n.style.animation||"").split(", "),r=e.filter(t?function(n){return n.indexOf(t)<0}:function(n){return-1===n.indexOf("__svelte")}),o=e.length-r.length;o&&(n.style.animation=r.join(", "),(ln-=o)||z((function(){ln||(fn.forEach((function(n){for(var t=n.__svelte_stylesheet,e=t.cssRules.length;e--;)t.deleteRule(e);n.__svelte_rules={}})),fn.clear())})))}function mn(n){un=n}function vn(){if(!un)throw new Error("Function called outside component initialization");return un}function gn(n){vn().$$.on_mount.push(n)}function $n(n){vn().$$.on_destroy.push(n)}function yn(n,t){vn().$$.context.set(n,t)}function bn(n){return vn().$$.context.get(n)}function wn(n,t){var e=n.$$.callbacks[t.type];e&&e.slice().forEach((function(n){return n(t)}))}var _n=[],xn=[],kn=[],En=[],On=Promise.resolve(),Cn=!1;function Sn(n){kn.push(n)}function Nn(n){En.push(n)}var Rn,Dn=!1,An=new Set;function Mn(){if(!Dn){Dn=!0;do{for(var n=0;n<_n.length;n+=1){var t=_n[n];mn(t),jn(t.$$)}for(_n.length=0;xn.length;)xn.pop()();for(var e=0;e<kn.length;e+=1){var r=kn[e];An.has(r)||(An.add(r),r())}kn.length=0}while(_n.length);for(;En.length;)En.pop()();Cn=!1,Dn=!1,An.clear()}}function jn(n){if(null!==n.fragment){n.update(),R(n.before_update);var t=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,t),n.after_update.forEach(Sn)}}function Pn(n,t,e){n.dispatchEvent(cn("".concat(t?"intro":"outro").concat(e)))}var Tn,Ln=new Set;function In(){Tn={r:0,c:[],p:Tn}}function Un(){Tn.r||R(Tn.c),Tn=Tn.p}function Bn(n,t){n&&n.i&&(Ln.delete(n),n.i(t))}function zn(n,t,e,r){if(n&&n.o){if(Ln.has(n))return;Ln.add(n),Tn.c.push((function(){Ln.delete(n),r&&(e&&n.d(1),r())})),n.o(t)}}var Hn={duration:0};function qn(n,t,e,r){var o=t(n,e),i=r?0:1,a=null,c=null,u=null;function s(){u&&hn(n,u)}function f(n,t){var e=n.b-i;return t*=Math.abs(e),{a:i,b:n.b,d:e,duration:t,start:n.start,end:n.start+t,group:n.group}}function l(t){var e,r=o||Hn,l=r.delay,d=void 0===l?0:l,p=r.duration,h=void 0===p?300:p,m=r.easing,v=void 0===m?C:m,g=r.tick,$=void 0===g?O:g,y=r.css,b={start:B()+d,b:t};t||(b.group=Tn,Tn.r+=1),a?c=b:(y&&(s(),u=pn(n,i,t,h,d,v,y)),t&&$(0,1),a=f(b,h),Sn((function(){return Pn(n,t,"start")})),e=function(t){if(c&&t>c.start&&(a=f(c,h),c=null,Pn(n,a.b,"start"),y&&(s(),u=pn(n,i,a.b,a.duration,0,v,o.css))),a)if(t>=a.end)$(i=a.b,1-i),Pn(n,a.b,"end"),c||(a.b?s():--a.group.r||R(a.group.c)),a=null;else if(t>=a.start){var e=t-a.start;i=a.a+a.d*v(e/a.duration),$(i,1-i)}return!(!a&&!c)},0===H.size&&z(q),new Promise((function(n){H.add({c:e,f:n})})))}return{run:function(n){D(o)?(Rn||(Rn=Promise.resolve()).then((function(){Rn=null})),Rn).then((function(){o=o(),l(n)})):l(n)},end:function(){s(),a=c=null}}}function Fn(n,t){var e,o=t.token={};function i(n,e,r,i){if(t.token===o){t.resolved=i;var a=t.ctx;void 0!==r&&((a=a.slice())[r]=i);var c=n&&(t.current=n)(a),u=!1;t.block&&(t.blocks?t.blocks.forEach((function(n,r){r!==e&&n&&(In(),zn(n,1,1,(function(){t.blocks[r]=null})),Un())})):t.block.d(1),c.c(),Bn(c,1),c.m(t.mount(),t.anchor),u=!0),t.block=c,t.blocks&&(t.blocks[e]=c),u&&Mn()}}if((e=n)&&"object"===r(e)&&"function"==typeof e.then){var a=vn();if(n.then((function(n){mn(a),i(t.then,1,t.value,n),mn(null)}),(function(n){mn(a),i(t.catch,2,t.error,n),mn(null)})),t.current!==t.pending)return i(t.pending,0),!0}else{if(t.current!==t.then)return i(t.then,1,t.value,n),!0;t.resolved=n}}var Kn="undefined"!=typeof window?window:global;function Wn(n,t,e){var r=n.$$.props[t];void 0!==r&&(n.$$.bound[r]=e,e(n.$$.ctx[r]))}function Gn(n){n&&n.c()}function Yn(n,t,e){var r=n.$$,o=r.fragment,i=r.on_mount,a=r.on_destroy,c=r.after_update;o&&o.m(t,e),Sn((function(){var t=i.map(S).filter(D);a?a.push.apply(a,x(t)):R(t),n.$$.on_mount=[]})),c.forEach(Sn)}function Vn(n,t){var e=n.$$;null!==e.fragment&&(R(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function Jn(n,t){-1===n.$$.dirty[0]&&(_n.push(n),Cn||(Cn=!0,On.then(Mn)),n.$$.dirty.fill(0)),n.$$.dirty[t/31|0]|=1<<t%31}function Zn(n,t,e,r,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[-1],c=un;mn(n);var u=t.props||{},s=n.$$={fragment:null,ctx:null,props:i,update:O,not_equal:o,bound:N(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:N(),dirty:a},f=!1;if(s.ctx=e?e(n,u,(function(t,e){var r=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:e;return s.ctx&&o(s.ctx[t],s.ctx[t]=r)&&(s.bound[t]&&s.bound[t](r),f&&Jn(n,t)),e})):[],s.update(),f=!0,R(s.before_update),s.fragment=!!r&&r(s.ctx),t.target){if(t.hydrate){var l=tn(t.target);s.fragment&&s.fragment.l(l),l.forEach(W)}else s.fragment&&s.fragment.c();t.intro&&Bn(n.$$.fragment),Yn(n,t.target,t.anchor),Mn()}mn(c)}var Qn=function(){function t(){n(this,t)}return E(t,[{key:"$destroy",value:function(){Vn(this,1),this.$destroy=O}},{key:"$on",value:function(n,t){var e=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return e.push(t),function(){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}}},{key:"$set",value:function(){}}]),t}(),Xn=e((function(n){var t=function(n){var t=Object.prototype,e=t.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(n,t,e,r){var o=t&&t.prototype instanceof l?t:l,i=Object.create(o.prototype),a=new x(r||[]);return i._invoke=function(n,t,e){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return E()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=b(a,e);if(c){if(c===f)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var u=s(n,t,e);if("normal"===u.type){if(r=e.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(r="completed",e.method="throw",e.arg=u.arg)}}}(n,e,a),i}function s(n,t,e){try{return{type:"normal",arg:n.call(t,e)}}catch(n){return{type:"throw",arg:n}}}n.wrap=u;var f={};function l(){}function d(){}function p(){}var h={};h[i]=function(){return this};var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==t&&e.call(v,i)&&(h=v);var g=p.prototype=l.prototype=Object.create(h);function $(n){["next","throw","return"].forEach((function(t){n[t]=function(n){return this._invoke(t,n)}}))}function y(n,t){var o;this._invoke=function(i,a){function c(){return new t((function(o,c){!function o(i,a,c,u){var f=s(n[i],n,a);if("throw"!==f.type){var l=f.arg,d=l.value;return d&&"object"===r(d)&&e.call(d,"__await")?t.resolve(d.__await).then((function(n){o("next",n,c,u)}),(function(n){o("throw",n,c,u)})):t.resolve(d).then((function(n){l.value=n,c(l)}),(function(n){return o("throw",n,c,u)}))}u(f.arg)}(i,a,o,c)}))}return o=o?o.then(c,c):c()}}function b(n,t){var e=n.iterator[t.method];if(void 0===e){if(t.delegate=null,"throw"===t.method){if(n.iterator.return&&(t.method="return",t.arg=void 0,b(n,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=s(e,n.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var o=r.arg;return o?o.done?(t[n.resultName]=o.value,t.next=n.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function w(n){var t={tryLoc:n[0]};1 in n&&(t.catchLoc=n[1]),2 in n&&(t.finallyLoc=n[2],t.afterLoc=n[3]),this.tryEntries.push(t)}function _(n){var t=n.completion||{};t.type="normal",delete t.arg,n.completion=t}function x(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(w,this),this.reset(!0)}function k(n){if(n){var t=n[i];if(t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,o=function t(){for(;++r<n.length;)if(e.call(n,r))return t.value=n[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=g.constructor=p,p.constructor=d,p[c]=d.displayName="GeneratorFunction",n.isGeneratorFunction=function(n){var t="function"==typeof n&&n.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,p):(n.__proto__=p,c in n||(n[c]="GeneratorFunction")),n.prototype=Object.create(g),n},n.awrap=function(n){return{__await:n}},$(y.prototype),y.prototype[a]=function(){return this},n.AsyncIterator=y,n.async=function(t,e,r,o,i){void 0===i&&(i=Promise);var a=new y(u(t,e,r,o),i);return n.isGeneratorFunction(e)?a:a.next().then((function(n){return n.done?n.value:a.next()}))},$(g),g[c]="Generator",g[i]=function(){return this},g.toString=function(){return"[object Generator]"},n.keys=function(n){var t=[];for(var e in n)t.push(e);return t.reverse(),function e(){for(;t.length;){var r=t.pop();if(r in n)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=k,x.prototype={constructor:x,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!n)for(var t in this)"t"===t.charAt(0)&&e.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var t=this;function r(e,r){return a.type="throw",a.arg=n,t.next=e,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),u=e.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(n,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===n||"continue"===n)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=n,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(n,t){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&t&&(this.next=t),f},finish:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.finallyLoc===n)return this.complete(e.completion,e.afterLoc),_(e),f}},catch:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.tryLoc===n){var r=e.completion;if("throw"===r.type){var o=r.arg;_(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(n,t,e){return this.delegate={iterator:k(n),resultName:t,nextLoc:e},"next"===this.method&&(this.arg=void 0),f}},n}(n.exports);try{regeneratorRuntime=t}catch(n){Function("r","regeneratorRuntime = r")(t)}}));function nt(n,t,e,r,o,i,a){try{var c=n[i](a),u=c.value}catch(n){return void e(n)}c.done?t(u):Promise.resolve(u).then(r,o)}var tt=function(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(n){nt(i,r,o,a,c,"next",n)}function c(n){nt(i,r,o,a,c,"throw",n)}a(void 0)}))}};var et=function(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n},rt=function(){function t(e){var r=this;n(this,t),this._url=new URL("http://localhost"),Object.defineProperty(this,"href",{get:function(){return r._url.href.replace(/^http:/,r.protocol)},set:function(n){r._url.href=n.replace(/^\w+:/,"http:"),r.protocol=n.match(/^\w+:/)[0]}}),["host","pathname","password","searchParams","username"].forEach((function(n){Object.defineProperty(r,n,{get:function(){return r._url[n]},set:function(t){r._url[n]=t}})})),this.href=e}return E(t,[{key:"fromForm",value:function(n){var t=n.server.value;return n.nick.value.length&&this.searchParams.append("nick",n.nick.value),n.realname.value.length&&this.searchParams.append("realname",n.realname.value),this.searchParams.append("tls",n.tls.checked?"1":"0"),this.searchParams.append("tls_verify",n.tls_verify&&n.tls_verify.checked?"1":"0"),this.host=t.match(/:\d+$/)?t:t+":6667",this.password=n.password.value,this.username=n.username.value,this}},{key:"toString",value:function(){return this.href.replace(/^http:/,this.protocol)}}]),t}(),ot=e((function(n,t){var e;e=function(){function n(){for(var n=0,t={};n<arguments.length;n++){var e=arguments[n];for(var r in e)t[r]=e[r]}return t}function t(n){return n.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function e(r){function o(){}function i(t,e,i){if("undefined"!=typeof document){"number"==typeof(i=n({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(e);/^[\{\[]/.test(a)&&(e=a)}catch(n){}e=r.write?r.write(e,t):encodeURIComponent(String(e)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var c="";for(var u in i)i[u]&&(c+="; "+u,!0!==i[u]&&(c+="="+i[u].split(";")[0]));return document.cookie=t+"="+e+c}}function a(n,e){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var c=i[a].split("="),u=c.slice(1).join("=");e||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var s=t(c[0]);if(u=(r.read||r)(u,s)||t(u),e)try{u=JSON.parse(u)}catch(n){}if(o[s]=u,n===s)break}catch(n){}}return n?o[n]:o}}return o.set=i,o.get=function(n){return a(n,!1)},o.getJSON=function(n){return a(n,!0)},o.remove=function(t,e){i(t,"",n(e,{expires:-1}))},o.defaults={},o.withConverter=e,o}((function(){}))},n.exports=e()})),it=1e3,at=1e6,ct=1e3*at;function ut(n,t){for(;n;){if(t.tagName?n==t:n.matches&&n.matches(t))return n;n=n.parentNode}return null}function st(n,t){var e=function e(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var a=this;e.isQueued=!0,e.debounceTid&&clearTimeout(e.debounceTid),e.debounceTid=setTimeout((function(){n.apply(a,o),e.debounceTid=0}),t)};return e.debounceTid=0,e}function ft(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"message",e=n.errors||n;return e&&e[0]?e[0][t]||"Unknown error.":""}function lt(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.95,r=Math.floor(6*n),o=6*n-r,i=e*(1-t),a=e*(1-o*t),c=e*(1-(1-o)*t),u=255,s=255,f=255;switch(r){case 0:u=e,s=c,f=i;break;case 1:u=a,s=e,f=i;break;case 2:u=i,s=e,f=c;break;case 3:u=i,s=a,f=e;break;case 4:u=c,s=i,f=e;break;case 5:u=e,s=i,f=a}return[Math.floor(255*u),Math.floor(255*s),Math.floor(255*f)]}function dt(n,t){var e=n<it?[n,""]:n<at?[n/it,"k"]:n<ct?[n/at,"M"]:[n/ct,"G"],r=String(Math.round(10*e[0])/10);return(r.match(/\./)?r:r+".0")+e[1]+(t||"")}function pt(n,t){return"array"==t?Array.isArray(n):"object"==t?"object"==r(n)&&null!==n:"undef"==t?null==n:r(n)==t}function ht(n){var t=document,e=n.replace(/\W/g,"_");if(!t.getElementById(e)){var r=t.createElement("script"),o=[e,n];return r.id=o[0],r.src=o[1],t.getElementsByTagName("head")[0].appendChild(r),new Promise((function(n,t){r.addEventListener("error",t),r.addEventListener("load",n)}))}}function mt(n){return Object.keys(n).filter((function(t){return n[t]})).sort().map((function(n){return"has-mode-"+n})).join(" ")}function vt(n,t,e){var r=":children"==t?n.children:n.querySelectorAll(t);if(!e)return[].slice.call(r,0);if(Array.isArray(e))return[].forEach.call(r,(function(n){return n.addEventListener(e[0],e[1])}));for(var o=[],i=0;i<r.length;i++)o.push(e(r[i],i));return o}function gt(n){return n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function $t(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function yt(n,t,e){var r=document.querySelector(n);r.className=r.className.replace(t,(function(n,t){return t+e}))}function bt(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;if(0==n.length)return"#000";for(var e=0,r=0;r<n.length;r++)e=n.charCodeAt(r)+((e<<5)-e),e&=e;return"#"+lt(((e=Math.abs(e%t/t))+.618033988749)%1,.4,.7).map((function(n){return n.toString(16)})).join("")}function wt(n,t){return pt(t,"array")?t.find((function(t){return wt(n,t)}))||!1:n&&n.tagName&&n.tagName.toLowerCase()===t||!1}function _t(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var t=16*Math.random()|0;return("x"==n?t:3&t|8).toString(16)}))}function xt(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function kt(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(e),!0).forEach((function(t){et(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):xt(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}var Et=function(){function t(){n(this,t),this.cookieName="convos_js",this._on={},this._props={}}return E(t,[{key:"emit",value:function(n){for(var t=this._on[n],e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];for(var i=0;i<(t||[]).length;i++){var a;(a=t[i])[0].apply(a,r)}return this}},{key:"on",value:function(n,t){var e=t?null:new Promise((function(n){t=n})),r=this._on[n]||(this._on[n]=[]),o=[t];r.push(o);var i=function(){var n=r.indexOf(o);-1!=n&&r.splice(n,1)};return e?e.finally(i):i}},{key:"prop",value:function(n,t,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=kt({},r,{defaultValue:e,name:t,type:n,value:e});switch(this._props[t]=o,o.updateable=-1!=["cookie","persist","rw"].indexOf(n),n){case"cookie":return this._cookieProp(o);case"persist":return this._localStorageProp(o);case"ro":return this._readOnlyProp(o);case"rw":return this._updateableProp(o)}throw"["+this.constructor.name+'] Unknown prop type "'+n+'" for prop "'+t+'".'}},{key:"subscribe",value:function(n){return n(this),this.on("update",n)}},{key:"update",value:function(n){var t=this;return Object.keys(n).forEach((function(e){var r=t._props[e];r&&(r.hasOwnProperty("prev")||(r.prev="ro"==r.type?void 0:r.value),r.updateable&&(r.value=n[e]))})),this._updatedTid||(this._updatedTid=setTimeout(this._delayedUpdate.bind(this),1)),this}},{key:"_cookie",value:function(n,t){var e=document.decodedB64JSONCookies||(document.decodedB64JSONCookies={});if(!e[this.cookieName])try{var r=ot.get(this.cookieName);e[this.cookieName]=JSON.parse(r?atob(r):"{}")}catch(t){console.error("[Reactive:cookie]",et({},n,t))}var o=e[this.cookieName]||{};if(1==arguments.length)return o[n];var i=this._props[n],a=i.key||n;t===i.defaultValue?delete o[a]:o[a]=t;var c=0==location.href.indexOf("https:");ot.set(this.cookieName,btoa(JSON.stringify(o)),{expires:365,SameSite:"Lax",secure:c})}},{key:"_cookieProp",value:function(n){var t=this._cookie(n.name);pt(t,"undef")||(n.value=t),pt(t,"undef")&&this._cookie(n.name,n.value),this._updateableProp(n)}},{key:"_delayedUpdate",value:function(){var n=this,t={};return Object.keys(this._props).forEach((function(e){var r=n._props[e];if(r.hasOwnProperty("prev")){var o=r.prev;delete r.prev,r.value!==o&&("cookie"==r.type&&n._cookie(e,r.value),"persist"==r.type&&n._localStorage(e,r.value),t[e]="ro"!=r.type)}})),delete this._updatedTid,Object.keys(t).length&&this.emit("update",this,t),t}},{key:"_localStorage",value:function(n,t){var e=this._props[n],r="convos:"+(e.key||n);if(2==arguments.length)return t===e.defaultValue?localStorage.removeItem(r):localStorage.setItem(r,JSON.stringify(t));try{return localStorage.hasOwnProperty(r)?JSON.parse(localStorage.getItem(r)):void 0}catch(n){return void console.error("[Reactive:localStorage]",et({},r,localStorage.getItem(r)),n)}}},{key:"_localStorageProp",value:function(n){var t=this._localStorage(n.name);pt(t,"undef")||(n.value=t),pt(t,"undef")&&this._localStorage(n.name,n.value),this._updateableProp(n)}},{key:"_readOnlyProp",value:function(n){if(void 0===n.value)throw"["+this.constructor.name+'] Read-only attribute "'+n.name+'" cannot be undefined';var t="function"==typeof n.value?n.value:function(){return n.value};Object.defineProperty(this,n.name,{get:t})}},{key:"_updateableProp",value:function(n){Object.defineProperty(this,n.name,{get:function(){return n.value}})}}]),t}();function Ot(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Ct=function(n,t){return n.name.localeCompare(t.name)},St=function(t){c(a,t);var e,r=(e=a,function(){var n,t=i(e);if(Ot()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n(this,a),(t=r.call(this,e)).sorter=o.sorter||Ct,t._sort(),t}return E(a,[{key:"filter",value:function(n){return Array.from(this.values()).filter(n)}},{key:"set",value:function(n,t){m(i(a.prototype),"set",this).call(this,n,t),this._sort()}},{key:"toArray",value:function(){return Array.from(this.values())}},{key:"_sort",value:function(){var n=this,t=Array.from(this.entries()),e=this.sorter;return this.clear(),t.sort((function(n,t){return e(n[1],t[1])})).forEach((function(t){var e=p(t,2),r=e[0],o=e[1];return m(i(a.prototype),"set",n).call(n,r,o)})),t}}]),a}(y(Map));function Nt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Rt={0:"Jan",1:"Feb",2:"March",3:"Apr",4:"May",5:"Jun",6:"July",7:"Aug",8:"Sept",9:"Oct",10:"Nov",11:"Dec"},Dt={H:"_getPaddedHours",M:"_getPaddedMinutes",S:"_getPaddedSeconds",b:"_getMonthAbbr",e:"getDate",Y:"getFullYear"},At=function(t){c(a,t);var e,r=(e=a,function(){var n,t=i(e);if(Nt()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function a(t){return n(this,a),"string"!=typeof t||t.match(/Z$/)||(t+="Z"),r.call(this,t||new Date)}return E(a,[{key:"format",value:function(n){var t=this;return n.replace(/%(\w)/g,(function(n,e){return Dt[e]?t[Dt[e]]():e}))}},{key:"getHumanDate",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.format("%b %e"),e=new a,r=this.getYear()==e.getYear();return r&&!n.year||(t+=", "+this.getFullYear()),t}},{key:"setDate",value:function(n,t){return t?m(i(a.prototype),"setUTCDate",this).call(this,n):m(i(a.prototype),"setDate",this).call(this,n),this}},{key:"setFullYear",value:function(n,t){return t?m(i(a.prototype),"setUTCFullYear",this).call(this,n):m(i(a.prototype),"setFullYear",this).call(this,n),this}},{key:"setHours",value:function(n,t){return t?m(i(a.prototype),"setUTCHours",this).call(this,n):m(i(a.prototype),"setHours",this).call(this,n),this}},{key:"setMilliseconds",value:function(n,t){return t?m(i(a.prototype),"setUTCMilliseconds",this).call(this,n):m(i(a.prototype),"setMilliseconds",this).call(this,n),this}},{key:"setMinutes",value:function(n,t){return t?m(i(a.prototype),"setUTCMinutes",this).call(this,n):m(i(a.prototype),"setMinutes",this).call(this,n),this}},{key:"setMonth",value:function(n,t){return t?m(i(a.prototype),"setUTCMonth",this).call(this,n):m(i(a.prototype),"setMonth",this).call(this,n),this}},{key:"setSeconds",value:function(n,t){return t?m(i(a.prototype),"setUTCSeconds",this).call(this,n):m(i(a.prototype),"setSeconds",this).call(this,n),this}},{key:"setTime",value:function(n){return m(i(a.prototype),"setTime",this).call(this,n),this}},{key:"setYear",value:function(n){return this.setYear(n),this}},{key:"toEpoch",value:function(){return this.getTime()/1e3}},{key:"_getMonthAbbr",value:function(){return Rt[this.getMonth()]||""}},{key:"_getPaddedHours",value:function(){return String(this.getHours()).padStart(2,"0")}},{key:"_getPaddedMinutes",value:function(){return String(this.getMinutes()).padStart(2,"0")}},{key:"_getPaddedSeconds",value:function(){return String(this.getSeconds()).padStart(2,"0")}}]),a}(y(Date));function Mt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var jt=function(t){c(a,t);var e,r=(e=a,function(){var n,t=i(e);if(Mt()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function a(t){var e;return n(this,a),(e=r.call(this)).prop("ro","api",t.api),e.prop("ro","defaultParams",t.defaultParams||{}),e.prop("ro","id",t.id),e.prop("ro","req",{body:null,headers:{}}),e.prop("ro","res",{body:{},headers:{}}),e.prop("rw","err",null),e.prop("rw","status","pending"),e}return E(a,[{key:"error",value:function(n,t){if(n)return this.update({err:Array.isArray(n)?n:[{message:n,source:t}],status:"error"});if(!this.err||!this.err.length)return"";var e=this.err[0],r=e.path&&e.path.match(/\w$/)&&e.path.split("/").pop();return r?r+": "+e.message:e.message}},{key:"perform",value:function(n){var t=this;return this._promise||(this._promise=new Promise((function(e){t.api.spec(t.id).then((function(e){if(!e)throw'Unknown operationId "'+t.id+'".';var r=t._paramsToRequest(e,n||t.defaultParams),o=p(r,2),i=o[0],a=o[1];if(!i)throw a;return t.update({status:"loading"}).emit("start",a),pt(a.body,"object")&&"function"!=typeof a.body.has&&(a.body=JSON.stringify(a.body)),fetch(i,a)})).then((function(n){return Promise.all([n,n.json()])})).then((function(n){var r=p(n,2),o=r[0],i=r[1];delete t._promise,e(t.parse(o,i))})).catch((function(n){delete t._promise,e(t.error(Array.isArray(n)?n:'Failed fetching operationId "'+t.id+'": '+n,"fetch"))}))})))}},{key:"is",value:function(n){return this.status==n}},{key:"parse",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.body;this.res.body=t||n,this.res.status=n.status||"201",n.headers&&(this.res.headers=n.headers);var e=null;return String(this.res.status).match(/^[23]/)||(e=t&&t.errors?t.errors:[{message:n.statusText||"Unknown error."}]),this.update({err:e,status:e?"error":"success"})}},{key:"reset",value:function(){return this.res.body={},this.res.headers={},this.res.status=0,this.update({err:null,status:"pending"})}},{key:"_extractValue",value:function(n,t){if(t.schema&&"form"==(n.tagName||"").toLowerCase())return Object.keys(t.schema.properties).reduce((function(t,e){var r=n[e];return r&&("checkbox"!=r.type||r.checked)?(t[e]=r.value,t):t}),{});if(n[t.name]&&n[t.name].tagName)return n[t.name].value;if(t.schema){var e={};return Object.keys(t.schema.properties).forEach((function(t){e[t]=n[t]})),e}return n[t.name]}},{key:"_hasProperty",value:function(n,t){return"body"==t.in||("formData"==t.in?n.formData.has(t.name):"form"==(n.tagName||"").toLowerCase()?!!n[t.name]:n.hasOwnProperty(t.name))}},{key:"_paramsToRequest",value:function(n,t){var e=this,r={headers:this.req.headers,method:n.method},o=new URL(n.url),i=[];return(n.parameters||[]).forEach((function(n){if(!e._hasProperty(t,n)&&n.required)i.push({message:"Missing property.",path:"/"+n.name});else{if(!e._hasProperty(t,n)&&!n.required)return;if("path"==n.in){var a=new RegExp("(%7B|\\{)"+gt(n.name)+"(%7D|\\})","i");o.pathname=o.pathname.replace(a,encodeURIComponent(e._extractValue(t,n)))}else if("query"==n.in)o.searchParams.set(n.name,e._extractValue(t,n));else if("formData"==n.in)delete r.headers["Content-Type"],r.body=t.formData;else if("body"==n.in)r.body=e._extractValue(t,n);else{if("header"!=n.in)throw"[Api] Parameter in:"+n.in+" is not supported.";r.header[n.name]=e._extractValue(t,n.name)}}})),i.length?[null,i]:[o,r]}}]),a}(Et);function Pt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Tt=function n(t,e,r){var o=n.singletons[t]||(n.singletons[t]=new Lt);return e?o.operation(e,r):o};Tt.singletons={};var Lt=function(t){c(u,t);var e,r,a=(e=u,function(){var n,t=i(e);if(Pt()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function u(){var t;return n(this,u),(t=a.call(this)).prop("rw","protocol",location.protocol||"http"),t.prop("rw","url",""),t}return E(u,[{key:"operation",value:function(n,t){var e=new jt({api:this,id:n,defaultParams:t});return e.req.headers={"Content-Type":"application/json"},e}},{key:"spec",value:(r=tt(Xn.mark((function n(t){var e,r,o=this;return Xn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this._ops||!t){n.next=2;break}return n.abrupt("return",this._ops[t]);case 2:if(!this._spec){n.next=4;break}return n.abrupt("return",this._spec);case 4:return n.next=6,fetch(this.url);case 6:return e=n.sent,n.next=9,e.json();case 9:if(r=n.sent,this._ops={},this._spec=r,Object.keys(r.paths).forEach((function(n){Object.keys(r.paths[n]).forEach((function(t){var e=r.paths[n][t],i=e.operationId;i&&(e.method=t.toUpperCase(),e.url=o.protocol+"//"+r.host+r.basePath+n+".json",e.parameters=(e.parameters||[]).map((function(n){return o._resolveRef(n)})),o._ops[i]=e)}))})),!this._ops||!t){n.next=15;break}return n.abrupt("return",this._ops[t]);case 15:if(!this._spec){n.next=17;break}return n.abrupt("return",this._spec);case 17:case"end":return n.stop()}}),n,this)}))),function(n){return r.apply(this,arguments)})},{key:"toFunction",value:function(){var n=this;return function(t,e){return t?n.operation(t,e):n}}},{key:"_resolveRef",value:function(n){var t=this,e=n;if(n.$ref){var r=n.$ref.replace(/^#\//,"").split("/");for(e=this._spec;r.length;)e=e[r.shift()]}return pt(e,"object")&&Object.keys(e).forEach((function(n){e[n]=t._resolveRef(e[n])})),e}}]),u}(Et),It={b:"channel_ban",C:"ctcp_block",c:"colour_filter",e:"ban_exemption",F:"enable_forwarding",f:"forward",g:"free_invite",I:"invite_exemption",j:"join_throttle",k:"password",l:"join_limit",L:"large_ban_list",m:"moderated",n:"prevent_external_send",P:"permanent",p:"privat",Q:"block_forwarded_users",q:"quiet",r:"block_unidentified",s:"secret",S:"secure_connection_only",t:"ops_topic"},Ut={a:"&",h:"%",o:"@",q:"~",v:"+"},Bt={a:"admin",B:"bot",h:"half_operator",i:"invisible",I:"whois_hide_online",o:"operator",p:"whois_hide_channels",R:"privmsg_from_registered_only",r:"registered",S:"service_bot",T:"ctcp_block",t:"vhost",v:"voice",W:"whois_notifications",x:"cloaked_hostname",z:"secure_connection",Z:"secure_connection_only"},zt=function(){var n={base:"https://twemoji.maxcdn.com/v/12.1.5/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:function(n){var t="string"==typeof n?parseInt(n,16):n;if(t<65536)return c(t);return c(55296+((t-=65536)>>10),56320+(1023&t))},toCodePoint:v},onerror:function(){this.parentNode&&this.parentNode.replaceChild(u(this.alt,!1),this)},parse:function(t,e){e&&"function"!=typeof e||(e={callback:e});return("string"==typeof t?d:l)(t,{callback:e.callback||s,attributes:"function"==typeof e.attributes?e.attributes:h,base:"string"==typeof e.base?e.base:n.base,ext:e.ext||n.ext,size:e.folder||(r=e.size||n.size,"number"==typeof r?r+"x"+r:r),className:e.className||n.className,onerror:e.onerror||n.onerror});var r},replace:m,test:function(n){e.lastIndex=0;var t=e.test(n);return e.lastIndex=0,t}},t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},e=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[#*0-9]\ufe0f?\u20e3|(?:[©®\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5\udeeb\udeec\udef4-\udefa\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd71\udd73-\udd76\udd7a-\udda2\udda5-\uddaa\uddae-\uddb4\uddb7\uddba\uddbc-\uddca\uddd0\uddde-\uddff\ude70-\ude73\ude78-\ude7a\ude80-\ude82\ude90-\ude95]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,r=/\uFE0F/g,o=String.fromCharCode(8205),i=/[&<>'"]/g,a=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,c=String.fromCharCode;return n;function u(n,t){return document.createTextNode(t?n.replace(r,""):n)}function s(n,t){return"".concat(t.base,t.size,"/",n,t.ext)}function f(n){return v(n.indexOf(o)<0?n.replace(r,""):n)}function l(n,t){for(var r,o,i,c,s,l,d,p,h,m,v,g,$,y=function n(t,e){for(var r,o,i=t.childNodes,c=i.length;c--;)3===(o=(r=i[c]).nodeType)?e.push(r):1!==o||"ownerSVGElement"in r||a.test(r.nodeName.toLowerCase())||n(r,e);return e}(n,[]),b=y.length;b--;){for(i=!1,c=document.createDocumentFragment(),l=(s=y[b]).nodeValue,p=0;d=e.exec(l);){if((h=d.index)!==p&&c.appendChild(u(l.slice(p,h),!0)),g=f(v=d[0]),p=h+v.length,$=t.callback(g,t),g&&$){for(o in(m=new Image).onerror=t.onerror,m.setAttribute("draggable","false"),r=t.attributes(v,g))r.hasOwnProperty(o)&&0!==o.indexOf("on")&&!m.hasAttribute(o)&&m.setAttribute(o,r[o]);m.className=t.className,m.alt=v,m.src=$,i=!0,c.appendChild(m)}m||c.appendChild(u(v,!1)),m=null}i&&(p<l.length&&c.appendChild(u(l.slice(p),!0)),s.parentNode.replaceChild(c,s))}return n}function d(n,t){return m(n,(function(n){var e,r,o=n,a=f(n),c=t.callback(a,t);if(a&&c){for(r in o="<img ".concat('class="',t.className,'" ','draggable="false" ','alt="',n,'"',' src="',c,'"'),e=t.attributes(n,a))e.hasOwnProperty(r)&&0!==r.indexOf("on")&&-1===o.indexOf(" "+r+"=")&&(o=o.concat(" ",r,'="',e[r].replace(i,p),'"'));o=o.concat("/>")}return o}))}function p(n){return t[n]}function h(){return null}function m(n,t){return String(n).replace(e,t)}function v(n,t){for(var e=[],r=0,o=0,i=0;i<n.length;)r=n.charCodeAt(i++),o?(e.push((65536+(o-55296<<10)+(r-56320)).toString(16)),o=0):55296<=r&&r<=56319?o=r:e.push(r.toString(16));return e.join(t||"-")}}(),Ht=Object.prototype.hasOwnProperty,qt=function(){for(var n=[],t=0;t<256;++t)n.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return n}(),Ft=function(n,t){for(var e=t&&t.plainObjects?Object.create(null):{},r=0;r<n.length;++r)void 0!==n[r]&&(e[r]=n[r]);return e},Kt={arrayToObject:Ft,assign:function(n,t){return Object.keys(t).reduce((function(n,e){return n[e]=t[e],n}),n)},compact:function(n){for(var t=[{obj:{o:n},prop:"o"}],e=[],o=0;o<t.length;++o)for(var i=t[o],a=i.obj[i.prop],c=Object.keys(a),u=0;u<c.length;++u){var s=c[u],f=a[s];"object"===r(f)&&null!==f&&-1===e.indexOf(f)&&(t.push({obj:a,prop:s}),e.push(f))}return function(n){for(var t;n.length;){var e=n.pop();if(t=e.obj[e.prop],Array.isArray(t)){for(var r=[],o=0;o<t.length;++o)void 0!==t[o]&&r.push(t[o]);e.obj[e.prop]=r}}return t}(t)},decode:function(n){try{return decodeURIComponent(n.replace(/\+/g," "))}catch(t){return n}},encode:function(n){if(0===n.length)return n;for(var t="string"==typeof n?n:String(n),e="",r=0;r<t.length;++r){var o=t.charCodeAt(r);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?e+=t.charAt(r):o<128?e+=qt[o]:o<2048?e+=qt[192|o>>6]+qt[128|63&o]:o<55296||o>=57344?e+=qt[224|o>>12]+qt[128|o>>6&63]+qt[128|63&o]:(r+=1,o=65536+((1023&o)<<10|1023&t.charCodeAt(r)),e+=qt[240|o>>18]+qt[128|o>>12&63]+qt[128|o>>6&63]+qt[128|63&o])}return e},isBuffer:function(n){return null!=n&&!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))},isRegExp:function(n){return"[object RegExp]"===Object.prototype.toString.call(n)},merge:function n(t,e,o){if(!e)return t;if("object"!==r(e)){if(Array.isArray(t))t.push(e);else{if("object"!==r(t))return[t,e];(o.plainObjects||o.allowPrototypes||!Ht.call(Object.prototype,e))&&(t[e]=!0)}return t}if("object"!==r(t))return[t].concat(e);var i=t;return Array.isArray(t)&&!Array.isArray(e)&&(i=Ft(t,o)),Array.isArray(t)&&Array.isArray(e)?(e.forEach((function(e,i){Ht.call(t,i)?t[i]&&"object"===r(t[i])?t[i]=n(t[i],e,o):t.push(e):t[i]=e})),t):Object.keys(e).reduce((function(t,r){var i=e[r];return Ht.call(t,r)?t[r]=n(t[r],i,o):t[r]=i,t}),i)}},Wt=(String.prototype.replace,Date.prototype.toISOString,Object.prototype.hasOwnProperty),Gt={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:Kt.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},Yt=function(n,t,e){if(n){var r=e.allowDots?n.replace(/\.([^.[]+)/g,"[$1]"):n,o=/(\[[^[\]]*])/g,i=/(\[[^[\]]*])/.exec(r),a=i?r.slice(0,i.index):r,c=[];if(a){if(!e.plainObjects&&Wt.call(Object.prototype,a)&&!e.allowPrototypes)return;c.push(a)}for(var u=0;null!==(i=o.exec(r))&&u<e.depth;){if(u+=1,!e.plainObjects&&Wt.call(Object.prototype,i[1].slice(1,-1))&&!e.allowPrototypes)return;c.push(i[1])}return i&&c.push("["+r.slice(i.index)+"]"),function(n,t,e){for(var r=t,o=n.length-1;o>=0;--o){var i,a=n[o];if("[]"===a)i=(i=[]).concat(r);else{i=e.plainObjects?Object.create(null):{};var c="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,u=parseInt(c,10);!isNaN(u)&&a!==c&&String(u)===c&&u>=0&&e.parseArrays&&u<=e.arrayLimit?(i=[])[u]=r:i[c]=r}r=i}return r}(c,t,e)}},Vt=function(n,t){var e=t?Kt.assign({},t):{};if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(e.ignoreQueryPrefix=!0===e.ignoreQueryPrefix,e.delimiter="string"==typeof e.delimiter||Kt.isRegExp(e.delimiter)?e.delimiter:Gt.delimiter,e.depth="number"==typeof e.depth?e.depth:Gt.depth,e.arrayLimit="number"==typeof e.arrayLimit?e.arrayLimit:Gt.arrayLimit,e.parseArrays=!1!==e.parseArrays,e.decoder="function"==typeof e.decoder?e.decoder:Gt.decoder,e.allowDots="boolean"==typeof e.allowDots?e.allowDots:Gt.allowDots,e.plainObjects="boolean"==typeof e.plainObjects?e.plainObjects:Gt.plainObjects,e.allowPrototypes="boolean"==typeof e.allowPrototypes?e.allowPrototypes:Gt.allowPrototypes,e.parameterLimit="number"==typeof e.parameterLimit?e.parameterLimit:Gt.parameterLimit,e.strictNullHandling="boolean"==typeof e.strictNullHandling?e.strictNullHandling:Gt.strictNullHandling,""===n||null==n)return e.plainObjects?Object.create(null):{};for(var r="string"==typeof n?function(n,t){for(var e={},r=t.ignoreQueryPrefix?n.replace(/^\?/,""):n,o=t.parameterLimit===1/0?void 0:t.parameterLimit,i=r.split(t.delimiter,o),a=0;a<i.length;++a){var c,u,s=i[a],f=s.indexOf("]="),l=-1===f?s.indexOf("="):f+1;-1===l?(c=t.decoder(s,Gt.decoder),u=t.strictNullHandling?null:""):(c=t.decoder(s.slice(0,l),Gt.decoder),u=t.decoder(s.slice(l+1),Gt.decoder)),Wt.call(e,c)?e[c]=[].concat(e[c]).concat(u):e[c]=u}return e}(n,e):n,o=e.plainObjects?Object.create(null):{},i=Object.keys(r),a=0;a<i.length;++a){var c=i[a],u=Yt(c,r[c],e);o=Kt.merge(o,u,e)}return Kt.compact(o)};function Jt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Zt=new(function(e){c(s,e);var a,u=(a=s,function(){var n,t=i(a);if(Jt()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function s(){var e;return n(this,s),(e=u.call(this)).prop("ro","basePath",(function(){return e._basePath})),e.prop("ro","hash",(function(){return(e._location.hash||"").replace(/^#/,"")})),e.prop("ro","path",(function(){return e._path})),e.prop("ro","params",(function(){return e._params})),e.prop("ro","query",(function(){return e._query})),e.prop("rw","activeMenu",""),e.prop("rw","baseUrl",""),e.prop("rw","component",null),e.prop("rw","match",""),e.prop("rw","requireLogin",!1),e.prop("rw","state",{}),e.prop("rw","title",document.title||""),e.prop("persist","lastUrl",""),e._history=window.history,e._location=window.location,e._onClick=e._onClick.bind(t(e)),e._onpopstate=e._onpopstate.bind(t(e)),e._basePath="",e._params={},e._path="/",e._query={},e._routes=[],e}return E(s,[{key:"conversationPath",value:function(n){var t=["","chat"];return n.connection_id&&t.push(n.connection_id),n.conversation_id&&t.push(n.conversation_id),t.map((function(n){return encodeURIComponent(n)})).join("/")}},{key:"go",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.replace){var r=[!0,this.state];e=r[0],t=r[1]}0==n.indexOf(this.baseUrl)&&(n=n.substr(this.baseUrl.length));var o=this.baseUrl+n;if(o==this._location.href)return this;this._history[e?"replaceState":"pushState"](t,this.title,o),this.render(o,t)}},{key:"param",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=this.params;if(e.hasOwnProperty(n))return e[n];var r=this.query;return r.hasOwnProperty(n)?r[n]:t}},{key:"render",value:function(n,t){var e=this;this._started||(window.addEventListener("click",this._onClick),window.addEventListener("popstate",this._onpopstate),this._started=!0),n||(n=this._location.href),t||(t=this.state),this._urlToProps(n),this._params={};for(var o=function(n){var r=e._routes[n],o=e._path.match(r.re);if(!o)return"continue";for(var i=0;i<r.names.length;i++)e._params[r.names[i]]=decodeURIComponent(o[i+1]);e.update({activeMenu:"",match:r.path,state:t}),r.cb(e);var a=document.createEvent("CustomEvent");return a.initCustomEvent("routerender",!1,!1,{}),setTimeout((function(){return document.dispatchEvent(a)}),1),{v:e}},i=0;i<this._routes.length;i++){var a=o(i);switch(a){case"continue":continue;default:if("object"===r(a))return a.v}}throw console.log({abs:n,routes:this._routes}),'[Route] No route for "'+n+'".'}},{key:"subscribe",value:function(n){return n(this),this.on("update",n)}},{key:"to",value:function(n,t){var e=[],r=[];n.split("/").forEach((function(n,t){var o=n;0==n.indexOf("*")?(o="(.*)",e.push(String(n.slice(1)||t))):0==n.indexOf(":")&&(o="([^/]+)",e.push(String(n.slice(1)||t))),r.push(o)})),this._routes.push({cb:t,names:e,path:n,re:new RegExp("^"+r.join("/")+"$")})}},{key:"update",value:function(n){return n.baseUrl&&(n.baseUrl=n.baseUrl.replace(/\/+$/,""),this._basePath=new URL(n.baseUrl).pathname.replace(/\/+$/,"")),m(i(s.prototype),"update",this).call(this,n),n.baseUrl&&this._urlToProps(location.href),this}},{key:"urlFor",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=n.match(/^\w+:/)||n.match(/^#/)?n:this.basePath+n,r=Object.keys(t).sort().filter((function(n){return!pt(t[n],"undef")})).map((function(n){return n+"="+encodeURIComponent(t[n])})).join("&");return e+(r?"?"+r:"")}},{key:"urlToForm",value:function(n){var t=this;Object.keys(this.query).forEach((function(e){var r=t.query[e],o=n[e];o&&o.tagName&&("checkbox"==o.type?o.checked=!!r:o.value=r,o.syncValue&&o.syncValue())}))}},{key:"wsUrlFor",value:function(n){return(n.match(/^\w+:/)?n:this.baseUrl+n).replace(/^http/,"ws")}},{key:"_onClick",value:function(n){if(!(n.metaKey||n.ctrlKey||n.shiftKey||n.defaultPrevented)){var t=n.target&&n.target.closest("a");if(t&&t.href){if("_self"==t.target)if((0==t.href.indexOf("/")?this.baseUrl+t.href:t.href)==location.href)return location.reload();if(!t.hasAttribute("download")&&!t.hasAttribute("target")){var e=t&&t.href.match(/#activeMenu:(\w*)/);if(e){if(ut(n.target,".sidebar-left")&&!t)return;this.update({activeMenu:e[1]==this.activeMenu?"":e[1]}),n.preventDefault()}var r=t.getAttribute("href")||"";0==r.indexOf(this.baseUrl)&&(r=r.substr(this.baseUrl.length)),0==r.indexOf(this.basePath)&&(r=r.substr(this.basePath.length)),0==r.indexOf("/")&&(this.go(r,{},t.hasAttribute("replace")),n.preventDefault())}}}}},{key:"_onpopstate",value:function(n){this.render(this._location.href,n.state)}},{key:"_pathWithoutPrefix",value:function(n){return 0==n.indexOf(this.basePath)?n.substr(this.basePath.length):n}},{key:"_urlToProps",value:function(n){var t=n.substr(this.baseUrl.length).split("#")[0].split("?");this._query=2==t.length?Vt(t.pop()):{},this._path=t[0]}}]),s}(Et)),Qt={},Xt={},ne=new RegExp("\\b[a-z]{2,5}://\\S+","g"),te={":confused:":":/",":disappointed:":":(",":grin:":";D",":heart:":"&lt;3",":kissing:":":-*",":open_mouth:":":O",":slight_smile:":":)",":smiley:":":D",":stuck_out_tongue:":":P",":thumbsup:":"(Y)",":wink:":";)"},ee=new RegExp("(^|\\s)(:\\w+:|"+Object.keys(te).map((function(n){return gt(te[n])})).join("|")+")(?=\\W|$)","gi");function re(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"single";return window.__emojiList&&(window.__emojiList.forEach((function(n){if(":"==(n.shortname||"")[0]){if(te[n.shortname]&&(Xt[te[n.shortname]]=n),Xt[n.shortname]=n,n.category){var t=":"+n.category;Qt[t]||(Qt[t]=[]),Qt[t].push(n)}n.shortname.match(/(_|:)\w/g).forEach((function(t){Qt[t]||(Qt[t]=[]),Qt[t].push(n)})),delete n.category,delete n.html,delete n.order,delete n.unicode}})),delete window.__emojiList),"group"==t?Qt[n]||[]:Xt[n]||{}}function oe(n){var t={};return[le,se,fe,ae,ue,ce,ie].forEach((function(e){n=e(n,t)})),n}function ie(n){return n.replace(/^&gt;\s(.*)/,(function(n,t){return"<blockquote>"+t+"</blockquote>"}))}function ae(n){return n.replace(/(\\?)`([^`]+)`/g,(function(n,t,e){return t?n.replace(/^\\/,""):"<code>"+e+"</code>"}))}function ce(n){return zt.parse(n.replace(ee,(function(n,t,e){return t+(re(e).emoji||e)})))}function ue(n){return n.replace(/(^|\s)(\\?)(\*+)(\w[^<]*?)\3/g,(function(n,t,e,r,o){return 1==r.length?e?n.replace(/^\\/,""):t+"<em>"+o+"</em>":2==r.length?e?n.replace(/^\\/,""):t+"<strong>"+o+"</strong>":3==r.length?e?n.replace(/^\\/,""):t+"<em><strong>"+o+"</strong></em>":n}))}function se(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.replace(/\[([a-zA-Z][^\]]+)\]\(([^)]+)\)/g,(function(n,e,r){var o=r.match(/^\s*(\w+):/)||["",""];if(o[1]&&-1==["http","https","mailto"].indexOf(o[1]))return n;t.mdLinks=!0;var i=r.substring(0,1),a=-1!=["/","#"].indexOf(i)?"":' target="_blank"';return'<a href="'+Zt.urlFor(r)+'"'+a+">"+e+"</a>"}))}function fe(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.mdLinks?n:n.replace(ne,(function(n){var t=n.match(/^(.*?)(&\w+;|\W)?$/);return'<a href="'+t[1]+'" target="_blank">'+t[1]+"</a>"+(t[2]||"")})).replace(/mailto:(\S+)/,(function(n,t){return-1!=n.indexOf('">')?n:'<a href="'+n+'" target="_blank">'+t+"</a>"}))}function le(n){var t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"};return n.replace(/[&<>"']/g,(function(n){return t[n]}))}var de={en:{"Test %1":"Test %1"}};function pe(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];var o=String(de.en[n]||n);return o.replace(/(%?)%(\d+)/g,(function(n,t,r){return"%"==t?t+r:e[r-1]}))}function he(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];return oe(pe.apply(void 0,[n].concat(e)))}function me(n,t){return t.is("not_found")?"":n.frozen?pe(n.frozen):n==t?pe("Connection messages."):(t.frozen?pe(t.frozen):t.topic)||t.is_private&&pe("Private conversation.")||pe("No topic is set.")}function ve(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function ge(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(e),!0).forEach((function(t){et(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):ve(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function $e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var ye=new(function(t){c(a,t);var e,r=(e=a,function(){var n,t=i(e);if($e()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function a(){var t;return n(this,a),(t=r.call(this)).Notification=window.Notification||{permission:"denied"},t.prop("persist","notificationCloseDelay",5e3),t.prop("persist","wantNotifications",null),t.prop("ro","appHasFocus",(function(){return document.hasFocus()})),t.prop("rw","desktopAccess",t.Notification.permission),t}return E(a,[{key:"requestDesktopAccess",value:function(){var n=this;return this.Notification.requestPermission?(this.Notification.requestPermission((function(t){return n.update({desktopAccess:t})})),this):this.update({desktopAccess:this.Notification.permission})}},{key:"show",value:function(n){var t=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.title||(e.title=document.title),!this.wantNotifications)return this._showInConsole(n,e);if("granted"!=this.desktopAccess)return this.showInApp(n,e);var r=new Notification(e.title,ge({},e,{body:n}));return r.onclick=function(n){return t._onClick(n,r,e)},setTimeout((function(){return r.close()}),this.notificationCloseDelay),r}},{key:"showInApp",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.title||(t.title=document.title);var e=document.createElement("div"),r=ge({},t,{body:n,close:function(){e.remove(),r.closed=!0},target:"app"});return e.className="notify-notification fade-in",e.innerHTML='<a href="#close" class="notify-notification__close"></a><h6 class="notify-notification__title"></h6><div class="notify-notification__content"></div>',e.querySelector("a").addEventListener("click",(function(n){n.preventDefault(),r.close()})),e.querySelector("h6").textContent=t.title,e.querySelector("div").textContent=n,-1==t.closeAfter?e.querySelector("a").remove():setTimeout((function(){return r.close()}),t.closeAfter||this.notificationCloseDelay),setTimeout((function(){return e.classList.add("is-visible")}),1),document.body.insertBefore(e,document.body.querySelector(".notify-notification")),r}},{key:"_onClick",value:function(n,t,e){t.close(),window.focus(),this.emit("click",ge({},e,{sourceEvent:n}))}},{key:"_showInConsole",value:function(n,t){return console.info("[Notify]",n,t),ge({},t,{body:n,close:function(){},target:"console"})}}]),a}(Et));function be(n){if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(n=function(n,t){if(!n)return;if("string"==typeof n)return we(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return we(n,t)}(n))){var t=0,e=function(){};return{s:e,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(n){throw n},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,a=!1;return{s:function(){r=n[Symbol.iterator]()},n:function(){var n=r.next();return i=n.done,n},e:function(n){a=!0,o=n},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}function we(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function _e(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function xe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var ke=function n(t){return n.singletons[t]||(n.singletons[t]=new Oe)};ke.singletons={};var Ee=[];Ee[WebSocket.CONNECTING]="connecting",Ee[WebSocket.OPEN]="open",Ee[WebSocket.CLOSING]="closing",Ee[WebSocket.CLOSED]="closed";var Oe=function(t){c(a,t);var e,r=(e=a,function(){var n,t=i(e);if(xe()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function a(t){var e;return n(this,a),(e=r.call(this)).prop("persist","debug",""),e.prop("ro","readyState",(function(){return e.ws.readyState})),e.prop("ro","readyStateHuman",(function(){return Ee[e.ws.readyState]})),e.prop("ro","waiting",new Map),e.prop("rw","closed",0),e.prop("rw","error",""),e.prop("rw","keepaliveInterval",1e4),e.prop("rw","url",""),e.id=0,e.queue=[],e.keepClosed=!0,e._resetWebSocket(),e}return E(a,[{key:"close",value:function(n,t){if("number"!=typeof n){var e=[1e3,n];n=e[0],t=e[1]}return this.ws.close&&this.ws.close(n,t),this.keepClosed=!0,this._keepAliveStop(),this._reconnectStop(),this._resetWebSocket(),this}},{key:"deflateMessage",value:function(n){return JSON.stringify(n)}},{key:"deleteWaitingMessage",value:function(n){this.waiting.delete(n),this.update({waiting:!0})}},{key:"getWaitingMessages",value:function(n){var t=this;return 0==arguments.length?Array.from(this.waiting.values()):n.map((function(n){return t.waiting.get(n)}))}},{key:"inflateMessage",value:function(n){return JSON.parse(n)}},{key:"is",value:function(n){return this.ws.readyState==WebSocket[n.toUpperCase()]}},{key:"open",value:function(){var n=this;if(this.ws.close)return this;try{if(!this.url)throw"Can't open WebSocket connection without URL.";this.ws=new WebSocket(this.url),this.ws.onclose=function(t){return n._onClose(t)},this.ws.onerror=function(t){return n._onError(t)},this.ws.onmessage=function(t){return n._onMessage(t)},this.ws.onopen=function(t){return n._onOpen(t)},this.keepClosed=!1,this._keepAliveStart(),this._reconnectStop(),this.update({error:"",readyState:!0})}catch(n){this._onError(n.message?n:{message:String(n)})}return this}},{key:"reconnectIn",value:function(n){return 1008!==n.code&&1011!==n.code&&(this.closed<=1?1e3:this.closed>5?1e4:2*this.closed*1e3)}},{key:"send",value:function(n){var t=n.id||String(++this.id);return this.queue.push(function(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(e),!0).forEach((function(t){et(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):_e(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}({},n,{id:t})),this.open(),this._dequeue(),this.on("message_"+t)}},{key:"_dequeue",value:function(){var n=this.queue;for(n.length&&this.update({waiting:!0});n.length;){if(this.ws.readyState!=WebSocket.OPEN)return;var t=n.shift();this.ws.send(this.deflateMessage(t)),t.waitingForResponse=!0,t.ts||(t.ts=new At),this.waiting.set(t.id,t)}}},{key:"_keepAliveStart",value:function(){var n=this;this._keepAliveStop(),this.keepaliveTid=setInterval((function(){return n.ws.readyState==WebSocket.OPEN&&n.ws.send("{}")}),this.keepaliveInterval)}},{key:"_keepAliveStop",value:function(){this.keepaliveTid&&clearTimeout(this.keepaliveTid),delete this.keepaliveTid}},{key:"_onClose",value:function(n){this.debug&&console.log("[Socket:close]",(new At).toISOString(),n);var t,e=be(this.waiting);try{for(e.s();!(t=e.n()).done;){var r=p(t.value,2),o=r[0],i=r[1];Object.keys(i).length<=1&&this.waiting.delete(o),i.waitingForResponse=!1}}catch(n){e.e(n)}finally{e.f()}this._keepAliveStop(),this._resetWebSocket(),this.update({closed:this.closed+1,readyState:!0,waiting:!0}),this._reconnectStart(this.reconnectIn(n))}},{key:"_onError",value:function(n){var t=String(n.message||n);t&&0!=t.indexOf("[")||(t="Could not connect."),this.debug&&console.log("[Socket:error]",(new At).toISOString(),t,n),this.update({error:t})}},{key:"_onMessage",value:function(n){var t=this.inflateMessage(n.data);if(t.id&&(this.emit("message_"+t.id,t),this.waiting.delete(t.id)),this.emit("message",t),this.update({waiting:!0}),t.errors&&!t.id){var e,r=be(this.waiting.keys());try{for(r.s();!(e=r.n()).done;){var o=e.value;this.emit("message_"+o,t)}}catch(n){r.e(n)}finally{r.f()}this.waiting.clear()}}},{key:"_onOpen",value:function(n){this.debug&&console.log("[Socket:open]",(new At).toISOString(),n),this.update({closed:0,error:"",readyState:!0}),this._dequeue()}},{key:"_reconnectStart",value:function(n){var t=this;return this._reconnectStop(),this.debug&&console.log("[Socket:reconnect]",(new At).toISOString(),n),!0===n?this.open():"number"!=typeof n?this.keepClosed=!0:void(this.reconnectTid=setTimeout((function(){return t.open()}),n))}},{key:"_reconnectStop",value:function(){this.reconnectTid&&clearTimeout(this.reconnectTid),delete this.reconnectTid}},{key:"_resetWebSocket",value:function(){this.ws={readyState:WebSocket.CLOSED}}}]),a}(Et);function Ce(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function Se(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(e),!0).forEach((function(t){et(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Ce(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function Ne(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Re=new RegExp("^[#&]"),De=function(n,t){return t.modes.operator||!1-n.modes.operator||t.modes.voice||!1-n.modes.voice||n.name.localeCompare(t.name)},Ae=0,Me=function(t){c(s,t);var e,r,a,u=(e=s,function(){var n,t=i(e);if(Ne()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function s(t){var e;n(this,s),e=u.call(this);var r=[t.connection_id,t.conversation_id,""].filter((function(n){return void 0!==n})).join(":");return e.prop("persist","userInput","",{key:r+"userInput"}),e.prop("ro","_participants",new St([],{sorter:De})),e.prop("ro","color",bt(t.conversation_id||t.connection_id||"")),e.prop("ro","connection_id",t.connection_id||""),e.prop("ro","is_private",(function(){return e.conversation_id&&!Re.test(e.name)})),e.prop("ro","nParticipants",(function(){return e.participants().length})),e.prop("ro","path",Zt.conversationPath(t)),e.prop("rw","errors",0),e.prop("rw","historyStartAt",null),e.prop("rw","historyStopAt",null),e.prop("rw","messages",[]),e.prop("rw","modes",{}),e.prop("rw","name",t.name||t.conversation_id||t.connection_id||"ERR"),e.prop("rw","status","pending"),e.prop("rw","topic",t.topic||""),e.prop("rw","unread",t.unread||0),e.prop("rw","window",null),t.hasOwnProperty("conversation_id")?(e.prop("ro","conversation_id",t.conversation_id),e.prop("ro","title",(function(){return[e.name,e.connection_id].join(" - ")})),e.prop("rw","frozen",t.frozen||"")):(e.prop("ro","frozen",(function(){return e._calculateFrozen()})),e.prop("ro","title",(function(){return e.name}))),t.conversation_id&&e.prop("persist","wantNotifications",e.is_private,{key:t.conversation_id+":wantNotifications"}),e.socket=t.socket||ke("/events"),e._addOperations(),e}return E(s,[{key:"addMessage",value:function(n){if(this._maybeIncreaseUnread(n),this._maybeNotify(n),this.historyStopAt||"private"!=n.type)return this.addMessages("push",[n])}},{key:"addMessages",value:function(n,t){var e=0,r=t.length;switch(n){case"push":e=this.messages.length,r=(t=this.messages.concat(t)).length;break;case"unshift":t=t.concat(this.messages)}for(var o=e;o<r;o++){var i=t[o];if(!i.hasOwnProperty("markdown")){if(!i.from){var a=[!0,this.connection_id||"Convos","Convos"];i.internal=a[0],i.from=a[1],i.fromId=a[2]}i.fromId||(i.fromId=i.from.toLowerCase()),i.type||(i.type="notice"),i.vars&&(i.message=pe.apply(void 0,[i.message].concat(x(i.vars)))),i.id="msg_"+ ++Ae,i.color="Convos"==i.fromId?"inherit":bt(i.from.toLowerCase()),i.ts=new At(i.ts),i.embeds=(i.message.match(/https?:\/\/(\S+)/g)||[]).map((function(n){return n.replace(/(\W)?$/,"")})),i.markdown=oe(i.message)}}return this.update({messages:t}),this}},{key:"is",value:function(n){return"connection"==n?!this.conversation_id:"conversation"==n?this.conversation_id&&!this.is("notifications"):"frozen"==n?this.frozen&&!0:"locked"==n?"Invalid password."==this.frozen:"not_found"==n?"Not found."==this.frozen:"notifications"!=n&&("private"==n?this.is_private:"search"!=n&&("unread"==n?this.unread&&!0:this.status==n))}},{key:"load",value:(a=tt(Xn.mark((function n(){var t,e,r,o=arguments;return Xn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:{},!this._skipLoad(t)){n.next=3;break}return n.abrupt("return",this);case 3:return this.update({status:"loading"}),t.limit||(t.limit=t.around?30:40),n.next=7,this.messagesOp.perform(Se({},t,{connection_id:this.connection_id,conversation_id:this.conversation_id}));case 7:return this.update({status:this.messagesOp.status}),e=this.messagesOp.res.body,r=[],(t.around||!t.after&&!t.before)&&(r.push.apply(r,this.messages.filter((function(n){return n.internal}))),this.update({messages:[]})),this.addMessages(t.before?"unshift":"push",e.messages||[]),this.addMessages("push",r),this._setEndOfStream(t,e),n.abrupt("return",this);case 15:case"end":return n.stop()}}),n,this)}))),function(){return a.apply(this,arguments)})},{key:"findParticipant",value:function(n){return this._participants.get(this._participantId(pt(n,"undef")?"":n))}},{key:"openWindow",value:function(n,t){var e=this,r=window.open(n,t||this.path.replace(/\W/g,"_").replace(/^_+/,""),"");return["beforeunload","close"].forEach((function(n){return r.addEventListener(n,(function(){return e.update({window:null})}))})),this.update({window:r})}},{key:"participants",value:function(){var n=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.forEach((function(t){t.nick||(t.nick=t.name||"");var e=n._participantId(t.nick),r=n._participants.get(e);r&&(Object.keys(t).forEach((function(n){r[n]=t[n]})),t=r),t.modes||(t.modes={}),n._calculateModes(Bt,t.mode,t.modes),n._participants.set(e,Se({name:t.nick},t,{color:bt(e),id:e,ts:new At}))})),t.length&&this.update({_participants:!0}),this._participants.toArray()}},{key:"send",value:function(n){return"string"==typeof n&&(n={message:n}),this.socket.send(Se({method:"send",connection_id:this.connection_id,conversation_id:this.conversation_id||""},n))}},{key:"markAsRead",value:(r=tt(Xn.mark((function n(){return Xn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.markAsReadOp){n.next=2;break}return n.abrupt("return");case 2:return this.update({errors:0,unread:0}),n.next=5,this.markAsReadOp.perform({connection_id:this.connection_id,conversation_id:this.conversation_id});case 5:return n.abrupt("return",this.update({unread:0}));case 6:case"end":return n.stop()}}),n,this)}))),function(){return r.apply(this,arguments)})},{key:"update",value:function(n){return this._loadParticipants(),m(i(s.prototype),"update",this).call(this,n)}},{key:"videoInfo",value:function(n){var t=n.nick,e=n.videoService,r=encodeURIComponent([this.connection_id,this.conversation_id].join("-")),o={icon:this.window?"video-slash":"video",roomName:r};if(!this.conversation_id||!e)return o;try{var i=new URL(e).host;o.convosUrl=Zt.urlFor("/video/"+i+"/"+r,{nick:t}),o.realUrl=e.replace(/\/*$/,"/")+r}catch(n){console.error("videoInfo",n)}return o}},{key:"wsEventMode",value:function(n){n.nick?(this.participants([{nick:n.nick,mode:n.mode}]),this.addMessage({message:"%1 got mode %2 from %3.",vars:[n.nick,n.mode,n.from]})):this.update({modes:this._calculateModes(It,n.mode,this.modes)})}},{key:"wsEventNickChange",value:function(n){var t=this._participantId(n.old_nick);if(this._participants.has(t)&&n.old_nick!=n.new_nick){this._participants.delete(t),this.participants([{nick:n.new_nick}]);var e="me"==n.type?"You (%1) changed nick to %2.":"%1 changed nick to %2.";this.addMessage({message:e,vars:[n.old_nick,n.new_nick]})}}},{key:"wsEventPart",value:function(n){var t=this.findParticipant(n.nick);t&&!t.me&&(this._participants.delete(this._participantId(n.nick)),this.update({_participants:!0}),n.silent||this.addMessage(this._partMessage(n)))}},{key:"wsEventSentClear",value:function(n){n.errors||(this.update({messages:[]}),this.addMessage({message:"History was cleared for %1.",vars:[this.name]}))}},{key:"wsEventSentNames",value:function(n){this._updateParticipants(n);var t={message:"Participants (%1): %2",vars:[]},e=this._participants.toArray().map((function(n){return(Ut[n.mode]||n.mode||"")+n.name}));e.length>1&&(t.message+=" and %3.",t.vars[2]=e.pop()),t.vars[0]=e.length,t.vars[1]=e.join(", "),this.addMessage(t)}},{key:"wsEventSentTopic",value:function(n){var t=n.topic?"Topic for %1 is: %2":"No topic is set for %1.";this.addMessage({message:t,vars:[this.name,n.topic]}),this.update({topic:n.topic})}},{key:"_addOperations",value:function(){this.prop("ro","messagesOp",Tt("/api","conversationMessages")),this.prop("ro","markAsReadOp",Tt("/api","markConversationAsRead"))}},{key:"_calculateModes",value:function(n,t,e){var r=(t||"").match(/^(\+|-)?(.*)/)||["","+",""],o=p(r,3),i=(o[0],o[1]);o[2].split("").forEach((function(t){e[n[t]||t]="-"!=i}))}},{key:"_calculateFrozen",value:function(){return""}},{key:"_loadParticipants",value:function(){if(!this.participantsLoaded&&this.conversation_id&&this.messagesOp&&!this.is("frozen")&&this.messagesOp.is("success"))return this.participantsLoaded=!0,this.is_private?this.send("/whois "+this.conversation_id):this.send("/names").then(this._updateParticipants.bind(this))}},{key:"_maybeIncreaseUnread",value:function(n){n.from&&!n.yourself&&-1!=["action","error","private"].indexOf(n.type)&&this.update({unread:this.unread+1})}},{key:"_maybeNotify",value:function(n){if(n.from&&!n.yourself&&(n.highlight||this.wantNotifications)&&-1!=["action","error","private"].indexOf(n.type)&&!ye.appHasFocus){var t=n.from==this.name?n.from:pe("%1 in %2",n.from,this.name);this.lastNotification=ye.show(n.message,{path:this.path,title:t})}}},{key:"_noop",value:function(){}},{key:"_participantId",value:function(n){return n.toLowerCase()}},{key:"_partMessage",value:function(n){var t={message:"%1 parted.",vars:[n.nick]};return n.kicker?(t.message="%1 was kicked by %2"+(n.message?": %3":""),t.vars.push(n.kicker),t.vars.push(n.message)):n.message&&(t.message+=" Reason: %2",t.vars.push(n.message)),t}},{key:"_realMessage",value:function(n){for(var t=-1==n?-1:1,e=this.messages,r=-1==n?this.messages.length-1:0;e[r];){if(!e[r].internal)return e[r];r+=t}return null}},{key:"_setEndOfStream",value:function(n,t){if(!n.before&&!t.after){var e=t.messages.slice(-1)[0];this.update({historyStopAt:new At(e&&e.ts)})}if(!n.after&&!t.before){var r=t.messages[0];this.update({historyStartAt:new At(r&&r.ts)})}t.after&&this.update({historyStopAt:null}),t.before&&this.update({historyStartAt:null}),t.messages&&t.messages.length<=1&&this.update({historyStartAt:new At,historyStopAt:new At})}},{key:"_skipLoad",value:function(n){return!(this.messagesOp&&!this.is("loading"))||(this.messages.length?n.around?!!this.messages.find((function(t){return t.ts.toISOString()==n.around})):!(!n.before||!this.historyStartAt)||!(!n.after||!this.historyStopAt):this.is("success"))}},{key:"_updateParticipants",value:function(n){this._participants.clear(),this.participants(n.participants),n.stopPropagation()}}]),s}(Et);function je(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function Pe(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?je(Object(e),!0).forEach((function(t){et(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):je(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function Te(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Le=function(n,t){return(n.is_private||0)-(t.is_private||0)||n.name.localeCompare(t.name)},Ie=function(t){c(a,t);var e,r=(e=a,function(){var n,t=i(e);if(Te()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function a(t){var e;n(this,a),(e=r.call(this,t)).prop("ro","conversations",new St([],{sorter:Le})),e.prop("rw","on_connect_commands",t.on_connect_commands||""),e.prop("rw","state",t.state||"queued"),e.prop("rw","wanted_state",t.wanted_state||"connected"),e.prop("rw","url","string"==typeof t.url?new rt(t.url):t.url||new rt("convos://loopback"));var o=t.me||{},i=o.nick||e.url.searchParams.get("nick")||"";return e.prop("rw","nick",i),e.prop("rw","real_host",o.real_host||e.url.hostname),e.prop("rw","server_op",o.server_op||!1),e.participants((t.service_accounts||[]).map((function(n){return{nick:n}})).concat({nick:i})),e}return E(a,[{key:"ensureConversation",value:function(n){var t=this,e=this.conversations.get(n.conversation_id);return e?e.update(n):((e=new Me(Pe({},n,{connection_id:this.connection_id}))).on("message",(function(n){return t.emit("message",n)})),e.on("update",(function(){return t.update({conversations:!0})})),this._addDefaultParticipants(e),this.conversations.set(e.conversation_id,e),this.update({conversations:!0}),this.emit("conversationadd",e),e)}},{key:"findConversation",value:function(n){return this.conversations.get(n.conversation_id)||null}},{key:"is",value:function(n){return this.state==n||m(i(a.prototype),"is",this).call(this,n)}},{key:"removeConversation",value:function(n){var t=this.findConversation(n)||n;return this.conversations.delete(t.conversation_id),this.emit("conversationremove",t),this.update({conversations:!0})}},{key:"send",value:function(n){"string"==typeof n&&(n={message:n});var t=new RegExp("^"+this.participants().map((function(n){return n.id})).join("|")+":","i");return 0==n.message.indexOf("/")||n.message.match(t)||(n.message="/quote "+n.message),m(i(a.prototype),"send",this).call(this,n)}},{key:"update",value:function(n){return n.url&&"string"==typeof n.url&&(n.url=new rt(n.url)),m(i(a.prototype),"update",this).call(this,n)}},{key:"wsEventConnection",value:function(n){this.update({state:n.state}),this.addMessage(n.message?{message:"Connection state changed to %1: %2",vars:[n.state,n.message]}:{message:"Connection state changed to %1.",vars:[n.state]})}},{key:"wsEventFrozen",value:function(n){var t=this.findConversation(n),e=t&&t.frozen;this.ensureConversation(n).participants([{nick:this.nick,me:!0}]),n.frozen&&(t||this).addMessage({message:n.frozen,vars:[]}),e&&!n.frozen&&t.addMessage({message:"Connected.",vars:[]})}},{key:"wsEventMe",value:function(n){this.wsEventNickChange(n),n.server_op&&this.addMessage({message:"You are an IRC operator.",vars:[],highlight:!0}),this.update(n)}},{key:"wsEventMessage",value:function(n){return n.yourself=n.from==this.nick,n.conversation_id?this.ensureConversation(n).addMessage(n):this.addMessage(n)}},{key:"wsEventNickChange",value:function(n){var t={old_nick:n.old_nick||this.nick,new_nick:n.new_nick||n.nick,type:n.type};n.old_nick==this.nick&&(t.me=!0),m(i(a.prototype),"wsEventNickChange",this).call(this,t),this.conversations.forEach((function(n){return n.wsEventNickChange(t)}))}},{key:"wsEventError",value:function(n){var t={message:ft(n)||n.frozen||"Unknown error from %1.",sent:n,type:"error",vars:n.command||[n.message]},e=(n.message||"").match(/^\/j(oin)? (\S+)/);if(e)return this.ensureConversation(Pe({},n,{conversation_id:e[2]}));var r=n.conversation_id&&n.frozen?this.ensureConversation(n):this.findConversation(n)||this;r.update({errors:this.errors+1}),r.addMessage(t)}},{key:"wsEventJoin",value:function(n){var t=this.ensureConversation(n),e=n.nick||this.nick;e==this.nick||n.silent||t.addMessage({message:"%1 joined.",vars:[e]}),t.participants([{nick:e}])}},{key:"wsEventPart",value:function(n){if(n.nick==this.nick)return this.removeConversation(n);n.conversation_id||this.conversations.forEach((function(t){return t.wsEventPart(n)}))}},{key:"wsEventQuit",value:function(n){this.wsEventPart(n)}},{key:"wsEventSentJoin",value:function(n){this.wsEventJoin(n)}},{key:"wsEventSentList",value:function(n){var t=n.args||"/*/";this.addMessage(n.done?{message:"Found %1 of %2 conversations from %3.",vars:[n.conversations.length,n.n_conversations,t]}:{message:"Found %1 of %2 conversations from %3, but conversations are still loading.",vars:[n.conversations.length,n.n_conversations,t]})}},{key:"wsEventSentMode",value:function(n){var t=this.findConversation(n)||this,e=(n.command[1]||"").match(/(\W*)(\w)$/);if(!e)return console.log("[wsEventSentMode] Unable to handle message:",n);switch(e.shift(),e[1]){case"":return t.addMessage({message:"%s has mode %s",vars:[n.conversation_id,n.mode]});case"k":return t.addMessage({message:"+"==e[0]?"Key was set.":"Key was unset."});case"b":return this._wsEventSentModeB(n,e)}}},{key:"_wsEventSentModeB",value:function(n,t){var e=this.findConversation(n)||this;if(n.banlist)n.banlist.length||e.addMessage({message:"Ban list is empty."}),n.banlist.forEach((function(n){e.addMessage({message:"Ban mask %1 set by %2 at %3.",vars:[n.mask,n.by,new Date(1e3*n.ts).toLocaleString()]})}));else{var r="+"==t[0]?"set":"removed";e.addMessage({message:"Ban mask %1 ".concat(r,"."),vars:[n.command[2]]})}}},{key:"wsEventSentQuery",value:function(n){this.ensureConversation(n)}},{key:"wsEventSentWhois",value:function(n){var t="%1 (%2@%3, %4)",e=[n.nick,n.user,n.host,n.name],r=Object.keys(n.channels).sort().map((function(t){return(Ut[n.channels[t].mode]||"")+t}));n.channels=r,n.idle_for&&r.length?(t+=" has been idle for %5s in %6.",e.push(n.idle_for),e.push(r.join(", "))):n.idle_for&&!r.length?(t+="has been idle for %5s, and is not in any channels.",e.push(n.idle_for)):r.length?(t+=" is active in %5.",e.push(r.join(", "))):t+=" is not in any channels.",(this.findConversation(n)||this).addMessage({message:t,vars:e,sent:n})}},{key:"_addDefaultParticipants",value:function(n){var t=[{nick:this.nick,me:!0}];n.is_private&&t.push({nick:n.name}),n.participants(t)}},{key:"_addOperations",value:function(){this.prop("ro","markAsReadOp",Tt("/api","markConnectionAsRead")),this.prop("ro","messagesOp",Tt("/api","connectionMessages"))}},{key:"_calculateFrozen",value:function(){switch(this.state){case"connected":return"";case"disconnected":return"Disconnected.";case"unreachable":return"Unreachable.";default:return"Connecting..."}}}]),a}(Me);function Ue(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function Be(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var ze=function(t){c(a,t);var e,r=(e=a,function(){var n,t=i(e);if(Be()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function a(t){return n(this,a),r.call(this,function(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(e),!0).forEach((function(t){et(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Ue(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}({},t,{connection_id:"",conversation_id:"notifications",is_private:!0,name:"Notifications"}))}return E(a,[{key:"addMessage",value:function(n){return this.update({unread:this.unread+1}),this.addMessages("push",[n])}},{key:"is",value:function(n){return"notifications"==n||m(i(a.prototype),"is",this).call(this,n)}},{key:"send",value:function(){return Promise.resolve({})}},{key:"_addOperations",value:function(){this.prop("ro","messagesOp",Tt("/api","notificationMessages")),this.prop("ro","markAsReadOp",Tt("/api","markNotificationsAsRead"))}}]),a}(Me);function He(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function qe(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?He(Object(e),!0).forEach((function(t){et(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):He(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function Fe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Ke=function(t){c(u,t);var e,r,a=(e=u,function(){var n,t=i(e);if(Fe()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function u(t){var e;return n(this,u),(e=a.call(this,qe({},t,{connection_id:"",conversation_id:"search",is_private:!0,name:"Search"}))).prop("rw","query",""),e.update({status:"success"}),e}return E(u,[{key:"is",value:function(n){return"conversation"!=n&&("search"==n||m(i(u.prototype),"is",this).call(this,n))}},{key:"load",value:(r=tt(Xn.mark((function n(t){var e,r;return Xn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.is("loading")){n.next=2;break}return n.abrupt("return",this);case 2:if((e=qe({},t)).match=t.match||t.message,null==e.match&&(e.match=""),e.match=e.match.replace(/\s*conversation:(\S+)\s*/,(function(n,t){return[" ",e.conversation_id=t][0]})).replace(/\s*from:(\S+)\s*/,(function(n,t){return[" ",e.from=t][0]})).replace(/\s*([&#]\S+)\s*/,(function(n,t){return[" ",e.conversation_id=t][0]})),e.match=e.match.trim(),e.match.match(/\S/)){n.next=9;break}return n.abrupt("return",this.update({messages:[]}).addMessages([{message:'Search query "%1" does not contain anything to search for.',vars:[t.message]}]));case 9:return this.update({messages:[],query:e.match,status:"loading"}),n.next=12,this.messagesOp.perform(e);case 12:return r=this.messagesOp.res.body,this.addMessages(e.before?"unshift":"push",r.messages||[]),n.abrupt("return",this.update({status:this.messagesOp.status}));case 15:case"end":return n.stop()}}),n,this)}))),function(n){return r.apply(this,arguments)})},{key:"send",value:function(n){return"string"==typeof n&&(n={message:n}),this.emit("send",n),Promise.resolve(n)}},{key:"_addOperations",value:function(){this.prop("ro","messagesOp",Tt("/api","searchMessages")),this.prop("ro","markAsReadOp",null)}},{key:"_loadParticipants",value:function(){}}]),u}(Me);function We(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function Ge(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?We(Object(e),!0).forEach((function(t){et(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):We(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function Ye(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Ve=function(t){c(u,t);var e,r,a=(e=u,function(){var n,t=i(e);if(Ye()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function u(t){var e;return n(this,u),(e=a.call(this)).prop("ro","connections",new St),e.prop("ro","notifications",new ze({})),e.prop("ro","search",new Ke({})),e.prop("ro","roles",new Set),e.prop("ro","unread",(function(){return e._calculateUnread()})),e.prop("rw","activeConversation",e.notifications),e.prop("rw","email",""),e.prop("rw","forced_connection",!1),e.prop("rw","default_connection","irc://chat.freenode.net:6697/%23convos"),e.prop("rw","highlightKeywords",[]),e.prop("rw","status","pending"),e.prop("rw","video_service",""),e.prop("persist","ignoreStatuses",!1),e.socket=t.socket||ke("/events"),e.socket.on("message",(function(n){return e._dispatchMessage(n)})),e.socket.on("update",(function(n){return e._onConnectionChange(n)})),e}return E(u,[{key:"conversations",value:function(n){var t=[];return this.connections.toArray().forEach((function(e){e.conversations.toArray().forEach((function(e){n&&!n(e)||t.push(e)}))})),t}},{key:"ensureConversation",value:function(n,t){var e=this;if(n.conversation_id){var r=this.ensureConversation({connection_id:n.connection_id},!0);return this._maybeUpgradeActiveConversation(r.ensureConversation(n))}var o=this.findConversation(n);return o?o.update(n):((o=new Ie(Ge({},n))).on("conversationadd",(function(n){return e._maybeUpgradeActiveConversation(n)})),o.on("conversationremove",(function(n){return n==e.activeConversation&&e.setActiveConversation(n)})),o.on("update",(function(n){return e.update({connections:!0})})),this.connections.set(o.connection_id,o),this.update({connections:!0}),t?o:this._maybeUpgradeActiveConversation(o))}},{key:"findConversation",value:function(n){var t=this.connections.get(n.connection_id);return n.conversation_id?t&&t.findConversation(n)||null:t}},{key:"is",value:function(n){var t=this;return Array.isArray(n)?!!n.filter((function(n){return t.is(n)})).length:!!this.roles.has(n)||this.status==n}},{key:"load",value:(r=tt(Xn.mark((function n(){var t,e,r=this;return Xn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.is("loading")){n.next=2;break}return n.abrupt("return",this);case 2:return this.update({status:"loading"}),n.next=5,this.socket.send({method:"load",object:"user",params:{connections:!0,conversations:!0}});case 5:if(!(t=n.sent).errors){n.next=9;break}return this.roles.add("anonymous"),n.abrupt("return",this.update({roles:!0,status:t.errors?"error":"success"}));case 9:return e=t.user||{},this.connections.clear(),(e.connections||[]).forEach((function(n){return r.ensureConversation(Ge({},n,{status:"pending"}))})),(e.conversations||[]).forEach((function(n){return r.ensureConversation(Ge({},n,{status:"pending"}))})),this.notifications.update({unread:e.unread||0}),this.roles.clear(),this.roles.add(e.email?"authenticated":"anonymous"),(e.roles||[]).forEach((function(n){return r.roles.add(n)})),n.abrupt("return",this.update({email:e.email||"",default_connection:e.default_connection||"",forced_connection:e.forced_connection||!1,highlightKeywords:e.highlight_keywords||[],roles:!0,status:t.errors?"error":"success",video_service:e.video_service||""}));case 18:case"end":return n.stop()}}),n,this)}))),function(){return r.apply(this,arguments)})},{key:"removeConversation",value:function(n){var t=this.findConversation({connection_id:n.connection_id});if(n.conversation_id)return t&&t.removeConversation(n);this.connections.delete(n.connection_id),t==this.activeConversation&&this.setActiveConversation(t),this.update({connections:!0})}},{key:"setActiveConversation",value:function(n){var t=!n.connection_id&&!n.conversation_id&&this.notifications;if(t)return this.update({activeConversation:t});if(t=this.findConversation(n))return this.update({activeConversation:t});var e=Ge({},n,{connection_id:n.connection_id||"",frozen:"Not found."});return["conversation_id","name"].forEach((function(t){return n.hasOwnProperty(t)&&(e[t]=n[t])})),this.update({activeConversation:e.conversation_id?new Me(e):new Ie(e)})}},{key:"_calculateUnread",value:function(){var n=this.activeConversation;return this.notifications.unread+this.conversations((function(n){return n.is_private})).reduce((function(t,e){return t+(e==n?0:e.unread)}),0)}},{key:"_dispatchMessage",value:function(n){n.dispatchTo=("wsEvent_"+this._getEventNameFromMessage(n)).replace(/_(\w)/g,(function(n,t){return t.toUpperCase()})),n.bubbles=!0,n.stopPropagation=function(){n.bubbles=!1},n.silent=this.ignoreStatuses,this.emit(n.dispatchTo,n),n.highlight&&this.notifications.addMessage(n);var t=this.findConversation({connection_id:n.connection_id});if(t&&(t[n.dispatchTo]&&t[n.dispatchTo](n),n.bubbles)){var e=t.findConversation(n);e&&e[n.dispatchTo]&&e[n.dispatchTo](n)}}},{key:"_getEventNameFromMessage",value:function(n){return n.errors?"error":"state"==n.event?n.type:"sent"==n.event&&n.message.match(/\/\S+/)?(n.command=n.message.split(/\s+/).filter((function(n){return n.length})),n.command[0]=n.command[0].substring(1),"sent_"+n.command[0]):n.event}},{key:"_maybeUpgradeActiveConversation",value:function(n){var t=this.activeConversation;return n.connection_id&&n.connection_id!=t.connection_id||n.conversation_id&&n.conversation_id!=t.conversation_id||this.update({activeConversation:n}),n}},{key:"_onConnectionChange",value:function(n){if(n.is("open")&&this.is("pending"))return this.load();n.is("closed")&&(this.connections.forEach((function(n){return n.update({state:"unreachable"})})),this.is("loading")||this.update({status:"pending"}))}}]),u}(Et);function Je(n){var t=n-1;return t*t*t+1}function Ze(n,t){var e=t.delay,r=void 0===e?0:e,o=t.duration,i=void 0===o?400:o,a=t.easing,c=void 0===a?C:a,u=+getComputedStyle(n).opacity;return{delay:r,duration:i,easing:c,css:function(n){return"opacity: ".concat(n*u)}}}function Qe(n,t){var e=t.delay,r=void 0===e?0:e,o=t.duration,i=void 0===o?400:o,a=t.easing,c=void 0===a?Je:a,u=t.x,s=void 0===u?0:u,f=t.y,l=void 0===f?0:f,d=t.opacity,p=void 0===d?0:d,h=getComputedStyle(n),m=+h.opacity,v="none"===h.transform?"":h.transform,g=m*(1-p);return{delay:r,duration:i,easing:c,css:function(n,t){return"\n\t\t\ttransform: ".concat(v," translate(").concat((1-n)*s,"px, ").concat((1-n)*l,"px);\n\t\t\topacity: ").concat(m-g*t)}}}function Xe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var nr=new(function(t){c(a,t);var e,r=(e=a,function(){var n,t=i(e);if(Xe()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function a(){var t;return n(this,a),(t=r.call(this)).prop("cookie","colorScheme","auto"),t.prop("cookie","theme","convos"),t.prop("cookie","compactDisplay",!1),t.prop("persist","expandUrlToMedia",!0),t.prop("persist","version",""),t.prop("ro","colorSchemeOptions",["Auto","Light","Dark"].map((function(n){return[n.toLowerCase(),n]}))),t.prop("ro","isWide",(function(){return t.width>800})),t.prop("ro","themeOptions",(function(){return Array.from(t._themeMap.entries())})),t.prop("rw","height",0),t.prop("rw","osColorScheme",""),t.prop("rw","width",0),t._themeMap=new Map([]),t}return E(a,[{key:"activateTheme",value:function(n,t){this._themeMap.size||this.loadThemes(),n||(n=this.theme),t||(t=this.colorScheme);for(var e,r=["auto"==t?this.osColorScheme:t,"normal","light"],o=0;o<r.length&&!(e=document.getElementById("theme_alt__"+r[o]+"-"+n));o++);return vt(document,'link[rel*="style"][title]',(function(n){e||(e=n),n.disabled=!0,n.disabled=n.href!=e.href,n.setAttribute("media",n==e?"":"none"),n.setAttribute("rel",n==e?"stylesheet":"alternate stylesheet")})),this.update({colorScheme:t,theme:n})}},{key:"hasColorSchemes",value:function(n){return vt(document,'link[id$="-'+n+'"]').length>1}},{key:"loadThemes",value:function(){var n=this;vt(document,'link[rel="alternate stylesheet"][title]',(function(t){var e=t.title.replace(/\s\([a-z]+\)$/,"");n._themeMap.set(t.id.replace(/^theme_alt__[a-z]+-/,""),e)})),this._matchMedia||(this._matchMedia=window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):{addListener:function(){}},this._matchMedia.addListener((function(t){return n.update({osColorScheme:t.matches?"dark":"light"}).activateTheme()})),this.update({osColorScheme:this._matchMedia.matches?"dark":"light"}))}},{key:"settings",value:function(n,t){return 2==arguments.length?this._settingsSet(n,t):this._settingsGet(n)}},{key:"showFullscreen",value:function(n){var t,e,r,o,i=this,a=(t=document.body,e="fullscreen-wrapper",r=function(n){n.addEventListener("click",(function(t){return t.target==n&&n.hide()})),n.hide=function(){a.classList.add("hidden"),i.emit("hidemediawrapper",a)}},(o=t&&t.querySelector("."+e.split(" ").join(".")))||((o=document.createElement("div")).className=e,t&&t.appendChild(o),r&&r(o),o));return $t(a),n?(a.classList.remove("hidden"),a.appendChild(n.cloneNode(!0)),a):a.hide()}},{key:"_settingsGet",value:function(n){if("app_mode"==n)return document.body.classList.contains("for-app");if("notify_enabled"==n)return document.body.classList.contains("notify-enabled");"organization_name"==n&&(n="contactorganization"),"organization_url"==n&&(n="contactnetworkaddress");var t=this._settingsEl(n);if(!t)throw'Cannot get settings for "'+n+'".';var e={no:!1,yes:!0};return"contact"==n?atob(t.content||""):e.hasOwnProperty(t.content)?e[t.content]:t.content}},{key:"_settingsEl",value:function(n){return document.querySelector('meta[name="convos:'+n+'"]')||document.querySelector('meta[name="'+n+'"]')}},{key:"_settingsSet",value:function(n,t){if("app_mode"==n)return yt("body",/(for-)(app|cms)/,t?"app":"cms");if("notify_enabled"==n)return yt("body",/(notify-)(disabled)/,t?"enabled":"disabled");"organization_name"==n&&(n="contactorganization"),"organization_url"==n&&(n="contactnetworkaddress");var e=this._settingsEl(n);e&&("contact"==n&&(t=btoa(t)),"boolean"==typeof t&&(t=t?"yes":"no"),e.content=t)}},{key:"update",value:function(n){return document.body.classList[this.compactDisplay?"add":"remove"]("is-compact"),m(i(a.prototype),"update",this).call(this,n)}}]),a}(Et)),tr=function(){return nr.settings.apply(nr,arguments)};function er(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function rr(n){var t,e,r,o,i;return{c:function(){nn(t=Y("i"),"class",e=n[3](n[2],n[1],cr)),nn(t,"style",r=ur(n[2],n[1],n[0])),t.hidden=o=!n[2]},m:function(e,r,o){K(e,t,r),o&&i(),i=Q(t,"click",n[6])},p:function(n,i){var a=p(i,1)[0];6&a&&e!==(e=n[3](n[2],n[1],cr))&&nn(t,"class",e),7&a&&r!==(r=ur(n[2],n[1],n[0]))&&nn(t,"style",r),4&a&&o!==(o=!n[2])&&(t.hidden=o)},i:O,o:O,d:function(n){n&&W(t),i()}}}var or={brand:"fab",regular:"far",solid:"fas"},ir={batman:"https://www.gravatar.com/avatar/ab1839667863f31e359d98364cfdef61",marcusr:"https://www.gravatar.com/avatar/6c056546d802b1a9ac186ab63f9fb632"},ar=["fas fa-anchor","fas fa-atom","fas fa-award","fas fa-balance-scale","fas fa-baseball-ball","fas fa-basketball-ball","fas fa-bicycle","fas fa-bolt","fas fa-book-reader","fas fa-candy-cane","fas fa-carrot","fas fa-cat","fas fa-chess-knight","fas fa-child","fas fa-coffee","fas fa-cookie-bite","fas fa-crow","fas fa-dice","fas fa-dog","fas fa-dove","fas fa-feather","fas fa-fish","fas fa-gem","fas fa-ghost","fas fa-hard-hat","fas fa-hat-cowboy","fas fa-hat-wizard","fas fa-hiking","fas fa-horse-head","fas fa-horse","fas fa-id-badge","fas fa-igloo","fas fa-mask","fas fa-meteor","fas fa-paint-brush","fas fa-paw","fas fa-pepper-hot","fas fa-pizza-slice","fas fa-portrait","fas fa-puzzle-piece","fas fa-rainbow","fas fa-robot","fas fa-rocket","fas fa-running","fas fa-seedling","fas fa-skating","fas fa-skiing","fas fa-smile","fas fa-snowboarding","fas fa-snowflake","fas fa-snowman","fas fa-swimmer","fas fa-umbrella","fas fa-user-astronaut","fas fa-user-graduate","fas fa-user-ninja","fas fa-user-secret","fas fa-walking","fas fa-yin-yang"],cr=!1;function ur(n,t,e,r){var o=[],i="color:",a=n.match(/^pick:(.+)$/);return a&&ir[a[1]]&&(i="background-color:",o.push('background-image:url("'+ir[a[1]]+'")')),e&&o.push(i+e),o.join(";")}function sr(n,t,e){var r=t.class,o=void 0===r?"":r,i=t.animation,a=void 0===i?"":i,c=t.color,u=void 0===c?"":c,s=t.family,f=void 0===s?"":s,l=t.name;return n.$set=function(n){"class"in n&&e(4,o=n.class),"animation"in n&&e(5,a=n.animation),"color"in n&&e(0,u=n.color),"family"in n&&e(1,f=n.family),"name"in n&&e(2,l=n.name)},[u,f,l,function(n,t,e){var r=[],i=n.match(/^pick:(.+)$/);if(i){if("Convos"==i[1])return"fas fa-info-circle";if(ir[i[1]])return"fas fa-contributor for-"+i[1].toLowerCase();r.push(function(n){if(n.match(/^\d+$/)&&console.log(ar[n]),n.match(/^\d+$/))return ar[n];for(var t=0,e=0;e<n.length;e++)t=n.charCodeAt(e)+((t<<5)-t),t&=t;return t=Math.abs(t),ar[t%ar.length]}(i[1]))}else r.push(or[t]||"fas"),r.push("fa-"+n);return a&&r.push(a.split(" ").map((function(n){return"fa-"+n}))),o&&r.push(o.split(" ")),r.join(" ")},o,a,function(t){wn(n,t)}]}var fr=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(er()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,sr,rr,A,{class:4,animation:5,color:0,family:1,name:2}),r}return u}(Qn);function lr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function dr(n){var t,e,r,o,i,a=new fr({props:{animation:n[4],name:n[0]}}),c=n[14].default,u=P(c,n,n[13],null);return{c:function(){t=Y("button"),Gn(a.$$.fragment),e=J(),u&&u.c(),nn(t,"class",r=n[5].join(" ")),t.disabled=n[6],nn(t,"type",n[3]),nn(t,"data-tooltip",n[2]),an(t,"has-tooltip",!!n[2].length)},m:function(r,c,s){K(r,t,c),Yn(a,t,null),F(t,e),u&&u.m(t,null),o=!0,s&&i(),i=Q(t,"click",n[15])},p:function(n,e){var i=p(e,1)[0],s={};16&i&&(s.animation=n[4]),1&i&&(s.name=n[0]),a.$set(s),u&&u.p&&8192&i&&u.p(T(c,n,n[13],null),L(c,n[13],i,null)),(!o||32&i&&r!==(r=n[5].join(" ")))&&nn(t,"class",r),(!o||64&i)&&(t.disabled=n[6]),(!o||8&i)&&nn(t,"type",n[3]),(!o||4&i)&&nn(t,"data-tooltip",n[2]),36&i&&an(t,"has-tooltip",!!n[2].length)},i:function(n){o||(Bn(a.$$.fragment,n),Bn(u,n),o=!0)},o:function(n){zn(a.$$.fragment,n),zn(u,n),o=!1},d:function(n){n&&W(t),Vn(a),u&&u.d(n),i()}}}function pr(n,t,e){var r,o=O,i=function(){return o(),o=M(g,(function(n){return e(11,r=n)})),g};n.$$.on_destroy.push((function(){return o()}));var a="",c=t.class,u=void 0===c?"":c,s=[],f=!1,l=0,d=t.disabled,p=void 0!==d&&d,h=t.icon,m=void 0===h?"":h,v=t.op,g=void 0===v?new jt({api:!1,id:""}):v;i();var $=t.tooltip,y=void 0===$?"":$,b=t.type,w=void 0===b?"":b;function _(n){n&&e(10,l=(new At).toEpoch()),e(4,a=n?"spin":""),e(9,f=n)}var x,k=t.$$slots,E=void 0===k?{}:k,C=t.$$scope;return n.$set=function(n){"class"in n&&e(7,u=n.class),"disabled"in n&&e(8,p=n.disabled),"icon"in n&&e(0,m=n.icon),"op"in n&&i(e(1,g=n.op)),"tooltip"in n&&e(2,y=n.tooltip),"type"in n&&e(3,w=n.type),"$$scope"in n&&e(13,C=n.$$scope)},n.$$.update=function(){2048&n.$$.dirty&&r.is("loading")&&_(!0),3072&n.$$.dirty&&(r.is("loading")||setTimeout((function(){return _(!1)}),700-((new At).toEpoch()-l))),129&n.$$.dirty&&e(5,s=["btn","for-"+(m||"default")].concat(u)),768&n.$$.dirty&&e(6,x=p||f)},[m,g,y,w,a,s,x,u,p,f,l,r,_,C,E,function(t){wn(n,t)}]}var hr=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(lr()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,pr,dr,A,{class:7,disabled:8,icon:0,op:1,tooltip:2,type:3}),r}return u}(Qn);function mr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function vr(n){var t,e,r,o,i,a=new fr({props:{name:"pick:Convos",color:"inherit"}});return{c:function(){Gn(a.$$.fragment),t=J(),(e=Y("b")).textContent="".concat(n[2].format("%H:%M")),r=J(),(o=Y("a")).textContent="".concat(pe("Convos")),nn(e,"class","message__ts"),nn(o,"href","/settings/account"),nn(o,"class","message__from"),nn(o,"color","inherit")},m:function(n,c){Yn(a,n,c),K(n,t,c),K(n,e,c),K(n,r,c),K(n,o,c),i=!0},p:O,i:function(n){i||(Bn(a.$$.fragment,n),i=!0)},o:function(n){zn(a.$$.fragment,n),i=!1},d:function(n){Vn(a,n),n&&W(t),n&&W(e),n&&W(r),n&&W(o)}}}function gr(n){var t,e,r,o,i,a=!n[0]&&vr(n),c=n[4].default,u=P(c,n,n[3],null);return{c:function(){t=Y("div"),a&&a.c(),e=J(),r=Y("div"),u&&u.c(),nn(r,"class","message__text"),nn(t,"class",o="message is-type-"+n[1])},m:function(n,o){K(n,t,o),a&&a.m(t,null),F(t,e),F(t,r),u&&u.m(r,null),i=!0},p:function(n,r){var s=p(r,1)[0];n[0]?a&&(In(),zn(a,1,1,(function(){a=null})),Un()):a?(a.p(n,s),Bn(a,1)):((a=vr(n)).c(),Bn(a,1),a.m(t,e)),u&&u.p&&8&s&&u.p(T(c,n,n[3],null),L(c,n[3],s,null)),(!i||2&s&&o!==(o="message is-type-"+n[1]))&&nn(t,"class",o)},i:function(n){i||(Bn(a),Bn(u,n),i=!0)},o:function(n){zn(a),zn(u,n),i=!1},d:function(n){n&&W(t),a&&a.d(),u&&u.d(n)}}}function $r(n,t,e){var r=t.same,o=void 0!==r&&r,i=t.type,a=void 0===i?"notice":i,c=new At,u=t.$$slots,s=void 0===u?{}:u,f=t.$$scope;return n.$set=function(n){"same"in n&&e(0,o=n.same),"type"in n&&e(1,a=n.type),"$$scope"in n&&e(3,f=n.$$scope)},[o,a,c,f,s]}var yr=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(mr()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,$r,gr,A,{same:0,type:1}),r}return u}(Qn);function br(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function wr(n){var t,e,r,o,i,a,c,u,s,f=n[1].unread+"",l=n[4].default,d=P(l,n,n[3],null),h=new fr({props:{name:"bars"}}),m=new fr({props:{name:"times"}});return{c:function(){t=Y("header"),d&&d.c(),e=J(),r=Y("a"),Gn(h.$$.fragment),o=J(),Gn(m.$$.fragment),i=J(),a=Y("small"),c=V(f),nn(a,"class","chat-header__unread"),a.hidden=u=!n[1].unread,nn(r,"href","#activeMenu:nav"),nn(r,"class","btn is-hamburger can-toggle"),an(r,"is-toggled","nav"==n[0].activeMenu),nn(t,"class","chat-header")},m:function(n,u){K(n,t,u),d&&d.m(t,null),F(t,e),F(t,r),Yn(h,r,null),F(r,o),Yn(m,r,null),F(r,i),F(r,a),F(a,c),s=!0},p:function(n,t){var e=p(t,1)[0];d&&d.p&&8&e&&d.p(T(l,n,n[3],null),L(l,n[3],e,null)),(!s||2&e)&&f!==(f=n[1].unread+"")&&en(c,f),(!s||2&e&&u!==(u=!n[1].unread))&&(a.hidden=u),1&e&&an(r,"is-toggled","nav"==n[0].activeMenu)},i:function(n){s||(Bn(d,n),Bn(h.$$.fragment,n),Bn(m.$$.fragment,n),s=!0)},o:function(n){zn(d,n),zn(h.$$.fragment,n),zn(m.$$.fragment,n),s=!1},d:function(n){n&&W(t),d&&d.d(n),Vn(h),Vn(m)}}}function _r(n,t,e){var r,o;j(n,Zt,(function(n){return e(0,r=n)}));var i=bn("user");j(n,i,(function(n){return e(1,o=n)}));var a=t.$$slots,c=void 0===a?{}:a,u=t.$$scope;return n.$set=function(n){"$$scope"in n&&e(3,u=n.$$scope)},[r,o,i,u,c]}var xr=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(br()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,_r,wr,A,{}),r}return u}(Qn);function kr(n){if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(n=function(n,t){if(!n)return;if("string"==typeof n)return Er(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Er(n,t)}(n))){var t=0,e=function(){};return{s:e,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(n){throw n},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,a=!1;return{s:function(){r=n[Symbol.iterator]()},n:function(){var n=r.next();return i=n.done,n},e:function(n){a=!0,o=n},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}function Er(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}var Or=[];function Cr(n,t){return Cr[n]?Cr[n](t):[]}function Sr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Nr(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function Rr(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?Nr(Object(e),!0).forEach((function(t){et(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Nr(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function Dr(n,t,e){var r=n.slice();return r[25]=t[e],r[27]=e,r}function Ar(n){var t,e,r=(n[25].text||n[25].val)+"";return{c:function(){nn(t=Y("a"),"href","#index:"+n[27]),nn(t,"tabindex","-1"),an(t,"has-focus",n[27]==n[1])},m:function(o,i,a){K(o,t,i),t.innerHTML=r,a&&e(),e=Q(t,"click",X(n[7]))},p:function(n,e){4&e&&r!==(r=(n[25].text||n[25].val)+"")&&(t.innerHTML=r),2&e&&an(t,"has-focus",n[27]==n[1])},d:function(n){n&&W(t),e()}}}function Mr(n){for(var t,e,r,o,i,a,c,u,s,f,l,d,h,m,v,g=new fr({props:{name:"cloud-upload-alt"}}),$=new fr({props:{name:n[5]}}),y=n[2],b=[],w=0;w<y.length;w+=1)b[w]=Ar(Dr(n,y,w));return{c:function(){t=Y("form"),e=Y("textarea"),r=J(),o=Y("label"),i=Y("input"),a=J(),Gn(g.$$.fragment),u=J(),s=Y("button"),Gn($.$$.fragment),f=J(),l=Y("div");for(var p=0;p<b.length;p+=1)b[p].c();nn(e,"class","is-primary-input"),nn(e,"placeholder",n[4]),nn(i,"type","file"),nn(o,"class","upload is-hallow"),o.hidden=c=!n[0].is("conversation"),nn(s,"type","buttton"),nn(s,"class","btn chat-input__send"),nn(l,"class",d="chat-input_autocomplete chat-input_autocomplete_"+n[3]),l.hidden=h=!n[2].length,nn(t,"class","chat-input")},m:function(c,d,p){K(c,t,d),F(t,e),F(t,r),F(t,o),F(o,i),F(o,a),Yn(g,o,null),F(t,u),F(t,s),Yn($,s,null),F(t,f),F(t,l);for(var h=0;h<b.length;h+=1)b[h].m(l,null);m=!0,p&&R(v),v=[I(n[6].call(null,e)),Q(i,"change",n[9]),Q(s,"click",n[8]),Q(t,"submit",X(n[24]))]},p:function(n,t){var r=p(t,1)[0];(!m||16&r)&&nn(e,"placeholder",n[4]),(!m||1&r&&c!==(c=!n[0].is("conversation")))&&(o.hidden=c);var i={};if(32&r&&(i.name=n[5]),$.$set(i),134&r){var a;for(y=n[2],a=0;a<y.length;a+=1){var u=Dr(n,y,a);b[a]?b[a].p(u,r):(b[a]=Ar(u),b[a].c(),b[a].m(l,null))}for(;a<b.length;a+=1)b[a].d(1);b.length=y.length}(!m||8&r&&d!==(d="chat-input_autocomplete chat-input_autocomplete_"+n[3]))&&nn(l,"class",d),(!m||4&r&&h!==(h=!n[2].length))&&(l.hidden=h)},i:function(n){m||(Bn(g.$$.fragment,n),Bn($.$$.fragment,n),m=!0)},o:function(n){zn(g.$$.fragment,n),zn($.$$.fragment,n),m=!1},d:function(n){n&&W(t),Vn(g),Vn($),G(b,n),R(v)}}}function jr(n,t,e){var r,o,i,a,c,u=k,s=t.conversation,f=0,l=[],d="none",p=0,h=bn("api"),m=bn("user");function v(n,t){var e=function(n,t){n&&n.hasOwnProperty("val")&&(n=n.val);var e=t.append?t.value.length:t.cursorPos,r=[t.value.substring(0,e),t.value.substring(e)],o=r[0],i=r[1];return void 0===n?{before:o,middle:"",after:i}:(t.append&&(o=o.replace(/[ ]$/,"")).length&&(n=" "+n),t.padBefore&&(o=o.replace(/[ ]$/,"")).length&&(n=" "+n),t.padAfter&&(i=i.replace(/^[ ]/,""),n+=" "),t.replace&&(o=o.replace(/\S*\s?$/,"")),{before:o,middle:n,after:i})}(n,Rr({},t,{cursorPos:r.selectionStart,value:r.value})),o=e.before,i=e.middle;w(o+i+e.after),r.selectionStart=r.selectionEnd=(o+i).length}function g(n,t){l.length&&(n.preventDefault(),e(1,f+=t),f<0&&e(1,f=l.length-1),f>=l.length&&e(1,f=0),v(l[f],{replace:!0}))}function $(n){n.errors&&s&&n.conversation_id!=s.conversation_id&&s.addMessage(Rr({},n,{message:'Message "%1" failed: %2',type:"error",vars:[n.message,ft(n.errors)]}))}function y(n){e(1,f=0),e(12,p=n.selectionStart),s.update({userInput:n.value})}function b(n){if(l[f])n.preventDefault(),v(l[f],{replace:!0}),e(12,p=r.selectionStart+1);else if(!(n.altKey||n.ctrlKey||n.metaKey||n.shiftKey)){n.preventDefault();var t={method:"send"};t.message=r.value,t.message=t.message.replace(/^\/close/i,"/part"),t.message=t.message.replace(/^\/j\b/i,"/join"),t.message=t.message.replace(/^\/raw/i,"/quote"),t.message.length&&s.send(t).then($),s.is("search")||w("")}}function w(n){r&&(r.value=n),s.update({userInput:n})}function _(n){r&&(e(2,l=n>r.value.length?[]:function(n,t,e){var r=e.conversation,o=e.user,i="",a="",c=n.substring(0,t).replace(/(\S)(\S*)$/,(function(n,t,e){return i=t,a=e,""})),u=":"==i&&a.length?"emojis":"/"!=i||c.length?"@"==i&&a.length?"nicks":"#"==i||"&"==i?"conversations":"none":"commands",s=Cr(u,{conversation:r,query:i+a,user:o});return s.length&&s.unshift({autocompleteCategory:u,val:i+a}),s}(r.value,n,{conversation:s,user:m})),e(3,d=l.length&&l[0].autocompleteCategory||"none"))}function x(n){x.lock!=n.path&&(e(13,x.lock=n.path,x),w(void 0===n.userInput?"":n.userInput))}function k(n){var t=n.target&&n.target.files||n.dataTransfer&&n.dataTransfer.files;if(t&&t.length){if(t.length>1)return s.addMessage({message:"Cannot upload more than one file.",type:"error"});var e=new FormData;e.append("file",t[0]),h("uploadFile").perform({formData:e}).then((function(n){var t=n.res.body;if(t.files&&t.files.length)return v(t.files[0].url,{append:!0});t.errors&&s.addMessage({message:"Could not upload file: %1",vars:[pe(ft(t.errors))],type:"error"})}))}}return n.$set=function(n){"conversation"in n&&e(0,s=n.conversation)},n.$$.update=function(){1&n.$$.dirty&&e(14,o=m.findConversation({connection_id:s.connection_id})),16384&n.$$.dirty&&e(15,i=o&&o.nick),49153&n.$$.dirty&&e(4,a=s.is("search")?"What are you looking for?":o&&o.is("unreachable")?pe("Connecting..."):pe("What is on your mind %1?",i)),1&n.$$.dirty&&e(5,c=s.is("search")?"search":"paper-plane"),4096&n.$$.dirty&&_(p),8193&n.$$.dirty&&x(s)},[s,f,l,d,a,c,function(n){(r=n).addEventListener("focus",(function(){return e(12,p=r.value.length+1)})),r.addEventListener("change",(function(){return y(r)})),r.addEventListener("keyup",(function(n){1!=n.key.length&&-1==["ArrowLeft","ArrowRight","Backspace"].indexOf(n.key)||y(r)})),r.addEventListener("keydown",(function(n){return"ArrowDown"==n.key?g(n,n.shiftKey?4:1):"ArrowUp"==n.key?g(n,n.shiftKey?-4:-1):"Enter"==n.key?b(n):"Tab"==n.key?g(n,n.shiftKey?-1:1):void 0})),w(void 0===s.userInput?"":s.userInput)},function(n){e(1,f=parseInt(n.target.closest("a").href.replace(/.*index:/,""),10)),v(l[f],{padAfter:!0,replace:!0}),setTimeout((function(){return r.focus()}),1)},b,k,u,r,p,x,o,i,h,m,v,g,$,y,w,_,function(t){wn(n,t)}]}Cr.commands=function(n){for(var t=n.query,e=[],r=0;r<Or.length;r++)if(0==Or[r].cmd.indexOf(t)){var o=Or[r].alias||Or[r].cmd,i=Or[r].example.replace(/</g,"&lt;");e.push({text:i,val:o})}return e},Cr.conversations=function(n){for(var t=n.conversation,e=n.query,r=n.user,o=r.findConversation({connection_id:t.connection_id}),i=o?o.conversations.toArray():r.conversations(),a=[],c=0;c<i.length&&!(-1!=i[c].name.toLowerCase().indexOf(e)&&(a.push({text:i[c].name,val:i[c].conversation_id}),a.length>=20));c++);return a},Cr.emojis=function(n){var t=n.query,e=[];return[":","_"].map((function(n){return n+t.slice(1,2)})).forEach((function(n){for(var r=re(n,"group"),o=0;o<r.length&&(r[o].shortname.indexOf(t)>=0&&e.push({val:r[o].emoji,text:oe(r[o].emoji)}),!(e.length>=20));o++);})),e},Cr.nicks=function(n){var t,e=n.conversation,r=n.query,o=e.participants(),i=new RegExp("^"+gt(r.slice(1)),"i"),a=[],c=kr(o);try{for(c.s();!(t=c.n()).done;){var u=t.value;if(a.length>=20)break;u.nick.match(i)&&a.push({val:u.nick})}}catch(n){c.e(n)}finally{c.f()}return a},Or.push({cmd:"/me",example:"/me <msg>",description:"Send message as an action."}),Or.push({cmd:"/say",example:"/say <msg>",description:'Used when you want to send a message starting with "/".'}),Or.push({cmd:"/topic",example:"/topic or /topic <new topic>",description:"Show current topic, or set a new one."}),Or.push({cmd:"/whois",example:"/whois <nick>",description:"Show information about a user."}),Or.push({cmd:"/query",example:"/query <nick>",description:"Open up a new chat window with nick."}),Or.push({cmd:"/msg",example:"/msg <nick> <msg>",description:"Send a direct message to nick."}),Or.push({cmd:"/names",example:"/names",description:"Show participants in the channel."}),Or.push({cmd:"/join",example:"/join <#channel>",description:"Join channel and open up a chat window."}),Or.push({cmd:"/nick",example:"/nick <nick>",description:"Change your wanted nick."}),Or.push({cmd:"/part",example:"/part",description:"Leave channel, and close window."}),Or.push({cmd:"/close",example:"/close <nick>",description:"Close conversation with nick, defaults to current active."}),Or.push({cmd:"/kick",example:"/kick <nick>",description:"Kick a user from the current channel."}),Or.push({cmd:"/mode",example:"/mode [+|-][b|o|v] <user>",description:"Change mode of yourself or a user"}),Or.push({cmd:"/reconnect",example:"/reconnect",description:"Restart the current connection."}),Or.push({cmd:"/clear",example:"/clear history <#channel> or /clear history <nick>",description:"Delete all history for the given conversation."}),Or.push({cmd:"/oper",example:"/oper <msg>",description:"Send server operator messages."}),Or.push({cmd:"/quote",example:"/quote <irc-command>",description:"Allow you to send any raw IRC message."});var Pr=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Sr()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,jr,Mr,A,{uploader:10,conversation:0}),r}return E(u,[{key:"uploader",get:function(){return this.$$.ctx[10]}}]),u}(Qn);function Tr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Lr(n){var t,e,r,o=n[9].default,i=P(o,n,n[8],null);return{c:function(){t=Y("a"),i&&i.c(),nn(t,"href",n[3]),nn(t,"class",n[0]),nn(t,"style",n[1]),an(t,"has-path",n[4])},m:function(o,a,c){K(o,t,a),i&&i.m(t,null),n[11](t),e=!0,c&&r(),r=Q(t,"click",n[10])},p:function(n,r){var a=p(r,1)[0];i&&i.p&&256&a&&i.p(T(o,n,n[8],null),L(o,n[8],a,null)),(!e||8&a)&&nn(t,"href",n[3]),(!e||1&a)&&nn(t,"class",n[0]),(!e||2&a)&&nn(t,"style",n[1]),17&a&&an(t,"has-path",n[4])},i:function(n){e||(Bn(i,n),e=!0)},o:function(n){zn(i,n),e=!1},d:function(e){e&&W(t),i&&i.d(e),n[11](null),r()}}}function Ir(n,t,e){var r;j(n,Zt,(function(n){return e(7,r=n)}));var o,i,a,c=t.class,u=void 0===c?"":c,s=t.href,f=void 0===s?"/":s,l=t.style,d=void 0===l?"":l,p=t.$$slots,h=void 0===p?{}:p,m=t.$$scope;return n.$set=function(n){"class"in n&&e(0,u=n.class),"href"in n&&e(5,f=n.href),"style"in n&&e(1,d=n.style),"$$scope"in n&&e(8,m=n.$$scope)},n.$$.update=function(){160&n.$$.dirty&&e(3,i=0==f.indexOf("/")?r.basePath+f:f),136&n.$$.dirty&&e(4,a=r.basePath+r.path==i.replace(/(#|\?).*/,""))},[u,d,o,i,a,f,function(){return o.focus()},r,m,h,function(t){wn(n,t)},function(n){xn[n?"unshift":"push"]((function(){e(2,o=n)}))}]}var Ur=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Tr()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,Ir,Lr,A,{class:0,href:5,style:1,focus:6}),r}return E(u,[{key:"focus",get:function(){return this.$$.ctx[6]}}]),u}(Qn);function Br(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function zr(n,t,e){var r=n.slice();return r[5]=t[e],r}function Hr(n){for(var t,e,r,o,i,a,c,u,s=pe("Participants (%1)",n[0].participants().length)+"",f=n[0].participants(),l=[],d=0;d<f.length;d+=1)l[d]=Fr(zr(n,f,d));var p=function(n){return zn(l[n],1,1,(function(){l[n]=null}))};return{c:function(){t=Y("div"),e=Y("nav"),r=Y("h3"),o=V(s),i=J();for(var n=0;n<l.length;n+=1)l[n].c();a=J(),c=Y("nav"),nn(e,"class","sidebar-right__nav"),nn(t,"class","sidebar-right")},m:function(n,s){K(n,t,s),F(t,e),F(e,r),F(r,o),F(e,i);for(var f=0;f<l.length;f+=1)l[f].m(e,null);F(e,a),F(e,c),u=!0},p:function(n,t){if((!u||1&t)&&s!==(s=pe("Participants (%1)",n[0].participants().length)+"")&&en(o,s),3&t){var r;for(f=n[0].participants(),r=0;r<f.length;r+=1){var i=zr(n,f,r);l[r]?(l[r].p(i,t),Bn(l[r],1)):(l[r]=Fr(i),l[r].c(),Bn(l[r],1),l[r].m(e,a))}for(In(),r=f.length;r<l.length;r+=1)p(r);Un()}},i:function(n){if(!u){for(var t=0;t<f.length;t+=1)Bn(l[t]);u=!0}},o:function(n){l=l.filter(Boolean);for(var t=0;t<l.length;t+=1)zn(l[t]);u=!1},d:function(n){n&&W(t),G(l,n)}}}function qr(n){var t,e,r,o,i=n[5].nick+"",a=new fr({props:{name:"pick:"+n[5].id,family:"solid",color:n[5].color}});return{c:function(){Gn(a.$$.fragment),t=J(),e=Y("span"),r=V(i)},m:function(n,i){Yn(a,n,i),K(n,t,i),K(n,e,i),F(e,r),o=!0},p:function(n,t){var e={};1&t&&(e.name="pick:"+n[5].id),1&t&&(e.color=n[5].color),a.$set(e),(!o||1&t)&&i!==(i=n[5].nick+"")&&en(r,i)},i:function(n){o||(Bn(a.$$.fragment,n),o=!0)},o:function(n){zn(a.$$.fragment,n),o=!1},d:function(n){Vn(a,n),n&&W(t),n&&W(e)}}}function Fr(n){var t;var e=new Ur({props:{href:"/chat/"+n[0].connection_id+"/"+n[5].id,class:"participant "+mt(n[5].modes),$$slots:{default:[qr]},$$scope:{ctx:n}}});return e.$on("click",(function(){for(var t,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(t=n)[4].apply(t,[n[5]].concat(r))})),{c:function(){Gn(e.$$.fragment)},m:function(n,r){Yn(e,n,r),t=!0},p:function(t,r){n=t;var o={};1&r&&(o.href="/chat/"+n[0].connection_id+"/"+n[5].id),1&r&&(o.class="participant "+mt(n[5].modes)),257&r&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i:function(n){t||(Bn(e.$$.fragment,n),t=!0)},o:function(n){zn(e.$$.fragment,n),t=!1},d:function(n){Vn(e,n)}}}function Kr(n){var t,e,r=n[0].participants().length,o=r&&Hr(n);return{c:function(){o&&o.c(),t=Z()},m:function(n,r){o&&o.m(n,r),K(n,t,r),e=!0},p:function(n,e){var i=p(e,1)[0];1&i&&(r=n[0].participants().length),r?o?(o.p(n,i),Bn(o,1)):((o=Hr(n)).c(),Bn(o,1),o.m(t.parentNode,t)):o&&(In(),zn(o,1,1,(function(){o=null})),Un())},i:function(n){e||(Bn(o),e=!0)},o:function(n){zn(o),e=!1},d:function(n){o&&o.d(n),n&&W(t)}}}function Wr(n,t,e){var r=bn("user"),o=t.conversation;function i(n,t){n.preventDefault(),o.send("/join "+t.id)}var a;return n.$set=function(n){"conversation"in n&&e(0,o=n.conversation)},n.$$.update=function(){1&n.$$.dirty&&(a=r.findConversation({connection_id:o.connection_id}))},[o,i,a,r,function(n,t){return i(t,n)}]}var Gr=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Br()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,Wr,Kr,A,{conversation:0}),r}return u}(Qn),Yr=function(){function t(){var e=this;n(this,t),this.dragAndDropEvents={drag:this._preventDefault.bind(this),dragend:this.stop.bind(this),dragenter:this.start.bind(this),dragleave:this.stop.bind(this),dragover:this.start.bind(this),dragstart:this._preventDefault.bind(this),drop:this.drop.bind(this)},this.pasteEvents={paste:this.paste.bind(this)},this.dropIndicatorEl=document.createElement("div"),this.dropIndicatorEl.className="drop-area hidden",this.removeDragOverDebounced=st((function(){return e._removeDragOver()}),100)}return E(t,[{key:"attach",value:function(n,t){var e=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;this.dropEl=n,this.uploader=t,this.targetEl=r,Object.keys(this.dragAndDropEvents).forEach((function(n){r.addEventListener(n,e.dragAndDropEvents[n])})),Object.keys(this.pasteEvents).forEach((function(n){document.addEventListener(n,e.pasteEvents[n])}))}},{key:"detach",value:function(){var n=this;Object.keys(this.dragAndDropEvents).forEach((function(t){n.targetEl.removeEventListener(t,n.dragAndDropEvents[t])})),Object.keys(this.pasteEvents).forEach((function(t){document.removeEventListener(t,n.pasteEvents[t])}))}},{key:"drop",value:function(n){this.stop(n),this.uploader&&this.uploader(n)}},{key:"paste",value:function(n){var t=(n.clipboardData||n.originalEvent.clipboardData).items;if(this.uploader)for(var e=0;e<t.length;e++)if("file"==t[e].kind)return this.uploader({dataTransfer:{files:[t[e].getAsFile()]}})}},{key:"stop",value:function(n){this._preventDefault(n),this.removeDragOverDebounced()}},{key:"start",value:function(n){if(this.dropEl){this._preventDefault(n);var t=this.dropIndicatorEl.style;t.height=this.dropEl.offsetHeight+"px",t.width=this.dropEl.offsetWidth+"px",t.top=this.dropEl.offsetTop+"px",t.left=this.dropEl.offsetLeft+"px",this.dropIndicatorEl.classList.remove("hidden"),this.dropEl.parentNode.appendChild(this.dropIndicatorEl)}}},{key:"_preventDefault",value:function(n){n.preventDefault(),n.stopPropagation()}},{key:"_removeDragOver",value:function(){this.dropIndicatorEl.classList.add("hidden")}}]),t}();function Vr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Jr(n){var t,e,r,o,i,a,c,u=n[14].default,s=P(u,n,n[13],null);return{c:function(){t=Y("main"),e=Y("div"),s&&s.c(),Sn((function(){return n[15].call(e)})),nn(t,"class",o=n[1].join(" "))},m:function(o,u,f){K(o,t,u),F(t,e),s&&s.m(e,null),r=function(n,t){"static"===getComputedStyle(n).position&&(n.style.position="relative");var e,r=document.createElement("object");return r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.type="text/html",r.tabIndex=-1,r.onload=function(){(e=r.contentDocument.defaultView).addEventListener("resize",t)},/Trident/.test(navigator.userAgent)?(n.appendChild(r),r.data="about:blank"):(r.data="about:blank",n.appendChild(r)),{cancel:function(){e&&e.removeEventListener&&e.removeEventListener("resize",t),n.removeChild(r)}}}(e,n[15].bind(e)),a=!0,f&&c(),c=I(i=n[2].call(null,t,{scrollHeight:n[0]}))},p:function(n,e){var r=p(e,1)[0];s&&s.p&&8192&r&&s.p(T(u,n,n[13],null),L(u,n[13],r,null)),(!a||2&r&&o!==(o=n[1].join(" ")))&&nn(t,"class",o),i&&D(i.update)&&1&r&&i.update.call(null,{scrollHeight:n[0]})},i:function(n){a||(Bn(s,n),a=!0)},o:function(n){zn(s,n),a=!1},d:function(n){n&&W(t),s&&s.d(n),r.cancel(),c()}}}function Zr(n,t,e){var r,o=(r=vn(),function(n,t){var e=r.$$.callbacks[n];if(e){var o=cn(n,t);e.slice().forEach((function(n){n.call(r,o)}))}}),i={scrollDelay:80,scrollOffset:80,scrollTop:0},a=!0,c=t.class,u=void 0===c?"":c,s=0,f=t.pos,l=void 0===f?"top":f;function d(n){e(3,l=n.scrollTop>s-n.offsetHeight-i.scrollOffset?"bottom":n.scrollTop<i.scrollOffset?"top":"middle"),i.pos=l,i.visibleEls=function(n){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,e=x(n.childNodes),r=[],o=0;o<e.length;)e[o].nodeType==Node.ELEMENT_NODE?(r.push([o,e[o]]),o++):e.splice(o,1);if(!e.length)return[];for(var i=t.scrollTop;r.length>1;){var a=Math.floor(r.length/2);r[a][1].offsetTop<=i?r.splice(0,a):r.splice(a)}r.length||r.push([0,e[0]]);for(var c=t.offsetHeight,u=r[0][0],s=u;s<e.length&&!(e[s].offsetTop>i+c);)s++;return e.slice(u,s).filter((function(n){return!n.getAttribute("aria-hidden")}))}(n.firstElementChild,n)}function p(n){i.scrollTid&&clearTimeout(i.scrollTid),i.scrollTid=setTimeout((function(){return h(n)}),i.scrollDelay)}function h(n){if(a)return(a=Math.abs(n.scrollTop-i.scrollTop)>40)&&(n.scrollTop=i.scrollTop),void(i.scrollTid&&clearTimeout(i.scrollTid));i.scrollTop=n.scrollTop,d(n),o("scrolled",i)}function m(n,t){var e=t.scrollHeight,r=i.scrollHeight!=e;i.scrollHeight=e,d(n),r&&o("rendered",i)}function v(n){return!pt(n,"undef")&&(-1==n&&(n=s),pt(n,"string")&&(n=i.infinityEl.querySelector(n)),n&&n.tagName&&(n=n.offsetTop),!pt(n,"undef")&&(!(n<0)&&(a=!0,i.infinityEl.scrollTop=n,i.scrollTop=i.infinityEl.scrollTop,!0)))}var g,$=t.$$slots,y=void 0===$?{}:$,b=t.$$scope;return n.$set=function(n){"class"in n&&e(4,u=n.class),"pos"in n&&e(3,l=n.pos),"$$scope"in n&&e(13,b=n.$$scope)},n.$$.update=function(){24&n.$$.dirty&&e(1,g=[u||"infinity-scroll"].concat(["has-pos-"+l])),n.$$.dirty},[s,g,function(n,t){return i.infinityEl=n,i.scrollTo=v,n.addEventListener("scroll",(function(){return p(n)})),d(n),m(n,t),{update:function(t){return m(n,t)}}},l,u,i,a,o,d,p,h,m,v,b,y,function(){s=this.offsetHeight,e(0,s)}]}var Qr=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Vr()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,Zr,Jr,A,{class:4,pos:3}),r}return u}(Qn),Xr=e((function(n,t){var e,o;e=function(n){var t=[],e=Object.keys,o={},i={},a=!0,c=/^(no-?highlight|plain|text)$/i,u=/\blang(?:uage)?-([\w-]+)\b/i,s=/((^(<[^>]+>|\t|)+|(?:\n)))/gm,f="Could not find the language '{}', did you forget to load/include a language module?",l={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},d="of and for in not or if then".split(" ");function p(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function h(n){return n.nodeName.toLowerCase()}function m(n){return c.test(n)}function v(n){var t,e={},r=Array.prototype.slice.call(arguments,1);for(t in n)e[t]=n[t];return r.forEach((function(n){for(t in n)e[t]=n[t]})),e}function g(n){var t=[];return function n(e,r){for(var o=e.firstChild;o;o=o.nextSibling)3===o.nodeType?r+=o.nodeValue.length:1===o.nodeType&&(t.push({event:"start",offset:r,node:o}),r=n(o,r),h(o).match(/br|hr|img|input/)||t.push({event:"stop",offset:r,node:o}));return r}(n,0),t}function $(n){return n.variants&&!n.cached_variants&&(n.cached_variants=n.variants.map((function(t){return v(n,{variants:null},t)}))),n.cached_variants?n.cached_variants:function n(t){return!!t&&(t.endsWithParent||n(t.starts))}(n)?[v(n,{starts:n.starts?v(n.starts):null})]:Object.isFrozen(n)?[v(n)]:[n]}function y(n,t){return t?Number(t):(e=n,-1!=d.indexOf(e.toLowerCase())?0:1);var e}function b(n){function t(n){return n&&n.source||n}function r(e,r){return new RegExp(t(e),"m"+(n.case_insensitive?"i":"")+(r?"g":""))}function o(n){var e,o,i={},a=[],c={},u=1;function s(n,t){i[u]=n,a.push([n,t]),u+=function(n){return new RegExp(n.toString()+"|").exec("").length-1}(t)+1}for(var f=0;f<n.contains.length;f++)s(o=n.contains[f],o.beginKeywords?"\\.?(?:"+o.begin+")\\.?":o.begin);n.terminator_end&&s("end",n.terminator_end),n.illegal&&s("illegal",n.illegal);var l=a.map((function(n){return n[1]}));return e=r(function(n,e){for(var r=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./,o=0,i="",a=0;a<n.length;a++){var c=o+=1,u=t(n[a]);for(a>0&&(i+=e),i+="(";u.length>0;){var s=r.exec(u);if(null==s){i+=u;break}i+=u.substring(0,s.index),u=u.substring(s.index+s[0].length),"\\"==s[0][0]&&s[1]?i+="\\"+String(Number(s[1])+c):(i+=s[0],"("==s[0]&&o++)}i+=")"}return i}(l,"|"),!0),c.lastIndex=0,c.exec=function(t){var r;if(0===a.length)return null;e.lastIndex=c.lastIndex;var o=e.exec(t);if(!o)return null;for(var u=0;u<o.length;u++)if(null!=o[u]&&null!=i[""+u]){r=i[""+u];break}return"string"==typeof r?(o.type=r,o.extra=[n.illegal,n.terminator_end]):(o.type="begin",o.rule=r),o},c}if(n.contains&&-1!=n.contains.indexOf("self")){if(!a)throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");n.contains=n.contains.filter((function(n){return"self"!=n}))}!function i(a,c){a.compiled||(a.compiled=!0,a.keywords=a.keywords||a.beginKeywords,a.keywords&&(a.keywords=function(n,t){var r={};return"string"==typeof n?o("keyword",n):e(n).forEach((function(t){o(t,n[t])})),r;function o(n,e){t&&(e=e.toLowerCase()),e.split(" ").forEach((function(t){var e=t.split("|");r[e[0]]=[n,y(e[0],e[1])]}))}}(a.keywords,n.case_insensitive)),a.lexemesRe=r(a.lexemes||/\w+/,!0),c&&(a.beginKeywords&&(a.begin="\\b("+a.beginKeywords.split(" ").join("|")+")\\b"),a.begin||(a.begin=/\B|\b/),a.beginRe=r(a.begin),a.endSameAsBegin&&(a.end=a.begin),a.end||a.endsWithParent||(a.end=/\B|\b/),a.end&&(a.endRe=r(a.end)),a.terminator_end=t(a.end)||"",a.endsWithParent&&c.terminator_end&&(a.terminator_end+=(a.end?"|":"")+c.terminator_end)),a.illegal&&(a.illegalRe=r(a.illegal)),null==a.relevance&&(a.relevance=1),a.contains||(a.contains=[]),a.contains=Array.prototype.concat.apply([],a.contains.map((function(n){return $("self"===n?a:n)}))),a.contains.forEach((function(n){i(n,a)})),a.starts&&i(a.starts,c),a.terminators=o(a))}(n)}function w(n,t,e,r){var i=t;function c(n,t){var e=$.case_insensitive?t[0].toLowerCase():t[0];return n.keywords.hasOwnProperty(e)&&n.keywords[e]}function u(n,t,e,r){if(!e&&""===t)return"";if(!n)return t;var o='<span class="'+(r?"":l.classPrefix);return(o+=n+'">')+t+(e?"":"</span>")}function s(){E+=null!=x.subLanguage?function(){var n="string"==typeof x.subLanguage;if(n&&!o[x.subLanguage])return p(O);var t=n?w(x.subLanguage,O,!0,k[x.subLanguage]):_(O,x.subLanguage.length?x.subLanguage:void 0);return x.relevance>0&&(S+=t.relevance),n&&(k[x.subLanguage]=t.top),u(t.language,t.value,!1,!0)}():function(){var n,t,e,r;if(!x.keywords)return p(O);for(r="",t=0,x.lexemesRe.lastIndex=0,e=x.lexemesRe.exec(O);e;)r+=p(O.substring(t,e.index)),(n=c(x,e))?(S+=n[1],r+=u(n[0],p(e[0]))):r+=p(e[0]),t=x.lexemesRe.lastIndex,e=x.lexemesRe.exec(O);return r+p(O.substr(t))}(),O=""}function d(n){E+=n.className?u(n.className,"",!0):"",x=Object.create(n,{parent:{value:x}})}function h(n){var t=n[0],e=n.rule;return e&&e.endSameAsBegin&&(e.endRe=new RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")),e.skip?O+=t:(e.excludeBegin&&(O+=t),s(),e.returnBegin||e.excludeBegin||(O=t)),d(e),e.returnBegin?0:t.length}function m(n){var t=n[0],e=i.substr(n.index),r=function n(t,e){if(function(n,t){var e=n&&n.exec(t);return e&&0===e.index}(t.endRe,e)){for(;t.endsParent&&t.parent;)t=t.parent;return t}if(t.endsWithParent)return n(t.parent,e)}(x,e);if(r){var o=x;o.skip?O+=t:(o.returnEnd||o.excludeEnd||(O+=t),s(),o.excludeEnd&&(O=t));do{x.className&&(E+="</span>"),x.skip||x.subLanguage||(S+=x.relevance),x=x.parent}while(x!==r.parent);return r.starts&&(r.endSameAsBegin&&(r.starts.endRe=r.endRe),d(r.starts)),o.returnEnd?0:t.length}}var v={};function g(n,t){var r=t&&t[0];if(O+=n,null==r)return s(),0;if("begin"==v.type&&"end"==t.type&&v.index==t.index&&""===r)return O+=i.slice(t.index,t.index+1),1;if(v=t,"begin"===t.type)return h(t);if("illegal"===t.type&&!e)throw new Error('Illegal lexeme "'+r+'" for mode "'+(x.className||"<unnamed>")+'"');if("end"===t.type){var o=m(t);if(null!=o)return o}return O+=r,r.length}var $=C(n);if(!$)throw console.error(f.replace("{}",n)),new Error('Unknown language: "'+n+'"');b($);var y,x=r||$,k={},E="";for(y=x;y!==$;y=y.parent)y.className&&(E=u(y.className,"",!0)+E);var O="",S=0;try{for(var N,R,D=0;x.terminators.lastIndex=D,N=x.terminators.exec(i);)R=g(i.substring(D,N.index),N),D=N.index+R;for(g(i.substr(D)),y=x;y.parent;y=y.parent)y.className&&(E+="</span>");return{relevance:S,value:E,illegal:!1,language:n,top:x}}catch(t){if(t.message&&-1!==t.message.indexOf("Illegal"))return{illegal:!0,relevance:0,value:p(i)};if(a)return{relevance:0,value:p(i),language:n,top:x,errorRaised:t};throw t}}function _(n,t){t=t||l.languages||e(o);var r={relevance:0,value:p(n)},i=r;return t.filter(C).filter(S).forEach((function(t){var e=w(t,n,!1);e.language=t,e.relevance>i.relevance&&(i=e),e.relevance>r.relevance&&(i=r,r=e)})),i.language&&(r.second_best=i),r}function x(n){return l.tabReplace||l.useBR?n.replace(s,(function(n,t){return l.useBR&&"\n"===n?"<br>":l.tabReplace?t.replace(/\t/g,l.tabReplace):""})):n}function k(n){var e,r,o,a,c,s=function(n){var t,e,r,o,i=n.className+" ";if(i+=n.parentNode?n.parentNode.className:"",e=u.exec(i)){var a=C(e[1]);return a||(console.warn(f.replace("{}",e[1])),console.warn("Falling back to no-highlight mode for this block.",n)),a?e[1]:"no-highlight"}for(t=0,r=(i=i.split(/\s+/)).length;t<r;t++)if(m(o=i[t])||C(o))return o}(n);m(s)||(l.useBR?(e=document.createElement("div")).innerHTML=n.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n"):e=n,c=e.textContent,o=s?w(s,c,!0):_(c),(r=g(e)).length&&((a=document.createElement("div")).innerHTML=o.value,o.value=function(n,e,r){var o=0,i="",a=[];function c(){return n.length&&e.length?n[0].offset!==e[0].offset?n[0].offset<e[0].offset?n:e:"start"===e[0].event?n:e:n.length?n:e}function u(n){i+="<"+h(n)+t.map.call(n.attributes,(function(n){return" "+n.nodeName+'="'+p(n.value).replace(/"/g,"&quot;")+'"'})).join("")+">"}function s(n){i+="</"+h(n)+">"}function f(n){("start"===n.event?u:s)(n.node)}for(;n.length||e.length;){var l=c();if(i+=p(r.substring(o,l[0].offset)),o=l[0].offset,l===n){a.reverse().forEach(s);do{f(l.splice(0,1)[0]),l=c()}while(l===n&&l.length&&l[0].offset===o);a.reverse().forEach(u)}else"start"===l[0].event?a.push(l[0].node):a.pop(),f(l.splice(0,1)[0])}return i+p(r.substr(o))}(r,g(a),c)),o.value=x(o.value),n.innerHTML=o.value,n.className=function(n,t,e){var r=t?i[t]:e,o=[n.trim()];return n.match(/\bhljs\b/)||o.push("hljs"),-1===n.indexOf(r)&&o.push(r),o.join(" ").trim()}(n.className,s,o.language),n.result={language:o.language,re:o.relevance},o.second_best&&(n.second_best={language:o.second_best.language,re:o.second_best.relevance}))}function E(){if(!E.called){E.called=!0;var n=document.querySelectorAll("pre code");t.forEach.call(n,k)}}var O={disableAutodetect:!0};function C(n){return n=(n||"").toLowerCase(),o[n]||o[i[n]]}function S(n){var t=C(n);return t&&!t.disableAutodetect}return n.highlight=w,n.highlightAuto=_,n.fixMarkup=x,n.highlightBlock=k,n.configure=function(n){l=v(l,n)},n.initHighlighting=E,n.initHighlightingOnLoad=function(){window.addEventListener("DOMContentLoaded",E,!1),window.addEventListener("load",E,!1)},n.registerLanguage=function(t,e){var r;try{r=e(n)}catch(n){if(console.error("Language definition for '{}' could not be registered.".replace("{}",t)),!a)throw n;console.error(n),r=O}o[t]=r,r.rawDefinition=e.bind(null,n),r.aliases&&r.aliases.forEach((function(n){i[n]=t}))},n.listLanguages=function(){return e(o)},n.getLanguage=C,n.requireLanguage=function(n){var t=C(n);if(t)return t;throw new Error("The '{}' language is required, but not loaded.".replace("{}",n))},n.autoDetection=S,n.inherit=v,n.debugMode=function(){a=!1},n.IDENT_RE="[a-zA-Z]\\w*",n.UNDERSCORE_IDENT_RE="[a-zA-Z_]\\w*",n.NUMBER_RE="\\b\\d+(\\.\\d+)?",n.C_NUMBER_RE="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",n.BINARY_NUMBER_RE="\\b(0b[01]+)",n.RE_STARTERS_RE="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",n.BACKSLASH_ESCAPE={begin:"\\\\[\\s\\S]",relevance:0},n.APOS_STRING_MODE={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[n.BACKSLASH_ESCAPE]},n.QUOTE_STRING_MODE={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[n.BACKSLASH_ESCAPE]},n.PHRASAL_WORDS_MODE={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},n.COMMENT=function(t,e,r){var o=n.inherit({className:"comment",begin:t,end:e,contains:[]},r||{});return o.contains.push(n.PHRASAL_WORDS_MODE),o.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|XXX):",relevance:0}),o},n.C_LINE_COMMENT_MODE=n.COMMENT("//","$"),n.C_BLOCK_COMMENT_MODE=n.COMMENT("/\\*","\\*/"),n.HASH_COMMENT_MODE=n.COMMENT("#","$"),n.NUMBER_MODE={className:"number",begin:n.NUMBER_RE,relevance:0},n.C_NUMBER_MODE={className:"number",begin:n.C_NUMBER_RE,relevance:0},n.BINARY_NUMBER_MODE={className:"number",begin:n.BINARY_NUMBER_RE,relevance:0},n.CSS_NUMBER_MODE={className:"number",begin:n.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},n.REGEXP_MODE={className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[n.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[n.BACKSLASH_ESCAPE]}]},n.TITLE_MODE={className:"title",begin:n.IDENT_RE,relevance:0},n.UNDERSCORE_TITLE_MODE={className:"title",begin:n.UNDERSCORE_IDENT_RE,relevance:0},n.METHOD_GUARD={begin:"\\.\\s*"+n.UNDERSCORE_IDENT_RE,relevance:0},[n.BACKSLASH_ESCAPE,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.PHRASAL_WORDS_MODE,n.COMMENT,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,n.HASH_COMMENT_MODE,n.NUMBER_MODE,n.C_NUMBER_MODE,n.BINARY_NUMBER_MODE,n.CSS_NUMBER_MODE,n.REGEXP_MODE,n.TITLE_MODE,n.UNDERSCORE_TITLE_MODE,n.METHOD_GUARD].forEach((function(n){!function n(t){Object.freeze(t);var e="function"==typeof t;return Object.getOwnPropertyNames(t).forEach((function(o){!t.hasOwnProperty(o)||null===t[o]||"object"!==r(t[o])&&"function"!=typeof t[o]||e&&("caller"===o||"callee"===o||"arguments"===o)||Object.isFrozen(t[o])||n(t[o])})),t}(n)})),n},o="object"===("undefined"==typeof window?"undefined":r(window))&&window||"object"===("undefined"==typeof self?"undefined":r(self))&&self,t.nodeType?o&&(o.hljs=e({})):e(t)}));var no=/\r\n|\r|\n/g;function to(n){var t=n.className;if(/hljs-/.test(t)){for(var e=eo(n.innerHTML),r=0,o="";r<e.length;r++){var i=e[r].length>0?e[r]:" ";o+='<span class="'.concat(t,'">').concat(i,"</span>\n")}n.innerHTML=o.trim()}}function eo(n){return 0===n.length?[]:n.split(no)}function ro(n){return(n.trim().match(no)||[]).length}document.addEventListener("copy",(function(n){var t,e=window.getSelection();(function(n){for(var t=n;t;){if(t.className&&-1!==t.className.indexOf("hljs-ln-code"))return!0;t=t.parentNode}return!1})(e.anchorNode)&&(t=-1!==window.navigator.userAgent.indexOf("Edge")?function(n){for(var t=n.toString(),e=n.anchorNode;"TD"!==e.nodeName;)e=e.parentNode;for(var r=n.focusNode;"TD"!==r.nodeName;)r=r.parentNode;var o=parseInt(e.dataset.lineNumber,10),i=parseInt(r.dataset.lineNumber,10);if(o!=i){var a=e.textContent,c=r.textContent;if(o>i){var u=o;o=i,i=u,u=a,a=c,c=u}for(;0!==t.indexOf(a);)a=a.slice(1);for(;-1===t.lastIndexOf(c);)c=c.slice(0,-1);for(var s=a,f=function(n){for(var t=n;"TABLE"!==t.nodeName;)t=t.parentNode;return t}(e),l=o+1;l<i;++l){var d=".".concat("hljs-ln-code","[").concat("data-line-number",'="').concat(l,'"]');s+="\n"+f.querySelector(d).textContent}return s+="\n"+c}return t}(e):e.toString(),n.clipboardData.setData("text/plain",t),n.preventDefault())}));var oo;Xr.registerLanguage("css",(function(n){var t={begin:/(?:[A-Z\_\.\-]+|--[a-zA-Z0-9_-]+)\s*:/,returnBegin:!0,end:";",endsWithParent:!0,contains:[{className:"attribute",begin:/\S/,end:":",excludeEnd:!0,starts:{endsWithParent:!0,excludeEnd:!0,contains:[{begin:/[\w-]+\(/,returnBegin:!0,contains:[{className:"built_in",begin:/[\w-]+/},{begin:/\(/,end:/\)/,contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.CSS_NUMBER_MODE]}]},n.CSS_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,n.C_BLOCK_COMMENT_MODE,{className:"number",begin:"#[0-9A-Fa-f]+"},{className:"meta",begin:"!important"}]}}]};return{case_insensitive:!0,illegal:/[=\/|'\$]/,contains:[n.C_BLOCK_COMMENT_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/},{className:"selector-class",begin:/\.[A-Za-z0-9_-]+/},{className:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},{className:"selector-pseudo",begin:/:(:)?[a-zA-Z0-9\_\-\+\(\)"'.]+/},{begin:"@(page|font-face)",lexemes:"@[a-z-]+",keywords:"@page @font-face"},{begin:"@",end:"[{;]",illegal:/:/,returnBegin:!0,contains:[{className:"keyword",begin:/@\-?\w[\w]*(\-\w+)*/},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:"and or not only",contains:[{begin:/[a-z-]+:/,className:"attribute"},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"[a-zA-Z-][a-zA-Z0-9_-]*",relevance:0},{begin:"{",end:"}",illegal:/\S/,contains:[n.C_BLOCK_COMMENT_MODE,t]}]}})),Xr.registerLanguage("diff",(function(n){return{aliases:["patch"],contains:[{className:"meta",relevance:10,variants:[{begin:/^@@ +\-\d+,\d+ +\+\d+,\d+ +@@$/},{begin:/^\*\*\* +\d+,\d+ +\*\*\*\*$/},{begin:/^\-\-\- +\d+,\d+ +\-\-\-\-$/}]},{className:"comment",variants:[{begin:/Index: /,end:/$/},{begin:/={3,}/,end:/$/},{begin:/^\-{3}/,end:/$/},{begin:/^\*{3} /,end:/$/},{begin:/^\+{3}/,end:/$/},{begin:/^\*{15}$/}]},{className:"addition",begin:"^\\+",end:"$"},{className:"deletion",begin:"^\\-",end:"$"},{className:"addition",begin:"^\\!",end:"$"}]}})),Xr.registerLanguage("dockerfile",(function(n){return{aliases:["docker"],case_insensitive:!0,keywords:"from maintainer expose env arg user onbuild stopsignal",contains:[n.HASH_COMMENT_MODE,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.NUMBER_MODE,{beginKeywords:"run cmd entrypoint volume add copy workdir label healthcheck shell",starts:{end:/[^\\]$/,subLanguage:"bash"}}],illegal:"</"}})),Xr.registerLanguage("go",(function(n){var t={keyword:"break default func interface select case map struct chan else goto package switch const fallthrough if range type continue for import return var go defer bool byte complex64 complex128 float32 float64 int8 int16 int32 int64 string uint8 uint16 uint32 uint64 int uint uintptr rune",literal:"true false iota nil",built_in:"append cap close complex copy imag len make new panic print println real recover delete"};return{aliases:["golang"],keywords:t,illegal:"</",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,{className:"string",variants:[n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{begin:n.C_NUMBER_RE+"[i]",relevance:1},n.C_NUMBER_MODE]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[n.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,keywords:t,illegal:/["']/}]}]}})),Xr.registerLanguage("http",(function(n){return{aliases:["https"],illegal:"\\S",contains:[{begin:"^HTTP/[0-9\\.]+",end:"$",contains:[{className:"number",begin:"\\b\\d{3}\\b"}]},{begin:"^[A-Z]+ (.*?) HTTP/[0-9\\.]+$",returnBegin:!0,end:"$",contains:[{className:"string",begin:" ",end:" ",excludeBegin:!0,excludeEnd:!0},{begin:"HTTP/[0-9\\.]+"},{className:"keyword",begin:"[A-Z]+"}]},{className:"attribute",begin:"^\\w",end:": ",excludeEnd:!0,illegal:"\\n|\\s|=",starts:{end:"$",relevance:0}},{begin:"\\n\\n",starts:{subLanguage:[],endsWithParent:!0}}]}})),Xr.registerLanguage("javascript",(function(n){var t="<>",e="</>",r={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/},o="[A-Za-z$_][0-9A-Za-z$_]*",i={keyword:"in of if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const export super debugger as async await static import from as",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document Symbol Set Map WeakSet WeakMap Proxy Reflect Promise"},a={className:"number",variants:[{begin:"\\b(0[bB][01]+)n?"},{begin:"\\b(0[oO][0-7]+)n?"},{begin:n.C_NUMBER_RE+"n?"}],relevance:0},c={className:"subst",begin:"\\$\\{",end:"\\}",keywords:i,contains:[]},u={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,c],subLanguage:"xml"}},s={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,c],subLanguage:"css"}},f={className:"string",begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE,c]};c.contains=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,u,s,f,a,n.REGEXP_MODE];var l=c.contains.concat([n.C_BLOCK_COMMENT_MODE,n.C_LINE_COMMENT_MODE]);return{aliases:["js","jsx","mjs","cjs"],keywords:i,contains:[{className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},{className:"meta",begin:/^#!/,end:/$/},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,u,s,f,n.C_LINE_COMMENT_MODE,n.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+",contains:[{className:"type",begin:"\\{",end:"\\}",relevance:0},{className:"variable",begin:o+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),n.C_BLOCK_COMMENT_MODE,a,{begin:/[{,\n]\s*/,relevance:0,contains:[{begin:o+"\\s*:",returnBegin:!0,relevance:0,contains:[{className:"attr",begin:o,relevance:0}]}]},{begin:"("+n.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,n.REGEXP_MODE,{className:"function",begin:"(\\(.*?\\)|"+o+")\\s*=>",returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:o},{begin:/\(\s*\)/},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:i,contains:l}]}]},{className:"",begin:/\s/,end:/\s*/,skip:!0},{variants:[{begin:t,end:e},{begin:r.begin,end:r.end}],subLanguage:"xml",contains:[{begin:r.begin,end:r.end,skip:!0,contains:["self"]}]}],relevance:0},{className:"function",beginKeywords:"function",end:/\{/,excludeEnd:!0,contains:[n.inherit(n.TITLE_MODE,{begin:o}),{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,contains:l}],illegal:/\[|%/},{begin:/\$[(.]/},n.METHOD_GUARD,{className:"class",beginKeywords:"class",end:/[{;=]/,excludeEnd:!0,illegal:/[:"\[\]]/,contains:[{beginKeywords:"extends"},n.UNDERSCORE_TITLE_MODE]},{beginKeywords:"constructor get set",end:/\{/,excludeEnd:!0}],illegal:/#(?!!)/}})),Xr.registerLanguage("markdown",(function(n){return{aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$"},{begin:"^.+?\\n[=-]{2,}$"}]},{begin:"<",end:">",subLanguage:"xml",relevance:0},{className:"bullet",begin:"^\\s*([*+-]|(\\d+\\.))\\s+"},{className:"strong",begin:"[*_]{2}.+?[*_]{2}"},{className:"emphasis",variants:[{begin:"\\*.+?\\*"},{begin:"_.+?_",relevance:0}]},{className:"quote",begin:"^>\\s+",end:"$"},{className:"code",variants:[{begin:"^```\\w*\\s*$",end:"^```[ ]*$"},{begin:"`.+?`"},{begin:"^( {4}|\\t)",end:"$",relevance:0}]},{begin:"^[-\\*]{3,}",end:"$"},{begin:"\\[.+?\\][\\(\\[].*?[\\)\\]]",returnBegin:!0,contains:[{className:"string",begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0,relevance:0},{className:"link",begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}],relevance:10},{begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]}]}})),Xr.registerLanguage("mojolicious",(function(n){return{subLanguage:"xml",contains:[{className:"meta",begin:"^__(END|DATA)__$"},{begin:"^\\s*%{1,2}={0,2}",end:"$",subLanguage:"perl"},{begin:"<%{1,2}={0,2}",end:"={0,1}%>",subLanguage:"perl",excludeBegin:!0,excludeEnd:!0}]}})),Xr.registerLanguage("nginx",(function(n){var t={className:"variable",variants:[{begin:/\$\d+/},{begin:/\$\{/,end:/}/},{begin:"[\\$\\@]"+n.UNDERSCORE_IDENT_RE}]},e={endsWithParent:!0,lexemes:"[a-z/_]+",keywords:{literal:"on off yes no true false none blocked debug info notice warn error crit select break last permanent redirect kqueue rtsig epoll poll /dev/poll"},relevance:0,illegal:"=>",contains:[n.HASH_COMMENT_MODE,{className:"string",contains:[n.BACKSLASH_ESCAPE,t],variants:[{begin:/"/,end:/"/},{begin:/'/,end:/'/}]},{begin:"([a-z]+):/",end:"\\s",endsWithParent:!0,excludeEnd:!0,contains:[t]},{className:"regexp",contains:[n.BACKSLASH_ESCAPE,t],variants:[{begin:"\\s\\^",end:"\\s|{|;",returnEnd:!0},{begin:"~\\*?\\s+",end:"\\s|{|;",returnEnd:!0},{begin:"\\*(\\.[a-z\\-]+)+"},{begin:"([a-z\\-]+\\.)+\\*"}]},{className:"number",begin:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{className:"number",begin:"\\b\\d+[kKmMgGdshdwy]*\\b",relevance:0},t]};return{aliases:["nginxconf"],contains:[n.HASH_COMMENT_MODE,{begin:n.UNDERSCORE_IDENT_RE+"\\s+{",returnBegin:!0,end:"{",contains:[{className:"section",begin:n.UNDERSCORE_IDENT_RE}],relevance:0},{begin:n.UNDERSCORE_IDENT_RE+"\\s",end:";|{",returnBegin:!0,contains:[{className:"attribute",begin:n.UNDERSCORE_IDENT_RE,starts:e}],relevance:0}],illegal:"[^\\s\\}]"}})),Xr.registerLanguage("perl",(function(n){var t="getpwent getservent quotemeta msgrcv scalar kill dbmclose undef lc ma syswrite tr send umask sysopen shmwrite vec qx utime local oct semctl localtime readpipe do return format read sprintf dbmopen pop getpgrp not getpwnam rewinddir qqfileno qw endprotoent wait sethostent bless s|0 opendir continue each sleep endgrent shutdown dump chomp connect getsockname die socketpair close flock exists index shmgetsub for endpwent redo lstat msgctl setpgrp abs exit select print ref gethostbyaddr unshift fcntl syscall goto getnetbyaddr join gmtime symlink semget splice x|0 getpeername recv log setsockopt cos last reverse gethostbyname getgrnam study formline endhostent times chop length gethostent getnetent pack getprotoent getservbyname rand mkdir pos chmod y|0 substr endnetent printf next open msgsnd readdir use unlink getsockopt getpriority rindex wantarray hex system getservbyport endservent int chr untie rmdir prototype tell listen fork shmread ucfirst setprotoent else sysseek link getgrgid shmctl waitpid unpack getnetbyname reset chdir grep split require caller lcfirst until warn while values shift telldir getpwuid my getprotobynumber delete and sort uc defined srand accept package seekdir getprotobyname semop our rename seek if q|0 chroot sysread setpwent no crypt getc chown sqrt write setnetent setpriority foreach tie sin msgget map stat getlogin unless elsif truncate exec keys glob tied closedirioctl socket readlink eval xor readline binmode setservent eof ord bind alarm pipe atan2 getgrent exp time push setgrent gt lt or ne m|0 break given say state when",e={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:t},r={begin:"->{",end:"}"},o={variants:[{begin:/\$\d/},{begin:/[\$%@](\^\w\b|#\w+(::\w+)*|{\w+}|\w+(::\w*)*)/},{begin:/[\$%@][^\s\w{]/,relevance:0}]},i=[n.BACKSLASH_ESCAPE,e,o],a=[o,n.HASH_COMMENT_MODE,n.COMMENT("^\\=\\w","\\=cut",{endsWithParent:!0}),r,{className:"string",contains:i,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*\\<",end:"\\>",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[n.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE]},{begin:"{\\w+}",contains:[],relevance:0},{begin:"-?\\w+\\s*\\=\\>",contains:[],relevance:0}]},{className:"number",begin:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",relevance:0},{begin:"(\\/\\/|"+n.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[n.HASH_COMMENT_MODE,{className:"regexp",begin:"(s|tr|y)/(\\\\.|[^/])*/(\\\\.|[^/])*/[a-z]*",relevance:10},{className:"regexp",begin:"(m|qr)?/",end:"/[a-z]*",contains:[n.BACKSLASH_ESCAPE],relevance:0}]},{className:"function",beginKeywords:"sub",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[n.TITLE_MODE]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return e.contains=a,r.contains=a,{aliases:["pl","pm"],lexemes:/[\w\.]+/,keywords:t,contains:a}})),Xr.registerLanguage("python",(function(n){var t={keyword:"and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del or def lambda async await nonlocal|10",built_in:"Ellipsis NotImplemented",literal:"False None True"},e={className:"meta",begin:/^(>>>|\.\.\.) /},r={className:"subst",begin:/\{/,end:/\}/,keywords:t,illegal:/#/},o={begin:/\{\{/,relevance:0},i={className:"string",contains:[n.BACKSLASH_ESCAPE],variants:[{begin:/(u|b)?r?'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,e],relevance:10},{begin:/(u|b)?r?"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,e],relevance:10},{begin:/(fr|rf|f)'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,e,o,r]},{begin:/(fr|rf|f)"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,e,o,r]},{begin:/(u|r|ur)'/,end:/'/,relevance:10},{begin:/(u|r|ur)"/,end:/"/,relevance:10},{begin:/(b|br)'/,end:/'/},{begin:/(b|br)"/,end:/"/},{begin:/(fr|rf|f)'/,end:/'/,contains:[n.BACKSLASH_ESCAPE,o,r]},{begin:/(fr|rf|f)"/,end:/"/,contains:[n.BACKSLASH_ESCAPE,o,r]},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},a={className:"number",relevance:0,variants:[{begin:n.BINARY_NUMBER_RE+"[lLjJ]?"},{begin:"\\b(0o[0-7]+)[lLjJ]?"},{begin:n.C_NUMBER_RE+"[lLjJ]?"}]},c={className:"params",begin:/\(/,end:/\)/,contains:["self",e,a,i,n.HASH_COMMENT_MODE]};return r.contains=[i,a,e],{aliases:["py","gyp","ipython"],keywords:t,illegal:/(<\/|->|\?)|=>/,contains:[e,a,{beginKeywords:"if",relevance:0},i,n.HASH_COMMENT_MODE,{variants:[{className:"function",beginKeywords:"def"},{className:"class",beginKeywords:"class"}],end:/:/,illegal:/[${=;\n,]/,contains:[n.UNDERSCORE_TITLE_MODE,c,{begin:/->/,endsWithParent:!0,keywords:"None"}]},{className:"meta",begin:/^[\t ]*@/,end:/$/},{begin:/\b(print|exec)\(/}]}})),Xr.registerLanguage("scss",(function(n){var t={className:"variable",begin:"(\\$[a-zA-Z-][a-zA-Z0-9_-]*)\\b"},e={className:"number",begin:"#[0-9A-Fa-f]+"};n.CSS_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,n.C_BLOCK_COMMENT_MODE;return{case_insensitive:!0,illegal:"[=/|']",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,{className:"selector-id",begin:"\\#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},{className:"selector-attr",begin:"\\[",end:"\\]",illegal:"$"},{className:"selector-tag",begin:"\\b(a|abbr|acronym|address|area|article|aside|audio|b|base|big|blockquote|body|br|button|canvas|caption|cite|code|col|colgroup|command|datalist|dd|del|details|dfn|div|dl|dt|em|embed|fieldset|figcaption|figure|footer|form|frame|frameset|(h[1-6])|head|header|hgroup|hr|html|i|iframe|img|input|ins|kbd|keygen|label|legend|li|link|map|mark|meta|meter|nav|noframes|noscript|object|ol|optgroup|option|output|p|param|pre|progress|q|rp|rt|ruby|samp|script|section|select|small|span|strike|strong|style|sub|sup|table|tbody|td|textarea|tfoot|th|thead|time|title|tr|tt|ul|var|video)\\b",relevance:0},{className:"selector-pseudo",begin:":(visited|valid|root|right|required|read-write|read-only|out-range|optional|only-of-type|only-child|nth-of-type|nth-last-of-type|nth-last-child|nth-child|not|link|left|last-of-type|last-child|lang|invalid|indeterminate|in-range|hover|focus|first-of-type|first-line|first-letter|first-child|first|enabled|empty|disabled|default|checked|before|after|active)"},{className:"selector-pseudo",begin:"::(after|before|choices|first-letter|first-line|repeat-index|repeat-item|selection|value)"},t,{className:"attribute",begin:"\\b(src|z-index|word-wrap|word-spacing|word-break|width|widows|white-space|visibility|vertical-align|unicode-bidi|transition-timing-function|transition-property|transition-duration|transition-delay|transition|transform-style|transform-origin|transform|top|text-underline-position|text-transform|text-shadow|text-rendering|text-overflow|text-indent|text-decoration-style|text-decoration-line|text-decoration-color|text-decoration|text-align-last|text-align|tab-size|table-layout|right|resize|quotes|position|pointer-events|perspective-origin|perspective|page-break-inside|page-break-before|page-break-after|padding-top|padding-right|padding-left|padding-bottom|padding|overflow-y|overflow-x|overflow-wrap|overflow|outline-width|outline-style|outline-offset|outline-color|outline|orphans|order|opacity|object-position|object-fit|normal|none|nav-up|nav-right|nav-left|nav-index|nav-down|min-width|min-height|max-width|max-height|mask|marks|margin-top|margin-right|margin-left|margin-bottom|margin|list-style-type|list-style-position|list-style-image|list-style|line-height|letter-spacing|left|justify-content|initial|inherit|ime-mode|image-orientation|image-resolution|image-rendering|icon|hyphens|height|font-weight|font-variant-ligatures|font-variant|font-style|font-stretch|font-size-adjust|font-size|font-language-override|font-kerning|font-feature-settings|font-family|font|float|flex-wrap|flex-shrink|flex-grow|flex-flow|flex-direction|flex-basis|flex|filter|empty-cells|display|direction|cursor|counter-reset|counter-increment|content|column-width|column-span|column-rule-width|column-rule-style|column-rule-color|column-rule|column-gap|column-fill|column-count|columns|color|clip-path|clip|clear|caption-side|break-inside|break-before|break-after|box-sizing|box-shadow|box-decoration-break|bottom|border-width|border-top-width|border-top-style|border-top-right-radius|border-top-left-radius|border-top-color|border-top|border-style|border-spacing|border-right-width|border-right-style|border-right-color|border-right|border-radius|border-left-width|border-left-style|border-left-color|border-left|border-image-width|border-image-source|border-image-slice|border-image-repeat|border-image-outset|border-image|border-color|border-collapse|border-bottom-width|border-bottom-style|border-bottom-right-radius|border-bottom-left-radius|border-bottom-color|border-bottom|border|background-size|background-repeat|background-position|background-origin|background-image|background-color|background-clip|background-attachment|background-blend-mode|background|backface-visibility|auto|animation-timing-function|animation-play-state|animation-name|animation-iteration-count|animation-fill-mode|animation-duration|animation-direction|animation-delay|animation|align-self|align-items|align-content)\\b",illegal:"[^\\s]"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:":",end:";",contains:[t,e,n.CSS_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,{className:"meta",begin:"!important"}]},{begin:"@(page|font-face)",lexemes:"@[a-z-]+",keywords:"@page @font-face"},{begin:"@",end:"[{;]",returnBegin:!0,keywords:"and or not only",contains:[{begin:"@[a-z-]+",className:"keyword"},t,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,e,n.CSS_NUMBER_MODE]}]}})),Xr.registerLanguage("shell",(function(n){return{aliases:["console"],contains:[{className:"meta",begin:"^\\s{0,3}[/\\w\\d\\[\\]()@-]*[>%$#]",starts:{end:"$",subLanguage:"bash"}}]}})),Xr.registerLanguage("xml",(function(n){var t={className:"symbol",begin:"&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;"},e={begin:"\\s",contains:[{className:"meta-keyword",begin:"#?[a-z_][a-z1-9_-]+",illegal:"\\n"}]},r=n.inherit(e,{begin:"\\(",end:"\\)"}),o=n.inherit(n.APOS_STRING_MODE,{className:"meta-string"}),i=n.inherit(n.QUOTE_STRING_MODE,{className:"meta-string"}),a={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:"[A-Za-z0-9\\._:-]+",relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[t]},{begin:/'/,end:/'/,contains:[t]},{begin:/[^\s"'=<>`]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,contains:[{className:"meta",begin:"<![a-z]",end:">",relevance:10,contains:[e,i,o,r,{begin:"\\[",end:"\\]",contains:[{className:"meta",begin:"<![a-z]",end:">",contains:[e,r,i,o]}]}]},n.COMMENT("\x3c!--","--\x3e",{relevance:10}),{begin:"<\\!\\[CDATA\\[",end:"\\]\\]>",relevance:10},t,{className:"meta",begin:/<\?xml/,end:/\?>/,relevance:10},{begin:/<\?(php)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},n.inherit(n.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),n.inherit(n.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]},{className:"tag",begin:"<style(?=\\s|>)",end:">",keywords:{name:"style"},contains:[a],starts:{end:"</style>",returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:"<script(?=\\s|>)",end:">",keywords:{name:"script"},contains:[a],starts:{end:"<\/script>",returnEnd:!0,subLanguage:["actionscript","javascript","handlebars","xml"]}},{className:"tag",begin:"</?",end:"/?>",contains:[{className:"name",begin:/[^\/><\s]+/,relevance:0},a]}]}})),Xr.registerLanguage("yaml",(function(n){var t={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[n.BACKSLASH_ESCAPE,{className:"template-variable",variants:[{begin:"{{",end:"}}"},{begin:"%{",end:"}"}]}]};return{case_insensitive:!0,aliases:["yml","YAML","yaml"],contains:[{className:"attr",variants:[{begin:"\\w[\\w :\\/.-]*:(?=[ \t]|$)"},{begin:'"\\w[\\w :\\/.-]*":(?=[ \t]|$)'},{begin:"'\\w[\\w :\\/.-]*':(?=[ \t]|$)"}]},{className:"meta",begin:"^---s*$",relevance:10},{className:"string",begin:"[\\|>]([0-9]?[+-])?[ ]*\\n( *)[\\S ]+\\n(\\2[\\S ]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!"+n.UNDERSCORE_IDENT_RE},{className:"type",begin:"!!"+n.UNDERSCORE_IDENT_RE},{className:"meta",begin:"&"+n.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+n.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"\\-(?=[ ]|$)",relevance:0},n.HASH_COMMENT_MODE,{beginKeywords:"true false yes no null",keywords:{literal:"true false yes no null"}},{className:"number",begin:n.C_NUMBER_RE+"\\b"},t]}})),(oo=Xr).lineNumbersBlock=function(n,t){oo.highlightBlock(n,t),n.innerHTML=function(n,t){var e=(t=t||{singleLine:!1}).singleLine?0:1;return function n(t){var e=t.childNodes;for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];ro(o.textContent)>0&&(o.childNodes.length>0?n(o):to(o.parentNode))}}(n),function(n,t){var e=eo(n);if(""===e[e.length-1].trim()&&e.pop(),e.length>t){for(var r="",o=0,i=e.length;o<i;o++){var a=o+1;r+="<tr>"+'<td class="'.concat("hljs-ln-line"," ").concat("hljs-ln-numbers",'" ').concat("data-line-number",'="').concat(a,'">')+'<div class="'.concat("hljs-ln-n",'" ').concat("data-line-number",'="').concat(a,'"></div>')+"</td>"+'<td class="'.concat("hljs-ln-line"," ").concat("hljs-ln-code",'" ').concat("data-line-number",'="').concat(a,'">')+(e[o].length>0?e[o]:" ")+"</td></tr>"}return'<table class="'.concat("hljs-ln",'">').concat(r,"</table>")}return n}(n.innerHTML,e)}(n,t)};var io=e((function(n){function t(n){for(var t=document.createElement("div"),e=[[n,t]],o=[];e.length;){var i=e.shift(),a=p(i,2),c=a[0],u=a[1],s=void 0,f=void 0,l=r(c);if(null===c||"undefined"==l?l="null":Array.isArray(c)&&(l="array"),"array"==l?((f=function(n){return n}).len=c.length,(s=document.createElement("div")).className="json-array "+(f.len?"has-items":"is-empty")):"object"==l?function(){var n=Object.keys(c).sort();(f=function(t){return n[t]}).len=n.length,(s=document.createElement("div")).className="json-object "+(f.len?"has-items":"is-empty")}():((s=document.createElement("span")).className="json-"+l,s.textContent="null"==l?"null":"boolean"!=l?c:c?"true":"false"),f){var d=document.createElement("span");if(d.className="json-type",d.textContent=f.len?l+"["+f.len+"]":"{}",u.appendChild(d),-1!=o.indexOf(c))t.classList.add("has-recursive-items"),s.classList.add("is-seen");else{for(var h=0;h<f.len;h++){var m=f(h),v=document.createElement("div"),g=document.createElement("span");g.className="json-key",g.textContent=m,v.appendChild(g),s.appendChild(v),e.push([c[m],v])}o.push(c)}}u.className="json-item "+s.className.replace(/^json-/,"contains-"),u.appendChild(s)}return t}try{n.exports={jsonhtmlify:t}}catch(n){window.jsonhtmlify=t}})).jsonhtmlify;function ao(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function co(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?ao(Object(e),!0).forEach((function(t){et(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):ao(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}var uo={},so=function(n){var t=n.conversation,e=n.expandUrlToMedia,r=void 0!==e&&e,o=n.from,i=void 0===o?"Convos":o,a=n.groupBy,c=void 0===a?["fromId"]:a,u=n.waiting,s=void 0===u?[]:u,f=new At,l={};return t.messages.map((function(n,e){return(n=co({color:"inherit",from:"Convos",fromId:"Convos",type:"notice",ts:f},n)).canToggleDetails="error"==n.type||"notice"==n.type,n.groupBy=c.map((function(t){return n[t]||""})).join(":"),n.index=e,n.isOnline=function(n,t){return!t.connection_id||("Convos"==n.fromId||(n.fromId==t.connection_id||!!t.findParticipant(n.fromId)))}(n,t),n.dayChanged=function(n,t){return t.ts&&n.ts.getDate()!=t.ts.getDate()}(n,l),n.embeds=function(n,t){var e=t.conversation,r=t.expandUrlToMedia,o=t.from,i="notice"!=n.type&&r?(n.embeds||[]).map((function(t){return uo[t]||(uo[t]=function(n,t){return lo.apply(this,arguments)}(t,{conversation:e,from:o,msg:n}))})):[];if(n.canToggleDetails){var a=["details",e.path,n.ts.valueOf()].join(":");i.unshift(uo[a]||(uo[a]=function(n,t){return fo.apply(this,arguments)}(a,n)))}return i.filter((function(n){return n})).map((function(t){return t.catch((function(t){return console.error(n,t)})),t}))}(n,{conversation:t,expandUrlToMedia:r,from:i}),n.className=po(n,l),l=n,n})).concat(function(n){n.conversation;var t=n.from,e=n.waiting,r={};return e.filter((function(n){return"send"==n.method&&n.message})).map((function(n,e){return(n=co({color:"inherit",from:t,fromId:t.toLowerCase()},n)).canToggleDetails=!0,n.dayChanged=!1,n.groupBy="fromId",n.index=e,n.isOnline=!0,n.type=n.waitingForResponse?"notice":"error",n.embeds=[],n.className=po(n,r)+" is-waiting",n.markdown=n.waitingForResponse?n.message:he('Could not send message "%1".',n.message),r=n,n}))}({conversation:t,from:i,waiting:s}))};function fo(){return(fo=tt(Xn.mark((function n(t,e){var r;return Xn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=co({},e.sent||e),["bubbles","canToggleDetails","className","color","command","connection_id","dayChanged","embeds","event","groupBy","id","index","isOnline","markdown","method","stopPropagation"].forEach((function(n){return delete r[n]})),n.abrupt("return",{className:"for-jsonhtmlify hidden",html:io(r).outerHTML});case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function lo(){return(lo=tt(Xn.mark((function n(t,e){var r,o,i,a;return Xn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Tt("/api","embed",{url:t}).perform();case 2:return r=n.sent,(o=r.res.body).html||(o.html=""),i=o.provider_name&&o.provider_name.toLowerCase()||"",o.className=i?"for-"+i:o.html?"for-unknown":"hidden",vt(a=document.createRange().createContextualFragment(o.html).firstChild,"img",[["error",function(n){return n.target.style.display="none"}]]),-1!=(a&&a.className||"").split(/\s+/).indexOf("le-paste")&&mo(o,a),"jitsi"==i&&ho(o,a,e),n.abrupt("return",o);case 13:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function po(n,t){var e=["message"];return n.type&&e.push("is-type-"+n.type),n.highlight&&e.push("is-highlighted"),e.push(n.dayChanged||n.groupBy!=t.groupBy?"has-not-same-from":"has-same-from"),e.push(n.isOnline?"is-present":"is-not-present"),e.join(" ")}function ho(n,t,e){e.from;var r,o=e.conversation,i=new URL(n.url).pathname.replace(/^\//,"");i&&-1==i.indexOf("/")&&(r=0==i.indexOf(o.connection_id+"-")?i.substring(o.connection_id.length+1):i.replace(/[_-]+/g," ").replace(/([a-z ])([A-Z])/g,(function(n,t,e){return t+" "+e.toUpperCase()})).replace(/([ ]\w)/g,(function(n){return n.toUpperCase()})),r=decodeURIComponent(r),n.html='<div class="le-card le-rich le-join-request"><a class="le-thumbnail" href="'+n.url+'" target="'+i+'"><i class="fas fa-video"></i></a><h3>'+pe('Do you want to join the %1 video chat with "%2"?',"Jitsi",r)+'</h3><p class="le-description"><a href="'+n.url+'" target="'+i+'">'+pe("Yes, I want to join.")+"</a></p></div>")}function mo(n,t){var e=t.querySelector("pre");e&&(Xr.lineNumbersBlock(e),n.html=t.outerHTML)}function vo(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function go(n,t,e){var r=n.slice();return r[30]=t[e],r}function $o(n,t,e){var r=n.slice();return r[27]=t[e],r[29]=e,r}function yo(n){var t,e,r,o,i,a,c=new fr({props:{name:n[8].icon}});return{c:function(){t=Y("a"),Gn(c.$$.fragment),nn(t,"href",e=n[8].convosUrl),nn(t,"target",r=n[8].roomName),nn(t,"data-handle-link",o=n[8].realUrl),nn(t,"class","btn has-tooltip"),nn(t,"tooltip",pe("Start video conference"))},m:function(e,r,o){K(e,t,r),Yn(c,t,null),i=!0,o&&a(),a=Q(t,"click",n[14])},p:function(n,a){var u={};256&a[0]&&(u.name=n[8].icon),c.$set(u),(!i||256&a[0]&&e!==(e=n[8].convosUrl))&&nn(t,"href",e),(!i||256&a[0]&&r!==(r=n[8].roomName))&&nn(t,"target",r),(!i||256&a[0]&&o!==(o=n[8].realUrl))&&nn(t,"data-handle-link",o)},i:function(n){i||(Bn(c.$$.fragment,n),i=!0)},o:function(n){zn(c.$$.fragment,n),i=!1},d:function(n){n&&W(t),Vn(c),a()}}}function bo(n){var t,e,r,o,i,a,c,u,s,f,l,d,p=pe(n[1].name)+"",h=me(n[0],n[1])+"",m=n[8].convosUrl&&yo(n),v=new fr({props:{name:"tools"}}),g=new fr({props:{name:"times"}});return{c:function(){t=Y("h1"),e=Y("a"),r=V(p),i=J(),a=Y("span"),c=V(h),u=J(),m&&m.c(),s=J(),f=Y("a"),Gn(v.$$.fragment),Gn(g.$$.fragment),nn(e,"href",o="#activeMenu:"+(n[1].connection_id?"settings":"nav")),nn(e,"tabindex","-1"),nn(a,"class","chat-header__topic"),nn(f,"href",l="#activeMenu:"+(n[1].connection_id?"settings":"nav")),nn(f,"class","btn has-tooltip can-toggle"),nn(f,"data-tooltip",pe("Settings")),an(f,"is-toggled","settings"==n[4].activeMenu)},m:function(n,o){K(n,t,o),F(t,e),F(e,r),K(n,i,o),K(n,a,o),F(a,c),K(n,u,o),m&&m.m(n,o),K(n,s,o),K(n,f,o),Yn(v,f,null),Yn(g,f,null),d=!0},p:function(n,t){(!d||2&t[0])&&p!==(p=pe(n[1].name)+"")&&en(r,p),(!d||2&t[0]&&o!==(o="#activeMenu:"+(n[1].connection_id?"settings":"nav")))&&nn(e,"href",o),(!d||3&t[0])&&h!==(h=me(n[0],n[1])+"")&&en(c,h),n[8].convosUrl?m?(m.p(n,t),Bn(m,1)):((m=yo(n)).c(),Bn(m,1),m.m(s.parentNode,s)):m&&(In(),zn(m,1,1,(function(){m=null})),Un()),(!d||2&t[0]&&l!==(l="#activeMenu:"+(n[1].connection_id?"settings":"nav")))&&nn(f,"href",l),16&t[0]&&an(f,"is-toggled","settings"==n[4].activeMenu)},i:function(n){d||(Bn(m),Bn(v.$$.fragment,n),Bn(g.$$.fragment,n),d=!0)},o:function(n){zn(m),zn(v.$$.fragment,n),zn(g.$$.fragment,n),d=!1},d:function(n){n&&W(t),n&&W(i),n&&W(a),n&&W(u),m&&m.d(n),n&&W(s),n&&W(f),Vn(v),Vn(g)}}}function wo(n){var t,e,r,o,i,a=new fr({props:{name:"spinner",animation:"spin"}});return{c:function(){t=Y("div"),e=Y("span"),Gn(a.$$.fragment),r=J(),(o=Y("i")).textContent="".concat(pe("Loading...")),nn(t,"class","message__status-line for-loading has-pos-top")},m:function(n,c){K(n,t,c),F(t,e),Yn(a,e,null),F(e,r),F(e,o),i=!0},p:O,i:function(n){i||(Bn(a.$$.fragment,n),i=!0)},o:function(n){zn(a.$$.fragment,n),i=!1},d:function(n){n&&W(t),Vn(a)}}}function _o(n){var t,e,r,o,i,a,c=pe("Started chatting on %1",n[6].historyStartAt.getHumanDate())+"",u=new fr({props:{name:"calendar-alt"}});return{c:function(){t=Y("div"),e=Y("span"),Gn(u.$$.fragment),r=J(),o=Y("i"),i=V(c),nn(t,"class","message__status-line for-start-of-history")},m:function(n,c){K(n,t,c),F(t,e),Yn(u,e,null),F(e,r),F(e,o),F(o,i),a=!0},p:function(n,t){(!a||64&t[0])&&c!==(c=pe("Started chatting on %1",n[6].historyStartAt.getHumanDate())+"")&&en(i,c)},i:function(n){a||(Bn(u.$$.fragment,n),a=!0)},o:function(n){zn(u.$$.fragment,n),a=!1},d:function(n){n&&W(t),Vn(u)}}}function xo(n){var t,e,r,o,i=[Eo,ko],a=[];function c(n,t){return n[6].is_private?0:1}return t=c(n),e=a[t]=i[t](n),{c:function(){e.c(),r=Z()},m:function(n,e){a[t].m(n,e),K(n,r,e),o=!0},p:function(n,o){var u=t;(t=c(n))===u?a[t].p(n,o):(In(),zn(a[u],1,1,(function(){a[u]=null})),Un(),(e=a[t])||(e=a[t]=i[t](n)).c(),Bn(e,1),e.m(r.parentNode,r))},i:function(n){o||(Bn(e),o=!0)},o:function(n){zn(e),o=!1},d:function(n){a[t].d(n),n&&W(r)}}}function ko(n){var t,e,r,o,i,a=new yr({props:{$$slots:{default:[Oo]},$$scope:{ctx:n}}}),c=[So,Co],u=[];function s(n,t){return 1==n[6].nParticipants?0:1}return e=s(n),r=u[e]=c[e](n),{c:function(){Gn(a.$$.fragment),t=J(),r.c(),o=Z()},m:function(n,r){Yn(a,n,r),K(n,t,r),u[e].m(n,r),K(n,o,r),i=!0},p:function(n,t){var i={};64&t[0]|8&t[1]&&(i.$$scope={dirty:t,ctx:n}),a.$set(i);var f=e;(e=s(n))===f?u[e].p(n,t):(In(),zn(u[f],1,1,(function(){u[f]=null})),Un(),(r=u[e])||(r=u[e]=c[e](n)).c(),Bn(r,1),r.m(o.parentNode,o))},i:function(n){i||(Bn(a.$$.fragment,n),Bn(r),i=!0)},o:function(n){zn(a.$$.fragment,n),zn(r),i=!1},d:function(n){Vn(a,n),n&&W(t),u[e].d(n),n&&W(o)}}}function Eo(n){var t,e=new yr({props:{$$slots:{default:[Do]},$$scope:{ctx:n}}});return{c:function(){Gn(e.$$.fragment)},m:function(n,r){Yn(e,n,r),t=!0},p:function(n,t){var r={};64&t[0]|8&t[1]&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Bn(e.$$.fragment,n),t=!0)},o:function(n){zn(e.$$.fragment,n),t=!1},d:function(n){Vn(e,n)}}}function Oo(n){var t,e=he(n[6].topic?"Topic for %1 is: %2":"No topic is set for %1.",n[6].name,n[6].topic)+"";return{c:function(){t=new sn(e,null)},m:function(n,e){t.m(n,e)},p:function(n,r){64&r[0]&&e!==(e=he(n[6].topic?"Topic for %1 is: %2":"No topic is set for %1.",n[6].name,n[6].topic)+"")&&t.p(e)},d:function(n){n&&t.d()}}}function Co(n){var t,e=new yr({props:{same:!0,$$slots:{default:[No]},$$scope:{ctx:n}}});return{c:function(){Gn(e.$$.fragment)},m:function(n,r){Yn(e,n,r),t=!0},p:function(n,t){var r={};64&t[0]|8&t[1]&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Bn(e.$$.fragment,n),t=!0)},o:function(n){zn(e.$$.fragment,n),t=!1},d:function(n){Vn(e,n)}}}function So(n){var t,e=new yr({props:{same:!0,$$slots:{default:[Ro]},$$scope:{ctx:n}}});return{c:function(){Gn(e.$$.fragment)},m:function(n,r){Yn(e,n,r),t=!0},p:function(n,t){var r={};8&t[1]&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Bn(e.$$.fragment,n),t=!0)},o:function(n){zn(e.$$.fragment,n),t=!1},d:function(n){Vn(e,n)}}}function No(n){var t,e=he("There are %1 [participants](%2) in this conversation.",n[6].nParticipants,n[6].path+"#activeMenu:settings")+"";return{c:function(){t=new sn(e,null)},m:function(n,e){t.m(n,e)},p:function(n,r){64&r[0]&&e!==(e=he("There are %1 [participants](%2) in this conversation.",n[6].nParticipants,n[6].path+"#activeMenu:settings")+"")&&t.p(e)},d:function(n){n&&t.d()}}}function Ro(n){var t,e=pe("You are the only participant in this conversation.")+"";return{c:function(){t=V(e)},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Do(n){var t,e=he('This is a private conversation with "%1".',n[6].name)+"";return{c:function(){t=new sn(e,null)},m:function(n,e){t.m(n,e)},p:function(n,r){64&r[0]&&e!==(e=he('This is a private conversation with "%1".',n[6].name)+"")&&t.p(e)},d:function(n){n&&t.d()}}}function Ao(n){var t,e,r,o,i,a,c=n[27].ts.getHumanDate()+"",u=new fr({props:{name:"calendar-alt"}});return{c:function(){t=Y("div"),e=Y("span"),Gn(u.$$.fragment),r=J(),o=Y("i"),i=V(c),nn(t,"class","message__status-line for-day-changed")},m:function(n,c){K(n,t,c),F(t,e),Yn(u,e,null),F(e,r),F(e,o),F(o,i),a=!0},p:function(n,t){(!a||32&t[0])&&c!==(c=n[27].ts.getHumanDate()+"")&&en(i,c)},i:function(n){a||(Bn(u.$$.fragment,n),a=!0)},o:function(n){zn(u.$$.fragment,n),a=!1},d:function(n){n&&W(t),Vn(u)}}}function Mo(n){var t,e,r,o,i,a=pe("New messages")+"",c=new fr({props:{name:"comments"}});return{c:function(){t=Y("div"),e=Y("span"),Gn(c.$$.fragment),r=J(),o=V(a),nn(t,"class","message__status-line for-last-read")},m:function(n,a){K(n,t,a),F(t,e),Yn(c,e,null),F(e,r),F(e,o),i=!0},p:O,i:function(n){i||(Bn(c.$$.fragment,n),i=!0)},o:function(n){zn(c.$$.fragment,n),i=!1},d:function(n){n&&W(t),Vn(c)}}}function jo(n){var t,e,r=new fr({props:{name:"error"==n[27].type?"exclamation-circle":"info-circle"}});return{c:function(){t=Y("a"),Gn(r.$$.fragment),nn(t,"href","#action:toggleDetails")},m:function(n,o){K(n,t,o),Yn(r,t,null),e=!0},p:function(n,t){var e={};32&t[0]&&(e.name="error"==n[27].type?"exclamation-circle":"info-circle"),r.$set(e)},i:function(n){e||(Bn(r.$$.fragment,n),e=!0)},o:function(n){zn(r.$$.fragment,n),e=!1},d:function(n){n&&W(t),Vn(r)}}}function Po(n){var t,e,r,o,i=new fr({props:{name:"times-circle"}}),a=new fr({props:{name:"sync-alt"}});return{c:function(){t=Y("a"),Gn(i.$$.fragment),e=J(),r=Y("a"),Gn(a.$$.fragment),nn(t,"href","#action:remove"),nn(t,"class","pull-right has-tooltip"),nn(t,"data-tooltip",pe("Remove")),nn(r,"href","#action:resend"),nn(r,"class","pull-right has-tooltip "),nn(r,"data-tooltip",pe("Resend"))},m:function(n,c){K(n,t,c),Yn(i,t,null),K(n,e,c),K(n,r,c),Yn(a,r,null),o=!0},p:O,i:function(n){o||(Bn(i.$$.fragment,n),Bn(a.$$.fragment,n),o=!0)},o:function(n){zn(i.$$.fragment,n),zn(a.$$.fragment,n),o=!1},d:function(n){n&&W(t),Vn(i),n&&W(e),n&&W(r),Vn(a)}}}function To(n){return{c:O,m:O,p:O,d:O}}function Lo(n){var t,e,r=n[33].html+"";return{c:function(){nn(t=Y("div"),"class",e="embed "+n[33].className)},m:function(n,e){K(n,t,e),t.innerHTML=r},p:function(n,o){32&o[0]&&r!==(r=n[33].html+"")&&(t.innerHTML=r),32&o[0]&&e!==(e="embed "+n[33].className)&&nn(t,"class",e)},d:function(n){n&&W(t)}}}function Io(n){return{c:O,m:O,p:O,d:O}}function Uo(n){var t,e,r={ctx:n,current:null,token:null,pending:Io,then:Lo,catch:To,value:33};return Fn(e=n[30],r),{c:function(){t=Z(),r.block.c()},m:function(n,e){K(n,t,e),r.block.m(n,r.anchor=e),r.mount=function(){return t.parentNode},r.anchor=t},p:function(t,o){if(n=t,r.ctx=n,32&o[0]&&e!==(e=n[30])&&Fn(e,r));else{var i=n.slice();i[33]=r.resolved,r.block.p(i,o)}},d:function(n){n&&W(t),r.block.d(n),r.token=null,r=null}}}function Bo(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,$,y,b,w,_,x,k,E=n[27].ts.toLocaleString()+"",O=n[27].from+"",C=n[27].markdown+"",S=n[27].dayChanged&&Ao(n),N=n[29]&&n[29]==n[6].messages.length-n[6].unread&&Mo(),R=new fr({props:{name:"pick:"+n[27].fromId,color:n[27].color}}),D=[Po,jo],A=[];function M(n,t){return!1===n[27].waitingForResponse?0:!n[27].waitingForResponse&&n[27].canToggleDetails?1:-1}~(m=M(n))&&(v=A[m]=D[m](n));for(var j=n[27].embeds,P=[],T=0;T<j.length;T+=1)P[T]=Uo(go(n,j,T));return{c:function(){S&&S.c(),t=J(),N&&N.c(),e=J(),r=Y("div"),Gn(R.$$.fragment),o=J(),i=Y("div"),a=Y("div"),c=V(E),s=J(),f=Y("a"),l=V(O),p=J(),h=Y("div"),v&&v.c(),g=J(),y=J();for(var m=0;m<P.length;m+=1)P[m].c();b=J(),nn(i,"class","message__ts has-tooltip"),nn(i,"data-content",u=n[27].ts.format("%H:%M")),nn(f,"href",d="#action:join:"+n[27].from),nn(f,"class","message__from"),on(f,"color",n[27].color),nn(f,"tabindex","-1"),$=new sn(C,null),nn(h,"class","message__text"),nn(r,"class",w=n[27].className),nn(r,"data-index",n[29]),nn(r,"data-ts",_=n[27].ts.toISOString())},m:function(u,d,v){S&&S.m(u,d),K(u,t,d),N&&N.m(u,d),K(u,e,d),K(u,r,d),Yn(R,r,null),F(r,o),F(r,i),F(i,a),F(a,c),F(r,s),F(r,f),F(f,l),F(r,p),F(r,h),~m&&A[m].m(h,null),F(h,g),$.m(h),F(r,y);for(var w=0;w<P.length;w+=1)P[w].m(r,null);F(r,b),x=!0,v&&k(),k=Q(r,"click",n[11])},p:function(n,o){n[27].dayChanged?S?(S.p(n,o),Bn(S,1)):((S=Ao(n)).c(),Bn(S,1),S.m(t.parentNode,t)):S&&(In(),zn(S,1,1,(function(){S=null})),Un()),n[29]&&n[29]==n[6].messages.length-n[6].unread?N?(N.p(n,o),Bn(N,1)):((N=Mo()).c(),Bn(N,1),N.m(e.parentNode,e)):N&&(In(),zn(N,1,1,(function(){N=null})),Un());var a={};32&o[0]&&(a.name="pick:"+n[27].fromId),32&o[0]&&(a.color=n[27].color),R.$set(a),(!x||32&o[0])&&E!==(E=n[27].ts.toLocaleString()+"")&&en(c,E),(!x||32&o[0]&&u!==(u=n[27].ts.format("%H:%M")))&&nn(i,"data-content",u),(!x||32&o[0])&&O!==(O=n[27].from+"")&&en(l,O),(!x||32&o[0]&&d!==(d="#action:join:"+n[27].from))&&nn(f,"href",d),(!x||32&o[0])&&on(f,"color",n[27].color);var s=m;if((m=M(n))===s?~m&&A[m].p(n,o):(v&&(In(),zn(A[s],1,1,(function(){A[s]=null})),Un()),~m?((v=A[m])||(v=A[m]=D[m](n)).c(),Bn(v,1),v.m(h,g)):v=null),(!x||32&o[0])&&C!==(C=n[27].markdown+"")&&$.p(C),32&o[0]){var p;for(j=n[27].embeds,p=0;p<j.length;p+=1){var y=go(n,j,p);P[p]?P[p].p(y,o):(P[p]=Uo(y),P[p].c(),P[p].m(r,b))}for(;p<P.length;p+=1)P[p].d(1);P.length=j.length}(!x||32&o[0]&&w!==(w=n[27].className))&&nn(r,"class",w),(!x||32&o[0]&&_!==(_=n[27].ts.toISOString()))&&nn(r,"data-ts",_)},i:function(n){x||(Bn(S),Bn(N),Bn(R.$$.fragment,n),Bn(v),x=!0)},o:function(n){zn(S),zn(N),zn(R.$$.fragment,n),zn(v),x=!1},d:function(n){S&&S.d(n),n&&W(t),N&&N.d(n),n&&W(e),n&&W(r),Vn(R),~m&&A[m].d(),G(P,n),k()}}}function zo(n){var t,e=new yr({props:{type:"error",$$slots:{default:[Ko]},$$scope:{ctx:n}}});return{c:function(){Gn(e.$$.fragment)},m:function(n,r){Yn(e,n,r),t=!0},p:function(n,t){var r={};192&t[0]|8&t[1]&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Bn(e.$$.fragment,n),t=!0)},o:function(n){zn(e.$$.fragment,n),t=!1},d:function(n){Vn(e,n)}}}function Ho(n){var t,e=new yr({props:{type:"error",$$slots:{default:[Wo]},$$scope:{ctx:n}}});return{c:function(){Gn(e.$$.fragment)},m:function(n,r){Yn(e,n,r),t=!0},p:function(n,t){var r={};128&t[0]|8&t[1]&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Bn(e.$$.fragment,n),t=!0)},o:function(n){zn(e.$$.fragment,n),t=!1},d:function(n){Vn(e,n)}}}function qo(n){var t,e,r,o,i,a,c,u,s=pe('Do you want to chat with "%1"?',n[6].conversation_id)+"",f=new hr({props:{type:"button",icon:"thumbs-up",$$slots:{default:[Go]},$$scope:{ctx:n}}});f.$on("click",n[25]);var l=new Ur({props:{href:"/chat",class:"btn",$$slots:{default:[Yo]},$$scope:{ctx:n}}});return{c:function(){(t=Y("h2")).textContent="".concat(pe("You are not part of this conversation.")),e=J(),r=Y("p"),o=V(s),i=J(),a=Y("p"),Gn(f.$$.fragment),c=J(),Gn(l.$$.fragment)},m:function(n,s){K(n,t,s),K(n,e,s),K(n,r,s),F(r,o),K(n,i,s),K(n,a,s),Yn(f,a,null),F(a,c),Yn(l,a,null),u=!0},p:function(n,t){(!u||64&t[0])&&s!==(s=pe('Do you want to chat with "%1"?',n[6].conversation_id)+"")&&en(o,s);var e={};8&t[1]&&(e.$$scope={dirty:t,ctx:n}),f.$set(e);var r={};8&t[1]&&(r.$$scope={dirty:t,ctx:n}),l.$set(r)},i:function(n){u||(Bn(f.$$.fragment,n),Bn(l.$$.fragment,n),u=!0)},o:function(n){zn(f.$$.fragment,n),zn(l.$$.fragment,n),u=!1},d:function(n){n&&W(t),n&&W(e),n&&W(r),n&&W(i),n&&W(a),Vn(f),Vn(l)}}}function Fo(n){var t,e,r,o,i,a,c,u,s=pe('Do you want to create the connection "%1"?',n[7].connection_id)+"",f=new Ur({props:{href:"/settings/connection?server="+encodeURIComponent(n[6].connection_id)+"&conversation="+encodeURIComponent(n[6].conversation_id),class:"btn",$$slots:{default:[Vo]},$$scope:{ctx:n}}}),l=new Ur({props:{href:"/chat",class:"btn",$$slots:{default:[Jo]},$$scope:{ctx:n}}});return{c:function(){(t=Y("h2")).textContent="".concat(pe("Connection does not exist.")),e=J(),r=Y("p"),o=V(s),i=J(),a=Y("p"),Gn(f.$$.fragment),c=J(),Gn(l.$$.fragment)},m:function(n,s){K(n,t,s),K(n,e,s),K(n,r,s),F(r,o),K(n,i,s),K(n,a,s),Yn(f,a,null),F(a,c),Yn(l,a,null),u=!0},p:function(n,t){(!u||128&t[0])&&s!==(s=pe('Do you want to create the connection "%1"?',n[7].connection_id)+"")&&en(o,s);var e={};64&t[0]&&(e.href="/settings/connection?server="+encodeURIComponent(n[6].connection_id)+"&conversation="+encodeURIComponent(n[6].conversation_id)),8&t[1]&&(e.$$scope={dirty:t,ctx:n}),f.$set(e);var r={};8&t[1]&&(r.$$scope={dirty:t,ctx:n}),l.$set(r)},i:function(n){u||(Bn(f.$$.fragment,n),Bn(l.$$.fragment,n),u=!0)},o:function(n){zn(f.$$.fragment,n),zn(l.$$.fragment,n),u=!1},d:function(n){n&&W(t),n&&W(e),n&&W(r),n&&W(i),n&&W(a),Vn(f),Vn(l)}}}function Ko(n){var t,e=(me(n[7],n[6]).replace(/\.$/,"")||pe(n[6].frozen))+"";return{c:function(){t=V(e)},m:function(n,e){K(n,t,e)},p:function(n,r){192&r[0]&&e!==(e=(me(n[7],n[6]).replace(/\.$/,"")||pe(n[6].frozen))+"")&&en(t,e)},d:function(n){n&&W(t)}}}function Wo(n){var t,e=he("Disconnected. Your connection %1 can be edited in [settings](%2).",n[7].name,"#activeMenu:settings")+"";return{c:function(){t=new sn(e,null)},m:function(n,e){t.m(n,e)},p:function(n,r){128&r[0]&&e!==(e=he("Disconnected. Your connection %1 can be edited in [settings](%2).",n[7].name,"#activeMenu:settings")+"")&&t.p(e)},d:function(n){n&&t.d()}}}function Go(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Yes"))},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Yo(n){var t,e,r=new fr({props:{name:"thumbs-down"}});return{c:function(){Gn(r.$$.fragment),(t=Y("span")).textContent="".concat(pe("No"))},m:function(n,o){Yn(r,n,o),K(n,t,o),e=!0},p:O,i:function(n){e||(Bn(r.$$.fragment,n),e=!0)},o:function(n){zn(r.$$.fragment,n),e=!1},d:function(n){Vn(r,n),n&&W(t)}}}function Vo(n){var t,e,r,o=pe("Yes")+"",i=new fr({props:{name:"thumbs-up"}});return{c:function(){Gn(i.$$.fragment),t=J(),e=V(o)},m:function(n,o){Yn(i,n,o),K(n,t,o),K(n,e,o),r=!0},p:O,i:function(n){r||(Bn(i.$$.fragment,n),r=!0)},o:function(n){zn(i.$$.fragment,n),r=!1},d:function(n){Vn(i,n),n&&W(t),n&&W(e)}}}function Jo(n){var t,e,r,o=pe("No")+"",i=new fr({props:{name:"thumbs-down"}});return{c:function(){Gn(i.$$.fragment),t=J(),e=V(o)},m:function(n,o){Yn(i,n,o),K(n,t,o),K(n,e,o),r=!0},p:O,i:function(n){r||(Bn(i.$$.fragment,n),r=!0)},o:function(n){zn(i.$$.fragment,n),r=!1},d:function(n){Vn(i,n),n&&W(t),n&&W(e)}}}function Zo(n){var t,e,r,o,i,a=new fr({props:{name:"spinner",animation:"spin"}});return{c:function(){t=Y("div"),e=Y("span"),Gn(a.$$.fragment),r=J(),(o=Y("i")).textContent="".concat(pe("Loading...")),nn(t,"class","message__status-line for-loading has-pos-bottom")},m:function(n,c){K(n,t,c),F(t,e),Yn(a,e,null),F(e,r),F(e,o),i=!0},p:O,i:function(n){i||(Bn(a.$$.fragment,n),i=!0)},o:function(n){zn(a.$$.fragment,n),i=!1},d:function(n){n&&W(t),Vn(a)}}}function Qo(n){var t,e,r,o,i,a,c=pe("Jump to %1",n[2].format("%b %e %H:%M"))+"",u=new fr({props:{name:"external-link-alt"}});return{c:function(){t=Y("div"),e=Y("a"),Gn(u.$$.fragment),r=J(),o=V(c),nn(e,"href",i=n[1].path),nn(t,"class","message__status-line for-jump-to-now")},m:function(n,i){K(n,t,i),F(t,e),Yn(u,e,null),F(e,r),F(e,o),a=!0},p:function(n,t){(!a||4&t[0])&&c!==(c=pe("Jump to %1",n[2].format("%b %e %H:%M"))+"")&&en(o,c),(!a||2&t[0]&&i!==(i=n[1].path))&&nn(e,"href",i)},i:function(n){a||(Bn(u.$$.fragment,n),a=!0)},o:function(n){zn(u.$$.fragment,n),a=!1},d:function(n){n&&W(t),Vn(u)}}}function Xo(n){for(var t,e,r,o,i,a,c,u,s,f,l,d,p,h,m=n[6].is("loading"),v=n[6].historyStartAt&&!n[6].is("not_found"),g=n[6].messages.length<10&&!n[6].is("not_found"),$=n[6].is("loading"),y=m&&wo(),b=v&&_o(n),w=g&&xo(n),_=n[5],x=[],k=0;k<_.length;k+=1)x[k]=Bo($o(n,_,k));var E=function(n){return zn(x[n],1,1,(function(){x[n]=null}))},O=[Fo,qo,Ho,zo],C=[];function S(n,t){return 192&t[0]&&(i=!(!n[7].is("not_found")||n[6].conversation_id)),i?0:(64&t[0]&&(a=!!n[6].is("not_found")),a?1:(128&t[0]&&(c=!(n[7].is("unreachable")||!n[7].frozen)),c?2:(64&t[0]&&(u=!(!n[6].frozen||n[6].is("locked"))),u?3:-1)))}~(s=S(n,[-1]))&&(f=C[s]=O[s](n));var N=$&&Zo(),R=!n[6].historyStopAt&&n[6].messages.length&&Qo(n);return{c:function(){y&&y.c(),t=J(),b&&b.c(),e=J(),w&&w.c(),r=J();for(var n=0;n<x.length;n+=1)x[n].c();o=J(),f&&f.c(),l=J(),N&&N.c(),d=J(),R&&R.c(),p=Z()},m:function(n,i){y&&y.m(n,i),K(n,t,i),b&&b.m(n,i),K(n,e,i),w&&w.m(n,i),K(n,r,i);for(var a=0;a<x.length;a+=1)x[a].m(n,i);K(n,o,i),~s&&C[s].m(n,i),K(n,l,i),N&&N.m(n,i),K(n,d,i),R&&R.m(n,i),K(n,p,i),h=!0},p:function(n,i){if(64&i[0]&&(m=n[6].is("loading")),m?y?(y.p(n,i),Bn(y,1)):((y=wo()).c(),Bn(y,1),y.m(t.parentNode,t)):y&&(In(),zn(y,1,1,(function(){y=null})),Un()),64&i[0]&&(v=n[6].historyStartAt&&!n[6].is("not_found")),v?b?(b.p(n,i),Bn(b,1)):((b=_o(n)).c(),Bn(b,1),b.m(e.parentNode,e)):b&&(In(),zn(b,1,1,(function(){b=null})),Un()),64&i[0]&&(g=n[6].messages.length<10&&!n[6].is("not_found")),g?w?(w.p(n,i),Bn(w,1)):((w=xo(n)).c(),Bn(w,1),w.m(r.parentNode,r)):w&&(In(),zn(w,1,1,(function(){w=null})),Un()),2144&i[0]){var a;for(_=n[5],a=0;a<_.length;a+=1){var c=$o(n,_,a);x[a]?(x[a].p(c,i),Bn(x[a],1)):(x[a]=Bo(c),x[a].c(),Bn(x[a],1),x[a].m(o.parentNode,o))}for(In(),a=_.length;a<x.length;a+=1)E(a);Un()}var u=s;(s=S(n,i))===u?~s&&C[s].p(n,i):(f&&(In(),zn(C[u],1,1,(function(){C[u]=null})),Un()),~s?((f=C[s])||(f=C[s]=O[s](n)).c(),Bn(f,1),f.m(l.parentNode,l)):f=null),64&i[0]&&($=n[6].is("loading")),$?N?(N.p(n,i),Bn(N,1)):((N=Zo()).c(),Bn(N,1),N.m(d.parentNode,d)):N&&(In(),zn(N,1,1,(function(){N=null})),Un()),!n[6].historyStopAt&&n[6].messages.length?R?(R.p(n,i),Bn(R,1)):((R=Qo(n)).c(),Bn(R,1),R.m(p.parentNode,p)):R&&(In(),zn(R,1,1,(function(){R=null})),Un())},i:function(n){if(!h){Bn(y),Bn(b),Bn(w);for(var t=0;t<_.length;t+=1)Bn(x[t]);Bn(f),Bn(N),Bn(R),h=!0}},o:function(n){zn(y),zn(b),zn(w),x=x.filter(Boolean);for(var t=0;t<x.length;t+=1)zn(x[t]);zn(f),zn(N),zn(R),h=!1},d:function(n){y&&y.d(n),n&&W(t),b&&b.d(n),n&&W(e),w&&w.d(n),n&&W(r),G(x,n),n&&W(o),~s&&C[s].d(n),n&&W(l),N&&N.d(n),n&&W(d),R&&R.d(n),n&&W(p)}}}function ni(n){var t,e,r,o,i,a=new xr({props:{$$slots:{default:[bo]},$$scope:{ctx:n}}}),c=new Qr({props:{class:"main is-above-chat-input",$$slots:{default:[Xo]},$$scope:{ctx:n}}});function u(t){n[26].call(null,t)}c.$on("rendered",n[12]),c.$on("scrolled",n[13]);var s={conversation:n[1]};void 0!==n[3]&&(s.uploader=n[3]);var f=new Pr({props:s});xn.push((function(){return Wn(f,"uploader",u)}));var l=new Gr({props:{conversation:n[1]}});return{c:function(){Gn(a.$$.fragment),t=J(),Gn(c.$$.fragment),e=J(),Gn(f.$$.fragment),o=J(),Gn(l.$$.fragment)},m:function(n,r){Yn(a,n,r),K(n,t,r),Yn(c,n,r),K(n,e,r),Yn(f,n,r),K(n,o,r),Yn(l,n,r),i=!0},p:function(n,t){var e={};275&t[0]|8&t[1]&&(e.$$scope={dirty:t,ctx:n}),a.$set(e);var o={};230&t[0]|8&t[1]&&(o.$$scope={dirty:t,ctx:n}),c.$set(o);var i={};2&t[0]&&(i.conversation=n[1]),!r&&8&t[0]&&(r=!0,i.uploader=n[3],Nn((function(){return r=!1}))),f.$set(i);var u={};2&t[0]&&(u.conversation=n[1]),l.$set(u)},i:function(n){i||(Bn(a.$$.fragment,n),Bn(c.$$.fragment,n),Bn(f.$$.fragment,n),Bn(l.$$.fragment,n),i=!0)},o:function(n){zn(a.$$.fragment,n),zn(c.$$.fragment,n),zn(f.$$.fragment,n),zn(l.$$.fragment,n),i=!1},d:function(n){Vn(a,n),n&&W(t),Vn(c,n),n&&W(e),Vn(f,n),n&&W(o),Vn(l,n)}}}function ti(n,t){n.preventDefault(),nr.showFullscreen(t)}function ei(n,t,e){var r,o,i,a,c,u,s=O,f=function(){return s(),s=M($,(function(n){return e(6,i=n)})),$},l=O,d=function(){return l(),l=M(g,(function(n){return e(7,c=n)})),g};j(n,Zt,(function(n){return e(4,r=n)})),j(n,nr,(function(n){return e(18,a=n)})),n.$$.on_destroy.push((function(){return s()})),n.$$.on_destroy.push((function(){return l()}));var h=bn("socket");j(n,h,(function(n){return e(19,u=n)}));var m=bn("user");j(n,m,(function(n){return e(17,o=n)}));var v=new Yr,g=m.notifications;d();var $=m.notifications;f();var y,b=new At,w="",_={};function x(n,t){if("activeMenu"==t[0])return!0;n.preventDefault();var e=n.target.closest(".message"),r=e&&C[e.dataset.index];return"join"==t[1]?$.send("/join "+r.from):"remove"==t[1]?h.deleteWaitingMessage(r.id):"resend"==t[1]?h.send(h.getWaitingMessages([r.id])[0]):"toggleDetails"==t[1]?vt(e,".embed.for-jsonhtmlify",(function(n){return n.classList.toggle("hidden")})):void 0}function k(n){var t=["connection_id","conversation_id"].map((function(t){return n.param(t)})),e=p(t,2),r=e[0],o=e[1];$.connection_id==r&&$.conversation_id==o||m.setActiveConversation({connection_id:r,conversation_id:o})}function E(n){var t;if(n.activeConversation!=$)return _.conversation&&_.conversation(),_.markAsRead&&_.markAsRead(),f(e(1,$=n.activeConversation)),d(e(0,g=n.findConversation({connection_id:$.connection_id})||$)),e(2,b=new At),_.conversation=$.subscribe((function(n){f(e(1,$=n))})),_.markAsRead=$.markAsRead.bind($),Zt.update({title:$.title}),t=Zt.hash,(w=!!String(t||"").match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)&&Zt.hash||"")?$.load({around:w}):$.historyStopAt?void 0:$.load({around:b.toISOString()})}gn((function(){v.attach(document.querySelector(".main"),y)})),$n((function(){Object.keys(_).forEach((function(n){return _[n]()})),v.detach()}));var C,S,N;return n.$$.update=function(){16&n.$$.dirty[0]&&k(r),131072&n.$$.dirty[0]&&E(o),786624&n.$$.dirty[0]&&e(5,C=so({conversation:i,expandUrlToMedia:a.expandUrlToMedia,from:c.nick,waiting:Array.from(u.waiting.values())})),64&n.$$.dirty[0]&&(S=!!i.frozen),65&n.$$.dirty[0]&&e(8,N=i.videoInfo({nick:g.nick,videoService:m.video_service})),82&n.$$.dirty[0]&&(r.hash||i.historyStopAt||$.load({}))},[g,$,b,y,r,C,i,c,N,h,m,function(n){var t=n.target.closest("a");t&&!t.target&&n.target.closest(".embed")&&(t.target="_blank");var e=n.target.closest(".message"),r=t&&e&&document.querySelector('[data-handle-link="'+t.href+'"]');if(r)return[n.preventDefault(),r.click()];var o=n.target.closest(".le-meta");if(o)return t||o.parentNode.classList.toggle("is-expanded");var i=t&&t.href.match(/#(activeMenu|action:[\w:]+)/);return i?x(n,i[1].split(":",3)):wt(n.target,"img")?ti(n,n.target):t&&t.classList.contains("le-thumbnail")?ti(n,t.querySelector("img")):void 0},function(n){var t=n.detail,e=t.infinityEl;(0,t.scrollTo)(Zt.hash?'.message[data-ts="'+Zt.hash+'"]':-1),function(n,t){var e=t&&Zt.hash&&n.querySelector('.message[data-ts="'+Zt.hash+'"]');vt(n,".has-focus",(function(n){return n.classList.remove("has-focus")})),e&&e.classList.add("has-focus")}(e,w==Zt.hash)},function(n){if($.messages.length){var t=n.detail,e=t.pos,r=t.visibleEls,o=r[0],i=r.slice(-1)[0];if("top"==e){var a=$.messages[0].ts.toISOString();Zt.go($.path+"#"+a,{replace:!0}),$.historyStartAt||$.load({before:a})}else if("bottom"==e){var c=$.messages.slice(-1)[0].ts.toISOString();Zt.go($.path+($.historyStopAt?"":"#"+i.dataset.ts),{replace:!0}),$.historyStopAt||$.load({after:c})}else o&&o.dataset.ts&&Zt.go($.path+"#"+o.dataset.ts,{replace:!0})}},function(n){if(n.preventDefault(),$.window)return $.window.close();$.openWindow(N.convosUrl,N.roomName),$.messages.slice(-30).find((function(n){return-1!=n.message.indexOf(N.realUrl)}))||$.send({method:"send",message:N.realUrl})},w,_,o,a,u,S,v,x,k,E,function(){return $.send("/join "+i.conversation_id)},function(n){e(3,y=n)}]}var ri=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(vo()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,ei,ni,A,{},[-1,-1]),r}return u}(Qn);function oi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var ii=function(n){return{}},ai=function(n){return{}};function ci(n){var t,e,r,o,i,a,c,u=new fr({props:{family:"regular",name:n[7]}});u.$on("click",n[14]);var s,f=n[9].label,l=P(f,n,n[8],ai),d=l||{c:function(){s=V("Label")},m:function(n,t){K(n,s,t)},d:function(n){n&&W(s)}};return{c:function(){t=Y("div"),e=Y("input"),r=J(),Gn(u.$$.fragment),o=J(),i=Y("label"),d&&d.c(),nn(e,"type","checkbox"),nn(e,"id",n[4]),nn(e,"name",n[3]),e.__value=n[1],e.value=e.__value,e.disabled=n[2],nn(i,"for",n[4]),nn(t,"class","checkbox"),an(t,"has-focus",n[6]),an(t,"is-disabled",n[2])},m:function(s,f,l){K(s,t,f),F(t,e),e.checked=n[0],n[11](e),F(t,r),Yn(u,t,null),F(t,o),F(t,i),d&&d.m(i,null),a=!0,l&&R(c),c=[Q(e,"change",n[10]),Q(e,"blur",n[12]),Q(e,"focus",n[13])]},p:function(n,r){var o=p(r,1)[0];(!a||16&o)&&nn(e,"id",n[4]),(!a||8&o)&&nn(e,"name",n[3]),(!a||2&o)&&(e.__value=n[1]),e.value=e.__value,(!a||4&o)&&(e.disabled=n[2]),1&o&&(e.checked=n[0]);var c={};128&o&&(c.name=n[7]),u.$set(c),l&&l.p&&256&o&&l.p(T(f,n,n[8],ai),L(f,n[8],o,ii)),(!a||16&o)&&nn(i,"for",n[4]),64&o&&an(t,"has-focus",n[6]),4&o&&an(t,"is-disabled",n[2])},i:function(n){a||(Bn(u.$$.fragment,n),Bn(d,n),a=!0)},o:function(n){zn(u.$$.fragment,n),zn(d,n),a=!1},d:function(e){e&&W(t),n[11](null),Vn(u),d&&d.d(e),R(c)}}}function ui(n,t,e){var r,o=t.checked,i=void 0!==o&&o,a=t.disabled,c=void 0!==a&&a,u=t.name,s=void 0===u?"":u,f=t.id,l=void 0===f?s?"form_"+s:_t():f,d=t.value,p=void 0===d?1:d,h=!1,m=t.$$slots,v=void 0===m?{}:m,g=t.$$scope;var $;return n.$set=function(n){"checked"in n&&e(0,i=n.checked),"disabled"in n&&e(2,c=n.disabled),"name"in n&&e(3,s=n.name),"id"in n&&e(4,l=n.id),"value"in n&&e(1,p=n.value),"$$scope"in n&&e(8,g=n.$$scope)},n.$$.update=function(){32&n.$$.dirty&&r&&!r.syncValue&&(e(5,r.syncValue=function(){var n;e(0,(n=[this.checked,this.value],i=n[0],p=n[1],n),i,(e(1,p),e(5,r)))},r),r.syncValue()),1&n.$$.dirty&&e(7,$=i?"check-square":"square")},[i,p,c,s,l,r,h,$,g,v,function(){i=this.checked,e(0,i),e(5,r)},function(n){xn[n?"unshift":"push"]((function(){e(5,r=n)}))},function(){e(6,h=!1)},function(){e(6,h=!0)},function(){c||e(0,i=!i)}]}var si=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(oi()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,ui,ci,A,{checked:0,disabled:2,name:3,id:4,value:1}),r}return u}(Qn);function fi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function li(n){var t,e,r,o=pe("Loading...")+"";return{c:function(){t=Y("div"),e=Y("div"),r=V(o),nn(e,"class","progress__bar"),on(e,"width",n[2]+"%"),nn(t,"class","progress")},m:function(n,o){K(n,t,o),F(t,e),F(e,r)},p:function(n,t){4&t&&on(e,"width",n[2]+"%")},d:function(n){n&&W(t)}}}function di(n){var t,e,r=pe(n[3].error())+"";return{c:function(){t=Y("div"),e=V(r),nn(t,"class","error")},m:function(n,r){K(n,t,r),F(t,e)},p:function(n,t){8&t&&r!==(r=pe(n[3].error())+"")&&en(e,r)},d:function(n){n&&W(t)}}}function pi(n){var t,e,r;function o(n,r){return(null==t||8&r)&&(t=!!n[3].is("error")),t?di:((null==e||9&r)&&(e=!(!1===n[0]||!n[3].is("loading"))),e?li:void 0)}var i=o(n,-1),a=i&&i(n);return{c:function(){a&&a.c(),r=Z()},m:function(n,t){a&&a.m(n,t),K(n,r,t)},p:function(n,t){var e=p(t,1)[0];i===(i=o(n,e))&&a?a.p(n,e):(a&&a.d(1),(a=i&&i(n))&&(a.c(),a.m(r.parentNode,r)))},i:O,o:O,d:function(n){a&&a.d(n),n&&W(r)}}}function hi(n,t,e){var r,o=O,i=function(){return o(),o=M(s,(function(n){return e(3,r=n)})),s};n.$$.on_destroy.push((function(){return o()}));var a=t.progress,c=void 0!==a&&a,u=t.op,s=void 0===u?new jt({}):u;i();var f,l=0;return $n((function(){return f&&clearTimeout(f)})),n.$set=function(n){"progress"in n&&e(0,c=n.progress),"op"in n&&i(e(1,s=n.op))},n.$$.update=function(){9&n.$$.dirty&&function(n,t){if(f&&clearTimeout(f),n.is("loading")){if("number"==typeof t)return e(2,l=t);e(2,l=0),f=setInterval((function(){return e(2,++l)}),500)}}(r,c)},[c,s,l,r]}var mi=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(fi()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,hi,pi,A,{progress:0,op:1}),r}return u}(Qn);function vi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var gi=function(n){return{}},$i=function(n){return{}};function yi(n){var t,e,r,o,i,a,c=n[8].label,u=P(c,n,n[7],$i),s=u||function(n){var t;return{c:function(){t=V("Label")},m:function(n,e){K(n,t,e)},d:function(n){n&&W(t)}}}();return{c:function(){t=Y("div"),e=Y("label"),s&&s.c(),r=J(),o=Y("textarea"),nn(e,"for",n[3]),nn(o,"name",n[2]),nn(o,"placeholder",n[4]),nn(o,"id",n[3]),o.readOnly=n[5],nn(t,"class","text-area"),t.hidden=n[1]},m:function(c,u,f){K(c,t,u),F(t,e),s&&s.m(e,null),F(t,r),F(t,o),n[9](o),rn(o,n[0]),i=!0,f&&a(),a=Q(o,"input",n[10])},p:function(n,r){var a=p(r,1)[0];u&&u.p&&128&a&&u.p(T(c,n,n[7],$i),L(c,n[7],a,gi)),(!i||8&a)&&nn(e,"for",n[3]),(!i||4&a)&&nn(o,"name",n[2]),(!i||16&a)&&nn(o,"placeholder",n[4]),(!i||8&a)&&nn(o,"id",n[3]),(!i||32&a)&&(o.readOnly=n[5]),1&a&&rn(o,n[0]),(!i||2&a)&&(t.hidden=n[1])},i:function(n){i||(Bn(s,n),i=!0)},o:function(n){zn(s,n),i=!1},d:function(e){e&&W(t),s&&s.d(e),n[9](null),a()}}}function bi(n,t,e){var r,o=t.hidden,i=void 0!==o&&o,a=t.name,c=void 0===a?"":a,u=t.id,s=void 0===u?c?"form_"+c:_t():u,f=t.placeholder,l=void 0===f?"":f,d=t.readonly,p=void 0!==d&&d,h=t.value,m=void 0===h?"":h,v=t.$$slots,g=void 0===v?{}:v,$=t.$$scope;return n.$set=function(n){"hidden"in n&&e(1,i=n.hidden),"name"in n&&e(2,c=n.name),"id"in n&&e(3,s=n.id),"placeholder"in n&&e(4,l=n.placeholder),"readonly"in n&&e(5,p=n.readonly),"value"in n&&e(0,m=n.value),"$$scope"in n&&e(7,$=n.$$scope)},n.$$.update=function(){64&n.$$.dirty&&r&&!r.syncValue&&(e(6,r.syncValue=function(){e(0,m=this.value)},r),r.syncValue())},[m,i,c,s,l,p,r,$,g,function(n){xn[n?"unshift":"push"]((function(){e(6,r=n)}))},function(){m=this.value,e(0,m),e(6,r)}]}var wi=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(vi()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,bi,yi,A,{hidden:1,name:2,id:3,placeholder:4,readonly:5,value:0}),r}return u}(Qn);function _i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var xi=function(n){return{}},ki=function(n){return{}},Ei=function(n){return{}},Oi=function(n){return{}};function Ci(n){var t,e,r,o,i,a,c,u,s=n[11].label,f=P(s,n,n[10],Oi),l=f||{c:function(){u=V("Label")},m:function(n,t){K(n,u,t)},d:function(n){n&&W(u)}},d=n[11].help,h=P(d,n,n[10],ki);return{c:function(){t=Y("div"),e=Y("label"),l&&l.c(),r=J(),o=Y("input"),i=J(),h&&h.c(),nn(e,"for",n[4]),nn(o,"type",n[7]),nn(o,"name",n[3]),nn(o,"id",n[4]),nn(o,"autocomplete",n[1]),nn(o,"placeholder",n[5]),o.readOnly=n[6],o.value=n[0],nn(t,"class","text-field"),t.hidden=n[2],an(t,"has-password","password"==n[7])},m:function(u,s,f){K(u,t,s),F(t,e),l&&l.m(e,null),F(t,r),F(t,o),n[13](o),F(t,i),h&&h.m(t,null),a=!0,f&&R(c),c=[Q(o,"input",n[9]),Q(o,"keyup",n[12])]},p:function(n,r){var i=p(r,1)[0];f&&f.p&&1024&i&&f.p(T(s,n,n[10],Oi),L(s,n[10],i,Ei)),(!a||16&i)&&nn(e,"for",n[4]),(!a||128&i)&&nn(o,"type",n[7]),(!a||8&i)&&nn(o,"name",n[3]),(!a||16&i)&&nn(o,"id",n[4]),(!a||2&i)&&nn(o,"autocomplete",n[1]),(!a||32&i)&&nn(o,"placeholder",n[5]),(!a||64&i)&&(o.readOnly=n[6]),(!a||1&i&&o.value!==n[0])&&(o.value=n[0]),h&&h.p&&1024&i&&h.p(T(d,n,n[10],ki),L(d,n[10],i,xi)),(!a||4&i)&&(t.hidden=n[2]),128&i&&an(t,"has-password","password"==n[7])},i:function(n){a||(Bn(l,n),Bn(h,n),a=!0)},o:function(n){zn(l,n),zn(h,n),a=!1},d:function(e){e&&W(t),l&&l.d(e),n[13](null),h&&h.d(e),R(c)}}}function Si(n,t,e){var r,o=t.autocomplete,i=void 0===o?null:o,a=t.hidden,c=void 0!==a&&a,u=t.name,s=void 0===u?"":u,f=t.id,l=void 0===f?s?"form_"+s:_t():f,d=t.placeholder,p=void 0===d?"":d,h=t.readonly,m=void 0!==h&&h,v=t.type,g=void 0===v?"text":v,$=t.value,y=void 0===$?"":$,b=t.$$slots,w=void 0===b?{}:b,_=t.$$scope;return n.$set=function(n){"autocomplete"in n&&e(1,i=n.autocomplete),"hidden"in n&&e(2,c=n.hidden),"name"in n&&e(3,s=n.name),"id"in n&&e(4,l=n.id),"placeholder"in n&&e(5,p=n.placeholder),"readonly"in n&&e(6,m=n.readonly),"type"in n&&e(7,g=n.type),"value"in n&&e(0,y=n.value),"$$scope"in n&&e(10,_=n.$$scope)},n.$$.update=function(){256&n.$$.dirty&&r&&!r.syncValue&&(e(8,r.syncValue=function(){e(0,y=this.value)},r),r.syncValue())},[y,i,c,s,l,p,m,g,r,function(n){e(0,y=g.match(/^(number|range)$/)?parseInt(n.target.value,10):n.target.value)},_,w,function(t){wn(n,t)},function(n){xn[n?"unshift":"push"]((function(){e(8,r=n)}))}]}var Ni=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(_i()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,Si,Ci,A,{autocomplete:1,hidden:2,name:3,id:4,placeholder:5,readonly:6,type:7,value:0}),r}return u}(Qn);function Ri(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Di(n){var t,e;return{c:function(){nn(t=Y("input"),"type","hidden"),nn(t,"name","connection_id"),t.value=e=n[0].connection_id},m:function(n,e){K(n,t,e)},p:function(n,r){1&r&&e!==(e=n[0].connection_id)&&(t.value=e)},d:function(n){n&&W(t)}}}function Ai(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Host and port")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Mi(n){var t,e=he(n[6].forced_connection?"You cannot create custom connections.":"Example: %1","chat.freenode.net:6697")+"";return{c:function(){nn(t=Y("p"),"class","help"),nn(t,"slot","help")},m:function(n,r){K(n,t,r),t.innerHTML=e},p:O,d:function(n){n&&W(t)}}}function ji(n){var t;return{c:function(){t=J()},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Pi(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Nickname")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Ti(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Your name")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Li(n){var t;return{c:function(){(t=Y("p")).textContent="Visible in WHOIS response",nn(t,"class","help"),nn(t,"slot","help")},m:function(n,e){K(n,t,e)},d:function(n){n&&W(t)}}}function Ii(n){var t;return{c:function(){t=J()},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Ui(n){var t,e=new Ni({props:{name:"conversation_id",placeholder:pe("Ex: #convos"),$$slots:{label:[zi]},$$scope:{ctx:n}}});return{c:function(){Gn(e.$$.fragment)},m:function(n,r){Yn(e,n,r),t=!0},p:function(n,t){var r={};2097152&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Bn(e.$$.fragment,n),t=!0)},o:function(n){zn(e.$$.fragment,n),t=!1},d:function(n){Vn(e,n)}}}function Bi(n){var t,e;function r(t){n[16].call(null,t)}var o={$$slots:{label:[Hi]},$$scope:{ctx:n}};void 0!==n[5]&&(o.checked=n[5]);var i=new si({props:o});return xn.push((function(){return Wn(i,"checked",r)})),{c:function(){Gn(i.$$.fragment)},m:function(n,t){Yn(i,n,t),e=!0},p:function(n,e){var r={};2097152&e&&(r.$$scope={dirty:e,ctx:n}),!t&&32&e&&(t=!0,r.checked=n[5],Nn((function(){return t=!1}))),i.$set(r)},i:function(n){e||(Bn(i.$$.fragment,n),e=!0)},o:function(n){zn(i.$$.fragment,n),e=!1},d:function(n){Vn(i,n)}}}function zi(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Conversation name")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Hi(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Want to be connected")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function qi(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Secure connection (TLS)")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Fi(n){var t,e;function r(t){n[18].call(null,t)}var o={name:"tls_verify",$$slots:{label:[Ki]},$$scope:{ctx:n}};void 0!==n[4]&&(o.checked=n[4]);var i=new si({props:o});return xn.push((function(){return Wn(i,"checked",r)})),{c:function(){Gn(i.$$.fragment)},m:function(n,t){Yn(i,n,t),e=!0},p:function(n,e){var r={};2097152&e&&(r.$$scope={dirty:e,ctx:n}),!t&&16&e&&(t=!0,r.checked=n[4],Nn((function(){return t=!1}))),i.$set(r)},i:function(n){e||(Bn(i.$$.fragment,n),e=!0)},o:function(n){zn(i.$$.fragment,n),e=!1},d:function(n){Vn(i,n)}}}function Ki(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Verify certificate (TLS)")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Wi(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Show advanced settings")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Gi(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Username")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Yi(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Password")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Vi(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("On-connect commands")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Ji(n){var t,e=new hr({props:{icon:"save",op:n[7],$$slots:{default:[Qi]},$$scope:{ctx:n}}});return{c:function(){Gn(e.$$.fragment)},m:function(n,r){Yn(e,n,r),t=!0},p:function(n,t){var r={};2097152&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Bn(e.$$.fragment,n),t=!0)},o:function(n){zn(e.$$.fragment,n),t=!1},d:function(n){Vn(e,n)}}}function Zi(n){var t,e,r=new hr({props:{icon:"save",op:n[9],$$slots:{default:[Xi]},$$scope:{ctx:n}}}),o=new hr({props:{icon:"trash",type:"button",op:n[8],$$slots:{default:[na]},$$scope:{ctx:n}}});return o.$on("click",n[10]),{c:function(){Gn(r.$$.fragment),t=J(),Gn(o.$$.fragment)},m:function(n,i){Yn(r,n,i),K(n,t,i),Yn(o,n,i),e=!0},p:function(n,t){var e={};2097152&t&&(e.$$scope={dirty:t,ctx:n}),r.$set(e);var i={};2097152&t&&(i.$$scope={dirty:t,ctx:n}),o.$set(i)},i:function(n){e||(Bn(r.$$.fragment,n),Bn(o.$$.fragment,n),e=!0)},o:function(n){zn(r.$$.fragment,n),zn(o.$$.fragment,n),e=!1},d:function(n){Vn(r,n),n&&W(t),Vn(o,n)}}}function Qi(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Create"))},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Xi(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Update"))},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function na(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Delete"))},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function ta(n){var t,e,r,o,i,a,c,u,s,f,l,d,h,m,v,g,$,y,b,w,_,x,k,E,O,C,S,N,R=n[0].connection_id&&Di(n),D=new Ni({props:{name:"server",placeholder:pe("Ex: chat.freenode.net:6697"),readonly:n[6].forced_connection,$$slots:{default:[ji],help:[Mi],label:[Ai]},$$scope:{ctx:n}}}),A=new Ni({props:{name:"nick",placeholder:pe("Ex: superman"),$$slots:{label:[Pi]},$$scope:{ctx:n}}}),M=new Ni({props:{name:"realname",placeholder:pe("Ex: Clark Kent"),$$slots:{default:[Ii],help:[Li],label:[Ti]},$$scope:{ctx:n}}}),j=[Bi,Ui],P=[];function T(n,t){return n[0].url?0:1}function L(t){n[17].call(null,t)}f=T(n),l=P[f]=j[f](n);var I={name:"tls",$$slots:{label:[qi]},$$scope:{ctx:n}};void 0!==n[3]&&(I.checked=n[3]);var U=new si({props:I});xn.push((function(){return Wn(U,"checked",L)}));var B=n[3]&&Fi(n);function z(t){n[19].call(null,t)}var H={$$slots:{label:[Wi]},$$scope:{ctx:n}};void 0!==n[2]&&(H.checked=n[2]);var q=new si({props:H});xn.push((function(){return Wn(q,"checked",z)}));var G=new Ni({props:{name:"username",hidden:!n[2],$$slots:{label:[Gi]},$$scope:{ctx:n}}}),V=new Ni({props:{type:"password",name:"password",hidden:!n[2],$$slots:{label:[Yi]},$$scope:{ctx:n}}}),Z=new wi({props:{name:"on_connect_commands",placeholder:pe("Put each command on a new line."),hidden:!n[2],$$slots:{label:[Vi]},$$scope:{ctx:n}}}),tn=[Zi,Ji],en=[];function rn(n,t){return n[0].url?0:1}x=rn(n),k=en[x]=tn[x](n);var on=new mi({props:{op:n[7]}}),an=new mi({props:{op:n[8]}}),cn=new mi({props:{op:n[9]}});return{c:function(){t=Y("form"),R&&R.c(),e=J(),r=Y("input"),o=J(),i=Y("input"),a=J(),Gn(D.$$.fragment),c=J(),Gn(A.$$.fragment),u=J(),Gn(M.$$.fragment),s=J(),l.c(),d=J(),Gn(U.$$.fragment),m=J(),B&&B.c(),v=J(),Gn(q.$$.fragment),$=J(),Gn(G.$$.fragment),y=J(),Gn(V.$$.fragment),b=J(),Gn(Z.$$.fragment),w=J(),_=Y("div"),k.c(),E=J(),Gn(on.$$.fragment),O=J(),Gn(an.$$.fragment),C=J(),Gn(cn.$$.fragment),nn(r,"type","hidden"),nn(r,"name","url"),nn(i,"type","hidden"),nn(i,"name","wanted_state"),nn(_,"class","form-actions"),nn(t,"method","post")},m:function(l,p,h){K(l,t,p),R&&R.m(t,null),F(t,e),F(t,r),F(t,o),F(t,i),F(t,a),Yn(D,t,null),F(t,c),Yn(A,t,null),F(t,u),Yn(M,t,null),F(t,s),P[f].m(t,null),F(t,d),Yn(U,t,null),F(t,m),B&&B.m(t,null),F(t,v),Yn(q,t,null),F(t,$),Yn(G,t,null),F(t,y),Yn(V,t,null),F(t,b),Yn(Z,t,null),F(t,w),F(t,_),en[x].m(_,null),F(t,E),Yn(on,t,null),F(t,O),Yn(an,t,null),F(t,C),Yn(cn,t,null),n[20](t),S=!0,h&&N(),N=Q(t,"submit",X(n[11]))},p:function(n,r){var o=p(r,1)[0];n[0].connection_id?R?R.p(n,o):((R=Di(n)).c(),R.m(t,e)):R&&(R.d(1),R=null);var i={};2097152&o&&(i.$$scope={dirty:o,ctx:n}),D.$set(i);var a={};2097152&o&&(a.$$scope={dirty:o,ctx:n}),A.$set(a);var c={};2097152&o&&(c.$$scope={dirty:o,ctx:n}),M.$set(c);var u=f;(f=T(n))===u?P[f].p(n,o):(In(),zn(P[u],1,1,(function(){P[u]=null})),Un(),(l=P[f])||(l=P[f]=j[f](n)).c(),Bn(l,1),l.m(t,d));var s={};2097152&o&&(s.$$scope={dirty:o,ctx:n}),!h&&8&o&&(h=!0,s.checked=n[3],Nn((function(){return h=!1}))),U.$set(s),n[3]?B?(B.p(n,o),Bn(B,1)):((B=Fi(n)).c(),Bn(B,1),B.m(t,v)):B&&(In(),zn(B,1,1,(function(){B=null})),Un());var m={};2097152&o&&(m.$$scope={dirty:o,ctx:n}),!g&&4&o&&(g=!0,m.checked=n[2],Nn((function(){return g=!1}))),q.$set(m);var $={};4&o&&($.hidden=!n[2]),2097152&o&&($.$$scope={dirty:o,ctx:n}),G.$set($);var y={};4&o&&(y.hidden=!n[2]),2097152&o&&(y.$$scope={dirty:o,ctx:n}),V.$set(y);var b={};4&o&&(b.hidden=!n[2]),2097152&o&&(b.$$scope={dirty:o,ctx:n}),Z.$set(b);var w=x;(x=rn(n))===w?en[x].p(n,o):(In(),zn(en[w],1,1,(function(){en[w]=null})),Un(),(k=en[x])||(k=en[x]=tn[x](n)).c(),Bn(k,1),k.m(_,null))},i:function(n){S||(Bn(D.$$.fragment,n),Bn(A.$$.fragment,n),Bn(M.$$.fragment,n),Bn(l),Bn(U.$$.fragment,n),Bn(B),Bn(q.$$.fragment,n),Bn(G.$$.fragment,n),Bn(V.$$.fragment,n),Bn(Z.$$.fragment,n),Bn(k),Bn(on.$$.fragment,n),Bn(an.$$.fragment,n),Bn(cn.$$.fragment,n),S=!0)},o:function(n){zn(D.$$.fragment,n),zn(A.$$.fragment,n),zn(M.$$.fragment,n),zn(l),zn(U.$$.fragment,n),zn(B),zn(q.$$.fragment,n),zn(G.$$.fragment,n),zn(V.$$.fragment,n),zn(Z.$$.fragment,n),zn(k),zn(on.$$.fragment,n),zn(an.$$.fragment,n),zn(cn.$$.fragment,n),S=!1},d:function(e){e&&W(t),R&&R.d(),Vn(D),Vn(A),Vn(M),P[f].d(),Vn(U),B&&B.d(),Vn(q),Vn(G),Vn(V),Vn(Z),en[x].d(),Vn(on),Vn(an),Vn(cn),n[20](null),N()}}}function ea(n,t,e){var r=t.conversation,o=void 0===r?{}:r,i=bn("api"),a=bn("user"),c=i("createConnection"),u=i("removeConnection"),s=i("updateConnection");[c,s].forEach((function(n){n.on("start",(function(n){n.body.on_connect_commands=n.body.on_connect_commands.split("\n").map((function(n){return n.trim()}))}))}));var f,l={},d=!1,p=!1,h=!1,m=!1;function v(){if(a.forced_connection&&e(1,f.server.value=a.default_connection,f),e(1,f.nick.value=a.email.replace(/@.*/,"").replace(/\W/g,"_"),f),e(3,p=!0),e(5,m=!0),!Zt.query.uri)return Zt.urlToForm(f);var n=new rt(Zt.query.uri),t=n.searchParams;n.host&&e(1,f.server.value=n.host,f),n.password&&e(1,f.password.value=n.password,f),n.username&&e(1,f.username.value=n.username,f),t.get("nick")&&e(1,f.nick.value=t.get("nick"),f),t.get("realname")&&e(1,f.realname.value=t.get("realname"),f),n.pathname&&f.conversation&&e(1,f.conversation.value=decodeURIComponent(n.pathname.split("/").filter((function(n){return n.length}))[0]||""),f),Number(t.get("tls")||0)&&e(3,p=!0),Number(t.get("tls_verify")||0)&&e(4,h=!0)}function g(){l.url&&(e(1,f.server.value=l.url.host,f),e(1,f.nick.value=l.url.searchParams.get("nick")||"",f),e(1,f.realname.value=l.url.searchParams.get("realname")||"",f),e(1,f.on_connect_commands.value=l.on_connect_commands.join("\n"),f),e(1,f.password.value=l.url.password,f),e(1,f.username.value=l.url.username,f),e(1,f.url.value=l.url.toString(),f),e(3,p="1"==l.url.searchParams.get("tls")),e(4,h="1"==l.url.searchParams.get("tls_verify")),e(5,m="connected"==l.wanted_state))}function $(){return($=tt(Xn.mark((function n(t){return Xn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.perform(l);case 2:a.removeConversation(l),Zt.go("/settings/connection");case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function y(){return(y=tt(Xn.mark((function n(t){var r;return Xn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(f.server.value){n.next=2;break}return n.abrupt("return");case 2:if(e(1,f.url.value=new rt("irc://localhost:6667").fromForm(t.target).toString(),f),!l.connection_id){n.next=10;break}return n.next=6,s.perform(t.target);case 6:e(0,l=a.ensureConversation(s.res.body)),g(),n.next=14;break;case 10:return n.next=12,c.perform(t.target);case 12:r=a.ensureConversation(c.res.body),Zt.go(r.path);case 14:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return gn(tt(Xn.mark((function n(){return Xn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(f){n.next=2;break}return n.abrupt("return");case 2:return e(0,l=a.findConversation({connection_id:o.connection_id})||{}),n.abrupt("return",l.url?g():v());case 4:case"end":return n.stop()}}),n)})))),n.$set=function(n){"conversation"in n&&e(12,o=n.conversation)},n.$$.update=function(){34&n.$$.dirty&&f&&e(1,f.wanted_state.value=m?"connected":"disconnected",f)},[l,f,d,p,h,m,a,c,u,s,function(n){return $.apply(this,arguments)},function(n){return y.apply(this,arguments)},o,i,v,g,function(n){e(5,m=n)},function(n){e(3,p=n)},function(n){e(4,h=n)},function(n){e(2,d=n)},function(n){xn[n?"unshift":"push"]((function(){e(1,f=n)}))}]}var ra=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Ri()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,ea,ta,A,{conversation:12}),r}return u}(Qn);function oa(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function ia(n){var t;return{c:function(){(t=Y("h1")).textContent="".concat(pe("Add connection"))},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function aa(n){var t,e,r,o=new xr({props:{$$slots:{default:[ia]},$$scope:{ctx:n}}}),i=new ra({});return{c:function(){Gn(o.$$.fragment),t=J(),e=Y("main"),Gn(i.$$.fragment),nn(e,"class","main")},m:function(n,a){Yn(o,n,a),K(n,t,a),K(n,e,a),Yn(i,e,null),r=!0},p:function(n,t){var e=p(t,1)[0],r={};1&e&&(r.$$scope={dirty:e,ctx:n}),o.$set(r)},i:function(n){r||(Bn(o.$$.fragment,n),Bn(i.$$.fragment,n),r=!0)},o:function(n){zn(o.$$.fragment,n),zn(i.$$.fragment,n),r=!1},d:function(n){Vn(o,n),n&&W(t),n&&W(e),Vn(i)}}}function ca(n){return Zt.update({title:pe("Add connection")}),[]}var ua=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(oa()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,ca,aa,A,{}),r}return u}(Qn);function sa(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function fa(n,t,e){var r=n.slice();return r[28]=t[e],r[30]=e,r}var la=function(n){return{}},da=function(n){return{}};function pa(n){var t,e,r,o,i=(n[28].length>1?n[28][1]:n[28][0])+"";function a(){for(var t,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(t=n)[26].apply(t,[n[30]].concat(r))}return{c:function(){t=Y("a"),e=V(i),nn(t,"href",r="#"+n[30]+":"+n[28][0]),nn(t,"class","select-field__option"),nn(t,"tabindex","-1"),an(t,"is-active",n[30]==n[6])},m:function(n,r,i){K(n,t,r),F(t,e),i&&o(),o=Q(t,"mouseover",a)},p:function(o,a){n=o,2048&a&&i!==(i=(n[28].length>1?n[28][1]:n[28][0])+"")&&en(e,i),2048&a&&r!==(r="#"+n[30]+":"+n[28][0])&&nn(t,"href",r),64&a&&an(t,"is-active",n[30]==n[6])},d:function(n){n&&W(t),o()}}}function ha(n){for(var t,e,r,o,i,a,c,u,s,f,l,d=n[22].label,h=P(d,n,n[21],da),m=h||{c:function(){l=V("Label")},m:function(n,t){K(n,l,t)},d:function(n){n&&W(l)}},v=n[11],g=[],$=0;$<v.length;$+=1)g[$]=pa(fa(n,v,$));return{c:function(){t=Y("div"),e=Y("label"),m&&m.c(),r=J(),o=Y("input"),i=J(),a=Y("input"),c=J(),u=Y("div");for(var s=0;s<g.length;s+=1)g[s].c();nn(e,"for",n[3]),nn(o,"type","hidden"),nn(o,"name",n[2]),nn(a,"type","text"),nn(a,"placeholder",n[4]),nn(a,"id",n[3]),a.readOnly=n[5],nn(a,"autocomplete","off"),nn(u,"class","select-field__options"),nn(t,"class","select-field text-field"),t.hidden=n[1],an(t,"is-open",n[9]),an(t,"is-readonly",n[5])},m:function(l,d,p){K(l,t,d),F(t,e),m&&m.m(e,null),F(t,r),F(t,o),n[23](o),rn(o,n[0]),F(t,i),F(t,a),n[25](a),F(t,c),F(t,u);for(var h=0;h<g.length;h+=1)g[h].m(u,null);n[27](t),s=!0,p&&R(f),f=[Q(o,"input",n[24]),Q(o,"keydown",n[12]),Q(a,"keydown",n[12]),Q(a,"keyup",n[13]),Q(a,"click",X(n[14])),Q(u,"click",X(n[14]))]},p:function(n,r){var i=p(r,1)[0];if(h&&h.p&&2097152&i&&h.p(T(d,n,n[21],da),L(d,n[21],i,la)),(!s||8&i)&&nn(e,"for",n[3]),(!s||4&i)&&nn(o,"name",n[2]),1&i&&rn(o,n[0]),(!s||16&i)&&nn(a,"placeholder",n[4]),(!s||8&i)&&nn(a,"id",n[3]),(!s||32&i)&&(a.readOnly=n[5]),2112&i){var c;for(v=n[11],c=0;c<v.length;c+=1){var f=fa(n,v,c);g[c]?g[c].p(f,i):(g[c]=pa(f),g[c].c(),g[c].m(u,null))}for(;c<g.length;c+=1)g[c].d(1);g.length=v.length}(!s||2&i)&&(t.hidden=n[1]),512&i&&an(t,"is-open",n[9]),32&i&&an(t,"is-readonly",n[5])},i:function(n){s||(Bn(m,n),s=!0)},o:function(n){zn(m,n),s=!1},d:function(e){e&&W(t),m&&m.d(e),n[23](null),n[25](null),G(g,e),n[27](null),R(f)}}}function ma(n,t,e){var r,o,i,a=["ArrowDown","ArrowUp","Enter"],c=0,u=!1,s="",f=[],l=t.hidden,d=void 0!==l&&l,p=t.name,h=void 0===p?"":p,m=t.id,v=void 0===m?h?"form_"+h:_t():m,g=t.options,$=void 0===g?[]:g,y=t.placeholder,b=void 0===y?"":y,w=t.readonly,_=void 0!==w&&w,x=t.value,k=void 0===x?"":x;function E(n,t){var r=new RegExp("(?:^|\\s|-)"+gt(t),"i"),o=n.filter((function(n){return n[0]==t}));o.length||(o=n.filter((function(n){return n[0].match(r)})));for(var i=0;i<n.length;i++){var a=n[i];a.length>1&&-1!=o.indexOf(a)&&a[1].match(r)&&-1==n.map((function(n){return n[0]})).indexOf(a[0])&&o.push(a)}e(6,c=0),e(11,f=o)}function O(n){var t;if("keydown"==n.type)t=f.length&&f[c]||$.filter((function(n){return n[0]==k}))[0];else{var r=ut(n.target,".select-field__option").href.replace(/^.*?#\d+:/,"");t=f.filter((function(n){return n[0]==r}))[0]||[]}t&&t.length||(t=[""]),e(0,k=t[0]),e(9,u=!1)}function C(n){var t=f.filter((function(t){return t[0]==n}))[0]||[];e(8,o.value=t.length>1?t[1]:t.length?t[0]:n,o)}function S(n){if(!_){var t=n&&n.target&&ut(n.target,".select-field__option");return u||(e(6,c=f.map((function(n){return n[0]})).indexOf(k)),o.setSelectionRange(0,9999)),t?O(n):e(9,u=!u)}}gn((function(){e(0,k=r.value),o.addEventListener("blur",(function(){setTimeout((function(){return document.activeElement.closest(".select-field__option")||e(9,u=!1)}),100),C(k)}))}));var N=t.$$slots,R=void 0===N?{}:N,D=t.$$scope;return n.$set=function(n){"hidden"in n&&e(1,d=n.hidden),"name"in n&&e(2,h=n.name),"id"in n&&e(3,v=n.id),"options"in n&&e(15,$=n.options),"placeholder"in n&&e(4,b=n.placeholder),"readonly"in n&&e(5,_=n.readonly),"value"in n&&e(0,k=n.value),"$$scope"in n&&e(21,D=n.$$scope)},n.$$.update=function(){if(512&n.$$.dirty&&0==u&&e(16,s=""),98304&n.$$.dirty&&E($,s),128&n.$$.dirty&&r&&!r.syncValue&&(e(7,r.syncValue=function(){e(0,k=this.value)},r),r.syncValue()),33152&n.$$.dirty&&o&&!o.value&&o!=document.activeElement){var t=$.find((function(n){return n[0]==r.value}));t&&e(8,o.value=t[1]||t[0],o)}257&n.$$.dirty&&o&&C(k)},[k,d,h,v,b,_,c,r,o,u,i,f,function(n){if(-1!=a.indexOf(n.key)&&n.preventDefault(),"Tab"!=n.key){if(!u)return S(n);"ArrowDown"==n.key&&e(6,c++,c),"ArrowUp"==n.key&&e(6,c--,c),"Enter"==n.key&&O(n),c>=$.length&&e(6,c=0),c<0&&e(6,c=$.length-1)}else u&&O(n)},function(n){1!=n.key.length&&"Backspace"!=n.key||e(16,s=o.value)},S,$,s,a,E,O,C,D,R,function(n){xn[n?"unshift":"push"]((function(){e(7,r=n)}))},function(){k=this.value,e(0,k),e(7,r)},function(n){xn[n?"unshift":"push"]((function(){e(8,o=n)}))},function(n){e(6,c=n)},function(n){xn[n?"unshift":"push"]((function(){e(10,i=n)}))}]}var va=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(sa()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,ma,ha,A,{hidden:1,name:2,id:3,options:15,placeholder:4,readonly:5,value:0}),r}return u}(Qn);function ga(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function $a(n,t,e){var r=n.slice();return r[15]=t[e],r}function ya(n){var t;return{c:function(){(t=Y("h1")).textContent="".concat(pe("Add conversation"))},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function ba(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Connection")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function wa(n){var t,e,r=pe(n[0].conversations.length?"Refresh":"Load")+"";return{c:function(){t=Y("span"),e=V(r)},m:function(n,r){K(n,t,r),F(t,e)},p:function(n,t){1&t&&r!==(r=pe(n[0].conversations.length?"Refresh":"Load")+"")&&en(e,r)},d:function(n){n&&W(t)}}}function _a(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Conversation name")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function xa(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Add"))},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function ka(n){var t,e,r,o,i=n[0].error+"";return{c:function(){t=Y("p"),e=V(n[1]),r=V(": "),o=V(i),nn(t,"class","error")},m:function(n,i){K(n,t,i),F(t,e),F(t,r),F(t,o)},p:function(n,t){2&t&&en(e,n[1]),1&t&&i!==(i=n[0].error+"")&&en(o,i)},d:function(n){n&&W(t)}}}function Ea(n){var t,e,r;function o(n,t){return n[0].done?Ca:Oa}for(var i=o(n),a=i(n),c=n[0].conversations,u=[],s=0;s<c.length;s+=1)u[s]=Sa($a(n,c,s));return{c:function(){t=Y("p"),a.c(),e=J(),r=Y("div");for(var n=0;n<u.length;n+=1)u[n].c();nn(r,"class","conversation-add-list")},m:function(n,o){K(n,t,o),a.m(t,null),K(n,e,o),K(n,r,o);for(var i=0;i<u.length;i+=1)u[i].m(r,null)},p:function(n,e){if(i===(i=o(n))&&a?a.p(n,e):(a.d(1),(a=i(n))&&(a.c(),a.m(t,null))),65&e){var s;for(c=n[0].conversations,s=0;s<c.length;s+=1){var f=$a(n,c,s);u[s]?u[s].p(f,e):(u[s]=Sa(f),u[s].c(),u[s].m(r,null))}for(;s<u.length;s+=1)u[s].d(1);u.length=c.length}},d:function(n){n&&W(t),a.d(),n&&W(e),n&&W(r),G(u,n)}}}function Oa(n){var t,e=pe("Showing %1 of %2 conversations, but the list is still loading.",n[0].conversations.length,n[0].n_conversations)+"";return{c:function(){t=V(e)},m:function(n,e){K(n,t,e)},p:function(n,r){1&r&&e!==(e=pe("Showing %1 of %2 conversations, but the list is still loading.",n[0].conversations.length,n[0].n_conversations)+"")&&en(t,e)},d:function(n){n&&W(t)}}}function Ca(n){var t,e=pe("Showing %1 of %2 conversations.",n[0].conversations.length,n[0].n_conversations)+"";return{c:function(){t=V(e)},m:function(n,e){K(n,t,e)},p:function(n,r){1&r&&e!==(e=pe("Showing %1 of %2 conversations.",n[0].conversations.length,n[0].n_conversations)+"")&&en(t,e)},d:function(n){n&&W(t)}}}function Sa(n){var t,e,r,o,i,a,c,u,s,f,l,d,p=n[15].n_users+"",h=n[15].name+"",m=(n[15].topic||"No topic.")+"";return{c:function(){t=Y("a"),e=Y("span"),r=V(p),o=J(),i=Y("b"),a=V(h),c=J(),u=Y("i"),s=V(m),f=J(),nn(e,"class","conversation-add-list__n-users"),nn(i,"class","conversation-add-list__name"),nn(u,"class","conversation-add-list__title"),nn(t,"href",l="#add:"+n[15].name)},m:function(l,p,h){K(l,t,p),F(t,e),F(e,r),F(t,o),F(t,i),F(i,a),F(t,c),F(t,u),F(u,s),F(t,f),h&&d(),d=Q(t,"click",X(n[6]))},p:function(n,e){1&e&&p!==(p=n[15].n_users+"")&&en(r,p),1&e&&h!==(h=n[15].name+"")&&en(a,h),1&e&&m!==(m=(n[15].topic||"No topic.")+"")&&en(s,m),1&e&&l!==(l="#add:"+n[15].name)&&nn(t,"href",l)},d:function(n){n&&W(t),d()}}}function Na(n){var t,e,r,o,i,a,c,u,s,f,l,d,h,m,v,g,$,y,b=new xr({props:{$$slots:{default:[ya]},$$scope:{ctx:n}}});function w(t){n[12].call(null,t)}var _={name:"connection_id",options:n[4],placeholder:pe("Select..."),$$slots:{label:[ba]},$$scope:{ctx:n}};void 0!==n[1]&&(_.value=n[1]);var x=new va({props:_});xn.push((function(){return Wn(x,"value",w)}));var k=new hr({props:{type:"button",icon:"sync-alt",disabled:!n[1]||!1===n[0].done,$$slots:{default:[wa]},$$scope:{ctx:n}}});function E(t){n[13].call(null,t)}k.$on("click",n[7]);var O={name:"conversation_id",placeholder:pe("#room or nick"),autocomplete:"off",$$slots:{label:[_a]},$$scope:{ctx:n}};void 0!==n[2]&&(O.value=n[2]);var C=new Ni({props:O});xn.push((function(){return Wn(C,"value",E)})),C.$on("keyup",n[8]);var S=new hr({props:{icon:"comment",disabled:!n[1]||!n[2],$$slots:{default:[xa]},$$scope:{ctx:n}}}),N=n[0].error&&ka(n),R=null!==n[0].done&&Ea(n);return{c:function(){Gn(b.$$.fragment),t=J(),e=Y("main"),(r=Y("p")).textContent="".concat(pe("Enter the name of an exising conversation, or create a new conversation.")," \n    ").concat(pe("It is also possible to load in all existing conversations for a given connection.")),o=J(),i=Y("form"),a=Y("div"),Gn(x.$$.fragment),u=J(),s=Y("div"),Gn(k.$$.fragment),f=J(),l=Y("div"),Gn(C.$$.fragment),h=J(),m=Y("div"),Gn(S.$$.fragment),v=J(),N&&N.c(),g=J(),R&&R.c(),nn(s,"class","has-remaining-space"),nn(a,"class","inputs-side-by-side"),nn(m,"class","has-remaining-space"),nn(l,"class","inputs-side-by-side"),nn(i,"method","post"),nn(e,"class","main")},m:function(c,d,p){Yn(b,c,d),K(c,t,d),K(c,e,d),F(e,r),F(e,o),F(e,i),F(i,a),Yn(x,a,null),F(a,u),F(a,s),Yn(k,s,null),F(i,f),F(i,l),Yn(C,l,null),F(l,h),F(l,m),Yn(S,m,null),F(i,v),N&&N.m(i,null),F(i,g),R&&R.m(i,null),n[14](i),$=!0,p&&y(),y=Q(i,"submit",X(n[6]))},p:function(n,t){var e=p(t,1)[0],r={};262144&e&&(r.$$scope={dirty:e,ctx:n}),b.$set(r);var o={};16&e&&(o.options=n[4]),262144&e&&(o.$$scope={dirty:e,ctx:n}),!c&&2&e&&(c=!0,o.value=n[1],Nn((function(){return c=!1}))),x.$set(o);var a={};3&e&&(a.disabled=!n[1]||!1===n[0].done),262145&e&&(a.$$scope={dirty:e,ctx:n}),k.$set(a);var u={};262144&e&&(u.$$scope={dirty:e,ctx:n}),!d&&4&e&&(d=!0,u.value=n[2],Nn((function(){return d=!1}))),C.$set(u);var s={};6&e&&(s.disabled=!n[1]||!n[2]),262144&e&&(s.$$scope={dirty:e,ctx:n}),S.$set(s),n[0].error?N?N.p(n,e):((N=ka(n)).c(),N.m(i,g)):N&&(N.d(1),N=null),null!==n[0].done?R?R.p(n,e):((R=Ea(n)).c(),R.m(i,null)):R&&(R.d(1),R=null)},i:function(n){$||(Bn(b.$$.fragment,n),Bn(x.$$.fragment,n),Bn(k.$$.fragment,n),Bn(C.$$.fragment,n),Bn(S.$$.fragment,n),$=!0)},o:function(n){zn(b.$$.fragment,n),zn(x.$$.fragment,n),zn(k.$$.fragment,n),zn(C.$$.fragment,n),zn(S.$$.fragment,n),$=!1},d:function(r){Vn(b,r),r&&W(t),r&&W(e),Vn(x),Vn(k),Vn(C),Vn(S),N&&N.d(),R&&R.d(),n[14](null),y()}}}function Ra(n,t,e){var r,o=bn("socket"),i=bn("user");j(n,i,(function(n){return e(10,r=n)}));var a,c,u={conversations:[],done:null,n_conversations:0},s="",f="";function l(n){return d.apply(this,arguments)}function d(){return(d=tt(Xn.mark((function n(t){var r,i,a,d;return Xn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r="/list"+(f.length?" /"+f+"/":""),"click"==t.type&&u.done&&(r+=" refresh"),c&&clearTimeout(c),n.next=5,o.send({connection_id:s,message:r,method:"send"});case 5:i=n.sent,a=ft(i),e(0,u=a?{conversations:[],done:!0,n_conversations:0,error:a}:i),(d=t.interval?t.interval+500:500)>2e3&&(d=2e3),a||i.done||(c=setTimeout((function(){return l({interval:d})}),d));case 11:case"end":return n.stop()}}),n)})))).apply(this,arguments)}Zt.update({title:pe("Add conversation")}),gn((function(){return Zt.urlToForm(a)}));var p,h=st(l,250);return n.$$.update=function(){1024&n.$$.dirty&&e(4,p=Array.from(r.connections.keys()).map((function(n){return[n]}))),18&n.$$.dirty&&(s||e(1,s=p[0]?p[0][0]:""))},[u,s,f,a,p,i,function(n){var t=n&&n.target&&n.target.closest("a");t&&t.href&&e(2,f=t.href.replace(/.*#add:/,"")),s&&f&&i.findConversation({connection_id:s}).send("/join "+f)},l,h,c,r,o,function(n){e(1,s=n),e(4,p),e(10,r)},function(n){e(2,f=n)},function(n){xn[n?"unshift":"push"]((function(){e(3,a=n)}))}]}var Da=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(ga()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,Ra,Na,A,{}),r}return u}(Qn);function Aa(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Ma(n){var t,e,r,o,i,a,c,u,s=he("Yikes! we are so sorry for the inconvenience. Please submit an [issue](%1), if the problem does not go away.","https://github.com/nordaaker/convos/issues")+"",f=pe("Go to start page")+"",l=new fr({props:{name:"play"}});return{c:function(){t=Y("p"),e=J(),r=Y("p"),o=Y("a"),Gn(l.$$.fragment),i=J(),a=V(f),nn(o,"href",c=n[1].baseUrl),nn(o,"target","_self"),nn(o,"class","btn")},m:function(n,c){K(n,t,c),t.innerHTML=s,K(n,e,c),K(n,r,c),F(r,o),Yn(l,o,null),F(o,i),F(o,a),u=!0},p:function(n,t){(!u||2&t&&c!==(c=n[1].baseUrl))&&nn(o,"href",c)},i:function(n){u||(Bn(l.$$.fragment,n),u=!0)},o:function(n){zn(l.$$.fragment,n),u=!1},d:function(n){n&&W(t),n&&W(e),n&&W(r),Vn(l)}}}function ja(n){var t,e,r,o,i,a,c,u,s=pe("Go to start page")+"",f=new fr({props:{name:"play"}});return{c:function(){(t=Y("p")).textContent="".concat(pe("The Convos Team have been searching and searching, but the requested page could not be found.")),e=J(),r=Y("p"),o=Y("a"),Gn(f.$$.fragment),i=J(),a=V(s),nn(o,"href",c=n[1].baseUrl),nn(o,"target","_self"),nn(o,"class","btn")},m:function(n,c){K(n,t,c),K(n,e,c),K(n,r,c),F(r,o),Yn(f,o,null),F(o,i),F(o,a),u=!0},p:function(n,t){(!u||2&t&&c!==(c=n[1].baseUrl))&&nn(o,"href",c)},i:function(n){u||(Bn(f.$$.fragment,n),u=!0)},o:function(n){zn(f.$$.fragment,n),u=!1},d:function(n){n&&W(t),n&&W(e),n&&W(r),Vn(f)}}}function Pa(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g=pe("Downloaded Convos.")+"",$=pe("Started Convos.")+"",y=pe("Contact admin")+"",b=new fr({props:{name:"download"}}),w=new fr({props:{name:"rocket"}}),_=[La,Ta],x=[];function k(n,t){return n[2].error?0:1}s=k(n),f=x[s]=_[s](n);var E=new fr({props:{name:"paper-plane"}});return{c:function(){t=Y("p"),Gn(b.$$.fragment),e=J(),r=V(g),o=J(),i=Y("p"),Gn(w.$$.fragment),a=J(),c=V($),u=J(),f.c(),l=J(),d=Y("p"),p=Y("a"),Gn(E.$$.fragment),h=J(),m=V(y),nn(p,"class","btn"),nn(p,"href",tr("contact"))},m:function(n,f){K(n,t,f),Yn(b,t,null),F(t,e),F(t,r),K(n,o,f),K(n,i,f),Yn(w,i,null),F(i,a),F(i,c),K(n,u,f),x[s].m(n,f),K(n,l,f),K(n,d,f),F(d,p),Yn(E,p,null),F(p,h),F(p,m),v=!0},p:function(n,t){var e=s;(s=k(n))===e?x[s].p(n,t):(In(),zn(x[e],1,1,(function(){x[e]=null})),Un(),(f=x[s])||(f=x[s]=_[s](n)).c(),Bn(f,1),f.m(l.parentNode,l))},i:function(n){v||(Bn(b.$$.fragment,n),Bn(w.$$.fragment,n),Bn(f),Bn(E.$$.fragment,n),v=!0)},o:function(n){zn(b.$$.fragment,n),zn(w.$$.fragment,n),zn(f),zn(E.$$.fragment,n),v=!1},d:function(n){n&&W(t),Vn(b),n&&W(o),n&&W(i),Vn(w),n&&W(u),x[s].d(n),n&&W(l),n&&W(d),Vn(E)}}}function Ta(n){var t,e,r,o,i=pe("Loading user data...")+"",a=new fr({props:{name:"spinner fa-spin"}});return{c:function(){t=Y("p"),Gn(a.$$.fragment),e=J(),r=V(i)},m:function(n,i){K(n,t,i),Yn(a,t,null),F(t,e),F(t,r),o=!0},p:O,i:function(n){o||(Bn(a.$$.fragment,n),o=!0)},o:function(n){zn(a.$$.fragment,n),o=!1},d:function(n){n&&W(t),Vn(a)}}}function La(n){var t,e,r,o,i=pe("Loading user data failed: %1",pe(n[2].error))+"",a=new fr({props:{name:"exclamation-triangle"}});return{c:function(){t=Y("p"),Gn(a.$$.fragment),e=J(),r=V(i)},m:function(n,i){K(n,t,i),Yn(a,t,null),F(t,e),F(t,r),o=!0},p:function(n,t){(!o||4&t)&&i!==(i=pe("Loading user data failed: %1",pe(n[2].error))+"")&&en(r,i)},i:function(n){o||(Bn(a.$$.fragment,n),o=!0)},o:function(n){zn(a.$$.fragment,n),o=!1},d:function(n){n&&W(t),Vn(a)}}}function Ia(n){var t,e,r,o,i,a,c,u=pe(n[5][n[0]])+"",s=[Pa,ja,Ma],f=[];function l(n,t){return"loading"==n[0]?0:"not_found"==n[0]?1:2}return i=l(n),a=f[i]=s[i](n),{c:function(){t=Y("main"),e=Y("h2"),r=V(u),o=J(),a.c()},m:function(n,a){K(n,t,a),F(t,e),F(e,r),F(t,o),f[i].m(t,null),c=!0},p:function(n,e){var o=p(e,1)[0];(!c||1&o)&&u!==(u=pe(n[5][n[0]])+"")&&en(r,u);var d=i;(i=l(n))===d?f[i].p(n,o):(In(),zn(f[d],1,1,(function(){f[d]=null})),Un(),(a=f[i])||(a=f[i]=s[i](n)).c(),Bn(a,1),a.m(t,null))},i:function(n){c||(Bn(a),c=!0)},o:function(n){zn(a),c=!1},d:function(n){n&&W(t),f[i].d()}}}function Ua(n,t,e){var r,o,i;j(n,Zt,(function(n){return e(1,r=n)}));var a=bn("socket");j(n,a,(function(n){return e(2,i=n)}));var c=bn("user");j(n,c,(function(n){return e(6,o=n)}));var u,s={loading:"Loading",not_found:"Not Found"};return n.$$.update=function(){66&n.$$.dirty&&e(0,u=function(n,t){var e=n.path.match(/\/err\/(\w+)/);return e?e[1]:!n.component||t.is("loading")?"loading":"not_found"}(r,o)),1&n.$$.dirty&&Zt.update({title:pe(s[u])})},[u,r,i,a,c,s]}var Ba=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Aa()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,Ua,Ia,A,{}),r}return u}(Qn);function za(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Ha(n,t,e){var r=n.slice();return r[2]=t[e],r}function qa(n){var t,e,r,o,i,a,c,u=pe("Help")+"",s=tr("version")+"";return{c:function(){t=Y("h1"),e=V(u),r=J(),o=Y("small"),i=Y("a"),a=V("v"),c=V(s),nn(i,"href",n[0]),nn(i,"target","_blank")},m:function(n,u){K(n,t,u),F(t,e),F(t,r),F(t,o),F(o,i),F(i,a),F(i,c)},p:O,d:function(n){n&&W(t)}}}function Fa(n){var t,e,r,o,i=n[2].example+"",a=pe(n[2].description)+"";return{c:function(){t=Y("dt"),e=V(i),r=Y("dd"),o=V(a)},m:function(n,i){K(n,t,i),F(t,e),K(n,r,i),F(r,o)},p:O,d:function(n){n&&W(t),n&&W(r)}}}function Ka(n){var t;return{c:function(){t=V("Loading")},m:function(n,e){K(n,t,e)},d:function(n){n&&W(t)}}}function Wa(n){var t;return{c:function(){t=V("Not found")},m:function(n,e){K(n,t,e)},d:function(n){n&&W(t)}}}function Ga(n){var t;return{c:function(){t=V("Unknown")},m:function(n,e){K(n,t,e)},d:function(n){n&&W(t)}}}function Ya(n){for(var t,e,r,o,i,a,c,u,s,f,l,d,h,m,v,g,$,y,b,w,_,x,k,E,C,S,N,R,D,A,M,j,P,T,L,I,U,B,z,H,q,Z,Q,X,tn,en,rn,on,an,cn,un,fn,ln,dn,pn,hn,mn,vn,gn,$n,yn,bn,wn,_n,xn,kn,En,On,Cn,Sn,Nn,Rn,Dn,An,Mn,jn,Pn,Tn,Ln,In,Un,Hn=he('Got any questions? Come and talk to us in the "#convos" channel on https://freenode.net.')+"",qn=he("More information can also be found on https://convos.chat.")+"",Fn=he('Using "*" around some text, will convert it into *italic*, **bold** or ***italic bold***.')+"",Kn=he("Using backticks around some text, will format it as a `code fragment`.")+"",Wn=he('Any message starting with a-z is prefixed with "`/quote`", when sending from a connection conversation.')+"",Jn=pe("Changelog for v%1",tr("version"))+"",Zn="Convos"!=tr("organization_name")&&"https://convos.chat"!=tr("organization_url"),Qn=pe("Contact admin")+"",Xn=new xr({props:{$$slots:{default:[qa]},$$scope:{ctx:n}}}),nt=Or,tt=[],et=0;et<nt.length;et+=1)tt[et]=Fa(Ha(n,nt,et));var rt,ot,it,at,ct=Zn&&(at=tr("organization_name")+"",{c:function(){rt=Y("li"),ot=Y("a"),it=V(at),nn(ot,"href",tr("organization_url")),nn(ot,"target","_blank")},m:function(n,t){K(n,rt,t),F(rt,ot),F(ot,it)},p:O,d:function(n){n&&W(rt)}}),ut=new Ur({props:{href:"/err/loading",$$slots:{default:[Ka]},$$scope:{ctx:n}}}),st=new Ur({props:{href:"/err/not_found",$$slots:{default:[Wa]},$$scope:{ctx:n}}}),ft=new Ur({props:{href:"/err/unknown",$$slots:{default:[Ga]},$$scope:{ctx:n}}});return{c:function(){Gn(Xn.$$.fragment),t=J(),e=Y("main"),r=Y("p"),i=J(),c=J(),(u=Y("h2")).textContent="".concat(pe("Shortcuts")),s=J(),f=Y("dl"),(l=Y("dt")).textContent="".concat(pe("shift+enter")),(d=Y("dd")).textContent="".concat(pe("Shift focus between chat input and search in sidebar.")),(h=Y("dt")).textContent="".concat(pe("Open conversation or connection settings")),(m=Y("dd")).textContent="".concat(pe("Clicking on the icon next to the conversation name will take you to settings.")),v=J(),(g=Y("h2")).textContent="".concat(pe("Autocomplete")),$=J(),(y=Y("p")).textContent="".concat(pe("The following rules apply when typing a message:")),b=J(),w=Y("dl"),(_=Y("dt")).textContent="@nick",(x=Y("dd")).textContent="".concat(pe('"@" followed by a character will show matching nicks in the current conversation.')),(k=Y("dt")).textContent=":emoji_name",(E=Y("dd")).textContent="".concat(pe('":" followed by a character will show matching emojis.')),(C=Y("dt")).textContent="/command",(S=Y("dd")).textContent="".concat(pe('"/" will show the available commands.')),(N=Y("dt")).textContent="#conversation",(R=Y("dd")).textContent="".concat(pe('"#" will show the matching conversation names.')),D=J(),(A=Y("h2")).textContent="".concat(pe("Text formatting")),M=J(),(j=Y("p")).textContent="".concat(pe("Convos supports some special way of formatting text:")),P=J(),T=Y("dl"),(L=Y("dt")).textContent="".concat(Object.keys(te).sort().map(n[1]).join(", ")),(I=Y("dd")).textContent="".concat(pe("Will be automatically converted into emojis.")),(U=Y("dt")).textContent="".concat(pe("> some text")),(B=Y("dd")).textContent="".concat(pe('A line starting with ">" will be converted into a quote.')),(z=Y("dt")).textContent="".concat(pe("*some text*, **some text**, ***some text***")),H=Y("dd"),(q=Y("dt")).textContent="".concat(pe("`some fragment`")),Z=Y("dd"),(Q=Y("dt")).textContent="https://...",(X=Y("dd")).textContent="".concat(pe("URLs will be converted to links, and might be embedded in the chat.")),tn=J(),(en=Y("h2")).textContent="".concat(pe("Available commands")),rn=J(),on=Y("p"),an=J(),cn=Y("dl");for(var p=0;p<tt.length;p+=1)tt[p].c();un=J(),(fn=Y("h2")).textContent="".concat(pe("Other resources")),ln=J(),dn=Y("ul"),pn=Y("li"),hn=Y("a"),mn=V(Jn),vn=J(),gn=Y("li"),($n=Y("a")).textContent="".concat(pe("Project homepage")),yn=J(),bn=Y("li"),(wn=Y("a")).textContent="".concat(pe("Bug/issue tracker")),_n=J(),xn=Y("li"),(kn=Y("a")).textContent="".concat(pe("Source code")),En=J(),ct&&ct.c(),On=J(),Cn=Y("li"),Sn=Y("a"),Nn=V(Qn),Rn=J(),(Dn=Y("h2")).textContent="".concat(pe("Demo error pages")),An=J(),Mn=Y("ul"),jn=Y("li"),Gn(ut.$$.fragment),Pn=J(),Tn=Y("li"),Gn(st.$$.fragment),Ln=J(),In=Y("li"),Gn(ft.$$.fragment),o=new sn(Hn,i),a=new sn(qn,null),nn(u,"id","shortcuts"),nn(g,"id","autocomplete"),nn(A,"id","formatting"),nn(en,"id","commands"),nn(fn,"id","resources"),nn(hn,"href",n[0]),nn(hn,"target","_blank"),nn($n,"href","https://convos.chat"),nn($n,"target","_blank"),nn(wn,"href","https://github.com/Nordaaker/convos/issues"),nn(wn,"target","_blank"),nn(kn,"href","https://github.com/Nordaaker/convos"),nn(kn,"target","_blank"),nn(Sn,"href",tr("contact")),nn(Sn,"target","_blank"),nn(Dn,"id","fallback"),nn(e,"class","main")},m:function(n,p){Yn(Xn,n,p),K(n,t,p),K(n,e,p),F(e,r),o.m(r),F(r,i),a.m(r),F(e,c),F(e,u),F(e,s),F(e,f),F(f,l),F(f,d),F(f,h),F(f,m),F(e,v),F(e,g),F(e,$),F(e,y),F(e,b),F(e,w),F(w,_),F(w,x),F(w,k),F(w,E),F(w,C),F(w,S),F(w,N),F(w,R),F(e,D),F(e,A),F(e,M),F(e,j),F(e,P),F(e,T),F(T,L),F(T,I),F(T,U),F(T,B),F(T,z),F(T,H),H.innerHTML=Fn,F(T,q),F(T,Z),Z.innerHTML=Kn,F(T,Q),F(T,X),F(e,tn),F(e,en),F(e,rn),F(e,on),on.innerHTML=Wn,F(e,an),F(e,cn);for(var O=0;O<tt.length;O+=1)tt[O].m(cn,null);F(e,un),F(e,fn),F(e,ln),F(e,dn),F(dn,pn),F(pn,hn),F(hn,mn),F(dn,vn),F(dn,gn),F(gn,$n),F(dn,yn),F(dn,bn),F(bn,wn),F(dn,_n),F(dn,xn),F(xn,kn),F(dn,En),ct&&ct.m(dn,null),F(dn,On),F(dn,Cn),F(Cn,Sn),F(Sn,Nn),F(e,Rn),F(e,Dn),F(e,An),F(e,Mn),F(Mn,jn),Yn(ut,jn,null),F(Mn,Pn),F(Mn,Tn),Yn(st,Tn,null),F(Mn,Ln),F(Mn,In),Yn(ft,In,null),Un=!0},p:function(n,t){var e=p(t,1)[0],r={};if(32&e&&(r.$$scope={dirty:e,ctx:n}),Xn.$set(r),0&e){var o;for(nt=Or,o=0;o<nt.length;o+=1){var i=Ha(n,nt,o);tt[o]?tt[o].p(i,e):(tt[o]=Fa(i),tt[o].c(),tt[o].m(cn,null))}for(;o<tt.length;o+=1)tt[o].d(1);tt.length=nt.length}Zn&&ct.p(n,e);var a={};32&e&&(a.$$scope={dirty:e,ctx:n}),ut.$set(a);var c={};32&e&&(c.$$scope={dirty:e,ctx:n}),st.$set(c);var u={};32&e&&(u.$$scope={dirty:e,ctx:n}),ft.$set(u)},i:function(n){Un||(Bn(Xn.$$.fragment,n),Bn(ut.$$.fragment,n),Bn(st.$$.fragment,n),Bn(ft.$$.fragment,n),Un=!0)},o:function(n){zn(Xn.$$.fragment,n),zn(ut.$$.fragment,n),zn(st.$$.fragment,n),zn(ft.$$.fragment,n),Un=!1},d:function(n){Vn(Xn,n),n&&W(t),n&&W(e),G(tt,n),ct&&ct.d(),Vn(ut),Vn(st),Vn(ft)}}}function Va(n){var t="https://github.com/Nordaaker/convos/blob/"+tr("version")+"/Changes#L3";Zt.update({title:pe("Help")});return[t,function(n){return te[n]}]}var Ja=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(za()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,Va,Ya,A,{}),r}return u}(Qn);function Za(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Qa(n){var t,e,r,o,i,a,c,u,s,f,l,d=pe("Contact admin")+"",p=new fr({props:{name:"paper-plane"}});return{c:function(){(t=Y("h2")).textContent="".concat(pe("Sign up")),e=J(),(r=Y("p")).textContent="".concat(pe("Convos is not open for public registration.")),o=J(),(i=Y("p")).textContent="".concat(pe("Please ask your Convos admin for an invite link to sign up, or sign in if you already have an account.")),a=J(),c=Y("div"),u=Y("a"),Gn(p.$$.fragment),s=J(),f=V(d),nn(u,"class","btn"),nn(u,"href",tr("contact")),nn(c,"class","form-actions")},m:function(n,d){K(n,t,d),K(n,e,d),K(n,r,d),K(n,o,d),K(n,i,d),K(n,a,d),K(n,c,d),F(c,u),Yn(p,u,null),F(u,s),F(u,f),l=!0},p:O,i:function(n){l||(Bn(p.$$.fragment,n),l=!0)},o:function(n){zn(p.$$.fragment,n),l=!1},d:function(n){n&&W(t),n&&W(e),n&&W(r),n&&W(o),n&&W(i),n&&W(a),n&&W(c),Vn(p)}}}function Xa(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g=tr("first_user"),$=g&&{c:function(){(v=Y("p")).textContent="".concat(pe('As you are the first user, you do not need any invitation link. Just fill in the form below, hit "Sign up" to start chatting.'))},m:function(n,t){K(n,v,t)},p:O,d:function(n){n&&W(v)}};function y(t){n[12].call(null,t)}var b={type:"email",name:"email",placeholder:pe("Ex: john@doe.com"),readonly:n[2],$$slots:{default:[ic],help:[oc],label:[tc]},$$scope:{ctx:n}};void 0!==n[0].formEmail&&(b.value=n[0].formEmail);var w=new Ni({props:b});xn.push((function(){return Wn(w,"value",y)}));var _=new Ni({props:{type:"password",name:"password",$$slots:{default:[uc],help:[cc],label:[ac]},$$scope:{ctx:n}}}),x=new hr({props:{icon:"save",op:n[4],$$slots:{default:[sc]},$$scope:{ctx:n}}}),k=new mi({props:{op:n[4]}});return{c:function(){t=Y("form"),(e=Y("h2")).textContent="".concat(pe(tr("existing_user")?"Recover account":"Sign up")),r=J(),$&&$.c(),o=J(),i=Y("input"),a=J(),c=Y("input"),u=J(),Gn(w.$$.fragment),f=J(),Gn(_.$$.fragment),l=J(),d=Y("div"),Gn(x.$$.fragment),p=J(),Gn(k.$$.fragment),nn(i,"type","hidden"),nn(i,"name","exp"),nn(c,"type","hidden"),nn(c,"name","token"),nn(d,"class","form-actions"),nn(t,"method","post")},m:function(s,v,g){K(s,t,v),F(t,e),F(t,r),$&&$.m(t,null),F(t,o),F(t,i),F(t,a),F(t,c),F(t,u),Yn(w,t,null),F(t,f),Yn(_,t,null),F(t,l),F(t,d),Yn(x,d,null),F(t,p),Yn(k,t,null),n[14](t),h=!0,g&&m(),m=Q(t,"submit",X(n[13]))},p:function(n,t){g&&$.p(n,t);var e={};131072&t&&(e.$$scope={dirty:t,ctx:n}),!s&&1&t&&(s=!0,e.value=n[0].formEmail,Nn((function(){return s=!1}))),w.$set(e);var r={};131072&t&&(r.$$scope={dirty:t,ctx:n}),_.$set(r);var o={};131072&t&&(o.$$scope={dirty:t,ctx:n}),x.$set(o)},i:function(n){h||(Bn(w.$$.fragment,n),Bn(_.$$.fragment,n),Bn(x.$$.fragment,n),Bn(k.$$.fragment,n),h=!0)},o:function(n){zn(w.$$.fragment,n),zn(_.$$.fragment,n),zn(x.$$.fragment,n),zn(k.$$.fragment,n),h=!1},d:function(e){e&&W(t),$&&$.d(),Vn(w),Vn(_),Vn(x),Vn(k),n[14](null),m()}}}function nc(n){var t,e,r,o,i,a,c,u,s,f=pe("Contact admin")+"";return{c:function(){(t=Y("h2")).textContent="".concat(pe("Invalid invite/recover URL")),e=J(),(r=Y("p")).textContent="".concat(pe(410==tr("status")?"The link has expired.":"The link is invalid.")),o=J(),(i=Y("p")).textContent="".concat(pe("Please ask your Convos admin for a new link.")),a=J(),c=Y("p"),u=Y("a"),s=V(f),nn(u,"class","btn"),nn(u,"href",tr("contact"))},m:function(n,f){K(n,t,f),K(n,e,f),K(n,r,f),K(n,o,f),K(n,i,f),K(n,a,f),K(n,c,f),F(c,u),F(u,s)},p:O,i:O,o:O,d:function(n){n&&W(t),n&&W(e),n&&W(r),n&&W(o),n&&W(i),n&&W(a),n&&W(c)}}}function tc(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("E-mail")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function ec(n){var t,e=pe("Your email will be used if you forget your password.")+"";return{c:function(){t=V(e)},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function rc(n){var t,e=pe("Your email is from the invite link.")+"";return{c:function(){t=V(e)},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function oc(n){var t;var e=function(n,t){return n[2]?rc:ec}(n)(n);return{c:function(){t=Y("p"),e.c(),nn(t,"class","help"),nn(t,"slot","help")},m:function(n,r){K(n,t,r),e.m(t,null)},p:function(n,t){e.p(n,t)},d:function(n){n&&W(t),e.d()}}}function ic(n){var t;return{c:function(){t=J()},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function ac(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Password")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function cc(n){var t;return{c:function(){(t=Y("p")).textContent="".concat(pe("Hint: Use a phrase from a book.")),nn(t,"class","help"),nn(t,"slot","help")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function uc(n){var t;return{c:function(){t=J()},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function sc(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe(tr("existing_user")?"Set new password":"Sign up"))},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function fc(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("E-mail")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function lc(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Password")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function dc(n){var t,e=he("Contact your [Convos admin](%1) if you have forgotten your password.",tr("contact"))+"";return{c:function(){nn(t=Y("p"),"class","help"),nn(t,"slot","help")},m:function(n,r){K(n,t,r),t.innerHTML=e},p:O,d:function(n){n&&W(t)}}}function pc(n){var t;return{c:function(){t=J()},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function hc(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Sign in"))},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function mc(n){var t,e,r,o,i,a,c=!tr("first_user"),u=[nc,Xa,Qa],s=[];e=function(n,t){return tr("status")>=400?0:n[2]||tr("open_to_public")||tr("first_user")?1:2}(n),r=s[e]=u[e](n);var f=c&&function(n){var t,e,r,o,i,a,c,u,s,f,l;function d(t){n[15].call(null,t)}var p={type:"email",name:"email",placeholder:pe("Ex: john@doe.com"),$$slots:{label:[fc]},$$scope:{ctx:n}};void 0!==n[0].formEmail&&(p.value=n[0].formEmail);var h=new Ni({props:p});xn.push((function(){return Wn(h,"value",d)}));var m=new Ni({props:{type:"password",name:"password",autocomplete:"current-password",$$slots:{default:[pc],help:[dc],label:[lc]},$$scope:{ctx:n}}}),v=new hr({props:{icon:"sign-in-alt",op:n[3],$$slots:{default:[hc]},$$scope:{ctx:n}}}),g=new mi({props:{op:n[3]}});return{c:function(){t=Y("main"),e=Y("form"),(r=Y("h2")).textContent="".concat(pe("Sign in")),o=J(),Gn(h.$$.fragment),a=J(),Gn(m.$$.fragment),c=J(),u=Y("div"),Gn(v.$$.fragment),s=J(),Gn(g.$$.fragment),nn(u,"class","form-actions"),nn(e,"method","post"),nn(t,"id","signin")},m:function(i,d,p){K(i,t,d),F(t,e),F(e,r),F(e,o),Yn(h,e,null),F(e,a),Yn(m,e,null),F(e,c),F(e,u),Yn(v,u,null),F(e,s),Yn(g,e,null),f=!0,p&&l(),l=Q(e,"submit",X(n[16]))},p:function(n,t){var e={};131072&t&&(e.$$scope={dirty:t,ctx:n}),!i&&1&t&&(i=!0,e.value=n[0].formEmail,Nn((function(){return i=!1}))),h.$set(e);var r={};131072&t&&(r.$$scope={dirty:t,ctx:n}),m.$set(r);var o={};131072&t&&(o.$$scope={dirty:t,ctx:n}),v.$set(o)},i:function(n){f||(Bn(h.$$.fragment,n),Bn(m.$$.fragment,n),Bn(v.$$.fragment,n),Bn(g.$$.fragment,n),f=!0)},o:function(n){zn(h.$$.fragment,n),zn(m.$$.fragment,n),zn(v.$$.fragment,n),zn(g.$$.fragment,n),f=!1},d:function(n){n&&W(t),Vn(h),Vn(m),Vn(v),Vn(g),l()}}}(n);return{c:function(){t=Y("main"),r.c(),o=J(),f&&f.c(),i=Z(),nn(t,"id","signup")},m:function(n,r){K(n,t,r),s[e].m(t,null),K(n,o,r),f&&f.m(n,r),K(n,i,r),a=!0},p:function(n,t){var e=p(t,1)[0];r.p(n,e),c&&f.p(n,e)},i:function(n){a||(Bn(r),Bn(f),a=!0)},o:function(n){zn(r),zn(f),a=!1},d:function(n){n&&W(t),s[e].d(),n&&W(o),f&&f.d(n),n&&W(i)}}}function vc(n,t,e){var r,o,i,a;j(n,Zt,(function(n){return e(6,o=n)}));var c=bn("api"),u=bn("user");j(n,u,(function(n){return e(5,r=n)}));var s=-1!=location.href.indexOf("email="),f=c("loginUser");j(n,f,(function(n){return e(7,i=n)}));var l,d=c("registerUser");function p(n){return h.apply(this,arguments)}function h(){return(h=tt(Xn.mark((function n(t){return Xn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.reset(),n.next=3,u.load();case 3:return n.abrupt("return",u.is("authenticated")?Zt.go("/"):location.reload());case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function m(){Zt.update({lastUrl:""}),p(d)}j(n,d,(function(n){return e(8,a=n)})),gn((function(){l&&Zt.urlToForm(l)}));return n.$$.update=function(){32&n.$$.dirty&&function(n){var t=n.conversations()[0],e=Zt.lastUrl?Zt.lastUrl:t?t.path:"/settings/connection";!n.is("loading")&&n.is("authenticated")&&Zt.go(e)}(r),64&n.$$.dirty&&Zt.update({title:o.path.match(/register/)?pe("Register"):pe("Login")}),128&n.$$.dirty&&i.is("success")&&p(f),256&n.$$.dirty&&a.is("success")&&m()},[u,l,s,f,d,r,o,i,a,c,p,m,function(n){u.formEmail=n,e(0,u)},function(n){return d.perform(n.target)},function(n){xn[n?"unshift":"push"]((function(){e(1,l=n)}))},function(n){u.formEmail=n,e(0,u)},function(n){return f.perform(n.target)}]}var gc=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Za()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,vc,mc,A,{}),r}return u}(Qn);function $c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function yc(n,t,e){var r=n.slice();return r[8]=t[e],r[10]=e,r}function bc(n){var t,e,r=new fr({props:{name:"bell"}});return{c:function(){t=Y("a"),Gn(r.$$.fragment),nn(t,"href","/settings/account"),nn(t,"class","btn")},m:function(n,o){K(n,t,o),Yn(r,t,null),e=!0},i:function(n){e||(Bn(r.$$.fragment,n),e=!0)},o:function(n){zn(r.$$.fragment,n),e=!1},d:function(n){n&&W(t),Vn(r)}}}function wc(n){var t,e,r=new fr({props:{name:"search"}});return{c:function(){t=Y("a"),Gn(r.$$.fragment),nn(t,"href","/search"),nn(t,"class","btn")},m:function(n,o){K(n,t,o),Yn(r,t,null),e=!0},i:function(n){e||(Bn(r.$$.fragment,n),e=!0)},o:function(n){zn(r.$$.fragment,n),e=!1},d:function(n){n&&W(t),Vn(r)}}}function _c(n){var t,e,r,o,i,a,c,u,s,f,l=pe(n[0].name)+"",d=[wc,bc],p=[];function h(n,t){return 8&t&&(a=!!n[3].is("search")),a?0:1}return c=h(n,-1),u=p[c]=d[c](n),{c:function(){t=Y("h1"),e=Y("a"),r=Y("span"),o=V(l),i=J(),u.c(),s=Z(),nn(e,"href","#activeMenu:nav"),nn(e,"tabindex","-1")},m:function(n,a){K(n,t,a),F(t,e),F(e,r),F(r,o),K(n,i,a),p[c].m(n,a),K(n,s,a),f=!0},p:function(n,t){(!f||1&t)&&l!==(l=pe(n[0].name)+"")&&en(o,l);var e=c;(c=h(n,t))!==e&&(In(),zn(p[e],1,1,(function(){p[e]=null})),Un(),(u=p[c])||(u=p[c]=d[c](n)).c(),Bn(u,1),u.m(s.parentNode,s))},i:function(n){f||(Bn(u),f=!0)},o:function(n){zn(u),f=!1},d:function(n){n&&W(t),n&&W(i),p[c].d(n),n&&W(s)}}}function xc(n){var t,e,r,o,i,a,c,u=[Oc,Ec,kc],s=[];function f(n,o){return 1&o&&(t=!!n[0].is("notifications")),t?0:(2&o&&(e=!!n[1].param("q")),e?1:(1&o&&(r=!!n[0].is("search")),r?2:-1))}return~(o=f(n,-1))&&(i=s[o]=u[o](n)),{c:function(){i&&i.c(),a=Z()},m:function(n,t){~o&&s[o].m(n,t),K(n,a,t),c=!0},p:function(n,t){var e=o;(o=f(n,t))===e?~o&&s[o].p(n,t):(i&&(In(),zn(s[e],1,1,(function(){s[e]=null})),Un()),~o?((i=s[o])||(i=s[o]=u[o](n)).c(),Bn(i,1),i.m(a.parentNode,a)):i=null)},i:function(n){c||(Bn(i),c=!0)},o:function(n){zn(i),c=!1},d:function(n){~o&&s[o].d(n),n&&W(a)}}}function kc(n){var t,e=new yr({props:{$$slots:{default:[Cc]},$$scope:{ctx:n}}});return{c:function(){Gn(e.$$.fragment)},m:function(n,r){Yn(e,n,r),t=!0},p:function(n,t){var r={};2048&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Bn(e.$$.fragment,n),t=!0)},o:function(n){zn(e.$$.fragment,n),t=!1},d:function(n){Vn(e,n)}}}function Ec(n){var t,e=new yr({props:{$$slots:{default:[Sc]},$$scope:{ctx:n}}});return{c:function(){Gn(e.$$.fragment)},m:function(n,r){Yn(e,n,r),t=!0},p:function(n,t){var r={};2050&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Bn(e.$$.fragment,n),t=!0)},o:function(n){zn(e.$$.fragment,n),t=!1},d:function(n){Vn(e,n)}}}function Oc(n){var t;return{c:function(){(t=Y("h2")).textContent="".concat(pe("No notifications."))},m:function(n,e){K(n,t,e)},p:O,i:O,o:O,d:function(n){n&&W(t)}}}function Cc(n){var t,e,r,o,i,a=he("Search for messages sent by you or others the last %1 days by writing a message in the input field below.",90)+"",c=he('You can enter a channel name, or use `"conversation:#channel"` to narrow down the search.')+"",u=he('It is also possible to use `"from:some_nick"` to filter out messages from a given user.')+"";return{c:function(){e=J(),o=J(),t=new sn(a,e),r=new sn(c,o),i=new sn(u,null)},m:function(n,a){t.m(n,a),K(n,e,a),r.m(n,a),K(n,o,a),i.m(n,a)},p:O,d:function(n){n&&t.d(),n&&W(e),n&&r.d(),n&&W(o),n&&i.d()}}}function Sc(n){var t,e=pe('No search results for "%1".',n[1].param("q"))+"";return{c:function(){t=V(e)},m:function(n,e){K(n,t,e)},p:function(n,r){2&r&&e!==(e=pe('No search results for "%1".',n[1].param("q"))+"")&&en(t,e)},d:function(n){n&&W(t)}}}function Nc(n){var t,e,r,o,i,a,c=n[8].ts.getHumanDate()+"",u=new fr({props:{name:"calendar-alt"}});return{c:function(){t=Y("div"),e=Y("span"),Gn(u.$$.fragment),r=J(),o=Y("i"),i=V(c),nn(t,"class","message__status-line for-day-changed")},m:function(n,c){K(n,t,c),F(t,e),Yn(u,e,null),F(e,r),F(e,o),F(o,i),a=!0},p:function(n,t){(!a||4&t)&&c!==(c=n[8].ts.getHumanDate()+"")&&en(i,c)},i:function(n){a||(Bn(u.$$.fragment,n),a=!0)},o:function(n){zn(u.$$.fragment,n),a=!1},d:function(n){n&&W(t),Vn(u)}}}function Rc(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,$=n[8].ts.toLocaleString()+"",y=pe("%1 in %2",n[8].from,n[8].conversation_id)+"",b=n[8].markdown+"",w=(!n[10]||n[8].dayChanged)&&Nc(n),_=new fr({props:{name:"pick:"+n[8].fromId,color:n[8].color}});return{c:function(){w&&w.c(),t=J(),e=Y("div"),Gn(_.$$.fragment),r=J(),o=Y("div"),i=Y("div"),a=V($),u=J(),s=Y("a"),f=V(y),d=J(),p=Y("div"),h=J(),nn(o,"class","message__ts has-tooltip"),nn(o,"data-content",c=n[8].ts.format("%H:%M")),nn(s,"href",l=Pc(n[8])),nn(s,"class","message__from"),on(s,"color",n[8].color),nn(p,"class","message__text"),nn(e,"class",m=n[8].className)},m:function(n,c,l){w&&w.m(n,c),K(n,t,c),K(n,e,c),Yn(_,e,null),F(e,r),F(e,o),F(o,i),F(i,a),F(e,u),F(e,s),F(s,f),F(e,d),F(e,p),p.innerHTML=b,F(e,h),v=!0,l&&g(),g=Q(e,"click",Tc)},p:function(n,r){!n[10]||n[8].dayChanged?w?(w.p(n,r),Bn(w,1)):((w=Nc(n)).c(),Bn(w,1),w.m(t.parentNode,t)):w&&(In(),zn(w,1,1,(function(){w=null})),Un());var i={};4&r&&(i.name="pick:"+n[8].fromId),4&r&&(i.color=n[8].color),_.$set(i),(!v||4&r)&&$!==($=n[8].ts.toLocaleString()+"")&&en(a,$),(!v||4&r&&c!==(c=n[8].ts.format("%H:%M")))&&nn(o,"data-content",c),(!v||4&r)&&y!==(y=pe("%1 in %2",n[8].from,n[8].conversation_id)+"")&&en(f,y),(!v||4&r&&l!==(l=Pc(n[8])))&&nn(s,"href",l),(!v||4&r)&&on(s,"color",n[8].color),(!v||4&r)&&b!==(b=n[8].markdown+"")&&(p.innerHTML=b),(!v||4&r&&m!==(m=n[8].className))&&nn(e,"class",m)},i:function(n){v||(Bn(w),Bn(_.$$.fragment,n),v=!0)},o:function(n){zn(w),zn(_.$$.fragment,n),v=!1},d:function(n){w&&w.d(n),n&&W(t),n&&W(e),Vn(_),g()}}}function Dc(n){var t,e,r,o,i,a=new fr({props:{name:"spinner",animation:"spin"}});return{c:function(){t=Y("div"),e=Y("span"),Gn(a.$$.fragment),r=J(),(o=Y("i")).textContent="".concat(pe("Loading...")),nn(t,"class","message__status-line for-loading")},m:function(n,c){K(n,t,c),F(t,e),Yn(a,e,null),F(e,r),F(e,o),i=!0},p:O,i:function(n){i||(Bn(a.$$.fragment,n),i=!0)},o:function(n){zn(a.$$.fragment,n),i=!1},d:function(n){n&&W(t),Vn(a)}}}function Ac(n){for(var t,e,r,o,i=0==n[2].length&&!n[0].is("loading"),a=n[3].is("loading"),c=i&&xc(n),u=n[2],s=[],f=0;f<u.length;f+=1)s[f]=Rc(yc(n,u,f));var l=function(n){return zn(s[n],1,1,(function(){s[n]=null}))},d=a&&Dc();return{c:function(){c&&c.c(),t=J();for(var n=0;n<s.length;n+=1)s[n].c();e=J(),d&&d.c(),r=Z()},m:function(n,i){c&&c.m(n,i),K(n,t,i);for(var a=0;a<s.length;a+=1)s[a].m(n,i);K(n,e,i),d&&d.m(n,i),K(n,r,i),o=!0},p:function(n,o){if(5&o&&(i=0==n[2].length&&!n[0].is("loading")),i?c?(c.p(n,o),Bn(c,1)):((c=xc(n)).c(),Bn(c,1),c.m(t.parentNode,t)):c&&(In(),zn(c,1,1,(function(){c=null})),Un()),4&o){var f;for(u=n[2],f=0;f<u.length;f+=1){var p=yc(n,u,f);s[f]?(s[f].p(p,o),Bn(s[f],1)):(s[f]=Rc(p),s[f].c(),Bn(s[f],1),s[f].m(e.parentNode,e))}for(In(),f=u.length;f<s.length;f+=1)l(f);Un()}8&o&&(a=n[3].is("loading")),a?d?(d.p(n,o),Bn(d,1)):((d=Dc()).c(),Bn(d,1),d.m(r.parentNode,r)):d&&(In(),zn(d,1,1,(function(){d=null})),Un())},i:function(n){if(!o){Bn(c);for(var t=0;t<u.length;t+=1)Bn(s[t]);Bn(d),o=!0}},o:function(n){zn(c),s=s.filter(Boolean);for(var t=0;t<s.length;t+=1)zn(s[t]);zn(d),o=!1},d:function(n){c&&c.d(n),n&&W(t),G(s,n),n&&W(e),d&&d.d(n),n&&W(r)}}}function Mc(n){var t,e=new Pr({props:{conversation:n[0]}});return{c:function(){Gn(e.$$.fragment)},m:function(n,r){Yn(e,n,r),t=!0},p:function(n,t){var r={};1&t&&(r.conversation=n[0]),e.$set(r)},i:function(n){t||(Bn(e.$$.fragment,n),t=!0)},o:function(n){zn(e.$$.fragment,n),t=!1},d:function(n){Vn(e,n)}}}function jc(n){var t,e,r,o,i=n[0].is("search"),a=new xr({props:{$$slots:{default:[_c]},$$scope:{ctx:n}}}),c=new Qr({props:{class:n[4].join(" "),$$slots:{default:[Ac]},$$scope:{ctx:n}}});c.$on("rendered",Lc);var u=i&&Mc(n);return{c:function(){Gn(a.$$.fragment),t=J(),Gn(c.$$.fragment),e=J(),u&&u.c(),r=Z()},m:function(n,i){Yn(a,n,i),K(n,t,i),Yn(c,n,i),K(n,e,i),u&&u.m(n,i),K(n,r,i),o=!0},p:function(n,t){var e=p(t,1)[0],o={};2057&e&&(o.$$scope={dirty:e,ctx:n}),a.$set(o);var s={};16&e&&(s.class=n[4].join(" ")),2063&e&&(s.$$scope={dirty:e,ctx:n}),c.$set(s),1&e&&(i=n[0].is("search")),i?u?(u.p(n,e),Bn(u,1)):((u=Mc(n)).c(),Bn(u,1),u.m(r.parentNode,r)):u&&(In(),zn(u,1,1,(function(){u=null})),Un())},i:function(n){o||(Bn(a.$$.fragment,n),Bn(c.$$.fragment,n),Bn(u),o=!0)},o:function(n){zn(a.$$.fragment,n),zn(c.$$.fragment,n),zn(u),o=!1},d:function(n){Vn(a,n),n&&W(t),Vn(c,n),n&&W(e),u&&u.d(n),n&&W(r)}}}function Pc(n){var t=["","chat",n.connection_id,n.conversation_id].map(encodeURIComponent).join("/");return Zt.urlFor(t+"#"+n.ts.toISOString())}function Tc(n){n.target.closest("a")||(n.preventDefault(),Zt.go(n.target.closest(".message").querySelector("a").href))}var Lc=function(n){return n.detail.scrollTo(-1)};function Ic(n,t,e){var r,o,i=O,a=function(){return i(),i=M(f,(function(n){return e(3,o=n)})),f};j(n,Zt,(function(n){return e(1,r=n)})),n.$$.on_destroy.push((function(){return i()}));var c,u,s=bn("user"),f=-1==r.path.indexOf("search")?s.notifications:s.search;function l(n){var t=n.message;return f.update({userInput:t}),Zt.go("/search?q="+encodeURIComponent(t),{replace:!0}),t?f.load({match:t}):f.update({messages:[]})}return a(),gn((function(){return s.search.on("send",l)})),$n((function(){return f.markAsRead()})),n.$$.update=function(){8&n.$$.dirty&&e(2,c=so({conversation:o})),12&n.$$.dirty&&e(4,u=["main",c.length&&"has-results",o.is("search")&&"is-above-chat-input"].filter((function(n){return n}))),2&n.$$.dirty&&function(n){var t=-1==n.path.indexOf("search")?s.notifications:s.search;t!=f&&a(e(0,f=t.update({conversation_id:!0}))),f.is("search")?l({message:n.param("q")}):f.load()}(r)},[f,r,c,o,u]}var Uc=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if($c()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,Ic,jc,A,{}),r}return u}(Qn);function Bc(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function zc(n){var t;return{c:function(){(t=Y("h1")).textContent="".concat(pe("Account"))},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Hc(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Email")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function qc(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Notification keywords")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Fc(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Enable notifications")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Kc(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Ignore join/part messages")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Wc(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Expand URL to media")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Gc(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Theme")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Yc(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Color scheme")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Vc(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Enable compact message display")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Jc(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Password")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Zc(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Repeat password")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Qc(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Save settings"))},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Xc(n){var t,e,r,o,i,a,c,u,s,f,l,d,h,m,v,g,$,y,b,w,_,x,k,E,O,C=new xr({props:{$$slots:{default:[zc]},$$scope:{ctx:n}}}),S=new Ni({props:{type:"email",name:"email",value:n[8].email,readonly:!0,$$slots:{label:[Hc]},$$scope:{ctx:n}}}),N=new Ni({props:{name:"highlight_keywords",placeholder:pe("whatever, keywords"),value:n[11],$$slots:{label:[qc]},$$scope:{ctx:n}}});function R(t){n[15].call(null,t)}var D={name:"notifications",$$slots:{label:[Fc]},$$scope:{ctx:n}};void 0!==n[5]&&(D.checked=n[5]);var A=new si({props:D});function M(t){n[16].call(null,t)}xn.push((function(){return Wn(A,"checked",R)}));var j={name:"statuses",$$slots:{label:[Kc]},$$scope:{ctx:n}};void 0!==n[6]&&(j.checked=n[6]);var P=new si({props:j});function T(t){n[17].call(null,t)}xn.push((function(){return Wn(P,"checked",M)}));var L={name:"expand_url",$$slots:{label:[Wc]},$$scope:{ctx:n}};void 0!==n[2]&&(L.checked=n[2]);var I=new si({props:L});function U(t){n[18].call(null,t)}xn.push((function(){return Wn(I,"checked",T)}));var B={name:"theme",options:nr.themeOptions,$$slots:{label:[Gc]},$$scope:{ctx:n}};void 0!==n[4]&&(B.value=n[4]);var z=new va({props:B});function H(t){n[19].call(null,t)}xn.push((function(){return Wn(z,"value",U)}));var q={name:"color_scheme",readonly:n[7],options:nr.colorSchemeOptions,$$slots:{label:[Yc]},$$scope:{ctx:n}};void 0!==n[3]&&(q.value=n[3]);var G=new va({props:q});function V(t){n[20].call(null,t)}xn.push((function(){return Wn(G,"value",H)}));var Z={name:"compact",$$slots:{label:[Vc]},$$scope:{ctx:n}};void 0!==n[1]&&(Z.checked=n[1]);var tn=new si({props:Z});xn.push((function(){return Wn(tn,"checked",V)}));var en=new Ni({props:{type:"password",name:"password",autocomplete:"new-password",$$slots:{label:[Jc]},$$scope:{ctx:n}}}),rn=new Ni({props:{type:"password",name:"password_again",autocomplete:"new-password",$$slots:{label:[Zc]},$$scope:{ctx:n}}}),on=new hr({props:{icon:"save",op:n[10],$$slots:{default:[Qc]},$$scope:{ctx:n}}}),an=new mi({props:{op:n[10]}});return{c:function(){Gn(C.$$.fragment),t=J(),e=Y("main"),r=Y("form"),Gn(S.$$.fragment),o=J(),Gn(N.$$.fragment),i=J(),Gn(A.$$.fragment),c=J(),Gn(P.$$.fragment),s=J(),Gn(I.$$.fragment),l=J(),Gn(z.$$.fragment),h=J(),Gn(G.$$.fragment),v=J(),Gn(tn.$$.fragment),$=J(),Gn(en.$$.fragment),y=J(),Gn(rn.$$.fragment),b=J(),(w=Y("p")).textContent="".concat(pe("Leave the password fields empty to keep the current password.")),_=J(),x=Y("div"),Gn(on.$$.fragment),k=J(),Gn(an.$$.fragment),nn(x,"class","form-actions"),nn(r,"method","post"),nn(e,"class","main")},m:function(a,u,f){Yn(C,a,u),K(a,t,u),K(a,e,u),F(e,r),Yn(S,r,null),F(r,o),Yn(N,r,null),F(r,i),Yn(A,r,null),F(r,c),Yn(P,r,null),F(r,s),Yn(I,r,null),F(r,l),Yn(z,r,null),F(r,h),Yn(G,r,null),F(r,v),Yn(tn,r,null),F(r,$),Yn(en,r,null),F(r,y),Yn(rn,r,null),F(r,b),F(r,w),F(r,_),F(r,x),Yn(on,x,null),F(r,k),Yn(an,r,null),n[21](r),E=!0,f&&O(),O=Q(r,"submit",X(n[12]))},p:function(n,t){var e=p(t,1)[0],r={};4194304&e&&(r.$$scope={dirty:e,ctx:n}),C.$set(r);var o={};256&e&&(o.value=n[8].email),4194304&e&&(o.$$scope={dirty:e,ctx:n}),S.$set(o);var i={};4194304&e&&(i.$$scope={dirty:e,ctx:n}),N.$set(i);var c={};4194304&e&&(c.$$scope={dirty:e,ctx:n}),!a&&32&e&&(a=!0,c.checked=n[5],Nn((function(){return a=!1}))),A.$set(c);var s={};4194304&e&&(s.$$scope={dirty:e,ctx:n}),!u&&64&e&&(u=!0,s.checked=n[6],Nn((function(){return u=!1}))),P.$set(s);var l={};4194304&e&&(l.$$scope={dirty:e,ctx:n}),!f&&4&e&&(f=!0,l.checked=n[2],Nn((function(){return f=!1}))),I.$set(l);var h={};4194304&e&&(h.$$scope={dirty:e,ctx:n}),!d&&16&e&&(d=!0,h.value=n[4],Nn((function(){return d=!1}))),z.$set(h);var v={};128&e&&(v.readonly=n[7]),4194304&e&&(v.$$scope={dirty:e,ctx:n}),!m&&8&e&&(m=!0,v.value=n[3],Nn((function(){return m=!1}))),G.$set(v);var $={};4194304&e&&($.$$scope={dirty:e,ctx:n}),!g&&2&e&&(g=!0,$.checked=n[1],Nn((function(){return g=!1}))),tn.$set($);var y={};4194304&e&&(y.$$scope={dirty:e,ctx:n}),en.$set(y);var b={};4194304&e&&(b.$$scope={dirty:e,ctx:n}),rn.$set(b);var w={};4194304&e&&(w.$$scope={dirty:e,ctx:n}),on.$set(w)},i:function(n){E||(Bn(C.$$.fragment,n),Bn(S.$$.fragment,n),Bn(N.$$.fragment,n),Bn(A.$$.fragment,n),Bn(P.$$.fragment,n),Bn(I.$$.fragment,n),Bn(z.$$.fragment,n),Bn(G.$$.fragment,n),Bn(tn.$$.fragment,n),Bn(en.$$.fragment,n),Bn(rn.$$.fragment,n),Bn(on.$$.fragment,n),Bn(an.$$.fragment,n),E=!0)},o:function(n){zn(C.$$.fragment,n),zn(S.$$.fragment,n),zn(N.$$.fragment,n),zn(A.$$.fragment,n),zn(P.$$.fragment,n),zn(I.$$.fragment,n),zn(z.$$.fragment,n),zn(G.$$.fragment,n),zn(tn.$$.fragment,n),zn(en.$$.fragment,n),zn(rn.$$.fragment,n),zn(on.$$.fragment,n),zn(an.$$.fragment,n),E=!1},d:function(r){Vn(C,r),r&&W(t),r&&W(e),Vn(S),Vn(N),Vn(A),Vn(P),Vn(I),Vn(z),Vn(G),Vn(tn),Vn(en),Vn(rn),Vn(on),Vn(an),n[21](null),O()}}}function nu(n,t){(t.wantNotifications||t.desktopAccess)&&n.wantNotifications&&n.show(pe("You have enabled notifications."))}function tu(n,t,e){var r,o;j(n,nr,(function(n){return e(13,r=n)}));var i=bn("api"),a=bn("user");j(n,a,(function(n){return e(8,o=n)}));var c,u,s=i("updateUser"),f=nr.compactDisplay,l=nr.expandUrlToMedia,d=a.highlightKeywords.join(", "),p=nr.colorScheme,h=nr.theme,m=ye.wantNotifications,v=a.ignoreStatuses;return Zt.update({title:pe("Account")}),s.on("start",(function(n){n.body.password||delete n.body.password,n.body.highlight_keywords=n.body.highlight_keywords.split(/[.,\s]+/).map((function(n){return n.trim()})),a.update({highlightKeywords:n.body.highlight_keywords})})),$n(ye.on("update",nu)),n.$$.update=function(){8208&n.$$.dirty&&e(7,u=!r.hasColorSchemes(h))},[c,f,l,p,h,m,v,u,o,a,s,d,function(n){var t=n.target,e=[t.password.value,t.password_again.value];if(m&&ye.requestDesktopAccess(),e.join("").length&&e[0]!=e[1])return s.error("Passwords does not match.");ye.update({wantNotifications:m}),nr.update({expandUrlToMedia:l,compactDisplay:f}),a.update({ignoreStatuses:v}),nr.activateTheme(h,u?"":p),s.perform(n.target)},r,i,function(n){e(5,m=n)},function(n){e(6,v=n)},function(n){e(2,l=n)},function(n){e(4,h=n)},function(n){e(3,p=n)},function(n){e(1,f=n)},function(n){xn[n?"unshift":"push"]((function(){e(0,c=n)}))}]}var eu=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Bc()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,tu,Xc,A,{}),r}return u}(Qn);function ru(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function ou(n){var t;return{c:function(){(t=Y("h1")).textContent="".concat(pe("Global settings"))},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function iu(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Organization name")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function au(n){var t;return{c:function(){(t=Y("p")).textContent="".concat(pe("Can be changed if you want to add a touch of your organization.")),nn(t,"class","help"),nn(t,"slot","help")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function cu(n){var t;return{c:function(){t=J()},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function uu(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Organization URL")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function su(n){var t;return{c:function(){(t=Y("p")).textContent="".concat(pe('Used together with "Organization name" to add a link to your organization on the login screen.')),nn(t,"class","help"),nn(t,"slot","help")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function fu(n){var t;return{c:function(){t=J()},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function lu(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Admin email")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function du(n){var t;return{c:function(){(t=Y("p")).textContent="".concat(pe("This email can be used by users to get in touch with the Convos admin.")),nn(t,"class","help"),nn(t,"slot","help")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function pu(n){var t;return{c:function(){t=J()},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function hu(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Default connection URL")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function mu(n){var t;return{c:function(){(t=Y("p")).textContent="".concat(pe("This is the default connection new users will connect to.")," \n        ").concat(pe('The path part is the default channel to join. "%%23convos" means "#convos".')),nn(t,"class","help"),nn(t,"slot","help")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function vu(n){var t;return{c:function(){t=J()},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function gu(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Force default connection")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function $u(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Registration is open to public")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function yu(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Video service")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function bu(n){var t;return{c:function(){(t=Y("p")).textContent="".concat(pe("This should point to a %1 instance.","https://meet.jit.si/")),nn(t,"class","help"),nn(t,"slot","help")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function wu(n){var t;return{c:function(){t=J()},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function _u(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Save settings"))},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function xu(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,$,y,b,w,_,x,k,E,O,C=n[1].blocks_pct+"",S=pe("Disk usage")+"",N=n[1].blocks_used+"",R=n[1].blocks_total+"",D=n[1].inodes_pct+"",A=pe("Inode usage")+"",M=n[1].inodes_used+"",j=n[1].inodes_total+"";return{c:function(){t=Y("div"),(e=Y("h2")).textContent="".concat(pe("Disk usage")),r=J(),o=Y("div"),i=Y("div"),a=V(C),c=V("%"),u=J(),s=Y("p"),f=V(S),l=V(": "),d=V(N),p=V(" / "),h=V(R),m=J(),v=Y("div"),g=Y("div"),$=V(D),y=V("%"),b=J(),w=Y("p"),_=V(A),x=V(": "),k=V(M),E=V(" / "),O=V(j),nn(i,"class","progress__bar"),on(i,"width",n[1].blocks_pct+"%"),nn(o,"class","progress"),nn(s,"class","help"),nn(g,"class","progress__bar"),on(g,"width",n[1].inodes_pct+"%"),nn(v,"class","progress"),nn(w,"class","help"),nn(t,"id","disk-usage")},m:function(n,C){K(n,t,C),F(t,e),F(t,r),F(t,o),F(o,i),F(i,a),F(i,c),F(t,u),F(t,s),F(s,f),F(s,l),F(s,d),F(s,p),F(s,h),F(t,m),F(t,v),F(v,g),F(g,$),F(g,y),F(t,b),F(t,w),F(w,_),F(w,x),F(w,k),F(w,E),F(w,O)},p:function(n,t){2&t&&C!==(C=n[1].blocks_pct+"")&&en(a,C),2&t&&on(i,"width",n[1].blocks_pct+"%"),2&t&&N!==(N=n[1].blocks_used+"")&&en(d,N),2&t&&R!==(R=n[1].blocks_total+"")&&en(h,R),2&t&&D!==(D=n[1].inodes_pct+"")&&en($,D),2&t&&on(g,"width",n[1].inodes_pct+"%"),2&t&&M!==(M=n[1].inodes_used+"")&&en(k,M),2&t&&j!==(j=n[1].inodes_total+"")&&en(O,j)},d:function(n){n&&W(t)}}}function ku(n){var t,e,r,o,i,a,c,u,s,f,l,d,h,m,v,g,$,y,b,w,_,x,k,E,O,C,S,N,R=he("These settings control what users experience when they visit [%1](%1).",tr("base_url"))+"",D=new xr({props:{$$slots:{default:[ou]},$$scope:{ctx:n}}});function A(t){n[7].call(null,t)}var M={name:"organization_name",placeholder:pe("Nordaaker"),$$slots:{default:[cu],help:[au],label:[iu]},$$scope:{ctx:n}};void 0!==n[0].organization_name&&(M.value=n[0].organization_name);var j=new Ni({props:M});function P(t){n[8].call(null,t)}xn.push((function(){return Wn(j,"value",A)}));var T={name:"organization_url",placeholder:pe("https://convos.chat"),$$slots:{default:[fu],help:[su],label:[uu]},$$scope:{ctx:n}};void 0!==n[0].organization_url&&(T.value=n[0].organization_url);var L=new Ni({props:T});function I(t){n[9].call(null,t)}xn.push((function(){return Wn(L,"value",P)}));var U={name:"contact",placeholder:pe("Ex: jhthorsen@cpan.org"),$$slots:{default:[pu],help:[du],label:[lu]},$$scope:{ctx:n}};void 0!==n[0].contact&&(U.value=n[0].contact);var B=new Ni({props:U});function z(t){n[10].call(null,t)}xn.push((function(){return Wn(B,"value",I)}));var H={name:"default_connection",placeholder:pe("irc://chat.freenode.net:6697/%%23convos"),$$slots:{default:[vu],help:[mu],label:[hu]},$$scope:{ctx:n}};void 0!==n[0].default_connection&&(H.value=n[0].default_connection);var q=new Ni({props:H});xn.push((function(){return Wn(q,"value",z)}));var G=new si({props:{name:"forced_connection",checked:n[0].forced_connection,$$slots:{label:[gu]},$$scope:{ctx:n}}}),V=new si({props:{name:"open_to_public",checked:n[0].open_to_public,$$slots:{label:[$u]},$$scope:{ctx:n}}});function Z(t){n[11].call(null,t)}var tn={name:"video_service",placeholder:pe("Ex: https://meet.jit.si/"),$$slots:{default:[wu],help:[bu],label:[yu]},$$scope:{ctx:n}};void 0!==n[0].video_service&&(tn.value=n[0].video_service);var en=new Ni({props:tn});xn.push((function(){return Wn(en,"value",Z)}));var rn=new hr({props:{icon:"save",op:n[2],$$slots:{default:[_u]},$$scope:{ctx:n}}}),on=new mi({props:{op:n[2]}}),an=n[1]&&xu(n);return{c:function(){Gn(D.$$.fragment),t=J(),e=Y("main"),r=Y("form"),(o=Y("h2")).textContent="".concat(pe("Convos settings")),i=J(),a=Y("p"),c=J(),Gn(j.$$.fragment),s=J(),Gn(L.$$.fragment),l=J(),Gn(B.$$.fragment),h=J(),Gn(q.$$.fragment),v=J(),Gn(G.$$.fragment),g=J(),($=Y("p")).textContent="".concat(pe("Tick this box if you want to prevent users from creating custom connections.")),y=J(),Gn(V.$$.fragment),b=J(),(w=Y("p")).textContent="".concat(pe("Tick this box if you want users to be able to register without an invite URL.")),_=J(),Gn(en.$$.fragment),k=J(),E=Y("div"),Gn(rn.$$.fragment),O=J(),Gn(on.$$.fragment),C=J(),an&&an.c(),nn($,"class","help"),nn(w,"class","help"),nn(E,"class","form-actions"),nn(r,"id","convos-settings"),nn(r,"method","post"),nn(e,"class","main")},m:function(u,f,d){Yn(D,u,f),K(u,t,f),K(u,e,f),F(e,r),F(r,o),F(r,i),F(r,a),a.innerHTML=R,F(r,c),Yn(j,r,null),F(r,s),Yn(L,r,null),F(r,l),Yn(B,r,null),F(r,h),Yn(q,r,null),F(r,v),Yn(G,r,null),F(r,g),F(r,$),F(r,y),Yn(V,r,null),F(r,b),F(r,w),F(r,_),Yn(en,r,null),F(r,k),F(r,E),Yn(rn,E,null),F(r,O),Yn(on,r,null),F(e,C),an&&an.m(e,null),S=!0,d&&N(),N=Q(r,"submit",X(n[3]))},p:function(n,t){var r=p(t,1)[0],o={};4096&r&&(o.$$scope={dirty:r,ctx:n}),D.$set(o);var i={};4096&r&&(i.$$scope={dirty:r,ctx:n}),!u&&1&r&&(u=!0,i.value=n[0].organization_name,Nn((function(){return u=!1}))),j.$set(i);var a={};4096&r&&(a.$$scope={dirty:r,ctx:n}),!f&&1&r&&(f=!0,a.value=n[0].organization_url,Nn((function(){return f=!1}))),L.$set(a);var c={};4096&r&&(c.$$scope={dirty:r,ctx:n}),!d&&1&r&&(d=!0,c.value=n[0].contact,Nn((function(){return d=!1}))),B.$set(c);var s={};4096&r&&(s.$$scope={dirty:r,ctx:n}),!m&&1&r&&(m=!0,s.value=n[0].default_connection,Nn((function(){return m=!1}))),q.$set(s);var l={};1&r&&(l.checked=n[0].forced_connection),4096&r&&(l.$$scope={dirty:r,ctx:n}),G.$set(l);var h={};1&r&&(h.checked=n[0].open_to_public),4096&r&&(h.$$scope={dirty:r,ctx:n}),V.$set(h);var v={};4096&r&&(v.$$scope={dirty:r,ctx:n}),!x&&1&r&&(x=!0,v.value=n[0].video_service,Nn((function(){return x=!1}))),en.$set(v);var g={};4096&r&&(g.$$scope={dirty:r,ctx:n}),rn.$set(g),n[1]?an?an.p(n,r):((an=xu(n)).c(),an.m(e,null)):an&&(an.d(1),an=null)},i:function(n){S||(Bn(D.$$.fragment,n),Bn(j.$$.fragment,n),Bn(L.$$.fragment,n),Bn(B.$$.fragment,n),Bn(q.$$.fragment,n),Bn(G.$$.fragment,n),Bn(V.$$.fragment,n),Bn(en.$$.fragment,n),Bn(rn.$$.fragment,n),Bn(on.$$.fragment,n),S=!0)},o:function(n){zn(D.$$.fragment,n),zn(j.$$.fragment,n),zn(L.$$.fragment,n),zn(B.$$.fragment,n),zn(q.$$.fragment,n),zn(G.$$.fragment,n),zn(V.$$.fragment,n),zn(en.$$.fragment,n),zn(rn.$$.fragment,n),zn(on.$$.fragment,n),S=!1},d:function(n){Vn(D,n),n&&W(t),n&&W(e),Vn(j),Vn(L),Vn(B),Vn(q),Vn(G),Vn(V),Vn(en),Vn(rn),Vn(on),an&&an.d(),N()}}}function Eu(n,t,e){var r,o=bn("api"),i=bn("user"),a=o("getSettings"),c=o("updateSettings"),u={};return c.on("start",(function(n){n.body.contact&&(n.body.contact="mailto:"+n.body.contact),n.body.forced_connection=!!n.body.forced_connection,n.body.open_to_public=!!n.body.open_to_public,tr("contact",n.body.contact),tr("open_to_public",n.body.open_to_public),tr("organization_name",n.body.organization_name),tr("organization_url",n.body.organization_url),i.update({default_connection:n.body.default_connection,forced_connection:n.body.forced_connection,video_service:n.body.video_service})})),Zt.update({title:pe("Global settings")}),gn(tt(Xn.mark((function n(){var t;return Xn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.perform();case 2:(t=a.res.body).contact=t.contact.replace(/mailto:/,""),e(0,u=t);case 5:case"end":return n.stop()}}),n)})))),n.$$.update=function(){1&n.$$.dirty&&e(1,r=function(n){if(!n)return null;var t=n.block_size||1024;return{blocks_pct:Math.ceil(n.blocks_used/n.blocks_total*100),blocks_total:dt(t*n.blocks_total,"B"),blocks_used:dt(t*n.blocks_used,"B"),inodes_pct:Math.ceil(n.inodes_used/n.inodes_total*100),inodes_total:dt(n.inodes_total),inodes_used:dt(n.inodes_used)}}(u.disk_usage))},[u,r,c,function(n){c.perform(n.target)},o,i,a,function(n){u.organization_name=n,e(0,u)},function(n){u.organization_url=n,e(0,u)},function(n){u.contact=n,e(0,u)},function(n){u.default_connection=n,e(0,u)},function(n){u.video_service=n,e(0,u)}]}var Ou=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(ru()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,Eu,ku,A,{}),r}return u}(Qn);function Cu(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Su(n,t,e){var r=n.slice();return r[11]=t[e],r}function Nu(n){var t,e=new fr({props:{name:"list"}}),r=new fr({props:{name:"times"}});return{c:function(){Gn(e.$$.fragment),Gn(r.$$.fragment)},m:function(n,o){Yn(e,n,o),Yn(r,n,o),t=!0},p:O,i:function(n){t||(Bn(e.$$.fragment,n),Bn(r.$$.fragment,n),t=!0)},o:function(n){zn(e.$$.fragment,n),zn(r.$$.fragment,n),t=!1},d:function(n){Vn(e,n),Vn(r,n)}}}function Ru(n){var t,e,r,o,i=pe(n[2]?"Account":"Users")+"",a=new Ur({props:{href:"/settings/users",class:"btn can-toggle "+(n[2]?"is-toggled":""),"data-tooltip":pe("See all users"),$$slots:{default:[Nu]},$$scope:{ctx:n}}});return{c:function(){t=Y("h1"),e=V(i),r=J(),Gn(a.$$.fragment)},m:function(n,i){K(n,t,i),F(t,e),K(n,r,i),Yn(a,n,i),o=!0},p:function(n,t){(!o||4&t)&&i!==(i=pe(n[2]?"Account":"Users")+"")&&en(e,i);var r={};4&t&&(r.class="btn can-toggle "+(n[2]?"is-toggled":"")),524288&t&&(r.$$scope={dirty:t,ctx:n}),a.$set(r)},i:function(n){o||(Bn(a.$$.fragment,n),o=!0)},o:function(n){zn(a.$$.fragment,n),o=!1},d:function(n){n&&W(t),n&&W(r),Vn(a,n)}}}function Du(n){for(var t,e,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,$,y,b,w,_,x,k=pe("Users")+"",E=n[1].length+"",O=new Ni({props:{type:"email",name:"email",placeholder:pe("user@example.com"),$$slots:{default:[Pu],help:[ju],label:[Mu]},$$scope:{ctx:n}}}),C=n[3].url&&Tu(n),S=new hr({props:{icon:"save",op:n[6],$$slots:{default:[Lu]},$$scope:{ctx:n}}}),N=new mi({props:{op:n[6]}}),R=new mi({props:{op:n[5],progress:!0}}),D=n[1],A=[],M=0;M<D.length;M+=1)A[M]=Iu(Su(n,D,M));return{c:function(){t=Y("form"),(e=Y("h2")).textContent="".concat(pe("Invite or recover password")),r=J(),Gn(O.$$.fragment),o=J(),C&&C.c(),i=J(),a=Y("div"),Gn(S.$$.fragment),c=J(),Gn(N.$$.fragment),u=J(),s=Y("h2"),f=V(k),l=J(),d=Y("small"),p=V("("),h=V(E),m=V(")"),v=J(),Gn(R.$$.fragment),g=J(),$=Y("table"),(y=Y("thead")).innerHTML="<tr><th>Email</th> \n          <th>Roles</th> \n          <th>Registered</th></tr>",b=J(),w=Y("tbody");for(var n=0;n<A.length;n+=1)A[n].c();nn(a,"class","form-actions"),nn(t,"id","invite"),nn(t,"method","post")},m:function(k,E,D){K(k,t,E),F(t,e),F(t,r),Yn(O,t,null),F(t,o),C&&C.m(t,null),F(t,i),F(t,a),Yn(S,a,null),F(t,c),Yn(N,t,null),K(k,u,E),K(k,s,E),F(s,f),F(s,l),F(s,d),F(d,p),F(d,h),F(d,m),K(k,v,E),Yn(R,k,E),K(k,g,E),K(k,$,E),F($,y),F($,b),F($,w);for(var M=0;M<A.length;M+=1)A[M].m(w,null);_=!0,D&&x(),x=Q(t,"submit",X(n[9]))},p:function(n,e){var r={};524288&e&&(r.$$scope={dirty:e,ctx:n}),O.$set(r),n[3].url?C?C.p(n,e):((C=Tu(n)).c(),C.m(t,i)):C&&(C.d(1),C=null);var o={};if(524288&e&&(o.$$scope={dirty:e,ctx:n}),S.$set(o),(!_||2&e)&&E!==(E=n[1].length+"")&&en(h,E),2&e){var a;for(D=n[1],a=0;a<D.length;a+=1){var c=Su(n,D,a);A[a]?A[a].p(c,e):(A[a]=Iu(c),A[a].c(),A[a].m(w,null))}for(;a<A.length;a+=1)A[a].d(1);A.length=D.length}},i:function(n){_||(Bn(O.$$.fragment,n),Bn(S.$$.fragment,n),Bn(N.$$.fragment,n),Bn(R.$$.fragment,n),_=!0)},o:function(n){zn(O.$$.fragment,n),zn(S.$$.fragment,n),zn(N.$$.fragment,n),zn(R.$$.fragment,n),_=!1},d:function(n){n&&W(t),Vn(O),C&&C.d(),Vn(S),Vn(N),n&&W(u),n&&W(s),n&&W(v),Vn(R,n),n&&W(g),n&&W($),G(A,n),x()}}}function Au(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,h,m,v,g,$,y,b,w=pe("This will permanently remove user settings, chat logs, uploaded files and other user related data.")+"",_=he("Please confirm by entering **%1** before hitting **%2**.",n[2].email,pe("Delete user"))+"",x=new Ni({props:{name:"email",value:n[2].email,readonly:!0,$$slots:{label:[Uu]},$$scope:{ctx:n}}}),k=new Ni({props:{name:"roles",value:n[2].roles.join(", "),placeholder:pe("admin, bot, ..."),$$slots:{default:[Hu],help:[zu],label:[Bu]},$$scope:{ctx:n}}}),E=new hr({props:{icon:"save",op:n[7],$$slots:{default:[qu]},$$scope:{ctx:n}}}),O=new mi({props:{op:n[7]}});function C(t){n[16].call(null,t)}var S={name:"email",$$slots:{label:[Fu]},$$scope:{ctx:n}};void 0!==n[0]&&(S.value=n[0]);var N=new Ni({props:S});xn.push((function(){return Wn(N,"value",C)}));var D=new hr({props:{icon:"trash",op:n[4],disabled:n[0]!=n[2].email,$$slots:{default:[Ku]},$$scope:{ctx:n}}}),A=new mi({props:{op:n[4]}});return{c:function(){t=Y("form"),Gn(x.$$.fragment),e=J(),Gn(k.$$.fragment),r=J(),o=Y("div"),Gn(E.$$.fragment),i=J(),Gn(O.$$.fragment),a=J(),(c=Y("h2")).textContent="Delete account",u=J(),s=Y("form"),f=Y("p"),l=V(w),d=J(),h=J(),Gn(N.$$.fragment),v=J(),g=Y("div"),Gn(D.$$.fragment),$=J(),Gn(A.$$.fragment),nn(o,"class","form-actions"),nn(t,"id","edit"),nn(t,"method","post"),p=new sn(_,null),nn(g,"class","form-actions"),nn(s,"id","delete"),nn(s,"method","post")},m:function(m,w,_){K(m,t,w),Yn(x,t,null),F(t,e),Yn(k,t,null),F(t,r),F(t,o),Yn(E,o,null),F(t,i),Yn(O,t,null),K(m,a,w),K(m,c,w),K(m,u,w),K(m,s,w),F(s,f),F(f,l),F(f,d),p.m(f),F(s,h),Yn(N,s,null),F(s,v),F(s,g),Yn(D,g,null),F(s,$),Yn(A,s,null),y=!0,_&&R(b),b=[Q(t,"submit",X(n[10])),Q(s,"submit",X(n[8]))]},p:function(n,t){var e={};4&t&&(e.value=n[2].email),524288&t&&(e.$$scope={dirty:t,ctx:n}),x.$set(e);var r={};4&t&&(r.value=n[2].roles.join(", ")),524288&t&&(r.$$scope={dirty:t,ctx:n}),k.$set(r);var o={};524288&t&&(o.$$scope={dirty:t,ctx:n}),E.$set(o),(!y||4&t)&&_!==(_=he("Please confirm by entering **%1** before hitting **%2**.",n[2].email,pe("Delete user"))+"")&&p.p(_);var i={};524288&t&&(i.$$scope={dirty:t,ctx:n}),!m&&1&t&&(m=!0,i.value=n[0],Nn((function(){return m=!1}))),N.$set(i);var a={};5&t&&(a.disabled=n[0]!=n[2].email),524288&t&&(a.$$scope={dirty:t,ctx:n}),D.$set(a)},i:function(n){y||(Bn(x.$$.fragment,n),Bn(k.$$.fragment,n),Bn(E.$$.fragment,n),Bn(O.$$.fragment,n),Bn(N.$$.fragment,n),Bn(D.$$.fragment,n),Bn(A.$$.fragment,n),y=!0)},o:function(n){zn(x.$$.fragment,n),zn(k.$$.fragment,n),zn(E.$$.fragment,n),zn(O.$$.fragment,n),zn(N.$$.fragment,n),zn(D.$$.fragment,n),zn(A.$$.fragment,n),y=!1},d:function(n){n&&W(t),Vn(x),Vn(k),Vn(E),Vn(O),n&&W(a),n&&W(c),n&&W(u),n&&W(s),Vn(N),Vn(D),Vn(A),R(b)}}}function Mu(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("User email")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function ju(n){var t;return{c:function(){(t=Y("p")).textContent="".concat(pe("Using this form, you can generate a forgotten password or invite link for a user.")),nn(t,"class","help"),nn(t,"slot","help")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Pu(n){var t;return{c:function(){t=J()},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Tu(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,h,m=he(n[3].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"",v=he("The link is valid until **%1**.",new Date(n[3].expires).toLocaleString())+"",g=n[3].url+"";return{c:function(){(t=Y("h3")).textContent="".concat(pe("A link was generated")),e=J(),r=Y("p"),i=J(),c=J(),u=Y("a"),s=V(g),l=J(),d=Y("p"),(p=Y("small")).textContent="".concat(pe("Tip: Clicking on the link will copy it to your clipboard.")),o=new sn(m,i),a=new sn(v,null),nn(u,"href",f=n[3].url)},m:function(n,f,m){K(n,t,f),K(n,e,f),K(n,r,f),o.m(r),F(r,i),a.m(r),K(n,c,f),K(n,u,f),F(u,s),K(n,l,f),K(n,d,f),F(d,p),m&&h(),h=Q(u,"click",X(Gu))},p:function(n,t){8&t&&m!==(m=he(n[3].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"")&&o.p(m),8&t&&v!==(v=he("The link is valid until **%1**.",new Date(n[3].expires).toLocaleString())+"")&&a.p(v),8&t&&g!==(g=n[3].url+"")&&en(s,g),8&t&&f!==(f=n[3].url)&&nn(u,"href",f)},d:function(n){n&&W(t),n&&W(e),n&&W(r),n&&W(c),n&&W(u),n&&W(l),n&&W(d),h()}}}function Lu(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Generate link"))},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Iu(n){var t,e,r,o,i,a,c,u,s,f,l,d,p=n[11].email+"",h=n[11].roles.join(", ")+"",m=new At(n[11].registered).getHumanDate({year:!0})+"";return{c:function(){t=Y("tr"),e=Y("td"),r=Y("a"),o=V(p),a=J(),c=Y("td"),u=V(h),s=J(),f=Y("td"),l=V(m),d=J(),nn(r,"href",i="#"+n[11].uid)},m:function(n,i){K(n,t,i),F(t,e),F(e,r),F(r,o),F(t,a),F(t,c),F(c,u),F(t,s),F(t,f),F(f,l),F(t,d)},p:function(n,t){2&t&&p!==(p=n[11].email+"")&&en(o,p),2&t&&i!==(i="#"+n[11].uid)&&nn(r,"href",i),2&t&&h!==(h=n[11].roles.join(", ")+"")&&en(u,h),2&t&&m!==(m=new At(n[11].registered).getHumanDate({year:!0})+"")&&en(l,m)},d:function(n){n&&W(t)}}}function Uu(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Email")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Bu(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Roles")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function zu(n){var t;return{c:function(){(t=Y("p")).textContent="".concat(pe("Roles must be separated by comma.")),nn(t,"class","help"),nn(t,"slot","help")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Hu(n){var t;return{c:function(){t=J()},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function qu(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Save user"))},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Fu(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Confirm email")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Ku(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Delete user"))},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Wu(n){var t,e,r,o,i,a=new xr({props:{$$slots:{default:[Ru]},$$scope:{ctx:n}}}),c=[Au,Du],u=[];function s(n,t){return n[2]?0:1}return r=s(n),o=u[r]=c[r](n),{c:function(){Gn(a.$$.fragment),t=J(),e=Y("main"),o.c(),nn(e,"class","main")},m:function(n,o){Yn(a,n,o),K(n,t,o),K(n,e,o),u[r].m(e,null),i=!0},p:function(n,t){var i=p(t,1)[0],f={};524292&i&&(f.$$scope={dirty:i,ctx:n}),a.$set(f);var l=r;(r=s(n))===l?u[r].p(n,i):(In(),zn(u[l],1,1,(function(){u[l]=null})),Un(),(o=u[r])||(o=u[r]=c[r](n)).c(),Bn(o,1),o.m(e,null))},i:function(n){i||(Bn(a.$$.fragment,n),Bn(o),i=!0)},o:function(n){zn(a.$$.fragment,n),zn(o),i=!1},d:function(n){Vn(a,n),n&&W(t),n&&W(e),u[r].d()}}}function Gu(n){var t=function(n){var t=document.createElement("textarea");t.value=n.textContent||n.value,t.style.opacity=0,t.style.position="absolute",document.body.appendChild(t);try{t.focus(),t.select(),document.execCommand("copy")}catch(n){t.value="",console.log("copyToClipboard() failed:",n)}return document.body.removeChild(t),t.value}(n.target);t&&ye.showInApp(t,{title:pe("Invite link copied")})}function Yu(n,t,e){var r,o;j(n,Zt,(function(n){return e(12,r=n)}));var i=bn("api"),a=bn("user"),c=i("deleteUser"),u=i("getUsers"),s=i("inviteUser");j(n,s,(function(n){return e(13,o=n)}));var f,l,d=i("updateUser"),p="",h=[];function m(){return(m=tt(Xn.mark((function n(t){return Xn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),c.reset(),d.reset(),p==f.email){n.next=5;break}return n.abrupt("return");case 5:return n.next=7,c.perform(t.target);case 7:if(c.is("success")){n.next=9;break}return n.abrupt("return");case 9:return n.next=11,u.perform();case 11:Zt.go("/settings/users",{replace:!0});case 12:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function v(n,t){var r=n.hash;return e(0,p=""),t.filter((function(n){return n.uid==r}))[0]}return Zt.update({title:pe("Users")}),d.on("start",(function(n){e(2,f.roles=n.body.roles.split(/[.,\s]+/).map((function(n){return n.trim()})),f),n.body.roles=f.roles})),gn(tt(Xn.mark((function n(){return Xn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.perform();case 2:e(1,h=u.res.body.users||[]);case 3:case"end":return n.stop()}}),n)})))),n.$$.update=function(){4098&n.$$.dirty&&e(2,f=v(r,h)),8192&n.$$.dirty&&e(3,l=o.res.body||{})},[p,h,f,l,c,u,s,d,function(n){return m.apply(this,arguments)},function(n){s.perform(n.target)},function(n){c.reset(),d.perform(n.target)},a,r,o,i,v,function(n){e(0,p=n)}]}var Vu=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Cu()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,Yu,Wu,A,{}),r}return u}(Qn);function Ju(n){return function(t){for(var e=document.querySelectorAll(".js-remove"),r=0;r<e.length;r++)e[r].remove();var o=-1==[Ba,gc].indexOf(n);t.update({component:n,requireLogin:o}),o&&t.update({lastUrl:location.href})}}function Zu(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Qu(n){var t,e,r,o,i,a=pe(n[0].conversation_id?"Conversation":"Connection")+"",c=new fr({props:{name:"times-circle"}});return{c:function(){t=Y("a"),e=Y("h2"),r=V(a),o=J(),Gn(c.$$.fragment),nn(t,"href","#activeMenu:"),nn(t,"class","sidebar__header for-settings")},m:function(n,a){K(n,t,a),F(t,e),F(e,r),F(t,o),Yn(c,t,null),i=!0},p:function(n,t){var e=p(t,1)[0];(!i||1&e)&&a!==(a=pe(n[0].conversation_id?"Conversation":"Connection")+"")&&en(r,a)},i:function(n){i||(Bn(c.$$.fragment,n),i=!0)},o:function(n){zn(c.$$.fragment,n),i=!1},d:function(n){n&&W(t),Vn(c)}}}function Xu(n,t,e){var r=t.conversation,o=void 0===r?{}:r;return n.$set=function(n){"conversation"in n&&e(0,o=n.conversation)},[o]}var ns=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Zu()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,Xu,Qu,A,{conversation:0}),r}return u}(Qn);function ts(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function es(n){var t,e,r=pe("Currently connecting to %1.",n[3])+"";return{c:function(){t=Y("p"),e=V(r)},m:function(n,r){K(n,t,r),F(t,e)},p:function(n,t){8&t&&r!==(r=pe("Currently connecting to %1.",n[3])+"")&&en(e,r)},d:function(n){n&&W(t)}}}function rs(n){var t,e,r=pe("Currently connected to %1.",n[3])+"";return{c:function(){t=Y("p"),e=V(r)},m:function(n,r){K(n,t,r),F(t,e)},p:function(n,t){8&t&&r!==(r=pe("Currently connected to %1.",n[3])+"")&&en(e,r)},d:function(n){n&&W(t)}}}function os(n){var t,e,r=pe("Currently disconnected from %1.",n[3])+"";return{c:function(){t=Y("p"),e=V(r)},m:function(n,r){K(n,t,r),F(t,e)},p:function(n,t){8&t&&r!==(r=pe("Currently disconnected from %1.",n[3])+"")&&en(e,r)},d:function(n){n&&W(t)}}}function is(n){var t;return{c:function(){(t=Y("p")).textContent="".concat(pe("Connection not found."))},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function as(n){var t,e,r,o,i,a=new ns({props:{conversation:n[0]}});function c(n,t){return n[2].url?"disconnected"==n[2].state?os:"connected"==n[2].state?rs:es:is}var u=c(n),s=u(n),f=new ra({props:{conversation:n[0]}});return{c:function(){t=Y("div"),Gn(a.$$.fragment),e=J(),s.c(),r=J(),Gn(f.$$.fragment),nn(t,"class","sidebar-left")},m:function(n,o){K(n,t,o),Yn(a,t,null),F(t,e),s.m(t,null),F(t,r),Yn(f,t,null),i=!0},p:function(n,e){var o=p(e,1)[0],i={};1&o&&(i.conversation=n[0]),a.$set(i),u===(u=c(n))&&s?s.p(n,o):(s.d(1),(s=u(n))&&(s.c(),s.m(t,r)));var l={};1&o&&(l.conversation=n[0]),f.$set(l)},i:function(e){i||(Bn(a.$$.fragment,e),Bn(f.$$.fragment,e),Sn((function(){o||(o=qn(t,Qe,n[1],!0)),o.run(1)})),i=!0)},o:function(e){zn(a.$$.fragment,e),zn(f.$$.fragment,e),o||(o=qn(t,Qe,n[1],!1)),o.run(0),i=!1},d:function(n){n&&W(t),Vn(a),s.d(),Vn(f),n&&o&&o.end()}}}function cs(n,t,e){var r,o=t.conversation,i=void 0===o?{}:o,a=t.transition,c=bn("user"),u={};return gn(tt(Xn.mark((function n(){return Xn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e(2,u=c.findConversation({connection_id:i.connection_id})||{});case 1:case"end":return n.stop()}}),n)})))),n.$set=function(n){"conversation"in n&&e(0,i=n.conversation),"transition"in n&&e(1,a=n.transition)},n.$$.update=function(){4&n.$$.dirty&&e(3,r=u.real_host||u.url&&u.url.host)},[i,a,u,r]}var us=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(ts()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,cs,as,A,{conversation:0,transition:1}),r}return u}(Qn);function ss(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function fs(n,t,e){var r=n.slice();return r[15]=t[e],r}function ls(n){var t,e=pe("You are not a channel operator in %1.",n[0].name)+"";return{c:function(){t=V(e)},m:function(n,e){K(n,t,e)},p:function(n,r){1&r&&e!==(e=pe("You are not a channel operator in %1.",n[0].name)+"")&&en(t,e)},d:function(n){n&&W(t)}}}function ds(n){var t,e=pe("You are channel operator in %1.",n[0].name)+"";return{c:function(){t=V(e)},m:function(n,e){K(n,t,e)},p:function(n,r){1&r&&e!==(e=pe("You are channel operator in %1.",n[0].name)+"")&&en(t,e)},d:function(n){n&&W(t)}}}function ps(n){var t,e=pe("Private conversation with %1.",n[0].name)+"";return{c:function(){t=V(e)},m:function(n,e){K(n,t,e)},p:function(n,r){1&r&&e!==(e=pe("Private conversation with %1.",n[0].name)+"")&&en(t,e)},d:function(n){n&&W(t)}}}function hs(n){var t,e=pe("Conversation with %1 is frozen. Reason: %2",n[0].name,pe(n[0].frozen))+"";return{c:function(){t=V(e)},m:function(n,e){K(n,t,e)},p:function(n,r){1&r&&e!==(e=pe("Conversation with %1 is frozen. Reason: %2",n[0].name,pe(n[0].frozen))+"")&&en(t,e)},d:function(n){n&&W(t)}}}function ms(n){var t,e,r,o,i,a,c,u,s,f,l,d=[gs,vs],p=[];function h(n,t){return n[6]?0:1}function m(t){n[12].call(null,t)}c=h(n),u=p[c]=d[c](n);var v={type:"password",name:"password",readonly:!n[0].is("locked")&&!n[6],$$slots:{label:[ys]},$$scope:{ctx:n}};void 0!==n[2]&&(v.value=n[2]);var g=new Ni({props:v});return xn.push((function(){return Wn(g,"value",m)})),{c:function(){t=Y("input"),r=J(),o=Y("input"),a=J(),u.c(),s=J(),Gn(g.$$.fragment),nn(t,"type","hidden"),nn(t,"name","connection_id"),t.value=e=n[0].connection_id,nn(o,"type","hidden"),nn(o,"name","conversation_id"),o.value=i=n[0].conversation_id},m:function(n,e){K(n,t,e),K(n,r,e),K(n,o,e),K(n,a,e),p[c].m(n,e),K(n,s,e),Yn(g,n,e),l=!0},p:function(n,r){(!l||1&r&&e!==(e=n[0].connection_id))&&(t.value=e),(!l||1&r&&i!==(i=n[0].conversation_id))&&(o.value=i);var a=c;(c=h(n))===a?p[c].p(n,r):(In(),zn(p[a],1,1,(function(){p[a]=null})),Un(),(u=p[c])||(u=p[c]=d[c](n)).c(),Bn(u,1),u.m(s.parentNode,s));var m={};65&r&&(m.readonly=!n[0].is("locked")&&!n[6]),262144&r&&(m.$$scope={dirty:r,ctx:n}),!f&&4&r&&(f=!0,m.value=n[2],Nn((function(){return f=!1}))),g.$set(m)},i:function(n){l||(Bn(u),Bn(g.$$.fragment,n),l=!0)},o:function(n){zn(u),zn(g.$$.fragment,n),l=!1},d:function(n){n&&W(t),n&&W(r),n&&W(o),n&&W(a),p[c].d(n),n&&W(s),Vn(g,n)}}}function vs(n){var t,e,r,o,i=he(n[3]||"No topic is set.")+"";return{c:function(){t=Y("div"),(e=Y("label")).textContent="".concat(pe("Topic")),r=J(),nn(o=Y("div"),"class","input"),nn(t,"class","text-field")},m:function(n,a){K(n,t,a),F(t,e),F(t,r),F(t,o),o.innerHTML=i},p:function(n,t){8&t&&i!==(i=he(n[3]||"No topic is set.")+"")&&(o.innerHTML=i)},i:O,o:O,d:function(n){n&&W(t)}}}function gs(n){var t,e;function r(t){n[11].call(null,t)}var o={name:"topic",placeholder:pe("No topic is set."),$$slots:{label:[$s]},$$scope:{ctx:n}};void 0!==n[3]&&(o.value=n[3]);var i=new wi({props:o});return xn.push((function(){return Wn(i,"value",r)})),{c:function(){Gn(i.$$.fragment)},m:function(n,t){Yn(i,n,t),e=!0},p:function(n,e){var r={};262144&e&&(r.$$scope={dirty:e,ctx:n}),!t&&8&e&&(t=!0,r.value=n[3],Nn((function(){return t=!1}))),i.$set(r)},i:function(n){e||(Bn(i.$$.fragment,n),e=!0)},o:function(n){zn(i.$$.fragment,n),e=!1},d:function(n){Vn(i,n)}}}function $s(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Topic")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function ys(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Password")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function bs(n){var t,e;function r(t){n[13].call(null,t)}var o={$$slots:{label:[ws]},$$scope:{ctx:n}};void 0!==n[5]&&(o.checked=n[5]);var i=new si({props:o});return xn.push((function(){return Wn(i,"checked",r)})),{c:function(){Gn(i.$$.fragment)},m:function(n,t){Yn(i,n,t),e=!0},p:function(n,e){var r={};262144&e&&(r.$$scope={dirty:e,ctx:n}),!t&&32&e&&(t=!0,r.checked=n[5],Nn((function(){return t=!1}))),i.$set(r)},i:function(n){e||(Bn(i.$$.fragment,n),e=!0)},o:function(n){zn(i.$$.fragment,n),e=!1},d:function(n){Vn(i,n)}}}function ws(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Notify me on new messages")),nn(t,"slot","label")},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function _s(n){var t,e=new hr({props:{icon:"save",$$slots:{default:[xs]},$$scope:{ctx:n}}});return{c:function(){Gn(e.$$.fragment)},m:function(n,r){Yn(e,n,r),t=!0},p:function(n,t){var r={};262144&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Bn(e.$$.fragment,n),t=!0)},o:function(n){zn(e.$$.fragment,n),t=!1},d:function(n){Vn(e,n)}}}function xs(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Update"))},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function ks(n){var t;return{c:function(){(t=Y("span")).textContent="".concat(pe("Leave"))},m:function(n,e){K(n,t,e)},p:O,d:function(n){n&&W(t)}}}function Es(n){for(var t,e,r,o,i,a=pe("Participants (%1)",n[0].participants().length)+"",c=n[0].participants(),u=[],s=0;s<c.length;s+=1)u[s]=Cs(fs(n,c,s));var f=function(n){return zn(u[n],1,1,(function(){u[n]=null}))};return{c:function(){t=Y("nav"),e=Y("h3"),r=V(a),o=J();for(var n=0;n<u.length;n+=1)u[n].c();nn(t,"class","sidebar-left__nav")},m:function(n,a){K(n,t,a),F(t,e),F(e,r),F(t,o);for(var c=0;c<u.length;c+=1)u[c].m(t,null);i=!0},p:function(n,e){if((!i||1&e)&&a!==(a=pe("Participants (%1)",n[0].participants().length)+"")&&en(r,a),1&e){var o;for(c=n[0].participants(),o=0;o<c.length;o+=1){var s=fs(n,c,o);u[o]?(u[o].p(s,e),Bn(u[o],1)):(u[o]=Cs(s),u[o].c(),Bn(u[o],1),u[o].m(t,null))}for(In(),o=c.length;o<u.length;o+=1)f(o);Un()}},i:function(n){if(!i){for(var t=0;t<c.length;t+=1)Bn(u[t]);i=!0}},o:function(n){u=u.filter(Boolean);for(var t=0;t<u.length;t+=1)zn(u[t]);i=!1},d:function(n){n&&W(t),G(u,n)}}}function Os(n){var t,e,r,o=n[15].nick+"";return{c:function(){t=Y("span"),e=V(o),r=J()},m:function(n,o){K(n,t,o),F(t,e),K(n,r,o)},p:function(n,t){1&t&&o!==(o=n[15].nick+"")&&en(e,o)},d:function(n){n&&W(t),n&&W(r)}}}function Cs(n){var t,e=new Ur({props:{href:"/chat/"+n[0].connection_id+"/"+n[15].id,class:"participant "+mt(n[15].modes),$$slots:{default:[Os]},$$scope:{ctx:n}}});return{c:function(){Gn(e.$$.fragment)},m:function(n,r){Yn(e,n,r),t=!0},p:function(n,t){var r={};1&t&&(r.href="/chat/"+n[0].connection_id+"/"+n[15].id),1&t&&(r.class="participant "+mt(n[15].modes)),262145&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Bn(e.$$.fragment,n),t=!0)},o:function(n){zn(e.$$.fragment,n),t=!1},d:function(n){Vn(e,n)}}}function Ss(n){var t,e,r,o,i,a,c,u,s,f,l,d,h,m,v=!n[0].is("private"),g=n[0].hasOwnProperty("wantNotifications"),$=!n[0].is("private"),y=new ns({props:{conversation:n[0]}});function b(n,t){return n[0].frozen?hs:((null==o||1&t)&&(o=!!n[0].is("private")),o?ps:n[6]?ds:ls)}var w=b(n,-1),_=w(n),x=v&&ms(n),k=g&&bs(n),E=$&&_s(n),O=new hr({props:{type:"button",icon:"sign-out-alt",$$slots:{default:[ks]},$$scope:{ctx:n}}});O.$on("click",n[7]);var C=!n[0].frozen&&Es(n);return{c:function(){t=Y("div"),Gn(y.$$.fragment),e=J(),r=Y("p"),_.c(),i=J(),a=Y("form"),x&&x.c(),c=J(),k&&k.c(),u=J(),s=Y("div"),E&&E.c(),f=J(),Gn(O.$$.fragment),l=J(),C&&C.c(),nn(s,"class","form-actions"),nn(a,"method","post"),nn(t,"class","sidebar-left")},m:function(o,d,p){K(o,t,d),Yn(y,t,null),F(t,e),F(t,r),_.m(r,null),F(t,i),F(t,a),x&&x.m(a,null),F(a,c),k&&k.m(a,null),F(a,u),F(a,s),E&&E.m(s,null),F(s,f),Yn(O,s,null),n[14](a),F(t,l),C&&C.m(t,null),h=!0,p&&m(),m=Q(a,"submit",X(n[8]))},p:function(n,e){var o=p(e,1)[0],i={};1&o&&(i.conversation=n[0]),y.$set(i),w===(w=b(n,o))&&_?_.p(n,o):(_.d(1),(_=w(n))&&(_.c(),_.m(r,null))),1&o&&(v=!n[0].is("private")),v?x?(x.p(n,o),Bn(x,1)):((x=ms(n)).c(),Bn(x,1),x.m(a,c)):x&&(In(),zn(x,1,1,(function(){x=null})),Un()),1&o&&(g=n[0].hasOwnProperty("wantNotifications")),g?k?(k.p(n,o),Bn(k,1)):((k=bs(n)).c(),Bn(k,1),k.m(a,u)):k&&(In(),zn(k,1,1,(function(){k=null})),Un()),1&o&&($=!n[0].is("private")),$?E?(E.p(n,o),Bn(E,1)):((E=_s(n)).c(),Bn(E,1),E.m(s,f)):E&&(In(),zn(E,1,1,(function(){E=null})),Un());var l={};262144&o&&(l.$$scope={dirty:o,ctx:n}),O.$set(l),n[0].frozen?C&&(In(),zn(C,1,1,(function(){C=null})),Un()):C?(C.p(n,o),Bn(C,1)):((C=Es(n)).c(),Bn(C,1),C.m(t,null))},i:function(e){h||(Bn(y.$$.fragment,e),Bn(x),Bn(k),Bn(E),Bn(O.$$.fragment,e),Bn(C),Sn((function(){d||(d=qn(t,Qe,n[1],!0)),d.run(1)})),h=!0)},o:function(e){zn(y.$$.fragment,e),zn(x),zn(k),zn(E),zn(O.$$.fragment,e),zn(C),d||(d=qn(t,Qe,n[1],!1)),d.run(0),h=!1},d:function(e){e&&W(t),Vn(y),_.d(),x&&x.d(),k&&k.d(),E&&E.d(),Vn(O),n[14](null),C&&C.d(),e&&d&&d.end(),m()}}}function Ns(n,t,e){var r,o,i=t.conversation,a=t.transition,c=bn("user"),u="",s=i.topic,f=i.wantNotifications;function l(n){var t=c.findConversation({connection_id:n.connection_id}),e=n.findParticipant(t&&t.nick);return e&&e.modes.operator}return n.$set=function(n){"conversation"in n&&e(0,i=n.conversation),"transition"in n&&e(1,a=n.transition)},n.$$.update=function(){1&n.$$.dirty&&e(6,o=l(i)),33&n.$$.dirty&&i.update({wantNotifications:f}),17&n.$$.dirty&&r&&r.topic&&e(4,r.topic.value=i.topic||"",r)},[i,a,u,s,r,f,o,function(n){i.send("/part")},function(n){u&&(i.send(o?"/mode +k "+u:"/join "+i.name+" "+u),e(2,u="")),o&&s!=i.topic&&i.send("/topic "+s)},c,l,function(n){e(3,s=n)},function(n){e(2,u=n)},function(n){e(5,f=n)},function(n){xn[n?"unshift":"push"]((function(){e(4,r=n)}))}]}var Rs=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(ss()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,Ns,Ss,A,{conversation:0,transition:1}),r}return u}(Qn);function Ds(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function As(n,t,e){var r=n.slice();return r[20]=t[e],r}function Ms(n,t,e){var r=n.slice();return r[17]=t[e],r}function js(n){var t,e,r,o,i,a=nf(n[6],10)+"",c=new fr({props:{name:"bell"}});return{c:function(){Gn(c.$$.fragment),t=J(),e=Y("small"),r=V(a),nn(e,"class","chat-header__unread"),e.hidden=o=!n[6].unread},m:function(n,o){Yn(c,n,o),K(n,t,o),K(n,e,o),F(e,r),i=!0},p:function(n,t){(!i||64&t)&&a!==(a=nf(n[6],10)+"")&&en(r,a),(!i||64&t&&o!==(o=!n[6].unread))&&(e.hidden=o)},i:function(n){i||(Bn(c.$$.fragment,n),i=!0)},o:function(n){zn(c.$$.fragment,n),i=!1},d:function(n){Vn(c,n),n&&W(t),n&&W(e)}}}function Ps(n){var t,e=new Ur({props:{href:"/settings/connection",$$slots:{default:[Ts]},$$scope:{ctx:n}}});return{c:function(){Gn(e.$$.fragment)},m:function(n,r){Yn(e,n,r),t=!0},p:function(n,t){var r={};8388608&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Bn(e.$$.fragment,n),t=!0)},o:function(n){zn(e.$$.fragment,n),t=!1},d:function(n){Vn(e,n)}}}function Ts(n){var t,e,r,o=new fr({props:{name:"exclamation-circle"}});return{c:function(){Gn(o.$$.fragment),t=J(),(e=Y("span")).textContent="".concat(pe("No conversations"))},m:function(n,i){Yn(o,n,i),K(n,t,i),K(n,e,i),r=!0},p:O,i:function(n){r||(Bn(o.$$.fragment,n),r=!0)},o:function(n){zn(o.$$.fragment,n),r=!1},d:function(n){Vn(o,n),n&&W(t),n&&W(e)}}}function Ls(n){var t,e,r,o,i,a,c,u,s=(n[17].name||n[17].connection_id)+"",f=nf(n[17])+"",l=new fr({props:{name:"network-wired"}});return{c:function(){Gn(l.$$.fragment),t=J(),e=Y("span"),r=V(s),o=J(),i=Y("b"),a=V(f),nn(i,"class","unread"),i.hidden=c=!n[17].unread},m:function(n,c){Yn(l,n,c),K(n,t,c),K(n,e,c),F(e,r),K(n,o,c),K(n,i,c),F(i,a),u=!0},p:function(n,t){(!u||16&t)&&s!==(s=(n[17].name||n[17].connection_id)+"")&&en(r,s),(!u||16&t)&&f!==(f=nf(n[17])+"")&&en(a,f),(!u||16&t&&c!==(c=!n[17].unread))&&(i.hidden=c)},i:function(n){u||(Bn(l.$$.fragment,n),u=!0)},o:function(n){zn(l.$$.fragment,n),u=!1},d:function(n){Vn(l,n),n&&W(t),n&&W(e),n&&W(o),n&&W(i)}}}function Is(n){var t,e,r,o,i,a,c,u,s=n[20].name+"",f=nf(n[20])+"",l=new fr({props:{name:n[20].is_private?"user":"user-friends"}});return{c:function(){Gn(l.$$.fragment),t=J(),e=Y("span"),r=V(s),o=J(),i=Y("b"),a=V(f),nn(i,"class","unread"),i.hidden=c=!n[20].unread},m:function(n,c){Yn(l,n,c),K(n,t,c),K(n,e,c),F(e,r),K(n,o,c),K(n,i,c),F(i,a),u=!0},p:function(n,t){var e={};16&t&&(e.name=n[20].is_private?"user":"user-friends"),l.$set(e),(!u||16&t)&&s!==(s=n[20].name+"")&&en(r,s),(!u||16&t)&&f!==(f=nf(n[20])+"")&&en(a,f),(!u||16&t&&c!==(c=!n[20].unread))&&(i.hidden=c)},i:function(n){u||(Bn(l.$$.fragment,n),u=!0)},o:function(n){zn(l.$$.fragment,n),u=!1},d:function(n){Vn(l,n),n&&W(t),n&&W(e),n&&W(o),n&&W(i)}}}function Us(n){var t,e=new Ur({props:{href:n[20].path,class:Qs(n[17],n[20]),$$slots:{default:[Is]},$$scope:{ctx:n}}});return{c:function(){Gn(e.$$.fragment)},m:function(n,r){Yn(e,n,r),t=!0},p:function(n,t){var r={};16&t&&(r.href=n[20].path),16&t&&(r.class=Qs(n[17],n[20])),8388624&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(Bn(e.$$.fragment,n),t=!0)},o:function(n){zn(e.$$.fragment,n),t=!1},d:function(n){Vn(e,n)}}}function Bs(n){for(var t,e,r,o=new Ur({props:{href:n[17].path,class:Qs(n[17],n[17]),$$slots:{default:[Ls]},$$scope:{ctx:n}}}),i=n[17].conversations.toArray(),a=[],c=0;c<i.length;c+=1)a[c]=Us(As(n,i,c));var u=function(n){return zn(a[n],1,1,(function(){a[n]=null}))};return{c:function(){Gn(o.$$.fragment),t=J();for(var n=0;n<a.length;n+=1)a[n].c();e=Z()},m:function(n,i){Yn(o,n,i),K(n,t,i);for(var c=0;c<a.length;c+=1)a[c].m(n,i);K(n,e,i),r=!0},p:function(n,t){var r={};if(16&t&&(r.href=n[17].path),16&t&&(r.class=Qs(n[17],n[17])),8388624&t&&(r.$$scope={dirty:t,ctx:n}),o.$set(r),16&t){var c;for(i=n[17].conversations.toArray(),c=0;c<i.length;c+=1){var s=As(n,i,c);a[c]?(a[c].p(s,t),Bn(a[c],1)):(a[c]=Us(s),a[c].c(),Bn(a[c],1),a[c].m(e.parentNode,e))}for(In(),c=i.length;c<a.length;c+=1)u(c);Un()}},i:function(n){if(!r){Bn(o.$$.fragment,n);for(var t=0;t<i.length;t+=1)Bn(a[t]);r=!0}},o:function(n){zn(o.$$.fragment,n),a=a.filter(Boolean);for(var t=0;t<a.length;t+=1)zn(a[t]);r=!1},d:function(n){Vn(o,n),n&&W(t),G(a,n),n&&W(e)}}}function zs(n){var t,e,r,o,i,a,c,u=nf(n[6])+"",s=new fr({props:{name:"bell"}});return{c:function(){Gn(s.$$.fragment),t=J(),(e=Y("span")).textContent="".concat(pe("Notifications")),r=J(),o=Y("b"),i=V(u),nn(o,"class","unread"),o.hidden=a=!n[6].unread},m:function(n,a){Yn(s,n,a),K(n,t,a),K(n,e,a),K(n,r,a),K(n,o,a),F(o,i),c=!0},p:function(n,t){(!c||64&t)&&u!==(u=nf(n[6])+"")&&en(i,u),(!c||64&t&&a!==(a=!n[6].unread))&&(o.hidden=a)},i:function(n){c||(Bn(s.$$.fragment,n),c=!0)},o:function(n){zn(s.$$.fragment,n),c=!1},d:function(n){Vn(s,n),n&&W(t),n&&W(e),n&&W(r),n&&W(o)}}}function Hs(n){var t,e,r,o=new fr({props:{name:"search"}});return{c:function(){Gn(o.$$.fragment),t=J(),(e=Y("span")).textContent="".concat(pe("Search"))},m:function(n,i){Yn(o,n,i),K(n,t,i),K(n,e,i),r=!0},p:O,i:function(n){r||(Bn(o.$$.fragment,n),r=!0)},o:function(n){zn(o.$$.fragment,n),r=!1},d:function(n){Vn(o,n),n&&W(t),n&&W(e)}}}function qs(n){var t,e,r,o=new fr({props:{name:"comment"}});return{c:function(){Gn(o.$$.fragment),t=J(),(e=Y("span")).textContent="".concat(pe("Add conversation"))},m:function(n,i){Yn(o,n,i),K(n,t,i),K(n,e,i),r=!0},p:O,i:function(n){r||(Bn(o.$$.fragment,n),r=!0)},o:function(n){zn(o.$$.fragment,n),r=!1},d:function(n){Vn(o,n),n&&W(t),n&&W(e)}}}function Fs(n){var t,e,r,o=new fr({props:{name:"network-wired"}});return{c:function(){Gn(o.$$.fragment),t=J(),(e=Y("span")).textContent="".concat(pe("Add connection"))},m:function(n,i){Yn(o,n,i),K(n,t,i),K(n,e,i),r=!0},p:O,i:function(n){r||(Bn(o.$$.fragment,n),r=!0)},o:function(n){zn(o.$$.fragment,n),r=!1},d:function(n){Vn(o,n),n&&W(t),n&&W(e)}}}function Ks(n){var t,e,r,o=new fr({props:{name:"user-cog"}});return{c:function(){Gn(o.$$.fragment),t=J(),(e=Y("span")).textContent="".concat(pe("Account"))},m:function(n,i){Yn(o,n,i),K(n,t,i),K(n,e,i),r=!0},p:O,i:function(n){r||(Bn(o.$$.fragment,n),r=!0)},o:function(n){zn(o.$$.fragment,n),r=!1},d:function(n){Vn(o,n),n&&W(t),n&&W(e)}}}function Ws(n){var t,e,r,o=new fr({props:{name:"question-circle"}});return{c:function(){Gn(o.$$.fragment),t=J(),(e=Y("span")).textContent="".concat(pe("Help"))},m:function(n,i){Yn(o,n,i),K(n,t,i),K(n,e,i),r=!0},p:O,i:function(n){r||(Bn(o.$$.fragment,n),r=!0)},o:function(n){zn(o.$$.fragment,n),r=!1},d:function(n){Vn(o,n),n&&W(t),n&&W(e)}}}function Gs(n){var t,e,r=new Ur({props:{href:"/settings",$$slots:{default:[Ys]},$$scope:{ctx:n}}}),o=new Ur({props:{href:"/settings/users",$$slots:{default:[Vs]},$$scope:{ctx:n}}});return{c:function(){Gn(r.$$.fragment),t=J(),Gn(o.$$.fragment)},m:function(n,i){Yn(r,n,i),K(n,t,i),Yn(o,n,i),e=!0},p:function(n,t){var e={};8388608&t&&(e.$$scope={dirty:t,ctx:n}),r.$set(e);var i={};8388608&t&&(i.$$scope={dirty:t,ctx:n}),o.$set(i)},i:function(n){e||(Bn(r.$$.fragment,n),Bn(o.$$.fragment,n),e=!0)},o:function(n){zn(r.$$.fragment,n),zn(o.$$.fragment,n),e=!1},d:function(n){Vn(r,n),n&&W(t),Vn(o,n)}}}function Ys(n){var t,e,r,o=new fr({props:{name:"tools"}});return{c:function(){Gn(o.$$.fragment),t=J(),(e=Y("span")).textContent="".concat(pe("Settings"))},m:function(n,i){Yn(o,n,i),K(n,t,i),K(n,e,i),r=!0},p:O,i:function(n){r||(Bn(o.$$.fragment,n),r=!0)},o:function(n){zn(o.$$.fragment,n),r=!1},d:function(n){Vn(o,n),n&&W(t),n&&W(e)}}}function Vs(n){var t,e,r,o=new fr({props:{name:"users"}});return{c:function(){Gn(o.$$.fragment),t=J(),(e=Y("span")).textContent="".concat(pe("Users"))},m:function(n,i){Yn(o,n,i),K(n,t,i),K(n,e,i),r=!0},p:O,i:function(n){r||(Bn(o.$$.fragment,n),r=!0)},o:function(n){zn(o.$$.fragment,n),r=!1},d:function(n){Vn(o,n),n&&W(t),n&&W(e)}}}function Js(n){var t,e,r,o,i=pe('Search for "%1"',n[5])+"",a=new fr({props:{name:"search"}});return{c:function(){Gn(a.$$.fragment),t=J(),e=Y("span"),r=V(i)},m:function(n,i){Yn(a,n,i),K(n,t,i),K(n,e,i),F(e,r),o=!0},p:function(n,t){(!o||32&t)&&i!==(i=pe('Search for "%1"',n[5])+"")&&en(r,i)},i:function(n){o||(Bn(a.$$.fragment,n),o=!0)},o:function(n){zn(a.$$.fragment,n),o=!1},d:function(n){Vn(a,n),n&&W(t),n&&W(e)}}}function Zs(n){for(var t,e,r,o,i,a,c,u,s,f,l,d,h,m,v,g,$,y,b,w,_,x,k,E,O,C,S,N,D,A,M=(n[4].email||pe("Account"))+"",j=n[4].is("admin"),P=new Ur({props:{href:"/chat",class:"sidebar__header__notification",$$slots:{default:[js]},$$scope:{ctx:n}}}),T=new fr({props:{name:"search"}}),L=!n[4].connections.size&&Ps(n),I=n[4].connections.toArray(),U=[],B=0;B<I.length;B+=1)U[B]=Bs(Ms(n,I,B));var z=function(n){return zn(U[n],1,1,(function(){U[n]=null}))},H=new Ur({props:{href:"/chat",$$slots:{default:[zs]},$$scope:{ctx:n}}}),q=new Ur({props:{href:"/search",$$slots:{default:[Hs]},$$scope:{ctx:n}}}),Z=new Ur({props:{href:"/settings/conversation",$$slots:{default:[qs]},$$scope:{ctx:n}}}),X=new Ur({props:{href:"/settings/connection",$$slots:{default:[Fs]},$$scope:{ctx:n}}}),tn=new Ur({props:{href:"/settings/account",$$slots:{default:[Ks]},$$scope:{ctx:n}}}),on=new Ur({props:{href:"/help",$$slots:{default:[Ws]},$$scope:{ctx:n}}}),cn=j&&Gs(n),un=new fr({props:{name:"power-off"}}),sn=new Ur({props:{href:"/search?q="+encodeURIComponent(n[5]),class:"for-search hidden",$$slots:{default:[Js]},$$scope:{ctx:n}}});return{c:function(){t=Y("div"),e=Y("form"),r=Y("input"),i=J(),Gn(P.$$.fragment),a=J(),c=Y("label"),Gn(T.$$.fragment),u=J(),s=Y("nav"),(f=Y("h3")).textContent="".concat(pe("Conversations")),l=J(),L&&L.c(),d=J();for(var p=0;p<U.length;p+=1)U[p].c();h=J(),m=Y("h3"),v=V(M),g=J(),Gn(H.$$.fragment),$=J(),Gn(q.$$.fragment),y=J(),Gn(Z.$$.fragment),b=J(),Gn(X.$$.fragment),w=J(),Gn(tn.$$.fragment),_=J(),Gn(on.$$.fragment),x=J(),cn&&cn.c(),k=J(),E=Y("a"),Gn(un.$$.fragment),O=J(),(C=Y("span")).textContent="".concat(pe("Log out")),S=J(),Gn(sn.$$.fragment),nn(r,"type","text"),nn(r,"id","search_input"),nn(r,"class","is-primary-menu-item"),nn(r,"placeholder",o=n[3]?pe("Search..."):pe("Convos")),nn(c,"for","search_input"),nn(e,"class","sidebar__header is-below"),an(e,"has-focus",n[3]),nn(E,"href",Zt.urlFor("/logout")),nn(E,"target","_self"),nn(s,"class","sidebar-left__nav"),an(s,"is-filtering",n[1].length>0),nn(t,"class","sidebar-left")},m:function(o,p,N){K(o,t,p),F(t,e),F(e,r),rn(r,n[1]),F(e,i),Yn(P,e,null),F(e,a),F(e,c),Yn(T,c,null),F(t,u),F(t,s),F(s,f),F(s,l),L&&L.m(s,null),F(s,d);for(var M=0;M<U.length;M+=1)U[M].m(s,null);F(s,h),F(s,m),F(m,v),F(s,g),Yn(H,s,null),F(s,$),Yn(q,s,null),F(s,y),Yn(Z,s,null),F(s,b),Yn(X,s,null),F(s,w),Yn(tn,s,null),F(s,_),Yn(on,s,null),F(s,x),cn&&cn.m(s,null),F(s,k),F(s,E),Yn(un,E,null),F(E,O),F(E,C),F(s,S),Yn(sn,s,null),n[16](s),D=!0,N&&R(A),A=[Q(r,"input",n[15]),Q(r,"blur",n[9]),Q(r,"focus",n[10]),Q(r,"keydown",n[11]),Q(e,"submit",tf),Q(s,"click",Xs)]},p:function(n,t){var i=p(t,1)[0];(!D||8&i&&o!==(o=n[3]?pe("Search..."):pe("Convos")))&&nn(r,"placeholder",o),2&i&&r.value!==n[1]&&rn(r,n[1]);var a={};if(8388672&i&&(a.$$scope={dirty:i,ctx:n}),P.$set(a),8&i&&an(e,"has-focus",n[3]),n[4].connections.size?L&&(In(),zn(L,1,1,(function(){L=null})),Un()):L?(L.p(n,i),Bn(L,1)):((L=Ps(n)).c(),Bn(L,1),L.m(s,d)),16&i){var c;for(I=n[4].connections.toArray(),c=0;c<I.length;c+=1){var u=Ms(n,I,c);U[c]?(U[c].p(u,i),Bn(U[c],1)):(U[c]=Bs(u),U[c].c(),Bn(U[c],1),U[c].m(s,h))}for(In(),c=I.length;c<U.length;c+=1)z(c);Un()}(!D||16&i)&&M!==(M=(n[4].email||pe("Account"))+"")&&en(v,M);var f={};8388672&i&&(f.$$scope={dirty:i,ctx:n}),H.$set(f);var l={};8388608&i&&(l.$$scope={dirty:i,ctx:n}),q.$set(l);var m={};8388608&i&&(m.$$scope={dirty:i,ctx:n}),Z.$set(m);var g={};8388608&i&&(g.$$scope={dirty:i,ctx:n}),X.$set(g);var $={};8388608&i&&($.$$scope={dirty:i,ctx:n}),tn.$set($);var y={};8388608&i&&(y.$$scope={dirty:i,ctx:n}),on.$set(y),16&i&&(j=n[4].is("admin")),j?cn?(cn.p(n,i),Bn(cn,1)):((cn=Gs(n)).c(),Bn(cn,1),cn.m(s,k)):cn&&(In(),zn(cn,1,1,(function(){cn=null})),Un());var b={};32&i&&(b.href="/search?q="+encodeURIComponent(n[5])),8388640&i&&(b.$$scope={dirty:i,ctx:n}),sn.$set(b),2&i&&an(s,"is-filtering",n[1].length>0)},i:function(e){if(!D){Bn(P.$$.fragment,e),Bn(T.$$.fragment,e),Bn(L);for(var r=0;r<I.length;r+=1)Bn(U[r]);Bn(H.$$.fragment,e),Bn(q.$$.fragment,e),Bn(Z.$$.fragment,e),Bn(X.$$.fragment,e),Bn(tn.$$.fragment,e),Bn(on.$$.fragment,e),Bn(cn),Bn(un.$$.fragment,e),Bn(sn.$$.fragment,e),Sn((function(){N||(N=qn(t,Qe,n[0],!0)),N.run(1)})),D=!0}},o:function(e){zn(P.$$.fragment,e),zn(T.$$.fragment,e),zn(L),U=U.filter(Boolean);for(var r=0;r<U.length;r+=1)zn(U[r]);zn(H.$$.fragment,e),zn(q.$$.fragment,e),zn(Z.$$.fragment,e),zn(X.$$.fragment,e),zn(tn.$$.fragment,e),zn(on.$$.fragment,e),zn(cn),zn(un.$$.fragment,e),zn(sn.$$.fragment,e),N||(N=qn(t,Qe,n[0],!1)),N.run(0),D=!1},d:function(e){e&&W(t),Vn(P),Vn(T),L&&L.d(),G(U,e),Vn(H),Vn(q),Vn(Z),Vn(X),Vn(tn),Vn(on),cn&&cn.d(),Vn(un),Vn(sn),n[16](null),e&&N&&N.end(),R(A)}}}function Qs(n,t){var e=[t.conversation_id?"for-conversation":"for-connection"];return(t.frozen||"connected"!=n.state)&&e.push("is-frozen"),t.errors&&e.push("has-errors"),e.join(" ")}function Xs(n){(n.target.className||"").match(/(network|user)/)&&setTimeout((function(){return Zt.update({activeMenu:"settings"})}),50)}function nf(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;return n.unread>t?"60+":n.unread||0}var tf=function(n){return n.preventDefault()};function ef(n,t,e){var r,o,i;j(n,Zt,(function(n){return e(14,o=n)}));var a=t.transition,c=bn("user");j(n,c,(function(n){return e(4,r=n)}));var u=r.notifications;j(n,u,(function(n){return e(6,i=n)}));var s,f,l=0,d="",p=!1,h=[];function m(){vt(s,"a",(function(n){return n.classList.remove("has-focus")})),setTimeout((function(){if(s){e(1,d="");var n=document.activeElement;n&&ut(n,s)&&vt(s,"a.has-path",(function(n){return n.focus()})),e(3,p=!1)}}),100)}function v(){if(s){e(12,l=0),e(3,p=!0),e(13,h=[]);var n=[d.match(/^\W+/)?"":"\\b\\W*"];n[0]&&n.push("");for(var t=function(t){var r=new RegExp(n[t]+gt(d),"i"),o={};if(vt(s,"a",(function(n,t){var i=n.classList;!d.length&&i.contains("has-path")&&e(12,l=t),i.remove("has-focus");var a=!d.length||!n.href.match(/\/search$/)&&!o[n.href]&&n.textContent.match(r);a&&h.push(n),n.classList[a?"remove":"add"]("hidden"),o[n.href]=!0})),h.length)return"break"},r=0;r<n.length;r++){if("break"===t(r))break}vt(s,".for-connection",(function(n){for(var t=n;(t=t.nextElementSibling)&&t.classList.contains("for-conversation");)if(!t.classList.contains("hidden"))return n.classList.remove("hidden")}));var o=s.querySelector(".for-search");o.classList[d?"remove":"add"]("hidden"),o.classList.contains("hidden")||h.push(o),vt(s,"h3",(function(n){for(var t=n;(t=t.nextElementSibling)&&!wt(t,"h3");)if(!t.classList.contains("hidden"))return n.classList.remove("hidden");n.classList.add("hidden")}))}}return n.$set=function(n){"transition"in n&&e(0,a=n.transition)},n.$$.update=function(){2&n.$$.dirty&&v(),2&n.$$.dirty&&e(5,f=d.replace(/^\//,"")),16388&n.$$.dirty&&s&&m(),12288&n.$$.dirty&&h[l]&&h[l].classList.add("has-focus")},[a,d,s,p,r,f,i,c,u,m,v,function(n){if(13==n.keyCode)return n.preventDefault(),m(),void(h[l]&&Zt.go(h[l].href));var t=38==n.keyCode?-1:40==n.keyCode?1:0;t&&(n.preventDefault(),h[l]&&h[l].classList.remove("has-focus"),e(12,l+=n.ctrlKey?4*t:t)),l<0&&e(12,l=h.length-1),l>=h.length&&e(12,l=0)},l,h,o,function(){d=this.value,e(1,d)},function(n){xn[n?"unshift":"push"]((function(){e(2,s=n)}))}]}var rf=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Ds()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,ef,Zs,A,{transition:0}),r}return u}(Qn);function of(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var af=Kn.window;function cf(n){var t,e,r=n[3].component||Ba;if(r)var o=new r({});return{c:function(){o&&Gn(o.$$.fragment),t=Z()},m:function(n,r){o&&Yn(o,n,r),K(n,t,r),e=!0},p:function(n,e){if(r!==(r=n[3].component||Ba)){if(o){In();var i=o;zn(i.$$.fragment,1,0,(function(){Vn(i,1)})),Un()}r?(Gn((o=new r({})).$$.fragment),Bn(o.$$.fragment,1),Yn(o,t.parentNode,t)):o=null}},i:function(n){e||(o&&Bn(o.$$.fragment,n),e=!0)},o:function(n){o&&zn(o.$$.fragment,n),e=!1},d:function(n){n&&W(t),o&&Vn(o,n)}}}function uf(n){var t,e=new gc({});return{c:function(){Gn(e.$$.fragment)},m:function(n,r){Yn(e,n,r),t=!0},p:O,i:function(n){t||(Bn(e.$$.fragment,n),t=!0)},o:function(n){zn(e.$$.fragment,n),t=!1},d:function(n){Vn(e,n)}}}function sf(n){var t,e,r,o,i,a=("nav"==n[3].activeMenu||n[6].isWide)&&"default"!=n[3].activeMenu&&ff(n),c="settings"==n[3].activeMenu&&lf(n),u=n[3].component;if(u)var s=new u({});var f=n[3].activeMenu&&!n[6].isWide&&df(n);return{c:function(){a&&a.c(),t=J(),c&&c.c(),e=J(),s&&Gn(s.$$.fragment),r=J(),f&&f.c(),o=Z()},m:function(n,u){a&&a.m(n,u),K(n,t,u),c&&c.m(n,u),K(n,e,u),s&&Yn(s,n,u),K(n,r,u),f&&f.m(n,u),K(n,o,u),i=!0},p:function(n,i){if("nav"!=n[3].activeMenu&&!n[6].isWide||"default"==n[3].activeMenu?a&&(In(),zn(a,1,1,(function(){a=null})),Un()):a?(a.p(n,i),Bn(a,1)):((a=ff(n)).c(),Bn(a,1),a.m(t.parentNode,t)),"settings"==n[3].activeMenu?c?(c.p(n,i),Bn(c,1)):((c=lf(n)).c(),Bn(c,1),c.m(e.parentNode,e)):c&&(In(),zn(c,1,1,(function(){c=null})),Un()),u!==(u=n[3].component)){if(s){In();var l=s;zn(l.$$.fragment,1,0,(function(){Vn(l,1)})),Un()}u?(Gn((s=new u({})).$$.fragment),Bn(s.$$.fragment,1),Yn(s,r.parentNode,r)):s=null}n[3].activeMenu&&!n[6].isWide?f?(f.p(n,i),Bn(f,1)):((f=df(n)).c(),Bn(f,1),f.m(o.parentNode,o)):f&&(In(),zn(f,1,1,(function(){f=null})),Un())},i:function(n){i||(Bn(a),Bn(c),s&&Bn(s.$$.fragment,n),Bn(f),i=!0)},o:function(n){zn(a),zn(c),s&&zn(s.$$.fragment,n),zn(f),i=!1},d:function(n){a&&a.d(n),n&&W(t),c&&c.d(n),n&&W(e),s&&Vn(s,n),n&&W(r),f&&f.d(n),n&&W(o)}}}function ff(n){var t,e=new rf({props:{transition:{duration:n[6].isWide?0:250,x:n[6].width}}});return{c:function(){Gn(e.$$.fragment)},m:function(n,r){Yn(e,n,r),t=!0},p:function(n,t){var r={};64&t&&(r.transition={duration:n[6].isWide?0:250,x:n[6].width}),e.$set(r)},i:function(n){t||(Bn(e.$$.fragment,n),t=!0)},o:function(n){zn(e.$$.fragment,n),t=!1},d:function(n){Vn(e,n)}}}function lf(n){var t,e,r=n[4];function o(n){return{props:{conversation:n[5].activeConversation,transition:{duration:250,x:n[6].isWide?0:n[6].width}}}}if(r)var i=new r(o(n));return{c:function(){i&&Gn(i.$$.fragment),t=Z()},m:function(n,r){i&&Yn(i,n,r),K(n,t,r),e=!0},p:function(n,e){var a={};if(32&e&&(a.conversation=n[5].activeConversation),64&e&&(a.transition={duration:250,x:n[6].isWide?0:n[6].width}),r!==(r=n[4])){if(i){In();var c=i;zn(c.$$.fragment,1,0,(function(){Vn(c,1)})),Un()}r?(Gn((i=new r(o(n))).$$.fragment),Bn(i.$$.fragment,1),Yn(i,t.parentNode,t)):i=null}else r&&i.$set(a)},i:function(n){e||(i&&Bn(i.$$.fragment,n),e=!0)},o:function(n){i&&zn(i.$$.fragment,n),e=!1},d:function(n){n&&W(t),i&&Vn(i,n)}}}function df(n){var t,e,r,o;return{c:function(){(t=Y("div")).textContent=" ",nn(t,"class","overlay")},m:function(e,i,a){K(e,t,i),r=!0,a&&o(),o=Q(t,"click",n[13])},p:O,i:function(n){r||(Sn((function(){e||(e=qn(t,Ze,{duration:200},!0)),e.run(1)})),r=!0)},o:function(n){e||(e=qn(t,Ze,{duration:200},!1)),e.run(0),r=!1},d:function(n){n&&W(t),n&&e&&e.end(),o()}}}function pf(n){var t,e,r,o,i;Sn(n[12]);var a=[sf,uf,cf],c=[];function u(n,t){return n[2]?0:n[3].requireLogin?1:2}return t=u(n),e=c[t]=a[t](n),{c:function(){e.c(),r=Z()},m:function(e,a,u){c[t].m(e,a),K(e,r,a),o=!0,u&&R(i),i=[Q(af,"focus",n[11]),Q(af,"resize",n[12])]},p:function(n,o){var i=p(o,1)[0],s=t;(t=u(n))===s?c[t].p(n,i):(In(),zn(c[s],1,1,(function(){c[s]=null})),Un(),(e=c[t])||(e=c[t]=a[t](n)).c(),Bn(e,1),e.m(r.parentNode,r))},i:function(n){o||(Bn(e),o=!0)},o:function(n){zn(e),o=!1},d:function(n){c[t].d(n),n&&W(r),R(i)}}}function hf(n,t,e){var r,o,i;j(n,Zt,(function(n){return e(3,r=n)})),j(n,nr,(function(n){return e(6,i=n)}));var a=ke("/events"),c=new Ve({});j(n,c,(function(n){return e(5,o=n)}));var u=0,s=0,f={closed:!0};function l(n){if(n.is("open"))return f.close&&f.close();var t=!1===navigator.onLine?pe("You seem to be offline."):n.error?pe(n.error):n.is("connecting")?pe("Connecting to Convos..."):pe("Connection to Convos is %1.",pe(n.readyStateHuman));f.body!=t&&(f.close&&f.close(),f=ye.showInApp(t,{closeAfter:-1,title:pe("Status")}))}a.update({debug:"WebSocket"}),window.convosWebSockeet=a,Zt.update({baseUrl:tr("base_url")}),a.update({url:Zt.wsUrlFor("/events")}),(navigator.serviceWorker?navigator.serviceWorker.register(Zt.urlFor("/sw.js")).then((function(n){nr.version!=tr("version")&&(nr.update({version:tr("version")}),n.update())})):Promise.resolve({})).catch((function(n){return console.log("[registerServiceWorker]",n)})),function(n,t){n.to("/login",Ju(gc)),n.to("/register",Ju(gc)),n.to("/help",Ju(Ja)),n.to("/settings/account",Ju(eu)),n.to("/settings/connection",Ju(ua)),n.to("/settings/conversation",Ju(Da)),n.to("/settings/users",Ju(Vu)),n.to("/settings",Ju(Ou)),n.to("/search",Ju(Uc)),n.to("/chat",Ju(Uc)),n.to("/chat/:connection_id",Ju(ri)),n.to("/chat/:connection_id/:conversation_id",Ju(ri));var e=function(){};n.to("/doc/*",e),n.to("/file/*",e),n.to("/paste/*",e),n.to("/",Ju(gc)),n.to("*",Ju(Ba)),function(n,t){t.on("wsEventSentJoin",(function(t){n.go(n.conversationPath(t))})),t.on("wsEventSentPart",(function(e){var r=t.findConversation({connection_id:e.connection_id});if(!r)return n.go("/settings/connection");var o=r.conversations.toArray()[0];n.go(o?o.path:"/settings/conversation")}))}(n,t)}(Zt,c),ht(Zt.urlFor("/images/emojis.js")),yn("api",Tt("/api").update({url:Zt.urlFor("/api")}).toFunction()),yn("socket",a),yn("user",c),ye.on("click",(function(n){return n.path&&Zt.go(n.path)})),a.on("update",l),c.on("update",(function(n,t){return t.hasOwnProperty("roles")&&Zt.render()})),c.load(),nr.activateTheme();var d,p;return n.$$.update=function(){8&n.$$.dirty&&e(2,d=!!(r.component&&r.requireLogin&&c.is("authenticated"))),32&n.$$.dirty&&e(4,p=o.activeConversation.connection_id?o.activeConversation.conversation_id?Rs:us:null),3&n.$$.dirty&&nr.update({height:u,width:s}),4&n.$$.dirty&&tr("app_mode",d),4&n.$$.dirty&&tr("notify_enabled",d),40&n.$$.dirty&&function(n,t){if(document){var e=tr("organization_name"),r=t.unread?"("+t.unread+") "+n.title:n.title;document.title="Convos"==e?pe("%1 - Convos",r):pe("%1 - Convos for %2",r,e)}}(r,o)},[u,s,d,r,p,o,i,a,c,f,l,function(){return c.email&&a.open()},function(){e(0,u=af.innerHeight),e(1,s=af.innerWidth)},function(){return r.update({activeMenu:""})}]}var mf=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(of()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Zn(t(r),e,hf,pf,A,{}),r}return u}(Qn);function vf(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var gf=function(t){c(u,t);var e,r,a=(e=u,function(){var n,t=i(e);if(vf()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function u(t){var e;return n(this,u),(e=a.call(this)).prop("ro","domain",t.domain||"meet.jit.si"),e.prop("ro","email",t.email||""),e.prop("rw","nick",t.nick||""),e.prop("rw","roomName",t.roomName||"convos-default"),e.prop("persist","disableAudioLevels",!0,{key:"video:disableAudioLevels"}),e.prop("persist","disableH264",!0,{key:"video:disableH264"}),e.prop("persist","resolution",720,{key:"video:resolution"}),e}return E(u,[{key:"render",value:(r=tt(Xn.mark((function n(t){var e=this;return Xn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.targetEl=t,n.next=3,ht("https://"+this.domain+"/external_api.js");case 3:$t(this.targetEl),document.body.classList.add("has-video-chat"),this.jitsi=new JitsiMeetExternalAPI(this.domain,this._options()),document.addEventListener("keydown",(function(n){"KeyC"==n.code&&e.jitsi.executeCommand("toggleChat"),"KeyD"==n.code&&e.jitsi.executeCommand("toggleShareScreen"),"KeyF"==n.code&&e.jitsi.executeCommand("toggleFilmStrip"),"KeyM"==n.code&&e.jitsi.executeCommand("toggleAudio"),"KeyR"==n.code&&e.jitsi.executeCommand("toggleRaiseHand"),"KeyV"==n.code&&e.jitsi.executeCommand("toggleVideo"),"KeyW"==n.code&&e.jitsi.executeCommand("toggleTileView"),"Space"==n.code&&e.jitsi.isAudioMuted().then((function(n){return n&&e.jitsi.executeCommand("toggleAudio")}))})),document.addEventListener("keyup",(function(n){"Space"==n.code&&e.jitsi.isAudioMuted().then((function(n){return n||e.jitsi.executeCommand("toggleAudio")}))}));case 8:case"end":return n.stop()}}),n,this)}))),function(n){return r.apply(this,arguments)})},{key:"_configOverwrite",value:function(){return{disableAudioLevels:this.disableAudioLevels,disableH264:this.disableH264,enableWelcomePage:!this.nick,prejoinPageEnabled:!this.nick,minParticipants:1,resolution:this.resolution,analytics:{googleAnalyticsTrackingId:"",scriptURLs:[]},e2eping:{analyticsInterval:-1,pingInterval:-1}}}},{key:"_interfaceConfigOverwrite",value:function(){return{DEFAULT_BACKGROUND:window.getComputedStyle(document.querySelector(".cms-navbar-wrapper")).backgroundColor||"#222222",DISABLE_FOCUS_INDICATOR:!0,DISABLE_DOMINANT_SPEAKER_INDICATOR:!0,DISABLE_VIDEO_BACKGROUND:!0,INITIAL_TOOLBAR_TIMEOUT:1e3,SHOW_CHROME_EXTENSION_BANNER:!0,TOOLBAR_ALWAYS_VISIBLE:!1,TOOLBAR_BUTTONS:["camera","chat","closedcaptions","desktop","etherpad","fodeviceselection","fullscreen","hangup","help","microphone","mute-everyone","profile","raisehand","security","settings","sharedvideo","shortcuts","stats","tileview"],TOOLBAR_TIMEOUT:2e3,VERTICAL_FILMSTRIP:!1,VIDEO_QUALITY_LABEL_DISABLED:!0}}},{key:"_options",value:function(){var n={};return this.email&&(n.email=this.email),this.nick&&(n.displayName=this.nick),{configOverwrite:this._configOverwrite(),interfaceConfigOverwrite:this._interfaceConfigOverwrite(),parentNode:this.targetEl,roomName:this.roomName,userInfo:n,height:"100%",width:"100%"}}}]),u}(Et);if(document.body.className=document.body.className.replace(/no-js/,"has-js"),vt(document,"#hamburger_checkbox_toggle",(function(n){n.checked=!1})),vt(document,".js-close-window",(function(n){n.addEventListener("click",(function(n){window.opener&&(n.preventDefault(),setTimeout((function(){return window.close()}),1),window.opener.focus())}))})),document.querySelector('meta[name="convos:start_app"][content="chat"]')){document.querySelector(".footer-wrapper").remove(),document.querySelector("main").remove();new mf({target:document.body})}else if(document.querySelector('meta[name="convos:start_app"][content="jitsi"]')){document.querySelector(".footer-wrapper").remove();var $f=document.querySelector(".video-chat-wrapper");new gf($f.dataset).render($f)}else document.addEventListener("DOMContentLoaded",(function(n){vt(document,"pre",(function(n){return Xr.lineNumbersBlock(n)}))}));function yf(n){if(!("ontouchstart"in window)){var t=function(n){for(var t=0;t<n.length;t++){var e=document.querySelector(n[t]);if(e&&-1!=e.tabIndex)return e}return null},e=n&&t(["input.is-primary-menu-item","a.is-primary-menu-item"]),r=document.activeElement;if(wt(r,["a","input","textarea"])&&e&&r!=e)return e.focus();var o=t([".is-primary-input",'main input[type="text"], article input[type="text"]',"main a, article a"]);return o?o.focus():e?e.focus():void 0}}document.addEventListener("keydown",(function(n){27==n.keyCode&&(vt(document,".fullscreen-wrapper",(function(n){return n.click()})),yf()),13==n.keyCode&&n.shiftKey&&(n.preventDefault(),yf("toggle"))})),document.addEventListener("routerender",(function(){return yf()}))}();
//# sourceMappingURL=convos.5fc457f8.js.map
