!function(){"use strict";var n=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")};var t=function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n};function e(n,t){return n(t={exports:{}},t.exports),t.exports}var r=e((function(n){function t(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?n.exports=t=function(n){return typeof n}:n.exports=t=function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},t(e)}n.exports=t}));var o=function(n,e){return!e||"object"!==r(e)&&"function"!=typeof e?t(n):e},i=e((function(n){function t(e){return n.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},t(e)}n.exports=t})),a=e((function(n){function t(e,r){return n.exports=t=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},t(e,r)}n.exports=t}));var c=function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&a(n,t)};var u=function(n){if(Array.isArray(n))return n};var s=function(n,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n)){var e=[],r=!0,o=!1,i=void 0;try{for(var a,c=n[Symbol.iterator]();!(r=(a=c.next()).done)&&(e.push(a.value),!t||e.length!==t);r=!0);}catch(n){o=!0,i=n}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return e}};var f=function(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r};var l=function(n,t){if(n){if("string"==typeof n)return f(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?f(n,t):void 0}};var d=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var p=function(n,t){return u(n)||s(n,t)||l(n,t)||d()};var h=function(n,t){for(;!Object.prototype.hasOwnProperty.call(n,t)&&null!==(n=i(n)););return n},m=e((function(n){function t(e,r,o){return"undefined"!=typeof Reflect&&Reflect.get?n.exports=t=Reflect.get:n.exports=t=function(n,t,e){var r=h(n,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(e):o.value}},t(e,r,o||e)}n.exports=t}));var g=function(n){return-1!==Function.toString.call(n).indexOf("[native code]")};var v=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}},$=e((function(n){function t(e,r,o){return v()?n.exports=t=Reflect.construct:n.exports=t=function(n,t,e){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(n,r));return e&&a(o,e.prototype),o},t.apply(null,arguments)}n.exports=t})),y=e((function(n){function t(e){var r="function"==typeof Map?new Map:void 0;return n.exports=t=function(n){if(null===n||!g(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(n))return r.get(n);r.set(n,t)}function t(){return $(n,arguments,i(this).constructor)}return t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a(t,n)},t(e)}n.exports=t}));var b=function(n){if(Array.isArray(n))return f(n)};var w=function(n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)};var _=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var x=function(n){return b(n)||w(n)||l(n)||_()};function k(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var E=function(n,t,e){return t&&k(n.prototype,t),e&&k(n,e),n};function O(){}var S=function(n){return n};function C(n){return n()}function R(){return Object.create(null)}function N(n){n.forEach(C)}function D(n){return"function"==typeof n}function M(n,t){return n!=n?t==t:n!==t||n&&"object"===r(n)||"function"==typeof n}function T(n){if(null==n)return O;for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];var o=n.subscribe.apply(n,e);return o.unsubscribe?function(){return o.unsubscribe()}:o}function P(n,t,e){n.$$.on_destroy.push(T(t,e))}function j(n,t,e,r){if(n){var o=A(n,t,e,r);return n[0](o)}}function A(n,t,e,r){return n[1]&&r?function(n,t){for(var e in t)n[e]=t[e];return n}(e.ctx.slice(),n[1](r(t))):e.ctx}function L(n,t,e,o){if(n[2]&&o){var i=n[2](o(e));if(void 0===t.dirty)return i;if("object"===r(i)){for(var a=[],c=Math.max(t.dirty.length,i.length),u=0;u<c;u+=1)a[u]=t.dirty[u]|i[u];return a}return t.dirty|i}return t.dirty}var I="undefined"!=typeof window,U=I?function(){return window.performance.now()}:function(){return Date.now()},z=I?function(n){return requestAnimationFrame(n)}:O,H=new Set;function B(n){H.forEach((function(t){t.c(n)||(H.delete(t),t.f())})),0!==H.size&&z(B)}function q(n,t){n.appendChild(t)}function F(n,t,e){n.insertBefore(t,e||null)}function K(n){n.parentNode.removeChild(n)}function G(n,t){for(var e=0;e<n.length;e+=1)n[e]&&n[e].d(t)}function W(n){return document.createElement(n)}function V(n){return document.createTextNode(n)}function Y(){return V(" ")}function J(){return V("")}function Q(n,t,e,r){return n.addEventListener(t,e,r),function(){return n.removeEventListener(t,e,r)}}function Z(n){return function(t){return t.preventDefault(),n.call(this,t)}}function X(n,t,e){null==e?n.removeAttribute(t):n.getAttribute(t)!==e&&n.setAttribute(t,e)}function nn(n){return Array.from(n.childNodes)}function tn(n,t){t=""+t,n.data!==t&&(n.data=t)}function en(n,t){(null!=t||n.value)&&(n.value=t)}function rn(n,t,e,r){n.style.setProperty(t,e,r?"important":"")}function on(n,t,e){n.classList[e?"add":"remove"](t)}var an,cn=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n(this,t),this.e=W("div"),this.a=r,this.u(e)}return E(t,[{key:"m",value:function(n){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=0;e<this.n.length;e+=1)F(n,this.n[e],t);this.t=n}},{key:"u",value:function(n){this.e.innerHTML=n,this.n=Array.from(this.e.childNodes)}},{key:"p",value:function(n){this.d(),this.u(n),this.m(this.t,this.a)}},{key:"d",value:function(){this.n.forEach(K)}}]),t}(),un=new Set,sn=0;function fn(n){for(var t=5381,e=n.length;e--;)t=(t<<5)-t^n.charCodeAt(e);return t>>>0}function ln(n,t,e,r,o,i,a){for(var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=16.666/r,s="{\n",f=0;f<=1;f+=u){var l=t+(e-t)*i(f);s+=100*f+"%{".concat(a(l,1-l),"}\n")}var d=s+"100% {".concat(a(e,1-e),"}\n}"),p="__svelte_".concat(fn(d),"_").concat(c),h=n.ownerDocument;un.add(h);var m=h.__svelte_stylesheet||(h.__svelte_stylesheet=h.head.appendChild(W("style")).sheet),g=h.__svelte_rules||(h.__svelte_rules={});g[p]||(g[p]=!0,m.insertRule("@keyframes ".concat(p," ").concat(d),m.cssRules.length));var v=n.style.animation||"";return n.style.animation="".concat(v?"".concat(v,", "):"").concat(p," ").concat(r,"ms linear ").concat(o,"ms 1 both"),sn+=1,p}function dn(n,t){var e=(n.style.animation||"").split(", "),r=e.filter(t?function(n){return n.indexOf(t)<0}:function(n){return-1===n.indexOf("__svelte")}),o=e.length-r.length;o&&(n.style.animation=r.join(", "),(sn-=o)||z((function(){sn||(un.forEach((function(n){for(var t=n.__svelte_stylesheet,e=t.cssRules.length;e--;)t.deleteRule(e);n.__svelte_rules={}})),un.clear())})))}function pn(n){an=n}function hn(){if(!an)throw new Error("Function called outside component initialization");return an}function mn(n){hn().$$.on_mount.push(n)}function gn(n){return hn().$$.context.get(n)}function vn(n,t){var e=n.$$.callbacks[t.type];e&&e.slice().forEach((function(n){return n(t)}))}var $n=[],yn=[],bn=[],wn=[],_n=Promise.resolve(),xn=!1;function kn(){xn||(xn=!0,_n.then(Dn))}function En(){return kn(),_n}function On(n){bn.push(n)}function Sn(n){wn.push(n)}var Cn,Rn=!1,Nn=new Set;function Dn(){if(!Rn){Rn=!0;do{for(var n=0;n<$n.length;n+=1){var t=$n[n];pn(t),Mn(t.$$)}for($n.length=0;yn.length;)yn.pop()();for(var e=0;e<bn.length;e+=1){var r=bn[e];Nn.has(r)||(Nn.add(r),r())}bn.length=0}while($n.length);for(;wn.length;)wn.pop()();xn=!1,Rn=!1,Nn.clear()}}function Mn(n){if(null!==n.fragment){n.update(),N(n.before_update);var t=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,t),n.after_update.forEach(On)}}function Tn(n,t,e){var r,o,i;n.dispatchEvent((r="".concat(t?"intro":"outro").concat(e),(i=document.createEvent("CustomEvent")).initCustomEvent(r,!1,!1,o),i))}var Pn,jn=new Set;function An(){Pn={r:0,c:[],p:Pn}}function Ln(){Pn.r||N(Pn.c),Pn=Pn.p}function In(n,t){n&&n.i&&(jn.delete(n),n.i(t))}function Un(n,t,e,r){if(n&&n.o){if(jn.has(n))return;jn.add(n),Pn.c.push((function(){jn.delete(n),r&&(e&&n.d(1),r())})),n.o(t)}}var zn={duration:0};function Hn(n,t,e,r){var o=t(n,e),i=r?0:1,a=null,c=null,u=null;function s(){u&&dn(n,u)}function f(n,t){var e=n.b-i;return t*=Math.abs(e),{a:i,b:n.b,d:e,duration:t,start:n.start,end:n.start+t,group:n.group}}function l(t){var e,r=o||zn,l=r.delay,d=void 0===l?0:l,p=r.duration,h=void 0===p?300:p,m=r.easing,g=void 0===m?S:m,v=r.tick,$=void 0===v?O:v,y=r.css,b={start:U()+d,b:t};t||(b.group=Pn,Pn.r+=1),a?c=b:(y&&(s(),u=ln(n,i,t,h,d,g,y)),t&&$(0,1),a=f(b,h),On((function(){return Tn(n,t,"start")})),e=function(t){if(c&&t>c.start&&(a=f(c,h),c=null,Tn(n,a.b,"start"),y&&(s(),u=ln(n,i,a.b,a.duration,0,g,o.css))),a)if(t>=a.end)$(i=a.b,1-i),Tn(n,a.b,"end"),c||(a.b?s():--a.group.r||N(a.group.c)),a=null;else if(t>=a.start){var e=t-a.start;i=a.a+a.d*g(e/a.duration),$(i,1-i)}return!(!a&&!c)},0===H.size&&z(B),new Promise((function(n){H.add({c:e,f:n})})))}return{run:function(n){D(o)?(Cn||(Cn=Promise.resolve()).then((function(){Cn=null})),Cn).then((function(){o=o(),l(n)})):l(n)},end:function(){s(),a=c=null}}}var Bn="undefined"!=typeof window?window:global;function qn(n,t,e){var r=n.$$.props[t];void 0!==r&&(n.$$.bound[r]=e,e(n.$$.ctx[r]))}function Fn(n){n&&n.c()}function Kn(n,t,e){var r=n.$$,o=r.fragment,i=r.on_mount,a=r.on_destroy,c=r.after_update;o&&o.m(t,e),On((function(){var t=i.map(C).filter(D);a?a.push.apply(a,x(t)):N(t),n.$$.on_mount=[]})),c.forEach(On)}function Gn(n,t){var e=n.$$;null!==e.fragment&&(N(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function Wn(n,t){-1===n.$$.dirty[0]&&($n.push(n),kn(),n.$$.dirty.fill(0)),n.$$.dirty[t/31|0]|=1<<t%31}function Vn(n,t,e,r,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[-1],c=an;pn(n);var u=t.props||{},s=n.$$={fragment:null,ctx:null,props:i,update:O,not_equal:o,bound:R(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:R(),dirty:a},f=!1;if(s.ctx=e?e(n,u,(function(t,e){var r=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:e;return s.ctx&&o(s.ctx[t],s.ctx[t]=r)&&(s.bound[t]&&s.bound[t](r),f&&Wn(n,t)),e})):[],s.update(),f=!0,N(s.before_update),s.fragment=!!r&&r(s.ctx),t.target){if(t.hydrate){var l=nn(t.target);s.fragment&&s.fragment.l(l),l.forEach(K)}else s.fragment&&s.fragment.c();t.intro&&In(n.$$.fragment),Kn(n,t.target,t.anchor),Dn()}pn(c)}var Yn=function(){function t(){n(this,t)}return E(t,[{key:"$destroy",value:function(){Gn(this,1),this.$destroy=O}},{key:"$on",value:function(n,t){var e=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return e.push(t),function(){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}}},{key:"$set",value:function(){}}]),t}(),Jn=e((function(n){var t=function(n){var t=Object.prototype,e=t.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(n,t,e,r){var o=t&&t.prototype instanceof l?t:l,i=Object.create(o.prototype),a=new x(r||[]);return i._invoke=function(n,t,e){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return E()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=b(a,e);if(c){if(c===f)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var u=s(n,t,e);if("normal"===u.type){if(r=e.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(r="completed",e.method="throw",e.arg=u.arg)}}}(n,e,a),i}function s(n,t,e){try{return{type:"normal",arg:n.call(t,e)}}catch(n){return{type:"throw",arg:n}}}n.wrap=u;var f={};function l(){}function d(){}function p(){}var h={};h[i]=function(){return this};var m=Object.getPrototypeOf,g=m&&m(m(k([])));g&&g!==t&&e.call(g,i)&&(h=g);var v=p.prototype=l.prototype=Object.create(h);function $(n){["next","throw","return"].forEach((function(t){n[t]=function(n){return this._invoke(t,n)}}))}function y(n,t){var o;this._invoke=function(i,a){function c(){return new t((function(o,c){!function o(i,a,c,u){var f=s(n[i],n,a);if("throw"!==f.type){var l=f.arg,d=l.value;return d&&"object"===r(d)&&e.call(d,"__await")?t.resolve(d.__await).then((function(n){o("next",n,c,u)}),(function(n){o("throw",n,c,u)})):t.resolve(d).then((function(n){l.value=n,c(l)}),(function(n){return o("throw",n,c,u)}))}u(f.arg)}(i,a,o,c)}))}return o=o?o.then(c,c):c()}}function b(n,t){var e=n.iterator[t.method];if(void 0===e){if(t.delegate=null,"throw"===t.method){if(n.iterator.return&&(t.method="return",t.arg=void 0,b(n,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=s(e,n.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var o=r.arg;return o?o.done?(t[n.resultName]=o.value,t.next=n.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function w(n){var t={tryLoc:n[0]};1 in n&&(t.catchLoc=n[1]),2 in n&&(t.finallyLoc=n[2],t.afterLoc=n[3]),this.tryEntries.push(t)}function _(n){var t=n.completion||{};t.type="normal",delete t.arg,n.completion=t}function x(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(w,this),this.reset(!0)}function k(n){if(n){var t=n[i];if(t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,o=function t(){for(;++r<n.length;)if(e.call(n,r))return t.value=n[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v.constructor=p,p.constructor=d,p[c]=d.displayName="GeneratorFunction",n.isGeneratorFunction=function(n){var t="function"==typeof n&&n.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,p):(n.__proto__=p,c in n||(n[c]="GeneratorFunction")),n.prototype=Object.create(v),n},n.awrap=function(n){return{__await:n}},$(y.prototype),y.prototype[a]=function(){return this},n.AsyncIterator=y,n.async=function(t,e,r,o,i){void 0===i&&(i=Promise);var a=new y(u(t,e,r,o),i);return n.isGeneratorFunction(e)?a:a.next().then((function(n){return n.done?n.value:a.next()}))},$(v),v[c]="Generator",v[i]=function(){return this},v.toString=function(){return"[object Generator]"},n.keys=function(n){var t=[];for(var e in n)t.push(e);return t.reverse(),function e(){for(;t.length;){var r=t.pop();if(r in n)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=k,x.prototype={constructor:x,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!n)for(var t in this)"t"===t.charAt(0)&&e.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var t=this;function r(e,r){return a.type="throw",a.arg=n,t.next=e,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),u=e.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(n,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===n||"continue"===n)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=n,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(n,t){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&t&&(this.next=t),f},finish:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.finallyLoc===n)return this.complete(e.completion,e.afterLoc),_(e),f}},catch:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.tryLoc===n){var r=e.completion;if("throw"===r.type){var o=r.arg;_(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(n,t,e){return this.delegate={iterator:k(n),resultName:t,nextLoc:e},"next"===this.method&&(this.arg=void 0),f}},n}(n.exports);try{regeneratorRuntime=t}catch(n){Function("r","regeneratorRuntime = r")(t)}}));function Qn(n,t,e,r,o,i,a){try{var c=n[i](a),u=c.value}catch(n){return void e(n)}c.done?t(u):Promise.resolve(u).then(r,o)}var Zn=function(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(n){Qn(i,r,o,a,c,"next",n)}function c(n){Qn(i,r,o,a,c,"throw",n)}a(void 0)}))}};var Xn=function(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n},nt=e((function(n,t){var e;e=function(){function n(){for(var n=0,t={};n<arguments.length;n++){var e=arguments[n];for(var r in e)t[r]=e[r]}return t}function t(n){return n.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function e(r){function o(){}function i(t,e,i){if("undefined"!=typeof document){"number"==typeof(i=n({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(e);/^[\{\[]/.test(a)&&(e=a)}catch(n){}e=r.write?r.write(e,t):encodeURIComponent(String(e)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var c="";for(var u in i)i[u]&&(c+="; "+u,!0!==i[u]&&(c+="="+i[u].split(";")[0]));return document.cookie=t+"="+e+c}}function a(n,e){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var c=i[a].split("="),u=c.slice(1).join("=");e||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var s=t(c[0]);if(u=(r.read||r)(u,s)||t(u),e)try{u=JSON.parse(u)}catch(n){}if(o[s]=u,n===s)break}catch(n){}}return n?o[n]:o}}return o.set=i,o.get=function(n){return a(n,!1)},o.getJSON=function(n){return a(n,!0)},o.remove=function(t,e){i(t,"",n(e,{expires:-1}))},o.defaults={},o.withConverter=e,o}((function(){}))},n.exports=e()}));function tt(n,t){for(;n;){if(t.tagName?n==t:n.matches&&n.matches(t))return n;n=n.parentNode}return null}function et(n,t){var e=function e(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var a=this;e.isQueued=!0,e.debounceTid&&clearTimeout(e.debounceTid),e.debounceTid=setTimeout((function(){n.apply(a,o),e.debounceTid=0}),t)};return e.debounceTid=0,e}function rt(n,t,e){var r=n&&n.querySelector("."+t.split(" ").join("."));return r||((r=document.createElement("div")).className=t,n&&n.appendChild(r),e&&e(r),r)}function ot(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"message",e=n.errors||n;return e&&e[0]?e[0][t]||"Unknown error.":""}function it(n){if(!n||!("ontouchstart"in window)){if(n){var t=document.getElementById(n);return t&&t.focus()}var e=document.getElementById("search_input"),r=document.activeElement;if(r!=e&&!ht(r,"body"))return e.focus();for(var o=["#chat_input",'.main input[type="text"]',".main a","#search_input"],i=0;i<o.length;i++){var a=document.querySelector(o[i]);if(a)return a.focus()}}}function at(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.95,r=Math.floor(6*n),o=6*n-r,i=e*(1-t),a=e*(1-o*t),c=e*(1-(1-o)*t),u=255,s=255,f=255;switch(r){case 0:u=e,s=c,f=i;break;case 1:u=a,s=e,f=i;break;case 2:u=i,s=e,f=c;break;case 3:u=i,s=a,f=e;break;case 4:u=c,s=i,f=e;break;case 5:u=e,s=i,f=a}return[Math.floor(255*u),Math.floor(255*s),Math.floor(255*f)]}function ct(n,t){return"array"==t?Array.isArray(n):"object"==t?"object"==r(n)&&null!==n:"undef"==t?null==n:r(n)==t}function ut(n){var t=document,e=n.replace(/\W/g,"_");if(!t.getElementById(e)){var r=t.createElement("script"),o=[e,n];r.id=o[0],r.src=o[1],t.getElementsByTagName("head")[0].appendChild(r)}}function st(n){return Object.keys(n).filter((function(t){return n[t]})).sort().map((function(n){return"has-mode-"+n})).join(" ")}function ft(n,t,e){var r=n.querySelectorAll(t);if(!e)return[].slice.call(r,0);for(var o=[],i=0;i<r.length;i++)o.push(e(r[i],i));return o}function lt(n){return n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function dt(n,t){return"is-visible"===t?!n.hasAttribute("hidden"):("toggle"===t&&(t=n.hasAttribute("hidden")),t?n.removeAttribute("hidden"):n.setAttribute("hidden",""))}function pt(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;if(0==n.length)return"#000";for(var e=0,r=0;r<n.length;r++)e=n.charCodeAt(r)+((e<<5)-e),e&=e;return"#"+at(((e=Math.abs(e%t/t))+.618033988749)%1,.4,.7).map((function(n){return n.toString(16)})).join("")}function ht(n,t){return n&&n.tagName&&n.tagName.toLowerCase()===t||!1}function mt(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var t=16*Math.random()|0;return("x"==n?t:3&t|8).toString(16)}))}function gt(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function vt(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(e),!0).forEach((function(t){Xn(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):gt(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}var $t=function(){function t(){n(this,t),this.cookieName="convos_js",this._on={},this._props={}}return E(t,[{key:"emit",value:function(n){for(var t=this._on[n],e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];for(var i=0;i<(t||[]).length;i++){var a;(a=t[i])[0].apply(a,r)}return this}},{key:"on",value:function(n,t){var e=t?null:new Promise((function(n){t=n})),r=this._on[n]||(this._on[n]=[]),o=[t];r.push(o);var i=function(){var n=r.indexOf(o);-1!=n&&r.splice(n,1)};return e?e.finally(i):i}},{key:"prop",value:function(n,t,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=vt({},r,{name:t,type:n,value:e});switch(this._props[t]=o,o.updateable=-1!=["cookie","persist","rw"].indexOf(n),n){case"cookie":return this._cookieProp(o);case"persist":return this._localStorageProp(o);case"ro":return this._readOnlyProp(o);case"rw":return this._updateableProp(o)}throw"["+this.constructor.name+'] Unknown prop type "'+n+'" for prop "'+t+'".'}},{key:"subscribe",value:function(n){return n(this),this.on("update",n)}},{key:"update",value:function(n){var t=this;return Object.keys(n).forEach((function(e){var r=t._props[e];r&&(r.hasOwnProperty("prev")||(r.prev="ro"==r.type?void 0:r.value),r.updateable&&(r.value=n[e]))})),this._updatedTid||(this._updatedTid=setTimeout(this._delayedUpdate.bind(this),1)),this}},{key:"_cookie",value:function(n,t){var e=document.decodedB64JSONCookies||(document.decodedB64JSONCookies={});if(!e[this.cookieName])try{var r=nt.get(this.cookieName);e[this.cookieName]=JSON.parse(r?atob(r):"{}")}catch(t){console.error("[Reactive:cookie]",Xn({},n,t))}var o=e[this.cookieName]||{};if(1==arguments.length)return o[n];o[n]=t,nt.set(this.cookieName,btoa(JSON.stringify(o),{expires:365}))}},{key:"_cookieProp",value:function(n){var t=this._cookie(n.name);ct(t,"undef")||(n.value=t),ct(t,"undef")&&!n.lazy&&this._cookie(n.name,n.value),this._updateableProp(n)}},{key:"_delayedUpdate",value:function(){var n=this,t={};return Object.keys(this._props).forEach((function(e){var r=n._props[e];if(r.hasOwnProperty("prev")){var o=r.prev;delete r.prev,r.value!==o&&("cookie"==r.type&&n._cookie(e,r.value),"persist"==r.type&&n._localStorage(e,r.value),t[e]="ro"!=r.type)}})),delete this._updatedTid,Object.keys(t).length&&this.emit("update",this,t),t}},{key:"_localStorage",value:function(n,t){var e="convos:"+(this._props[n].key||n);if(2==arguments.length)return localStorage.setItem(e,JSON.stringify(t));try{return localStorage.hasOwnProperty(e)?JSON.parse(localStorage.getItem(e)):void 0}catch(n){return void console.error("[Reactive:localStorage]",Xn({},e,localStorage.getItem(e)),n)}}},{key:"_localStorageProp",value:function(n){var t=this._localStorage(n.name);ct(t,"undef")||(n.value=t),ct(t,"undef")&&!n.lazy&&this._localStorage(n.name,n.value),this._updateableProp(n)}},{key:"_readOnlyProp",value:function(n){if(void 0===n.value)throw"["+this.constructor.name+'] Read-only attribute "'+n.name+'" cannot be undefined';var t="function"==typeof n.value?n.value:function(){return n.value};Object.defineProperty(this,n.name,{get:t})}},{key:"_updateableProp",value:function(n){Object.defineProperty(this,n.name,{get:function(){return n.value}})}}]),t}();function yt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var bt=function(t){c(a,t);var e,r=(e=a,function(){var n,t=i(e);if(yt()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function a(t){var e;return n(this,a),(e=r.call(this)).prop("ro","api",t.api),e.prop("ro","defaultParams",t.defaultParams||{}),e.prop("ro","id",t.id),e.prop("ro","req",{body:null,headers:{}}),e.prop("ro","res",{body:{},headers:{}}),e.prop("rw","err",null),e.prop("rw","status","pending"),e}return E(a,[{key:"error",value:function(n,t){if(n)return this.update({err:Array.isArray(n)?n:[{message:n,source:t}],status:"error"});if(!this.err||!this.err.length)return"";var e=this.err[0],r=e.path&&e.path.match(/\w$/)&&e.path.split("/").pop();return r?r+": "+e.message:e.message}},{key:"perform",value:function(n){var t=this;return this._promise||(this._promise=new Promise((function(e){t.api.spec(t.id).then((function(r){if(!r)return e(t.error('Invalid operationId "'+t.id+'".',"spec"));t.update({status:"loading"});var o=t._paramsToRequest(r,n||t.defaultParams),i=p(o,2),a=i[0],c=i[1];return t.emit("start",c),ct(c.body,"object")&&"function"!=typeof c.body.has&&(c.body=JSON.stringify(c.body)),fetch(a,c)})).then((function(n){return Promise.all([n,n.json()])})).then((function(n){var r=p(n,2),o=r[0],i=r[1];delete t._promise,e(t.parse(o,i))})).catch((function(n){delete t._promise,e(t.error('Failed fetching operationId "'+t.id+'": '+n,"fetch"))}))})))}},{key:"is",value:function(n){return this.status==n}},{key:"parse",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.body;this.res.body=t||n,this.res.status=n.status||"201",n.headers&&(this.res.headers=n.headers);var e=null;return String(this.res.status).match(/^[23]/)||(e=t&&t.errors?t.errors:[{message:n.statusText||"Unknown error."}]),this.update({err:e,status:e?"error":"success"})}},{key:"reset",value:function(){return this.res.body={},this.res.headers={},this.res.status=0,this.update({err:null,status:"pending"})}},{key:"_extractValue",value:function(n,t){if(t.schema&&"form"==(n.tagName||"").toLowerCase())return Object.keys(t.schema.properties).reduce((function(t,e){var r=n[e];return r&&("checkbox"!=r.type||r.checked)?(t[e]=r.value,t):t}),{});if(n[t.name]&&n[t.name].tagName)return n[t.name].value;if(t.schema){var e={};return Object.keys(t.schema.properties).forEach((function(t){e[t]=n[t]})),e}return n[t.name]}},{key:"_hasProperty",value:function(n,t){return"body"==t.in||("formData"==t.in?n.formData.has(t.name):"form"==(n.tagName||"").toLowerCase()?!!n[t.name]:n.hasOwnProperty(t.name))}},{key:"_paramsToRequest",value:function(n,t){var e=this,r={headers:this.req.headers,method:n.method},o=new URL(n.url);return(n.parameters||[]).forEach((function(n){if(e._hasProperty(t,n)||n.required)if("path"==n.in){var i=new RegExp("(%7B|\\{)"+lt(n.name)+"(%7D|\\})","i");o.pathname=o.pathname.replace(i,encodeURIComponent(e._extractValue(t,n)))}else if("query"==n.in)o.searchParams.set(n.name,e._extractValue(t,n));else if("formData"==n.in)delete r.headers["Content-Type"],r.body=t.formData;else if("body"==n.in)r.body=e._extractValue(t,n);else{if("header"!=n.in)throw"[Api] Parameter in:"+n.in+" is not supported.";r.header[n.name]=e._extractValue(t,n.name)}})),[o,r]}}]),a}($t),wt=function(){function t(e){n(this,t),this.protocol=location.protocol,this.url=e}var e;return E(t,[{key:"operation",value:function(n,t){var e=new bt({api:this,id:n,defaultParams:t});return e.req.headers={"Content-Type":"application/json"},e}},{key:"spec",value:(e=Zn(Jn.mark((function n(t){var e,r,o=this;return Jn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this._ops||!t){n.next=2;break}return n.abrupt("return",this._ops[t]);case 2:if(!this._spec){n.next=4;break}return n.abrupt("return",this._spec);case 4:return n.next=6,fetch(this.url);case 6:return e=n.sent,n.next=9,e.json();case 9:if(r=n.sent,this._ops={},this._spec=r,Object.keys(r.paths).forEach((function(n){Object.keys(r.paths[n]).forEach((function(t){var e=r.paths[n][t],i=e.operationId;i&&(e.method=t.toUpperCase(),e.url=o.protocol+"//"+r.host+r.basePath+n+".json",e.parameters=(e.parameters||[]).map((function(n){return o._resolveRef(n)})),o._ops[i]=e)}))})),!this._ops||!t){n.next=15;break}return n.abrupt("return",this._ops[t]);case 15:if(!this._spec){n.next=17;break}return n.abrupt("return",this._spec);case 17:case"end":return n.stop()}}),n,this)}))),function(n){return e.apply(this,arguments)})},{key:"_resolveRef",value:function(n){var t=this,e=n;if(n.$ref){var r=n.$ref.replace(/^#\//,"").split("/");for(e=this._spec;r.length;)e=e[r.shift()]}return ct(e,"object")&&Object.keys(e).forEach((function(n){e[n]=t._resolveRef(e[n])})),e}}]),t}();function _t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function xt(n){var t,e,r,o,i;return{c:function(){X(t=W("i"),"class",e=n[3](n[2],n[1],St)),X(t,"style",r=Ct(n[2],n[1],n[0])),t.hidden=o=!n[2]},m:function(e,r,o){F(e,t,r),o&&i(),i=Q(t,"click",n[6])},p:function(n,i){var a=p(i,1)[0];6&a&&e!==(e=n[3](n[2],n[1],St))&&X(t,"class",e),7&a&&r!==(r=Ct(n[2],n[1],n[0]))&&X(t,"style",r),4&a&&o!==(o=!n[2])&&(t.hidden=o)},i:O,o:O,d:function(n){n&&K(t),i()}}}var kt={regular:"far",solid:"fas"},Et={batman:"https://www.gravatar.com/avatar/ab1839667863f31e359d98364cfdef61",marcusr:"https://www.gravatar.com/avatar/6c056546d802b1a9ac186ab63f9fb632"},Ot=["fas fa-anchor","fas fa-atom","fas fa-award","fas fa-balance-scale","fas fa-baseball-ball","fas fa-basketball-ball","fas fa-bicycle","fas fa-bolt","fas fa-book-reader","fas fa-candy-cane","fas fa-carrot","fas fa-cat","fas fa-chess-knight","fas fa-child","fas fa-coffee","fas fa-cookie-bite","fas fa-crow","fas fa-dice","fas fa-dog","fas fa-dove","fas fa-feather","fas fa-fish","fas fa-gem","fas fa-ghost","fas fa-hard-hat","fas fa-hat-cowboy","fas fa-hat-wizard","fas fa-hiking","fas fa-horse-head","fas fa-horse","fas fa-id-badge","fas fa-igloo","fas fa-mask","fas fa-meteor","fas fa-paint-brush","fas fa-paw","fas fa-pepper-hot","fas fa-pizza-slice","fas fa-portrait","fas fa-puzzle-piece","fas fa-rainbow","fas fa-robot","fas fa-rocket","fas fa-running","fas fa-seedling","fas fa-skating","fas fa-skiing","fas fa-smile","fas fa-snowboarding","fas fa-snowflake","fas fa-snowman","fas fa-swimmer","fas fa-umbrella","fas fa-user-astronaut","fas fa-user-graduate","fas fa-user-ninja","fas fa-user-secret","fas fa-walking","fas fa-yin-yang"],St=!1;function Ct(n,t,e,r){var o=[],i="color:",a=n.match(/^pick:(.+)$/);return a&&Et[a[1]]&&(i="background-color:",o.push('background-image:url("'+Et[a[1]]+'")')),e&&o.push(i+e),o.join(";")}function Rt(n,t,e){var r=t.class,o=void 0===r?"":r,i=t.animation,a=void 0===i?"":i,c=t.color,u=void 0===c?"":c,s=t.family,f=void 0===s?"":s,l=t.name;return n.$set=function(n){"class"in n&&e(4,o=n.class),"animation"in n&&e(5,a=n.animation),"color"in n&&e(0,u=n.color),"family"in n&&e(1,f=n.family),"name"in n&&e(2,l=n.name)},[u,f,l,function(n,t,e){var r=[],i=n.match(/^pick:(.+)$/);if(i){if("Convos"==i[1])return"fas fa-info-circle";if(Et[i[1]])return"fas fa-contributor for-"+i[1].toLowerCase();r.push(function(n){if(n.match(/^\d+$/)&&console.log(Ot[n]),n.match(/^\d+$/))return Ot[n];for(var t=0,e=0;e<n.length;e++)t=n.charCodeAt(e)+((t<<5)-t),t&=t;return t=Math.abs(t),Ot[t%Ot.length]}(i[1]))}else r.push(kt[t]||"fas"),r.push("fa-"+n);return a&&r.push(a.split(" ").map((function(n){return"fa-"+n}))),o&&r.push(o.split(" ")),r.join(" ")},o,a,function(t){vn(n,t)}]}var Nt=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(_t()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,Rt,xt,M,{class:4,animation:5,color:0,family:1,name:2}),r}return u}(Yn);function Dt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Mt={0:"Jan",1:"Feb",2:"March",3:"Apr",4:"May",5:"Jun",6:"July",7:"Aug",8:"Sept",9:"Oct",10:"Nov",11:"Dec"},Tt=function(n){return!!String(n||"").match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)},Pt=function(t){c(a,t);var e,r=(e=a,function(){var n,t=i(e);if(Dt()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function a(t){return n(this,a),"string"!=typeof t||t.match(/Z$/)||(t+="Z"),r.call(this,t||new Date)}return E(a,[{key:"getHumanDate",value:function(){var n=this.getMonthAbbr()+" "+this.getDate(),t=new a;return this.getYear()==t.getYear()||(n+=", "+this.getFullYear()),n}},{key:"getHM",value:function(){return[this.getHours(),this.getMinutes()].map((function(n){return n<10?"0"+n:n})).join(":")}},{key:"getMonthAbbr",value:function(){return Mt[this.getMonth()]||""}},{key:"setDate",value:function(n,t){return t?m(i(a.prototype),"setUTCDate",this).call(this,n):m(i(a.prototype),"setDate",this).call(this,n),this}},{key:"setFullYear",value:function(n,t){return t?m(i(a.prototype),"setUTCFullYear",this).call(this,n):m(i(a.prototype),"setFullYear",this).call(this,n),this}},{key:"setHours",value:function(n,t){return t?m(i(a.prototype),"setUTCHours",this).call(this,n):m(i(a.prototype),"setHours",this).call(this,n),this}},{key:"setMilliseconds",value:function(n,t){return t?m(i(a.prototype),"setUTCMilliseconds",this).call(this,n):m(i(a.prototype),"setMilliseconds",this).call(this,n),this}},{key:"setMinutes",value:function(n,t){return t?m(i(a.prototype),"setUTCMinutes",this).call(this,n):m(i(a.prototype),"setMinutes",this).call(this,n),this}},{key:"setMonth",value:function(n,t){return t?m(i(a.prototype),"setUTCMonth",this).call(this,n):m(i(a.prototype),"setMonth",this).call(this,n),this}},{key:"setSeconds",value:function(n,t){return t?m(i(a.prototype),"setUTCSeconds",this).call(this,n):m(i(a.prototype),"setSeconds",this).call(this,n),this}},{key:"setTime",value:function(n){return m(i(a.prototype),"setTime",this).call(this,n),this}},{key:"setYear",value:function(n){return this.setYear(n),this}},{key:"toEpoch",value:function(){return this.getTime()/1e3}}]),a}(y(Date));function jt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function At(n){var t,e,r,o,i,a=new Nt({props:{animation:n[3],name:n[0]}}),c=n[12].default,u=j(c,n,n[11],null);return{c:function(){t=W("button"),Fn(a.$$.fragment),e=Y(),u&&u.c(),X(t,"class",r=n[4].join(" ")),t.disabled=n[5],X(t,"type",n[2])},m:function(r,c,s){F(r,t,c),Kn(a,t,null),q(t,e),u&&u.m(t,null),o=!0,s&&i(),i=Q(t,"click",n[13])},p:function(n,e){var i=p(e,1)[0],s={};8&i&&(s.animation=n[3]),1&i&&(s.name=n[0]),a.$set(s),u&&u.p&&2048&i&&u.p(A(c,n,n[11],null),L(c,n[11],i,null)),(!o||16&i&&r!==(r=n[4].join(" ")))&&X(t,"class",r),(!o||32&i)&&(t.disabled=n[5]),(!o||4&i)&&X(t,"type",n[2])},i:function(n){o||(In(a.$$.fragment,n),In(u,n),o=!0)},o:function(n){Un(a.$$.fragment,n),Un(u,n),o=!1},d:function(n){n&&K(t),Gn(a),u&&u.d(n),i()}}}function Lt(n,t,e){var r,o=O,i=function(){return o(),o=T(m,(function(n){return e(9,r=n)})),m};n.$$.on_destroy.push((function(){return o()}));var a="",c=[],u=!1,s=0,f=t.disabled,l=void 0!==f&&f,d=t.icon,p=void 0===d?"":d,h=t.op,m=void 0===h?new bt({api:!1,id:""}):h;i();var g=t.type,v=void 0===g?"":g;function $(n){n&&e(8,s=(new Pt).toEpoch()),e(3,a=n?"spin":""),e(7,u=n)}var y,b=t.$$slots,w=void 0===b?{}:b,_=t.$$scope;return n.$set=function(n){"disabled"in n&&e(6,l=n.disabled),"icon"in n&&e(0,p=n.icon),"op"in n&&i(e(1,m=n.op)),"type"in n&&e(2,v=n.type),"$$scope"in n&&e(11,_=n.$$scope)},n.$$.update=function(){512&n.$$.dirty&&r.is("loading")&&$(!0),768&n.$$.dirty&&(r.is("loading")||setTimeout((function(){return $(!1)}),700-((new Pt).toEpoch()-s))),1&n.$$.dirty&&e(4,c=["btn","for-"+(p||"default")]),192&n.$$.dirty&&e(5,y=l||u)},[p,m,v,a,c,y,l,u,s,r,$,_,w,function(t){vn(n,t)}]}var It=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(jt()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,Lt,At,M,{disabled:6,icon:0,op:1,type:2}),r}return u}(Yn);function Ut(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var zt=function(n){return{}},Ht=function(n){return{}};function Bt(n){var t,e,r,o,i,a,c,u=new Nt({props:{family:"regular",name:n[7]}});u.$on("click",n[14]);var s,f=n[9].label,l=j(f,n,n[8],Ht),d=l||{c:function(){s=V("Label")},m:function(n,t){F(n,s,t)},d:function(n){n&&K(s)}};return{c:function(){t=W("div"),e=W("input"),r=Y(),Fn(u.$$.fragment),o=Y(),i=W("label"),d&&d.c(),X(e,"type","checkbox"),X(e,"id",n[4]),X(e,"name",n[3]),e.__value=n[1],e.value=e.__value,e.disabled=n[2],X(i,"for",n[4]),X(t,"class","checkbox"),on(t,"has-focus",n[6]),on(t,"is-disabled",n[2])},m:function(s,f,l){F(s,t,f),q(t,e),e.checked=n[0],n[11](e),q(t,r),Kn(u,t,null),q(t,o),q(t,i),d&&d.m(i,null),a=!0,l&&N(c),c=[Q(e,"change",n[10]),Q(e,"blur",n[12]),Q(e,"focus",n[13])]},p:function(n,r){var o=p(r,1)[0];(!a||16&o)&&X(e,"id",n[4]),(!a||8&o)&&X(e,"name",n[3]),(!a||2&o)&&(e.__value=n[1]),e.value=e.__value,(!a||4&o)&&(e.disabled=n[2]),1&o&&(e.checked=n[0]);var c={};128&o&&(c.name=n[7]),u.$set(c),l&&l.p&&256&o&&l.p(A(f,n,n[8],Ht),L(f,n[8],o,zt)),(!a||16&o)&&X(i,"for",n[4]),64&o&&on(t,"has-focus",n[6]),4&o&&on(t,"is-disabled",n[2])},i:function(n){a||(In(u.$$.fragment,n),In(d,n),a=!0)},o:function(n){Un(u.$$.fragment,n),Un(d,n),a=!1},d:function(e){e&&K(t),n[11](null),Gn(u),d&&d.d(e),N(c)}}}function qt(n,t,e){var r,o=t.checked,i=void 0!==o&&o,a=t.disabled,c=void 0!==a&&a,u=t.name,s=void 0===u?"":u,f=t.id,l=void 0===f?s?"form_"+s:mt():f,d=t.value,p=void 0===d?1:d,h=!1,m=t.$$slots,g=void 0===m?{}:m,v=t.$$scope;var $;return n.$set=function(n){"checked"in n&&e(0,i=n.checked),"disabled"in n&&e(2,c=n.disabled),"name"in n&&e(3,s=n.name),"id"in n&&e(4,l=n.id),"value"in n&&e(1,p=n.value),"$$scope"in n&&e(8,v=n.$$scope)},n.$$.update=function(){32&n.$$.dirty&&r&&!r.syncValue&&(e(5,r.syncValue=function(){var n;e(0,(n=[this.checked,this.value],i=n[0],p=n[1],n),i,(e(1,p),e(5,r)))},r),r.syncValue()),1&n.$$.dirty&&e(7,$=i?"check-square":"square")},[i,p,c,s,l,r,h,$,v,g,function(){i=this.checked,e(0,i),e(5,r)},function(n){yn[n?"unshift":"push"]((function(){e(5,r=n)}))},function(){e(6,h=!1)},function(){e(6,h=!0)},function(){c||e(0,i=!i)}]}var Ft=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Ut()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,qt,Bt,M,{checked:0,disabled:2,name:3,id:4,value:1}),r}return u}(Yn),Kt=function(){function t(e){var r=this;n(this,t),this._url=new URL("http://localhost"),Object.defineProperty(this,"href",{get:function(){return r._url.href.replace(/^http:/,r.protocol)},set:function(n){r._url.href=n.replace(/^\w+:/,"http:"),r.protocol=n.match(/^\w+:/)[0]}}),["host","pathname","password","searchParams","username"].forEach((function(n){Object.defineProperty(r,n,{get:function(){return r._url[n]},set:function(t){r._url[n]=t}})})),this.href=e}return E(t,[{key:"fromForm",value:function(n){var t=n.server.value;return n.nick.value.length&&this.searchParams.append("nick",n.nick.value),this.searchParams.append("tls",n.tls.checked?"1":"0"),this.searchParams.append("tls_verify",n.tls_verify&&n.tls_verify.checked?"1":"0"),this.host=t.match(/:\d+$/)?t:t+":6667",this.password=n.password.value,this.username=n.username.value,this}},{key:"toString",value:function(){return this.href.replace(/^http:/,this.protocol)}}]),t}(),Gt=function(){var n={base:"https://twemoji.maxcdn.com/v/12.1.5/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:function(n){var t="string"==typeof n?parseInt(n,16):n;if(t<65536)return c(t);return c(55296+((t-=65536)>>10),56320+(1023&t))},toCodePoint:g},onerror:function(){this.parentNode&&this.parentNode.replaceChild(u(this.alt,!1),this)},parse:function(t,e){e&&"function"!=typeof e||(e={callback:e});return("string"==typeof t?d:l)(t,{callback:e.callback||s,attributes:"function"==typeof e.attributes?e.attributes:h,base:"string"==typeof e.base?e.base:n.base,ext:e.ext||n.ext,size:e.folder||(r=e.size||n.size,"number"==typeof r?r+"x"+r:r),className:e.className||n.className,onerror:e.onerror||n.onerror});var r},replace:m,test:function(n){e.lastIndex=0;var t=e.test(n);return e.lastIndex=0,t}},t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},e=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[#*0-9]\ufe0f?\u20e3|(?:[©®\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5\udeeb\udeec\udef4-\udefa\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd71\udd73-\udd76\udd7a-\udda2\udda5-\uddaa\uddae-\uddb4\uddb7\uddba\uddbc-\uddca\uddd0\uddde-\uddff\ude70-\ude73\ude78-\ude7a\ude80-\ude82\ude90-\ude95]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,r=/\uFE0F/g,o=String.fromCharCode(8205),i=/[&<>'"]/g,a=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,c=String.fromCharCode;return n;function u(n,t){return document.createTextNode(t?n.replace(r,""):n)}function s(n,t){return"".concat(t.base,t.size,"/",n,t.ext)}function f(n){return g(n.indexOf(o)<0?n.replace(r,""):n)}function l(n,t){for(var r,o,i,c,s,l,d,p,h,m,g,v,$,y=function n(t,e){for(var r,o,i=t.childNodes,c=i.length;c--;)3===(o=(r=i[c]).nodeType)?e.push(r):1!==o||"ownerSVGElement"in r||a.test(r.nodeName.toLowerCase())||n(r,e);return e}(n,[]),b=y.length;b--;){for(i=!1,c=document.createDocumentFragment(),l=(s=y[b]).nodeValue,p=0;d=e.exec(l);){if((h=d.index)!==p&&c.appendChild(u(l.slice(p,h),!0)),v=f(g=d[0]),p=h+g.length,$=t.callback(v,t),v&&$){for(o in(m=new Image).onerror=t.onerror,m.setAttribute("draggable","false"),r=t.attributes(g,v))r.hasOwnProperty(o)&&0!==o.indexOf("on")&&!m.hasAttribute(o)&&m.setAttribute(o,r[o]);m.className=t.className,m.alt=g,m.src=$,i=!0,c.appendChild(m)}m||c.appendChild(u(g,!1)),m=null}i&&(p<l.length&&c.appendChild(u(l.slice(p),!0)),s.parentNode.replaceChild(c,s))}return n}function d(n,t){return m(n,(function(n){var e,r,o=n,a=f(n),c=t.callback(a,t);if(a&&c){for(r in o="<img ".concat('class="',t.className,'" ','draggable="false" ','alt="',n,'"',' src="',c,'"'),e=t.attributes(n,a))e.hasOwnProperty(r)&&0!==r.indexOf("on")&&-1===o.indexOf(" "+r+"=")&&(o=o.concat(" ",r,'="',e[r].replace(i,p),'"'));o=o.concat("/>")}return o}))}function p(n){return t[n]}function h(){return null}function m(n,t){return String(n).replace(e,t)}function g(n,t){for(var e=[],r=0,o=0,i=0;i<n.length;)r=n.charCodeAt(i++),o?(e.push((65536+(o-55296<<10)+(r-56320)).toString(16)),o=0):55296<=r&&r<=56319?o=r:e.push(r.toString(16));return e.join(t||"-")}}(),Wt=Object.prototype.hasOwnProperty,Vt=function(){for(var n=[],t=0;t<256;++t)n.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return n}(),Yt=function(n,t){for(var e=t&&t.plainObjects?Object.create(null):{},r=0;r<n.length;++r)void 0!==n[r]&&(e[r]=n[r]);return e},Jt={arrayToObject:Yt,assign:function(n,t){return Object.keys(t).reduce((function(n,e){return n[e]=t[e],n}),n)},compact:function(n){for(var t=[{obj:{o:n},prop:"o"}],e=[],o=0;o<t.length;++o)for(var i=t[o],a=i.obj[i.prop],c=Object.keys(a),u=0;u<c.length;++u){var s=c[u],f=a[s];"object"===r(f)&&null!==f&&-1===e.indexOf(f)&&(t.push({obj:a,prop:s}),e.push(f))}return function(n){for(var t;n.length;){var e=n.pop();if(t=e.obj[e.prop],Array.isArray(t)){for(var r=[],o=0;o<t.length;++o)void 0!==t[o]&&r.push(t[o]);e.obj[e.prop]=r}}return t}(t)},decode:function(n){try{return decodeURIComponent(n.replace(/\+/g," "))}catch(t){return n}},encode:function(n){if(0===n.length)return n;for(var t="string"==typeof n?n:String(n),e="",r=0;r<t.length;++r){var o=t.charCodeAt(r);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?e+=t.charAt(r):o<128?e+=Vt[o]:o<2048?e+=Vt[192|o>>6]+Vt[128|63&o]:o<55296||o>=57344?e+=Vt[224|o>>12]+Vt[128|o>>6&63]+Vt[128|63&o]:(r+=1,o=65536+((1023&o)<<10|1023&t.charCodeAt(r)),e+=Vt[240|o>>18]+Vt[128|o>>12&63]+Vt[128|o>>6&63]+Vt[128|63&o])}return e},isBuffer:function(n){return null!=n&&!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))},isRegExp:function(n){return"[object RegExp]"===Object.prototype.toString.call(n)},merge:function n(t,e,o){if(!e)return t;if("object"!==r(e)){if(Array.isArray(t))t.push(e);else{if("object"!==r(t))return[t,e];(o.plainObjects||o.allowPrototypes||!Wt.call(Object.prototype,e))&&(t[e]=!0)}return t}if("object"!==r(t))return[t].concat(e);var i=t;return Array.isArray(t)&&!Array.isArray(e)&&(i=Yt(t,o)),Array.isArray(t)&&Array.isArray(e)?(e.forEach((function(e,i){Wt.call(t,i)?t[i]&&"object"===r(t[i])?t[i]=n(t[i],e,o):t.push(e):t[i]=e})),t):Object.keys(e).reduce((function(t,r){var i=e[r];return Wt.call(t,r)?t[r]=n(t[r],i,o):t[r]=i,t}),i)}},Qt=(String.prototype.replace,Date.prototype.toISOString,Object.prototype.hasOwnProperty),Zt={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:Jt.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},Xt=function(n,t,e){if(n){var r=e.allowDots?n.replace(/\.([^.[]+)/g,"[$1]"):n,o=/(\[[^[\]]*])/g,i=/(\[[^[\]]*])/.exec(r),a=i?r.slice(0,i.index):r,c=[];if(a){if(!e.plainObjects&&Qt.call(Object.prototype,a)&&!e.allowPrototypes)return;c.push(a)}for(var u=0;null!==(i=o.exec(r))&&u<e.depth;){if(u+=1,!e.plainObjects&&Qt.call(Object.prototype,i[1].slice(1,-1))&&!e.allowPrototypes)return;c.push(i[1])}return i&&c.push("["+r.slice(i.index)+"]"),function(n,t,e){for(var r=t,o=n.length-1;o>=0;--o){var i,a=n[o];if("[]"===a)i=(i=[]).concat(r);else{i=e.plainObjects?Object.create(null):{};var c="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,u=parseInt(c,10);!isNaN(u)&&a!==c&&String(u)===c&&u>=0&&e.parseArrays&&u<=e.arrayLimit?(i=[])[u]=r:i[c]=r}r=i}return r}(c,t,e)}},ne=function(n,t){var e=t?Jt.assign({},t):{};if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(e.ignoreQueryPrefix=!0===e.ignoreQueryPrefix,e.delimiter="string"==typeof e.delimiter||Jt.isRegExp(e.delimiter)?e.delimiter:Zt.delimiter,e.depth="number"==typeof e.depth?e.depth:Zt.depth,e.arrayLimit="number"==typeof e.arrayLimit?e.arrayLimit:Zt.arrayLimit,e.parseArrays=!1!==e.parseArrays,e.decoder="function"==typeof e.decoder?e.decoder:Zt.decoder,e.allowDots="boolean"==typeof e.allowDots?e.allowDots:Zt.allowDots,e.plainObjects="boolean"==typeof e.plainObjects?e.plainObjects:Zt.plainObjects,e.allowPrototypes="boolean"==typeof e.allowPrototypes?e.allowPrototypes:Zt.allowPrototypes,e.parameterLimit="number"==typeof e.parameterLimit?e.parameterLimit:Zt.parameterLimit,e.strictNullHandling="boolean"==typeof e.strictNullHandling?e.strictNullHandling:Zt.strictNullHandling,""===n||null==n)return e.plainObjects?Object.create(null):{};for(var r="string"==typeof n?function(n,t){for(var e={},r=t.ignoreQueryPrefix?n.replace(/^\?/,""):n,o=t.parameterLimit===1/0?void 0:t.parameterLimit,i=r.split(t.delimiter,o),a=0;a<i.length;++a){var c,u,s=i[a],f=s.indexOf("]="),l=-1===f?s.indexOf("="):f+1;-1===l?(c=t.decoder(s,Zt.decoder),u=t.strictNullHandling?null:""):(c=t.decoder(s.slice(0,l),Zt.decoder),u=t.decoder(s.slice(l+1),Zt.decoder)),Qt.call(e,c)?e[c]=[].concat(e[c]).concat(u):e[c]=u}return e}(n,e):n,o=e.plainObjects?Object.create(null):{},i=Object.keys(r),a=0;a<i.length;++a){var c=i[a],u=Xt(c,r[c],e);o=Jt.merge(o,u,e)}return Jt.compact(o)};function te(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var ee=new(function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(te()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(){var e;return n(this,u),(e=a.call(this)).prop("ro","basePath",(function(){return e._basePath})),e.prop("ro","hash",(function(){return(e._location.hash||"").replace(/^#/,"")})),e.prop("ro","path",(function(){return e._path})),e.prop("ro","params",(function(){return e._params})),e.prop("ro","query",(function(){return e._query})),e.prop("rw","activeMenu",""),e.prop("rw","baseUrl",""),e.prop("rw","component",null),e.prop("rw","match",""),e.prop("rw","requireLogin",!1),e.prop("rw","state",{}),e.prop("rw","title",document.title||""),e.prop("persist","lastUrl",""),e._history=window.history,e._location=window.location,e._onClick=e._onClick.bind(t(e)),e._onpopstate=e._onpopstate.bind(t(e)),e._basePath="",e._params={},e._path="/",e._query={},e._routes=[],e}return E(u,[{key:"dialogPath",value:function(n){var t=["","chat"];return n.connection_id&&t.push(n.connection_id),n.dialog_id&&t.push(n.dialog_id),t.map((function(n){return encodeURIComponent(n)})).join("/")}},{key:"go",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.replace){var r=[!0,this.state];e=r[0],t=r[1]}0==n.indexOf(this.baseUrl)&&(n=n.substr(this.baseUrl.length));var o=this.baseUrl+n;if(o==this._location.href)return this;this._history[e?"replaceState":"pushState"](t,this.title,o),this.render(o,t)}},{key:"param",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=this.params;if(e.hasOwnProperty(n))return e[n];var r=this.query;return r.hasOwnProperty(n)?r[n]:t}},{key:"render",value:function(n,t){this._started||(window.addEventListener("click",this._onClick),window.addEventListener("popstate",this._onpopstate),this._started=!0),n||(n=this._location.href),t||(t=this.state);var e=n.substr(this.baseUrl.length).split("#")[0].split("?");this._query=2==e.length?ne(e.pop()):{},this._path=e[0],this._params={};for(var r=0;r<this._routes.length;r++){var o=this._routes[r],i=this._path.match(o.re);if(i){for(var a=0;a<o.names.length;a++)this._params[o.names[a]]=decodeURIComponent(i[a+1]);return this.update({activeMenu:"",match:o.path,state:t}),o.cb(this),this}}throw'[Route] No route for "'+n+'".'}},{key:"subscribe",value:function(n){return n(this),this.on("update",n)}},{key:"to",value:function(n,t){var e=[],r=[];n.split("/").forEach((function(n,t){var o=n;0==n.indexOf("*")?(o="(.*)",e.push(String(n.slice(1)||t))):0==n.indexOf(":")&&(o="([^/]+)",e.push(String(n.slice(1)||t))),r.push(o)})),this._routes.push({cb:t,names:e,path:n,re:new RegExp("^"+r.join("/")+"$")})}},{key:"update",value:function(n){return n.baseUrl&&(n.baseUrl=n.baseUrl.replace(/\/+$/,""),this._basePath=new URL(n.baseUrl).pathname.replace(/\/+$/,"")),m(i(u.prototype),"update",this).call(this,n)}},{key:"urlFor",value:function(n){return n.match(/^\w+:/)||n.match(/^#/)?n:this.basePath+n}},{key:"urlToForm",value:function(n){var t=this;Object.keys(this.query).forEach((function(e){var r=t.query[e],o=n[e];o&&o.tagName&&("checkbox"==o.type?o.checked=!!r:o.value=r,o.syncValue&&o.syncValue())}))}},{key:"_onClick",value:function(n){if(!(n.metaKey||n.ctrlKey||n.shiftKey||n.defaultPrevented)){var t=n.target&&n.target.closest("a");if(t&&t.href){if("_self"==t.target)if((0==t.href.indexOf("/")?this.baseUrl+t.href:t.href)==location.href)return location.reload();if(!t.hasAttribute("download")&&!t.hasAttribute("target")){var e=t&&t.href.match(/#activeMenu:(\w*)/);if(e){if(tt(n.target,".sidebar-left")&&!t)return;this.update({activeMenu:e[1]==this.activeMenu?"":e[1]}),n.preventDefault()}var r=t.getAttribute("href")||"";0==r.indexOf(this.baseUrl)&&(r=r.substr(this.baseUrl.length)),0==r.indexOf(this.basePath)&&(r=r.substr(this.basePath.length)),0==r.indexOf("/")&&(this.go(r,{},t.hasAttribute("replace")),n.preventDefault())}}}}},{key:"_onpopstate",value:function(n){this.render(this._location.href,n.state)}},{key:"_pathWithoutPrefix",value:function(n){return 0==n.indexOf(this.basePath)?n.substr(this.basePath.length):n}}]),u}($t)),re=new RegExp("(\\\\?)`([^`]+)`","g"),oe={},ie={},ae=new RegExp("\\b[a-z]{2,5}://\\S+","g"),ce=new RegExp("\\[([^\\]]+)\\]\\(([^)]+)\\)","g"),ue=new RegExp("(^|\\s)(\\\\?)(\\*+)(\\w[^<]*?)\\3","g"),se={":confused:":":/",":disappointed:":":(",":grin:":";D",":heart:":"&lt;3",":slight_smile:":":)",":smiley:":":D",":stuck_out_tongue:":":P",":wink:":";)"},fe=new RegExp("(^|\\s)(:\\w+:|"+Object.keys(se).map((function(n){return lt(se[n])})).join("|")+")(?=\\W|$)","gi"),le={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"};function de(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"single";return window.__emojiList&&(window.__emojiList.forEach((function(n){if(":"==(n.shortname||"")[0]){if(se[n.shortname]&&(ie[se[n.shortname]]=n),ie[n.shortname]=n,n.category){var t=":"+n.category;oe[t]||(oe[t]=[]),oe[t].push(n)}n.shortname.match(/(_|:)\w/g).forEach((function(t){oe[t]||(oe[t]=[]),oe[t].push(n)})),delete n.category,delete n.html,delete n.order,delete n.unicode}})),delete window.__emojiList),"group"==t?oe[n]||[]:ie[n]||{}}function pe(n){n=n.replace(/[&<>"']/g,(function(n){return le[n]}));var t=0;return n=n.replace(/^&gt;\s(.*)/,(function(n,t){return"<blockquote>"+t+"</blockquote>"})).replace(ue,(function(n,t,e,r,o){return 1==r.length?e?n.replace(/^\\/,""):t+"<em>"+o+"</em>":2==r.length?e?n.replace(/^\\/,""):t+"<strong>"+o+"</strong>":3==r.length?e?n.replace(/^\\/,""):t+"<em><strong>"+o+"</strong></em>":n})).replace(ce,(function(n,e,r){t++;var o=r.match(/^\s*(\w+):/)||["",""];if(o[1].length>4||o[1].match(/^javascript/i))return n;var i=r.substring(0,1),a=-1!=["/","#"].indexOf(i)?"":' target="_blank"';return'<a href="'+ee.urlFor(r)+'"'+a+">"+e+"</a>"})).replace(re,(function(n,t,e){return t?n.replace(/^\\/,""):"<code>"+e+"</code>"})),t||(n=n.replace(ae,(function(n){var t=n.match(/^(.*?)(&\w+;|\W)?$/);return'<a href="'+t[1]+'" target="_blank">'+t[1].replace(/^https:\/\//,"")+"</a>"+(t[2]||"")})).replace(/mailto:(\S+)/,(function(n,t){return-1!=n.indexOf('">')?n:'<a href="'+n+'" target="_blank">'+t+"</a>"}))),n=Gt.parse(n.replace(fe,(function(n,t,e){return t+(de(e).emoji||e)})))}var he={en:{"Test %1":"Test %1"}};function me(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];var o=String(he.en[n]||n);return o.replace(/(%?)%(\d+)/g,(function(n,t,r){return"%"==t?t+r:e[r-1]}))}function ge(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];return pe(me.apply(void 0,[n].concat(e)))}function ve(n,t){return"Not found."==t.frozen?"":n.frozen?me(n.frozen):n==t?me("Connection messages."):(t.frozen?me(t.frozen):t.topic)||t.is_private&&me("Private conversation.")||me("No topic is set.")}function $e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function ye(n){var t,e,r=me(n[1].error())+"";return{c:function(){t=W("div"),e=V(r),X(t,"class","error")},m:function(n,r){F(n,t,r),q(t,e)},p:function(n,t){2&t&&r!==(r=me(n[1].error())+"")&&tn(e,r)},d:function(n){n&&K(t)}}}function be(n){var t,e=n[1].is("error"),r=e&&ye(n);return{c:function(){r&&r.c(),t=J()},m:function(n,e){r&&r.m(n,e),F(n,t,e)},p:function(n,o){var i=p(o,1)[0];2&i&&(e=n[1].is("error")),e?r?r.p(n,i):((r=ye(n)).c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:O,o:O,d:function(n){r&&r.d(n),n&&K(t)}}}function we(n,t,e){var r,o=O,i=function(){return o(),o=T(c,(function(n){return e(1,r=n)})),c};n.$$.on_destroy.push((function(){return o()}));var a=t.op,c=void 0===a?new bt({}):a;return i(),n.$set=function(n){"op"in n&&i(e(0,c=n.op))},[c,r]}var _e=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if($e()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,we,be,M,{op:0}),r}return u}(Yn);function xe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function ke(n){var t,e,r,o,i,a=me(n[0].dialog_id?"Conversation":"Connection")+"",c=new Nt({props:{name:"times-circle"}});return{c:function(){t=W("a"),e=W("h2"),r=V(a),o=Y(),Fn(c.$$.fragment),X(t,"href","#activeMenu:"),X(t,"class","sidebar__header for-settings")},m:function(n,a){F(n,t,a),q(t,e),q(e,r),q(t,o),Kn(c,t,null),i=!0},p:function(n,t){var e=p(t,1)[0];(!i||1&e)&&a!==(a=me(n[0].dialog_id?"Conversation":"Connection")+"")&&tn(r,a)},i:function(n){i||(In(c.$$.fragment,n),i=!0)},o:function(n){Un(c.$$.fragment,n),i=!1},d:function(n){n&&K(t),Gn(c)}}}function Ee(n,t,e){var r=t.dialog,o=void 0===r?{}:r;return n.$set=function(n){"dialog"in n&&e(0,o=n.dialog)},[o]}var Oe=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(xe()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,Ee,ke,M,{dialog:0}),r}return u}(Yn);function Se(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Ce=function(n){return{}},Re=function(n){return{}};function Ne(n){var t,e,r,o,i,a,c=n[8].label,u=j(c,n,n[7],Re),s=u||function(n){var t;return{c:function(){t=V("Label")},m:function(n,e){F(n,t,e)},d:function(n){n&&K(t)}}}();return{c:function(){t=W("div"),e=W("label"),s&&s.c(),r=Y(),o=W("textarea"),X(e,"for",n[3]),X(o,"name",n[2]),X(o,"placeholder",n[4]),X(o,"id",n[3]),o.readOnly=n[5],X(t,"class","text-area"),t.hidden=n[1]},m:function(c,u,f){F(c,t,u),q(t,e),s&&s.m(e,null),q(t,r),q(t,o),n[9](o),en(o,n[0]),i=!0,f&&a(),a=Q(o,"input",n[10])},p:function(n,r){var a=p(r,1)[0];u&&u.p&&128&a&&u.p(A(c,n,n[7],Re),L(c,n[7],a,Ce)),(!i||8&a)&&X(e,"for",n[3]),(!i||4&a)&&X(o,"name",n[2]),(!i||16&a)&&X(o,"placeholder",n[4]),(!i||8&a)&&X(o,"id",n[3]),(!i||32&a)&&(o.readOnly=n[5]),1&a&&en(o,n[0]),(!i||2&a)&&(t.hidden=n[1])},i:function(n){i||(In(s,n),i=!0)},o:function(n){Un(s,n),i=!1},d:function(e){e&&K(t),s&&s.d(e),n[9](null),a()}}}function De(n,t,e){var r,o=t.hidden,i=void 0!==o&&o,a=t.name,c=void 0===a?"":a,u=t.id,s=void 0===u?c?"form_"+c:mt():u,f=t.placeholder,l=void 0===f?"":f,d=t.readonly,p=void 0!==d&&d,h=t.value,m=void 0===h?"":h,g=t.$$slots,v=void 0===g?{}:g,$=t.$$scope;return n.$set=function(n){"hidden"in n&&e(1,i=n.hidden),"name"in n&&e(2,c=n.name),"id"in n&&e(3,s=n.id),"placeholder"in n&&e(4,l=n.placeholder),"readonly"in n&&e(5,p=n.readonly),"value"in n&&e(0,m=n.value),"$$scope"in n&&e(7,$=n.$$scope)},n.$$.update=function(){64&n.$$.dirty&&r&&!r.syncValue&&(e(6,r.syncValue=function(){e(0,m=this.value)},r),r.syncValue())},[m,i,c,s,l,p,r,$,v,function(n){yn[n?"unshift":"push"]((function(){e(6,r=n)}))},function(){m=this.value,e(0,m),e(6,r)}]}var Me=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Se()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,De,Ne,M,{hidden:1,name:2,id:3,placeholder:4,readonly:5,value:0}),r}return u}(Yn);function Te(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Pe=function(n){return{}},je=function(n){return{}},Ae=function(n){return{}},Le=function(n){return{}};function Ie(n){var t,e,r,o,i,a,c,u,s=n[11].label,f=j(s,n,n[10],Le),l=f||{c:function(){u=V("Label")},m:function(n,t){F(n,u,t)},d:function(n){n&&K(u)}},d=n[11].help,h=j(d,n,n[10],je);return{c:function(){t=W("div"),e=W("label"),l&&l.c(),r=Y(),o=W("input"),i=Y(),h&&h.c(),X(e,"for",n[4]),X(o,"type",n[7]),X(o,"name",n[3]),X(o,"id",n[4]),X(o,"autocomplete",n[1]),X(o,"placeholder",n[5]),o.readOnly=n[6],o.value=n[0],X(t,"class","text-field"),t.hidden=n[2],on(t,"has-password","password"==n[7])},m:function(u,s,f){F(u,t,s),q(t,e),l&&l.m(e,null),q(t,r),q(t,o),n[13](o),q(t,i),h&&h.m(t,null),a=!0,f&&N(c),c=[Q(o,"input",n[9]),Q(o,"keyup",n[12])]},p:function(n,r){var i=p(r,1)[0];f&&f.p&&1024&i&&f.p(A(s,n,n[10],Le),L(s,n[10],i,Ae)),(!a||16&i)&&X(e,"for",n[4]),(!a||128&i)&&X(o,"type",n[7]),(!a||8&i)&&X(o,"name",n[3]),(!a||16&i)&&X(o,"id",n[4]),(!a||2&i)&&X(o,"autocomplete",n[1]),(!a||32&i)&&X(o,"placeholder",n[5]),(!a||64&i)&&(o.readOnly=n[6]),(!a||1&i&&o.value!==n[0])&&(o.value=n[0]),h&&h.p&&1024&i&&h.p(A(d,n,n[10],je),L(d,n[10],i,Pe)),(!a||4&i)&&(t.hidden=n[2]),128&i&&on(t,"has-password","password"==n[7])},i:function(n){a||(In(l,n),In(h,n),a=!0)},o:function(n){Un(l,n),Un(h,n),a=!1},d:function(e){e&&K(t),l&&l.d(e),n[13](null),h&&h.d(e),N(c)}}}function Ue(n,t,e){var r,o=t.autocomplete,i=void 0===o?null:o,a=t.hidden,c=void 0!==a&&a,u=t.name,s=void 0===u?"":u,f=t.id,l=void 0===f?s?"form_"+s:mt():f,d=t.placeholder,p=void 0===d?"":d,h=t.readonly,m=void 0!==h&&h,g=t.type,v=void 0===g?"text":g,$=t.value,y=void 0===$?"":$,b=t.$$slots,w=void 0===b?{}:b,_=t.$$scope;return n.$set=function(n){"autocomplete"in n&&e(1,i=n.autocomplete),"hidden"in n&&e(2,c=n.hidden),"name"in n&&e(3,s=n.name),"id"in n&&e(4,l=n.id),"placeholder"in n&&e(5,p=n.placeholder),"readonly"in n&&e(6,m=n.readonly),"type"in n&&e(7,v=n.type),"value"in n&&e(0,y=n.value),"$$scope"in n&&e(10,_=n.$$scope)},n.$$.update=function(){256&n.$$.dirty&&r&&!r.syncValue&&(e(8,r.syncValue=function(){e(0,y=this.value)},r),r.syncValue())},[y,i,c,s,l,p,m,v,r,function(n){e(0,y=v.match(/^(number|range)$/)?parseInt(n.target.value,10):n.target.value)},_,w,function(t){vn(n,t)},function(n){yn[n?"unshift":"push"]((function(){e(8,r=n)}))}]}var ze=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Te()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,Ue,Ie,M,{autocomplete:1,hidden:2,name:3,id:4,placeholder:5,readonly:6,type:7,value:0}),r}return u}(Yn);function He(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Be(n){var t,e;return{c:function(){X(t=W("input"),"type","hidden"),X(t,"name","connection_id"),t.value=e=n[0].connection_id},m:function(n,e){F(n,t,e)},p:function(n,r){1&r&&e!==(e=n[0].connection_id)&&(t.value=e)},d:function(n){n&&K(t)}}}function qe(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Host and port")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Fe(n){var t,e=ge(process.env.forced_connection?"You cannot create custom connections.":"Example: %1","irc://chat.freenode.net:6697")+"";return{c:function(){X(t=W("p"),"class","help"),X(t,"slot","help")},m:function(n,r){F(n,t,r),t.innerHTML=e},p:O,d:function(n){n&&K(t)}}}function Ke(n){var t;return{c:function(){t=Y()},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Ge(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Nickname")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function We(n){var t,e=new ze({props:{name:"dialog",placeholder:me("Ex: #convos"),$$slots:{label:[Ye]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};1048576&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(In(e.$$.fragment,n),t=!0)},o:function(n){Un(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function Ve(n){var t,e;function r(t){n[15].call(null,t)}var o={$$slots:{label:[Je]},$$scope:{ctx:n}};void 0!==n[5]&&(o.checked=n[5]);var i=new Ft({props:o});return yn.push((function(){return qn(i,"checked",r)})),{c:function(){Fn(i.$$.fragment)},m:function(n,t){Kn(i,n,t),e=!0},p:function(n,e){var r={};1048576&e&&(r.$$scope={dirty:e,ctx:n}),!t&&32&e&&(t=!0,r.checked=n[5],Sn((function(){return t=!1}))),i.$set(r)},i:function(n){e||(In(i.$$.fragment,n),e=!0)},o:function(n){Un(i.$$.fragment,n),e=!1},d:function(n){Gn(i,n)}}}function Ye(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Conversation name")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Je(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Want to be connected")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Qe(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Secure connection (TLS)")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Ze(n){var t,e;function r(t){n[17].call(null,t)}var o={name:"tls_verify",$$slots:{label:[Xe]},$$scope:{ctx:n}};void 0!==n[4]&&(o.checked=n[4]);var i=new Ft({props:o});return yn.push((function(){return qn(i,"checked",r)})),{c:function(){Fn(i.$$.fragment)},m:function(n,t){Kn(i,n,t),e=!0},p:function(n,e){var r={};1048576&e&&(r.$$scope={dirty:e,ctx:n}),!t&&16&e&&(t=!0,r.checked=n[4],Sn((function(){return t=!1}))),i.$set(r)},i:function(n){e||(In(i.$$.fragment,n),e=!0)},o:function(n){Un(i.$$.fragment,n),e=!1},d:function(n){Gn(i,n)}}}function Xe(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Verify certificate (TLS)")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function nr(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Show advanced settings")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function tr(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Username")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function er(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Password")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function rr(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("On-connect commands")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function or(n){var t,e=new It({props:{icon:"save",op:n[6],$$slots:{default:[ar]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};1048576&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(In(e.$$.fragment,n),t=!0)},o:function(n){Un(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function ir(n){var t,e,r=new It({props:{icon:"save",op:n[8],$$slots:{default:[cr]},$$scope:{ctx:n}}}),o=new It({props:{icon:"trash",type:"button",op:n[7],$$slots:{default:[ur]},$$scope:{ctx:n}}});return o.$on("click",n[9]),{c:function(){Fn(r.$$.fragment),t=Y(),Fn(o.$$.fragment)},m:function(n,i){Kn(r,n,i),F(n,t,i),Kn(o,n,i),e=!0},p:function(n,t){var e={};1048576&t&&(e.$$scope={dirty:t,ctx:n}),r.$set(e);var i={};1048576&t&&(i.$$scope={dirty:t,ctx:n}),o.$set(i)},i:function(n){e||(In(r.$$.fragment,n),In(o.$$.fragment,n),e=!0)},o:function(n){Un(r.$$.fragment,n),Un(o.$$.fragment,n),e=!1},d:function(n){Gn(r,n),n&&K(t),Gn(o,n)}}}function ar(n){var t,e=me("Create")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function cr(n){var t,e=me("Update")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function ur(n){var t,e=me("Delete")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function sr(n){var t,e,r,o,i,a,c,u,s,f,l,d,h,m,g,v,$,y,b,w,_,x,k,E,O,S,C,R=n[0].connection_id&&Be(n),N=new ze({props:{name:"server",placeholder:me("Ex: chat.freenode.net:6697"),readonly:process.env.forced_connection,$$slots:{default:[Ke],help:[Fe],label:[qe]},$$scope:{ctx:n}}}),D=new ze({props:{name:"nick",placeholder:me("Ex: your-name"),$$slots:{label:[Ge]},$$scope:{ctx:n}}}),M=[Ve,We],T=[];function P(n,t){return n[0].url?0:1}function j(t){n[16].call(null,t)}s=P(n),f=T[s]=M[s](n);var A={name:"tls",$$slots:{label:[Qe]},$$scope:{ctx:n}};void 0!==n[3]&&(A.checked=n[3]);var L=new Ft({props:A});yn.push((function(){return qn(L,"checked",j)}));var I=n[3]&&Ze(n);function U(t){n[18].call(null,t)}var z={$$slots:{label:[nr]},$$scope:{ctx:n}};void 0!==n[2]&&(z.checked=n[2]);var H=new Ft({props:z});yn.push((function(){return qn(H,"checked",U)}));var B=new ze({props:{name:"username",hidden:!n[2],$$slots:{label:[tr]},$$scope:{ctx:n}}}),G=new ze({props:{type:"password",name:"password",hidden:!n[2],$$slots:{label:[er]},$$scope:{ctx:n}}}),V=new Me({props:{name:"on_connect_commands",hidden:!n[2],$$slots:{label:[rr]},$$scope:{ctx:n}}}),J=[ir,or],nn=[];function tn(n,t){return n[0].url?0:1}_=tn(n),x=nn[_]=J[_](n);var en=new _e({props:{op:n[6]}}),rn=new _e({props:{op:n[7]}}),on=new _e({props:{op:n[8]}});return{c:function(){t=W("form"),R&&R.c(),e=Y(),r=W("input"),o=Y(),i=W("input"),a=Y(),Fn(N.$$.fragment),c=Y(),Fn(D.$$.fragment),u=Y(),f.c(),l=Y(),Fn(L.$$.fragment),h=Y(),I&&I.c(),m=Y(),Fn(H.$$.fragment),v=Y(),Fn(B.$$.fragment),$=Y(),Fn(G.$$.fragment),y=Y(),Fn(V.$$.fragment),b=Y(),w=W("div"),x.c(),k=Y(),Fn(en.$$.fragment),E=Y(),Fn(rn.$$.fragment),O=Y(),Fn(on.$$.fragment),X(r,"type","hidden"),X(r,"name","url"),X(i,"type","hidden"),X(i,"name","wanted_state"),X(w,"class","form-actions"),X(t,"method","post")},m:function(f,d,p){F(f,t,d),R&&R.m(t,null),q(t,e),q(t,r),q(t,o),q(t,i),q(t,a),Kn(N,t,null),q(t,c),Kn(D,t,null),q(t,u),T[s].m(t,null),q(t,l),Kn(L,t,null),q(t,h),I&&I.m(t,null),q(t,m),Kn(H,t,null),q(t,v),Kn(B,t,null),q(t,$),Kn(G,t,null),q(t,y),Kn(V,t,null),q(t,b),q(t,w),nn[_].m(w,null),q(t,k),Kn(en,t,null),q(t,E),Kn(rn,t,null),q(t,O),Kn(on,t,null),n[19](t),S=!0,p&&C(),C=Q(t,"submit",Z(n[10]))},p:function(n,r){var o=p(r,1)[0];n[0].connection_id?R?R.p(n,o):((R=Be(n)).c(),R.m(t,e)):R&&(R.d(1),R=null);var i={};1048576&o&&(i.$$scope={dirty:o,ctx:n}),N.$set(i);var a={};1048576&o&&(a.$$scope={dirty:o,ctx:n}),D.$set(a);var c=s;(s=P(n))===c?T[s].p(n,o):(An(),Un(T[c],1,1,(function(){T[c]=null})),Ln(),(f=T[s])||(f=T[s]=M[s](n)).c(),In(f,1),f.m(t,l));var u={};1048576&o&&(u.$$scope={dirty:o,ctx:n}),!d&&8&o&&(d=!0,u.checked=n[3],Sn((function(){return d=!1}))),L.$set(u),n[3]?I?(I.p(n,o),In(I,1)):((I=Ze(n)).c(),In(I,1),I.m(t,m)):I&&(An(),Un(I,1,1,(function(){I=null})),Ln());var h={};1048576&o&&(h.$$scope={dirty:o,ctx:n}),!g&&4&o&&(g=!0,h.checked=n[2],Sn((function(){return g=!1}))),H.$set(h);var v={};4&o&&(v.hidden=!n[2]),1048576&o&&(v.$$scope={dirty:o,ctx:n}),B.$set(v);var $={};4&o&&($.hidden=!n[2]),1048576&o&&($.$$scope={dirty:o,ctx:n}),G.$set($);var y={};4&o&&(y.hidden=!n[2]),1048576&o&&(y.$$scope={dirty:o,ctx:n}),V.$set(y);var b=_;(_=tn(n))===b?nn[_].p(n,o):(An(),Un(nn[b],1,1,(function(){nn[b]=null})),Ln(),(x=nn[_])||(x=nn[_]=J[_](n)).c(),In(x,1),x.m(w,null))},i:function(n){S||(In(N.$$.fragment,n),In(D.$$.fragment,n),In(f),In(L.$$.fragment,n),In(I),In(H.$$.fragment,n),In(B.$$.fragment,n),In(G.$$.fragment,n),In(V.$$.fragment,n),In(x),In(en.$$.fragment,n),In(rn.$$.fragment,n),In(on.$$.fragment,n),S=!0)},o:function(n){Un(N.$$.fragment,n),Un(D.$$.fragment,n),Un(f),Un(L.$$.fragment,n),Un(I),Un(H.$$.fragment,n),Un(B.$$.fragment,n),Un(G.$$.fragment,n),Un(V.$$.fragment,n),Un(x),Un(en.$$.fragment,n),Un(rn.$$.fragment,n),Un(on.$$.fragment,n),S=!1},d:function(e){e&&K(t),R&&R.d(),Gn(N),Gn(D),T[s].d(),Gn(L),I&&I.d(),Gn(H),Gn(B),Gn(G),Gn(V),nn[_].d(),Gn(en),Gn(rn),Gn(on),n[19](null),C()}}}function fr(n,t,e){var r=t.dialog,o=void 0===r?{}:r,i=gn("user"),a=i.api.operation("createConnection"),c=i.api.operation("removeConnection"),u=i.api.operation("updateConnection");[a,u].forEach((function(n){n.on("start",(function(n){n.body.on_connect_commands=n.body.on_connect_commands.split("\n").map((function(n){return n.trim()}))}))}));var s,f={},l=!1,d=!1,p=!1,h=!1;function m(){if(process.env.forced_connection&&e(1,s.server.value=process.env.default_connection,s),e(1,s.nick.value=i.email.replace(/@.*/,"").replace(/\W/g,"_"),s),e(3,d=!0),e(5,h=!0),!ee.query.uri)return ee.urlToForm(s);var n=new Kt(ee.query.uri),t=n.searchParams;n.host&&e(1,s.server.value=n.host,s),n.password&&e(1,s.password.value=n.password,s),n.username&&e(1,s.username.value=n.username,s),t.get("nick")&&e(1,s.nick.value=t.get("nick"),s),n.pathname&&s.dialog&&e(1,s.dialog.value=decodeURIComponent(n.pathname.split("/").filter((function(n){return n.length}))[0]||""),s),Number(t.get("tls")||0)&&e(3,d=!0),Number(t.get("tls_verify")||0)&&e(4,p=!0)}function g(){f.url&&(e(1,s.server.value=f.url.host,s),e(1,s.nick.value=f.url.searchParams.get("nick")||"",s),e(1,s.on_connect_commands.value=f.on_connect_commands.join("\n"),s),e(1,s.password.value=f.url.password,s),e(1,s.username.value=f.url.username,s),e(1,s.url.value=f.url.toString(),s),e(3,d="1"==f.url.searchParams.get("tls")),e(4,p="1"==f.url.searchParams.get("tls_verify")),e(5,h="connected"==f.wanted_state))}function v(){return(v=Zn(Jn.mark((function n(t){return Jn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.perform(f);case 2:i.removeDialog(f),ee.go("/settings/connection");case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function $(){return($=Zn(Jn.mark((function n(t){var r;return Jn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s.server.value){n.next=2;break}return n.abrupt("return");case 2:if(e(1,s.url.value=new Kt("irc://localhost:6667").fromForm(t.target).toString(),s),!f.connection_id){n.next=10;break}return n.next=6,u.perform(t.target);case 6:e(0,f=i.ensureDialog(u.res.body)),g(),n.next=14;break;case 10:return n.next=12,a.perform(t.target);case 12:r=i.ensureDialog(a.res.body),ee.go(r.path);case 14:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return mn(Zn(Jn.mark((function n(){return Jn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s){n.next=2;break}return n.abrupt("return");case 2:return e(0,f=i.findDialog({connection_id:o.connection_id})||{}),n.abrupt("return",f.url?g():m());case 4:case"end":return n.stop()}}),n)})))),n.$set=function(n){"dialog"in n&&e(11,o=n.dialog)},n.$$.update=function(){34&n.$$.dirty&&s&&e(1,s.wanted_state.value=h?"connected":"disconnected",s)},[f,s,l,d,p,h,a,c,u,function(n){return v.apply(this,arguments)},function(n){return $.apply(this,arguments)},o,i,m,g,function(n){e(5,h=n)},function(n){e(3,d=n)},function(n){e(4,p=n)},function(n){e(2,l=n)},function(n){yn[n?"unshift":"push"]((function(){e(1,s=n)}))}]}var lr=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(He()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,fr,sr,M,{dialog:11}),r}return u}(Yn);function dr(n){var t=n-1;return t*t*t+1}function pr(n,t){var e=t.delay,r=void 0===e?0:e,o=t.duration,i=void 0===o?400:o,a=t.easing,c=void 0===a?S:a,u=+getComputedStyle(n).opacity;return{delay:r,duration:i,easing:c,css:function(n){return"opacity: ".concat(n*u)}}}function hr(n,t){var e=t.delay,r=void 0===e?0:e,o=t.duration,i=void 0===o?400:o,a=t.easing,c=void 0===a?dr:a,u=t.x,s=void 0===u?0:u,f=t.y,l=void 0===f?0:f,d=t.opacity,p=void 0===d?0:d,h=getComputedStyle(n),m=+h.opacity,g="none"===h.transform?"":h.transform,v=m*(1-p);return{delay:r,duration:i,easing:c,css:function(n,t){return"\n\t\t\ttransform: ".concat(g," translate(").concat((1-n)*s,"px, ").concat((1-n)*l,"px);\n\t\t\topacity: ").concat(m-v*t)}}}function mr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function gr(n){var t,e,r=me("Currently connecting to %1.",n[3])+"";return{c:function(){t=W("p"),e=V(r)},m:function(n,r){F(n,t,r),q(t,e)},p:function(n,t){8&t&&r!==(r=me("Currently connecting to %1.",n[3])+"")&&tn(e,r)},d:function(n){n&&K(t)}}}function vr(n){var t,e,r=me("Currently connected to %1.",n[3])+"";return{c:function(){t=W("p"),e=V(r)},m:function(n,r){F(n,t,r),q(t,e)},p:function(n,t){8&t&&r!==(r=me("Currently connected to %1.",n[3])+"")&&tn(e,r)},d:function(n){n&&K(t)}}}function $r(n){var t,e,r=me("Currently disconnected from %1.",n[3])+"";return{c:function(){t=W("p"),e=V(r)},m:function(n,r){F(n,t,r),q(t,e)},p:function(n,t){8&t&&r!==(r=me("Currently disconnected from %1.",n[3])+"")&&tn(e,r)},d:function(n){n&&K(t)}}}function yr(n){var t;return{c:function(){(t=W("p")).textContent="".concat(me("Connection not found."))},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function br(n){var t,e,r,o,i,a=new Oe({props:{dialog:n[0]}});function c(n,t){return n[2].url?"disconnected"==n[2].state?$r:"connected"==n[2].state?vr:gr:yr}var u=c(n),s=u(n),f=new lr({props:{dialog:n[0]}});return{c:function(){t=W("div"),Fn(a.$$.fragment),e=Y(),s.c(),r=Y(),Fn(f.$$.fragment),X(t,"class","sidebar-left")},m:function(n,o){F(n,t,o),Kn(a,t,null),q(t,e),s.m(t,null),q(t,r),Kn(f,t,null),i=!0},p:function(n,e){var o=p(e,1)[0],i={};1&o&&(i.dialog=n[0]),a.$set(i),u===(u=c(n))&&s?s.p(n,o):(s.d(1),(s=u(n))&&(s.c(),s.m(t,r)));var l={};1&o&&(l.dialog=n[0]),f.$set(l)},i:function(e){i||(In(a.$$.fragment,e),In(f.$$.fragment,e),On((function(){o||(o=Hn(t,hr,n[1],!0)),o.run(1)})),i=!0)},o:function(e){Un(a.$$.fragment,e),Un(f.$$.fragment,e),o||(o=Hn(t,hr,n[1],!1)),o.run(0),i=!1},d:function(n){n&&K(t),Gn(a),s.d(),Gn(f),n&&o&&o.end()}}}function wr(n,t,e){var r,o=t.dialog,i=void 0===o?{}:o,a=t.transition,c=gn("user"),u={};return mn(Zn(Jn.mark((function n(){return Jn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e(2,u=c.findDialog({connection_id:i.connection_id})||{});case 1:case"end":return n.stop()}}),n)})))),n.$set=function(n){"dialog"in n&&e(0,i=n.dialog),"transition"in n&&e(1,a=n.transition)},n.$$.update=function(){4&n.$$.dirty&&e(3,r=u.real_host||u.url&&u.url.host)},[i,a,u,r]}var _r=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(mr()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,wr,br,M,{dialog:0,transition:1}),r}return u}(Yn);function xr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function kr(n){var t,e,r=n[10].default,o=j(r,n,n[9],null);return{c:function(){t=W("a"),o&&o.c(),X(t,"href",n[3]),X(t,"class",n[0]),X(t,"style",n[1]),on(t,"has-path",n[4])},m:function(r,i){F(r,t,i),o&&o.m(t,null),n[11](t),e=!0},p:function(n,i){var a=p(i,1)[0];o&&o.p&&512&a&&o.p(A(r,n,n[9],null),L(r,n[9],a,null)),(!e||8&a)&&X(t,"href",n[3]),(!e||1&a)&&X(t,"class",n[0]),(!e||2&a)&&X(t,"style",n[1]),17&a&&on(t,"has-path",n[4])},i:function(n){e||(In(o,n),e=!0)},o:function(n){Un(o,n),e=!1},d:function(e){e&&K(t),o&&o.d(e),n[11](null)}}}function Er(n,t,e){var r;P(n,ee,(function(n){return e(7,r=n)}));var o,i,a,c=t.class,u=void 0===c?"":c,s=t.href,f=void 0===s?"/":s,l=t.style,d=void 0===l?"":l,p=t.$$slots,h=void 0===p?{}:p,m=t.$$scope;return n.$set=function(n){"class"in n&&e(0,u=n.class),"href"in n&&e(5,f=n.href),"style"in n&&e(1,d=n.style),"$$scope"in n&&e(9,m=n.$$scope)},n.$$.update=function(){160&n.$$.dirty&&e(3,i=0==f.indexOf("/")?r.basePath+f:f),136&n.$$.dirty&&e(4,a=r.path==i.replace(/(#|\?).*/,""))},[u,d,o,i,a,f,function(){return o.focus()},r,[],m,h,function(n){yn[n?"unshift":"push"]((function(){e(2,o=n)}))}]}var Or=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(xr()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,Er,kr,M,{class:0,href:5,style:1,focus:6}),r}return E(u,[{key:"focus",get:function(){return this.$$.ctx[6]}}]),u}(Yn);function Sr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Cr(n,t,e){var r=n.slice();return r[15]=t[e],r}function Rr(n){var t,e=me("You are not a channel operator in %1.",n[0].name)+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:function(n,r){1&r&&e!==(e=me("You are not a channel operator in %1.",n[0].name)+"")&&tn(t,e)},d:function(n){n&&K(t)}}}function Nr(n){var t,e=me("You are channel operator in %1.",n[0].name)+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:function(n,r){1&r&&e!==(e=me("You are channel operator in %1.",n[0].name)+"")&&tn(t,e)},d:function(n){n&&K(t)}}}function Dr(n){var t,e=me("Private conversation with %1.",n[0].name)+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:function(n,r){1&r&&e!==(e=me("Private conversation with %1.",n[0].name)+"")&&tn(t,e)},d:function(n){n&&K(t)}}}function Mr(n){var t,e=me("Conversation with %1 is frozen. Reason: %2",n[0].name,me(n[0].frozen))+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:function(n,r){1&r&&e!==(e=me("Conversation with %1 is frozen. Reason: %2",n[0].name,me(n[0].frozen))+"")&&tn(t,e)},d:function(n){n&&K(t)}}}function Tr(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,h=n[0].hasOwnProperty("wantNotifications"),m=[jr,Pr],g=[];function v(n,t){return n[6]?0:1}function $(t){n[12].call(null,t)}c=v(n),u=g[c]=m[c](n);var y={type:"password",name:"password",readonly:!n[0].is("locked")&&!n[6],$$slots:{label:[Lr]},$$scope:{ctx:n}};void 0!==n[2]&&(y.value=n[2]);var b=new ze({props:y});yn.push((function(){return qn(b,"value",$)}));var w=h&&Ir(n);return{c:function(){t=W("input"),r=Y(),o=W("input"),a=Y(),u.c(),s=Y(),Fn(b.$$.fragment),l=Y(),w&&w.c(),d=J(),X(t,"type","hidden"),X(t,"name","connection_id"),t.value=e=n[0].connection_id,X(o,"type","hidden"),X(o,"name","dialog_id"),o.value=i=n[0].dialog_id},m:function(n,e){F(n,t,e),F(n,r,e),F(n,o,e),F(n,a,e),g[c].m(n,e),F(n,s,e),Kn(b,n,e),F(n,l,e),w&&w.m(n,e),F(n,d,e),p=!0},p:function(n,r){(!p||1&r&&e!==(e=n[0].connection_id))&&(t.value=e),(!p||1&r&&i!==(i=n[0].dialog_id))&&(o.value=i);var a=c;(c=v(n))===a?g[c].p(n,r):(An(),Un(g[a],1,1,(function(){g[a]=null})),Ln(),(u=g[c])||(u=g[c]=m[c](n)).c(),In(u,1),u.m(s.parentNode,s));var l={};65&r&&(l.readonly=!n[0].is("locked")&&!n[6]),262144&r&&(l.$$scope={dirty:r,ctx:n}),!f&&4&r&&(f=!0,l.value=n[2],Sn((function(){return f=!1}))),b.$set(l),1&r&&(h=n[0].hasOwnProperty("wantNotifications")),h?w?(w.p(n,r),In(w,1)):((w=Ir(n)).c(),In(w,1),w.m(d.parentNode,d)):w&&(An(),Un(w,1,1,(function(){w=null})),Ln())},i:function(n){p||(In(u),In(b.$$.fragment,n),In(w),p=!0)},o:function(n){Un(u),Un(b.$$.fragment,n),Un(w),p=!1},d:function(n){n&&K(t),n&&K(r),n&&K(o),n&&K(a),g[c].d(n),n&&K(s),Gn(b,n),n&&K(l),w&&w.d(n),n&&K(d)}}}function Pr(n){var t,e,r,o,i=ge(n[3]||"No topic is set.")+"";return{c:function(){t=W("div"),(e=W("label")).textContent="".concat(me("Topic")),r=Y(),X(o=W("div"),"class","input"),X(t,"class","text-field")},m:function(n,a){F(n,t,a),q(t,e),q(t,r),q(t,o),o.innerHTML=i},p:function(n,t){8&t&&i!==(i=ge(n[3]||"No topic is set.")+"")&&(o.innerHTML=i)},i:O,o:O,d:function(n){n&&K(t)}}}function jr(n){var t,e;function r(t){n[11].call(null,t)}var o={name:"topic",placeholder:me("No topic is set."),$$slots:{label:[Ar]},$$scope:{ctx:n}};void 0!==n[3]&&(o.value=n[3]);var i=new Me({props:o});return yn.push((function(){return qn(i,"value",r)})),{c:function(){Fn(i.$$.fragment)},m:function(n,t){Kn(i,n,t),e=!0},p:function(n,e){var r={};262144&e&&(r.$$scope={dirty:e,ctx:n}),!t&&8&e&&(t=!0,r.value=n[3],Sn((function(){return t=!1}))),i.$set(r)},i:function(n){e||(In(i.$$.fragment,n),e=!0)},o:function(n){Un(i.$$.fragment,n),e=!1},d:function(n){Gn(i,n)}}}function Ar(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Topic")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Lr(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Password")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Ir(n){var t,e;function r(t){n[13].call(null,t)}var o={$$slots:{label:[Ur]},$$scope:{ctx:n}};void 0!==n[5]&&(o.checked=n[5]);var i=new Ft({props:o});return yn.push((function(){return qn(i,"checked",r)})),{c:function(){Fn(i.$$.fragment)},m:function(n,t){Kn(i,n,t),e=!0},p:function(n,e){var r={};262144&e&&(r.$$scope={dirty:e,ctx:n}),!t&&32&e&&(t=!0,r.checked=n[5],Sn((function(){return t=!1}))),i.$set(r)},i:function(n){e||(In(i.$$.fragment,n),e=!0)},o:function(n){Un(i.$$.fragment,n),e=!1},d:function(n){Gn(i,n)}}}function Ur(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Send me notifications")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function zr(n){var t,e=new It({props:{icon:"save",$$slots:{default:[Hr]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};262144&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(In(e.$$.fragment,n),t=!0)},o:function(n){Un(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function Hr(n){var t,e=me("Update")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Br(n){var t,e=me("Leave")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function qr(n){for(var t,e,r,o,i,a=me("Participants (%1)",n[0].participants().length)+"",c=n[0].participants(),u=[],s=0;s<c.length;s+=1)u[s]=Kr(Cr(n,c,s));var f=function(n){return Un(u[n],1,1,(function(){u[n]=null}))};return{c:function(){t=W("nav"),e=W("h3"),r=V(a),o=Y();for(var n=0;n<u.length;n+=1)u[n].c();X(t,"class","sidebar-left__nav")},m:function(n,a){F(n,t,a),q(t,e),q(e,r),q(t,o);for(var c=0;c<u.length;c+=1)u[c].m(t,null);i=!0},p:function(n,e){if((!i||1&e)&&a!==(a=me("Participants (%1)",n[0].participants().length)+"")&&tn(r,a),1&e){var o;for(c=n[0].participants(),o=0;o<c.length;o+=1){var s=Cr(n,c,o);u[o]?(u[o].p(s,e),In(u[o],1)):(u[o]=Kr(s),u[o].c(),In(u[o],1),u[o].m(t,null))}for(An(),o=c.length;o<u.length;o+=1)f(o);Ln()}},i:function(n){if(!i){for(var t=0;t<c.length;t+=1)In(u[t]);i=!0}},o:function(n){u=u.filter(Boolean);for(var t=0;t<u.length;t+=1)Un(u[t]);i=!1},d:function(n){n&&K(t),G(u,n)}}}function Fr(n){var t,e,r,o=n[15].nick+"";return{c:function(){t=W("span"),e=V(o),r=Y()},m:function(n,o){F(n,t,o),q(t,e),F(n,r,o)},p:function(n,t){1&t&&o!==(o=n[15].nick+"")&&tn(e,o)},d:function(n){n&&K(t),n&&K(r)}}}function Kr(n){var t,e=new Or({props:{href:"/chat/"+n[0].connection_id+"/"+n[15].id,class:"participant "+st(n[15].modes),$$slots:{default:[Fr]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};1&t&&(r.href="/chat/"+n[0].connection_id+"/"+n[15].id),1&t&&(r.class="participant "+st(n[15].modes)),262145&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(In(e.$$.fragment,n),t=!0)},o:function(n){Un(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function Gr(n){var t,e,r,o,i,a,c,u,s,f,l,d,h,m=!n[0].is("private"),g=!n[0].is("private"),v=new Oe({props:{dialog:n[0]}});function $(n,t){return n[0].frozen?Mr:((null==o||1&t)&&(o=!!n[0].is("private")),o?Dr:n[6]?Nr:Rr)}var y=$(n,-1),b=y(n),w=m&&Tr(n),_=g&&zr(n),x=new It({props:{type:"button",icon:"sign-out-alt",$$slots:{default:[Br]},$$scope:{ctx:n}}});x.$on("click",n[7]);var k=!n[0].frozen&&qr(n);return{c:function(){t=W("div"),Fn(v.$$.fragment),e=Y(),r=W("p"),b.c(),i=Y(),a=W("form"),w&&w.c(),c=Y(),u=W("div"),_&&_.c(),s=Y(),Fn(x.$$.fragment),f=Y(),k&&k.c(),X(u,"class","form-actions"),X(a,"method","post"),X(t,"class","sidebar-left")},m:function(o,l,p){F(o,t,l),Kn(v,t,null),q(t,e),q(t,r),b.m(r,null),q(t,i),q(t,a),w&&w.m(a,null),q(a,c),q(a,u),_&&_.m(u,null),q(u,s),Kn(x,u,null),n[14](a),q(t,f),k&&k.m(t,null),d=!0,p&&h(),h=Q(a,"submit",Z(n[8]))},p:function(n,e){var o=p(e,1)[0],i={};1&o&&(i.dialog=n[0]),v.$set(i),y===(y=$(n,o))&&b?b.p(n,o):(b.d(1),(b=y(n))&&(b.c(),b.m(r,null))),1&o&&(m=!n[0].is("private")),m?w?(w.p(n,o),In(w,1)):((w=Tr(n)).c(),In(w,1),w.m(a,c)):w&&(An(),Un(w,1,1,(function(){w=null})),Ln()),1&o&&(g=!n[0].is("private")),g?_?(_.p(n,o),In(_,1)):((_=zr(n)).c(),In(_,1),_.m(u,s)):_&&(An(),Un(_,1,1,(function(){_=null})),Ln());var f={};262144&o&&(f.$$scope={dirty:o,ctx:n}),x.$set(f),n[0].frozen?k&&(An(),Un(k,1,1,(function(){k=null})),Ln()):k?(k.p(n,o),In(k,1)):((k=qr(n)).c(),In(k,1),k.m(t,null))},i:function(e){d||(In(v.$$.fragment,e),In(w),In(_),In(x.$$.fragment,e),In(k),On((function(){l||(l=Hn(t,hr,n[1],!0)),l.run(1)})),d=!0)},o:function(e){Un(v.$$.fragment,e),Un(w),Un(_),Un(x.$$.fragment,e),Un(k),l||(l=Hn(t,hr,n[1],!1)),l.run(0),d=!1},d:function(e){e&&K(t),Gn(v),b.d(),w&&w.d(),_&&_.d(),Gn(x),n[14](null),k&&k.d(),e&&l&&l.end(),h()}}}function Wr(n,t,e){var r,o,i=t.dialog,a=t.transition,c=gn("user"),u="",s=i.topic,f=i.wantNotifications;function l(n){var t=c.findDialog({connection_id:n.connection_id}),e=n.findParticipant(t&&t.nick);return e&&e.modes.operator}return n.$set=function(n){"dialog"in n&&e(0,i=n.dialog),"transition"in n&&e(1,a=n.transition)},n.$$.update=function(){1&n.$$.dirty&&e(6,o=l(i)),33&n.$$.dirty&&i.update({wantNotifications:f}),17&n.$$.dirty&&r&&r.topic&&e(4,r.topic.value=i.topic||"",r)},[i,a,u,s,r,f,o,function(n){c.omnibus.send({message:"/part",dialog:i})},function(n){if(u){var t=o?"/mode +k "+u:"/join "+i.name+" "+u;c.omnibus.send({message:t,dialog:i}),e(2,u="")}o&&s!=i.topic&&c.omnibus.send({message:"/topic "+s,dialog:i})},c,l,function(n){e(3,s=n)},function(n){e(2,u=n)},function(n){e(5,f=n)},function(n){yn[n?"unshift":"push"]((function(){e(4,r=n)}))}]}var Vr=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Sr()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,Wr,Gr,M,{dialog:0,transition:1}),r}return u}(Yn);function Yr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Jr(n){var t,e,r,o,i=("loading"==n[0]?"":me("Convos"))+"",a=me("for %1",process.env.organization_name)+"";return{c:function(){t=W("small"),e=V(i),r=Y(),o=V(a),X(t,"class","subtitle")},m:function(n,i){F(n,t,i),q(t,e),q(t,r),q(t,o)},p:function(n,t){1&t&&i!==(i=("loading"==n[0]?"":me("Convos"))+"")&&tn(e,i)},d:function(n){n&&K(t)}}}function Qr(n){var t,e,r,o,i=("loading"==n[0]?"":me("Convos"))+"",a=ge("for [%1](%2)",process.env.organization_name,process.env.organization_url)+"";return{c:function(){t=W("small"),e=V(i),r=Y(),o=new cn(a,null),X(t,"class","subtitle")},m:function(n,i){F(n,t,i),q(t,e),q(t,r),o.m(t)},p:function(n,t){1&t&&i!==(i=("loading"==n[0]?"":me("Convos"))+"")&&tn(e,i)},d:function(n){n&&K(t)}}}function Zr(n){var t,e,r,o,i,a,c,u,s=ge("Yikes! we are so sorry for the inconvenience. Please submit an [issue](%1), if the problem does not go away.","https://github.com/nordaaker/convos/issues")+"",f=me("Go to start page")+"",l=new Nt({props:{name:"play"}});return{c:function(){t=W("p"),e=Y(),r=W("p"),o=W("a"),Fn(l.$$.fragment),i=Y(),a=V(f),X(o,"href",c=n[1].baseUrl),X(o,"target","_self"),X(o,"class","btn")},m:function(n,c){F(n,t,c),t.innerHTML=s,F(n,e,c),F(n,r,c),q(r,o),Kn(l,o,null),q(o,i),q(o,a),u=!0},p:function(n,t){(!u||2&t&&c!==(c=n[1].baseUrl))&&X(o,"href",c)},i:function(n){u||(In(l.$$.fragment,n),u=!0)},o:function(n){Un(l.$$.fragment,n),u=!1},d:function(n){n&&K(t),n&&K(e),n&&K(r),Gn(l)}}}function Xr(n){var t,e,r,o,i,a,c,u,s,f,l=me("Unable to connect to Convos. Please try again later or check your network connection.")+"",d=me("Retry")+"",p=new Nt({props:{name:"sync-alt"}});return{c:function(){t=W("p"),e=W("i"),r=Y(),o=V(l),i=Y(),a=W("p"),c=W("a"),Fn(p.$$.fragment),u=Y(),s=V(d),X(e,"class","fas fa-exclamation-triangle"),X(c,"href",location.href),X(c,"target","_self"),X(c,"class","btn")},m:function(n,l){F(n,t,l),q(t,e),q(t,r),q(t,o),F(n,i,l),F(n,a,l),q(a,c),Kn(p,c,null),q(c,u),q(c,s),f=!0},p:O,i:function(n){f||(In(p.$$.fragment,n),f=!0)},o:function(n){Un(p.$$.fragment,n),f=!1},d:function(n){n&&K(t),n&&K(i),n&&K(a),Gn(p)}}}function no(n){var t,e,r,o,i,a,c,u,s=me("Go to start page")+"",f=new Nt({props:{name:"play"}});return{c:function(){(t=W("p")).textContent="".concat(me("The Convos Team have been searching and searching, but the requested page could not be found.")),e=Y(),r=W("p"),o=W("a"),Fn(f.$$.fragment),i=Y(),a=V(s),X(o,"href",c=n[1].baseUrl),X(o,"target","_self"),X(o,"class","btn")},m:function(n,c){F(n,t,c),F(n,e,c),F(n,r,c),q(r,o),Kn(f,o,null),q(o,i),q(o,a),u=!0},p:function(n,t){(!u||2&t&&c!==(c=n[1].baseUrl))&&X(o,"href",c)},i:function(n){u||(In(f.$$.fragment,n),u=!0)},o:function(n){Un(f.$$.fragment,n),u=!1},d:function(n){n&&K(t),n&&K(e),n&&K(r),Gn(f)}}}function to(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,h,m,g,v,$,y,b,w=me("Downloading Convos...")+"",_=me("Starting Convos...")+"",x=me("Loading user data...")+"",k=me("Contact admin")+"";return{c:function(){(t=W("p")).textContent="".concat(me("Convos is the simplest way to use IRC, and it keeps you always online.")),e=Y(),r=W("p"),o=W("i"),i=Y(),a=V(w),c=Y(),u=W("p"),s=W("i"),f=Y(),l=V(_),d=Y(),p=W("p"),h=W("i"),m=Y(),g=V(x),v=Y(),$=W("p"),y=W("a"),b=V(k),X(o,"class","fas fa-download"),X(s,"class","fas fa-rocket"),X(h,"class","fas fa-spinner fa-spin"),X(y,"class","btn"),X(y,"href",process.env.contact)},m:function(n,w){F(n,t,w),F(n,e,w),F(n,r,w),q(r,o),q(r,i),q(r,a),F(n,c,w),F(n,u,w),q(u,s),q(u,f),q(u,l),F(n,d,w),F(n,p,w),q(p,h),q(p,m),q(p,g),F(n,v,w),F(n,$,w),q($,y),q(y,b)},p:O,i:O,o:O,d:function(n){n&&K(t),n&&K(e),n&&K(r),n&&K(c),n&&K(u),n&&K(d),n&&K(p),n&&K(v),n&&K($)}}}function eo(n){var t,e,r,o,i,a,c,u,s,f,l,d,h,m,g,v,$,y,b,w,_,x=me("loading"==n[0]?"Convos":n[2][n[0]])+"",k="Convos"!=process.env.organization_name&&function(n){var t,e=("https://convos.by"!=process.env.organization_url?Qr:Jr)(n);return{c:function(){e.c(),t=J()},m:function(n,r){e.m(n,r),F(n,t,r)},p:function(n,t){e.p(n,t)},d:function(n){e.d(n),n&&K(t)}}}(n),E=[to,no,Xr,Zr],O=[];function S(n,t){return"loading"==n[0]?0:"not_found"==n[0]?1:"offline"==n[0]?2:3}return f=S(n),l=O[f]=E[f](n),{c:function(){t=W("main"),e=W("article"),r=W("h1"),o=W("a"),i=W("span"),a=V(x),u=Y(),k&&k.c(),s=Y(),l.c(),d=Y(),h=W("footer"),(m=W("a")).textContent="Convos",g=V("\n    —\n    "),(v=W("a")).textContent="".concat(me("Blog")),$=V("\n    —\n    "),(y=W("a")).textContent="".concat(me("Documentation")),b=V("\n    —\n    "),(w=W("a")).textContent="".concat(me("GitHub")),X(o,"href",c=n[1].baseUrl),X(e,"class","welcome-screen_fallback"),X(m,"href","https://convos.by/"),X(m,"target","_blank"),X(v,"href","https://convos.by/blog"),X(v,"target","_blank"),X(y,"href","https://convos.by/doc"),X(y,"target","_blank"),X(w,"href","https://github.com/Nordaaker/convos"),X(w,"target","_blank"),X(h,"class","welcome-screen__footer"),X(t,"class","welcome-screen")},m:function(n,c){F(n,t,c),q(t,e),q(e,r),q(r,o),q(o,i),q(i,a),q(r,u),k&&k.m(r,null),q(e,s),O[f].m(e,null),q(t,d),q(t,h),q(h,m),q(h,g),q(h,v),q(h,$),q(h,y),q(h,b),q(h,w),_=!0},p:function(n,t){var r=p(t,1)[0];(!_||1&r)&&x!==(x=me("loading"==n[0]?"Convos":n[2][n[0]])+"")&&tn(a,x),(!_||2&r&&c!==(c=n[1].baseUrl))&&X(o,"href",c),"Convos"!=process.env.organization_name&&k.p(n,r);var i=f;(f=S(n))===i?O[f].p(n,r):(An(),Un(O[i],1,1,(function(){O[i]=null})),Ln(),(l=O[f])||(l=O[f]=E[f](n)).c(),In(l,1),l.m(e,null))},i:function(n){_||(In(l),_=!0)},o:function(n){Un(l),_=!1},d:function(n){n&&K(t),k&&k.d(),O[f].d()}}}function ro(n,t,e){var r;P(n,ee,(function(n){return e(1,r=n)}));var o,i=t.status,a=void 0===i?ee.path.split("/").pop()||"not_found":i,c=(gn("user"),process.env.load_user,{loading:"Loading",not_found:"Not Found",offline:"Oops! You appear to be offline",unknown:"Unknown error!"});return ee.update({title:me(c[o])}),n.$set=function(n){"status"in n&&e(3,a=n.status)},n.$$.update=function(){8&n.$$.dirty&&e(0,o=c[a]?a:"not_found")},[o,r,c,a]}var oo=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Yr()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,ro,eo,M,{status:3}),r}return u}(Yn),io=e((function(n,t){var e,o;e=function(n){var t=[],e=Object.keys,o={},i={},a=!0,c=/^(no-?highlight|plain|text)$/i,u=/\blang(?:uage)?-([\w-]+)\b/i,s=/((^(<[^>]+>|\t|)+|(?:\n)))/gm,f="Could not find the language '{}', did you forget to load/include a language module?",l={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},d="of and for in not or if then".split(" ");function p(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function h(n){return n.nodeName.toLowerCase()}function m(n){return c.test(n)}function g(n){var t,e={},r=Array.prototype.slice.call(arguments,1);for(t in n)e[t]=n[t];return r.forEach((function(n){for(t in n)e[t]=n[t]})),e}function v(n){var t=[];return function n(e,r){for(var o=e.firstChild;o;o=o.nextSibling)3===o.nodeType?r+=o.nodeValue.length:1===o.nodeType&&(t.push({event:"start",offset:r,node:o}),r=n(o,r),h(o).match(/br|hr|img|input/)||t.push({event:"stop",offset:r,node:o}));return r}(n,0),t}function $(n){return n.variants&&!n.cached_variants&&(n.cached_variants=n.variants.map((function(t){return g(n,{variants:null},t)}))),n.cached_variants?n.cached_variants:function n(t){return!!t&&(t.endsWithParent||n(t.starts))}(n)?[g(n,{starts:n.starts?g(n.starts):null})]:Object.isFrozen(n)?[g(n)]:[n]}function y(n,t){return t?Number(t):(e=n,-1!=d.indexOf(e.toLowerCase())?0:1);var e}function b(n){function t(n){return n&&n.source||n}function r(e,r){return new RegExp(t(e),"m"+(n.case_insensitive?"i":"")+(r?"g":""))}function o(n){var e,o,i={},a=[],c={},u=1;function s(n,t){i[u]=n,a.push([n,t]),u+=function(n){return new RegExp(n.toString()+"|").exec("").length-1}(t)+1}for(var f=0;f<n.contains.length;f++)s(o=n.contains[f],o.beginKeywords?"\\.?(?:"+o.begin+")\\.?":o.begin);n.terminator_end&&s("end",n.terminator_end),n.illegal&&s("illegal",n.illegal);var l=a.map((function(n){return n[1]}));return e=r(function(n,e){for(var r=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./,o=0,i="",a=0;a<n.length;a++){var c=o+=1,u=t(n[a]);for(a>0&&(i+=e),i+="(";u.length>0;){var s=r.exec(u);if(null==s){i+=u;break}i+=u.substring(0,s.index),u=u.substring(s.index+s[0].length),"\\"==s[0][0]&&s[1]?i+="\\"+String(Number(s[1])+c):(i+=s[0],"("==s[0]&&o++)}i+=")"}return i}(l,"|"),!0),c.lastIndex=0,c.exec=function(t){var r;if(0===a.length)return null;e.lastIndex=c.lastIndex;var o=e.exec(t);if(!o)return null;for(var u=0;u<o.length;u++)if(null!=o[u]&&null!=i[""+u]){r=i[""+u];break}return"string"==typeof r?(o.type=r,o.extra=[n.illegal,n.terminator_end]):(o.type="begin",o.rule=r),o},c}if(n.contains&&-1!=n.contains.indexOf("self")){if(!a)throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");n.contains=n.contains.filter((function(n){return"self"!=n}))}!function i(a,c){a.compiled||(a.compiled=!0,a.keywords=a.keywords||a.beginKeywords,a.keywords&&(a.keywords=function(n,t){var r={};return"string"==typeof n?o("keyword",n):e(n).forEach((function(t){o(t,n[t])})),r;function o(n,e){t&&(e=e.toLowerCase()),e.split(" ").forEach((function(t){var e=t.split("|");r[e[0]]=[n,y(e[0],e[1])]}))}}(a.keywords,n.case_insensitive)),a.lexemesRe=r(a.lexemes||/\w+/,!0),c&&(a.beginKeywords&&(a.begin="\\b("+a.beginKeywords.split(" ").join("|")+")\\b"),a.begin||(a.begin=/\B|\b/),a.beginRe=r(a.begin),a.endSameAsBegin&&(a.end=a.begin),a.end||a.endsWithParent||(a.end=/\B|\b/),a.end&&(a.endRe=r(a.end)),a.terminator_end=t(a.end)||"",a.endsWithParent&&c.terminator_end&&(a.terminator_end+=(a.end?"|":"")+c.terminator_end)),a.illegal&&(a.illegalRe=r(a.illegal)),null==a.relevance&&(a.relevance=1),a.contains||(a.contains=[]),a.contains=Array.prototype.concat.apply([],a.contains.map((function(n){return $("self"===n?a:n)}))),a.contains.forEach((function(n){i(n,a)})),a.starts&&i(a.starts,c),a.terminators=o(a))}(n)}function w(n,t,e,r){var i=t;function c(n,t){var e=$.case_insensitive?t[0].toLowerCase():t[0];return n.keywords.hasOwnProperty(e)&&n.keywords[e]}function u(n,t,e,r){if(!e&&""===t)return"";if(!n)return t;var o='<span class="'+(r?"":l.classPrefix);return(o+=n+'">')+t+(e?"":"</span>")}function s(){E+=null!=x.subLanguage?function(){var n="string"==typeof x.subLanguage;if(n&&!o[x.subLanguage])return p(O);var t=n?w(x.subLanguage,O,!0,k[x.subLanguage]):_(O,x.subLanguage.length?x.subLanguage:void 0);return x.relevance>0&&(C+=t.relevance),n&&(k[x.subLanguage]=t.top),u(t.language,t.value,!1,!0)}():function(){var n,t,e,r;if(!x.keywords)return p(O);for(r="",t=0,x.lexemesRe.lastIndex=0,e=x.lexemesRe.exec(O);e;)r+=p(O.substring(t,e.index)),(n=c(x,e))?(C+=n[1],r+=u(n[0],p(e[0]))):r+=p(e[0]),t=x.lexemesRe.lastIndex,e=x.lexemesRe.exec(O);return r+p(O.substr(t))}(),O=""}function d(n){E+=n.className?u(n.className,"",!0):"",x=Object.create(n,{parent:{value:x}})}function h(n){var t=n[0],e=n.rule;return e&&e.endSameAsBegin&&(e.endRe=new RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")),e.skip?O+=t:(e.excludeBegin&&(O+=t),s(),e.returnBegin||e.excludeBegin||(O=t)),d(e),e.returnBegin?0:t.length}function m(n){var t=n[0],e=i.substr(n.index),r=function n(t,e){if(function(n,t){var e=n&&n.exec(t);return e&&0===e.index}(t.endRe,e)){for(;t.endsParent&&t.parent;)t=t.parent;return t}if(t.endsWithParent)return n(t.parent,e)}(x,e);if(r){var o=x;o.skip?O+=t:(o.returnEnd||o.excludeEnd||(O+=t),s(),o.excludeEnd&&(O=t));do{x.className&&(E+="</span>"),x.skip||x.subLanguage||(C+=x.relevance),x=x.parent}while(x!==r.parent);return r.starts&&(r.endSameAsBegin&&(r.starts.endRe=r.endRe),d(r.starts)),o.returnEnd?0:t.length}}var g={};function v(n,t){var r=t&&t[0];if(O+=n,null==r)return s(),0;if("begin"==g.type&&"end"==t.type&&g.index==t.index&&""===r)return O+=i.slice(t.index,t.index+1),1;if(g=t,"begin"===t.type)return h(t);if("illegal"===t.type&&!e)throw new Error('Illegal lexeme "'+r+'" for mode "'+(x.className||"<unnamed>")+'"');if("end"===t.type){var o=m(t);if(null!=o)return o}return O+=r,r.length}var $=S(n);if(!$)throw console.error(f.replace("{}",n)),new Error('Unknown language: "'+n+'"');b($);var y,x=r||$,k={},E="";for(y=x;y!==$;y=y.parent)y.className&&(E=u(y.className,"",!0)+E);var O="",C=0;try{for(var R,N,D=0;x.terminators.lastIndex=D,R=x.terminators.exec(i);)N=v(i.substring(D,R.index),R),D=R.index+N;for(v(i.substr(D)),y=x;y.parent;y=y.parent)y.className&&(E+="</span>");return{relevance:C,value:E,illegal:!1,language:n,top:x}}catch(t){if(t.message&&-1!==t.message.indexOf("Illegal"))return{illegal:!0,relevance:0,value:p(i)};if(a)return{relevance:0,value:p(i),language:n,top:x,errorRaised:t};throw t}}function _(n,t){t=t||l.languages||e(o);var r={relevance:0,value:p(n)},i=r;return t.filter(S).filter(C).forEach((function(t){var e=w(t,n,!1);e.language=t,e.relevance>i.relevance&&(i=e),e.relevance>r.relevance&&(i=r,r=e)})),i.language&&(r.second_best=i),r}function x(n){return l.tabReplace||l.useBR?n.replace(s,(function(n,t){return l.useBR&&"\n"===n?"<br>":l.tabReplace?t.replace(/\t/g,l.tabReplace):""})):n}function k(n){var e,r,o,a,c,s=function(n){var t,e,r,o,i=n.className+" ";if(i+=n.parentNode?n.parentNode.className:"",e=u.exec(i)){var a=S(e[1]);return a||(console.warn(f.replace("{}",e[1])),console.warn("Falling back to no-highlight mode for this block.",n)),a?e[1]:"no-highlight"}for(t=0,r=(i=i.split(/\s+/)).length;t<r;t++)if(m(o=i[t])||S(o))return o}(n);m(s)||(l.useBR?(e=document.createElement("div")).innerHTML=n.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n"):e=n,c=e.textContent,o=s?w(s,c,!0):_(c),(r=v(e)).length&&((a=document.createElement("div")).innerHTML=o.value,o.value=function(n,e,r){var o=0,i="",a=[];function c(){return n.length&&e.length?n[0].offset!==e[0].offset?n[0].offset<e[0].offset?n:e:"start"===e[0].event?n:e:n.length?n:e}function u(n){i+="<"+h(n)+t.map.call(n.attributes,(function(n){return" "+n.nodeName+'="'+p(n.value).replace(/"/g,"&quot;")+'"'})).join("")+">"}function s(n){i+="</"+h(n)+">"}function f(n){("start"===n.event?u:s)(n.node)}for(;n.length||e.length;){var l=c();if(i+=p(r.substring(o,l[0].offset)),o=l[0].offset,l===n){a.reverse().forEach(s);do{f(l.splice(0,1)[0]),l=c()}while(l===n&&l.length&&l[0].offset===o);a.reverse().forEach(u)}else"start"===l[0].event?a.push(l[0].node):a.pop(),f(l.splice(0,1)[0])}return i+p(r.substr(o))}(r,v(a),c)),o.value=x(o.value),n.innerHTML=o.value,n.className=function(n,t,e){var r=t?i[t]:e,o=[n.trim()];return n.match(/\bhljs\b/)||o.push("hljs"),-1===n.indexOf(r)&&o.push(r),o.join(" ").trim()}(n.className,s,o.language),n.result={language:o.language,re:o.relevance},o.second_best&&(n.second_best={language:o.second_best.language,re:o.second_best.relevance}))}function E(){if(!E.called){E.called=!0;var n=document.querySelectorAll("pre code");t.forEach.call(n,k)}}var O={disableAutodetect:!0};function S(n){return n=(n||"").toLowerCase(),o[n]||o[i[n]]}function C(n){var t=S(n);return t&&!t.disableAutodetect}return n.highlight=w,n.highlightAuto=_,n.fixMarkup=x,n.highlightBlock=k,n.configure=function(n){l=g(l,n)},n.initHighlighting=E,n.initHighlightingOnLoad=function(){window.addEventListener("DOMContentLoaded",E,!1),window.addEventListener("load",E,!1)},n.registerLanguage=function(t,e){var r;try{r=e(n)}catch(n){if(console.error("Language definition for '{}' could not be registered.".replace("{}",t)),!a)throw n;console.error(n),r=O}o[t]=r,r.rawDefinition=e.bind(null,n),r.aliases&&r.aliases.forEach((function(n){i[n]=t}))},n.listLanguages=function(){return e(o)},n.getLanguage=S,n.requireLanguage=function(n){var t=S(n);if(t)return t;throw new Error("The '{}' language is required, but not loaded.".replace("{}",n))},n.autoDetection=C,n.inherit=g,n.debugMode=function(){a=!1},n.IDENT_RE="[a-zA-Z]\\w*",n.UNDERSCORE_IDENT_RE="[a-zA-Z_]\\w*",n.NUMBER_RE="\\b\\d+(\\.\\d+)?",n.C_NUMBER_RE="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",n.BINARY_NUMBER_RE="\\b(0b[01]+)",n.RE_STARTERS_RE="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",n.BACKSLASH_ESCAPE={begin:"\\\\[\\s\\S]",relevance:0},n.APOS_STRING_MODE={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[n.BACKSLASH_ESCAPE]},n.QUOTE_STRING_MODE={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[n.BACKSLASH_ESCAPE]},n.PHRASAL_WORDS_MODE={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},n.COMMENT=function(t,e,r){var o=n.inherit({className:"comment",begin:t,end:e,contains:[]},r||{});return o.contains.push(n.PHRASAL_WORDS_MODE),o.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|XXX):",relevance:0}),o},n.C_LINE_COMMENT_MODE=n.COMMENT("//","$"),n.C_BLOCK_COMMENT_MODE=n.COMMENT("/\\*","\\*/"),n.HASH_COMMENT_MODE=n.COMMENT("#","$"),n.NUMBER_MODE={className:"number",begin:n.NUMBER_RE,relevance:0},n.C_NUMBER_MODE={className:"number",begin:n.C_NUMBER_RE,relevance:0},n.BINARY_NUMBER_MODE={className:"number",begin:n.BINARY_NUMBER_RE,relevance:0},n.CSS_NUMBER_MODE={className:"number",begin:n.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},n.REGEXP_MODE={className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[n.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[n.BACKSLASH_ESCAPE]}]},n.TITLE_MODE={className:"title",begin:n.IDENT_RE,relevance:0},n.UNDERSCORE_TITLE_MODE={className:"title",begin:n.UNDERSCORE_IDENT_RE,relevance:0},n.METHOD_GUARD={begin:"\\.\\s*"+n.UNDERSCORE_IDENT_RE,relevance:0},[n.BACKSLASH_ESCAPE,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.PHRASAL_WORDS_MODE,n.COMMENT,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,n.HASH_COMMENT_MODE,n.NUMBER_MODE,n.C_NUMBER_MODE,n.BINARY_NUMBER_MODE,n.CSS_NUMBER_MODE,n.REGEXP_MODE,n.TITLE_MODE,n.UNDERSCORE_TITLE_MODE,n.METHOD_GUARD].forEach((function(n){!function n(t){Object.freeze(t);var e="function"==typeof t;return Object.getOwnPropertyNames(t).forEach((function(o){!t.hasOwnProperty(o)||null===t[o]||"object"!==r(t[o])&&"function"!=typeof t[o]||e&&("caller"===o||"callee"===o||"arguments"===o)||Object.isFrozen(t[o])||n(t[o])})),t}(n)})),n},o="object"===("undefined"==typeof window?"undefined":r(window))&&window||"object"===("undefined"==typeof self?"undefined":r(self))&&self,t.nodeType?o&&(o.hljs=e({})):e(t)}));var ao=/\r\n|\r|\n/g;function co(n){var t=n.className;if(/hljs-/.test(t)){for(var e=uo(n.innerHTML),r=0,o="";r<e.length;r++){var i=e[r].length>0?e[r]:" ";o+='<span class="'.concat(t,'">').concat(i,"</span>\n")}n.innerHTML=o.trim()}}function uo(n){return 0===n.length?[]:n.split(ao)}function so(n){return(n.trim().match(ao)||[]).length}document.addEventListener("copy",(function(n){var t,e=window.getSelection();(function(n){for(var t=n;t;){if(t.className&&-1!==t.className.indexOf("hljs-ln-code"))return!0;t=t.parentNode}return!1})(e.anchorNode)&&(t=-1!==window.navigator.userAgent.indexOf("Edge")?function(n){for(var t=n.toString(),e=n.anchorNode;"TD"!==e.nodeName;)e=e.parentNode;for(var r=n.focusNode;"TD"!==r.nodeName;)r=r.parentNode;var o=parseInt(e.dataset.lineNumber,10),i=parseInt(r.dataset.lineNumber,10);if(o!=i){var a=e.textContent,c=r.textContent;if(o>i){var u=o;o=i,i=u,u=a,a=c,c=u}for(;0!==t.indexOf(a);)a=a.slice(1);for(;-1===t.lastIndexOf(c);)c=c.slice(0,-1);for(var s=a,f=function(n){for(var t=n;"TABLE"!==t.nodeName;)t=t.parentNode;return t}(e),l=o+1;l<i;++l){var d=".".concat("hljs-ln-code","[").concat("data-line-number",'="').concat(l,'"]');s+="\n"+f.querySelector(d).textContent}return s+="\n"+c}return t}(e):e.toString(),n.clipboardData.setData("text/plain",t),n.preventDefault())}));var fo;function lo(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function po(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?lo(Object(e),!0).forEach((function(t){Xn(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):lo(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function ho(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}io.registerLanguage("css",(function(n){var t={begin:/(?:[A-Z\_\.\-]+|--[a-zA-Z0-9_-]+)\s*:/,returnBegin:!0,end:";",endsWithParent:!0,contains:[{className:"attribute",begin:/\S/,end:":",excludeEnd:!0,starts:{endsWithParent:!0,excludeEnd:!0,contains:[{begin:/[\w-]+\(/,returnBegin:!0,contains:[{className:"built_in",begin:/[\w-]+/},{begin:/\(/,end:/\)/,contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.CSS_NUMBER_MODE]}]},n.CSS_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,n.C_BLOCK_COMMENT_MODE,{className:"number",begin:"#[0-9A-Fa-f]+"},{className:"meta",begin:"!important"}]}}]};return{case_insensitive:!0,illegal:/[=\/|'\$]/,contains:[n.C_BLOCK_COMMENT_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/},{className:"selector-class",begin:/\.[A-Za-z0-9_-]+/},{className:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},{className:"selector-pseudo",begin:/:(:)?[a-zA-Z0-9\_\-\+\(\)"'.]+/},{begin:"@(page|font-face)",lexemes:"@[a-z-]+",keywords:"@page @font-face"},{begin:"@",end:"[{;]",illegal:/:/,returnBegin:!0,contains:[{className:"keyword",begin:/@\-?\w[\w]*(\-\w+)*/},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:"and or not only",contains:[{begin:/[a-z-]+:/,className:"attribute"},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"[a-zA-Z-][a-zA-Z0-9_-]*",relevance:0},{begin:"{",end:"}",illegal:/\S/,contains:[n.C_BLOCK_COMMENT_MODE,t]}]}})),io.registerLanguage("diff",(function(n){return{aliases:["patch"],contains:[{className:"meta",relevance:10,variants:[{begin:/^@@ +\-\d+,\d+ +\+\d+,\d+ +@@$/},{begin:/^\*\*\* +\d+,\d+ +\*\*\*\*$/},{begin:/^\-\-\- +\d+,\d+ +\-\-\-\-$/}]},{className:"comment",variants:[{begin:/Index: /,end:/$/},{begin:/={3,}/,end:/$/},{begin:/^\-{3}/,end:/$/},{begin:/^\*{3} /,end:/$/},{begin:/^\+{3}/,end:/$/},{begin:/^\*{15}$/}]},{className:"addition",begin:"^\\+",end:"$"},{className:"deletion",begin:"^\\-",end:"$"},{className:"addition",begin:"^\\!",end:"$"}]}})),io.registerLanguage("dockerfile",(function(n){return{aliases:["docker"],case_insensitive:!0,keywords:"from maintainer expose env arg user onbuild stopsignal",contains:[n.HASH_COMMENT_MODE,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.NUMBER_MODE,{beginKeywords:"run cmd entrypoint volume add copy workdir label healthcheck shell",starts:{end:/[^\\]$/,subLanguage:"bash"}}],illegal:"</"}})),io.registerLanguage("go",(function(n){var t={keyword:"break default func interface select case map struct chan else goto package switch const fallthrough if range type continue for import return var go defer bool byte complex64 complex128 float32 float64 int8 int16 int32 int64 string uint8 uint16 uint32 uint64 int uint uintptr rune",literal:"true false iota nil",built_in:"append cap close complex copy imag len make new panic print println real recover delete"};return{aliases:["golang"],keywords:t,illegal:"</",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,{className:"string",variants:[n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{begin:n.C_NUMBER_RE+"[i]",relevance:1},n.C_NUMBER_MODE]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[n.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,keywords:t,illegal:/["']/}]}]}})),io.registerLanguage("http",(function(n){return{aliases:["https"],illegal:"\\S",contains:[{begin:"^HTTP/[0-9\\.]+",end:"$",contains:[{className:"number",begin:"\\b\\d{3}\\b"}]},{begin:"^[A-Z]+ (.*?) HTTP/[0-9\\.]+$",returnBegin:!0,end:"$",contains:[{className:"string",begin:" ",end:" ",excludeBegin:!0,excludeEnd:!0},{begin:"HTTP/[0-9\\.]+"},{className:"keyword",begin:"[A-Z]+"}]},{className:"attribute",begin:"^\\w",end:": ",excludeEnd:!0,illegal:"\\n|\\s|=",starts:{end:"$",relevance:0}},{begin:"\\n\\n",starts:{subLanguage:[],endsWithParent:!0}}]}})),io.registerLanguage("javascript",(function(n){var t="<>",e="</>",r={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/},o="[A-Za-z$_][0-9A-Za-z$_]*",i={keyword:"in of if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const export super debugger as async await static import from as",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document Symbol Set Map WeakSet WeakMap Proxy Reflect Promise"},a={className:"number",variants:[{begin:"\\b(0[bB][01]+)n?"},{begin:"\\b(0[oO][0-7]+)n?"},{begin:n.C_NUMBER_RE+"n?"}],relevance:0},c={className:"subst",begin:"\\$\\{",end:"\\}",keywords:i,contains:[]},u={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,c],subLanguage:"xml"}},s={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,c],subLanguage:"css"}},f={className:"string",begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE,c]};c.contains=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,u,s,f,a,n.REGEXP_MODE];var l=c.contains.concat([n.C_BLOCK_COMMENT_MODE,n.C_LINE_COMMENT_MODE]);return{aliases:["js","jsx","mjs","cjs"],keywords:i,contains:[{className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},{className:"meta",begin:/^#!/,end:/$/},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,u,s,f,n.C_LINE_COMMENT_MODE,n.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+",contains:[{className:"type",begin:"\\{",end:"\\}",relevance:0},{className:"variable",begin:o+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),n.C_BLOCK_COMMENT_MODE,a,{begin:/[{,\n]\s*/,relevance:0,contains:[{begin:o+"\\s*:",returnBegin:!0,relevance:0,contains:[{className:"attr",begin:o,relevance:0}]}]},{begin:"("+n.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,n.REGEXP_MODE,{className:"function",begin:"(\\(.*?\\)|"+o+")\\s*=>",returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:o},{begin:/\(\s*\)/},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:i,contains:l}]}]},{className:"",begin:/\s/,end:/\s*/,skip:!0},{variants:[{begin:t,end:e},{begin:r.begin,end:r.end}],subLanguage:"xml",contains:[{begin:r.begin,end:r.end,skip:!0,contains:["self"]}]}],relevance:0},{className:"function",beginKeywords:"function",end:/\{/,excludeEnd:!0,contains:[n.inherit(n.TITLE_MODE,{begin:o}),{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,contains:l}],illegal:/\[|%/},{begin:/\$[(.]/},n.METHOD_GUARD,{className:"class",beginKeywords:"class",end:/[{;=]/,excludeEnd:!0,illegal:/[:"\[\]]/,contains:[{beginKeywords:"extends"},n.UNDERSCORE_TITLE_MODE]},{beginKeywords:"constructor get set",end:/\{/,excludeEnd:!0}],illegal:/#(?!!)/}})),io.registerLanguage("markdown",(function(n){return{aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$"},{begin:"^.+?\\n[=-]{2,}$"}]},{begin:"<",end:">",subLanguage:"xml",relevance:0},{className:"bullet",begin:"^\\s*([*+-]|(\\d+\\.))\\s+"},{className:"strong",begin:"[*_]{2}.+?[*_]{2}"},{className:"emphasis",variants:[{begin:"\\*.+?\\*"},{begin:"_.+?_",relevance:0}]},{className:"quote",begin:"^>\\s+",end:"$"},{className:"code",variants:[{begin:"^```\\w*\\s*$",end:"^```[ ]*$"},{begin:"`.+?`"},{begin:"^( {4}|\\t)",end:"$",relevance:0}]},{begin:"^[-\\*]{3,}",end:"$"},{begin:"\\[.+?\\][\\(\\[].*?[\\)\\]]",returnBegin:!0,contains:[{className:"string",begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0,relevance:0},{className:"link",begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}],relevance:10},{begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]}]}})),io.registerLanguage("mojolicious",(function(n){return{subLanguage:"xml",contains:[{className:"meta",begin:"^__(END|DATA)__$"},{begin:"^\\s*%{1,2}={0,2}",end:"$",subLanguage:"perl"},{begin:"<%{1,2}={0,2}",end:"={0,1}%>",subLanguage:"perl",excludeBegin:!0,excludeEnd:!0}]}})),io.registerLanguage("nginx",(function(n){var t={className:"variable",variants:[{begin:/\$\d+/},{begin:/\$\{/,end:/}/},{begin:"[\\$\\@]"+n.UNDERSCORE_IDENT_RE}]},e={endsWithParent:!0,lexemes:"[a-z/_]+",keywords:{literal:"on off yes no true false none blocked debug info notice warn error crit select break last permanent redirect kqueue rtsig epoll poll /dev/poll"},relevance:0,illegal:"=>",contains:[n.HASH_COMMENT_MODE,{className:"string",contains:[n.BACKSLASH_ESCAPE,t],variants:[{begin:/"/,end:/"/},{begin:/'/,end:/'/}]},{begin:"([a-z]+):/",end:"\\s",endsWithParent:!0,excludeEnd:!0,contains:[t]},{className:"regexp",contains:[n.BACKSLASH_ESCAPE,t],variants:[{begin:"\\s\\^",end:"\\s|{|;",returnEnd:!0},{begin:"~\\*?\\s+",end:"\\s|{|;",returnEnd:!0},{begin:"\\*(\\.[a-z\\-]+)+"},{begin:"([a-z\\-]+\\.)+\\*"}]},{className:"number",begin:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{className:"number",begin:"\\b\\d+[kKmMgGdshdwy]*\\b",relevance:0},t]};return{aliases:["nginxconf"],contains:[n.HASH_COMMENT_MODE,{begin:n.UNDERSCORE_IDENT_RE+"\\s+{",returnBegin:!0,end:"{",contains:[{className:"section",begin:n.UNDERSCORE_IDENT_RE}],relevance:0},{begin:n.UNDERSCORE_IDENT_RE+"\\s",end:";|{",returnBegin:!0,contains:[{className:"attribute",begin:n.UNDERSCORE_IDENT_RE,starts:e}],relevance:0}],illegal:"[^\\s\\}]"}})),io.registerLanguage("perl",(function(n){var t="getpwent getservent quotemeta msgrcv scalar kill dbmclose undef lc ma syswrite tr send umask sysopen shmwrite vec qx utime local oct semctl localtime readpipe do return format read sprintf dbmopen pop getpgrp not getpwnam rewinddir qqfileno qw endprotoent wait sethostent bless s|0 opendir continue each sleep endgrent shutdown dump chomp connect getsockname die socketpair close flock exists index shmgetsub for endpwent redo lstat msgctl setpgrp abs exit select print ref gethostbyaddr unshift fcntl syscall goto getnetbyaddr join gmtime symlink semget splice x|0 getpeername recv log setsockopt cos last reverse gethostbyname getgrnam study formline endhostent times chop length gethostent getnetent pack getprotoent getservbyname rand mkdir pos chmod y|0 substr endnetent printf next open msgsnd readdir use unlink getsockopt getpriority rindex wantarray hex system getservbyport endservent int chr untie rmdir prototype tell listen fork shmread ucfirst setprotoent else sysseek link getgrgid shmctl waitpid unpack getnetbyname reset chdir grep split require caller lcfirst until warn while values shift telldir getpwuid my getprotobynumber delete and sort uc defined srand accept package seekdir getprotobyname semop our rename seek if q|0 chroot sysread setpwent no crypt getc chown sqrt write setnetent setpriority foreach tie sin msgget map stat getlogin unless elsif truncate exec keys glob tied closedirioctl socket readlink eval xor readline binmode setservent eof ord bind alarm pipe atan2 getgrent exp time push setgrent gt lt or ne m|0 break given say state when",e={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:t},r={begin:"->{",end:"}"},o={variants:[{begin:/\$\d/},{begin:/[\$%@](\^\w\b|#\w+(::\w+)*|{\w+}|\w+(::\w*)*)/},{begin:/[\$%@][^\s\w{]/,relevance:0}]},i=[n.BACKSLASH_ESCAPE,e,o],a=[o,n.HASH_COMMENT_MODE,n.COMMENT("^\\=\\w","\\=cut",{endsWithParent:!0}),r,{className:"string",contains:i,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*\\<",end:"\\>",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[n.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE]},{begin:"{\\w+}",contains:[],relevance:0},{begin:"-?\\w+\\s*\\=\\>",contains:[],relevance:0}]},{className:"number",begin:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",relevance:0},{begin:"(\\/\\/|"+n.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[n.HASH_COMMENT_MODE,{className:"regexp",begin:"(s|tr|y)/(\\\\.|[^/])*/(\\\\.|[^/])*/[a-z]*",relevance:10},{className:"regexp",begin:"(m|qr)?/",end:"/[a-z]*",contains:[n.BACKSLASH_ESCAPE],relevance:0}]},{className:"function",beginKeywords:"sub",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[n.TITLE_MODE]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return e.contains=a,r.contains=a,{aliases:["pl","pm"],lexemes:/[\w\.]+/,keywords:t,contains:a}})),io.registerLanguage("python",(function(n){var t={keyword:"and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del or def lambda async await nonlocal|10",built_in:"Ellipsis NotImplemented",literal:"False None True"},e={className:"meta",begin:/^(>>>|\.\.\.) /},r={className:"subst",begin:/\{/,end:/\}/,keywords:t,illegal:/#/},o={begin:/\{\{/,relevance:0},i={className:"string",contains:[n.BACKSLASH_ESCAPE],variants:[{begin:/(u|b)?r?'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,e],relevance:10},{begin:/(u|b)?r?"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,e],relevance:10},{begin:/(fr|rf|f)'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,e,o,r]},{begin:/(fr|rf|f)"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,e,o,r]},{begin:/(u|r|ur)'/,end:/'/,relevance:10},{begin:/(u|r|ur)"/,end:/"/,relevance:10},{begin:/(b|br)'/,end:/'/},{begin:/(b|br)"/,end:/"/},{begin:/(fr|rf|f)'/,end:/'/,contains:[n.BACKSLASH_ESCAPE,o,r]},{begin:/(fr|rf|f)"/,end:/"/,contains:[n.BACKSLASH_ESCAPE,o,r]},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},a={className:"number",relevance:0,variants:[{begin:n.BINARY_NUMBER_RE+"[lLjJ]?"},{begin:"\\b(0o[0-7]+)[lLjJ]?"},{begin:n.C_NUMBER_RE+"[lLjJ]?"}]},c={className:"params",begin:/\(/,end:/\)/,contains:["self",e,a,i,n.HASH_COMMENT_MODE]};return r.contains=[i,a,e],{aliases:["py","gyp","ipython"],keywords:t,illegal:/(<\/|->|\?)|=>/,contains:[e,a,{beginKeywords:"if",relevance:0},i,n.HASH_COMMENT_MODE,{variants:[{className:"function",beginKeywords:"def"},{className:"class",beginKeywords:"class"}],end:/:/,illegal:/[${=;\n,]/,contains:[n.UNDERSCORE_TITLE_MODE,c,{begin:/->/,endsWithParent:!0,keywords:"None"}]},{className:"meta",begin:/^[\t ]*@/,end:/$/},{begin:/\b(print|exec)\(/}]}})),io.registerLanguage("scss",(function(n){var t={className:"variable",begin:"(\\$[a-zA-Z-][a-zA-Z0-9_-]*)\\b"},e={className:"number",begin:"#[0-9A-Fa-f]+"};n.CSS_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,n.C_BLOCK_COMMENT_MODE;return{case_insensitive:!0,illegal:"[=/|']",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,{className:"selector-id",begin:"\\#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},{className:"selector-attr",begin:"\\[",end:"\\]",illegal:"$"},{className:"selector-tag",begin:"\\b(a|abbr|acronym|address|area|article|aside|audio|b|base|big|blockquote|body|br|button|canvas|caption|cite|code|col|colgroup|command|datalist|dd|del|details|dfn|div|dl|dt|em|embed|fieldset|figcaption|figure|footer|form|frame|frameset|(h[1-6])|head|header|hgroup|hr|html|i|iframe|img|input|ins|kbd|keygen|label|legend|li|link|map|mark|meta|meter|nav|noframes|noscript|object|ol|optgroup|option|output|p|param|pre|progress|q|rp|rt|ruby|samp|script|section|select|small|span|strike|strong|style|sub|sup|table|tbody|td|textarea|tfoot|th|thead|time|title|tr|tt|ul|var|video)\\b",relevance:0},{className:"selector-pseudo",begin:":(visited|valid|root|right|required|read-write|read-only|out-range|optional|only-of-type|only-child|nth-of-type|nth-last-of-type|nth-last-child|nth-child|not|link|left|last-of-type|last-child|lang|invalid|indeterminate|in-range|hover|focus|first-of-type|first-line|first-letter|first-child|first|enabled|empty|disabled|default|checked|before|after|active)"},{className:"selector-pseudo",begin:"::(after|before|choices|first-letter|first-line|repeat-index|repeat-item|selection|value)"},t,{className:"attribute",begin:"\\b(src|z-index|word-wrap|word-spacing|word-break|width|widows|white-space|visibility|vertical-align|unicode-bidi|transition-timing-function|transition-property|transition-duration|transition-delay|transition|transform-style|transform-origin|transform|top|text-underline-position|text-transform|text-shadow|text-rendering|text-overflow|text-indent|text-decoration-style|text-decoration-line|text-decoration-color|text-decoration|text-align-last|text-align|tab-size|table-layout|right|resize|quotes|position|pointer-events|perspective-origin|perspective|page-break-inside|page-break-before|page-break-after|padding-top|padding-right|padding-left|padding-bottom|padding|overflow-y|overflow-x|overflow-wrap|overflow|outline-width|outline-style|outline-offset|outline-color|outline|orphans|order|opacity|object-position|object-fit|normal|none|nav-up|nav-right|nav-left|nav-index|nav-down|min-width|min-height|max-width|max-height|mask|marks|margin-top|margin-right|margin-left|margin-bottom|margin|list-style-type|list-style-position|list-style-image|list-style|line-height|letter-spacing|left|justify-content|initial|inherit|ime-mode|image-orientation|image-resolution|image-rendering|icon|hyphens|height|font-weight|font-variant-ligatures|font-variant|font-style|font-stretch|font-size-adjust|font-size|font-language-override|font-kerning|font-feature-settings|font-family|font|float|flex-wrap|flex-shrink|flex-grow|flex-flow|flex-direction|flex-basis|flex|filter|empty-cells|display|direction|cursor|counter-reset|counter-increment|content|column-width|column-span|column-rule-width|column-rule-style|column-rule-color|column-rule|column-gap|column-fill|column-count|columns|color|clip-path|clip|clear|caption-side|break-inside|break-before|break-after|box-sizing|box-shadow|box-decoration-break|bottom|border-width|border-top-width|border-top-style|border-top-right-radius|border-top-left-radius|border-top-color|border-top|border-style|border-spacing|border-right-width|border-right-style|border-right-color|border-right|border-radius|border-left-width|border-left-style|border-left-color|border-left|border-image-width|border-image-source|border-image-slice|border-image-repeat|border-image-outset|border-image|border-color|border-collapse|border-bottom-width|border-bottom-style|border-bottom-right-radius|border-bottom-left-radius|border-bottom-color|border-bottom|border|background-size|background-repeat|background-position|background-origin|background-image|background-color|background-clip|background-attachment|background-blend-mode|background|backface-visibility|auto|animation-timing-function|animation-play-state|animation-name|animation-iteration-count|animation-fill-mode|animation-duration|animation-direction|animation-delay|animation|align-self|align-items|align-content)\\b",illegal:"[^\\s]"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:":",end:";",contains:[t,e,n.CSS_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,{className:"meta",begin:"!important"}]},{begin:"@(page|font-face)",lexemes:"@[a-z-]+",keywords:"@page @font-face"},{begin:"@",end:"[{;]",returnBegin:!0,keywords:"and or not only",contains:[{begin:"@[a-z-]+",className:"keyword"},t,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,e,n.CSS_NUMBER_MODE]}]}})),io.registerLanguage("shell",(function(n){return{aliases:["console"],contains:[{className:"meta",begin:"^\\s{0,3}[/\\w\\d\\[\\]()@-]*[>%$#]",starts:{end:"$",subLanguage:"bash"}}]}})),io.registerLanguage("xml",(function(n){var t={className:"symbol",begin:"&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;"},e={begin:"\\s",contains:[{className:"meta-keyword",begin:"#?[a-z_][a-z1-9_-]+",illegal:"\\n"}]},r=n.inherit(e,{begin:"\\(",end:"\\)"}),o=n.inherit(n.APOS_STRING_MODE,{className:"meta-string"}),i=n.inherit(n.QUOTE_STRING_MODE,{className:"meta-string"}),a={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:"[A-Za-z0-9\\._:-]+",relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[t]},{begin:/'/,end:/'/,contains:[t]},{begin:/[^\s"'=<>`]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,contains:[{className:"meta",begin:"<![a-z]",end:">",relevance:10,contains:[e,i,o,r,{begin:"\\[",end:"\\]",contains:[{className:"meta",begin:"<![a-z]",end:">",contains:[e,r,i,o]}]}]},n.COMMENT("\x3c!--","--\x3e",{relevance:10}),{begin:"<\\!\\[CDATA\\[",end:"\\]\\]>",relevance:10},t,{className:"meta",begin:/<\?xml/,end:/\?>/,relevance:10},{begin:/<\?(php)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},n.inherit(n.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),n.inherit(n.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]},{className:"tag",begin:"<style(?=\\s|>)",end:">",keywords:{name:"style"},contains:[a],starts:{end:"</style>",returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:"<script(?=\\s|>)",end:">",keywords:{name:"script"},contains:[a],starts:{end:"<\/script>",returnEnd:!0,subLanguage:["actionscript","javascript","handlebars","xml"]}},{className:"tag",begin:"</?",end:"/?>",contains:[{className:"name",begin:/[^\/><\s]+/,relevance:0},a]}]}})),io.registerLanguage("yaml",(function(n){var t={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[n.BACKSLASH_ESCAPE,{className:"template-variable",variants:[{begin:"{{",end:"}}"},{begin:"%{",end:"}"}]}]};return{case_insensitive:!0,aliases:["yml","YAML","yaml"],contains:[{className:"attr",variants:[{begin:"\\w[\\w :\\/.-]*:(?=[ \t]|$)"},{begin:'"\\w[\\w :\\/.-]*":(?=[ \t]|$)'},{begin:"'\\w[\\w :\\/.-]*':(?=[ \t]|$)"}]},{className:"meta",begin:"^---s*$",relevance:10},{className:"string",begin:"[\\|>]([0-9]?[+-])?[ ]*\\n( *)[\\S ]+\\n(\\2[\\S ]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!"+n.UNDERSCORE_IDENT_RE},{className:"type",begin:"!!"+n.UNDERSCORE_IDENT_RE},{className:"meta",begin:"&"+n.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+n.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"\\-(?=[ ]|$)",relevance:0},n.HASH_COMMENT_MODE,{beginKeywords:"true false yes no null",keywords:{literal:"true false yes no null"}},{className:"number",begin:n.C_NUMBER_RE+"\\b"},t]}})),(fo=io).lineNumbersBlock=function(n,t){fo.highlightBlock(n,t),setTimeout((function(){return n.innerHTML=function(n,t){var e=(t=t||{singleLine:!1}).singleLine?0:1;return function n(t){var e=t.childNodes;for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];so(o.textContent)>0&&(o.childNodes.length>0?n(o):co(o.parentNode))}}(n),function(n,t){var e=uo(n);if(""===e[e.length-1].trim()&&e.pop(),e.length>t){for(var r="",o=0,i=e.length;o<i;o++){var a=o+1;r+="<tr>"+'<td class="'.concat("hljs-ln-line"," ").concat("hljs-ln-numbers",'" ').concat("data-line-number",'="').concat(a,'">')+'<div class="'.concat("hljs-ln-n",'" ').concat("data-line-number",'="').concat(a,'"></div>')+"</td>"+'<td class="'.concat("hljs-ln-line"," ").concat("hljs-ln-code",'" ').concat("data-line-number",'="').concat(a,'">')+(e[o].length>0?e[o]:" ")+"</td></tr>"}return'<table class="'.concat("hljs-ln",'">').concat(r,"</table>")}return n}(n.innerHTML,e)}(n,t)}),0)};var mo=new(function(t){c(a,t);var e,r=(e=a,function(){var n,t=i(e);if(ho()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function a(){var t;return n(this,a),(t=r.call(this)).prop("persist","debug",0),t.prop("persist","notificationCloseDelay",5e3),t.prop("persist","protocols",{}),t.prop("persist","wantNotifications",null),t.prop("ro","notifyPermission",(function(){return t._notification().permission})),t.prop("rw","defaultTitle","Convos"),t.prop("rw","route",ee),t.prop("rw","wsUrl",""),t.msgId=0,t.messageCb={},t.wsSendQueue=[],t}return E(a,[{key:"notify",value:function(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n||(n=this.defaultTitle);var r=this.wantNotifications?"granted"!=this._notification().permission?this._notification().permission:!e.force&&this._hasFocus()?"hasFocus":"":"wantNotifications == false";if(r)return this.debug&&console.log("[notify] Rejected: "+r,[n,t,e]),null;var o=this._notification(n,po({},e,{body:t}));return o.onclick=function(n){window.focus(),o.close()},setTimeout((function(){return o.close()}),this.notificationCloseDelay),o}},{key:"registerProtocol",value:function(n,t){var e;return this.protocols[n]=t,this.update({protocols:(e=this.protocols,JSON.parse(JSON.stringify(e)))}),t&&navigator.registerProtocolHandler&&navigator.registerProtocolHandler(n,this.route.baseUrl+"/register?uri=%s",'Convos wants to handle "'+n+'" links'),this}},{key:"requestPermissionToNotify",value:function(n){var t=this;if("boolean"==typeof n)return this.update({wantNotifications:n});var e=this._notification();return"granted"!=e.permission&&e.requestPermission?(e.requestPermission((function(e){t.update({wantNotifications:"granted"==e}),n&&n(e)})),this):(this.update({wantNotifications:"granted"==e.permission}),n&&n(e.permission),this)}},{key:"send",value:function(n,t){var e="string"==typeof n?{method:n}:po({},n);e.method||(e.method=e.message?"send":"ping"),e.connection&&["connection_id"].forEach((function(n){e[n]=e.dialog[n]||""})),e.dialog&&["connection_id","dialog_id"].forEach((function(n){e[n]=e.dialog[n]||""})),e.id=String("ping"==e.method?0:++this.msgId),delete e.connection,delete e.dialog,t&&(this.messageCb[e.id]=t),this.debug>=2&&console.log("[send]",e),this.wsSendQueue.push(e),this._ws()}},{key:"start",value:function(n){var t=this,e=n.route,r=n.wsUrl;e&&this.update({route:e}),r&&this.update({wsUrl:r}),this.keepaliveTid=setInterval((function(){return t._keepalive()}),1e4),this._listenToGlobalExceptions(e),this._setupServiceWorker(e)}},{key:"update",value:function(n){var t=this.wantNotifications;return m(i(a.prototype),"update",this).call(this,n),n.wantNotifications&&!t&&this.notify(null,me("You have enabled notifications."),{force:!0}),this}},{key:"_dispatch",value:function(n){var t=("wsEvent_"+this._getEventNameFromParam(n)).replace(/_(\w)/g,(function(n,t){return t.toUpperCase()}));this.debug>=2&&console.log("[dispatch:"+t+"]",n),"wsEventError"!=t&&(this._wsReconnectDelay=0);var e=this.messageCb[n.id];n.bubbles=!0,n.dispatchTo=t,n.stopPropagation=function(){n.bubbles=!1},e&&e(n),n.bubbles&&this.emit("message",n),this.emit(t,n)}},{key:"_getEventNameFromParam",value:function(n){return n.errors?"error":"state"==n.event?n.type:"sent"==n.event&&n.message.match(/\/\S+/)?(n.command=n.message.split(/\s+/).filter((function(n){return n.length})),n.command[0]=n.command[0].substring(1),"sent_"+n.command[0]):n.event}},{key:"_hasFocus",value:function(){return document.hasFocus()}},{key:"_keepalive",value:function(){this._send({method:"ping"})}},{key:"_listenToGlobalExceptions",value:function(){var n=this;window.addEventListener("error",(function(t){var e=t.colno,r=t.error,o=t.filename,i=t.lineno,a=t.message,c=t.type,u=t.timeStamp;n.emit("error",{type:c,colno:e,error:r,filename:o,lineno:i,message:a,timeStamp:u})})),window.addEventListener("unhandledrejection",(function(t){var e=t.type,r=t.reason,o=t.returnValue,i=t.timeStamp;n.emit("error",{type:e,reason:r,returnValue:o,timeStamp:i})}))}},{key:"_notification",value:function(n,t){var e={permission:"denied"};try{return window.Notification?n?new Notification(n,t):Notification:e}catch(n){return e.error=n,e}}},{key:"_send",value:function(n){var t=this.ws&&1==this.ws.readyState&&this.ws;return t&&t.send(JSON.stringify(n)),!!t}},{key:"_setupServiceWorker",value:function(n){var t=this;return navigator.serviceWorker&&navigator.serviceWorker.register(n.urlFor("/sw.js")).then((function(n){return t.emit("serviceWorker",n)}))}},{key:"_ws",value:function(){var n=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dequeue";this.emit(t),"dequeue"==t&&this._wsReconnectTid&&(clearTimeout(this._wsReconnectTid),delete this._wsReconnectTid),"close"==t?(this._wsReconnectDelay=this._wsReconnectDelay>5e3?500:(this._wsReconnectDelay||0)+500,this._wsReconnectTid||(this._wsReconnectTid=setTimeout((function(){return n._ws()}),this._wsReconnectDelay)),delete this.ws):this.ws?this.wsSendQueue=this.wsSendQueue.filter((function(t){return!n._send(t)})):this.wsUrl&&(this.ws=new WebSocket(this.wsUrl),this.ws.onopen=function(){return n._ws("open")},this.ws.onclose=function(){return n._ws("close")},this.ws.onerror=function(){return n._ws("close")},this.ws.onmessage=function(t){return n._dispatch(JSON.parse(t.data))})}}]),a}($t));function go(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var vo=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(go()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(){var e;return n(this,u),(e=a.call(this)).onScroll=e.onScroll.bind(t(e)),e.pos="bottom",e.scrollTo=e.scrollTo.bind(t(e)),e.wrapper=null,e}return E(u,[{key:"findVisibleElements",value:function(n,t){if(!this.wrapper)return null;var e=[].slice.call(this.wrapper.querySelectorAll(n),0);if(!e.length)return e;for(var r=this.wrapper.scrollTop,o=e.slice(0).map((function(n,t){return[t,n]}));o.length>1;){var i=Math.floor(o.length/2);o[i][1].offsetTop<r?o.splice(0,i):o.splice(i)}!o.length&&e.length&&o.push([0,e[0]]);for(var a=this.wrapper.offsetHeight,c=o[0][0],u=c;u<e.length&&!(e[u].offsetTop>r+a)&&!(t&&u-c>=t);)u++;return e.slice(c,u)}},{key:"keepPos",value:function(n){n&&(this.height=n);var t=!(!this.onScrollTid||this.cancelNextOnScroll);if(mo.debug>1&&console.log("[Scrollspy:keepPos]",{height:n,locked:t,scrollTop:this.wrapper&&this.wrapper.scrollTop}),this.wrapper&&!t){var e=ee.hash?Tt(ee.hash)?'[data-ts="'+ee.hash+'"]':"#"+ee.hash:"",r=e&&document.querySelector(e);this.cancelNextOnScroll=!0,r?this.scrollTo(r,this.wrapper):"bottom"==this.pos&&this.scrollTo(this.height,this.wrapper)}}},{key:"observe",value:function(n){var t=this;if(this.wrapper){if(!this.observer){this.observer=new IntersectionObserver((function(n){return n.forEach((function(n){return t.emit("observed",n)}))}),{rootMargin:"0px"})}this.observer.disconnect();for(var e=this.wrapper.querySelectorAll(n),r=0;r<e.length;r++)this.observer.observe(e[r])}}},{key:"onScroll",value:function(n){var t=this;this.wrapper&&(this.onScrollTid&&clearTimeout(this.onScrollTid),this.onScrollTid=setTimeout((function(){delete t.onScrollTid;var e=t.wrapper.offsetHeight,r=t.wrapper.scrollTop;t.pos=e>=t.height||r>t.height-e-50?"bottom":r<100?"top":"middle",t.cancelNextOnScroll||t.emit("scroll",n),delete t.cancelNextOnScroll}),50))}},{key:"scrollTo",value:function(n){var t=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!(e>=5)){if(!this.wrapper)return setTimeout((function(){return t.scrollTo(n,e+1)}),20);if(mo.debug>1&&console.log("[Scrollspy:scrollTo]",n),"number"==typeof n)return this.wrapper.scrollTop=n;if("string"==typeof n){0==n.indexOf("#")&&(n="#"+n.substring(1).replace(/\W/g,"-").replace(/^([^a-zA-Z_])/,"_$1"));var r=document.querySelector(n);return r?this.scrollTo(r,0):setTimeout((function(){return t.scrollTo(n,e+1)}),20)}if(n.href&&-1!=n.href.indexOf("#"))return location.hash=n.href.replace(/.*#/,"#"),this.scrollTo(location.hash);if(n.tagName)return this.scrollTo(n.offsetTop-30);if(n.preventDefault&&n.preventDefault(),n.target&&n.target.tagName)return this.scrollTo(n.target.closest("[href]"));throw"Cannot scroll to "+n}}}]),u}($t);function $o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function yo(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Convos"))},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function bo(n){var t;return{c:function(){(t=W("small")).textContent="".concat(me("for %1",process.env.organization_name)),X(t,"class","subtitle")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function wo(n){var t,e=ge("for [%1](%2)",process.env.organization_name,process.env.organization_url)+"";return{c:function(){X(t=W("small"),"class","subtitle")},m:function(n,r){F(n,t,r),t.innerHTML=e},p:O,d:function(n){n&&K(t)}}}function _o(n){var t,e,r,o,i,a,c,u,s,f,l,d,p;function h(t){n[14].call(null,t)}var m={type:"email",name:"email",placeholder:me("Ex: john@doe.com"),$$slots:{label:[xo]},$$scope:{ctx:n}};void 0!==n[0].formEmail&&(m.value=n[0].formEmail);var g=new ze({props:m});yn.push((function(){return qn(g,"value",h)}));var v=new ze({props:{type:"password",name:"password",autocomplete:"current-password",$$slots:{label:[ko]},$$scope:{ctx:n}}}),$=new It({props:{icon:"sign-in-alt",op:n[6],$$slots:{default:[Eo]},$$scope:{ctx:n}}}),y=new _e({props:{op:n[6]}});return{c:function(){t=W("section"),e=W("form"),(r=W("h2")).textContent="".concat(me("Sign in")),o=Y(),Fn(g.$$.fragment),a=Y(),Fn(v.$$.fragment),c=Y(),u=W("div"),Fn($.$$.fragment),s=Y(),(f=W("a")).textContent="".concat(me("Sign up")),l=Y(),Fn(y.$$.fragment),X(f,"class","btn is-hallow"),X(f,"href","#signup"),X(u,"class","form-actions"),X(e,"method","post"),X(t,"id","signin"),X(t,"class","welcome-screen__signin fade-in")},m:function(i,h,m){F(i,t,h),q(t,e),q(e,r),q(e,o),Kn(g,e,null),q(e,a),Kn(v,e,null),q(e,c),q(e,u),Kn($,u,null),q(u,s),q(u,f),q(e,l),Kn(y,e,null),d=!0,m&&N(p),p=[Q(f,"click",(function(){D(n[1].scrollTo)&&n[1].scrollTo.apply(this,arguments)})),Q(e,"submit",Z(n[15]))]},p:function(t,e){n=t;var r={};1048576&e&&(r.$$scope={dirty:e,ctx:n}),!i&&1&e&&(i=!0,r.value=n[0].formEmail,Sn((function(){return i=!1}))),g.$set(r);var o={};1048576&e&&(o.$$scope={dirty:e,ctx:n}),v.$set(o);var a={};1048576&e&&(a.$$scope={dirty:e,ctx:n}),$.$set(a)},i:function(n){d||(In(g.$$.fragment,n),In(v.$$.fragment,n),In($.$$.fragment,n),In(y.$$.fragment,n),d=!0)},o:function(n){Un(g.$$.fragment,n),Un(v.$$.fragment,n),Un($.$$.fragment,n),Un(y.$$.fragment,n),d=!1},d:function(n){n&&K(t),Gn(g),Gn(v),Gn($),Gn(y),N(p)}}}function xo(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("E-mail")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function ko(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Password")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Eo(n){var t,e=me("Sign in")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Oo(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,h,m=me("Contact admin")+"";return{c:function(){(t=W("h2")).textContent="".concat(me("Sign up")),e=Y(),(r=W("p")).textContent="".concat(me("Convos is not open for public registration.")),o=Y(),(i=W("p")).textContent="".concat(me("Please ask your Convos admin for an invite link to sign up, or sign in if you already have an account.")),a=Y(),c=W("div"),u=W("a"),s=V(m),f=Y(),(l=W("a")).textContent="".concat(me("Sign in")),d=Y(),(p=W("a")).textContent="".concat(me("Home")),X(u,"class","btn"),X(u,"href",process.env.contact),X(l,"class","btn is-hallow"),X(l,"href","#signin"),X(p,"class","btn is-hallow"),X(p,"href","#top"),X(c,"class","form-actions")},m:function(m,g,v){F(m,t,g),F(m,e,g),F(m,r,g),F(m,o,g),F(m,i,g),F(m,a,g),F(m,c,g),q(c,u),q(u,s),q(c,f),q(c,l),q(c,d),q(c,p),v&&N(h),h=[Q(i,"click",(function(){D(n[1].scrollTo)&&n[1].scrollTo.apply(this,arguments)})),Q(l,"click",(function(){D(n[1].scrollTo)&&n[1].scrollTo.apply(this,arguments)})),Q(p,"click",(function(){D(n[1].scrollTo)&&n[1].scrollTo.apply(this,arguments)}))]},p:function(t,e){n=t},i:O,o:O,d:function(n){n&&K(t),n&&K(e),n&&K(r),n&&K(o),n&&K(i),n&&K(a),n&&K(c),N(h)}}}function So(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,h,m,g,v=n[4].isFirst&&Ro();function $(t){n[16].call(null,t)}var y={type:"email",name:"email",placeholder:me("Ex: john@doe.com"),readonly:n[5],$$slots:{default:[Po],help:[To],label:[No]},$$scope:{ctx:n}};void 0!==n[0].formEmail&&(y.value=n[0].formEmail);var b=new ze({props:y});yn.push((function(){return qn(b,"value",$)}));var w=new ze({props:{type:"password",name:"password",$$slots:{default:[Lo],help:[Ao],label:[jo]},$$scope:{ctx:n}}}),_=new It({props:{icon:"save",op:n[7],$$slots:{default:[Io]},$$scope:{ctx:n}}}),x=!n[5]&&!n[4].isFirst&&Uo(n),k=new _e({props:{op:n[7]}});return{c:function(){t=W("form"),(e=W("h2")).textContent="".concat(me(process.env.existing_user?"Recover account":"Sign up")),r=Y(),v&&v.c(),o=Y(),i=W("input"),a=Y(),c=W("input"),u=Y(),Fn(b.$$.fragment),f=Y(),Fn(w.$$.fragment),l=Y(),d=W("div"),Fn(_.$$.fragment),p=Y(),x&&x.c(),h=Y(),Fn(k.$$.fragment),X(i,"type","hidden"),X(i,"name","exp"),X(c,"type","hidden"),X(c,"name","token"),X(d,"class","form-actions"),X(t,"method","post")},m:function(s,$,y){F(s,t,$),q(t,e),q(t,r),v&&v.m(t,null),q(t,o),q(t,i),q(t,a),q(t,c),q(t,u),Kn(b,t,null),q(t,f),Kn(w,t,null),q(t,l),q(t,d),Kn(_,d,null),q(t,p),x&&x.m(t,null),q(t,h),Kn(k,t,null),n[18](t),m=!0,y&&g(),g=Q(t,"submit",Z(n[17]))},p:function(n,e){n[4].isFirst?v?v.p(n,e):((v=Ro()).c(),v.m(t,o)):v&&(v.d(1),v=null);var r={};1048576&e&&(r.$$scope={dirty:e,ctx:n}),!s&&1&e&&(s=!0,r.value=n[0].formEmail,Sn((function(){return s=!1}))),b.$set(r);var i={};1048576&e&&(i.$$scope={dirty:e,ctx:n}),w.$set(i);var a={};1048576&e&&(a.$$scope={dirty:e,ctx:n}),_.$set(a),n[5]||n[4].isFirst?x&&(x.d(1),x=null):x?x.p(n,e):((x=Uo(n)).c(),x.m(t,h))},i:function(n){m||(In(b.$$.fragment,n),In(w.$$.fragment,n),In(_.$$.fragment,n),In(k.$$.fragment,n),m=!0)},o:function(n){Un(b.$$.fragment,n),Un(w.$$.fragment,n),Un(_.$$.fragment,n),Un(k.$$.fragment,n),m=!1},d:function(e){e&&K(t),v&&v.d(),Gn(b),Gn(w),Gn(_),x&&x.d(),Gn(k),n[18](null),g()}}}function Co(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,h,m=me("Contact admin")+"";return{c:function(){(t=W("h2")).textContent="".concat(me("Invalid invite/recover URL")),e=Y(),(r=W("p")).textContent="".concat(me(410==process.env.status?"The link has expired.":"The link is invalid.")),o=Y(),(i=W("p")).textContent="".concat(me("Please ask your Convos admin for a new link.")),a=Y(),c=W("p"),u=W("a"),s=V(m),f=Y(),(l=W("a")).textContent="".concat(me("Sign in")),d=Y(),(p=W("a")).textContent="".concat(me("Home")),X(u,"class","btn"),X(u,"href",process.env.contact),X(l,"class","btn is-hallow"),X(l,"href","#signin"),X(p,"class","btn is-hallow"),X(p,"href","#top")},m:function(m,g,v){F(m,t,g),F(m,e,g),F(m,r,g),F(m,o,g),F(m,i,g),F(m,a,g),F(m,c,g),q(c,u),q(u,s),q(c,f),q(c,l),q(c,d),q(c,p),v&&N(h),h=[Q(l,"click",(function(){D(n[1].scrollTo)&&n[1].scrollTo.apply(this,arguments)})),Q(p,"click",(function(){D(n[1].scrollTo)&&n[1].scrollTo.apply(this,arguments)}))]},p:function(t,e){n=t},i:O,o:O,d:function(n){n&&K(t),n&&K(e),n&&K(r),n&&K(o),n&&K(i),n&&K(a),n&&K(c),N(h)}}}function Ro(n){var t;return{c:function(){(t=W("p")).textContent="".concat(me('As you are the first user, you do not need any invitation link. Just fill in the form below, hit "Sign up" to start chatting.'))},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function No(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("E-mail")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Do(n){var t,e=me("Your email will be used if you forget your password.")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Mo(n){var t,e=me("Your email is from the invite link.")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function To(n){var t;var e=function(n,t){return n[5]?Mo:Do}(n)(n);return{c:function(){t=W("p"),e.c(),X(t,"class","help"),X(t,"slot","help")},m:function(n,r){F(n,t,r),e.m(t,null)},p:function(n,t){e.p(n,t)},d:function(n){n&&K(t),e.d()}}}function Po(n){var t;return{c:function(){t=Y()},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function jo(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Password")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Ao(n){var t;return{c:function(){(t=W("p")).textContent="".concat(me("Hint: Use a phrase from a book.")),X(t,"class","help"),X(t,"slot","help")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Lo(n){var t;return{c:function(){t=Y()},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Io(n){var t,e=me(process.env.existing_user?"Set new password":"Sign up")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Uo(n){var t,e,r=ge("Go and [sign in](%1) if you already have an account.","#signin")+"";return{c:function(){t=W("p")},m:function(o,i,a){F(o,t,i),t.innerHTML=r,a&&e(),e=Q(t,"click",(function(){D(n[1].scrollTo)&&n[1].scrollTo.apply(this,arguments)}))},p:function(t,e){n=t},d:function(n){n&&K(t),e()}}}function zo(n){var t;return{c:function(){t=V("Convos")},m:function(n,e){F(n,t,e)},d:function(n){n&&K(t)}}}function Ho(n){var t,e=me("Blog")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Bo(n){var t,e=me("Documentation")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function qo(n){var t,e=me("GitHub")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Fo(n){var t,e,r,o,i,a,c,u,s,f,l,d,h,m,g,v,$,y=new Or({props:{href:"/",$$slots:{default:[yo]},$$scope:{ctx:n}}}),b="Convos"!=process.env.organization_name&&function(n){var t,e=("https://convos.by"!=process.env.organization_url?wo:bo)(n);return{c:function(){e.c(),t=J()},m:function(n,r){e.m(n,r),F(n,t,r)},p:function(n,t){e.p(n,t)},d:function(n){e.d(n),n&&K(t)}}}(n),w=!n[4].isFirst&&_o(n),_=[Co,So,Oo],x=[];function k(n,t){return process.env.status>=400?0:n[5]||process.env.open_to_public||n[4].isFirst?1:2}f=k(n),l=x[f]=_[f](n);var E=new Or({props:{href:"https://convos.by/",$$slots:{default:[zo]},$$scope:{ctx:n}}}),O=new Or({props:{href:"https://convos.by/blog",$$slots:{default:[Ho]},$$scope:{ctx:n}}}),S=new Or({props:{href:"https://convos.by/doc",$$slots:{default:[Bo]},$$scope:{ctx:n}}}),C=new Or({props:{href:"https://github.com/Nordaaker/convos",$$slots:{default:[qo]},$$scope:{ctx:n}}});return{c:function(){t=W("main"),e=W("article"),r=W("h1"),Fn(y.$$.fragment),o=Y(),b&&b.c(),i=Y(),(a=W("p")).textContent="".concat(me("Convos is the simplest way to use IRC, and it keeps you always online.")),c=Y(),w&&w.c(),u=Y(),s=W("section"),l.c(),d=Y(),h=W("footer"),Fn(E.$$.fragment),m=V("\n    —\n    "),Fn(O.$$.fragment),g=V("\n    —\n    "),Fn(S.$$.fragment),v=V("\n    —\n    "),Fn(C.$$.fragment),X(e,"class","welcome-screen__about"),X(s,"id","signup"),X(s,"class","welcome-screen__signup fade-in"),X(h,"class","welcome-screen__footer fade-in"),X(t,"id","top"),X(t,"class","welcome-screen")},m:function(l,p){F(l,t,p),q(t,e),q(e,r),Kn(y,r,null),q(r,o),b&&b.m(r,null),q(e,i),q(e,a),q(t,c),w&&w.m(t,null),q(t,u),q(t,s),x[f].m(s,null),q(t,d),q(t,h),Kn(E,h,null),q(h,m),Kn(O,h,null),q(h,g),Kn(S,h,null),q(h,v),Kn(C,h,null),n[19](t),$=!0},p:function(n,e){var r=p(e,1)[0],o={};1048576&r&&(o.$$scope={dirty:r,ctx:n}),y.$set(o),"Convos"!=process.env.organization_name&&b.p(n,r),n[4].isFirst?w&&(An(),Un(w,1,1,(function(){w=null})),Ln()):w?(w.p(n,r),In(w,1)):((w=_o(n)).c(),In(w,1),w.m(t,u));var i=f;(f=k(n))===i?x[f].p(n,r):(An(),Un(x[i],1,1,(function(){x[i]=null})),Ln(),(l=x[f])||(l=x[f]=_[f](n)).c(),In(l,1),l.m(s,null));var a={};1048576&r&&(a.$$scope={dirty:r,ctx:n}),E.$set(a);var c={};1048576&r&&(c.$$scope={dirty:r,ctx:n}),O.$set(c);var d={};1048576&r&&(d.$$scope={dirty:r,ctx:n}),S.$set(d);var h={};1048576&r&&(h.$$scope={dirty:r,ctx:n}),C.$set(h)},i:function(n){$||(In(y.$$.fragment,n),In(w),In(l),In(E.$$.fragment,n),In(O.$$.fragment,n),In(S.$$.fragment,n),In(C.$$.fragment,n),$=!0)},o:function(n){Un(y.$$.fragment,n),Un(w),Un(l),Un(E.$$.fragment,n),Un(O.$$.fragment,n),Un(S.$$.fragment,n),Un(C.$$.fragment,n),$=!1},d:function(e){e&&K(t),Gn(y),b&&b.d(),w&&w.d(),x[f].d(),Gn(E),Gn(O),Gn(S),Gn(C),n[19](null)}}}function Ko(n,t,e){var r,o,i,a;P(n,ee,(function(n){return e(10,r=n)}));var c=-1!=location.href.indexOf("email="),u=gn("user");P(n,u,(function(n){return e(4,a=n)}));var s=new vo,f=u.api.operation("loginUser");P(n,f,(function(n){return e(11,o=n)}));var l,d,p,h=u.api.operation("registerUser");function m(n){return g.apply(this,arguments)}function g(){return(g=Zn(Jn.mark((function n(t){return Jn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.reset(),n.next=3,u.load();case 3:return n.abrupt("return",u.is("authenticated")?ee.go("/"):location.reload());case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}P(n,h,(function(n){return e(12,i=n)})),mn((function(){if(!p){p=new IntersectionObserver((function(n){n.forEach((function(n){var t=n.intersectionRatio;n.target.style.opacity=t>.9?1:t?t-.25:1}))}),{threshold:[.3,.4,.5,.6,.7,.8,.9]}),ft(document,".fade-in",(function(n){return p.observe(n)}))}l&&ee.urlToForm(l)}));var v;return n.$$.update=function(){1024&n.$$.dirty&&(v=-1==r.path.indexOf("register")?0:"#signup"),8&n.$$.dirty&&e(1,s.wrapper=d,s),1026&n.$$.dirty&&s.scrollTo(r.hash?"#"+r.hash:0),2048&n.$$.dirty&&o.is("success")&&m(f),4096&n.$$.dirty&&i.is("success")&&(ee.update({lastUrl:""}),m(h))},[u,s,l,d,a,c,f,h,p,v,r,o,i,m,function(n){u.formEmail=n,e(0,u)},function(n){return f.perform(n.target)},function(n){u.formEmail=n,e(0,u)},function(n){return h.perform(n.target)},function(n){yn[n?"unshift":"push"]((function(){e(2,l=n)}))},function(n){yn[n?"unshift":"push"]((function(){e(3,d=n)}))}]}var Go=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if($o()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,Ko,Fo,M,{}),r}return u}(Yn);function Wo(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Vo(n,t,e){var r=n.slice();return r[20]=t[e],r}function Yo(n,t,e){var r=n.slice();return r[17]=t[e],r}function Jo(n){var t,e=new Or({props:{href:"/settings/connection",$$slots:{default:[Qo]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};8388608&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(In(e.$$.fragment,n),t=!0)},o:function(n){Un(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function Qo(n){var t,e,r,o=new Nt({props:{name:"exclamation-circle"}});return{c:function(){Fn(o.$$.fragment),t=Y(),(e=W("span")).textContent="".concat(me("No conversations"))},m:function(n,i){Kn(o,n,i),F(n,t,i),F(n,e,i),r=!0},p:O,i:function(n){r||(In(o.$$.fragment,n),r=!0)},o:function(n){Un(o.$$.fragment,n),r=!1},d:function(n){Gn(o,n),n&&K(t),n&&K(e)}}}function Zo(n){var t,e,r,o,i,a,c,u,s=(n[17].name||n[17].connection_id)+"",f=hi(n[17])+"",l=new Nt({props:{name:"network-wired"}});return{c:function(){Fn(l.$$.fragment),t=Y(),e=W("span"),r=V(s),o=Y(),i=W("b"),a=V(f),X(i,"class","unread"),i.hidden=c=!n[17].unread},m:function(n,c){Kn(l,n,c),F(n,t,c),F(n,e,c),q(e,r),F(n,o,c),F(n,i,c),q(i,a),u=!0},p:function(n,t){(!u||16&t)&&s!==(s=(n[17].name||n[17].connection_id)+"")&&tn(r,s),(!u||16&t)&&f!==(f=hi(n[17])+"")&&tn(a,f),(!u||16&t&&c!==(c=!n[17].unread))&&(i.hidden=c)},i:function(n){u||(In(l.$$.fragment,n),u=!0)},o:function(n){Un(l.$$.fragment,n),u=!1},d:function(n){Gn(l,n),n&&K(t),n&&K(e),n&&K(o),n&&K(i)}}}function Xo(n){var t,e,r,o,i,a,c,u,s=n[20].name+"",f=hi(n[20])+"",l=new Nt({props:{name:n[20].is_private?"user":"user-friends"}});return{c:function(){Fn(l.$$.fragment),t=Y(),e=W("span"),r=V(s),o=Y(),i=W("b"),a=V(f),X(i,"class","unread"),i.hidden=c=!n[20].unread},m:function(n,c){Kn(l,n,c),F(n,t,c),F(n,e,c),q(e,r),F(n,o,c),F(n,i,c),q(i,a),u=!0},p:function(n,t){var e={};16&t&&(e.name=n[20].is_private?"user":"user-friends"),l.$set(e),(!u||16&t)&&s!==(s=n[20].name+"")&&tn(r,s),(!u||16&t)&&f!==(f=hi(n[20])+"")&&tn(a,f),(!u||16&t&&c!==(c=!n[20].unread))&&(i.hidden=c)},i:function(n){u||(In(l.$$.fragment,n),u=!0)},o:function(n){Un(l.$$.fragment,n),u=!1},d:function(n){Gn(l,n),n&&K(t),n&&K(e),n&&K(o),n&&K(i)}}}function ni(n){var t,e=new Or({props:{href:n[20].path,class:di(n[17],n[20]),$$slots:{default:[Xo]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};16&t&&(r.href=n[20].path),16&t&&(r.class=di(n[17],n[20])),8388624&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(In(e.$$.fragment,n),t=!0)},o:function(n){Un(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function ti(n){for(var t,e,r,o=new Or({props:{href:n[17].path,class:di(n[17],n[17]),$$slots:{default:[Zo]},$$scope:{ctx:n}}}),i=n[17].dialogs.toArray(),a=[],c=0;c<i.length;c+=1)a[c]=ni(Vo(n,i,c));var u=function(n){return Un(a[n],1,1,(function(){a[n]=null}))};return{c:function(){Fn(o.$$.fragment),t=Y();for(var n=0;n<a.length;n+=1)a[n].c();e=J()},m:function(n,i){Kn(o,n,i),F(n,t,i);for(var c=0;c<a.length;c+=1)a[c].m(n,i);F(n,e,i),r=!0},p:function(n,t){var r={};if(16&t&&(r.href=n[17].path),16&t&&(r.class=di(n[17],n[17])),8388624&t&&(r.$$scope={dirty:t,ctx:n}),o.$set(r),16&t){var c;for(i=n[17].dialogs.toArray(),c=0;c<i.length;c+=1){var s=Vo(n,i,c);a[c]?(a[c].p(s,t),In(a[c],1)):(a[c]=ni(s),a[c].c(),In(a[c],1),a[c].m(e.parentNode,e))}for(An(),c=i.length;c<a.length;c+=1)u(c);Ln()}},i:function(n){if(!r){In(o.$$.fragment,n);for(var t=0;t<i.length;t+=1)In(a[t]);r=!0}},o:function(n){Un(o.$$.fragment,n),a=a.filter(Boolean);for(var t=0;t<a.length;t+=1)Un(a[t]);r=!1},d:function(n){Gn(o,n),n&&K(t),G(a,n),n&&K(e)}}}function ei(n){var t,e,r,o,i,a,c,u=hi(n[6])+"",s=new Nt({props:{name:n[6].unread?"bell":"bell-slash"}});return{c:function(){Fn(s.$$.fragment),t=Y(),(e=W("span")).textContent="".concat(me("Notifications")),r=Y(),o=W("b"),i=V(u),X(o,"class","unread"),o.hidden=a=!n[6].unread},m:function(n,a){Kn(s,n,a),F(n,t,a),F(n,e,a),F(n,r,a),F(n,o,a),q(o,i),c=!0},p:function(n,t){var e={};64&t&&(e.name=n[6].unread?"bell":"bell-slash"),s.$set(e),(!c||64&t)&&u!==(u=hi(n[6])+"")&&tn(i,u),(!c||64&t&&a!==(a=!n[6].unread))&&(o.hidden=a)},i:function(n){c||(In(s.$$.fragment,n),c=!0)},o:function(n){Un(s.$$.fragment,n),c=!1},d:function(n){Gn(s,n),n&&K(t),n&&K(e),n&&K(r),n&&K(o)}}}function ri(n){var t,e,r,o=new Nt({props:{name:"search"}});return{c:function(){Fn(o.$$.fragment),t=Y(),(e=W("span")).textContent="".concat(me("Search"))},m:function(n,i){Kn(o,n,i),F(n,t,i),F(n,e,i),r=!0},p:O,i:function(n){r||(In(o.$$.fragment,n),r=!0)},o:function(n){Un(o.$$.fragment,n),r=!1},d:function(n){Gn(o,n),n&&K(t),n&&K(e)}}}function oi(n){var t,e,r,o=new Nt({props:{name:"comment"}});return{c:function(){Fn(o.$$.fragment),t=Y(),(e=W("span")).textContent="".concat(me("Add conversation"))},m:function(n,i){Kn(o,n,i),F(n,t,i),F(n,e,i),r=!0},p:O,i:function(n){r||(In(o.$$.fragment,n),r=!0)},o:function(n){Un(o.$$.fragment,n),r=!1},d:function(n){Gn(o,n),n&&K(t),n&&K(e)}}}function ii(n){var t,e,r,o=new Nt({props:{name:"network-wired"}});return{c:function(){Fn(o.$$.fragment),t=Y(),(e=W("span")).textContent="".concat(me("Add connection"))},m:function(n,i){Kn(o,n,i),F(n,t,i),F(n,e,i),r=!0},p:O,i:function(n){r||(In(o.$$.fragment,n),r=!0)},o:function(n){Un(o.$$.fragment,n),r=!1},d:function(n){Gn(o,n),n&&K(t),n&&K(e)}}}function ai(n){var t,e,r,o=new Nt({props:{name:"user-cog"}});return{c:function(){Fn(o.$$.fragment),t=Y(),(e=W("span")).textContent="".concat(me("Account"))},m:function(n,i){Kn(o,n,i),F(n,t,i),F(n,e,i),r=!0},p:O,i:function(n){r||(In(o.$$.fragment,n),r=!0)},o:function(n){Un(o.$$.fragment,n),r=!1},d:function(n){Gn(o,n),n&&K(t),n&&K(e)}}}function ci(n){var t,e,r,o=new Nt({props:{name:"question-circle"}});return{c:function(){Fn(o.$$.fragment),t=Y(),(e=W("span")).textContent="".concat(me("Help"))},m:function(n,i){Kn(o,n,i),F(n,t,i),F(n,e,i),r=!0},p:O,i:function(n){r||(In(o.$$.fragment,n),r=!0)},o:function(n){Un(o.$$.fragment,n),r=!1},d:function(n){Gn(o,n),n&&K(t),n&&K(e)}}}function ui(n){var t,e=new Or({props:{href:"/settings",$$slots:{default:[si]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};8388608&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(In(e.$$.fragment,n),t=!0)},o:function(n){Un(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function si(n){var t,e,r,o=new Nt({props:{name:"tools"}});return{c:function(){Fn(o.$$.fragment),t=Y(),(e=W("span")).textContent="".concat(me("Settings"))},m:function(n,i){Kn(o,n,i),F(n,t,i),F(n,e,i),r=!0},p:O,i:function(n){r||(In(o.$$.fragment,n),r=!0)},o:function(n){Un(o.$$.fragment,n),r=!1},d:function(n){Gn(o,n),n&&K(t),n&&K(e)}}}function fi(n){var t,e,r,o,i=me('Search for "%1"',n[5])+"",a=new Nt({props:{name:"search"}});return{c:function(){Fn(a.$$.fragment),t=Y(),e=W("span"),r=V(i)},m:function(n,i){Kn(a,n,i),F(n,t,i),F(n,e,i),q(e,r),o=!0},p:function(n,t){(!o||32&t)&&i!==(i=me('Search for "%1"',n[5])+"")&&tn(r,i)},i:function(n){o||(In(a.$$.fragment,n),o=!0)},o:function(n){Un(a.$$.fragment,n),o=!1},d:function(n){Gn(a,n),n&&K(t),n&&K(e)}}}function li(n){for(var t,e,r,o,i,a,c,u,s,f,l,d,h,m,g,v,$,y,b,w,_,x,k,E,O,S,C,R,D,M=(n[4].email||me("Account"))+"",T=n[4].is("admin"),P=new Nt({props:{name:"search"}}),j=!n[4].connections.size&&Jo(n),A=n[4].connections.toArray(),L=[],I=0;I<A.length;I+=1)L[I]=ti(Yo(n,A,I));var U=function(n){return Un(L[n],1,1,(function(){L[n]=null}))},z=new Or({props:{href:"/chat",$$slots:{default:[ei]},$$scope:{ctx:n}}}),H=new Or({props:{href:"/search",$$slots:{default:[ri]},$$scope:{ctx:n}}}),B=new Or({props:{href:"/settings/conversation",$$slots:{default:[oi]},$$scope:{ctx:n}}}),J=new Or({props:{href:"/settings/connection",$$slots:{default:[ii]},$$scope:{ctx:n}}}),Z=new Or({props:{href:"/settings/account",$$slots:{default:[ai]},$$scope:{ctx:n}}}),nn=new Or({props:{href:"/help",$$slots:{default:[ci]},$$scope:{ctx:n}}}),rn=T&&ui(n),an=new Nt({props:{name:"power-off"}}),cn=new Or({props:{href:"/search?q="+encodeURIComponent(n[5]),class:"for-search hidden",$$slots:{default:[fi]},$$scope:{ctx:n}}});return{c:function(){t=W("div"),e=W("form"),r=W("input"),i=Y(),a=W("label"),Fn(P.$$.fragment),c=Y(),u=W("nav"),(s=W("h3")).textContent="".concat(me("Conversations")),f=Y(),j&&j.c(),l=Y();for(var p=0;p<L.length;p+=1)L[p].c();d=Y(),h=W("h3"),m=V(M),g=Y(),Fn(z.$$.fragment),v=Y(),Fn(H.$$.fragment),$=Y(),Fn(B.$$.fragment),y=Y(),Fn(J.$$.fragment),b=Y(),Fn(Z.$$.fragment),w=Y(),Fn(nn.$$.fragment),_=Y(),rn&&rn.c(),x=Y(),k=W("a"),Fn(an.$$.fragment),E=Y(),(O=W("span")).textContent="".concat(me("Log out")),S=Y(),Fn(cn.$$.fragment),X(r,"type","text"),X(r,"id","search_input"),X(r,"placeholder",o=n[3]?me("Search..."):me("Convos")),X(a,"for","search_input"),X(e,"class","sidebar__header"),X(k,"href",ee.urlFor("/logout")),X(k,"target","_self"),X(u,"class","sidebar-left__nav"),on(u,"is-filtering",n[1].length>0),X(t,"class","sidebar-left")},m:function(o,p,C){F(o,t,p),q(t,e),q(e,r),en(r,n[1]),q(e,i),q(e,a),Kn(P,a,null),q(t,c),q(t,u),q(u,s),q(u,f),j&&j.m(u,null),q(u,l);for(var M=0;M<L.length;M+=1)L[M].m(u,null);q(u,d),q(u,h),q(h,m),q(u,g),Kn(z,u,null),q(u,v),Kn(H,u,null),q(u,$),Kn(B,u,null),q(u,y),Kn(J,u,null),q(u,b),Kn(Z,u,null),q(u,w),Kn(nn,u,null),q(u,_),rn&&rn.m(u,null),q(u,x),q(u,k),Kn(an,k,null),q(k,E),q(k,O),q(u,S),Kn(cn,u,null),n[16](u),R=!0,C&&N(D),D=[Q(r,"input",n[15]),Q(r,"blur",n[9]),Q(r,"focus",n[10]),Q(r,"keydown",n[11]),Q(e,"submit",mi),Q(u,"click",pi)]},p:function(n,t){var e=p(t,1)[0];if((!R||8&e&&o!==(o=n[3]?me("Search..."):me("Convos")))&&X(r,"placeholder",o),2&e&&r.value!==n[1]&&en(r,n[1]),n[4].connections.size?j&&(An(),Un(j,1,1,(function(){j=null})),Ln()):j?(j.p(n,e),In(j,1)):((j=Jo(n)).c(),In(j,1),j.m(u,l)),16&e){var i;for(A=n[4].connections.toArray(),i=0;i<A.length;i+=1){var a=Yo(n,A,i);L[i]?(L[i].p(a,e),In(L[i],1)):(L[i]=ti(a),L[i].c(),In(L[i],1),L[i].m(u,d))}for(An(),i=A.length;i<L.length;i+=1)U(i);Ln()}(!R||16&e)&&M!==(M=(n[4].email||me("Account"))+"")&&tn(m,M);var c={};8388672&e&&(c.$$scope={dirty:e,ctx:n}),z.$set(c);var s={};8388608&e&&(s.$$scope={dirty:e,ctx:n}),H.$set(s);var f={};8388608&e&&(f.$$scope={dirty:e,ctx:n}),B.$set(f);var h={};8388608&e&&(h.$$scope={dirty:e,ctx:n}),J.$set(h);var g={};8388608&e&&(g.$$scope={dirty:e,ctx:n}),Z.$set(g);var v={};8388608&e&&(v.$$scope={dirty:e,ctx:n}),nn.$set(v),16&e&&(T=n[4].is("admin")),T?rn?(rn.p(n,e),In(rn,1)):((rn=ui(n)).c(),In(rn,1),rn.m(u,x)):rn&&(An(),Un(rn,1,1,(function(){rn=null})),Ln());var $={};32&e&&($.href="/search?q="+encodeURIComponent(n[5])),8388640&e&&($.$$scope={dirty:e,ctx:n}),cn.$set($),2&e&&on(u,"is-filtering",n[1].length>0)},i:function(e){if(!R){In(P.$$.fragment,e),In(j);for(var r=0;r<A.length;r+=1)In(L[r]);In(z.$$.fragment,e),In(H.$$.fragment,e),In(B.$$.fragment,e),In(J.$$.fragment,e),In(Z.$$.fragment,e),In(nn.$$.fragment,e),In(rn),In(an.$$.fragment,e),In(cn.$$.fragment,e),On((function(){C||(C=Hn(t,hr,n[0],!0)),C.run(1)})),R=!0}},o:function(e){Un(P.$$.fragment,e),Un(j),L=L.filter(Boolean);for(var r=0;r<L.length;r+=1)Un(L[r]);Un(z.$$.fragment,e),Un(H.$$.fragment,e),Un(B.$$.fragment,e),Un(J.$$.fragment,e),Un(Z.$$.fragment,e),Un(nn.$$.fragment,e),Un(rn),Un(an.$$.fragment,e),Un(cn.$$.fragment,e),C||(C=Hn(t,hr,n[0],!1)),C.run(0),R=!1},d:function(e){e&&K(t),Gn(P),j&&j.d(),G(L,e),Gn(z),Gn(H),Gn(B),Gn(J),Gn(Z),Gn(nn),rn&&rn.d(),Gn(an),Gn(cn),n[16](null),e&&C&&C.end(),N(D)}}}function di(n,t){var e=[t.dialog_id?"for-dialog":"for-connection"];return(t.frozen||"connected"!=n.state)&&e.push("is-frozen"),t.errors&&e.push("has-errors"),e.join(" ")}function pi(n){(n.target.className||"").match(/(network|user)/)&&setTimeout((function(){return ee.update({activeMenu:"settings"})}),50)}function hi(n){return n.unread>60?"60+":n.unread||0}var mi=function(n){return n.preventDefault()};function gi(n,t,e){var r,o,i;P(n,ee,(function(n){return e(14,o=n)}));var a=t.transition,c=gn("user");P(n,c,(function(n){return e(4,r=n)}));var u=r.notifications;P(n,u,(function(n){return e(6,i=n)}));var s,f,l=0,d="",p=!1,h=[];function m(){e(3,p=!1),ft(s,"a",(function(n){return n.classList.remove("has-focus")})),setTimeout((function(){if(s){e(1,d="");var n=document.activeElement;n&&tt(n,s)&&ft(s,"a.has-path",(function(n){return n.focus()}))}}),100)}function g(){if(s){e(12,l=0),e(3,p=!0),e(13,h=[]);var n=[d.match(/^\W+/)?"":"\\b\\W*"];n[0]&&n.push("");for(var t=function(t){var r=new RegExp(n[t]+lt(d),"i"),o={};if(ft(s,"a",(function(n,t){var i=n.classList;!d.length&&i.contains("has-path")&&e(12,l=t),i.remove("has-focus");var a=!d.length||!n.href.match(/\/search$/)&&!o[n.href]&&n.textContent.match(r);a&&h.push(n),n.classList[a?"remove":"add"]("hidden"),o[n.href]=!0})),h.length)return"break"},r=0;r<n.length;r++){if("break"===t(r))break}ft(s,".for-connection",(function(n){for(var t=n;(t=t.nextElementSibling)&&t.classList.contains("for-dialog");)if(!t.classList.contains("hidden"))return n.classList.remove("hidden")}));var o=s.querySelector(".for-search");o.classList[d?"remove":"add"]("hidden"),o.classList.contains("hidden")||h.push(o),ft(s,"h3",(function(n){for(var t=n;(t=t.nextElementSibling)&&!ht(t,"h3");)if(!t.classList.contains("hidden"))return n.classList.remove("hidden");n.classList.add("hidden")}))}}return n.$set=function(n){"transition"in n&&e(0,a=n.transition)},n.$$.update=function(){2&n.$$.dirty&&g(),2&n.$$.dirty&&e(5,f=d.replace(/^\//,"")),16388&n.$$.dirty&&s&&m(),12288&n.$$.dirty&&h[l]&&h[l].classList.add("has-focus")},[a,d,s,p,r,f,i,c,u,m,g,function(n){if(13==n.keyCode)return n.preventDefault(),m(),void(h[l]&&ee.go(h[l].href));var t=38==n.keyCode?-1:40==n.keyCode?1:0;t&&(n.preventDefault(),h[l]&&h[l].classList.remove("has-focus"),e(12,l+=n.ctrlKey?4*t:t)),l<0&&e(12,l=h.length-1),l>=h.length&&e(12,l=0)},l,h,o,function(){d=this.value,e(1,d)},function(n){yn[n?"unshift":"push"]((function(){e(2,s=n)}))}]}var vi=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Wo()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,gi,li,M,{transition:0}),r}return u}(Yn);function $i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var yi=function(n,t){return n.name.localeCompare(t.name)},bi=function(t){c(a,t);var e,r=(e=a,function(){var n,t=i(e);if($i()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n(this,a),(t=r.call(this,e)).sorter=o.sorter||yi,t._sort(),t}return E(a,[{key:"filter",value:function(n){return Array.from(this.values()).filter(n)}},{key:"set",value:function(n,t){m(i(a.prototype),"set",this).call(this,n,t),this._sort()}},{key:"toArray",value:function(){return Array.from(this.values())}},{key:"_sort",value:function(){var n=this,t=Array.from(this.entries()),e=this.sorter;return this.clear(),t.sort((function(n,t){return e(n[1],t[1])})).forEach((function(t){var e=p(t,2),r=e[0],o=e[1];return m(i(a.prototype),"set",n).call(n,r,o)})),t}}]),a}(y(Map)),wi={b:"channel_ban",C:"ctcp_block",c:"colour_filter",e:"ban_exemption",F:"enable_forwarding",f:"forward",g:"free_invite",I:"invite_exemption",j:"join_throttle",k:"password",l:"join_limit",L:"large_ban_list",m:"moderated",n:"prevent_external_send",P:"permanent",p:"privat",Q:"block_forwarded_users",q:"quiet",r:"block_unidentified",s:"secret",S:"secure_connection_only",t:"ops_topic"},_i={o:"@",v:"+"},xi={a:"admin",B:"bot",h:"half_operator",i:"invisible",I:"whois_hide_online",o:"operator",p:"whois_hide_channels",R:"privmsg_from_registered_only",r:"registered",S:"service_bot",T:"ctcp_block",t:"vhost",v:"voice",W:"whois_notifications",x:"cloaked_hostname",z:"secure_connection",Z:"secure_connection_only"};function ki(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function Ei(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?ki(Object(e),!0).forEach((function(t){Xn(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):ki(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function Oi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Si=new RegExp("^[#&]"),Ci=function(n,t){return t.modes.operator||!1-n.modes.operator||t.modes.voice||!1-n.modes.voice||n.name.localeCompare(t.name)},Ri=0,Ni=function(t){c(s,t);var e,r,a,u=(e=s,function(){var n,t=i(e);if(Oi()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function s(t){var e;return n(this,s),(e=u.call(this)).prop("ro","_participants",new bi([],{sorter:Ci})),e.prop("ro","api",t.api),e.prop("ro","chunkSize",60),e.prop("ro","color",pt(t.dialog_id||t.connection_id||"")),e.prop("ro","connection_id",t.connection_id||""),e.prop("ro","is_private",(function(){return e.dialog_id&&!Si.test(e.name)})),e.prop("ro","omnibus",t.omnibus||mo),e.prop("ro","path",ee.dialogPath(t)),e.prop("rw","endOfHistory",null),e.prop("rw","errors",0),e.prop("rw","first_time",!1),e.prop("rw","last_active",new Pt(t.last_active)),e.prop("rw","last_read",new Pt(t.last_read)),e.prop("rw","messages",[]),e.prop("rw","modes",{}),e.prop("rw","name",t.name||t.dialog_id||t.connection_id||"ERR"),e.prop("rw","startOfHistory",null),e.prop("rw","status","pending"),e.prop("rw","topic",t.topic||""),e.prop("rw","unread",t.unread||0),t.hasOwnProperty("dialog_id")?(e.prop("ro","dialog_id",t.dialog_id),e.prop("ro","title",(function(){return[e.name,e.connection_id].join(" - ")})),e.prop("rw","frozen",t.frozen||"")):(e.prop("ro","frozen",(function(){return e._calculateFrozen()})),e.prop("ro","title",(function(){return e.name}))),t.dialog_id&&e.prop("persist","wantNotifications",!1,{key:t.dialog_id+":wantNotifications",lazy:!0}),e._addOperations(),e}return E(s,[{key:"addMessage",value:function(n){if(n.from&&-1!=["action","error","private"].indexOf(n.type)){if(n.highlight||this.is_private||this.wantNotifications){var t=n.from==this.name?n.from:me("%1 in %2",n.from,this.name);this.omnibus.notify(t,n.message)}this.update({unread:this.unread+1})}return this.addMessages("push",[n])}},{key:"addMessages",value:function(n,t){var e=0,r=t.length;switch(n){case"push":e=this.messages.length,r=(t=this.messages.concat(t)).length;break;case"unshift":t=t.concat(this.messages)}for(var o=e;o<r;o++){var i=t[o];if(!i.hasOwnProperty("markdown")){if(!i.from){var a=[!0,this.connection_id||"Convos","Convos"];i.internal=a[0],i.from=a[1],i.fromId=a[2]}i.fromId||(i.fromId=i.from.toLowerCase()),i.type||(i.type="notice"),i.vars&&(i.message=me.apply(void 0,[i.message].concat(x(i.vars)))),i.id="msg_"+ ++Ri,i.color="Convos"==i.fromId?"inherit":pt(i.from.toLowerCase()),i.ts=new Pt(i.ts),i.embeds=(i.message.match(/https?:\/\/(\S+)/g)||[]).map((function(n){return n.replace(/(\W)?$/,"")})),i.markdown=pe(i.message)}}return this.update({messages:t}),this}},{key:"is",value:function(n){return"connection"==n?!this.dialog_id:"conversation"==n?this.dialog_id&&!this.is("notifications"):"frozen"==n?this.frozen&&!0:"locked"==n?"Invalid password."==this.frozen:"notifications"!=n&&("private"==n?this.is_private:"search"!=n&&("unread"==n?this.unread&&!0:this.status==n))}},{key:"load",value:(a=Zn(Jn.mark((function n(){var t,e,r,o,i,a=arguments;return Jn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:{},this.messagesOp&&!this.is("loading")){n.next=3;break}return n.abrupt("return",this);case 3:if(!(e="maybe"==t.after?"after":"maybe"==t.before?"before":"")||!this.is("success")){n.next=6;break}return n.abrupt("return",this);case 6:if("after"==e&&delete this.participantsLoaded,r=this._loadOpParams(t),!this._hasEndOfStream(r)){n.next=10;break}return n.abrupt("return",this);case 10:return this._shouldClearMessages(r)&&this.update({messages:[]}),this.update({status:"loading"}),n.next=14,this.messagesOp.perform(r);case 14:return o=this.messagesOp.res.body,this.addMessages(r.before?"unshift":"push",o.messages||[]),this.update({status:this.messagesOp.status}),this.messages.length<=10&&this.update({first_time:!0}),(i=this.messages.length)&&r.before&&o.end&&this.update({startOfHistory:this.messages[0].ts}),i&&!r.before&&o.end&&this.update({endOfHistory:this.messages.slice(-1)[0].ts}),n.abrupt("return",this);case 22:case"end":return n.stop()}}),n,this)}))),function(){return a.apply(this,arguments)})},{key:"findParticipant",value:function(n){return this._participants.get(this._participantId(ct(n,"undef")?"":n))}},{key:"participants",value:function(){var n=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.forEach((function(t){t.nick||(t.nick=t.name||"");var e=n._participantId(t.nick),r=n._participants.get(e);r&&(Object.keys(t).forEach((function(n){r[n]=t[n]})),t=r),t.modes||(t.modes={}),n._calculateModes(xi,t.mode,t.modes),n._participants.set(e,Ei({name:t.nick},t,{color:pt(e),id:e,ts:new Pt}))})),t.length&&this.update({_participants:!0}),this._participants.toArray()}},{key:"send",value:function(n,t){this.omnibus.send({connection_id:this.connection_id,dialog_id:this.dialog_id||"",message:n},"function"==typeof t?t:t?this[t].bind(this):null)}},{key:"setLastRead",value:(r=Zn(Jn.mark((function n(){return Jn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.setLastReadOp){n.next=2;break}return n.abrupt("return");case 2:return this.update({errors:0,unread:0}),n.next=5,this.setLastReadOp.perform({connection_id:this.connection_id,dialog_id:this.dialog_id});case 5:return n.abrupt("return",this.update({last_read:new Pt}));case 6:case"end":return n.stop()}}),n,this)}))),function(){return r.apply(this,arguments)})},{key:"update",value:function(n){return this._loadParticipants(),m(i(s.prototype),"update",this).call(this,n)}},{key:"wsEventMode",value:function(n){n.nick?(this.participants([{nick:n.nick,mode:n.mode}]),this.addMessage({message:"%1 got mode %2 from %3.",vars:[n.nick,n.mode,n.from]})):this.update({modes:this._calculateModes(wi,n.mode,this.modes)})}},{key:"wsEventNickChange",value:function(n){var t=this._participantId(n.old_nick);if(this._participants.has(t)&&n.old_nick!=n.new_nick){this._participants.delete(t),this.participants([{nick:n.new_nick}]);var e="me"==n.type?"You (%1) changed nick to %2.":"%1 changed nick to %2.";this.addMessage({message:e,vars:[n.old_nick,n.new_nick]})}}},{key:"wsEventPart",value:function(n){var t=this.findParticipant(n.nick);t&&!t.me&&(this._participants.delete(this._participantId(n.nick)),this.update({_participants:!0}),this.addMessage(this._partMessage(n)))}},{key:"wsEventSentClear",value:function(n){n.errors||(this.update({messages:[]}),this.addMessage({message:"History was cleared for %1.",vars:[this.name]}))}},{key:"wsEventSentNames",value:function(n){this._updateParticipants(n);var t={message:"Participants (%1): %2",vars:[]},e=this._participants.toArray().map((function(n){return(_i[n.mode]||n.mode||"")+n.name}));e.length>1&&(t.message+=" and %3.",t.vars[2]=e.pop()),t.vars[0]=e.length,t.vars[1]=e.join(", "),this.addMessage(t)}},{key:"wsEventSentTopic",value:function(n){var t=n.topic?"Topic for %1 is: %2":"No topic is set for %1.";this.addMessage({message:t,vars:[this.name,n.topic]}),this.update({topic:n.topic})}},{key:"_addOperations",value:function(){this.prop("ro","messagesOp",this.api.operation("dialogMessages")),this.prop("ro","setLastReadOp",this.api.operation("setDialogLastRead"))}},{key:"_calculateModes",value:function(n,t,e){var r=(t||"").match(/^(\+|-)?(.*)/)||["","+",""],o=p(r,3),i=(o[0],o[1]);o[2].split("").forEach((function(t){e[n[t]||t]="-"!=i}))}},{key:"_calculateFrozen",value:function(){return""}},{key:"_hasEndOfStream",value:function(n){return!!this.messages.length&&(n.before&&this.startOfHistory||!n.before&&this.endOfHistory)}},{key:"_loadOpParams",value:function(n){var t=this,e={connection_id:this.connection_id,dialog_id:this.dialog_id};return e.limit="maybe"!=n.after||n.limit?this.chunkSize:200,["after","before"].forEach((function(r){if(n.hasOwnProperty(r)&&(e[r]=n[r]),"maybe"==e[r]&&(e[r]=t._realMessage("before"==r?0:-1)),"number"==typeof e[r]&&(e[r]=t._realMessage(e[r])),ct(e[r],"object")&&(e[r]=e[r].ts.toISOString()),ct(e[r],"undef"))return delete e[r]})),e}},{key:"_loadParticipants",value:function(){if(!this.participantsLoaded&&this.dialog_id&&this.messagesOp&&!this.is("frozen")&&this.messagesOp.is("success"))return this.participantsLoaded=!0,this.is_private?this.send("/ison","_noop"):this.send("/names","_updateParticipants")}},{key:"_noop",value:function(){}},{key:"_participantId",value:function(n){return n.toLowerCase()}},{key:"_partMessage",value:function(n){var t={message:"%1 parted.",vars:[n.nick]};return n.kicker?(t.message="%1 was kicked by %2"+(n.message?": %3":""),t.vars.push(n.kicker),t.vars.push(n.message)):n.message&&(t.message+=" Reason: %2",t.vars.push(n.message)),t}},{key:"_realMessage",value:function(n){for(var t=-1==n?-1:1,e=this.messages,r=-1==n?this.messages.length-1:0;e[r];){if(!e[r].internal)return e[r];r+=t}return null}},{key:"_shouldClearMessages",value:function(n){var t=this.messages[0];if(!t)return!1;if(n.before&&n.before!=t.ts.toISOString())return!0;var e=this.messages.slice(-1)[0];return!(!n.after||n.after==e.ts.toISOString())||!(n.after||n.before||this.endOfHistory)}},{key:"_updateParticipants",value:function(n){this._participants.clear(),this.participants(n.participants),n.stopPropagation()}}]),s}($t);function Di(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function Mi(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?Di(Object(e),!0).forEach((function(t){Xn(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Di(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function Ti(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Pi=function(n,t){return(n.is_private||0)-(t.is_private||0)||n.name.localeCompare(t.name)},ji=function(t){c(a,t);var e,r=(e=a,function(){var n,t=i(e);if(Ti()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function a(t){var e;n(this,a),(e=r.call(this,t)).prop("ro","dialogs",new bi([],{sorter:Pi})),e.prop("rw","on_connect_commands",t.on_connect_commands||""),e.prop("rw","state",t.state||"queued"),e.prop("rw","wanted_state",t.wanted_state||"connected"),e.prop("rw","url","string"==typeof t.url?new Kt(t.url):t.url||new Kt("convos://loopback"));var o=t.me||{},i=o.nick||e.url.searchParams.get("nick")||"";return e.prop("rw","nick",i),e.prop("rw","real_host",o.real_host||e.url.hostname),e.participants([{nick:i}]),e}return E(a,[{key:"ensureDialog",value:function(n){var t=this,e=this.dialogs.get(n.dialog_id);return e?e.update(n):((e=new Ni(Mi({},n,{connection_id:this.connection_id,api:this.api}))).on("message",(function(n){return t.emit("message",n)})),e.on("update",(function(){return t.update({dialogs:!0})})),this._addDefaultParticipants(e),this.dialogs.set(e.dialog_id,e),this.update({dialogs:!0}),this.emit("dialogadd",e),e)}},{key:"findDialog",value:function(n){return this.dialogs.get(n.dialog_id)||null}},{key:"is",value:function(n){return this.state==n||m(i(a.prototype),"is",this).call(this,n)}},{key:"removeDialog",value:function(n){var t=this.findDialog(n)||n;return this.dialogs.delete(t.dialog_id),this.emit("dialogremove",t),this.update({dialogs:!0})}},{key:"update",value:function(n){return n.url&&"string"==typeof n.url&&(n.url=new Kt(n.url)),m(i(a.prototype),"update",this).call(this,n)}},{key:"wsEventConnection",value:function(n){this.update({state:n.state}),this.addMessage(n.message?{message:"Connection state changed to %1: %2",vars:[n.state,n.message]}:{message:"Connection state changed to %1.",vars:[n.state]})}},{key:"wsEventFrozen",value:function(n){var t=this.findDialog(n),e=t&&t.frozen;this.ensureDialog(n).participants([{nick:this.nick,me:!0}]),n.frozen&&(t||this).addMessage({message:n.frozen,vars:[]}),e&&!n.frozen&&t.addMessage({message:"Connected.",vars:[]})}},{key:"wsEventMe",value:function(n){this.wsEventNickChange(n),this.update(n)}},{key:"wsEventMessage",value:function(n){return n.dialog_id?this.ensureDialog(n).addMessage(n):this.addMessage(n)}},{key:"wsEventNickChange",value:function(n){var t={old_nick:n.old_nick||this.nick,new_nick:n.new_nick||n.nick,type:n.type};n.old_nick==this.nick&&(t.me=!0),m(i(a.prototype),"wsEventNickChange",this).call(this,t),this.dialogs.forEach((function(n){return n.wsEventNickChange(t)}))}},{key:"wsEventError",value:function(n){var t={message:ot(n)||n.frozen||"Unknown error from %1.",sent:n,type:"error",vars:n.command||[n.message]},e=(n.message||"").match(/^\/j(oin)? (\S+)/);if(e)return this.ensureDialog(Mi({},n,{dialog_id:e[2]}));var r=n.dialog_id&&n.frozen?this.ensureDialog(n):this.findDialog(n)||this;r.update({errors:this.errors+1}),r.addMessage(t)}},{key:"wsEventJoin",value:function(n){var t=this.ensureDialog(n),e=n.nick||this.nick;e!=this.nick&&t.addMessage({message:"%1 joined.",vars:[e]}),t.participants([{nick:e}])}},{key:"wsEventPart",value:function(n){if(n.nick==this.nick)return this.removeDialog(n);n.dialog_id||this.dialogs.forEach((function(t){return t.wsEventPart(n)}))}},{key:"wsEventQuit",value:function(n){this.wsEventPart(n)}},{key:"wsEventSentJoin",value:function(n){this.wsEventJoin(n)}},{key:"wsEventSentList",value:function(n){var t=n.args||"/*/";this.addMessage(n.done?{message:"Found %1 of %2 dialogs from %3.",vars:[n.dialogs.length,n.n_dialogs,t]}:{message:"Found %1 of %2 dialogs from %3, but dialogs are still loading.",vars:[n.dialogs.length,n.n_dialogs,t]})}},{key:"wsEventSentMode",value:function(n){var t=this.findDialog(n)||this,e=(n.command[1]||"").match(/(\W*)(\w)$/);if(!e)return console.log("[wsEventSentMode] Unable to handle message:",n);switch(e.shift(),e[1]){case"":return t.addMessage({message:"%s has mode %s",vars:[n.dialog_id,n.mode]});case"k":return t.addMessage({message:"+"==e[0]?"Key was set.":"Key was unset."});case"b":return this._wsEventSentModeB(n,e)}}},{key:"_wsEventSentModeB",value:function(n,t){var e=this.findDialog(n)||this;if(n.banlist)n.banlist.length||e.addMessage({message:"Ban list is empty."}),n.banlist.forEach((function(n){e.addMessage({message:"Ban mask %1 set by %2 at %3.",vars:[n.mask,n.by,new Date(1e3*n.ts).toLocaleString()]})}));else{var r="+"==t[0]?"set":"removed";e.addMessage({message:"Ban mask %1 ".concat(r,"."),vars:[n.command[2]]})}}},{key:"wsEventSentQuery",value:function(n){this.ensureDialog(n)}},{key:"wsEventSentWhois",value:function(n){var t="%1 (%2)",e=[n.nick,n.host],r=Object.keys(n.channels).sort().map((function(t){return(_i[n.channels[t].mode]||"")+t}));n.channels=r,n.idle_for&&r.length?(t+=" has been idle for %3s in %4.",e.push(n.idle_for),e.push(r.join(", "))):n.idle_for&&!r.length?(t+="has been idle for %3s, and is not in any channels.",e.push(n.idle_for)):r.length?(t+=" is active in %3.",e.push(r.join(", "))):t+=" is not in any channels.",(this.findDialog(n)||this).addMessage({message:t,vars:e,sent:n})}},{key:"_addDefaultParticipants",value:function(n){var t=[{nick:this.nick,me:!0}];n.is_private&&t.push({nick:n.name}),n.participants(t)}},{key:"_addOperations",value:function(){this.prop("ro","setLastReadOp",this.api.operation("setConnectionLastRead")),this.prop("ro","messagesOp",this.api.operation("connectionMessages"))}},{key:"_calculateFrozen",value:function(){switch(this.state){case"connected":return"";case"disconnected":return"Disconnected.";case"unreachable":return"Unreachable.";default:return"Connecting..."}}}]),a}(Ni),Ai=e((function(n){function t(n){for(var t=document.createElement("div"),e=[[n,t]],o=[];e.length;){var i=e.shift(),a=p(i,2),c=a[0],u=a[1],s=void 0,f=void 0,l=r(c);if(null===c||"undefined"==l?l="null":Array.isArray(c)&&(l="array"),"array"==l?((f=function(n){return n}).len=c.length,(s=document.createElement("div")).className="json-array "+(f.len?"has-items":"is-empty")):"object"==l?function(){var n=Object.keys(c).sort();(f=function(t){return n[t]}).len=n.length,(s=document.createElement("div")).className="json-object "+(f.len?"has-items":"is-empty")}():((s=document.createElement("span")).className="json-"+l,s.textContent="null"==l?"null":"boolean"!=l?c:c?"true":"false"),f){var d=document.createElement("span");if(d.className="json-type",d.textContent=f.len?l+"["+f.len+"]":"{}",u.appendChild(d),-1!=o.indexOf(c))t.classList.add("has-recursive-items"),s.classList.add("is-seen");else{for(var h=0;h<f.len;h++){var m=f(h),g=document.createElement("div"),v=document.createElement("span");v.className="json-key",v.textContent=m,g.appendChild(v),s.appendChild(g),e.push([c[m],g])}o.push(c)}}u.className="json-item "+s.className.replace(/^json-/,"contains-"),u.appendChild(s)}return t}try{n.exports={jsonhtmlify:t}}catch(n){window.jsonhtmlify=t}})).jsonhtmlify;function Li(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function Ii(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Ui=function(t){c(a,t);var e,r=(e=a,function(){var n,t=i(e);if(Ii()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function a(t){var e;return n(this,a),(e=r.call(this)).name="EmbedMaker",e.prop("persist","disableInstagram",!1),e.prop("persist","disableTwitter",!1),e.prop("persist","expandUrlToMedia",!0),e.prop("ro","api",t.api),e.prop("ro","embeds",{}),e}return E(a,[{key:"render",value:function(n,t){var e=this;if(this.expandUrlToMedia){var r={};ft(n,".message__embed",(function(n){r[n.dataset.url]=n})),t.forEach((function(t){e.embeds[t]||e._loadAndRender(t),r[t]||n.appendChild(e._ensureEmbedEl(t)),delete r[t]})),Object.keys(r).forEach((function(n){return r[n].remove()}))}}},{key:"renderInstagram",value:function(n){if(!this.disableInstagram)return window.instgrm?window.instgrm.Embeds.process():void ut("//platform.instagram.com/en_US/embeds.js")}},{key:"renderPasteEl",value:function(n){io.lineNumbersBlock(n.querySelector("pre")),ft(n,".le-meta",(function(n){n.addEventListener("click",(function(){return n.parentNode.classList.toggle("is-expanded")}))}))}},{key:"renderPhoto",value:function(n){var t=this;ft(n,"img",(function(n){return n.addEventListener("click",(function(e){e.preventDefault(),t.showMedia(n)}))}))}},{key:"renderTwitter",value:function(n){this.disableTwitter||(window.twttr&&window.twttr.widgets.load(),ut("//platform.twitter.com/widgets.js"))}},{key:"showMedia",value:function(n){var t=rt(document.querySelector("body"),"fullscreen-media-wrapper",(function(n){n.addEventListener("click",(function(t){return dt(n,t.target!=n)}))}));!function(n){for(;n.firstChild;)n.removeChild(n.firstChild)}(t),t.appendChild(n.cloneNode()),dt(t,!0)}},{key:"toggleDetails",value:function(n,t){var e=n.querySelector(".has-message-details");if(e)return dt(e,"toggle");var r=function(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?Li(Object(e),!0).forEach((function(t){Xn(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Li(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}({},t.sent||t);["bubbles","color","command","dispatchTo","embeds","event","fromId","id","markdown","method","stopPropagation"].forEach((function(n){return delete r[n]})),r.ts=t.ts.toLocaleString(),(e=Ai(r.sent||r)).className=["message__embed","has-message-details",e.className].join(" "),n.appendChild(e)}},{key:"_bufAsBase64",value:function(n){var t=new Uint8Array(n).reduce((function(n,t){return n+String.fromCharCode(t)}),"");return window.btoa(t)}},{key:"_ensureEmbedEl",value:function(n){return this.embeds[n].el||(this.embeds[n].el=rt(null,"message__embed",(function(t){t.dataset.url=n})))}},{key:"_loadAndRender",value:function(n){var t=this;return this.embeds[n]={},this.api.operation("embed",{url:n}).perform().then((function(e){var r=e.res.body;if(r.html){var o=t._ensureEmbedEl(n);o.innerHTML=r.html,ft(o,"a",(function(n){n.target="_blank"})),ft(o,"img",(function(n){return t._processImage(n)}));var i=(r.provider_name||"").toLowerCase();if("instagram"==i)return t.renderInstagram(o);if("twitter"==i)return t.renderTwitter(o);if(-1!=(o.firstChild.className||"").split(/\s+/).indexOf("le-paste"))return t.renderPasteEl(o);ft(o,".le-photo, .le-thumbnail",(function(n){return t.renderPhoto(o)}))}}))}},{key:"_processImage",value:function(n){var t=this;if(!function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location;return 0==n.indexOf("/")||-1!=n.indexOf("://"+t.hostname)}(n.src))return n.addEventListener("error",(function(){return n.style.display="none"}));n.originalSource=n.src,n.src="",n.style.visibility="hidden",fetch(n.originalSource).then((function(e){var r=e.headers.get("Content-Type");return r?e.arrayBuffer().then((function(e){return t._renderImage(n,e,{contentType:r})})):t._renderImage(n,new ArrayBuffer(0),{})}))}},{key:"_renderImage",value:function(n,t,e){var r=e.contentType,o={1:0,3:180,6:90,8:270},i=new DataView(t);if(!r||t.length<2||65496!=i.getUint16(0))return n.src=n.originalSource,void(n.style.visibility="visible");for(var a=i.byteLength,c=2;c<a-2&&!n.orientation;){var u=i.getUint16(c);switch(c+=2,u){case 65505:a=i.getUint16(c)+c,c+=2;break;case 274:n.orientation=o[i.getUint16(c+6,!1)]}}void 0!==n.orientation&&(n.style.transform="rotate("+n.orientation+"deg)"),n.src="data:"+r+";base64,"+this._bufAsBase64(t),n.style.visibility="visible"}}]),a}($t);function zi(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function Hi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Bi=function(t){c(u,t);var e,r,a=(e=u,function(){var n,t=i(e);if(Hi()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function u(t){return n(this,u),a.call(this,function(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?zi(Object(e),!0).forEach((function(t){Xn(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):zi(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}({},t,{connection_id:"",dialog_id:"notifications",is_private:!0,name:"Notifications"}))}return E(u,[{key:"is",value:function(n){return"notifications"==n||m(i(u.prototype),"is",this).call(this,n)}},{key:"load",value:(r=Zn(Jn.mark((function n(){var t,e=arguments;return Jn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.length>0&&void 0!==e[0]?e[0]:{},this.messagesOp&&!this.is("loading")){n.next=3;break}return n.abrupt("return",this);case 3:if("after"!=("maybe"==t.after?"after":"maybe"==t.before?"before":"")||!this.is("success")){n.next=6;break}return n.abrupt("return",this);case 6:return this.messagesOp.update({status:"pending"}),this.update({messages:[]}),n.next=10,m(i(u.prototype),"load",this).call(this);case 10:case"end":return n.stop()}}),n,this)}))),function(){return r.apply(this,arguments)})},{key:"send",value:function(){}},{key:"_addOperations",value:function(){this.prop("ro","messagesOp",this.api.operation("notificationMessages")),this.prop("ro","setLastReadOp",this.api.operation("readNotifications"))}}]),u}(Ni);function qi(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function Fi(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?qi(Object(e),!0).forEach((function(t){Xn(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):qi(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function Ki(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Gi=function(t){c(u,t);var e,r,a=(e=u,function(){var n,t=i(e);if(Ki()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function u(t){var e;return n(this,u),(e=a.call(this,Fi({},t,{connection_id:"",dialog_id:"search",is_private:!0,name:"Search"}))).prop("rw","query",""),e.update({status:"success"}),e}return E(u,[{key:"is",value:function(n){return"conversation"!=n&&("search"==n||m(i(u.prototype),"is",this).call(this,n))}},{key:"load",value:(r=Zn(Jn.mark((function n(t){var e,r;return Jn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.is("loading")){n.next=2;break}return n.abrupt("return",this);case 2:if((e=Fi({},t)).match=t.match||t.message,null==e.match&&(e.match=""),e.match=e.match.replace(/\s*conversation:(\S+)\s*/,(function(n,t){return[" ",e.dialog_id=t][0]})).replace(/\s*from:(\S+)\s*/,(function(n,t){return[" ",e.from=t][0]})).replace(/\s*([&#]\S+)\s*/,(function(n,t){return[" ",e.dialog_id=t][0]})),e.match=e.match.trim(),e.match.match(/\S/)){n.next=9;break}return n.abrupt("return",this.update({messages:[]}).addMessages([{message:'Search query "%1" does not contain anything to search for.',vars:[t.message]}]));case 9:return this.update({messages:[],query:e.match,status:"loading"}),n.next=12,this.messagesOp.perform(e);case 12:return r=this.messagesOp.res.body,this.addMessages(e.before?"unshift":"push",r.messages||[]),n.abrupt("return",this.update({status:this.messagesOp.status}));case 15:case"end":return n.stop()}}),n,this)}))),function(n){return r.apply(this,arguments)})},{key:"send",value:function(n){return this.emit("search",n)}},{key:"_addOperations",value:function(){this.prop("ro","messagesOp",this.api.operation("searchMessages")),this.prop("ro","setLastReadOp",null)}},{key:"_loadParticipants",value:function(){}}]),u}(Ni);function Wi(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function Vi(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?Wi(Object(e),!0).forEach((function(t){Xn(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Wi(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function Yi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var Ji=function(t){c(u,t);var e,r,a=(e=u,function(){var n,t=i(e);if(Yi()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function u(t){var e;n(this,u),e=a.call(this);var r=t.api;e.prop("ro","api",(function(){return r})),e.prop("ro","connections",new bi),e.prop("ro","email",(function(){return e.getUserOp.res.body.email||""})),e.prop("ro","embedMaker",new Ui({api:r})),e.prop("ro","isFirst",t.isFirst||!1),e.prop("ro","getUserOp",r.operation("getUser",{connections:!0,dialogs:!0})),e.prop("ro","notifications",new Bi({api:r})),e.prop("ro","omnibus",t.omnibus||mo),e.prop("ro","search",new Gi({api:r})),e.prop("ro","roles",new Set),e.prop("ro","themes",t.themes||{}),e.prop("ro","unread",(function(){return e._calculateUnread()})),e.prop("rw","activeDialog",e.notifications),e.prop("rw","highlight_keywords",[]),e.prop("rw","status","pending"),e.prop("persist","assetVersion",0),e.prop("persist","experimentalLoad",!1),e.prop("persist","showGrid",!1),e.prop("cookie","colorScheme","auto"),e.prop("cookie","theme","convos");var o=window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):{addListener:function(){}};return o.matches&&(e._osColorScheme="dark"),o.addListener((function(n){e._osColorScheme=n.matches?"dark":"light"})),e._listenToOmnibus(),e}return E(u,[{key:"activateTheme",value:function(){var n="auto"==this.colorScheme?this._osColorScheme:this.colorScheme,t=this.themes[this.theme];if(!t)return console.error("[Convos] Invalid theme: "+this.theme);var e=t.variants[n]||t.variants.default;document.getElementById("link_selected_theme").setAttribute("href",ee.urlFor(e));var r=document.documentElement;r.className=r.className.replace(/theme-\S+/,(function(){return"theme-"+t.id}))}},{key:"dialogs",value:function(n){var t=[];return this.connections.toArray().forEach((function(e){e.dialogs.toArray().forEach((function(e){n&&!n(e)||t.push(e)}))})),t}},{key:"ensureDialog",value:function(n,t){var e=this;if(n.dialog_id){var r=this.ensureDialog({connection_id:n.connection_id},!0);return this._maybeUpgradeActiveDialog(r.ensureDialog(n))}var o=this.findDialog(n);return o?o.update(n):((o=new ji(Vi({},n,{api:this.api}))).on("dialogadd",(function(n){return e._maybeUpgradeActiveDialog(n)})),o.on("dialogremove",(function(n){return n==e.activeDialog&&e.setActiveDialog(n)})),o.on("update",(function(n){return e.update({connections:!0})})),this.connections.set(o.connection_id,o),this.update({connections:!0}),t?o:this._maybeUpgradeActiveDialog(o))}},{key:"findDialog",value:function(n){var t=this.connections.get(n.connection_id);return n.dialog_id?t&&t.findDialog(n)||null:t}},{key:"is",value:function(n){var t=this;return Array.isArray(n)?!!n.filter((function(n){return t.is(n)})).length:!!this.roles.has(n)||("offline"==n?"fetch"==ot(this.getUserOp.err||[],"source"):this.status==n)}},{key:"load",value:(r=Zn(Jn.mark((function n(t){var e,r,o=this;return Jn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!1!==t){n.next=4;break}return this.roles.add("anonymous"),this.update({roles:!0}),n.abrupt("return",this);case 4:if(!this.is("loading")){n.next=6;break}return n.abrupt("return",this);case 6:return this.update({status:"loading"}),n.next=9,this.getUserOp.perform();case 9:return e=this.getUserOp.res.body,r={},this.experimentalLoad||this.connections.clear(),(e.connections||[]).forEach((function(n){return r[o.ensureDialog(Vi({},n,{status:"pending"})).path]=!0})),(e.dialogs||[]).forEach((function(n){return r[o.ensureDialog(Vi({},n,{status:"pending"})).path]=!0})),this.connections.forEach((function(n){if(!r[n.path])return o.connections.delete(n.connection_id);n.dialogs.forEach((function(t){r[t.path]||n.dialogs.delete(t.dialog_id)}))})),this.notifications.update({unread:e.unread||0}),this.roles.clear(),this.roles.add(e.email?"authenticated":"anonymous"),(e.roles||[]).forEach((function(n){return o.roles.add(n)})),this.email&&this.omnibus.send("ping"),this.update({highlight_keywords:e.highlight_keywords||[],roles:!0,status:this.getUserOp.status}),n.abrupt("return",this);case 22:case"end":return n.stop()}}),n,this)}))),function(n){return r.apply(this,arguments)})},{key:"removeDialog",value:function(n){var t=this.findDialog({connection_id:n.connection_id});if(n.dialog_id)return t&&t.removeDialog(n);this.connections.delete(n.connection_id),t==this.activeDialog&&this.setActiveDialog(t),this.update({connections:!0})}},{key:"setActiveDialog",value:function(n){var t=!n.connection_id&&!n.dialog_id&&this.notifications;if(t)return this.update({activeDialog:t});if(t=this.findDialog(n))return this.update({activeDialog:t});var e=Vi({},n,{connection_id:n.connection_id||"",api:this.api,frozen:"Not found."});return["dialog_id","name"].forEach((function(t){return n.hasOwnProperty(t)&&(e[t]=n[t])})),this.update({activeDialog:e.dialog_id?new Ni(e):new ji(e)})}},{key:"update",value:function(n){return m(i(u.prototype),"update",this).call(this,n),(n.colorScheme||n.theme)&&this.activateTheme(),this}},{key:"wsEventPong",value:function(n){this.wsPongTimestamp=n.ts}},{key:"_calculateUnread",value:function(){return this.notifications.unread+this.dialogs((function(n){return n.is_private})).reduce((function(n,t){return n+t.unread}),0)}},{key:"_dispatchMessageToDialog",value:function(n){var t=this.findDialog({connection_id:n.connection_id});if(t&&(t[n.dispatchTo]&&t[n.dispatchTo](n),n.bubbles)){var e=t.findDialog(n);e&&e[n.dispatchTo]&&e[n.dispatchTo](n)}}},{key:"_listenToOmnibus",value:function(){var n=this;this.omnibus.on("close",(function(){n.connections.forEach((function(n){return n.update({state:"unreachable"})})),n.update({status:"pending"})})),this.omnibus.on("open",(function(){if(n.is("pending")&&n.email)return n.load()})),this.omnibus.on("message",(function(t){n._dispatchMessageToDialog(t),n.emit(t.dispatchTo,t),n[t.dispatchTo]&&n[t.dispatchTo](t)})),this.omnibus.on("serviceWorker",(function(t){var e=process.env.asset_version;n.omnibus.debug&&console.log("[serviceWorker]",[n.assetVersion,e].join(" == ")),n.assetVersion!=e&&(t.update(),n.update({assetVersion:e}))}))}},{key:"_maybeUpgradeActiveDialog",value:function(n){var t=this.activeDialog;return n.connection_id&&n.connection_id!=t.connection_id||n.dialog_id&&n.dialog_id!=t.dialog_id||this.update({activeDialog:n}),n}}]),u}($t);function Qi(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}var Zi=function(){function t(){n(this,t)}return E(t,[{key:"attach",value:function(n){var t=n.connection,e=n.dialog,r=n.user;this.connection=t,this.dialog=e,this.user=r}},{key:"canToggleDetails",value:function(n){return"error"==n.type||"notice"==n.type}},{key:"classNames",value:function(n,t){this.dialog;var e=n[t],r=["message","is-type-"+e.type];e.from==this.connection.nick&&r.push("is-sent-by-you"),e.highlight&&r.push("is-highlighted");var o=this.dayChanged(n,t),i=0!=t&&n[t].fromId==n[t-1].fromId;return!o&&i&&r.push("has-same-from"),o||i||r.push("has-not-same-from"),this.isOnline(e)||r.push("is-not-present"),r.join(" ")}},{key:"connectionDialogStatus",value:function(){var n=this.connection,t=this.dialog;if(!n.is||n.is("unreachable"))return[];var e=[];return n.frozen?e.push(this.fillIn({message:"Disconnected. Your connection %1 can be edited in [settings](%2).",vars:[n.name,ee.urlFor(n.path+"#activeMenu:settings")]})):t.frozen&&!t.is("locked")&&e.push(this.fillIn({message:ve(n,t).replace(/\.$/,""),vars:[]})),e}},{key:"dayChanged",value:function(n,t){return!!n.length&&(0==t?this.dialog.is("search"):n[t].ts.getDate()!=n[t-1].ts.getDate())}},{key:"fillIn",value:function(n){return function(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?Qi(Object(e),!0).forEach((function(t){Xn(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Qi(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}({color:"inherit",from:"Convos",fromId:"Convos",markdown:ge.apply(void 0,[n.message].concat(x(n.vars))),ts:new Pt,type:"error"},n)}},{key:"isOnline",value:function(n){return!this.dialog.connection_id||("Convos"==n.fromId||(n.fromId==this.dialog.connection_id||this.dialog.findParticipant(n.fromId)))}},{key:"emptySearch",value:function(){var n=this.dialog;if(!n.is("search"))return[];var t=[];return null===n.query?(t.push(fillIn({message:"Search for messages sent by you or others the last %1 days by writing a message in the input field below.",type:"notice",vars:[90]})),t.push(fillIn({message:'You can enter a channel name, or use `"conversation:#channel"` to narrow down the search.',type:"notice",vars:[n.name,ee.urlFor(n.path+"#activeMenu:settings")]}))):!n.messages.length&&n.is("success")&&t.push(fillIn({message:'No search results for "%1".',type:"notice",vars:[n.query]})),t}},{key:"firstTime",value:function(){var n=this.dialog,t=n&&n.is&&n.is("conversation")&&n.first_time;if(!t)return[];var e=[];if(n.is_private||e.push(this.fillIn({message:n.topic?"Topic for %1 is: %2":"No topic is set for %1.",type:"notice",vars:[n.name,n.topic]})),n.is_private)e.push(this.fillIn({message:"This is a private conversation with %1.",type:"notice",vars:[n.name]}));else{var r=n.participants().length;e.push(this.fillIn({message:1==r?"You are the only participant in this conversation.":"There are %1 [participants](%2) in this conversation.",type:"notice",vars:[r,ee.urlFor(n.path+"#activeMenu:settings")]}))}return this.user.dialogs().length<=3&&e.push(this.fillIn({message:"Start chatting by writing a message in the input field, or click on the conversation name ([%1](%2)) to get more information.",type:"notice",vars:[n.name,ee.urlFor(n.path+"#activeMenu:settings")]})),e}},{key:"merge",value:function(n){return this.emptySearch().concat(this.firstTime()).concat(n).concat(this.connectionDialogStatus())}}]),t}();function Xi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function na(n){var t,e,r,o,i,a,c,u,s,f=n[1].unread+"",l=n[4].default,d=j(l,n,n[3],null),h=new Nt({props:{name:n[0].activeMenu?"times-circle":"bars"}});return{c:function(){t=W("header"),d&&d.c(),e=Y(),r=W("a"),Fn(h.$$.fragment),o=Y(),i=W("small"),a=V(f),X(i,"class","chat-header__unread"),i.hidden=c=!n[1].unread,X(r,"href",u="#activeMenu:"+(n[0].activeMenu?"":"nav")),X(r,"class","chat-header__hamburger"),X(t,"class","chat-header")},m:function(n,c){F(n,t,c),d&&d.m(t,null),q(t,e),q(t,r),Kn(h,r,null),q(r,o),q(r,i),q(i,a),s=!0},p:function(n,t){var e=p(t,1)[0];d&&d.p&&8&e&&d.p(A(l,n,n[3],null),L(l,n[3],e,null));var o={};1&e&&(o.name=n[0].activeMenu?"times-circle":"bars"),h.$set(o),(!s||2&e)&&f!==(f=n[1].unread+"")&&tn(a,f),(!s||2&e&&c!==(c=!n[1].unread))&&(i.hidden=c),(!s||1&e&&u!==(u="#activeMenu:"+(n[0].activeMenu?"":"nav")))&&X(r,"href",u)},i:function(n){s||(In(d,n),In(h.$$.fragment,n),s=!0)},o:function(n){Un(d,n),Un(h.$$.fragment,n),s=!1},d:function(n){n&&K(t),d&&d.d(n),Gn(h)}}}function ta(n,t,e){var r,o;P(n,ee,(function(n){return e(0,r=n)}));var i=gn("user");P(n,i,(function(n){return e(1,o=n)}));var a=t.$$slots,c=void 0===a?{}:a,u=t.$$scope;return n.$set=function(n){"$$scope"in n&&e(3,u=n.$$scope)},[r,o,i,u,c]}var ea=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Xi()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,ta,na,M,{}),r}return u}(Yn);function ra(n){if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(n=function(n,t){if(!n)return;if("string"==typeof n)return oa(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return oa(n,t)}(n))){var t=0,e=function(){};return{s:e,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(n){throw n},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,a=!1;return{s:function(){r=n[Symbol.iterator]()},n:function(){var n=r.next();return i=n.done,n},e:function(n){a=!0,o=n},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}function oa(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}var ia=[];function aa(n,t){return aa[n]?aa[n](t):[]}function ca(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function ua(n,t,e){var r=n.slice();return r[30]=t[e],r[32]=e,r}function sa(n){var t,e,r=(n[30].text||n[30].val)+"";return{c:function(){X(t=W("a"),"href","#index:"+n[32]),X(t,"tabindex","-1"),on(t,"has-focus",n[32]==n[2])},m:function(o,i,a){F(o,t,i),t.innerHTML=r,a&&e(),e=Q(t,"click",Z(n[10]))},p:function(n,e){128&e[0]&&r!==(r=(n[30].text||n[30].val)+"")&&(t.innerHTML=r),4&e[0]&&on(t,"has-focus",n[32]==n[2])},d:function(n){n&&K(t),e()}}}function fa(n){for(var t,e,r,o,i,a,c,u,s,f,l,d,p,h,m,g,v=new Nt({props:{name:n[9]}}),$=n[7],y=[],b=0;b<$.length;b+=1)y[b]=sa(ua(n,$,b));return{c:function(){t=W("form"),e=W("textarea"),r=Y(),o=W("div"),i=W("span"),a=Y(),c=W("input"),s=Y(),f=W("a"),Fn(v.$$.fragment),l=Y(),d=W("div");for(var m=0;m<y.length;m+=1)y[m].c();X(e,"id","chat_input"),X(e,"placeholder",n[8]),X(c,"type","file"),X(o,"class","chat-input__upload-wrapper"),o.hidden=u=!n[0].is("conversation"),X(f,"href","#send"),X(f,"class","chat-input__send"),X(d,"class",p="chat-input_autocomplete chat-input_autocomplete_"+n[3]),d.hidden=h=!n[7].length,X(t,"class","chat-input")},m:function(u,p,h){F(u,t,p),q(t,e),n[25](e),q(t,r),q(t,o),q(o,i),q(o,a),q(o,c),n[29](c),q(t,s),q(t,f),Kn(v,f,null),q(t,l),q(t,d);for(var $=0;$<y.length;$+=1)y[$].m(d,null);m=!0,h&&N(g),g=[Q(e,"change",n[26]),Q(e,"keydown",n[27]),Q(e,"keyup",n[28]),Q(c,"change",n[11]),Q(f,"click",n[1]),Q(t,"submit",Z(n[24]))]},p:function(n,t){(!m||256&t[0])&&X(e,"placeholder",n[8]),(!m||1&t[0]&&u!==(u=!n[0].is("conversation")))&&(o.hidden=u);var r={};if(512&t[0]&&(r.name=n[9]),v.$set(r),1156&t[0]){var i;for($=n[7],i=0;i<$.length;i+=1){var a=ua(n,$,i);y[i]?y[i].p(a,t):(y[i]=sa(a),y[i].c(),y[i].m(d,null))}for(;i<y.length;i+=1)y[i].d(1);y.length=$.length}(!m||8&t[0]&&p!==(p="chat-input_autocomplete chat-input_autocomplete_"+n[3]))&&X(d,"class",p),(!m||128&t[0]&&h!==(h=!n[7].length))&&(d.hidden=h)},i:function(n){m||(In(v.$$.fragment,n),m=!0)},o:function(n){Un(v.$$.fragment,n),m=!1},d:function(e){e&&K(t),n[25](null),n[29](null),Gn(v),G(y,e),N(g)}}}function la(n,t,e){var r=t.dialog,o=void 0===r?{}:r;var i,a,c=0,u="none",s=0,f=gn("user");function l(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.space||"";e(4,i.value=_[0]+n+r+_[3],i),e(4,i.selectionStart=e(4,i.selectionEnd=(_[0]+n+r).length,i),i),r.length&&e(5,s=i.selectionStart)}function d(n){var t=p(n,4),r=t[0],i=t[1],a=t[2];t[3];e(3,u=":"==i&&a.length?"emojis":"/"!=i||r.length?"@"==i&&a.length?"nicks":"#"==i||"&"==i?"dialogs":"none":"commands"),e(2,c=0);var s=aa(u,{dialog:o,query:i+a,user:f});return s.length&&s.unshift({val:i+a}),s}function h(n){if(!i)return["","","",""];var t="",e="";return[i.value.substring(0,n).replace(/(\S)(\S*)$/,(function(n,r,o){return t=r,e=o,""})),t,e,i.value.substring(n)]}function m(n){var t=b[c];t&&l(t.val,n)}function g(n,t){b.length&&(n.preventDefault(),e(2,c+=t),c<0&&e(2,c=b.length-1),c>=b.length&&e(2,c=0),m({space:""}))}function v(n){n.preventDefault&&n.preventDefault();var t={method:"send",dialog:o};t.message=n.preventDefault?i.value:n.message,t.message=t.message.replace(/^\/close/i,"/part"),t.message=t.message.replace(/^\/j\b/i,"/join");(t.message.match(/^\/(\w+)\s*(\S*)/)||["","message",""]).slice(1);t.message.length&&(o.is("search")?o:f.omnibus).send(t,(function(n){n.errors&&o&&(n.stopPropagation(),n.vars=[n.message,ot(n.errors)],n.message='Could not send message "%1": %2',o.addMessage(n))}));o.is("conversation")&&e(4,i.value="",i),e(5,s=0)}function $(n){var t=n.target&&n.target.files||n.dataTransfer&&n.dataTransfer.files;if(t&&t.length){if(t.length>1)return console.log("Cannot upload more than one file.");var e=new FormData;e.append("file",t[0]),f.api.operation("uploadFile").perform({formData:e}).then((function(n){var t=n.res.body;if(t.files&&t.files.length)return l(t.files[0].url);t.errors&&o.addMessage({message:"Could not upload file: %1",vars:[me(ot(t.errors))],type:"error"})}))}}mn((function(){e(6,a.uploader=$,a)}));var y={ArrowDown:function(n){return g(n,n.shiftKey?4:1)},ArrowUp:function(n){return g(n,n.shiftKey?-4:-1)},Tab:function(n){return g(n,n.shiftKey?-1:1)},Enter:function(n){b[c]?(n.preventDefault(),m({space:" "})):n.altKey||n.ctrlKey||n.metaKey||n.shiftKey||v(n)},Fallback:function(n){},Release:function(n){1!=n.key.length&&-1==["ArrowLeft","ArrowRight","Backspace"].indexOf(n.key)||e(5,s=i.selectionStart)}};var b,w,_,x,k,E;return n.$set=function(n){"dialog"in n&&e(0,o=n.dialog)},n.$$.update=function(){32&n.$$.dirty[0]&&e(16,_=h(s)),65536&n.$$.dirty[0]&&e(7,b=d(_)||[]),1&n.$$.dirty[0]&&e(17,w=f.findDialog({connection_id:o.connection_id})),131072&n.$$.dirty[0]&&e(18,x=w&&w.nick),393217&n.$$.dirty[0]&&e(8,k=o.is("search")?"What are you looking for?":w&&w.is("unreachable")?me("Connecting..."):me("What is on your mind %1?",x)),1&n.$$.dirty[0]&&e(9,E=o.is("search")?"search":"paper-plane")},[o,v,c,u,i,s,a,b,k,E,function(n){e(2,c=parseInt(n.target.closest("a").href.replace(/.*index:/,""),10)),m({space:" "}),i.focus()},$,y,function(){return a},function(n){e(4,i.value=n,i)},l,_,w,x,f,d,h,m,g,function(t){vn(n,t)},function(n){yn[n?"unshift":"push"]((function(){e(4,i=n)}))},function(n){e(5,s=i.selectionStart)},function(n){return(y[n.key]||y.Fallback)(n)},function(n){return y.Release(n)},function(n){yn[n?"unshift":"push"]((function(){e(6,a=n)}))}]}aa.commands=function(n){for(var t=n.query,e=[],r=0;r<ia.length;r++)if(0==ia[r].cmd.indexOf(t)){var o=ia[r].alias||ia[r].cmd,i=ia[r].example.replace(/</g,"&lt;");e.push({text:i,val:o})}return e},aa.dialogs=function(n){for(var t=n.dialog,e=n.query,r=n.user,o=r.findDialog({connection_id:t.connection_id}),i=o?o.dialogs.toArray():r.dialogs(),a=[],c=0;c<i.length&&!(-1!=i[c].name.toLowerCase().indexOf(e)&&(a.push({text:i[c].name,val:i[c].dialog_id}),a.length>=20));c++);return a},aa.emojis=function(n){var t=n.query,e=[];return[":","_"].map((function(n){return n+t.slice(1,2)})).forEach((function(n){for(var r=de(n,"group"),o=0;o<r.length&&(r[o].shortname.indexOf(t)>=0&&e.push({val:r[o].emoji,text:pe(r[o].emoji)}),!(e.length>=20));o++);})),e},aa.nicks=function(n){var t,e=n.dialog,r=n.query,o=e.participants(),i=new RegExp("^"+lt(r.slice(1)),"i"),a=[],c=ra(o);try{for(c.s();!(t=c.n()).done;){var u=t.value;if(a.length>=20)break;u.nick.match(i)&&a.push({val:u.nick})}}catch(n){c.e(n)}finally{c.f()}return a},ia.push({cmd:"/me",example:"/me <msg>",description:"Send message as an action."}),ia.push({cmd:"/say",example:"/say <msg>",description:'Used when you want to send a message starting with "/".'}),ia.push({cmd:"/topic",example:"/topic or /topic <new topic>",description:"Show current topic, or set a new one."}),ia.push({cmd:"/whois",example:"/whois <nick>",description:"Show information about a user."}),ia.push({cmd:"/query",example:"/query <nick>",description:"Open up a new chat window with nick."}),ia.push({cmd:"/msg",example:"/msg <nick> <msg>",description:"Send a direct message to nick."}),ia.push({cmd:"/names",example:"/names",description:"Show participants in the channel."}),ia.push({cmd:"/join",example:"/join <#channel>",description:"Join channel and open up a chat window."}),ia.push({cmd:"/nick",example:"/nick <nick>",description:"Change your wanted nick."}),ia.push({cmd:"/part",example:"/part",description:"Leave channel, and close window."}),ia.push({cmd:"/close",example:"/close <nick>",description:"Close conversation with nick, defaults to current active."}),ia.push({cmd:"/kick",example:"/kick <nick>",description:"Kick a user from the current channel."}),ia.push({cmd:"/mode",example:"/mode [+|-][b|o|v] <user>",description:"Change mode of yourself or a user"}),ia.push({cmd:"/reconnect",example:"/reconnect",description:"Restart the current connection."}),ia.push({cmd:"/clear",example:"/clear history <#channel> or /clear history <nick>",description:"Delete all history for the given conversation."}),ia.push({cmd:"/raw",example:"/raw <msg>",description:"Allow you to send any RFC 2812 message."});var da=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(ca()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,la,fa,M,{dialog:0,getUploadEl:13,setValue:14,add:15,sendMessage:1},[-1,-1]),r}return E(u,[{key:"getUploadEl",get:function(){return this.$$.ctx[13]}},{key:"setValue",get:function(){return this.$$.ctx[14]}},{key:"add",get:function(){return this.$$.ctx[15]}},{key:"sendMessage",get:function(){return this.$$.ctx[1]}}]),u}(Yn);function pa(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function ha(n){var t,e,r,o,i,a,c,u,s=me('Do you want to chat with "%1"?',n[0].dialog_id)+"",f=new It({props:{type:"button",icon:"thumbs-up",$$slots:{default:[ga]},$$scope:{ctx:n}}});f.$on("click",n[2]);var l=new Or({props:{href:"/chat",class:"btn",$$slots:{default:[va]},$$scope:{ctx:n}}});return{c:function(){(t=W("h2")).textContent="".concat(me("You are not part of this conversation.")),e=Y(),r=W("p"),o=V(s),i=Y(),a=W("p"),Fn(f.$$.fragment),c=Y(),Fn(l.$$.fragment)},m:function(n,s){F(n,t,s),F(n,e,s),F(n,r,s),q(r,o),F(n,i,s),F(n,a,s),Kn(f,a,null),q(a,c),Kn(l,a,null),u=!0},p:function(n,t){(!u||1&t)&&s!==(s=me('Do you want to chat with "%1"?',n[0].dialog_id)+"")&&tn(o,s);var e={};8&t&&(e.$$scope={dirty:t,ctx:n}),f.$set(e);var r={};8&t&&(r.$$scope={dirty:t,ctx:n}),l.$set(r)},i:function(n){u||(In(f.$$.fragment,n),In(l.$$.fragment,n),u=!0)},o:function(n){Un(f.$$.fragment,n),Un(l.$$.fragment,n),u=!1},d:function(n){n&&K(t),n&&K(e),n&&K(r),n&&K(i),n&&K(a),Gn(f),Gn(l)}}}function ma(n){var t,e,r,o,i,a,c,u,s=me('Do you want to create the connection "%1"?',n[0].connection_id)+"",f=new Or({props:{href:"/settings/connection?server="+encodeURIComponent(n[0].connection_id)+"&dialog="+encodeURIComponent(n[0].dialog_id),class:"btn",$$slots:{default:[$a]},$$scope:{ctx:n}}}),l=new Or({props:{href:"/chat",class:"btn",$$slots:{default:[ya]},$$scope:{ctx:n}}});return{c:function(){(t=W("h2")).textContent="".concat(me("Connection does not exist.")),e=Y(),r=W("p"),o=V(s),i=Y(),a=W("p"),Fn(f.$$.fragment),c=Y(),Fn(l.$$.fragment)},m:function(n,s){F(n,t,s),F(n,e,s),F(n,r,s),q(r,o),F(n,i,s),F(n,a,s),Kn(f,a,null),q(a,c),Kn(l,a,null),u=!0},p:function(n,t){(!u||1&t)&&s!==(s=me('Do you want to create the connection "%1"?',n[0].connection_id)+"")&&tn(o,s);var e={};1&t&&(e.href="/settings/connection?server="+encodeURIComponent(n[0].connection_id)+"&dialog="+encodeURIComponent(n[0].dialog_id)),8&t&&(e.$$scope={dirty:t,ctx:n}),f.$set(e);var r={};8&t&&(r.$$scope={dirty:t,ctx:n}),l.$set(r)},i:function(n){u||(In(f.$$.fragment,n),In(l.$$.fragment,n),u=!0)},o:function(n){Un(f.$$.fragment,n),Un(l.$$.fragment,n),u=!1},d:function(n){n&&K(t),n&&K(e),n&&K(r),n&&K(i),n&&K(a),Gn(f),Gn(l)}}}function ga(n){var t,e=me("Yes")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function va(n){var t,e,r,o=me("No")+"",i=new Nt({props:{name:"thumbs-down"}});return{c:function(){Fn(i.$$.fragment),t=Y(),e=V(o)},m:function(n,o){Kn(i,n,o),F(n,t,o),F(n,e,o),r=!0},p:O,i:function(n){r||(In(i.$$.fragment,n),r=!0)},o:function(n){Un(i.$$.fragment,n),r=!1},d:function(n){Gn(i,n),n&&K(t),n&&K(e)}}}function $a(n){var t,e,r,o=me("Yes")+"",i=new Nt({props:{name:"thumbs-up"}});return{c:function(){Fn(i.$$.fragment),t=Y(),e=V(o)},m:function(n,o){Kn(i,n,o),F(n,t,o),F(n,e,o),r=!0},p:O,i:function(n){r||(In(i.$$.fragment,n),r=!0)},o:function(n){Un(i.$$.fragment,n),r=!1},d:function(n){Gn(i,n),n&&K(t),n&&K(e)}}}function ya(n){var t,e,r,o=me("No")+"",i=new Nt({props:{name:"thumbs-down"}});return{c:function(){Fn(i.$$.fragment),t=Y(),e=V(o)},m:function(n,o){Kn(i,n,o),F(n,t,o),F(n,e,o),r=!0},p:O,i:function(n){r||(In(i.$$.fragment,n),r=!0)},o:function(n){Un(i.$$.fragment,n),r=!1},d:function(n){Gn(i,n),n&&K(t),n&&K(e)}}}function ba(n){var t,e,r,o,i,a=[ma,ha],c=[];function u(n,e){return 1&e&&(t=!n[1].findDialog({connection_id:n[0].connection_id})),t?0:1}return e=u(n,-1),r=c[e]=a[e](n),{c:function(){r.c(),o=J()},m:function(n,t){c[e].m(n,t),F(n,o,t),i=!0},p:function(n,t){var i=p(t,1)[0],s=e;(e=u(n,i))===s?c[e].p(n,i):(An(),Un(c[s],1,1,(function(){c[s]=null})),Ln(),(r=c[e])||(r=c[e]=a[e](n)).c(),In(r,1),r.m(o.parentNode,o))},i:function(n){i||(In(r),i=!0)},o:function(n){Un(r),i=!1},d:function(n){c[e].d(n),n&&K(o)}}}function wa(n,t,e){var r=t.dialog,o=void 0===r?"":r,i=gn("user");return n.$set=function(n){"dialog"in n&&e(0,o=n.dialog)},[o,i,function(){return o.send("/join "+o.dialog_id)}]}var _a=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(pa()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,wa,ba,M,{dialog:0}),r}return u}(Yn);function xa(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function ka(n){var t,e,r,o,i,a,c,u,s=new Nt({props:{name:"pick:Convos",color:"inherit"}}),f=n[2].default,l=j(f,n,n[1],null);return{c:function(){t=W("div"),Fn(s.$$.fragment),e=Y(),(r=W("b")).textContent="".concat(n[0]),o=Y(),(i=W("a")).textContent="".concat(me("Convos")),a=Y(),c=W("div"),l&&l.c(),X(r,"class","message__ts"),X(i,"href","/settings/account"),X(i,"class","message__from"),X(i,"color","inherit"),X(c,"class","message__text"),X(t,"class","message is-type-notice")},m:function(n,f){F(n,t,f),Kn(s,t,null),q(t,e),q(t,r),q(t,o),q(t,i),q(t,a),q(t,c),l&&l.m(c,null),u=!0},p:function(n,t){var e=p(t,1)[0];l&&l.p&&2&e&&l.p(A(f,n,n[1],null),L(f,n[1],e,null))},i:function(n){u||(In(s.$$.fragment,n),In(l,n),u=!0)},o:function(n){Un(s.$$.fragment,n),Un(l,n),u=!1},d:function(n){n&&K(t),Gn(s),l&&l.d(n)}}}function Ea(n,t,e){var r=(new Pt).getHM(),o=t.$$slots,i=void 0===o?{}:o,a=t.$$scope;return n.$set=function(n){"$$scope"in n&&e(1,a=n.$$scope)},[r,a,i]}var Oa=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(xa()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,Ea,ka,M,{}),r}return u}(Yn);function Sa(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Ca(n){var t,e,r,o,i,a=new Nt({props:{name:n[1],animation:n[2]}}),c=n[4].default,u=j(c,n,n[3],null);return{c:function(){t=W("div"),e=W("span"),Fn(a.$$.fragment),r=Y(),u&&u.c(),X(t,"class",o="message-status-line "+n[0])},m:function(n,o){F(n,t,o),q(t,e),Kn(a,e,null),q(e,r),u&&u.m(e,null),i=!0},p:function(n,e){var r=p(e,1)[0],s={};2&r&&(s.name=n[1]),4&r&&(s.animation=n[2]),a.$set(s),u&&u.p&&8&r&&u.p(A(c,n,n[3],null),L(c,n[3],r,null)),(!i||1&r&&o!==(o="message-status-line "+n[0]))&&X(t,"class",o)},i:function(n){i||(In(a.$$.fragment,n),In(u,n),i=!0)},o:function(n){Un(a.$$.fragment,n),Un(u,n),i=!1},d:function(n){n&&K(t),Gn(a),u&&u.d(n)}}}function Ra(n,t,e){var r=t.class,o=void 0===r?"":r,i=t.icon,a=void 0===i?"":i,c=t.animation,u=void 0===c?"":c,s=t.$$slots,f=void 0===s?{}:s,l=t.$$scope;return n.$set=function(n){"class"in n&&e(0,o=n.class),"icon"in n&&e(1,a=n.icon),"animation"in n&&e(2,u=n.animation),"$$scope"in n&&e(3,l=n.$$scope)},[o,a,u,l,f]}var Na=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Sa()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,Ra,Ca,M,{class:0,icon:1,animation:2}),r}return u}(Yn);function Da(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Ma(n){var t,e=new _a({props:{dialog:n[1]}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};2&t&&(r.dialog=n[1]),e.$set(r)},i:function(n){t||(In(e.$$.fragment,n),t=!0)},o:function(n){Un(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function Ta(n){var t,e,r,o,i,a,c,u,s=n[3].messages.length>40&&n[3].is("loading"),f=!n[3].is("success")||n[2].is&&n[2].is("unreachable"),l=s&&Pa(n),d=n[3].startOfHistory&&Aa(n),p=n[8].default,h=j(p,n,n[14],null),m=[Ua,Ia],g=[];function v(n,t){return null===n[4].wantNotifications?0:void 0===n[4].protocols.irc?1:-1}~(o=v(n))&&(i=g[o]=m[o](n));var $=f&&Ga(n);return{c:function(){l&&l.c(),t=Y(),d&&d.c(),e=Y(),h&&h.c(),r=Y(),i&&i.c(),a=Y(),$&&$.c(),c=J()},m:function(n,i){l&&l.m(n,i),F(n,t,i),d&&d.m(n,i),F(n,e,i),h&&h.m(n,i),F(n,r,i),~o&&g[o].m(n,i),F(n,a,i),$&&$.m(n,i),F(n,c,i),u=!0},p:function(n,r){8&r&&(s=n[3].messages.length>40&&n[3].is("loading")),s?l?(l.p(n,r),In(l,1)):((l=Pa(n)).c(),In(l,1),l.m(t.parentNode,t)):l&&(An(),Un(l,1,1,(function(){l=null})),Ln()),n[3].startOfHistory?d?(d.p(n,r),In(d,1)):((d=Aa(n)).c(),In(d,1),d.m(e.parentNode,e)):d&&(An(),Un(d,1,1,(function(){d=null})),Ln()),h&&h.p&&16384&r&&h.p(A(p,n,n[14],null),L(p,n[14],r,null));var u=o;(o=v(n))===u?~o&&g[o].p(n,r):(i&&(An(),Un(g[u],1,1,(function(){g[u]=null})),Ln()),~o?((i=g[o])||(i=g[o]=m[o](n)).c(),In(i,1),i.m(a.parentNode,a)):i=null),12&r&&(f=!n[3].is("success")||n[2].is&&n[2].is("unreachable")),f?$?($.p(n,r),In($,1)):(($=Ga(n)).c(),In($,1),$.m(c.parentNode,c)):$&&(An(),Un($,1,1,(function(){$=null})),Ln())},i:function(n){u||(In(l),In(d),In(h,n),In(i),In($),u=!0)},o:function(n){Un(l),Un(d),Un(h,n),Un(i),Un($),u=!1},d:function(n){l&&l.d(n),n&&K(t),d&&d.d(n),n&&K(e),h&&h.d(n),n&&K(r),~o&&g[o].d(n),n&&K(a),$&&$.d(n),n&&K(c)}}}function Pa(n){var t,e=new Na({props:{class:"for-loading",icon:"spinner",animation:"spin",$$slots:{default:[ja]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};16384&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(In(e.$$.fragment,n),t=!0)},o:function(n){Un(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function ja(n){var t,e=me("Loading...")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Aa(n){var t,e=new Na({props:{class:"for-start-of-history",icon:"calendar-alt",$$slots:{default:[La]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};16392&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(In(e.$$.fragment,n),t=!0)},o:function(n){Un(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function La(n){var t,e=me("Started chatting on %1",n[3].startOfHistory.getHumanDate())+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:function(n,r){8&r&&e!==(e=me("Started chatting on %1",n[3].startOfHistory.getHumanDate())+"")&&tn(t,e)},d:function(n){n&&K(t)}}}function Ia(n){var t,e=new Oa({props:{$$slots:{default:[Ba]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};16384&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(In(e.$$.fragment,n),t=!0)},o:function(n){Un(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function Ua(n){var t,e=new Oa({props:{$$slots:{default:[Ka]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};16384&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(In(e.$$.fragment,n),t=!0)},o:function(n){Un(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function za(n){var t,e=me("Yes")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Ha(n){var t,e=me("No")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Ba(n){var t,e,r,o,i,a,c=me('Do you want %1 to handle "irc://" links?',me("Convos"))+"",u=new It({props:{type:"button",icon:"thumbs-up",$$slots:{default:[za]},$$scope:{ctx:n}}});u.$on("click",n[11]);var s=new It({props:{type:"button",icon:"thumbs-down",$$slots:{default:[Ha]},$$scope:{ctx:n}}});return s.$on("click",n[12]),{c:function(){t=V(c),e=Y(),r=W("br"),o=Y(),Fn(u.$$.fragment),i=Y(),Fn(s.$$.fragment)},m:function(n,c){F(n,t,c),F(n,e,c),F(n,r,c),F(n,o,c),Kn(u,n,c),F(n,i,c),Kn(s,n,c),a=!0},p:function(n,t){var e={};16384&t&&(e.$$scope={dirty:t,ctx:n}),u.$set(e);var r={};16384&t&&(r.$$scope={dirty:t,ctx:n}),s.$set(r)},i:function(n){a||(In(u.$$.fragment,n),In(s.$$.fragment,n),a=!0)},o:function(n){Un(u.$$.fragment,n),Un(s.$$.fragment,n),a=!1},d:function(n){n&&K(t),n&&K(e),n&&K(r),n&&K(o),Gn(u,n),n&&K(i),Gn(s,n)}}}function qa(n){var t,e=me("Yes")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Fa(n){var t,e=me("No")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Ka(n){var t,e,r,o,i,a,c=me("Do you want to be notified when someone sends you a private message?")+"",u=new It({props:{type:"button",icon:"thumbs-up",$$slots:{default:[qa]},$$scope:{ctx:n}}});u.$on("click",n[9]);var s=new It({props:{type:"button",icon:"thumbs-down",$$slots:{default:[Fa]},$$scope:{ctx:n}}});return s.$on("click",n[10]),{c:function(){t=V(c),e=Y(),r=W("br"),o=Y(),Fn(u.$$.fragment),i=Y(),Fn(s.$$.fragment)},m:function(n,c){F(n,t,c),F(n,e,c),F(n,r,c),F(n,o,c),Kn(u,n,c),F(n,i,c),Kn(s,n,c),a=!0},p:function(n,t){var e={};16384&t&&(e.$$scope={dirty:t,ctx:n}),u.$set(e);var r={};16384&t&&(r.$$scope={dirty:t,ctx:n}),s.$set(r)},i:function(n){a||(In(u.$$.fragment,n),In(s.$$.fragment,n),a=!0)},o:function(n){Un(u.$$.fragment,n),Un(s.$$.fragment,n),a=!1},d:function(n){n&&K(t),n&&K(e),n&&K(r),n&&K(o),Gn(u,n),n&&K(i),Gn(s,n)}}}function Ga(n){var t,e=new Na({props:{class:"for-loading",icon:"spinner",animation:"spin",$$slots:{default:[Wa]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};16384&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(In(e.$$.fragment,n),t=!0)},o:function(n){Un(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function Wa(n){var t,e,r=me("Loading...")+"";return{c:function(){t=W("a"),e=V(r),X(t,"href",ee.baseUrl),X(t,"target","_self")},m:function(n,r){F(n,t,r),q(t,e)},p:O,d:function(n){n&&K(t)}}}function Va(n){var t,e,r,o,i,a,c=[Ta,Ma],u=[];function s(n,t){return 2&t&&(e=!(n[1].connection_id&&!n[5].findDialog(n[1]))),e?0:1}return r=s(n,-1),o=u[r]=c[r](n),{c:function(){t=W("div"),o.c(),X(t,"class","messages-container"),On((function(){return n[13].call(t)}))},m:function(e,o){F(e,t,o),u[r].m(t,null),i=function(n,t){"static"===getComputedStyle(n).position&&(n.style.position="relative");var e,r=document.createElement("object");return r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.type="text/html",r.tabIndex=-1,r.onload=function(){(e=r.contentDocument.defaultView).addEventListener("resize",t)},/Trident/.test(navigator.userAgent)?(n.appendChild(r),r.data="about:blank"):(r.data="about:blank",n.appendChild(r)),{cancel:function(){e&&e.removeEventListener&&e.removeEventListener("resize",t),n.removeChild(r)}}}(t,n[13].bind(t)),a=!0},p:function(n,e){var i=p(e,1)[0],a=r;(r=s(n,i))===a?u[r].p(n,i):(An(),Un(u[a],1,1,(function(){u[a]=null})),Ln(),(o=u[r])||(o=u[r]=c[r](n)).c(),In(o,1),o.m(t,null))},i:function(n){a||(In(o),a=!0)},o:function(n){Un(o),a=!1},d:function(n){n&&K(t),u[r].d(),i.cancel()}}}function Ya(n,t,e){var r,o,i,a=O,c=function(){return a(),a=T(u,(function(n){return e(3,o=n)})),u};n.$$.on_destroy.push((function(){return a()}));var u=t.dialog;c();var s=t.messagesHeight,f=void 0===s?0:s,l=gn("user");P(n,l,(function(n){return e(7,r=n)}));var d=l.omnibus;P(n,d,(function(n){return e(4,i=n)}));var p,h=t.$$slots,m=void 0===h?{}:h,g=t.$$scope;return n.$set=function(n){"dialog"in n&&c(e(1,u=n.dialog)),"messagesHeight"in n&&e(0,f=n.messagesHeight),"$$scope"in n&&e(14,g=n.$$scope)},n.$$.update=function(){130&n.$$.dirty&&e(2,p=r.findDialog({connection_id:u.connection_id})||{})},[f,u,p,o,i,l,d,r,m,function(){return d.requestPermissionToNotify()},function(){return d.requestPermissionToNotify(!1)},function(){return d.registerProtocol("irc",!0)},function(){return d.registerProtocol("irc",!1)},function(){f=this.offsetHeight,e(0,f)},g]}var Ja=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Da()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,Ya,Va,M,{dialog:1,messagesHeight:0}),r}return u}(Yn);function Qa(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Za(n,t,e){var r=n.slice();return r[1]=t[e],r}function Xa(n){for(var t,e,r,o,i,a,c,u,s=me("Participants (%1)",n[0].participants().length)+"",f=n[0].participants(),l=[],d=0;d<f.length;d+=1)l[d]=tc(Za(n,f,d));var p=function(n){return Un(l[n],1,1,(function(){l[n]=null}))};return{c:function(){t=W("div"),e=W("nav"),r=W("h3"),o=V(s),i=Y();for(var n=0;n<l.length;n+=1)l[n].c();a=Y(),c=W("nav"),X(e,"class","sidebar-right__nav"),X(t,"class","sidebar-right")},m:function(n,s){F(n,t,s),q(t,e),q(e,r),q(r,o),q(e,i);for(var f=0;f<l.length;f+=1)l[f].m(e,null);q(e,a),q(e,c),u=!0},p:function(n,t){if((!u||1&t)&&s!==(s=me("Participants (%1)",n[0].participants().length)+"")&&tn(o,s),1&t){var r;for(f=n[0].participants(),r=0;r<f.length;r+=1){var i=Za(n,f,r);l[r]?(l[r].p(i,t),In(l[r],1)):(l[r]=tc(i),l[r].c(),In(l[r],1),l[r].m(e,a))}for(An(),r=f.length;r<l.length;r+=1)p(r);Ln()}},i:function(n){if(!u){for(var t=0;t<f.length;t+=1)In(l[t]);u=!0}},o:function(n){l=l.filter(Boolean);for(var t=0;t<l.length;t+=1)Un(l[t]);u=!1},d:function(n){n&&K(t),G(l,n)}}}function nc(n){var t,e,r,o,i=n[1].nick+"",a=new Nt({props:{name:"pick:"+n[1].id,family:"solid",color:n[1].color}});return{c:function(){Fn(a.$$.fragment),t=Y(),e=W("span"),r=V(i)},m:function(n,i){Kn(a,n,i),F(n,t,i),F(n,e,i),q(e,r),o=!0},p:function(n,t){var e={};1&t&&(e.name="pick:"+n[1].id),1&t&&(e.color=n[1].color),a.$set(e),(!o||1&t)&&i!==(i=n[1].nick+"")&&tn(r,i)},i:function(n){o||(In(a.$$.fragment,n),o=!0)},o:function(n){Un(a.$$.fragment,n),o=!1},d:function(n){Gn(a,n),n&&K(t),n&&K(e)}}}function tc(n){var t,e=new Or({props:{href:"/chat/"+n[0].connection_id+"/"+n[1].id,class:"participant "+st(n[1].modes),$$slots:{default:[nc]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};1&t&&(r.href="/chat/"+n[0].connection_id+"/"+n[1].id),1&t&&(r.class="participant "+st(n[1].modes)),17&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(In(e.$$.fragment,n),t=!0)},o:function(n){Un(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function ec(n){var t,e,r=n[0].participants().length,o=r&&Xa(n);return{c:function(){o&&o.c(),t=J()},m:function(n,r){o&&o.m(n,r),F(n,t,r),e=!0},p:function(n,e){var i=p(e,1)[0];1&i&&(r=n[0].participants().length),r?o?(o.p(n,i),In(o,1)):((o=Xa(n)).c(),In(o,1),o.m(t.parentNode,t)):o&&(An(),Un(o,1,1,(function(){o=null})),Ln())},i:function(n){e||(In(o),e=!0)},o:function(n){Un(o),e=!1},d:function(n){o&&o.d(n),n&&K(t)}}}function rc(n,t,e){var r=t.dialog;return n.$set=function(n){"dialog"in n&&e(0,r=n.dialog)},[r]}var oc=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Qa()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,rc,ec,M,{dialog:0}),r}return u}(Yn),ic=function(){function t(){var e=this;n(this,t),this.dragAndDropEvents={drag:this._preventDefault.bind(this),dragend:this.stop.bind(this),dragenter:this.start.bind(this),dragleave:this.stop.bind(this),dragover:this.start.bind(this),dragstart:this._preventDefault.bind(this),drop:this.drop.bind(this)},this.pasteEvents={paste:this.paste.bind(this)},this.removeDragOverDebounced=et((function(){return e._removeDragOver()}),100)}return E(t,[{key:"attach",value:function(n,t,e){var r=this;this.targetEl&&this.detach(),this.dropEl=t,this.uploadEl=e,this.targetEl=n,Object.keys(this.dragAndDropEvents).forEach((function(t){n.addEventListener(t,r.dragAndDropEvents[t])})),Object.keys(this.pasteEvents).forEach((function(n){document.addEventListener(n,r.pasteEvents[n])}))}},{key:"detach",value:function(){var n=this;Object.keys(this.dragAndDropEvents).forEach((function(t){n.targetEl.removeEventListener(t,n.dragAndDropEvents[t])})),Object.keys(this.pasteEvents).forEach((function(t){document.removeEventListener(t,n.pasteEvents[t])}))}},{key:"drop",value:function(n){this.stop(n),this.uploadEl&&this.uploadEl.uploader(n)}},{key:"paste",value:function(n){var t=(n.clipboardData||n.originalEvent.clipboardData).items;if(this.uploadEl)for(var e=0;e<t.length;e++)if("file"==t[e].kind)return this.uploadEl.uploader({dataTransfer:{files:[t[e].getAsFile()]}})}},{key:"stop",value:function(n){this._preventDefault(n),this.removeDragOverDebounced()}},{key:"start",value:function(n){this._preventDefault(n),this.dropEl&&this.dropEl.classList.add("is-dragover")}},{key:"_preventDefault",value:function(n){n.preventDefault(),n.stopPropagation()}},{key:"_removeDragOver",value:function(){this.dropEl&&this.dropEl.classList.remove("is-dragover")}}]),t}();function ac(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function cc(n,t,e){var r=n.slice();return r[24]=t[e],r[26]=e,r}function uc(n){var t,e,r,o,i,a,c,u,s,f,l=me(n[3].name)+"",d=ve(n[2],n[3])+"",p=new Nt({props:{name:"sliders-h"}});return{c:function(){t=W("h1"),e=W("a"),Fn(p.$$.fragment),r=W("span"),o=V(l),a=Y(),c=W("a"),u=V(d),X(e,"href",i="#activeMenu:"+(n[3].connection_id?"settings":"nav")),X(e,"tabindex","-1"),X(c,"href",s="#activeMenu:"+(n[3].connection_id?"settings":"nav")),X(c,"class","chat-header__topic")},m:function(n,i){F(n,t,i),q(t,e),Kn(p,e,null),q(e,r),q(r,o),F(n,a,i),F(n,c,i),q(c,u),f=!0},p:function(n,t){(!f||8&t)&&l!==(l=me(n[3].name)+"")&&tn(o,l),(!f||8&t&&i!==(i="#activeMenu:"+(n[3].connection_id?"settings":"nav")))&&X(e,"href",i),(!f||12&t)&&d!==(d=ve(n[2],n[3])+"")&&tn(u,d),(!f||8&t&&s!==(s="#activeMenu:"+(n[3].connection_id?"settings":"nav")))&&X(c,"href",s)},i:function(n){f||(In(p.$$.fragment,n),f=!0)},o:function(n){Un(p.$$.fragment,n),f=!1},d:function(n){n&&K(t),Gn(p),n&&K(a),n&&K(c)}}}function sc(n){var t,e=new Na({props:{class:"for-day-changed",icon:"calendar-alt",$$slots:{default:[fc]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};134217856&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(In(e.$$.fragment,n),t=!0)},o:function(n){Un(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function fc(n){var t,e=n[24].ts.getHumanDate()+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:function(n,r){128&r&&e!==(e=n[24].ts.getHumanDate()+"")&&tn(t,e)},d:function(n){n&&K(t)}}}function lc(n){var t,e=new Na({props:{class:"for-last-read",icon:"comments",$$slots:{default:[dc]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};134217728&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(In(e.$$.fragment,n),t=!0)},o:function(n){Un(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function dc(n){var t,e=me("New messages")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function pc(n){var t,e=new Nt({props:{name:"error"==n[24].type?"exclamation-circle":"info-circle"}});return e.$on("click",n[11]),{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};128&t&&(r.name="error"==n[24].type?"exclamation-circle":"info-circle"),e.$set(r)},i:function(n){t||(In(e.$$.fragment,n),t=!0)},o:function(n){Un(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function hc(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,h,m,g,v,$,y,b,w,_=n[9].dayChanged(n[7],n[26]),x=n[24].ts.toLocaleString()+"",k=n[24].from+"",E=n[9].canToggleDetails(n[24]),O=n[24].markdown+"",S=_&&sc(n),C=n[26]&&n[26]==n[7].length-n[8].unread&&lc(n),R=new Nt({props:{name:"pick:"+n[24].fromId,color:n[24].color}});function N(){for(var t,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(t=n)[20].apply(t,[n[24]].concat(r))}var D=E&&pc(n);return{c:function(){S&&S.c(),t=Y(),C&&C.c(),e=Y(),r=W("div"),Fn(R.$$.fragment),o=Y(),i=W("div"),a=W("div"),c=V(x),s=Y(),f=W("a"),l=V(k),p=Y(),h=W("div"),D&&D.c(),m=Y(),v=Y(),X(i,"class","message__ts has-tooltip"),X(i,"data-content",u=n[24].ts.getHM()),X(f,"href",d="#input:"+n[24].from),X(f,"class","message__from"),rn(f,"color",n[24].color),X(f,"tabindex","-1"),g=new cn(O,null),X(h,"class","message__text"),X(r,"class",$=n[9].classNames(n[7],n[26])),X(r,"data-index",n[26]),X(r,"data-ts",y=n[24].ts.toISOString())},m:function(n,u,d){S&&S.m(n,u),F(n,t,u),C&&C.m(n,u),F(n,e,u),F(n,r,u),Kn(R,r,null),q(r,o),q(r,i),q(i,a),q(a,c),q(r,s),q(r,f),q(f,l),q(r,p),q(r,h),D&&D.m(h,null),q(h,m),g.m(h),q(r,v),b=!0,d&&w(),w=Q(f,"click",Z(N))},p:function(o,a){n=o,128&a&&(_=n[9].dayChanged(n[7],n[26])),_?S?(S.p(n,a),In(S,1)):((S=sc(n)).c(),In(S,1),S.m(t.parentNode,t)):S&&(An(),Un(S,1,1,(function(){S=null})),Ln()),n[26]&&n[26]==n[7].length-n[8].unread?C?(C.p(n,a),In(C,1)):((C=lc(n)).c(),In(C,1),C.m(e.parentNode,e)):C&&(An(),Un(C,1,1,(function(){C=null})),Ln());var s={};128&a&&(s.name="pick:"+n[24].fromId),128&a&&(s.color=n[24].color),R.$set(s),(!b||128&a)&&x!==(x=n[24].ts.toLocaleString()+"")&&tn(c,x),(!b||128&a&&u!==(u=n[24].ts.getHM()))&&X(i,"data-content",u),(!b||128&a)&&k!==(k=n[24].from+"")&&tn(l,k),(!b||128&a&&d!==(d="#input:"+n[24].from))&&X(f,"href",d),(!b||128&a)&&rn(f,"color",n[24].color),128&a&&(E=n[9].canToggleDetails(n[24])),E?D?(D.p(n,a),In(D,1)):((D=pc(n)).c(),In(D,1),D.m(h,m)):D&&(An(),Un(D,1,1,(function(){D=null})),Ln()),(!b||128&a)&&O!==(O=n[24].markdown+"")&&g.p(O),(!b||128&a&&$!==($=n[9].classNames(n[7],n[26])))&&X(r,"class",$),(!b||128&a&&y!==(y=n[24].ts.toISOString()))&&X(r,"data-ts",y)},i:function(n){b||(In(S),In(C),In(R.$$.fragment,n),In(D),b=!0)},o:function(n){Un(S),Un(C),Un(R.$$.fragment,n),Un(D),b=!1},d:function(n){S&&S.d(n),n&&K(t),C&&C.d(n),n&&K(e),n&&K(r),Gn(R),D&&D.d(),w()}}}function mc(n){for(var t,e,r=n[7],o=[],i=0;i<r.length;i+=1)o[i]=hc(cc(n,r,i));var a=function(n){return Un(o[n],1,1,(function(){o[n]=null}))};return{c:function(){for(var n=0;n<o.length;n+=1)o[n].c();t=J()},m:function(n,r){for(var i=0;i<o.length;i+=1)o[i].m(n,r);F(n,t,r),e=!0},p:function(n,e){if(2946&e){var i;for(r=n[7],i=0;i<r.length;i+=1){var c=cc(n,r,i);o[i]?(o[i].p(c,e),In(o[i],1)):(o[i]=hc(c),o[i].c(),In(o[i],1),o[i].m(t.parentNode,t))}for(An(),i=r.length;i<o.length;i+=1)a(i);Ln()}},i:function(n){if(!e){for(var t=0;t<r.length;t+=1)In(o[t]);e=!0}},o:function(n){o=o.filter(Boolean);for(var t=0;t<o.length;t+=1)Un(o[t]);e=!1},d:function(n){G(o,n),n&&K(t)}}}function gc(n){var t,e=new Na({props:{class:"for-jump-to-now",icon:"external-link-alt",$$slots:{default:[vc]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};134217800&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(In(e.$$.fragment,n),t=!0)},o:function(n){Un(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function vc(n){var t,e,r,o=me("Jump to %1",n[6].toLocaleString())+"";return{c:function(){t=W("a"),e=V(o),X(t,"href",r=n[3].path)},m:function(n,r){F(n,t,r),q(t,e)},p:function(n,i){64&i&&o!==(o=me("Jump to %1",n[6].toLocaleString())+"")&&tn(e,o),8&i&&r!==(r=n[3].path)&&X(t,"href",r)},d:function(n){n&&K(t)}}}function $c(n){var t,e,r,o,i,a,c,u,s=new ea({props:{$$slots:{default:[uc]},$$scope:{ctx:n}}});function f(t){n[21].call(null,t)}var l={dialog:n[3],$$slots:{default:[mc]},$$scope:{ctx:n}};void 0!==n[5]&&(l.messagesHeight=n[5]);var d=new Ja({props:l});yn.push((function(){return qn(d,"messagesHeight",f)}));var h=!n[3].endOfHistory&&n[3].messages.length&&gc(n),m={dialog:n[3]},g=new da({props:m});n[23](g);var v=new oc({props:{dialog:n[3]}});return{c:function(){Fn(s.$$.fragment),t=Y(),e=W("main"),Fn(d.$$.fragment),o=Y(),h&&h.c(),i=Y(),Fn(g.$$.fragment),a=Y(),Fn(v.$$.fragment),X(e,"class","main has-chat")},m:function(r,f,l){Kn(s,r,f),F(r,t,f),F(r,e,f),Kn(d,e,null),n[22](e),F(r,o,f),h&&h.m(r,f),F(r,i,f),Kn(g,r,f),F(r,a,f),Kn(v,r,f),c=!0,l&&u(),u=Q(e,"scroll",(function(){D(n[0].onScroll)&&n[0].onScroll.apply(this,arguments)}))},p:function(t,e){var o=p(e,1)[0];n=t;var a={};134217740&o&&(a.$$scope={dirty:o,ctx:n}),s.$set(a);var c={};8&o&&(c.dialog=n[3]),134218114&o&&(c.$$scope={dirty:o,ctx:n}),!r&&32&o&&(r=!0,c.messagesHeight=n[5],Sn((function(){return r=!1}))),d.$set(c),!n[3].endOfHistory&&n[3].messages.length?h?(h.p(n,o),In(h,1)):((h=gc(n)).c(),In(h,1),h.m(i.parentNode,i)):h&&(An(),Un(h,1,1,(function(){h=null})),Ln());var u={};8&o&&(u.dialog=n[3]),g.$set(u);var f={};8&o&&(f.dialog=n[3]),v.$set(f)},i:function(n){c||(In(s.$$.fragment,n),In(d.$$.fragment,n),In(h),In(g.$$.fragment,n),In(v.$$.fragment,n),c=!0)},o:function(n){Un(s.$$.fragment,n),Un(d.$$.fragment,n),Un(h),Un(g.$$.fragment,n),Un(v.$$.fragment,n),c=!1},d:function(r){Gn(s,r),r&&K(t),r&&K(e),Gn(d),n[22](null),r&&K(o),h&&h.d(r),r&&K(i),n[23](null),Gn(g,r),r&&K(a),Gn(v,r),u()}}}function yc(n,t,e){var r,o,i,a=O,c=function(){return a(),a=T(v,(function(n){return e(8,i=n)})),v};P(n,ee,(function(n){return e(14,r=n)})),n.$$.on_destroy.push((function(){return a()}));var u=new Zi,s=new ic,f=new vo,l=gn("user");P(n,l,(function(n){return e(15,o=n)}));var d,h,m={},g={},v=l.notifications;c();var $,y=0,b=new Pt,w={};function _(n){m.hasHash&&!n.hash&&f.scrollTo(y),!m.hasHash||n.hash||v.endOfHistory||v.load({}),m.hasHash=!!n.hash}function x(n){var t=["connection_id","dialog_id"].map((function(t){return n.param(t)})),e=p(t,2),r=e[0],o=e[1];v.connection_id==r&&v.dialog_id==o||(l.omnibus.debug>1&&console.log("[setDialogFromRoute]",JSON.stringify([r,o])),l.setActiveDialog({connection_id:r,dialog_id:o}))}function k(n){return E.apply(this,arguments)}function E(){return(E=Zn(Jn.mark((function n(t){var r,o;return Jn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.activeDialog!=u.dialog){n.next=2;break}return n.abrupt("return");case 2:return w.dialog&&(w.dialog(),v.setLastRead&&v.setLastRead()),t.omnibus.debug&&console.log("[setDialogFromUser]",t.activeDialog.name),c(e(3,v=t.activeDialog)),e(2,g=t.findDialog({connection_id:v.connection_id})||{}),u.attach({connection:g,dialog:v,user:t}),ee.update({title:v.title}),w.dialog=v.subscribe((function(n){c(e(3,v=n))})),e(6,b=new Pt),Object.keys(m).forEach((function(n){return delete m[n]})),r=Tt(ee.hash)&&new Pt(ee.hash),n.next=14,v.load({after:r?r.setSeconds(r.getSeconds()-5).toISOString():"maybe"});case 14:if(!(v.messages.length<v.chunkSize)){n.next=18;break}return o=v.messages[0]&&v.messages[0].ts.toISOString()||b.toISOString(),n.next=18,v.load({before:o});case 18:case"end":return n.stop()}}),n)})))).apply(this,arguments)}u.attach({connection:g,dialog:v,user:l}),mn((function(){it("chat_input")})),$=function(){var n=v.messages.length&&v.messages[0].ts.toISOString()||"";n&&m.chatFirstTs!=n&&ft(document,".message__embed",(function(n){return n.remove()})),m.chatFirstTs=n,e(0,f.wrapper=h,f),f.observe(".message"),y!=m.messagesHeight&&f.keepPos(y),m.messagesHeight=y,ft(h,".message",(function(n){return n.classList[n.dataset.ts==r.hash?"add":"remove"]("has-focus")}))},hn().$$.after_update.push($),function(n){hn().$$.on_destroy.push(n)}((function(){v.setLastRead&&v.setLastRead(),Object.keys(w).forEach((function(n){return w[n]()})),s.detach()})),w.observed=f.on("observed",(function(n){if(n.isIntersecting){var t=S[n.target.dataset.index]||{};t.embeds&&l.embedMaker.render(n.target,t.embeds)}})),w.scroll=f.on("scroll",(function(n){if(v.messages.length&&!v.is("loading"))if("top"==f.pos){var t=v.messages[0].ts.toISOString();ee.go(v.path+"#"+t,{replace:!0}),v.startOfHistory||v.load({before:t})}else if("bottom"==f.pos){var e=v.messages.slice(-1)[0].ts.toISOString();ee.go(v.path+"#"+e,{replace:!0}),v.endOfHistory||v.load({after:e})}else{var r=f.findVisibleElements(".message[data-ts]",1);ee.go(v.path+"#"+r[0].dataset.ts,{replace:!0})}}));var S;return n.$$.update=function(){16384&n.$$.dirty&&_(r),16384&n.$$.dirty&&x(r),32768&n.$$.dirty&&k(o),256&n.$$.dirty&&e(7,S=u.merge(i.messages)),18&n.$$.dirty&&s.attach(document,h,d&&d.getUploadEl())},[f,d,g,v,h,y,b,S,i,u,l,function(n){var t=n.target.closest(".message");l.embedMaker.toggleDetails(t,S[t.dataset.index])},m,w,r,o,s,_,x,k,function(n){return d.add(n.from)},function(n){e(5,y=n)},function(n){yn[n?"unshift":"push"]((function(){e(4,h=n)}))},function(n){yn[n?"unshift":"push"]((function(){e(1,d=n)}))}]}var bc=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(ac()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,yc,$c,M,{}),r}return u}(Yn);function wc(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function _c(n){var t;return{c:function(){(t=W("h1")).textContent="".concat(me("Add connection"))},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function xc(n){var t,e,r,o=new ea({props:{$$slots:{default:[_c]},$$scope:{ctx:n}}}),i=new lr({});return{c:function(){Fn(o.$$.fragment),t=Y(),e=W("main"),Fn(i.$$.fragment),X(e,"class","main")},m:function(n,a){Kn(o,n,a),F(n,t,a),F(n,e,a),Kn(i,e,null),r=!0},p:function(n,t){var e=p(t,1)[0],r={};1&e&&(r.$$scope={dirty:e,ctx:n}),o.$set(r)},i:function(n){r||(In(o.$$.fragment,n),In(i.$$.fragment,n),r=!0)},o:function(n){Un(o.$$.fragment,n),Un(i.$$.fragment,n),r=!1},d:function(n){Gn(o,n),n&&K(t),n&&K(e),Gn(i)}}}function kc(n){return ee.update({title:me("Add connection")}),[]}var Ec=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(wc()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,kc,xc,M,{}),r}return u}(Yn);function Oc(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Sc(n,t,e){var r=n.slice();return r[26]=t[e],r[28]=e,r}var Cc=function(n){return{}},Rc=function(n){return{}};function Nc(n){var t,e,r,o,i=(n[26].length>1?n[26][1]:n[26][0])+"";function a(){for(var t,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(t=n)[24].apply(t,[n[28]].concat(r))}return{c:function(){t=W("a"),e=V(i),X(t,"href",r="#"+n[28]+":"+n[26][0]),X(t,"tabindex","-1"),on(t,"is-active",n[28]==n[6])},m:function(r,i,c){F(r,t,i),q(t,e),c&&N(o),o=[Q(t,"click",n[14]),Q(t,"mouseover",a)]},p:function(o,a){n=o,2048&a&&i!==(i=(n[26].length>1?n[26][1]:n[26][0])+"")&&tn(e,i),2048&a&&r!==(r="#"+n[28]+":"+n[26][0])&&X(t,"href",r),64&a&&on(t,"is-active",n[28]==n[6])},d:function(n){n&&K(t),N(o)}}}function Dc(n){for(var t,e,r,o,i,a,c,u,s,f,l,d=n[20].label,h=j(d,n,n[19],Rc),m=h||{c:function(){l=V("Label")},m:function(n,t){F(n,l,t)},d:function(n){n&&K(l)}},g=n[11],v=[],$=0;$<g.length;$+=1)v[$]=Nc(Sc(n,g,$));return{c:function(){t=W("div"),e=W("label"),m&&m.c(),r=Y(),o=W("input"),i=Y(),a=W("input"),c=Y(),u=W("div");for(var s=0;s<v.length;s+=1)v[s].c();X(e,"for",n[3]),X(o,"type","hidden"),X(o,"name",n[2]),X(a,"type","text"),X(a,"placeholder",n[4]),X(a,"id",n[3]),a.readOnly=n[5],X(a,"autocomplete","off"),X(u,"class","select-field__options"),X(t,"class","select-field text-field"),t.hidden=n[1],on(t,"is-open",n[9])},m:function(l,d,p){F(l,t,d),q(t,e),m&&m.m(e,null),q(t,r),q(t,o),n[21](o),en(o,n[0]),q(t,i),q(t,a),n[23](a),q(t,c),q(t,u);for(var h=0;h<v.length;h+=1)v[h].m(u,null);n[25](t),s=!0,p&&N(f),f=[Q(o,"input",n[22]),Q(o,"keydown",n[12]),Q(a,"keydown",n[12]),Q(a,"keyup",n[13]),Q(t,"click",Z(n[15]))]},p:function(n,r){var i=p(r,1)[0];if(h&&h.p&&524288&i&&h.p(A(d,n,n[19],Rc),L(d,n[19],i,Cc)),(!s||8&i)&&X(e,"for",n[3]),(!s||4&i)&&X(o,"name",n[2]),1&i&&en(o,n[0]),(!s||16&i)&&X(a,"placeholder",n[4]),(!s||8&i)&&X(a,"id",n[3]),(!s||32&i)&&(a.readOnly=n[5]),18496&i){var c;for(g=n[11],c=0;c<g.length;c+=1){var f=Sc(n,g,c);v[c]?v[c].p(f,i):(v[c]=Nc(f),v[c].c(),v[c].m(u,null))}for(;c<v.length;c+=1)v[c].d(1);v.length=g.length}(!s||2&i)&&(t.hidden=n[1]),512&i&&on(t,"is-open",n[9])},i:function(n){s||(In(m,n),s=!0)},o:function(n){Un(m,n),s=!1},d:function(e){e&&K(t),m&&m.d(e),n[21](null),n[23](null),G(v,e),n[25](null),N(f)}}}function Mc(n,t,e){var r,o,i,a=["ArrowDown","ArrowUp","Enter"],c=0,u=!1,s="",f=t.hidden,l=void 0!==f&&f,d=t.name,p=void 0===d?"":d,h=t.id,m=void 0===h?p?"form_"+p:mt():h,g=t.options,v=void 0===g?[]:g,$=t.placeholder,y=void 0===$?"":$,b=t.readonly,w=void 0!==b&&b,_=t.value,x=void 0===_?"":_;function k(n){return E.apply(this,arguments)}function E(){return(E=Zn(Jn.mark((function n(t){var r,i;return Jn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return"keydown"==t.type?r=R.length?R[c]:[]:(i=t.target.href.replace(/^.*?#\d+:/,""),r=R.filter((function(n){return n[0]==i}))[0]||[]),r.length||(r=[""]),e(0,x=r[0]),e(8,o.value=r.length>1?r[1]:r[0],o),n.next=6,En();case 6:o.setSelectionRange(0,9999),e(9,u=!1);case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}mn((function(){o.addEventListener("blur",(function(){return setTimeout((function(){e(9,u=!1)}),100)})),e(0,x=r.value)}));var O=t.$$slots,S=void 0===O?{}:O,C=t.$$scope;var R;return n.$set=function(n){"hidden"in n&&e(1,l=n.hidden),"name"in n&&e(2,p=n.name),"id"in n&&e(3,m=n.id),"options"in n&&e(16,v=n.options),"placeholder"in n&&e(4,y=n.placeholder),"readonly"in n&&e(5,w=n.readonly),"value"in n&&e(0,x=n.value),"$$scope"in n&&e(19,C=n.$$scope)},n.$$.update=function(){if(512&n.$$.dirty&&0==u&&e(17,s=""),196608&n.$$.dirty&&e(11,R=function(n,t){var e=new RegExp("(?:^|\\s|-)"+lt(t),"i"),r=[];r.length||(r=n.filter((function(n){return n[0]==t}))),r.length||(r=n.filter((function(n){return n[0].match(e)})));for(var o=0;o<n.length;o++){var i=n[o];i.length>1&&-1!=r.indexOf(i)&&i[1].match(e)&&-1==n.map((function(n){return n[0]})).indexOf(i[0])&&n.push(i)}return n}(v,s)),512&n.$$.dirty&&1==u&&e(6,c=0),128&n.$$.dirty&&r&&!r.syncValue&&(e(7,r.syncValue=function(){e(0,x=this.value)},r),r.syncValue()),65920&n.$$.dirty&&o&&!o.value&&o!=document.activeElement){var t=v.find((function(n){return n[0]==r.value}));t&&e(8,o.value=t[1]||t[0],o)}},[x,l,p,m,y,w,c,r,o,u,i,R,function(n){-1!=a.indexOf(n.key)&&n.preventDefault(),"Tab"!=n.key?u?("ArrowDown"==n.key&&e(6,c++,c),"ArrowUp"==n.key&&e(6,c--,c),"Enter"==n.key&&k(n),c>=v.length&&e(6,c=0),c<0&&e(6,c=v.length-1)):e(9,u=!0):u&&k(n)},function(n){1!=n.key.length&&"Backspace"!=n.key||e(17,s=o.value)},k,function(n){n&&n.target&&tt(n.target,".select-field__options")||e(9,u=!u)},v,s,a,C,S,function(n){yn[n?"unshift":"push"]((function(){e(7,r=n)}))},function(){x=this.value,e(0,x),e(7,r)},function(n){yn[n?"unshift":"push"]((function(){e(8,o=n)}))},function(n){e(6,c=n)},function(n){yn[n?"unshift":"push"]((function(){e(10,i=n)}))}]}var Tc=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Oc()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,Mc,Dc,M,{hidden:1,name:2,id:3,options:16,placeholder:4,readonly:5,value:0}),r}return u}(Yn);function Pc(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function jc(n,t,e){var r=n.slice();return r[14]=t[e],r}function Ac(n){var t;return{c:function(){(t=W("h1")).textContent="".concat(me("Add conversation"))},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Lc(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Connection")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Ic(n){var t,e=me(n[0].dialogs.length?"Refresh":"Load")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:function(n,r){1&r&&e!==(e=me(n[0].dialogs.length?"Refresh":"Load")+"")&&tn(t,e)},d:function(n){n&&K(t)}}}function Uc(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Conversation name")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function zc(n){var t,e=me("Add")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Hc(n){var t,e,r,o,i=n[0].error+"";return{c:function(){t=W("p"),e=V(n[1]),r=V(": "),o=V(i),X(t,"class","error")},m:function(n,i){F(n,t,i),q(t,e),q(t,r),q(t,o)},p:function(n,t){2&t&&tn(e,n[1]),1&t&&i!==(i=n[0].error+"")&&tn(o,i)},d:function(n){n&&K(t)}}}function Bc(n){var t,e,r;function o(n,t){return n[0].done?Fc:qc}for(var i=o(n),a=i(n),c=n[0].dialogs,u=[],s=0;s<c.length;s+=1)u[s]=Kc(jc(n,c,s));return{c:function(){t=W("p"),a.c(),e=Y(),r=W("div");for(var n=0;n<u.length;n+=1)u[n].c();X(r,"class","dialog-add-list")},m:function(n,o){F(n,t,o),a.m(t,null),F(n,e,o),F(n,r,o);for(var i=0;i<u.length;i+=1)u[i].m(r,null)},p:function(n,e){if(i===(i=o(n))&&a?a.p(n,e):(a.d(1),(a=i(n))&&(a.c(),a.m(t,null))),65&e){var s;for(c=n[0].dialogs,s=0;s<c.length;s+=1){var f=jc(n,c,s);u[s]?u[s].p(f,e):(u[s]=Kc(f),u[s].c(),u[s].m(r,null))}for(;s<u.length;s+=1)u[s].d(1);u.length=c.length}},d:function(n){n&&K(t),a.d(),n&&K(e),n&&K(r),G(u,n)}}}function qc(n){var t,e=me("Showing %1 of %2 conversations, but the list is still loading.",n[0].dialogs.length,n[0].n_dialogs)+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:function(n,r){1&r&&e!==(e=me("Showing %1 of %2 conversations, but the list is still loading.",n[0].dialogs.length,n[0].n_dialogs)+"")&&tn(t,e)},d:function(n){n&&K(t)}}}function Fc(n){var t,e=me("Showing %1 of %2 conversations.",n[0].dialogs.length,n[0].n_dialogs)+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:function(n,r){1&r&&e!==(e=me("Showing %1 of %2 conversations.",n[0].dialogs.length,n[0].n_dialogs)+"")&&tn(t,e)},d:function(n){n&&K(t)}}}function Kc(n){var t,e,r,o,i,a,c,u,s,f,l,d,p=n[14].n_users+"",h=n[14].name+"",m=(n[14].topic||"No topic.")+"";return{c:function(){t=W("a"),e=W("span"),r=V(p),o=Y(),i=W("b"),a=V(h),c=Y(),u=W("i"),s=V(m),f=Y(),X(e,"class","dialog-add-list__n-users"),X(i,"class","dialog-add-list__name"),X(u,"class","dialog-add-list__title"),X(t,"href",l="#add:"+n[14].name)},m:function(l,p,h){F(l,t,p),q(t,e),q(e,r),q(t,o),q(t,i),q(i,a),q(t,c),q(t,u),q(u,s),q(t,f),h&&d(),d=Q(t,"click",Z(n[6]))},p:function(n,e){1&e&&p!==(p=n[14].n_users+"")&&tn(r,p),1&e&&h!==(h=n[14].name+"")&&tn(a,h),1&e&&m!==(m=(n[14].topic||"No topic.")+"")&&tn(s,m),1&e&&l!==(l="#add:"+n[14].name)&&X(t,"href",l)},d:function(n){n&&K(t),d()}}}function Gc(n){var t,e,r,o,i,a,c,u,s,f,l,d,h,m,g,v,$,y,b=new ea({props:{$$slots:{default:[Ac]},$$scope:{ctx:n}}});function w(t){n[11].call(null,t)}var _={name:"connection_id",options:n[4],placeholder:me("Select..."),$$slots:{label:[Lc]},$$scope:{ctx:n}};void 0!==n[1]&&(_.value=n[1]);var x=new Tc({props:_});yn.push((function(){return qn(x,"value",w)}));var k=new It({props:{type:"button",icon:"sync-alt",disabled:!n[1]||!1===n[0].done,$$slots:{default:[Ic]},$$scope:{ctx:n}}});function E(t){n[12].call(null,t)}k.$on("click",n[7]);var O={name:"dialog_id",placeholder:me("#room or nick"),autocomplete:"off",$$slots:{label:[Uc]},$$scope:{ctx:n}};void 0!==n[2]&&(O.value=n[2]);var S=new ze({props:O});yn.push((function(){return qn(S,"value",E)})),S.$on("keyup",n[8]);var C=new It({props:{icon:"comment",disabled:!n[1]||!n[2],$$slots:{default:[zc]},$$scope:{ctx:n}}}),R=n[0].error&&Hc(n),N=null!==n[0].done&&Bc(n);return{c:function(){Fn(b.$$.fragment),t=Y(),e=W("main"),(r=W("p")).textContent="".concat(me("Enter the name of an exising conversation, or create a new conversation.")," \n    ").concat(me("It is also possible to load in all existing conversations for a given connection.")),o=Y(),i=W("form"),a=W("div"),Fn(x.$$.fragment),u=Y(),s=W("div"),Fn(k.$$.fragment),f=Y(),l=W("div"),Fn(S.$$.fragment),h=Y(),m=W("div"),Fn(C.$$.fragment),g=Y(),R&&R.c(),v=Y(),N&&N.c(),X(s,"class","has-remaining-space"),X(a,"class","inputs-side-by-side"),X(m,"class","has-remaining-space"),X(l,"class","inputs-side-by-side"),X(i,"method","post"),X(e,"class","main")},m:function(c,d,p){Kn(b,c,d),F(c,t,d),F(c,e,d),q(e,r),q(e,o),q(e,i),q(i,a),Kn(x,a,null),q(a,u),q(a,s),Kn(k,s,null),q(i,f),q(i,l),Kn(S,l,null),q(l,h),q(l,m),Kn(C,m,null),q(i,g),R&&R.m(i,null),q(i,v),N&&N.m(i,null),n[13](i),$=!0,p&&y(),y=Q(i,"submit",Z(n[6]))},p:function(n,t){var e=p(t,1)[0],r={};131072&e&&(r.$$scope={dirty:e,ctx:n}),b.$set(r);var o={};16&e&&(o.options=n[4]),131072&e&&(o.$$scope={dirty:e,ctx:n}),!c&&2&e&&(c=!0,o.value=n[1],Sn((function(){return c=!1}))),x.$set(o);var a={};3&e&&(a.disabled=!n[1]||!1===n[0].done),131073&e&&(a.$$scope={dirty:e,ctx:n}),k.$set(a);var u={};131072&e&&(u.$$scope={dirty:e,ctx:n}),!d&&4&e&&(d=!0,u.value=n[2],Sn((function(){return d=!1}))),S.$set(u);var s={};6&e&&(s.disabled=!n[1]||!n[2]),131072&e&&(s.$$scope={dirty:e,ctx:n}),C.$set(s),n[0].error?R?R.p(n,e):((R=Hc(n)).c(),R.m(i,v)):R&&(R.d(1),R=null),null!==n[0].done?N?N.p(n,e):((N=Bc(n)).c(),N.m(i,null)):N&&(N.d(1),N=null)},i:function(n){$||(In(b.$$.fragment,n),In(x.$$.fragment,n),In(k.$$.fragment,n),In(S.$$.fragment,n),In(C.$$.fragment,n),$=!0)},o:function(n){Un(b.$$.fragment,n),Un(x.$$.fragment,n),Un(k.$$.fragment,n),Un(S.$$.fragment,n),Un(C.$$.fragment,n),$=!1},d:function(r){Gn(b,r),r&&K(t),r&&K(e),Gn(x),Gn(k),Gn(S),Gn(C),R&&R.d(),N&&N.d(),n[13](null),y()}}}function Wc(n,t,e){var r,o=gn("user");P(n,o,(function(n){return e(10,r=n)}));var i,a,c={dialogs:[],done:null,n_dialogs:0},u="",s="";function f(n){var t="/list"+(s.length?" /"+s+"/":"");"click"==n.type&&c.done&&(t+=" refresh"),a&&clearTimeout(a),o.omnibus.send({connection_id:u,message:t},(function(t){var r=ot(t);e(0,c=r?{dialogs:[],done:!0,n_dialogs:0,error:r}:t);var o=n.interval?n.interval+500:500;o>2e3&&(o=2e3),r||t.done||(a=setTimeout((function(){return f({interval:o})}),o))}))}ee.update({title:me("Add conversation")}),mn((function(){return ee.urlToForm(i)}));var l,d=et(f,250);return n.$$.update=function(){1024&n.$$.dirty&&e(4,l=Array.from(r.connections.keys()).map((function(n){return[n]}))),18&n.$$.dirty&&(u||e(1,u=l[0]?l[0][0]:""))},[c,u,s,i,l,o,function(n){var t=n&&n.target&&n.target.closest("a");t&&t.href&&e(2,s=t.href.replace(/.*#add:/,"")),u&&s&&o.findDialog({connection_id:u}).send("/join "+s)},f,d,a,r,function(n){e(1,u=n),e(4,l),e(10,r)},function(n){e(2,s=n)},function(n){yn[n?"unshift":"push"]((function(){e(3,i=n)}))}]}var Vc=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Pc()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,Wc,Gc,M,{}),r}return u}(Yn);function Yc(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Jc(n,t,e){var r=n.slice();return r[5]=t[e],r}function Qc(n){var t,e;return{c:function(){(t=W("h1")).textContent="".concat(me("Help")),(e=W("small")).textContent="v".concat(process.env.version)},m:function(n,r){F(n,t,r),F(n,e,r)},p:O,d:function(n){n&&K(t),n&&K(e)}}}function Zc(n){var t,e,r,o,i=n[5].example+"",a=me(n[5].description)+"";return{c:function(){t=W("dt"),e=V(i),r=W("dd"),o=V(a)},m:function(n,i){F(n,t,i),q(t,e),F(n,r,i),q(r,o)},p:O,d:function(n){n&&K(t),n&&K(r)}}}function Xc(n){var t;return{c:function(){t=V("Loading")},m:function(n,e){F(n,t,e)},d:function(n){n&&K(t)}}}function nu(n){var t;return{c:function(){t=V("Not found")},m:function(n,e){F(n,t,e)},d:function(n){n&&K(t)}}}function tu(n){var t;return{c:function(){t=V("Offline")},m:function(n,e){F(n,t,e)},d:function(n){n&&K(t)}}}function eu(n){var t;return{c:function(){t=V("Unknown")},m:function(n,e){F(n,t,e)},d:function(n){n&&K(t)}}}function ru(n){for(var t,e,r,o,i,a,c,u,s,f,l,d,h,m,g,v,$,y,b,w,_,x,k,E,S,C,R,N,M,T,P,j,A,L,I,U,z,H,B,J,Z,nn,tn,en,rn,on,an,un,sn,fn,ln,dn,pn,hn,mn,gn,vn,$n,yn,bn,wn,_n,xn,kn,En,On,Sn,Cn,Rn,Nn,Dn,Mn,Tn,Pn,jn,An,Ln,zn,Hn,Bn,qn,Wn,Vn,Yn,Jn,Qn,Zn,Xn,nt,tt,et,rt,ot=me("Jump to:")+"",it=ge('Got any questions? Come and talk to us in the "#convos" channel on https://freenode.net.')+"",at=ge("More information can also be found on https://convos.by.")+"",ct=ge('Using "*" around some text, will convert it into *italic*, **bold** or ***italic bold***.')+"",ut=ge("Using backticks around some text, will format it as a `code fragment`.")+"",st=me("Contact admin")+"",ft=new ea({props:{$$slots:{default:[Qc]},$$scope:{ctx:n}}}),lt=ia,dt=[],pt=0;pt<lt.length;pt+=1)dt[pt]=Zc(Jc(n,lt,pt));var ht,mt,gt,vt,$t="Convos"!=process.env.organization_name&&"https://convos.by"!=process.env.organization_url&&(vt=process.env.organization_name+"",{c:function(){ht=W("li"),mt=W("a"),gt=V(vt),X(mt,"href",process.env.organization_url),X(mt,"target","_blank")},m:function(n,t){F(n,ht,t),q(ht,mt),q(mt,gt)},p:O,d:function(n){n&&K(ht)}}),yt=new Or({props:{href:"/err/loading",$$slots:{default:[Xc]},$$scope:{ctx:n}}}),bt=new Or({props:{href:"/err/not_found",$$slots:{default:[nu]},$$scope:{ctx:n}}}),wt=new Or({props:{href:"/err/offline",$$slots:{default:[tu]},$$scope:{ctx:n}}}),_t=new Or({props:{href:"/err/unknown",$$slots:{default:[eu]},$$scope:{ctx:n}}});return{c:function(){Fn(ft.$$.fragment),t=Y(),e=W("main"),r=W("p"),o=V(ot),i=Y(),(a=W("a")).textContent="".concat(me("Shortcuts")),c=V(",\n    "),(u=W("a")).textContent="".concat(me("Autocomplete")),s=V(",\n    "),(f=W("a")).textContent="".concat(me("Text formatting")),l=V(",\n    "),(d=W("a")).textContent="".concat(me("Available commands")),h=V(",\n    "),(m=W("a")).textContent="".concat(me("Other resources")),g=V("."),v=Y(),$=W("p"),b=Y(),_=Y(),(x=W("h2")).textContent="".concat(me("Shortcuts")),k=Y(),E=W("dl"),(S=W("dt")).textContent="".concat(me("shift+enter")),(C=W("dd")).textContent="".concat(me("Shift focus between chat input and search in sidebar.")),(R=W("dt")).textContent="".concat(me("Open conversation or connection settings")),(N=W("dd")).textContent="".concat(me("Clicking on the icon next to the conversation name will take you to settings.")),M=Y(),(T=W("h2")).textContent="".concat(me("Autocomplete")),P=Y(),(j=W("p")).textContent="".concat(me("The following rules apply when typing a message:")),A=Y(),L=W("dl"),(I=W("dt")).textContent="@nick",(U=W("dd")).textContent="".concat(me('"@" followed by a character will show matching nicks in the current conversation.')),(z=W("dt")).textContent=":emoji_name",(H=W("dd")).textContent="".concat(me('":" followed by a character will show matching emojis.')),(B=W("dt")).textContent="/command",(J=W("dd")).textContent="".concat(me('"/" will show the available commands.')),(Z=W("dt")).textContent="#conversation",(nn=W("dd")).textContent="".concat(me('"#" will show the matching conversation names.')),tn=Y(),(en=W("h2")).textContent="".concat(me("Text formatting")),rn=Y(),(on=W("p")).textContent="".concat(me("Convos supports some special way of formatting text:")),an=Y(),un=W("dl"),(sn=W("dt")).textContent="".concat(Object.keys(se).sort().map(n[3]).join(", ")),(fn=W("dd")).textContent="".concat(me("Will be automatically converted into emojis.")),(ln=W("dt")).textContent="".concat(me("> some text")),(dn=W("dd")).textContent="".concat(me('A line starting with ">" will be converted into a quote.')),(pn=W("dt")).textContent="".concat(me("*some text*, **some text**, ***some text***")),hn=W("dd"),(mn=W("dt")).textContent="".concat(me("`some fragment`")),gn=W("dd"),(vn=W("dt")).textContent="https://...",($n=W("dd")).textContent="".concat(me("URLs will be converted to links, and might be embedded in the chat.")),yn=Y(),(bn=W("h2")).textContent="".concat(me("Available commands")),wn=Y(),_n=W("dl");for(var p=0;p<dt.length;p+=1)dt[p].c();xn=Y(),(kn=W("h2")).textContent="".concat(me("Other resources")),En=Y(),On=W("ul"),Sn=W("li"),(Cn=W("a")).textContent="".concat(me("Project homepage")),Rn=Y(),Nn=W("li"),(Dn=W("a")).textContent="".concat(me("Bug/issue tracker")),Mn=Y(),Tn=W("li"),(Pn=W("a")).textContent="".concat(me("Source code")),jn=Y(),$t&&$t.c(),An=Y(),Ln=W("li"),zn=W("a"),Hn=V(st),Bn=Y(),(qn=W("h2")).textContent="".concat(me("Demo error pages")),Wn=Y(),Vn=W("ul"),Yn=W("li"),Fn(yt.$$.fragment),Jn=Y(),Qn=W("li"),Fn(bt.$$.fragment),Zn=Y(),Xn=W("li"),Fn(wt.$$.fragment),nt=Y(),tt=W("li"),Fn(_t.$$.fragment),X(a,"href","#shortcuts"),X(u,"href","#autocomplete"),X(f,"href","#formatting"),X(d,"href","#commands"),X(m,"href","#resources"),y=new cn(it,b),w=new cn(at,null),X(x,"id","shortcuts"),X(T,"id","autocomplete"),X(en,"id","formatting"),X(bn,"id","commands"),X(kn,"id","resources"),X(Cn,"href","https://convos.by"),X(Cn,"target","_blank"),X(Dn,"href","https://github.com/Nordaaker/convos/issues"),X(Dn,"target","_blank"),X(Pn,"href","https://github.com/Nordaaker/convos"),X(Pn,"target","_blank"),X(zn,"href",process.env.contact),X(zn,"target","_blank"),X(qn,"id","fallback"),X(e,"class","main")},m:function(p,O,K){Kn(ft,p,O),F(p,t,O),F(p,e,O),q(e,r),q(r,o),q(r,i),q(r,a),q(r,c),q(r,u),q(r,s),q(r,f),q(r,l),q(r,d),q(r,h),q(r,m),q(r,g),q(e,v),q(e,$),y.m($),q($,b),w.m($),q(e,_),q(e,x),q(e,k),q(e,E),q(E,S),q(E,C),q(E,R),q(E,N),q(e,M),q(e,T),q(e,P),q(e,j),q(e,A),q(e,L),q(L,I),q(L,U),q(L,z),q(L,H),q(L,B),q(L,J),q(L,Z),q(L,nn),q(e,tn),q(e,en),q(e,rn),q(e,on),q(e,an),q(e,un),q(un,sn),q(un,fn),q(un,ln),q(un,dn),q(un,pn),q(un,hn),hn.innerHTML=ct,q(un,mn),q(un,gn),gn.innerHTML=ut,q(un,vn),q(un,$n),q(e,yn),q(e,bn),q(e,wn),q(e,_n);for(var G=0;G<dt.length;G+=1)dt[G].m(_n,null);q(e,xn),q(e,kn),q(e,En),q(e,On),q(On,Sn),q(Sn,Cn),q(On,Rn),q(On,Nn),q(Nn,Dn),q(On,Mn),q(On,Tn),q(Tn,Pn),q(On,jn),$t&&$t.m(On,null),q(On,An),q(On,Ln),q(Ln,zn),q(zn,Hn),q(e,Bn),q(e,qn),q(e,Wn),q(e,Vn),q(Vn,Yn),Kn(yt,Yn,null),q(Vn,Jn),q(Vn,Qn),Kn(bt,Qn,null),q(Vn,Zn),q(Vn,Xn),Kn(wt,Xn,null),q(Vn,nt),q(Vn,tt),Kn(_t,tt,null),n[4](e),et=!0,K&&rt(),rt=Q(r,"click",(function(){D(n[0].scrollTo)&&n[0].scrollTo.apply(this,arguments)}))},p:function(t,e){var r=p(e,1)[0];n=t;var o={};if(256&r&&(o.$$scope={dirty:r,ctx:n}),ft.$set(o),0&r){var i;for(lt=ia,i=0;i<lt.length;i+=1){var a=Jc(n,lt,i);dt[i]?dt[i].p(a,r):(dt[i]=Zc(a),dt[i].c(),dt[i].m(_n,null))}for(;i<dt.length;i+=1)dt[i].d(1);dt.length=lt.length}"Convos"!=process.env.organization_name&&"https://convos.by"!=process.env.organization_url&&$t.p(n,r);var c={};256&r&&(c.$$scope={dirty:r,ctx:n}),yt.$set(c);var u={};256&r&&(u.$$scope={dirty:r,ctx:n}),bt.$set(u);var s={};256&r&&(s.$$scope={dirty:r,ctx:n}),wt.$set(s);var f={};256&r&&(f.$$scope={dirty:r,ctx:n}),_t.$set(f)},i:function(n){et||(In(ft.$$.fragment,n),In(yt.$$.fragment,n),In(bt.$$.fragment,n),In(wt.$$.fragment,n),In(_t.$$.fragment,n),et=!0)},o:function(n){Un(ft.$$.fragment,n),Un(yt.$$.fragment,n),Un(bt.$$.fragment,n),Un(wt.$$.fragment,n),Un(_t.$$.fragment,n),et=!1},d:function(r){Gn(ft,r),r&&K(t),r&&K(e),G(dt,r),$t&&$t.d(),Gn(yt),Gn(bt),Gn(wt),Gn(_t),n[4](null),rt()}}}function ou(n,t,e){var r;P(n,ee,(function(n){return e(2,r=n)}));var o,i=new vo;ee.update({title:me("Help")});return n.$$.update=function(){2&n.$$.dirty&&e(0,i.wrapper=o,i),5&n.$$.dirty&&i.scrollTo(r.hash?"#"+r.hash:0)},[i,o,r,function(n){return se[n]},function(n){yn[n?"unshift":"push"]((function(){e(1,o=n)}))}]}var iu=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Yc()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,ou,ru,M,{}),r}return u}(Yn);function au(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function cu(n,t,e){var r,o=gn("user");return P(n,o,(function(n){return e(1,r=n)})),n.$$.update=function(){2&n.$$.dirty&&function(n){var t=n.dialogs()[0],e=ee.lastUrl?ee.lastUrl:t?t.path:"/settings/connection";n.is("loading")||(n.is("authenticated")?ee.go(e):ee.go("/login"))}(r)},[o]}var uu=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(au()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,cu,null,M,{}),r}return u}(Yn);function su(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function fu(n,t,e){var r=n.slice();return r[16]=t[e],r[18]=e,r}function lu(n){var t,e,r,o,i,a=me(n[1].name)+"",c=new Nt({props:{name:n[1].is("search")?"search":"bell"}});return{c:function(){t=W("h1"),e=W("a"),Fn(c.$$.fragment),r=W("span"),o=V(a),X(e,"href","#activeMenu:nav"),X(e,"tabindex","-1")},m:function(n,a){F(n,t,a),q(t,e),Kn(c,e,null),q(e,r),q(r,o),i=!0},p:function(n,t){var e={};2&t&&(e.name=n[1].is("search")?"search":"bell"),c.$set(e),(!i||2&t)&&a!==(a=me(n[1].name)+"")&&tn(o,a)},i:function(n){i||(In(c.$$.fragment,n),i=!0)},o:function(n){Un(c.$$.fragment,n),i=!1},d:function(n){n&&K(t),Gn(c)}}}function du(n){var t,e,r,o,i,a,c,u=[mu,hu,pu],s=[];function f(n,o){return 2&o&&(t=!!n[1].is("notifications")),t?0:(16&o&&(e=!!n[4].param("q")),e?1:(2&o&&(r=!!n[1].is("search")),r?2:-1))}return~(o=f(n,-1))&&(i=s[o]=u[o](n)),{c:function(){i&&i.c(),a=J()},m:function(n,t){~o&&s[o].m(n,t),F(n,a,t),c=!0},p:function(n,t){var e=o;(o=f(n,t))===e?~o&&s[o].p(n,t):(i&&(An(),Un(s[e],1,1,(function(){s[e]=null})),Ln()),~o?((i=s[o])||(i=s[o]=u[o](n)).c(),In(i,1),i.m(a.parentNode,a)):i=null)},i:function(n){c||(In(i),c=!0)},o:function(n){Un(i),c=!1},d:function(n){~o&&s[o].d(n),n&&K(a)}}}function pu(n){var t,e=new Oa({props:{$$slots:{default:[gu]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};524288&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(In(e.$$.fragment,n),t=!0)},o:function(n){Un(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function hu(n){var t,e=new Oa({props:{$$slots:{default:[vu]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};524304&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(In(e.$$.fragment,n),t=!0)},o:function(n){Un(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function mu(n){var t;return{c:function(){(t=W("h2")).textContent="".concat(me("No notifications."))},m:function(n,e){F(n,t,e)},p:O,i:O,o:O,d:function(n){n&&K(t)}}}function gu(n){var t,e,r,o,i,a=ge("Search for messages sent by you or others the last %1 days by writing a message in the input field below.",90)+"",c=ge('You can enter a channel name, or use `"conversation:#channel"` to narrow down the search.')+"",u=ge('It is also possible to use `"from:some_nick"` to filter out messages from a given user.')+"";return{c:function(){e=Y(),o=Y(),t=new cn(a,e),r=new cn(c,o),i=new cn(u,null)},m:function(n,a){t.m(n,a),F(n,e,a),r.m(n,a),F(n,o,a),i.m(n,a)},p:O,d:function(n){n&&t.d(),n&&K(e),n&&r.d(),n&&K(o),n&&i.d()}}}function vu(n){var t,e=me('No search results for "%1".',n[4].param("q"))+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:function(n,r){16&r&&e!==(e=me('No search results for "%1".',n[4].param("q"))+"")&&tn(t,e)},d:function(n){n&&K(t)}}}function $u(n){var t,e=new Na({props:{class:"for-day-changed",icon:"calendar-alt",$$slots:{default:[yu]},$$scope:{ctx:n}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};524320&t&&(r.$$scope={dirty:t,ctx:n}),e.$set(r)},i:function(n){t||(In(e.$$.fragment,n),t=!0)},o:function(n){Un(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function yu(n){var t,e=n[16].ts.getHumanDate()+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:function(n,r){32&r&&e!==(e=n[16].ts.getHumanDate()+"")&&tn(t,e)},d:function(n){n&&K(t)}}}function bu(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,h,m,g,v,$=n[6].dayChanged(n[5],n[18]),y=n[16].ts.toLocaleString()+"",b=me("%1 in %2",n[16].from,n[16].dialog_id)+"",w=n[16].markdown+"",_=$&&$u(n),x=new Nt({props:{name:"pick:"+n[16].fromId,color:n[16].color}});return{c:function(){_&&_.c(),t=Y(),e=W("div"),Fn(x.$$.fragment),r=Y(),o=W("div"),i=W("div"),a=V(y),u=Y(),s=W("a"),f=V(b),d=Y(),p=W("div"),h=Y(),X(o,"class","message__ts has-tooltip"),X(o,"data-content",c=n[16].ts.getHM()),X(s,"href",l=ku(n[16])),X(s,"class","message__from"),rn(s,"color",n[16].color),X(p,"class","message__text"),X(e,"class",m=n[6].classNames(n[5],n[18]))},m:function(n,c,l){_&&_.m(n,c),F(n,t,c),F(n,e,c),Kn(x,e,null),q(e,r),q(e,o),q(o,i),q(i,a),q(e,u),q(e,s),q(s,f),q(e,d),q(e,p),p.innerHTML=w,q(e,h),g=!0,l&&v(),v=Q(e,"click",Eu)},p:function(n,r){32&r&&($=n[6].dayChanged(n[5],n[18])),$?_?(_.p(n,r),In(_,1)):((_=$u(n)).c(),In(_,1),_.m(t.parentNode,t)):_&&(An(),Un(_,1,1,(function(){_=null})),Ln());var i={};32&r&&(i.name="pick:"+n[16].fromId),32&r&&(i.color=n[16].color),x.$set(i),(!g||32&r)&&y!==(y=n[16].ts.toLocaleString()+"")&&tn(a,y),(!g||32&r&&c!==(c=n[16].ts.getHM()))&&X(o,"data-content",c),(!g||32&r)&&b!==(b=me("%1 in %2",n[16].from,n[16].dialog_id)+"")&&tn(f,b),(!g||32&r&&l!==(l=ku(n[16])))&&X(s,"href",l),(!g||32&r)&&rn(s,"color",n[16].color),(!g||32&r)&&w!==(w=n[16].markdown+"")&&(p.innerHTML=w),(!g||32&r&&m!==(m=n[6].classNames(n[5],n[18])))&&X(e,"class",m)},i:function(n){g||(In(_),In(x.$$.fragment,n),g=!0)},o:function(n){Un(_),Un(x.$$.fragment,n),g=!1},d:function(n){_&&_.d(n),n&&K(t),n&&K(e),Gn(x),v()}}}function wu(n){for(var t,e,r,o=0==n[5].length&&!n[1].is("loading"),i=o&&du(n),a=n[5],c=[],u=0;u<a.length;u+=1)c[u]=bu(fu(n,a,u));var s=function(n){return Un(c[n],1,1,(function(){c[n]=null}))};return{c:function(){i&&i.c(),t=Y();for(var n=0;n<c.length;n+=1)c[n].c();e=J()},m:function(n,o){i&&i.m(n,o),F(n,t,o);for(var a=0;a<c.length;a+=1)c[a].m(n,o);F(n,e,o),r=!0},p:function(n,r){if(34&r&&(o=0==n[5].length&&!n[1].is("loading")),o?i?(i.p(n,r),In(i,1)):((i=du(n)).c(),In(i,1),i.m(t.parentNode,t)):i&&(An(),Un(i,1,1,(function(){i=null})),Ln()),96&r){var u;for(a=n[5],u=0;u<a.length;u+=1){var f=fu(n,a,u);c[u]?(c[u].p(f,r),In(c[u],1)):(c[u]=bu(f),c[u].c(),In(c[u],1),c[u].m(e.parentNode,e))}for(An(),u=a.length;u<c.length;u+=1)s(u);Ln()}},i:function(n){if(!r){In(i);for(var t=0;t<a.length;t+=1)In(c[t]);r=!0}},o:function(n){Un(i),c=c.filter(Boolean);for(var t=0;t<c.length;t+=1)Un(c[t]);r=!1},d:function(n){i&&i.d(n),n&&K(t),G(c,n),n&&K(e)}}}function _u(n){var t,e={dialog:n[1]},r=new da({props:e});return n[15](r),{c:function(){Fn(r.$$.fragment)},m:function(n,e){Kn(r,n,e),t=!0},p:function(n,t){var e={};2&t&&(e.dialog=n[1]),r.$set(e)},i:function(n){t||(In(r.$$.fragment,n),t=!0)},o:function(n){Un(r.$$.fragment,n),t=!1},d:function(t){n[15](null),Gn(r,t)}}}function xu(n){var t,e,r,o,i,a,c=n[1].is("search"),u=new ea({props:{$$slots:{default:[lu]},$$scope:{ctx:n}}});function s(t){n[13].call(null,t)}var f={dialog:n[1],$$slots:{default:[wu]},$$scope:{ctx:n}};void 0!==n[3]&&(f.messagesHeight=n[3]);var l=new Ja({props:f});yn.push((function(){return qn(l,"messagesHeight",s)}));var d=c&&_u(n);return{c:function(){Fn(u.$$.fragment),t=Y(),e=W("main"),Fn(l.$$.fragment),o=Y(),d&&d.c(),i=J(),X(e,"class","main has-search-results")},m:function(r,c){Kn(u,r,c),F(r,t,c),F(r,e,c),Kn(l,e,null),n[14](e),F(r,o,c),d&&d.m(r,c),F(r,i,c),a=!0},p:function(n,t){var e=p(t,1)[0],o={};524290&e&&(o.$$scope={dirty:e,ctx:n}),u.$set(o);var a={};2&e&&(a.dialog=n[1]),524338&e&&(a.$$scope={dirty:e,ctx:n}),!r&&8&e&&(r=!0,a.messagesHeight=n[3],Sn((function(){return r=!1}))),l.$set(a),2&e&&(c=n[1].is("search")),c?d?(d.p(n,e),In(d,1)):((d=_u(n)).c(),In(d,1),d.m(i.parentNode,i)):d&&(An(),Un(d,1,1,(function(){d=null})),Ln())},i:function(n){a||(In(u.$$.fragment,n),In(l.$$.fragment,n),In(d),a=!0)},o:function(n){Un(u.$$.fragment,n),Un(l.$$.fragment,n),Un(d),a=!1},d:function(r){Gn(u,r),r&&K(t),r&&K(e),Gn(l),n[14](null),r&&K(o),d&&d.d(r),r&&K(i)}}}function ku(n){return["","chat",n.connection_id,n.dialog_id].map(encodeURIComponent).join("/")+"#"+n.ts.toISOString()}function Eu(n){n.target.closest("a")||(n.preventDefault(),ee.go(n.target.closest(".message").querySelector("a").href))}function Ou(n,t,e){var r,o,i=O,a=function(){return i(),i=T(d,(function(n){return e(8,o=n)})),d};P(n,ee,(function(n){return e(4,r=n)})),n.$$.on_destroy.push((function(){return i()}));var c,u,s=new Zi,f=new vo,l=gn("user"),d=-1==r.path.indexOf("search")?l.notifications:l.search;a();var p,h=0;function m(n){(!d.is("success")||d.last_read<=new Pt-1e4)&&d.load(),d.setLastRead()}function g(n,t){var e=t?t.message:n.param("q");return c&&(t||c.setValue(e||""),it("chat_input")),n.param("q")!=e&&n.go("/search?q="+encodeURIComponent(e),{replace:!0}),e?d.load({match:e}):d.update({messages:[]})}function v(n){var t=-1!=n.path.indexOf("search")?l.search:l.notifications;return t!=d&&a(e(1,d=t)),e(7,f.wrapper=u,f),d.is("search")?g(n):m()}return mn((function(){return l.search.on("search",(function(n){return g(ee,n)}))})),n.$$.update=function(){2&n.$$.dirty&&s.attach({connection:{},dialog:d,user:l}),256&n.$$.dirty&&e(5,p=o.messages),20&n.$$.dirty&&u&&v(r),140&n.$$.dirty&&u&&f.scrollTo(h)},[c,d,u,h,r,p,s,f,o,l,m,g,v,function(n){e(3,h=n)},function(n){yn[n?"unshift":"push"]((function(){e(2,u=n)}))},function(n){yn[n?"unshift":"push"]((function(){e(0,c=n)}))}]}var Su=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(su()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,Ou,xu,M,{}),r}return u}(Yn);function Cu(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Ru(n){var t;return{c:function(){(t=W("h1")).textContent="".concat(me("Account"))},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Nu(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Email")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Du(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Notification keywords")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Mu(n){var t,e;function r(t){n[13].call(null,t)}var o={name:"notifications",$$slots:{label:[Tu]},$$scope:{ctx:n}};void 0!==n[5]&&(o.checked=n[5]);var i=new Ft({props:o});return yn.push((function(){return qn(i,"checked",r)})),{c:function(){Fn(i.$$.fragment)},m:function(n,t){Kn(i,n,t),e=!0},p:function(n,e){var r={};262144&e&&(r.$$scope={dirty:e,ctx:n}),!t&&32&e&&(t=!0,r.checked=n[5],Sn((function(){return t=!1}))),i.$set(r)},i:function(n){e||(In(i.$$.fragment,n),e=!0)},o:function(n){Un(i.$$.fragment,n),e=!1},d:function(n){Gn(i,n)}}}function Tu(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Enable notifications")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Pu(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Expand URL to media")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function ju(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Theme")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Au(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Color scheme")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Lu(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Password")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Iu(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Repeat password")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Uu(n){var t,e=me("Save settings")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function zu(n){var t;return{c:function(){(t=W("p")).textContent="".concat(me("You cannot receive notifications, because it is denied by your browser.")),X(t,"class","error")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Hu(n){var t,e,r,o,i,a,c,u,s,f,l,d,h,m,g,v,$,y,b,w,_,x=new ea({props:{$$slots:{default:[Ru]},$$scope:{ctx:n}}}),k=new ze({props:{type:"email",name:"email",value:n[6].email,readonly:!0,$$slots:{label:[Nu]},$$scope:{ctx:n}}}),E=new ze({props:{name:"highlight_keywords",placeholder:me("whatever, keywords"),value:n[11],$$slots:{label:[Du]},$$scope:{ctx:n}}}),O=!n[3]&&Mu(n);function S(t){n[14].call(null,t)}var C={name:"expand_url",$$slots:{label:[Pu]},$$scope:{ctx:n}};void 0!==n[2]&&(C.checked=n[2]);var R=new Ft({props:C});function N(t){n[15].call(null,t)}yn.push((function(){return qn(R,"checked",S)}));var D={name:"theme",options:n[10],$$slots:{label:[ju]},$$scope:{ctx:n}};void 0!==n[4]&&(D.value=n[4]);var M=new Tc({props:D});function T(t){n[16].call(null,t)}yn.push((function(){return qn(M,"value",N)}));var P={name:"color_scheme",options:n[7],$$slots:{label:[Au]},$$scope:{ctx:n}};void 0!==n[1]&&(P.value=n[1]);var j=new Tc({props:P});yn.push((function(){return qn(j,"value",T)}));var A=new ze({props:{type:"password",name:"password",autocomplete:"new-password",$$slots:{label:[Lu]},$$scope:{ctx:n}}}),L=new ze({props:{type:"password",name:"password_again",autocomplete:"new-password",$$slots:{label:[Iu]},$$scope:{ctx:n}}}),I=new It({props:{icon:"save",op:n[9],$$slots:{default:[Uu]},$$scope:{ctx:n}}}),U=new _e({props:{op:n[9]}}),z=n[3]&&zu();return{c:function(){Fn(x.$$.fragment),t=Y(),e=W("main"),r=W("form"),Fn(k.$$.fragment),o=Y(),Fn(E.$$.fragment),i=Y(),O&&O.c(),a=Y(),Fn(R.$$.fragment),u=Y(),Fn(M.$$.fragment),f=Y(),Fn(j.$$.fragment),d=Y(),Fn(A.$$.fragment),h=Y(),Fn(L.$$.fragment),m=Y(),(g=W("p")).textContent="".concat(me("Leave the password fields empty to keep the current password.")),v=Y(),$=W("div"),Fn(I.$$.fragment),y=Y(),Fn(U.$$.fragment),b=Y(),z&&z.c(),X($,"class","form-actions"),X(r,"method","post"),X(e,"class","main")},m:function(c,s,l){Kn(x,c,s),F(c,t,s),F(c,e,s),q(e,r),Kn(k,r,null),q(r,o),Kn(E,r,null),q(r,i),O&&O.m(r,null),q(r,a),Kn(R,r,null),q(r,u),Kn(M,r,null),q(r,f),Kn(j,r,null),q(r,d),Kn(A,r,null),q(r,h),Kn(L,r,null),q(r,m),q(r,g),q(r,v),q(r,$),Kn(I,$,null),q(r,y),Kn(U,r,null),q(r,b),z&&z.m(r,null),n[17](r),w=!0,l&&_(),_=Q(r,"submit",Z(n[12]))},p:function(n,t){var e=p(t,1)[0],o={};262144&e&&(o.$$scope={dirty:e,ctx:n}),x.$set(o);var i={};64&e&&(i.value=n[6].email),262144&e&&(i.$$scope={dirty:e,ctx:n}),k.$set(i);var u={};262144&e&&(u.$$scope={dirty:e,ctx:n}),E.$set(u),n[3]?O&&(An(),Un(O,1,1,(function(){O=null})),Ln()):O?(O.p(n,e),In(O,1)):((O=Mu(n)).c(),In(O,1),O.m(r,a));var f={};262144&e&&(f.$$scope={dirty:e,ctx:n}),!c&&4&e&&(c=!0,f.checked=n[2],Sn((function(){return c=!1}))),R.$set(f);var d={};262144&e&&(d.$$scope={dirty:e,ctx:n}),!s&&16&e&&(s=!0,d.value=n[4],Sn((function(){return s=!1}))),M.$set(d);var h={};262144&e&&(h.$$scope={dirty:e,ctx:n}),!l&&2&e&&(l=!0,h.value=n[1],Sn((function(){return l=!1}))),j.$set(h);var m={};262144&e&&(m.$$scope={dirty:e,ctx:n}),A.$set(m);var g={};262144&e&&(g.$$scope={dirty:e,ctx:n}),L.$set(g);var v={};262144&e&&(v.$$scope={dirty:e,ctx:n}),I.$set(v),n[3]?z?z.p(n,e):((z=zu()).c(),z.m(r,null)):z&&(z.d(1),z=null)},i:function(n){w||(In(x.$$.fragment,n),In(k.$$.fragment,n),In(E.$$.fragment,n),In(O),In(R.$$.fragment,n),In(M.$$.fragment,n),In(j.$$.fragment,n),In(A.$$.fragment,n),In(L.$$.fragment,n),In(I.$$.fragment,n),In(U.$$.fragment,n),w=!0)},o:function(n){Un(x.$$.fragment,n),Un(k.$$.fragment,n),Un(E.$$.fragment,n),Un(O),Un(R.$$.fragment,n),Un(M.$$.fragment,n),Un(j.$$.fragment,n),Un(A.$$.fragment,n),Un(L.$$.fragment,n),Un(I.$$.fragment,n),Un(U.$$.fragment,n),w=!1},d:function(r){Gn(x,r),r&&K(t),r&&K(e),Gn(k),Gn(E),O&&O.d(),Gn(R),Gn(M),Gn(j),Gn(A),Gn(L),Gn(I),Gn(U),z&&z.d(),n[17](null),_()}}}function Bu(n,t,e){var r,o=gn("user");P(n,o,(function(n){return e(6,r=n)}));var i,a=o.api.operation("updateUser"),c=Object.keys(o.themes).map((function(n){var t=o.themes[n].name,e=Object.keys(o.themes[n].variants||{}).filter((function(n){return"default"!=n}));return e.length&&(t+=" ("+e.sort().join("/")+")"),[n,t]})),u=o.colorScheme,s=o.embedMaker.expandUrlToMedia,f="denied"==o.omnibus.notifyPermission,l=o.theme,d=o.omnibus.wantNotifications,p=o.highlight_keywords.join(", ");return ee.update({title:me("Account")}),a.on("start",(function(n){n.body.password||delete n.body.password,n.body.highlight_keywords=n.body.highlight_keywords.split(/[.,\s]+/).map((function(n){return n.trim()}))})),[i,u,s,f,l,d,r,[["auto","Auto"],["dark","Dark"],["light","Light"]],o,a,c,p,function(n){var t=n.target,r=[t.password.value,t.password_again.value];if(d&&o.omnibus.requestPermissionToNotify((function(n){"denied"==n&&(e(5,d=!1),e(3,f=!0))})),r.join("").length&&r[0]!=r[1])return a.error("Passwords does not match.");o.embedMaker.update({expandUrlToMedia:s}),o.update({colorScheme:u,theme:l}),a.perform(n.target)},function(n){e(5,d=n)},function(n){e(2,s=n)},function(n){e(4,l=n)},function(n){e(1,u=n)},function(n){yn[n?"unshift":"push"]((function(){e(0,i=n)}))}]}var qu=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Cu()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,Bu,Hu,M,{}),r}return u}(Yn);function Fu(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function Ku(n){var t;return{c:function(){(t=W("h1")).textContent="".concat(me("Global settings"))},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Gu(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("User email")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Wu(n){var t,e,r,o,i,a,c,u,s,f,l,d,p,h,m=ge(n[1].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"",g=ge("The link is valid until **%1**.",new Date(n[1].expires).toLocaleString())+"",v=n[1].url+"";return{c:function(){(t=W("h3")).textContent="".concat(me("A link was generated")),e=Y(),r=W("p"),i=Y(),c=Y(),u=W("a"),s=V(v),l=Y(),d=W("p"),(p=W("small")).textContent="".concat(me("Tip: Clicking on the link will copy it to your clipboard.")),o=new cn(m,i),a=new cn(g,null),X(u,"href",f=n[1].url)},m:function(f,m,g){F(f,t,m),F(f,e,m),F(f,r,m),o.m(r),q(r,i),a.m(r),F(f,c,m),F(f,u,m),q(u,s),F(f,l,m),F(f,d,m),q(d,p),g&&h(),h=Q(u,"click",Z(n[5]))},p:function(n,t){2&t&&m!==(m=ge(n[1].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"")&&o.p(m),2&t&&g!==(g=ge("The link is valid until **%1**.",new Date(n[1].expires).toLocaleString())+"")&&a.p(g),2&t&&v!==(v=n[1].url+"")&&tn(s,v),2&t&&f!==(f=n[1].url)&&X(u,"href",f)},d:function(n){n&&K(t),n&&K(e),n&&K(r),n&&K(c),n&&K(u),n&&K(l),n&&K(d),h()}}}function Vu(n){var t,e=me("Generate link")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Yu(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Organization name")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Ju(n){var t;return{c:function(){(t=W("p")).textContent="".concat(me("Can be changed if you want to add a touch of your organization.")),X(t,"class","help"),X(t,"slot","help")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Qu(n){var t;return{c:function(){t=Y()},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Zu(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Organization URL")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function Xu(n){var t;return{c:function(){(t=W("p")).textContent="".concat(me('Used together with "Organization name" to add a link to your organization on the login screen.')),X(t,"class","help"),X(t,"slot","help")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function ns(n){var t;return{c:function(){t=Y()},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function ts(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Admin email")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function es(n){var t;return{c:function(){(t=W("p")).textContent="".concat(me("This email can be used by users to get in touch with the Convos admin.")),X(t,"class","help"),X(t,"slot","help")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function rs(n){var t;return{c:function(){t=Y()},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function os(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Default connection URL")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function is(n){var t;return{c:function(){(t=W("p")).textContent="".concat(me("This is the default connection new users will connect to.")," \n        ").concat(me('The path part is the default channel to join. "%%23convos" means "#convos".')),X(t,"class","help"),X(t,"slot","help")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function as(n){var t;return{c:function(){t=Y()},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function cs(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Force default connection")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function us(n){var t;return{c:function(){(t=W("span")).textContent="".concat(me("Registration is open to public")),X(t,"slot","label")},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function ss(n){var t,e=me("Save settings")+"";return{c:function(){t=V(e)},m:function(n,e){F(n,t,e)},p:O,d:function(n){n&&K(t)}}}function fs(n){var t,e,r,o,i,a,c,u,s,f,l,d,h,m,g,v,$,y,b,w,_,x,k,E,O,S,C,R,D,M,T,P,j,A,L,I=ge("These settings control what users experience when they visit [%1](%1).",process.env.base_url)+"",U=new ea({props:{$$slots:{default:[Ku]},$$scope:{ctx:n}}}),z=new ze({props:{type:"email",name:"email",placeholder:me("user@example.com"),$$slots:{label:[Gu]},$$scope:{ctx:n}}}),H=n[1].url&&Wu(n),B=new It({props:{icon:"save",op:n[2],$$slots:{default:[Vu]},$$scope:{ctx:n}}}),G=new _e({props:{op:n[2]}});function V(t){n[10].call(null,t)}var J={name:"organization_name",placeholder:me("Nordaaker"),$$slots:{default:[Qu],help:[Ju],label:[Yu]},$$scope:{ctx:n}};void 0!==n[0].organization_name&&(J.value=n[0].organization_name);var nn=new ze({props:J});function tn(t){n[11].call(null,t)}yn.push((function(){return qn(nn,"value",V)}));var en={name:"organization_url",placeholder:me("https://convos.by"),$$slots:{default:[ns],help:[Xu],label:[Zu]},$$scope:{ctx:n}};void 0!==n[0].organization_url&&(en.value=n[0].organization_url);var rn=new ze({props:en});function on(t){n[12].call(null,t)}yn.push((function(){return qn(rn,"value",tn)}));var an={name:"contact",placeholder:me("Ex: jhthorsen@cpan.org"),$$slots:{default:[rs],help:[es],label:[ts]},$$scope:{ctx:n}};void 0!==n[0].contact&&(an.value=n[0].contact);var cn=new ze({props:an});function un(t){n[13].call(null,t)}yn.push((function(){return qn(cn,"value",on)}));var sn={name:"default_connection",placeholder:me("irc://chat.freenode.net:6697/%%23convos"),$$slots:{default:[as],help:[is],label:[os]},$$scope:{ctx:n}};void 0!==n[0].default_connection&&(sn.value=n[0].default_connection);var fn=new ze({props:sn});yn.push((function(){return qn(fn,"value",un)}));var ln=new Ft({props:{name:"forced_connection",checked:n[0].forced_connection,$$slots:{label:[cs]},$$scope:{ctx:n}}}),dn=new Ft({props:{name:"open_to_public",checked:n[0].open_to_public,$$slots:{label:[us]},$$scope:{ctx:n}}}),pn=new It({props:{icon:"save",op:n[3],$$slots:{default:[ss]},$$scope:{ctx:n}}}),hn=new _e({props:{op:n[3]}});return{c:function(){Fn(U.$$.fragment),t=Y(),e=W("main"),r=W("form"),(o=W("h2")).textContent="".concat(me("Recover or invite")),i=Y(),(a=W("p")).textContent="".concat(me("Using this form, you can generate an invite link for new users, or a recover password link for existing users.")),c=Y(),Fn(z.$$.fragment),u=Y(),H&&H.c(),s=Y(),f=W("div"),Fn(B.$$.fragment),l=Y(),Fn(G.$$.fragment),d=Y(),h=W("form"),(m=W("h2")).textContent="".concat(me("Convos settings")),g=Y(),v=W("p"),$=Y(),Fn(nn.$$.fragment),b=Y(),Fn(rn.$$.fragment),_=Y(),Fn(cn.$$.fragment),k=Y(),Fn(fn.$$.fragment),O=Y(),Fn(ln.$$.fragment),S=Y(),(C=W("p")).textContent="".concat(me("Tick this box if you want to prevent users from creating custom connections.")),R=Y(),Fn(dn.$$.fragment),D=Y(),(M=W("p")).textContent="".concat(me("Tick this box if you want users to be able to register without an invite URL.")),T=Y(),P=W("div"),Fn(pn.$$.fragment),j=Y(),Fn(hn.$$.fragment),X(f,"class","form-actions"),X(r,"id","recover-or-invite"),X(r,"method","post"),X(C,"class","help"),X(M,"class","help"),X(P,"class","form-actions"),X(h,"id","convos-settings"),X(h,"method","post"),X(e,"class","main")},m:function(p,y,w){Kn(U,p,y),F(p,t,y),F(p,e,y),q(e,r),q(r,o),q(r,i),q(r,a),q(r,c),Kn(z,r,null),q(r,u),H&&H.m(r,null),q(r,s),q(r,f),Kn(B,f,null),q(r,l),Kn(G,r,null),q(e,d),q(e,h),q(h,m),q(h,g),q(h,v),v.innerHTML=I,q(h,$),Kn(nn,h,null),q(h,b),Kn(rn,h,null),q(h,_),Kn(cn,h,null),q(h,k),Kn(fn,h,null),q(h,O),Kn(ln,h,null),q(h,S),q(h,C),q(h,R),Kn(dn,h,null),q(h,D),q(h,M),q(h,T),q(h,P),Kn(pn,P,null),q(h,j),Kn(hn,h,null),A=!0,w&&N(L),L=[Q(r,"submit",Z(n[4])),Q(h,"submit",Z(n[6]))]},p:function(n,t){var e=p(t,1)[0],o={};16384&e&&(o.$$scope={dirty:e,ctx:n}),U.$set(o);var i={};16384&e&&(i.$$scope={dirty:e,ctx:n}),z.$set(i),n[1].url?H?H.p(n,e):((H=Wu(n)).c(),H.m(r,s)):H&&(H.d(1),H=null);var a={};16384&e&&(a.$$scope={dirty:e,ctx:n}),B.$set(a);var c={};16384&e&&(c.$$scope={dirty:e,ctx:n}),!y&&1&e&&(y=!0,c.value=n[0].organization_name,Sn((function(){return y=!1}))),nn.$set(c);var u={};16384&e&&(u.$$scope={dirty:e,ctx:n}),!w&&1&e&&(w=!0,u.value=n[0].organization_url,Sn((function(){return w=!1}))),rn.$set(u);var f={};16384&e&&(f.$$scope={dirty:e,ctx:n}),!x&&1&e&&(x=!0,f.value=n[0].contact,Sn((function(){return x=!1}))),cn.$set(f);var l={};16384&e&&(l.$$scope={dirty:e,ctx:n}),!E&&1&e&&(E=!0,l.value=n[0].default_connection,Sn((function(){return E=!1}))),fn.$set(l);var d={};1&e&&(d.checked=n[0].forced_connection),16384&e&&(d.$$scope={dirty:e,ctx:n}),ln.$set(d);var h={};1&e&&(h.checked=n[0].open_to_public),16384&e&&(h.$$scope={dirty:e,ctx:n}),dn.$set(h);var m={};16384&e&&(m.$$scope={dirty:e,ctx:n}),pn.$set(m)},i:function(n){A||(In(U.$$.fragment,n),In(z.$$.fragment,n),In(B.$$.fragment,n),In(G.$$.fragment,n),In(nn.$$.fragment,n),In(rn.$$.fragment,n),In(cn.$$.fragment,n),In(fn.$$.fragment,n),In(ln.$$.fragment,n),In(dn.$$.fragment,n),In(pn.$$.fragment,n),In(hn.$$.fragment,n),A=!0)},o:function(n){Un(U.$$.fragment,n),Un(z.$$.fragment,n),Un(B.$$.fragment,n),Un(G.$$.fragment,n),Un(nn.$$.fragment,n),Un(rn.$$.fragment,n),Un(cn.$$.fragment,n),Un(fn.$$.fragment,n),Un(ln.$$.fragment,n),Un(dn.$$.fragment,n),Un(pn.$$.fragment,n),Un(hn.$$.fragment,n),A=!1},d:function(n){Gn(U,n),n&&K(t),n&&K(e),Gn(z),H&&H.d(),Gn(B),Gn(G),Gn(nn),Gn(rn),Gn(cn),Gn(fn),Gn(ln),Gn(dn),Gn(pn),Gn(hn),N(L)}}}function ls(n,t,e){var r,o=gn("user"),i=o.api.operation("getSettings"),a=o.api.operation("inviteUser");P(n,a,(function(n){return e(7,r=n)}));var c,u=o.api.operation("updateSettings"),s={};return u.on("start",(function(n){n.body.contact&&(n.body.contact="mailto:"+n.body.contact),n.body.forced_connection=!!n.body.forced_connection,n.body.open_to_public=!!n.body.open_to_public})),ee.update({title:me("Global settings")}),mn(Zn(Jn.mark((function n(){var t;return Jn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.perform();case 2:(t=i.res.body).contact=t.contact.replace(/mailto:/,""),e(0,s=t);case 5:case"end":return n.stop()}}),n)})))),n.$$.update=function(){128&n.$$.dirty&&e(1,c=r.res.body||{})},[s,c,a,u,function(n){a.perform(n.target)},function(n){var t=function(n){var t=document.createElement("textarea");t.value=n.textContent||n.value,t.style.opacity=0,t.style.position="absolute",document.body.appendChild(t);try{t.focus(),t.select(),document.execCommand("copy")}catch(n){t.value="",console.log("copyToClipboard() failed:",n)}return document.body.removeChild(t),t.value}(n.target);t&&o.omnibus.notify("Invite link copied",t,{force:!0})},function(n){u.perform(n.target)},r,o,i,function(n){s.organization_name=n,e(0,s)},function(n){s.organization_url=n,e(0,s)},function(n){s.contact=n,e(0,s)},function(n){s.default_connection=n,e(0,s)}]}var ds=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(Fu()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,ls,fs,M,{}),r}return u}(Yn);function ps(n){return function(t){for(var e=document.querySelectorAll(".js-remove"),r=0;r<e.length;r++)e[r].remove();var o,i,a,c,u=-1==[oo,Go,uu].indexOf(n);o="body",i=/(is-logged-)\S+/,a=u?"in":"out",(c=document.querySelector(o)).className=c.className.replace(i,(function(n,t){return t+a})),t.update({component:n,requireLogin:u}),u&&t.update({lastUrl:location.href})}}function hs(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var ms=new(function(t){c(a,t);var e,r=(e=a,function(){var n,t=i(e);if(hs()){var r=i(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return o(this,n)});function a(){var t;return n(this,a),(t=r.call(this)).prop("rw","height",0),t.prop("rw","width",0),t.prop("ro","isWide",(function(){return t.width>800})),t}return a}($t));function gs(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}var vs=Bn.window;function $s(n){var t,e,r=n[4].component;if(r)var o=new r({});return{c:function(){o&&Fn(o.$$.fragment),t=J()},m:function(n,r){o&&Kn(o,n,r),F(n,t,r),e=!0},p:function(n,e){if(r!==(r=n[4].component)){if(o){An();var i=o;Un(i.$$.fragment,1,0,(function(){Gn(i,1)})),Ln()}r?(Fn((o=new r({})).$$.fragment),In(o.$$.fragment,1),Kn(o,t.parentNode,t)):o=null}},i:function(n){e||(o&&In(o.$$.fragment,n),e=!0)},o:function(n){o&&Un(o.$$.fragment,n),e=!1},d:function(n){n&&K(t),o&&Gn(o,n)}}}function ys(n){var t,e,r,o,i,a=("nav"==n[4].activeMenu||n[5].isWide)&&"default"!=n[4].activeMenu&&ws(n),c="settings"==n[4].activeMenu&&_s(n),u=n[4].component;if(u)var s=new u({});var f=n[4].activeMenu&&!n[5].isWide&&xs(n);return{c:function(){a&&a.c(),t=Y(),c&&c.c(),e=Y(),s&&Fn(s.$$.fragment),r=Y(),f&&f.c(),o=J()},m:function(n,u){a&&a.m(n,u),F(n,t,u),c&&c.m(n,u),F(n,e,u),s&&Kn(s,n,u),F(n,r,u),f&&f.m(n,u),F(n,o,u),i=!0},p:function(n,i){if("nav"!=n[4].activeMenu&&!n[5].isWide||"default"==n[4].activeMenu?a&&(An(),Un(a,1,1,(function(){a=null})),Ln()):a?(a.p(n,i),In(a,1)):((a=ws(n)).c(),In(a,1),a.m(t.parentNode,t)),"settings"==n[4].activeMenu?c?(c.p(n,i),In(c,1)):((c=_s(n)).c(),In(c,1),c.m(e.parentNode,e)):c&&(An(),Un(c,1,1,(function(){c=null})),Ln()),u!==(u=n[4].component)){if(s){An();var l=s;Un(l.$$.fragment,1,0,(function(){Gn(l,1)})),Ln()}u?(Fn((s=new u({})).$$.fragment),In(s.$$.fragment,1),Kn(s,r.parentNode,r)):s=null}n[4].activeMenu&&!n[5].isWide?f?(f.p(n,i),In(f,1)):((f=xs(n)).c(),In(f,1),f.m(o.parentNode,o)):f&&(An(),Un(f,1,1,(function(){f=null})),Ln())},i:function(n){i||(In(a),In(c),s&&In(s.$$.fragment,n),In(f),i=!0)},o:function(n){Un(a),Un(c),s&&Un(s.$$.fragment,n),Un(f),i=!1},d:function(n){a&&a.d(n),n&&K(t),c&&c.d(n),n&&K(e),s&&Gn(s,n),n&&K(r),f&&f.d(n),n&&K(o)}}}function bs(n){var t,e=new oo({props:{status:"offline"}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:O,i:function(n){t||(In(e.$$.fragment,n),t=!0)},o:function(n){Un(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function ws(n){var t,e=new vi({props:{transition:{duration:n[5].isWide?0:250,x:n[5].width}}});return{c:function(){Fn(e.$$.fragment)},m:function(n,r){Kn(e,n,r),t=!0},p:function(n,t){var r={};32&t&&(r.transition={duration:n[5].isWide?0:250,x:n[5].width}),e.$set(r)},i:function(n){t||(In(e.$$.fragment,n),t=!0)},o:function(n){Un(e.$$.fragment,n),t=!1},d:function(n){Gn(e,n)}}}function _s(n){var t,e,r=n[2];function o(n){return{props:{dialog:n[3].activeDialog,transition:{duration:250,x:n[5].isWide?0:n[5].width}}}}if(r)var i=new r(o(n));return{c:function(){i&&Fn(i.$$.fragment),t=J()},m:function(n,r){i&&Kn(i,n,r),F(n,t,r),e=!0},p:function(n,e){var a={};if(8&e&&(a.dialog=n[3].activeDialog),32&e&&(a.transition={duration:250,x:n[5].isWide?0:n[5].width}),r!==(r=n[2])){if(i){An();var c=i;Un(c.$$.fragment,1,0,(function(){Gn(c,1)})),Ln()}r?(Fn((i=new r(o(n))).$$.fragment),In(i.$$.fragment,1),Kn(i,t.parentNode,t)):i=null}else r&&i.$set(a)},i:function(n){e||(i&&In(i.$$.fragment,n),e=!0)},o:function(n){i&&Un(i.$$.fragment,n),e=!1},d:function(n){n&&K(t),i&&Gn(i,n)}}}function xs(n){var t,e,r,o;return{c:function(){(t=W("div")).textContent=" ",X(t,"class","overlay")},m:function(e,i,a){F(e,t,i),r=!0,a&&o(),o=Q(t,"click",n[10])},p:O,i:function(n){r||(On((function(){e||(e=Hn(t,pr,{duration:200},!0)),e.run(1)})),r=!0)},o:function(n){e||(e=Hn(t,pr,{duration:200},!1)),e.run(0),r=!1},d:function(n){n&&K(t),n&&e&&e.end(),o()}}}function ks(n){var t,e,r,o,i,a,c;On(n[9]);var u=[bs,ys,$s],s=[];function f(n,r){return 8&r&&(t=!!n[3].is("offline")),t?0:(24&r&&(e=!!(n[4].component&&n[4].requireLogin&&n[3].is("authenticated"))),e?1:2)}return r=f(n,-1),o=s[r]=u[r](n),{c:function(){o.c(),i=J()},m:function(t,e,o){s[r].m(t,e),F(t,i,e),a=!0,o&&N(c),c=[Q(vs,"focus",n[8]),Q(vs,"keydown",Es),Q(vs,"resize",n[9])]},p:function(n,t){var e=p(t,1)[0],a=r;(r=f(n,e))===a?s[r].p(n,e):(An(),Un(s[a],1,1,(function(){s[a]=null})),Ln(),(o=s[r])||(o=s[r]=u[r](n)).c(),In(o,1),o.m(i.parentNode,i))},i:function(n){a||(In(o),a=!0)},o:function(n){Un(o),a=!1},d:function(n){s[r].d(n),n&&K(i),N(c)}}}function Es(n){if(27==n.keyCode)return it("chat_input"),void ft(document,".fullscreen-media-wrapper",(function(n){return dt(n,!1)}));n.shiftKey&&13==n.keyCode&&(n.preventDefault(),it())}function Os(n,t,e){var r,o,i;P(n,ee,(function(n){return e(4,o=n)})),P(n,ms,(function(n){return e(5,i=n)}));var a=new wt(process.env.api_url,{debug:!0}),c=new Ji({api:a,isFirst:process.env.first_user,themes:process.env.themes});P(n,c,(function(n){return e(3,r=n)}));var u,s,f=0,l=0;u="user",s=c,hn().$$.context.set(u,s),window.hljs=io,ee.update({baseUrl:process.env.base_url}),function(n,t){n.to("/login",ps(Go)),n.to("/register",ps(Go)),n.to("/help",ps(iu)),n.to("/settings/account",ps(qu)),n.to("/settings/connection",ps(Ec)),n.to("/settings/conversation",ps(Vc)),n.to("/settings",ps(ds)),n.to("/search",ps(Su)),n.to("/chat",ps(Su)),n.to("/chat/:connection_id",ps(bc)),n.to("/chat/:connection_id/:dialog_id",ps(bc));var e=function(){};n.to("/docs/*",e),n.to("/file/*",e),n.to("/paste/*",e),n.to("/",ps(uu)),n.to("*",ps(oo)),function(n,t){t.omnibus.on("wsEventSentJoin",(function(t){n.go(n.dialogPath(t))})),t.omnibus.on("wsEventSentPart",(function(e){var r=t.findDialog({connection_id:e.connection_id});if(!r)return n.go("/settings/connection");var o=r.dialogs.toArray()[0];n.go(o?o.path:"/settings/conversation")}))}(n,t)}(ee,c),c.on("update",(function(n,t){return t.hasOwnProperty("roles")&&ee.render()})),c.omnibus.start({route:ee,wsUrl:process.env.ws_url}),mn((function(){ut(ee.urlFor("/images/emojis.js")),c.showGrid&&document.querySelector("body").classList.add("with-grid"),c.load(process.env.load_user)}));var d;return n.$$.update=function(){8&n.$$.dirty&&e(2,d=r.activeDialog.connection_id?r.activeDialog.dialog_id?Vr:_r:null),3&n.$$.dirty&&ms.update({height:f,width:l}),24&n.$$.dirty&&document&&(document.title=r.unread?"("+r.unread+") "+o.title:o.title)},[f,l,d,r,o,i,c,a,function(){return c.email&&c.omnibus.send("ping")},function(){e(0,f=vs.innerHeight),e(1,l=vs.innerWidth)},function(){return o.update({activeMenu:""})}]}var Ss=function(e){c(u,e);var r,a=(r=u,function(){var n,t=i(r);if(gs()){var e=i(this).constructor;n=Reflect.construct(t,arguments,e)}else n=t.apply(this,arguments);return o(this,n)});function u(e){var r;return n(this,u),r=a.call(this),Vn(t(r),e,Os,ks,M,{}),r}return u}(Yn),Cs=document.querySelector("body");new Ss({target:document.body});Cs.classList=Cs.className.replace(/no-js/,"has-js")}();
//# sourceMappingURL=convos.5ebde537.js.map
