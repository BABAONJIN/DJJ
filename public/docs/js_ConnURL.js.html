<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: js/ConnURL.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: js/ConnURL.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * ConnURL can be used to represent an URL that does not start with "http" or
 * "https".
 *
 * @exports ConnURL
 * @class ConnURL
 * @extends URL
 */

export default class ConnURL extends URL {
  constructor(str) {
    const protocol = str.match(/^\w+:/)[0];
    super(str.replace(/^\w+:/, 'http:')); // new URL() does not understand "irc:" protocol
    this.connProtocol = protocol;
  }

  /**
   * fromForm() can be used to copy connection parameters from a form to the URL.
   *
   * @memberof ConnURL
   * @param {HTMLFormElement} form A form element, with input fields.
   * @return {this}
   */
  fromForm(form) {
    const server = form.server.value;
    if (form.nick.value.length) this.searchParams.append('nick', form.nick.value);
    this.searchParams.append('tls', form.tls.checked ? '1' : '0');
    this.searchParams.append('tls_verify', form.tls_verify &amp;&amp; form.tls_verify.checked ? '1' : '0');
    this.host = server.match(/:\d+$/) ? server : server + ':6667';
    this.password = form.password.value;
    this.username = form.username.value;
    return this;
  }

  /**
   * Will return a string with the custom protocol.
   *
   * @memberof ConnURL
   */
  toString() {
    return this.href.replace(/^http:/, this.connProtocol);
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-i18n.html">i18n</a></li><li><a href="module-md.html">md</a></li><li><a href="module-util.html">util</a></li></ul><h3>Classes</h3><ul><li><a href="Api.html">Api</a></li><li><a href="ConnURL.html">ConnURL</a></li><li><a href="Operation.html">Operation</a></li><li><a href="Reactive.html">Reactive</a></li><li><a href="SortedMap.html">SortedMap</a></li><li><a href="Time.html">Time</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Mon Oct 28 2019 10:36:26 GMT+0900 (Japan Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
